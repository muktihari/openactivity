var Ax=Object.defineProperty;var Lx=(e,t,n)=>t in e?Ax(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ce=(e,t,n)=>(Lx(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function sh(e,t){const n=Object.create(null),i=e.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const zt={},As=[],on=()=>{},Fx=()=>!1,Px=/^on[^a-z]/,Tl=e=>Px.test(e),rh=e=>e.startsWith("onUpdate:"),ae=Object.assign,oh=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Dx=Object.prototype.hasOwnProperty,St=(e,t)=>Dx.call(e,t),lt=Array.isArray,Ls=e=>Cl(e)==="[object Map]",n_=e=>Cl(e)==="[object Set]",ft=e=>typeof e=="function",ne=e=>typeof e=="string",ah=e=>typeof e=="symbol",Yt=e=>e!==null&&typeof e=="object",i_=e=>Yt(e)&&ft(e.then)&&ft(e.catch),s_=Object.prototype.toString,Cl=e=>s_.call(e),kx=e=>Cl(e).slice(8,-1),r_=e=>Cl(e)==="[object Object]",lh=e=>ne(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,xa=sh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sl=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Nx=/-(\w)/g,Tn=Sl(e=>e.replace(Nx,(t,n)=>n?n.toUpperCase():"")),Gx=/\B([A-Z])/g,ar=Sl(e=>e.replace(Gx,"-$1").toLowerCase()),Rl=Sl(e=>e.charAt(0).toUpperCase()+e.slice(1)),fc=Sl(e=>e?`on${Rl(e)}`:""),qr=(e,t)=>!Object.is(e,t),dc=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Oa=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Ux=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Hf;const Qc=()=>Hf||(Hf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ch(e){if(lt(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],s=ne(i)?Yx(i):ch(i);if(s)for(const r in s)t[r]=s[r]}return t}else{if(ne(e))return e;if(Yt(e))return e}}const $x=/;(?![^(]*\))/g,Wx=/:([^]+)/,zx=/\/\*[^]*?\*\//g;function Yx(e){const t={};return e.replace(zx,"").split($x).forEach(n=>{if(n){const i=n.split(Wx);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function uh(e){let t="";if(ne(e))t=e;else if(lt(e))for(let n=0;n<e.length;n++){const i=uh(e[n]);i&&(t+=i+" ")}else if(Yt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Vx="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xx=sh(Vx);function o_(e){return!!e||e===""}const Tt=e=>ne(e)?e:e==null?"":lt(e)||Yt(e)&&(e.toString===s_||!ft(e.toString))?JSON.stringify(e,a_,2):String(e),a_=(e,t)=>t&&t.__v_isRef?a_(e,t.value):Ls(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,s])=>(n[`${i} =>`]=s,n),{})}:n_(t)?{[`Set(${t.size})`]:[...t.values()]}:Yt(t)&&!lt(t)&&!r_(t)?String(t):t;let Je;class l_{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Je,!t&&Je&&(this.index=(Je.scopes||(Je.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Je;try{return Je=this,t()}finally{Je=n}}}on(){Je=this}off(){Je=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Hx(e){return new l_(e)}function Bx(e,t=Je){t&&t.active&&t.effects.push(e)}function Zx(){return Je}const hh=e=>{const t=new Set(e);return t.w=0,t.n=0,t},c_=e=>(e.w&yi)>0,u_=e=>(e.n&yi)>0,jx=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=yi},Kx=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const s=t[i];c_(s)&&!u_(s)?s.delete(e):t[n++]=s,s.w&=~yi,s.n&=~yi}t.length=n}},tu=new WeakMap;let Fr=0,yi=1;const eu=30;let tn;const Yi=Symbol(""),nu=Symbol("");class fh{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Bx(this,i)}run(){if(!this.active)return this.fn();let t=tn,n=_i;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=tn,tn=this,_i=!0,yi=1<<++Fr,Fr<=eu?jx(this):Bf(this),this.fn()}finally{Fr<=eu&&Kx(this),yi=1<<--Fr,tn=this.parent,_i=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){tn===this?this.deferStop=!0:this.active&&(Bf(this),this.onStop&&this.onStop(),this.active=!1)}}function Bf(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let _i=!0;const h_=[];function lr(){h_.push(_i),_i=!1}function cr(){const e=h_.pop();_i=e===void 0?!0:e}function Me(e,t,n){if(_i&&tn){let i=tu.get(e);i||tu.set(e,i=new Map);let s=i.get(n);s||i.set(n,s=hh()),f_(s)}}function f_(e,t){let n=!1;Fr<=eu?u_(e)||(e.n|=yi,n=!c_(e)):n=!e.has(tn),n&&(e.add(tn),tn.deps.push(e))}function Yn(e,t,n,i,s,r){const o=tu.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&lt(e)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":lt(e)?lh(n)&&a.push(o.get("length")):(a.push(o.get(Yi)),Ls(e)&&a.push(o.get(nu)));break;case"delete":lt(e)||(a.push(o.get(Yi)),Ls(e)&&a.push(o.get(nu)));break;case"set":Ls(e)&&a.push(o.get(Yi));break}if(a.length===1)a[0]&&iu(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);iu(hh(l))}}function iu(e,t){const n=lt(e)?e:[...e];for(const i of n)i.computed&&Zf(i);for(const i of n)i.computed||Zf(i)}function Zf(e,t){(e!==tn||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const qx=sh("__proto__,__v_isRef,__isVue"),d_=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ah)),Jx=dh(),Qx=dh(!1,!0),t1=dh(!0),jf=e1();function e1(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=At(this);for(let r=0,o=this.length;r<o;r++)Me(i,"get",r+"");const s=i[t](...n);return s===-1||s===!1?i[t](...n.map(At)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){lr();const i=At(this)[t].apply(this,n);return cr(),i}}),e}function n1(e){const t=At(this);return Me(t,"has",e),t.hasOwnProperty(e)}function dh(e=!1,t=!1){return function(i,s,r){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&r===(e?t?y1:y_:t?p_:__).get(i))return i;const o=lt(i);if(!e){if(o&&St(jf,s))return Reflect.get(jf,s,r);if(s==="hasOwnProperty")return n1}const a=Reflect.get(i,s,r);return(ah(s)?d_.has(s):qx(s))||(e||Me(i,"get",s),t)?a:ye(a)?o&&lh(s)?a:a.value:Yt(a)?e?v_(a):bl(a):a}}const i1=g_(),s1=g_(!0);function g_(e=!1){return function(n,i,s,r){let o=n[i];if(Ws(o)&&ye(o)&&!ye(s))return!1;if(!e&&(!Aa(s)&&!Ws(s)&&(o=At(o),s=At(s)),!lt(n)&&ye(o)&&!ye(s)))return o.value=s,!0;const a=lt(n)&&lh(i)?Number(i)<n.length:St(n,i),l=Reflect.set(n,i,s,r);return n===At(r)&&(a?qr(s,o)&&Yn(n,"set",i,s):Yn(n,"add",i,s)),l}}function r1(e,t){const n=St(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Yn(e,"delete",t,void 0),i}function o1(e,t){const n=Reflect.has(e,t);return(!ah(t)||!d_.has(t))&&Me(e,"has",t),n}function a1(e){return Me(e,"iterate",lt(e)?"length":Yi),Reflect.ownKeys(e)}const m_={get:Jx,set:i1,deleteProperty:r1,has:o1,ownKeys:a1},l1={get:t1,set(e,t){return!0},deleteProperty(e,t){return!0}},c1=ae({},m_,{get:Qx,set:s1}),gh=e=>e,Il=e=>Reflect.getPrototypeOf(e);function Vo(e,t,n=!1,i=!1){e=e.__v_raw;const s=At(e),r=At(t);n||(t!==r&&Me(s,"get",t),Me(s,"get",r));const{has:o}=Il(s),a=i?gh:n?yh:Jr;if(o.call(s,t))return a(e.get(t));if(o.call(s,r))return a(e.get(r));e!==s&&e.get(t)}function Xo(e,t=!1){const n=this.__v_raw,i=At(n),s=At(e);return t||(e!==s&&Me(i,"has",e),Me(i,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Ho(e,t=!1){return e=e.__v_raw,!t&&Me(At(e),"iterate",Yi),Reflect.get(e,"size",e)}function Kf(e){e=At(e);const t=At(this);return Il(t).has.call(t,e)||(t.add(e),Yn(t,"add",e,e)),this}function qf(e,t){t=At(t);const n=At(this),{has:i,get:s}=Il(n);let r=i.call(n,e);r||(e=At(e),r=i.call(n,e));const o=s.call(n,e);return n.set(e,t),r?qr(t,o)&&Yn(n,"set",e,t):Yn(n,"add",e,t),this}function Jf(e){const t=At(this),{has:n,get:i}=Il(t);let s=n.call(t,e);s||(e=At(e),s=n.call(t,e)),i&&i.call(t,e);const r=t.delete(e);return s&&Yn(t,"delete",e,void 0),r}function Qf(){const e=At(this),t=e.size!==0,n=e.clear();return t&&Yn(e,"clear",void 0,void 0),n}function Bo(e,t){return function(i,s){const r=this,o=r.__v_raw,a=At(o),l=t?gh:e?yh:Jr;return!e&&Me(a,"iterate",Yi),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function Zo(e,t,n){return function(...i){const s=this.__v_raw,r=At(s),o=Ls(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...i),u=n?gh:t?yh:Jr;return!t&&Me(r,"iterate",l?nu:Yi),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function qn(e){return function(...t){return e==="delete"?!1:this}}function u1(){const e={get(r){return Vo(this,r)},get size(){return Ho(this)},has:Xo,add:Kf,set:qf,delete:Jf,clear:Qf,forEach:Bo(!1,!1)},t={get(r){return Vo(this,r,!1,!0)},get size(){return Ho(this)},has:Xo,add:Kf,set:qf,delete:Jf,clear:Qf,forEach:Bo(!1,!0)},n={get(r){return Vo(this,r,!0)},get size(){return Ho(this,!0)},has(r){return Xo.call(this,r,!0)},add:qn("add"),set:qn("set"),delete:qn("delete"),clear:qn("clear"),forEach:Bo(!0,!1)},i={get(r){return Vo(this,r,!0,!0)},get size(){return Ho(this,!0)},has(r){return Xo.call(this,r,!0)},add:qn("add"),set:qn("set"),delete:qn("delete"),clear:qn("clear"),forEach:Bo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Zo(r,!1,!1),n[r]=Zo(r,!0,!1),t[r]=Zo(r,!1,!0),i[r]=Zo(r,!0,!0)}),[e,n,t,i]}const[h1,f1,d1,g1]=u1();function mh(e,t){const n=t?e?g1:d1:e?f1:h1;return(i,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(St(n,s)&&s in i?n:i,s,r)}const m1={get:mh(!1,!1)},_1={get:mh(!1,!0)},p1={get:mh(!0,!1)},__=new WeakMap,p_=new WeakMap,y_=new WeakMap,y1=new WeakMap;function x1(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function v1(e){return e.__v_skip||!Object.isExtensible(e)?0:x1(kx(e))}function bl(e){return Ws(e)?e:_h(e,!1,m_,m1,__)}function x_(e){return _h(e,!1,c1,_1,p_)}function v_(e){return _h(e,!0,l1,p1,y_)}function _h(e,t,n,i,s){if(!Yt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const o=v1(e);if(o===0)return e;const a=new Proxy(e,o===2?i:n);return s.set(e,a),a}function Fs(e){return Ws(e)?Fs(e.__v_raw):!!(e&&e.__v_isReactive)}function Ws(e){return!!(e&&e.__v_isReadonly)}function Aa(e){return!!(e&&e.__v_isShallow)}function w_(e){return Fs(e)||Ws(e)}function At(e){const t=e&&e.__v_raw;return t?At(t):e}function ph(e){return Oa(e,"__v_skip",!0),e}const Jr=e=>Yt(e)?bl(e):e,yh=e=>Yt(e)?v_(e):e;function E_(e){_i&&tn&&(e=At(e),f_(e.dep||(e.dep=hh())))}function T_(e,t){e=At(e);const n=e.dep;n&&iu(n)}function ye(e){return!!(e&&e.__v_isRef===!0)}function ur(e){return C_(e,!1)}function w1(e){return C_(e,!0)}function C_(e,t){return ye(e)?e:new E1(e,t)}class E1{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:At(t),this._value=n?t:Jr(t)}get value(){return E_(this),this._value}set value(t){const n=this.__v_isShallow||Aa(t)||Ws(t);t=n?t:At(t),qr(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Jr(t),T_(this))}}function Vi(e){return ye(e)?e.value:e}const T1={get:(e,t,n)=>Vi(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const s=e[t];return ye(s)&&!ye(n)?(s.value=n,!0):Reflect.set(e,t,n,i)}};function S_(e){return Fs(e)?e:new Proxy(e,T1)}class C1{constructor(t,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new fh(t,()=>{this._dirty||(this._dirty=!0,T_(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const t=At(this);return E_(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function S1(e,t,n=!1){let i,s;const r=ft(e);return r?(i=e,s=on):(i=e.get,s=e.set),new C1(i,s,r||!s,n)}function pi(e,t,n,i){let s;try{s=i?e(...i):e()}catch(r){Ml(r,t,n)}return s}function an(e,t,n,i){if(ft(e)){const r=pi(e,t,n,i);return r&&i_(r)&&r.catch(o=>{Ml(o,t,n)}),r}const s=[];for(let r=0;r<e.length;r++)s.push(an(e[r],t,n,i));return s}function Ml(e,t,n,i=!0){const s=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,a=n;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){pi(l,null,10,[e,o,a]);return}}R1(e,n,s,i)}function R1(e,t,n,i=!0){console.error(e)}let Qr=!1,su=!1;const _e=[];let _n=0;const Ps=[];let Fn=null,Fi=0;const R_=Promise.resolve();let xh=null;function I_(e){const t=xh||R_;return e?t.then(this?e.bind(this):e):t}function I1(e){let t=_n+1,n=_e.length;for(;t<n;){const i=t+n>>>1;to(_e[i])<e?t=i+1:n=i}return t}function vh(e){(!_e.length||!_e.includes(e,Qr&&e.allowRecurse?_n+1:_n))&&(e.id==null?_e.push(e):_e.splice(I1(e.id),0,e),b_())}function b_(){!Qr&&!su&&(su=!0,xh=R_.then(O_))}function b1(e){const t=_e.indexOf(e);t>_n&&_e.splice(t,1)}function M1(e){lt(e)?Ps.push(...e):(!Fn||!Fn.includes(e,e.allowRecurse?Fi+1:Fi))&&Ps.push(e),b_()}function td(e,t=Qr?_n+1:0){for(;t<_e.length;t++){const n=_e[t];n&&n.pre&&(_e.splice(t,1),t--,n())}}function M_(e){if(Ps.length){const t=[...new Set(Ps)];if(Ps.length=0,Fn){Fn.push(...t);return}for(Fn=t,Fn.sort((n,i)=>to(n)-to(i)),Fi=0;Fi<Fn.length;Fi++)Fn[Fi]();Fn=null,Fi=0}}const to=e=>e.id==null?1/0:e.id,O1=(e,t)=>{const n=to(e)-to(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function O_(e){su=!1,Qr=!0,_e.sort(O1);const t=on;try{for(_n=0;_n<_e.length;_n++){const n=_e[_n];n&&n.active!==!1&&pi(n,null,14)}}finally{_n=0,_e.length=0,M_(),Qr=!1,xh=null,(_e.length||Ps.length)&&O_()}}function A1(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||zt;let s=n;const r=t.startsWith("update:"),o=r&&t.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=i[u]||zt;f&&(s=n.map(d=>ne(d)?d.trim():d)),h&&(s=n.map(Ux))}let a,l=i[a=fc(t)]||i[a=fc(Tn(t))];!l&&r&&(l=i[a=fc(ar(t))]),l&&an(l,e,6,s);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,an(c,e,6,s)}}function A_(e,t,n=!1){const i=t.emitsCache,s=i.get(e);if(s!==void 0)return s;const r=e.emits;let o={},a=!1;if(!ft(e)){const l=c=>{const u=A_(c,t,!0);u&&(a=!0,ae(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Yt(e)&&i.set(e,null),null):(lt(r)?r.forEach(l=>o[l]=null):ae(o,r),Yt(e)&&i.set(e,o),o)}function Ol(e,t){return!e||!Tl(t)?!1:(t=t.slice(2).replace(/Once$/,""),St(e,t[0].toLowerCase()+t.slice(1))||St(e,ar(t))||St(e,t))}let Ye=null,L_=null;function La(e){const t=Ye;return Ye=e,L_=e&&e.type.__scopeId||null,t}function L1(e,t=Ye,n){if(!t||e._n)return e;const i=(...s)=>{i._d&&hd(-1);const r=La(t);let o;try{o=e(...s)}finally{La(r),i._d&&hd(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function gc(e){const{type:t,vnode:n,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:f,setupState:d,ctx:g,inheritAttrs:m}=e;let p,y;const x=La(e);try{if(n.shapeFlag&4){const w=s||i;p=mn(u.call(w,w,h,r,d,f,g)),y=l}else{const w=t;p=mn(w.length>1?w(r,{attrs:l,slots:a,emit:c}):w(r,null)),y=t.props?l:F1(l)}}catch(w){Vr.length=0,Ml(w,e,1),p=he(Ji)}let E=p;if(y&&m!==!1){const w=Object.keys(y),{shapeFlag:S}=E;w.length&&S&7&&(o&&w.some(rh)&&(y=P1(y,o)),E=zs(E,y))}return n.dirs&&(E=zs(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),p=E,La(x),p}const F1=e=>{let t;for(const n in e)(n==="class"||n==="style"||Tl(n))&&((t||(t={}))[n]=e[n]);return t},P1=(e,t)=>{const n={};for(const i in e)(!rh(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function D1(e,t,n){const{props:i,children:s,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?ed(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==i[f]&&!Ol(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?ed(i,o,c):!0:!!o;return!1}function ed(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==e[r]&&!Ol(n,r))return!0}return!1}function k1({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const N1=e=>e.__isSuspense;function G1(e,t){t&&t.pendingBranch?lt(e)?t.effects.push(...e):t.effects.push(e):M1(e)}const jo={};function Ds(e,t,n){return F_(e,t,n)}function F_(e,t,{immediate:n,deep:i,flush:s,onTrack:r,onTrigger:o}=zt){var a;const l=Zx()===((a=ue)==null?void 0:a.scope)?ue:null;let c,u=!1,h=!1;if(ye(e)?(c=()=>e.value,u=Aa(e)):Fs(e)?(c=()=>e,i=!0):lt(e)?(h=!0,u=e.some(w=>Fs(w)||Aa(w)),c=()=>e.map(w=>{if(ye(w))return w.value;if(Fs(w))return ki(w);if(ft(w))return pi(w,l,2)})):ft(e)?t?c=()=>pi(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return f&&f(),an(e,l,3,[d])}:c=on,t&&i){const w=c;c=()=>ki(w())}let f,d=w=>{f=x.onStop=()=>{pi(w,l,4)}},g;if(no)if(d=on,t?n&&an(t,l,3,[c(),h?[]:void 0,d]):c(),s==="sync"){const w=Lv();g=w.__watcherHandles||(w.__watcherHandles=[])}else return on;let m=h?new Array(e.length).fill(jo):jo;const p=()=>{if(x.active)if(t){const w=x.run();(i||u||(h?w.some((S,C)=>qr(S,m[C])):qr(w,m)))&&(f&&f(),an(t,l,3,[w,m===jo?void 0:h&&m[0]===jo?[]:m,d]),m=w)}else x.run()};p.allowRecurse=!!t;let y;s==="sync"?y=p:s==="post"?y=()=>Ce(p,l&&l.suspense):(p.pre=!0,l&&(p.id=l.uid),y=()=>vh(p));const x=new fh(c,y);t?n?p():m=x.run():s==="post"?Ce(x.run.bind(x),l&&l.suspense):x.run();const E=()=>{x.stop(),l&&l.scope&&oh(l.scope.effects,x)};return g&&g.push(E),E}function U1(e,t,n){const i=this.proxy,s=ne(e)?e.includes(".")?P_(i,e):()=>i[e]:e.bind(i,i);let r;ft(t)?r=t:(r=t.handler,n=t);const o=ue;Ys(this);const a=F_(s,r.bind(i),n);return o?Ys(o):Xi(),a}function P_(e,t){const n=t.split(".");return()=>{let i=e;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function ki(e,t){if(!Yt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ye(e))ki(e.value,t);else if(lt(e))for(let n=0;n<e.length;n++)ki(e[n],t);else if(n_(e)||Ls(e))e.forEach(n=>{ki(n,t)});else if(r_(e))for(const n in e)ki(e[n],t);return e}function PN(e,t){const n=Ye;if(n===null)return e;const i=Pl(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,a,l,c=zt]=t[r];o&&(ft(o)&&(o={mounted:o,updated:o}),o.deep&&ki(a),s.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Si(e,t,n,i){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(lr(),an(l,n,8,[e.el,a,e,t]),cr())}}function xo(e,t){return ft(e)?(()=>ae({name:e.name},t,{setup:e}))():e}const va=e=>!!e.type.__asyncLoader,D_=e=>e.type.__isKeepAlive;function $1(e,t){k_(e,"a",t)}function W1(e,t){k_(e,"da",t)}function k_(e,t,n=ue){const i=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Al(t,i,n),n){let s=n.parent;for(;s&&s.parent;)D_(s.parent.vnode)&&z1(i,t,n,s),s=s.parent}}function z1(e,t,n,i){const s=Al(t,e,i,!0);N_(()=>{oh(i[t],s)},n)}function Al(e,t,n=ue,i=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;lr(),Ys(n);const a=an(t,n,e,o);return Xi(),cr(),a});return i?s.unshift(r):s.push(r),r}}const jn=e=>(t,n=ue)=>(!no||e==="sp")&&Al(e,(...i)=>t(...i),n),Y1=jn("bm"),V1=jn("m"),X1=jn("bu"),H1=jn("u"),B1=jn("bum"),N_=jn("um"),Z1=jn("sp"),j1=jn("rtg"),K1=jn("rtc");function q1(e,t=ue){Al("ec",e,t)}const G_="components";function DN(e,t){return Q1(G_,e,!0,t)||e}const J1=Symbol.for("v-ndc");function Q1(e,t,n=!0,i=!1){const s=Ye||ue;if(s){const r=s.type;if(e===G_){const a=Mv(r,!1);if(a&&(a===t||a===Tn(t)||a===Rl(Tn(t))))return r}const o=nd(s[e]||r[e],t)||nd(s.appContext[e],t);return!o&&i?r:o}}function nd(e,t){return e&&(e[t]||e[Tn(t)]||e[Rl(Tn(t))])}function tv(e,t,n,i){let s;const r=n&&n[i];if(lt(e)||ne(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,r&&r[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,r&&r[o])}else if(Yt(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,r&&r[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(e[c],c,a,r&&r[a])}}else s=[];return n&&(n[i]=s),s}const ru=e=>e?K_(e)?Pl(e)||e.proxy:ru(e.parent):null,Yr=ae(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ru(e.parent),$root:e=>ru(e.root),$emit:e=>e.emit,$options:e=>wh(e),$forceUpdate:e=>e.f||(e.f=()=>vh(e.update)),$nextTick:e=>e.n||(e.n=I_.bind(e.proxy)),$watch:e=>U1.bind(e)}),mc=(e,t)=>e!==zt&&!e.__isScriptSetup&&St(e,t),ev={get({_:e},t){const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(mc(i,t))return o[t]=1,i[t];if(s!==zt&&St(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&St(c,t))return o[t]=3,r[t];if(n!==zt&&St(n,t))return o[t]=4,n[t];ou&&(o[t]=0)}}const u=Yr[t];let h,f;if(u)return t==="$attrs"&&Me(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==zt&&St(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,St(f,t))return f[t]},set({_:e},t,n){const{data:i,setupState:s,ctx:r}=e;return mc(s,t)?(s[t]=n,!0):i!==zt&&St(i,t)?(i[t]=n,!0):St(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!n[o]||e!==zt&&St(e,o)||mc(t,o)||(a=r[0])&&St(a,o)||St(i,o)||St(Yr,o)||St(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:St(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function id(e){return lt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ou=!0;function nv(e){const t=wh(e),n=e.proxy,i=e.ctx;ou=!1,t.beforeCreate&&sd(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:g,activated:m,deactivated:p,beforeDestroy:y,beforeUnmount:x,destroyed:E,unmounted:w,render:S,renderTracked:C,renderTriggered:I,errorCaptured:L,serverPrefetch:B,expose:F,inheritAttrs:N,components:j,directives:K,filters:ct}=t;if(c&&iv(c,i,null),o)for(const D in o){const H=o[D];ft(H)&&(i[D]=H.bind(n))}if(s){const D=s.call(n,n);Yt(D)&&(e.data=bl(D))}if(ou=!0,r)for(const D in r){const H=r[D],st=ft(H)?H.bind(n,n):ft(H.get)?H.get.bind(n,n):on,dt=!ft(H)&&ft(H.set)?H.set.bind(n):on,bt=en({get:st,set:dt});Object.defineProperty(i,D,{enumerable:!0,configurable:!0,get:()=>bt.value,set:k=>bt.value=k})}if(a)for(const D in a)U_(a[D],i,n,D);if(l){const D=ft(l)?l.call(n):l;Reflect.ownKeys(D).forEach(H=>{wa(H,D[H])})}u&&sd(u,e,"c");function V(D,H){lt(H)?H.forEach(st=>D(st.bind(n))):H&&D(H.bind(n))}if(V(Y1,h),V(V1,f),V(X1,d),V(H1,g),V($1,m),V(W1,p),V(q1,L),V(K1,C),V(j1,I),V(B1,x),V(N_,w),V(Z1,B),lt(F))if(F.length){const D=e.exposed||(e.exposed={});F.forEach(H=>{Object.defineProperty(D,H,{get:()=>n[H],set:st=>n[H]=st})})}else e.exposed||(e.exposed={});S&&e.render===on&&(e.render=S),N!=null&&(e.inheritAttrs=N),j&&(e.components=j),K&&(e.directives=K)}function iv(e,t,n=on){lt(e)&&(e=au(e));for(const i in e){const s=e[i];let r;Yt(s)?"default"in s?r=Un(s.from||i,s.default,!0):r=Un(s.from||i):r=Un(s),ye(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function sd(e,t,n){an(lt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function U_(e,t,n,i){const s=i.includes(".")?P_(n,i):()=>n[i];if(ne(e)){const r=t[e];ft(r)&&Ds(s,r)}else if(ft(e))Ds(s,e.bind(n));else if(Yt(e))if(lt(e))e.forEach(r=>U_(r,t,n,i));else{const r=ft(e.handler)?e.handler.bind(n):t[e.handler];ft(r)&&Ds(s,r,e)}}function wh(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!n&&!i?l=t:(l={},s.length&&s.forEach(c=>Fa(l,c,o,!0)),Fa(l,t,o)),Yt(t)&&r.set(t,l),l}function Fa(e,t,n,i=!1){const{mixins:s,extends:r}=t;r&&Fa(e,r,n,!0),s&&s.forEach(o=>Fa(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=sv[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const sv={data:rd,props:od,emits:od,methods:Pr,computed:Pr,beforeCreate:xe,created:xe,beforeMount:xe,mounted:xe,beforeUpdate:xe,updated:xe,beforeDestroy:xe,beforeUnmount:xe,destroyed:xe,unmounted:xe,activated:xe,deactivated:xe,errorCaptured:xe,serverPrefetch:xe,components:Pr,directives:Pr,watch:ov,provide:rd,inject:rv};function rd(e,t){return t?e?function(){return ae(ft(e)?e.call(this,this):e,ft(t)?t.call(this,this):t)}:t:e}function rv(e,t){return Pr(au(e),au(t))}function au(e){if(lt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function xe(e,t){return e?[...new Set([].concat(e,t))]:t}function Pr(e,t){return e?ae(Object.create(null),e,t):t}function od(e,t){return e?lt(e)&&lt(t)?[...new Set([...e,...t])]:ae(Object.create(null),id(e),id(t??{})):t}function ov(e,t){if(!e)return t;if(!t)return e;const n=ae(Object.create(null),e);for(const i in t)n[i]=xe(e[i],t[i]);return n}function $_(){return{app:null,config:{isNativeTag:Fx,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let av=0;function lv(e,t){return function(i,s=null){ft(i)||(i=ae({},i)),s!=null&&!Yt(s)&&(s=null);const r=$_(),o=new Set;let a=!1;const l=r.app={_uid:av++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:Fv,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&ft(c.install)?(o.add(c),c.install(l,...u)):ft(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,h){if(!a){const f=he(i,s);return f.appContext=r,u&&t?t(f,c):e(f,c,h),a=!0,l._container=c,c.__vue_app__=l,Pl(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){Pa=l;try{return c()}finally{Pa=null}}};return l}}let Pa=null;function wa(e,t){if(ue){let n=ue.provides;const i=ue.parent&&ue.parent.provides;i===n&&(n=ue.provides=Object.create(i)),n[e]=t}}function Un(e,t,n=!1){const i=ue||Ye;if(i||Pa){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Pa._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ft(t)?t.call(i&&i.proxy):t}}function cv(e,t,n,i=!1){const s={},r={};Oa(r,Fl,1),e.propsDefaults=Object.create(null),W_(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=i?s:x_(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function uv(e,t,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,a=At(s),[l]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(Ol(e.emitsOptions,f))continue;const d=t[f];if(l)if(St(r,f))d!==r[f]&&(r[f]=d,c=!0);else{const g=Tn(f);s[g]=lu(l,a,g,d,e,!1)}else d!==r[f]&&(r[f]=d,c=!0)}}}else{W_(e,t,s,r)&&(c=!0);let u;for(const h in a)(!t||!St(t,h)&&((u=ar(h))===h||!St(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=lu(l,a,h,void 0,e,!0)):delete s[h]);if(r!==a)for(const h in r)(!t||!St(t,h))&&(delete r[h],c=!0)}c&&Yn(e,"set","$attrs")}function W_(e,t,n,i){const[s,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(xa(l))continue;const c=t[l];let u;s&&St(s,u=Tn(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:Ol(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=At(n),c=a||zt;for(let u=0;u<r.length;u++){const h=r[u];n[h]=lu(s,l,h,c[h],e,!St(c,h))}}return o}function lu(e,t,n,i,s,r){const o=e[n];if(o!=null){const a=St(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ft(l)){const{propsDefaults:c}=s;n in c?i=c[n]:(Ys(s),i=c[n]=l.call(null,t),Xi())}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===ar(n))&&(i=!0))}return i}function z_(e,t,n=!1){const i=t.propsCache,s=i.get(e);if(s)return s;const r=e.props,o={},a=[];let l=!1;if(!ft(e)){const u=h=>{l=!0;const[f,d]=z_(h,t,!0);ae(o,f),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return Yt(e)&&i.set(e,As),As;if(lt(r))for(let u=0;u<r.length;u++){const h=Tn(r[u]);ad(h)&&(o[h]=zt)}else if(r)for(const u in r){const h=Tn(u);if(ad(h)){const f=r[u],d=o[h]=lt(f)||ft(f)?{type:f}:ae({},f);if(d){const g=ud(Boolean,d.type),m=ud(String,d.type);d[0]=g>-1,d[1]=m<0||g<m,(g>-1||St(d,"default"))&&a.push(h)}}}const c=[o,a];return Yt(e)&&i.set(e,c),c}function ad(e){return e[0]!=="$"}function ld(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function cd(e,t){return ld(e)===ld(t)}function ud(e,t){return lt(t)?t.findIndex(n=>cd(n,e)):ft(t)&&cd(t,e)?0:-1}const Y_=e=>e[0]==="_"||e==="$stable",Eh=e=>lt(e)?e.map(mn):[mn(e)],hv=(e,t,n)=>{if(t._n)return t;const i=L1((...s)=>Eh(t(...s)),n);return i._c=!1,i},V_=(e,t,n)=>{const i=e._ctx;for(const s in e){if(Y_(s))continue;const r=e[s];if(ft(r))t[s]=hv(s,r,i);else if(r!=null){const o=Eh(r);t[s]=()=>o}}},X_=(e,t)=>{const n=Eh(t);e.slots.default=()=>n},fv=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=At(t),Oa(t,"_",n)):V_(t,e.slots={})}else e.slots={},t&&X_(e,t);Oa(e.slots,Fl,1)},dv=(e,t,n)=>{const{vnode:i,slots:s}=e;let r=!0,o=zt;if(i.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:(ae(s,t),!n&&a===1&&delete s._):(r=!t.$stable,V_(t,s)),o=t}else t&&(X_(e,t),o={default:1});if(r)for(const a in s)!Y_(a)&&!(a in o)&&delete s[a]};function cu(e,t,n,i,s=!1){if(lt(e)){e.forEach((f,d)=>cu(f,t&&(lt(t)?t[d]:t),n,i,s));return}if(va(i)&&!s)return;const r=i.shapeFlag&4?Pl(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===zt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(ne(c)?(u[c]=null,St(h,c)&&(h[c]=null)):ye(c)&&(c.value=null)),ft(l))pi(l,a,12,[o,u]);else{const f=ne(l),d=ye(l);if(f||d){const g=()=>{if(e.f){const m=f?St(h,l)?h[l]:u[l]:l.value;s?lt(m)&&oh(m,r):lt(m)?m.includes(r)||m.push(r):f?(u[l]=[r],St(h,l)&&(h[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else f?(u[l]=o,St(h,l)&&(h[l]=o)):d&&(l.value=o,e.k&&(u[e.k]=o))};o?(g.id=-1,Ce(g,n)):g()}}}const Ce=G1;function gv(e){return mv(e)}function mv(e,t){const n=Qc();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=on,insertStaticContent:g}=e,m=(_,v,T,b=null,M=null,P=null,Z=!1,$=null,Y=!!v.dynamicChildren)=>{if(_===v)return;_&&!Er(_,v)&&(b=O(_),k(_,M,P,!0),_=null),v.patchFlag===-2&&(Y=!1,v.dynamicChildren=null);const{type:U,ref:tt,shapeFlag:J}=v;switch(U){case Ll:p(_,v,T,b);break;case Ji:y(_,v,T,b);break;case _c:_==null&&x(v,T,b,Z);break;case We:j(_,v,T,b,M,P,Z,$,Y);break;default:J&1?S(_,v,T,b,M,P,Z,$,Y):J&6?K(_,v,T,b,M,P,Z,$,Y):(J&64||J&128)&&U.process(_,v,T,b,M,P,Z,$,Y,R)}tt!=null&&M&&cu(tt,_&&_.ref,P,v||_,!v)},p=(_,v,T,b)=>{if(_==null)i(v.el=a(v.children),T,b);else{const M=v.el=_.el;v.children!==_.children&&c(M,v.children)}},y=(_,v,T,b)=>{_==null?i(v.el=l(v.children||""),T,b):v.el=_.el},x=(_,v,T,b)=>{[_.el,_.anchor]=g(_.children,v,T,b,_.el,_.anchor)},E=({el:_,anchor:v},T,b)=>{let M;for(;_&&_!==v;)M=f(_),i(_,T,b),_=M;i(v,T,b)},w=({el:_,anchor:v})=>{let T;for(;_&&_!==v;)T=f(_),s(_),_=T;s(v)},S=(_,v,T,b,M,P,Z,$,Y)=>{Z=Z||v.type==="svg",_==null?C(v,T,b,M,P,Z,$,Y):B(_,v,M,P,Z,$,Y)},C=(_,v,T,b,M,P,Z,$)=>{let Y,U;const{type:tt,props:J,shapeFlag:et,transition:nt,dirs:ut}=_;if(Y=_.el=o(_.type,P,J&&J.is,J),et&8?u(Y,_.children):et&16&&L(_.children,Y,null,b,M,P&&tt!=="foreignObject",Z,$),ut&&Si(_,null,b,"created"),I(Y,_,_.scopeId,Z,b),J){for(const _t in J)_t!=="value"&&!xa(_t)&&r(Y,_t,null,J[_t],P,_.children,b,M,Nt);"value"in J&&r(Y,"value",null,J.value),(U=J.onVnodeBeforeMount)&&gn(U,b,_)}ut&&Si(_,null,b,"beforeMount");const wt=(!M||M&&!M.pendingBranch)&&nt&&!nt.persisted;wt&&nt.beforeEnter(Y),i(Y,v,T),((U=J&&J.onVnodeMounted)||wt||ut)&&Ce(()=>{U&&gn(U,b,_),wt&&nt.enter(Y),ut&&Si(_,null,b,"mounted")},M)},I=(_,v,T,b,M)=>{if(T&&d(_,T),b)for(let P=0;P<b.length;P++)d(_,b[P]);if(M){let P=M.subTree;if(v===P){const Z=M.vnode;I(_,Z,Z.scopeId,Z.slotScopeIds,M.parent)}}},L=(_,v,T,b,M,P,Z,$,Y=0)=>{for(let U=Y;U<_.length;U++){const tt=_[U]=$?oi(_[U]):mn(_[U]);m(null,tt,v,T,b,M,P,Z,$)}},B=(_,v,T,b,M,P,Z)=>{const $=v.el=_.el;let{patchFlag:Y,dynamicChildren:U,dirs:tt}=v;Y|=_.patchFlag&16;const J=_.props||zt,et=v.props||zt;let nt;T&&Ri(T,!1),(nt=et.onVnodeBeforeUpdate)&&gn(nt,T,v,_),tt&&Si(v,_,T,"beforeUpdate"),T&&Ri(T,!0);const ut=M&&v.type!=="foreignObject";if(U?F(_.dynamicChildren,U,$,T,b,ut,P):Z||H(_,v,$,null,T,b,ut,P,!1),Y>0){if(Y&16)N($,v,J,et,T,b,M);else if(Y&2&&J.class!==et.class&&r($,"class",null,et.class,M),Y&4&&r($,"style",J.style,et.style,M),Y&8){const wt=v.dynamicProps;for(let _t=0;_t<wt.length;_t++){const Gt=wt[_t],fe=J[Gt],Ht=et[Gt];(Ht!==fe||Gt==="value")&&r($,Gt,fe,Ht,M,_.children,T,b,Nt)}}Y&1&&_.children!==v.children&&u($,v.children)}else!Z&&U==null&&N($,v,J,et,T,b,M);((nt=et.onVnodeUpdated)||tt)&&Ce(()=>{nt&&gn(nt,T,v,_),tt&&Si(v,_,T,"updated")},b)},F=(_,v,T,b,M,P,Z)=>{for(let $=0;$<v.length;$++){const Y=_[$],U=v[$],tt=Y.el&&(Y.type===We||!Er(Y,U)||Y.shapeFlag&70)?h(Y.el):T;m(Y,U,tt,null,b,M,P,Z,!0)}},N=(_,v,T,b,M,P,Z)=>{if(T!==b){if(T!==zt)for(const $ in T)!xa($)&&!($ in b)&&r(_,$,T[$],null,Z,v.children,M,P,Nt);for(const $ in b){if(xa($))continue;const Y=b[$],U=T[$];Y!==U&&$!=="value"&&r(_,$,U,Y,Z,v.children,M,P,Nt)}"value"in b&&r(_,"value",T.value,b.value)}},j=(_,v,T,b,M,P,Z,$,Y)=>{const U=v.el=_?_.el:a(""),tt=v.anchor=_?_.anchor:a("");let{patchFlag:J,dynamicChildren:et,slotScopeIds:nt}=v;nt&&($=$?$.concat(nt):nt),_==null?(i(U,T,b),i(tt,T,b),L(v.children,T,tt,M,P,Z,$,Y)):J>0&&J&64&&et&&_.dynamicChildren?(F(_.dynamicChildren,et,T,M,P,Z,$),(v.key!=null||M&&v===M.subTree)&&H_(_,v,!0)):H(_,v,T,tt,M,P,Z,$,Y)},K=(_,v,T,b,M,P,Z,$,Y)=>{v.slotScopeIds=$,_==null?v.shapeFlag&512?M.ctx.activate(v,T,b,Z,Y):ct(v,T,b,M,P,Z,Y):X(_,v,Y)},ct=(_,v,T,b,M,P,Z)=>{const $=_.component=Cv(_,b,M);if(D_(_)&&($.ctx.renderer=R),Sv($),$.asyncDep){if(M&&M.registerDep($,V),!_.el){const Y=$.subTree=he(Ji);y(null,Y,v,T)}return}V($,_,v,T,M,P,Z)},X=(_,v,T)=>{const b=v.component=_.component;if(D1(_,v,T))if(b.asyncDep&&!b.asyncResolved){D(b,v,T);return}else b.next=v,b1(b.update),b.update();else v.el=_.el,b.vnode=v},V=(_,v,T,b,M,P,Z)=>{const $=()=>{if(_.isMounted){let{next:tt,bu:J,u:et,parent:nt,vnode:ut}=_,wt=tt,_t;Ri(_,!1),tt?(tt.el=ut.el,D(_,tt,Z)):tt=ut,J&&dc(J),(_t=tt.props&&tt.props.onVnodeBeforeUpdate)&&gn(_t,nt,tt,ut),Ri(_,!0);const Gt=gc(_),fe=_.subTree;_.subTree=Gt,m(fe,Gt,h(fe.el),O(fe),_,M,P),tt.el=Gt.el,wt===null&&k1(_,Gt.el),et&&Ce(et,M),(_t=tt.props&&tt.props.onVnodeUpdated)&&Ce(()=>gn(_t,nt,tt,ut),M)}else{let tt;const{el:J,props:et}=v,{bm:nt,m:ut,parent:wt}=_,_t=va(v);if(Ri(_,!1),nt&&dc(nt),!_t&&(tt=et&&et.onVnodeBeforeMount)&&gn(tt,wt,v),Ri(_,!0),J&&Q){const Gt=()=>{_.subTree=gc(_),Q(J,_.subTree,_,M,null)};_t?v.type.__asyncLoader().then(()=>!_.isUnmounted&&Gt()):Gt()}else{const Gt=_.subTree=gc(_);m(null,Gt,T,b,_,M,P),v.el=Gt.el}if(ut&&Ce(ut,M),!_t&&(tt=et&&et.onVnodeMounted)){const Gt=v;Ce(()=>gn(tt,wt,Gt),M)}(v.shapeFlag&256||wt&&va(wt.vnode)&&wt.vnode.shapeFlag&256)&&_.a&&Ce(_.a,M),_.isMounted=!0,v=T=b=null}},Y=_.effect=new fh($,()=>vh(U),_.scope),U=_.update=()=>Y.run();U.id=_.uid,Ri(_,!0),U()},D=(_,v,T)=>{v.component=_;const b=_.vnode.props;_.vnode=v,_.next=null,uv(_,v.props,b,T),dv(_,v.children,T),lr(),td(),cr()},H=(_,v,T,b,M,P,Z,$,Y=!1)=>{const U=_&&_.children,tt=_?_.shapeFlag:0,J=v.children,{patchFlag:et,shapeFlag:nt}=v;if(et>0){if(et&128){dt(U,J,T,b,M,P,Z,$,Y);return}else if(et&256){st(U,J,T,b,M,P,Z,$,Y);return}}nt&8?(tt&16&&Nt(U,M,P),J!==U&&u(T,J)):tt&16?nt&16?dt(U,J,T,b,M,P,Z,$,Y):Nt(U,M,P,!0):(tt&8&&u(T,""),nt&16&&L(J,T,b,M,P,Z,$,Y))},st=(_,v,T,b,M,P,Z,$,Y)=>{_=_||As,v=v||As;const U=_.length,tt=v.length,J=Math.min(U,tt);let et;for(et=0;et<J;et++){const nt=v[et]=Y?oi(v[et]):mn(v[et]);m(_[et],nt,T,null,M,P,Z,$,Y)}U>tt?Nt(_,M,P,!0,!1,J):L(v,T,b,M,P,Z,$,Y,J)},dt=(_,v,T,b,M,P,Z,$,Y)=>{let U=0;const tt=v.length;let J=_.length-1,et=tt-1;for(;U<=J&&U<=et;){const nt=_[U],ut=v[U]=Y?oi(v[U]):mn(v[U]);if(Er(nt,ut))m(nt,ut,T,null,M,P,Z,$,Y);else break;U++}for(;U<=J&&U<=et;){const nt=_[J],ut=v[et]=Y?oi(v[et]):mn(v[et]);if(Er(nt,ut))m(nt,ut,T,null,M,P,Z,$,Y);else break;J--,et--}if(U>J){if(U<=et){const nt=et+1,ut=nt<tt?v[nt].el:b;for(;U<=et;)m(null,v[U]=Y?oi(v[U]):mn(v[U]),T,ut,M,P,Z,$,Y),U++}}else if(U>et)for(;U<=J;)k(_[U],M,P,!0),U++;else{const nt=U,ut=U,wt=new Map;for(U=ut;U<=et;U++){const de=v[U]=Y?oi(v[U]):mn(v[U]);de.key!=null&&wt.set(de.key,U)}let _t,Gt=0;const fe=et-ut+1;let Ht=!1,us=0;const Ci=new Array(fe);for(U=0;U<fe;U++)Ci[U]=0;for(U=nt;U<=J;U++){const de=_[U];if(Gt>=fe){k(de,M,P,!0);continue}let Oe;if(de.key!=null)Oe=wt.get(de.key);else for(_t=ut;_t<=et;_t++)if(Ci[_t-ut]===0&&Er(de,v[_t])){Oe=_t;break}Oe===void 0?k(de,M,P,!0):(Ci[Oe-ut]=U+1,Oe>=us?us=Oe:Ht=!0,m(de,v[Oe],T,null,M,P,Z,$,Y),Gt++)}const Wo=Ht?_v(Ci):As;for(_t=Wo.length-1,U=fe-1;U>=0;U--){const de=ut+U,Oe=v[de],hs=de+1<tt?v[de+1].el:b;Ci[U]===0?m(null,Oe,T,hs,M,P,Z,$,Y):Ht&&(_t<0||U!==Wo[_t]?bt(Oe,T,hs,2):_t--)}}},bt=(_,v,T,b,M=null)=>{const{el:P,type:Z,transition:$,children:Y,shapeFlag:U}=_;if(U&6){bt(_.component.subTree,v,T,b);return}if(U&128){_.suspense.move(v,T,b);return}if(U&64){Z.move(_,v,T,R);return}if(Z===We){i(P,v,T);for(let J=0;J<Y.length;J++)bt(Y[J],v,T,b);i(_.anchor,v,T);return}if(Z===_c){E(_,v,T);return}if(b!==2&&U&1&&$)if(b===0)$.beforeEnter(P),i(P,v,T),Ce(()=>$.enter(P),M);else{const{leave:J,delayLeave:et,afterLeave:nt}=$,ut=()=>i(P,v,T),wt=()=>{J(P,()=>{ut(),nt&&nt()})};et?et(P,ut,wt):wt()}else i(P,v,T)},k=(_,v,T,b=!1,M=!1)=>{const{type:P,props:Z,ref:$,children:Y,dynamicChildren:U,shapeFlag:tt,patchFlag:J,dirs:et}=_;if($!=null&&cu($,null,T,_,!0),tt&256){v.ctx.deactivate(_);return}const nt=tt&1&&et,ut=!va(_);let wt;if(ut&&(wt=Z&&Z.onVnodeBeforeUnmount)&&gn(wt,v,_),tt&6)vt(_.component,T,b);else{if(tt&128){_.suspense.unmount(T,b);return}nt&&Si(_,null,v,"beforeUnmount"),tt&64?_.type.remove(_,v,T,M,R,b):U&&(P!==We||J>0&&J&64)?Nt(U,v,T,!1,!0):(P===We&&J&384||!M&&tt&16)&&Nt(Y,v,T),b&&Xt(_)}(ut&&(wt=Z&&Z.onVnodeUnmounted)||nt)&&Ce(()=>{wt&&gn(wt,v,_),nt&&Si(_,null,v,"unmounted")},T)},Xt=_=>{const{type:v,el:T,anchor:b,transition:M}=_;if(v===We){gt(T,b);return}if(v===_c){w(_);return}const P=()=>{s(T),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(_.shapeFlag&1&&M&&!M.persisted){const{leave:Z,delayLeave:$}=M,Y=()=>Z(T,P);$?$(_.el,P,Y):Y()}else P()},gt=(_,v)=>{let T;for(;_!==v;)T=f(_),s(_),_=T;s(v)},vt=(_,v,T)=>{const{bum:b,scope:M,update:P,subTree:Z,um:$}=_;b&&dc(b),M.stop(),P&&(P.active=!1,k(Z,_,v,T)),$&&Ce($,v),Ce(()=>{_.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},Nt=(_,v,T,b=!1,M=!1,P=0)=>{for(let Z=P;Z<_.length;Z++)k(_[Z],v,T,b,M)},O=_=>_.shapeFlag&6?O(_.component.subTree):_.shapeFlag&128?_.suspense.next():f(_.anchor||_.el),z=(_,v,T)=>{_==null?v._vnode&&k(v._vnode,null,null,!0):m(v._vnode||null,_,v,null,null,null,T),td(),M_(),v._vnode=_},R={p:m,um:k,m:bt,r:Xt,mt:ct,mc:L,pc:H,pbc:F,n:O,o:e};let G,Q;return t&&([G,Q]=t(R)),{render:z,hydrate:G,createApp:lv(z,G)}}function Ri({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function H_(e,t,n=!1){const i=e.children,s=t.children;if(lt(i)&&lt(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=oi(s[r]),a.el=o.el),n||H_(o,a)),a.type===Ll&&(a.el=o.el)}}function _v(e){const t=e.slice(),n=[0];let i,s,r,o,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(s=n[n.length-1],e[s]<c){t[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}const pv=e=>e.__isTeleport,We=Symbol.for("v-fgt"),Ll=Symbol.for("v-txt"),Ji=Symbol.for("v-cmt"),_c=Symbol.for("v-stc"),Vr=[];let sn=null;function Rt(e=!1){Vr.push(sn=e?null:[])}function yv(){Vr.pop(),sn=Vr[Vr.length-1]||null}let eo=1;function hd(e){eo+=e}function B_(e){return e.dynamicChildren=eo>0?sn||As:null,yv(),eo>0&&sn&&sn.push(e),e}function Ft(e,t,n,i,s,r){return B_(A(e,t,n,i,s,r,!0))}function Z_(e,t,n,i,s){return B_(he(e,t,n,i,s,!0))}function uu(e){return e?e.__v_isVNode===!0:!1}function Er(e,t){return e.type===t.type&&e.key===t.key}const Fl="__vInternal",j_=({key:e})=>e??null,Ea=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ne(e)||ye(e)||ft(e)?{i:Ye,r:e,k:t,f:!!n}:e:null);function A(e,t=null,n=null,i=0,s=null,r=e===We?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&j_(t),ref:t&&Ea(t),scopeId:L_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ye};return a?(Th(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=ne(n)?8:16),eo>0&&!o&&sn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&sn.push(l),l}const he=xv;function xv(e,t=null,n=null,i=0,s=null,r=!1){if((!e||e===J1)&&(e=Ji),uu(e)){const a=zs(e,t,!0);return n&&Th(a,n),eo>0&&!r&&sn&&(a.shapeFlag&6?sn[sn.indexOf(e)]=a:sn.push(a)),a.patchFlag|=-2,a}if(Ov(e)&&(e=e.__vccOpts),t){t=vv(t);let{class:a,style:l}=t;a&&!ne(a)&&(t.class=uh(a)),Yt(l)&&(w_(l)&&!lt(l)&&(l=ae({},l)),t.style=ch(l))}const o=ne(e)?1:N1(e)?128:pv(e)?64:Yt(e)?4:ft(e)?2:0;return A(e,t,n,i,s,o,r,!0)}function vv(e){return e?w_(e)||Fl in e?ae({},e):e:null}function zs(e,t,n=!1){const{props:i,ref:s,patchFlag:r,children:o}=e,a=t?wv(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&j_(a),ref:t&&t.ref?n&&s?lt(s)?s.concat(Ea(t)):[s,Ea(t)]:Ea(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==We?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&zs(e.ssContent),ssFallback:e.ssFallback&&zs(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Kt(e=" ",t=0){return he(Ll,null,e,t)}function Vt(e="",t=!1){return t?(Rt(),Z_(Ji,null,e)):he(Ji,null,e)}function mn(e){return e==null||typeof e=="boolean"?he(Ji):lt(e)?he(We,null,e.slice()):typeof e=="object"?oi(e):he(Ll,null,String(e))}function oi(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:zs(e)}function Th(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(lt(t))n=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Th(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(Fl in t)?t._ctx=Ye:s===3&&Ye&&(Ye.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ft(t)?(t={default:t,_ctx:Ye},n=32):(t=String(t),i&64?(n=16,t=[Kt(t)]):n=8);e.children=t,e.shapeFlag|=n}function wv(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=uh([t.class,i.class]));else if(s==="style")t.style=ch([t.style,i.style]);else if(Tl(s)){const r=t[s],o=i[s];o&&r!==o&&!(lt(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=i[s])}return t}function gn(e,t,n,i=null){an(e,t,7,[n,i])}const Ev=$_();let Tv=0;function Cv(e,t,n){const i=e.type,s=(t?t.appContext:e.appContext)||Ev,r={uid:Tv++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new l_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:z_(i,s),emitsOptions:A_(i,s),emit:null,emitted:null,propsDefaults:zt,inheritAttrs:i.inheritAttrs,ctx:zt,data:zt,props:zt,attrs:zt,slots:zt,refs:zt,setupState:zt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=A1.bind(null,r),e.ce&&e.ce(r),r}let ue=null,Ch,gs,fd="__VUE_INSTANCE_SETTERS__";(gs=Qc()[fd])||(gs=Qc()[fd]=[]),gs.push(e=>ue=e),Ch=e=>{gs.length>1?gs.forEach(t=>t(e)):gs[0](e)};const Ys=e=>{Ch(e),e.scope.on()},Xi=()=>{ue&&ue.scope.off(),Ch(null)};function K_(e){return e.vnode.shapeFlag&4}let no=!1;function Sv(e,t=!1){no=t;const{props:n,children:i}=e.vnode,s=K_(e);cv(e,n,s,t),fv(e,i);const r=s?Rv(e,t):void 0;return no=!1,r}function Rv(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=ph(new Proxy(e.ctx,ev));const{setup:i}=n;if(i){const s=e.setupContext=i.length>1?bv(e):null;Ys(e),lr();const r=pi(i,e,0,[e.props,s]);if(cr(),Xi(),i_(r)){if(r.then(Xi,Xi),t)return r.then(o=>{dd(e,o,t)}).catch(o=>{Ml(o,e,0)});e.asyncDep=r}else dd(e,r,t)}else q_(e,t)}function dd(e,t,n){ft(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Yt(t)&&(e.setupState=S_(t)),q_(e,n)}let gd;function q_(e,t,n){const i=e.type;if(!e.render){if(!t&&gd&&!i.render){const s=i.template||wh(e).template;if(s){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,c=ae(ae({isCustomElement:r,delimiters:a},o),l);i.render=gd(s,c)}}e.render=i.render||on}Ys(e),lr(),nv(e),cr(),Xi()}function Iv(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Me(e,"get","$attrs"),t[n]}}))}function bv(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Iv(e)},slots:e.slots,emit:e.emit,expose:t}}function Pl(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(S_(ph(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Yr)return Yr[n](e)},has(t,n){return n in t||n in Yr}}))}function Mv(e,t=!0){return ft(e)?e.displayName||e.name:e.name||t&&e.__name}function Ov(e){return ft(e)&&"__vccOpts"in e}const en=(e,t)=>S1(e,t,no);function J_(e,t,n){const i=arguments.length;return i===2?Yt(t)&&!lt(t)?uu(t)?he(e,null,[t]):he(e,t):he(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&uu(n)&&(n=[n]),he(e,t,n))}const Av=Symbol.for("v-scx"),Lv=()=>Un(Av),Fv="3.3.4",Pv="http://www.w3.org/2000/svg",Pi=typeof document<"u"?document:null,md=Pi&&Pi.createElement("template"),Dv={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const s=t?Pi.createElementNS(Pv,e):Pi.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:e=>Pi.createTextNode(e),createComment:e=>Pi.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Pi.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,s,r){const o=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{md.innerHTML=i?`<svg>${e}</svg>`:e;const a=md.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function kv(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Nv(e,t,n){const i=e.style,s=ne(n);if(n&&!s){if(t&&!ne(t))for(const r in t)n[r]==null&&hu(i,r,"");for(const r in n)hu(i,r,n[r])}else{const r=i.display;s?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=r)}}const _d=/\s*!important$/;function hu(e,t,n){if(lt(n))n.forEach(i=>hu(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=Gv(e,t);_d.test(n)?e.setProperty(ar(i),n.replace(_d,""),"important"):e[i]=n}}const pd=["Webkit","Moz","ms"],pc={};function Gv(e,t){const n=pc[t];if(n)return n;let i=Tn(t);if(i!=="filter"&&i in e)return pc[t]=i;i=Rl(i);for(let s=0;s<pd.length;s++){const r=pd[s]+i;if(r in e)return pc[t]=r}return t}const yd="http://www.w3.org/1999/xlink";function Uv(e,t,n,i,s){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(yd,t.slice(6,t.length)):e.setAttributeNS(yd,t,n);else{const r=Xx(t);n==null||r&&!o_(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function $v(e,t,n,i,s,r,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,s,r),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=o_(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function Wv(e,t,n,i){e.addEventListener(t,n,i)}function zv(e,t,n,i){e.removeEventListener(t,n,i)}function Yv(e,t,n,i,s=null){const r=e._vei||(e._vei={}),o=r[t];if(i&&o)o.value=i;else{const[a,l]=Vv(t);if(i){const c=r[t]=Bv(i,s);Wv(e,a,c,l)}else o&&(zv(e,a,o,l),r[t]=void 0)}}const xd=/(?:Once|Passive|Capture)$/;function Vv(e){let t;if(xd.test(e)){t={};let i;for(;i=e.match(xd);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ar(e.slice(2)),t]}let yc=0;const Xv=Promise.resolve(),Hv=()=>yc||(Xv.then(()=>yc=0),yc=Date.now());function Bv(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;an(Zv(i,n.value),t,5,[i])};return n.value=e,n.attached=Hv(),n}function Zv(e,t){if(lt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const vd=/^on[a-z]/,jv=(e,t,n,i,s=!1,r,o,a,l)=>{t==="class"?kv(e,i,s):t==="style"?Nv(e,n,i):Tl(t)?rh(t)||Yv(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Kv(e,t,i,s))?$v(e,t,i,r,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Uv(e,t,i,s))};function Kv(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&vd.test(t)&&ft(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||vd.test(t)&&ne(n)?!1:t in e}const qv=ae({patchProp:jv},Dv);let wd;function Jv(){return wd||(wd=gv(qv))}const Qv=(...e)=>{const t=Jv().createApp(...e),{mount:n}=t;return t.mount=i=>{const s=tw(i);if(!s)return;const r=t._component;!ft(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function tw(e){return ne(e)?document.querySelector(e):e}var ew=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const nw=Symbol();var Ed;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ed||(Ed={}));function iw(){const e=Hx(!0),t=e.run(()=>ur({}));let n=[],i=[];const s=ph({install(r){s._a=r,r.provide(nw,s),r.config.globalProperties.$pinia=s,i.forEach(o=>n.push(o)),i=[]},use(r){return!this._a&&!ew?i.push(r):n.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ts=typeof window<"u";function sw(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Dt=Object.assign;function xc(e,t){const n={};for(const i in t){const s=t[i];n[i]=cn(s)?s.map(e):e(s)}return n}const Xr=()=>{},cn=Array.isArray,rw=/\/$/,ow=e=>e.replace(rw,"");function vc(e,t,n="/"){let i,s={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),s=e(r)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=uw(i??t,n),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:o}}function aw(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Td(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function lw(e,t,n){const i=t.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&Vs(t.matched[i],n.matched[s])&&Q_(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Vs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Q_(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!cw(e[n],t[n]))return!1;return!0}function cw(e,t){return cn(e)?Cd(e,t):cn(t)?Cd(t,e):e===t}function Cd(e,t){return cn(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function uw(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var io;(function(e){e.pop="pop",e.push="push"})(io||(io={}));var Hr;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Hr||(Hr={}));function hw(e){if(!e)if(Ts){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ow(e)}const fw=/^[^#]+#/;function dw(e,t){return e.replace(fw,"#")+t}function gw(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Dl=()=>({left:window.pageXOffset,top:window.pageYOffset});function mw(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=gw(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Sd(e,t){return(history.state?history.state.position-t:-1)+e}const fu=new Map;function _w(e,t){fu.set(e,t)}function pw(e){const t=fu.get(e);return fu.delete(e),t}let yw=()=>location.protocol+"//"+location.host;function tp(e,t){const{pathname:n,search:i,hash:s}=t,r=e.indexOf("#");if(r>-1){let a=s.includes(e.slice(r))?e.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Td(l,"")}return Td(n,e)+i+s}function xw(e,t,n,i){let s=[],r=[],o=null;const a=({state:f})=>{const d=tp(e,location),g=n.value,m=t.value;let p=0;if(f){if(n.value=d,t.value=f,o&&o===g){o=null;return}p=m?f.position-m.position:0}else i(d);s.forEach(y=>{y(n.value,g,{delta:p,type:io.pop,direction:p?p>0?Hr.forward:Hr.back:Hr.unknown})})};function l(){o=n.value}function c(f){s.push(f);const d=()=>{const g=s.indexOf(f);g>-1&&s.splice(g,1)};return r.push(d),d}function u(){const{history:f}=window;f.state&&f.replaceState(Dt({},f.state,{scroll:Dl()}),"")}function h(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Rd(e,t,n,i=!1,s=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:s?Dl():null}}function vw(e){const{history:t,location:n}=window,i={value:tp(e,n)},s={value:t.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+l:yw()+e+l;try{t[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(d){console.error(d),n[u?"replace":"assign"](f)}}function o(l,c){const u=Dt({},t.state,Rd(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,u,!0),i.value=l}function a(l,c){const u=Dt({},s.value,t.state,{forward:l,scroll:Dl()});r(u.current,u,!0);const h=Dt({},Rd(i.value,l,null),{position:u.position+1},c);r(l,h,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function ww(e){e=hw(e);const t=vw(e),n=xw(e,t.state,t.location,t.replace);function i(r,o=!0){o||n.pauseListeners(),history.go(r)}const s=Dt({location:"",base:e,go:i,createHref:dw.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function Ew(e){return typeof e=="string"||e&&typeof e=="object"}function ep(e){return typeof e=="string"||typeof e=="symbol"}const Jn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},np=Symbol("");var Id;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Id||(Id={}));function Xs(e,t){return Dt(new Error,{type:e,[np]:!0},t)}function In(e,t){return e instanceof Error&&np in e&&(t==null||!!(e.type&t))}const bd="[^/]+?",Tw={sensitive:!1,strict:!1,start:!0,end:!0},Cw=/[.+*?^${}()[\]/\\]/g;function Sw(e,t){const n=Dt({},Tw,t),i=[];let s=n.start?"^":"";const r=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const f=c[h];let d=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(Cw,"\\$&"),d+=40;else if(f.type===1){const{value:g,repeatable:m,optional:p,regexp:y}=f;r.push({name:g,repeatable:m,optional:p});const x=y||bd;if(x!==bd){d+=10;try{new RegExp(`(${x})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${x}): `+w.message)}}let E=m?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;h||(E=p&&c.length<2?`(?:/${E})`:"/"+E),p&&(E+="?"),s+=E,d+=20,p&&(d+=-8),m&&(d+=-20),x===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const d=u[f]||"",g=r[f-1];h[g.name]=d&&g.repeatable?d.split("/"):d}return h}function l(c){let u="",h=!1;for(const f of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const d of f)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:p}=d,y=g in c?c[g]:"";if(cn(y)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const x=cn(y)?y.join("/"):y;if(!x)if(p)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=x}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function Rw(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Iw(e,t){let n=0;const i=e.score,s=t.score;for(;n<i.length&&n<s.length;){const r=Rw(i[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-i.length)===1){if(Md(i))return 1;if(Md(s))return-1}return s.length-i.length}function Md(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const bw={type:0,value:""},Mw=/[a-zA-Z0-9_]/;function Ow(e){if(!e)return[[]];if(e==="/")return[[bw]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,i=n;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):f();break;case 4:f(),n=i;break;case 1:l==="("?n=2:Mw.test(l)?f():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function Aw(e,t,n){const i=Sw(Ow(e.path),n),s=Dt(i,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Lw(e,t){const n=[],i=new Map;t=Ld({strict:!1,end:!0,sensitive:!1},t);function s(u){return i.get(u)}function r(u,h,f){const d=!f,g=Fw(u);g.aliasOf=f&&f.record;const m=Ld(t,u),p=[g];if("alias"in u){const E=typeof u.alias=="string"?[u.alias]:u.alias;for(const w of E)p.push(Dt({},g,{components:f?f.record.components:g.components,path:w,aliasOf:f?f.record:g}))}let y,x;for(const E of p){const{path:w}=E;if(h&&w[0]!=="/"){const S=h.record.path,C=S[S.length-1]==="/"?"":"/";E.path=h.record.path+(w&&C+w)}if(y=Aw(E,h,m),f?f.alias.push(y):(x=x||y,x!==y&&x.alias.push(y),d&&u.name&&!Ad(y)&&o(u.name)),g.children){const S=g.children;for(let C=0;C<S.length;C++)r(S[C],y,f&&f.children[C])}f=f||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return x?()=>{o(x)}:Xr}function o(u){if(ep(u)){const h=i.get(u);h&&(i.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&Iw(u,n[h])>=0&&(u.record.path!==n[h].record.path||!ip(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Ad(u)&&i.set(u.record.name,u)}function c(u,h){let f,d={},g,m;if("name"in u&&u.name){if(f=i.get(u.name),!f)throw Xs(1,{location:u});m=f.record.name,d=Dt(Od(h.params,f.keys.filter(x=>!x.optional).map(x=>x.name)),u.params&&Od(u.params,f.keys.map(x=>x.name))),g=f.stringify(d)}else if("path"in u)g=u.path,f=n.find(x=>x.re.test(g)),f&&(d=f.parse(g),m=f.record.name);else{if(f=h.name?i.get(h.name):n.find(x=>x.re.test(h.path)),!f)throw Xs(1,{location:u,currentLocation:h});m=f.record.name,d=Dt({},h.params,u.params),g=f.stringify(d)}const p=[];let y=f;for(;y;)p.unshift(y.record),y=y.parent;return{name:m,path:g,params:d,matched:p,meta:Dw(p)}}return e.forEach(u=>r(u)),{addRoute:r,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Od(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function Fw(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Pw(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Pw(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function Ad(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Dw(e){return e.reduce((t,n)=>Dt(t,n.meta),{})}function Ld(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function ip(e,t){return t.children.some(n=>n===e||ip(e,n))}const sp=/#/g,kw=/&/g,Nw=/\//g,Gw=/=/g,Uw=/\?/g,rp=/\+/g,$w=/%5B/g,Ww=/%5D/g,op=/%5E/g,zw=/%60/g,ap=/%7B/g,Yw=/%7C/g,lp=/%7D/g,Vw=/%20/g;function Sh(e){return encodeURI(""+e).replace(Yw,"|").replace($w,"[").replace(Ww,"]")}function Xw(e){return Sh(e).replace(ap,"{").replace(lp,"}").replace(op,"^")}function du(e){return Sh(e).replace(rp,"%2B").replace(Vw,"+").replace(sp,"%23").replace(kw,"%26").replace(zw,"`").replace(ap,"{").replace(lp,"}").replace(op,"^")}function Hw(e){return du(e).replace(Gw,"%3D")}function Bw(e){return Sh(e).replace(sp,"%23").replace(Uw,"%3F")}function Zw(e){return e==null?"":Bw(e).replace(Nw,"%2F")}function Da(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function jw(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(rp," "),o=r.indexOf("="),a=Da(o<0?r:r.slice(0,o)),l=o<0?null:Da(r.slice(o+1));if(a in t){let c=t[a];cn(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Fd(e){let t="";for(let n in e){const i=e[n];if(n=Hw(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(cn(i)?i.map(r=>r&&du(r)):[i&&du(i)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function Kw(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=cn(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return t}const qw=Symbol(""),Pd=Symbol(""),Rh=Symbol(""),cp=Symbol(""),gu=Symbol("");function Tr(){let e=[];function t(i){return e.push(i),()=>{const s=e.indexOf(i);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function ai(e,t,n,i,s){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(Xs(4,{from:n,to:t})):h instanceof Error?a(h):Ew(h)?a(Xs(2,{from:t,to:h})):(r&&i.enterCallbacks[s]===r&&typeof h=="function"&&r.push(h),o())},c=e.call(i&&i.instances[s],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function wc(e,t,n,i){const s=[];for(const r of e)for(const o in r.components){let a=r.components[o];if(!(t!=="beforeRouteEnter"&&!r.instances[o]))if(Jw(a)){const c=(a.__vccOpts||a)[t];c&&s.push(ai(c,n,i,r,o))}else{let l=a();s.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const u=sw(c)?c.default:c;r.components[o]=u;const f=(u.__vccOpts||u)[t];return f&&ai(f,n,i,r,o)()}))}}return s}function Jw(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Dd(e){const t=Un(Rh),n=Un(cp),i=en(()=>t.resolve(Vi(e.to))),s=en(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(Vs.bind(null,u));if(f>-1)return f;const d=kd(l[c-2]);return c>1&&kd(u)===d&&h[h.length-1].path!==d?h.findIndex(Vs.bind(null,l[c-2])):f}),r=en(()=>s.value>-1&&nE(n.params,i.value.params)),o=en(()=>s.value>-1&&s.value===n.matched.length-1&&Q_(n.params,i.value.params));function a(l={}){return eE(l)?t[Vi(e.replace)?"replace":"push"](Vi(e.to)).catch(Xr):Promise.resolve()}return{route:i,href:en(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}const Qw=xo({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Dd,setup(e,{slots:t}){const n=bl(Dd(e)),{options:i}=Un(Rh),s=en(()=>({[Nd(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Nd(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:J_("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),tE=Qw;function eE(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function nE(e,t){for(const n in t){const i=t[n],s=e[n];if(typeof i=="string"){if(i!==s)return!1}else if(!cn(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function kd(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Nd=(e,t,n)=>e??t??n,iE=xo({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=Un(gu),s=en(()=>e.route||i.value),r=Un(Pd,0),o=en(()=>{let c=Vi(r);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=en(()=>s.value.matched[o.value]);wa(Pd,en(()=>o.value+1)),wa(qw,a),wa(gu,s);const l=ur();return Ds(()=>[l.value,a.value,e.name],([c,u,h],[f,d,g])=>{u&&(u.instances[h]=c,d&&d!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!Vs(u,d)||!f)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=s.value,u=e.name,h=a.value,f=h&&h.components[u];if(!f)return Gd(n.default,{Component:f,route:c});const d=h.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,p=J_(f,Dt({},g,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Gd(n.default,{Component:p,route:c})||p}}});function Gd(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const up=iE;function sE(e){const t=Lw(e.routes,e),n=e.parseQuery||jw,i=e.stringifyQuery||Fd,s=e.history,r=Tr(),o=Tr(),a=Tr(),l=w1(Jn);let c=Jn;Ts&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=xc.bind(null,O=>""+O),h=xc.bind(null,Zw),f=xc.bind(null,Da);function d(O,z){let R,G;return ep(O)?(R=t.getRecordMatcher(O),G=z):G=O,t.addRoute(G,R)}function g(O){const z=t.getRecordMatcher(O);z&&t.removeRoute(z)}function m(){return t.getRoutes().map(O=>O.record)}function p(O){return!!t.getRecordMatcher(O)}function y(O,z){if(z=Dt({},z||l.value),typeof O=="string"){const T=vc(n,O,z.path),b=t.resolve({path:T.path},z),M=s.createHref(T.fullPath);return Dt(T,b,{params:f(b.params),hash:Da(T.hash),redirectedFrom:void 0,href:M})}let R;if("path"in O)R=Dt({},O,{path:vc(n,O.path,z.path).path});else{const T=Dt({},O.params);for(const b in T)T[b]==null&&delete T[b];R=Dt({},O,{params:h(T)}),z.params=h(z.params)}const G=t.resolve(R,z),Q=O.hash||"";G.params=u(f(G.params));const _=aw(i,Dt({},O,{hash:Xw(Q),path:G.path})),v=s.createHref(_);return Dt({fullPath:_,hash:Q,query:i===Fd?Kw(O.query):O.query||{}},G,{redirectedFrom:void 0,href:v})}function x(O){return typeof O=="string"?vc(n,O,l.value.path):Dt({},O)}function E(O,z){if(c!==O)return Xs(8,{from:z,to:O})}function w(O){return I(O)}function S(O){return w(Dt(x(O),{replace:!0}))}function C(O){const z=O.matched[O.matched.length-1];if(z&&z.redirect){const{redirect:R}=z;let G=typeof R=="function"?R(O):R;return typeof G=="string"&&(G=G.includes("?")||G.includes("#")?G=x(G):{path:G},G.params={}),Dt({query:O.query,hash:O.hash,params:"path"in G?{}:O.params},G)}}function I(O,z){const R=c=y(O),G=l.value,Q=O.state,_=O.force,v=O.replace===!0,T=C(R);if(T)return I(Dt(x(T),{state:typeof T=="object"?Dt({},Q,T.state):Q,force:_,replace:v}),z||R);const b=R;b.redirectedFrom=z;let M;return!_&&lw(i,G,R)&&(M=Xs(16,{to:b,from:G}),bt(G,G,!0,!1)),(M?Promise.resolve(M):F(b,G)).catch(P=>In(P)?In(P,2)?P:dt(P):H(P,b,G)).then(P=>{if(P){if(In(P,2))return I(Dt({replace:v},x(P.to),{state:typeof P.to=="object"?Dt({},Q,P.to.state):Q,force:_}),z||b)}else P=j(b,G,!0,v,Q);return N(b,G,P),P})}function L(O,z){const R=E(O,z);return R?Promise.reject(R):Promise.resolve()}function B(O){const z=gt.values().next().value;return z&&typeof z.runWithContext=="function"?z.runWithContext(O):O()}function F(O,z){let R;const[G,Q,_]=rE(O,z);R=wc(G.reverse(),"beforeRouteLeave",O,z);for(const T of G)T.leaveGuards.forEach(b=>{R.push(ai(b,O,z))});const v=L.bind(null,O,z);return R.push(v),Nt(R).then(()=>{R=[];for(const T of r.list())R.push(ai(T,O,z));return R.push(v),Nt(R)}).then(()=>{R=wc(Q,"beforeRouteUpdate",O,z);for(const T of Q)T.updateGuards.forEach(b=>{R.push(ai(b,O,z))});return R.push(v),Nt(R)}).then(()=>{R=[];for(const T of _)if(T.beforeEnter)if(cn(T.beforeEnter))for(const b of T.beforeEnter)R.push(ai(b,O,z));else R.push(ai(T.beforeEnter,O,z));return R.push(v),Nt(R)}).then(()=>(O.matched.forEach(T=>T.enterCallbacks={}),R=wc(_,"beforeRouteEnter",O,z),R.push(v),Nt(R))).then(()=>{R=[];for(const T of o.list())R.push(ai(T,O,z));return R.push(v),Nt(R)}).catch(T=>In(T,8)?T:Promise.reject(T))}function N(O,z,R){a.list().forEach(G=>B(()=>G(O,z,R)))}function j(O,z,R,G,Q){const _=E(O,z);if(_)return _;const v=z===Jn,T=Ts?history.state:{};R&&(G||v?s.replace(O.fullPath,Dt({scroll:v&&T&&T.scroll},Q)):s.push(O.fullPath,Q)),l.value=O,bt(O,z,R,v),dt()}let K;function ct(){K||(K=s.listen((O,z,R)=>{if(!vt.listening)return;const G=y(O),Q=C(G);if(Q){I(Dt(Q,{replace:!0}),G).catch(Xr);return}c=G;const _=l.value;Ts&&_w(Sd(_.fullPath,R.delta),Dl()),F(G,_).catch(v=>In(v,12)?v:In(v,2)?(I(v.to,G).then(T=>{In(T,20)&&!R.delta&&R.type===io.pop&&s.go(-1,!1)}).catch(Xr),Promise.reject()):(R.delta&&s.go(-R.delta,!1),H(v,G,_))).then(v=>{v=v||j(G,_,!1),v&&(R.delta&&!In(v,8)?s.go(-R.delta,!1):R.type===io.pop&&In(v,20)&&s.go(-1,!1)),N(G,_,v)}).catch(Xr)}))}let X=Tr(),V=Tr(),D;function H(O,z,R){dt(O);const G=V.list();return G.length?G.forEach(Q=>Q(O,z,R)):console.error(O),Promise.reject(O)}function st(){return D&&l.value!==Jn?Promise.resolve():new Promise((O,z)=>{X.add([O,z])})}function dt(O){return D||(D=!O,ct(),X.list().forEach(([z,R])=>O?R(O):z()),X.reset()),O}function bt(O,z,R,G){const{scrollBehavior:Q}=e;if(!Ts||!Q)return Promise.resolve();const _=!R&&pw(Sd(O.fullPath,0))||(G||!R)&&history.state&&history.state.scroll||null;return I_().then(()=>Q(O,z,_)).then(v=>v&&mw(v)).catch(v=>H(v,O,z))}const k=O=>s.go(O);let Xt;const gt=new Set,vt={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,hasRoute:p,getRoutes:m,resolve:y,options:e,push:w,replace:S,go:k,back:()=>k(-1),forward:()=>k(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:V.add,isReady:st,install(O){const z=this;O.component("RouterLink",tE),O.component("RouterView",up),O.config.globalProperties.$router=z,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>Vi(l)}),Ts&&!Xt&&l.value===Jn&&(Xt=!0,w(s.location).catch(Q=>{}));const R={};for(const Q in Jn)Object.defineProperty(R,Q,{get:()=>l.value[Q],enumerable:!0});O.provide(Rh,z),O.provide(cp,x_(R)),O.provide(gu,l);const G=O.unmount;gt.add(O),O.unmount=function(){gt.delete(O),gt.size<1&&(c=Jn,K&&K(),K=null,l.value=Jn,Xt=!1,D=!1),G()}}};function Nt(O){return O.reduce((z,R)=>z.then(()=>B(R)),Promise.resolve())}return vt}function rE(e,t){const n=[],i=[],s=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(c=>Vs(c,a))?i.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Vs(c,l))||s.push(l))}return[n,i,s]}const oE=xo({__name:"App",setup(e){return(t,n)=>(Rt(),Z_(Vi(up)))}}),aE="modulepreload",lE=function(e){return"/openactivity/"+e},Ud={},$d=function(t,n,i){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=lE(r),r in Ud)return;Ud[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===r&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":aE,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};const cE="/openactivity/assets/destination-point-63b16bda.svg",uE="/openactivity/assets/starting-point-c9a465c9.svg";class hE{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Kn=hE,Hs={PROPERTYCHANGE:"propertychange"};class fE{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Ih=fE;function dE(e,t,n){let i,s;n=n||xi;let r=0,o=e.length,a=!1;for(;r<o;)i=r+(o-r>>1),s=+n(e[i],t),s<0?r=i+1:(o=i,a=!s);return a?r:~r}function xi(e,t){return e>t?1:e<t?-1:0}function bh(e,t,n){if(e[0]<=t)return 0;const i=e.length;if(t<=e[i-1])return i-1;if(typeof n=="function"){for(let s=1;s<i;++s){const r=e[s];if(r===t)return s;if(r<t)return n(t,e[s-1],r)>0?s-1:s}return i-1}if(n>0){for(let s=1;s<i;++s)if(e[s]<t)return s-1;return i-1}if(n<0){for(let s=1;s<i;++s)if(e[s]<=t)return s;return i-1}for(let s=1;s<i;++s){if(e[s]==t)return s;if(e[s]<t)return e[s-1]-t<t-e[s]?s-1:s}return i-1}function gE(e,t,n){for(;t<n;){const i=e[t];e[t]=e[n],e[n]=i,++t,--n}}function $n(e,t){const n=Array.isArray(t)?t:[t],i=n.length;for(let s=0;s<i;s++)e[e.length]=n[s]}function Ei(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function mE(e,t,n){const i=t||xi;return e.every(function(s,r){if(r===0)return!0;const o=i(e[r-1],s);return!(o>0||n&&o===0)})}function so(){return!0}function kl(){return!1}function Bs(){}function _E(e){let t=!1,n,i,s;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==s||!Ei(r,i))&&(t=!0,s=this,i=r,n=e.apply(this,arguments)),n}}function pE(e){function t(){let n;try{n=e()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return t()}function vo(e){for(const t in e)delete e[t]}function Zs(e){let t;for(t in e)return!1;return!t}class yE extends Ih{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const i=this.listeners_||(this.listeners_={}),s=i[t]||(i[t]=[]);s.includes(n)||s.push(n)}dispatchEvent(t){const n=typeof t=="string",i=n?t:t.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const r=n?new Kn(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=s.length;c<u;++c)if("handleEvent"in s[c]?l=s[c].handleEvent(r):l=s[c].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,Bs);delete o[i]}return l}disposeInternal(){this.listeners_&&vo(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){const i=this.listeners_&&this.listeners_[t];if(i){const s=i.indexOf(n);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[s]=Bs,++this.pendingRemovals_[t]):(i.splice(s,1),i.length===0&&delete this.listeners_[t]))}}}const wo=yE,at={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function xt(e,t,n,i,s){if(i&&i!==e&&(n=n.bind(i)),s){const o=n;n=function(){e.removeEventListener(t,n),o.apply(this,arguments)}}const r={target:e,type:t,listener:n};return e.addEventListener(t,n),r}function ka(e,t,n,i){return xt(e,t,n,i,!0)}function $t(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),vo(e))}class Nl extends wo{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(at.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const i=t.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=xt(this,t[r],n);return s}return xt(this,t,n)}onceInternal(t,n){let i;if(Array.isArray(t)){const s=t.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=ka(this,t[r],n)}else i=ka(this,t,n);return n.ol_key=i,i}unInternal(t,n){const i=n.ol_key;if(i)xE(i);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],n);else this.removeEventListener(t,n)}}Nl.prototype.on;Nl.prototype.once;Nl.prototype.un;function xE(e){if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)$t(e[t]);else $t(e)}const hp=Nl;function ot(){throw new Error("Unimplemented abstract method.")}let vE=0;function Ot(e){return e.ol_uid||(e.ol_uid=String(++vE))}class Wd extends Kn{constructor(t,n,i){super(t),this.key=n,this.oldValue=i}}class wE extends hp{constructor(t){super(),this.on,this.once,this.un,Ot(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new Wd(i,t,n)),i=Hs.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Wd(i,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,i){const s=this.values_||(this.values_={});if(i)s[t]=n;else{const r=s[t];s[t]=n,r!==n&&this.notify(t,r)}}setProperties(t,n){for(const i in t)this.set(i,t[i],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],Zs(this.values_)&&(this.values_=null),n||this.notify(t,i)}}}const fn=wE,Se={ADD:"add",REMOVE:"remove"},zd={LENGTH:"length"};class Ko extends Kn{constructor(t,n,i){super(t),this.element=n,this.index=i}}class EE extends fn{constructor(t,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let n=0,i=t.length;n<i;++n)this.push(t[n]);return this}forEach(t){const n=this.array_;for(let i=0,s=n.length;i<s;++i)t(n[i],i,n)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(zd.LENGTH)}insertAt(t,n){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new Ko(Se.ADD,n,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const n=this.getLength();return this.insertAt(n,t),this.getLength()}remove(t){const n=this.array_;for(let i=0,s=n.length;i<s;++i)if(n[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Ko(Se.REMOVE,n,t)),n}setAt(t,n){const i=this.getLength();if(t>=i){this.insertAt(t,n);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n,t);const s=this.array_[t];this.array_[t]=n,this.dispatchEvent(new Ko(Se.REMOVE,s,t)),this.dispatchEvent(new Ko(Se.ADD,n,t))}updateLength_(){this.set(zd.LENGTH,this.array_.length)}assertUnique_(t,n){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===t&&i!==n)throw new Error("Duplicate item added to a unique collection")}}const xn=EE,vi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",TE=vi.includes("firefox"),CE=vi.includes("safari")&&!vi.includes("chrom");CE&&(vi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(vi));const SE=vi.includes("webkit")&&!vi.includes("edge"),fp=vi.includes("macintosh"),dp=typeof devicePixelRatio<"u"?devicePixelRatio:1,Mh=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,gp=typeof Image<"u"&&Image.prototype.decode,mp=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}();function Et(e,t){if(!e)throw new Error(t)}new Array(6);function ln(){return[1,0,0,1,0,0]}function RE(e,t,n,i,s,r,o){return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e[4]=r,e[5]=o,e}function IE(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function jt(e,t){const n=t[0],i=t[1];return t[0]=e[0]*n+e[2]*i+e[4],t[1]=e[1]*n+e[3]*i+e[5],t}function bE(e,t,n){return RE(e,t,0,0,n,0,0)}function un(e,t,n,i,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return e[0]=i*c,e[1]=s*l,e[2]=-i*l,e[3]=s*c,e[4]=o*i*c-a*i*l+t,e[5]=o*s*l+a*s*c+n,e}function Gl(e,t){const n=ME(t);Et(n!==0,"Transformation matrix cannot be inverted");const i=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5];return e[0]=o/n,e[1]=-s/n,e[2]=-r/n,e[3]=i/n,e[4]=(r*l-o*a)/n,e[5]=-(i*l-s*a)/n,e}function ME(e){return e[0]*e[3]-e[1]*e[2]}let Yd;function Oh(e){const t="matrix("+e.join(", ")+")";if(Mh)return t;const n=Yd||(Yd=document.createElement("div"));return n.style.transform=t,n.style.transform}const oe={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Vd(e){const t=He();for(let n=0,i=e.length;n<i;++n)Br(t,e[n]);return t}function Ah(e,t,n){return n?(n[0]=e[0]-t,n[1]=e[1]-t,n[2]=e[2]+t,n[3]=e[3]+t,n):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function _p(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function is(e,t,n){let i,s;return t<e[0]?i=e[0]-t:e[2]<t?i=t-e[2]:i=0,n<e[1]?s=e[1]-n:e[3]<n?s=n-e[3]:s=0,i*i+s*s}function Eo(e,t){return Lh(e,t[0],t[1])}function fi(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function Lh(e,t,n){return e[0]<=t&&t<=e[2]&&e[1]<=n&&n<=e[3]}function mu(e,t){const n=e[0],i=e[1],s=e[2],r=e[3],o=t[0],a=t[1];let l=oe.UNKNOWN;return o<n?l=l|oe.LEFT:o>s&&(l=l|oe.RIGHT),a<i?l=l|oe.BELOW:a>r&&(l=l|oe.ABOVE),l===oe.UNKNOWN&&(l=oe.INTERSECTING),l}function He(){return[1/0,1/0,-1/0,-1/0]}function wi(e,t,n,i,s){return s?(s[0]=e,s[1]=t,s[2]=n,s[3]=i,s):[e,t,n,i]}function To(e){return wi(1/0,1/0,-1/0,-1/0,e)}function OE(e,t){const n=e[0],i=e[1];return wi(n,i,n,i,t)}function pp(e,t,n,i,s){const r=To(s);return xp(r,e,t,n,i)}function ro(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function yp(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function Br(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function xp(e,t,n,i,s){for(;n<i;n+=s)AE(e,t[n],t[n+1]);return e}function AE(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)}function vp(e,t){let n;return n=t(Ul(e)),n||(n=t($l(e)),n)||(n=t(Wl(e)),n)||(n=t(ss(e)),n)?n:!1}function _u(e){let t=0;return hr(e)||(t=kt(e)*ke(e)),t}function Ul(e){return[e[0],e[1]]}function $l(e){return[e[2],e[1]]}function Qi(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function LE(e,t){let n;if(t==="bottom-left")n=Ul(e);else if(t==="bottom-right")n=$l(e);else if(t==="top-left")n=ss(e);else if(t==="top-right")n=Wl(e);else throw new Error("Invalid corner");return n}function pu(e,t,n,i,s){const[r,o,a,l,c,u,h,f]=yu(e,t,n,i);return wi(Math.min(r,a,c,h),Math.min(o,l,u,f),Math.max(r,a,c,h),Math.max(o,l,u,f),s)}function yu(e,t,n,i){const s=t*i[0]/2,r=t*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=s*o,c=s*a,u=r*o,h=r*a,f=e[0],d=e[1];return[f-l+h,d-c-u,f-l-h,d-c+u,f+l-h,d+c+u,f+l+h,d+c-u,f-l+h,d-c-u]}function ke(e){return e[3]-e[1]}function ks(e,t,n){const i=n||He();return ve(e,t)?(e[0]>t[0]?i[0]=e[0]:i[0]=t[0],e[1]>t[1]?i[1]=e[1]:i[1]=t[1],e[2]<t[2]?i[2]=e[2]:i[2]=t[2],e[3]<t[3]?i[3]=e[3]:i[3]=t[3]):To(i),i}function ss(e){return[e[0],e[3]]}function Wl(e){return[e[2],e[3]]}function kt(e){return e[2]-e[0]}function ve(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function hr(e){return e[2]<e[0]||e[3]<e[1]}function FE(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function PE(e,t){const n=(e[2]-e[0])/2*(t-1),i=(e[3]-e[1])/2*(t-1);e[0]-=n,e[2]+=n,e[1]-=i,e[3]+=i}function DE(e,t,n){let i=!1;const s=mu(e,t),r=mu(e,n);if(s===oe.INTERSECTING||r===oe.INTERSECTING)i=!0;else{const o=e[0],a=e[1],l=e[2],c=e[3],u=t[0],h=t[1],f=n[0],d=n[1],g=(d-h)/(f-u);let m,p;r&oe.ABOVE&&!(s&oe.ABOVE)&&(m=f-(d-c)/g,i=m>=o&&m<=l),!i&&r&oe.RIGHT&&!(s&oe.RIGHT)&&(p=d-(f-l)*g,i=p>=a&&p<=c),!i&&r&oe.BELOW&&!(s&oe.BELOW)&&(m=f-(d-a)/g,i=m>=o&&m<=l),!i&&r&oe.LEFT&&!(s&oe.LEFT)&&(p=d-(f-o)*g,i=p>=a&&p<=c)}return i}function wp(e,t){const n=t.getExtent(),i=Qi(e);if(t.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const s=kt(n),o=Math.floor((i[0]-n[0])/s)*s;e[0]-=o,e[2]-=o}return e}function kE(e,t){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];wp(e,t);const i=kt(n);if(kt(e)>i)return[[n[0],e[1],n[2],e[3]]];if(e[0]<n[0])return[[e[0]+i,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-i,e[3]]]}return[e]}function te(e,t,n){return Math.min(Math.max(e,t),n)}function NE(e,t,n,i,s,r){const o=s-n,a=r-i;if(o!==0||a!==0){const l=((e-n)*o+(t-i)*a)/(o*o+a*a);l>1?(n=s,i=r):l>0&&(n+=o*l,i+=a*l)}return Hi(e,t,n,i)}function Hi(e,t,n,i){const s=n-e,r=i-t;return s*s+r*r}function GE(e){const t=e.length;for(let i=0;i<t;i++){let s=i,r=Math.abs(e[i][i]);for(let a=i+1;a<t;a++){const l=Math.abs(e[a][i]);l>r&&(r=l,s=a)}if(r===0)return null;const o=e[s];e[s]=e[i],e[i]=o;for(let a=i+1;a<t;a++){const l=-e[a][i]/e[i][i];for(let c=i;c<t+1;c++)i==c?e[a][c]=0:e[a][c]+=l*e[i][c]}}const n=new Array(t);for(let i=t-1;i>=0;i--){n[i]=e[i][t]/e[i][i];for(let s=i-1;s>=0;s--)e[s][t]-=e[s][i]*n[i]}return n}function Ta(e){return e*Math.PI/180}function Bi(e,t){const n=e%t;return n*t<0?n+t:n}function Fe(e,t,n){return e+n*(t-e)}function zl(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function qo(e,t){return Math.floor(zl(e,t))}function Jo(e,t){return Math.ceil(zl(e,t))}const UE=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,$E=/^([a-z]*)$|^hsla?\(.*\)$/i;function Ep(e){return typeof e=="string"?e:Tp(e)}function WE(e){const t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);const n=getComputedStyle(t).color;return document.body.removeChild(t),n}return""}const zE=function(){const t={};let n=0;return function(i){let s;if(t.hasOwnProperty(i))s=t[i];else{if(n>=1024){let r=0;for(const o in t)r++&3||(delete t[o],--n)}s=YE(i),t[i]=s,++n}return s}}();function Na(e){return Array.isArray(e)?e:zE(e)}function YE(e){let t,n,i,s,r;if($E.exec(e)&&(e=WE(e)),UE.exec(e)){const o=e.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(e.substr(1+0*a,a),16),n=parseInt(e.substr(1+1*a,a),16),i=parseInt(e.substr(1+2*a,a),16),l?s=parseInt(e.substr(1+3*a,a),16):s=255,a==1&&(t=(t<<4)+t,n=(n<<4)+n,i=(i<<4)+i,l&&(s=(s<<4)+s)),r=[t,n,i,s/255]}else if(e.startsWith("rgba("))r=e.slice(5,-1).split(",").map(Number),Xd(r);else if(e.startsWith("rgb("))r=e.slice(4,-1).split(",").map(Number),r.push(1),Xd(r);else throw new Error("Invalid color");return r}function Xd(e){return e[0]=te(e[0]+.5|0,0,255),e[1]=te(e[1]+.5|0,0,255),e[2]=te(e[2]+.5|0,0,255),e[3]=te(e[3],0,1),e}function Tp(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let n=e[1];n!=(n|0)&&(n=n+.5|0);let i=e[2];i!=(i|0)&&(i=i+.5|0);const s=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+n+","+i+","+s+")"}class VE{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const n in this.cache_){const i=this.cache_[n];!(t++&3)&&!i.hasListener()&&(delete this.cache_[n],--this.cacheSize_)}}}get(t,n,i){const s=Hd(t,n,i);return s in this.cache_?this.cache_[s]:null}set(t,n,i,s){const r=Hd(t,n,i);this.cache_[r]=s,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Hd(e,t,n){const i=n?Ep(n):"null";return t+":"+e+":"+i}const Ga=new VE,Pt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class XE extends fn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const n=Object.assign({},t);typeof t.properties=="object"&&(delete n.properties,Object.assign(n,t.properties)),n[Pt.OPACITY]=t.opacity!==void 0?t.opacity:1,Et(typeof n[Pt.OPACITY]=="number","Layer opacity must be a number"),n[Pt.VISIBLE]=t.visible!==void 0?t.visible:!0,n[Pt.Z_INDEX]=t.zIndex,n[Pt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[Pt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[Pt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[Pt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=te(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(t){return ot()}getLayerStatesArray(t){return ot()}getExtent(){return this.get(Pt.EXTENT)}getMaxResolution(){return this.get(Pt.MAX_RESOLUTION)}getMinResolution(){return this.get(Pt.MIN_RESOLUTION)}getMinZoom(){return this.get(Pt.MIN_ZOOM)}getMaxZoom(){return this.get(Pt.MAX_ZOOM)}getOpacity(){return this.get(Pt.OPACITY)}getSourceState(){return ot()}getVisible(){return this.get(Pt.VISIBLE)}getZIndex(){return this.get(Pt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Pt.EXTENT,t)}setMaxResolution(t){this.set(Pt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Pt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Pt.MAX_ZOOM,t)}setMinZoom(t){this.set(Pt.MIN_ZOOM,t)}setOpacity(t){Et(typeof t=="number","Layer opacity must be a number"),this.set(Pt.OPACITY,t)}setVisible(t){this.set(Pt.VISIBLE,t)}setZIndex(t){this.set(Pt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Cp=XE,wn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Qt={ANIMATING:0,INTERACTING:1},Be={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},HE=42,Fh=256,js={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class BE{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||js[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Sp=BE,Co=6378137,bs=Math.PI*Co,ZE=[-bs,-bs,bs,bs],jE=[-180,-85,180,85],Qo=Co*Math.log(Math.tan(Math.PI/2));class ms extends Sp{constructor(t){super({code:t,units:"m",extent:ZE,global:!0,worldExtent:jE,getPointResolution:function(n,i){return n/Math.cosh(i[1]/Co)}})}}const Bd=[new ms("EPSG:3857"),new ms("EPSG:102100"),new ms("EPSG:102113"),new ms("EPSG:900913"),new ms("http://www.opengis.net/def/crs/EPSG/0/3857"),new ms("http://www.opengis.net/gml/srs/epsg.xml#3857")];function KE(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let s=0;s<i;s+=n){t[s]=bs*e[s]/180;let r=Co*Math.log(Math.tan(Math.PI*(+e[s+1]+90)/360));r>Qo?r=Qo:r<-Qo&&(r=-Qo),t[s+1]=r}return t}function qE(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let s=0;s<i;s+=n)t[s]=180*e[s]/bs,t[s+1]=360*Math.atan(Math.exp(e[s+1]/Co))/Math.PI-90;return t}const JE=6378137,Zd=[-180,-90,180,90],QE=Math.PI*JE/180;class Ii extends Sp{constructor(t,n){super({code:t,units:"degrees",extent:Zd,axisOrientation:n,global:!0,metersPerUnit:QE,worldExtent:Zd})}}const jd=[new Ii("CRS:84"),new Ii("EPSG:4326","neu"),new Ii("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ii("urn:ogc:def:crs:OGC:2:84"),new Ii("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ii("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ii("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let xu={};function tT(e){return xu[e]||xu[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function eT(e,t){xu[e]=t}let Ns={};function Ua(e,t,n){const i=e.getCode(),s=t.getCode();i in Ns||(Ns[i]={}),Ns[i][s]=n}function nT(e,t){let n;return e in Ns&&t in Ns[e]&&(n=Ns[e][t]),n}function Kd(e,t,n){const i=n!==void 0?e.toFixed(n):""+e;let s=i.indexOf(".");return s=s===-1?i.length:s,s>t?i:new Array(1+t-s).join("0")+i}function iT(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function qd(e,t,n){const i=Bi(t+180,360)-180,s=Math.abs(3600*i),r=n||0;let o=Math.floor(s/3600),a=Math.floor((s-o*3600)/60),l=zl(s-o*3600-a*60,r);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"°";return(a!==0||l!==0)&&(c+=" "+Kd(a,2)+"′"),l!==0&&(c+=" "+Kd(l,2,r)+"″"),i!==0&&(c+=" "+e.charAt(i<0?1:0)),c}function $a(e,t){let n=!0;for(let i=e.length-1;i>=0;--i)if(e[i]!=t[i]){n=!1;break}return n}function Ph(e,t){const n=Math.cos(t),i=Math.sin(t),s=e[0]*n-e[1]*i,r=e[1]*n+e[0]*i;return e[0]=s,e[1]=r,e}function sT(e,t){return e[0]*=t,e[1]*=t,e}function Rp(e,t){return e?qd("NS",e[1],t)+" "+qd("EW",e[0],t):""}function Ip(e,t){if(t.canWrapX()){const n=kt(t.getExtent()),i=rT(e,t,n);i&&(e[0]-=i*n)}return e}function rT(e,t,n){const i=t.getExtent();let s=0;return t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])&&(n=n||kt(i),s=Math.floor((e[0]-i[0])/n)),s}const oT=63710088e-1;function Jd(e,t,n){n=n||oT;const i=Ta(e[1]),s=Ta(t[1]),r=(s-i)/2,o=Ta(t[0]-e[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const bp={info:1,warn:2,error:3,none:4};let aT=bp.info;function Mp(...e){aT>bp.warn||console.warn(...e)}let vu=!0;function lT(e){vu=!(e===void 0?!0:e)}function Dh(e,t){if(t!==void 0){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];t=t}else t=e.slice();return t}function Op(e,t){if(t!==void 0&&e!==t){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function cT(e){eT(e.getCode(),e),Ua(e,e,Dh)}function uT(e){e.forEach(cT)}function ee(e){return typeof e=="string"?tT(e):e||null}function Wa(e,t,n,i){e=ee(e);let s;const r=e.getPointResolutionFunc();if(r){if(s=r(t,n),i&&i!==e.getUnits()){const o=e.getMetersPerUnit();o&&(s=s*o/js[i])}}else{const o=e.getUnits();if(o=="degrees"&&!i||i=="degrees")s=t;else{const a=Nh(e,ee("EPSG:4326"));if(a===Op&&o!=="degrees")s=t*e.getMetersPerUnit();else{let c=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];c=a(c,c,2);const u=Jd(c.slice(0,2),c.slice(2,4)),h=Jd(c.slice(4,6),c.slice(6,8));s=(u+h)/2}const l=i?js[i]:e.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function Qd(e){uT(e),e.forEach(function(t){e.forEach(function(n){t!==n&&Ua(t,n,Dh)})})}function hT(e,t,n,i){e.forEach(function(s){t.forEach(function(r){Ua(s,r,n),Ua(r,s,i)})})}function kh(e,t){return e?typeof e=="string"?ee(e):e:ee(t)}function Di(e,t){if(e===t)return!0;const n=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||Nh(e,t)===Dh)&&n}function Nh(e,t){const n=e.getCode(),i=t.getCode();let s=nT(n,i);return s||(s=Op),s}function za(e,t){const n=ee(e),i=ee(t);return Nh(n,i)}function fT(e,t,n){return za(t,n)(e,void 0,e.length)}function wu(e,t){return e}function An(e,t){return vu&&!$a(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(vu=!1,Mp("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function Ap(e,t){return e}function Dn(e,t){return e}function dT(){Qd(Bd),Qd(jd),hT(jd,Bd,KE,qE)}dT();function tg(e,t,n){return function(i,s,r,o,a){if(!i)return;if(!s&&!t)return i;const l=t?0:r[0]*s,c=t?0:r[1]*s,u=a?a[0]:0,h=a?a[1]:0;let f=e[0]+l/2+u,d=e[2]-l/2+u,g=e[1]+c/2+h,m=e[3]-c/2+h;f>d&&(f=(d+f)/2,d=f),g>m&&(g=(m+g)/2,m=g);let p=te(i[0],f,d),y=te(i[1],g,m);if(o&&n&&s){const x=30*s;p+=-x*Math.log(1+Math.max(0,f-i[0])/x)+x*Math.log(1+Math.max(0,i[0]-d)/x),y+=-x*Math.log(1+Math.max(0,g-i[1])/x)+x*Math.log(1+Math.max(0,i[1]-m)/x)}return[p,y]}}function gT(e){return e}function Gh(e,t,n,i){const s=kt(t)/n[0],r=ke(t)/n[1];return i?Math.min(e,Math.max(s,r)):Math.min(e,Math.min(s,r))}function Uh(e,t,n){let i=Math.min(e,t);const s=50;return i*=Math.log(1+s*Math.max(0,e/t-1))/s+1,n&&(i=Math.max(i,n),i/=Math.log(1+s*Math.max(0,n/e-1))/s+1),te(i,n/2,t*2)}function mT(e,t,n,i){return t=t!==void 0?t:!0,function(s,r,o,a){if(s!==void 0){const l=e[0],c=e[e.length-1],u=n?Gh(l,n,o,i):l;if(a)return t?Uh(s,u,c):te(s,c,u);const h=Math.min(u,s),f=Math.floor(bh(e,h,r));return e[f]>u&&f<e.length-1?e[f+1]:e[f]}}}function _T(e,t,n,i,s,r){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,c){if(o!==void 0){const u=s?Gh(t,s,l,r):t;if(c)return i?Uh(o,u,n):te(o,n,u);const h=1e-9,f=Math.ceil(Math.log(t/u)/Math.log(e)-h),d=-a*(.5-h)+.5,g=Math.min(u,o),m=Math.floor(Math.log(t/g)/Math.log(e)+d),p=Math.max(f,m),y=t/Math.pow(e,p);return te(y,n,u)}}}function eg(e,t,n,i,s){return n=n!==void 0?n:!0,function(r,o,a,l){if(r!==void 0){const c=i?Gh(e,i,a,s):e;return!n||!l?te(r,t,c):Uh(r,c,t)}}}function $h(e){if(e!==void 0)return 0}function ng(e){if(e!==void 0)return e}function pT(e){const t=2*Math.PI/e;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/t+.5)*t,n}}function yT(e){return e=e||Ta(5),function(t,n){if(n)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}function Lp(e){return Math.pow(e,3)}function fr(e){return 1-Lp(1-e)}function xT(e){return 3*e*e-2*e*e*e}function vT(e){return e}function Zi(e,t,n,i,s,r){r=r||[];let o=0;for(let a=t;a<n;a+=i){const l=e[a],c=e[a+1];r[o++]=s[0]*l+s[2]*c+s[4],r[o++]=s[1]*l+s[3]*c+s[5]}return r&&r.length!=o&&(r.length=o),r}function Fp(e,t,n,i,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],u=r[1];let h=0;for(let f=t;f<n;f+=i){const d=e[f]-c,g=e[f+1]-u;o[h++]=c+d*a-g*l,o[h++]=u+d*l+g*a;for(let m=f+2;m<f+i;++m)o[h++]=e[m]}return o&&o.length!=h&&(o.length=h),o}function wT(e,t,n,i,s,r,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=t;h<n;h+=i){const f=e[h]-l,d=e[h+1]-c;a[u++]=l+s*f,a[u++]=c+r*d;for(let g=h+2;g<h+i;++g)a[u++]=e[g]}return a&&a.length!=u&&(a.length=u),a}function ET(e,t,n,i,s,r,o){o=o||[];let a=0;for(let l=t;l<n;l+=i){o[a++]=e[l]+s,o[a++]=e[l+1]+r;for(let c=l+2;c<l+i;++c)o[a++]=e[c]}return o&&o.length!=a&&(o.length=a),o}const ig=ln();class TT extends fn{constructor(){super(),this.extent_=He(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=_E(function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(n)})}simplifyTransformed(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)}clone(){return ot()}closestPointXY(t,n,i,s){return ot()}containsXY(t,n){const i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n}getClosestPoint(t,n){return n=n||[NaN,NaN],this.closestPointXY(t[0],t[1],n,1/0),n}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return ot()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&To(n),this.extentRevision_=this.getRevision()}return FE(this.extent_,t)}rotate(t,n){ot()}scale(t,n,i){ot()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return ot()}getType(){return ot()}applyTransform(t){ot()}intersectsExtent(t){return ot()}translate(t,n){ot()}transform(t,n){const i=ee(t),s=i.getUnits()=="tile-pixels"?function(r,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=ke(c)/ke(l);return un(ig,c[0],c[3],u,-u,0,0,0),Zi(r,0,r.length,a,ig,o),za(i,n)(r,o,a)}:za(i,n);return this.applyTransform(s),this}}const Pp=TT;class CT extends Pp{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return pp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return ot()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,n){this.stride=sg(t),this.layout=t,this.flatCoordinates=n}setCoordinates(t,n){ot()}setLayout(t,n,i){let s;if(t)s=sg(t);else{for(let r=0;r<i;++r){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}s=n.length,t=ST(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,n){const i=this.getFlatCoordinates();if(i){const s=this.getStride();Fp(i,0,i.length,s,t,n,i),this.changed()}}scale(t,n,i){n===void 0&&(n=t),i||(i=Qi(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();wT(s,0,s.length,r,t,n,i,s),this.changed()}}translate(t,n){const i=this.getFlatCoordinates();if(i){const s=this.getStride();ET(i,0,i.length,s,t,n,i),this.changed()}}}function ST(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function sg(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function RT(e,t,n){const i=e.getFlatCoordinates();if(!i)return null;const s=e.getStride();return Zi(i,0,i.length,s,t,n)}const rs=CT;function rg(e,t,n,i,s,r,o){const a=e[t],l=e[t+1],c=e[n]-a,u=e[n+1]-l;let h;if(c===0&&u===0)h=t;else{const f=((s-a)*c+(r-l)*u)/(c*c+u*u);if(f>1)h=n;else if(f>0){for(let d=0;d<i;++d)o[d]=Fe(e[t+d],e[n+d],f);o.length=i;return}else h=t}for(let f=0;f<i;++f)o[f]=e[h+f];o.length=i}function Wh(e,t,n,i,s){let r=e[t],o=e[t+1];for(t+=i;t<n;t+=i){const a=e[t],l=e[t+1],c=Hi(r,o,a,l);c>s&&(s=c),r=a,o=l}return s}function zh(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];s=Wh(e,t,a,i,s),t=a}return s}function IT(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];s=zh(e,t,a,i,s),t=a[a.length-1]}return s}function Yh(e,t,n,i,s,r,o,a,l,c,u){if(t==n)return c;let h,f;if(s===0){if(f=Hi(o,a,e[t],e[t+1]),f<c){for(h=0;h<i;++h)l[h]=e[t+h];return l.length=i,f}return c}u=u||[NaN,NaN];let d=t+i;for(;d<n;)if(rg(e,d-i,d,i,o,a,u),f=Hi(o,a,u[0],u[1]),f<c){for(c=f,h=0;h<i;++h)l[h]=u[h];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(f)-Math.sqrt(c))/s|0,1);if(r&&(rg(e,n-i,t,i,o,a,u),f=Hi(o,a,u[0],u[1]),f<c)){for(c=f,h=0;h<i;++h)l[h]=u[h];l.length=i}return c}function Vh(e,t,n,i,s,r,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const d=n[h];c=Yh(e,t,d,i,s,r,o,a,l,c,u),t=d}return c}function bT(e,t,n,i,s,r,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const d=n[h];c=Vh(e,t,d,i,s,r,o,a,l,c,u),t=d[d.length-1]}return c}function MT(e,t,n,i){for(let s=0,r=n.length;s<r;++s)e[t++]=n[s];return t}function Yl(e,t,n,i){for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0;a<i;++a)e[t++]=o[a]}return t}function Xh(e,t,n,i,s){s=s||[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=Yl(e,t,n[o],i);s[r++]=l,t=l}return s.length=r,s}function OT(e,t,n,i,s){s=s||[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=Xh(e,t,n[o],i,s[r]);l.length===0&&(l[0]=t),s[r++]=l,t=l[l.length-1]}return s.length=r,s}function Hh(e,t,n,i,s,r,o){const a=(n-t)/i;if(a<3){for(;t<n;t+=i)r[o++]=e[t],r[o++]=e[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,n-i];let u=0;for(;c.length>0;){const h=c.pop(),f=c.pop();let d=0;const g=e[f],m=e[f+1],p=e[h],y=e[h+1];for(let x=f+i;x<h;x+=i){const E=e[x],w=e[x+1],S=NE(E,w,g,m,p,y);S>d&&(u=x,d=S)}d>s&&(l[(u-t)/i]=1,f+i<u&&c.push(f,u),u+i<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(r[o++]=e[t+h*i],r[o++]=e[t+h*i+1]);return o}function AT(e,t,n,i,s,r,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=Hh(e,t,u,i,s,r,o),a.push(o),t=u}return o}function Ai(e,t){return t*Math.round(e/t)}function LT(e,t,n,i,s,r,o){if(t==n)return o;let a=Ai(e[t],s),l=Ai(e[t+1],s);t+=i,r[o++]=a,r[o++]=l;let c,u;do if(c=Ai(e[t],s),u=Ai(e[t+1],s),t+=i,t==n)return r[o++]=c,r[o++]=u,o;while(c==a&&u==l);for(;t<n;){const h=Ai(e[t],s),f=Ai(e[t+1],s);if(t+=i,h==c&&f==u)continue;const d=c-a,g=u-l,m=h-a,p=f-l;if(d*p==g*m&&(d<0&&m<d||d==m||d>0&&m>d)&&(g<0&&p<g||g==p||g>0&&p>g)){c=h,u=f;continue}r[o++]=c,r[o++]=u,a=c,l=u,c=h,u=f}return r[o++]=c,r[o++]=u,o}function Dp(e,t,n,i,s,r,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=LT(e,t,u,i,s,r,o),a.push(o),t=u}return o}function FT(e,t,n,i,s,r,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],h=[];o=Dp(e,t,u,i,s,r,o,h),a.push(h),t=u[u.length-1]}return o}function di(e,t,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=t;o<n;o+=i)s[r++]=e.slice(o,o+i);return s.length=r,s}function oo(e,t,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];s[r++]=di(e,t,l,i,s[r]),t=l}return s.length=r,s}function Eu(e,t,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];s[r++]=l.length===1&&l[0]===t?[]:oo(e,t,l,i,s[r]),t=l[l.length-1]}return s.length=r,s}function kp(e,t,n,i){let s=0,r=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];s+=o*a-r*l,r=a,o=l}return s/2}function Np(e,t,n,i){let s=0;for(let r=0,o=n.length;r<o;++r){const a=n[r];s+=kp(e,t,a,i),t=a}return s}function PT(e,t,n,i){let s=0;for(let r=0,o=n.length;r<o;++r){const a=n[r];s+=Np(e,t,a,i),t=a[a.length-1]}return s}class Ya extends rs{constructor(t,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}clone(){return new Ya(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,n,i,s){return s<is(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Wh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Yh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,s))}getArea(){return kp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return di(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const n=[];return n.length=Hh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new Ya(n,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yl(this.flatCoordinates,0,t,this.stride),this.changed()}}const og=Ya;class Bh extends rs{constructor(t,n){super(),this.setCoordinates(t,n)}clone(){const t=new Bh(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,s){const r=this.flatCoordinates,o=Hi(t,n,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)i[l]=r[l];return i.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return OE(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Lh(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=MT(this.flatCoordinates,0,t,this.stride),this.changed()}}const Ks=Bh;function DT(e,t,n,i,s){return!vp(s,function(o){return!Ni(e,t,n,i,o[0],o[1])})}function Ni(e,t,n,i,s,r){let o=0,a=e[n-i],l=e[n-i+1];for(;t<n;t+=i){const c=e[t],u=e[t+1];l<=r?u>r&&(c-a)*(r-l)-(s-a)*(u-l)>0&&o++:u<=r&&(c-a)*(r-l)-(s-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function Zh(e,t,n,i,s,r){if(n.length===0||!Ni(e,t,n[0],i,s,r))return!1;for(let o=1,a=n.length;o<a;++o)if(Ni(e,n[o-1],n[o],i,s,r))return!1;return!0}function kT(e,t,n,i,s,r){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(Zh(e,t,l,i,s,r))return!0;t=l[l.length-1]}return!1}function Gp(e,t,n,i,s,r,o){let a,l,c,u,h,f,d;const g=s[r+1],m=[];for(let x=0,E=n.length;x<E;++x){const w=n[x];for(u=e[w-i],f=e[w-i+1],a=t;a<w;a+=i)h=e[a],d=e[a+1],(g<=f&&d<=g||f<=g&&g<=d)&&(c=(g-f)/(d-f)*(h-u)+u,m.push(c)),u=h,f=d}let p=NaN,y=-1/0;for(m.sort(xi),u=m[0],a=1,l=m.length;a<l;++a){h=m[a];const x=Math.abs(h-u);x>y&&(c=(u+h)/2,Zh(e,t,n,i,c,g)&&(p=c,y=x)),u=h}return isNaN(p)&&(p=s[r]),o?(o.push(p,g,y),o):[p,g,y]}function NT(e,t,n,i,s){let r=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];r=Gp(e,t,l,i,s,2*o,r),t=l[l.length-1]}return r}function Up(e,t,n,i,s){let r;for(t+=i;t<n;t+=i)if(r=s(e.slice(t-i,t),e.slice(t,t+i)),r)return r;return!1}function Vl(e,t,n,i,s){const r=xp(He(),e,t,n,i);return ve(s,r)?fi(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:Up(e,t,n,i,function(o,a){return DE(s,o,a)}):!1}function GT(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r){if(Vl(e,t,n[r],i,s))return!0;t=n[r]}return!1}function $p(e,t,n,i,s){return!!(Vl(e,t,n,i,s)||Ni(e,t,n,i,s[0],s[1])||Ni(e,t,n,i,s[0],s[3])||Ni(e,t,n,i,s[2],s[1])||Ni(e,t,n,i,s[2],s[3]))}function Wp(e,t,n,i,s){if(!$p(e,t,n[0],i,s))return!1;if(n.length===1)return!0;for(let r=1,o=n.length;r<o;++r)if(DT(e,n[r-1],n[r],i,s)&&!Vl(e,n[r-1],n[r],i,s))return!1;return!0}function UT(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];if(Wp(e,t,a,i,s))return!0;t=a[a.length-1]}return!1}function $T(e,t,n,i){for(;t<n-i;){for(let s=0;s<i;++s){const r=e[t+s];e[t+s]=e[n-i+s],e[n-i+s]=r}t+=i,n-=i}}function zp(e,t,n,i){let s=0,r=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function Yp(e,t,n,i,s){s=s!==void 0?s:!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],l=zp(e,t,a,i);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=a}return!0}function WT(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];if(!Yp(e,t,a,i,s))return!1;a.length&&(t=a[a.length-1])}return!0}function Tu(e,t,n,i,s){s=s!==void 0?s:!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],l=zp(e,t,a,i);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&$T(e,t,a,i),t=a}return t}function ag(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r)t=Tu(e,t,n[r],i,s);return t}class ao extends rs{constructor(t,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,t),this.ends_=i):this.setCoordinates(t,n)}appendLinearRing(t){this.flatCoordinates?$n(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ao(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,s){return s<is(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(zh(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vh(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,s))}containsXY(t,n){return Zh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)}getArea(){return Np(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Tu(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,oo(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Qi(this.getExtent());this.flatInteriorPoint_=Gp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ks(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new og(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,n=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new og(n.slice(r,l),t);s.push(c),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Yp(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Tu(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=Dp(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new ao(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return Wp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Xh(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const Va=ao;function Cu(e){if(hr(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],n=e[1],i=e[2],s=e[3],r=[t,n,t,s,i,s,i,n,t,n];return new ao(r,"XY",[r.length])}const Ec=0;class zT extends fn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=kh(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&lT(),t.center&&(t.center=An(t.center,this.projection_)),t.extent&&(t.extent=Dn(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const n=Object.assign({},t);for(const a in Be)delete n[a];this.setProperties(n,!0);const i=VT(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const s=YT(t),r=i.constraint,o=XT(t);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let n=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const s=t||[0,0,0,0];n=n||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-n[3]+n[1]-s[1]),a=r/2*(s[0]-n[0]+n[2]-s[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=An(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=An(s.anchor,this.getProjection())),n[i]=s}this.animateInternal.apply(this,n)}animateInternal(t){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let s=0;for(;s<n&&!this.isDef();++s){const u=arguments[s];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(s===n){i&&ta(i,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;s<n;++s){const u=arguments[s],h={start:r,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||xT,callback:i};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const f=Bi(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+f,l=h.targetRotation}HT(h)?h.complete=!0:r+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(Qt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Qt.ANIMATING]>0}getInteracting(){return this.hints_[Qt.INTERACTING]>0}cancelAnimations(){this.setHint(Qt.ANIMATING,-this.hints_[Qt.ANIMATING]);let t;for(let n=0,i=this.animations_.length;n<i;++n){const s=this.animations_[n];if(s[0].callback&&ta(s[0].callback,!1),!t)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const c=t-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):r=!1;const h=l.easing(u);if(l.sourceCenter){const f=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const p=f+h*(g-f),y=d+h*(m-d);this.targetCenter_=[p,y]}if(l.sourceResolution&&l.targetResolution){const f=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(f,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=h===1?Bi(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(r){this.animations_[i]=null,this.setHint(Qt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&ta(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,n){let i;const s=this.getCenterInternal();return s!==void 0&&(i=[s[0]-n[0],s[1]-n[1]],Ph(i,t-this.getRotation()),iT(i,n)),i}calculateCenterZoom(t,n){let i;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=n[0]-t*(n[0]-s[0])/r,a=n[1]-t*(n[1]-s[1])/r;i=[o,a]}return i}getViewportSize_(t){const n=this.viewportSize_;if(t){const i=n[0],s=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(s*Math.cos(t))]}return n}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&wu(t,this.getProjection())}getCenterInternal(){return this.get(Be.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const n=this.calculateExtentInternal(t);return Ap(n,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();Et(n,"The view center is not defined");const i=this.getResolution();Et(i!==void 0,"The view resolution is not defined");const s=this.getRotation();return Et(s!==void 0,"The view rotation is not defined"),pu(n,i,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Be.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,n){return this.getResolutionForExtentInternal(Dn(t,this.getProjection()),n)}getResolutionForExtentInternal(t,n){n=n||this.getViewportSizeMinusPadding_();const i=kt(t)/n[0],s=ke(t)/n[1];return Math.max(i,s)}getResolutionForValueFunction(t){t=t||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(n/i)/Math.log(t);return function(r){return n/Math.pow(t,r*s)}}getRotation(){return this.get(Be.ROTATION)}getValueForResolutionFunction(t){const n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(i/s)/n;return function(o){return Math.log(i/o)/n/r}}getViewportSizeMinusPadding_(t){let n=this.getViewportSize_(t);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const t=this.getProjection(),n=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=Tc(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],n,i)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t}getZoomForResolution(t){let n=this.minZoom_||0,i,s;if(this.resolutions_){const r=bh(this.resolutions_,t,1);n=r,i=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=i/this.resolutions_[r+1]}else i=this.maxResolution_,s=this.zoomFactor_;return n+Math.log(i/t)/Math.log(s)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=te(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,te(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,n){let i;if(Et(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Et(!hr(t),"Cannot fit empty extent provided as `geometry`");const s=Dn(t,this.getProjection());i=Cu(s)}else if(t.getType()==="Circle"){const s=Dn(t.getExtent(),this.getProjection());i=Cu(s),i.rotate(this.getRotation(),Qi(s))}else i=t;this.fitInternal(i,n)}rotatedExtentForGeometry(t){const n=this.getRotation(),i=Math.cos(n),s=Math.sin(-n),r=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,f=r.length;h<f;h+=o){const d=r[h]*i-r[h+1]*s,g=r[h]*s+r[h+1]*i;a=Math.min(a,d),l=Math.min(l,g),c=Math.max(c,d),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(t,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const s=n.padding!==void 0?n.padding:[0,0,0,0],r=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),f=Qi(a);f[0]+=(s[1]-s[3])/2*l,f[1]+=(s[0]-s[2])/2*l;const d=f[0]*h-f[1]*u,g=f[1]*h+f[0]*u,m=this.getConstrainedCenter([d,g],l),p=n.callback?n.callback:Bs;n.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:n.duration,easing:n.easing},p):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),ta(p,!0))}centerOn(t,n,i){this.centerOnInternal(An(t,this.getProjection()),n,i)}centerOnInternal(t,n,i){this.setCenterInternal(Tc(t,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,n,i,s){let r;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),l=Tc(t,s,[a[0]/2+o[3],a[1]/2+o[0]],n,i);r=[t[0]-l[0],t[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const n=wu(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])}adjustCenterInternal(t){const n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])}adjustResolution(t,n){n=n&&An(n,this.getProjection()),this.adjustResolutionInternal(t,n)}adjustResolutionInternal(t,n){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,i);n&&(this.targetCenter_=this.calculateCenterZoom(r,n)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)}adjustRotation(t,n){n&&(n=An(n,this.getProjection())),this.adjustRotationInternal(t,n)}adjustRotationInternal(t,n){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(s,n)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&An(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,n){const i=this.getAnimating()||this.getInteracting()||n,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(Be.ROTATION)!==s&&this.set(Be.ROTATION,s),this.get(Be.RESOLUTION)!==o&&(this.set(Be.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Be.CENTER)||!$a(this.get(Be.CENTER),a))&&this.set(Be.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,n,i){t=t!==void 0?t:200;const s=n||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!$a(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:t,easing:fr,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Qt.INTERACTING,1)}endInteraction(t,n,i){i=i&&An(i,this.getProjection()),this.endInteractionInternal(t,n,i)}endInteractionInternal(t,n,i){this.getInteracting()&&(this.setHint(Qt.INTERACTING,-1),this.resolveConstraints(t,n,i))}getConstrainedCenter(t,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)}getConstrainedZoom(t,n){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(t,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)}}function ta(e,t){setTimeout(function(){e(t)},0)}function YT(e){if(e.extent!==void 0){const n=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return tg(e.extent,e.constrainOnlyCenter,n)}const t=kh(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,tg(n,!1,!1)}return gT}function VT(e){let t,n,i,o=e.minZoom!==void 0?e.minZoom:Ec,a=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,c=e.multiWorld!==void 0?e.multiWorld:!1,u=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,h=e.showFullExtent!==void 0?e.showFullExtent:!1,f=kh(e.projection,"EPSG:3857"),d=f.getExtent();let g=e.constrainOnlyCenter,m=e.extent;if(!c&&!m&&f.isGlobal()&&(g=!1,m=d),e.resolutions!==void 0){const p=e.resolutions;n=p[o],i=p[a]!==void 0?p[a]:p[p.length-1],e.constrainResolution?t=mT(p,u,!g&&m,h):t=eg(n,i,u,!g&&m,h)}else{const y=(d?Math.max(kt(d),ke(d)):360*js.degrees/f.getMetersPerUnit())/Fh/Math.pow(2,Ec),x=y/Math.pow(2,28-Ec);n=e.maxResolution,n!==void 0?o=0:n=y/Math.pow(l,o),i=e.minResolution,i===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?i=n/Math.pow(l,a):i=y/Math.pow(l,a):i=x),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),e.constrainResolution?t=_T(l,n,i,u,!g&&m,h):t=eg(n,i,u,!g&&m,h)}return{constraint:t,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function XT(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const n=e.constrainRotation;return n===void 0||n===!0?yT():n===!1?ng:typeof n=="number"?pT(n):ng}return $h}function HT(e){return!(e.sourceCenter&&e.targetCenter&&!$a(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function Tc(e,t,n,i,s){const r=Math.cos(-s);let o=Math.sin(-s),a=e[0]*r-e[1]*o,l=e[1]*r+e[0]*o;a+=(t[0]/2-n[0])*i,l+=(n[1]-t[1]/2)*i,o=-o;const c=a*r-l*o,u=l*r+a*o;return[c,u]}const pn=zT;class BT extends Cp{constructor(t){const n=Object.assign({},t);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Pt.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Pt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&($t(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=xt(t,at.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let n;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof pn?n={viewState:t.getState(),extent:t.calculateExtent()}:n=t,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let s;n.layerStatesArray?s=n.layerStatesArray.find(o=>o.layer===this):s=this.getLayerState();const r=this.getExtent();return jh(s,n.viewState)&&(!r||ve(r,n.extent))}getAttributions(t){if(!this.isVisible(t))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const s=t instanceof pn?t.getViewStateAndExtent():t;let r=n(s);return Array.isArray(r)||(r=[r]),r}render(t,n){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,n)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(Pt.MAP,t)}getMapInternal(){return this.get(Pt.MAP)}setMap(t){this.mapPrecomposeKey_&&($t(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&($t(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=xt(t,wn.PRECOMPOSE,function(n){const s=n.frameState.layerStatesArray,r=this.getLayerState(!1);Et(!s.some(function(o){return o.layer===r.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),s.push(r)},this),this.mapRenderKey_=xt(this,at.CHANGE,t.render,t),this.changed())}setSource(t){this.set(Pt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function jh(e,t){if(!e.visible)return!1;const n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;const i=t.zoom;return i>e.minZoom&&i<=e.maxZoom}const Xl=BT;class ZT extends Ih{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,n){ot()}calculateMatrices2D(t){const n=t.viewState,i=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;un(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),Gl(s,i)}forEachFeatureAtCoordinate(t,n,i,s,r,o,a,l){let c;const u=n.viewState;function h(w,S,C,I){return r.call(o,S,w?C:null,I)}const f=u.projection,d=Ip(t.slice(),f),g=[[0,0]];if(f.canWrapX()&&s){const w=f.getExtent(),S=kt(w);g.push([-S,0],[S,0])}const m=n.layerStatesArray,p=m.length,y=[],x=[];for(let w=0;w<g.length;w++)for(let S=p-1;S>=0;--S){const C=m[S],I=C.layer;if(I.hasRenderer()&&jh(C,u)&&a.call(l,I)){const L=I.getRenderer(),B=I.getSource();if(L&&B){const F=B.getWrapX()?d:t,N=h.bind(null,C.managed);x[0]=F[0]+g[w][0],x[1]=F[1]+g[w][1],c=L.forEachFeatureAtCoordinate(x,n,i,N,y)}if(c)return c}}if(y.length===0)return;const E=1/y.length;return y.forEach((w,S)=>w.distanceSq+=S*E),y.sort((w,S)=>w.distanceSq-S.distanceSq),y.some(w=>c=w.callback(w.feature,w.layer,w.geometry)),c}hasFeatureAtCoordinate(t,n,i,s,r,o){return this.forEachFeatureAtCoordinate(t,n,i,s,so,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(t){ot()}flushDeclutterItems(t){}scheduleExpireIconCache(t){Ga.canExpireCache()&&t.postRenderFunctions.push(jT)}}function jT(e,t){Ga.expire()}const KT=ZT;class qT extends Kn{constructor(t,n,i,s){super(t),this.inversePixelTransform=n,this.frameState=i,this.context=s}}const Vp=qT,ea="ol-hidden",JT="ol-selectable",os="ol-unselectable",lg="ol-unsupported",So="ol-control",cg="ol-collapsed",QT=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),ug=["style","variant","weight","size","lineHeight","family"],Xp=function(e){const t=e.match(QT);if(!t)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=ug.length;i<s;++i){const r=t[i+1];r!==void 0&&(n[ug[i]]=r)}return n.families=n.family.split(/,\s?/),n};function Ee(e,t,n,i){let s;return n&&n.length?s=n.shift():Mh?s=new OffscreenCanvas(e||300,t||300):s=document.createElement("canvas"),e&&(s.width=e),t&&(s.height=t),s.getContext("2d",i)}function Hl(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function tC(e){let t=e.offsetWidth;const n=getComputedStyle(e);return t+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),t}function eC(e){let t=e.offsetHeight;const n=getComputedStyle(e);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),t}function Xa(e,t){const n=t.parentNode;n&&n.replaceChild(e,t)}function Ha(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function Hp(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function nC(e,t){const n=e.childNodes;for(let i=0;;++i){const s=n[i],r=t[i];if(!s&&!r)break;if(s!==r){if(!s){e.appendChild(r);continue}if(!r){e.removeChild(s),--i;continue}e.insertBefore(r,s)}}}const Bp="10px sans-serif",Re="#000",qs="round",Wn=[],zn=0,Js="round",lo=10,co="#000",uo="center",Ba="middle",Gi=[0,0,0,0],ho=1,Ln=new fn;let Cs=null,Su;const Ru={},iC=function(){const t="32px ",n=["monospace","serif"],i=n.length,s="wmytzilWMYTZIL@#/&?$%10";let r,o;function a(c,u,h){let f=!0;for(let d=0;d<i;++d){const g=n[d];if(o=Za(c+" "+u+" "+t+g,s),h!=g){const m=Za(c+" "+u+" "+t+h+","+g,s);f=f&&m!=o}}return!!f}function l(){let c=!0;const u=Ln.getKeys();for(let h=0,f=u.length;h<f;++h){const d=u[h];Ln.get(d)<100&&(a.apply(this,d.split(`
`))?(vo(Ru),Cs=null,Su=void 0,Ln.set(d,100)):(Ln.set(d,Ln.get(d)+1,!0),c=!1))}c&&(clearInterval(r),r=void 0)}return function(c){const u=Xp(c);if(!u)return;const h=u.families;for(let f=0,d=h.length;f<d;++f){const g=h[f],m=u.style+`
`+u.weight+`
`+g;Ln.get(m)===void 0&&(Ln.set(m,100,!0),a(u.style,u.weight,g)||(Ln.set(m,0,!0),r===void 0&&(r=setInterval(l,32))))}}}(),sC=function(){let e;return function(t){let n=Ru[t];if(n==null){if(Mh){const i=Xp(t),s=Zp(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),n=e.offsetHeight,document.body.removeChild(e);Ru[t]=n}return n}}();function Zp(e,t){return Cs||(Cs=Ee(1,1)),e!=Su&&(Cs.font=e,Su=Cs.font),Cs.measureText(t)}function Za(e,t){return Zp(e,t).width}function hg(e,t,n){if(t in n)return n[t];const i=t.split(`
`).reduce((s,r)=>Math.max(s,Za(e,r)),0);return n[t]=i,i}function rC(e,t){const n=[],i=[],s=[];let r=0,o=0,a=0,l=0;for(let c=0,u=t.length;c<=u;c+=2){const h=t[c];if(h===`
`||c===u){r=Math.max(r,o),s.push(o),o=0,a+=l;continue}const f=t[c+1]||e.font,d=Za(f,h);n.push(d),o+=d;const g=sC(f);i.push(g),l=Math.max(l,g)}return{width:r,height:a,widths:n,heights:i,lineWidths:s}}function oC(e,t,n,i,s,r,o,a,l,c,u){e.save(),n!==1&&(e.globalAlpha*=n),t&&e.transform.apply(e,t),i.contextInstructions?(e.translate(l,c),e.scale(u[0],u[1]),aC(i,e)):u[0]<0||u[1]<0?(e.translate(l,c),e.scale(u[0],u[1]),e.drawImage(i,s,r,o,a,0,0,o,a)):e.drawImage(i,s,r,o,a,l,c,o*u[0],a*u[1]),e.restore()}function aC(e,t){const n=e.contextInstructions;for(let i=0,s=n.length;i<s;i+=2)Array.isArray(n[i+1])?t[n[i]].apply(t,n[i+1]):t[n[i]]=n[i+1]}class lC extends KT{constructor(t){super(t),this.fontChangeListenerKey_=xt(Ln,Hs.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=os+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,n){const i=this.getMap();if(i.hasListener(t)){const s=new Vp(t,void 0,n);i.dispatchEvent(s)}}disposeInternal(){$t(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(wn.PRECOMPOSE,t);const n=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;const s=this.declutterLayers_;s.length=0;let r=null;for(let o=0,a=n.length;o<a;++o){const l=n[o];t.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!jh(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const h=c.render(t,r);h&&(h!==r&&(this.children_.push(h),r=h),"getDeclutter"in c&&s.push(c))}this.flushDeclutterItems(t),nC(this.element_,this.children_),this.dispatchRenderEvent(wn.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const n=this.declutterLayers_;for(let i=n.length-1;i>=0;--i)n[i].renderDeclutter(t);n.length=0}}const cC=lC;class li extends Kn{constructor(t,n){super(t),this.layer=n}}const Cc={LAYERS:"layers"};class Kh extends Cp{constructor(t){t=t||{};const n=Object.assign({},t);delete n.layers;let i=t.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Cc.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new xn(i.slice(),{unique:!0}):Et(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new xn(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach($t),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(xt(t,Se.ADD,this.handleLayersAdd_,this),xt(t,Se.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach($t);vo(this.listenerKeys_);const n=t.getArray();for(let i=0,s=n.length;i<s;i++){const r=n[i];this.registerLayerListeners_(r),this.dispatchEvent(new li("addlayer",r))}this.changed()}registerLayerListeners_(t){const n=[xt(t,Hs.PROPERTYCHANGE,this.handleLayerChange_,this),xt(t,at.CHANGE,this.handleLayerChange_,this)];t instanceof Kh&&n.push(xt(t,"addlayer",this.handleLayerGroupAdd_,this),xt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ot(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new li("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new li("removelayer",t.layer))}handleLayersAdd_(t){const n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new li("addlayer",n)),this.changed()}handleLayersRemove_(t){const n=t.element,i=Ot(n);this.listenerKeys_[i].forEach($t),delete this.listenerKeys_[i],this.dispatchEvent(new li("removelayer",n)),this.changed()}getLayers(){return this.get(Cc.LAYERS)}setLayers(t){const n=this.getLayers();if(n){const i=n.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new li("removelayer",i[s]))}this.set(Cc.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(n){n.getLayersArray(t)}),t}getLayerStatesArray(t){const n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const s=this.getLayerState();let r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=ks(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return n}getSourceState(){return"ready"}}const Bl=Kh;class uC extends Kn{constructor(t,n,i){super(t),this.map=n,this.frameState=i!==void 0?i:null}}const Ss=uC;class hC extends Ss{constructor(t,n,i,s,r,o){super(t,n,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ri=hC,Zt={SINGLECLICK:"singleclick",CLICK:at.CLICK,DBLCLICK:at.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Iu={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class fC extends wo{constructor(t,n){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=xt(i,Iu.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=xt(i,Iu.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(at.TOUCHMOVE,this.boundHandleTouchMove_,mp?{passive:!1}:!1)}emulateClick_(t){let n=new ri(Zt.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new ri(Zt.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new ri(Zt.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const n=t,i=n.pointerId;if(n.type==Zt.POINTERUP||n.type==Zt.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==n.target){delete this.trackedTouches_[s];break}}else(n.type==Zt.POINTERDOWN||n.type==Zt.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const n=new ri(Zt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach($t),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const n=new ri(Zt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(xt(i,Zt.POINTERMOVE,this.handlePointerMove_,this),xt(i,Zt.POINTERUP,this.handlePointerUp_,this),xt(this.element_,Zt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(xt(this.element_.getRootNode(),Zt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const n=new ri(Zt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new ri(Zt.POINTERMOVE,this.map_,t,n))}handleTouchMove_(t){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&($t(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(at.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&($t(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach($t),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const dC=fC,Pn={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},se={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ja=1/0;class gC{constructor(t,n){this.priorityFunction_=t,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,vo(this.queuedElements_)}dequeue(){const t=this.elements_,n=this.priorities_,i=t[0];t.length==1?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(t){Et(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(t);return n!=ja?(this.elements_.push(t),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const n=this.elements_,i=this.priorities_,s=n.length,r=n[t],o=i[t],a=t;for(;t<s>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),u=c<s&&i[c]<i[l]?c:l;n[t]=n[u],i[t]=i[u],t=u}n[t]=r,i[t]=o,this.siftDown_(a,t)}siftDown_(t,n){const i=this.elements_,s=this.priorities_,r=i[n],o=s[n];for(;n>t;){const a=this.getParentIndex_(n);if(s[a]>o)i[n]=i[a],s[n]=s[a],n=a;else break}i[n]=r,s[n]=o}reprioritize(){const t=this.priorityFunction_,n=this.elements_,i=this.priorities_;let s=0;const r=n.length;let o,a,l;for(a=0;a<r;++a)o=n[a],l=t(o),l==ja?delete this.queuedElements_[this.keyFunction_(o)]:(i[s]=l,n[s++]=o);n.length=s,i.length=s,this.heapify_()}}const mC=gC,it={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class _C extends mC{constructor(t,n){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const n=super.enqueue(t);return n&&t[0].addEventListener(at.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const n=t.target,i=n.getState();if(i===it.LOADED||i===it.ERROR||i===it.EMPTY){i!==it.ERROR&&n.removeEventListener(at.CHANGE,this.boundHandleTileChange_);const s=n.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,n){let i=0,s,r,o;for(;this.tilesLoading_<t&&i<n&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===it.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}const pC=_C;function yC(e,t,n,i,s){if(!e||!(n in e.wantedTiles)||!e.wantedTiles[n][t.getKey()])return ja;const r=e.viewState.center,o=i[0]-r[0],a=i[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class xC extends fn{constructor(t){super();const n=t.element;n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Ha(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Ha(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)$t(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Bs&&this.listenerKeys.push(xt(t,Pn.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const dr=xC;class vC extends dr{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:n+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"›",o=t.collapseClassName!==void 0?t.collapseClassName:n+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(at.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+os+" "+So+(this.collapsed_&&this.collapsible_?" "+cg:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(t)))),i=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Ei(n,this.renderedAttributions_)){Hp(this.ulElement_);for(let s=0,r=n.length;s<r;++s){const o=document.createElement("li");o.innerHTML=n[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(cg),this.collapsed_?Xa(this.collapseLabel_,this.label_):Xa(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const wC=vC;class EC extends dr{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const n=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"⇧",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(at.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+os+" "+So,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ea)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:fr}):n.setRotation(0))}render(t){const n=t.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(ea);!r&&i===0?this.element.classList.add(ea):r&&i!==0&&this.element.classList.remove(ea)}this.label_.style.transform=s}this.rotation_=i}}const TC=EC;class CC extends dr{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const n=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:n+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:n+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(at.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(at.CLICK,this.handleClick_.bind(this,-i),!1);const f=n+" "+os+" "+So,d=this.element;d.className=f,d.appendChild(u),d.appendChild(h),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,n){n.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(s!==void 0){const r=i.getConstrainedZoom(s+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:fr})):i.setZoom(r)}}}const SC=CC;function jp(e){e=e||{};const t=new xn;return(e.zoom!==void 0?e.zoom:!0)&&t.push(new SC(e.zoomOptions)),(e.rotate!==void 0?e.rotate:!0)&&t.push(new TC(e.rotateOptions)),(e.attribution!==void 0?e.attribution:!0)&&t.push(new wC(e.attributionOptions)),t}const fg={ACTIVE:"active"};class RC extends fn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(fg.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(fg.ACTIVE,t)}setMap(t){this.map_=t}}function IC(e,t,n){const i=e.getCenterInternal();if(i){const s=[i[0]+t[0],i[1]+t[1]];e.animateInternal({duration:n!==void 0?n:250,easing:vT,center:e.getConstrainedCenter(s)})}}function qh(e,t,n,i){const s=e.getZoom();if(s===void 0)return;const r=e.getConstrainedZoom(s+t),o=e.getResolutionForZoom(r);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:fr})}const Ro=RC;class bC extends Ro{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let n=!1;if(t.type==Zt.DBLCLICK){const i=t.originalEvent,s=t.map,r=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=s.getView();qh(a,o,r,this.duration_),i.preventDefault(),n=!0}return!n}}const MC=bC;class OC extends Ro{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Zt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Zt.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Zt.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,n=this.stopDown(i)}else t.type==Zt.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Jh(e){const t=e.length;let n=0,i=0;for(let s=0;s<t;s++)n+=e[s].clientX,i+=e[s].clientY;return{clientX:n/t,clientY:i/t}}const Io=OC;function bu(e){const t=arguments;return function(n){let i=!0;for(let s=0,r=t.length;s<r&&(i=i&&t[s](n),!!i);++s);return i}}const AC=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},LC=function(e){const t=e.map.getTargetElement(),n=e.map.getOwnerDocument().activeElement;return t.contains(n)},Kp=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?LC(e):!0},FC=so,qp=function(e){const t=e.originalEvent;return t.button==0&&!(SE&&fp&&t.ctrlKey)},Jp=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},PC=function(e){const t=e.originalEvent;return fp?t.metaKey:t.ctrlKey},DC=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Qp=function(e){const t=e.originalEvent,n=t.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!t.target.isContentEditable},Sc=function(e){const t=e.originalEvent;return Et(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},kC=function(e){const t=e.originalEvent;return Et(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class NC extends Io{constructor(t){super({stopDown:kl}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=t.condition?t.condition:bu(Jp,kC);this.condition_=t.onFocusOnly?bu(Kp,n):n,this.noKinetic_=!1}handleDragEvent(t){const n=t.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,s=n.getEventPixel(Jh(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=t.map.getView();sT(r,a.getResolution()),Ph(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:fr})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const GC=NC;class UC extends Io{constructor(t){t=t||{},super({stopDown:kl}),this.condition_=t.condition?t.condition:AC,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Sc(t))return;const n=t.map,i=n.getView();if(i.getConstraints().rotation===$h)return;const s=n.getSize(),r=t.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return Sc(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Sc(t)&&qp(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const $C=UC;class WC extends Ih{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,n=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(t[0],n[0])+i,s.top=Math.min(t[1],n[1])+i,s.width=Math.abs(n[0]-t[0])+i,s.height=Math.abs(n[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,n=this.endPixel_,s=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Va([s])}getGeometry(){return this.geometry_}}const zC=WC,na={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Rc extends Kn{constructor(t,n,i){super(t),this.coordinate=n,this.mapBrowserEvent=i}}class YC extends Io{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new zC(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:qp,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,n,i){const s=i[0]-n[0],r=i[1]-n[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Rc(na.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new Rc(n?na.BOXEND:na.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Rc(na.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const VC=YC;class XC extends VC{constructor(t){t=t||{};const n=t.condition?t.condition:DC;super({condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(s),o=i.getResolutionForExtentInternal(r),a=i.getResolution()/o;s=s.clone(),s.scale(a*a)}i.fitInternal(s,{duration:this.duration_,easing:fr})}}const HC=XC,bi={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class BC extends Ro{constructor(t){super(),t=t||{},this.defaultCondition_=function(n){return Jp(n)&&Qp(n)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let n=!1;if(t.type==at.KEYDOWN){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==bi.DOWN||s==bi.LEFT||s==bi.RIGHT||s==bi.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;s==bi.DOWN?c=-a:s==bi.LEFT?l=-a:s==bi.RIGHT?l=a:c=a;const u=[l,c];Ph(u,o.getRotation()),IC(o,u,this.duration_),i.preventDefault(),n=!0}}return!n}}const ZC=BC;class jC extends Ro{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(n){return!PC(n)&&Qp(n)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let n=!1;if(t.type==at.KEYDOWN||t.type==at.KEYPRESS){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==="+"||s==="-")){const r=t.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();qh(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}const KC=jC;class qC{constructor(t,n,i){this.decay_=t,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,n){this.points_.push(t,n,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<t)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const s=this.points_[n+2]-this.points_[i+2];if(s<1e3/60)return!1;const r=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const JC=qC;class QC extends Ro{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const n=t.condition?t.condition:FC;this.condition_=t.onFocusOnly?bu(Kp,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==at.WHEEL)return!0;const i=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let r;if(t.type==at.WHEEL&&(r=s.deltaY,TE&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=dp),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const n=t.getView();n.getAnimating()&&n.cancelAnimations();let i=-te(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),qh(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const tS=QC;class eS extends Io{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=kl),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let n=0;const i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=r;const o=t.map,a=o.getView();a.getConstraints().rotation!==$h&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Jh(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const nS=eS;class iS extends Io{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=kl),super(n),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let n=1;const i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,o=i.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Jh(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const sS=iS;function rS(e){e=e||{};const t=new xn,n=new JC(-.005,.05,100);return(e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0)&&t.push(new $C),(e.doubleClickZoom!==void 0?e.doubleClickZoom:!0)&&t.push(new MC({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan!==void 0?e.dragPan:!0)&&t.push(new GC({onFocusOnly:e.onFocusOnly,kinetic:n})),(e.pinchRotate!==void 0?e.pinchRotate:!0)&&t.push(new nS),(e.pinchZoom!==void 0?e.pinchZoom:!0)&&t.push(new sS({duration:e.zoomDuration})),(e.keyboard!==void 0?e.keyboard:!0)&&(t.push(new ZC),t.push(new KC({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0)&&t.push(new tS({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom!==void 0?e.shiftDragZoom:!0)&&t.push(new HC({duration:e.zoomDuration})),t}function dg(e){return e[0]>0&&e[1]>0}function oS(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]*t+.5|0,n[1]=e[1]*t+.5|0,n}function Pe(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}function t0(e){if(e instanceof Xl){e.setMapInternal(null);return}e instanceof Bl&&e.getLayers().forEach(t0)}function e0(e,t){if(e instanceof Xl){e.setMapInternal(t);return}if(e instanceof Bl){const n=e.getLayers().getArray();for(let i=0,s=n.length;i<s;++i)e0(n[i],t)}}let aS=class extends fn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const n=lS(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:dp,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ln(),this.pixelToCoordinateTransform_=ln(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||jp(),this.interactions=n.interactions||rS({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new pC(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(se.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(se.VIEW,this.handleViewChanged_),this.addChangeListener(se.SIZE,this.handleSizeChanged_),this.addChangeListener(se.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;t.view&&!(t.view instanceof pn)&&t.view.then(function(s){i.setView(new pn(s))}),this.controls.addEventListener(Se.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(Se.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(Se.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(Se.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(Se.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(Se.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){e0(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,n,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const r=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:so,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,n,null,o,null)}getFeaturesAtPixel(t,n){const i=[];return this.forEachFeatureAtPixel(t,function(s){i.push(s)},n),i}getAllLayers(){const t=[];function n(i){i.forEach(function(s){s instanceof Bl?n(s.getLayers()):t.push(s)})}return n(this.getLayers()),t}hasFeatureAtPixel(t,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const s=n.layerFilter!==void 0?n.layerFilter:so,r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=i.width/s[0],o=i.height/s[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-i.left)/r,(a.clientY-i.top)/o]}getTarget(){return this.get(se.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return wu(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const n=this.frameState_;return n?jt(n.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(se.LAYERGROUP)}setLayers(t){const n=this.getLayerGroup();if(t instanceof xn){n.setLayers(t);return}const i=n.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const s=t[n];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const n=An(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(t){const n=this.frameState_;return n?jt(n.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(se.SIZE)}getView(){return this.get(se.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,n,i,s){return yC(this.frameState_,t,n,i,s)}handleBrowserEvent(t,n){n=n||t.type;const i=new ri(n,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const n=t.originalEvent,i=n.type;if(i===Iu.POINTERDOWN||i===at.WHEEL||i===at.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=n.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){const o=t.viewHints;if(o[Qt.ANIMATING]||o[Qt.INTERACTING]){const a=Date.now()-t.time>8;s=a?0:8,r=a?0:2}}n.getTilesLoading()<s&&(n.reprioritize(),n.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(wn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(wn.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Ss(Pn.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Ss(Pn.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)$t(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(at.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(at.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ha(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),n=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new cC(this)),this.mapBrowserEventHandler_=new dC(this,this.moveTolerance_);for(const r in Zt)this.mapBrowserEventHandler_.addEventListener(Zt[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(at.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(at.WHEEL,this.boundHandleBrowserEvent_,mp?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[xt(i,at.KEYDOWN,this.handleBrowserEvent,this),xt(i,at.KEYPRESS,this.handleBrowserEvent,this)];const s=n.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&($t(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&($t(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=xt(t,Hs.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=xt(t,at.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach($t),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new li("addlayer",t)),this.layerGroupPropertyListenerKeys_=[xt(t,Hs.PROPERTYCHANGE,this.render,this),xt(t,at.CHANGE,this.render,this),xt(t,"addlayer",this.handleLayerAdd_,this),xt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const s=t[n].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){t0(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const n=this.getSize(),i=this.getView(),s=this.frameState_;let r=null;if(n!==void 0&&dg(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:pu(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Ot(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=pu(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!hr(this.previousExtent_)&&!ro(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Ss(Pn.MOVESTART,this,s)),this.previousExtent_=To(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Qt.ANIMATING]&&!r.viewHints[Qt.INTERACTING]&&!ro(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Ss(Pn.MOVEEND,this,r)),_p(r.extent,this.previousExtent_))),this.dispatchEvent(new Ss(Pn.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(Pn.LOADSTART)||this.hasListener(Pn.LOADEND)||this.hasListener(wn.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new li("removelayer",n)),this.set(se.LAYERGROUP,t)}setSize(t){this.set(se.SIZE,t)}setTarget(t){this.set(se.TARGET,t)}setView(t){if(!t||t instanceof pn){this.set(se.VIEW,t);return}this.set(se.VIEW,new pn);const n=this;t.then(function(i){n.setView(new pn(i))})}updateSize(){const t=this.getTargetElement();let n;if(t){const s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(n=[r,o],!dg(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Mp("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!Ei(n,i))&&(this.setSize(n),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let n;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}}};function lS(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const n={},i=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new Bl({layers:e.layers});n[se.LAYERGROUP]=i,n[se.TARGET]=e.target,n[se.VIEW]=e.view instanceof pn?e.view:new pn;let s;e.controls!==void 0&&(Array.isArray(e.controls)?s=new xn(e.controls.slice()):(Et(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=e.controls));let r;e.interactions!==void 0&&(Array.isArray(e.interactions)?r=new xn(e.interactions.slice()):(Et(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),r=e.interactions));let o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new xn(e.overlays.slice()):(Et(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=e.overlays):o=new xn,{controls:s,interactions:r,keyboardEventTarget:t,overlays:o,values:n}}const cS=aS;class Qh extends fn{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const n=t;this.setGeometry(n)}else{const n=t;this.setProperties(n)}}clone(){const t=new Qh(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&t.setGeometry(n.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&($t(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=xt(t,at.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?uS(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function uS(e){if(typeof e=="function")return e;let t;return Array.isArray(e)?t=e:(Et(typeof e.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}const Mu=Qh;class hS{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,n){if(n){let i=n.dataProjection?ee(n.dataProjection):this.readProjection(t);n.extent&&i&&i.getUnits()==="tile-pixels"&&(i=ee(i),i.setWorldExtent(n.extent)),n={dataProjection:i,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return ot()}readFeature(t,n){return ot()}readFeatures(t,n){return ot()}readGeometry(t,n){return ot()}readProjection(t){return ot()}writeFeature(t,n){return ot()}writeFeatures(t,n){return ot()}writeGeometry(t,n){return ot()}}function n0(e,t,n){const i=n?ee(n.featureProjection):null,s=n?ee(n.dataProjection):null;let r;if(i&&s&&!Di(i,s)?r=(t?e.clone():e).transform(t?i:s,t?s:i):r=e,t&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};r===e&&(r=e.clone()),r.applyTransform(a)}return r}class fS extends hS{constructor(){super()}getType(){return"json"}readFeature(t,n){return this.readFeatureFromObject(ia(t),this.getReadOptions(t,n))}readFeatures(t,n){return this.readFeaturesFromObject(ia(t),this.getReadOptions(t,n))}readFeatureFromObject(t,n){return ot()}readFeaturesFromObject(t,n){return ot()}readGeometry(t,n){return this.readGeometryFromObject(ia(t),this.getReadOptions(t,n))}readGeometryFromObject(t,n){return ot()}readProjection(t){return this.readProjectionFromObject(ia(t))}readProjectionFromObject(t){return ot()}writeFeature(t,n){return JSON.stringify(this.writeFeatureObject(t,n))}writeFeatureObject(t,n){return ot()}writeFeatures(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))}writeFeaturesObject(t,n){return ot()}writeGeometry(t,n){return JSON.stringify(this.writeGeometryObject(t,n))}writeGeometryObject(t,n){return ot()}}function ia(e){if(typeof e=="string"){const t=JSON.parse(e);return t||null}return e!==null?e:null}const dS=fS;function i0(e,t,n,i,s,r,o){let a,l;const c=(n-t)/i;if(c===1)a=t;else if(c===2)a=t,l=s;else if(c!==0){let u=e[t],h=e[t+1],f=0;const d=[0];for(let p=t+i;p<n;p+=i){const y=e[p],x=e[p+1];f+=Math.sqrt((y-u)*(y-u)+(x-h)*(x-h)),d.push(f),u=y,h=x}const g=s*f,m=dE(d,g);m<0?(l=(g-d[-m-2])/(d[-m-1]-d[-m-2]),a=t+(-m-2)*i):a=t+m*i}o=o>1?o:2,r=r||new Array(o);for(let u=0;u<o;++u)r[u]=a===void 0?NaN:l===void 0?e[a+u]:Fe(e[a+u],e[a+i+u],l);return r}function Ou(e,t,n,i,s,r){if(n==t)return null;let o;if(s<e[t+i-1])return r?(o=e.slice(t,t+i),o[i-1]=s,o):null;if(e[n-1]<s)return r?(o=e.slice(n-i,n),o[i-1]=s,o):null;if(s==e[t+i-1])return e.slice(t,t+i);let a=t/i,l=n/i;for(;a<l;){const f=a+l>>1;s<e[(f+1)*i-1]?l=f:a=f+1}const c=e[a*i-1];if(s==c)return e.slice((a-1)*i,(a-1)*i+i);const u=e[(a+1)*i-1],h=(s-c)/(u-c);o=[];for(let f=0;f<i-1;++f)o.push(Fe(e[(a-1)*i+f],e[a*i+f],h));return o.push(s),o}function gS(e,t,n,i,s,r,o){if(o)return Ou(e,t,n[n.length-1],i,s,r);let a;if(s<e[i-1])return r?(a=e.slice(0,i),a[i-1]=s,a):null;if(e[e.length-1]<s)return r?(a=e.slice(e.length-i),a[i-1]=s,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(t!=u){if(s<e[t+i-1])return null;if(s<=e[u-1])return Ou(e,t,u,i,s,!1);t=u}}return null}function s0(e,t,n,i){let s=e[t],r=e[t+1],o=0;for(let a=t+i;a<n;a+=i){const l=e[a],c=e[a+1];o+=Math.sqrt((l-s)*(l-s)+(c-r)*(c-r)),s=l,r=c}return o}class Ka extends rs{constructor(t,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendCoordinate(t){this.flatCoordinates?$n(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new Ka(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,s){return s<is(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Wh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Yh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,s))}forEachSegment(t){return Up(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,Ou(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n))}getCoordinates(){return di(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,n){return i0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)}getLength(){return s0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const n=[];return n.length=Hh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new Ka(n,"XY")}getType(){return"LineString"}intersectsExtent(t){return Vl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yl(this.flatCoordinates,0,t,this.stride),this.changed()}}const qa=Ka;class Ja extends rs{constructor(t,n,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,n);else if(n!==void 0&&i)this.setFlatCoordinates(n,t),this.ends_=i;else{let s=this.getLayout();const r=t,o=[],a=[];for(let l=0,c=r.length;l<c;++l){const u=r[l];l===0&&(s=u.getLayout()),$n(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?$n(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ja(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,s){return s<is(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(zh(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vh(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,s))}getCoordinateAtM(t,n,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,i=i!==void 0?i:!1,gS(this.flatCoordinates,0,this.ends_,this.stride,t,n,i))}getCoordinates(){return oo(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new qa(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,n=this.ends_,i=this.layout,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new qa(t.slice(r,l),i);s.push(c),r=l}return s}getFlatMidpoints(){const t=[],n=this.flatCoordinates;let i=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],c=i0(n,i,l,r,.5);$n(t,c),i=l}return t}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=AT(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new Ja(n,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return GT(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Xh(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const mS=Ja;class tf extends rs{constructor(t,n){super(),n&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendPoint(t){this.flatCoordinates?$n(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new tf(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,s){if(s<is(this.getExtent(),t,n))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){const c=Hi(t,n,r[a],r[a+1]);if(c<s){s=c;for(let u=0;u<o;++u)i[u]=r[a+u];i.length=o}}return s}getCoordinates(){return di(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new Ks(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,n=this.layout,i=this.stride,s=[];for(let r=0,o=t.length;r<o;r+=i){const a=new Ks(t.slice(r,r+i),n);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const n=this.flatCoordinates,i=this.stride;for(let s=0,r=n.length;s<r;s+=i){const o=n[s],a=n[s+1];if(Lh(t,o,a))return!0}return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yl(this.flatCoordinates,0,t,this.stride),this.changed()}}const r0=tf;function _S(e,t,n,i){const s=[];let r=He();for(let o=0,a=n.length;o<a;++o){const l=n[o];r=pp(e,t,l[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=l[l.length-1]}return s}class Qa extends rs{constructor(t,n,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let s=this.getLayout();const r=t,o=[],a=[];for(let l=0,c=r.length;l<c;++l){const u=r[l];l===0&&(s=u.getLayout());const h=o.length,f=u.getEnds();for(let d=0,g=f.length;d<g;++d)f[d]+=h;$n(o,u.getFlatCoordinates()),a.push(f)}n=s,t=o,i=a}n!==void 0&&i?(this.setFlatCoordinates(n,t),this.endss_=i):this.setCoordinates(t,n)}appendPolygon(t){let n;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;$n(this.flatCoordinates,t.getFlatCoordinates()),n=t.getEnds().slice();for(let s=0,r=n.length;s<r;++s)n[s]+=i}this.endss_.push(n),this.changed()}clone(){const t=this.endss_.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=this.endss_[s].slice();const i=new Qa(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}closestPointXY(t,n,i,s){return s<is(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(IT(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,i,s))}containsXY(t,n){return kT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)}getArea(){return PT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),ag(n,0,this.endss_,this.stride,t)):n=this.flatCoordinates,Eu(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=_S(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=NT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new r0(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;WT(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ag(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=FT(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new Qa(n,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let n;if(t===0)n=0;else{const r=this.endss_[t-1];n=r[r.length-1]}const i=this.endss_[t].slice(),s=i[i.length-1];if(n!==0)for(let r=0,o=i.length;r<o;++r)i[r]-=n;return new Va(this.flatCoordinates.slice(n,s),this.layout,i)}getPolygons(){const t=this.layout,n=this.flatCoordinates,i=this.endss_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(r!==0)for(let h=0,f=l.length;h<f;++h)l[h]-=r;const u=new Va(n.slice(r,c),t,l);s.push(u),r=c}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return UT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=OT(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const s=i[i.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const pS=Qa;class tl extends Pp{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach($t),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,n=this.geometries_.length;t<n;++t)this.changeEventsKeys_.push(xt(this.geometries_[t],at.CHANGE,this.changed,this))}clone(){const t=new tl(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,n,i,s){if(s<is(this.getExtent(),t,n))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(t,n,i,s);return s}containsXY(t,n){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)if(i[s].containsXY(t,n))return!0;return!1}computeExtent(t){To(t);const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)yp(t,n[i].getExtent());return t}getGeometries(){return gg(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],i=this.geometries_;let s=!1;for(let r=0,o=i.length;r<o;++r){const a=i[r],l=a.getSimplifiedGeometry(t);n.push(l),l!==a&&(s=!0)}if(s){const r=new tl(null);return r.setGeometriesArray(n),r}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)if(n[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,n){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].rotate(t,n);this.changed()}scale(t,n,i){i||(i=Qi(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(t,n,i);this.changed()}setGeometries(t){this.setGeometriesArray(gg(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)n[i].applyTransform(t);this.changed()}translate(t,n){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].translate(t,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function gg(e){const t=[];for(let n=0,i=e.length;n<i;++n)t.push(e[n].clone());return t}const yS=tl;class xS extends dS{constructor(t){t=t||{},super(),this.dataProjection=ee(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=ee(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,n){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const s=Au(i.geometry,n),r=new Mu;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(s),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r}readFeaturesFromObject(t,n){const i=t;let s=null;if(i.type==="FeatureCollection"){const r=t;s=[];const o=r.features;for(let a=0,l=o.length;a<l;++a)s.push(this.readFeatureFromObject(o[a],n))}else s=[this.readFeatureFromObject(t,n)];return s}readGeometryFromObject(t,n){return Au(t,n)}readProjectionFromObject(t){const n=t.crs;let i;if(n)if(n.type=="name")i=ee(n.properties.name);else if(n.type==="EPSG")i=ee("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,n){n=this.adaptOptions(n);const i={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(i.id=s),!t.hasProperties())return i;const r=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=Lu(o,n),delete r[t.getGeometryName()]),Zs(r)||(i.properties=r),i}writeFeaturesObject(t,n){n=this.adaptOptions(n);const i=[];for(let s=0,r=t.length;s<r;++s)i.push(this.writeFeatureObject(t[s],n));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,n){return Lu(t,this.adaptOptions(n))}}function Au(e,t){if(!e)return null;let n;switch(e.type){case"Point":{n=wS(e);break}case"LineString":{n=ES(e);break}case"Polygon":{n=RS(e);break}case"MultiPoint":{n=CS(e);break}case"MultiLineString":{n=TS(e);break}case"MultiPolygon":{n=SS(e);break}case"GeometryCollection":{n=vS(e);break}default:throw new Error("Unsupported GeoJSON type: "+e.type)}return n0(n,!1,t)}function vS(e,t){const n=e.geometries.map(function(i){return Au(i,t)});return new yS(n)}function wS(e){return new Ks(e.coordinates)}function ES(e){return new qa(e.coordinates)}function TS(e){return new mS(e.coordinates)}function CS(e){return new r0(e.coordinates)}function SS(e){return new pS(e.coordinates)}function RS(e){return new Va(e.coordinates)}function Lu(e,t){e=n0(e,!0,t);const n=e.getType();let i;switch(n){case"Point":{i=LS(e);break}case"LineString":{i=bS(e);break}case"Polygon":{i=FS(e,t);break}case"MultiPoint":{i=OS(e);break}case"MultiLineString":{i=MS(e);break}case"MultiPolygon":{i=AS(e,t);break}case"GeometryCollection":{i=IS(e,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return i}function IS(e,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(i){return Lu(i,t)})}}function bS(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function MS(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function OS(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function AS(e,t){let n;return t&&(n=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(n)}}function LS(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function FS(e,t){let n;return t&&(n=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(n)}}const Fu=xS;class ef{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new ef({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const nf=ef,mt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class sf{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Pe(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new sf({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ot()}getImage(t){return ot()}getHitDetectionImage(){return ot()}getPixelRatio(t){return 1}getImageState(){return ot()}getImageSize(){return ot()}getOrigin(){return ot()}getSize(){return ot()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Pe(t)}listenImageChange(t){ot()}load(){ot()}unlistenImageChange(t){ot()}}const o0=sf;class PS extends wo{constructor(t,n,i,s){super(),this.extent=t,this.pixelRatio_=i,this.resolution=n,this.state=typeof s=="function"?mt.IDLE:s,this.image_=null,this.loader=typeof s=="function"?s:null}changed(){this.dispatchEvent(at.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==mt.IDLE&&this.loader){this.state=mt.LOADING,this.changed();const t=this.getResolution(),n=Array.isArray(t)?t[0]:t;pE(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=mt.LOADED}).catch(i=>{this.state=mt.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function DS(e,t,n){const i=e;let s=!0,r=!1,o=!1;const a=[ka(i,at.LOAD,function(){o=!0,r||t()})];return i.src&&gp?(r=!0,i.decode().then(function(){s&&t()}).catch(function(l){s&&(o?t():n())})):a.push(ka(i,at.ERROR,n)),function(){s=!1,a.forEach($t)}}function kS(e,t){return new Promise((n,i)=>{function s(){o(),n(e)}function r(){o(),i(new Error("Image load error"))}function o(){e.removeEventListener("load",s),e.removeEventListener("error",r)}e.addEventListener("load",s),e.addEventListener("error",r),t&&(e.src=t)})}function NS(e,t){return t&&(e.src=t),gp?new Promise((n,i)=>e.decode().then(()=>n(e),i)):kS(e)}const GS=PS;let Cr=null;class US extends wo{constructor(t,n,i,s,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=s===void 0?mt.IDLE:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=n,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===mt.LOADED){Cr||(Cr=Ee(1,1,void 0,{willReadFrequently:!0})),Cr.drawImage(this.image_,0,0);try{Cr.getImageData(0,0,1,1),this.tainted_=!1}catch{Cr=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(at.CHANGE)}handleImageError_(){this.imageState_=mt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=mt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],n=this.size_[1],i=Ee(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===mt.IDLE){this.image_||this.initializeImage_(),this.imageState_=mt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&NS(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==mt.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*t),i.height=Math.ceil(n.height*t);const s=i.getContext("2d");s.scale(t,t),s.drawImage(n,0,0),s.globalCompositeOperation="multiply",s.fillStyle=Ep(this.color_),s.fillRect(0,0,i.width/t,i.height/t),s.globalCompositeOperation="destination-in",s.drawImage(n,0,0),this.canvas_[t]=i}}function $S(e,t,n,i,s){let r=t===void 0?void 0:Ga.get(t,n,s);return r||(r=new US(e,e instanceof HTMLImageElement?e.src||void 0:t,n,i,s),Ga.set(t,n,s,r)),r}function mg(e,t,n,i){return n!==void 0&&i!==void 0?[n/e,i/t]:n!==void 0?n/e:i!==void 0?i/t:1}class rf extends o0{constructor(t){t=t||{};const n=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:n,rotation:i,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Et(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Ot(o)),Et(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Et(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=mt.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?mt.LOADED:mt.IDLE:l=mt.LOADING:l=mt.LOADED),this.color_=t.color!==void 0?Na(t.color):null,this.iconImage_=$S(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let c,u;if(t.size)[c,u]=t.size;else{const h=this.getImage(1);if(h.width&&h.height)c=h.width,u=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=t;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(mg(d[0],d[1],t.width,t.height))};this.listenImageChange(f);return}}c!==void 0&&this.setScale(mg(c,u,t.width,t.height))}}clone(){let t,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new rf({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]-n[0]/i[0],t[1]+n[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==mt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==mt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(at.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(at.CHANGE,t)}}const el=rf;class of{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new of({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const af=of;function vn(e){return Array.isArray(e)?Tp(e):e}class lf extends o0{constructor(t){const n=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:n,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),n=new lf({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const t=this.size_;if(!t)return null;const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-n[0]/i[0],t[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let n=this.canvas_[t];if(!n){const i=this.renderOptions_,s=Ee(i.size*t,i.size*t);this.draw_(i,s,t),n=s.canvas,this.canvas_[t]=n}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return mt.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const C=s;s=r,r=C}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),c=Math.sqrt(r*r-l*l),u=s-c,h=Math.sqrt(l*l+u*u),f=h/l;if(t==="miter"&&f<=i)return f*n;const d=n/2/f,g=n/2*(u/h),p=Math.sqrt((s+d)*(s+d)+g*g)-s;if(this.radius2_===void 0||t==="bevel")return p*2;const y=s*Math.sin(a),x=Math.sqrt(s*s-y*y),E=r-x,S=Math.sqrt(y*y+E*E)/y;if(S<=i){const C=S*n/2-r-s;return 2*Math.max(p,C)}return p*2}createRenderOptions(){let t=qs,n=Js,i=0,s=null,r=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=co),o=vn(o),a=this.stroke_.getWidth(),a===void 0&&(a=ho),s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),n=this.stroke_.getLineJoin(),n===void 0&&(n=Js),t=this.stroke_.getLineCap(),t===void 0&&(t=qs),i=this.stroke_.getMiterLimit(),i===void 0&&(i=lo));const l=this.calculateLineJoinSize_(n,a,i),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:t,lineDash:s,lineDashOffset:r,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){let s=this.fill_.getColor();s===null&&(s=Re),n.fillStyle=vn(s),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineCap=t.lineCap,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=Na(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){const s=Ee(t.size,t.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(t,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let n=this.points_;const i=this.radius_;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{const s=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=r+a*o,c=a%2===0?i:s;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=Re,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}}const a0=lf;class cf extends a0{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),n=new cf({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(t){this.radius_=t,this.render()}}const l0=cf;class Zl{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=_g,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Zl({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(n){return n.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=_g,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function WS(e){let t;if(typeof e=="function")t=e;else{let n;Array.isArray(e)?n=e:(Et(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[e]),t=function(){return n}}return t}let Ic=null;function zS(e,t){if(!Ic){const n=new nf({color:"rgba(255,255,255,0.4)"}),i=new af({color:"#3399CC",width:1.25});Ic=[new Zl({image:new l0({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return Ic}function _g(e){return e.getGeometry()}const ji=Zl,YS="#333";class uf{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Pe(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new nf({color:YS}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new uf({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Pe(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const VS=uf,sa={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class XS extends Xl{constructor(t){t=t||{};const n=Object.assign({},t);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(sa.PRELOAD)}setPreload(t){this.set(sa.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(sa.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(sa.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const HS=XS;class BS extends hp{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return ot()}getData(t){return null}prepareFrame(t){return ot()}renderFrame(t,n){return ot()}loadedTileCallback(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i}createLoadedTileFinder(t,n,i){return(s,r)=>{const o=this.loadedTileCallback.bind(this,i,s);return t.forEachLoadedTile(n,s,r,o)}}forEachFeatureAtCoordinate(t,n,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const n=t.target;(n.getState()===mt.LOADED||n.getState()===mt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let n=t.getState();return n!=mt.LOADED&&n!=mt.ERROR&&t.addEventListener(at.CHANGE,this.boundHandleImageChange_),n==mt.IDLE&&(t.load(),n=t.getState()),n==mt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const ZS=BS,pg=[];let Rs=null;function jS(){Rs=Ee(1,1,void 0,{willReadFrequently:!0})}class KS extends ZS{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=ln(),this.pixelTransform=ln(),this.inversePixelTransform=ln(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,n,i){Rs||jS(),Rs.clearRect(0,0,1,1);let s;try{Rs.drawImage(t,n,i,1,1,0,0,1,1),s=Rs.getImageData(0,0,1,1).data}catch{return Rs=null,null}return s}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,n,i){const s=this.getLayer().getClassName();let r,o;if(t&&t.className===s&&(!i||t&&t.style.backgroundColor&&Ei(Na(t.style.backgroundColor),Na(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=Ee();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,n,i){const s=ss(i),r=Wl(i),o=$l(i),a=Ul(i);jt(n.coordinateToPixelTransform,s),jt(n.coordinateToPixelTransform,r),jt(n.coordinateToPixelTransform,o),jt(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;jt(l,s),jt(l,r),jt(l,o),jt(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,n,i){const s=this.getLayer();if(s.hasListener(t)){const r=new Vp(t,this.inversePixelTransform,i,n);s.dispatchEvent(r)}}preRender(t,n){this.frameState=n,this.dispatchRenderEvent_(wn.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(wn.POSTRENDER,t,n)}getRenderTransform(t,n,i,s,r,o,a){const l=r/2,c=o/2,u=s/n,h=-u,f=-t[0]+a,d=-t[1];return un(this.tempTransform,l,c,u,h,-i,f,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const hf=KS;class qS extends wo{constructor(t,n,i){super(),i=i||{},this.tileCoord=t,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(at.CHANGE)}release(){this.state===it.ERROR&&this.setState(it.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==it.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,n=this;do{if(t.getState()==it.LOADED){t.interimTile=null;break}else t.getState()==it.LOADING?n=t:t.getState()==it.IDLE?n.interimTile=t.interimTile:n=t;t=n.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==it.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){ot()}getAlpha(t,n){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;const s=n-i+1e3/60;return s>=this.transition_?1:Lp(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const c0=qS;class JS extends c0{constructor(t,n,i,s,r,o){super(t,n,o),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=it.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=it.ERROR,this.unlistenImage_(),this.image_=QS(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=it.LOADED:this.state=it.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==it.ERROR&&(this.state=it.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==it.IDLE&&(this.state=it.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=DS(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function QS(){const e=Ee(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}const u0=JS,tR=.5,eR=10,yg=.25;class nR{constructor(t,n,i,s,r,o){this.sourceProj_=t,this.targetProj_=n;let a={};const l=za(this.targetProj_,this.sourceProj_);this.transformInv_=function(x){const E=x[0]+"/"+x[1];return a[E]||(a[E]=l(x)),a[E]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&kt(s)>=kt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?kt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?kt(this.targetProj_.getExtent()):null;const c=ss(i),u=Wl(i),h=$l(i),f=Ul(i),d=this.transformInv_(c),g=this.transformInv_(u),m=this.transformInv_(h),p=this.transformInv_(f),y=eR+(o?Math.max(0,Math.ceil(Math.log2(_u(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,h,f,d,g,m,p,y),this.wrapsXInSource_){let x=1/0;this.triangles_.forEach(function(E,w,S){x=Math.min(x,E.source[0][0],E.source[1][0],E.source[2][0])}),this.triangles_.forEach(E=>{if(Math.max(E.source[0][0],E.source[1][0],E.source[2][0])-x>this.sourceWorldWidth_/2){const w=[[E.source[0][0],E.source[0][1]],[E.source[1][0],E.source[1][1]],[E.source[2][0],E.source[2][1]]];w[0][0]-x>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-x>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-x>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);const S=Math.min(w[0][0],w[1][0],w[2][0]);Math.max(w[0][0],w[1][0],w[2][0])-S<this.sourceWorldWidth_/2&&(E.source=w)}})}a={}}addTriangle_(t,n,i,s,r,o){this.triangles_.push({source:[s,r,o],target:[t,n,i]})}addQuad_(t,n,i,s,r,o,a,l,c){const u=Vd([r,o,a,l]),h=this.sourceWorldWidth_?kt(u)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&h>.5&&h<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const p=Vd([t,n,i,s]);g=kt(p)/this.targetWorldWidth_>yg||g}!d&&this.sourceProj_.isGlobal()&&h&&(g=h>yg||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!ve(u,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(m=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!g){const p=[(t[0]+i[0])/2,(t[1]+i[1])/2],y=this.transformInv_(p);let x;d?x=(Bi(r[0],f)+Bi(a[0],f))/2-Bi(y[0],f):x=(r[0]+a[0])/2-y[0];const E=(r[1]+a[1])/2-y[1];g=x*x+E*E>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const p=[(n[0]+i[0])/2,(n[1]+i[1])/2],y=this.transformInv_(p),x=[(s[0]+t[0])/2,(s[1]+t[1])/2],E=this.transformInv_(x);this.addQuad_(t,n,p,x,r,o,y,E,c-1),this.addQuad_(x,p,i,s,E,y,a,l,c-1)}else{const p=[(t[0]+n[0])/2,(t[1]+n[1])/2],y=this.transformInv_(p),x=[(i[0]+s[0])/2,(i[1]+s[1])/2],E=this.transformInv_(x);this.addQuad_(t,p,x,s,r,y,E,l,c-1),this.addQuad_(p,n,i,x,y,o,a,E,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(t,i,s,r,a,l),m&14||this.addTriangle_(t,i,n,r,a,o),m&&(m&13||this.addTriangle_(n,s,t,o,l,r),m&7||this.addTriangle_(n,s,i,o,l,a))}calculateSourceExtent(){const t=He();return this.triangles_.forEach(function(n,i,s){const r=n.source;Br(t,r[0]),Br(t,r[1]),Br(t,r[2])}),t}getTriangles(){return this.triangles_}}const iR=nR;let bc;const Gs=[];function xg(e,t,n,i,s){e.beginPath(),e.moveTo(0,0),e.lineTo(t,n),e.lineTo(i,s),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,i)+1,Math.max(n,s)),e.restore()}function Mc(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function sR(){if(bc===void 0){const e=Ee(6,6,Gs);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",xg(e,4,5,4,0),xg(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;bc=Mc(t,0)||Mc(t,4)||Mc(t,8),Hl(e),Gs.push(e.canvas)}return bc}function vg(e,t,n,i){const s=fT(n,t,e);let r=Wa(t,i,n);const o=t.getMetersPerUnit();o!==void 0&&(r*=o);const a=e.getMetersPerUnit();a!==void 0&&(r/=a);const l=e.getExtent();if(!l||Eo(l,s)){const c=Wa(e,r,s)/r;isFinite(c)&&c>0&&(r/=c)}return r}function rR(e,t,n,i){const s=Qi(n);let r=vg(e,t,s,i);return(!isFinite(r)||r<=0)&&vp(n,function(o){return r=vg(e,t,o,i),isFinite(r)&&r>0}),r}function oR(e,t,n,i,s,r,o,a,l,c,u,h){const f=Ee(Math.round(n*e),Math.round(n*t),Gs);if(h||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(n,n);function d(w){return Math.round(w*n)/n}f.globalCompositeOperation="lighter";const g=He();l.forEach(function(w,S,C){yp(g,w.extent)});const m=kt(g),p=ke(g),y=Ee(Math.round(n*m/i),Math.round(n*p/i),Gs);h||(y.imageSmoothingEnabled=!1);const x=n/i;l.forEach(function(w,S,C){const I=w.extent[0]-g[0],L=-(w.extent[3]-g[3]),B=kt(w.extent),F=ke(w.extent);w.image.width>0&&w.image.height>0&&y.drawImage(w.image,c,c,w.image.width-2*c,w.image.height-2*c,I*x,L*x,B*x,F*x)});const E=ss(o);return a.getTriangles().forEach(function(w,S,C){const I=w.source,L=w.target;let B=I[0][0],F=I[0][1],N=I[1][0],j=I[1][1],K=I[2][0],ct=I[2][1];const X=d((L[0][0]-E[0])/r),V=d(-(L[0][1]-E[1])/r),D=d((L[1][0]-E[0])/r),H=d(-(L[1][1]-E[1])/r),st=d((L[2][0]-E[0])/r),dt=d(-(L[2][1]-E[1])/r),bt=B,k=F;B=0,F=0,N-=bt,j-=k,K-=bt,ct-=k;const Xt=[[N,j,0,0,D-X],[K,ct,0,0,st-X],[0,0,N,j,H-V],[0,0,K,ct,dt-V]],gt=GE(Xt);if(gt){if(f.save(),f.beginPath(),sR()||!h){f.moveTo(D,H);const vt=4,Nt=X-D,O=V-H;for(let z=0;z<vt;z++)f.lineTo(D+d((z+1)*Nt/vt),H+d(z*O/(vt-1))),z!=vt-1&&f.lineTo(D+d((z+1)*Nt/vt),H+d((z+1)*O/(vt-1)));f.lineTo(st,dt)}else f.moveTo(D,H),f.lineTo(X,V),f.lineTo(st,dt);f.clip(),f.transform(gt[0],gt[2],gt[1],gt[3],X,V),f.translate(g[0]-bt,g[3]-k),f.scale(i/n,-i/n),f.drawImage(y.canvas,0,0),f.restore()}}),Hl(y),Gs.push(y.canvas),u&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach(function(w,S,C){const I=w.target,L=(I[0][0]-E[0])/r,B=-(I[0][1]-E[1])/r,F=(I[1][0]-E[0])/r,N=-(I[1][1]-E[1])/r,j=(I[2][0]-E[0])/r,K=-(I[2][1]-E[1])/r;f.beginPath(),f.moveTo(F,N),f.lineTo(L,B),f.lineTo(j,K),f.closePath(),f.stroke()}),f.restore()),f.canvas}class aR extends c0{constructor(t,n,i,s,r,o,a,l,c,u,h,f){super(r,it.IDLE,{interpolate:!!f}),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const p=g?ks(d,g):d;if(_u(p)===0){this.state=it.EMPTY;return}const y=t.getExtent();y&&(m?m=ks(m,y):m=y);const x=s.getResolution(this.wrappedTileCoord_[0]),E=rR(t,i,p,x);if(!isFinite(E)||E<=0){this.state=it.EMPTY;return}const w=u!==void 0?u:tR;if(this.triangulation_=new iR(t,i,p,m,E*w,x),this.triangulation_.getTriangles().length===0){this.state=it.EMPTY;return}this.sourceZ_=n.getZForResolution(E);let S=this.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(S[1]=te(S[1],m[1],m[3]),S[3]=te(S[3],m[1],m[3])):S=ks(S,m)),!_u(S))this.state=it.EMPTY;else{const C=n.getTileRangeForExtentAndZ(S,this.sourceZ_);for(let I=C.minX;I<=C.maxX;I++)for(let L=C.minY;L<=C.maxY;L++){const B=c(this.sourceZ_,I,L,a);B&&this.sourceTiles_.push(B)}this.sourceTiles_.length===0&&(this.state=it.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==it.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=it.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),s=typeof i=="number"?i:i[0],r=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=oR(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=it.LOADED}this.changed()}load(){if(this.state==it.IDLE){this.state=it.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const i=n.getState();if(i==it.IDLE||i==it.LOADING){t++;const s=xt(n,at.CHANGE,function(r){const o=n.getState();(o==it.LOADED||o==it.ERROR||o==it.EMPTY)&&($t(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,s){n.getState()==it.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach($t),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Hl(this.canvas_.getContext("2d")),Gs.push(this.canvas_),this.canvas_=null),super.release()}}const Pu=aR;class h0{constructor(t,n,i,s){this.minX=t,this.maxX=n,this.minY=i,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function _s(e,t,n,i,s){return s!==void 0?(s.minX=e,s.maxX=t,s.minY=n,s.maxY=i,s):new h0(e,t,n,i)}const f0=h0;class lR extends hf{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=He(),this.tmpTileRange_=new f0(0,0,0,0)}isDrawableTile(t){const n=this.getLayer(),i=t.getState(),s=n.getUseInterimTilesOnError();return i==it.LOADED||i==it.EMPTY||i==it.ERROR&&!s}getTile(t,n,i,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(t,n,i,r,o);return c.getState()==it.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),s=jt(n.pixelToCoordinateTransform,t.slice()),r=i.getExtent();if(r&&!Eo(r,s))return null;const o=n.pixelRatio,a=n.viewState.projection,l=n.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),h=c.getTilePixelRatio(n.pixelRatio);for(let f=u.getZForResolution(l.resolution);f>=u.getMinZoom();--f){const d=u.getTileCoordForCoordAndZ(s,f),g=c.getTile(f,d[1],d[2],o,a);if(!(g instanceof u0||g instanceof Pu)||g instanceof Pu&&g.getState()===it.EMPTY)return null;if(g.getState()!==it.LOADED)continue;const m=u.getOrigin(f),p=Pe(u.getTileSize(f)),y=u.getResolution(f),x=Math.floor(h*((s[0]-m[0])/y-d[1]*p[0])),E=Math.floor(h*((m[1]-s[1])/y-d[2]*p[1])),w=Math.round(h*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),x+w,E+w)}return null}loadedTileCallback(t,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,n,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,n){const i=t.layerStatesArray[t.layerIndex],s=t.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,c=t.pixelRatio,u=this.getLayer(),h=u.getSource(),f=h.getRevision(),d=h.getTileGridForProjection(r),g=d.getZForResolution(o,h.zDirection),m=d.getResolution(g);let p=t.extent;const y=t.viewState.resolution,x=h.getTilePixelRatio(c),E=Math.round(kt(p)/y*c),w=Math.round(ke(p)/y*c),S=i.extent&&Dn(i.extent);S&&(p=ks(p,Dn(i.extent)));const C=m*E/2/x,I=m*w/2/x,L=[a[0]-C,a[1]-I,a[0]+C,a[1]+I],B=d.getTileRangeForExtentAndZ(p,g),F={};F[g]={};const N=this.createLoadedTileFinder(h,r,F),j=this.tmpExtent,K=this.tmpTileRange_;this.newTiles_=!1;const ct=l?yu(s.center,y,l,t.size):void 0;for(let Xt=B.minX;Xt<=B.maxX;++Xt)for(let gt=B.minY;gt<=B.maxY;++gt){if(l&&!d.tileCoordIntersectsViewport([g,Xt,gt],ct))continue;const vt=this.getTile(g,Xt,gt,t);if(this.isDrawableTile(vt)){const z=Ot(this);if(vt.getState()==it.LOADED){F[g][vt.tileCoord.toString()]=vt;let R=vt.inTransition(z);R&&i.opacity!==1&&(vt.endTransition(z),R=!1),!this.newTiles_&&(R||!this.renderedTiles.includes(vt))&&(this.newTiles_=!0)}if(vt.getAlpha(z,t.time)===1)continue}const Nt=d.getTileCoordChildTileRange(vt.tileCoord,K,j);let O=!1;Nt&&(O=N(g+1,Nt)),O||d.forEachTileCoordParentTileRange(vt.tileCoord,N,K,j)}const X=m/o*c/x;un(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,l,-E/2,-w/2);const V=Oh(this.pixelTransform);this.useContainer(n,V,this.getBackground(t));const D=this.context,H=D.canvas;Gl(this.inversePixelTransform,this.pixelTransform),un(this.tempTransform,E/2,w/2,X,X,0,-E/2,-w/2),H.width!=E||H.height!=w?(H.width=E,H.height=w):this.containerReused||D.clearRect(0,0,E,w),S&&this.clipUnrotated(D,t,S),h.getInterpolate()||(D.imageSmoothingEnabled=!1),this.preRender(D,t),this.renderedTiles.length=0;let st=Object.keys(F).map(Number);st.sort(xi);let dt,bt,k;i.opacity===1&&(!this.containerReused||h.getOpaque(t.viewState.projection))?st=st.reverse():(dt=[],bt=[]);for(let Xt=st.length-1;Xt>=0;--Xt){const gt=st[Xt],vt=h.getTilePixelSize(gt,c,r),O=d.getResolution(gt)/m,z=vt[0]*O*X,R=vt[1]*O*X,G=d.getTileCoordForCoordAndZ(ss(L),gt),Q=d.getTileCoordExtent(G),_=jt(this.tempTransform,[x*(Q[0]-L[0])/m,x*(L[3]-Q[3])/m]),v=x*h.getGutterForProjection(r),T=F[gt];for(const b in T){const M=T[b],P=M.tileCoord,Z=G[1]-P[1],$=Math.round(_[0]-(Z-1)*z),Y=G[2]-P[2],U=Math.round(_[1]-(Y-1)*R),tt=Math.round(_[0]-Z*z),J=Math.round(_[1]-Y*R),et=$-tt,nt=U-J,ut=g===gt,wt=ut&&M.getAlpha(Ot(this),t.time)!==1;let _t=!1;if(!wt)if(dt){k=[tt,J,tt+et,J,tt+et,J+nt,tt,J+nt];for(let Gt=0,fe=dt.length;Gt<fe;++Gt)if(g!==gt&&gt<bt[Gt]){const Ht=dt[Gt];ve([tt,J,tt+et,J+nt],[Ht[0],Ht[3],Ht[4],Ht[7]])&&(_t||(D.save(),_t=!0),D.beginPath(),D.moveTo(k[0],k[1]),D.lineTo(k[2],k[3]),D.lineTo(k[4],k[5]),D.lineTo(k[6],k[7]),D.moveTo(Ht[6],Ht[7]),D.lineTo(Ht[4],Ht[5]),D.lineTo(Ht[2],Ht[3]),D.lineTo(Ht[0],Ht[1]),D.clip())}dt.push(k),bt.push(gt)}else D.clearRect(tt,J,et,nt);this.drawTileImage(M,t,tt,J,et,nt,v,ut),dt&&!wt?(_t&&D.restore(),this.renderedTiles.unshift(M)):this.renderedTiles.push(M),this.updateUsedTiles(t.usedTiles,h,M)}}return this.renderedRevision=f,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!ro(this.renderedExtent_,L),this.renderedExtent_=L,this.renderedPixelRatio=c,this.renderedProjection=r,this.manageTilePyramid(t,h,d,c,r,p,g,u.getPreload()),this.scheduleExpireCache(t,h),this.postRender(D,t),i.extent&&D.restore(),D.imageSmoothingEnabled=!0,V!==H.style.transform&&(H.style.transform=V),this.container}drawTileImage(t,n,i,s,r,o,a,l){const c=this.getTileImage(t);if(!c)return;const u=Ot(this),h=n.layerStatesArray[n.layerIndex],f=h.opacity*(l?t.getAlpha(u,n.time):1),d=f!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,s,r,o),d&&this.context.restore(),f!==h.opacity?n.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,n){if(n.canExpireCache()){const i=(function(s,r,o){const a=Ot(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,n);t.postRenderFunctions.push(i)}}updateUsedTiles(t,n,i){const s=Ot(n);s in t||(t[s]={}),t[s][i.getKey()]=!0}manageTilePyramid(t,n,i,s,r,o,a,l,c){const u=Ot(n);u in t.wantedTiles||(t.wantedTiles[u]={});const h=t.wantedTiles[u],f=t.tileQueue,d=i.getMinZoom(),g=t.viewState.rotation,m=g?yu(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let p=0,y,x,E,w,S,C;for(C=d;C<=a;++C)for(x=i.getTileRangeForExtentAndZ(o,C,x),E=i.getResolution(C),w=x.minX;w<=x.maxX;++w)for(S=x.minY;S<=x.maxY;++S)g&&!i.tileCoordIntersectsViewport([C,w,S],m)||(a-C<=l?(++p,y=n.getTile(C,w,S,s,r),y.getState()==it.IDLE&&(h[y.getKey()]=!0,f.isKeyQueued(y.getKey())||f.enqueue([y,u,i.getTileCoordCenter(y.tileCoord),E])),c!==void 0&&c(y)):n.useTile(C,w,S,r));n.updateCacheSize(p,r)}}const cR=lR;class uR extends HS{constructor(t){super(t)}createRenderer(){return new cR(this)}}const hR=uR;function fR(e,t,n,i,s){d0(e,t,n||0,i||e.length-1,s||dR)}function d0(e,t,n,i,s){for(;i>n;){if(i-n>600){var r=i-n+1,o=t-n+1,a=Math.log(r),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(r-l)/r)*(o-r/2<0?-1:1),u=Math.max(n,Math.floor(t-o*l/r+c)),h=Math.min(i,Math.floor(t+(r-o)*l/r+c));d0(e,t,u,h,s)}var f=e[t],d=n,g=i;for(Sr(e,n,t),s(e[i],f)>0&&Sr(e,n,i);d<g;){for(Sr(e,d,g),d++,g--;s(e[d],f)<0;)d++;for(;s(e[g],f)>0;)g--}s(e[n],f)===0?Sr(e,n,g):(g++,Sr(e,g,i)),g<=t&&(n=g+1),t<=g&&(i=g-1)}}function Sr(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function dR(e,t){return e<t?-1:e>t?1:0}let ff=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const i=[];if(!oa(t,n))return i;const s=this.toBBox,r=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?s(a):a;oa(t,l)&&(n.leaf?i.push(a):Ac(t,l)?this._all(a,i):r.push(a))}n=r.pop()}return i}collides(t){let n=this.data;if(!oa(t,n))return!1;const i=[];for(;n;){for(let s=0;s<n.children.length;s++){const r=n.children[s],o=n.leaf?this.toBBox(r):r;if(oa(t,o)){if(n.leaf||Ac(t,o))return!0;i.push(r)}}n=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Is([]),this}remove(t,n){if(!t)return this;let i=this.data;const s=this.toBBox(t),r=[],o=[];let a,l,c;for(;i||r.length;){if(i||(i=r.pop(),l=r[r.length-1],a=o.pop(),c=!0),i.leaf){const u=gR(t,i.children,n);if(u!==-1)return i.children.splice(u,1),r.push(i),this._condense(r),this}!c&&!i.leaf&&Ac(i,s)?(r.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const i=[];for(;t;)t.leaf?n.push(...t.children):i.push(...t.children),t=i.pop();return n}_build(t,n,i,s){const r=i-n+1;let o=this._maxEntries,a;if(r<=o)return a=Is(t.slice(n,i+1)),ps(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=Is([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),c=l*Math.ceil(Math.sqrt(o));wg(t,n,i,c,this.compareMinX);for(let u=n;u<=i;u+=c){const h=Math.min(u+c-1,i);wg(t,u,h,l,this.compareMinY);for(let f=u;f<=h;f+=l){const d=Math.min(f+l-1,h);a.children.push(this._build(t,f,d,s-1))}}return ps(a,this.toBBox),a}_chooseSubtree(t,n,i,s){for(;s.push(n),!(n.leaf||s.length-1===i);){let r=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=Oc(c),h=pR(t,c)-u;h<o?(o=h,r=u<r?u:r,a=c):h===o&&u<r&&(r=u,a=c)}n=a||n.children[0]}return n}_insert(t,n,i){const s=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(s,this.data,n,r);for(o.children.push(t),kr(o,s);n>=0&&r[n].children.length>this._maxEntries;)this._split(r,n),n--;this._adjustParentBBoxes(s,r,n)}_split(t,n){const i=t[n],s=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,s);const o=this._chooseSplitIndex(i,r,s),a=Is(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,ps(i,this.toBBox),ps(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,n){this.data=Is([t,n]),this.data.height=t.height+1,this.data.leaf=!1,ps(this.data,this.toBBox)}_chooseSplitIndex(t,n,i){let s,r=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=Dr(t,0,a,this.toBBox),c=Dr(t,a,i,this.toBBox),u=yR(l,c),h=Oc(l)+Oc(c);u<r?(r=u,s=a,o=h<o?h:o):u===r&&h<o&&(o=h,s=a)}return s||i-n}_chooseSplitAxis(t,n,i){const s=t.leaf?this.compareMinX:mR,r=t.leaf?this.compareMinY:_R,o=this._allDistMargin(t,n,i,s),a=this._allDistMargin(t,n,i,r);o<a&&t.children.sort(s)}_allDistMargin(t,n,i,s){t.children.sort(s);const r=this.toBBox,o=Dr(t,0,n,r),a=Dr(t,i-n,i,r);let l=ra(o)+ra(a);for(let c=n;c<i-n;c++){const u=t.children[c];kr(o,t.leaf?r(u):u),l+=ra(o)}for(let c=i-n-1;c>=n;c--){const u=t.children[c];kr(a,t.leaf?r(u):u),l+=ra(a)}return l}_adjustParentBBoxes(t,n,i){for(let s=i;s>=0;s--)kr(n[s],t)}_condense(t){for(let n=t.length-1,i;n>=0;n--)t[n].children.length===0?n>0?(i=t[n-1].children,i.splice(i.indexOf(t[n]),1)):this.clear():ps(t[n],this.toBBox)}};function gR(e,t,n){if(!n)return t.indexOf(e);for(let i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function ps(e,t){Dr(e,0,e.children.length,t,e)}function Dr(e,t,n,i,s){s||(s=Is(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=t;r<n;r++){const o=e.children[r];kr(s,e.leaf?i(o):o)}return s}function kr(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function mR(e,t){return e.minX-t.minX}function _R(e,t){return e.minY-t.minY}function Oc(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function ra(e){return e.maxX-e.minX+(e.maxY-e.minY)}function pR(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function yR(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,s-n)*Math.max(0,r-i)}function Ac(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function oa(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Is(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function wg(e,t,n,i,s){const r=[t,n];for(;r.length;){if(n=r.pop(),t=r.pop(),n-t<=i)continue;const o=t+Math.ceil((n-t)/i/2)*i;fR(e,o,t,n,s),r.push(t,o,o,n)}}let gr=0;const me=1<<gr++,pt=1<<gr++,Qs=1<<gr++,df=1<<gr++,bo=1<<gr++,Ze=Math.pow(2,gr)-1,g0={[me]:"boolean",[pt]:"number",[Qs]:"string",[df]:"color",[bo]:"number[]"},xR=Object.keys(g0).map(Number).sort(xi);function nl(e){const t=[];for(const n of xR)vR(e,n)&&t.push(g0[n]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function vR(e,t){return(e&t)===t}function m0(e,t){return!!(e&t)}class gi{constructor(t,n){this.type=t,this.value=n}}class wR{constructor(t,n,...i){this.type=t,this.operator=n,this.args=i}}function _0(){return{variables:new Set,properties:new Set}}function jl(e,t){switch(typeof e){case"boolean":return new gi(me,e);case"number":return new gi(pt,e);case"string":return new gi(Qs,e)}if(!Array.isArray(e))throw new Error("Expression must be an array or a primitive value");if(e.length===0)throw new Error("Empty expression");if(typeof e[0]=="string")return RR(e,t);for(const i of e)if(typeof i!="number")throw new Error("Expected an array of numbers");let n=bo;return(e.length===3||e.length===4)&&(n|=df),new gi(n,e)}const W={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},ER={[W.Number]:Lt(Ut(1,1/0,Ze),pt),[W.String]:Lt(Ut(1,1/0,Ze),Qs),[W.Get]:Lt(TR,Ze),[W.Var]:Lt(CR,Ze),[W.Resolution]:Lt(SR,pt),[W.Any]:Lt(Ut(2,1/0,me),me),[W.All]:Lt(Ut(2,1/0,me),me),[W.Not]:Lt(Ut(1,1,me),me),[W.Equal]:Lt(Ut(2,2,Ze),me),[W.NotEqual]:Lt(Ut(2,2,Ze),me),[W.GreaterThan]:Lt(Ut(2,2,Ze),me),[W.GreaterThanOrEqualTo]:Lt(Ut(2,2,Ze),me),[W.LessThan]:Lt(Ut(2,2,Ze),me),[W.LessThanOrEqualTo]:Lt(Ut(2,2,Ze),me),[W.Multiply]:Lt(Ut(2,1/0,pt),pt),[W.Divide]:Lt(Ut(2,2,pt),pt),[W.Add]:Lt(Ut(2,1/0,pt),pt),[W.Subtract]:Lt(Ut(2,2,pt),pt),[W.Clamp]:Lt(Ut(3,3,pt),pt),[W.Mod]:Lt(Ut(2,2,pt),pt),[W.Pow]:Lt(Ut(2,2,pt),pt),[W.Abs]:Lt(Ut(1,1,pt),pt),[W.Floor]:Lt(Ut(1,1,pt),pt),[W.Ceil]:Lt(Ut(1,1,pt),pt),[W.Round]:Lt(Ut(1,1,pt),pt),[W.Sin]:Lt(Ut(1,1,pt),pt),[W.Cos]:Lt(Ut(1,1,pt),pt),[W.Atan]:Lt(Ut(1,2,pt),pt),[W.Sqrt]:Lt(Ut(1,1,pt),pt),[W.Match]:Lt(Ut(4,1/0,Qs|pt),Ze)};function TR(e,t){if(e.length!==2)throw new Error("Expected 1 argument for get operation");const n=jl(e[1],t);if(!(n instanceof gi))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.properties.add(n.value),[n]}function CR(e,t){if(e.length!==2)throw new Error("Expected 1 argument for var operation");const n=jl(e[1],t);if(!(n instanceof gi))throw new Error("Expected a literal argument for var operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.variables.add(n.value),[n]}function SR(e,t){const n=e[0];if(e.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function Ut(e,t,n){return function(i,s){const r=i[0],o=i.length-1;if(e===t){if(o!==e){const l=e===1?"":"s";throw new Error(`Expected ${e} argument${l} for operation ${r}, got ${o}`)}}else if(o<e||o>t)throw new Error(`Expected ${e} to ${t} arguments for operation ${r}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const c=jl(i[l+1],s);if(!m0(n,c.type)){const u=nl(n),h=nl(c.type);throw new Error(`Unexpected type for argument ${l} of ${r} operation : got ${u} but expected ${h}`)}a[l]=c}return a}}function Lt(e,t){return function(n,i){const s=n[0],r=e(n,i);return new wR(t,s,...r)}}function RR(e,t){const n=e[0],i=ER[n];if(!i)throw new Error(`Unknown operator: ${n}`);return i(e,t)}function p0(){return{variables:{},properties:{},resolution:NaN}}function Ti(e,t,n){const i=jl(e,n);if(!m0(t,i.type)){const s=nl(t),r=nl(i.type);throw new Error(`Expected expression to be of type ${s}, got ${r}`)}return ts(i)}function ts(e,t){if(e instanceof gi)return function(){return e.value};const n=e.operator;switch(n){case W.Number:case W.String:return IR(e);case W.Get:case W.Var:return bR(e);case W.Resolution:return i=>i.resolution;case W.Any:case W.All:case W.Not:return OR(e);case W.Equal:case W.NotEqual:case W.LessThan:case W.LessThanOrEqualTo:case W.GreaterThan:case W.GreaterThanOrEqualTo:return MR(e);case W.Multiply:case W.Divide:case W.Add:case W.Subtract:case W.Clamp:case W.Mod:case W.Pow:case W.Abs:case W.Floor:case W.Ceil:case W.Round:case W.Sin:case W.Cos:case W.Atan:case W.Sqrt:return AR(e);case W.Match:return LR(e);default:throw new Error(`Unsupported operator ${n}`)}}function IR(e,t){const n=e.operator,i=e.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=ts(e.args[r]);switch(n){case W.Number:case W.String:return r=>{for(let o=0;o<i;++o){const a=s[o](r);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function bR(e,t){const n=e.args[0];if(!(n instanceof gi))throw new Error("Expected literal name");const i=n.value;if(typeof i!="string")throw new Error("Expected string name");switch(e.operator){case W.Get:return s=>s.properties[i];case W.Var:return s=>s.variables[i];default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function MR(e,t){const n=e.operator,i=ts(e.args[0]),s=ts(e.args[1]);switch(n){case W.Equal:return r=>i(r)===s(r);case W.NotEqual:return r=>i(r)!==s(r);case W.LessThan:return r=>i(r)<s(r);case W.LessThanOrEqualTo:return r=>i(r)<=s(r);case W.GreaterThan:return r=>i(r)>s(r);case W.GreaterThanOrEqualTo:return r=>i(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${n}`)}}function OR(e,t){const n=e.operator,i=e.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=ts(e.args[r]);switch(n){case W.Any:return r=>{for(let o=0;o<i;++o)if(s[o](r))return!0;return!1};case W.All:return r=>{for(let o=0;o<i;++o)if(!s[o](r))return!1;return!0};case W.Not:return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${n}`)}}function AR(e,t){const n=e.operator,i=e.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=ts(e.args[r]);switch(n){case W.Multiply:return r=>{let o=1;for(let a=0;a<i;++a)o*=s[a](r);return o};case W.Divide:return r=>s[0](r)/s[1](r);case W.Add:return r=>{let o=0;for(let a=0;a<i;++a)o+=s[a](r);return o};case W.Subtract:return r=>s[0](r)-s[1](r);case W.Clamp:return r=>{const o=s[0](r),a=s[1](r);if(o<a)return a;const l=s[2](r);return o>l?l:o};case W.Mod:return r=>s[0](r)%s[1](r);case W.Pow:return r=>Math.pow(s[0](r),s[1](r));case W.Abs:return r=>Math.abs(s[0](r));case W.Floor:return r=>Math.floor(s[0](r));case W.Ceil:return r=>Math.ceil(s[0](r));case W.Round:return r=>Math.round(s[0](r));case W.Sin:return r=>Math.sin(s[0](r));case W.Cos:return r=>Math.cos(s[0](r));case W.Atan:return i===2?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case W.Sqrt:return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${n}`)}}function LR(e,t){const n=e.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=ts(e.args[s]);return s=>{const r=i[0](s);for(let o=1;o<n;o+=2)if(r===i[o](s))return i[o+1](s);return i[n-1](s)}}function FR(e){return!0}function PR(e){const t=_0(),n=DR(e,t),i=p0();return function(s,r){return i.properties=s.getPropertiesInternal(),i.resolution=r,n(i)}}function Eg(e){const t=_0(),n=e.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Du(e[o],t);const s=p0(),r=new Array(n);return function(o,a){s.properties=o.getPropertiesInternal(),s.resolution=a;for(let l=0;l<n;++l)r[l]=i[l](s);return r}}function DR(e,t){const n=e.length,i=new Array(n);for(let s=0;s<n;++s){const r=e[s],o="filter"in r?Ti(r.filter,me,t):FR;let a;if(Array.isArray(r.style)){const l=r.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Du(r.style[c],t)}else a=[Du(r.style,t)];i[s]={filter:o,styles:a}}return function(s){const r=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(s)&&!(e[a].else&&o)){o=!0;for(const c of i[a].styles){const u=c(s);u&&r.push(u)}}}return r}}function Du(e,t){const n=fo(e,"",t),i=go(e,"",t),s=kR(e,t),r=NR(e,t),o=Ie(e,"z-index",t),a=new ji;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(i){const u=i(l);u&&(c=!1),a.setStroke(u)}if(s){const u=s(l);u&&(c=!1),a.setText(u)}if(r){const u=r(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function fo(e,t,n){const i=y0(e,t+"fill-color",n);if(!i)return null;const s=new nf;return function(r){const o=i(r);return o==="none"?null:(s.setColor(o),s)}}function go(e,t,n){const i=Ie(e,t+"stroke-width",n),s=y0(e,t+"stroke-color",n);if(!i&&!s)return null;const r=ci(e,t+"stroke-line-cap",n),o=ci(e,t+"stroke-line-join",n),a=x0(e,t+"stroke-line-dash",n),l=Ie(e,t+"stroke-line-dash-offset",n),c=Ie(e,t+"stroke-miter-limit",n),u=new af;return function(h){if(s){const f=s(h);if(f==="none")return null;u.setColor(f)}if(i&&u.setWidth(i(h)),r){const f=r(h);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(f)}if(o){const f=o(h);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(f)}return a&&u.setLineDash(a(h)),l&&u.setLineDashOffset(l(h)),c&&u.setMiterLimit(c(h)),u}}function kR(e,t){const n="text-",i=ci(e,n+"value",t);if(!i)return null;const s=fo(e,n,t),r=fo(e,n+"background-",t),o=go(e,n,t),a=go(e,n+"background-",t),l=ci(e,n+"font",t),c=Ie(e,n+"max-angle",t),u=Ie(e,n+"offset-x",t),h=Ie(e,n+"offset-y",t),f=mo(e,n+"overflow",t),d=ci(e,n+"placement",t),g=Ie(e,n+"repeat",t),m=Kl(e,n+"scale",t),p=mo(e,n+"rotate-with-view",t),y=Ie(e,n+"rotation",t),x=ci(e,n+"align",t),E=ci(e,n+"justify",t),w=ci(e,n+"baseline",t),S=x0(e,n+"padding",t),C=new VS({});return function(I){if(C.setText(i(I)),s&&C.setFill(s(I)),r&&C.setBackgroundFill(r(I)),o&&C.setStroke(o(I)),a&&C.setBackgroundStroke(a(I)),l&&C.setFont(l(I)),c&&C.setMaxAngle(c(I)),u&&C.setOffsetX(u(I)),h&&C.setOffsetY(h(I)),f&&C.setOverflow(f(I)),d){const L=d(I);if(L!=="point"&&L!=="line")throw new Error("Expected point or line for text-placement");C.setPlacement(L)}if(g&&C.setRepeat(g(I)),m&&C.setScale(m(I)),p&&C.setRotateWithView(p(I)),y&&C.setRotation(y(I)),x){const L=x(I);if(L!=="left"&&L!=="center"&&L!=="right"&&L!=="end"&&L!=="start")throw new Error("Expected left, right, center, start, or end for text-align");C.setTextAlign(L)}if(E){const L=E(I);if(L!=="left"&&L!=="right"&&L!=="center")throw new Error("Expected left, right, or center for text-justify");C.setJustify(L)}if(w){const L=w(I);if(L!=="bottom"&&L!=="top"&&L!=="middle"&&L!=="alphabetic"&&L!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");C.setTextBaseline(L)}return S&&C.setPadding(S(I)),C}}function NR(e,t){return"icon-src"in e?GR(e,t):"shape-points"in e?UR(e,t):"circle-radius"in e?$R(e,t):null}function GR(e,t){const n="icon-",i=n+"src",s=v0(e[i],i),r=il(e,n+"anchor",t),o=Kl(e,n+"scale",t),a=Ie(e,n+"opacity",t),l=il(e,n+"displacement",t),c=Ie(e,n+"rotation",t),u=mo(e,n+"rotate-with-view",t),h=Tg(e,n+"anchor-origin"),f=Cg(e,n+"anchor-x-units"),d=Cg(e,n+"anchor-y-units"),g=VR(e,n+"color"),m=zR(e,n+"cross-origin"),p=YR(e,n+"offset"),y=Tg(e,n+"offset-origin"),x=Ms(e,n+"width"),E=Ms(e,n+"height"),w=WR(e,n+"size"),S=gf(e,n+"declutter"),C=new el({src:s,anchorOrigin:h,anchorXUnits:f,anchorYUnits:d,color:g,crossOrigin:m,offset:p,offsetOrigin:y,height:E,width:x,size:w,declutterMode:S});return function(I){return a&&C.setOpacity(a(I)),l&&C.setDisplacement(l(I)),c&&C.setRotation(c(I)),u&&C.setRotateWithView(u(I)),o&&C.setScale(o(I)),r&&C.setAnchor(r(I)),C}}function UR(e,t){const n="shape-",i=n+"points",s=w0(e[i],i),r=fo(e,n,t),o=go(e,n,t),a=Kl(e,n+"scale",t),l=il(e,n+"displacement",t),c=Ie(e,n+"rotation",t),u=mo(e,n+"rotate-with-view",t),h=Ms(e,n+"radius"),f=Ms(e,n+"radius1"),d=Ms(e,n+"radius2"),g=Ms(e,n+"angle"),m=gf(e,n+"declutter-mode"),p=new a0({points:s,radius:h,radius1:f,radius2:d,angle:g,declutterMode:m});return function(y){return r&&p.setFill(r(y)),o&&p.setStroke(o(y)),l&&p.setDisplacement(l(y)),c&&p.setRotation(c(y)),u&&p.setRotateWithView(u(y)),a&&p.setScale(a(y)),p}}function $R(e,t){const n="circle-",i=fo(e,n,t),s=go(e,n,t),r=Ie(e,n+"radius",t),o=Kl(e,n+"scale",t),a=il(e,n+"displacement",t),l=Ie(e,n+"rotation",t),c=mo(e,n+"rotate-with-view",t),u=gf(e,n+"declutter-mode"),h=new l0({radius:5,declutterMode:u});return function(f){return r&&h.setRadius(r(f)),i&&h.setFill(i(f)),s&&h.setStroke(s(f)),a&&h.setDisplacement(a(f)),l&&h.setRotation(l(f)),c&&h.setRotateWithView(c(f)),o&&h.setScale(o(f)),h}}function Ie(e,t,n){if(!(t in e))return;const i=Ti(e[t],pt,n);return function(s){return w0(i(s),t)}}function ci(e,t,n){if(!(t in e))return null;const i=Ti(e[t],Qs,n);return function(s){return v0(i(s),t)}}function mo(e,t,n){if(!(t in e))return null;const i=Ti(e[t],me,n);return function(s){const r=i(s);if(typeof r!="boolean")throw new Error(`Expected a boolean for ${t}`);return r}}function y0(e,t,n){if(!(t in e))return null;const i=Ti(e[t],df|Qs,n);return function(s){return E0(i(s),t)}}function x0(e,t,n){if(!(t in e))return null;const i=Ti(e[t],bo,n);return function(s){return Mo(i(s),t)}}function il(e,t,n){if(!(t in e))return null;const i=Ti(e[t],bo,n);return function(s){const r=Mo(i(s),t);if(r.length!==2)throw new Error(`Expected two numbers for ${t}`);return r}}function Kl(e,t,n){if(!(t in e))return null;const i=Ti(e[t],bo|pt,n);return function(s){return XR(i(s),t)}}function Ms(e,t){const n=e[t];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}}function WR(e,t){const n=e[t];if(n!==void 0){if(typeof n=="number")return Pe(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${t}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return n}}function zR(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}}function Tg(e,t){const n=e[t];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function Cg(e,t){const n=e[t];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return n}}function YR(e,t){const n=e[t];if(n!==void 0)return Mo(n,t)}function gf(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function VR(e,t){const n=e[t];if(n!==void 0)return E0(n,t)}function Mo(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const n=e.length;for(let i=0;i<n;++i)if(typeof e[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function v0(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function w0(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function E0(e,t){if(typeof e=="string")return e;const n=Mo(e,t),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return n}function XR(e,t){if(typeof e=="number")return e;const n=Mo(e,t);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return n}const Sg={RENDER_ORDER:"renderOrder"};class HR extends Xl{constructor(t){t=t||{};const n=Object.assign({},t);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Sg.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new ff(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(Sg.RENDER_ORDER,t)}setStyle(t){this.style_=BR(t),this.styleFunction_=t===null?void 0:WS(this.style_),this.changed()}}function BR(e){if(e===void 0)return zS;if(!e)return null;if(typeof e=="function"||e instanceof ji)return e;if(!Array.isArray(e))return Eg([e]);if(e.length===0)return[];const t=e.length,n=e[0];if(n instanceof ji){const s=new Array(t);for(let r=0;r<t;++r){const o=e[r];if(!(o instanceof ji))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in n){const s=new Array(t);for(let r=0;r<t;++r){const o=e[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return PR(s)}return Eg(e)}const ZR=HR;class jR extends hf{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,s=t.viewState,r=s.resolution,o=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(n.extent!==void 0&&(l=ks(l,Dn(n.extent,s.projection))),!a[Qt.ANIMATING]&&!a[Qt.INTERACTING]&&!hr(l))if(o){const c=s.projection,u=o.getImage(l,r,i,c);u&&(this.loadImage(u)?this.image_=u:u.getState()===mt.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),s=jt(n.pixelToCoordinateTransform,t.slice()),r=i.getExtent();if(r&&!Eo(r,s))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=kt(o),c=Math.floor(a.width*((s[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=ke(o),h=Math.floor(a.height*((o[3]-s[1])/u));return h<0||h>=a.height?null:this.getImageData(a,c,h)}renderFrame(t,n){const i=this.image_,s=i.getExtent(),r=i.getResolution(),[o,a]=Array.isArray(r)?r:[r,r],l=i.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],u=t.pixelRatio,h=t.viewState,f=h.center,d=h.resolution,g=u*o/(d*l),m=u*a/(d*l),p=t.extent,y=h.resolution,x=h.rotation,E=Math.round(kt(p)/y*u),w=Math.round(ke(p)/y*u);un(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,x,-E/2,-w/2),Gl(this.inversePixelTransform,this.pixelTransform);const S=Oh(this.pixelTransform);this.useContainer(n,S,this.getBackground(t));const C=this.context,I=C.canvas;I.width!=E||I.height!=w?(I.width=E,I.height=w):this.containerReused||C.clearRect(0,0,E,w);let L=!1,B=!0;if(c.extent){const ct=Dn(c.extent,h.projection);B=ve(ct,t.extent),L=B&&!fi(ct,t.extent),L&&this.clipUnrotated(C,t,ct)}const F=i.getImage(),N=un(this.tempTransform,E/2,w/2,g,m,0,l*(s[0]-f[0])/o,l*(f[1]-s[3])/a);this.renderedResolution=a*u/l;const j=F.width*N[0],K=F.height*N[3];if(this.getLayer().getSource().getInterpolate()||(C.imageSmoothingEnabled=!1),this.preRender(C,t),B&&j>=.5&&K>=.5){const ct=N[4],X=N[5],V=c.opacity;let D;V!==1&&(D=C.globalAlpha,C.globalAlpha=V),C.drawImage(F,0,0,+F.width,+F.height,ct,X,j,K),V!==1&&(C.globalAlpha=D)}return this.postRender(C,t),L&&C.restore(),C.imageSmoothingEnabled=!0,S!==I.style.transform&&(I.style.transform=S),this.container}}const KR=jR,Oo={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},aa=[Oo.FILL],mi=[Oo.STROKE],Ui=[Oo.BEGIN_PATH],Rg=[Oo.CLOSE_PATH],rt=Oo;class qR{drawCustom(t,n,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,n){}drawFeature(t,n){}drawGeometryCollection(t,n){}drawLineString(t,n){}drawMultiLineString(t,n){}drawMultiPoint(t,n){}drawMultiPolygon(t,n){}drawPoint(t,n){}drawPolygon(t,n){}drawText(t,n){}setFillStrokeStyle(t,n){}setImageStyle(t,n){}setTextStyle(t,n){}}const T0=qR;class JR extends T0{constructor(t,n,i,s){super(),this.tolerance=t,this.maxExtent=n,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})}appendFlatPointCoordinates(t,n){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=t.length;a<l;a+=n)s[0]=t[a],s[1]=t[a+1],Eo(i,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(t,n,i,s,r,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=s);let u=t[n],h=t[n+1];const f=this.tmpCoordinate_;let d=!0,g,m,p;for(g=n+s;g<i;g+=s)f[0]=t[g],f[1]=t[g+1],p=mu(c,f),p!==m?(d&&(a[l++]=u,a[l++]=h,d=!1),a[l++]=f[0],a[l++]=f[1]):p===oe.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],d=!1):d=!0,u=f[0],h=f[1],m=p;return(r&&d||g===n+s)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(t,n,i,s,r){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(t,n,l,s,!1,!1);r.push(c),n=l}return n}drawCustom(t,n,i,s){this.beginGeometry(t,n);const r=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,c,u,h,f;switch(r){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),h=[];const d=t.getEndss();f=0;for(let g=0,m=d.length;g<m;++g){const p=[];f=this.drawCustomCoordinates_(l,f,d[g],o,p),h.push(p)}this.instructions.push([rt.CUSTOM,a,h,t,i,Eu]),this.hitDetectionInstructions.push([rt.CUSTOM,a,h,t,s||i,Eu]);break;case"Polygon":case"MultiLineString":u=[],l=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(l,0,t.getEnds(),o,u),this.instructions.push([rt.CUSTOM,a,u,t,i,oo]),this.hitDetectionInstructions.push([rt.CUSTOM,a,u,t,s||i,oo]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([rt.CUSTOM,a,c,t,i,di]),this.hitDetectionInstructions.push([rt.CUSTOM,a,c,t,s||i,di]);break;case"MultiPoint":l=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([rt.CUSTOM,a,c,t,i,di]),this.hitDetectionInstructions.push([rt.CUSTOM,a,c,t,s||i,di]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([rt.CUSTOM,a,c,t,i]),this.hitDetectionInstructions.push([rt.CUSTOM,a,c,t,s||i]);break}this.endGeometry(n)}beginGeometry(t,n){this.beginGeometryInstruction1_=[rt.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[rt.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let n;const i=t.length;let s,r,o=-1;for(n=0;n<i;++n)s=t[n],r=s[0],r==rt.END_GEOMETRY?o=n:r==rt.BEGIN_GEOMETRY&&(s[2]=n,gE(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(t,n){const i=this.state;if(t){const s=t.getColor();i.fillStyle=vn(s||Re)}else i.fillStyle=void 0;if(n){const s=n.getColor();i.strokeStyle=vn(s||co);const r=n.getLineCap();i.lineCap=r!==void 0?r:qs;const o=n.getLineDash();i.lineDash=o?o.slice():Wn;const a=n.getLineDashOffset();i.lineDashOffset=a||zn;const l=n.getLineJoin();i.lineJoin=l!==void 0?l:Js;const c=n.getWidth();i.lineWidth=c!==void 0?c:ho;const u=n.getMiterLimit();i.miterLimit=u!==void 0?u:lo,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const n=t.fillStyle,i=[rt.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[rt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,n){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,n){const i=t.strokeStyle,s=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||r!=t.currentLineDash&&!Ei(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[rt.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=_p(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Ah(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Ao=JR;class QR extends Ao{constructor(t,n,i,s){super(t,n,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([rt.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([rt.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([rt.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([rt.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,n){const i=t.getAnchor(),s=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}}const tI=QR;class eI extends Ao{constructor(t,n,i,s){super(t,n,i,s)}drawFlatCoordinates_(t,n,i,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,s,!1,!1),a=[rt.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,n){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([rt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Wn,zn],Ui);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(mi),this.endGeometry(n)}drawMultiLineString(t,n){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([rt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Wn,zn],Ui);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(mi),this.endGeometry(n)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(mi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(mi),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Ui)}}const nI=eI;class iI extends Ao{constructor(t,n,i,s){super(t,n,i,s)}drawFlatCoordinatess_(t,n,i,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,l=i.length;this.instructions.push(Ui),this.hitDetectionInstructions.push(Ui);for(let c=0;c<l;++c){const u=i[c],h=this.coordinates.length,f=this.appendFlatLineCoordinates(t,n,u,s,!0,!a),d=[rt.MOVE_TO_LINE_TO,h,f];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(Rg),this.hitDetectionInstructions.push(Rg)),n=u}return o&&(this.instructions.push(aa),this.hitDetectionInstructions.push(aa)),a&&(this.instructions.push(mi),this.hitDetectionInstructions.push(mi)),n}drawCircle(t,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([rt.SET_FILL_STYLE,Re]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([rt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Wn,zn]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[rt.CIRCLE,l];this.instructions.push(Ui,c),this.hitDetectionInstructions.push(Ui,c),i.fillStyle!==void 0&&(this.instructions.push(aa),this.hitDetectionInstructions.push(aa)),i.strokeStyle!==void 0&&(this.instructions.push(mi),this.hitDetectionInstructions.push(mi)),this.endGeometry(n)}drawPolygon(t,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([rt.SET_FILL_STYLE,Re]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([rt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Wn,zn]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(n)}drawMultiPolygon(t,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([rt.SET_FILL_STYLE,Re]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([rt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Wn,zn]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const n=this.coordinates;for(let i=0,s=n.length;i<s;++i)n[i]=Ai(n[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const Ig=iI;function sI(e,t,n,i,s){const r=[];let o=n,a=0,l=t.slice(n,2);for(;a<e&&o+s<i;){const[c,u]=l.slice(-2),h=t[o+s],f=t[o+s+1],d=Math.sqrt((h-c)*(h-c)+(f-u)*(f-u));if(a+=d,a>=e){const g=(e-a+d)/d,m=Fe(c,h,g),p=Fe(u,f,g);l.push(m,p),r.push(l),l=[m,p],a==e&&(o+=s),a=0}else if(a<e)l.push(t[o+s],t[o+s+1]),o+=s;else{const g=d-a,m=Fe(c,h,g/d),p=Fe(u,f,g/d);l.push(m,p),r.push(l),l=[m,p],a=0,o+=s}}return a>0&&r.push(l),r}function rI(e,t,n,i,s){let r=n,o=n,a=0,l=0,c=n,u,h,f,d,g,m,p,y,x,E;for(h=n;h<i;h+=s){const w=t[h],S=t[h+1];g!==void 0&&(x=w-g,E=S-m,d=Math.sqrt(x*x+E*E),p!==void 0&&(l+=f,u=Math.acos((p*x+y*E)/(f*d)),u>e&&(l>a&&(a=l,r=c,o=h),l=0,c=h-s)),f=d,p=x,y=E),g=w,m=S}return l+=d,l>a?[c,h]:[r,o]}const sl={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class oI extends Ao{constructor(t,n,i,s){super(t,n,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Re]={fillStyle:Re},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,n){const i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!s)return;const o=this.coordinates;let a=o.length;const l=t.getType();let c=null,u=t.getStride();if(r.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!ve(this.getBufferedMaxExtent(),t.getExtent()))return;let h;if(c=t.getFlatCoordinates(),l=="LineString")h=[c.length];else if(l=="MultiLineString")h=t.getEnds();else if(l=="Polygon")h=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=t.getEndss();h=[];for(let p=0,y=m.length;p<y;++p)h.push(m[p][0])}this.beginGeometry(t,n);const f=r.repeat,d=f?void 0:r.textAlign;let g=0;for(let m=0,p=h.length;m<p;++m){let y;f?y=sI(f*this.resolution,c,g,h[m],u):y=[c.slice(g,h[m])];for(let x=0,E=y.length;x<E;++x){const w=y[x];let S=0,C=w.length;if(d==null){const L=rI(r.maxAngle,w,0,w.length,2);S=L[0],C=L[1]}for(let L=S;L<C;L+=u)o.push(w[L],w[L+1]);const I=o.length;g=h[m],this.drawChars_(a,I),a=I}}this.endGeometry(n)}else{let h=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),u=2;break;case"Polygon":c=t.getFlatInteriorPoint(),r.overflow||h.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const y=t.getFlatInteriorPoints();c=[];for(let x=0,E=y.length;x<E;x+=3)r.overflow||h.push(y[x+2]/this.resolution),c.push(y[x],y[x+1]);if(c.length===0)return;u=2;break}const f=this.appendFlatPointCoordinates(c,u);if(f===a)return;if(h&&(f-a)/2!==c.length/u){let y=a/2;h=h.filter((x,E)=>{const w=o[(y+E)*2]===c[E*u]&&o[(y+E)*2+1]===c[E*u+1];return w||--y,w})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&this.updateFillStyle(this.state,this.createFill),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);let d=r.padding;if(d!=Gi&&(r.scale[0]<0||r.scale[1]<0)){let y=r.padding[0],x=r.padding[1],E=r.padding[2],w=r.padding[3];r.scale[0]<0&&(x=-x,w=-w),r.scale[1]<0&&(y=-y,E=-E),d=[y,x,E,w]}const g=this.pixelRatio;this.instructions.push([rt.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,d==Gi?Gi:d.map(function(y){return y*g}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const m=1/g,p=this.state.fillStyle;r.backgroundFill&&(this.state.fillStyle=Re,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([rt.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,d,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Re:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),r.backgroundFill&&(this.state.fillStyle=p,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:n.font,textAlign:n.textAlign||uo,justify:n.justify,textBaseline:n.textBaseline||Ba,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,n){const i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=sl[s.textBaseline],u=this.textOffsetY_*l,h=this.text_,f=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([rt.DRAW_CHARS,t,n,c,s.overflow,a,s.maxAngle,l,u,r,f*l,h,o,1]),this.hitDetectionInstructions.push([rt.DRAW_CHARS,t,n,c,s.overflow,a&&Re,s.maxAngle,l,u,r,f*l,h,o,1/l])}setTextStyle(t,n){let i,s,r;if(!t)this.text_="";else{const o=t.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=vn(o.getColor()||Re)):(s=null,this.textFillState_=s);const a=t.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const g=a.getLineDash(),m=a.getLineDashOffset(),p=a.getWidth(),y=a.getMiterLimit();r.lineCap=a.getLineCap()||qs,r.lineDash=g?g.slice():Wn,r.lineDashOffset=m===void 0?zn:m,r.lineJoin=a.getLineJoin()||Js,r.lineWidth=p===void 0?ho:p,r.miterLimit=y===void 0?lo:y,r.strokeStyle=vn(a.getColor()||co)}i=this.textState_;const l=t.getFont()||Bp;iC(l);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Ba,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Gi,i.scale=c===void 0?[1,1]:c;const u=t.getOffsetX(),h=t.getOffsetY(),f=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=f===void 0?!1:f,this.textRotation_=d===void 0?0:d,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:Ot(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+Ot(s.fillStyle):""}this.declutterImageWithText_=n}}const aI={Circle:Ig,Default:Ao,Image:tI,LineString:nI,Polygon:Ig,Text:oI};class lI{constructor(t,n,i,s){this.tolerance_=t,this.maxExtent_=n,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const n in this.buildersByZIndex_){t[n]=t[n]||{};const i=this.buildersByZIndex_[n];for(const s in i){const r=i[s].finish();t[n][s]=r}}return t}getBuilder(t,n){const i=t!==void 0?t.toString():"0";let s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let r=s[n];if(r===void 0){const o=aI[n];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[n]=r}return r}}const bg=lI;function cI(e,t,n,i,s,r,o,a,l,c,u,h){let f=e[t],d=e[t+1],g=0,m=0,p=0,y=0;function x(){g=f,m=d,t+=i,f=e[t],d=e[t+1],y+=p,p=Math.sqrt((f-g)*(f-g)+(d-m)*(d-m))}do x();while(t<n-i&&y+p<r);let E=p===0?0:(r-y)/p;const w=Fe(g,f,E),S=Fe(m,d,E),C=t-i,I=y,L=r+a*l(c,s,u);for(;t<n-i&&y+p<L;)x();E=p===0?0:(L-y)/p;const B=Fe(g,f,E),F=Fe(m,d,E);let N;if(h){const V=[w,S,B,F];Fp(V,0,4,2,h,V,V),N=V[0]>V[2]}else N=w>B;const j=Math.PI,K=[],ct=C+i===t;t=C,p=0,y=I,f=e[t],d=e[t+1];let X;if(ct){x(),X=Math.atan2(d-m,f-g),N&&(X+=X>0?-j:j);const V=(B+w)/2,D=(F+S)/2;return K[0]=[V,D,(L-r)/2,X,s],K}s=s.replace(/\n/g," ");for(let V=0,D=s.length;V<D;){x();let H=Math.atan2(d-m,f-g);if(N&&(H+=H>0?-j:j),X!==void 0){let gt=H-X;if(gt+=gt>j?-2*j:gt<-j?2*j:0,Math.abs(gt)>o)return null}X=H;const st=V;let dt=0;for(;V<D;++V){const gt=N?D-V-1:V,vt=a*l(c,s[gt],u);if(t+i<n&&y+p<r+dt+vt/2)break;dt+=vt}if(V===st)continue;const bt=N?s.substring(D-st,D-V):s.substring(st,V);E=p===0?0:(r+dt/2-y)/p;const k=Fe(g,f,E),Xt=Fe(m,d,E);K.push([k,Xt,dt/2,H,bt]),r+=dt}return K}const ys=He(),Qn=[],bn=[],Mn=[],ti=[];function Mg(e){return e[3].declutterBox}const Og=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Lc(e,t){return t==="start"?t=Og.test(e)?"right":"left":t==="end"&&(t=Og.test(e)?"left":"right"),sl[t]}function uI(e,t,n){return n>0&&e.push(`
`,""),e.push(t,""),e}class hI{constructor(t,n,i,s){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=ln(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,n,i,s){const r=t+n+i+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=Array.isArray(t),f=l.justify?sl[l.justify]:Lc(Array.isArray(t)?t[0]:t,l.textAlign||uo),d=s&&o.lineWidth?o.lineWidth:0,g=h?t:t.split(`
`).reduce(uI,[]),{width:m,height:p,widths:y,heights:x,lineWidths:E}=rC(l,g),w=m+d,S=[],C=(w+2)*u[0],I=(p+d)*u[1],L={width:C<0?Math.floor(C):Math.ceil(C),height:I<0?Math.floor(I):Math.ceil(I),contextInstructions:S};(u[0]!=1||u[1]!=1)&&S.push("scale",u),s&&(S.push("strokeStyle",o.strokeStyle),S.push("lineWidth",d),S.push("lineCap",o.lineCap),S.push("lineJoin",o.lineJoin),S.push("miterLimit",o.miterLimit),S.push("setLineDash",[o.lineDash]),S.push("lineDashOffset",o.lineDashOffset)),i&&S.push("fillStyle",a.fillStyle),S.push("textBaseline","middle"),S.push("textAlign","center");const B=.5-f;let F=f*w+B*d;const N=[],j=[];let K=0,ct=0,X=0,V=0,D;for(let H=0,st=g.length;H<st;H+=2){const dt=g[H];if(dt===`
`){ct+=K,K=0,F=f*w+B*d,++V;continue}const bt=g[H+1]||l.font;bt!==D&&(s&&N.push("font",bt),i&&j.push("font",bt),D=bt),K=Math.max(K,x[X]);const k=[dt,F+B*y[X]+f*(y[X]-E[V]),.5*(d+K)+ct];F+=y[X],s&&N.push("strokeText",k),i&&j.push("fillText",k),++X}return Array.prototype.push.apply(S,N),Array.prototype.push.apply(S,j),this.labels_[r]=L,L}replayTextBackground_(t,n,i,s,r,o,a){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,r),t.lineTo.apply(t,n),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,n,i,s,r,o,a,l,c,u,h,f,d,g,m,p){a*=f[0],l*=f[1];let y=i-a,x=s-l;const E=r+c>t?t-c:r,w=o+u>n?n-u:o,S=g[3]+E*f[0]+g[1],C=g[0]+w*f[1]+g[2],I=y-g[3],L=x-g[0];(m||h!==0)&&(Qn[0]=I,ti[0]=I,Qn[1]=L,bn[1]=L,bn[0]=I+S,Mn[0]=bn[0],Mn[1]=L+C,ti[1]=Mn[1]);let B;return h!==0?(B=un(ln(),i,s,1,1,h,-i,-s),jt(B,Qn),jt(B,bn),jt(B,Mn),jt(B,ti),wi(Math.min(Qn[0],bn[0],Mn[0],ti[0]),Math.min(Qn[1],bn[1],Mn[1],ti[1]),Math.max(Qn[0],bn[0],Mn[0],ti[0]),Math.max(Qn[1],bn[1],Mn[1],ti[1]),ys)):wi(Math.min(I,I+S),Math.min(L,L+C),Math.max(I,I+S),Math.max(L,L+C),ys),d&&(y=Math.round(y),x=Math.round(x)),{drawImageX:y,drawImageY:x,drawImageW:E,drawImageH:w,originX:c,originY:u,declutterBox:{minX:ys[0],minY:ys[1],maxX:ys[2],maxY:ys[3],value:p},canvasTransform:B,scale:f}}replayImageOrLabel_(t,n,i,s,r,o,a){const l=!!(o||a),c=s.declutterBox,u=t.canvas,h=a?a[2]*s.scale[0]/2:0;return c.minX-h<=u.width/n&&c.maxX+h>=0&&c.minY-h<=u.height/n&&c.maxY+h>=0&&(l&&this.replayTextBackground_(t,Qn,bn,Mn,ti,o,a),oC(t,s.canvasTransform,r,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){if(this.alignFill_){const n=jt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.lineDashOffset=n[7],t.setLineDash(n[6])}drawLabelWithPointPlacement_(t,n,i,s){const r=this.textStates[n],o=this.createLabel(t,n,s,i),a=this.strokeStates[i],l=this.pixelRatio,c=Lc(Array.isArray(t)?t[0]:t,r.textAlign||uo),u=sl[r.textBaseline||Ba],h=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*r.scale[0],d=c*f+2*(.5-c)*h,g=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:d,anchorY:g}}execute_(t,n,i,s,r,o,a,l){let c;this.pixelCoordinates_&&Ei(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Zi(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),IE(this.renderedTransform_,i));let u=0;const h=s.length;let f=0,d,g,m,p,y,x,E,w,S,C,I,L,B=0,F=0,N=null,j=null;const K=this.coordinateCache_,ct=this.viewRotation_,X=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,V={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ct},D=this.instructions!=s||this.overlaps?0:200;let H,st,dt,bt;for(;u<h;){const k=s[u];switch(k[0]){case rt.BEGIN_GEOMETRY:H=k[1],bt=k[3],H.getGeometry()?a!==void 0&&!ve(a,bt.getExtent())?u=k[2]+1:++u:u=k[2];break;case rt.BEGIN_PATH:B>D&&(this.fill_(t),B=0),F>D&&(t.stroke(),F=0),!B&&!F&&(t.beginPath(),p=NaN,y=NaN),++u;break;case rt.CIRCLE:f=k[1];const gt=c[f],vt=c[f+1],Nt=c[f+2],O=c[f+3],z=Nt-gt,R=O-vt,G=Math.sqrt(z*z+R*R);t.moveTo(gt+G,vt),t.arc(gt,vt,G,0,2*Math.PI,!0),++u;break;case rt.CLOSE_PATH:t.closePath(),++u;break;case rt.CUSTOM:f=k[1],d=k[2];const Q=k[3],_=k[4],v=k.length==6?k[5]:void 0;V.geometry=Q,V.feature=H,u in K||(K[u]=[]);const T=K[u];v?v(c,f,d,2,T):(T[0]=c[f],T[1]=c[f+1],T.length=2),_(T,V),++u;break;case rt.DRAW_IMAGE:f=k[1],d=k[2],w=k[3],g=k[4],m=k[5];let b=k[6];const M=k[7],P=k[8],Z=k[9],$=k[10];let Y=k[11];const U=k[12];let tt=k[13];const J=k[14],et=k[15];if(!w&&k.length>=20){S=k[19],C=k[20],I=k[21],L=k[22];const Ae=this.drawLabelWithPointPlacement_(S,C,I,L);w=Ae.label,k[3]=w;const ds=k[23];g=(Ae.anchorX-ds)*this.pixelRatio,k[4]=g;const Ge=k[24];m=(Ae.anchorY-Ge)*this.pixelRatio,k[5]=m,b=w.height,k[6]=b,tt=w.width,k[13]=tt}let nt;k.length>25&&(nt=k[25]);let ut,wt,_t;k.length>17?(ut=k[16],wt=k[17],_t=k[18]):(ut=Gi,wt=!1,_t=!1),$&&X?Y+=ct:!$&&!X&&(Y-=ct);let Gt=0;for(;f<d;f+=2){if(nt&&nt[Gt++]<tt/this.pixelRatio)continue;const Ae=this.calculateImageOrLabelDimensions_(w.width,w.height,c[f],c[f+1],tt,b,g,m,P,Z,Y,U,r,ut,wt||_t,H),ds=[t,n,w,Ae,M,wt?N:null,_t?j:null];if(l){if(J==="none")continue;if(J==="obstacle"){l.insert(Ae.declutterBox);continue}else{let Ge,Sn;if(et){const Le=d-f;if(!et[Le]){et[Le]=ds;continue}if(Ge=et[Le],delete et[Le],Sn=Mg(Ge),l.collides(Sn))continue}if(l.collides(Ae.declutterBox))continue;Ge&&(l.insert(Sn),this.replayImageOrLabel_.apply(this,Ge)),l.insert(Ae.declutterBox)}}this.replayImageOrLabel_.apply(this,ds)}++u;break;case rt.DRAW_CHARS:const fe=k[1],Ht=k[2],us=k[3],Ci=k[4];L=k[5];const Wo=k[6],de=k[7],Oe=k[8];I=k[9];const hs=k[10];S=k[11],C=k[12];const Yf=[k[13],k[13]],hc=this.textStates[C],xr=hc.font,vr=[hc.scale[0]*de,hc.scale[1]*de];let wr;xr in this.widths_?wr=this.widths_[xr]:(wr={},this.widths_[xr]=wr);const Vf=s0(c,fe,Ht,2),Xf=Math.abs(vr[0])*hg(xr,S,wr);if(Ci||Xf<=Vf){const Ae=this.textStates[C].textAlign,ds=(Vf-Xf)*Lc(S,Ae),Ge=cI(c,fe,Ht,2,S,ds,Wo,Math.abs(vr[0]),hg,xr,wr,X?0:this.viewRotation_);t:if(Ge){const Sn=[];let Le,zo,Yo,Te,Ue;if(I)for(Le=0,zo=Ge.length;Le<zo;++Le){Ue=Ge[Le],Yo=Ue[4],Te=this.createLabel(Yo,C,"",I),g=Ue[2]+(vr[0]<0?-hs:hs),m=us*Te.height+(.5-us)*2*hs*vr[1]/vr[0]-Oe;const Rn=this.calculateImageOrLabelDimensions_(Te.width,Te.height,Ue[0],Ue[1],Te.width,Te.height,g,m,0,0,Ue[3],Yf,!1,Gi,!1,H);if(l&&l.collides(Rn.declutterBox))break t;Sn.push([t,n,Te,Rn,1,null,null])}if(L)for(Le=0,zo=Ge.length;Le<zo;++Le){Ue=Ge[Le],Yo=Ue[4],Te=this.createLabel(Yo,C,L,""),g=Ue[2],m=us*Te.height-Oe;const Rn=this.calculateImageOrLabelDimensions_(Te.width,Te.height,Ue[0],Ue[1],Te.width,Te.height,g,m,0,0,Ue[3],Yf,!1,Gi,!1,H);if(l&&l.collides(Rn.declutterBox))break t;Sn.push([t,n,Te,Rn,1,null,null])}l&&l.load(Sn.map(Mg));for(let Rn=0,Ox=Sn.length;Rn<Ox;++Rn)this.replayImageOrLabel_.apply(this,Sn[Rn])}}++u;break;case rt.END_GEOMETRY:if(o!==void 0){H=k[1];const Ae=o(H,bt);if(Ae)return Ae}++u;break;case rt.FILL:D?B++:this.fill_(t),++u;break;case rt.MOVE_TO_LINE_TO:for(f=k[1],d=k[2],st=c[f],dt=c[f+1],x=st+.5|0,E=dt+.5|0,(x!==p||E!==y)&&(t.moveTo(st,dt),p=x,y=E),f+=2;f<d;f+=2)st=c[f],dt=c[f+1],x=st+.5|0,E=dt+.5|0,(f==d-2||x!==p||E!==y)&&(t.lineTo(st,dt),p=x,y=E);++u;break;case rt.SET_FILL_STYLE:N=k,this.alignFill_=k[2],B&&(this.fill_(t),B=0,F&&(t.stroke(),F=0)),t.fillStyle=k[1],++u;break;case rt.SET_STROKE_STYLE:j=k,F&&(t.stroke(),F=0),this.setStrokeStyle_(t,k),++u;break;case rt.STROKE:D?F++:t.stroke(),++u;break;default:++u;break}}B&&this.fill_(t),F&&t.stroke()}execute(t,n,i,s,r,o){this.viewRotation_=s,this.execute_(t,n,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,n,i,s,r){return this.viewRotation_=i,this.execute_(t,1,n,this.hitDetectionInstructions,!0,s,r)}}const fI=hI,Fc=["Polygon","Circle","LineString","Image","Text","Default"];class dI{constructor(t,n,i,s,r,o){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ln(),this.createExecutors_(r)}clip(t,n){const i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const n in t){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const s=t[n];for(const r in s){const o=s[r];i[r]=new fI(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let s=0,r=t.length;s<r;++s)if(t[s]in i)return!0}return!1}forEachFeatureAtCoordinate(t,n,i,s,r,o){s=Math.round(s);const a=s*2+1,l=un(this.hitDetectionTransform_,s+.5,s+.5,1/n,-1/n,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Ee(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=He(),Br(h,t),Ah(h,n*(this.renderBuffer_+s),h));const f=gI(s);let d;function g(S,C){const I=u.getImageData(0,0,a,a).data;for(let L=0,B=f.length;L<B;L++)if(I[f[L]]>0){if(!o||d!=="Image"&&d!=="Text"||o.includes(S)){const F=(f[L]-3)/4,N=s-F%a,j=s-(F/a|0),K=r(S,C,N*N+j*j);if(K)return K}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(xi);let p,y,x,E,w;for(p=m.length-1;p>=0;--p){const S=m[p].toString();for(x=this.executorsByZIndex_[S],y=Fc.length-1;y>=0;--y)if(d=Fc[y],E=x[d],E!==void 0&&(w=E.executeHitDetection(u,l,i,g,h),w))return w}}getClipCoords(t){const n=this.maxExtent_;if(!n)return null;const i=n[0],s=n[1],r=n[2],o=n[3],a=[i,s,i,o,r,o,r,s];return Zi(a,0,8,2,t,a),a}isEmpty(){return Zs(this.executorsByZIndex_)}execute(t,n,i,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(xi),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||Fc;let c,u,h,f,d,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(d=this.executorsByZIndex_[m],h=0,f=o.length;h<f;++h){const p=o[h];g=d[p],g!==void 0&&g.execute(t,n,i,s,r,a)}}this.maxExtent_&&t.restore()}}const Pc={};function gI(e){if(Pc[e]!==void 0)return Pc[e];const t=e*2+1,n=e*e,i=new Array(n+1);for(let r=0;r<=e;++r)for(let o=0;o<=e;++o){const a=r*r+o*o;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((e+r)*t+(e+o))*4+3),r>0&&l.push(((e-r)*t+(e+o))*4+3),o>0&&(l.push(((e+r)*t+(e-o))*4+3),r>0&&l.push(((e-r)*t+(e-o))*4+3))}const s=[];for(let r=0,o=i.length;r<o;++r)i[r]&&s.push(...i[r]);return Pc[e]=s,s}const Ag=dI;class mI extends T0{constructor(t,n,i,s,r,o,a){super(),this.context_=t,this.pixelRatio_=n,this.extent_=i,this.transform_=s,this.transformRotation_=s?zl(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ln()}drawImages_(t,n,i,s){if(!this.image_)return;const r=Zi(t,n,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=r.length;u<h;u+=2){const f=r[u]-this.imageAnchorX_,d=r[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=f+this.imageAnchorX_,m=d+this.imageAnchorY_;un(a,g,m,1,1,c,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,n,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Zi(t,n,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=s){const l=r[n]+this.textOffsetX_,c=r[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(t,n,i,s,r){const o=this.context_,a=Zi(t,n,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return r&&o.closePath(),i}drawRings_(t,n,i,s){for(let r=0,o=i.length;r<o;++r)n=this.moveToLineTo_(t,n,i[r],s,!0);return n}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ve(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=RT(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],s=n[3]-n[1],r=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(n[0],n[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,n){const i=n.getGeometryFunction()(t);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(t){const n=t.getGeometriesArray();for(let i=0,s=n.length;i<s;++i)this.drawGeometry(n[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ve(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getExtent();if(ve(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=t.getFlatCoordinates();let r=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ve(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ve(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const r=t.getEndss(),o=t.getStride();n.beginPath();for(let a=0,l=r.length;a<l;++a){const c=r[a];s=this.drawRings_(i,s,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(t){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),Ei(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset,n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const n=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:uo;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=s&&(i.textAlign=s,n.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=s,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,n){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:vn(i||Re)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),s=n.getLineCap(),r=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=r||Wn;this.strokeState_={lineCap:s!==void 0?s:qs,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||zn)*this.pixelRatio_,lineJoin:a!==void 0?a:Js,lineWidth:(l!==void 0?l:ho)*this.pixelRatio_,miterLimit:c!==void 0?c:lo,strokeStyle:vn(i||co)}}}setImageStyle(t){let n;if(!t||!(n=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(t){if(!t)this.text_="";else{const n=t.getFill();if(!n)this.textFillState_=null;else{const d=n.getColor();this.textFillState_={fillStyle:vn(d||Re)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const d=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),p=i.getLineDashOffset(),y=i.getLineJoin(),x=i.getWidth(),E=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:qs,lineDash:m||Wn,lineDashOffset:p||zn,lineJoin:y!==void 0?y:Js,lineWidth:x!==void 0?x:ho,miterLimit:E!==void 0?E:lo,strokeStyle:vn(d||co)}}const s=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),u=t.getText(),h=t.getTextAlign(),f=t.getTextBaseline();this.textState_={font:s!==void 0?s:Bp,textAlign:h!==void 0?h:uo,textBaseline:f!==void 0?f:Ba},this.text_=u!==void 0?Array.isArray(u)?u.reduce((d,g,m)=>d+=m%2?" ":g,""):u:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const _I=mI,yn=.5;function pI(e,t,n,i,s,r,o){const a=e[0]*yn,l=e[1]*yn,c=Ee(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,h=new _I(c,yn,s,null,o),f=n.length,d=Math.floor((256*256*256-1)/f),g={};for(let p=1;p<=f;++p){const y=n[p-1],x=y.getStyleFunction()||i;if(!x)continue;let E=x(y,r);if(!E)continue;Array.isArray(E)||(E=[E]);const S=(p*d).toString(16).padStart(7,"#00000");for(let C=0,I=E.length;C<I;++C){const L=E[C],B=L.getGeometryFunction()(y);if(!B||!ve(s,B.getExtent()))continue;const F=L.clone(),N=F.getFill();N&&N.setColor(S);const j=F.getStroke();j&&(j.setColor(S),j.setLineDash(null)),F.setText(void 0);const K=L.getImage();if(K){const D=K.getImageSize();if(!D)continue;const H=Ee(D[0],D[1],void 0,{alpha:!1}),st=H.canvas;H.fillStyle=S,H.fillRect(0,0,st.width,st.height),F.setImage(new el({img:st,anchor:K.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:K.getOrigin(),opacity:1,size:K.getSize(),scale:K.getScale(),rotation:K.getRotation(),rotateWithView:K.getRotateWithView()}))}const ct=F.getZIndex()||0;let X=g[ct];X||(X={},g[ct]=X,X.Polygon=[],X.Circle=[],X.LineString=[],X.Point=[]);const V=B.getType();if(V==="GeometryCollection"){const D=B.getGeometriesArrayRecursive();for(let H=0,st=D.length;H<st;++H){const dt=D[H];X[dt.getType().replace("Multi","")].push(dt,F)}}else X[V.replace("Multi","")].push(B,F)}}const m=Object.keys(g).map(Number).sort(xi);for(let p=0,y=m.length;p<y;++p){const x=g[m[p]];for(const E in x){const w=x[E];for(let S=0,C=w.length;S<C;S+=2){h.setStyle(w[S+1]);for(let I=0,L=t.length;I<L;++I)h.setTransform(t[I]),h.drawGeometry(w[S])}}}return c.getImageData(0,0,u.width,u.height)}function yI(e,t,n){const i=[];if(n){const s=Math.floor(Math.round(e[0])*yn),r=Math.floor(Math.round(e[1])*yn),o=(te(s,0,n.width-1)+te(r,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/t.length);u&&u%h===0&&i.push(t[u/h-1])}return i}const xI=.5,C0={Point:bI,LineString:SI,Polygon:OI,MultiPoint:MI,MultiLineString:RI,MultiPolygon:II,GeometryCollection:CI,Circle:EI};function vI(e,t){return parseInt(Ot(e),10)-parseInt(Ot(t),10)}function wI(e,t){const n=ku(e,t);return n*n}function ku(e,t){return xI*e/t}function EI(e,t,n,i,s){const r=n.getFill(),o=n.getStroke();if(r||o){const l=e.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(t,i)}const a=n.getText();if(a&&a.getText()){const l=(s||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function Lg(e,t,n,i,s,r,o){let a=!1;const l=n.getImage();if(l){const c=l.getImageState();c==mt.LOADED||c==mt.ERROR?l.unlistenImageChange(s):(c==mt.IDLE&&l.load(),l.listenImageChange(s),a=!0)}return TI(e,t,n,i,r,o),a}function TI(e,t,n,i,s,r){const o=n.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(i,s);if(n.getRenderer())S0(e,a,n,t);else{const c=C0[a.getType()];c(e,a,n,t,r)}}function S0(e,t,n,i){if(t.getType()=="GeometryCollection"){const r=t.getGeometries();for(let o=0,a=r.length;o<a;++o)S0(e,r[o],n,i);return}e.getBuilder(n.getZIndex(),"Default").drawCustom(t,i,n.getRenderer(),n.getHitDetectionRenderer())}function CI(e,t,n,i,s){const r=t.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const l=C0[r[o].getType()];l(e,r[o],n,i,s)}}function SI(e,t,n,i,s){const r=n.getStroke();if(r){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(s||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function RI(e,t,n,i,s){const r=n.getStroke();if(r){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(s||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function II(e,t,n,i,s){const r=n.getFill(),o=n.getStroke();if(o||r){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(s||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function bI(e,t,n,i,s){const r=n.getImage(),o=n.getText();let a;if(r){if(r.getImageState()!=mt.LOADED)return;let l=e;if(s){const u=r.getDeclutterMode();if(u!=="none")if(l=s,u==="obstacle"){const h=e.getBuilder(n.getZIndex(),"Image");h.setImageStyle(r,a),h.drawPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(r,a),c.drawPoint(t,i)}if(o&&o.getText()){let l=e;s&&(l=s);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function MI(e,t,n,i,s){const r=n.getImage(),o=n.getText();let a;if(r){if(r.getImageState()!=mt.LOADED)return;let l=e;if(s){const u=r.getDeclutterMode();if(u!=="none")if(l=s,u==="obstacle"){const h=e.getBuilder(n.getZIndex(),"Image");h.setImageStyle(r,a),h.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(r,a),c.drawMultiPoint(t,i)}if(o&&o.getText()){let l=e;s&&(l=s);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function OI(e,t,n,i,s){const r=n.getFill(),o=n.getStroke();if(r||o){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(s||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}class AI extends hf{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=He(),this.wrappedRenderedExtent_=He(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,n,i){const s=n.extent,r=n.viewState,o=r.center,a=r.resolution,l=r.projection,c=r.rotation,u=l.getExtent(),h=this.getLayer().getSource(),f=n.pixelRatio,d=n.viewHints,g=!(d[Qt.ANIMATING]||d[Qt.INTERACTING]),m=this.compositionContext_,p=Math.round(n.size[0]*f),y=Math.round(n.size[1]*f),x=h.getWrapX()&&l.canWrapX(),E=x?kt(u):null,w=x?Math.ceil((s[2]-u[2])/E)+1:1;let S=x?Math.floor((s[0]-u[0])/E):0;do{const C=this.getRenderTransform(o,a,c,f,p,y,S*E);t.execute(m,1,C,c,g,void 0,i)}while(++S<w)}setupCompositionContext_(){if(this.opacity_!==1){const t=Ee(this.context.canvas.width,this.context.canvas.height,pg);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Hl(this.compositionContext_),pg.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,n){const i=t.pixelRatio,s=t.layerStatesArray[t.layerIndex];bE(this.pixelTransform,1/i,1/i),Gl(this.inversePixelTransform,this.pixelTransform);const r=Oh(this.pixelTransform);this.useContainer(n,r,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let u=l&&!l.isEmpty()||c&&!c.isEmpty();if(!u&&!(this.getLayer().hasListener(wn.PRERENDER)||this.getLayer().hasListener(wn.POSTRENDER)))return null;const h=Math.round(t.size[0]*i),f=Math.round(t.size[1]*i);a.width!=h||a.height!=f?(a.width=h,a.height=f,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,h,f),this.preRender(o,t);const d=t.viewState;d.projection,this.opacity_=s.opacity,this.setupCompositionContext_();let g=!1;if(u&&s.extent&&this.clipping){const m=Dn(s.extent);u=ve(m,t.extent),g=u&&!fi(m,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,m)}return u&&this.renderWorlds(l,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(n=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];jt(this.pixelTransform,i);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=i[0]*yn,f=i[1]*yn;u.push(this.getRenderTransform(s,r,o,yn,h,f,0).slice());const d=c.getSource(),g=a.getExtent();if(d.getWrapX()&&a.canWrapX()&&!fi(g,l)){let m=l[0];const p=kt(g);let y=0,x;for(;m<g[0];)--y,x=p*y,u.push(this.getRenderTransform(s,r,o,yn,h,f,x).slice()),m+=p;for(y=0,m=l[2];m>g[2];)++y,x=p*y,u.push(this.getRenderTransform(s,r,o,yn,h,f,x).slice()),m-=p}this.hitDetectionImageData_=pI(i,u,this.renderedFeatures_,c.getStyleFunction(),l,r,o)}n(yI(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,n,i,s,r){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(d,g,m){const p=Ot(d),y=c[p];if(y){if(y!==!0&&m<y.distanceSq){if(m===0)return c[p]=!0,r.splice(r.lastIndexOf(y),1),s(d,l,g);y.geometry=g,y.distanceSq=m}}else{if(m===0)return c[p]=!0,s(d,l,g);r.push(c[p]={feature:d,layer:l,geometry:g,distanceSq:m,callback:s})}};let h;const f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some(d=>h=d.forEachFeatureAtCoordinate(t,o,a,i,u,d===this.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(g=>g.value):null)),h}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const s=t.viewHints[Qt.ANIMATING],r=t.viewHints[Qt.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,u=c.projection,h=c.resolution,f=t.pixelRatio,d=n.getRevision(),g=n.getRenderBuffer();let m=n.getRenderOrder();m===void 0&&(m=vI);const p=c.center.slice(),y=Ah(l,g*h),x=y.slice(),E=[y.slice()],w=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!fi(w,t.extent)){const X=kt(w),V=Math.max(kt(y)/2,X);y[0]=w[0]-V,y[2]=w[2]+V,Ip(p,u);const D=wp(E[0],u);D[0]<w[0]&&D[2]<w[2]?E.push([D[0]+X,D[1],D[2]+X,D[3]]):D[0]>w[0]&&D[2]>w[2]&&E.push([D[0]-X,D[1],D[2]-X,D[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==d&&this.renderedRenderOrder_==m&&fi(this.wrappedRenderedExtent_,y))return Ei(this.renderedExtent_,x)||(this.hitDetectionImageData_=null,this.renderedExtent_=x),this.renderedCenter_=p,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const S=new bg(ku(h,f),y,h,f);let C;this.getLayer().getDeclutter()&&(C=new bg(ku(h,f),y,h,f));let I;for(let X=0,V=E.length;X<V;++X)i.loadFeatures(E[X],h,u);const L=wI(h,f);let B=!0;const F=X=>{let V;const D=X.getStyleFunction()||n.getStyleFunction();if(D&&(V=D(X,h)),V){const H=this.renderFeature(X,L,V,S,I,C);B=B&&!H}},N=Ap(y),j=i.getFeaturesInExtent(N);m&&j.sort(m);for(let X=0,V=j.length;X<V;++X)F(j[X]);this.renderedFeatures_=j,this.ready=B;const K=S.finish(),ct=new Ag(y,h,f,i.getOverlaps(),K,n.getRenderBuffer());return C&&(this.declutterExecutorGroup=new Ag(y,h,f,i.getOverlaps(),C.finish(),n.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=d,this.renderedRenderOrder_=m,this.renderedExtent_=x,this.wrappedRenderedExtent_=y,this.renderedCenter_=p,this.renderedProjection_=u,this.replayGroup_=ct,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,n,i,s,r,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=Lg(s,t,i[l],n,this.boundHandleStyleImageChange_,r,o)||a;else a=Lg(s,t,i,n,this.boundHandleStyleImageChange_,r,o);return a}}const LI=AI;class FI extends GS{constructor(t,n,i,s,r){const o=r!==void 0?mt.IDLE:mt.LOADED;super(t,n,i,o),this.loader_=r!==void 0?r:null,this.canvas_=s,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=mt.ERROR):this.state=mt.LOADED,this.changed()}load(){this.state==mt.IDLE&&(this.state=mt.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const PI=FI;function DI(e){return Array.isArray(e)?Math.min(...e):e}class kI extends KR{constructor(t){super(t),this.vectorRenderer_=new LI(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=ln(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const n=jt(this.coordinateToVectorPixelTransform_,jt(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const n=t.pixelRatio,i=t.viewState,s=i.resolution,r=t.viewHints,o=this.vectorRenderer_;let a=t.extent;this.layerImageRatio_!==1&&(a=a.slice(0),PE(a,this.layerImageRatio_));const l=kt(a)/s,c=ke(a)/s;if(!r[Qt.ANIMATING]&&!r[Qt.INTERACTING]&&!hr(a)){o.useContainer(null,null);const u=o.context,h=t.layerStatesArray[t.layerIndex],f=Object.assign({},h,{opacity:1}),d=Object.assign({},t,{declutterTree:new ff(9),extent:a,size:[l,c],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[f],layerIndex:0});let g=!0;const m=new PI(a,s,n,u.canvas,function(p){o.prepareFrame(d)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(d,null)&&(o.renderDeclutter(d),g=!1),p())});m.addEventListener(at.CHANGE,()=>{if(m.getState()!==mt.LOADED)return;this.image_=g?null:m;const p=m.getPixelRatio(),y=DI(m.getResolution())*n/p;this.renderedResolution=y,this.coordinateToVectorPixelTransform_=un(this.coordinateToVectorPixelTransform_,l/2,c/2,1/y,-1/y,0,-i.center[0],-i.center[1])}),m.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,n,i,s,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,n,i,s,r):super.forEachFeatureAtCoordinate(t,n,i,s,r)}}const NI=kI;class GI extends ZR{constructor(t){t=t||{};const n=Object.assign({},t);delete n.imageRatio,super(n),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new NI(this)}}const UI=GI;class $I{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let n=this.oldest_;for(;n;)t(n.value_,n.key_,this),n=n.newer}get(t,n){const i=this.entries_[t];return Et(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const n=this.entries_[t];return Et(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.key_;return t}getValues(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,n){this.get(t),this.entries_[t].value_=n}set(t,n){Et(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const WI=$I;function Fg(e,t,n,i){return i!==void 0?(i[0]=e,i[1]=t,i[2]=n,i):[e,t,n]}function ql(e,t,n){return e+"/"+t+"/"+n}function R0(e){return ql(e[0],e[1],e[2])}function zI(e){return e.split("/").map(Number)}function YI(e){return(e[1]<<e[0])+e[2]}function VI(e,t){const n=e[0],i=e[1],s=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;const r=t.getFullTileRange(n);return r?r.containsXY(i,s):!0}class XI extends WI{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),i=zI(t)[0];this.forEach(s=>{s.tileCoord[0]!==i&&(this.remove(R0(s.tileCoord)),s.release())})}}const I0=XI,Dc={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class HI extends fn{constructor(t){super(),this.projection=ee(t.projection),this.attributions_=Pg(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,s){n.viewResolver=i,n.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Pg(t),this.changed()}setState(t){this.state_=t,this.changed()}}function Pg(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}const b0=HI,xs=[0,0,0],ei=5;class BI{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Et(mE(this.resolutions_,function(s,r){return r-s},!0),"`resolutions` must be sorted in descending order");let n;if(!t.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!n)n=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Et(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ss(i)),Et(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Et(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Fh,Et(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(s,r){const o=new f0(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,n,i){const s=this.getTileRangeForExtentAndZ(t,n);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)i([n,r,a])}forEachTileCoordParentTileRange(t,n,i,s){let r,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,s);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),r=_s(o,o,a,a,i)):r=this.getTileRangeForExtentAndZ(l,c,i),n(c,r))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,n,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const r=t[1]*2,o=t[2]*2;return _s(r,r+1,o,o+1,n)}const s=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,n)}return null}getTileRangeForTileCoordAndZ(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const s=t[0],r=t[1],o=t[2];if(n===s)return _s(r,o,r,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-s),c=Math.floor(r*l),u=Math.floor(o*l);if(n<s)return _s(c,c,u,u,i);const h=Math.floor(l*(r+1))-1,f=Math.floor(l*(o+1))-1;return _s(c,h,u,f,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(t,n,i){this.getTileCoordForXYAndZ_(t[0],t[3],n,!1,xs);const s=xs[1],r=xs[2];this.getTileCoordForXYAndZ_(t[2],t[1],n,!0,xs);const o=xs[1],a=xs[2];return _s(s,o,r,a,i)}getTileCoordCenter(t){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),s=Pe(this.getTileSize(t[0]),this.tmpSize_);return[n[0]+(t[1]+.5)*s[0]*i,n[1]-(t[2]+.5)*s[1]*i]}getTileCoordExtent(t,n){const i=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=Pe(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*s,a=i[1]-(t[2]+1)*r[1]*s,l=o+r[0]*s,c=a+r[1]*s;return wi(o,a,l,c,n)}getTileCoordForCoordAndResolution(t,n,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],n,!1,i)}getTileCoordForXYAndResolution_(t,n,i,s,r){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=Pe(this.getTileSize(o),this.tmpSize_);let u=a*(t-l[0])/i/c[0],h=a*(l[1]-n)/i/c[1];return s?(u=Jo(u,ei)-1,h=Jo(h,ei)-1):(u=qo(u,ei),h=qo(h,ei)),Fg(o,u,h,r)}getTileCoordForXYAndZ_(t,n,i,s,r){const o=this.getOrigin(i),a=this.getResolution(i),l=Pe(this.getTileSize(i),this.tmpSize_);let c=(t-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return s?(c=Jo(c,ei)-1,u=Jo(u,ei)-1):(c=qo(c,ei),u=qo(u,ei)),Fg(i,c,u,r)}getTileCoordForCoordAndZ(t,n,i){return this.getTileCoordForXYAndZ_(t[0],t[1],n,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,n){const i=bh(this.resolutions_,t,n||0);return te(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,n){return $p(n,0,n.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const n=this.resolutions_.length,i=new Array(n);for(let s=this.minZoom;s<n;++s)i[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=i}}const M0=BI;function O0(e){let t=e.getDefaultTileGrid();return t||(t=qI(e),e.setDefaultTileGrid(t)),t}function ZI(e,t,n){const i=t[0],s=e.getTileCoordCenter(t),r=mf(n);if(!Eo(r,s)){const o=kt(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,e.getTileCoordForCoordAndZ(s,i)}return t}function jI(e,t,n,i){i=i!==void 0?i:"top-left";const s=A0(e,t,n);return new M0({extent:e,origin:LE(e,i),resolutions:s,tileSize:n})}function KI(e){const t=e||{},n=t.extent||ee("EPSG:3857").getExtent(),i={extent:n,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:A0(n,t.maxZoom,t.tileSize,t.maxResolution)};return new M0(i)}function A0(e,t,n,i){t=t!==void 0?t:HE,n=Pe(n!==void 0?n:Fh);const s=ke(e),r=kt(e);i=i>0?i:Math.max(r/n[0],s/n[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function qI(e,t,n,i){const s=mf(e);return jI(s,t,n,i)}function mf(e){e=ee(e);let t=e.getExtent();if(!t){const n=180*js.degrees/e.getMetersPerUnit();t=wi(-n,-n,n,n)}return t}class JI extends b0{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const n=[256,256];this.tileGrid&&Pe(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new I0(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,n){const i=this.getTileCacheForProjection(t);i&&i.expireCache(n)}forEachLoadedTile(t,n,i,s){const r=this.getTileCacheForProjection(t);if(!r)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let h=i.minY;h<=i.maxY;++h)l=ql(n,u,h),c=!1,r.containsKey(l)&&(a=r.get(l),c=a.getState()===it.LOADED,c&&(c=s(a)!==!1)),c||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const n=t?this.getTileGridForProjection(t):this.tileGrid;return n?n.getResolutions():null}getTile(t,n,i,s,r){return ot()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:O0(t)}getTileCacheForProjection(t){const n=this.getProjection();return Et(n===null||Di(n,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,n,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(n),o=Pe(s.getTileSize(t),this.tmpSize);return r==1?o:oS(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=ZI(i,t,n)),VI(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,n){const i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,n,i,s){}}class QI extends Kn{constructor(t,n){super(t),this.tile=n}}const tb=JI;function eb(e,t){const n=/\{z\}/g,i=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(o)return e.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const c=o[0],u=t.getFullTileRange(c);return Et(u,"The {-y} placeholder requires a tile grid with extent"),(u.getHeight()-o[2]-1).toString()})}}function nb(e,t){const n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=eb(e[s],t);return ib(i)}function ib(e){return e.length===1?e[0]:function(t,n,i){if(!t)return;const s=YI(t),r=Bi(s,e.length);return e[r](t,n,i)}}function sb(e){const t=[];let n=/\{([a-z])-([a-z])\}/.exec(e);if(n){const i=n[1].charCodeAt(0),s=n[2].charCodeAt(0);let r;for(r=i;r<=s;++r)t.push(e.replace(n[0],String.fromCharCode(r)));return t}if(n=/\{(\d+)-(\d+)\}/.exec(e),n){const i=parseInt(n[2],10);for(let s=parseInt(n[1],10);s<=i;s++)t.push(e.replace(n[0],s.toString()));return t}return t.push(e),t}class _f extends tb{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===_f.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const n=t.target,i=Ot(n),s=n.getState();let r;s==it.LOADING?(this.tileLoadingKeys_[i]=!0,r=Dc.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=s==it.ERROR?Dc.TILELOADERROR:s==it.LOADED?Dc.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new QI(r,n))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(t){const n=sb(t);this.urls=n,this.setUrls(n)}setUrls(t){this.urls=t;const n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(nb(t,this.tileGrid),n):this.setKey(n)}tileUrlFunction(t,n,i){}useTile(t,n,i){const s=ql(t,n,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const rb=_f;class ob extends rb{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:ab,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:u0,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,n){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==i?n:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Di(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Di(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||Di(n,t)))return this.tileGrid;const i=Ot(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=O0(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const n=this.getProjection();if(!n||Di(n,t))return this.tileCache;const i=Ot(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new I0(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,n,i,s,r,o){const a=[t,n,i],l=this.getTileCoordForTileUrlFunction(a,r),c=l?this.tileUrlFunction(l,s,r):void 0,u=new this.tileClass(a,c!==void 0?it.IDLE:it.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(at.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,n,i,s,r){const o=this.getProjection();if(!o||!r||Di(o,r))return this.getTileInternal(t,n,i,s,o||r);const a=this.getTileCacheForProjection(r),l=[t,n,i];let c;const u=R0(l);a.containsKey(u)&&(c=a.get(u));const h=this.getKey();if(c&&c.key==h)return c;const f=this.getTileGridForProjection(o),d=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(l,r),m=new Pu(o,f,r,d,l,g,this.getTilePixelRatio(s),this.getGutter(),(p,y,x,E)=>this.getTileInternal(p,y,x,E,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=h,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(t,n,i,s,r){let o=null;const a=ql(t,n,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,n,i,s,r,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(t,n,i,s,r,l),c.getState()==it.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(t,n){const i=ee(t);if(i){const s=Ot(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=n)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function ab(e,t){e.getImage().src=t}const lb=ob;class cb extends lb{constructor(t){t=t||{};const n=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:KI({extent:mf(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const ub=cb,hb='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class fb extends ub{constructor(t){t=t||{};let n;t.attributions!==void 0?n=t.attributions:n=[hb];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",s=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})}}const db=fb;class gb{constructor(t){this.rbush_=new ff(t),this.items_={}}insert(t,n){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.rbush_.insert(i),this.items_[Ot(n)]=i}load(t,n){const i=new Array(n.length);for(let s=0,r=n.length;s<r;s++){const o=t[s],a=n[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=l,this.items_[Ot(a)]=l}this.rbush_.load(i)}remove(t){const n=Ot(t),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(t,n){const i=this.items_[Ot(n)],s=[i.minX,i.minY,i.maxX,i.maxY];ro(s,t)||(this.remove(n),this.insert(t,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(t){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(n).map(function(s){return s.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,n){return this.forEach_(this.getInExtent(t),n)}forEach_(t,n){let i;for(let s=0,r=t.length;s<r;s++)if(i=n(t[s]),i)return i;return i}isEmpty(){return Zs(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const n=this.rbush_.toJSON();return wi(n.minX,n.minY,n.maxX,n.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const n in t.items_)this.items_[n]=t.items_[n]}}const Dg=gb,je={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function mb(e,t){return[[-1/0,-1/0,1/0,1/0]]}let _b=!1;function pb(e,t,n,i,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof e=="function"?e(n,i,s):e,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=_b,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?r(t.readFeatures(u,{extent:n,featureProjection:s}),t.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function kg(e,t){return function(n,i,s,r,o){const a=this;pb(e,t,n,i,s,function(l,c){a.addFeatures(l),r!==void 0&&r(l)},o||Bs)}}class ni extends Kn{constructor(t,n,i){super(t),this.feature=n,this.features=i}}class yb extends b0{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Bs,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Et(this.format_,"`format` must be set when `url` is set"),this.loader_=kg(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:mb;const n=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=n?new Dg:null,this.loadedExtentsRtree_=new Dg,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(t.features)?s=t.features:t.features&&(i=t.features,s=i.getArray()),!n&&i===void 0&&(i=new xn(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const n=Ot(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);const i=t.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new ni(je.ADDFEATURE,t))}setupChangeEvents_(t,n){this.featureChangeKeys_[t]=[xt(n,at.CHANGE,this.handleFeatureChange_,this),xt(n,Hs.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,n){let i=!0;const s=n.getId();return s!==void 0&&(s.toString()in this.idIndex_?i=!1:this.idIndex_[s.toString()]=n),i&&(Et(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=n),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const n=[],i=[],s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=Ot(a);this.addToIndex_(l,a)&&i.push(a)}for(let r=0,o=i.length;r<o;r++){const a=i[r],l=Ot(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,s),this.hasListener(je.ADDFEATURE))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new ni(je.ADDFEATURE,i[r]))}bindFeaturesCollection_(t){let n=!1;this.addEventListener(je.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(je.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(Se.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),t.addEventListener(Se.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach($t);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(i);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new ni(je.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,n){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(s){if(s.getGeometry().intersectsCoordinate(t))return n(s)})}forEachFeatureInExtent(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(t,n){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const r=n(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Zs(this.nullGeometryFeatures_)||$n(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n}getFeaturesInExtent(t,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const s=kE(t,n);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,n){const i=t[0],s=t[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||so,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),h=a;if(a=u.closestPointXY(i,s,o,a),a<h){r=c;const f=Math.sqrt(a);l[0]=i-f,l[1]=s-f,l[2]=i+f,l[3]=s+f}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const n=this.idIndex_[t.toString()];return n!==void 0?n:null}getFeatureByUid(t){const n=this.uidIndex_[t];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const n=t.target,i=Ot(n),s=n.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const r=n.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new ni(je.CHANGEFEATURE,n))}hasFeature(t){const n=t.getId();return n!==void 0?n in this.idIndex_:Ot(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Zs(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,n,i){const s=this.loadedExtentsRtree_,r=this.strategy_(t,n,i);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(u){return fi(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ni(je.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new ni(je.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ni(je.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const n=this.loadedExtentsRtree_;let i;n.forEachInExtent(t,function(s){if(ro(s.extent,t))return i=s,!0}),i&&n.remove(i)}removeFeature(t){if(!t)return;const n=Ot(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const n=Ot(t),i=this.featureChangeKeys_[n];if(!i)return;i.forEach($t),delete this.featureChangeKeys_[n];const s=t.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[n],this.dispatchEvent(new ni(je.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let n=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],n=!0;break}return n}setLoader(t){this.loader_=t}setUrl(t){Et(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(kg(t,this.format_))}}const xb=yb,Ng=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Gg={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class vb extends dr{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=t.keys!==void 0?t.keys:!1,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=t.className!==void 0?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=t.activeClassName!==void 0?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=t.inactiveClassName!==void 0?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const n=t.label!==void 0?t.label:"⤢";this.labelNode_=typeof n=="string"?document.createTextNode(n):n;const i=t.labelActive!==void 0?t.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const s=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=s,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(at.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${os} ${So}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const n=t.getOwnerDocument();if(Ug(n))if($g(n))Eb(n);else{let i;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?wb(i):L0(i)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const n=this.isInFullscreen_;this.isInFullscreen_=$g(t.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Xa(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Gg.ENTERFULLSCREEN)):(Xa(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Gg.LEAVEFULLSCREEN)),t.updateSize())}setClassName_(t,n){n?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const n=this.getMap();n&&n.removeChangeListener(se.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener(se.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let i=0,s=t.length;i<s;++i)$t(t[i]);t.length=0;const n=this.getMap();if(n){const i=n.getOwnerDocument();Ug(i)?this.element.classList.remove(lg):this.element.classList.add(lg);for(let s=0,r=Ng.length;s<r;++s)t.push(xt(i,Ng[s],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function Ug(e){const t=e.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&e.fullscreenEnabled)}function $g(e){return!!(e.webkitIsFullScreen||e.fullscreenElement)}function L0(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function wb(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():L0(e)}function Eb(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}const Wg=vb,ge={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Tb extends fn{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+JT,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(ge.ELEMENT,this.handleElementChanged),this.addChangeListener(ge.MAP,this.handleMapChanged),this.addChangeListener(ge.OFFSET,this.handleOffsetChanged),this.addChangeListener(ge.POSITION,this.handlePositionChanged),this.addChangeListener(ge.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(ge.ELEMENT)}getId(){return this.id}getMap(){return this.get(ge.MAP)||null}getOffset(){return this.get(ge.OFFSET)}getPosition(){return this.get(ge.POSITION)}getPositioning(){return this.get(ge.POSITIONING)}handleElementChanged(){Hp(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(Ha(this.element),$t(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=xt(t,Pn.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(ge.ELEMENT,t)}setMap(t){this.set(ge.MAP,t)}setOffset(t){this.set(ge.OFFSET,t)}setPosition(t){this.set(ge.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(ge.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),s=this.getElement(),r=this.getRect(s,[tC(s),eC(s)]);t=t||{};const o=t.margin===void 0?20:t.margin;if(!fi(i,r)){const a=r[0]-i[0],l=i[2]-r[2],c=r[1]-i[1],u=i[3]-r[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),c<0?h[1]=c-o:u<0&&(h[1]=Math.abs(u)+o),h[0]!==0||h[1]!==0){const f=n.getView().getCenterInternal(),d=n.getPixelFromCoordinateInternal(f);if(!d)return;const g=[d[0]+h[0],d[1]+h[1]],m=t.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(g),duration:m.duration,easing:m.easing})}}}getRect(t,n){const i=t.getBoundingClientRect(),s=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[s,r,s+n[0],r+n[1]]}setPositioning(t){this.set(ge.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),n=this.getPosition();if(!t||!t.isRendered()||!n){this.setVisible(!1);return}const i=t.getPixelFromCoordinate(n),s=t.getSize();this.updateRenderedPosition(i,s)}updateRenderedPosition(t,n){const i=this.element.style,s=this.getOffset(),r=this.getPositioning();this.setVisible(!0);const o=Math.round(t[0]+s[0])+"px",a=Math.round(t[1]+s[1])+"px";let l="0%",c="0%";r=="bottom-right"||r=="center-right"||r=="top-right"?l="-100%":(r=="bottom-center"||r=="center-center"||r=="top-center")&&(l="-50%"),r=="bottom-left"||r=="bottom-center"||r=="bottom-right"?c="-100%":(r=="center-left"||r=="center-center"||r=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}}const zg=Tb,kc="units",Cb=[1,2,5],Rr=25.4/.28;class Sb extends dr{constructor(t){t=t||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:t.render,target:t.target}),this.on,this.once,this.un;const i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+os,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(kc,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(kc)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(kc,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=t.center,i=t.projection,s=this.getUnits(),r=s=="degrees"?"degrees":"m";let o=Wa(i,t.resolution,n,r);const a=this.minWidth_*(this.dpi_||Rr)/Rr,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Rr)/Rr:void 0;let c=a*o,u="";if(s=="degrees"){const E=js.degrees;c*=E,c<E/60?(u="″",o*=3600):c<E?(u="′",o*=60):u="°"}else if(s=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(s=="nautical")o/=1852,u="NM";else if(s=="metric")c<.001?(u="μm",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(s=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),f,d,g,m,p,y;for(;;){g=Math.floor(h/3);const E=Math.pow(10,g);if(f=Cb[(h%3+3)%3]*E,d=Math.round(f/o),isNaN(d)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&d>=l){f=m,d=p,g=y;break}else if(d>=a)break;m=f,p=d,y=g,++h}const x=this.scaleBar_?this.createScaleBar(d,f,u):f.toFixed(g<0?-g:0)+" "+u;this.renderedHTML_!=x&&(this.innerElement_.innerHTML=x,this.renderedHTML_=x),this.renderedWidth_!=d&&(this.innerElement_.style.width=d+"px",this.renderedWidth_=d),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,n,i){const s=this.getScaleForResolution(),r=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),o=this.scaleBarSteps_,a=t/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const h=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,t,!1,n,i):"")+"</div>")}return l.push(this.createStepText(o,t,!0,n,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+r+"</div>":"")+l.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,n,i,s,r){const a=(t===0?0:Math.round(s/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+r),l=t===0?-3:n/this.scaleBarSteps_*-1,c=t===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${t===0?"left":"center"};min-width: ${c}px;left: ${i?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const t=Wa(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||Rr,i=1e3/25.4;return t*i*n}render(t){const n=t.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const Yg=Sb;class Rb extends dr{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const n=t.className!==void 0?t.className:"ol-zoom-extent",i=t.label!==void 0?t.label:"E",s=t.tipLabel!==void 0?t.tipLabel:"Fit to extent",r=document.createElement("button");r.setAttribute("type","button"),r.title=s,r.appendChild(typeof i=="string"?document.createTextNode(i):i),r.addEventListener(at.CLICK,this.handleClick_.bind(this),!1);const o=n+" "+os+" "+So,a=this.element;a.className=o,a.appendChild(r)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const n=this.getMap().getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(Cu(i))}}const Ib=Rb;class Lo{constructor(t){ce(this,"fileId",null);ce(this,"activity",null);ce(this,"sessions",null);ce(this,"records",null);const n=t;this.fileId=n==null?void 0:n.fileId,this.activity=n==null?void 0:n.activity,this.sessions=n==null?void 0:n.sessions,this.records=n==null?void 0:n.records}}class Nu{constructor(t){ce(this,"timestamp",null);ce(this,"positionLat",null);ce(this,"positionLong",null);ce(this,"distance",null);ce(this,"speed",null);ce(this,"altitude",null);ce(this,"cadence",null);ce(this,"heartRate",null);ce(this,"power",null);const n=t;this.positionLat=n==null?void 0:n.positionLat,this.positionLong=n==null?void 0:n.positionLong,this.altitude=n==null?void 0:n.altitude,this.cadence=n==null?void 0:n.cadence,this.distance=n==null?void 0:n.distance,this.heartRate=n==null?void 0:n.heartRate,this.speed=n==null?void 0:n.speed,this.timestamp=n==null?void 0:n.timestamp,this.power=n==null?void 0:n.power}}class as extends Error{}class bb extends as{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Mb extends as{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Ob extends as{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Nr extends as{}class F0 extends as{constructor(t){super(`Invalid unit ${t}`)}}class ze extends as{}class ii extends as{constructor(){super("Zone is an abstract class")}}const q="numeric",hn="short",De="long",rl={year:q,month:q,day:q},P0={year:q,month:hn,day:q},Ab={year:q,month:hn,day:q,weekday:hn},D0={year:q,month:De,day:q},k0={year:q,month:De,day:q,weekday:De},N0={hour:q,minute:q},G0={hour:q,minute:q,second:q},U0={hour:q,minute:q,second:q,timeZoneName:hn},$0={hour:q,minute:q,second:q,timeZoneName:De},W0={hour:q,minute:q,hourCycle:"h23"},z0={hour:q,minute:q,second:q,hourCycle:"h23"},Y0={hour:q,minute:q,second:q,hourCycle:"h23",timeZoneName:hn},V0={hour:q,minute:q,second:q,hourCycle:"h23",timeZoneName:De},X0={year:q,month:q,day:q,hour:q,minute:q},H0={year:q,month:q,day:q,hour:q,minute:q,second:q},B0={year:q,month:hn,day:q,hour:q,minute:q},Z0={year:q,month:hn,day:q,hour:q,minute:q,second:q},Lb={year:q,month:hn,day:q,weekday:hn,hour:q,minute:q},j0={year:q,month:De,day:q,hour:q,minute:q,timeZoneName:hn},K0={year:q,month:De,day:q,hour:q,minute:q,second:q,timeZoneName:hn},q0={year:q,month:De,day:q,weekday:De,hour:q,minute:q,timeZoneName:De},J0={year:q,month:De,day:q,weekday:De,hour:q,minute:q,second:q,timeZoneName:De};class Fo{get type(){throw new ii}get name(){throw new ii}get ianaName(){return this.name}get isUniversal(){throw new ii}offsetName(t,n){throw new ii}formatOffset(t,n){throw new ii}offset(t){throw new ii}equals(t){throw new ii}get isValid(){throw new ii}}let Nc=null;class Jl extends Fo{static get instance(){return Nc===null&&(Nc=new Jl),Nc}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return ty(t,n,i)}formatOffset(t,n){return jr(this.offset(t),n)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Ca={};function Fb(e){return Ca[e]||(Ca[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Ca[e]}const Pb={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Db(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,s,r,o,a,l,c,u]=i;return[o,s,r,a,l,c,u]}function kb(e,t){const n=e.formatToParts(t),i=[];for(let s=0;s<n.length;s++){const{type:r,value:o}=n[s],a=Pb[r];r==="era"?i[a]=o:yt(a)||(i[a]=parseInt(o,10))}return i}let la={};class Vn extends Fo{static create(t){return la[t]||(la[t]=new Vn(t)),la[t]}static resetCache(){la={},Ca={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Vn.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return ty(t,n,i,this.name)}formatOffset(t,n){return jr(this.offset(t),n)}offset(t){const n=new Date(t);if(isNaN(n))return NaN;const i=Fb(this.name);let[s,r,o,a,l,c,u]=i.formatToParts?kb(i,n):Db(i,n);a==="BC"&&(s=-Math.abs(s)+1);const f=tc({year:s,month:r,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let d=+n;const g=d%1e3;return d-=g>=0?g:1e3+g,(f-d)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let Vg={};function Nb(e,t={}){const n=JSON.stringify([e,t]);let i=Vg[n];return i||(i=new Intl.ListFormat(e,t),Vg[n]=i),i}let Gu={};function Uu(e,t={}){const n=JSON.stringify([e,t]);let i=Gu[n];return i||(i=new Intl.DateTimeFormat(e,t),Gu[n]=i),i}let $u={};function Gb(e,t={}){const n=JSON.stringify([e,t]);let i=$u[n];return i||(i=new Intl.NumberFormat(e,t),$u[n]=i),i}let Wu={};function Ub(e,t={}){const{base:n,...i}=t,s=JSON.stringify([e,i]);let r=Wu[s];return r||(r=new Intl.RelativeTimeFormat(e,t),Wu[s]=r),r}let Gr=null;function $b(){return Gr||(Gr=new Intl.DateTimeFormat().resolvedOptions().locale,Gr)}function Wb(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(n===-1)return[e];{let i,s;try{i=Uu(e).resolvedOptions(),s=e}catch{const l=e.substring(0,n);i=Uu(l).resolvedOptions(),s=l}const{numberingSystem:r,calendar:o}=i;return[s,r,o]}}function zb(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}function Yb(e){const t=[];for(let n=1;n<=12;n++){const i=ht.utc(2009,n,1);t.push(e(i))}return t}function Vb(e){const t=[];for(let n=1;n<=7;n++){const i=ht.utc(2016,11,13+n);t.push(e(i))}return t}function ca(e,t,n,i){const s=e.listingMode();return s==="error"?null:s==="en"?n(t):i(t)}function Xb(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class Hb{constructor(t,n,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:r,...o}=i;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=Gb(t,a)}}format(t){if(this.inf){const n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{const n=this.floor?Math.floor(t):yf(t,3);return Jt(n,this.padTo)}}}class Bb{constructor(t,n,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Vn.create(a).valid?(s=a,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const r={...this.opts};r.timeZone=r.timeZone||s,this.dtf=Uu(n,r)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(n=>{if(n.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:i}}else return n}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Zb{constructor(t,n,i){this.opts={style:"long",...i},!n&&Q0()&&(this.rtf=Ub(t,i))}format(t,n){return this.rtf?this.rtf.format(t,n):hM(n,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,n){return this.rtf?this.rtf.formatToParts(t,n):[]}}class Wt{static fromOpts(t){return Wt.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,n,i,s=!1){const r=t||qt.defaultLocale,o=r||(s?"en-US":$b()),a=n||qt.defaultNumberingSystem,l=i||qt.defaultOutputCalendar;return new Wt(o,a,l,r)}static resetCache(){Gr=null,Gu={},$u={},Wu={}}static fromObject({locale:t,numberingSystem:n,outputCalendar:i}={}){return Wt.create(t,n,i)}constructor(t,n,i,s){const[r,o,a]=Wb(t);this.locale=r,this.numberingSystem=n||o||null,this.outputCalendar=i||a||null,this.intl=zb(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Xb(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Wt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,n=!1){return ca(this,t,iy,()=>{const i=n?{month:t,day:"numeric"}:{month:t},s=n?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=Yb(r=>this.extract(r,i,"month"))),this.monthsCache[s][t]})}weekdays(t,n=!1){return ca(this,t,oy,()=>{const i=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=n?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=Vb(r=>this.extract(r,i,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return ca(this,void 0,()=>ay,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ht.utc(2016,11,13,9),ht.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(t){return ca(this,t,ly,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[ht.utc(-40,1,1),ht.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[t]})}extract(t,n,i){const s=this.dtFormatter(t,n),r=s.formatToParts(),o=r.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new Hb(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,n={}){return new Bb(t,this.intl,n)}relFormatter(t={}){return new Zb(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Nb(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Gc=null;class we extends Fo{static get utcInstance(){return Gc===null&&(Gc=new we(0)),Gc}static instance(t){return t===0?we.utcInstance:new we(t)}static parseSpecifier(t){if(t){const n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new we(ec(n[1],n[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${jr(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${jr(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,n){return jr(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class jb extends Fo{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function hi(e,t){if(yt(e)||e===null)return t;if(e instanceof Fo)return e;if(Kb(e)){const n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?Jl.instance:n==="utc"||n==="gmt"?we.utcInstance:we.parseSpecifier(n)||Vn.create(e)}else return Ki(e)?we.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new jb(e)}let Xg=()=>Date.now(),Hg="system",Bg=null,Zg=null,jg=null,Kg=60,qg;class qt{static get now(){return Xg}static set now(t){Xg=t}static set defaultZone(t){Hg=t}static get defaultZone(){return hi(Hg,Jl.instance)}static get defaultLocale(){return Bg}static set defaultLocale(t){Bg=t}static get defaultNumberingSystem(){return Zg}static set defaultNumberingSystem(t){Zg=t}static get defaultOutputCalendar(){return jg}static set defaultOutputCalendar(t){jg=t}static get twoDigitCutoffYear(){return Kg}static set twoDigitCutoffYear(t){Kg=t%100}static get throwOnInvalid(){return qg}static set throwOnInvalid(t){qg=t}static resetCaches(){Wt.resetCache(),Vn.resetCache()}}function yt(e){return typeof e>"u"}function Ki(e){return typeof e=="number"}function Ql(e){return typeof e=="number"&&e%1===0}function Kb(e){return typeof e=="string"}function qb(e){return Object.prototype.toString.call(e)==="[object Date]"}function Q0(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Jb(e){return Array.isArray(e)?e:[e]}function Jg(e,t,n){if(e.length!==0)return e.reduce((i,s)=>{const r=[t(s),s];return i&&n(i[0],r[0])===i[0]?i:r},null)[1]}function Qb(e,t){return t.reduce((n,i)=>(n[i]=e[i],n),{})}function tr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function kn(e,t,n){return Ql(e)&&e>=t&&e<=n}function tM(e,t){return e-t*Math.floor(e/t)}function Jt(e,t=2){const n=e<0;let i;return n?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function ui(e){if(!(yt(e)||e===null||e===""))return parseInt(e,10)}function Mi(e){if(!(yt(e)||e===null||e===""))return parseFloat(e)}function pf(e){if(!(yt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function yf(e,t,n=!1){const i=10**t;return(n?Math.trunc:Math.round)(e*i)/i}function Po(e){return e%4===0&&(e%100!==0||e%400===0)}function Zr(e){return Po(e)?366:365}function ol(e,t){const n=tM(t-1,12)+1,i=e+(t-n)/12;return n===2?Po(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function tc(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function al(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,n=e-1,i=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return t===4||i===3?53:52}function zu(e){return e>99?e:e>qt.twoDigitCutoffYear?1900+e:2e3+e}function ty(e,t,n,i=null){const s=new Date(e),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(r.timeZone=i);const o={timeZoneName:t,...r},a=new Intl.DateTimeFormat(n,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function ec(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0,s=n<0||Object.is(n,-0)?-i:i;return n*60+s}function ey(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new ze(`Invalid unit value ${e}`);return t}function ll(e,t){const n={};for(const i in e)if(tr(e,i)){const s=e[i];if(s==null)continue;n[t(i)]=ey(s)}return n}function jr(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${Jt(n,2)}:${Jt(i,2)}`;case"narrow":return`${s}${n}${i>0?`:${i}`:""}`;case"techie":return`${s}${Jt(n,2)}${Jt(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function nc(e){return Qb(e,["hour","minute","second","millisecond"])}const eM=["January","February","March","April","May","June","July","August","September","October","November","December"],ny=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],nM=["J","F","M","A","M","J","J","A","S","O","N","D"];function iy(e){switch(e){case"narrow":return[...nM];case"short":return[...ny];case"long":return[...eM];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const sy=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ry=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],iM=["M","T","W","T","F","S","S"];function oy(e){switch(e){case"narrow":return[...iM];case"short":return[...ry];case"long":return[...sy];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const ay=["AM","PM"],sM=["Before Christ","Anno Domini"],rM=["BC","AD"],oM=["B","A"];function ly(e){switch(e){case"narrow":return[...oM];case"short":return[...rM];case"long":return[...sM];default:return null}}function aM(e){return ay[e.hour<12?0:1]}function lM(e,t){return oy(t)[e.weekday-1]}function cM(e,t){return iy(t)[e.month-1]}function uM(e,t){return ly(t)[e.year<0?0:1]}function hM(e,t,n="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&r){const h=e==="days";switch(t){case 1:return h?"tomorrow":`next ${s[e][0]}`;case-1:return h?"yesterday":`last ${s[e][0]}`;case 0:return h?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=s[e],u=i?l?c[1]:c[2]||c[1]:l?s[e][0]:e;return o?`${a} ${u} ago`:`in ${a} ${u}`}function Qg(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const fM={D:rl,DD:P0,DDD:D0,DDDD:k0,t:N0,tt:G0,ttt:U0,tttt:$0,T:W0,TT:z0,TTT:Y0,TTTT:V0,f:X0,ff:B0,fff:j0,ffff:q0,F:H0,FF:Z0,FFF:K0,FFFF:J0};class pe{static create(t,n={}){return new pe(t,n)}static parseFormat(t){let n=null,i="",s=!1;const r=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&r.push({literal:s||/^\s+$/.test(i),val:i}),n=null,i="",s=!s):s||a===n?i+=a:(i.length>0&&r.push({literal:/^\s+$/.test(i),val:i}),i=a,n=a)}return i.length>0&&r.push({literal:s||/^\s+$/.test(i),val:i}),r}static macroTokenToFormatOpts(t){return fM[t]}constructor(t,n){this.opts=n,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...n}).format()}dtFormatter(t,n={}){return this.loc.dtFormatter(t,{...this.opts,...n})}formatDateTime(t,n){return this.dtFormatter(t,n).format()}formatDateTimeParts(t,n){return this.dtFormatter(t,n).formatToParts()}formatInterval(t,n){return this.dtFormatter(t.start,n).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,n){return this.dtFormatter(t,n).resolvedOptions()}num(t,n=0){if(this.opts.forceSimple)return Jt(t,n);const i={...this.opts};return n>0&&(i.padTo=n),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,n){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(d,g)=>this.loc.extract(t,d,g),o=d=>t.isOffsetFixed&&t.offset===0&&d.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,d.format):"",a=()=>i?aM(t):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(d,g)=>i?cM(t,d):r(g?{month:d}:{month:d,day:"numeric"},"month"),c=(d,g)=>i?lM(t,d):r(g?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),u=d=>{const g=pe.macroTokenToFormatOpts(d);return g?this.formatWithSystemDefault(t,g):d},h=d=>i?uM(t,d):r({era:d},"era"),f=d=>{switch(d){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return s?r({day:"numeric"},"day"):this.num(t.day);case"dd":return s?r({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return s?r({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?r({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?r({month:"numeric"},"month"):this.num(t.month);case"MM":return s?r({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?r({year:"numeric"},"year"):this.num(t.year);case"yy":return s?r({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?r({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?r({year:"numeric"},"year"):this.num(t.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(d)}};return Qg(pe.parseFormat(n),f)}formatDurationFromString(t,n){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>c=>{const u=i(c);return u?this.num(l.get(u),c.length):c},r=pe.parseFormat(n),o=r.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return Qg(r,s(a))}}class rn{constructor(t,n){this.reason=t,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const cy=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function mr(...e){const t=e.reduce((n,i)=>n+i.source,"");return RegExp(`^${t}$`)}function _r(...e){return t=>e.reduce(([n,i,s],r)=>{const[o,a,l]=r(t,s);return[{...n,...o},a||i,l]},[{},null,1]).slice(0,2)}function pr(e,...t){if(e==null)return[null,null];for(const[n,i]of t){const s=n.exec(e);if(s)return i(s)}return[null,null]}function uy(...e){return(t,n)=>{const i={};let s;for(s=0;s<e.length;s++)i[e[s]]=ui(t[n+s]);return[i,null,n+s]}}const hy=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,dM=`(?:${hy.source}?(?:\\[(${cy.source})\\])?)?`,xf=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,fy=RegExp(`${xf.source}${dM}`),vf=RegExp(`(?:T${fy.source})?`),gM=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,mM=/(\d{4})-?W(\d\d)(?:-?(\d))?/,_M=/(\d{4})-?(\d{3})/,pM=uy("weekYear","weekNumber","weekDay"),yM=uy("year","ordinal"),xM=/(\d{4})-(\d\d)-(\d\d)/,dy=RegExp(`${xf.source} ?(?:${hy.source}|(${cy.source}))?`),vM=RegExp(`(?: ${dy.source})?`);function Us(e,t,n){const i=e[t];return yt(i)?n:ui(i)}function wM(e,t){return[{year:Us(e,t),month:Us(e,t+1,1),day:Us(e,t+2,1)},null,t+3]}function yr(e,t){return[{hours:Us(e,t,0),minutes:Us(e,t+1,0),seconds:Us(e,t+2,0),milliseconds:pf(e[t+3])},null,t+4]}function Do(e,t){const n=!e[t]&&!e[t+1],i=ec(e[t+1],e[t+2]),s=n?null:we.instance(i);return[{},s,t+3]}function ko(e,t){const n=e[t]?Vn.create(e[t]):null;return[{},n,t+1]}const EM=RegExp(`^T?${xf.source}$`),TM=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function CM(e){const[t,n,i,s,r,o,a,l,c]=e,u=t[0]==="-",h=l&&l[0]==="-",f=(d,g=!1)=>d!==void 0&&(g||d&&u)?-d:d;return[{years:f(Mi(n)),months:f(Mi(i)),weeks:f(Mi(s)),days:f(Mi(r)),hours:f(Mi(o)),minutes:f(Mi(a)),seconds:f(Mi(l),l==="-0"),milliseconds:f(pf(c),h)}]}const SM={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function wf(e,t,n,i,s,r,o){const a={year:t.length===2?zu(ui(t)):ui(t),month:ny.indexOf(n)+1,day:ui(i),hour:ui(s),minute:ui(r)};return o&&(a.second=ui(o)),e&&(a.weekday=e.length>3?sy.indexOf(e)+1:ry.indexOf(e)+1),a}const RM=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function IM(e){const[,t,n,i,s,r,o,a,l,c,u,h]=e,f=wf(t,s,i,n,r,o,a);let d;return l?d=SM[l]:c?d=0:d=ec(u,h),[f,new we(d)]}function bM(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const MM=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,OM=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,AM=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function tm(e){const[,t,n,i,s,r,o,a]=e;return[wf(t,s,i,n,r,o,a),we.utcInstance]}function LM(e){const[,t,n,i,s,r,o,a]=e;return[wf(t,a,n,i,s,r,o),we.utcInstance]}const FM=mr(gM,vf),PM=mr(mM,vf),DM=mr(_M,vf),kM=mr(fy),gy=_r(wM,yr,Do,ko),NM=_r(pM,yr,Do,ko),GM=_r(yM,yr,Do,ko),UM=_r(yr,Do,ko);function $M(e){return pr(e,[FM,gy],[PM,NM],[DM,GM],[kM,UM])}function WM(e){return pr(bM(e),[RM,IM])}function zM(e){return pr(e,[MM,tm],[OM,tm],[AM,LM])}function YM(e){return pr(e,[TM,CM])}const VM=_r(yr);function XM(e){return pr(e,[EM,VM])}const HM=mr(xM,vM),BM=mr(dy),ZM=_r(yr,Do,ko);function jM(e){return pr(e,[HM,gy],[BM,ZM])}const em="Invalid Duration",my={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},KM={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...my},$e=146097/400,vs=146097/4800,qM={years:{quarters:4,months:12,weeks:$e/7,days:$e,hours:$e*24,minutes:$e*24*60,seconds:$e*24*60*60,milliseconds:$e*24*60*60*1e3},quarters:{months:3,weeks:$e/28,days:$e/4,hours:$e*24/4,minutes:$e*24*60/4,seconds:$e*24*60*60/4,milliseconds:$e*24*60*60*1e3/4},months:{weeks:vs/7,days:vs,hours:vs*24,minutes:vs*24*60,seconds:vs*24*60*60,milliseconds:vs*24*60*60*1e3},...my},$i=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],JM=$i.slice(0).reverse();function si(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Ct(i)}function _y(e,t){let n=t.milliseconds??0;for(const i of JM.slice(1))t[i]&&(n+=t[i]*e[i].milliseconds);return n}function nm(e,t){const n=_y(e,t)<0?-1:1;$i.reduceRight((i,s)=>{if(yt(t[s]))return i;if(i){const r=t[i]*n,o=e[s][i],a=Math.floor(r/o);t[s]+=a*n,t[i]-=a*o*n}return s},null),$i.reduce((i,s)=>{if(yt(t[s]))return i;if(i){const r=t[i]%1;t[i]-=r,t[s]+=r*e[i][s]}return s},null)}function QM(e){const t={};for(const[n,i]of Object.entries(e))i!==0&&(t[n]=i);return t}class Ct{constructor(t){const n=t.conversionAccuracy==="longterm"||!1;let i=n?qM:KM;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||Wt.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,n){return Ct.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(t==null||typeof t!="object")throw new ze(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Ct({values:ll(t,Ct.normalizeUnit),loc:Wt.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(Ki(t))return Ct.fromMillis(t);if(Ct.isDuration(t))return t;if(typeof t=="object")return Ct.fromObject(t);throw new ze(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){const[i]=YM(t);return i?Ct.fromObject(i,n):Ct.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){const[i]=XM(t);return i?Ct.fromObject(i,n):Ct.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new ze("need to specify a reason the Duration is invalid");const i=t instanceof rn?t:new rn(t,n);if(qt.throwOnInvalid)throw new Ob(i);return new Ct({invalid:i})}static normalizeUnit(t){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!n)throw new F0(t);return n}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,n={}){const i={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?pe.create(this.loc,i).formatDurationFromString(this,t):em}toHuman(t={}){if(!this.isValid)return em;const n=$i.map(i=>{const s=this.values[i];return yt(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=yf(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},ht.fromMillis(n,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?_y(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const n=Ct.fromDurationLike(t),i={};for(const s of $i)(tr(n.values,s)||tr(this.values,s))&&(i[s]=n.get(s)+this.get(s));return si(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const n=Ct.fromDurationLike(t);return this.plus(n.negate())}mapUnits(t){if(!this.isValid)return this;const n={};for(const i of Object.keys(this.values))n[i]=ey(t(this.values[i],i));return si(this,{values:n},!0)}get(t){return this[Ct.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const n={...this.values,...ll(t,Ct.normalizeUnit)};return si(this,{values:n})}reconfigure({locale:t,numberingSystem:n,conversionAccuracy:i,matrix:s}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:n}),matrix:s,conversionAccuracy:i};return si(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return nm(this.matrix,t),si(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=QM(this.normalize().shiftToAll().toObject());return si(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Ct.normalizeUnit(o));const n={},i={},s=this.toObject();let r;for(const o of $i)if(t.indexOf(o)>=0){r=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;Ki(s[o])&&(a+=s[o]);const l=Math.trunc(a);n[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else Ki(s[o])&&(i[o]=s[o]);for(const o in i)i[o]!==0&&(n[r]+=o===r?i[o]:i[o]/this.matrix[r][o]);return nm(this.matrix,n),si(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=this.values[n]===0?0:-this.values[n];return si(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function n(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of $i)if(!n(this.values[i],t.values[i]))return!1;return!0}}const ws="Invalid Interval";function tO(e,t){return!e||!e.isValid?Bt.invalid("missing or invalid start"):!t||!t.isValid?Bt.invalid("missing or invalid end"):t<e?Bt.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Bt{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new ze("need to specify a reason the Interval is invalid");const i=t instanceof rn?t:new rn(t,n);if(qt.throwOnInvalid)throw new Mb(i);return new Bt({invalid:i})}static fromDateTimes(t,n){const i=br(t),s=br(n),r=tO(i,s);return r??new Bt({start:i,end:s})}static after(t,n){const i=Ct.fromDurationLike(n),s=br(t);return Bt.fromDateTimes(s,s.plus(i))}static before(t,n){const i=Ct.fromDurationLike(n),s=br(t);return Bt.fromDateTimes(s.minus(i),s)}static fromISO(t,n){const[i,s]=(t||"").split("/",2);if(i&&s){let r,o;try{r=ht.fromISO(i,n),o=r.isValid}catch{o=!1}let a,l;try{a=ht.fromISO(s,n),l=a.isValid}catch{l=!1}if(o&&l)return Bt.fromDateTimes(r,a);if(o){const c=Ct.fromISO(s,n);if(c.isValid)return Bt.after(r,c)}else if(l){const c=Ct.fromISO(i,n);if(c.isValid)return Bt.before(a,c)}}return Bt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const n=this.start.startOf(t),i=this.end.startOf(t);return Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:n}={}){return this.isValid?Bt.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];const n=t.map(br).filter(o=>this.contains(o)).sort(),i=[];let{s}=this,r=0;for(;s<this.e;){const o=n[r]||this.e,a=+o>+this.e?this.e:o;i.push(Bt.fromDateTimes(s,a)),s=a,r+=1}return i}splitBy(t){const n=Ct.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:i}=this,s=1,r;const o=[];for(;i<this.e;){const a=this.start.plus(n.mapUnits(l=>l*s));r=+a>+this.e?this.e:a,o.push(Bt.fromDateTimes(i,r)),i=r,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const n=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return n>=i?null:Bt.fromDateTimes(n,i)}union(t){if(!this.isValid)return this;const n=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return Bt.fromDateTimes(n,i)}static merge(t){const[n,i]=t.sort((s,r)=>s.s-r.s).reduce(([s,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[s,r.union(o)]:[s.concat([r]),o]:[s,o],[[],null]);return i&&n.push(i),n}static xor(t){let n=null,i=0;const s=[],r=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...r),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?n=l.time:(n&&+n!=+l.time&&s.push(Bt.fromDateTimes(n,l.time)),n=null);return Bt.merge(s)}difference(...t){return Bt.xor([this].concat(t)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:ws}toLocaleString(t=rl,n={}){return this.isValid?pe.create(this.s.loc.clone(n),t).formatInterval(this):ws}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:ws}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ws}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:ws}toFormat(t,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${n}${this.e.toFormat(t)}`:ws}toDuration(t,n){return this.isValid?this.e.diff(this.s,t,n):Ct.invalid(this.invalidReason)}mapEndpoints(t){return Bt.fromDateTimes(t(this.s),t(this.e))}}class ua{static hasDST(t=qt.defaultZone){const n=ht.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(t){return Vn.isValidZone(t)}static normalizeZone(t){return hi(t,qt.defaultZone)}static months(t="long",{locale:n=null,numberingSystem:i=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||Wt.create(n,i,r)).months(t)}static monthsFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||Wt.create(n,i,r)).months(t,!0)}static weekdays(t="long",{locale:n=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Wt.create(n,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Wt.create(n,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Wt.create(t).meridiems()}static eras(t="short",{locale:n=null}={}){return Wt.create(n,null,"gregory").eras(t)}static features(){return{relative:Q0()}}}function im(e,t){const n=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor(Ct.fromMillis(i).as("days"))}function eO(e,t,n){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=im(l,c);return(u-u%7)/7}],["days",im]],s={},r=e;let o,a;for(const[l,c]of i)n.indexOf(l)>=0&&(o=l,s[l]=c(e,t),a=r.plus(s),a>t?(s[l]--,e=r.plus(s),e>t&&(a=e,s[l]--,e=r.plus(s))):e=a);return[e,s,a,o]}function nO(e,t,n,i){let[s,r,o,a]=eO(e,t,n);const l=t-s,c=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<t&&(o=s.plus({[a]:1})),o!==s&&(r[a]=(r[a]||0)+l/(o-s)));const u=Ct.fromObject(r,i);return c.length>0?Ct.fromMillis(l,i).shiftTo(...c).plus(u):u}const Ef={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},sm={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},iO=Ef.hanidec.replace(/[\[|\]]/g,"").split("");function sO(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(e[n].search(Ef.hanidec)!==-1)t+=iO.indexOf(e[n]);else for(const s in sm){const[r,o]=sm[s];i>=r&&i<=o&&(t+=i-r)}}return parseInt(t,10)}else return t}function Ke({numberingSystem:e},t=""){return new RegExp(`${Ef[e||"latn"]}${t}`)}const rO="missing Intl.DateTimeFormat.formatToParts support";function Mt(e,t=n=>n){return{regex:e,deser:([n])=>t(sO(n))}}const oO=String.fromCharCode(160),py=`[ ${oO}]`,yy=new RegExp(py,"g");function aO(e){return e.replace(/\./g,"\\.?").replace(yy,py)}function rm(e){return e.replace(/\./g,"").replace(yy," ").toLowerCase()}function qe(e,t){return e===null?null:{regex:RegExp(e.map(aO).join("|")),deser:([n])=>e.findIndex(i=>rm(n)===rm(i))+t}}function om(e,t){return{regex:e,deser:([,n,i])=>ec(n,i),groups:t}}function ha(e){return{regex:e,deser:([t])=>t}}function lO(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function cO(e,t){const n=Ke(t),i=Ke(t,"{2}"),s=Ke(t,"{3}"),r=Ke(t,"{4}"),o=Ke(t,"{6}"),a=Ke(t,"{1,2}"),l=Ke(t,"{1,3}"),c=Ke(t,"{1,6}"),u=Ke(t,"{1,9}"),h=Ke(t,"{2,4}"),f=Ke(t,"{4,6}"),d=p=>({regex:RegExp(lO(p.val)),deser:([y])=>y,literal:!0}),m=(p=>{if(e.literal)return d(p);switch(p.val){case"G":return qe(t.eras("short"),0);case"GG":return qe(t.eras("long"),0);case"y":return Mt(c);case"yy":return Mt(h,zu);case"yyyy":return Mt(r);case"yyyyy":return Mt(f);case"yyyyyy":return Mt(o);case"M":return Mt(a);case"MM":return Mt(i);case"MMM":return qe(t.months("short",!0),1);case"MMMM":return qe(t.months("long",!0),1);case"L":return Mt(a);case"LL":return Mt(i);case"LLL":return qe(t.months("short",!1),1);case"LLLL":return qe(t.months("long",!1),1);case"d":return Mt(a);case"dd":return Mt(i);case"o":return Mt(l);case"ooo":return Mt(s);case"HH":return Mt(i);case"H":return Mt(a);case"hh":return Mt(i);case"h":return Mt(a);case"mm":return Mt(i);case"m":return Mt(a);case"q":return Mt(a);case"qq":return Mt(i);case"s":return Mt(a);case"ss":return Mt(i);case"S":return Mt(l);case"SSS":return Mt(s);case"u":return ha(u);case"uu":return ha(a);case"uuu":return Mt(n);case"a":return qe(t.meridiems(),0);case"kkkk":return Mt(r);case"kk":return Mt(h,zu);case"W":return Mt(a);case"WW":return Mt(i);case"E":case"c":return Mt(n);case"EEE":return qe(t.weekdays("short",!1),1);case"EEEE":return qe(t.weekdays("long",!1),1);case"ccc":return qe(t.weekdays("short",!0),1);case"cccc":return qe(t.weekdays("long",!0),1);case"Z":case"ZZ":return om(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return om(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return ha(/[a-z_+-/]{1,256}?/i);case" ":return ha(/[^\S\n\r]/);default:return d(p)}})(e)||{invalidReason:rO};return m.token=e,m}const uO={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function hO(e,t,n){const{type:i,value:s}=e;if(i==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const r=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=uO[o];if(typeof a=="object"&&(a=a[r]),a)return{literal:!1,val:a}}function fO(e){return[`^${e.map(n=>n.regex).reduce((n,i)=>`${n}(${i.source})`,"")}$`,e]}function dO(e,t,n){const i=e.match(t);if(i){const s={};let r=1;for(const o in n)if(tr(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(i.slice(r,r+l))),r+=l}return[i,s]}else return[i,{}]}function gO(e){const t=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,i;return yt(e.z)||(n=Vn.create(e.z)),yt(e.Z)||(n||(n=new we(e.Z)),i=e.Z),yt(e.q)||(e.M=(e.q-1)*3+1),yt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),yt(e.u)||(e.S=pf(e.u)),[Object.keys(e).reduce((r,o)=>{const a=t(o);return a&&(r[a]=e[o]),r},{}),n,i]}let Uc=null;function mO(){return Uc||(Uc=ht.fromMillis(1555555555555)),Uc}function _O(e,t){if(e.literal)return e;const n=pe.macroTokenToFormatOpts(e.val),i=wy(n,t);return i==null||i.includes(void 0)?e:i}function xy(e,t){return Array.prototype.concat(...e.map(n=>_O(n,t)))}function vy(e,t,n){const i=xy(pe.parseFormat(n),e),s=i.map(o=>cO(o,e)),r=s.find(o=>o.invalidReason);if(r)return{input:t,tokens:i,invalidReason:r.invalidReason};{const[o,a]=fO(s),l=RegExp(o,"i"),[c,u]=dO(t,l,a),[h,f,d]=u?gO(u):[null,null,void 0];if(tr(u,"a")&&tr(u,"H"))throw new Nr("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:c,matches:u,result:h,zone:f,specificOffset:d}}}function pO(e,t,n){const{result:i,zone:s,specificOffset:r,invalidReason:o}=vy(e,t,n);return[i,s,r,o]}function wy(e,t){if(!e)return null;const i=pe.create(t,e).dtFormatter(mO()),s=i.formatToParts(),r=i.resolvedOptions();return s.map(o=>hO(o,e,r))}const Ey=[0,31,59,90,120,151,181,212,243,273,304,334],Ty=[0,31,60,91,121,152,182,213,244,274,305,335];function Ve(e,t){return new rn("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Cy(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function Sy(e,t,n){return n+(Po(e)?Ty:Ey)[t-1]}function Ry(e,t){const n=Po(e)?Ty:Ey,i=n.findIndex(r=>r<t),s=t-n[i];return{month:i+1,day:s}}function Yu(e){const{year:t,month:n,day:i}=e,s=Sy(t,n,i),r=Cy(t,n,i);let o=Math.floor((s-r+10)/7),a;return o<1?(a=t-1,o=al(a)):o>al(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:r,...nc(e)}}function am(e){const{weekYear:t,weekNumber:n,weekday:i}=e,s=Cy(t,1,4),r=Zr(t);let o=n*7+i-s-3,a;o<1?(a=t-1,o+=Zr(a)):o>r?(a=t+1,o-=Zr(t)):a=t;const{month:l,day:c}=Ry(a,o);return{year:a,month:l,day:c,...nc(e)}}function $c(e){const{year:t,month:n,day:i}=e,s=Sy(t,n,i);return{year:t,ordinal:s,...nc(e)}}function lm(e){const{year:t,ordinal:n}=e,{month:i,day:s}=Ry(t,n);return{year:t,month:i,day:s,...nc(e)}}function yO(e){const t=Ql(e.weekYear),n=kn(e.weekNumber,1,al(e.weekYear)),i=kn(e.weekday,1,7);return t?n?i?!1:Ve("weekday",e.weekday):Ve("week",e.week):Ve("weekYear",e.weekYear)}function xO(e){const t=Ql(e.year),n=kn(e.ordinal,1,Zr(e.year));return t?n?!1:Ve("ordinal",e.ordinal):Ve("year",e.year)}function Iy(e){const t=Ql(e.year),n=kn(e.month,1,12),i=kn(e.day,1,ol(e.year,e.month));return t?n?i?!1:Ve("day",e.day):Ve("month",e.month):Ve("year",e.year)}function by(e){const{hour:t,minute:n,second:i,millisecond:s}=e,r=kn(t,0,23)||t===24&&n===0&&i===0&&s===0,o=kn(n,0,59),a=kn(i,0,59),l=kn(s,0,999);return r?o?a?l?!1:Ve("millisecond",s):Ve("second",i):Ve("minute",n):Ve("hour",t)}const Wc="Invalid DateTime",cm=864e13;function fa(e){return new rn("unsupported zone",`the zone "${e.name}" is not supported`)}function zc(e){return e.weekData===null&&(e.weekData=Yu(e.c)),e.weekData}function Oi(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new ht({...n,...t,old:n})}function My(e,t,n){let i=e-t*60*1e3;const s=n.offset(i);if(t===s)return[i,t];i-=(s-t)*60*1e3;const r=n.offset(i);return s===r?[i,s]:[e-Math.min(s,r)*60*1e3,Math.max(s,r)]}function da(e,t){e+=t*60*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Sa(e,t,n){return My(tc(e),t,n)}function um(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,r={...e.c,year:i,month:s,day:Math.min(e.c.day,ol(i,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Ct.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=tc(r);let[l,c]=My(a,n,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function Ir(e,t,n,i,s,r){const{setZone:o,zone:a}=n;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=ht.fromObject(e,{...n,zone:l,specificOffset:r});return o?c:c.setZone(a)}else return ht.invalid(new rn("unparsable",`the input "${s}" can't be parsed as ${i}`))}function ga(e,t,n=!0){return e.isValid?pe.create(Wt.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Yc(e,t){const n=e.c.year>9999||e.c.year<0;let i="";return n&&e.c.year>=0&&(i+="+"),i+=Jt(e.c.year,n?6:4),t?(i+="-",i+=Jt(e.c.month),i+="-",i+=Jt(e.c.day)):(i+=Jt(e.c.month),i+=Jt(e.c.day)),i}function hm(e,t,n,i,s,r){let o=Jt(e.c.hour);return t?(o+=":",o+=Jt(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=":")):o+=Jt(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=Jt(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=Jt(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!r?o+="Z":e.o<0?(o+="-",o+=Jt(Math.trunc(-e.o/60)),o+=":",o+=Jt(Math.trunc(-e.o%60))):(o+="+",o+=Jt(Math.trunc(e.o/60)),o+=":",o+=Jt(Math.trunc(e.o%60)))),r&&(o+="["+e.zone.ianaName+"]"),o}const Oy={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},vO={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},wO={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Ay=["year","month","day","hour","minute","second","millisecond"],EO=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],TO=["year","ordinal","hour","minute","second","millisecond"];function fm(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new F0(e);return t}function dm(e,t){const n=hi(t.zone,qt.defaultZone),i=Wt.fromObject(t),s=qt.now();let r,o;if(yt(e.year))r=s;else{for(const c of Ay)yt(e[c])&&(e[c]=Oy[c]);const a=Iy(e)||by(e);if(a)return ht.invalid(a);const l=n.offset(s);[r,o]=Sa(e,l,n)}return new ht({ts:r,zone:n,loc:i,o})}function gm(e,t,n){const i=yt(n.round)?!0:n.round,s=(o,a)=>(o=yf(o,i||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(o,a)),r=o=>n.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(n.unit)return s(r(n.unit),n.unit);for(const o of n.units){const a=r(o);if(Math.abs(a)>=1)return s(a,o)}return s(e>t?-0:0,n.units[n.units.length-1])}function mm(e){let t={},n;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}class ht{constructor(t){const n=t.zone||qt.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new rn("invalid input"):null)||(n.isValid?null:fa(n));this.ts=yt(t.ts)?qt.now():t.ts;let s=null,r=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(n))[s,r]=[t.old.c,t.old.o];else{const a=n.offset(this.ts);s=da(this.ts,a),i=Number.isNaN(s.year)?new rn("invalid input"):null,s=i?null:s,r=i?null:a}this._zone=n,this.loc=t.loc||Wt.create(),this.invalid=i,this.weekData=null,this.c=s,this.o=r,this.isLuxonDateTime=!0}static now(){return new ht({})}static local(){const[t,n]=mm(arguments),[i,s,r,o,a,l,c]=n;return dm({year:i,month:s,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,n]=mm(arguments),[i,s,r,o,a,l,c]=n;return t.zone=we.utcInstance,dm({year:i,month:s,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,n={}){const i=qb(t)?t.valueOf():NaN;if(Number.isNaN(i))return ht.invalid("invalid input");const s=hi(n.zone,qt.defaultZone);return s.isValid?new ht({ts:i,zone:s,loc:Wt.fromObject(n)}):ht.invalid(fa(s))}static fromMillis(t,n={}){if(Ki(t))return t<-cm||t>cm?ht.invalid("Timestamp out of range"):new ht({ts:t,zone:hi(n.zone,qt.defaultZone),loc:Wt.fromObject(n)});throw new ze(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(Ki(t))return new ht({ts:t*1e3,zone:hi(n.zone,qt.defaultZone),loc:Wt.fromObject(n)});throw new ze("fromSeconds requires a numerical input")}static fromObject(t,n={}){t=t||{};const i=hi(n.zone,qt.defaultZone);if(!i.isValid)return ht.invalid(fa(i));const s=qt.now(),r=yt(n.specificOffset)?i.offset(s):n.specificOffset,o=ll(t,fm),a=!yt(o.ordinal),l=!yt(o.year),c=!yt(o.month)||!yt(o.day),u=l||c,h=o.weekYear||o.weekNumber,f=Wt.fromObject(n);if((u||a)&&h)throw new Nr("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new Nr("Can't mix ordinal dates with month/day");const d=h||o.weekday&&!u;let g,m,p=da(s,r);d?(g=EO,m=vO,p=Yu(p)):a?(g=TO,m=wO,p=$c(p)):(g=Ay,m=Oy);let y=!1;for(const L of g){const B=o[L];yt(B)?y?o[L]=m[L]:o[L]=p[L]:y=!0}const x=d?yO(o):a?xO(o):Iy(o),E=x||by(o);if(E)return ht.invalid(E);const w=d?am(o):a?lm(o):o,[S,C]=Sa(w,r,i),I=new ht({ts:S,zone:i,o:C,loc:f});return o.weekday&&u&&t.weekday!==I.weekday?ht.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${I.toISO()}`):I}static fromISO(t,n={}){const[i,s]=$M(t);return Ir(i,s,n,"ISO 8601",t)}static fromRFC2822(t,n={}){const[i,s]=WM(t);return Ir(i,s,n,"RFC 2822",t)}static fromHTTP(t,n={}){const[i,s]=zM(t);return Ir(i,s,n,"HTTP",n)}static fromFormat(t,n,i={}){if(yt(t)||yt(n))throw new ze("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:r=null}=i,o=Wt.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0}),[a,l,c,u]=pO(o,t,n);return u?ht.invalid(u):Ir(a,l,i,`format ${n}`,t,c)}static fromString(t,n,i={}){return ht.fromFormat(t,n,i)}static fromSQL(t,n={}){const[i,s]=jM(t);return Ir(i,s,n,"SQL",t)}static invalid(t,n=null){if(!t)throw new ze("need to specify a reason the DateTime is invalid");const i=t instanceof rn?t:new rn(t,n);if(qt.throwOnInvalid)throw new bb(i);return new ht({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,n={}){const i=wy(t,Wt.fromObject(n));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(t,n={}){return xy(pe.parseFormat(t),Wt.fromObject(n)).map(s=>s.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?zc(this).weekYear:NaN}get weekNumber(){return this.isValid?zc(this).weekNumber:NaN}get weekday(){return this.isValid?zc(this).weekday:NaN}get ordinal(){return this.isValid?$c(this.c).ordinal:NaN}get monthShort(){return this.isValid?ua.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ua.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ua.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ua.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,n=6e4,i=tc(this.c),s=this.zone.offset(i-t),r=this.zone.offset(i+t),o=this.zone.offset(i-s*n),a=this.zone.offset(i-r*n);if(o===a)return[this];const l=i-o*n,c=i-a*n,u=da(l,o),h=da(c,a);return u.hour===h.hour&&u.minute===h.minute&&u.second===h.second&&u.millisecond===h.millisecond?[Oi(this,{ts:l}),Oi(this,{ts:c})]:[this]}get isInLeapYear(){return Po(this.year)}get daysInMonth(){return ol(this.year,this.month)}get daysInYear(){return this.isValid?Zr(this.year):NaN}get weeksInWeekYear(){return this.isValid?al(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:n,numberingSystem:i,calendar:s}=pe.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:n,numberingSystem:i,outputCalendar:s}}toUTC(t=0,n={}){return this.setZone(we.instance(t),n)}toLocal(){return this.setZone(qt.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:i=!1}={}){if(t=hi(t,qt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(n||i){const r=t.offset(this.ts),o=this.toObject();[s]=Sa(o,r,t)}return Oi(this,{ts:s,zone:t})}else return ht.invalid(fa(t))}reconfigure({locale:t,numberingSystem:n,outputCalendar:i}={}){const s=this.loc.clone({locale:t,numberingSystem:n,outputCalendar:i});return Oi(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const n=ll(t,fm),i=!yt(n.weekYear)||!yt(n.weekNumber)||!yt(n.weekday),s=!yt(n.ordinal),r=!yt(n.year),o=!yt(n.month)||!yt(n.day),a=r||o,l=n.weekYear||n.weekNumber;if((a||s)&&l)throw new Nr("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&s)throw new Nr("Can't mix ordinal dates with month/day");let c;i?c=am({...Yu(this.c),...n}):yt(n.ordinal)?(c={...this.toObject(),...n},yt(n.day)&&(c.day=Math.min(ol(c.year,c.month),c.day))):c=lm({...$c(this.c),...n});const[u,h]=Sa(c,this.o,this.zone);return Oi(this,{ts:u,o:h})}plus(t){if(!this.isValid)return this;const n=Ct.fromDurationLike(t);return Oi(this,um(this,n))}minus(t){if(!this.isValid)return this;const n=Ct.fromDurationLike(t).negate();return Oi(this,um(this,n))}startOf(t){if(!this.isValid)return this;const n={},i=Ct.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks"&&(n.weekday=1),i==="quarters"){const s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,n={}){return this.isValid?pe.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):Wc}toLocaleString(t=rl,n={}){return this.isValid?pe.create(this.loc.clone(n),t).formatDateTime(this):Wc}toLocaleParts(t={}){return this.isValid?pe.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:n=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=Yc(this,o);return a+="T",a+=hm(this,o,n,i,s,r),a}toISODate({format:t="extended"}={}){return this.isValid?Yc(this,t==="extended"):null}toISOWeekDate(){return ga(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:n=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:r=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+hm(this,o==="extended",n,t,i,r):null}toRFC2822(){return ga(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ga(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Yc(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:n=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(n||t)&&(i&&(s+=" "),n?s+="z":t&&(s+="ZZ")),ga(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Wc}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const n={...this.c};return t.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,n="milliseconds",i={}){if(!this.isValid||!t.isValid)return Ct.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},r=Jb(n).map(Ct.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=nO(a,l,r,s);return o?c.negate():c}diffNow(t="milliseconds",n={}){return this.diff(ht.now(),t,n)}until(t){return this.isValid?Bt.fromDateTimes(this,t):this}hasSame(t,n){if(!this.isValid)return!1;const i=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(n)<=i&&i<=s.endOf(n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const n=t.base||ht.fromObject({},{zone:this.zone}),i=t.padding?this<n?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],r=t.unit;return Array.isArray(t.unit)&&(s=t.unit,r=void 0),gm(n,this.plus(i),{...t,numeric:"always",units:s,unit:r})}toRelativeCalendar(t={}){return this.isValid?gm(t.base||ht.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(ht.isDateTime))throw new ze("min requires all arguments be DateTimes");return Jg(t,n=>n.valueOf(),Math.min)}static max(...t){if(!t.every(ht.isDateTime))throw new ze("max requires all arguments be DateTimes");return Jg(t,n=>n.valueOf(),Math.max)}static fromFormatExplain(t,n,i={}){const{locale:s=null,numberingSystem:r=null}=i,o=Wt.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0});return vy(o,t,n)}static fromStringExplain(t,n,i={}){return ht.fromFormatExplain(t,n,i)}static get DATE_SHORT(){return rl}static get DATE_MED(){return P0}static get DATE_MED_WITH_WEEKDAY(){return Ab}static get DATE_FULL(){return D0}static get DATE_HUGE(){return k0}static get TIME_SIMPLE(){return N0}static get TIME_WITH_SECONDS(){return G0}static get TIME_WITH_SHORT_OFFSET(){return U0}static get TIME_WITH_LONG_OFFSET(){return $0}static get TIME_24_SIMPLE(){return W0}static get TIME_24_WITH_SECONDS(){return z0}static get TIME_24_WITH_SHORT_OFFSET(){return Y0}static get TIME_24_WITH_LONG_OFFSET(){return V0}static get DATETIME_SHORT(){return X0}static get DATETIME_SHORT_WITH_SECONDS(){return H0}static get DATETIME_MED(){return B0}static get DATETIME_MED_WITH_SECONDS(){return Z0}static get DATETIME_MED_WITH_WEEKDAY(){return Lb}static get DATETIME_FULL(){return j0}static get DATETIME_FULL_WITH_SECONDS(){return K0}static get DATETIME_HUGE(){return q0}static get DATETIME_HUGE_WITH_SECONDS(){return J0}}function br(e){if(ht.isDateTime(e))return e;if(e&&e.valueOf&&Ki(e.valueOf()))return ht.fromJSDate(e);if(e&&typeof e=="object")return ht.fromObject(e);throw new ze(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function Tf(e,t){let n=ht.fromISO(e);return t&&(n=n.setZone(`UTC+${t}`)),n.toLocaleString({weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})}function CO(e){if(!e)return"UTC";let t="GMT";return e>0&&(t+="+"),t+e.toString()}const Vu=document.createElement("i"),Xu=document.createElement("i");Vu.setAttribute("class","fa-solid fa-expand");Xu.setAttribute("class","fa-solid fa-compress");const SO={props:{geojson:{},activityFile:Lo,timezoneOffsetHours:Number},data(){return{popupFreeze:new Boolean,popupRecord:new Nu,popupOverlay:new zg({}),vec:new UI({source:new xb({features:[]}),visible:!0,style:new ji({stroke:new af({color:[60,99,130,1],width:4})})}),map:new cS({controls:[],layers:[new hR({source:new db})],view:new pn({enableRotation:!1,projection:"EPSG:4326"})})}},watch:{geojson:{handler(e){this.updateMapSource(e)}}},methods:{toStringHDMS:Rp,toTimezoneDateString:Tf,updateStartingPoint(e){var r,o;const n=((r=new Fu().readFeatures(this.geojson)[0])==null?void 0:r.getGeometry()).getCoordinates();((o=this.vec.getSource().getFeatureById("startPoint"))==null?void 0:o.getGeometry()).setCoordinates(n[e])},updateMapSource(e){var a,l;const t=this.map.getView(),n=this.vec.getSource(),i=new Fu().readFeatures(e);n.clear(),n.addFeatures(i),t.fit(n.getExtent(),{padding:[50,50,50,50]}),this.map.getControls().forEach(c=>{this.map.removeControl(c)}),jp().forEach(c=>{this.map.addControl(c)});const s=new Ib({extent:t.getViewStateAndExtent().extent});this.map.addControl(s),this.map.addControl(new Wg({label:Vu,labelActive:Xu})),this.map.addControl(new Yg);const r=new Mu(new Ks(((a=i[0])==null?void 0:a.getGeometry()).getFirstCoordinate()));r.setStyle(new ji({image:new el({crossOrigin:"anonymous",src:uE,scale:1})})),r.setId("startingPoint"),n.addFeature(r);const o=new Mu(new Ks(((l=i[0])==null?void 0:l.getGeometry()).getLastCoordinate()));o.setStyle(new ji({image:new el({crossOrigin:"anonymous",src:cE,scale:1})})),o.setId("destinationPoint"),n.addFeature(o)},updateControl(){this.map.addControl(new Wg({label:Vu,labelActive:Xu})),this.map.addControl(new Yg)},findNearestRecord(e){var i,s;let t=new Nu,n=Number.MAX_VALUE;return(s=(i=this.activityFile)==null?void 0:i.records)==null||s.forEach(r=>{if(!r.positionLong||!r.positionLat)return;const o=Math.abs(Math.sqrt(Math.pow(r.positionLong-e[0],2)+Math.pow(r.positionLat-e[1],2)));o<n&&(n=o,t=r)}),t},lineStringFeatureListener(e,t){e=="singleclick"&&(this.popupFreeze=!this.popupFreeze&&this.popupOverlay.getPosition()!=null),this.popupFreeze||this.popupOverlay.setPosition(void 0),!(this.popupFreeze==!0&&this.popupOverlay.getPosition()!=null)&&this.map.forEachFeatureAtPixel(t.pixel,n=>{n.getGeometry()instanceof qa&&(this.popupRecord=this.findNearestRecord(t.coordinate),this.popupOverlay.setPosition([this.popupRecord.positionLong,this.popupRecord.positionLat]),this.popupFreeze=e=="singleclick")},{hitTolerance:10})}},mounted(){this.popupOverlay=new zg({element:document.getElementById("popup")}),this.map.addOverlay(this.popupOverlay),this.map.addLayer(this.vec),this.map.setTarget("map"),this.map.on("precompose",()=>this.popupOverlay.setPosition(void 0)),this.map.on("pointermove",e=>this.lineStringFeatureListener(e.type,e)),this.map.on("singleclick",e=>this.lineStringFeatureListener(e.type,e))}};const Cf=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n},RO=A("div",{id:"map",style:{width:"100%",height:"100%"}},null,-1),IO={id:"popup",class:"ol-popup"},bO={class:"popup-content"},MO=A("span",null,"Time:",-1),OO=A("span",null,"Distance:",-1),AO=A("span",null," km",-1),LO=A("span",null,"Speed:",-1),FO=A("span",null," km/h",-1),PO=A("span",null,"Cadence:",-1),DO=A("span",null," rpm",-1),kO=A("span",null,"Heart Rate:",-1),NO=A("span",null," bpm",-1),GO=A("span",null,"Power:",-1),UO=A("span",null," watts",-1),$O=A("span",null,"Altitude:",-1),WO=A("span",null," masl",-1),zO=A("span",null,"Location:",-1);function YO(e,t,n,i,s,r){var o;return Rt(),Ft(We,null,[RO,A("div",IO,[A("div",bO,[A("div",null,[MO,A("span",null,Tt(s.popupRecord.timestamp?r.toTimezoneDateString(s.popupRecord.timestamp,n.timezoneOffsetHours):"-"),1)]),A("div",null,[OO,A("span",null,Tt(s.popupRecord.distance?(s.popupRecord.distance/1e3).toFixed(2):"-"),1),AO]),A("div",null,[LO,A("span",null,Tt(s.popupRecord.speed?(s.popupRecord.speed*3600/1e3).toFixed(2):"-"),1),FO]),A("div",null,[PO,A("span",null,Tt(s.popupRecord.cadence?s.popupRecord.cadence:"-"),1),DO]),A("div",null,[kO,A("span",null,Tt(s.popupRecord.heartRate?s.popupRecord.heartRate:"-"),1),NO]),A("div",null,[GO,A("span",null,Tt(s.popupRecord.power?s.popupRecord.power:"-"),1),UO]),A("div",null,[$O,A("span",null,Tt(s.popupRecord.altitude?(o=s.popupRecord.altitude)==null?void 0:o.toFixed(2):"-"),1),WO]),A("div",null,[zO,A("span",null,Tt(s.popupRecord.positionLong&&s.popupRecord.positionLat?r.toStringHDMS([s.popupRecord.positionLong,s.popupRecord.positionLat]):"-"),1)])])])],64)}const VO=Cf(SO,[["render",YO]]);const XO={props:{activityFile:Lo,timezoneOffsetHours:Number},methods:{toTimezoneDateString:Tf,GMTString:CO}};const HO=A("div",{style:{"text-align":"center"}},[A("input",{class:"input",type:"file",id:"fileInput",accept:".fit"})],-1),BO={key:0,class:"time-created"},ZO={key:1,class:"manufacturer"},jO={class:"analysis"},KO={class:"summary"},qO={key:0,class:"section-title"},JO={class:"summary-grid"},QO={key:0,class:"summary-item"},tA=A("div",{class:"summary-title"},"Sport",-1),eA={class:"summary-value"},nA={key:1,class:"summary-item"},iA=A("div",{class:"summary-title"},"Sub Sport",-1),sA={class:"summary-value"},rA={class:"summary-grid"},oA={key:0,class:"summary-item"},aA=A("div",{class:"summary-title"},"Total Elapsed Time",-1),lA={class:"summary-value"},cA=A("i",{class:"fa-solid fa-hourglass-end"},null,-1),uA={key:1,class:"summary-item"},hA=A("div",{class:"summary-title"},"Total Moving Time",-1),fA={class:"summary-value"},dA=A("i",{class:"fa-solid fa-hourglass-half"},null,-1),gA={class:"summary-grid"},mA={key:0,class:"summary-item"},_A=A("div",{class:"summary-title"},"Total Distance",-1),pA={class:"summary-value"},yA=A("i",{class:"fa-solid fa-road"},null,-1),xA={key:1,class:"summary-item"},vA=A("div",{class:"summary-title"},"Total Calories",-1),wA={class:"summary-value"},EA=A("i",{class:"fa-solid fa-droplet"},null,-1),TA={class:"summary-grid"},CA={key:0,class:"summary-item"},SA=A("div",{class:"summary-title"},"Avg Speed",-1),RA={class:"summary-value"},IA=A("i",{class:"fa-solid fa-gauge"},null,-1),bA={key:1,class:"summary-item"},MA=A("div",{class:"summary-title"},"Max Speed",-1),OA={class:"summary-value"},AA=A("i",{class:"fa-solid fa-gauge-high"},null,-1),LA={class:"summary-grid"},FA={key:0,class:"summary-item"},PA=A("div",{class:"summary-title"},"Avg Heart Rate",-1),DA={class:"summary-value"},kA=A("i",{class:"fa-solid fa-heart-pulse"},null,-1),NA={key:1,class:"summary-item"},GA=A("div",{class:"summary-title"},"Max Heart Rate",-1),UA={class:"summary-value"},$A=A("i",{class:"fa-solid fa-heart-pulse"},null,-1),WA={class:"summary-grid"},zA={key:0,class:"summary-item"},YA=A("div",{class:"summary-title"},"Avg Cadence",-1),VA={class:"summary-value"},XA=A("i",{class:"fa-solid fa-rotate"},null,-1),HA={key:1,class:"summary-item"},BA=A("div",{class:"summary-title"},"Max Cadence",-1),ZA={class:"summary-value"},jA=A("i",{class:"fa-solid fa-rotate"},null,-1),KA={class:"summary-grid"},qA={key:0,class:"summary-item"},JA=A("div",{class:"summary-title"},"Avg Power",-1),QA=A("div",{class:"summary-value"},[Kt(" {"),A("i",{class:"fa-solid fa-bolt-lightning"}),Kt(" { session.avgPower }} ")],-1),tL=[JA,QA],eL={key:1,class:"summary-item"},nL=A("div",{class:"summary-title"},"Max Power",-1),iL={class:"summary-value"},sL=A("i",{class:"fa-solid fa-bolt-lightning"},null,-1),rL={class:"summary-grid"},oL={key:0,class:"summary-item"},aL=A("div",{class:"summary-title"},"Avg Temperature",-1),lL={class:"summary-value"},cL=A("i",{class:"fa-solid fa-temperature-low"},null,-1),uL={key:1,class:"summary-item"},hL=A("div",{class:"summary-title"},"Max Temperature",-1),fL={class:"summary-value"},dL=A("i",{class:"fa-solid fa-temperature-high"},null,-1),gL={class:"summary-grid"},mL={key:0,class:"summary-item"},_L=A("div",{class:"summary-title"},"Total Ascent",-1),pL={class:"summary-value"},yL=A("i",{class:"fa-solid fa-arrow-trend-up"},null,-1),xL={key:1,class:"summary-item"},vL=A("div",{class:"summary-title"},"Total Descent",-1),wL={class:"summary-value"},EL=A("i",{class:"fa-solid fa-arrow-trend-down"},null,-1),TL={class:"summary-grid"},CL={key:0,class:"summary-item"},SL=A("div",{class:"summary-title"},"Avg Altitude",-1),RL={class:"summary-value"},IL=A("i",{class:"fa-solid fa-mountain"},null,-1),bL={key:1,class:"summary-item"},ML=A("div",{class:"summary-title"},"Max Altitude",-1),OL={class:"summary-value"},AL=A("i",{class:"fa-solid fa-mountain"},null,-1);function LL(e,t,n,i,s,r){var o,a,l,c,u;return Rt(),Ft(We,null,[HO,(a=(o=n.activityFile)==null?void 0:o.fileId)!=null&&a.timeCreated?(Rt(),Ft("div",BO," Created on: "+Tt(r.toTimezoneDateString(n.activityFile.fileId.timeCreated,n.timezoneOffsetHours))+" "+Tt(r.GMTString(n.timezoneOffsetHours)),1)):Vt("",!0),(l=n.activityFile)!=null&&l.fileId?(Rt(),Ft("div",ZO," Device: "+Tt(n.activityFile.fileId.manufacturer)+" ("+Tt(n.activityFile.fileId.product)+") ",1)):Vt("",!0),A("div",jO,[A("div",KO,[(c=n.activityFile)!=null&&c.fileId?(Rt(),Ft("h4",qO,"Summary")):Vt("",!0),(Rt(!0),Ft(We,null,tv((u=n.activityFile)==null?void 0:u.sessions,(h,f)=>(Rt(),Ft("div",{key:f},[A("div",JO,[h.sport?(Rt(),Ft("div",QO,[tA,A("div",eA,Tt(h.sport),1)])):Vt("",!0),h.subSport?(Rt(),Ft("div",nA,[iA,A("div",sA,Tt(h.subSport),1)])):Vt("",!0)]),A("div",rA,[h.totalElapsedTime?(Rt(),Ft("div",oA,[aA,A("div",lA,[cA,Kt(" "+Tt(new Date(h.totalElapsedTime*1e3).toISOString().slice(11,19)),1)])])):Vt("",!0),h.totalMovingTime?(Rt(),Ft("div",uA,[hA,A("div",fA,[dA,Kt(" "+Tt(new Date(h.totalMovingTime*1e3).toISOString().slice(11,19)),1)])])):Vt("",!0)]),A("div",gA,[h.totalDistance?(Rt(),Ft("div",mA,[_A,A("div",pA,[yA,Kt(" "+Tt((h.totalDistance/1e3).toFixed(2))+" km ",1)])])):Vt("",!0),h.totalCalories?(Rt(),Ft("div",xA,[vA,A("div",wA,[EA,Kt(" "+Tt(h.totalCalories.toLocaleString())+" Cal ",1)])])):Vt("",!0)]),A("div",TA,[h.avgSpeed?(Rt(),Ft("div",CA,[SA,A("div",RA,[IA,Kt(" "+Tt((h.avgSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):Vt("",!0),h.maxSpeed?(Rt(),Ft("div",bA,[MA,A("div",OA,[AA,Kt(" "+Tt((h.maxSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):Vt("",!0)]),A("div",LA,[h.avgHeartRate?(Rt(),Ft("div",FA,[PA,A("div",DA,[kA,Kt(" "+Tt(h.avgHeartRate)+" bpm ",1)])])):Vt("",!0),h.maxHeartRate?(Rt(),Ft("div",NA,[GA,A("div",UA,[$A,Kt(" "+Tt(h.maxHeartRate)+" bpm ",1)])])):Vt("",!0)]),A("div",WA,[h.avgCadence?(Rt(),Ft("div",zA,[YA,A("div",VA,[XA,Kt(" "+Tt(h.avgCadence)+" rpm ",1)])])):Vt("",!0),h.maxCadence?(Rt(),Ft("div",HA,[BA,A("div",ZA,[jA,Kt(" "+Tt(h.maxCadence)+" rpm ",1)])])):Vt("",!0)]),A("div",KA,[h.avgPower?(Rt(),Ft("div",qA,tL)):Vt("",!0),h.maxPower?(Rt(),Ft("div",eL,[nL,A("div",iL,[sL,Kt(" "+Tt(h.maxPower),1)])])):Vt("",!0)]),A("div",rL,[h.avgTemperature?(Rt(),Ft("div",oL,[aL,A("div",lL,[cL,Kt(" "+Tt(h.avgTemperature)+" °C ",1)])])):Vt("",!0),h.maxTemperature?(Rt(),Ft("div",uL,[hL,A("div",fL,[dL,Kt(" "+Tt(h.maxTemperature)+" °C ",1)])])):Vt("",!0)]),A("div",gL,[h.totalAscent?(Rt(),Ft("div",mL,[_L,A("div",pL,[yL,Kt(" "+Tt(h.totalAscent)+" m ",1)])])):Vt("",!0),h.totalDescent?(Rt(),Ft("div",xL,[vL,A("div",wL,[EL,Kt(" "+Tt(h.totalDescent)+" m ",1)])])):Vt("",!0)]),A("div",TL,[h.avgAltitude?(Rt(),Ft("div",CL,[SL,A("div",RL,[IL,Kt(" "+Tt(h.avgAltitude.toFixed(2))+" m ",1)])])):Vt("",!0),h.maxAltitude?(Rt(),Ft("div",bL,[ML,A("div",OL,[AL,Kt(" "+Tt(h.maxAltitude.toFixed(2))+" m ",1)])])):Vt("",!0)])]))),128))])])],64)}const FL=Cf(XO,[["render",LL]]);function Ra(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function PL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ic(e){let t,n,i;e.length!==2?(t=Ra,n=(a,l)=>Ra(e(a),l),i=(a,l)=>e(a)-l):(t=e===Ra||e===PL?e:DL,n=e,i=e);function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function r(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=s(a,l,c,u-1);return h>c&&i(a[h-1],l)>-i(a[h],l)?h-1:h}return{left:s,center:o,right:r}}function DL(){return 0}function kL(e){return e===null?NaN:+e}function*GN(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const NL=ic(Ra),GL=NL.right;ic(kL).center;const UL=GL;function $L(e,t){let n,i;if(t===void 0)for(const s of e)s!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)));else{let s=-1;for(let r of e)(r=t(r,++s,e))!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)))}return[n,i]}const WL=Math.sqrt(50),zL=Math.sqrt(10),YL=Math.sqrt(2);function cl(e,t,n){const i=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(i)),r=i/Math.pow(10,s),o=r>=WL?10:r>=zL?5:r>=YL?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?cl(e,t,n*2):[a,l,c]}function VL(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[s,r,o]=i?cl(t,e,n):cl(e,t,n);if(!(r>=s))return[];const a=r-s+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(r-c)/-o;else for(let c=0;c<a;++c)l[c]=(r-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function Hu(e,t,n){return t=+t,e=+e,n=+n,cl(e,t,n)[2]}function Bu(e,t,n){t=+t,e=+e,n=+n;const i=t<e,s=i?Hu(t,e,n):Hu(e,t,n);return(i?-1:1)*(s<0?1/-s:s)}function XL(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function _m(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function HL(e,t){let n=0,i=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(++n,i+=s);else{let s=-1;for(let r of e)(r=t(r,++s,e))!=null&&(r=+r)>=r&&(++n,i+=r)}if(n)return i/n}function BL(e){return e}var Vc=1,Xc=2,Zu=3,Ur=4,pm=1e-6;function ZL(e){return"translate("+e+",0)"}function jL(e){return"translate(0,"+e+")"}function KL(e){return t=>+e(t)}function qL(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function JL(){return!this.__axis}function Ly(e,t){var n=[],i=null,s=null,r=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===Vc||e===Ur?-1:1,u=e===Ur||e===Xc?"x":"y",h=e===Vc||e===Zu?ZL:jL;function f(d){var g=i??(t.ticks?t.ticks.apply(t,n):t.domain()),m=s??(t.tickFormat?t.tickFormat.apply(t,n):BL),p=Math.max(r,0)+a,y=t.range(),x=+y[0]+l,E=+y[y.length-1]+l,w=(t.bandwidth?qL:KL)(t.copy(),l),S=d.selection?d.selection():d,C=S.selectAll(".domain").data([null]),I=S.selectAll(".tick").data(g,t).order(),L=I.exit(),B=I.enter().append("g").attr("class","tick"),F=I.select("line"),N=I.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),I=I.merge(B),F=F.merge(B.append("line").attr("stroke","currentColor").attr(u+"2",c*r)),N=N.merge(B.append("text").attr("fill","currentColor").attr(u,c*p).attr("dy",e===Vc?"0em":e===Zu?"0.71em":"0.32em")),d!==S&&(C=C.transition(d),I=I.transition(d),F=F.transition(d),N=N.transition(d),L=L.transition(d).attr("opacity",pm).attr("transform",function(j){return isFinite(j=w(j))?h(j+l):this.getAttribute("transform")}),B.attr("opacity",pm).attr("transform",function(j){var K=this.parentNode.__axis;return h((K&&isFinite(K=K(j))?K:w(j))+l)})),L.remove(),C.attr("d",e===Ur||e===Xc?o?"M"+c*o+","+x+"H"+l+"V"+E+"H"+c*o:"M"+l+","+x+"V"+E:o?"M"+x+","+c*o+"V"+l+"H"+E+"V"+c*o:"M"+x+","+l+"H"+E),I.attr("opacity",1).attr("transform",function(j){return h(w(j)+l)}),F.attr(u+"2",c*r),N.attr(u,c*p).text(m),S.filter(JL).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Xc?"start":e===Ur?"end":"middle"),S.each(function(){this.__axis=w})}return f.scale=function(d){return arguments.length?(t=d,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),f):i&&i.slice()},f.tickFormat=function(d){return arguments.length?(s=d,f):s},f.tickSize=function(d){return arguments.length?(r=o=+d,f):r},f.tickSizeInner=function(d){return arguments.length?(r=+d,f):r},f.tickSizeOuter=function(d){return arguments.length?(o=+d,f):o},f.tickPadding=function(d){return arguments.length?(a=+d,f):a},f.offset=function(d){return arguments.length?(l=+d,f):l},f}function QL(e){return Ly(Zu,e)}function tF(e){return Ly(Ur,e)}var eF={value:()=>{}};function Fy(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Ia(n)}function Ia(e){this._=e}function nF(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Ia.prototype=Fy.prototype={constructor:Ia,on:function(e,t){var n=this._,i=nF(e+"",n),s,r=-1,o=i.length;if(arguments.length<2){for(;++r<o;)if((s=(e=i[r]).type)&&(s=iF(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<o;)if(s=(e=i[r]).type)n[s]=ym(n[s],e.name,t);else if(t==null)for(s in n)n[s]=ym(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ia(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),i=0,s,r;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],s=0,r=i.length;s<r;++s)i[s].value.apply(t,n)}};function iF(e,t){for(var n=0,i=e.length,s;n<i;++n)if((s=e[n]).name===t)return s.value}function ym(e,t,n){for(var i=0,s=e.length;i<s;++i)if(e[i].name===t){e[i]=eF,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ju="http://www.w3.org/1999/xhtml";const xm={svg:"http://www.w3.org/2000/svg",xhtml:ju,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),xm.hasOwnProperty(t)?{space:xm[t],local:e}:e}function sF(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ju&&t.documentElement.namespaceURI===ju?t.createElement(e):t.createElementNS(n,e)}}function rF(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Py(e){var t=sc(e);return(t.local?rF:sF)(t)}function oF(){}function Sf(e){return e==null?oF:function(){return this.querySelector(e)}}function aF(e){typeof e!="function"&&(e=Sf(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var r=t[s],o=r.length,a=i[s]=new Array(o),l,c,u=0;u<o;++u)(l=r[u])&&(c=e.call(l,l.__data__,u,r))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Ne(i,this._parents)}function lF(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cF(){return[]}function Dy(e){return e==null?cF:function(){return this.querySelectorAll(e)}}function uF(e){return function(){return lF(e.apply(this,arguments))}}function hF(e){typeof e=="function"?e=uF(e):e=Dy(e);for(var t=this._groups,n=t.length,i=[],s=[],r=0;r<n;++r)for(var o=t[r],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(e.call(l,l.__data__,c,o)),s.push(l));return new Ne(i,s)}function ky(e){return function(){return this.matches(e)}}function Ny(e){return function(t){return t.matches(e)}}var fF=Array.prototype.find;function dF(e){return function(){return fF.call(this.children,e)}}function gF(){return this.firstElementChild}function mF(e){return this.select(e==null?gF:dF(typeof e=="function"?e:Ny(e)))}var _F=Array.prototype.filter;function pF(){return Array.from(this.children)}function yF(e){return function(){return _F.call(this.children,e)}}function xF(e){return this.selectAll(e==null?pF:yF(typeof e=="function"?e:Ny(e)))}function vF(e){typeof e!="function"&&(e=ky(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var r=t[s],o=r.length,a=i[s]=[],l,c=0;c<o;++c)(l=r[c])&&e.call(l,l.__data__,c,r)&&a.push(l);return new Ne(i,this._parents)}function Gy(e){return new Array(e.length)}function wF(){return new Ne(this._enter||this._groups.map(Gy),this._parents)}function ul(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ul.prototype={constructor:ul,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function EF(e){return function(){return e}}function TF(e,t,n,i,s,r){for(var o=0,a,l=t.length,c=r.length;o<c;++o)(a=t[o])?(a.__data__=r[o],i[o]=a):n[o]=new ul(e,r[o]);for(;o<l;++o)(a=t[o])&&(s[o]=a)}function CF(e,t,n,i,s,r,o){var a,l,c=new Map,u=t.length,h=r.length,f=new Array(u),d;for(a=0;a<u;++a)(l=t[a])&&(f[a]=d=o.call(l,l.__data__,a,t)+"",c.has(d)?s[a]=l:c.set(d,l));for(a=0;a<h;++a)d=o.call(e,r[a],a,r)+"",(l=c.get(d))?(i[a]=l,l.__data__=r[a],c.delete(d)):n[a]=new ul(e,r[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(f[a])===l&&(s[a]=l)}function SF(e){return e.__data__}function RF(e,t){if(!arguments.length)return Array.from(this,SF);var n=t?CF:TF,i=this._parents,s=this._groups;typeof e!="function"&&(e=EF(e));for(var r=s.length,o=new Array(r),a=new Array(r),l=new Array(r),c=0;c<r;++c){var u=i[c],h=s[c],f=h.length,d=IF(e.call(u,u&&u.__data__,c,i)),g=d.length,m=a[c]=new Array(g),p=o[c]=new Array(g),y=l[c]=new Array(f);n(u,h,m,p,y,d,t);for(var x=0,E=0,w,S;x<g;++x)if(w=m[x]){for(x>=E&&(E=x+1);!(S=p[E])&&++E<g;);w._next=S||null}}return o=new Ne(o,i),o._enter=a,o._exit=l,o}function IF(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bF(){return new Ne(this._exit||this._groups.map(Gy),this._parents)}function MF(e,t,n){var i=this.enter(),s=this,r=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?r.remove():n(r),i&&s?i.merge(s).order():s}function OF(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,s=n.length,r=i.length,o=Math.min(s,r),a=new Array(s),l=0;l<o;++l)for(var c=n[l],u=i[l],h=c.length,f=a[l]=new Array(h),d,g=0;g<h;++g)(d=c[g]||u[g])&&(f[g]=d);for(;l<s;++l)a[l]=n[l];return new Ne(a,this._parents)}function AF(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],s=i.length-1,r=i[s],o;--s>=0;)(o=i[s])&&(r&&o.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(o,r),r=o);return this}function LF(e){e||(e=FF);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,i=n.length,s=new Array(i),r=0;r<i;++r){for(var o=n[r],a=o.length,l=s[r]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Ne(s,this._parents).order()}function FF(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function PF(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function DF(){return Array.from(this)}function kF(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],s=0,r=i.length;s<r;++s){var o=i[s];if(o)return o}return null}function NF(){let e=0;for(const t of this)++e;return e}function GF(){return!this.node()}function UF(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var s=t[n],r=0,o=s.length,a;r<o;++r)(a=s[r])&&e.call(a,a.__data__,r,s);return this}function $F(e){return function(){this.removeAttribute(e)}}function WF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zF(e,t){return function(){this.setAttribute(e,t)}}function YF(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function VF(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function XF(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function HF(e,t){var n=sc(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?WF:$F:typeof t=="function"?n.local?XF:VF:n.local?YF:zF)(n,t))}function Uy(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function BF(e){return function(){this.style.removeProperty(e)}}function ZF(e,t,n){return function(){this.style.setProperty(e,t,n)}}function jF(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function KF(e,t,n){return arguments.length>1?this.each((t==null?BF:typeof t=="function"?jF:ZF)(e,t,n??"")):er(this.node(),e)}function er(e,t){return e.style.getPropertyValue(t)||Uy(e).getComputedStyle(e,null).getPropertyValue(t)}function qF(e){return function(){delete this[e]}}function JF(e,t){return function(){this[e]=t}}function QF(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function tP(e,t){return arguments.length>1?this.each((t==null?qF:typeof t=="function"?QF:JF)(e,t)):this.node()[e]}function $y(e){return e.trim().split(/^|\s+/)}function Rf(e){return e.classList||new Wy(e)}function Wy(e){this._node=e,this._names=$y(e.getAttribute("class")||"")}Wy.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function zy(e,t){for(var n=Rf(e),i=-1,s=t.length;++i<s;)n.add(t[i])}function Yy(e,t){for(var n=Rf(e),i=-1,s=t.length;++i<s;)n.remove(t[i])}function eP(e){return function(){zy(this,e)}}function nP(e){return function(){Yy(this,e)}}function iP(e,t){return function(){(t.apply(this,arguments)?zy:Yy)(this,e)}}function sP(e,t){var n=$y(e+"");if(arguments.length<2){for(var i=Rf(this.node()),s=-1,r=n.length;++s<r;)if(!i.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?iP:t?eP:nP)(n,t))}function rP(){this.textContent=""}function oP(e){return function(){this.textContent=e}}function aP(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lP(e){return arguments.length?this.each(e==null?rP:(typeof e=="function"?aP:oP)(e)):this.node().textContent}function cP(){this.innerHTML=""}function uP(e){return function(){this.innerHTML=e}}function hP(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fP(e){return arguments.length?this.each(e==null?cP:(typeof e=="function"?hP:uP)(e)):this.node().innerHTML}function dP(){this.nextSibling&&this.parentNode.appendChild(this)}function gP(){return this.each(dP)}function mP(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _P(){return this.each(mP)}function pP(e){var t=typeof e=="function"?e:Py(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function yP(){return null}function xP(e,t){var n=typeof e=="function"?e:Py(e),i=t==null?yP:typeof t=="function"?t:Sf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function vP(){var e=this.parentNode;e&&e.removeChild(this)}function wP(){return this.each(vP)}function EP(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TP(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function CP(e){return this.select(e?TP:EP)}function SP(e){return arguments.length?this.property("__data__",e):this.node().__data__}function RP(e){return function(t){e.call(this,t,this.__data__)}}function IP(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function bP(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,s=t.length,r;n<s;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++i]=r;++i?t.length=i:delete this.__on}}}function MP(e,t,n){return function(){var i=this.__on,s,r=RP(t);if(i){for(var o=0,a=i.length;o<a;++o)if((s=i[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=r,s.options=n),s.value=t;return}}this.addEventListener(e.type,r,n),s={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(s):this.__on=[s]}}function OP(e,t,n){var i=IP(e+""),s,r=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(s=0,u=a[l];s<r;++s)if((o=i[s]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?MP:bP,s=0;s<r;++s)this.each(a(i[s],t,n));return this}function Vy(e,t,n){var i=Uy(e),s=i.CustomEvent;typeof s=="function"?s=new s(t,n):(s=i.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function AP(e,t){return function(){return Vy(this,e,t)}}function LP(e,t){return function(){return Vy(this,e,t.apply(this,arguments))}}function FP(e,t){return this.each((typeof t=="function"?LP:AP)(e,t))}function*PP(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],s=0,r=i.length,o;s<r;++s)(o=i[s])&&(yield o)}var Xy=[null];function Ne(e,t){this._groups=e,this._parents=t}function No(){return new Ne([[document.documentElement]],Xy)}function DP(){return this}Ne.prototype=No.prototype={constructor:Ne,select:aF,selectAll:hF,selectChild:mF,selectChildren:xF,filter:vF,data:RF,enter:wF,exit:bF,join:MF,merge:OF,selection:DP,order:AF,sort:LF,call:PF,nodes:DF,node:kF,size:NF,empty:GF,each:UF,attr:HF,style:KF,property:tP,classed:sP,text:lP,html:fP,raise:gP,lower:_P,append:pP,insert:xP,remove:wP,clone:CP,datum:SP,on:OP,dispatch:FP,[Symbol.iterator]:PP};function vm(e){return typeof e=="string"?new Ne([[document.querySelector(e)]],[document.documentElement]):new Ne([[e]],Xy)}function kP(e){let t;for(;t=e.sourceEvent;)e=t;return e}function NP(e,t){if(e=kP(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}function If(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Hy(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Uo(){}var _o=.7,hl=1/_o,$s="\\s*([+-]?\\d+)\\s*",po="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",En="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",GP=/^#([0-9a-f]{3,8})$/,UP=new RegExp(`^rgb\\(${$s},${$s},${$s}\\)$`),$P=new RegExp(`^rgb\\(${En},${En},${En}\\)$`),WP=new RegExp(`^rgba\\(${$s},${$s},${$s},${po}\\)$`),zP=new RegExp(`^rgba\\(${En},${En},${En},${po}\\)$`),YP=new RegExp(`^hsl\\(${po},${En},${En}\\)$`),VP=new RegExp(`^hsla\\(${po},${En},${En},${po}\\)$`),wm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};If(Uo,es,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Em,formatHex:Em,formatHex8:XP,formatHsl:HP,formatRgb:Tm,toString:Tm});function Em(){return this.rgb().formatHex()}function XP(){return this.rgb().formatHex8()}function HP(){return By(this).formatHsl()}function Tm(){return this.rgb().formatRgb()}function es(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=GP.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Cm(t):n===3?new be(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ma(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ma(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=UP.exec(e))?new be(t[1],t[2],t[3],1):(t=$P.exec(e))?new be(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=WP.exec(e))?ma(t[1],t[2],t[3],t[4]):(t=zP.exec(e))?ma(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=YP.exec(e))?Im(t[1],t[2]/100,t[3]/100,1):(t=VP.exec(e))?Im(t[1],t[2]/100,t[3]/100,t[4]):wm.hasOwnProperty(e)?Cm(wm[e]):e==="transparent"?new be(NaN,NaN,NaN,0):null}function Cm(e){return new be(e>>16&255,e>>8&255,e&255,1)}function ma(e,t,n,i){return i<=0&&(e=t=n=NaN),new be(e,t,n,i)}function BP(e){return e instanceof Uo||(e=es(e)),e?(e=e.rgb(),new be(e.r,e.g,e.b,e.opacity)):new be}function fl(e,t,n,i){return arguments.length===1?BP(e):new be(e,t,n,i??1)}function be(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}If(be,fl,Hy(Uo,{brighter(e){return e=e==null?hl:Math.pow(hl,e),new be(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_o:Math.pow(_o,e),new be(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new be(qi(this.r),qi(this.g),qi(this.b),dl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sm,formatHex:Sm,formatHex8:ZP,formatRgb:Rm,toString:Rm}));function Sm(){return`#${Wi(this.r)}${Wi(this.g)}${Wi(this.b)}`}function ZP(){return`#${Wi(this.r)}${Wi(this.g)}${Wi(this.b)}${Wi((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rm(){const e=dl(this.opacity);return`${e===1?"rgb(":"rgba("}${qi(this.r)}, ${qi(this.g)}, ${qi(this.b)}${e===1?")":`, ${e})`}`}function dl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wi(e){return e=qi(e),(e<16?"0":"")+e.toString(16)}function Im(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new nn(e,t,n,i)}function By(e){if(e instanceof nn)return new nn(e.h,e.s,e.l,e.opacity);if(e instanceof Uo||(e=es(e)),!e)return new nn;if(e instanceof nn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,s=Math.min(t,n,i),r=Math.max(t,n,i),o=NaN,a=r-s,l=(r+s)/2;return a?(t===r?o=(n-i)/a+(n<i)*6:n===r?o=(i-t)/a+2:o=(t-n)/a+4,a/=l<.5?r+s:2-r-s,o*=60):a=l>0&&l<1?0:o,new nn(o,a,l,e.opacity)}function jP(e,t,n,i){return arguments.length===1?By(e):new nn(e,t,n,i??1)}function nn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}If(nn,jP,Hy(Uo,{brighter(e){return e=e==null?hl:Math.pow(hl,e),new nn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_o:Math.pow(_o,e),new nn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,s=2*n-i;return new be(Hc(e>=240?e-240:e+120,s,i),Hc(e,s,i),Hc(e<120?e+240:e-120,s,i),this.opacity)},clamp(){return new nn(bm(this.h),_a(this.s),_a(this.l),dl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dl(this.opacity);return`${e===1?"hsl(":"hsla("}${bm(this.h)}, ${_a(this.s)*100}%, ${_a(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bm(e){return e=(e||0)%360,e<0?e+360:e}function _a(e){return Math.max(0,Math.min(1,e||0))}function Hc(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function KP(e,t,n,i,s){var r=e*e,o=r*e;return((1-3*e+3*r-o)*t+(4-6*r+3*o)*n+(1+3*e+3*r-3*o)*i+o*s)/6}function qP(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),s=e[i],r=e[i+1],o=i>0?e[i-1]:2*s-r,a=i<t-1?e[i+2]:2*r-s;return KP((n-i/t)*t,o,s,r,a)}}const rc=e=>()=>e;function Zy(e,t){return function(n){return e+n*t}}function JP(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function UN(e,t){var n=t-e;return n?Zy(e,n>180||n<-180?n-360*Math.round(n/360):n):rc(isNaN(e)?t:e)}function QP(e){return(e=+e)==1?jy:function(t,n){return n-t?JP(t,n,e):rc(isNaN(t)?n:t)}}function jy(e,t){var n=t-e;return n?Zy(e,n):rc(isNaN(e)?t:e)}const nr=function e(t){var n=QP(t);function i(s,r){var o=n((s=fl(s)).r,(r=fl(r)).r),a=n(s.g,r.g),l=n(s.b,r.b),c=jy(s.opacity,r.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return i.gamma=e,i}(1);function tD(e){return function(t){var n=t.length,i=new Array(n),s=new Array(n),r=new Array(n),o,a;for(o=0;o<n;++o)a=fl(t[o]),i[o]=a.r||0,s[o]=a.g||0,r[o]=a.b||0;return i=e(i),s=e(s),r=e(r),a.opacity=1,function(l){return a.r=i(l),a.g=s(l),a.b=r(l),a+""}}}var eD=tD(qP);function nD(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),s;return function(r){for(s=0;s<n;++s)i[s]=e[s]*(1-r)+t[s]*r;return i}}function iD(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function sD(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,s=new Array(i),r=new Array(n),o;for(o=0;o<i;++o)s[o]=bf(e[o],t[o]);for(;o<n;++o)r[o]=t[o];return function(a){for(o=0;o<i;++o)r[o]=s[o](a);return r}}function rD(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Qe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function oD(e,t){var n={},i={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=bf(e[s],t[s]):i[s]=t[s];return function(r){for(s in n)i[s]=n[s](r);return i}}var Ku=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bc=new RegExp(Ku.source,"g");function aD(e){return function(){return e}}function lD(e){return function(t){return e(t)+""}}function Ky(e,t){var n=Ku.lastIndex=Bc.lastIndex=0,i,s,r,o=-1,a=[],l=[];for(e=e+"",t=t+"";(i=Ku.exec(e))&&(s=Bc.exec(t));)(r=s.index)>n&&(r=t.slice(n,r),a[o]?a[o]+=r:a[++o]=r),(i=i[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Qe(i,s)})),n=Bc.lastIndex;return n<t.length&&(r=t.slice(n),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?lD(l[0].x):aD(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function bf(e,t){var n=typeof t,i;return t==null||n==="boolean"?rc(t):(n==="number"?Qe:n==="string"?(i=es(t))?(t=i,nr):Ky:t instanceof es?nr:t instanceof Date?rD:iD(t)?nD:Array.isArray(t)?sD:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?oD:Qe)(e,t)}function cD(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Mm=180/Math.PI,qu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qy(e,t,n,i,s,r){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:s,translateY:r,rotate:Math.atan2(t,e)*Mm,skewX:Math.atan(l)*Mm,scaleX:o,scaleY:a}}var pa;function uD(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qu:qy(t.a,t.b,t.c,t.d,t.e,t.f)}function hD(e){return e==null||(pa||(pa=document.createElementNS("http://www.w3.org/2000/svg","g")),pa.setAttribute("transform",e),!(e=pa.transform.baseVal.consolidate()))?qu:(e=e.matrix,qy(e.a,e.b,e.c,e.d,e.e,e.f))}function Jy(e,t,n,i){function s(c){return c.length?c.pop()+" ":""}function r(c,u,h,f,d,g){if(c!==h||u!==f){var m=d.push("translate(",null,t,null,n);g.push({i:m-4,x:Qe(c,h)},{i:m-2,x:Qe(u,f)})}else(h||f)&&d.push("translate("+h+t+f+n)}function o(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(s(h)+"rotate(",null,i)-2,x:Qe(c,u)})):u&&h.push(s(h)+"rotate("+u+i)}function a(c,u,h,f){c!==u?f.push({i:h.push(s(h)+"skewX(",null,i)-2,x:Qe(c,u)}):u&&h.push(s(h)+"skewX("+u+i)}function l(c,u,h,f,d,g){if(c!==h||u!==f){var m=d.push(s(d)+"scale(",null,",",null,")");g.push({i:m-4,x:Qe(c,h)},{i:m-2,x:Qe(u,f)})}else(h!==1||f!==1)&&d.push(s(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=e(c),u=e(u),r(c.translateX,c.translateY,u.translateX,u.translateY,h,f),o(c.rotate,u.rotate,h,f),a(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var g=-1,m=f.length,p;++g<m;)h[(p=f[g]).i]=p.x(d);return h.join("")}}}var fD=Jy(uD,"px, ","px)","deg)"),dD=Jy(hD,", ",")",")"),ir=0,$r=0,Mr=0,Qy=1e3,gl,Wr,ml=0,ns=0,oc=0,yo=typeof performance=="object"&&performance.now?performance:Date,tx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mf(){return ns||(tx(gD),ns=yo.now()+oc)}function gD(){ns=0}function _l(){this._call=this._time=this._next=null}_l.prototype=ex.prototype={constructor:_l,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Mf():+n)+(t==null?0:+t),!this._next&&Wr!==this&&(Wr?Wr._next=this:gl=this,Wr=this),this._call=e,this._time=n,Ju()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ju())}};function ex(e,t,n){var i=new _l;return i.restart(e,t,n),i}function mD(){Mf(),++ir;for(var e=gl,t;e;)(t=ns-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ir}function Om(){ns=(ml=yo.now())+oc,ir=$r=0;try{mD()}finally{ir=0,pD(),ns=0}}function _D(){var e=yo.now(),t=e-ml;t>Qy&&(oc-=t,ml=e)}function pD(){for(var e,t=gl,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:gl=n);Wr=e,Ju(i)}function Ju(e){if(!ir){$r&&($r=clearTimeout($r));var t=e-ns;t>24?(e<1/0&&($r=setTimeout(Om,e-yo.now()-oc)),Mr&&(Mr=clearInterval(Mr))):(Mr||(ml=yo.now(),Mr=setInterval(_D,Qy)),ir=1,tx(Om))}}function Am(e,t,n){var i=new _l;return t=t==null?0:+t,i.restart(s=>{i.stop(),e(s+t)},t,n),i}var yD=Fy("start","end","cancel","interrupt"),xD=[],nx=0,Lm=1,Qu=2,ba=3,Fm=4,th=5,Ma=6;function ac(e,t,n,i,s,r){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;vD(e,n,{name:t,index:i,group:s,on:yD,tween:xD,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:nx})}function Of(e,t){var n=dn(e,t);if(n.state>nx)throw new Error("too late; already scheduled");return n}function Cn(e,t){var n=dn(e,t);if(n.state>ba)throw new Error("too late; already running");return n}function dn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function vD(e,t,n){var i=e.__transition,s;i[t]=n,n.timer=ex(r,0,n.time);function r(c){n.state=Lm,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,h,f,d;if(n.state!==Lm)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===ba)return Am(o);d.state===Fm?(d.state=Ma,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=Ma,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if(Am(function(){n.state===ba&&(n.state=Fm,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Qu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Qu){for(n.state=ba,s=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++h]=d);s.length=h+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=th,1),h=-1,f=s.length;++h<f;)s[h].call(e,u);n.state===th&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Ma,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function wD(e,t){var n=e.__transition,i,s,r=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){r=!1;continue}s=i.state>Qu&&i.state<th,i.state=Ma,i.timer.stop(),i.on.call(s?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}r&&delete e.__transition}}function ED(e){return this.each(function(){wD(this,e)})}function TD(e,t){var n,i;return function(){var s=Cn(this,e),r=s.tween;if(r!==n){i=n=r;for(var o=0,a=i.length;o<a;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}s.tween=i}}function CD(e,t,n){var i,s;if(typeof n!="function")throw new Error;return function(){var r=Cn(this,e),o=r.tween;if(o!==i){s=(i=o).slice();for(var a={name:t,value:n},l=0,c=s.length;l<c;++l)if(s[l].name===t){s[l]=a;break}l===c&&s.push(a)}r.tween=s}}function SD(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=dn(this.node(),n).tween,s=0,r=i.length,o;s<r;++s)if((o=i[s]).name===e)return o.value;return null}return this.each((t==null?TD:CD)(n,e,t))}function Af(e,t,n){var i=e._id;return e.each(function(){var s=Cn(this,i);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return dn(s,i).value[t]}}function ix(e,t){var n;return(typeof t=="number"?Qe:t instanceof es?nr:(n=es(t))?(t=n,nr):Ky)(e,t)}function RD(e){return function(){this.removeAttribute(e)}}function ID(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bD(e,t,n){var i,s=n+"",r;return function(){var o=this.getAttribute(e);return o===s?null:o===i?r:r=t(i=o,n)}}function MD(e,t,n){var i,s=n+"",r;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===i?r:r=t(i=o,n)}}function OD(e,t,n){var i,s,r;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===i&&l===s?r:(s=l,r=t(i=o,a)))}}function AD(e,t,n){var i,s,r;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===i&&l===s?r:(s=l,r=t(i=o,a)))}}function LD(e,t){var n=sc(e),i=n==="transform"?dD:ix;return this.attrTween(e,typeof t=="function"?(n.local?AD:OD)(n,i,Af(this,"attr."+e,t)):t==null?(n.local?ID:RD)(n):(n.local?MD:bD)(n,i,t))}function FD(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function PD(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function DD(e,t){var n,i;function s(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&PD(e,r)),n}return s._value=t,s}function kD(e,t){var n,i;function s(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&FD(e,r)),n}return s._value=t,s}function ND(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=sc(e);return this.tween(n,(i.local?DD:kD)(i,t))}function GD(e,t){return function(){Of(this,e).delay=+t.apply(this,arguments)}}function UD(e,t){return t=+t,function(){Of(this,e).delay=t}}function $D(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?GD:UD)(t,e)):dn(this.node(),t).delay}function WD(e,t){return function(){Cn(this,e).duration=+t.apply(this,arguments)}}function zD(e,t){return t=+t,function(){Cn(this,e).duration=t}}function YD(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?WD:zD)(t,e)):dn(this.node(),t).duration}function VD(e,t){if(typeof t!="function")throw new Error;return function(){Cn(this,e).ease=t}}function XD(e){var t=this._id;return arguments.length?this.each(VD(t,e)):dn(this.node(),t).ease}function HD(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Cn(this,e).ease=n}}function BD(e){if(typeof e!="function")throw new Error;return this.each(HD(this._id,e))}function ZD(e){typeof e!="function"&&(e=ky(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var r=t[s],o=r.length,a=i[s]=[],l,c=0;c<o;++c)(l=r[c])&&e.call(l,l.__data__,c,r)&&a.push(l);return new Xn(i,this._parents,this._name,this._id)}function jD(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,s=n.length,r=Math.min(i,s),o=new Array(i),a=0;a<r;++a)for(var l=t[a],c=n[a],u=l.length,h=o[a]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;a<i;++a)o[a]=t[a];return new Xn(o,this._parents,this._name,this._id)}function KD(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function qD(e,t,n){var i,s,r=KD(t)?Of:Cn;return function(){var o=r(this,e),a=o.on;a!==i&&(s=(i=a).copy()).on(t,n),o.on=s}}function JD(e,t){var n=this._id;return arguments.length<2?dn(this.node(),n).on.on(e):this.each(qD(n,e,t))}function QD(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function t2(){return this.on("end.remove",QD(this._id))}function e2(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Sf(e));for(var i=this._groups,s=i.length,r=new Array(s),o=0;o<s;++o)for(var a=i[o],l=a.length,c=r[o]=new Array(l),u,h,f=0;f<l;++f)(u=a[f])&&(h=e.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,ac(c[f],t,n,f,c,dn(u,n)));return new Xn(r,this._parents,t,n)}function n2(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Dy(e));for(var i=this._groups,s=i.length,r=[],o=[],a=0;a<s;++a)for(var l=i[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=e.call(u,u.__data__,h,l),d,g=dn(u,n),m=0,p=f.length;m<p;++m)(d=f[m])&&ac(d,t,n,m,f,g);r.push(f),o.push(u)}return new Xn(r,o,t,n)}var i2=No.prototype.constructor;function s2(){return new i2(this._groups,this._parents)}function r2(e,t){var n,i,s;return function(){var r=er(this,e),o=(this.style.removeProperty(e),er(this,e));return r===o?null:r===n&&o===i?s:s=t(n=r,i=o)}}function sx(e){return function(){this.style.removeProperty(e)}}function o2(e,t,n){var i,s=n+"",r;return function(){var o=er(this,e);return o===s?null:o===i?r:r=t(i=o,n)}}function a2(e,t,n){var i,s,r;return function(){var o=er(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),er(this,e))),o===l?null:o===i&&l===s?r:(s=l,r=t(i=o,a))}}function l2(e,t){var n,i,s,r="style."+t,o="end."+r,a;return function(){var l=Cn(this,e),c=l.on,u=l.value[r]==null?a||(a=sx(t)):void 0;(c!==n||s!==u)&&(i=(n=c).copy()).on(o,s=u),l.on=i}}function c2(e,t,n){var i=(e+="")=="transform"?fD:ix;return t==null?this.styleTween(e,r2(e,i)).on("end.style."+e,sx(e)):typeof t=="function"?this.styleTween(e,a2(e,i,Af(this,"style."+e,t))).each(l2(this._id,e)):this.styleTween(e,o2(e,i,t),n).on("end.style."+e,null)}function u2(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function h2(e,t,n){var i,s;function r(){var o=t.apply(this,arguments);return o!==s&&(i=(s=o)&&u2(e,o,n)),i}return r._value=t,r}function f2(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,h2(e,t,n??""))}function d2(e){return function(){this.textContent=e}}function g2(e){return function(){var t=e(this);this.textContent=t??""}}function m2(e){return this.tween("text",typeof e=="function"?g2(Af(this,"text",e)):d2(e==null?"":e+""))}function _2(e){return function(t){this.textContent=e.call(this,t)}}function p2(e){var t,n;function i(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&_2(s)),t}return i._value=e,i}function y2(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,p2(e))}function x2(){for(var e=this._name,t=this._id,n=rx(),i=this._groups,s=i.length,r=0;r<s;++r)for(var o=i[r],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=dn(l,t);ac(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Xn(i,this._parents,e,n)}function v2(){var e,t,n=this,i=n._id,s=n.size();return new Promise(function(r,o){var a={value:o},l={value:function(){--s===0&&r()}};n.each(function(){var c=Cn(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),s===0&&r()})}var w2=0;function Xn(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function rx(){return++w2}var On=No.prototype;Xn.prototype={constructor:Xn,select:e2,selectAll:n2,selectChild:On.selectChild,selectChildren:On.selectChildren,filter:ZD,merge:jD,selection:s2,transition:x2,call:On.call,nodes:On.nodes,node:On.node,size:On.size,empty:On.empty,each:On.each,on:JD,attr:LD,attrTween:ND,style:c2,styleTween:f2,text:m2,textTween:y2,remove:t2,tween:SD,delay:$D,duration:YD,ease:XD,easeVarying:BD,end:v2,[Symbol.iterator]:On[Symbol.iterator]};function E2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var T2={time:null,delay:0,duration:250,ease:E2};function C2(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function S2(e){var t,n;e instanceof Xn?(t=e._id,e=e._name):(t=rx(),(n=T2).time=Mf(),e=e==null?null:e+"");for(var i=this._groups,s=i.length,r=0;r<s;++r)for(var o=i[r],a=o.length,l,c=0;c<a;++c)(l=o[c])&&ac(l,e,t,c,o,n||C2(l,t));return new Xn(i,this._parents,e,t)}No.prototype.interrupt=ED;No.prototype.transition=S2;const eh=Math.PI,nh=2*eh,Li=1e-6,R2=nh-Li;function ox(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function I2(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ox;const n=10**t;return function(i){this._+=i[0];for(let s=1,r=i.length;s<r;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}class ax{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ox:I2(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,s){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,n,i,s,r,o){this._append`C${+t},${+n},${+i},${+s},${this._x1=+r},${this._y1=+o}`}arcTo(t,n,i,s,r){if(t=+t,n=+n,i=+i,s=+s,r=+r,r<0)throw new Error(`negative radius: ${r}`);let o=this._x1,a=this._y1,l=i-t,c=s-n,u=o-t,h=a-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Li)if(!(Math.abs(h*l-c*u)>Li)||!r)this._append`L${this._x1=t},${this._y1=n}`;else{let d=i-o,g=s-a,m=l*l+c*c,p=d*d+g*g,y=Math.sqrt(m),x=Math.sqrt(f),E=r*Math.tan((eh-Math.acos((m+f-p)/(2*y*x)))/2),w=E/x,S=E/y;Math.abs(w-1)>Li&&this._append`L${t+w*u},${n+w*h}`,this._append`A${r},${r},0,0,${+(h*d>u*g)},${this._x1=t+S*l},${this._y1=n+S*c}`}}arc(t,n,i,s,r,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(s),l=i*Math.sin(s),c=t+a,u=n+l,h=1^o,f=o?s-r:r-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Li||Math.abs(this._y1-u)>Li)&&this._append`L${c},${u}`,i&&(f<0&&(f=f%nh+nh),f>R2?this._append`A${i},${i},0,1,${h},${t-a},${n-l}A${i},${i},0,1,${h},${this._x1=c},${this._y1=u}`:f>Li&&this._append`A${i},${i},0,${+(f>=eh)},${h},${this._x1=t+i*Math.cos(r)},${this._y1=n+i*Math.sin(r)}`)}rect(t,n,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function $N(e=3){return new ax(+e)}function b2(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function sr(e){return e=pl(Math.abs(e)),e?e[1]:NaN}function M2(e,t){return function(n,i){for(var s=n.length,r=[],o=0,a=e[0],l=0;s>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),r.push(n.substring(s-=a,s+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return r.reverse().join(t)}}function O2(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var A2=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yl(e){if(!(t=A2.exec(e)))throw new Error("invalid format: "+e);var t;return new Lf({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}yl.prototype=Lf.prototype;function Lf(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Lf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function L2(e){t:for(var t=e.length,n=1,i=-1,s;n<t;++n)switch(e[n]){case".":i=s=n;break;case"0":i===0&&(i=n),s=n;break;default:if(!+e[n])break t;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(s+1):e}var lx;function F2(e,t){var n=pl(e,t);if(!n)return e+"";var i=n[0],s=n[1],r=s-(lx=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=i.length;return r===o?i:r>o?i+new Array(r-o+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+pl(e,Math.max(0,t+r-1))[0]}function Pm(e,t){var n=pl(e,t);if(!n)return e+"";var i=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const Dm={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:b2,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Pm(e*100,t),r:Pm,s:F2,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function km(e){return e}var Nm=Array.prototype.map,Gm=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function P2(e){var t=e.grouping===void 0||e.thousands===void 0?km:M2(Nm.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?km:O2(Nm.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(h){h=yl(h);var f=h.fill,d=h.align,g=h.sign,m=h.symbol,p=h.zero,y=h.width,x=h.comma,E=h.precision,w=h.trim,S=h.type;S==="n"?(x=!0,S="g"):Dm[S]||(E===void 0&&(E=12),w=!0,S="g"),(p||f==="0"&&d==="=")&&(p=!0,f="0",d="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",I=m==="$"?i:/[%p]/.test(S)?o:"",L=Dm[S],B=/[defgprs%]/.test(S);E=E===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function F(N){var j=C,K=I,ct,X,V;if(S==="c")K=L(N)+K,N="";else{N=+N;var D=N<0||1/N<0;if(N=isNaN(N)?l:L(Math.abs(N),E),w&&(N=L2(N)),D&&+N==0&&g!=="+"&&(D=!1),j=(D?g==="("?g:a:g==="-"||g==="("?"":g)+j,K=(S==="s"?Gm[8+lx/3]:"")+K+(D&&g==="("?")":""),B){for(ct=-1,X=N.length;++ct<X;)if(V=N.charCodeAt(ct),48>V||V>57){K=(V===46?s+N.slice(ct+1):N.slice(ct))+K,N=N.slice(0,ct);break}}}x&&!p&&(N=t(N,1/0));var H=j.length+N.length+K.length,st=H<y?new Array(y-H+1).join(f):"";switch(x&&p&&(N=t(st+N,st.length?y-K.length:1/0),st=""),d){case"<":N=j+N+K+st;break;case"=":N=j+st+N+K;break;case"^":N=st.slice(0,H=st.length>>1)+j+N+K+st.slice(H);break;default:N=st+j+N+K;break}return r(N)}return F.toString=function(){return h+""},F}function u(h,f){var d=c((h=yl(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(sr(f)/3)))*3,m=Math.pow(10,-g),p=Gm[8+g/3];return function(y){return d(m*y)+p}}return{format:c,formatPrefix:u}}var ya,cx,ux;D2({thousands:",",grouping:[3],currency:["$",""]});function D2(e){return ya=P2(e),cx=ya.format,ux=ya.formatPrefix,ya}function k2(e){return Math.max(0,-sr(Math.abs(e)))}function N2(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sr(t)/3)))*3-sr(Math.abs(e)))}function G2(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,sr(t)-sr(e))+1}function Ff(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function WN(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}function U2(e){return function(){return e}}function $2(e){return+e}var Um=[0,1];function Os(e){return e}function ih(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:U2(isNaN(t)?NaN:.5)}function W2(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function z2(e,t,n){var i=e[0],s=e[1],r=t[0],o=t[1];return s<i?(i=ih(s,i),r=n(o,r)):(i=ih(i,s),r=n(r,o)),function(a){return r(i(a))}}function Y2(e,t,n){var i=Math.min(e.length,t.length)-1,s=new Array(i),r=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)s[o]=ih(e[o],e[o+1]),r[o]=n(t[o],t[o+1]);return function(a){var l=UL(e,a,1,i)-1;return r[l](s[l](a))}}function hx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function V2(){var e=Um,t=Um,n=bf,i,s,r,o=Os,a,l,c;function u(){var f=Math.min(e.length,t.length);return o!==Os&&(o=W2(e[0],e[f-1])),a=f>2?Y2:z2,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?r:(l||(l=a(e.map(i),t,n)))(i(o(f)))}return h.invert=function(f){return o(s((c||(c=a(t,e.map(i),Qe)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,$2),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=cD,u()},h.clamp=function(f){return arguments.length?(o=f?!0:Os,u()):o!==Os},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(r=f,h):r},function(f,d){return i=f,s=d,u()}}function fx(){return V2()(Os,Os)}function X2(e,t,n,i){var s=Bu(e,t,n),r;switch(i=yl(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(r=N2(s,o))&&(i.precision=r),ux(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(r=G2(s,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=r-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(r=k2(s))&&(i.precision=r-(i.type==="%")*2);break}}return cx(i)}function H2(e){var t=e.domain;return e.ticks=function(n){var i=t();return VL(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var s=t();return X2(s[0],s[s.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),s=0,r=i.length-1,o=i[s],a=i[r],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=r,r=c);u-- >0;){if(c=Hu(o,a,n),c===l)return i[s]=o,i[r]=a,t(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function dx(){var e=fx();return e.copy=function(){return hx(e,dx())},Ff.apply(e,arguments),H2(e)}function B2(e,t){e=e.slice();var n=0,i=e.length-1,s=e[n],r=e[i],o;return r<s&&(o=n,n=i,i=o,o=s,s=r,r=o),e[n]=t.floor(s),e[i]=t.ceil(r),e}const Zc=new Date,jc=new Date;function ie(e,t,n,i){function s(r){return e(r=arguments.length===0?new Date:new Date(+r)),r}return s.floor=r=>(e(r=new Date(+r)),r),s.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),s.round=r=>{const o=s(r),a=s.ceil(r);return r-o<a-r?o:a},s.offset=(r,o)=>(t(r=new Date(+r),o==null?1:Math.floor(o)),r),s.range=(r,o,a)=>{const l=[];if(r=s.ceil(r),a=a==null?1:Math.floor(a),!(r<o)||!(a>0))return l;let c;do l.push(c=new Date(+r)),t(r,a),e(r);while(c<r&&r<o);return l},s.filter=r=>ie(o=>{if(o>=o)for(;e(o),!r(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!r(o););else for(;--a>=0;)for(;t(o,1),!r(o););}),n&&(s.count=(r,o)=>(Zc.setTime(+r),jc.setTime(+o),e(Zc),e(jc),Math.floor(n(Zc,jc))),s.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?s.filter(i?o=>i(o)%r===0:o=>s.count(0,o)%r===0):s)),s}const xl=ie(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);xl.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ie(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):xl);xl.range;const Nn=1e3,Xe=Nn*60,Gn=Xe*60,Hn=Gn*24,Pf=Hn*7,$m=Hn*30,Kc=Hn*365,zi=ie(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Nn)},(e,t)=>(t-e)/Nn,e=>e.getUTCSeconds());zi.range;const Df=ie(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nn)},(e,t)=>{e.setTime(+e+t*Xe)},(e,t)=>(t-e)/Xe,e=>e.getMinutes());Df.range;const kf=ie(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Xe)},(e,t)=>(t-e)/Xe,e=>e.getUTCMinutes());kf.range;const Nf=ie(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nn-e.getMinutes()*Xe)},(e,t)=>{e.setTime(+e+t*Gn)},(e,t)=>(t-e)/Gn,e=>e.getHours());Nf.range;const Gf=ie(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Gn)},(e,t)=>(t-e)/Gn,e=>e.getUTCHours());Gf.range;const $o=ie(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xe)/Hn,e=>e.getDate()-1);$o.range;const lc=ie(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hn,e=>e.getUTCDate()-1);lc.range;const gx=ie(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hn,e=>Math.floor(e/Hn));gx.range;function ls(e){return ie(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Xe)/Pf)}const cc=ls(0),vl=ls(1),Z2=ls(2),j2=ls(3),rr=ls(4),K2=ls(5),q2=ls(6);cc.range;vl.range;Z2.range;j2.range;rr.range;K2.range;q2.range;function cs(e){return ie(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Pf)}const uc=cs(0),wl=cs(1),J2=cs(2),Q2=cs(3),or=cs(4),tk=cs(5),ek=cs(6);uc.range;wl.range;J2.range;Q2.range;or.range;tk.range;ek.range;const Uf=ie(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Uf.range;const $f=ie(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());$f.range;const Bn=ie(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Bn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ie(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Bn.range;const Zn=ie(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ie(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Zn.range;function mx(e,t,n,i,s,r){const o=[[zi,1,Nn],[zi,5,5*Nn],[zi,15,15*Nn],[zi,30,30*Nn],[r,1,Xe],[r,5,5*Xe],[r,15,15*Xe],[r,30,30*Xe],[s,1,Gn],[s,3,3*Gn],[s,6,6*Gn],[s,12,12*Gn],[i,1,Hn],[i,2,2*Hn],[n,1,Pf],[t,1,$m],[t,3,3*$m],[e,1,Kc]];function a(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const d=h&&typeof h.range=="function"?h:l(c,u,h),g=d?d.range(c,+u+1):[];return f?g.reverse():g}function l(c,u,h){const f=Math.abs(u-c)/h,d=ic(([,,p])=>p).right(o,f);if(d===o.length)return e.every(Bu(c/Kc,u/Kc,h));if(d===0)return xl.every(Math.max(Bu(c,u,h),1));const[g,m]=o[f/o[d-1][2]<o[d][2]/f?d-1:d];return g.every(m)}return[a,l]}const[nk,ik]=mx(Zn,$f,uc,gx,Gf,kf),[sk,rk]=mx(Bn,Uf,cc,$o,Nf,Df);function qc(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jc(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Or(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function ok(e){var t=e.dateTime,n=e.date,i=e.time,s=e.periods,r=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Ar(s),u=Lr(s),h=Ar(r),f=Lr(r),d=Ar(o),g=Lr(o),m=Ar(a),p=Lr(a),y=Ar(l),x=Lr(l),E={a:D,A:H,b:st,B:dt,c:null,d:Hm,e:Hm,f:Mk,g:Uk,G:Wk,H:Rk,I:Ik,j:bk,L:_x,m:Ok,M:Ak,p:bt,q:k,Q:jm,s:Km,S:Lk,u:Fk,U:Pk,V:Dk,w:kk,W:Nk,x:null,X:null,y:Gk,Y:$k,Z:zk,"%":Zm},w={a:Xt,A:gt,b:vt,B:Nt,c:null,d:Bm,e:Bm,f:Hk,g:nN,G:sN,H:Yk,I:Vk,j:Xk,L:yx,m:Bk,M:Zk,p:O,q:z,Q:jm,s:Km,S:jk,u:Kk,U:qk,V:Jk,w:Qk,W:tN,x:null,X:null,y:eN,Y:iN,Z:rN,"%":Zm},S={a:F,A:N,b:j,B:K,c:ct,d:Vm,e:Vm,f:Ek,g:Ym,G:zm,H:Xm,I:Xm,j:yk,L:wk,m:pk,M:xk,p:B,q:_k,Q:Ck,s:Sk,S:vk,u:hk,U:fk,V:dk,w:uk,W:gk,x:X,X:V,y:Ym,Y:zm,Z:mk,"%":Tk};E.x=C(n,E),E.X=C(i,E),E.c=C(t,E),w.x=C(n,w),w.X=C(i,w),w.c=C(t,w);function C(R,G){return function(Q){var _=[],v=-1,T=0,b=R.length,M,P,Z;for(Q instanceof Date||(Q=new Date(+Q));++v<b;)R.charCodeAt(v)===37&&(_.push(R.slice(T,v)),(P=Wm[M=R.charAt(++v)])!=null?M=R.charAt(++v):P=M==="e"?" ":"0",(Z=G[M])&&(M=Z(Q,P)),_.push(M),T=v+1);return _.push(R.slice(T,v)),_.join("")}}function I(R,G){return function(Q){var _=Or(1900,void 0,1),v=L(_,R,Q+="",0),T,b;if(v!=Q.length)return null;if("Q"in _)return new Date(_.Q);if("s"in _)return new Date(_.s*1e3+("L"in _?_.L:0));if(G&&!("Z"in _)&&(_.Z=0),"p"in _&&(_.H=_.H%12+_.p*12),_.m===void 0&&(_.m="q"in _?_.q:0),"V"in _){if(_.V<1||_.V>53)return null;"w"in _||(_.w=1),"Z"in _?(T=Jc(Or(_.y,0,1)),b=T.getUTCDay(),T=b>4||b===0?wl.ceil(T):wl(T),T=lc.offset(T,(_.V-1)*7),_.y=T.getUTCFullYear(),_.m=T.getUTCMonth(),_.d=T.getUTCDate()+(_.w+6)%7):(T=qc(Or(_.y,0,1)),b=T.getDay(),T=b>4||b===0?vl.ceil(T):vl(T),T=$o.offset(T,(_.V-1)*7),_.y=T.getFullYear(),_.m=T.getMonth(),_.d=T.getDate()+(_.w+6)%7)}else("W"in _||"U"in _)&&("w"in _||(_.w="u"in _?_.u%7:"W"in _?1:0),b="Z"in _?Jc(Or(_.y,0,1)).getUTCDay():qc(Or(_.y,0,1)).getDay(),_.m=0,_.d="W"in _?(_.w+6)%7+_.W*7-(b+5)%7:_.w+_.U*7-(b+6)%7);return"Z"in _?(_.H+=_.Z/100|0,_.M+=_.Z%100,Jc(_)):qc(_)}}function L(R,G,Q,_){for(var v=0,T=G.length,b=Q.length,M,P;v<T;){if(_>=b)return-1;if(M=G.charCodeAt(v++),M===37){if(M=G.charAt(v++),P=S[M in Wm?G.charAt(v++):M],!P||(_=P(R,Q,_))<0)return-1}else if(M!=Q.charCodeAt(_++))return-1}return _}function B(R,G,Q){var _=c.exec(G.slice(Q));return _?(R.p=u.get(_[0].toLowerCase()),Q+_[0].length):-1}function F(R,G,Q){var _=d.exec(G.slice(Q));return _?(R.w=g.get(_[0].toLowerCase()),Q+_[0].length):-1}function N(R,G,Q){var _=h.exec(G.slice(Q));return _?(R.w=f.get(_[0].toLowerCase()),Q+_[0].length):-1}function j(R,G,Q){var _=y.exec(G.slice(Q));return _?(R.m=x.get(_[0].toLowerCase()),Q+_[0].length):-1}function K(R,G,Q){var _=m.exec(G.slice(Q));return _?(R.m=p.get(_[0].toLowerCase()),Q+_[0].length):-1}function ct(R,G,Q){return L(R,t,G,Q)}function X(R,G,Q){return L(R,n,G,Q)}function V(R,G,Q){return L(R,i,G,Q)}function D(R){return o[R.getDay()]}function H(R){return r[R.getDay()]}function st(R){return l[R.getMonth()]}function dt(R){return a[R.getMonth()]}function bt(R){return s[+(R.getHours()>=12)]}function k(R){return 1+~~(R.getMonth()/3)}function Xt(R){return o[R.getUTCDay()]}function gt(R){return r[R.getUTCDay()]}function vt(R){return l[R.getUTCMonth()]}function Nt(R){return a[R.getUTCMonth()]}function O(R){return s[+(R.getUTCHours()>=12)]}function z(R){return 1+~~(R.getUTCMonth()/3)}return{format:function(R){var G=C(R+="",E);return G.toString=function(){return R},G},parse:function(R){var G=I(R+="",!1);return G.toString=function(){return R},G},utcFormat:function(R){var G=C(R+="",w);return G.toString=function(){return R},G},utcParse:function(R){var G=I(R+="",!0);return G.toString=function(){return R},G}}}var Wm={"-":"",_:" ",0:"0"},le=/^\s*\d+/,ak=/^%/,lk=/[\\^$*+?|[\]().{}]/g;function It(e,t,n){var i=e<0?"-":"",s=(i?-e:e)+"",r=s.length;return i+(r<n?new Array(n-r+1).join(t)+s:s)}function ck(e){return e.replace(lk,"\\$&")}function Ar(e){return new RegExp("^(?:"+e.map(ck).join("|")+")","i")}function Lr(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function uk(e,t,n){var i=le.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function hk(e,t,n){var i=le.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function fk(e,t,n){var i=le.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function dk(e,t,n){var i=le.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function gk(e,t,n){var i=le.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function zm(e,t,n){var i=le.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Ym(e,t,n){var i=le.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function mk(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function _k(e,t,n){var i=le.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function pk(e,t,n){var i=le.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function Vm(e,t,n){var i=le.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function yk(e,t,n){var i=le.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function Xm(e,t,n){var i=le.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function xk(e,t,n){var i=le.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function vk(e,t,n){var i=le.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function wk(e,t,n){var i=le.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Ek(e,t,n){var i=le.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Tk(e,t,n){var i=ak.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Ck(e,t,n){var i=le.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function Sk(e,t,n){var i=le.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function Hm(e,t){return It(e.getDate(),t,2)}function Rk(e,t){return It(e.getHours(),t,2)}function Ik(e,t){return It(e.getHours()%12||12,t,2)}function bk(e,t){return It(1+$o.count(Bn(e),e),t,3)}function _x(e,t){return It(e.getMilliseconds(),t,3)}function Mk(e,t){return _x(e,t)+"000"}function Ok(e,t){return It(e.getMonth()+1,t,2)}function Ak(e,t){return It(e.getMinutes(),t,2)}function Lk(e,t){return It(e.getSeconds(),t,2)}function Fk(e){var t=e.getDay();return t===0?7:t}function Pk(e,t){return It(cc.count(Bn(e)-1,e),t,2)}function px(e){var t=e.getDay();return t>=4||t===0?rr(e):rr.ceil(e)}function Dk(e,t){return e=px(e),It(rr.count(Bn(e),e)+(Bn(e).getDay()===4),t,2)}function kk(e){return e.getDay()}function Nk(e,t){return It(vl.count(Bn(e)-1,e),t,2)}function Gk(e,t){return It(e.getFullYear()%100,t,2)}function Uk(e,t){return e=px(e),It(e.getFullYear()%100,t,2)}function $k(e,t){return It(e.getFullYear()%1e4,t,4)}function Wk(e,t){var n=e.getDay();return e=n>=4||n===0?rr(e):rr.ceil(e),It(e.getFullYear()%1e4,t,4)}function zk(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+It(t/60|0,"0",2)+It(t%60,"0",2)}function Bm(e,t){return It(e.getUTCDate(),t,2)}function Yk(e,t){return It(e.getUTCHours(),t,2)}function Vk(e,t){return It(e.getUTCHours()%12||12,t,2)}function Xk(e,t){return It(1+lc.count(Zn(e),e),t,3)}function yx(e,t){return It(e.getUTCMilliseconds(),t,3)}function Hk(e,t){return yx(e,t)+"000"}function Bk(e,t){return It(e.getUTCMonth()+1,t,2)}function Zk(e,t){return It(e.getUTCMinutes(),t,2)}function jk(e,t){return It(e.getUTCSeconds(),t,2)}function Kk(e){var t=e.getUTCDay();return t===0?7:t}function qk(e,t){return It(uc.count(Zn(e)-1,e),t,2)}function xx(e){var t=e.getUTCDay();return t>=4||t===0?or(e):or.ceil(e)}function Jk(e,t){return e=xx(e),It(or.count(Zn(e),e)+(Zn(e).getUTCDay()===4),t,2)}function Qk(e){return e.getUTCDay()}function tN(e,t){return It(wl.count(Zn(e)-1,e),t,2)}function eN(e,t){return It(e.getUTCFullYear()%100,t,2)}function nN(e,t){return e=xx(e),It(e.getUTCFullYear()%100,t,2)}function iN(e,t){return It(e.getUTCFullYear()%1e4,t,4)}function sN(e,t){var n=e.getUTCDay();return e=n>=4||n===0?or(e):or.ceil(e),It(e.getUTCFullYear()%1e4,t,4)}function rN(){return"+0000"}function Zm(){return"%"}function jm(e){return+e}function Km(e){return Math.floor(+e/1e3)}var Es,vx,wx;oN({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oN(e){return Es=ok(e),vx=Es.format,Es.parse,wx=Es.utcFormat,Es.utcParse,Es}function aN(e){return new Date(e)}function lN(e){return e instanceof Date?+e:+new Date(+e)}function Wf(e,t,n,i,s,r,o,a,l,c){var u=fx(),h=u.invert,f=u.domain,d=c(".%L"),g=c(":%S"),m=c("%I:%M"),p=c("%I %p"),y=c("%a %d"),x=c("%b %d"),E=c("%B"),w=c("%Y");function S(C){return(l(C)<C?d:a(C)<C?g:o(C)<C?m:r(C)<C?p:i(C)<C?s(C)<C?y:x:n(C)<C?E:w)(C)}return u.invert=function(C){return new Date(h(C))},u.domain=function(C){return arguments.length?f(Array.from(C,lN)):f().map(aN)},u.ticks=function(C){var I=f();return e(I[0],I[I.length-1],C??10)},u.tickFormat=function(C,I){return I==null?S:c(I)},u.nice=function(C){var I=f();return(!C||typeof C.range!="function")&&(C=t(I[0],I[I.length-1],C??10)),C?f(B2(I,C)):u},u.copy=function(){return hx(u,Wf(e,t,n,i,s,r,o,a,l,c))},u}function zN(){return Ff.apply(Wf(sk,rk,Bn,Uf,cc,$o,Nf,Df,zi,vx).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cN(){return Ff.apply(Wf(nk,ik,Zn,$f,uc,lc,Gf,kf,zi,wx).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function re(e){return function(){return e}}function Ex(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new ax(t)}function Tx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cx(e){this._context=e}Cx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Sx(e){return new Cx(e)}function Rx(e){return e[0]}function Ix(e){return e[1]}function uN(e,t){var n=re(!0),i=null,s=Sx,r=null,o=Ex(a);e=typeof e=="function"?e:e===void 0?Rx:re(e),t=typeof t=="function"?t:t===void 0?Ix:re(t);function a(l){var c,u=(l=Tx(l)).length,h,f=!1,d;for(i==null&&(r=s(d=o())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===f&&((f=!f)?r.lineStart():r.lineEnd()),f&&r.point(+e(h,c,l),+t(h,c,l));if(d)return r=null,d+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:re(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:re(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:re(!!l),a):n},a.curve=function(l){return arguments.length?(s=l,i!=null&&(r=s(i)),a):s},a.context=function(l){return arguments.length?(l==null?i=r=null:r=s(i=l),a):i},a}function qm(e,t,n){var i=null,s=re(!0),r=null,o=Sx,a=null,l=Ex(c);e=typeof e=="function"?e:e===void 0?Rx:re(+e),t=typeof t=="function"?t:re(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Ix:re(+n);function c(h){var f,d,g,m=(h=Tx(h)).length,p,y=!1,x,E=new Array(m),w=new Array(m);for(r==null&&(a=o(x=l())),f=0;f<=m;++f){if(!(f<m&&s(p=h[f],f,h))===y)if(y=!y)d=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=f-1;g>=d;--g)a.point(E[g],w[g]);a.lineEnd(),a.areaEnd()}y&&(E[f]=+e(p,f,h),w[f]=+t(p,f,h),a.point(i?+i(p,f,h):E[f],n?+n(p,f,h):w[f]))}if(x)return a=null,x+""||null}function u(){return uN().defined(s).curve(o).context(r)}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:re(+h),i=null,c):e},c.x0=function(h){return arguments.length?(e=typeof h=="function"?h:re(+h),c):e},c.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:re(+h),c):i},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:re(+h),n=null,c):t},c.y0=function(h){return arguments.length?(t=typeof h=="function"?h:re(+h),c):t},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:re(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(i).y(t)},c.defined=function(h){return arguments.length?(s=typeof h=="function"?h:re(!!h),c):s},c.curve=function(h){return arguments.length?(o=h,r!=null&&(a=o(r)),c):o},c.context=function(h){return arguments.length?(h==null?r=a=null:a=o(r=h),c):r},c}function Jm(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function bx(e){this._context=e}bx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Jm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Jm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Qm(e){return new bx(e)}function zr(e,t,n){this.k=e,this.x=t,this.y=n}zr.prototype={constructor:zr,scale:function(e){return e===1?this:new zr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new zr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};zr.prototype;const hN={props:{activityFile:Lo,timezoneOffsetHours:Number},data(){return{popupRecord:new Nu}},watch:{activityFile:function(){var t;const e=((t=this.activityFile)==null?void 0:t.records)||[];this.renderChart(e)}},methods:{toStringHDMS:Rp,toTimezoneDateString:Tf,renderChart(e){const a=F=>new Date(F.timestamp),l=F=>F.altitude,c=XL(e,F=>F.altitude)||0,u=_m(e,F=>F.altitude)||0,h=_m([u-u*2,0])||0,f=c+c*2,d=cN().domain($L(e,a)).rangeRound([40,928-20]),g=dx().domain([h,f]).nice().rangeRound([500-30,20]),m=qm().curve(Qm).x(F=>d(new Date(F.timestamp))).y(F=>g(F.altitude)),p=qm().curve(Qm).x(F=>d(new Date(F.timestamp))).y0(g(h)).y1(F=>g(F.altitude)),y=vm(this.$el).select("svg").attr("width",928).attr("height",500).attr("viewBox",[0,0,928,500]).attr("style","max-width: 100%; height: auto;");y.append("g").attr("transform",`translate(0,${500-30})`).call(QL(d).ticks(928/80).tickSizeOuter(0)).call(F=>F.select(".domain").remove()),y.append("g").attr("transform","translate(40,0)").call(tF(g)).call(F=>F.select(".domain").remove()).call(F=>F.select(".tick:last-of-type textchart").append("tspan").text(e.y)),y.append("g").attr("stroke","currentColor").attr("stroke-opacity",.1).call(F=>F.append("g").selectAll("line").data(d.ticks()).join("line").attr("x1",N=>.5+d(N)).attr("x2",N=>.5+d(N)).attr("y1",20).attr("y2",500-30)).call(F=>F.append("g").selectAll("line").data(g.ticks()).join("line").attr("y1",N=>.5+g(N)).attr("y2",N=>.5+g(N)).attr("x1",40).attr("x2",928-20));const x=c-u,E=5,w=(F,N,j)=>{if(j>=E){const K=e.slice(j-E,j).map((V,D)=>V.altitude-e[j-D-1].altitude),X=(HL(K,V=>V.altitude)||1)/(x||1)*100;return N.altitude>e[j-1].altitude?nr.gamma(2.2)(F,"red")(X*5/100):N.altitude<e[j-1].altitude?nr.gamma(2.2)(F,"lawngreen")(X*5/100):eD([F,"yellow"])(X*1/100)}return"yellow"};let S="yellow";for(let F=1;F<e.length;F++){const N=w(S,e[F],F);S=N,y.append("path").datum([e[F-1],e[F]]).attr("fill","none").attr("stroke",j=>N).attr("stroke-width",8).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("d",m).attr("stroke-opacity",.8)}y.append("path").datum(e).attr("fill","#2A303F").attr("d",p);const C=vm("#tooltip"),I=y.append("circle").attr("r",5).attr("fill","none").attr("stroke","#970000").attr("stroke-width",2).style("opacity",0).style("pointer-events","none");var L=y.append("g").attr("class","hover-line"),B=L.append("line").attr("x1",10).attr("x2",10).attr("y1",g(h)).attr("y2",g(f));return B.style("opacity",1e-6),y.append("rect").attr("width",928).attr("height",500).style("opacity",0).on("touchmouse mousemove",F=>{const N=NP(F,this),j=d.invert(N[0]),K=ic(a).left,ct=K(e,j),X=e[Math.max(0,ct-1)];X&&(this.popupRecord=X,I.style("opacity",1).attr("cx",d(a(X))).attr("cy",g(l(X))).raise(),C.style("display","block").style("left",`${F.pageX}px`).style("top",`${F.pageY}px`),B.attr("x1",d(a(X))).attr("x2",d(a(X))).style("opacity",1))}).on("mouseleave",function(){I.style("opacity",0),C.style("display","none"),B.style("opacity",1e-6)}),Object.assign(y.node())}},mounted(){var e;this.renderChart(((e=this.activityFile)==null?void 0:e.records)||[])}};const fN={id:"chart"},dN=A("div",{class:"elevation"},"Elevation",-1),gN=A("svg",null,null,-1),mN={id:"tooltip"},_N={id:"popup",class:"ol-popup"},pN={class:"popup-content"},yN=A("span",null,"Time:",-1),xN=A("span",null,"Altitude:",-1),vN=A("span",null," masl",-1);function wN(e,t,n,i,s,r){var o;return Rt(),Ft("div",fN,[dN,gN,A("div",mN,[A("div",_N,[A("div",pN,[A("div",null,[yN,A("span",null,Tt(s.popupRecord.timestamp?r.toTimezoneDateString(s.popupRecord.timestamp,n.timezoneOffsetHours):"-"),1)]),A("div",null,[xN,A("span",null,Tt(s.popupRecord.altitude?(o=s.popupRecord.altitude)==null?void 0:o.toFixed(2):"-"),1),vN])])])])])}const EN=Cf(hN,[["render",wN]]);(()=>{const e=()=>{const i=new Error("not implemented");return i.code="ENOSYS",i};if(!globalThis.fs){let i="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(s,r){i+=n.decode(r);const o=i.lastIndexOf(`
`);return o!=-1&&(console.log(i.substring(0,o)),i=i.substring(o+1)),r.length},write(s,r,o,a,l,c){if(o!==0||a!==r.length||l!==null){c(e());return}const u=this.writeSync(s,r);c(null,u)},chmod(s,r,o){o(e())},chown(s,r,o,a){a(e())},close(s,r){r(e())},fchmod(s,r,o){o(e())},fchown(s,r,o,a){a(e())},fstat(s,r){r(e())},fsync(s,r){r(null)},ftruncate(s,r,o){o(e())},lchown(s,r,o,a){a(e())},link(s,r,o){o(e())},lstat(s,r){r(e())},mkdir(s,r,o){o(e())},open(s,r,o,a){a(e())},read(s,r,o,a,l,c){c(e())},readdir(s,r){r(e())},readlink(s,r){r(e())},rename(s,r,o){o(e())},rmdir(s,r){r(e())},stat(s,r){r(e())},symlink(s,r,o){o(e())},truncate(s,r,o){o(e())},unlink(s,r){r(e())},utimes(s,r,o,a){a(e())}}}if(globalThis.process||(globalThis.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw e()},pid:-1,ppid:-1,umask(){throw e()},cwd(){throw e()},chdir(){throw e()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!globalThis.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const t=new TextEncoder("utf-8"),n=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=h=>{h!==0&&console.warn("exit code:",h)},this._exitPromise=new Promise(h=>{this._resolveExitPromise=h}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const i=(h,f)=>{this.mem.setUint32(h+0,f,!0),this.mem.setUint32(h+4,Math.floor(f/4294967296),!0)},s=h=>{const f=this.mem.getUint32(h+0,!0),d=this.mem.getInt32(h+4,!0);return f+d*4294967296},r=h=>{const f=this.mem.getFloat64(h,!0);if(f===0)return;if(!isNaN(f))return f;const d=this.mem.getUint32(h,!0);return this._values[d]},o=(h,f)=>{if(typeof f=="number"&&f!==0){if(isNaN(f)){this.mem.setUint32(h+4,2146959360,!0),this.mem.setUint32(h,0,!0);return}this.mem.setFloat64(h,f,!0);return}if(f===void 0){this.mem.setFloat64(h,0,!0);return}let g=this._ids.get(f);g===void 0&&(g=this._idPool.pop(),g===void 0&&(g=this._values.length),this._values[g]=f,this._goRefCounts[g]=0,this._ids.set(f,g)),this._goRefCounts[g]++;let m=0;switch(typeof f){case"object":f!==null&&(m=1);break;case"string":m=2;break;case"symbol":m=3;break;case"function":m=4;break}this.mem.setUint32(h+4,2146959360|m,!0),this.mem.setUint32(h,g,!0)},a=h=>{const f=s(h+0),d=s(h+8);return new Uint8Array(this._inst.exports.mem.buffer,f,d)},l=h=>{const f=s(h+0),d=s(h+8),g=new Array(d);for(let m=0;m<d;m++)g[m]=r(f+m*8);return g},c=h=>{const f=s(h+0),d=s(h+8);return n.decode(new DataView(this._inst.exports.mem.buffer,f,d))},u=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":h=>{h>>>=0;const f=this.mem.getInt32(h+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(f)},"runtime.wasmWrite":h=>{h>>>=0;const f=s(h+8),d=s(h+16),g=this.mem.getInt32(h+24,!0);fs.writeSync(f,new Uint8Array(this._inst.exports.mem.buffer,d,g))},"runtime.resetMemoryDataView":h=>{this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":h=>{h>>>=0,i(h+8,(u+performance.now())*1e6)},"runtime.walltime":h=>{h>>>=0;const f=new Date().getTime();i(h+8,f/1e3),this.mem.setInt32(h+16,f%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":h=>{h>>>=0;const f=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(f,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(f);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},s(h+8)+1)),this.mem.setInt32(h+16,f,!0)},"runtime.clearTimeoutEvent":h=>{h>>>=0;const f=this.mem.getInt32(h+8,!0);clearTimeout(this._scheduledTimeouts.get(f)),this._scheduledTimeouts.delete(f)},"runtime.getRandomData":h=>{h>>>=0,crypto.getRandomValues(a(h+8))},"syscall/js.finalizeRef":h=>{h>>>=0;const f=this.mem.getUint32(h+8,!0);if(this._goRefCounts[f]--,this._goRefCounts[f]===0){const d=this._values[f];this._values[f]=null,this._ids.delete(d),this._idPool.push(f)}},"syscall/js.stringVal":h=>{h>>>=0,o(h+24,c(h+8))},"syscall/js.valueGet":h=>{h>>>=0;const f=Reflect.get(r(h+8),c(h+16));h=this._inst.exports.getsp()>>>0,o(h+32,f)},"syscall/js.valueSet":h=>{h>>>=0,Reflect.set(r(h+8),c(h+16),r(h+32))},"syscall/js.valueDelete":h=>{h>>>=0,Reflect.deleteProperty(r(h+8),c(h+16))},"syscall/js.valueIndex":h=>{h>>>=0,o(h+24,Reflect.get(r(h+8),s(h+16)))},"syscall/js.valueSetIndex":h=>{h>>>=0,Reflect.set(r(h+8),s(h+16),r(h+24))},"syscall/js.valueCall":h=>{h>>>=0;try{const f=r(h+8),d=Reflect.get(f,c(h+16)),g=l(h+32),m=Reflect.apply(d,f,g);h=this._inst.exports.getsp()>>>0,o(h+56,m),this.mem.setUint8(h+64,1)}catch(f){h=this._inst.exports.getsp()>>>0,o(h+56,f),this.mem.setUint8(h+64,0)}},"syscall/js.valueInvoke":h=>{h>>>=0;try{const f=r(h+8),d=l(h+16),g=Reflect.apply(f,void 0,d);h=this._inst.exports.getsp()>>>0,o(h+40,g),this.mem.setUint8(h+48,1)}catch(f){h=this._inst.exports.getsp()>>>0,o(h+40,f),this.mem.setUint8(h+48,0)}},"syscall/js.valueNew":h=>{h>>>=0;try{const f=r(h+8),d=l(h+16),g=Reflect.construct(f,d);h=this._inst.exports.getsp()>>>0,o(h+40,g),this.mem.setUint8(h+48,1)}catch(f){h=this._inst.exports.getsp()>>>0,o(h+40,f),this.mem.setUint8(h+48,0)}},"syscall/js.valueLength":h=>{h>>>=0,i(h+16,parseInt(r(h+8).length))},"syscall/js.valuePrepareString":h=>{h>>>=0;const f=t.encode(String(r(h+8)));o(h+16,f),i(h+24,f.length)},"syscall/js.valueLoadString":h=>{h>>>=0;const f=r(h+8);a(h+16).set(f)},"syscall/js.valueInstanceOf":h=>{h>>>=0,this.mem.setUint8(h+24,r(h+8)instanceof r(h+16)?1:0)},"syscall/js.copyBytesToGo":h=>{h>>>=0;const f=a(h+8),d=r(h+32);if(!(d instanceof Uint8Array||d instanceof Uint8ClampedArray)){this.mem.setUint8(h+48,0);return}const g=d.subarray(0,f.length);f.set(g),i(h+40,g.length),this.mem.setUint8(h+48,1)},"syscall/js.copyBytesToJS":h=>{h>>>=0;const f=r(h+8),d=a(h+16);if(!(f instanceof Uint8Array||f instanceof Uint8ClampedArray)){this.mem.setUint8(h+48,0);return}const g=d.subarray(0,f.length);f.set(g),i(h+40,g.length),this.mem.setUint8(h+48,1)},debug:h=>{console.log(h)}}}}async run(i){if(!(i instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=i,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let s=4096;const r=h=>{const f=s,d=t.encode(h+"\0");return new Uint8Array(this.mem.buffer,s,d.length).set(d),s+=d.length,s%8!==0&&(s+=8-s%8),f},o=this.argv.length,a=[];this.argv.forEach(h=>{a.push(r(h))}),a.push(0),Object.keys(this.env).sort().forEach(h=>{a.push(r(`${h}=${this.env[h]}`))}),a.push(0);const c=s;a.forEach(h=>{this.mem.setUint32(s,h,!0),this.mem.setUint32(s+4,0,!0),s+=8});const u=4096+8192;if(s>=u)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(o,c),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(i){const s=this;return function(){const r={id:i,this:this,args:arguments};return s._pendingEvent=r,s._resume(),r.result}}}})();const TN={class:"container"},CN={class:"map"},SN={class:"navigator"},RN=A("div",{class:"header"},[A("h2",{class:"title"},"Open Activity")],-1),IN=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function";IN==!1&&alert("Sorry, it appears that your browser does not support WebAssembly :(");const Mx=ur(new Fu),Kr=ur(new Lo),El=ur(0),t_=ur(new Uint8Array);Ds(Kr,e=>{var s,r;if(!((s=e.activity)!=null&&s.timestamp)||!((r=e.activity)!=null&&r.localDateTime))return;const t=new Date(e.activity.localDateTime),n=new Date(e.activity.timestamp),i=t.getTime()-n.getTime();El.value=Math.floor(i/1e3/3600),console.log("timezone offset:",El.value,"hours")});const e_=new Go;class bN{constructor(t){ce(this,"feature");ce(this,"activityFile");ce(this,"err");const n=t;this.feature=n==null?void 0:n.feature,this.activityFile=new Lo(n==null?void 0:n.activityFile),this.err=n==null?void 0:n.err}}const MN="wasm/fitsvc.wasm";WebAssembly.instantiateStreaming(fetch(MN),e_.importObject).then(e=>{var t;e_.run(e.instance),Ds(t_,n=>{const i=decode(n),s=new Date().getTime(),r=new bN(i);console.log("js: deserialization took: ",new Date().getTime()-s,"ms"),Mx.value=r.feature,Kr.value=r.activityFile,console.log(r.feature),console.log(r.activityFile)}),(t=document.getElementById("fileInput"))==null||t.addEventListener("change",n=>{const s=n.target.files[0];if(!s)return;const r=new FileReader;r.onload=o=>{const a=o.target.result;t_.value=new Uint8Array(a)},r.readAsArrayBuffer(s)})});const ON=xo({__name:"TheActivity",setup(e){return(t,n)=>(Rt(),Ft("div",TN,[A("div",CN,[he(VO,{geojson:Mx.value,activityFile:Kr.value,timezoneOffsetHours:El.value},null,8,["geojson","activityFile","timezoneOffsetHours"]),he(EN,{activityFile:Kr.value},null,8,["activityFile"])]),A("div",SN,[RN,he(FL,{activityFile:Kr.value,timezoneOffsetHours:El.value},null,8,["activityFile","timezoneOffsetHours"])])]))}});const AN=xo({__name:"ActivityView",setup(e){return(t,n)=>(Rt(),Ft("main",null,[he(ON)]))}}),LN=sE({history:ww("/openactivity/"),routes:[{path:"/",name:"home",component:AN},{path:"/activity",name:"activity",component:()=>$d(()=>import("./ActivityView-07fb467d.js"),[])},{path:"/altitudegraph",name:"altitudegraph",component:()=>$d(()=>import("./AltitudeGraph-31042956.js"),["assets/AltitudeGraph-31042956.js","assets/AltitudeGraph-e3d2d9bd.css"])}]}),zf=Qv(oE);zf.use(iw());zf.use(LN);zf.mount("#app");export{wl as $,UL as A,WN as B,Uo as C,cD as D,eD as E,fl as F,Jm as G,bx as H,PL as I,zi as J,Df as K,Nf as L,$o as M,vl as N,Z2 as O,j2 as P,rr as Q,be as R,K2 as S,q2 as T,cc as U,Uf as V,Bn as W,kf as X,Gf as Y,gx as Z,AN as _,Ra as a,J2 as a0,Q2 as a1,or as a2,tk as a3,ek as a4,uc as a5,$f as a6,Zn as a7,ic as a8,vx as a9,Ft as aA,he as aB,wx as aa,HL as ab,xm as ac,vm as ad,Py as ae,dx as af,Qe as ag,nr as ah,zN as ai,cN as aj,NP as ak,QL as al,$N as am,Sx as an,Qm as ao,ik as ap,qm as aq,uN as ar,PN as as,J_ as at,Lo as au,Cf as av,DN as aw,Rt as ax,Z_ as ay,xo as az,XL as b,kL as c,If as d,Hy as e,hl as f,_o as g,jP as h,jy as i,UN as j,bf as k,$L as l,_m as m,GN as n,VL as o,Ff as p,$2 as q,BP as r,H2 as s,Hu as t,V2 as u,hx as v,yl as w,cx as x,B2 as y,Os as z};
