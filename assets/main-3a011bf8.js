var Zk=Object.defineProperty;var Kk=(e,t,n)=>t in e?Zk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xt=(e,t,n)=>(Kk(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function f1(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const fe={},ll=[],Oi=()=>{},Jk=()=>!1,Qk=/^on[^a-z]/,Jg=e=>Qk.test(e),h1=e=>e.startsWith("onUpdate:"),ke=Object.assign,d1=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},tF=Object.prototype.hasOwnProperty,Ht=(e,t)=>tF.call(e,t),Tt=Array.isArray,cl=e=>Qg(e)==="[object Map]",zC=e=>Qg(e)==="[object Set]",At=e=>typeof e=="function",Pe=e=>typeof e=="string",g1=e=>typeof e=="symbol",me=e=>e!==null&&typeof e=="object",WC=e=>me(e)&&At(e.then)&&At(e.catch),GC=Object.prototype.toString,Qg=e=>GC.call(e),eF=e=>Qg(e).slice(8,-1),BC=e=>Qg(e)==="[object Object]",m1=e=>Pe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,nd=f1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),tm=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},nF=/-(\w)/g,hr=tm(e=>e.replace(nF,(t,n)=>n?n.toUpperCase():"")),iF=/\B([A-Z])/g,tc=tm(e=>e.replace(iF,"-$1").toLowerCase()),em=tm(e=>e.charAt(0).toUpperCase()+e.slice(1)),N0=tm(e=>e?`on${em(e)}`:""),Eu=(e,t)=>!Object.is(e,t),D0=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},yd=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},rF=e=>{const t=parseFloat(e);return isNaN(t)?e:t},sF=e=>{const t=Pe(e)?Number(e):NaN;return isNaN(t)?e:t};let Ob;const uy=()=>Ob||(Ob=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function tn(e){if(Tt(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=Pe(i)?cF(i):tn(i);if(r)for(const s in r)t[s]=r[s]}return t}else{if(Pe(e))return e;if(me(e))return e}}const oF=/;(?![^(]*\))/g,aF=/:([^]+)/,lF=/\/\*[^]*?\*\//g;function cF(e){const t={};return e.replace(lF,"").split(oF).forEach(n=>{if(n){const i=n.split(aF);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function kn(e){let t="";if(Pe(e))t=e;else if(Tt(e))for(let n=0;n<e.length;n++){const i=kn(e[n]);i&&(t+=i+" ")}else if(me(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const uF="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fF=f1(uF);function HC(e){return!!e||e===""}const ht=e=>Pe(e)?e:e==null?"":Tt(e)||me(e)&&(e.toString===GC||!At(e.toString))?JSON.stringify(e,YC,2):String(e),YC=(e,t)=>t&&t.__v_isRef?YC(e,t.value):cl(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:zC(t)?{[`Set(${t.size})`]:[...t.values()]}:me(t)&&!Tt(t)&&!BC(t)?String(t):t;let Ti;class UC{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ti,!t&&Ti&&(this.index=(Ti.scopes||(Ti.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Ti;try{return Ti=this,t()}finally{Ti=n}}}on(){Ti=this}off(){Ti=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function hF(e){return new UC(e)}function dF(e,t=Ti){t&&t.active&&t.effects.push(e)}function gF(){return Ti}const p1=e=>{const t=new Set(e);return t.w=0,t.n=0,t},VC=e=>(e.w&Xs)>0,XC=e=>(e.n&Xs)>0,mF=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Xs},pF=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];VC(r)&&!XC(r)?r.delete(e):t[n++]=r,r.w&=~Xs,r.n&=~Xs}t.length=n}},fy=new WeakMap;let Xc=0,Xs=1;const hy=30;let Ci;const Vo=Symbol(""),dy=Symbol("");class y1{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,dF(this,i)}run(){if(!this.active)return this.fn();let t=Ci,n=Us;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ci,Ci=this,Us=!0,Xs=1<<++Xc,Xc<=hy?mF(this):kb(this),this.fn()}finally{Xc<=hy&&pF(this),Xs=1<<--Xc,Ci=this.parent,Us=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ci===this?this.deferStop=!0:this.active&&(kb(this),this.onStop&&this.onStop(),this.active=!1)}}function kb(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Us=!0;const jC=[];function ec(){jC.push(Us),Us=!1}function nc(){const e=jC.pop();Us=e===void 0?!0:e}function Fn(e,t,n){if(Us&&Ci){let i=fy.get(e);i||fy.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=p1()),qC(r)}}function qC(e,t){let n=!1;Xc<=hy?XC(e)||(e.n|=Xs,n=!VC(e)):n=!e.has(Ci),n&&(e.add(Ci),Ci.deps.push(e))}function ts(e,t,n,i,r,s){const o=fy.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&Tt(e)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":Tt(e)?m1(n)&&a.push(o.get("length")):(a.push(o.get(Vo)),cl(e)&&a.push(o.get(dy)));break;case"delete":Tt(e)||(a.push(o.get(Vo)),cl(e)&&a.push(o.get(dy)));break;case"set":cl(e)&&a.push(o.get(Vo));break}if(a.length===1)a[0]&&gy(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);gy(p1(l))}}function gy(e,t){const n=Tt(e)?e:[...e];for(const i of n)i.computed&&Fb(i);for(const i of n)i.computed||Fb(i)}function Fb(e,t){(e!==Ci||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const yF=f1("__proto__,__v_isRef,__isVue"),ZC=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(g1)),_F=_1(),vF=_1(!1,!0),wF=_1(!0),Pb=bF();function bF(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=Ut(this);for(let s=0,o=this.length;s<o;s++)Fn(i,"get",s+"");const r=i[t](...n);return r===-1||r===!1?i[t](...n.map(Ut)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){ec();const i=Ut(this)[t].apply(this,n);return nc(),i}}),e}function xF(e){const t=Ut(this);return Fn(t,"has",e),t.hasOwnProperty(e)}function _1(e=!1,t=!1){return function(i,r,s){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&s===(e?t?$F:eS:t?tS:QC).get(i))return i;const o=Tt(i);if(!e){if(o&&Ht(Pb,r))return Reflect.get(Pb,r,s);if(r==="hasOwnProperty")return xF}const a=Reflect.get(i,r,s);return(g1(r)?ZC.has(r):yF(r))||(e||Fn(i,"get",r),t)?a:an(a)?o&&m1(r)?a:a.value:me(a)?e?iS(a):im(a):a}}const EF=KC(),TF=KC(!0);function KC(e=!1){return function(n,i,r,s){let o=n[i];if(El(o)&&an(o)&&!an(r))return!1;if(!e&&(!_d(r)&&!El(r)&&(o=Ut(o),r=Ut(r)),!Tt(n)&&an(o)&&!an(r)))return o.value=r,!0;const a=Tt(n)&&m1(i)?Number(i)<n.length:Ht(n,i),l=Reflect.set(n,i,r,s);return n===Ut(s)&&(a?Eu(r,o)&&ts(n,"set",i,r):ts(n,"add",i,r)),l}}function CF(e,t){const n=Ht(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&ts(e,"delete",t,void 0),i}function SF(e,t){const n=Reflect.has(e,t);return(!g1(t)||!ZC.has(t))&&Fn(e,"has",t),n}function MF(e){return Fn(e,"iterate",Tt(e)?"length":Vo),Reflect.ownKeys(e)}const JC={get:_F,set:EF,deleteProperty:CF,has:SF,ownKeys:MF},RF={get:wF,set(e,t){return!0},deleteProperty(e,t){return!0}},AF=ke({},JC,{get:vF,set:TF}),v1=e=>e,nm=e=>Reflect.getPrototypeOf(e);function oh(e,t,n=!1,i=!1){e=e.__v_raw;const r=Ut(e),s=Ut(t);n||(t!==s&&Fn(r,"get",t),Fn(r,"get",s));const{has:o}=nm(r),a=i?v1:n?E1:Tu;if(o.call(r,t))return a(e.get(t));if(o.call(r,s))return a(e.get(s));e!==r&&e.get(t)}function ah(e,t=!1){const n=this.__v_raw,i=Ut(n),r=Ut(e);return t||(e!==r&&Fn(i,"has",e),Fn(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function lh(e,t=!1){return e=e.__v_raw,!t&&Fn(Ut(e),"iterate",Vo),Reflect.get(e,"size",e)}function Nb(e){e=Ut(e);const t=Ut(this);return nm(t).has.call(t,e)||(t.add(e),ts(t,"add",e,e)),this}function Db(e,t){t=Ut(t);const n=Ut(this),{has:i,get:r}=nm(n);let s=i.call(n,e);s||(e=Ut(e),s=i.call(n,e));const o=r.call(n,e);return n.set(e,t),s?Eu(t,o)&&ts(n,"set",e,t):ts(n,"add",e,t),this}function $b(e){const t=Ut(this),{has:n,get:i}=nm(t);let r=n.call(t,e);r||(e=Ut(e),r=n.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return r&&ts(t,"delete",e,void 0),s}function zb(){const e=Ut(this),t=e.size!==0,n=e.clear();return t&&ts(e,"clear",void 0,void 0),n}function ch(e,t){return function(i,r){const s=this,o=s.__v_raw,a=Ut(o),l=t?v1:e?E1:Tu;return!e&&Fn(a,"iterate",Vo),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function uh(e,t,n){return function(...i){const r=this.__v_raw,s=Ut(r),o=cl(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=r[e](...i),u=n?v1:t?E1:Tu;return!t&&Fn(s,"iterate",l?dy:Vo),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function ps(e){return function(...t){return e==="delete"?!1:this}}function IF(){const e={get(s){return oh(this,s)},get size(){return lh(this)},has:ah,add:Nb,set:Db,delete:$b,clear:zb,forEach:ch(!1,!1)},t={get(s){return oh(this,s,!1,!0)},get size(){return lh(this)},has:ah,add:Nb,set:Db,delete:$b,clear:zb,forEach:ch(!1,!0)},n={get(s){return oh(this,s,!0)},get size(){return lh(this,!0)},has(s){return ah.call(this,s,!0)},add:ps("add"),set:ps("set"),delete:ps("delete"),clear:ps("clear"),forEach:ch(!0,!1)},i={get(s){return oh(this,s,!0,!0)},get size(){return lh(this,!0)},has(s){return ah.call(this,s,!0)},add:ps("add"),set:ps("set"),delete:ps("delete"),clear:ps("clear"),forEach:ch(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=uh(s,!1,!1),n[s]=uh(s,!0,!1),t[s]=uh(s,!1,!0),i[s]=uh(s,!0,!0)}),[e,n,t,i]}const[LF,OF,kF,FF]=IF();function w1(e,t){const n=t?e?FF:kF:e?OF:LF;return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(Ht(n,r)&&r in i?n:i,r,s)}const PF={get:w1(!1,!1)},NF={get:w1(!1,!0)},DF={get:w1(!0,!1)},QC=new WeakMap,tS=new WeakMap,eS=new WeakMap,$F=new WeakMap;function zF(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function WF(e){return e.__v_skip||!Object.isExtensible(e)?0:zF(eF(e))}function im(e){return El(e)?e:b1(e,!1,JC,PF,QC)}function nS(e){return b1(e,!1,AF,NF,tS)}function iS(e){return b1(e,!0,RF,DF,eS)}function b1(e,t,n,i,r){if(!me(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const o=WF(e);if(o===0)return e;const a=new Proxy(e,o===2?i:n);return r.set(e,a),a}function ul(e){return El(e)?ul(e.__v_raw):!!(e&&e.__v_isReactive)}function El(e){return!!(e&&e.__v_isReadonly)}function _d(e){return!!(e&&e.__v_isShallow)}function rS(e){return ul(e)||El(e)}function Ut(e){const t=e&&e.__v_raw;return t?Ut(t):e}function x1(e){return yd(e,"__v_skip",!0),e}const Tu=e=>me(e)?im(e):e,E1=e=>me(e)?iS(e):e;function sS(e){Us&&Ci&&(e=Ut(e),qC(e.dep||(e.dep=p1())))}function oS(e,t){e=Ut(e);const n=e.dep;n&&gy(n)}function an(e){return!!(e&&e.__v_isRef===!0)}function aS(e){return lS(e,!1)}function GF(e){return lS(e,!0)}function lS(e,t){return an(e)?e:new BF(e,t)}class BF{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ut(t),this._value=n?t:Tu(t)}get value(){return sS(this),this._value}set value(t){const n=this.__v_isShallow||_d(t)||El(t);t=n?t:Ut(t),Eu(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Tu(t),oS(this))}}function ar(e){return an(e)?e.value:e}const HF={get:(e,t,n)=>ar(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return an(r)&&!an(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function cS(e){return ul(e)?e:new Proxy(e,HF)}class YF{constructor(t,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new y1(t,()=>{this._dirty||(this._dirty=!0,oS(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=Ut(this);return sS(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function UF(e,t,n=!1){let i,r;const s=At(e);return s?(i=e,r=Oi):(i=e.get,r=e.set),new YF(i,r,s||!r,n)}function Vs(e,t,n,i){let r;try{r=i?e(...i):e()}catch(s){rm(s,t,n)}return r}function hi(e,t,n,i){if(At(e)){const s=Vs(e,t,n,i);return s&&WC(s)&&s.catch(o=>{rm(o,t,n)}),s}const r=[];for(let s=0;s<e.length;s++)r.push(hi(e[s],t,n,i));return r}function rm(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=n;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Vs(l,null,10,[e,o,a]);return}}VF(e,n,r,i)}function VF(e,t,n,i=!0){console.error(e)}let Cu=!1,my=!1;const rn=[];let Ki=0;const fl=[];let Nr=null,Ao=0;const uS=Promise.resolve();let T1=null;function fS(e){const t=T1||uS;return e?t.then(this?e.bind(this):e):t}function XF(e){let t=Ki+1,n=rn.length;for(;t<n;){const i=t+n>>>1;Su(rn[i])<e?t=i+1:n=i}return t}function C1(e){(!rn.length||!rn.includes(e,Cu&&e.allowRecurse?Ki+1:Ki))&&(e.id==null?rn.push(e):rn.splice(XF(e.id),0,e),hS())}function hS(){!Cu&&!my&&(my=!0,T1=uS.then(gS))}function jF(e){const t=rn.indexOf(e);t>Ki&&rn.splice(t,1)}function qF(e){Tt(e)?fl.push(...e):(!Nr||!Nr.includes(e,e.allowRecurse?Ao+1:Ao))&&fl.push(e),hS()}function Wb(e,t=Cu?Ki+1:0){for(;t<rn.length;t++){const n=rn[t];n&&n.pre&&(rn.splice(t,1),t--,n())}}function dS(e){if(fl.length){const t=[...new Set(fl)];if(fl.length=0,Nr){Nr.push(...t);return}for(Nr=t,Nr.sort((n,i)=>Su(n)-Su(i)),Ao=0;Ao<Nr.length;Ao++)Nr[Ao]();Nr=null,Ao=0}}const Su=e=>e.id==null?1/0:e.id,ZF=(e,t)=>{const n=Su(e)-Su(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function gS(e){my=!1,Cu=!0,rn.sort(ZF);const t=Oi;try{for(Ki=0;Ki<rn.length;Ki++){const n=rn[Ki];n&&n.active!==!1&&Vs(n,null,14)}}finally{Ki=0,rn.length=0,dS(),Cu=!1,T1=null,(rn.length||fl.length)&&gS()}}function KF(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||fe;let r=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:h}=i[u]||fe;h&&(r=n.map(d=>Pe(d)?d.trim():d)),f&&(r=n.map(rF))}let a,l=i[a=N0(t)]||i[a=N0(hr(t))];!l&&s&&(l=i[a=N0(tc(t))]),l&&hi(l,e,6,r);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,hi(c,e,6,r)}}function mS(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!At(e)){const l=c=>{const u=mS(c,t,!0);u&&(a=!0,ke(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(me(e)&&i.set(e,null),null):(Tt(s)?s.forEach(l=>o[l]=null):ke(o,s),me(e)&&i.set(e,o),o)}function sm(e,t){return!e||!Jg(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ht(e,t[0].toLowerCase()+t.slice(1))||Ht(e,tc(t))||Ht(e,t))}let Hn=null,om=null;function vd(e){const t=Hn;return Hn=e,om=e&&e.type.__scopeId||null,t}function ic(e){om=e}function rc(){om=null}function S1(e,t=Hn,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Jb(-1);const s=vd(t);let o;try{o=e(...r)}finally{vd(s),i._d&&Jb(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function $0(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:h,setupState:d,ctx:g,inheritAttrs:m}=e;let _,p;const y=vd(e);try{if(n.shapeFlag&4){const v=r||i;_=qi(u.call(v,v,f,s,d,h,g)),p=l}else{const v=t;_=qi(v.length>1?v(s,{attrs:l,slots:a,emit:c}):v(s,null)),p=t.props?l:JF(l)}}catch(v){uu.length=0,rm(v,e,1),_=Lt(ki)}let w=_;if(p&&m!==!1){const v=Object.keys(p),{shapeFlag:x}=w;v.length&&x&7&&(o&&v.some(h1)&&(p=QF(p,o)),w=js(w,p))}return n.dirs&&(w=js(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),_=w,vd(y),_}const JF=e=>{let t;for(const n in e)(n==="class"||n==="style"||Jg(n))&&((t||(t={}))[n]=e[n]);return t},QF=(e,t)=>{const n={};for(const i in e)(!h1(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function t4(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?Gb(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==i[h]&&!sm(c,h))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Gb(i,o,c):!0:!!o;return!1}function Gb(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!sm(n,s))return!0}return!1}function e4({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const n4=e=>e.__isSuspense;function i4(e,t){t&&t.pendingBranch?Tt(e)?t.effects.push(...e):t.effects.push(e):qF(e)}const fh={};function id(e,t,n){return pS(e,t,n)}function pS(e,t,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=fe){var a;const l=gF()===((a=Ue)==null?void 0:a.scope)?Ue:null;let c,u=!1,f=!1;if(an(e)?(c=()=>e.value,u=_d(e)):ul(e)?(c=()=>e,i=!0):Tt(e)?(f=!0,u=e.some(v=>ul(v)||_d(v)),c=()=>e.map(v=>{if(an(v))return v.value;if(ul(v))return Fo(v);if(At(v))return Vs(v,l,2)})):At(e)?t?c=()=>Vs(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return h&&h(),hi(e,l,3,[d])}:c=Oi,t&&i){const v=c;c=()=>Fo(v())}let h,d=v=>{h=y.onStop=()=>{Vs(v,l,4)}},g;if(Ru)if(d=Oi,t?n&&hi(t,l,3,[c(),f?[]:void 0,d]):c(),r==="sync"){const v=Q4();g=v.__watcherHandles||(v.__watcherHandles=[])}else return Oi;let m=f?new Array(e.length).fill(fh):fh;const _=()=>{if(y.active)if(t){const v=y.run();(i||u||(f?v.some((x,b)=>Eu(x,m[b])):Eu(v,m)))&&(h&&h(),hi(t,l,3,[v,m===fh?void 0:f&&m[0]===fh?[]:m,d]),m=v)}else y.run()};_.allowRecurse=!!t;let p;r==="sync"?p=_:r==="post"?p=()=>En(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),p=()=>C1(_));const y=new y1(c,p);t?n?_():m=y.run():r==="post"?En(y.run.bind(y),l&&l.suspense):y.run();const w=()=>{y.stop(),l&&l.scope&&d1(l.scope.effects,y)};return g&&g.push(w),w}function r4(e,t,n){const i=this.proxy,r=Pe(e)?e.includes(".")?yS(i,e):()=>i[e]:e.bind(i,i);let s;At(t)?s=t:(s=t.handler,n=t);const o=Ue;Tl(this);const a=pS(r,s.bind(i),n);return o?Tl(o):Xo(),a}function yS(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function Fo(e,t){if(!me(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),an(e))Fo(e.value,t);else if(Tt(e))for(let n=0;n<e.length;n++)Fo(e[n],t);else if(zC(e)||cl(e))e.forEach(n=>{Fo(n,t)});else if(BC(e))for(const n in e)Fo(e[n],t);return e}function en(e,t){const n=Hn;if(n===null)return e;const i=fm(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,a,l,c=fe]=t[s];o&&(At(o)&&(o={mounted:o,updated:o}),o.deep&&Fo(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function yo(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(ec(),hi(l,n,8,[e.el,a,e,t]),nc())}}function s4(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xS(()=>{e.isMounted=!0}),ES(()=>{e.isUnmounting=!0}),e}const ni=[Function,Array],_S={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ni,onEnter:ni,onAfterEnter:ni,onEnterCancelled:ni,onBeforeLeave:ni,onLeave:ni,onAfterLeave:ni,onLeaveCancelled:ni,onBeforeAppear:ni,onAppear:ni,onAfterAppear:ni,onAppearCancelled:ni},o4={name:"BaseTransition",props:_S,setup(e,{slots:t}){const n=U4(),i=s4();let r;return()=>{const s=t.default&&wS(t.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==ki){o=m;break}}const a=Ut(e),{mode:l}=a;if(i.isLeaving)return z0(o);const c=Bb(o);if(!c)return z0(o);const u=py(c,a,i,n);yy(c,u);const f=n.subTree,h=f&&Bb(f);let d=!1;const{getTransitionKey:g}=c.type;if(g){const m=g();r===void 0?r=m:m!==r&&(r=m,d=!0)}if(h&&h.type!==ki&&(!Io(c,h)||d)){const m=py(h,a,i,n);if(yy(h,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},z0(o);l==="in-out"&&c.type!==ki&&(m.delayLeave=(_,p,y)=>{const w=vS(i,h);w[String(h.key)]=h,_._leaveCb=()=>{p(),_._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=y})}return o}}},a4=o4;function vS(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function py(e,t,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:m,onAppear:_,onAfterAppear:p,onAppearCancelled:y}=t,w=String(e.key),v=vS(n,e),x=(T,M)=>{T&&hi(T,i,9,M)},b=(T,M)=>{const C=M[1];x(T,M),Tt(T)?T.every(R=>R.length<=1)&&C():T.length<=1&&C()},E={mode:s,persisted:o,beforeEnter(T){let M=a;if(!n.isMounted)if(r)M=m||a;else return;T._leaveCb&&T._leaveCb(!0);const C=v[w];C&&Io(e,C)&&C.el._leaveCb&&C.el._leaveCb(),x(M,[T])},enter(T){let M=l,C=c,R=u;if(!n.isMounted)if(r)M=_||l,C=p||c,R=y||u;else return;let A=!1;const k=T._enterCb=O=>{A||(A=!0,O?x(R,[T]):x(C,[T]),E.delayedLeave&&E.delayedLeave(),T._enterCb=void 0)};M?b(M,[T,k]):k()},leave(T,M){const C=String(e.key);if(T._enterCb&&T._enterCb(!0),n.isUnmounting)return M();x(f,[T]);let R=!1;const A=T._leaveCb=k=>{R||(R=!0,M(),k?x(g,[T]):x(d,[T]),T._leaveCb=void 0,v[C]===e&&delete v[C])};v[C]=e,h?b(h,[T,A]):A()},clone(T){return py(T,t,n,i)}};return E}function z0(e){if(am(e))return e=js(e),e.children=null,e}function Bb(e){return am(e)?e.children?e.children[0]:void 0:e}function yy(e,t){e.shapeFlag&6&&e.component?yy(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function wS(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===ji?(o.patchFlag&128&&r++,i=i.concat(wS(o.children,t,a))):(t||o.type!==ki)&&i.push(a!=null?js(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function pi(e,t){return At(e)?(()=>ke({name:e.name},t,{setup:e}))():e}const rd=e=>!!e.type.__asyncLoader,am=e=>e.type.__isKeepAlive;function l4(e,t){bS(e,"a",t)}function c4(e,t){bS(e,"da",t)}function bS(e,t,n=Ue){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(lm(t,i,n),n){let r=n.parent;for(;r&&r.parent;)am(r.parent.vnode)&&u4(i,t,n,r),r=r.parent}}function u4(e,t,n,i){const r=lm(t,e,i,!0);TS(()=>{d1(i[t],r)},n)}function lm(e,t,n=Ue,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;ec(),Tl(n);const a=hi(t,n,e,o);return Xo(),nc(),a});return i?r.unshift(s):r.push(s),s}}const as=e=>(t,n=Ue)=>(!Ru||e==="sp")&&lm(e,(...i)=>t(...i),n),f4=as("bm"),xS=as("m"),h4=as("bu"),d4=as("u"),ES=as("bum"),TS=as("um"),g4=as("sp"),m4=as("rtg"),p4=as("rtc");function y4(e,t=Ue){lm("ec",e,t)}const CS="components";function _4(e,t){return w4(CS,e,!0,t)||e}const v4=Symbol.for("v-ndc");function w4(e,t,n=!0,i=!1){const r=Hn||Ue;if(r){const s=r.type;if(e===CS){const a=Z4(s,!1);if(a&&(a===t||a===hr(t)||a===em(hr(t))))return s}const o=Hb(r[e]||s[e],t)||Hb(r.appContext[e],t);return!o&&i?s:o}}function Hb(e,t){return e&&(e[t]||e[hr(t)]||e[em(hr(t))])}const _y=e=>e?DS(e)?fm(e)||e.proxy:_y(e.parent):null,cu=ke(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>_y(e.parent),$root:e=>_y(e.root),$emit:e=>e.emit,$options:e=>M1(e),$forceUpdate:e=>e.f||(e.f=()=>C1(e.update)),$nextTick:e=>e.n||(e.n=fS.bind(e.proxy)),$watch:e=>r4.bind(e)}),W0=(e,t)=>e!==fe&&!e.__isScriptSetup&&Ht(e,t),b4={get({_:e},t){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(W0(i,t))return o[t]=1,i[t];if(r!==fe&&Ht(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&Ht(c,t))return o[t]=3,s[t];if(n!==fe&&Ht(n,t))return o[t]=4,n[t];vy&&(o[t]=0)}}const u=cu[t];let f,h;if(u)return t==="$attrs"&&Fn(e,"get",t),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==fe&&Ht(n,t))return o[t]=4,n[t];if(h=l.config.globalProperties,Ht(h,t))return h[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return W0(r,t)?(r[t]=n,!0):i!==fe&&Ht(i,t)?(i[t]=n,!0):Ht(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!n[o]||e!==fe&&Ht(e,o)||W0(t,o)||(a=s[0])&&Ht(a,o)||Ht(i,o)||Ht(cu,o)||Ht(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ht(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Yb(e){return Tt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let vy=!0;function x4(e){const t=M1(e),n=e.proxy,i=e.ctx;vy=!1,t.beforeCreate&&Ub(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:m,deactivated:_,beforeDestroy:p,beforeUnmount:y,destroyed:w,unmounted:v,render:x,renderTracked:b,renderTriggered:E,errorCaptured:T,serverPrefetch:M,expose:C,inheritAttrs:R,components:A,directives:k,filters:O}=t;if(c&&E4(c,i,null),o)for(const P in o){const G=o[P];At(G)&&(i[P]=G.bind(n))}if(r){const P=r.call(n,n);me(P)&&(e.data=im(P))}if(vy=!0,s)for(const P in s){const G=s[P],j=At(G)?G.bind(n,n):At(G.get)?G.get.bind(n,n):Oi,U=!At(G)&&At(G.set)?G.set.bind(n):Oi,q=Si({get:j,set:U});Object.defineProperty(i,P,{enumerable:!0,configurable:!0,get:()=>q.value,set:W=>q.value=W})}if(a)for(const P in a)SS(a[P],i,n,P);if(l){const P=At(l)?l.call(n):l;Reflect.ownKeys(P).forEach(G=>{sd(G,P[G])})}u&&Ub(u,e,"c");function F(P,G){Tt(G)?G.forEach(j=>P(j.bind(n))):G&&P(G.bind(n))}if(F(f4,f),F(xS,h),F(h4,d),F(d4,g),F(l4,m),F(c4,_),F(y4,T),F(p4,b),F(m4,E),F(ES,y),F(TS,v),F(g4,M),Tt(C))if(C.length){const P=e.exposed||(e.exposed={});C.forEach(G=>{Object.defineProperty(P,G,{get:()=>n[G],set:j=>n[G]=j})})}else e.exposed||(e.exposed={});x&&e.render===Oi&&(e.render=x),R!=null&&(e.inheritAttrs=R),A&&(e.components=A),k&&(e.directives=k)}function E4(e,t,n=Oi){Tt(e)&&(e=wy(e));for(const i in e){const r=e[i];let s;me(r)?"default"in r?s=Vr(r.from||i,r.default,!0):s=Vr(r.from||i):s=Vr(r),an(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function Ub(e,t,n){hi(Tt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function SS(e,t,n,i){const r=i.includes(".")?yS(n,i):()=>n[i];if(Pe(e)){const s=t[e];At(s)&&id(r,s)}else if(At(e))id(r,e.bind(n));else if(me(e))if(Tt(e))e.forEach(s=>SS(s,t,n,i));else{const s=At(e.handler)?e.handler.bind(n):t[e.handler];At(s)&&id(r,s,e)}}function M1(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!n&&!i?l=t:(l={},r.length&&r.forEach(c=>wd(l,c,o,!0)),wd(l,t,o)),me(t)&&s.set(t,l),l}function wd(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&wd(e,s,n,!0),r&&r.forEach(o=>wd(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=T4[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const T4={data:Vb,props:Xb,emits:Xb,methods:jc,computed:jc,beforeCreate:hn,created:hn,beforeMount:hn,mounted:hn,beforeUpdate:hn,updated:hn,beforeDestroy:hn,beforeUnmount:hn,destroyed:hn,unmounted:hn,activated:hn,deactivated:hn,errorCaptured:hn,serverPrefetch:hn,components:jc,directives:jc,watch:S4,provide:Vb,inject:C4};function Vb(e,t){return t?e?function(){return ke(At(e)?e.call(this,this):e,At(t)?t.call(this,this):t)}:t:e}function C4(e,t){return jc(wy(e),wy(t))}function wy(e){if(Tt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function hn(e,t){return e?[...new Set([].concat(e,t))]:t}function jc(e,t){return e?ke(Object.create(null),e,t):t}function Xb(e,t){return e?Tt(e)&&Tt(t)?[...new Set([...e,...t])]:ke(Object.create(null),Yb(e),Yb(t??{})):t}function S4(e,t){if(!e)return t;if(!t)return e;const n=ke(Object.create(null),e);for(const i in t)n[i]=hn(e[i],t[i]);return n}function MS(){return{app:null,config:{isNativeTag:Jk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let M4=0;function R4(e,t){return function(i,r=null){At(i)||(i=ke({},i)),r!=null&&!me(r)&&(r=null);const s=MS(),o=new Set;let a=!1;const l=s.app={_uid:M4++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:tP,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&At(c.install)?(o.add(c),c.install(l,...u)):At(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,f){if(!a){const h=Lt(i,r);return h.appContext=s,u&&t?t(h,c):e(h,c,f),a=!0,l._container=c,c.__vue_app__=l,fm(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){bd=l;try{return c()}finally{bd=null}}};return l}}let bd=null;function sd(e,t){if(Ue){let n=Ue.provides;const i=Ue.parent&&Ue.parent.provides;i===n&&(n=Ue.provides=Object.create(i)),n[e]=t}}function Vr(e,t,n=!1){const i=Ue||Hn;if(i||bd){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:bd._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&At(t)?t.call(i&&i.proxy):t}}function A4(e,t,n,i=!1){const r={},s={};yd(s,um,1),e.propsDefaults=Object.create(null),RS(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:nS(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function I4(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=Ut(r),[l]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(sm(e.emitsOptions,h))continue;const d=t[h];if(l)if(Ht(s,h))d!==s[h]&&(s[h]=d,c=!0);else{const g=hr(h);r[g]=by(l,a,g,d,e,!1)}else d!==s[h]&&(s[h]=d,c=!0)}}}else{RS(e,t,r,s)&&(c=!0);let u;for(const f in a)(!t||!Ht(t,f)&&((u=tc(f))===f||!Ht(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=by(l,a,f,void 0,e,!0)):delete r[f]);if(s!==a)for(const f in s)(!t||!Ht(t,f))&&(delete s[f],c=!0)}c&&ts(e,"set","$attrs")}function RS(e,t,n,i){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(nd(l))continue;const c=t[l];let u;r&&Ht(r,u=hr(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:sm(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=Ut(n),c=a||fe;for(let u=0;u<s.length;u++){const f=s[u];n[f]=by(r,l,f,c[f],e,!Ht(c,f))}}return o}function by(e,t,n,i,r,s){const o=e[n];if(o!=null){const a=Ht(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&At(l)){const{propsDefaults:c}=r;n in c?i=c[n]:(Tl(r),i=c[n]=l.call(null,t),Xo())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===tc(n))&&(i=!0))}return i}function AS(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let l=!1;if(!At(e)){const u=f=>{l=!0;const[h,d]=AS(f,t,!0);ke(o,h),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return me(e)&&i.set(e,ll),ll;if(Tt(s))for(let u=0;u<s.length;u++){const f=hr(s[u]);jb(f)&&(o[f]=fe)}else if(s)for(const u in s){const f=hr(u);if(jb(f)){const h=s[u],d=o[f]=Tt(h)||At(h)?{type:h}:ke({},h);if(d){const g=Kb(Boolean,d.type),m=Kb(String,d.type);d[0]=g>-1,d[1]=m<0||g<m,(g>-1||Ht(d,"default"))&&a.push(f)}}}const c=[o,a];return me(e)&&i.set(e,c),c}function jb(e){return e[0]!=="$"}function qb(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Zb(e,t){return qb(e)===qb(t)}function Kb(e,t){return Tt(t)?t.findIndex(n=>Zb(n,e)):At(t)&&Zb(t,e)?0:-1}const IS=e=>e[0]==="_"||e==="$stable",R1=e=>Tt(e)?e.map(qi):[qi(e)],L4=(e,t,n)=>{if(t._n)return t;const i=S1((...r)=>R1(t(...r)),n);return i._c=!1,i},LS=(e,t,n)=>{const i=e._ctx;for(const r in e){if(IS(r))continue;const s=e[r];if(At(s))t[r]=L4(r,s,i);else if(s!=null){const o=R1(s);t[r]=()=>o}}},OS=(e,t)=>{const n=R1(t);e.slots.default=()=>n},O4=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Ut(t),yd(t,"_",n)):LS(t,e.slots={})}else e.slots={},t&&OS(e,t);yd(e.slots,um,1)},k4=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=fe;if(i.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:(ke(r,t),!n&&a===1&&delete r._):(s=!t.$stable,LS(t,r)),o=t}else t&&(OS(e,t),o={default:1});if(s)for(const a in r)!IS(a)&&!(a in o)&&delete r[a]};function xy(e,t,n,i,r=!1){if(Tt(e)){e.forEach((h,d)=>xy(h,t&&(Tt(t)?t[d]:t),n,i,r));return}if(rd(i)&&!r)return;const s=i.shapeFlag&4?fm(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=e,c=t&&t.r,u=a.refs===fe?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(Pe(c)?(u[c]=null,Ht(f,c)&&(f[c]=null)):an(c)&&(c.value=null)),At(l))Vs(l,a,12,[o,u]);else{const h=Pe(l),d=an(l);if(h||d){const g=()=>{if(e.f){const m=h?Ht(f,l)?f[l]:u[l]:l.value;r?Tt(m)&&d1(m,s):Tt(m)?m.includes(s)||m.push(s):h?(u[l]=[s],Ht(f,l)&&(f[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else h?(u[l]=o,Ht(f,l)&&(f[l]=o)):d&&(l.value=o,e.k&&(u[e.k]=o))};o?(g.id=-1,En(g,n)):g()}}}const En=i4;function F4(e){return P4(e)}function P4(e,t){const n=uy();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=Oi,insertStaticContent:g}=e,m=(S,L,D,B=null,H=null,X=null,rt=!1,J=null,tt=!!L.dynamicChildren)=>{if(S===L)return;S&&!Io(S,L)&&(B=z(S),W(S,H,X,!0),S=null),L.patchFlag===-2&&(tt=!1,L.dynamicChildren=null);const{type:Z,ref:ct,shapeFlag:at}=L;switch(Z){case cm:_(S,L,D,B);break;case ki:p(S,L,D,B);break;case G0:S==null&&y(L,D,B,rt);break;case ji:A(S,L,D,B,H,X,rt,J,tt);break;default:at&1?x(S,L,D,B,H,X,rt,J,tt):at&6?k(S,L,D,B,H,X,rt,J,tt):(at&64||at&128)&&Z.process(S,L,D,B,H,X,rt,J,tt,$)}ct!=null&&H&&xy(ct,S&&S.ref,X,L||S,!L)},_=(S,L,D,B)=>{if(S==null)i(L.el=a(L.children),D,B);else{const H=L.el=S.el;L.children!==S.children&&c(H,L.children)}},p=(S,L,D,B)=>{S==null?i(L.el=l(L.children||""),D,B):L.el=S.el},y=(S,L,D,B)=>{[S.el,S.anchor]=g(S.children,L,D,B,S.el,S.anchor)},w=({el:S,anchor:L},D,B)=>{let H;for(;S&&S!==L;)H=h(S),i(S,D,B),S=H;i(L,D,B)},v=({el:S,anchor:L})=>{let D;for(;S&&S!==L;)D=h(S),r(S),S=D;r(L)},x=(S,L,D,B,H,X,rt,J,tt)=>{rt=rt||L.type==="svg",S==null?b(L,D,B,H,X,rt,J,tt):M(S,L,H,X,rt,J,tt)},b=(S,L,D,B,H,X,rt,J)=>{let tt,Z;const{type:ct,props:at,shapeFlag:ut,transition:ft,dirs:Ct}=S;if(tt=S.el=o(S.type,X,at&&at.is,at),ut&8?u(tt,S.children):ut&16&&T(S.children,tt,null,B,H,X&&ct!=="foreignObject",rt,J),Ct&&yo(S,null,B,"created"),E(tt,S,S.scopeId,rt,B),at){for(const Mt in at)Mt!=="value"&&!nd(Mt)&&s(tt,Mt,null,at[Mt],X,S.children,B,H,ot);"value"in at&&s(tt,"value",null,at.value),(Z=at.onVnodeBeforeMount)&&Vi(Z,B,S)}Ct&&yo(S,null,B,"beforeMount");const Pt=(!H||H&&!H.pendingBranch)&&ft&&!ft.persisted;Pt&&ft.beforeEnter(tt),i(tt,L,D),((Z=at&&at.onVnodeMounted)||Pt||Ct)&&En(()=>{Z&&Vi(Z,B,S),Pt&&ft.enter(tt),Ct&&yo(S,null,B,"mounted")},H)},E=(S,L,D,B,H)=>{if(D&&d(S,D),B)for(let X=0;X<B.length;X++)d(S,B[X]);if(H){let X=H.subTree;if(L===X){const rt=H.vnode;E(S,rt,rt.scopeId,rt.slotScopeIds,H.parent)}}},T=(S,L,D,B,H,X,rt,J,tt=0)=>{for(let Z=tt;Z<S.length;Z++){const ct=S[Z]=J?As(S[Z]):qi(S[Z]);m(null,ct,L,D,B,H,X,rt,J)}},M=(S,L,D,B,H,X,rt)=>{const J=L.el=S.el;let{patchFlag:tt,dynamicChildren:Z,dirs:ct}=L;tt|=S.patchFlag&16;const at=S.props||fe,ut=L.props||fe;let ft;D&&_o(D,!1),(ft=ut.onVnodeBeforeUpdate)&&Vi(ft,D,L,S),ct&&yo(L,S,D,"beforeUpdate"),D&&_o(D,!0);const Ct=H&&L.type!=="foreignObject";if(Z?C(S.dynamicChildren,Z,J,D,B,Ct,X):rt||G(S,L,J,null,D,B,Ct,X,!1),tt>0){if(tt&16)R(J,L,at,ut,D,B,H);else if(tt&2&&at.class!==ut.class&&s(J,"class",null,ut.class,H),tt&4&&s(J,"style",at.style,ut.style,H),tt&8){const Pt=L.dynamicProps;for(let Mt=0;Mt<Pt.length;Mt++){const Jt=Pt[Mt],we=at[Jt],de=ut[Jt];(de!==we||Jt==="value")&&s(J,Jt,we,de,H,S.children,D,B,ot)}}tt&1&&S.children!==L.children&&u(J,L.children)}else!rt&&Z==null&&R(J,L,at,ut,D,B,H);((ft=ut.onVnodeUpdated)||ct)&&En(()=>{ft&&Vi(ft,D,L,S),ct&&yo(L,S,D,"updated")},B)},C=(S,L,D,B,H,X,rt)=>{for(let J=0;J<L.length;J++){const tt=S[J],Z=L[J],ct=tt.el&&(tt.type===ji||!Io(tt,Z)||tt.shapeFlag&70)?f(tt.el):D;m(tt,Z,ct,null,B,H,X,rt,!0)}},R=(S,L,D,B,H,X,rt)=>{if(D!==B){if(D!==fe)for(const J in D)!nd(J)&&!(J in B)&&s(S,J,D[J],null,rt,L.children,H,X,ot);for(const J in B){if(nd(J))continue;const tt=B[J],Z=D[J];tt!==Z&&J!=="value"&&s(S,J,Z,tt,rt,L.children,H,X,ot)}"value"in B&&s(S,"value",D.value,B.value)}},A=(S,L,D,B,H,X,rt,J,tt)=>{const Z=L.el=S?S.el:a(""),ct=L.anchor=S?S.anchor:a("");let{patchFlag:at,dynamicChildren:ut,slotScopeIds:ft}=L;ft&&(J=J?J.concat(ft):ft),S==null?(i(Z,D,B),i(ct,D,B),T(L.children,D,ct,H,X,rt,J,tt)):at>0&&at&64&&ut&&S.dynamicChildren?(C(S.dynamicChildren,ut,D,H,X,rt,J),(L.key!=null||H&&L===H.subTree)&&kS(S,L,!0)):G(S,L,D,ct,H,X,rt,J,tt)},k=(S,L,D,B,H,X,rt,J,tt)=>{L.slotScopeIds=J,S==null?L.shapeFlag&512?H.ctx.activate(L,D,B,rt,tt):O(L,D,B,H,X,rt,tt):I(S,L,tt)},O=(S,L,D,B,H,X,rt)=>{const J=S.component=Y4(S,B,H);if(am(S)&&(J.ctx.renderer=$),V4(J),J.asyncDep){if(H&&H.registerDep(J,F),!S.el){const tt=J.subTree=Lt(ki);p(null,tt,L,D)}return}F(J,S,L,D,H,X,rt)},I=(S,L,D)=>{const B=L.component=S.component;if(t4(S,L,D))if(B.asyncDep&&!B.asyncResolved){P(B,L,D);return}else B.next=L,jF(B.update),B.update();else L.el=S.el,B.vnode=L},F=(S,L,D,B,H,X,rt)=>{const J=()=>{if(S.isMounted){let{next:ct,bu:at,u:ut,parent:ft,vnode:Ct}=S,Pt=ct,Mt;_o(S,!1),ct?(ct.el=Ct.el,P(S,ct,rt)):ct=Ct,at&&D0(at),(Mt=ct.props&&ct.props.onVnodeBeforeUpdate)&&Vi(Mt,ft,ct,Ct),_o(S,!0);const Jt=$0(S),we=S.subTree;S.subTree=Jt,m(we,Jt,f(we.el),z(we),S,H,X),ct.el=Jt.el,Pt===null&&e4(S,Jt.el),ut&&En(ut,H),(Mt=ct.props&&ct.props.onVnodeUpdated)&&En(()=>Vi(Mt,ft,ct,Ct),H)}else{let ct;const{el:at,props:ut}=L,{bm:ft,m:Ct,parent:Pt}=S,Mt=rd(L);if(_o(S,!1),ft&&D0(ft),!Mt&&(ct=ut&&ut.onVnodeBeforeMount)&&Vi(ct,Pt,L),_o(S,!0),at&&K){const Jt=()=>{S.subTree=$0(S),K(at,S.subTree,S,H,null)};Mt?L.type.__asyncLoader().then(()=>!S.isUnmounted&&Jt()):Jt()}else{const Jt=S.subTree=$0(S);m(null,Jt,D,B,S,H,X),L.el=Jt.el}if(Ct&&En(Ct,H),!Mt&&(ct=ut&&ut.onVnodeMounted)){const Jt=L;En(()=>Vi(ct,Pt,Jt),H)}(L.shapeFlag&256||Pt&&rd(Pt.vnode)&&Pt.vnode.shapeFlag&256)&&S.a&&En(S.a,H),S.isMounted=!0,L=D=B=null}},tt=S.effect=new y1(J,()=>C1(Z),S.scope),Z=S.update=()=>tt.run();Z.id=S.uid,_o(S,!0),Z()},P=(S,L,D)=>{L.component=S;const B=S.vnode.props;S.vnode=L,S.next=null,I4(S,L.props,B,D),k4(S,L.children,D),ec(),Wb(),nc()},G=(S,L,D,B,H,X,rt,J,tt=!1)=>{const Z=S&&S.children,ct=S?S.shapeFlag:0,at=L.children,{patchFlag:ut,shapeFlag:ft}=L;if(ut>0){if(ut&128){U(Z,at,D,B,H,X,rt,J,tt);return}else if(ut&256){j(Z,at,D,B,H,X,rt,J,tt);return}}ft&8?(ct&16&&ot(Z,H,X),at!==Z&&u(D,at)):ct&16?ft&16?U(Z,at,D,B,H,X,rt,J,tt):ot(Z,H,X,!0):(ct&8&&u(D,""),ft&16&&T(at,D,B,H,X,rt,J,tt))},j=(S,L,D,B,H,X,rt,J,tt)=>{S=S||ll,L=L||ll;const Z=S.length,ct=L.length,at=Math.min(Z,ct);let ut;for(ut=0;ut<at;ut++){const ft=L[ut]=tt?As(L[ut]):qi(L[ut]);m(S[ut],ft,D,null,H,X,rt,J,tt)}Z>ct?ot(S,H,X,!0,!1,at):T(L,D,B,H,X,rt,J,tt,at)},U=(S,L,D,B,H,X,rt,J,tt)=>{let Z=0;const ct=L.length;let at=S.length-1,ut=ct-1;for(;Z<=at&&Z<=ut;){const ft=S[Z],Ct=L[Z]=tt?As(L[Z]):qi(L[Z]);if(Io(ft,Ct))m(ft,Ct,D,null,H,X,rt,J,tt);else break;Z++}for(;Z<=at&&Z<=ut;){const ft=S[at],Ct=L[ut]=tt?As(L[ut]):qi(L[ut]);if(Io(ft,Ct))m(ft,Ct,D,null,H,X,rt,J,tt);else break;at--,ut--}if(Z>at){if(Z<=ut){const ft=ut+1,Ct=ft<ct?L[ft].el:B;for(;Z<=ut;)m(null,L[Z]=tt?As(L[Z]):qi(L[Z]),D,Ct,H,X,rt,J,tt),Z++}}else if(Z>ut)for(;Z<=at;)W(S[Z],H,X,!0),Z++;else{const ft=Z,Ct=Z,Pt=new Map;for(Z=Ct;Z<=ut;Z++){const ge=L[Z]=tt?As(L[Z]):qi(L[Z]);ge.key!=null&&Pt.set(ge.key,Z)}let Mt,Jt=0;const we=ut-Ct+1;let de=!1,ms=0;const Qn=new Array(we);for(Z=0;Z<we;Z++)Qn[Z]=0;for(Z=ft;Z<=at;Z++){const ge=S[Z];if(Jt>=we){W(ge,H,X,!0);continue}let un;if(ge.key!=null)un=Pt.get(ge.key);else for(Mt=Ct;Mt<=ut;Mt++)if(Qn[Mt-Ct]===0&&Io(ge,L[Mt])){un=Mt;break}un===void 0?W(ge,H,X,!0):(Qn[un-Ct]=Z+1,un>=ms?ms=un:de=!0,m(ge,L[un],D,null,H,X,rt,J,tt),Jt++)}const cn=de?N4(Qn):ll;for(Mt=cn.length-1,Z=we-1;Z>=0;Z--){const ge=Ct+Z,un=L[ge],Aa=ge+1<ct?L[ge+1].el:B;Qn[Z]===0?m(null,un,D,Aa,H,X,rt,J,tt):de&&(Mt<0||Z!==cn[Mt]?q(un,D,Aa,2):Mt--)}}},q=(S,L,D,B,H=null)=>{const{el:X,type:rt,transition:J,children:tt,shapeFlag:Z}=S;if(Z&6){q(S.component.subTree,L,D,B);return}if(Z&128){S.suspense.move(L,D,B);return}if(Z&64){rt.move(S,L,D,$);return}if(rt===ji){i(X,L,D);for(let at=0;at<tt.length;at++)q(tt[at],L,D,B);i(S.anchor,L,D);return}if(rt===G0){w(S,L,D);return}if(B!==2&&Z&1&&J)if(B===0)J.beforeEnter(X),i(X,L,D),En(()=>J.enter(X),H);else{const{leave:at,delayLeave:ut,afterLeave:ft}=J,Ct=()=>i(X,L,D),Pt=()=>{at(X,()=>{Ct(),ft&&ft()})};ut?ut(X,Ct,Pt):Pt()}else i(X,L,D)},W=(S,L,D,B=!1,H=!1)=>{const{type:X,props:rt,ref:J,children:tt,dynamicChildren:Z,shapeFlag:ct,patchFlag:at,dirs:ut}=S;if(J!=null&&xy(J,null,D,S,!0),ct&256){L.ctx.deactivate(S);return}const ft=ct&1&&ut,Ct=!rd(S);let Pt;if(Ct&&(Pt=rt&&rt.onVnodeBeforeUnmount)&&Vi(Pt,L,S),ct&6)st(S.component,D,B);else{if(ct&128){S.suspense.unmount(D,B);return}ft&&yo(S,null,L,"beforeUnmount"),ct&64?S.type.remove(S,L,D,H,$,B):Z&&(X!==ji||at>0&&at&64)?ot(Z,L,D,!1,!0):(X===ji&&at&384||!H&&ct&16)&&ot(tt,L,D),B&&Q(S)}(Ct&&(Pt=rt&&rt.onVnodeUnmounted)||ft)&&En(()=>{Pt&&Vi(Pt,L,S),ft&&yo(S,null,L,"unmounted")},D)},Q=S=>{const{type:L,el:D,anchor:B,transition:H}=S;if(L===ji){nt(D,B);return}if(L===G0){v(S);return}const X=()=>{r(D),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(S.shapeFlag&1&&H&&!H.persisted){const{leave:rt,delayLeave:J}=H,tt=()=>rt(D,X);J?J(S.el,X,tt):tt()}else X()},nt=(S,L)=>{let D;for(;S!==L;)D=h(S),r(S),S=D;r(L)},st=(S,L,D)=>{const{bum:B,scope:H,update:X,subTree:rt,um:J}=S;B&&D0(B),H.stop(),X&&(X.active=!1,W(rt,S,L,D)),J&&En(J,L),En(()=>{S.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},ot=(S,L,D,B=!1,H=!1,X=0)=>{for(let rt=X;rt<S.length;rt++)W(S[rt],L,D,B,H)},z=S=>S.shapeFlag&6?z(S.component.subTree):S.shapeFlag&128?S.suspense.next():h(S.anchor||S.el),Y=(S,L,D)=>{S==null?L._vnode&&W(L._vnode,null,null,!0):m(L._vnode||null,S,L,null,null,null,D),Wb(),dS(),L._vnode=S},$={p:m,um:W,m:q,r:Q,mt:O,mc:T,pc:G,pbc:C,n:z,o:e};let V,K;return t&&([V,K]=t($)),{render:Y,hydrate:V,createApp:R4(Y,V)}}function _o({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function kS(e,t,n=!1){const i=e.children,r=t.children;if(Tt(i)&&Tt(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=As(r[s]),a.el=o.el),n||kS(o,a)),a.type===cm&&(a.el=o.el)}}function N4(e){const t=e.slice(),n=[0];let i,r,s,o,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(r=n[n.length-1],e[r]<c){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<c?s=a+1:o=a;c<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const D4=e=>e.__isTeleport,ji=Symbol.for("v-fgt"),cm=Symbol.for("v-txt"),ki=Symbol.for("v-cmt"),G0=Symbol.for("v-stc"),uu=[];let Ai=null;function mt(e=!1){uu.push(Ai=e?null:[])}function $4(){uu.pop(),Ai=uu[uu.length-1]||null}let Mu=1;function Jb(e){Mu+=e}function FS(e){return e.dynamicChildren=Mu>0?Ai||ll:null,$4(),Mu>0&&Ai&&Ai.push(e),e}function wt(e,t,n,i,r,s){return FS(N(e,t,n,i,r,s,!0))}function PS(e,t,n,i,r){return FS(Lt(e,t,n,i,r,!0))}function Ey(e){return e?e.__v_isVNode===!0:!1}function Io(e,t){return e.type===t.type&&e.key===t.key}const um="__vInternal",NS=({key:e})=>e??null,od=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Pe(e)||an(e)||At(e)?{i:Hn,r:e,k:t,f:!!n}:e:null);function N(e,t=null,n=null,i=0,r=null,s=e===ji?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&NS(t),ref:t&&od(t),scopeId:om,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Hn};return a?(A1(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=Pe(n)?8:16),Mu>0&&!o&&Ai&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ai.push(l),l}const Lt=z4;function z4(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===v4)&&(e=ki),Ey(e)){const a=js(e,t,!0);return n&&A1(a,n),Mu>0&&!s&&Ai&&(a.shapeFlag&6?Ai[Ai.indexOf(e)]=a:Ai.push(a)),a.patchFlag|=-2,a}if(K4(e)&&(e=e.__vccOpts),t){t=W4(t);let{class:a,style:l}=t;a&&!Pe(a)&&(t.class=kn(a)),me(l)&&(rS(l)&&!Tt(l)&&(l=ke({},l)),t.style=tn(l))}const o=Pe(e)?1:n4(e)?128:D4(e)?64:me(e)?4:At(e)?2:0;return N(e,t,n,i,r,o,s,!0)}function W4(e){return e?rS(e)||um in e?ke({},e):e:null}function js(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=e,a=t?G4(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&NS(a),ref:t&&t.ref?n&&r?Tt(r)?r.concat(od(t)):[r,od(t)]:od(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ji?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&js(e.ssContent),ssFallback:e.ssFallback&&js(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Bt(e=" ",t=0){return Lt(cm,null,e,t)}function jt(e="",t=!1){return t?(mt(),PS(ki,null,e)):Lt(ki,null,e)}function qi(e){return e==null||typeof e=="boolean"?Lt(ki):Tt(e)?Lt(ji,null,e.slice()):typeof e=="object"?As(e):Lt(cm,null,String(e))}function As(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:js(e)}function A1(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Tt(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),A1(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(um in t)?t._ctx=Hn:r===3&&Hn&&(Hn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else At(t)?(t={default:t,_ctx:Hn},n=32):(t=String(t),i&64?(n=16,t=[Bt(t)]):n=8);e.children=t,e.shapeFlag|=n}function G4(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=kn([t.class,i.class]));else if(r==="style")t.style=tn([t.style,i.style]);else if(Jg(r)){const s=t[r],o=i[r];o&&s!==o&&!(Tt(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function Vi(e,t,n,i=null){hi(e,t,7,[n,i])}const B4=MS();let H4=0;function Y4(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||B4,s={uid:H4++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new UC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:AS(i,r),emitsOptions:mS(i,r),emit:null,emitted:null,propsDefaults:fe,inheritAttrs:i.inheritAttrs,ctx:fe,data:fe,props:fe,attrs:fe,slots:fe,refs:fe,setupState:fe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=KF.bind(null,s),e.ce&&e.ce(s),s}let Ue=null;const U4=()=>Ue||Hn;let I1,La,Qb="__VUE_INSTANCE_SETTERS__";(La=uy()[Qb])||(La=uy()[Qb]=[]),La.push(e=>Ue=e),I1=e=>{La.length>1?La.forEach(t=>t(e)):La[0](e)};const Tl=e=>{I1(e),e.scope.on()},Xo=()=>{Ue&&Ue.scope.off(),I1(null)};function DS(e){return e.vnode.shapeFlag&4}let Ru=!1;function V4(e,t=!1){Ru=t;const{props:n,children:i}=e.vnode,r=DS(e);A4(e,n,r,t),O4(e,i);const s=r?X4(e,t):void 0;return Ru=!1,s}function X4(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=x1(new Proxy(e.ctx,b4));const{setup:i}=n;if(i){const r=e.setupContext=i.length>1?q4(e):null;Tl(e),ec();const s=Vs(i,e,0,[e.props,r]);if(nc(),Xo(),WC(s)){if(s.then(Xo,Xo),t)return s.then(o=>{tx(e,o,t)}).catch(o=>{rm(o,e,0)});e.asyncDep=s}else tx(e,s,t)}else $S(e,t)}function tx(e,t,n){At(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:me(t)&&(e.setupState=cS(t)),$S(e,n)}let ex;function $S(e,t,n){const i=e.type;if(!e.render){if(!t&&ex&&!i.render){const r=i.template||M1(e).template;if(r){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,c=ke(ke({isCustomElement:s,delimiters:a},o),l);i.render=ex(r,c)}}e.render=i.render||Oi}Tl(e),ec(),x4(e),nc(),Xo()}function j4(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Fn(e,"get","$attrs"),t[n]}}))}function q4(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return j4(e)},slots:e.slots,emit:e.emit,expose:t}}function fm(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(cS(x1(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in cu)return cu[n](e)},has(t,n){return n in t||n in cu}}))}function Z4(e,t=!0){return At(e)?e.displayName||e.name:e.name||t&&e.__name}function K4(e){return At(e)&&"__vccOpts"in e}const Si=(e,t)=>UF(e,t,Ru);function zr(e,t,n){const i=arguments.length;return i===2?me(t)&&!Tt(t)?Ey(t)?Lt(e,null,[t]):Lt(e,t):Lt(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Ey(n)&&(n=[n]),Lt(e,t,n))}const J4=Symbol.for("v-scx"),Q4=()=>Vr(J4),tP="3.3.4",eP="http://www.w3.org/2000/svg",Lo=typeof document<"u"?document:null,nx=Lo&&Lo.createElement("template"),nP={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?Lo.createElementNS(eP,e):Lo.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>Lo.createTextNode(e),createComment:e=>Lo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Lo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{nx.innerHTML=i?`<svg>${e}</svg>`:e;const a=nx.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function iP(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function rP(e,t,n){const i=e.style,r=Pe(n);if(n&&!r){if(t&&!Pe(t))for(const s in t)n[s]==null&&Ty(i,s,"");for(const s in n)Ty(i,s,n[s])}else{const s=i.display;r?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const ix=/\s*!important$/;function Ty(e,t,n){if(Tt(n))n.forEach(i=>Ty(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=sP(e,t);ix.test(n)?e.setProperty(tc(i),n.replace(ix,""),"important"):e[i]=n}}const rx=["Webkit","Moz","ms"],B0={};function sP(e,t){const n=B0[t];if(n)return n;let i=hr(t);if(i!=="filter"&&i in e)return B0[t]=i;i=em(i);for(let r=0;r<rx.length;r++){const s=rx[r]+i;if(s in e)return B0[t]=s}return t}const sx="http://www.w3.org/1999/xlink";function oP(e,t,n,i,r){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(sx,t.slice(6,t.length)):e.setAttributeNS(sx,t,n);else{const s=fF(t);n==null||s&&!HC(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function aP(e,t,n,i,r,s,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,r,s),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=HC(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function lP(e,t,n,i){e.addEventListener(t,n,i)}function cP(e,t,n,i){e.removeEventListener(t,n,i)}function uP(e,t,n,i,r=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[a,l]=fP(t);if(i){const c=s[t]=gP(i,r);lP(e,a,c,l)}else o&&(cP(e,a,o,l),s[t]=void 0)}}const ox=/(?:Once|Passive|Capture)$/;function fP(e){let t;if(ox.test(e)){t={};let i;for(;i=e.match(ox);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):tc(e.slice(2)),t]}let H0=0;const hP=Promise.resolve(),dP=()=>H0||(hP.then(()=>H0=0),H0=Date.now());function gP(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;hi(mP(i,n.value),t,5,[i])};return n.value=e,n.attached=dP(),n}function mP(e,t){if(Tt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const ax=/^on[a-z]/,pP=(e,t,n,i,r=!1,s,o,a,l)=>{t==="class"?iP(e,i,r):t==="style"?rP(e,n,i):Jg(t)?h1(t)||uP(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):yP(e,t,i,r))?aP(e,t,i,s,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),oP(e,t,i,r))};function yP(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&ax.test(t)&&At(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||ax.test(t)&&Pe(n)?!1:t in e}const ys="transition",Rc="animation",hm=(e,{slots:t})=>zr(a4,_P(e),t);hm.displayName="Transition";const zS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};hm.props=ke({},_S,zS);const vo=(e,t=[])=>{Tt(e)?e.forEach(n=>n(...t)):e&&e(...t)},lx=e=>e?Tt(e)?e.some(t=>t.length>1):e.length>1:!1;function _P(e){const t={};for(const A in e)A in zS||(t[A]=e[A]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,g=vP(r),m=g&&g[0],_=g&&g[1],{onBeforeEnter:p,onEnter:y,onEnterCancelled:w,onLeave:v,onLeaveCancelled:x,onBeforeAppear:b=p,onAppear:E=y,onAppearCancelled:T=w}=t,M=(A,k,O)=>{wo(A,k?u:a),wo(A,k?c:o),O&&O()},C=(A,k)=>{A._isLeaving=!1,wo(A,f),wo(A,d),wo(A,h),k&&k()},R=A=>(k,O)=>{const I=A?E:y,F=()=>M(k,A,O);vo(I,[k,F]),cx(()=>{wo(k,A?l:s),_s(k,A?u:a),lx(I)||ux(k,i,m,F)})};return ke(t,{onBeforeEnter(A){vo(p,[A]),_s(A,s),_s(A,o)},onBeforeAppear(A){vo(b,[A]),_s(A,l),_s(A,c)},onEnter:R(!1),onAppear:R(!0),onLeave(A,k){A._isLeaving=!0;const O=()=>C(A,k);_s(A,f),xP(),_s(A,h),cx(()=>{A._isLeaving&&(wo(A,f),_s(A,d),lx(v)||ux(A,i,_,O))}),vo(v,[A,O])},onEnterCancelled(A){M(A,!1),vo(w,[A])},onAppearCancelled(A){M(A,!0),vo(T,[A])},onLeaveCancelled(A){C(A),vo(x,[A])}})}function vP(e){if(e==null)return null;if(me(e))return[Y0(e.enter),Y0(e.leave)];{const t=Y0(e);return[t,t]}}function Y0(e){return sF(e)}function _s(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function wo(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function cx(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let wP=0;function ux(e,t,n,i){const r=e._endId=++wP,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=bP(e,t);if(!o)return i();const c=o+"end";let u=0;const f=()=>{e.removeEventListener(c,h),s()},h=d=>{d.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(c,h)}function bP(e,t){const n=window.getComputedStyle(e),i=g=>(n[g]||"").split(", "),r=i(`${ys}Delay`),s=i(`${ys}Duration`),o=fx(r,s),a=i(`${Rc}Delay`),l=i(`${Rc}Duration`),c=fx(a,l);let u=null,f=0,h=0;t===ys?o>0&&(u=ys,f=o,h=s.length):t===Rc?c>0&&(u=Rc,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?ys:Rc:null,h=u?u===ys?s.length:l.length:0);const d=u===ys&&/\b(transform|all)(,|$)/.test(i(`${ys}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function fx(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>hx(n)+hx(e[i])))}function hx(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function xP(){return document.body.offsetHeight}const Tn={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Ac(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Ac(e,!0),i.enter(e)):i.leave(e,()=>{Ac(e,!1)}):Ac(e,t))},beforeUnmount(e,{value:t}){Ac(e,t)}};function Ac(e,t){e.style.display=t?e._vod:"none"}const EP=ke({patchProp:pP},nP);let dx;function TP(){return dx||(dx=F4(EP))}const CP=(...e)=>{const t=TP().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=SP(i);if(!r)return;const s=t._component;!At(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function SP(e){return Pe(e)?document.querySelector(e):e}var MP=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const RP=Symbol();var gx;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(gx||(gx={}));function AP(){const e=hF(!0),t=e.run(()=>aS({}));let n=[],i=[];const r=x1({install(s){r._a=s,s.provide(RP,r),s.config.globalProperties.$pinia=r,i.forEach(o=>n.push(o)),i=[]},use(s){return!this._a&&!MP?i.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const ja=typeof window<"u";function IP(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const ee=Object.assign;function U0(e,t){const n={};for(const i in t){const r=t[i];n[i]=Pi(r)?r.map(e):e(r)}return n}const fu=()=>{},Pi=Array.isArray,LP=/\/$/,OP=e=>e.replace(LP,"");function V0(e,t,n="/"){let i,r={},s="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),r=e(s)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=NP(i??t,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function kP(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function mx(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function FP(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&Cl(t.matched[i],n.matched[r])&&WS(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Cl(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function WS(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!PP(e[n],t[n]))return!1;return!0}function PP(e,t){return Pi(e)?px(e,t):Pi(t)?px(t,e):e===t}function px(e,t){return Pi(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function NP(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var Au;(function(e){e.pop="pop",e.push="push"})(Au||(Au={}));var hu;(function(e){e.back="back",e.forward="forward",e.unknown=""})(hu||(hu={}));function DP(e){if(!e)if(ja){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),OP(e)}const $P=/^[^#]+#/;function zP(e,t){return e.replace($P,"#")+t}function WP(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const dm=()=>({left:window.pageXOffset,top:window.pageYOffset});function GP(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=WP(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function yx(e,t){return(history.state?history.state.position-t:-1)+e}const Cy=new Map;function BP(e,t){Cy.set(e,t)}function HP(e){const t=Cy.get(e);return Cy.delete(e),t}let YP=()=>location.protocol+"//"+location.host;function GS(e,t){const{pathname:n,search:i,hash:r}=t,s=e.indexOf("#");if(s>-1){let a=r.includes(e.slice(s))?e.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),mx(l,"")}return mx(n,e)+i+r}function UP(e,t,n,i){let r=[],s=[],o=null;const a=({state:h})=>{const d=GS(e,location),g=n.value,m=t.value;let _=0;if(h){if(n.value=d,t.value=h,o&&o===g){o=null;return}_=m?h.position-m.position:0}else i(d);r.forEach(p=>{p(n.value,g,{delta:_,type:Au.pop,direction:_?_>0?hu.forward:hu.back:hu.unknown})})};function l(){o=n.value}function c(h){r.push(h);const d=()=>{const g=r.indexOf(h);g>-1&&r.splice(g,1)};return s.push(d),d}function u(){const{history:h}=window;h.state&&h.replaceState(ee({},h.state,{scroll:dm()}),"")}function f(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function _x(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?dm():null}}function VP(e){const{history:t,location:n}=window,i={value:GS(e,n)},r={value:t.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:YP()+e+l;try{t[u?"replaceState":"pushState"](c,"",h),r.value=c}catch(d){console.error(d),n[u?"replace":"assign"](h)}}function o(l,c){const u=ee({},t.state,_x(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=ee({},r.value,t.state,{forward:l,scroll:dm()});s(u.current,u,!0);const f=ee({},_x(i.value,l,null),{position:u.position+1},c);s(l,f,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function XP(e){e=DP(e);const t=VP(e),n=UP(e,t.state,t.location,t.replace);function i(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=ee({location:"",base:e,go:i,createHref:zP.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function jP(e){return typeof e=="string"||e&&typeof e=="object"}function BS(e){return typeof e=="string"||typeof e=="symbol"}const vs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},HS=Symbol("");var vx;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(vx||(vx={}));function Sl(e,t){return ee(new Error,{type:e,[HS]:!0},t)}function Cr(e,t){return e instanceof Error&&HS in e&&(t==null||!!(e.type&t))}const wx="[^/]+?",qP={sensitive:!1,strict:!1,start:!0,end:!0},ZP=/[.+*?^${}()[\]/\\]/g;function KP(e,t){const n=ee({},qP,t),i=[];let r=n.start?"^":"";const s=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const h=c[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(r+="/"),r+=h.value.replace(ZP,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:m,optional:_,regexp:p}=h;s.push({name:g,repeatable:m,optional:_});const y=p||wx;if(y!==wx){d+=10;try{new RegExp(`(${y})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${g}" (${y}): `+v.message)}}let w=m?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(w=_&&c.length<2?`(?:/${w})`:"/"+w),_&&(w+="?"),r+=w,d+=20,_&&(d+=-8),m&&(d+=-20),y===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const d=u[h]||"",g=s[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function l(c){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const d of h)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:_}=d,p=g in c?c[g]:"";if(Pi(p)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const y=Pi(p)?p.join("/"):p;if(!y)if(_)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=y}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function JP(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function QP(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const s=JP(i[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-i.length)===1){if(bx(i))return 1;if(bx(r))return-1}return r.length-i.length}function bx(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const tN={type:0,value:""},eN=/[a-zA-Z0-9_]/;function nN(e){if(!e)return[[]];if(e==="/")return[[tN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function f(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):h();break;case 4:h(),n=i;break;case 1:l==="("?n=2:eN.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}function iN(e,t,n){const i=KP(nN(e.path),n),r=ee(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function rN(e,t){const n=[],i=new Map;t=Tx({strict:!1,end:!0,sensitive:!1},t);function r(u){return i.get(u)}function s(u,f,h){const d=!h,g=sN(u);g.aliasOf=h&&h.record;const m=Tx(t,u),_=[g];if("alias"in u){const w=typeof u.alias=="string"?[u.alias]:u.alias;for(const v of w)_.push(ee({},g,{components:h?h.record.components:g.components,path:v,aliasOf:h?h.record:g}))}let p,y;for(const w of _){const{path:v}=w;if(f&&v[0]!=="/"){const x=f.record.path,b=x[x.length-1]==="/"?"":"/";w.path=f.record.path+(v&&b+v)}if(p=iN(w,f,m),h?h.alias.push(p):(y=y||p,y!==p&&y.alias.push(p),d&&u.name&&!Ex(p)&&o(u.name)),g.children){const x=g.children;for(let b=0;b<x.length;b++)s(x[b],p,h&&h.children[b])}h=h||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&l(p)}return y?()=>{o(y)}:fu}function o(u){if(BS(u)){const f=i.get(u);f&&(i.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let f=0;for(;f<n.length&&QP(u,n[f])>=0&&(u.record.path!==n[f].record.path||!YS(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!Ex(u)&&i.set(u.record.name,u)}function c(u,f){let h,d={},g,m;if("name"in u&&u.name){if(h=i.get(u.name),!h)throw Sl(1,{location:u});m=h.record.name,d=ee(xx(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),u.params&&xx(u.params,h.keys.map(y=>y.name))),g=h.stringify(d)}else if("path"in u)g=u.path,h=n.find(y=>y.re.test(g)),h&&(d=h.parse(g),m=h.record.name);else{if(h=f.name?i.get(f.name):n.find(y=>y.re.test(f.path)),!h)throw Sl(1,{location:u,currentLocation:f});m=h.record.name,d=ee({},f.params,u.params),g=h.stringify(d)}const _=[];let p=h;for(;p;)_.unshift(p.record),p=p.parent;return{name:m,path:g,params:d,matched:_,meta:aN(_)}}return e.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function xx(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function sN(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:oN(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function oN(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function Ex(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function aN(e){return e.reduce((t,n)=>ee(t,n.meta),{})}function Tx(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function YS(e,t){return t.children.some(n=>n===e||YS(e,n))}const US=/#/g,lN=/&/g,cN=/\//g,uN=/=/g,fN=/\?/g,VS=/\+/g,hN=/%5B/g,dN=/%5D/g,XS=/%5E/g,gN=/%60/g,jS=/%7B/g,mN=/%7C/g,qS=/%7D/g,pN=/%20/g;function L1(e){return encodeURI(""+e).replace(mN,"|").replace(hN,"[").replace(dN,"]")}function yN(e){return L1(e).replace(jS,"{").replace(qS,"}").replace(XS,"^")}function Sy(e){return L1(e).replace(VS,"%2B").replace(pN,"+").replace(US,"%23").replace(lN,"%26").replace(gN,"`").replace(jS,"{").replace(qS,"}").replace(XS,"^")}function _N(e){return Sy(e).replace(uN,"%3D")}function vN(e){return L1(e).replace(US,"%23").replace(fN,"%3F")}function wN(e){return e==null?"":vN(e).replace(cN,"%2F")}function xd(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function bN(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(VS," "),o=s.indexOf("="),a=xd(o<0?s:s.slice(0,o)),l=o<0?null:xd(s.slice(o+1));if(a in t){let c=t[a];Pi(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Cx(e){let t="";for(let n in e){const i=e[n];if(n=_N(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Pi(i)?i.map(s=>s&&Sy(s)):[i&&Sy(i)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function xN(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Pi(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const EN=Symbol(""),Sx=Symbol(""),O1=Symbol(""),ZS=Symbol(""),My=Symbol("");function Ic(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Is(e,t,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=f=>{f===!1?a(Sl(4,{from:n,to:t})):f instanceof Error?a(f):jP(f)?a(Sl(2,{from:t,to:f})):(s&&i.enterCallbacks[r]===s&&typeof f=="function"&&s.push(f),o())},c=e.call(i&&i.instances[r],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(f=>a(f))})}function X0(e,t,n,i){const r=[];for(const s of e)for(const o in s.components){let a=s.components[o];if(!(t!=="beforeRouteEnter"&&!s.instances[o]))if(TN(a)){const c=(a.__vccOpts||a)[t];c&&r.push(Is(c,n,i,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=IP(c)?c.default:c;s.components[o]=u;const h=(u.__vccOpts||u)[t];return h&&Is(h,n,i,s,o)()}))}}return r}function TN(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Mx(e){const t=Vr(O1),n=Vr(ZS),i=Si(()=>t.resolve(ar(e.to))),r=Si(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(Cl.bind(null,u));if(h>-1)return h;const d=Rx(l[c-2]);return c>1&&Rx(u)===d&&f[f.length-1].path!==d?f.findIndex(Cl.bind(null,l[c-2])):h}),s=Si(()=>r.value>-1&&RN(n.params,i.value.params)),o=Si(()=>r.value>-1&&r.value===n.matched.length-1&&WS(n.params,i.value.params));function a(l={}){return MN(l)?t[ar(e.replace)?"replace":"push"](ar(e.to)).catch(fu):Promise.resolve()}return{route:i,href:Si(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const CN=pi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Mx,setup(e,{slots:t}){const n=im(Mx(e)),{options:i}=Vr(O1),r=Si(()=>({[Ax(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Ax(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:zr("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),SN=CN;function MN(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function RN(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!Pi(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function Rx(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ax=(e,t,n)=>e??t??n,AN=pi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=Vr(My),r=Si(()=>e.route||i.value),s=Vr(Sx,0),o=Si(()=>{let c=ar(s);const{matched:u}=r.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=Si(()=>r.value.matched[o.value]);sd(Sx,Si(()=>o.value+1)),sd(EN,a),sd(My,r);const l=aS();return id(()=>[l.value,a.value,e.name],([c,u,f],[h,d,g])=>{u&&(u.instances[f]=c,d&&d!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!Cl(u,d)||!h)&&(u.enterCallbacks[f]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=r.value,u=e.name,f=a.value,h=f&&f.components[u];if(!h)return Ix(n.default,{Component:h,route:c});const d=f.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,_=zr(h,ee({},g,t,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return Ix(n.default,{Component:_,route:c})||_}}});function Ix(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const KS=AN;function IN(e){const t=rN(e.routes,e),n=e.parseQuery||bN,i=e.stringifyQuery||Cx,r=e.history,s=Ic(),o=Ic(),a=Ic(),l=GF(vs);let c=vs;ja&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=U0.bind(null,z=>""+z),f=U0.bind(null,wN),h=U0.bind(null,xd);function d(z,Y){let $,V;return BS(z)?($=t.getRecordMatcher(z),V=Y):V=z,t.addRoute(V,$)}function g(z){const Y=t.getRecordMatcher(z);Y&&t.removeRoute(Y)}function m(){return t.getRoutes().map(z=>z.record)}function _(z){return!!t.getRecordMatcher(z)}function p(z,Y){if(Y=ee({},Y||l.value),typeof z=="string"){const D=V0(n,z,Y.path),B=t.resolve({path:D.path},Y),H=r.createHref(D.fullPath);return ee(D,B,{params:h(B.params),hash:xd(D.hash),redirectedFrom:void 0,href:H})}let $;if("path"in z)$=ee({},z,{path:V0(n,z.path,Y.path).path});else{const D=ee({},z.params);for(const B in D)D[B]==null&&delete D[B];$=ee({},z,{params:f(D)}),Y.params=f(Y.params)}const V=t.resolve($,Y),K=z.hash||"";V.params=u(h(V.params));const S=kP(i,ee({},z,{hash:yN(K),path:V.path})),L=r.createHref(S);return ee({fullPath:S,hash:K,query:i===Cx?xN(z.query):z.query||{}},V,{redirectedFrom:void 0,href:L})}function y(z){return typeof z=="string"?V0(n,z,l.value.path):ee({},z)}function w(z,Y){if(c!==z)return Sl(8,{from:Y,to:z})}function v(z){return E(z)}function x(z){return v(ee(y(z),{replace:!0}))}function b(z){const Y=z.matched[z.matched.length-1];if(Y&&Y.redirect){const{redirect:$}=Y;let V=typeof $=="function"?$(z):$;return typeof V=="string"&&(V=V.includes("?")||V.includes("#")?V=y(V):{path:V},V.params={}),ee({query:z.query,hash:z.hash,params:"path"in V?{}:z.params},V)}}function E(z,Y){const $=c=p(z),V=l.value,K=z.state,S=z.force,L=z.replace===!0,D=b($);if(D)return E(ee(y(D),{state:typeof D=="object"?ee({},K,D.state):K,force:S,replace:L}),Y||$);const B=$;B.redirectedFrom=Y;let H;return!S&&FP(i,V,$)&&(H=Sl(16,{to:B,from:V}),q(V,V,!0,!1)),(H?Promise.resolve(H):C(B,V)).catch(X=>Cr(X)?Cr(X,2)?X:U(X):G(X,B,V)).then(X=>{if(X){if(Cr(X,2))return E(ee({replace:L},y(X.to),{state:typeof X.to=="object"?ee({},K,X.to.state):K,force:S}),Y||B)}else X=A(B,V,!0,L,K);return R(B,V,X),X})}function T(z,Y){const $=w(z,Y);return $?Promise.reject($):Promise.resolve()}function M(z){const Y=nt.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(z):z()}function C(z,Y){let $;const[V,K,S]=LN(z,Y);$=X0(V.reverse(),"beforeRouteLeave",z,Y);for(const D of V)D.leaveGuards.forEach(B=>{$.push(Is(B,z,Y))});const L=T.bind(null,z,Y);return $.push(L),ot($).then(()=>{$=[];for(const D of s.list())$.push(Is(D,z,Y));return $.push(L),ot($)}).then(()=>{$=X0(K,"beforeRouteUpdate",z,Y);for(const D of K)D.updateGuards.forEach(B=>{$.push(Is(B,z,Y))});return $.push(L),ot($)}).then(()=>{$=[];for(const D of S)if(D.beforeEnter)if(Pi(D.beforeEnter))for(const B of D.beforeEnter)$.push(Is(B,z,Y));else $.push(Is(D.beforeEnter,z,Y));return $.push(L),ot($)}).then(()=>(z.matched.forEach(D=>D.enterCallbacks={}),$=X0(S,"beforeRouteEnter",z,Y),$.push(L),ot($))).then(()=>{$=[];for(const D of o.list())$.push(Is(D,z,Y));return $.push(L),ot($)}).catch(D=>Cr(D,8)?D:Promise.reject(D))}function R(z,Y,$){a.list().forEach(V=>M(()=>V(z,Y,$)))}function A(z,Y,$,V,K){const S=w(z,Y);if(S)return S;const L=Y===vs,D=ja?history.state:{};$&&(V||L?r.replace(z.fullPath,ee({scroll:L&&D&&D.scroll},K)):r.push(z.fullPath,K)),l.value=z,q(z,Y,$,L),U()}let k;function O(){k||(k=r.listen((z,Y,$)=>{if(!st.listening)return;const V=p(z),K=b(V);if(K){E(ee(K,{replace:!0}),V).catch(fu);return}c=V;const S=l.value;ja&&BP(yx(S.fullPath,$.delta),dm()),C(V,S).catch(L=>Cr(L,12)?L:Cr(L,2)?(E(L.to,V).then(D=>{Cr(D,20)&&!$.delta&&$.type===Au.pop&&r.go(-1,!1)}).catch(fu),Promise.reject()):($.delta&&r.go(-$.delta,!1),G(L,V,S))).then(L=>{L=L||A(V,S,!1),L&&($.delta&&!Cr(L,8)?r.go(-$.delta,!1):$.type===Au.pop&&Cr(L,20)&&r.go(-1,!1)),R(V,S,L)}).catch(fu)}))}let I=Ic(),F=Ic(),P;function G(z,Y,$){U(z);const V=F.list();return V.length?V.forEach(K=>K(z,Y,$)):console.error(z),Promise.reject(z)}function j(){return P&&l.value!==vs?Promise.resolve():new Promise((z,Y)=>{I.add([z,Y])})}function U(z){return P||(P=!z,O(),I.list().forEach(([Y,$])=>z?$(z):Y()),I.reset()),z}function q(z,Y,$,V){const{scrollBehavior:K}=e;if(!ja||!K)return Promise.resolve();const S=!$&&HP(yx(z.fullPath,0))||(V||!$)&&history.state&&history.state.scroll||null;return fS().then(()=>K(z,Y,S)).then(L=>L&&GP(L)).catch(L=>G(L,z,Y))}const W=z=>r.go(z);let Q;const nt=new Set,st={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,hasRoute:_,getRoutes:m,resolve:p,options:e,push:v,replace:x,go:W,back:()=>W(-1),forward:()=>W(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:F.add,isReady:j,install(z){const Y=this;z.component("RouterLink",SN),z.component("RouterView",KS),z.config.globalProperties.$router=Y,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>ar(l)}),ja&&!Q&&l.value===vs&&(Q=!0,v(r.location).catch(K=>{}));const $={};for(const K in vs)Object.defineProperty($,K,{get:()=>l.value[K],enumerable:!0});z.provide(O1,Y),z.provide(ZS,nS($)),z.provide(My,l);const V=z.unmount;nt.add(z),z.unmount=function(){nt.delete(z),nt.size<1&&(c=vs,k&&k(),k=null,l.value=vs,Q=!1,P=!1),V()}}};function ot(z){return z.reduce((Y,$)=>Y.then(()=>M($)),Promise.resolve())}return st}function LN(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(c=>Cl(c,a))?i.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Cl(c,l))||r.push(l))}return[n,i,r]}const ON=pi({__name:"App",setup(e){return(t,n)=>(mt(),PS(ar(KS)))}}),kN="modulepreload",FN=function(e){return"/"+e},Lx={},j0=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=FN(s),s in Lx)return;Lx[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const f=r[u];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":kN,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};class PN{constructor(t){xt(this,"fileId",new NN);xt(this,"activity",new DN);xt(this,"sessions",new Array);xt(this,"records",new Array);const n=t;this.fileId=n==null?void 0:n.fileId,this.activity=n==null?void 0:n.activity,this.sessions=n==null?void 0:n.sessions,this.records=n==null?void 0:n.records}}class NN{constructor(){xt(this,"manufacturer",null);xt(this,"product",null);xt(this,"timeCreated",null)}}class DN{constructor(){xt(this,"timestamp",null);xt(this,"localDateTime",null)}}class ne{constructor(t){xt(this,"timestamp",null);xt(this,"positionLat",null);xt(this,"positionLong",null);xt(this,"distance",null);xt(this,"speed",null);xt(this,"altitude",null);xt(this,"cadence",null);xt(this,"heartRate",null);xt(this,"power",null);xt(this,"temperature",null);xt(this,"grade",0);const n=t;this.positionLat=n==null?void 0:n.positionLat,this.positionLong=n==null?void 0:n.positionLong,this.altitude=n==null?void 0:n.altitude,this.cadence=n==null?void 0:n.cadence,this.distance=n==null?void 0:n.distance,this.heartRate=n==null?void 0:n.heartRate,this.speed=n==null?void 0:n.speed,this.timestamp=n==null?void 0:n.timestamp,this.power=n==null?void 0:n.power,this.temperature=n==null?void 0:n.temperature,this.grade=n==null?void 0:n.grade}}function ve(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sa(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gm(e){let t,n,i;e.length!==2?(t=ve,n=(a,l)=>ve(e(a),l),i=(a,l)=>e(a)-l):(t=e===ve||e===sa?e:$N,n=e,i=e);function r(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=r(a,l,c,u-1);return f>c&&i(a[f-1],l)>-i(a[f],l)?f-1:f}return{left:r,center:o,right:s}}function $N(){return 0}function JS(e){return e===null?NaN:+e}function*zN(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const WN=gm(ve),GN=WN.right;gm(JS).center;const mm=GN,QS=tM(eM),BN=tM(HN);function tM(e){return function(t,n,i=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((i=+i)>=0))throw new RangeError("invalid ry");let{data:r,width:s,height:o}=t;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:r.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!i)return t;const a=n&&e(n),l=i&&e(i),c=r.slice();return a&&l?(Oa(a,c,r,s,o),Oa(a,r,c,s,o),Oa(a,c,r,s,o),ka(l,r,c,s,o),ka(l,c,r,s,o),ka(l,r,c,s,o)):a?(Oa(a,r,c,s,o),Oa(a,c,r,s,o),Oa(a,r,c,s,o)):l&&(ka(l,r,c,s,o),ka(l,c,r,s,o),ka(l,r,c,s,o)),t}}function Oa(e,t,n,i,r){for(let s=0,o=i*r;s<o;)e(t,n,s,s+=i,1)}function ka(e,t,n,i,r){for(let s=0,o=i*r;s<i;++s)e(t,n,s,s+o,i)}function HN(e){const t=eM(e);return(n,i,r,s,o)=>{r<<=2,s<<=2,o<<=2,t(n,i,r+0,s+0,o),t(n,i,r+1,s+1,o),t(n,i,r+2,s+2,o),t(n,i,r+3,s+3,o)}}function eM(e){const t=Math.floor(e);if(t===e)return YN(e);const n=e-t,i=2*e+1;return(r,s,o,a,l)=>{if(!((a-=l)>=o))return;let c=t*s[o];const u=l*t,f=u+l;for(let h=o,d=o+u;h<d;h+=l)c+=s[Math.min(a,h)];for(let h=o,d=a;h<=d;h+=l)c+=s[Math.min(a,h+u)],r[h]=(c+n*(s[Math.max(o,h-f)]+s[Math.min(a,h+f)]))/i,c-=s[Math.max(o,h-u)]}}function YN(e){const t=2*e+1;return(n,i,r,s,o)=>{if(!((s-=o)>=r))return;let a=e*i[r];const l=o*e;for(let c=r,u=r+l;c<u;c+=o)a+=i[Math.min(s,c)];for(let c=r,u=s;c<=u;c+=o)a+=i[Math.min(s,c+l)],n[c]=a/t,a-=i[Math.max(r,c-l)]}}function pm(e,t){let n=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(r=+r)>=r&&++n}return n}function UN(e){return e.length|0}function VN(e){return!(e>0)}function XN(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function jN(e){return t=>e(...t)}function qN(...e){const t=typeof e[e.length-1]=="function"&&jN(e.pop());e=e.map(XN);const n=e.map(UN),i=e.length-1,r=new Array(i+1).fill(0),s=[];if(i<0||n.some(VN))return s;for(;;){s.push(r.map((a,l)=>e[l][a]));let o=i;for(;++r[o]===n[o];){if(o===0)return t?s.map(t):s;r[o--]=0}}}function ZN(e,t){var n=0,i=0;return Float64Array.from(e,t===void 0?r=>n+=+r||0:r=>n+=+t(r,i++,e)||0)}function k1(e,t){let n=0,i,r=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r))}if(n>1)return s/(n-1)}function cf(e,t){const n=k1(e,t);return n&&Math.sqrt(n)}function ye(e,t){let n,i;if(t===void 0)for(const r of e)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class lr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[i++]=a),t=o}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=t[--n];n>0&&(i=o,r=t[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}class oa extends Map{constructor(t,n=rM){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(Ry(this,t))}has(t){return super.has(Ry(this,t))}set(t,n){return super.set(nM(this,t),n)}delete(t){return super.delete(iM(this,t))}}class uf extends Set{constructor(t,n=rM){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(Ry(this,t))}add(t){return super.add(nM(this,t))}delete(t){return super.delete(iM(this,t))}}function Ry({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function nM({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function iM({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function rM(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ay(e){return e}function ls(e,...t){return F1(e,Ay,Ay,t)}function hl(e,t,...n){return F1(e,Ay,t,n)}function KN(e,t,...n){return F1(e,Array.from,t,n)}function F1(e,t,n,i){return function r(s,o){if(o>=i.length)return n(s);const a=new oa,l=i[o++];let c=-1;for(const u of s){const f=l(u,++c,s),h=a.get(f);h?h.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,r(f,o));return t(a)}(e,0)}function JN(e,t){return Array.from(t,n=>e[n])}function Iu(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const i=Uint32Array.from(e,(r,s)=>s);return t.length>1?(t=t.map(r=>e.map(r)),i.sort((r,s)=>{for(const o of t){const a=Lu(o[r],o[s]);if(a)return a}})):(n=e.map(n),i.sort((r,s)=>Lu(n[r],n[s]))),JN(e,i)}return e.sort(P1(n))}function P1(e=ve){if(e===ve)return Lu;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function Lu(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function N1(e,t,n){return(t.length!==2?Iu(hl(e,t,n),([i,r],[s,o])=>ve(r,o)||ve(i,s)):Iu(ls(e,n),([i,r],[s,o])=>t(r,o)||ve(i,s))).map(([i])=>i)}const QN=Math.sqrt(50),tD=Math.sqrt(10),eD=Math.sqrt(2);function Ed(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=QN?10:s>=tD?5:s>=eD?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Ed(e,t,n*2):[a,l,c]}function qs(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,s,o]=i?Ed(t,e,n):Ed(e,t,n);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function Ou(e,t,n){return t=+t,e=+e,n=+n,Ed(e,t,n)[2]}function Iy(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?Ou(t,e,n):Ou(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function sM(e,t,n){let i;for(;;){const r=Ou(e,t,n);if(r===i||r===0||!isFinite(r))return[e,t];r>0?(e=Math.floor(e/r)*r,t=Math.ceil(t/r)*r):r<0&&(e=Math.ceil(e*r)/r,t=Math.floor(t*r)/r),i=r}}function D1(e){return Math.max(1,Math.ceil(Math.log(pm(e))/Math.LN2)+1)}function Ne(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function nD(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);return i}function Xe(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function iD(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);return i}function oM(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?Lu:P1(r);i>n;){if(i-n>600){const l=i-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(t-c*f/l+h)),g=Math.min(i,Math.floor(t+(l-c)*f/l+h));oM(e,t,d,g,r)}const s=e[t];let o=n,a=i;for(Lc(e,n,t),r(e[i],s)>0&&Lc(e,n,i);o<a;){for(Lc(e,o,a),++o,--a;r(e[o],s)<0;)++o;for(;r(e[a],s)>0;)--a}r(e[n],s)===0?Lc(e,n,a):(++a,Lc(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function Lc(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function $1(e,t=ve){let n,i=!1;if(t.length===1){let r;for(const s of e){const o=t(s);(i?ve(o,r)>0:ve(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of e)(i?t(r,n)>0:t(r,r)===0)&&(n=r,i=!0);return n}function Zs(e,t,n){if(e=Float64Array.from(zN(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Xe(e);if(t>=1)return Ne(e);var i,r=(i-1)*t,s=Math.floor(r),o=Ne(oM(e,s).subarray(0,s+1)),a=Xe(e.subarray(s+1));return o+(a-o)*(r-s)}}function rD(e,t,n=JS){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(r-s)}}function sD(e,t,n){const i=pm(e),r=Zs(e,.75)-Zs(e,.25);return i&&r?Math.ceil((n-t)/(2*r*Math.pow(i,-1/3))):1}function aM(e,t,n){const i=pm(e),r=cf(e);return i&&r?Math.ceil((n-t)*Math.cbrt(i)/(3.49*r)):1}function ym(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function ku(e,t){return Zs(e,.5,t)}function*oD(e){for(const t of e)yield*t}function lM(e){return Array.from(oD(e))}function cM(e,t){const n=new oa;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let i,r=0;for(const[s,o]of n)o>r&&(r=o,i=s);return i}function aD(e,t=lD){const n=[];let i,r=!1;for(const s of e)r&&n.push(t(i,s)),i=s,r=!0;return n}function lD(e,t){return[e,t]}function ai(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(r);++i<r;)s[i]=e+i*n;return s}function uM(e,t=ve){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const i=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=ve);const r=(a,l)=>t(n[a],n[l]);let s,o;return e=Uint32Array.from(n,(a,l)=>l),e.sort(t===ve?(a,l)=>Lu(n[a],n[l]):P1(r)),e.forEach((a,l)=>{const c=r(a,s===void 0?a:s);c>=0?((s===void 0||c>0)&&(s=a,o=l),i[a]=o):i[a]=NaN}),i}function cD(e,t=ve){let n,i=!1;if(t.length===1){let r;for(const s of e){const o=t(s);(i?ve(o,r)<0:ve(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of e)(i?t(r,n)<0:t(r,r)===0)&&(n=r,i=!0);return n}function dr(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function Td(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function uD(e){return e}var q0=1,Z0=2,Ly=3,qc=4,Ox=1e-6;function fD(e){return"translate("+e+",0)"}function hD(e){return"translate(0,"+e+")"}function dD(e){return t=>+e(t)}function gD(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function mD(){return!this.__axis}function fM(e,t){var n=[],i=null,r=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===q0||e===qc?-1:1,u=e===qc||e===Z0?"x":"y",f=e===q0||e===Ly?fD:hD;function h(d){var g=i??(t.ticks?t.ticks.apply(t,n):t.domain()),m=r??(t.tickFormat?t.tickFormat.apply(t,n):uD),_=Math.max(s,0)+a,p=t.range(),y=+p[0]+l,w=+p[p.length-1]+l,v=(t.bandwidth?gD:dD)(t.copy(),l),x=d.selection?d.selection():d,b=x.selectAll(".domain").data([null]),E=x.selectAll(".tick").data(g,t).order(),T=E.exit(),M=E.enter().append("g").attr("class","tick"),C=E.select("line"),R=E.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(M),C=C.merge(M.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),R=R.merge(M.append("text").attr("fill","currentColor").attr(u,c*_).attr("dy",e===q0?"0em":e===Ly?"0.71em":"0.32em")),d!==x&&(b=b.transition(d),E=E.transition(d),C=C.transition(d),R=R.transition(d),T=T.transition(d).attr("opacity",Ox).attr("transform",function(A){return isFinite(A=v(A))?f(A+l):this.getAttribute("transform")}),M.attr("opacity",Ox).attr("transform",function(A){var k=this.parentNode.__axis;return f((k&&isFinite(k=k(A))?k:v(A))+l)})),T.remove(),b.attr("d",e===qc||e===Z0?o?"M"+c*o+","+y+"H"+l+"V"+w+"H"+c*o:"M"+l+","+y+"V"+w:o?"M"+y+","+c*o+"V"+l+"H"+w+"V"+c*o:"M"+y+","+l+"H"+w),E.attr("opacity",1).attr("transform",function(A){return f(v(A)+l)}),C.attr(u+"2",c*s),R.attr(u,c*_).text(m),x.filter(mD).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Z0?"start":e===qc?"end":"middle"),x.each(function(){this.__axis=v})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),h):i&&i.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(s=o=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(a=+d,h):a},h.offset=function(d){return arguments.length?(l=+d,h):l},h}function z1(e){return fM(Ly,e)}function hM(e){return fM(qc,e)}var pD={value:()=>{}};function dM(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ad(n)}function ad(e){this._=e}function yD(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ad.prototype=dM.prototype={constructor:ad,on:function(e,t){var n=this._,i=yD(e+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(e=i[s]).type)&&(r=_D(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=i[s]).type)n[r]=kx(n[r],e.name,t);else if(t==null)for(r in n)n[r]=kx(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ad(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function _D(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function kx(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=pD,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Oy="http://www.w3.org/1999/xhtml";const aa={svg:"http://www.w3.org/2000/svg",xhtml:Oy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _m(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),aa.hasOwnProperty(t)?{space:aa[t],local:e}:e}function vD(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Oy&&t.documentElement.namespaceURI===Oy?t.createElement(e):t.createElementNS(n,e)}}function wD(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function vm(e){var t=_m(e);return(t.local?wD:vD)(t)}function bD(){}function W1(e){return e==null?bD:function(){return this.querySelector(e)}}function xD(e){typeof e!="function"&&(e=W1(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new jn(i,this._parents)}function ED(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function TD(){return[]}function gM(e){return e==null?TD:function(){return this.querySelectorAll(e)}}function CD(e){return function(){return ED(e.apply(this,arguments))}}function SD(e){typeof e=="function"?e=CD(e):e=gM(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(e.call(l,l.__data__,c,o)),r.push(l));return new jn(i,r)}function mM(e){return function(){return this.matches(e)}}function pM(e){return function(t){return t.matches(e)}}var MD=Array.prototype.find;function RD(e){return function(){return MD.call(this.children,e)}}function AD(){return this.firstElementChild}function ID(e){return this.select(e==null?AD:RD(typeof e=="function"?e:pM(e)))}var LD=Array.prototype.filter;function OD(){return Array.from(this.children)}function kD(e){return function(){return LD.call(this.children,e)}}function FD(e){return this.selectAll(e==null?OD:kD(typeof e=="function"?e:pM(e)))}function PD(e){typeof e!="function"&&(e=mM(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new jn(i,this._parents)}function yM(e){return new Array(e.length)}function ND(){return new jn(this._enter||this._groups.map(yM),this._parents)}function Cd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Cd.prototype={constructor:Cd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function DD(e){return function(){return e}}function $D(e,t,n,i,r,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],i[o]=a):n[o]=new Cd(e,s[o]);for(;o<l;++o)(a=t[o])&&(r[o]=a)}function zD(e,t,n,i,r,s,o){var a,l,c=new Map,u=t.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(l=t[a])&&(h[a]=d=o.call(l,l.__data__,a,t)+"",c.has(d)?r[a]=l:c.set(d,l));for(a=0;a<f;++a)d=o.call(e,s[a],a,s)+"",(l=c.get(d))?(i[a]=l,l.__data__=s[a],c.delete(d)):n[a]=new Cd(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(h[a])===l&&(r[a]=l)}function WD(e){return e.__data__}function GD(e,t){if(!arguments.length)return Array.from(this,WD);var n=t?zD:$D,i=this._parents,r=this._groups;typeof e!="function"&&(e=DD(e));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],f=r[c],h=f.length,d=BD(e.call(u,u&&u.__data__,c,i)),g=d.length,m=a[c]=new Array(g),_=o[c]=new Array(g),p=l[c]=new Array(h);n(u,f,m,_,p,d,t);for(var y=0,w=0,v,x;y<g;++y)if(v=m[y]){for(y>=w&&(w=y+1);!(x=_[w])&&++w<g;);v._next=x||null}}return o=new jn(o,i),o._enter=a,o._exit=l,o}function BD(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function HD(){return new jn(this._exit||this._groups.map(yM),this._parents)}function YD(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function UD(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=i[l],f=c.length,h=a[l]=new Array(f),d,g=0;g<f;++g)(d=c[g]||u[g])&&(h[g]=d);for(;l<r;++l)a[l]=n[l];return new jn(a,this._parents)}function VD(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function XD(e){e||(e=jD);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],a=o.length,l=r[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new jn(r,this._parents).order()}function jD(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qD(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ZD(){return Array.from(this)}function KD(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function JD(){let e=0;for(const t of this)++e;return e}function QD(){return!this.node()}function t8(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,o=r.length,a;s<o;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function e8(e){return function(){this.removeAttribute(e)}}function n8(e){return function(){this.removeAttributeNS(e.space,e.local)}}function i8(e,t){return function(){this.setAttribute(e,t)}}function r8(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function s8(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function o8(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function a8(e,t){var n=_m(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?n8:e8:typeof t=="function"?n.local?o8:s8:n.local?r8:i8)(n,t))}function _M(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function l8(e){return function(){this.style.removeProperty(e)}}function c8(e,t,n){return function(){this.style.setProperty(e,t,n)}}function u8(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function f8(e,t,n){return arguments.length>1?this.each((t==null?l8:typeof t=="function"?u8:c8)(e,t,n??"")):Ml(this.node(),e)}function Ml(e,t){return e.style.getPropertyValue(t)||_M(e).getComputedStyle(e,null).getPropertyValue(t)}function h8(e){return function(){delete this[e]}}function d8(e,t){return function(){this[e]=t}}function g8(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function m8(e,t){return arguments.length>1?this.each((t==null?h8:typeof t=="function"?g8:d8)(e,t)):this.node()[e]}function vM(e){return e.trim().split(/^|\s+/)}function G1(e){return e.classList||new wM(e)}function wM(e){this._node=e,this._names=vM(e.getAttribute("class")||"")}wM.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function bM(e,t){for(var n=G1(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function xM(e,t){for(var n=G1(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function p8(e){return function(){bM(this,e)}}function y8(e){return function(){xM(this,e)}}function _8(e,t){return function(){(t.apply(this,arguments)?bM:xM)(this,e)}}function v8(e,t){var n=vM(e+"");if(arguments.length<2){for(var i=G1(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?_8:t?p8:y8)(n,t))}function w8(){this.textContent=""}function b8(e){return function(){this.textContent=e}}function x8(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function E8(e){return arguments.length?this.each(e==null?w8:(typeof e=="function"?x8:b8)(e)):this.node().textContent}function T8(){this.innerHTML=""}function C8(e){return function(){this.innerHTML=e}}function S8(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function M8(e){return arguments.length?this.each(e==null?T8:(typeof e=="function"?S8:C8)(e)):this.node().innerHTML}function R8(){this.nextSibling&&this.parentNode.appendChild(this)}function A8(){return this.each(R8)}function I8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function L8(){return this.each(I8)}function O8(e){var t=typeof e=="function"?e:vm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function k8(){return null}function F8(e,t){var n=typeof e=="function"?e:vm(e),i=t==null?k8:typeof t=="function"?t:W1(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function P8(){var e=this.parentNode;e&&e.removeChild(this)}function N8(){return this.each(P8)}function D8(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $8(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function z8(e){return this.select(e?$8:D8)}function W8(e){return arguments.length?this.property("__data__",e):this.node().__data__}function G8(e){return function(t){e.call(this,t,this.__data__)}}function B8(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function H8(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function Y8(e,t,n){return function(){var i=this.__on,r,s=G8(t);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function U8(e,t,n){var i=B8(e+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?Y8:H8,r=0;r<s;++r)this.each(a(i[r],t,n));return this}function EM(e,t,n){var i=_M(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function V8(e,t){return function(){return EM(this,e,t)}}function X8(e,t){return function(){return EM(this,e,t.apply(this,arguments))}}function j8(e,t){return this.each((typeof t=="function"?X8:V8)(e,t))}function*q8(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var TM=[null];function jn(e,t){this._groups=e,this._parents=t}function ff(){return new jn([[document.documentElement]],TM)}function Z8(){return this}jn.prototype=ff.prototype={constructor:jn,select:xD,selectAll:SD,selectChild:ID,selectChildren:FD,filter:PD,data:GD,enter:ND,exit:HD,join:YD,merge:UD,selection:Z8,order:VD,sort:XD,call:qD,nodes:ZD,node:KD,size:JD,empty:QD,each:t8,attr:a8,style:f8,property:m8,classed:v8,text:E8,html:M8,raise:A8,lower:L8,append:O8,insert:F8,remove:N8,clone:z8,datum:W8,on:U8,dispatch:j8,[Symbol.iterator]:q8};function di(e){return typeof e=="string"?new jn([[document.querySelector(e)]],[document.documentElement]):new jn([[e]],TM)}function K8(e){let t;for(;t=e.sourceEvent;)e=t;return e}function B1(e,t){if(e=K8(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}function sc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function hf(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function so(){}var la=.7,Rl=1/la,dl="\\s*([+-]?\\d+)\\s*",Fu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",J8=/^#([0-9a-f]{3,8})$/,Q8=new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`),t$=new RegExp(`^rgb\\(${cr},${cr},${cr}\\)$`),e$=new RegExp(`^rgba\\(${dl},${dl},${dl},${Fu}\\)$`),n$=new RegExp(`^rgba\\(${cr},${cr},${cr},${Fu}\\)$`),i$=new RegExp(`^hsl\\(${Fu},${cr},${cr}\\)$`),r$=new RegExp(`^hsla\\(${Fu},${cr},${cr},${Fu}\\)$`),Fx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sc(so,ca,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Px,formatHex:Px,formatHex8:s$,formatHsl:o$,formatRgb:Nx,toString:Nx});function Px(){return this.rgb().formatHex()}function s$(){return this.rgb().formatHex8()}function o$(){return CM(this).formatHsl()}function Nx(){return this.rgb().formatRgb()}function ca(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=J8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Dx(t):n===3?new Ve(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Q8.exec(e))?new Ve(t[1],t[2],t[3],1):(t=t$.exec(e))?new Ve(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=e$.exec(e))?hh(t[1],t[2],t[3],t[4]):(t=n$.exec(e))?hh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=i$.exec(e))?Wx(t[1],t[2]/100,t[3]/100,1):(t=r$.exec(e))?Wx(t[1],t[2]/100,t[3]/100,t[4]):Fx.hasOwnProperty(e)?Dx(Fx[e]):e==="transparent"?new Ve(NaN,NaN,NaN,0):null}function Dx(e){return new Ve(e>>16&255,e>>8&255,e&255,1)}function hh(e,t,n,i){return i<=0&&(e=t=n=NaN),new Ve(e,t,n,i)}function H1(e){return e instanceof so||(e=ca(e)),e?(e=e.rgb(),new Ve(e.r,e.g,e.b,e.opacity)):new Ve}function gr(e,t,n,i){return arguments.length===1?H1(e):new Ve(e,t,n,i??1)}function Ve(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}sc(Ve,gr,hf(so,{brighter(e){return e=e==null?Rl:Math.pow(Rl,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?la:Math.pow(la,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ve(jo(this.r),jo(this.g),jo(this.b),Sd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$x,formatHex:$x,formatHex8:a$,formatRgb:zx,toString:zx}));function $x(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}`}function a$(){return`#${Po(this.r)}${Po(this.g)}${Po(this.b)}${Po((isNaN(this.opacity)?1:this.opacity)*255)}`}function zx(){const e=Sd(this.opacity);return`${e===1?"rgb(":"rgba("}${jo(this.r)}, ${jo(this.g)}, ${jo(this.b)}${e===1?")":`, ${e})`}`}function Sd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Po(e){return e=jo(e),(e<16?"0":"")+e.toString(16)}function Wx(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Mi(e,t,n,i)}function CM(e){if(e instanceof Mi)return new Mi(e.h,e.s,e.l,e.opacity);if(e instanceof so||(e=ca(e)),!e)return new Mi;if(e instanceof Mi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(t===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new Mi(o,a,l,e.opacity)}function ky(e,t,n,i){return arguments.length===1?CM(e):new Mi(e,t,n,i??1)}function Mi(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}sc(Mi,ky,hf(so,{brighter(e){return e=e==null?Rl:Math.pow(Rl,e),new Mi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?la:Math.pow(la,e),new Mi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Ve(K0(e>=240?e-240:e+120,r,i),K0(e,r,i),K0(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Mi(Gx(this.h),dh(this.s),dh(this.l),Sd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sd(this.opacity);return`${e===1?"hsl(":"hsla("}${Gx(this.h)}, ${dh(this.s)*100}%, ${dh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Gx(e){return e=(e||0)%360,e<0?e+360:e}function dh(e){return Math.max(0,Math.min(1,e||0))}function K0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const SM=Math.PI/180,MM=180/Math.PI,Md=18,RM=.96422,AM=1,IM=.82521,LM=4/29,gl=6/29,OM=3*gl*gl,l$=gl*gl*gl;function kM(e){if(e instanceof ur)return new ur(e.l,e.a,e.b,e.opacity);if(e instanceof Wr)return FM(e);e instanceof Ve||(e=H1(e));var t=ep(e.r),n=ep(e.g),i=ep(e.b),r=J0((.2225045*t+.7168786*n+.0606169*i)/AM),s,o;return t===n&&n===i?s=o=r:(s=J0((.4360747*t+.3850649*n+.1430804*i)/RM),o=J0((.0139322*t+.0971045*n+.7141733*i)/IM)),new ur(116*r-16,500*(s-r),200*(r-o),e.opacity)}function Fy(e,t,n,i){return arguments.length===1?kM(e):new ur(e,t,n,i??1)}function ur(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}sc(ur,Fy,hf(so,{brighter(e){return new ur(this.l+Md*(e??1),this.a,this.b,this.opacity)},darker(e){return new ur(this.l-Md*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=RM*Q0(t),e=AM*Q0(e),n=IM*Q0(n),new Ve(tp(3.1338561*t-1.6168667*e-.4906146*n),tp(-.9787684*t+1.9161415*e+.033454*n),tp(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function J0(e){return e>l$?Math.pow(e,1/3):e/OM+LM}function Q0(e){return e>gl?e*e*e:OM*(e-LM)}function tp(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ep(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function c$(e){if(e instanceof Wr)return new Wr(e.h,e.c,e.l,e.opacity);if(e instanceof ur||(e=kM(e)),e.a===0&&e.b===0)return new Wr(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*MM;return new Wr(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Py(e,t,n,i){return arguments.length===1?c$(e):new Wr(e,t,n,i??1)}function Wr(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function FM(e){if(isNaN(e.h))return new ur(e.l,0,0,e.opacity);var t=e.h*SM;return new ur(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}sc(Wr,Py,hf(so,{brighter(e){return new Wr(this.h,this.c,this.l+Md*(e??1),this.opacity)},darker(e){return new Wr(this.h,this.c,this.l-Md*(e??1),this.opacity)},rgb(){return FM(this).rgb()}}));var PM=-.14861,Y1=1.78277,U1=-.29227,wm=-.90649,Pu=1.97294,Bx=Pu*wm,Hx=Pu*Y1,Yx=Y1*U1-wm*PM;function u$(e){if(e instanceof qo)return new qo(e.h,e.s,e.l,e.opacity);e instanceof Ve||(e=H1(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(Yx*i+Bx*t-Hx*n)/(Yx+Bx-Hx),s=i-r,o=(Pu*(n-r)-U1*s)/wm,a=Math.sqrt(o*o+s*s)/(Pu*r*(1-r)),l=a?Math.atan2(o,s)*MM-120:NaN;return new qo(l<0?l+360:l,a,r,e.opacity)}function mr(e,t,n,i){return arguments.length===1?u$(e):new qo(e,t,n,i??1)}function qo(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}sc(qo,mr,hf(so,{brighter(e){return e=e==null?Rl:Math.pow(Rl,e),new qo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?la:Math.pow(la,e),new qo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*SM,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Ve(255*(t+n*(PM*i+Y1*r)),255*(t+n*(U1*i+wm*r)),255*(t+n*(Pu*i)),this.opacity)}}));function f$(e,t,n,i,r){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*i+o*r)/6}function h$(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],o=i>0?e[i-1]:2*r-s,a=i<t-1?e[i+2]:2*s-r;return f$((n-i/t)*t,o,r,s,a)}}const bm=e=>()=>e;function NM(e,t){return function(n){return e+n*t}}function d$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function V1(e,t){var n=t-e;return n?NM(e,n>180||n<-180?n-360*Math.round(n/360):n):bm(isNaN(e)?t:e)}function g$(e){return(e=+e)==1?ln:function(t,n){return n-t?d$(t,n,e):bm(isNaN(t)?n:t)}}function ln(e,t){var n=t-e;return n?NM(e,n):bm(isNaN(e)?t:e)}const ua=function e(t){var n=g$(t);function i(r,s){var o=n((r=gr(r)).r,(s=gr(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),c=ln(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function m$(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=gr(t[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=e(i),r=e(r),s=e(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var DM=m$(h$);function p$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function y$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _$(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=oc(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function v$(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function nn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function w$(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=oc(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Ny=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,np=new RegExp(Ny.source,"g");function b$(e){return function(){return e}}function x$(e){return function(t){return e(t)+""}}function $M(e,t){var n=Ny.lastIndex=np.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(i=Ny.exec(e))&&(r=np.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:nn(i,r)})),n=np.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?x$(l[0].x):b$(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function oc(e,t){var n=typeof t,i;return t==null||n==="boolean"?bm(t):(n==="number"?nn:n==="string"?(i=ca(t))?(t=i,ua):$M:t instanceof ca?ua:t instanceof Date?v$:y$(t)?p$:Array.isArray(t)?_$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?w$:nn)(e,t)}function xm(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Ux=180/Math.PI,Dy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zM(e,t,n,i,r,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Ux,skewX:Math.atan(l)*Ux,scaleX:o,scaleY:a}}var gh;function E$(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Dy:zM(t.a,t.b,t.c,t.d,t.e,t.f)}function T$(e){return e==null||(gh||(gh=document.createElementNS("http://www.w3.org/2000/svg","g")),gh.setAttribute("transform",e),!(e=gh.transform.baseVal.consolidate()))?Dy:(e=e.matrix,zM(e.a,e.b,e.c,e.d,e.e,e.f))}function WM(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,g){if(c!==f||u!==h){var m=d.push("translate(",null,t,null,n);g.push({i:m-4,x:nn(c,f)},{i:m-2,x:nn(u,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:nn(c,u)})):u&&f.push(r(f)+"rotate("+u+i)}function a(c,u,f,h){c!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:nn(c,u)}):u&&f.push(r(f)+"skewX("+u+i)}function l(c,u,f,h,d,g){if(c!==f||u!==h){var m=d.push(r(d)+"scale(",null,",",null,")");g.push({i:m-4,x:nn(c,f)},{i:m-2,x:nn(u,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var g=-1,m=h.length,_;++g<m;)f[(_=h[g]).i]=_.x(d);return f.join("")}}}var C$=WM(E$,"px, ","px)","deg)"),S$=WM(T$,", ",")",")");function M$(e){return function(t,n){var i=e((t=ky(t)).h,(n=ky(n)).h),r=ln(t.s,n.s),s=ln(t.l,n.l),o=ln(t.opacity,n.opacity);return function(a){return t.h=i(a),t.s=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const R$=M$(V1);function A$(e,t){var n=ln((e=Fy(e)).l,(t=Fy(t)).l),i=ln(e.a,t.a),r=ln(e.b,t.b),s=ln(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=r(o),e.opacity=s(o),e+""}}function I$(e){return function(t,n){var i=e((t=Py(t)).h,(n=Py(n)).h),r=ln(t.c,n.c),s=ln(t.l,n.l),o=ln(t.opacity,n.opacity);return function(a){return t.h=i(a),t.c=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const L$=I$(V1);function GM(e){return function t(n){n=+n;function i(r,s){var o=e((r=mr(r)).h,(s=mr(s)).h),a=ln(r.s,s.s),l=ln(r.l,s.l),c=ln(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,n)),r.opacity=c(u),r+""}}return i.gamma=t,i}(1)}GM(V1);var X1=GM(ln);function Em(e,t){t===void 0&&(t=e,e=oc);for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[a](o-a)}}function Ni(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}var Al=0,Zc=0,Oc=0,BM=1e3,Rd,Kc,Ad=0,fa=0,Tm=0,Nu=typeof performance=="object"&&performance.now?performance:Date,HM=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function j1(){return fa||(HM(O$),fa=Nu.now()+Tm)}function O$(){fa=0}function Id(){this._call=this._time=this._next=null}Id.prototype=YM.prototype={constructor:Id,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?j1():+n)+(t==null?0:+t),!this._next&&Kc!==this&&(Kc?Kc._next=this:Rd=this,Kc=this),this._call=e,this._time=n,$y()},stop:function(){this._call&&(this._call=null,this._time=1/0,$y())}};function YM(e,t,n){var i=new Id;return i.restart(e,t,n),i}function k$(){j1(),++Al;for(var e=Rd,t;e;)(t=fa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Al}function Vx(){fa=(Ad=Nu.now())+Tm,Al=Zc=0;try{k$()}finally{Al=0,P$(),fa=0}}function F$(){var e=Nu.now(),t=e-Ad;t>BM&&(Tm-=t,Ad=e)}function P$(){for(var e,t=Rd,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Rd=n);Kc=e,$y(i)}function $y(e){if(!Al){Zc&&(Zc=clearTimeout(Zc));var t=e-fa;t>24?(e<1/0&&(Zc=setTimeout(Vx,e-Nu.now()-Tm)),Oc&&(Oc=clearInterval(Oc))):(Oc||(Ad=Nu.now(),Oc=setInterval(F$,BM)),Al=1,HM(Vx))}}function Xx(e,t,n){var i=new Id;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var N$=dM("start","end","cancel","interrupt"),D$=[],UM=0,jx=1,zy=2,ld=3,qx=4,Wy=5,cd=6;function Cm(e,t,n,i,r,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;$$(e,n,{name:t,index:i,group:r,on:N$,tween:D$,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:UM})}function q1(e,t){var n=Hi(e,t);if(n.state>UM)throw new Error("too late; already scheduled");return n}function pr(e,t){var n=Hi(e,t);if(n.state>ld)throw new Error("too late; already running");return n}function Hi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $$(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=YM(s,0,n.time);function s(c){n.state=jx,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,h,d;if(n.state!==jx)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===ld)return Xx(o);d.state===qx?(d.state=cd,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=cd,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if(Xx(function(){n.state===ld&&(n.state=qx,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=zy,n.on.call("start",e,e.__data__,n.index,n.group),n.state===zy){for(n.state=ld,r=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=d);r.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Wy,1),f=-1,h=r.length;++f<h;)r[f].call(e,u);n.state===Wy&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=cd,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function z$(e,t){var n=e.__transition,i,r,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){s=!1;continue}r=i.state>zy&&i.state<Wy,i.state=cd,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}s&&delete e.__transition}}function W$(e){return this.each(function(){z$(this,e)})}function G$(e,t){var n,i;return function(){var r=pr(this,e),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function B$(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=pr(this,e),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function H$(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Hi(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?G$:B$)(n,e,t))}function Z1(e,t,n){var i=e._id;return e.each(function(){var r=pr(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Hi(r,i).value[t]}}function VM(e,t){var n;return(typeof t=="number"?nn:t instanceof ca?ua:(n=ca(t))?(t=n,ua):$M)(e,t)}function Y$(e){return function(){this.removeAttribute(e)}}function U$(e){return function(){this.removeAttributeNS(e.space,e.local)}}function V$(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttribute(e);return o===r?null:o===i?s:s=t(i=o,n)}}function X$(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?s:s=t(i=o,n)}}function j$(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function q$(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function Z$(e,t){var n=_m(e),i=n==="transform"?S$:VM;return this.attrTween(e,typeof t=="function"?(n.local?q$:j$)(n,i,Z1(this,"attr."+e,t)):t==null?(n.local?U$:Y$)(n):(n.local?X$:V$)(n,i,t))}function K$(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function J$(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Q$(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&J$(e,s)),n}return r._value=t,r}function t7(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&K$(e,s)),n}return r._value=t,r}function e7(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=_m(e);return this.tween(n,(i.local?Q$:t7)(i,t))}function n7(e,t){return function(){q1(this,e).delay=+t.apply(this,arguments)}}function i7(e,t){return t=+t,function(){q1(this,e).delay=t}}function r7(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?n7:i7)(t,e)):Hi(this.node(),t).delay}function s7(e,t){return function(){pr(this,e).duration=+t.apply(this,arguments)}}function o7(e,t){return t=+t,function(){pr(this,e).duration=t}}function a7(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?s7:o7)(t,e)):Hi(this.node(),t).duration}function l7(e,t){if(typeof t!="function")throw new Error;return function(){pr(this,e).ease=t}}function c7(e){var t=this._id;return arguments.length?this.each(l7(t,e)):Hi(this.node(),t).ease}function u7(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;pr(this,e).ease=n}}function f7(e){if(typeof e!="function")throw new Error;return this.each(u7(this._id,e))}function h7(e){typeof e!="function"&&(e=mM(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new es(i,this._parents,this._name,this._id)}function d7(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=t[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<i;++a)o[a]=t[a];return new es(o,this._parents,this._name,this._id)}function g7(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function m7(e,t,n){var i,r,s=g7(t)?q1:pr;return function(){var o=s(this,e),a=o.on;a!==i&&(r=(i=a).copy()).on(t,n),o.on=r}}function p7(e,t){var n=this._id;return arguments.length<2?Hi(this.node(),n).on.on(e):this.each(m7(n,e,t))}function y7(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _7(){return this.on("end.remove",y7(this._id))}function v7(e){var t=this._name,n=this._id;typeof e!="function"&&(e=W1(e));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,Cm(c[h],t,n,h,c,Hi(u,n)));return new es(s,this._parents,t,n)}function w7(e){var t=this._name,n=this._id;typeof e!="function"&&(e=gM(e));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),d,g=Hi(u,n),m=0,_=h.length;m<_;++m)(d=h[m])&&Cm(d,t,n,m,h,g);s.push(h),o.push(u)}return new es(s,o,t,n)}var b7=ff.prototype.constructor;function x7(){return new b7(this._groups,this._parents)}function E7(e,t){var n,i,r;return function(){var s=Ml(this,e),o=(this.style.removeProperty(e),Ml(this,e));return s===o?null:s===n&&o===i?r:r=t(n=s,i=o)}}function XM(e){return function(){this.style.removeProperty(e)}}function T7(e,t,n){var i,r=n+"",s;return function(){var o=Ml(this,e);return o===r?null:o===i?s:s=t(i=o,n)}}function C7(e,t,n){var i,r,s;return function(){var o=Ml(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ml(this,e))),o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a))}}function S7(e,t){var n,i,r,s="style."+t,o="end."+s,a;return function(){var l=pr(this,e),c=l.on,u=l.value[s]==null?a||(a=XM(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(o,r=u),l.on=i}}function M7(e,t,n){var i=(e+="")=="transform"?C$:VM;return t==null?this.styleTween(e,E7(e,i)).on("end.style."+e,XM(e)):typeof t=="function"?this.styleTween(e,C7(e,i,Z1(this,"style."+e,t))).each(S7(this._id,e)):this.styleTween(e,T7(e,i,t),n).on("end.style."+e,null)}function R7(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function A7(e,t,n){var i,r;function s(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&R7(e,o,n)),i}return s._value=t,s}function I7(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,A7(e,t,n??""))}function L7(e){return function(){this.textContent=e}}function O7(e){return function(){var t=e(this);this.textContent=t??""}}function k7(e){return this.tween("text",typeof e=="function"?O7(Z1(this,"text",e)):L7(e==null?"":e+""))}function F7(e){return function(t){this.textContent=e.call(this,t)}}function P7(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&F7(r)),t}return i._value=e,i}function N7(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,P7(e))}function D7(){for(var e=this._name,t=this._id,n=jM(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Hi(l,t);Cm(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new es(i,this._parents,e,n)}function $7(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};n.each(function(){var c=pr(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&s()})}var z7=0;function es(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function jM(){return++z7}var Sr=ff.prototype;es.prototype={constructor:es,select:v7,selectAll:w7,selectChild:Sr.selectChild,selectChildren:Sr.selectChildren,filter:h7,merge:d7,selection:x7,transition:D7,call:Sr.call,nodes:Sr.nodes,node:Sr.node,size:Sr.size,empty:Sr.empty,each:Sr.each,on:p7,attr:Z$,attrTween:e7,style:M7,styleTween:I7,text:k7,textTween:N7,remove:_7,tween:H$,delay:r7,duration:a7,ease:c7,easeVarying:f7,end:$7,[Symbol.iterator]:Sr[Symbol.iterator]};function W7(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var G7={time:null,delay:0,duration:250,ease:W7};function B7(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function H7(e){var t,n;e instanceof es?(t=e._id,e=e._name):(t=jM(),(n=G7).time=j1(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Cm(l,e,t,c,o,n||B7(l,t));return new es(i,this._parents,e,t)}ff.prototype.interrupt=W$;ff.prototype.transition=H7;const Gy=Math.PI,By=2*Gy,So=1e-6,Y7=By-So;function qM(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function U7(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return qM;const n=10**t;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let ZM=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?qM:U7(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,s,o){this._append`C${+t},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,i,r,s){if(t=+t,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-t,c=r-n,u=o-t,f=a-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>So)if(!(Math.abs(f*l-c*u)>So)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let d=i-o,g=r-a,m=l*l+c*c,_=d*d+g*g,p=Math.sqrt(m),y=Math.sqrt(h),w=s*Math.tan((Gy-Math.acos((m+h-_)/(2*p*y)))/2),v=w/y,x=w/p;Math.abs(v-1)>So&&this._append`L${t+v*u},${n+v*f}`,this._append`A${s},${s},0,0,${+(f*d>u*g)},${this._x1=t+x*l},${this._y1=n+x*c}`}}arc(t,n,i,r,s,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=t+a,u=n+l,f=1^o,h=o?r-s:s-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>So||Math.abs(this._y1-u)>So)&&this._append`L${c},${u}`,i&&(h<0&&(h=h%By+By),h>Y7?this._append`A${i},${i},0,1,${f},${t-a},${n-l}A${i},${i},0,1,${f},${this._x1=c},${this._y1=u}`:h>So&&this._append`A${i},${i},0,${+(h>=Gy)},${f},${this._x1=t+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Gr(e=3){return new ZM(+e)}var V7=Array.prototype,KM=V7.slice;function X7(e,t){return e-t}function j7(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}const Ls=e=>()=>e;function q7(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Z7(e,t[n]))return r;return 0}function Z7(e,t){for(var n=t[0],i=t[1],r=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],c=l[0],u=l[1],f=e[a],h=f[0],d=f[1];if(K7(l,f,t))return 0;u>i!=d>i&&n<(h-c)*(i-u)/(d-u)+c&&(r=-r)}return r}function K7(e,t,n){var i;return J7(e,t,n)&&Q7(e[i=+(e[0]===t[0])],n[i],t[i])}function J7(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Q7(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function t9(){}var Mr=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Hy(){var e=1,t=1,n=D1,i=l;function r(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(X7);else{const f=ye(c,e9);for(u=qs(...sM(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(c,f))}function s(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var h=[],d=[];return o(c,f,function(g){i(g,c,f),j7(g)>0?h.push([g]):d.push(g)}),d.forEach(function(g){for(var m=0,_=h.length,p;m<_;++m)if(q7((p=h[m])[0],g)!==-1){p.push(g);return}}),{type:"MultiPolygon",value:u,coordinates:h}}function o(c,u,f){var h=new Array,d=new Array,g,m,_,p,y,w;for(g=m=-1,p=bo(c[0],u),Mr[p<<1].forEach(v);++g<e-1;)_=p,p=bo(c[g+1],u),Mr[_|p<<1].forEach(v);for(Mr[p<<0].forEach(v);++m<t-1;){for(g=-1,p=bo(c[m*e+e],u),y=bo(c[m*e],u),Mr[p<<1|y<<2].forEach(v);++g<e-1;)_=p,p=bo(c[m*e+e+g+1],u),w=y,y=bo(c[m*e+g+1],u),Mr[_|p<<1|y<<2|w<<3].forEach(v);Mr[p|y<<3].forEach(v)}for(g=-1,y=c[m*e]>=u,Mr[y<<2].forEach(v);++g<e-1;)w=y,y=bo(c[m*e+g+1],u),Mr[y<<2|w<<3].forEach(v);Mr[y<<3].forEach(v);function v(x){var b=[x[0][0]+g,x[0][1]+m],E=[x[1][0]+g,x[1][1]+m],T=a(b),M=a(E),C,R;(C=d[T])?(R=h[M])?(delete d[C.end],delete h[R.start],C===R?(C.ring.push(E),f(C.ring)):h[C.start]=d[R.end]={start:C.start,end:R.end,ring:C.ring.concat(R.ring)}):(delete d[C.end],C.ring.push(E),d[C.end=M]=C):(C=h[M])?(R=d[T])?(delete h[C.start],delete d[R.end],C===R?(C.ring.push(E),f(C.ring)):h[R.start]=d[C.end]={start:R.start,end:C.end,ring:R.ring.concat(C.ring)}):(delete h[C.start],C.ring.unshift(b),h[C.start=T]=C):h[T]=d[M]={start:T,end:M,ring:[b,E]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function l(c,u,f){c.forEach(function(h){var d=h[0],g=h[1],m=d|0,_=g|0,p=ip(u[_*e+m]);d>0&&d<e&&m===d&&(h[0]=Zx(d,ip(u[_*e+m-1]),p,f)),g>0&&g<t&&_===g&&(h[1]=Zx(g,ip(u[(_-1)*e+m]),p,f))})}return r.contour=s,r.size=function(c){if(!arguments.length)return[e,t];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,r},r.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?Ls(KM.call(c)):Ls(c),r):n},r.smooth=function(c){return arguments.length?(i=c?l:t9,r):i===l},r}function e9(e){return isFinite(e)?e:NaN}function bo(e,t){return e==null?!1:+e>=t}function ip(e){return e==null||isNaN(e=+e)?-1/0:e}function Zx(e,t,n,i){const r=i-t,s=n-t,o=isFinite(r)||isFinite(s)?r/s:Math.sign(r)/Math.sign(s);return isNaN(o)?e:e+o-.5}function n9(e){return e[0]}function i9(e){return e[1]}function r9(){return 1}function s9(){var e=n9,t=i9,n=r9,i=960,r=500,s=20,o=2,a=s*3,l=i+a*2>>o,c=r+a*2>>o,u=Ls(20);function f(y){var w=new Float32Array(l*c),v=Math.pow(2,-o),x=-1;for(const k of y){var b=(e(k,++x,y)+a)*v,E=(t(k,x,y)+a)*v,T=+n(k,x,y);if(T&&b>=0&&b<l&&E>=0&&E<c){var M=Math.floor(b),C=Math.floor(E),R=b-M-.5,A=E-C-.5;w[M+C*l]+=(1-R)*(1-A)*T,w[M+1+C*l]+=R*(1-A)*T,w[M+1+(C+1)*l]+=R*A*T,w[M+(C+1)*l]+=(1-R)*A*T}}return QS({data:w,width:l,height:c},s*v),w}function h(y){var w=f(y),v=u(w),x=Math.pow(2,2*o);return Array.isArray(v)||(v=qs(Number.MIN_VALUE,Ne(w)/x,v)),Hy().size([l,c]).thresholds(v.map(b=>b*x))(w).map((b,E)=>(b.value=+v[E],d(b)))}h.contours=function(y){var w=f(y),v=Hy().size([l,c]),x=Math.pow(2,2*o),b=E=>{E=+E;var T=d(v.contour(w,E*x));return T.value=E,T};return Object.defineProperty(b,"max",{get:()=>Ne(w)/x}),b};function d(y){return y.coordinates.forEach(g),y}function g(y){y.forEach(m)}function m(y){y.forEach(_)}function _(y){y[0]=y[0]*Math.pow(2,o)-a,y[1]=y[1]*Math.pow(2,o)-a}function p(){return a=s*3,l=i+a*2>>o,c=r+a*2>>o,h}return h.x=function(y){return arguments.length?(e=typeof y=="function"?y:Ls(+y),h):e},h.y=function(y){return arguments.length?(t=typeof y=="function"?y:Ls(+y),h):t},h.weight=function(y){return arguments.length?(n=typeof y=="function"?y:Ls(+y),h):n},h.size=function(y){if(!arguments.length)return[i,r];var w=+y[0],v=+y[1];if(!(w>=0&&v>=0))throw new Error("invalid size");return i=w,r=v,p()},h.cellSize=function(y){if(!arguments.length)return 1<<o;if(!((y=+y)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(y)/Math.LN2),p()},h.thresholds=function(y){return arguments.length?(u=typeof y=="function"?y:Array.isArray(y)?Ls(KM.call(y)):Ls(y),h):u},h.bandwidth=function(y){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((y=+y)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*y*y+1)-1)/2,p()},h}const Xr=11102230246251565e-32,Ke=134217729,o9=(3+8*Xr)*Xr;function rp(e,t,n,i,r){let s,o,a,l,c=t[0],u=i[0],f=0,h=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=i[++h]);let d=0;if(f<e&&h<n)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=t[++f]):(o=u+s,a=s-(o-u),u=i[++h]),s=o,a!==0&&(r[d++]=a);f<e&&h<n;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++h]),s=o,a!==0&&(r[d++]=a);for(;f<e;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f],s=o,a!==0&&(r[d++]=a);for(;h<n;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++h],s=o,a!==0&&(r[d++]=a);return(s!==0||d===0)&&(r[d++]=s),d}function a9(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function df(e){return new Float64Array(e)}const l9=(3+16*Xr)*Xr,c9=(2+12*Xr)*Xr,u9=(9+64*Xr)*Xr*Xr,Fa=df(4),Kx=df(8),Jx=df(12),Qx=df(16),fn=df(4);function f9(e,t,n,i,r,s,o){let a,l,c,u,f,h,d,g,m,_,p,y,w,v,x,b,E,T;const M=e-r,C=n-r,R=t-s,A=i-s;v=M*A,h=Ke*M,d=h-(h-M),g=M-d,h=Ke*A,m=h-(h-A),_=A-m,x=g*_-(v-d*m-g*m-d*_),b=R*C,h=Ke*R,d=h-(h-R),g=R-d,h=Ke*C,m=h-(h-C),_=C-m,E=g*_-(b-d*m-g*m-d*_),p=x-E,f=x-p,Fa[0]=x-(p+f)+(f-E),y=v+p,f=y-v,w=v-(y-f)+(p-f),p=w-b,f=w-p,Fa[1]=w-(p+f)+(f-b),T=y+p,f=T-y,Fa[2]=y-(T-f)+(p-f),Fa[3]=T;let k=a9(4,Fa),O=c9*o;if(k>=O||-k>=O||(f=e-M,a=e-(M+f)+(f-r),f=n-C,c=n-(C+f)+(f-r),f=t-R,l=t-(R+f)+(f-s),f=i-A,u=i-(A+f)+(f-s),a===0&&l===0&&c===0&&u===0)||(O=u9*o+o9*Math.abs(k),k+=M*u+A*a-(R*c+C*l),k>=O||-k>=O))return k;v=a*A,h=Ke*a,d=h-(h-a),g=a-d,h=Ke*A,m=h-(h-A),_=A-m,x=g*_-(v-d*m-g*m-d*_),b=l*C,h=Ke*l,d=h-(h-l),g=l-d,h=Ke*C,m=h-(h-C),_=C-m,E=g*_-(b-d*m-g*m-d*_),p=x-E,f=x-p,fn[0]=x-(p+f)+(f-E),y=v+p,f=y-v,w=v-(y-f)+(p-f),p=w-b,f=w-p,fn[1]=w-(p+f)+(f-b),T=y+p,f=T-y,fn[2]=y-(T-f)+(p-f),fn[3]=T;const I=rp(4,Fa,4,fn,Kx);v=M*u,h=Ke*M,d=h-(h-M),g=M-d,h=Ke*u,m=h-(h-u),_=u-m,x=g*_-(v-d*m-g*m-d*_),b=R*c,h=Ke*R,d=h-(h-R),g=R-d,h=Ke*c,m=h-(h-c),_=c-m,E=g*_-(b-d*m-g*m-d*_),p=x-E,f=x-p,fn[0]=x-(p+f)+(f-E),y=v+p,f=y-v,w=v-(y-f)+(p-f),p=w-b,f=w-p,fn[1]=w-(p+f)+(f-b),T=y+p,f=T-y,fn[2]=y-(T-f)+(p-f),fn[3]=T;const F=rp(I,Kx,4,fn,Jx);v=a*u,h=Ke*a,d=h-(h-a),g=a-d,h=Ke*u,m=h-(h-u),_=u-m,x=g*_-(v-d*m-g*m-d*_),b=l*c,h=Ke*l,d=h-(h-l),g=l-d,h=Ke*c,m=h-(h-c),_=c-m,E=g*_-(b-d*m-g*m-d*_),p=x-E,f=x-p,fn[0]=x-(p+f)+(f-E),y=v+p,f=y-v,w=v-(y-f)+(p-f),p=w-b,f=w-p,fn[1]=w-(p+f)+(f-b),T=y+p,f=T-y,fn[2]=y-(T-f)+(p-f),fn[3]=T;const P=rp(F,Jx,4,fn,Qx);return Qx[P-1]}function mh(e,t,n,i,r,s){const o=(t-s)*(n-r),a=(e-r)*(i-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=l9*c?l:-f9(e,t,n,i,r,s,c)}const t2=Math.pow(2,-52),ph=new Uint32Array(512);class Ld{static from(t,n=p9,i=y9){const r=t.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=i(a)}return new Ld(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let C=0;C<o;C++){const R=t[2*C],A=t[2*C+1];R<a&&(a=R),A<l&&(l=A),R>c&&(c=R),A>u&&(u=A),this._ids[C]=C}const f=(a+c)/2,h=(l+u)/2;let d=1/0,g,m,_;for(let C=0;C<o;C++){const R=sp(f,h,t[2*C],t[2*C+1]);R<d&&(g=C,d=R)}const p=t[2*g],y=t[2*g+1];d=1/0;for(let C=0;C<o;C++){if(C===g)continue;const R=sp(p,y,t[2*C],t[2*C+1]);R<d&&R>0&&(m=C,d=R)}let w=t[2*m],v=t[2*m+1],x=1/0;for(let C=0;C<o;C++){if(C===g||C===m)continue;const R=g9(p,y,w,v,t[2*C],t[2*C+1]);R<x&&(_=C,x=R)}let b=t[2*_],E=t[2*_+1];if(x===1/0){for(let A=0;A<o;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];Qa(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let R=0;for(let A=0,k=-1/0;A<o;A++){const O=this._ids[A];this._dists[O]>k&&(C[R++]=O,k=this._dists[O])}this.hull=C.subarray(0,R),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(mh(p,y,w,v,b,E)<0){const C=m,R=w,A=v;m=_,w=b,v=E,_=C,b=R,E=A}const T=m9(p,y,w,v,b,E);this._cx=T.x,this._cy=T.y;for(let C=0;C<o;C++)this._dists[C]=sp(t[2*C],t[2*C+1],T.x,T.y);Qa(this._ids,this._dists,0,o-1),this._hullStart=g;let M=3;i[g]=n[_]=m,i[m]=n[g]=_,i[_]=n[m]=g,r[g]=0,r[m]=1,r[_]=2,s.fill(-1),s[this._hashKey(p,y)]=g,s[this._hashKey(w,v)]=m,s[this._hashKey(b,E)]=_,this.trianglesLen=0,this._addTriangle(g,m,_,-1,-1,-1);for(let C=0,R,A;C<this._ids.length;C++){const k=this._ids[C],O=t[2*k],I=t[2*k+1];if(C>0&&Math.abs(O-R)<=t2&&Math.abs(I-A)<=t2||(R=O,A=I,k===g||k===m||k===_))continue;let F=0;for(let q=0,W=this._hashKey(O,I);q<this._hashSize&&(F=s[(W+q)%this._hashSize],!(F!==-1&&F!==i[F]));q++);F=n[F];let P=F,G;for(;G=i[P],mh(O,I,t[2*P],t[2*P+1],t[2*G],t[2*G+1])>=0;)if(P=G,P===F){P=-1;break}if(P===-1)continue;let j=this._addTriangle(P,k,i[P],-1,-1,r[P]);r[k]=this._legalize(j+2),r[P]=j,M++;let U=i[P];for(;G=i[U],mh(O,I,t[2*U],t[2*U+1],t[2*G],t[2*G+1])<0;)j=this._addTriangle(U,k,G,r[k],-1,r[U]),r[k]=this._legalize(j+2),i[U]=U,M--,U=G;if(P===F)for(;G=n[P],mh(O,I,t[2*G],t[2*G+1],t[2*P],t[2*P+1])<0;)j=this._addTriangle(G,k,P,-1,r[P],r[G]),this._legalize(j+2),r[G]=j,i[P]=P,M--,P=G;this._hullStart=n[k]=P,i[P]=n[U]=k,i[k]=U,s[this._hashKey(O,I)]=k,s[this._hashKey(t[2*P],t[2*P+1])]=P}this.hull=new Uint32Array(M);for(let C=0,R=this._hullStart;C<M;C++)this.hull[C]=R,R=i[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(h9(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let s=0,o=0;for(;;){const a=i[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=ph[--s];continue}const c=a-a%3,u=l+(t+1)%3,f=c+(a+2)%3,h=n[o],d=n[t],g=n[u],m=n[f];if(d9(r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*g],r[2*g+1],r[2*m],r[2*m+1])){n[t]=m,n[a]=h;const p=i[f];if(p===-1){let w=this._hullStart;do{if(this._hullTri[w]===f){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,p),this._link(a,i[o]),this._link(o,f);const y=c+(a+1)%3;s<ph.length&&(ph[s++]=y)}else{if(s===0)break;t=ph[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function h9(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function sp(e,t,n,i){const r=e-n,s=t-i;return r*r+s*s}function d9(e,t,n,i,r,s,o,a){const l=e-o,c=t-a,u=n-o,f=i-a,h=r-o,d=s-a,g=l*l+c*c,m=u*u+f*f,_=h*h+d*d;return l*(f*_-m*d)-c*(u*_-m*h)+g*(u*d-f*h)<0}function g9(e,t,n,i,r,s){const o=n-e,a=i-t,l=r-e,c=s-t,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),d=(c*u-a*f)*h,g=(o*f-l*u)*h;return d*d+g*g}function m9(e,t,n,i,r,s){const o=n-e,a=i-t,l=r-e,c=s-t,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),d=e+(c*u-a*f)*h,g=t+(o*f-l*u)*h;return{x:d,y:g}}function Qa(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const s=e[r],o=t[s];let a=r-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const r=n+i>>1;let s=n+1,o=i;kc(e,r,s),t[e[n]]>t[e[i]]&&kc(e,n,i),t[e[s]]>t[e[i]]&&kc(e,s,i),t[e[n]]>t[e[s]]&&kc(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;kc(e,s,o)}e[n+1]=e[o],e[o]=a,i-s+1>=o-n?(Qa(e,t,s,i),Qa(e,t,n,o-1)):(Qa(e,t,n,o-1),Qa(e,t,s,i))}}function kc(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function p9(e){return e[0]}function y9(e){return e[1]}const e2=1e-6;class No{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,s=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>e2||Math.abs(this._y1-s)>e2)&&(this._+="L"+r+","+s),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}let Yy=class{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}},_9=class{constructor(t,[n,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let m=0,_=0,p=i.length,y,w;m<p;m+=3,_+=2){const v=i[m]*2,x=i[m+1]*2,b=i[m+2]*2,E=t[v],T=t[v+1],M=t[x],C=t[x+1],R=t[b],A=t[b+1],k=M-E,O=C-T,I=R-E,F=A-T,P=(k*F-O*I)*2;if(Math.abs(P)<1e-9){if(s===void 0){s=o=0;for(const j of n)s+=t[j*2],o+=t[j*2+1];s/=n.length,o/=n.length}const G=1e9*Math.sign((s-E)*F-(o-T)*I);y=(E+R)/2-G*F,w=(T+A)/2+G*I}else{const G=1/P,j=k*k+O*O,U=I*I+F*F;y=E+(F*j-O*U)*G,w=T+(k*U-I*j)*G}a[_]=y,a[_+1]=w}let l=n[n.length-1],c,u=l*4,f,h=t[2*l],d,g=t[2*l+1];r.fill(0);for(let m=0;m<n.length;++m)l=n[m],c=u,f=h,d=g,u=l*4,h=t[2*l],g=t[2*l+1],r[c+2]=r[u]=d-g,r[c+3]=r[u+1]=h-f}render(t){const n=t==null?t=new No:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=i.length;u<f;++u){const h=i[u];if(h<u)continue;const d=Math.floor(u/3)*2,g=Math.floor(h/3)*2,m=o[d],_=o[d+1],p=o[g],y=o[g+1];this._renderSegment(m,_,p,y,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(r[c]/3)*2,h=o[f],d=o[f+1],g=l*4,m=this._project(h,d,a[g+2],a[g+3]);m&&this._renderSegment(h,d,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new No:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new No:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new Yy;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,s){let o;const a=this._regioncode(t,n),l=this._regioncode(i,r);a===0&&l===0?(s.moveTo(t,n),s.lineTo(i,r)):(o=this._clipSegment(t,n,i,r,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[s]===r[a]&&n[s+1]===r[a+1]&&n[(s+2)%o]===r[(a+l-2)%l]&&n[(s+3)%o]===r[(a+l-1)%l]){yield i;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,o=i[t];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=r[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,s,o,a=n[i-2],l=n[i-1],c,u=this._regioncode(a,l),f,h=0;for(let d=0;d<i;d+=2)if(s=a,o=l,a=n[d],l=n[d+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=h,h=0,r?r.push(a,l):r=[a,l];else{let g,m,_,p,y;if(c===0){if((g=this._clipSegment(s,o,a,l,c,u))===null)continue;[m,_,p,y]=g}else{if((g=this._clipSegment(a,l,s,o,u,c))===null)continue;[p,y,m,_]=g,f=h,h=this._edgecode(m,_),f&&h&&this._edge(t,f,h,r,r.length),r?r.push(m,_):r=[m,_]}f=h,h=this._edgecode(p,y),f&&h&&this._edge(t,f,h,r,r.length),r?r.push(p,y):r=[p,y]}if(r)f=h,h=this._edgecode(r[0],r[1]),f&&h&&this._edge(t,f,h,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,s,o){const a=s<o;for(a&&([t,n,i,r,s,o]=[i,r,t,n,o,s]);;){if(s===0&&o===0)return a?[i,r,t,n]:[t,n,i,r];if(s&o)return null;let l,c,u=s||o;u&8?(l=t+(i-t)*(this.ymax-n)/(r-n),c=this.ymax):u&4?(l=t+(i-t)*(this.ymin-n)/(r-n),c=this.ymin):u&2?(c=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(c=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(i=l,r=c,o=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,u=a.length,f,h=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=h,h=this._edgecode(a[c],a[c+1]),f&&h&&(c=this._edge(t,f,h,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,i,r,s){for(;n!==i;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(t,o,a)&&(r.splice(s,0,o,a),s+=2)}return s}_project(t,n,i,r){let s=1/0,o,a,l;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<s&&(l=this.ymin,a=t+(s=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<s&&(l=this.ymax,a=t+(s=o)*i)}if(i>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/i)<s&&(a=this.xmax,l=n+(s=o)*r)}else if(i<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/i)<s&&(a=this.xmin,l=n+(s=o)*r)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const v9=2*Math.PI,Pa=Math.pow;function w9(e){return e[0]}function b9(e){return e[1]}function x9(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],s=2*t[i+1],o=2*t[i+2];if((n[o]-n[r])*(n[s+1]-n[r+1])-(n[s]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function E9(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class oo{static from(t,n=w9,i=b9,r){return new oo("length"in t?T9(t,n,i,r):Float64Array.from(C9(t,n,i,r)))}constructor(t){this._delaunator=new Ld(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&x9(t)){this.collinear=Int32Array.from({length:n.length/2},(h,d)=>d).sort((h,d)=>n[2*h]-n[2*d]||n[2*h+1]-n[2*d+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let h=0,d=n.length/2;h<d;++h){const g=E9(n[2*h],n[2*h+1],f);n[2*h]=g[0],n[2*h+1]=g[1]}this._delaunator=new Ld(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=i.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(i[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=r.length;l<c;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new _9(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==t)return;if(c=s[c],c===-1){const f=i[(r[t]+1)%i.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let s;for(;(s=this._step(i,t,n))>=0&&s!==i&&s!==r;)i=s;return s}_step(t,n,i){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(r[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=Pa(n-c[t*2],2)+Pa(i-c[t*2+1],2);const h=r[t];let d=h;do{let g=l[d];const m=Pa(n-c[g*2],2)+Pa(i-c[g*2+1],2);if(m<f&&(f=m,u=g),d=d%3===2?d-2:d+1,l[d]!==t)break;if(d=a[d],d===-1){if(d=s[(o[t]+1)%s.length],d!==g&&Pa(n-c[d*2],2)+Pa(i-c[d*2+1],2)<f)return d;break}}while(d!==h);return u}render(t){const n=t==null?t=new No:void 0,{points:i,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;t.moveTo(i[c],i[c+1]),t.lineTo(i[u],i[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new No:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],l=r[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,v9)}return i&&i.value()}renderHull(t){const n=t==null?t=new No:void 0,{hull:i,points:r}=this,s=i[0]*2,o=i.length;t.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const l=2*i[a];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Yy;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new No:void 0,{points:r,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Yy;return this.renderTriangle(t,n),n.value()}}function T9(e,t,n,i){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=e[o];s[o*2]=t.call(i,a,o,e),s[o*2+1]=n.call(i,a,o,e)}return s}function*C9(e,t,n,i){let r=0;for(const s of e)yield t.call(i,s,r,e),yield n.call(i,s,r,e),++r}function S9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Od(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Il(e){return e=Od(Math.abs(e)),e?e[1]:NaN}function M9(e,t){return function(n,i){for(var r=n.length,s=[],o=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function R9(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var A9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Du(e){if(!(t=A9.exec(e)))throw new Error("invalid format: "+e);var t;return new K1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Du.prototype=K1.prototype;function K1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}K1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function I9(e){t:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break t;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var JM;function L9(e,t){var n=Od(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(JM=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Od(e,Math.max(0,t+s-1))[0]}function n2(e,t){var n=Od(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const i2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:S9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>n2(e*100,t),r:n2,s:L9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function r2(e){return e}var s2=Array.prototype.map,o2=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function O9(e){var t=e.grouping===void 0||e.thousands===void 0?r2:M9(s2.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?r2:R9(s2.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=Du(f);var h=f.fill,d=f.align,g=f.sign,m=f.symbol,_=f.zero,p=f.width,y=f.comma,w=f.precision,v=f.trim,x=f.type;x==="n"?(y=!0,x="g"):i2[x]||(w===void 0&&(w=12),v=!0,x="g"),(_||h==="0"&&d==="=")&&(_=!0,h="0",d="=");var b=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",E=m==="$"?i:/[%p]/.test(x)?o:"",T=i2[x],M=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function C(R){var A=b,k=E,O,I,F;if(x==="c")k=T(R)+k,R="";else{R=+R;var P=R<0||1/R<0;if(R=isNaN(R)?l:T(Math.abs(R),w),v&&(R=I9(R)),P&&+R==0&&g!=="+"&&(P=!1),A=(P?g==="("?g:a:g==="-"||g==="("?"":g)+A,k=(x==="s"?o2[8+JM/3]:"")+k+(P&&g==="("?")":""),M){for(O=-1,I=R.length;++O<I;)if(F=R.charCodeAt(O),48>F||F>57){k=(F===46?r+R.slice(O+1):R.slice(O))+k,R=R.slice(0,O);break}}}y&&!_&&(R=t(R,1/0));var G=A.length+R.length+k.length,j=G<p?new Array(p-G+1).join(h):"";switch(y&&_&&(R=t(j+R,j.length?p-k.length:1/0),j=""),d){case"<":R=A+R+k+j;break;case"=":R=A+j+R+k;break;case"^":R=j.slice(0,G=j.length>>1)+A+R+k+j.slice(G);break;default:R=j+A+R+k;break}return s(R)}return C.toString=function(){return f+""},C}function u(f,h){var d=c((f=Du(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Il(h)/3)))*3,m=Math.pow(10,-g),_=o2[8+g/3];return function(p){return d(m*p)+_}}return{format:c,formatPrefix:u}}var yh,ao,QM;k9({thousands:",",grouping:[3],currency:["$",""]});function k9(e){return yh=O9(e),ao=yh.format,QM=yh.formatPrefix,yh}function F9(e){return Math.max(0,-Il(Math.abs(e)))}function P9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Il(t)/3)))*3-Il(Math.abs(e)))}function N9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Il(t)-Il(e))+1}var yt=1e-6,kd=1e-12,kt=Math.PI,Ce=kt/2,a2=kt/4,qn=kt*2,qe=180/kt,Yt=kt/180,Zt=Math.abs,ac=Math.atan,Di=Math.atan2,vt=Math.cos,_h=Math.ceil,tR=Math.exp,Uy=Math.hypot,Fd=Math.log,op=Math.pow,gt=Math.sin,li=Math.sign||function(e){return e>0?1:e<0?-1:0},vn=Math.sqrt,J1=Math.tan;function eR(e){return e>1?0:e<-1?kt:Math.acos(e)}function Pn(e){return e>1?Ce:e<-1?-Ce:Math.asin(e)}function Yn(){}function Pd(e,t){e&&c2.hasOwnProperty(e.type)&&c2[e.type](e,t)}var l2={Feature:function(e,t){Pd(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Pd(n[i].geometry,t)}},c2={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){Vy(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Vy(n[i],t,0)},Polygon:function(e,t){u2(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)u2(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Pd(n[i],t)}};function Vy(e,t,n){var i=-1,r=e.length-n,s;for(t.lineStart();++i<r;)s=e[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function u2(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)Vy(e[n],t,1);t.polygonEnd()}function Ps(e,t){e&&l2.hasOwnProperty(e.type)?l2[e.type](e,t):Pd(e,t)}function Xy(e){return[Di(e[1],e[0]),Pn(e[2])]}function Ll(e){var t=e[0],n=e[1],i=vt(n);return[i*vt(t),i*gt(t),gt(n)]}function vh(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Nd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ap(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function wh(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function jy(e){var t=vn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Jc,Dd,$d,zd,Wd,Gd,Bd,Hd,qy,Zy,Ky,nR,iR,dn,gn,mn,Ii={sphere:Yn,point:Q1,lineStart:f2,lineEnd:h2,polygonStart:function(){Ii.lineStart=z9,Ii.lineEnd=W9},polygonEnd:function(){Ii.lineStart=f2,Ii.lineEnd=h2}};function Q1(e,t){e*=Yt,t*=Yt;var n=vt(t);gf(n*vt(e),n*gt(e),gt(t))}function gf(e,t,n){++Jc,$d+=(e-$d)/Jc,zd+=(t-zd)/Jc,Wd+=(n-Wd)/Jc}function f2(){Ii.point=D9}function D9(e,t){e*=Yt,t*=Yt;var n=vt(t);dn=n*vt(e),gn=n*gt(e),mn=gt(t),Ii.point=$9,gf(dn,gn,mn)}function $9(e,t){e*=Yt,t*=Yt;var n=vt(t),i=n*vt(e),r=n*gt(e),s=gt(t),o=Di(vn((o=gn*s-mn*r)*o+(o=mn*i-dn*s)*o+(o=dn*r-gn*i)*o),dn*i+gn*r+mn*s);Dd+=o,Gd+=o*(dn+(dn=i)),Bd+=o*(gn+(gn=r)),Hd+=o*(mn+(mn=s)),gf(dn,gn,mn)}function h2(){Ii.point=Q1}function z9(){Ii.point=G9}function W9(){rR(nR,iR),Ii.point=Q1}function G9(e,t){nR=e,iR=t,e*=Yt,t*=Yt,Ii.point=rR;var n=vt(t);dn=n*vt(e),gn=n*gt(e),mn=gt(t),gf(dn,gn,mn)}function rR(e,t){e*=Yt,t*=Yt;var n=vt(t),i=n*vt(e),r=n*gt(e),s=gt(t),o=gn*s-mn*r,a=mn*i-dn*s,l=dn*r-gn*i,c=Uy(o,a,l),u=Pn(c),f=c&&-u/c;qy.add(f*o),Zy.add(f*a),Ky.add(f*l),Dd+=u,Gd+=u*(dn+(dn=i)),Bd+=u*(gn+(gn=r)),Hd+=u*(mn+(mn=s)),gf(dn,gn,mn)}function B9(e){Jc=Dd=$d=zd=Wd=Gd=Bd=Hd=0,qy=new lr,Zy=new lr,Ky=new lr,Ps(e,Ii);var t=+qy,n=+Zy,i=+Ky,r=Uy(t,n,i);return r<kd&&(t=Gd,n=Bd,i=Hd,Dd<yt&&(t=$d,n=zd,i=Wd),r=Uy(t,n,i),r<kd)?[NaN,NaN]:[Di(n,t)*qe,Pn(i/r)*qe]}function Jy(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function Qy(e,t){return Zt(e)>kt&&(e-=Math.round(e/qn)*qn),[e,t]}Qy.invert=Qy;function sR(e,t,n){return(e%=qn)?t||n?Jy(g2(e),m2(t,n)):g2(e):t||n?m2(t,n):Qy}function d2(e){return function(t,n){return t+=e,Zt(t)>kt&&(t-=Math.round(t/qn)*qn),[t,n]}}function g2(e){var t=d2(e);return t.invert=d2(-e),t}function m2(e,t){var n=vt(e),i=gt(e),r=vt(t),s=gt(t);function o(a,l){var c=vt(l),u=vt(a)*c,f=gt(a)*c,h=gt(l),d=h*n+u*i;return[Di(f*r-d*s,u*n-h*i),Pn(d*r+f*s)]}return o.invert=function(a,l){var c=vt(l),u=vt(a)*c,f=gt(a)*c,h=gt(l),d=h*r-f*s;return[Di(f*r+h*s,u*n+d*i),Pn(d*n-u*i)]},o}function H9(e){e=sR(e[0]*Yt,e[1]*Yt,e.length>2?e[2]*Yt:0);function t(n){return n=e(n[0]*Yt,n[1]*Yt),n[0]*=qe,n[1]*=qe,n}return t.invert=function(n){return n=e.invert(n[0]*Yt,n[1]*Yt),n[0]*=qe,n[1]*=qe,n},t}function Y9(e,t,n,i,r,s){if(n){var o=vt(t),a=gt(t),l=i*n;r==null?(r=t+i*qn,s=t-l/2):(r=p2(o,r),s=p2(o,s),(i>0?r<s:r>s)&&(r+=i*qn));for(var c,u=r;i>0?u>s:u<s;u-=l)c=Xy([o,-a*vt(u),-a*gt(u)]),e.point(c[0],c[1])}}function p2(e,t){t=Ll(t),t[0]-=e,jy(t);var n=eR(-t[1]);return((-t[2]<0?-n:n)+qn-yt)%qn}function oR(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Yn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ud(e,t){return Zt(e[0]-t[0])<yt&&Zt(e[1]-t[1])<yt}function bh(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function aR(e,t,n,i,r){var s=[],o=[],a,l;if(e.forEach(function(g){if(!((m=g.length-1)<=0)){var m,_=g[0],p=g[m],y;if(ud(_,p)){if(!_[2]&&!p[2]){for(r.lineStart(),a=0;a<m;++a)r.point((_=g[a])[0],_[1]);r.lineEnd();return}p[0]+=2*yt}s.push(y=new bh(_,g,null,!0)),o.push(y.o=new bh(_,null,y,!1)),s.push(y=new bh(p,g,null,!1)),o.push(y.o=new bh(p,null,y,!0))}}),!!s.length){for(o.sort(t),y2(s),y2(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,l=u.length;a<l;++a)r.point((f=u[a])[0],f[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(d)for(u=h.p.z,a=u.length-1;a>=0;--a)r.point((f=u[a])[0],f[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);r.lineEnd()}}}function y2(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function lp(e){return Zt(e[0])<=kt?e[0]:li(e[0])*((Zt(e[0])+kt)%qn-kt)}function U9(e,t){var n=lp(t),i=t[1],r=gt(i),s=[gt(n),-vt(n),0],o=0,a=0,l=new lr;r===1?i=Ce+yt:r===-1&&(i=-Ce-yt);for(var c=0,u=e.length;c<u;++c)if(h=(f=e[c]).length)for(var f,h,d=f[h-1],g=lp(d),m=d[1]/2+a2,_=gt(m),p=vt(m),y=0;y<h;++y,g=v,_=b,p=E,d=w){var w=f[y],v=lp(w),x=w[1]/2+a2,b=gt(x),E=vt(x),T=v-g,M=T>=0?1:-1,C=M*T,R=C>kt,A=_*b;if(l.add(Di(A*M*gt(C),p*E+A*vt(C))),o+=R?T+M*qn:T,R^g>=n^v>=n){var k=Nd(Ll(d),Ll(w));jy(k);var O=Nd(s,k);jy(O);var I=(R^T>=0?-1:1)*Pn(O[2]);(i>I||i===I&&(k[0]||k[1]))&&(a+=R^T>=0?1:-1)}}return(o<-yt||o<yt&&l<-kd)^a&1}function lR(e,t,n,i){return function(r){var s=t(r),o=oR(),a=t(o),l=!1,c,u,f,h={point:d,lineStart:m,lineEnd:_,polygonStart:function(){h.point=p,h.lineStart=y,h.lineEnd=w,u=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=_,u=lM(u);var v=U9(c,i);u.length?(l||(r.polygonStart(),l=!0),aR(u,X9,v,n,r)):v&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(v,x){e(v,x)&&r.point(v,x)}function g(v,x){s.point(v,x)}function m(){h.point=g,s.lineStart()}function _(){h.point=d,s.lineEnd()}function p(v,x){f.push([v,x]),a.point(v,x)}function y(){a.lineStart(),f=[]}function w(){p(f[0][0],f[0][1]),a.lineEnd();var v=a.clean(),x=o.result(),b,E=x.length,T,M,C;if(f.pop(),c.push(f),f=null,!!E){if(v&1){if(M=x[0],(T=M.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),b=0;b<T;++b)r.point((C=M[b])[0],C[1]);r.lineEnd()}return}E>1&&v&2&&x.push(x.pop().concat(x.shift())),u.push(x.filter(V9))}}return h}}function V9(e){return e.length>1}function X9(e,t){return((e=e.x)[0]<0?e[1]-Ce-yt:Ce-e[1])-((t=t.x)[0]<0?t[1]-Ce-yt:Ce-t[1])}const _2=lR(function(){return!0},j9,Z9,[-kt,-Ce]);function j9(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(s,o){var a=s>0?kt:-kt,l=Zt(s-t);Zt(l-kt)<yt?(e.point(t,n=(n+o)/2>0?Ce:-Ce),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),r=0):i!==a&&l>=kt&&(Zt(t-i)<yt&&(t-=i*yt),Zt(s-a)<yt&&(s-=a*yt),n=q9(t,n,s,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),r=0),e.point(t=s,n=o),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function q9(e,t,n,i){var r,s,o=gt(e-n);return Zt(o)>yt?ac((gt(t)*(s=vt(i))*gt(n)-gt(i)*(r=vt(t))*gt(e))/(r*s*o)):(t+i)/2}function Z9(e,t,n,i){var r;if(e==null)r=n*Ce,i.point(-kt,r),i.point(0,r),i.point(kt,r),i.point(kt,0),i.point(kt,-r),i.point(0,-r),i.point(-kt,-r),i.point(-kt,0),i.point(-kt,r);else if(Zt(e[0]-t[0])>yt){var s=e[0]<t[0]?kt:-kt;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function K9(e){var t=vt(e),n=6*Yt,i=t>0,r=Zt(t)>yt;function s(u,f,h,d){Y9(d,e,n,h,u,f)}function o(u,f){return vt(u)*vt(f)>t}function a(u){var f,h,d,g,m;return{lineStart:function(){g=d=!1,m=1},point:function(_,p){var y=[_,p],w,v=o(_,p),x=i?v?0:c(_,p):v?c(_+(_<0?kt:-kt),p):0;if(!f&&(g=d=v)&&u.lineStart(),v!==d&&(w=l(f,y),(!w||ud(f,w)||ud(y,w))&&(y[2]=1)),v!==d)m=0,v?(u.lineStart(),w=l(y,f),u.point(w[0],w[1])):(w=l(f,y),u.point(w[0],w[1],2),u.lineEnd()),f=w;else if(r&&f&&i^v){var b;!(x&h)&&(b=l(y,f,!0))&&(m=0,i?(u.lineStart(),u.point(b[0][0],b[0][1]),u.point(b[1][0],b[1][1]),u.lineEnd()):(u.point(b[1][0],b[1][1]),u.lineEnd(),u.lineStart(),u.point(b[0][0],b[0][1],3)))}v&&(!f||!ud(f,y))&&u.point(y[0],y[1]),f=y,d=v,h=x},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return m|(g&&d)<<1}}}function l(u,f,h){var d=Ll(u),g=Ll(f),m=[1,0,0],_=Nd(d,g),p=vh(_,_),y=_[0],w=p-y*y;if(!w)return!h&&u;var v=t*p/w,x=-t*y/w,b=Nd(m,_),E=wh(m,v),T=wh(_,x);ap(E,T);var M=b,C=vh(E,M),R=vh(M,M),A=C*C-R*(vh(E,E)-1);if(!(A<0)){var k=vn(A),O=wh(M,(-C-k)/R);if(ap(O,E),O=Xy(O),!h)return O;var I=u[0],F=f[0],P=u[1],G=f[1],j;F<I&&(j=I,I=F,F=j);var U=F-I,q=Zt(U-kt)<yt,W=q||U<yt;if(!q&&G<P&&(j=P,P=G,G=j),W?q?P+G>0^O[1]<(Zt(O[0]-I)<yt?P:G):P<=O[1]&&O[1]<=G:U>kt^(I<=O[0]&&O[0]<=F)){var Q=wh(M,(-C+k)/R);return ap(Q,E),[O,Xy(Q)]}}}function c(u,f){var h=i?e:kt-e,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return lR(o,a,s,i?[0,-e]:[-kt,e-kt])}function J9(e,t,n,i,r,s){var o=e[0],a=e[1],l=t[0],c=t[1],u=0,f=1,h=l-o,d=c-a,g;if(g=n-o,!(!h&&g>0)){if(g/=h,h<0){if(g<u)return;g<f&&(f=g)}else if(h>0){if(g>f)return;g>u&&(u=g)}if(g=r-o,!(!h&&g<0)){if(g/=h,h<0){if(g>f)return;g>u&&(u=g)}else if(h>0){if(g<u)return;g<f&&(f=g)}if(g=i-a,!(!d&&g>0)){if(g/=d,d<0){if(g<u)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>u&&(u=g)}if(g=s-a,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>u&&(u=g)}else if(d>0){if(g<u)return;g<f&&(f=g)}return u>0&&(e[0]=o+u*h,e[1]=a+u*d),f<1&&(t[0]=o+f*h,t[1]=a+f*d),!0}}}}}var Qc=1e9,xh=-Qc;function cR(e,t,n,i){function r(c,u){return e<=c&&c<=n&&t<=u&&u<=i}function s(c,u,f,h){var d=0,g=0;if(c==null||(d=o(c,f))!==(g=o(u,f))||l(c,u)<0^f>0)do h.point(d===0||d===3?e:n,d>1?i:t);while((d=(d+f+4)%4)!==g);else h.point(u[0],u[1])}function o(c,u){return Zt(c[0]-e)<yt?u>0?0:3:Zt(c[0]-n)<yt?u>0?2:1:Zt(c[1]-t)<yt?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),h=o(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=oR(),h,d,g,m,_,p,y,w,v,x,b,E={point:T,lineStart:A,lineEnd:k,polygonStart:C,polygonEnd:R};function T(I,F){r(I,F)&&u.point(I,F)}function M(){for(var I=0,F=0,P=d.length;F<P;++F)for(var G=d[F],j=1,U=G.length,q=G[0],W,Q,nt=q[0],st=q[1];j<U;++j)W=nt,Q=st,q=G[j],nt=q[0],st=q[1],Q<=i?st>i&&(nt-W)*(i-Q)>(st-Q)*(e-W)&&++I:st<=i&&(nt-W)*(i-Q)<(st-Q)*(e-W)&&--I;return I}function C(){u=f,h=[],d=[],b=!0}function R(){var I=M(),F=b&&I,P=(h=lM(h)).length;(F||P)&&(c.polygonStart(),F&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),P&&aR(h,a,I,s,c),c.polygonEnd()),u=c,h=d=g=null}function A(){E.point=O,d&&d.push(g=[]),x=!0,v=!1,y=w=NaN}function k(){h&&(O(m,_),p&&v&&f.rejoin(),h.push(f.result())),E.point=T,v&&u.lineEnd()}function O(I,F){var P=r(I,F);if(d&&g.push([I,F]),x)m=I,_=F,p=P,x=!1,P&&(u.lineStart(),u.point(I,F));else if(P&&v)u.point(I,F);else{var G=[y=Math.max(xh,Math.min(Qc,y)),w=Math.max(xh,Math.min(Qc,w))],j=[I=Math.max(xh,Math.min(Qc,I)),F=Math.max(xh,Math.min(Qc,F))];J9(G,j,e,t,n,i)?(v||(u.lineStart(),u.point(G[0],G[1])),u.point(j[0],j[1]),P||u.lineEnd(),b=!1):P&&(u.lineStart(),u.point(I,F),b=!1)}y=I,w=F,v=P}return E}}function v2(e,t,n){var i=ai(e,t-yt,n).concat(t);return function(r){return i.map(function(s){return[r,s]})}}function w2(e,t,n){var i=ai(e,t-yt,n).concat(t);return function(r){return i.map(function(s){return[s,r]})}}function Q9(){var e,t,n,i,r,s,o,a,l=10,c=l,u=90,f=360,h,d,g,m,_=2.5;function p(){return{type:"MultiLineString",coordinates:y()}}function y(){return ai(_h(i/u)*u,n,u).map(g).concat(ai(_h(a/f)*f,o,f).map(m)).concat(ai(_h(t/l)*l,e,l).filter(function(w){return Zt(w%u)>yt}).map(h)).concat(ai(_h(s/c)*c,r,c).filter(function(w){return Zt(w%f)>yt}).map(d))}return p.lines=function(){return y().map(function(w){return{type:"LineString",coordinates:w}})},p.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(m(o).slice(1),g(n).reverse().slice(1),m(a).reverse().slice(1))]}},p.extent=function(w){return arguments.length?p.extentMajor(w).extentMinor(w):p.extentMinor()},p.extentMajor=function(w){return arguments.length?(i=+w[0][0],n=+w[1][0],a=+w[0][1],o=+w[1][1],i>n&&(w=i,i=n,n=w),a>o&&(w=a,a=o,o=w),p.precision(_)):[[i,a],[n,o]]},p.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],s=+w[0][1],r=+w[1][1],t>e&&(w=t,t=e,e=w),s>r&&(w=s,s=r,r=w),p.precision(_)):[[t,s],[e,r]]},p.step=function(w){return arguments.length?p.stepMajor(w).stepMinor(w):p.stepMinor()},p.stepMajor=function(w){return arguments.length?(u=+w[0],f=+w[1],p):[u,f]},p.stepMinor=function(w){return arguments.length?(l=+w[0],c=+w[1],p):[l,c]},p.precision=function(w){return arguments.length?(_=+w,h=v2(s,r,90),d=w2(t,e,_),g=v2(a,o,90),m=w2(i,n,_),p):_},p.extentMajor([[-180,-90+yt],[180,90-yt]]).extentMinor([[-180,-80-yt],[180,80+yt]])}function tz(){return Q9()()}const t_=e=>e;var cp=new lr,e_=new lr,uR,fR,n_,i_,Ns={point:Yn,lineStart:Yn,lineEnd:Yn,polygonStart:function(){Ns.lineStart=ez,Ns.lineEnd=iz},polygonEnd:function(){Ns.lineStart=Ns.lineEnd=Ns.point=Yn,cp.add(Zt(e_)),e_=new lr},result:function(){var e=cp/2;return cp=new lr,e}};function ez(){Ns.point=nz}function nz(e,t){Ns.point=hR,uR=n_=e,fR=i_=t}function hR(e,t){e_.add(i_*e-n_*t),n_=e,i_=t}function iz(){hR(uR,fR)}const b2=Ns;var Ol=1/0,Yd=Ol,$u=-Ol,Ud=$u,rz={point:sz,lineStart:Yn,lineEnd:Yn,polygonStart:Yn,polygonEnd:Yn,result:function(){var e=[[Ol,Yd],[$u,Ud]];return $u=Ud=-(Yd=Ol=1/0),e}};function sz(e,t){e<Ol&&(Ol=e),e>$u&&($u=e),t<Yd&&(Yd=t),t>Ud&&(Ud=t)}const Vd=rz;var r_=0,s_=0,tu=0,Xd=0,jd=0,tl=0,o_=0,a_=0,eu=0,dR,gR,Ji,Qi,Ri={point:ha,lineStart:x2,lineEnd:E2,polygonStart:function(){Ri.lineStart=lz,Ri.lineEnd=cz},polygonEnd:function(){Ri.point=ha,Ri.lineStart=x2,Ri.lineEnd=E2},result:function(){var e=eu?[o_/eu,a_/eu]:tl?[Xd/tl,jd/tl]:tu?[r_/tu,s_/tu]:[NaN,NaN];return r_=s_=tu=Xd=jd=tl=o_=a_=eu=0,e}};function ha(e,t){r_+=e,s_+=t,++tu}function x2(){Ri.point=oz}function oz(e,t){Ri.point=az,ha(Ji=e,Qi=t)}function az(e,t){var n=e-Ji,i=t-Qi,r=vn(n*n+i*i);Xd+=r*(Ji+e)/2,jd+=r*(Qi+t)/2,tl+=r,ha(Ji=e,Qi=t)}function E2(){Ri.point=ha}function lz(){Ri.point=uz}function cz(){mR(dR,gR)}function uz(e,t){Ri.point=mR,ha(dR=Ji=e,gR=Qi=t)}function mR(e,t){var n=e-Ji,i=t-Qi,r=vn(n*n+i*i);Xd+=r*(Ji+e)/2,jd+=r*(Qi+t)/2,tl+=r,r=Qi*e-Ji*t,o_+=r*(Ji+e),a_+=r*(Qi+t),eu+=r*3,ha(Ji=e,Qi=t)}const T2=Ri;function pR(e){this._context=e}pR.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,qn);break}}},result:Yn};var l_=new lr,up,yR,_R,nu,iu,qd={point:Yn,lineStart:function(){qd.point=fz},lineEnd:function(){up&&vR(yR,_R),qd.point=Yn},polygonStart:function(){up=!0},polygonEnd:function(){up=null},result:function(){var e=+l_;return l_=new lr,e}};function fz(e,t){qd.point=vR,yR=nu=e,_R=iu=t}function vR(e,t){nu-=e,iu-=t,l_.add(vn(nu*nu+iu*iu)),nu=e,iu=t}const C2=qd;let S2,Zd,M2,R2;class A2{constructor(t){this._append=t==null?wR:hz(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==M2||this._append!==Zd){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,M2=i,Zd=this._append,R2=this._,this._=r}this._+=R2;break}}}result(){const t=this._;return this._="",t.length?t:null}}function wR(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function hz(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return wR;if(t!==S2){const n=10**t;S2=t,Zd=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return Zd}function lo(e,t){let n=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),Ps(a,r(s))),s.result()}return o.area=function(a){return Ps(a,r(b2)),b2.result()},o.measure=function(a){return Ps(a,r(C2)),C2.result()},o.bounds=function(a){return Ps(a,r(Vd)),Vd.result()},o.centroid=function(a){return Ps(a,r(T2)),T2.result()},o.projection=function(a){return arguments.length?(r=a==null?(e=null,t_):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new A2(n)):new pR(t=a),typeof i!="function"&&s.pointRadius(i),o):t},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new A2(n)),o},o.projection(e).digits(n).context(t)}function Kd(e){return{stream:Sm(e)}}function Sm(e){return function(t){var n=new c_;for(var i in e)n[i]=e[i];return n.stream=t,n}}function c_(){}c_.prototype={constructor:c_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tv(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Ps(n,e.stream(Vd)),t(Vd.result()),i!=null&&e.clipExtent(i),e}function ev(e,t,n){return tv(e,function(i){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(s-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function bR(e,t,n){return ev(e,[[0,0],t],n)}function xR(e,t,n){return tv(e,function(i){var r=+t,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];e.scale(150*s).translate([o,a])},n)}function ER(e,t,n){return tv(e,function(i){var r=+t,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var I2=16,dz=vt(30*Yt);function L2(e,t){return+t?mz(e,t):gz(e)}function gz(e){return Sm({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function mz(e,t){function n(i,r,s,o,a,l,c,u,f,h,d,g,m,_){var p=c-i,y=u-r,w=p*p+y*y;if(w>4*t&&m--){var v=o+h,x=a+d,b=l+g,E=vn(v*v+x*x+b*b),T=Pn(b/=E),M=Zt(Zt(b)-1)<yt||Zt(s-f)<yt?(s+f)/2:Di(x,v),C=e(M,T),R=C[0],A=C[1],k=R-i,O=A-r,I=y*k-p*O;(I*I/w>t||Zt((p*k+y*O)/w-.5)>.3||o*h+a*d+l*g<dz)&&(n(i,r,s,o,a,l,R,A,M,v/=E,x/=E,b,m,_),_.point(R,A),n(R,A,M,v,x,b,c,u,f,h,d,g,m,_))}}return function(i){var r,s,o,a,l,c,u,f,h,d,g,m,_={point:p,lineStart:y,lineEnd:v,polygonStart:function(){i.polygonStart(),_.lineStart=x},polygonEnd:function(){i.polygonEnd(),_.lineStart=y}};function p(T,M){T=e(T,M),i.point(T[0],T[1])}function y(){f=NaN,_.point=w,i.lineStart()}function w(T,M){var C=Ll([T,M]),R=e(T,M);n(f,h,u,d,g,m,f=R[0],h=R[1],u=T,d=C[0],g=C[1],m=C[2],I2,i),i.point(f,h)}function v(){_.point=p,i.lineEnd()}function x(){y(),_.point=b,_.lineEnd=E}function b(T,M){w(r=T,M),s=f,o=h,a=d,l=g,c=m,_.point=w}function E(){n(f,h,u,d,g,m,s,o,r,a,l,c,I2,i),_.lineEnd=v,v()}return _}}var pz=Sm({point:function(e,t){this.stream.point(e*Yt,t*Yt)}});function yz(e){return Sm({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function _z(e,t,n,i,r){function s(o,a){return o*=i,a*=r,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*i,(n-a)/e*r]},s}function O2(e,t,n,i,r,s){if(!s)return _z(e,t,n,i,r);var o=vt(s),a=gt(s),l=o*e,c=a*e,u=o/e,f=a/e,h=(a*n-o*t)/e,d=(a*t+o*n)/e;function g(m,_){return m*=i,_*=r,[l*m-c*_+t,n-c*m-l*_]}return g.invert=function(m,_){return[i*(u*m-f*_+h),r*(d-f*m-u*_)]},g}function co(e){return TR(function(){return e})()}function TR(e){var t,n=150,i=480,r=250,s=0,o=0,a=0,l=0,c=0,u,f=0,h=1,d=1,g=null,m=_2,_=null,p,y,w,v=t_,x=.5,b,E,T,M,C;function R(I){return T(I[0]*Yt,I[1]*Yt)}function A(I){return I=T.invert(I[0],I[1]),I&&[I[0]*qe,I[1]*qe]}R.stream=function(I){return M&&C===I?M:M=pz(yz(u)(m(b(v(C=I)))))},R.preclip=function(I){return arguments.length?(m=I,g=void 0,O()):m},R.postclip=function(I){return arguments.length?(v=I,_=p=y=w=null,O()):v},R.clipAngle=function(I){return arguments.length?(m=+I?K9(g=I*Yt):(g=null,_2),O()):g*qe},R.clipExtent=function(I){return arguments.length?(v=I==null?(_=p=y=w=null,t_):cR(_=+I[0][0],p=+I[0][1],y=+I[1][0],w=+I[1][1]),O()):_==null?null:[[_,p],[y,w]]},R.scale=function(I){return arguments.length?(n=+I,k()):n},R.translate=function(I){return arguments.length?(i=+I[0],r=+I[1],k()):[i,r]},R.center=function(I){return arguments.length?(s=I[0]%360*Yt,o=I[1]%360*Yt,k()):[s*qe,o*qe]},R.rotate=function(I){return arguments.length?(a=I[0]%360*Yt,l=I[1]%360*Yt,c=I.length>2?I[2]%360*Yt:0,k()):[a*qe,l*qe,c*qe]},R.angle=function(I){return arguments.length?(f=I%360*Yt,k()):f*qe},R.reflectX=function(I){return arguments.length?(h=I?-1:1,k()):h<0},R.reflectY=function(I){return arguments.length?(d=I?-1:1,k()):d<0},R.precision=function(I){return arguments.length?(b=L2(E,x=I*I),O()):vn(x)},R.fitExtent=function(I,F){return ev(R,I,F)},R.fitSize=function(I,F){return bR(R,I,F)},R.fitWidth=function(I,F){return xR(R,I,F)},R.fitHeight=function(I,F){return ER(R,I,F)};function k(){var I=O2(n,0,0,h,d,f).apply(null,t(s,o)),F=O2(n,i-I[0],r-I[1],h,d,f);return u=sR(a,l,c),E=Jy(t,F),T=Jy(u,E),b=L2(E,x),O()}function O(){return M=C=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&A,k()}}function nv(e){var t=0,n=kt/3,i=TR(e),r=i(t,n);return r.parallels=function(s){return arguments.length?i(t=s[0]*Yt,n=s[1]*Yt):[t*qe,n*qe]},r}function vz(e){var t=vt(e);function n(i,r){return[i*t,gt(r)/t]}return n.invert=function(i,r){return[i/t,Pn(r*t)]},n}function wz(e,t){var n=gt(e),i=(n+gt(t))/2;if(Zt(i)<yt)return vz(e);var r=1+n*(2*i-n),s=vn(r)/i;function o(a,l){var c=vn(r-2*i*gt(l))/i;return[c*gt(a*=i),s-c*vt(a)]}return o.invert=function(a,l){var c=s-l,u=Di(a,Zt(c))*li(c);return c*i<0&&(u-=kt*li(a)*li(c)),[u/i,Pn((r-(a*a+c*c)*i*i)/(2*i))]},o}function Jd(){return nv(wz).scale(155.424).center([0,33.6442])}function CR(){return Jd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function bz(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function xz(){var e,t,n=CR(),i,r=Jd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=Jd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(h,d){l=[h,d]}};function u(h){var d=h[0],g=h[1];return l=null,i.point(d,g),l||(s.point(d,g),l)||(a.point(d,g),l)}u.invert=function(h){var d=n.scale(),g=n.translate(),m=(h[0]-g[0])/d,_=(h[1]-g[1])/d;return(_>=.12&&_<.234&&m>=-.425&&m<-.214?r:_>=.166&&_<.234&&m>=-.214&&m<-.115?o:n).invert(h)},u.stream=function(h){return e&&t===h?e:e=bz([n.stream(t=h),r.stream(h),o.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),o.precision(h),f()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),o.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),g=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[g-.455*d,m-.238*d],[g+.455*d,m+.238*d]]).stream(c),s=r.translate([g-.307*d,m+.201*d]).clipExtent([[g-.425*d+yt,m+.12*d+yt],[g-.214*d-yt,m+.234*d-yt]]).stream(c),a=o.translate([g-.205*d,m+.212*d]).clipExtent([[g-.214*d+yt,m+.166*d+yt],[g-.115*d-yt,m+.234*d-yt]]).stream(c),f()},u.fitExtent=function(h,d){return ev(u,h,d)},u.fitSize=function(h,d){return bR(u,h,d)},u.fitWidth=function(h,d){return xR(u,h,d)},u.fitHeight=function(h,d){return ER(u,h,d)};function f(){return e=t=null,u}return u.scale(1070)}function SR(e){return function(t,n){var i=vt(t),r=vt(n),s=e(i*r);return s===1/0?[2,0]:[s*r*gt(t),s*gt(n)]}}function mf(e){return function(t,n){var i=vn(t*t+n*n),r=e(i),s=gt(r),o=vt(r);return[Di(t*s,i*o),Pn(i&&n*s/i)]}}var MR=SR(function(e){return vn(2/(1+e))});MR.invert=mf(function(e){return 2*Pn(e/2)});function Ez(){return co(MR).scale(124.75).clipAngle(180-.001)}var RR=SR(function(e){return(e=eR(e))&&e/gt(e)});RR.invert=mf(function(e){return e});function Tz(){return co(RR).scale(79.4188).clipAngle(180-.001)}function Mm(e,t){return[e,Fd(J1((Ce+t)/2))]}Mm.invert=function(e,t){return[e,2*ac(tR(t))-Ce]};function Cz(){return AR(Mm).scale(961/qn)}function AR(e){var t=co(e),n=t.center,i=t.scale,r=t.translate,s=t.clipExtent,o=null,a,l,c;t.scale=function(f){return arguments.length?(i(f),u()):i()},t.translate=function(f){return arguments.length?(r(f),u()):r()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=l=c=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var f=kt*i(),h=t(H9(t.rotate()).invert([0,0]));return s(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===Mm?[[Math.max(h[0]-f,o),a],[Math.min(h[0]+f,l),c]]:[[o,Math.max(h[1]-f,a)],[l,Math.min(h[1]+f,c)]])}return u()}function Eh(e){return J1((Ce+e)/2)}function Sz(e,t){var n=vt(e),i=e===t?gt(e):Fd(n/vt(t))/Fd(Eh(t)/Eh(e)),r=n*op(Eh(e),i)/i;if(!i)return Mm;function s(o,a){r>0?a<-Ce+yt&&(a=-Ce+yt):a>Ce-yt&&(a=Ce-yt);var l=r/op(Eh(a),i);return[l*gt(i*o),r-l*vt(i*o)]}return s.invert=function(o,a){var l=r-a,c=li(i)*vn(o*o+l*l),u=Di(o,Zt(l))*li(l);return l*i<0&&(u-=kt*li(o)*li(l)),[u/i,2*ac(op(r/c,1/i))-Ce]},s}function Mz(){return nv(Sz).scale(109.5).parallels([30,30])}function Qd(e,t){return[e,t]}Qd.invert=Qd;function Rz(){return co(Qd).scale(152.63)}function Az(e,t){var n=vt(e),i=e===t?gt(e):(n-vt(t))/(t-e),r=n/i+e;if(Zt(i)<yt)return Qd;function s(o,a){var l=r-a,c=i*o;return[l*gt(c),r-l*vt(c)]}return s.invert=function(o,a){var l=r-a,c=Di(o,Zt(l))*li(l);return l*i<0&&(c-=kt*li(o)*li(l)),[c/i,r-li(i)*vn(o*o+l*l)]},s}function Iz(){return nv(Az).scale(131.154).center([0,13.9389])}var du=1.340264,gu=-.081106,mu=893e-6,pu=.003796,tg=vn(3)/2,Lz=12;function IR(e,t){var n=Pn(tg*gt(t)),i=n*n,r=i*i*i;return[e*vt(n)/(tg*(du+3*gu*i+r*(7*mu+9*pu*i))),n*(du+gu*i+r*(mu+pu*i))]}IR.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,s=0,o,a,l;s<Lz&&(a=n*(du+gu*i+r*(mu+pu*i))-t,l=du+3*gu*i+r*(7*mu+9*pu*i),n-=o=a/l,i=n*n,r=i*i*i,!(Zt(o)<kd));++s);return[tg*e*(du+3*gu*i+r*(7*mu+9*pu*i))/vt(n),Pn(gt(n)/tg)]};function Oz(){return co(IR).scale(177.158)}function LR(e,t){var n=vt(t),i=vt(e)*n;return[n*gt(e)/i,gt(t)/i]}LR.invert=mf(ac);function kz(){return co(LR).scale(144.049).clipAngle(60)}function OR(e,t){return[vt(t)*gt(e),gt(t)]}OR.invert=mf(Pn);function Fz(){return co(OR).scale(249.5).clipAngle(90+yt)}function kR(e,t){var n=vt(t),i=1+vt(e)*n;return[n*gt(e)/i,gt(t)/i]}kR.invert=mf(function(e){return 2*ac(e)});function Pz(){return co(kR).scale(250).clipAngle(142)}function FR(e,t){return[Fd(J1((Ce+t)/2)),-e]}FR.invert=function(e,t){return[-t,2*ac(tR(e))-Ce]};function Nz(){var e=AR(FR),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function Dz(e,t){return e.parent===t.parent?1:2}function $z(e){return e.reduce(zz,0)/e.length}function zz(e,t){return e+t.x}function Wz(e){return 1+e.reduce(Gz,0)}function Gz(e,t){return Math.max(e,t.y)}function Bz(e){for(var t;t=e.children;)e=t[0];return e}function Hz(e){for(var t;t=e.children;)e=t[t.length-1];return e}function PR(){var e=Dz,t=1,n=1,i=!1;function r(s){var o,a=0;s.eachAfter(function(h){var d=h.children;d?(h.x=$z(d),h.y=Wz(d)):(h.x=o?a+=e(h,o):0,h.y=0,o=h)});var l=Bz(s),c=Hz(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(i?function(h){h.x=(h.x-s.x)*t,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*t,h.y=(1-(s.y?h.y/s.y:1))*n})}return r.separation=function(s){return arguments.length?(e=s,r):e},r.size=function(s){return arguments.length?(i=!1,t=+s[0],n=+s[1],r):i?null:[t,n]},r.nodeSize=function(s){return arguments.length?(i=!0,t=+s[0],n=+s[1],r):i?[t,n]:null},r}function Yz(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Uz(){return this.eachAfter(Yz)}function Vz(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Xz(e,t){for(var n=this,i=[n],r,s,o=-1;n=i.pop();)if(e.call(t,n,++o,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function jz(e,t){for(var n=this,i=[n],r=[],s,o,a,l=-1;n=i.pop();)if(r.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function qz(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Zz(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Kz(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Jz(e){for(var t=this,n=Qz(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Qz(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function tW(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function eW(){return Array.from(this)}function nW(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function iW(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*rW(){var e=this,t,n=[e],i,r,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function NR(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=aW)):t===void 0&&(t=oW);for(var n=new kl(e),i,r=[n],s,o,a,l;i=r.pop();)if((o=t(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,a=l-1;a>=0;--a)r.push(s=o[a]=new kl(o[a])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(DR)}function sW(){return NR(this).eachBefore(lW)}function oW(e){return e.children}function aW(e){return Array.isArray(e)?e[1]:null}function lW(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function DR(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function kl(e){this.data=e,this.depth=this.height=0,this.parent=null}kl.prototype=NR.prototype={constructor:kl,count:Uz,each:Vz,eachAfter:jz,eachBefore:Xz,find:qz,sum:Zz,sort:Kz,path:Jz,ancestors:tW,descendants:eW,leaves:nW,links:iW,copy:sW,[Symbol.iterator]:rW};function fp(e){return e==null?null:cW(e)}function cW(e){if(typeof e!="function")throw new Error;return e}var uW={depth:-1},k2={},hp={};function fW(e){return e.id}function hW(e){return e.parentId}function $R(){var e=fW,t=hW,n;function i(r){var s=Array.from(r),o=e,a=t,l,c,u,f,h,d,g,m,_=new Map;if(n!=null){const p=s.map((v,x)=>dW(n(v,x,r))),y=p.map(F2),w=new Set(p).add("");for(const v of y)w.has(v)||(w.add(v),p.push(v),y.push(F2(v)),s.push(hp));o=(v,x)=>p[x],a=(v,x)=>y[x]}for(u=0,l=s.length;u<l;++u)c=s[u],d=s[u]=new kl(c),(g=o(c,u,r))!=null&&(g+="")&&(m=d.id=g,_.set(m,_.has(m)?k2:d)),(g=a(c,u,r))!=null&&(g+="")&&(d.parent=g);for(u=0;u<l;++u)if(d=s[u],g=d.parent){if(h=_.get(g),!h)throw new Error("missing: "+g);if(h===k2)throw new Error("ambiguous: "+g);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(n!=null){for(;f.data===hp&&f.children.length===1;)f=f.children[0],--l;for(let p=s.length-1;p>=0&&(d=s[p],d.data===hp);--p)d.data=null}if(f.parent=uW,f.eachBefore(function(p){p.depth=p.parent.depth+1,--l}).eachBefore(DR),f.parent=null,l>0)throw new Error("cycle");return f}return i.id=function(r){return arguments.length?(e=fp(r),i):e},i.parentId=function(r){return arguments.length?(t=fp(r),i):t},i.path=function(r){return arguments.length?(n=fp(r),i):n},i}function dW(e){e=`${e}`;let t=e.length;return u_(e,t-1)&&!u_(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function F2(e){let t=e.length;if(t<2)return"";for(;--t>1&&!u_(e,t););return e.slice(0,t)}function u_(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function gW(e,t){return e.parent===t.parent?1:2}function dp(e){var t=e.children;return t?t[0]:e.t}function gp(e){var t=e.children;return t?t[t.length-1]:e.t}function mW(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function pW(e){for(var t=0,n=0,i=e.children,r=i.length,s;--r>=0;)s=i[r],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function yW(e,t,n){return e.a.parent===t.parent?e.a:n}function fd(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}fd.prototype=Object.create(kl.prototype);function _W(e){for(var t=new fd(e,0),n,i=[t],r,s,o,a;n=i.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=n.children[o]=new fd(s[o],o)),r.parent=n;return(t.parent=new fd(null,0)).children=[t],t}function eg(){var e=gW,t=1,n=1,i=null;function r(c){var u=_W(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),i)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(y){y.x<f.x&&(f=y),y.x>h.x&&(h=y),y.depth>d.depth&&(d=y)});var g=f===h?1:e(f,h)/2,m=g-f.x,_=t/(h.x+g+m),p=n/(d.depth||1);c.eachBefore(function(y){y.x=(y.x+m)*_,y.y=y.depth*p})}return c}function s(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){pW(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+e(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+e(c._,h._));c.parent.A=a(c,h,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var h=c,d=c,g=u,m=h.parent.children[0],_=h.m,p=d.m,y=g.m,w=m.m,v;g=gp(g),h=dp(h),g&&h;)m=dp(m),d=gp(d),d.a=c,v=g.z+y-h.z-_+e(g._,h._),v>0&&(mW(yW(g,c,f),c,v),_+=v,p+=v),y+=g.m,_+=h.m,w+=m.m,p+=d.m;g&&!gp(d)&&(d.t=g,d.m+=y-p),h&&!dp(m)&&(m.t=h,m.m+=_-w,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return r.separation=function(c){return arguments.length?(e=c,r):e},r.size=function(c){return arguments.length?(i=!1,t=+c[0],n=+c[1],r):i?null:[t,n]},r.nodeSize=function(c){return arguments.length?(i=!0,t=+c[0],n=+c[1],r):i?[t,n]:null},r}const vW=1664525,wW=1013904223,P2=1/4294967296;function iv(e=Math.random()){let t=(0<=e&&e<1?e/P2:Math.abs(e))|0;return()=>(t=vW*t+wW|0,P2*(t>>>0))}function yr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function pf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const f_=Symbol("implicit");function rv(){var e=new oa,t=[],n=[],i=f_;function r(s){let o=e.get(s);if(o===void 0){if(i!==f_)return i;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new oa;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return rv(t,n).unknown(i)},yr.apply(r,arguments),r}function Rm(){var e=rv().unknown(void 0),t=e.domain,n=e.range,i=0,r=1,s,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var h=t().length,d=r<i,g=d?r:i,m=d?i:r;s=(m-g)/Math.max(1,h-l+c*2),a&&(s=Math.floor(s)),g+=(m-g-s*(h-l))*u,o=s*(1-l),a&&(g=Math.round(g),o=Math.round(o));var _=ai(h).map(function(p){return g+s*p});return n(d?_.reverse():_)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,f()):[i,r]},e.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(a=!!h,f()):a},e.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return Rm(t(),[i,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},yr.apply(f(),arguments)}function zR(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return zR(t())},e}function bW(){return zR(Rm.apply(null,arguments).paddingInner(1))}function xW(e){return function(){return e}}function h_(e){return+e}var N2=[0,1];function Ln(e){return e}function d_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:xW(isNaN(t)?NaN:.5)}function EW(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function TW(e,t,n){var i=e[0],r=e[1],s=t[0],o=t[1];return r<i?(i=d_(r,i),s=n(o,s)):(i=d_(i,r),s=n(s,o)),function(a){return s(i(a))}}function CW(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=d_(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=mm(e,a,1,i)-1;return s[l](r[l](a))}}function yf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Am(){var e=N2,t=N2,n=oc,i,r,s,o=Ln,a,l,c;function u(){var h=Math.min(e.length,t.length);return o!==Ln&&(o=EW(e[0],e[h-1])),a=h>2?CW:TW,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(e.map(i),t,n)))(i(o(h)))}return f.invert=function(h){return o(r((c||(c=a(t,e.map(i),nn)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,h_),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=xm,u()},f.clamp=function(h){return arguments.length?(o=h?!0:Ln,u()):o!==Ln},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return i=h,r=d,u()}}function WR(){return Am()(Ln,Ln)}function SW(e,t,n,i){var r=Iy(e,t,n),s;switch(i=Du(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=P9(r,o))&&(i.precision=s),QM(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=N9(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=F9(r))&&(i.precision=s-(i.type==="%")*2);break}}return ao(i)}function lc(e){var t=e.domain;return e.ticks=function(n){var i=t();return qs(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return SW(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,o=i[r],a=i[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);u-- >0;){if(c=Ou(o,a,n),c===l)return i[r]=o,i[s]=a,t(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function nr(){var e=WR();return e.copy=function(){return yf(e,nr())},yr.apply(e,arguments),lc(e)}function GR(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,h_),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return GR(e).unknown(t)},e=arguments.length?Array.from(e,h_):[0,1],lc(n)}function BR(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],s=e[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),e[n]=t.floor(r),e[i]=t.ceil(s),e}function D2(e){return Math.log(e)}function $2(e){return Math.exp(e)}function MW(e){return-Math.log(-e)}function RW(e){return-Math.exp(-e)}function AW(e){return isFinite(e)?+("1e"+e):e<0?0:e}function IW(e){return e===10?AW:e===Math.E?Math.exp:t=>Math.pow(e,t)}function LW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function z2(e){return(t,n)=>-e(-t,n)}function HR(e){const t=e(D2,$2),n=t.domain;let i=10,r,s;function o(){return r=LW(i),s=IW(i),n()[0]<0?(r=z2(r),s=z2(s),e(MW,RW)):e(D2,$2),t}return t.base=function(a){return arguments.length?(i=+a,o()):i},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=r(c),d=r(u),g,m;const _=a==null?10:+a;let p=[];if(!(i%1)&&d-h<_){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(g=1;g<i;++g)if(m=h<0?g/s(-h):g*s(h),!(m<c)){if(m>u)break;p.push(m)}}else for(;h<=d;++h)for(g=i-1;g>=1;--g)if(m=h>0?g/s(-h):g*s(h),!(m<c)){if(m>u)break;p.push(m)}p.length*2<_&&(p=qs(c,u,_))}else p=qs(h,d,Math.min(d-h,_)).map(s);return f?p.reverse():p},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Du(l)).precision==null&&(l.trim=!0),l=ao(l)),a===1/0)return l;const c=Math.max(1,i*a/t.ticks().length);return u=>{let f=u/s(Math.round(r(u)));return f*i<i-.5&&(f*=i),f<=c?l(u):""}},t.nice=()=>n(BR(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),t}function YR(){const e=HR(Am()).domain([1,10]);return e.copy=()=>yf(e,YR()).base(e.base()),yr.apply(e,arguments),e}function W2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function G2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function UR(e){var t=1,n=e(W2(t),G2(t));return n.constant=function(i){return arguments.length?e(W2(t=+i),G2(t)):t},lc(n)}function VR(){var e=UR(Am());return e.copy=function(){return yf(e,VR()).constant(e.constant())},yr.apply(e,arguments)}function B2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function OW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function kW(e){return e<0?-e*e:e*e}function XR(e){var t=e(Ln,Ln),n=1;function i(){return n===1?e(Ln,Ln):n===.5?e(OW,kW):e(B2(n),B2(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},lc(t)}function jR(){var e=XR(Am());return e.copy=function(){return yf(e,jR()).exponent(e.exponent())},yr.apply(e,arguments),e}function qR(){var e=[],t=[],n=[],i;function r(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=rD(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?i:t[mm(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ve),r()},s.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return qR().domain(e).range(t).unknown(i)},yr.apply(s,arguments)}function ZR(){var e=[.5],t=[0,1],n,i=1;function r(s){return s!=null&&s<=s?t[mm(e,s,0,i)]:n}return r.domain=function(s){return arguments.length?(e=Array.from(s),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(s){return arguments.length?(t=Array.from(s),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return ZR().domain(e).range(t).unknown(n)},yr.apply(r,arguments)}const mp=new Date,pp=new Date;function De(e,t,n,i){function r(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(e(s=new Date(+s)),s),r.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),e(s);while(c<s&&s<o);return l},r.filter=s=>De(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(r.count=(s,o)=>(mp.setTime(+s),pp.setTime(+o),e(mp),e(pp),Math.floor(n(mp,pp))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const ng=De(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ng.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?De(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ng);ng.range;const Br=1e3,ci=Br*60,Hr=ci*60,ns=Hr*24,sv=ns*7,H2=ns*30,yp=ns*365,ir=De(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Br)},(e,t)=>(t-e)/Br,e=>e.getUTCSeconds());ir.range;const Im=De(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Br)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getMinutes());Im.range;const _f=De(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getUTCMinutes());_f.range;const Lm=De(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Br-e.getMinutes()*ci)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getHours());Lm.range;const vf=De(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getUTCHours());vf.range;const va=De(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ci)/ns,e=>e.getDate()-1);va.range;const Om=De(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ns,e=>e.getUTCDate()-1);Om.range;const km=De(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ns,e=>Math.floor(e/ns));km.range;function wa(e){return De(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ci)/sv)}const Fl=wa(0),zu=wa(1),KR=wa(2),JR=wa(3),da=wa(4),QR=wa(5),tA=wa(6);Fl.range;zu.range;KR.range;JR.range;da.range;QR.range;tA.range;function ba(e){return De(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/sv)}const Pl=ba(0),Wu=ba(1),eA=ba(2),nA=ba(3),ga=ba(4),iA=ba(5),rA=ba(6);Pl.range;Wu.range;eA.range;nA.range;ga.range;iA.range;rA.range;const wf=De(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());wf.range;const bf=De(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());bf.range;const $i=De(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$i.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:De(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});$i.range;const zi=De(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());zi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:De(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});zi.range;function sA(e,t,n,i,r,s){const o=[[ir,1,Br],[ir,5,5*Br],[ir,15,15*Br],[ir,30,30*Br],[s,1,ci],[s,5,5*ci],[s,15,15*ci],[s,30,30*ci],[r,1,Hr],[r,3,3*Hr],[r,6,6*Hr],[r,12,12*Hr],[i,1,ns],[i,2,2*ns],[n,1,sv],[t,1,H2],[t,3,3*H2],[e,1,yp]];function a(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),g=d?d.range(c,+u+1):[];return h?g.reverse():g}function l(c,u,f){const h=Math.abs(u-c)/f,d=gm(([,,_])=>_).right(o,h);if(d===o.length)return e.every(Iy(c/yp,u/yp,f));if(d===0)return ng.every(Math.max(Iy(c,u,f),1));const[g,m]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return g.every(m)}return[a,l]}const[FW,oA]=sA(zi,bf,Pl,km,vf,_f),[PW,NW]=sA($i,wf,Fl,va,Lm,Im);function _p(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function vp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function DW(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Pc(r),u=Nc(r),f=Pc(s),h=Nc(s),d=Pc(o),g=Nc(o),m=Pc(a),_=Nc(a),p=Pc(l),y=Nc(l),w={a:P,A:G,b:j,B:U,c:null,d:q2,e:q2,f:oG,g:pG,G:_G,H:iG,I:rG,j:sG,L:aA,m:aG,M:lG,p:q,q:W,Q:J2,s:Q2,S:cG,u:uG,U:fG,V:hG,w:dG,W:gG,x:null,X:null,y:mG,Y:yG,Z:vG,"%":K2},v={a:Q,A:nt,b:st,B:ot,c:null,d:Z2,e:Z2,f:EG,g:kG,G:PG,H:wG,I:bG,j:xG,L:cA,m:TG,M:CG,p:z,q:Y,Q:J2,s:Q2,S:SG,u:MG,U:RG,V:AG,w:IG,W:LG,x:null,X:null,y:OG,Y:FG,Z:NG,"%":K2},x={a:C,A:R,b:A,B:k,c:O,d:X2,e:X2,f:QW,g:V2,G:U2,H:j2,I:j2,j:qW,L:JW,m:jW,M:ZW,p:M,q:XW,Q:eG,s:nG,S:KW,u:BW,U:HW,V:YW,w:GW,W:UW,x:I,X:F,y:V2,Y:U2,Z:VW,"%":tG};w.x=b(n,w),w.X=b(i,w),w.c=b(t,w),v.x=b(n,v),v.X=b(i,v),v.c=b(t,v);function b($,V){return function(K){var S=[],L=-1,D=0,B=$.length,H,X,rt;for(K instanceof Date||(K=new Date(+K));++L<B;)$.charCodeAt(L)===37&&(S.push($.slice(D,L)),(X=Y2[H=$.charAt(++L)])!=null?H=$.charAt(++L):X=H==="e"?" ":"0",(rt=V[H])&&(H=rt(K,X)),S.push(H),D=L+1);return S.push($.slice(D,L)),S.join("")}}function E($,V){return function(K){var S=Fc(1900,void 0,1),L=T(S,$,K+="",0),D,B;if(L!=K.length)return null;if("Q"in S)return new Date(S.Q);if("s"in S)return new Date(S.s*1e3+("L"in S?S.L:0));if(V&&!("Z"in S)&&(S.Z=0),"p"in S&&(S.H=S.H%12+S.p*12),S.m===void 0&&(S.m="q"in S?S.q:0),"V"in S){if(S.V<1||S.V>53)return null;"w"in S||(S.w=1),"Z"in S?(D=vp(Fc(S.y,0,1)),B=D.getUTCDay(),D=B>4||B===0?Wu.ceil(D):Wu(D),D=Om.offset(D,(S.V-1)*7),S.y=D.getUTCFullYear(),S.m=D.getUTCMonth(),S.d=D.getUTCDate()+(S.w+6)%7):(D=_p(Fc(S.y,0,1)),B=D.getDay(),D=B>4||B===0?zu.ceil(D):zu(D),D=va.offset(D,(S.V-1)*7),S.y=D.getFullYear(),S.m=D.getMonth(),S.d=D.getDate()+(S.w+6)%7)}else("W"in S||"U"in S)&&("w"in S||(S.w="u"in S?S.u%7:"W"in S?1:0),B="Z"in S?vp(Fc(S.y,0,1)).getUTCDay():_p(Fc(S.y,0,1)).getDay(),S.m=0,S.d="W"in S?(S.w+6)%7+S.W*7-(B+5)%7:S.w+S.U*7-(B+6)%7);return"Z"in S?(S.H+=S.Z/100|0,S.M+=S.Z%100,vp(S)):_p(S)}}function T($,V,K,S){for(var L=0,D=V.length,B=K.length,H,X;L<D;){if(S>=B)return-1;if(H=V.charCodeAt(L++),H===37){if(H=V.charAt(L++),X=x[H in Y2?V.charAt(L++):H],!X||(S=X($,K,S))<0)return-1}else if(H!=K.charCodeAt(S++))return-1}return S}function M($,V,K){var S=c.exec(V.slice(K));return S?($.p=u.get(S[0].toLowerCase()),K+S[0].length):-1}function C($,V,K){var S=d.exec(V.slice(K));return S?($.w=g.get(S[0].toLowerCase()),K+S[0].length):-1}function R($,V,K){var S=f.exec(V.slice(K));return S?($.w=h.get(S[0].toLowerCase()),K+S[0].length):-1}function A($,V,K){var S=p.exec(V.slice(K));return S?($.m=y.get(S[0].toLowerCase()),K+S[0].length):-1}function k($,V,K){var S=m.exec(V.slice(K));return S?($.m=_.get(S[0].toLowerCase()),K+S[0].length):-1}function O($,V,K){return T($,t,V,K)}function I($,V,K){return T($,n,V,K)}function F($,V,K){return T($,i,V,K)}function P($){return o[$.getDay()]}function G($){return s[$.getDay()]}function j($){return l[$.getMonth()]}function U($){return a[$.getMonth()]}function q($){return r[+($.getHours()>=12)]}function W($){return 1+~~($.getMonth()/3)}function Q($){return o[$.getUTCDay()]}function nt($){return s[$.getUTCDay()]}function st($){return l[$.getUTCMonth()]}function ot($){return a[$.getUTCMonth()]}function z($){return r[+($.getUTCHours()>=12)]}function Y($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var V=b($+="",w);return V.toString=function(){return $},V},parse:function($){var V=E($+="",!1);return V.toString=function(){return $},V},utcFormat:function($){var V=b($+="",v);return V.toString=function(){return $},V},utcParse:function($){var V=E($+="",!0);return V.toString=function(){return $},V}}}var Y2={"-":"",_:" ",0:"0"},je=/^\s*\d+/,$W=/^%/,zW=/[\\^$*+?|[\]().{}]/g;function Vt(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function WW(e){return e.replace(zW,"\\$&")}function Pc(e){return new RegExp("^(?:"+e.map(WW).join("|")+")","i")}function Nc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function GW(e,t,n){var i=je.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function BW(e,t,n){var i=je.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function HW(e,t,n){var i=je.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function YW(e,t,n){var i=je.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function UW(e,t,n){var i=je.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function U2(e,t,n){var i=je.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function V2(e,t,n){var i=je.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function VW(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function XW(e,t,n){var i=je.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function jW(e,t,n){var i=je.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function X2(e,t,n){var i=je.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function qW(e,t,n){var i=je.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function j2(e,t,n){var i=je.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function ZW(e,t,n){var i=je.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function KW(e,t,n){var i=je.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function JW(e,t,n){var i=je.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function QW(e,t,n){var i=je.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function tG(e,t,n){var i=$W.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function eG(e,t,n){var i=je.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function nG(e,t,n){var i=je.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function q2(e,t){return Vt(e.getDate(),t,2)}function iG(e,t){return Vt(e.getHours(),t,2)}function rG(e,t){return Vt(e.getHours()%12||12,t,2)}function sG(e,t){return Vt(1+va.count($i(e),e),t,3)}function aA(e,t){return Vt(e.getMilliseconds(),t,3)}function oG(e,t){return aA(e,t)+"000"}function aG(e,t){return Vt(e.getMonth()+1,t,2)}function lG(e,t){return Vt(e.getMinutes(),t,2)}function cG(e,t){return Vt(e.getSeconds(),t,2)}function uG(e){var t=e.getDay();return t===0?7:t}function fG(e,t){return Vt(Fl.count($i(e)-1,e),t,2)}function lA(e){var t=e.getDay();return t>=4||t===0?da(e):da.ceil(e)}function hG(e,t){return e=lA(e),Vt(da.count($i(e),e)+($i(e).getDay()===4),t,2)}function dG(e){return e.getDay()}function gG(e,t){return Vt(zu.count($i(e)-1,e),t,2)}function mG(e,t){return Vt(e.getFullYear()%100,t,2)}function pG(e,t){return e=lA(e),Vt(e.getFullYear()%100,t,2)}function yG(e,t){return Vt(e.getFullYear()%1e4,t,4)}function _G(e,t){var n=e.getDay();return e=n>=4||n===0?da(e):da.ceil(e),Vt(e.getFullYear()%1e4,t,4)}function vG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Vt(t/60|0,"0",2)+Vt(t%60,"0",2)}function Z2(e,t){return Vt(e.getUTCDate(),t,2)}function wG(e,t){return Vt(e.getUTCHours(),t,2)}function bG(e,t){return Vt(e.getUTCHours()%12||12,t,2)}function xG(e,t){return Vt(1+Om.count(zi(e),e),t,3)}function cA(e,t){return Vt(e.getUTCMilliseconds(),t,3)}function EG(e,t){return cA(e,t)+"000"}function TG(e,t){return Vt(e.getUTCMonth()+1,t,2)}function CG(e,t){return Vt(e.getUTCMinutes(),t,2)}function SG(e,t){return Vt(e.getUTCSeconds(),t,2)}function MG(e){var t=e.getUTCDay();return t===0?7:t}function RG(e,t){return Vt(Pl.count(zi(e)-1,e),t,2)}function uA(e){var t=e.getUTCDay();return t>=4||t===0?ga(e):ga.ceil(e)}function AG(e,t){return e=uA(e),Vt(ga.count(zi(e),e)+(zi(e).getUTCDay()===4),t,2)}function IG(e){return e.getUTCDay()}function LG(e,t){return Vt(Wu.count(zi(e)-1,e),t,2)}function OG(e,t){return Vt(e.getUTCFullYear()%100,t,2)}function kG(e,t){return e=uA(e),Vt(e.getUTCFullYear()%100,t,2)}function FG(e,t){return Vt(e.getUTCFullYear()%1e4,t,4)}function PG(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ga(e):ga.ceil(e),Vt(e.getUTCFullYear()%1e4,t,4)}function NG(){return"+0000"}function K2(){return"%"}function J2(e){return+e}function Q2(e){return Math.floor(+e/1e3)}var Na,ov,xf;DG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function DG(e){return Na=DW(e),ov=Na.format,Na.parse,xf=Na.utcFormat,Na.utcParse,Na}function $G(e){return new Date(e)}function zG(e){return e instanceof Date?+e:+new Date(+e)}function av(e,t,n,i,r,s,o,a,l,c){var u=WR(),f=u.invert,h=u.domain,d=c(".%L"),g=c(":%S"),m=c("%I:%M"),_=c("%I %p"),p=c("%a %d"),y=c("%b %d"),w=c("%B"),v=c("%Y");function x(b){return(l(b)<b?d:a(b)<b?g:o(b)<b?m:s(b)<b?_:i(b)<b?r(b)<b?p:y:n(b)<b?w:v)(b)}return u.invert=function(b){return new Date(f(b))},u.domain=function(b){return arguments.length?h(Array.from(b,zG)):h().map($G)},u.ticks=function(b){var E=h();return e(E[0],E[E.length-1],b??10)},u.tickFormat=function(b,E){return E==null?x:c(E)},u.nice=function(b){var E=h();return(!b||typeof b.range!="function")&&(b=t(E[0],E[E.length-1],b??10)),b?h(BR(E,b)):u},u.copy=function(){return yf(u,av(e,t,n,i,r,s,o,a,l,c))},u}function WG(){return yr.apply(av(PW,NW,$i,wf,Fl,va,Lm,Im,ir,ov).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function GG(){return yr.apply(av(FW,oA,zi,bf,Pl,Om,vf,_f,ir,xf).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function BG(){var e=0,t=1,n,i,r,s,o=Ln,a=!1,l;function c(f){return f==null||isNaN(f=+f)?l:o(r===0?.5:(f=(s(f)-n)*r,a?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),i=s(t=+t),r=n===i?0:1/(i-n),c):[e,t]},c.clamp=function(f){return arguments.length?(a=!!f,c):a},c.interpolator=function(f){return arguments.length?(o=f,c):o};function u(f){return function(h){var d,g;return arguments.length?([d,g]=h,o=f(d,g),c):[o(0),o(1)]}}return c.range=u(oc),c.rangeRound=u(xm),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return s=f,n=f(e),i=f(t),r=n===i?0:1/(i-n),c}}function Ef(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fA(){var e=lc(BG()(Ln));return e.copy=function(){return Ef(e,fA())},pf.apply(e,arguments)}function Fm(){var e=0,t=.5,n=1,i=1,r,s,o,a,l,c=Ln,u,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-s)*(i*m<i*s?a:l),c(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t,n]=m,r=u(e=+e),s=u(t=+t),o=u(n=+n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d):[e,t,n]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(c=m,d):c};function g(m){return function(_){var p,y,w;return arguments.length?([p,y,w]=_,c=Em(m,[p,y,w]),d):[c(0),c(.5),c(1)]}}return d.range=g(oc),d.rangeRound=g(xm),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return u=m,r=m(e),s=m(t),o=m(n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d}}function hA(){var e=lc(Fm()(Ln));return e.copy=function(){return Ef(e,hA())},pf.apply(e,arguments)}function dA(){var e=HR(Fm()).domain([.1,1,10]);return e.copy=function(){return Ef(e,dA()).base(e.base())},pf.apply(e,arguments)}function gA(){var e=UR(Fm());return e.copy=function(){return Ef(e,gA()).constant(e.constant())},pf.apply(e,arguments)}function mA(){var e=XR(Fm());return e.copy=function(){return Ef(e,mA()).exponent(e.exponent())},pf.apply(e,arguments)}function It(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const HG=It("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),YG=It("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),UG=It("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),VG=It("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),XG=It("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),jG=It("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),qG=It("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ZG=It("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),KG=It("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),JG=It("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),oe=e=>DM(e[e.length-1]);var pA=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(It);const yA=oe(pA);var _A=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(It);const vA=oe(_A);var wA=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(It);const bA=oe(wA);var xA=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(It);const EA=oe(xA);var g_=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(It);const ig=oe(g_);var TA=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(It);const CA=oe(TA);var m_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(It);const rg=oe(m_);var SA=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(It);const MA=oe(SA);var RA=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(It);const AA=oe(RA);var IA=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(It);const LA=oe(IA);var OA=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(It);const kA=oe(OA);var FA=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(It);const PA=oe(FA);var NA=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(It);const DA=oe(NA);var $A=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(It);const zA=oe($A);var WA=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(It);const GA=oe(WA);var BA=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(It);const HA=oe(BA);var YA=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(It);const UA=oe(YA);var VA=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(It);const XA=oe(VA);var jA=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(It);const qA=oe(jA);var ZA=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(It);const KA=oe(ZA);var JA=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(It);const QA=oe(JA);var tI=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(It);const eI=oe(tI);var nI=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(It);const iI=oe(nI);var rI=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(It);const sI=oe(rI);var oI=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(It);const aI=oe(oI);var lI=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(It);const cI=oe(lI);var uI=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(It);const fI=oe(uI);function hI(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const dI=X1(mr(300,.5,0),mr(-240,.5,1));var gI=X1(mr(-100,.75,.35),mr(80,1.5,.8)),mI=X1(mr(260,.75,.35),mr(80,1.5,.8)),Th=mr();function pI(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Th.h=360*e-100,Th.s=1.5-1.5*t,Th.l=.8-.9*t,Th+""}var Ch=gr(),QG=Math.PI/3,tB=Math.PI*2/3;function yI(e){var t;return e=(.5-e)*Math.PI,Ch.r=255*(t=Math.sin(e))*t,Ch.g=255*(t=Math.sin(e+QG))*t,Ch.b=255*(t=Math.sin(e+tB))*t,Ch+""}function _I(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Pm(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const vI=Pm(It("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var wI=Pm(It("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),bI=Pm(It("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),xI=Pm(It("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Be(e){return function(){return e}}const EI=Math.cos,lv=Math.min,sg=Math.sin,$e=Math.sqrt,tE=1e-12,og=Math.PI,Nm=2*og;function TI(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new ZM(t)}function CI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function SI(e){this._context=e}SI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Tf(e){return new SI(e)}function MI(e){return e[0]}function RI(e){return e[1]}function cv(e,t){var n=Be(!0),i=null,r=Tf,s=null,o=TI(a);e=typeof e=="function"?e:e===void 0?MI:Be(e),t=typeof t=="function"?t:t===void 0?RI:Be(t);function a(l){var c,u=(l=CI(l)).length,f,h=!1,d;for(i==null&&(s=r(d=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,c,l),+t(f,c,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:Be(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:Be(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Be(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),a):i},a}function Nl(e,t,n){var i=null,r=Be(!0),s=null,o=Tf,a=null,l=TI(c);e=typeof e=="function"?e:e===void 0?MI:Be(+e),t=typeof t=="function"?t:Be(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?RI:Be(+n);function c(f){var h,d,g,m=(f=CI(f)).length,_,p=!1,y,w=new Array(m),v=new Array(m);for(s==null&&(a=o(y=l())),h=0;h<=m;++h){if(!(h<m&&r(_=f[h],h,f))===p)if(p=!p)d=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=h-1;g>=d;--g)a.point(w[g],v[g]);a.lineEnd(),a.areaEnd()}p&&(w[h]=+e(_,h,f),v[h]=+t(_,h,f),a.point(i?+i(_,h,f):w[h],n?+n(_,h,f):v[h]))}if(y)return a=null,y+""||null}function u(){return cv().defined(r).curve(o).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:Be(+f),i=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Be(+f),c):e},c.x1=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:Be(+f),c):i},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:Be(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Be(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Be(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(i).y(t)},c.defined=function(f){return arguments.length?(r=typeof f=="function"?f:Be(!!f),c):r},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class AI{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function eB(e){return new AI(e,!0)}function nB(e){return new AI(e,!1)}const iB=$e(3),II={draw(e,t){const n=$e(t+lv(t/28,.75))*.59436,i=n/2,r=i*iB;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-r,-i),e.lineTo(r,i),e.moveTo(-r,i),e.lineTo(r,-i)}},Gu={draw(e,t){const n=$e(t/og);e.moveTo(n,0),e.arc(0,0,n,0,Nm)}},LI={draw(e,t){const n=$e(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},OI=$e(1/3),rB=OI*2,kI={draw(e,t){const n=$e(t/rB),i=n*OI;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},FI={draw(e,t){const n=$e(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},PI={draw(e,t){const n=$e(t-lv(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},NI={draw(e,t){const n=$e(t),i=-n/2;e.rect(i,i,n,n)}},DI={draw(e,t){const n=$e(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},sB=.8908130915292852,$I=sg(og/10)/sg(7*og/10),oB=sg(Nm/10)*$I,aB=-EI(Nm/10)*$I,zI={draw(e,t){const n=$e(t*sB),i=oB*n,r=aB*n;e.moveTo(0,-n),e.lineTo(i,r);for(let s=1;s<5;++s){const o=Nm*s/5,a=EI(o),l=sg(o);e.lineTo(l*n,-a*n),e.lineTo(a*i-l*r,l*i+a*r)}e.closePath()}},wp=$e(3),WI={draw(e,t){const n=-$e(t/(wp*3));e.moveTo(0,n*2),e.lineTo(-wp*n,-n),e.lineTo(wp*n,-n),e.closePath()}},lB=$e(3),GI={draw(e,t){const n=$e(t)*.6824,i=n/2,r=n*lB/2;e.moveTo(0,-n),e.lineTo(r,i),e.lineTo(-r,i),e.closePath()}},ii=-.5,ri=$e(3)/2,p_=1/$e(12),cB=(p_/2+1)*3,BI={draw(e,t){const n=$e(t/cB),i=n/2,r=n*p_,s=i,o=n*p_+n,a=-s,l=o;e.moveTo(i,r),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(ii*i-ri*r,ri*i+ii*r),e.lineTo(ii*s-ri*o,ri*s+ii*o),e.lineTo(ii*a-ri*l,ri*a+ii*l),e.lineTo(ii*i+ri*r,ii*r-ri*i),e.lineTo(ii*s+ri*o,ii*o-ri*s),e.lineTo(ii*a+ri*l,ii*l-ri*a),e.closePath()}},HI={draw(e,t){const n=$e(t-lv(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},uB=[Gu,LI,kI,NI,zI,WI,BI],fB=[Gu,PI,HI,GI,II,DI,FI];function Ks(){}function ag(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Dm(e){this._context=e}Dm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ag(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ag(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bu(e){return new Dm(e)}function YI(e){this._context=e}YI.prototype={areaStart:Ks,areaEnd:Ks,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ag(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hB(e){return new YI(e)}function UI(e){this._context=e}UI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:ag(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dB(e){return new UI(e)}function VI(e,t){this._basis=new Dm(e),this._beta=t}VI.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],s=e[n]-i,o=t[n]-r,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(i+l*s),this._beta*t[a]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const gB=function e(t){function n(i){return t===1?new Dm(i):new VI(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function lg(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function uv(e,t){this._context=e,this._k=(1-t)/6}uv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:lg(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:lg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mB=function e(t){function n(i){return new uv(i,t)}return n.tension=function(i){return e(+i)},n}(0);function fv(e,t){this._context=e,this._k=(1-t)/6}fv.prototype={areaStart:Ks,areaEnd:Ks,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:lg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const pB=function e(t){function n(i){return new fv(i,t)}return n.tension=function(i){return e(+i)},n}(0);function hv(e,t){this._context=e,this._k=(1-t)/6}hv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:lg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yB=function e(t){function n(i){return new hv(i,t)}return n.tension=function(i){return e(+i)},n}(0);function dv(e,t,n){var i=e._x1,r=e._y1,s=e._x2,o=e._y2;if(e._l01_a>tE){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>tE){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(i,r,s,o,e._x2,e._y2)}function XI(e,t){this._context=e,this._alpha=t}XI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:dv(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _B=function e(t){function n(i){return t?new XI(i,t):new uv(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function jI(e,t){this._context=e,this._alpha=t}jI.prototype={areaStart:Ks,areaEnd:Ks,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:dv(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vB=function e(t){function n(i){return t?new jI(i,t):new fv(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function qI(e,t){this._context=e,this._alpha=t}qI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dv(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wB=function e(t){function n(i){return t?new qI(i,t):new hv(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function ZI(e){this._context=e}ZI.prototype={areaStart:Ks,areaEnd:Ks,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function bB(e){return new ZI(e)}function eE(e){return e<0?-1:1}function nE(e,t,n){var i=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(i||r<0&&-0),o=(n-e._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(eE(s)+eE(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function iE(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function bp(e,t,n){var i=e._x0,r=e._y0,s=e._x1,o=e._y1,a=(s-i)/3;e._context.bezierCurveTo(i+a,r+a*t,s-a,o-a*n,s,o)}function cg(e){this._context=e}cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bp(this,this._t0,iE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bp(this,iE(this,n=nE(this,e,t)),n);break;default:bp(this,this._t0,n=nE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function KI(e){this._context=new JI(e)}(KI.prototype=Object.create(cg.prototype)).point=function(e,t){cg.prototype.point.call(this,t,e)};function JI(e){this._context=e}JI.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,s){this._context.bezierCurveTo(t,e,i,n,s,r)}};function xB(e){return new cg(e)}function EB(e){return new KI(e)}function QI(e){this._context=e}QI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=rE(e),r=rE(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function rE(e){var t,n=e.length-1,i,r=new Array(n),s=new Array(n),o=new Array(n);for(r[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/s[t-1],s[t]-=i,o[t]-=i*o[t-1];for(r[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)r[t]=(o[t]-r[t+1])/s[t];for(s[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function TB(e){return new QI(e)}function $m(e,t){this._context=e,this._t=t}$m.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function CB(e){return new $m(e,.5)}function SB(e){return new $m(e,0)}function MB(e){return new $m(e,1)}function ru(e,t,n){this.k=e,this.x=t,this.y=n}ru.prototype={constructor:ru,scale:function(e){return e===1?this:new ru(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ru(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ru.prototype;function _n(e){return e!=null&&!Number.isNaN(e)}function gi(e,t){return+_n(t)-+_n(e)||ve(e,t)}function ug(e,t){return+_n(t)-+_n(e)||sa(e,t)}function gv(e){return e!=null&&`${e}`!=""}function fg(e){return isFinite(e)?e:NaN}function jr(e){return e>0&&isFinite(e)?e:NaN}function zm(e){return e<0&&isFinite(e)?e:NaN}function RB(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${AB(e.getUTCFullYear())}-${$r(e.getUTCMonth()+1,2)}-${$r(e.getUTCDate(),2)}${n||i||r||s?`T${$r(n,2)}:${$r(i,2)}${r||s?`:${$r(r,2)}${s?`.${$r(s,3)}`:""}`:""}Z`:""}`}function AB(e){return e<0?`-${$r(-e,6)}`:e>9999?`+${$r(e,6)}`:$r(e,4)}function $r(e,t){return`${e}`.padStart(t,"0")}const IB=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function t3(e,t){return IB.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const el=1e3,Do=el*60,$o=Do*60,is=$o*24,Xi=is*7,Zo=is*30,Ms=is*365,xp=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",el],["5 seconds",5*el],["15 seconds",15*el],["30 seconds",30*el],["minute",Do],["5 minutes",5*Do],["15 minutes",15*Do],["30 minutes",30*Do],["hour",$o],["3 hours",3*$o],["6 hours",6*$o],["12 hours",12*$o],["day",is],["2 days",2*is],["week",Xi],["2 weeks",2*Xi],["month",Zo],["3 months",3*Zo],["6 months",6*Zo],["year",Ms],["2 years",2*Ms],["5 years",5*Ms],["10 years",10*Ms],["20 years",20*Ms],["50 years",50*Ms],["100 years",100*Ms]],mv=new Map([["second",el],["minute",Do],["hour",$o],["day",is],["monday",Xi],["tuesday",Xi],["wednesday",Xi],["thursday",Xi],["friday",Xi],["saturday",Xi],["sunday",Xi],["week",Xi],["month",Zo],["year",Ms]]),e3=new Map([["second",ir],["minute",Im],["hour",Lm],["day",va],["monday",zu],["tuesday",KR],["wednesday",JR],["thursday",da],["friday",QR],["saturday",tA],["sunday",Fl],["week",Fl],["month",wf],["year",$i]]),n3=new Map([["second",ir],["minute",_f],["hour",vf],["day",km],["monday",Wu],["tuesday",eA],["wednesday",nA],["thursday",ga],["friday",iA],["saturday",rA],["sunday",Pl],["week",Pl],["month",bf],["year",zi]]),Cf=Symbol("intervalDuration"),Wm=Symbol("intervalType");for(const[e,t]of e3)t[Cf]=mv.get(e),t[Wm]="time";for(const[e,t]of n3)t[Cf]=mv.get(e),t[Wm]="utc";const LB=[["year",zi,"utc"],["year",$i,"time"],["month",bf,"utc"],["month",wf,"time"],["day",km,"utc",6*Zo],["day",va,"time",6*Zo],["hour",vf,"utc",3*is],["minute",_f,"utc",6*$o],["second",ir,"utc",30*Do]];function i3(e,t,n){let i=`${e}`.toLowerCase();i.endsWith("s")&&(i=i.slice(0,-1));let r=1;const s=/^(?:(\d+)\s+)/.exec(i);switch(s&&(i=i.slice(s[0].length),r=+s[1]),i){case"quarter":i="month",r*=3;break;case"half":i="month",r*=6;break}let o=t.get(i);if(!o)throw new Error(`unknown interval: ${e}`);if(r>1){if(!o.every)throw new Error(`non-periodic interval: ${i}`);o=o.every(r),o[Cf]=mv.get(i)*r,o[Wm]=n}return o}function r3(e){return i3(e,e3,"time")}function pv(e){return i3(e,n3,"utc")}function sE(e,t){if(!(t>1))return;const n=e[Cf];if(!xp.some(([,r])=>r===n)||n%is===0&&is<n&&n<Zo)return;const[i]=xp[gm(([,r])=>Math.log(r)).center(xp,Math.log(n*t))];return(e[Wm]==="time"?r3:pv)(i)}function oE(e,t,n){const i=t==="time"?ov:xf;if(n==null)return i(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=OB(n);switch(e){case"millisecond":return Da(i(".%L"),i(":%M:%S"),r);case"second":return Da(i(":%S"),i("%-I:%M"),r);case"minute":return Da(i("%-I:%M"),i("%p"),r);case"hour":return Da(i("%-I %p"),i("%b %-d"),r);case"day":return Da(i("%-d"),i("%b"),r);case"month":return Da(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function OB(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function kB(e,t){const n=Ne(aD(e,(i,r)=>Math.abs(r-i)));if(n<1e3)return oE("millisecond","utc",t);for(const[i,r,s,o]of LB){if(n>o||i==="hour"&&!n)break;if(e.every(a=>r.floor(a)>=a))return oE(i,s,t)}}function Da(e,t,n){return(i,r,s)=>{const o=e(i,r),a=t(i,r),l=r-zl(s);return r!==l&&s[l]!==void 0&&a===t(s[l],l)?o:n(o,a)}}const Dl=Object.getPrototypeOf(Uint8Array),FB=Object.prototype.toString,s3=Symbol("reindex");function Nt(e,t,n){const i=typeof t;return i==="string"?aE(e,o3(t),n):i==="function"?aE(e,t,n):i==="number"||t instanceof Date||i==="boolean"?ce(e,Zn(t),n):typeof(t==null?void 0:t.transform)=="function"?lE(t.transform(e),n):PB(lE(t,n),e==null?void 0:e[s3])}function PB(e,t){return t?Bm(e,t):e}function aE(e,t,n){return ce(e,(n==null?void 0:n.prototype)instanceof Dl?NB(t):t,n)}function lE(e,t){return t===void 0?Dn(e):e instanceof t?e:t.prototype instanceof Dl&&!(e instanceof Dl)?t.from(e,vv):t.from(e)}function NB(e){return(t,n)=>vv(e(t,n))}const yu=[null],o3=e=>t=>t[e],zn={transform:cs},bt={transform:e=>e},yv=()=>1,DB=()=>!0,sn=e=>e==null?e:`${e}`,zt=e=>e==null?e:+e,Sf=e=>e?e[0]:void 0,Hu=e=>e?e[1]:void 0,$B=e=>e?e[2]:void 0,Zn=e=>()=>e;function _v(e){const t=+`${e}`.slice(1)/100;return(n,i)=>Zs(n,t,i)}function On(e){return e instanceof Dl?e:ce(e,vv,Float64Array)}function vv(e){return e==null?NaN:Number(e)}function zB(e){return ce(e,a3)}function a3(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?t3(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Nn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:Rf(e)?[void 0,e]:[e,void 0]}function Re(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function l3(e,t,n){if(e!=null)return Jn(e,t,n)}function Jn(e,t,n){const i=`${e}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${t}: ${e}`);return i}function Dn(e){return e==null||e instanceof Array||e instanceof Dl?e:Array.from(e)}function ce(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Yu(e,t=Array){return e instanceof t?e.slice():t.from(e)}function c3({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function u3({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function Gm(e){return c3(e)||u3(e)||e.interval!==void 0}function yi(e){return(e==null?void 0:e.toString)===FB}function Ko(e){return yi(e)&&(e.type!==void 0||e.domain!==void 0)}function Zi(e){return yi(e)&&typeof e.transform!="function"}function Js(e){return Zi(e)&&e.value===void 0&&e.channel===void 0}function f3(e,t,n,i=bt){return t===void 0&&n===void 0?(t=0,n=e===void 0?i:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Yi(e,t){return e===void 0&&t===void 0?[Sf,Hu]:[e,t]}function uo({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Nn(t)),e===void 0&&([e]=Nn(n)),e}function cs(e){const t=e.length,n=new Uint32Array(t);for(let i=0;i<t;++i)n[i]=i;return n}function Bm(e,t){return ce(t,n=>e[n],e.constructor)}function wv(e){return e.length===1?(t,n)=>e(Bm(n,t)):e}function Jo(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function zo(e){return e!==null&&typeof e=="object"?e.valueOf():e}function h3(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function Un(e){let t;return[{transform:()=>t,label:us(e)},n=>t=n]}function Cn(e){return e==null?[e]:Un(e)}function us(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function hg(e,t){return{transform(n){const i=e.transform(n),r=t.transform(n);return wn(i)||wn(r)?ce(i,(s,o)=>new Date((+i[o]+ +r[o])/2)):ce(i,(s,o)=>(+i[o]+ +r[o])/2,Float64Array)},label:e.label}}function dg(e,t){const n=d3(t==null?void 0:t.interval,t==null?void 0:t.type);return n?ce(e,n):e}function d3(e,t){const n=bv(e,t);return n&&(i=>_n(i)?n.floor(i):i)}function bv(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>ai(Math.ceil(i*n),r*n).map(s=>s/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>ai(Math.ceil(i/n),r/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?r3:pv)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function cc(e,t){if(e=bv(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function WB(e,t){if(e=cc(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function GB(e){return nl(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function nl(e){return typeof(e==null?void 0:e.range)=="function"}function Mf(e){return e===void 0||Zi(e)?e:{value:e}}function BB(e){return e==null?null:{transform:t=>Nt(t,e,Float64Array),label:us(e)}}function HB(e){if(!fs(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function fs(e){return e&&typeof e[Symbol.iterator]=="function"}function g3(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function be(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function wn(e){for(const t of e)if(t!=null)return t instanceof Date}function YB(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&t3(t)}function UB(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function il(e){for(const t of e)if(t!=null)return typeof t=="number"}function Ep(e,t){let n;for(const i of e)if(i!=null){if(!t(i))return!1;n=!0}return n}const VB=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Rf(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||VB.has(e))}function XB(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Se(e){return e==null||$l(e)}function $l(e){return/^\s*none\s*$/i.test(e)}function jB(e){return/^\s*round\s*$/i.test(e)}function m3(e,t){return l3(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Af(e="middle"){return m3(e,"frameAnchor")}function zl(e){if(e==null)return;const t=e[0],n=e[e.length-1];return sa(t,n)}function qB(e={},...t){let n=e;for(const i of t)for(const r in i)if(n[r]===void 0){const s=i[r];n===e?n={...n,[r]:s}:n[r]=s}return n}function ZB(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(t.has(r))throw new Error(`duplicate name: ${r}`);return t.add(r),[i,n]}))}function xv(e){return fs(e)?ZB(e):e}const rr=Symbol("position"),hs=Symbol("color"),If=Symbol("radius"),Lf=Symbol("length"),Of=Symbol("opacity"),Hm=Symbol("symbol"),p3=Symbol("projection"),_e=new Map([["x",rr],["y",rr],["fx",rr],["fy",rr],["r",If],["color",hs],["opacity",Of],["symbol",Hm],["length",Lf],["projection",p3]]);function KB(e){return e===rr||e===p3}function JB(e){return e===rr||e===If||e===Lf||e===Of}const y3=Math.sqrt(3),_3=2/y3,QB={draw(e,t){const n=Math.sqrt(t/Math.PI),i=n*_3,r=i/2;e.moveTo(0,i),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(0,-i),e.lineTo(-n,-r),e.lineTo(-n,r),e.closePath()}},Ev=new Map([["asterisk",II],["circle",Gu],["cross",LI],["diamond",kI],["diamond2",FI],["hexagon",QB],["plus",PI],["square",NI],["square2",DI],["star",zI],["times",HI],["triangle",WI],["triangle2",GI],["wye",BI]]);function Tv(e){return e&&typeof e.draw=="function"}function tH(e){return Tv(e)?!0:typeof e!="string"?!1:Ev.has(e.toLowerCase())}function Cv(e){if(e==null||Tv(e))return e;const t=Ev.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function eH(e){if(e==null||Tv(e))return[void 0,e];if(typeof e=="string"){const t=Ev.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function _r({filter:e,sort:t,reverse:n,transform:i,initializer:r,...s}={},o){if(i===void 0&&(e!=null&&(i=Sv(e)),t!=null&&!Js(t)&&(i=Tp(i,Rv(t))),n&&(i=Tp(i,Mv))),o!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||Js(t))&&{sort:t},transform:Tp(i,o)}}function $n({filter:e,sort:t,reverse:n,initializer:i,...r}={},s){return i===void 0&&(e!=null&&(i=Sv(e)),t!=null&&!Js(t)&&(i=Cp(i,Rv(t))),n&&(i=Cp(i,Mv))),{...r,...(t===null||Js(t))&&{sort:t},initializer:Cp(i,s)}}function Tp(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r){return{data:n,facets:i}=e.call(this,n,i,r),t.call(this,Dn(n),i,r)}}function Cp(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r,...s){let o,a,l,c,u,f;return{data:a=n,facets:l=i,channels:o}=e.call(this,n,i,r,...s),{data:u=a,facets:f=l,channels:c}=t.call(this,a,l,{...r,...o},...s),{data:u,facets:f,channels:{...o,...c}}}}function Ym(e,t){return(e.initializer!=null?$n:_r)(e,t)}function nH(e,t){return Ym(t,Sv(e))}function Sv(e){return(t,n)=>{const i=Nt(t,e);return{data:t,facets:n.map(r=>r.filter(s=>i[s]))}}}function iH({sort:e,...t}={}){return{...Ym(t,Mv),sort:Js(e)?e:null}}function Mv(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function rH({seed:e,sort:t,...n}={}){return{...Ym(n,w3(e==null?Math.random:iv(e))),sort:Js(t)?t:null}}function v3(e,{sort:t,...n}={}){return{...(Zi(e)&&e.channel!==void 0?$n:Ym)(n,Rv(e)),sort:Js(t)?t:null}}function Rv(e){return(typeof e=="function"&&e.length!==1?sH:w3)(e)}function sH(e){return(t,n)=>{const i=(r,s)=>e(t[r],t[s]);return{data:t,facets:n.map(r=>r.slice().sort(i))}}}function w3(e){let t,n;({channel:t,value:e,order:n}={...Mf(e)});const i=t==null?void 0:t.startsWith("-");if(i&&(t=t.slice(1)),n===void 0&&(n=i?ug:gi),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=gi;break;case"descending":n=ug;break;default:throw new Error(`invalid order: ${n}`)}return(r,s,o)=>{let a;if(t===void 0)a=Nt(r,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:r,facets:s.map(c=>c.slice().sort(l))}}}function Av(e,t){return Um(null,null,e,t)}function Uu(e={y:"count"},t={}){const{x:n=bt}=t;if(n==null)throw new Error("missing channel: x");return Um(n,null,e,t)}function Vu(e={x:"count"},t={}){const{y:n=bt}=t;if(n==null)throw new Error("missing channel: y");return Um(null,n,e,t)}function Iv(e={fill:"count"},t={}){let{x:n,y:i}=t;if([n,i]=Yi(n,i),n==null)throw new Error("missing channel: x");if(i==null)throw new Error("missing channel: y");return Um(n,i,e,t)}function Um(e,t,{data:n=Pv,filter:i,sort:r,reverse:s,...o}={},a={}){o=Lv(o,a),n=Vm(n,bt),r=r==null?void 0:Ov("sort",r,a),i=i==null?void 0:kv("filter",i,a);const[l,c]=Cn(e),[u,f]=Cn(t),{z:h,fill:d,stroke:g,x1:m,x2:_,y1:p,y2:y,...w}=a,[v,x]=Cn(h),[b]=Nn(d),[E]=Nn(g),[T,M]=Cn(b),[C,R]=Cn(E);return{..."z"in a&&{z:v||h},..."fill"in a&&{fill:T||d},..."stroke"in a&&{stroke:C||g},..._r(w,(A,k,O)=>{const I=dg(Nt(A,e),O==null?void 0:O.x),F=dg(Nt(A,t),O==null?void 0:O.y),P=Nt(A,h),G=Nt(A,b),j=Nt(A,E),U=Fv(o,{z:P,fill:G,stroke:j}),q=[],W=[],Q=I&&c([]),nt=F&&f([]),st=P&&x([]),ot=G&&M([]),z=j&&R([]);let Y=0;for(const $ of o)$.initialize(A);r&&r.initialize(A),i&&i.initialize(A);for(const $ of k){const V=[];for(const K of o)K.scope("facet",$);r&&r.scope("facet",$),i&&i.scope("facet",$);for(const[K,S]of ml($,U))for(const[L,D]of ml(S,F))for(const[B,H]of ml(D,I))if(!(i&&!i.reduce(H))){V.push(Y++),W.push(n.reduceIndex(H,A)),I&&Q.push(B),F&&nt.push(L),P&&st.push(U===P?K:P[H[0]]),G&&ot.push(U===G?K:G[H[0]]),j&&z.push(U===j?K:j[H[0]]);for(const X of o)X.reduce(H);r&&r.reduce(H)}q.push(V)}return b3(q,r,s),{data:W,facets:q}}),...!Ws(o,"x")&&(l?{x:l}:{x1:m,x2:_}),...!Ws(o,"y")&&(u?{y:u}:{y1:p,y2:y}),...Object.fromEntries(o.map(({name:A,output:k})=>[A,k]))}}function Ws(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function Lv(e,t,n=Ov){const i=Object.entries(e);return t.title!=null&&e.title===void 0&&i.push(["title",uH]),t.href!=null&&e.href===void 0&&i.push(["href",Nv]),i.filter(([,r])=>r!==void 0).map(([r,s])=>s===null?oH(r):n(r,s,t))}function Ov(e,t,n,i=kv){let r;yi(t)&&"reduce"in t&&(r=t.scale,t=t.reduce);const s=i(e,t,n),[o,a]=Un(s.label);let l;return{name:e,output:r===void 0?o:{value:o,scale:r},initialize(c){s.initialize(c),l=a([])},scope(c,u){s.scope(c,u)},reduce(c,u){l.push(s.reduce(c,u))}}}function oH(e){return{name:e,initialize(){},scope(){},reduce(){}}}function kv(e,t,n,i=Vm){const r=h3(e,n),s=i(t,r);let o,a;return{label:us(s===gg?null:r,s.label),initialize(l){o=r===void 0?l:Nt(l,r),s.scope==="data"&&(a=s.reduceIndex(cs(l),o))},scope(l,c){s.scope===l&&(a=s.reduceIndex(c,o))},reduce(l,c){return s.scope==null?s.reduceIndex(l,o,c):s.reduceIndex(l,o,a,c)}}}function ml(e,t){return t?Iu(ls(e,n=>t[n]),Sf):[[,e]]}function Vm(e,t,n=aH){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&yi(e))return lH(e);if(typeof e=="function")return cH(e);if(/^p\d{2}$/i.test(e))return kr(_v(e));switch(`${e}`.toLowerCase()){case"first":return Nv;case"last":return fH;case"identity":return Pv;case"count":return gg;case"distinct":return hH;case"sum":return t==null?gg:dH;case"proportion":return uE(t,"data");case"proportion-facet":return uE(t,"facet");case"deviation":return kr(cf);case"min":return kr(Xe);case"min-index":return kr(iD);case"max":return kr(Ne);case"max-index":return kr(nD);case"mean":return cE(ym);case"median":return cE(ku);case"variance":return kr(k1);case"mode":return kr(cM)}return n(e)}function aH(e){throw new Error(`invalid reduce: ${e}`)}function Fv(e,t){for(const n in t){const i=t[n];if(i!==void 0&&!e.some(r=>r.name===n))return i}}function b3(e,t,n){if(t){const i=t.output.transform(),r=(s,o)=>gi(i[s],i[o]);e.forEach(s=>s.sort(r))}n&&e.forEach(i=>i.reverse())}function lH(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function cH(e){return{reduceIndex(t,n,i){return e(Bm(n,t),i)}}}function kr(e){return{reduceIndex(t,n){return e(t,i=>n[i])}}}function cE(e){return{reduceIndex(t,n){const i=e(t,r=>n[r]);return wn(n)?new Date(i):i}}}const Pv={reduceIndex(e,t){return Bm(t,e)}},Nv={reduceIndex(e,t){return t[e[0]]}},uH={reduceIndex(e,t){const i=Iu(hl(e,s=>s.length,s=>t[s]),Hu),r=i.slice(-5).reverse();if(r.length<i.length){const s=i.slice(0,-4);r[5-1]=[`… ${s.length.toLocaleString("en-US")} more`,dr(s,Hu)]}return r.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},fH={reduceIndex(e,t){return t[e[e.length-1]]}},gg={label:"Frequency",reduceIndex(e){return e.length}},hH={label:"Distinct",reduceIndex(e,t){const n=new uf;for(const i of e)n.add(t[i]);return n.size}},dH=kr(dr);function uE(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:t,reduceIndex:(n,i,r=1)=>dr(n,s=>i[s])/r}}function Xu(e,{scale:t,type:n,value:i,filter:r,hint:s,label:o=us(i)},a){return s===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(s=i.hint),E3(a,{scale:t,type:n,value:Nt(e,i),label:o,filter:r,hint:s})}function x3(e,t){return Object.fromEntries(Object.entries(e).map(([n,i])=>[n,Xu(t,i,n)]))}function Dv(e,t){const n=Object.fromEntries(Object.entries(e).map(([i,{scale:r,value:s}])=>{const o=r==null?null:t[r];return[i,o==null?s:ce(s,o)]}));return n.channels=e,n}function E3(e,t){const{scale:n,value:i}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Ep(i,Rf)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Ep(i,XB)?null:"opacity";break;case"symbol":n!==!0&&Ep(i,tH)?(t.scale=null,t.value=ce(i,Cv)):t.scale="symbol";break;default:t.scale=_e.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!_e.has(n))throw new Error(`unknown scale: ${n}`);return t}function gH(e,t,n,i,r){const{order:s,reverse:o,reduce:a=!0,limit:l}=r;for(const c in r){if(!_e.has(c))continue;let{value:u,order:f=s,reverse:h=o,reduce:d=a,limit:g=l}=Mf(r[c]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),f=f===void 0?m!==(u==="width"||u==="height")?C3:T3:yH(f),d==null||d===!1)continue;const _=c==="fx"||c==="fy"?pH(t,i[c]):mH(n,c);if(!_)throw new Error(`missing channel for scale: ${c}`);const p=_.value,[y=0,w=1/0]=fs(g)?g:g<0?[g]:[0,g];if(u==null)_.domain=()=>{let v=Array.from(new uf(p));return h&&(v=v.reverse()),(y!==0||w!==1/0)&&(v=v.slice(y,w)),v};else{const v=u==="data"?e:u==="height"?fE(n,"y1","y2"):u==="width"?fE(n,"x1","x2"):y_(n,u,u==="y"?"y2":u==="x"?"x2":void 0),x=Vm(d===!0?"max":d,v);_.domain=()=>{let b=KN(cs(p),E=>x.reduceIndex(E,v),E=>p[E]);return f&&b.sort(f),h&&b.reverse(),(y!==0||w!==1/0)&&(b=b.slice(y,w)),b.map(Sf)}}}}function mH(e,t){for(const n in e){const i=e[n];if(i.scale===t)return i}}function pH(e,t){const n=e.original;if(n===e)return t;const i=t.value,r=t.value=[];for(let s=0;s<n.length;++s){const o=i[n[s][0]];for(const a of e[s])r[a]=o}return t}function fE(e,t,n){const i=y_(e,t),r=y_(e,n);return ce(r,(s,o)=>Math.abs(s-i[o]),Float64Array)}function y_(e,t,n){let i=e[t];if(!i&&n!==void 0&&(i=e[n]),i)return i.value;throw new Error(`missing channel: ${t}`)}function yH(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return T3;case"descending":return C3}throw new Error(`invalid order: ${e}`)}function T3([e,t],[n,i]){return gi(t,i)||gi(e,n)}function C3([e,t],[n,i]){return ug(t,i)||gi(e,n)}function __(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function $v(e){let t,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,s)=>r!==i[s]))&&(n=i,t=e(...i)),t)}const _H=$v(e=>new Intl.NumberFormat(e)),vH=$v((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),wH=$v((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function bH(e="en-US"){const t=_H(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function xH(e="en-US",t="short"){const n=vH(e,t);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2e3,+i)))?n.format(i):void 0}function EH(e="en-US",t="short"){const n=wH(e,t);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2001,0,+i)))?n.format(i):void 0}function S3(e){return RB(e,"Invalid Date")}function TH(e="en-US"){const t=bH(e);return n=>(n instanceof Date?S3:typeof n=="number"?t:sn)(n)}const ma=TH();let v_=0,w_;function CH(){const e=v_;return v_=0,w_=void 0,e}function qr(e){e!==w_&&(w_=e,console.warn(e),++v_)}const Ze=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let SH=0;function hE(){return`plot-clip-${++SH}`}function M3(e,{title:t,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:g,strokeDasharray:m,strokeDashoffset:_,opacity:p,mixBlendMode:y,imageFilter:w,paintOrder:v,pointerEvents:x,shapeRendering:b,channels:E},{ariaLabel:T,fill:M="currentColor",fillOpacity:C,stroke:R="none",strokeOpacity:A,strokeWidth:k,strokeLinecap:O,strokeLinejoin:I,strokeMiterlimit:F,paintOrder:P}){M===null&&(a=null,l=null),R===null&&(c=null,f=null),Se(M)?!Se(R)&&(!Se(a)||E!=null&&E.fill)&&(R="none"):Se(R)&&(!Se(c)||E!=null&&E.stroke)&&(M="none");const[G,j]=Nn(a,M),[U,q]=Re(l,C),[W,Q]=Nn(c,R),[nt,st]=Re(f,A),[ot,z]=Re(p);$l(Q)||(u===void 0&&(u=k),d===void 0&&(d=O),h===void 0&&(h=I),g===void 0&&!jB(h)&&(g=F),!$l(j)&&v===void 0&&(v=P));const[Y,$]=Re(u);return M!==null&&(e.fill=Te(j,"currentColor"),e.fillOpacity=Dc(q,1)),R!==null&&(e.stroke=Te(Q,"none"),e.strokeWidth=Dc($,1),e.strokeOpacity=Dc(st,1),e.strokeLinejoin=Te(h,"miter"),e.strokeLinecap=Te(d,"butt"),e.strokeMiterlimit=Dc(g,4),e.strokeDasharray=Te(m,"none"),e.strokeDashoffset=Te(_,"0")),e.target=sn(o),e.ariaLabel=sn(T),e.ariaDescription=sn(r),e.ariaHidden=sn(s),e.opacity=Dc(z,1),e.mixBlendMode=Te(y,"normal"),e.imageFilter=Te(w,"none"),e.paintOrder=Te(v,"normal"),e.pointerEvents=Te(x,"auto"),e.shapeRendering=Te(b,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:G,scale:"auto",optional:!0},fillOpacity:{value:U,scale:"auto",optional:!0},stroke:{value:W,scale:"auto",optional:!0},strokeOpacity:{value:nt,scale:"auto",optional:!0},strokeWidth:{value:Y,optional:!0},opacity:{value:ot,scale:"auto",optional:!0}}}function MH(e,t){t&&e.filter(n=>gv(t[n])).append("title").call(AH,t)}function RH(e,t){t&&e.filter(([n])=>gv(t[n])).append("title").call(IH,t)}function AH(e,t){t&&e.text(n=>ma(t[n]))}function IH(e,t){t&&e.text(([n])=>ma(t[n]))}function ze(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){i&&pt(e,"aria-label",h=>i[h]),s&&pt(e,"fill",h=>s[h]),o&&pt(e,"fill-opacity",h=>o[h]),a&&pt(e,"stroke",h=>a[h]),l&&pt(e,"stroke-opacity",h=>l[h]),c&&pt(e,"stroke-width",h=>c[h]),u&&pt(e,"opacity",h=>u[h]),f&&I3(e,h=>f[h],t),n||MH(e,r)}function mg(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){i&&pt(e,"aria-label",([h])=>i[h]),s&&pt(e,"fill",([h])=>s[h]),o&&pt(e,"fill-opacity",([h])=>o[h]),a&&pt(e,"stroke",([h])=>a[h]),l&&pt(e,"stroke-opacity",([h])=>l[h]),c&&pt(e,"stroke-width",([h])=>c[h]),u&&pt(e,"opacity",([h])=>u[h]),f&&I3(e,([h])=>f[h],t),n||RH(e,r)}function LH({ariaLabel:e,title:t,fill:n,fillOpacity:i,stroke:r,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,i,r,s,o,a,l].filter(u=>u!==void 0)}function zv(e,t,n){const i=ls(e,r=>t[r]);return n===void 0&&i.size>1+e.length>>1&&qr("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*R3(e,t,n,i){const{z:r}=n,{z:s}=i,o=LH(i,n),a=[...t,...o];for(const l of s?zv(e,s,r):[e]){let c,u;t:for(const f of l){for(const h of a)if(!_n(h[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=o.map(h=>zo(h[f])),u=[f];continue}u.push(f);for(let h=0;h<o.length;++h)if(zo(o[h][f])!==c[h]){yield u,c=o.map(g=>zo(g[f])),u=[f];continue t}}u&&(yield u)}}function A3(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Jn(e,"clip",["frame","sphere"])),e}function OH(e,t,n,i){let r;const{clip:s=i.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:c,marginTop:u,marginBottom:f}=n,h=hE();r=`url(#${h})`,e=Kt("svg:g",i).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=i;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=hE();r=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",lo(o)({type:"Sphere"}));break}}pt(e,"aria-label",t.ariaLabel),pt(e,"aria-description",t.ariaDescription),pt(e,"aria-hidden",t.ariaHidden),pt(e,"clip-path",r)}function pe(e,t,n,i){OH(e,t,n,i),pt(e,"fill",t.fill),pt(e,"fill-opacity",t.fillOpacity),pt(e,"stroke",t.stroke),pt(e,"stroke-width",t.strokeWidth),pt(e,"stroke-opacity",t.strokeOpacity),pt(e,"stroke-linejoin",t.strokeLinejoin),pt(e,"stroke-linecap",t.strokeLinecap),pt(e,"stroke-miterlimit",t.strokeMiterlimit),pt(e,"stroke-dasharray",t.strokeDasharray),pt(e,"stroke-dashoffset",t.strokeDashoffset),pt(e,"shape-rendering",t.shapeRendering),pt(e,"filter",t.imageFilter),pt(e,"paint-order",t.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=t;pt(e,"pointer-events",r)}function he(e,t){kH(e,"mix-blend-mode",t.mixBlendMode),pt(e,"opacity",t.opacity)}function I3(e,t,n){e.each(function(i){const r=t(i);if(r!=null){const s=this.ownerDocument.createElementNS(aa.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(aa.xlink,"href",r),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function pt(e,t,n){n!=null&&e.attr(t,n)}function kH(e,t,n){n!=null&&e.style(t,n)}function ae(e,t,{x:n,y:i},r=Ze,s=Ze){r+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(s+=i.bandwidth()/2),(r||s)&&e.attr("transform",`translate(${r},${s})`)}function Te(e,t){if((e=sn(e))!==t)return e}function Dc(e,t){if((e=zt(e))!==t)return e}const FH=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Wv(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!FH.test(e))throw new Error(`invalid class name: ${e}`);return e}function Gv(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function vr({frameAnchor:e},{width:t,height:n,marginTop:i,marginRight:r,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-r:(o+t-r)/2,/^top/.test(e)?i:/^bottom/.test(e)?n-s:(i+n-s)/2]}function Xm(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:A3(n)}}function Kt(e,{document:t}){return di(vm(e).call(t.documentElement))}const L3=Math.PI,Rr=2*L3,dE=.618;function PH({projection:e,inset:t=0,insetTop:n=t,insetRight:i=t,insetBottom:r=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,c="frame";if(yi(e)){let x;if({type:e,domain:l,inset:x,insetTop:n=x!==void 0?x:n,insetRight:i=x!==void 0?x:i,insetBottom:r=x!==void 0?x:r,insetLeft:s=x!==void 0?x:s,clip:c=c,...a}=e,e==null)return}typeof e!="function"&&({type:e}=O3(e));const{width:u,height:f,marginLeft:h,marginRight:d,marginTop:g,marginBottom:m}=o,_=u-h-d-s-i,p=f-g-m-n-r;if(e=e==null?void 0:e({width:_,height:p,clip:c,...a}),e==null)return;c=NH(c,h,g,u-d,f-m);let y=h+s,w=g+n,v;if(l!=null){const[[x,b],[E,T]]=lo(e).bounds(l),M=Math.min(_/(E-x),p/(T-b));M>0?(y-=(M*(x+E)-_)/2,w-=(M*(b+T)-p)/2,v=Kd({point(C,R){this.stream.point(C*M+y,R*M+w)}})):qr("Warning: the projection could not be fit to the specified domain; using the default scale.")}return v??(v=y===0&&w===0?k3():Kd({point(x,b){this.stream.point(x+y,b+w)}})),{stream:x=>e.stream(v.stream(c(x)))}}function O3(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Ei(xz,.7463,.4673);case"albers":return Sh(CR,.7463,.4673);case"azimuthal-equal-area":return Ei(Ez,4,4);case"azimuthal-equidistant":return Ei(Tz,Rr,Rr);case"conic-conformal":return Sh(Mz,Rr,Rr);case"conic-equal-area":return Sh(Jd,6.1702,2.9781);case"conic-equidistant":return Sh(Iz,7.312,3.6282);case"equal-earth":return Ei(Oz,5.4133,2.6347);case"equirectangular":return Ei(Rz,Rr,L3);case"gnomonic":return Ei(kz,3.4641,3.4641);case"identity":return{type:k3};case"reflect-y":return{type:DH};case"mercator":return Ei(Cz,Rr,Rr);case"orthographic":return Ei(Fz,2,2);case"stereographic":return Ei(Pz,2,2);case"transverse-mercator":return Ei(Nz,Rr,Rr);default:throw new Error(`unknown projection type: ${e}`)}}function NH(e,t,n,i,r){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return cR(t,n,i,r);default:throw new Error(`unknown projection clip type: ${e}`)}}function Ei(e,t,n){return{type:({width:i,height:r,rotate:s,precision:o=.15,clip:a})=>{var c,u,f;const l=e();return o!=null&&((c=l.precision)==null||c.call(l,o)),s!=null&&((u=l.rotate)==null||u.call(l,s)),typeof a=="number"&&((f=l.clipAngle)==null||f.call(l,a)),l.scale(Math.min(i/t,r/n)),l.translate([i/2,r/2]),l},aspectRatio:n/t}}function Sh(e,t,n){const{type:i,aspectRatio:r}=Ei(e,t,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:c}=s,u=i(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:r}}const k3=Zn({stream:e=>e}),DH=Zn(Kd({point(e,t){this.stream.point(e,-t)}}));function F3(e,t,n,i){const r=n[e],s=n[t],o=r.length,a=n[e]=new Float64Array(o).fill(NaN),l=n[t]=new Float64Array(o).fill(NaN);let c;const u=i.stream({point(f,h){a[c]=f,l[c]=h}});for(c=0;c<o;++c)u.point(r[c],s[c])}function $H({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(yi(e)&&(e=e.type),e!=null)}function zH(e){if(typeof(e==null?void 0:e.stream)=="function")return dE;if(yi(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=O3(e);if(t)return t}return dE}}function jm(e,t,{projection:n}){const{x:i,y:r}=e;let s={};return i&&(s.x=i),r&&(s.y=r),s=Dv(s,t),n&&(i==null?void 0:i.scale)==="x"&&(r==null?void 0:r.scale)==="y"&&F3("x","y",s,n),i&&(s.x=On(s.x)),r&&(s.y=On(s.y)),s}function WH(e){const t=[],n=[],i={scale:"x",value:t},r={scale:"y",value:n},s={point(o,a){t.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)Ps(o,s);return[i,r]}const P3=new Map([["accent",YG],["category10",HG],["dark2",UG],["paired",VG],["pastel1",XG],["pastel2",jG],["set1",qG],["set2",ZG],["set3",KG],["tableau10",JG]]);function GH(e){return e!=null&&P3.has(`${e}`.toLowerCase())}const gE=new Map([...P3,["brbg",Ar(pA,yA)],["prgn",Ar(_A,vA)],["piyg",Ar(wA,bA)],["puor",Ar(xA,EA)],["rdbu",Ar(g_,ig)],["rdgy",Ar(TA,CA)],["rdylbu",Ar(m_,rg)],["rdylgn",Ar(SA,MA)],["spectral",Ar(RA,AA)],["burd",mE(g_,ig)],["buylrd",mE(m_,rg)],["blues",We(tI,eI)],["greens",We(nI,iI)],["greys",We(rI,sI)],["oranges",We(uI,fI)],["purples",We(oI,aI)],["reds",We(lI,cI)],["turbo",Ir(_I)],["viridis",Ir(vI)],["magma",Ir(wI)],["inferno",Ir(bI)],["plasma",Ir(xI)],["cividis",Ir(hI)],["cubehelix",Ir(dI)],["warm",Ir(gI)],["cool",Ir(mI)],["bugn",We(IA,LA)],["bupu",We(OA,kA)],["gnbu",We(FA,PA)],["orrd",We(NA,DA)],["pubu",We(WA,GA)],["pubugn",We($A,zA)],["purd",We(BA,HA)],["rdpu",We(YA,UA)],["ylgn",We(jA,qA)],["ylgnbu",We(VA,XA)],["ylorbr",We(ZA,KA)],["ylorrd",We(JA,QA)],["rainbow",pE(pI)],["sinebow",pE(yI)]]);function We(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ni(t,n):e[n])}function Ar(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ni(t,n):e[n])}function mE(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ni(i=>t(1-i),n):e[n].slice().reverse())}function Ir(e){return({length:t})=>Ni(e,Math.max(2,Math.floor(t)))}function pE(e){return({length:t})=>Ni(e,Math.floor(t)+1).slice(0,-1)}function N3(e){const t=`${e}`.toLowerCase();if(!gE.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return gE.get(t)}function qm(e,t){const n=N3(e),i=typeof n=="function"?n({length:t}):n;return i.length!==t?i.slice(0,t):i}function BH(e,t="greys"){const n=new Set,[i,r]=qm(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(r);else if(s===!1)n.add(i);else return;return[...n]}const yE=new Map([["brbg",yA],["prgn",vA],["piyg",bA],["puor",EA],["rdbu",ig],["rdgy",CA],["rdylbu",rg],["rdylgn",MA],["spectral",AA],["burd",e=>ig(1-e)],["buylrd",e=>rg(1-e)],["blues",eI],["greens",iI],["greys",sI],["purples",aI],["reds",cI],["oranges",fI],["turbo",_I],["viridis",vI],["magma",wI],["inferno",bI],["plasma",xI],["cividis",hI],["cubehelix",dI],["warm",gI],["cool",mI],["bugn",LA],["bupu",kA],["gnbu",PA],["orrd",DA],["pubugn",zA],["pubu",GA],["purd",HA],["rdpu",UA],["ylgnbu",XA],["ylgn",qA],["ylorbr",KA],["ylorrd",QA],["rainbow",pI],["sinebow",yI]]);function Bv(e){const t=`${e}`.toLowerCase();if(!yE.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return yE.get(t)}const HH=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function YH(e){return e!=null&&HH.has(`${e}`.toLowerCase())}const D3=e=>t=>e(1-t),Sp=[0,1],_E=new Map([["number",nn],["rgb",ua],["hsl",R$],["hcl",L$],["lab",A$]]);function $3(e){const t=`${e}`.toLowerCase();if(!_E.has(t))throw new Error(`unknown interpolator: ${t}`);return _E.get(t)}function kf(e,t,n,{type:i,nice:r,clamp:s,zero:o,domain:a=W3(e,n),unknown:l,round:c,scheme:u,interval:f,range:h=_e.get(e)===If?eY(n,a):_e.get(e)===Lf?nY(n,a):_e.get(e)===Of?Sp:void 0,interpolate:d=_e.get(e)===hs?u==null&&h!==void 0?ua:Bv(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):c?xm:nn,reverse:g}){if(f=cc(f,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof d!="function"&&(d=$3(d)),g=!!g,h!==void 0){const m=(a=Dn(a)).length,_=(h=Dn(h)).length;if(m!==_){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Em(d,h),h=void 0}}if(d.length===1?(g&&(d=D3(d),g=!1),h===void 0&&(h=Float64Array.from(a,(m,_)=>_/(a.length-1)),h.length===2&&(h=Sp)),t.interpolate((h===Sp?Zn:Yv)(d))):t.interpolate(d),o){const[m,_]=ye(a);(m>0||_<0)&&(a=Yu(a),zl(a)!==Math.sign(m)?a[a.length-1]=0:a[0]=0)}return g&&(a=Td(a)),t.domain(a).unknown(l),r&&(t.nice(UH(r,i)),a=t.domain()),h!==void 0&&t.range(h),s&&t.clamp(s),{type:i,domain:a,range:h,scale:t,interpolate:d,interval:f}}function UH(e,t){return e===!0?void 0:typeof e=="number"?e:WB(e,t)}function VH(e,t,n){return kf(e,nr(),t,n)}function XH(e,t,n){return z3(e,t,{...n,exponent:.5})}function z3(e,t,{exponent:n=1,...i}){return kf(e,jR().exponent(n),t,{...i,type:"pow"})}function jH(e,t,{base:n=10,domain:i=iY(t),...r}){return kf(e,YR().base(n),t,{...r,domain:i})}function qH(e,t,{constant:n=1,...i}){return kf(e,VR().constant(n),t,i)}function ZH(e,t,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:s="rdylbu",domain:o=rY(t),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?Ni(l,r):_e.get(e)===hs?qm(s,r):void 0),o.length>0&&(o=qR(o,n===void 0?{length:r}:n).quantiles()),Hv(e,t,{domain:o,range:n,reverse:c,unknown:a})}function KH(e,t,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:s=W3(e,t),unknown:o,interpolate:a,reverse:l}){const[c,u]=ye(s);let f;return n===void 0?(f=qs(c,u,i),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),i=f.length+1,n=a!==void 0?Ni(a,i):_e.get(e)===hs?qm(r,i):void 0):(f=Ni(nn(c,u),i+1).slice(1,-1),c instanceof Date&&(f=f.map(h=>new Date(h)))),zl(Dn(s))<0&&f.reverse(),Hv(e,t,{domain:f,range:n,reverse:l,unknown:o})}function Hv(e,t,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:s,range:o=s!==void 0?Ni(s,n.length+1):_e.get(e)===hs?qm(r,n.length+1):void 0,reverse:a}){n=Dn(n);const l=zl(n);if(!isNaN(l)&&!JH(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=Td(o)),{type:"threshold",scale:ZR(l<0?Td(n):n,o===void 0?[]:o).unknown(i),domain:n,range:o}}function JH(e,t){for(let n=1,i=e.length,r=e[0];n<i;++n){const s=sa(r,r=e[n]);if(s!==0&&s!==t)return!1}return!0}function QH(e){return{type:"identity",scale:JB(_e.get(e))?GR():t=>t}}function ju(e,t=fg){return e.length?[Xe(e,({value:n})=>n===void 0?n:Xe(n,t)),Ne(e,({value:n})=>n===void 0?n:Ne(n,t))]:[0,1]}function W3(e,t){const n=_e.get(e);return(n===If||n===Of||n===Lf?tY:ju)(t)}function tY(e){return[0,e.length?Ne(e,({value:t})=>t===void 0?t:Ne(t,fg)):1]}function eY(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const i=Zs(e,.5,({value:o})=>o===void 0?NaN:Zs(o,.25,jr)),r=t.map(o=>3*Math.sqrt(o/i)),s=30/Ne(r);return s<1?r.map(o=>o*s):r}function nY(e,t){const n=ku(e,({value:s})=>s===void 0?NaN:ku(s,Math.abs)),i=t.map(s=>12*s/n),r=60/Ne(i);return r<1?i.map(s=>s*r):i}function iY(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return ju(e,jr);if(n<0)return ju(e,zm)}return[1,10]}function rY(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const i of n)t.push(i);return t}function Yv(e){return(t,n)=>i=>e(t+i*(n-t))}function Zm(e,t,n,i,{type:r,nice:s,clamp:o,domain:a=ju(i),unknown:l,pivot:c=0,scheme:u,range:f,symmetric:h=!0,interpolate:d=_e.get(e)===hs?u==null&&f!==void 0?ua:Bv(u!==void 0?u:"rdbu"):nn,reverse:g}){c=+c,a=Dn(a);let[m,_]=a;if(a.length>2&&qr(`Warning: the diverging ${e} scale domain contains extra elements.`),sa(m,_)<0&&([m,_]=[_,m],g=!g),m=Math.min(m,c),_=Math.max(_,c),typeof d!="function"&&(d=$3(d)),f!==void 0&&(d=d.length===1?Yv(d)(...f):Em(d,f)),g&&(d=D3(d)),h){const p=n.apply(c),y=p-n.apply(m),w=n.apply(_)-p;y<w?m=n.invert(p-w):y>w&&(_=n.invert(p+y))}return t.domain([m,c,_]).unknown(l).interpolator(d),o&&t.clamp(o),s&&t.nice(s),{type:r,domain:[m,_],pivot:c,interpolate:d,scale:t}}function sY(e,t,n){return Zm(e,hA(),cY,t,n)}function oY(e,t,n){return G3(e,t,{...n,exponent:.5})}function G3(e,t,{exponent:n=1,...i}){return Zm(e,mA().exponent(n=+n),hY(n),t,{...i,type:"diverging-pow"})}function aY(e,t,{base:n=10,pivot:i=1,domain:r=ju(t,i<0?zm:jr),...s}){return Zm(e,dA().base(n=+n),uY,t,{domain:r,pivot:i,...s})}function lY(e,t,{constant:n=1,...i}){return Zm(e,gA().constant(n=+n),dY(n),t,i)}const cY={apply(e){return e},invert(e){return e}},uY={apply:Math.log,invert:Math.exp},fY={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function hY(e){return e===.5?fY:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function dY(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function B3(e,t,n,i){return kf(e,t,n,i)}function gY(e,t,n){return B3(e,WG(),t,n)}function mY(e,t,n){return B3(e,GG(),t,n)}const Ff=Symbol("ordinal");function H3(e,t,n,{type:i,interval:r,domain:s,range:o,reverse:a,hint:l}){return r=cc(r,i),s===void 0&&(s=U3(n,r,e)),(i==="categorical"||i===Ff)&&(i="ordinal"),a&&(s=Td(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:i,domain:s,range:o,scale:t,hint:l,interval:r}}function pY(e,t,{type:n,interval:i,domain:r,range:s,scheme:o,unknown:a,...l}){i=cc(i,n),r===void 0&&(r=U3(t,i,e));let c;if(_e.get(e)===Hm)c=vY(t),s=s===void 0?wY(c):ce(s,Cv);else if(_e.get(e)===hs&&(s===void 0&&(n==="ordinal"||n===Ff)&&(s=BH(r,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=Bv(o),f=s[0],h=s[1]-s[0];s=({length:d})=>Ni(g=>u(f+h*g),d)}else s=N3(o);if(a===f_)throw new Error(`implicit unknown on ${e} scale is not supported`);return H3(e,rv().unknown(a),t,{...l,type:n,domain:r,range:s,hint:c})}function yY(e,t,{align:n=.5,padding:i=.5,...r}){return Y3(bW().align(n).padding(i),t,r,e)}function _Y(e,t,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:s=e==="fx"||e==="fy"?0:i,...o}){return Y3(Rm().align(n).paddingInner(r).paddingOuter(s),t,o,e)}function Y3(e,t,n,i){let{round:r}=n;return r!==void 0&&e.round(r=!!r),e=H3(i,e,t,n),e.round=r,e}function U3(e,t,n){const i=new uf;for(const{value:r,domain:s}of e){if(s!==void 0)return s();if(r!==void 0)for(const o of r)i.add(o)}if(t!==void 0){const[r,s]=ye(i).map(t.floor,t);return t.range(r,t.offset(s))}if(i.size>1e4&&_e.get(n)===rr)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Iu(i,gi)}function vE(e,t){let n;for(const{hint:i}of e){const r=i==null?void 0:i[t];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function vY(e){return{fill:vE(e,"fill"),stroke:vE(e,"stroke")}}function wY(e){return Se(e.fill)?fB:uB}function b_(e,{label:t,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:c,zero:u,align:f,padding:h,projection:d,facet:{label:g=t}={},...m}={}){const _={};for(const[p,y]of e){const w=m[p],v=q3(p,y,{round:_e.get(p)===rr?a:void 0,nice:l,clamp:c,zero:u,align:f,padding:h,projection:d,...w});if(v){let{label:x=p==="fx"||p==="fy"?g:t,percent:b,transform:E,inset:T,insetTop:M=T!==void 0?T:p==="y"?i:0,insetRight:C=T!==void 0?T:p==="x"?r:0,insetBottom:R=T!==void 0?T:p==="y"?s:0,insetLeft:A=T!==void 0?T:p==="x"?o:0}=w||{};if(E==null)E=void 0;else if(typeof E!="function")throw new Error("invalid scale transform; not a function");v.percent=!!b,v.label=x===void 0?xY(y,v):x,v.transform=E,p==="x"||p==="fx"?(v.insetLeft=+A,v.insetRight=+C):(p==="y"||p==="fy")&&(v.insetTop=+M,v.insetBottom=+R),_[p]=v}}return _}function wE(e){const t={},n={scales:t};for(const[i,r]of Object.entries(e)){const{scale:s,type:o,interval:a,label:l}=r;t[i]=K3(r),n[i]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function bY(e,t){const{x:n,y:i,fx:r,fy:s}=e,o=r||s?Uv(t):t;r&&bE(r,o),s&&xE(s,o);const a=r||s?V3(e,t):t;n&&bE(n,a),i&&xE(i,a)}function xY(e=[],t){let n;for(const{label:i}of e)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!xa(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Uv(e){const{marginTop:t,marginRight:n,marginBottom:i,marginLeft:r,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(i,c),marginLeft:Math.max(r,u),width:s,height:o}}function V3({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=Uv(n);return{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+r:a,height:t?t.scale.bandwidth()+i+s:l,facet:{width:a,height:l}}}function bE(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:i}=e,{width:r,marginLeft:s=0,marginRight:o=0}=t,a=s+n,l=r-o-i;e.range=[a,Math.max(a,l)],xa(e)||(e.range=j3(e)),e.scale.range(e.range)}X3(e)}function xE(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:i}=e,{height:r,marginTop:s=0,marginBottom:o=0}=t,a=s+n,l=r-o-i;e.range=[Math.max(a,l),a],xa(e)?e.range.reverse():e.range=j3(e),e.scale.range(e.range)}X3(e)}function X3(e){e.round===void 0&&CY(e)&&EY(e)<=30&&e.scale.round(!0)}function EY({scale:e}){const t=e.domain().length,[n,i]=e.range(),r=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-r,a=Math.abs(i-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function j3(e){const t=e.scale.domain().length+Z3(e);if(!(t>2))return e.range;const[n,i]=e.range;return Array.from({length:t},(r,s)=>n+s/(t-1)*(i-n))}function x_(e,t,n){return q3(e,n===void 0?void 0:[{hint:n}],{...t})}function q3(e,t=[],n={}){const i=TY(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&xa({type:i})){const r=t.map(({value:s})=>s).filter(s=>s!==void 0);r.some(wn)?qr(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${$a(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${$a(i)}".`):r.some(YB)?qr(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${$a(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${$a(i)}".`):r.some(UB)&&qr(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${$a(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${$a(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Mh(t,n,On);break;case"identity":switch(_e.get(e)){case rr:n=Mh(t,n,On);break;case Hm:n=Mh(t,n,SY);break}break;case"utc":case"time":n=Mh(t,n,zB);break}switch(i){case"diverging":return sY(e,t,n);case"diverging-sqrt":return oY(e,t,n);case"diverging-pow":return G3(e,t,n);case"diverging-log":return aY(e,t,n);case"diverging-symlog":return lY(e,t,n);case"categorical":case"ordinal":case Ff:return pY(e,t,n);case"cyclical":case"sequential":case"linear":return VH(e,t,n);case"sqrt":return XH(e,t,n);case"threshold":return Hv(e,t,n);case"quantile":return ZH(e,t,n);case"quantize":return KH(e,t,n);case"pow":return z3(e,t,n);case"log":return jH(e,t,n);case"symlog":return qH(e,t,n);case"utc":return mY(e,t,n);case"time":return gY(e,t,n);case"point":return yY(e,t,n);case"band":return _Y(e,t,n);case"identity":return QH(e);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function $a(e){return typeof e=="symbol"?e.description:e}const EE={toString:()=>"projection"};function TY(e,t,{type:n,domain:i,range:r,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=EE);for(const{type:c}of t)if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}if(n===EE)return;if(n!==void 0)return n;if(i===void 0&&!t.some(({value:c})=>c!==void 0))return;const l=_e.get(e);if(l===If)return"sqrt";if(l===Of||l===Lf)return"linear";if(l===Hm)return"ordinal";if((i||r||[]).length>2)return Mp(l);if(i!==void 0){if(be(i))return Mp(l);if(wn(i))return"utc"}else{const c=t.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(be))return Mp(l);if(c.some(wn))return"utc"}if(l===hs){if(o!=null||YH(s))return"diverging";if(GH(s))return"categorical"}return"linear"}function Mp(e){switch(e){case rr:return"point";case hs:return Ff;default:return"ordinal"}}function xa({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Ff}function Z3({type:e}){return e==="threshold"}function CY({type:e}){return e==="point"||e==="band"}function ui(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let i=1,r=t.length;i<r;++i)if(e(t[i])-n)return!1;return!0}function Mh(e,{domain:t,...n},i){for(const r of e)r.value!==void 0&&(r.value=i(r.value));return{domain:t===void 0?t:i(t),...n}}function SY(e){return ce(e,Cv)}function MY(e={}){let t;for(const n in e)if(_e.has(n)&&Ko(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=K3(x_(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function RY(e){return t=>{if(!_e.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function K3({scale:e,type:t,domain:n,range:i,interpolate:r,interval:s,transform:o,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:Yu(n),...i!==void 0&&{range:Yu(i)},...o!==void 0&&{transform:o},...a&&{percent:a},...c!==void 0&&{unknown:c},...s!==void 0&&{interval:s},...r!==void 0&&{interpolate:r},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function AY(e,t,n={}){let i=.5-Ze,r=.5+Ze,s=.5+Ze,o=.5-Ze;for(const{marginTop:m,marginRight:_,marginBottom:p,marginLeft:y}of t)m>i&&(i=m),_>r&&(r=_),p>s&&(s=p),y>o&&(o=y);let{margin:a,marginTop:l=a!==void 0?a:i,marginRight:c=a!==void 0?a:r,marginBottom:u=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;l=+l,c=+c,u=+u,f=+f;let{width:h=640,height:d=IY(e,n,{width:h,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-i+u-s)}=n;h=+h,d=+d;const g={width:h,height:d,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:m,marginTop:_=m!==void 0?m:l,marginRight:p=m!==void 0?m:c,marginBottom:y=m!==void 0?m:u,marginLeft:w=m!==void 0?m:f}=n.facet??{};_=+_,p=+p,y=+y,w=+w,g.facet={marginTop:_,marginRight:p,marginBottom:y,marginLeft:w}}return g}function IY({x:e,y:t,fy:n,fx:i},{projection:r,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const f=n?n.scale.domain().length:1,h=zH(r);if(h){const g=i?i.scale.domain().length:1,m=(1.1*f-.1)/(1.1*g-.1)*h,_=Math.max(.1,Math.min(10,m));return Math.round((o-u-l)*_+a+c)}const d=t?xa(t)?t.scale.domain().length:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const g=TE("y",t)/(TE("x",e)*s),m=i?i.scale.bandwidth():1,_=n?n.scale.bandwidth():1,p=m*(o-u-l)-e.insetLeft-e.insetRight;return(g*p+t.insetTop+t.insetBottom)/_+a+c}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!i*30+60}function TE(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:i}=t;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const a=t.scale.exponent();r=l=>Math.pow(l,a);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=ye(i);return Math.abs(r(o)-r(s))}function LY(e,t){const{fx:n,fy:i}=b_(e,t),r=n==null?void 0:n.scale.domain(),s=i==null?void 0:i.scale.domain();return r&&s?qN(r,s).map(([o,a],l)=>({x:o,y:a,i:l})):r?r.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function OY(e,{x:t,y:n}){return t&&(t=E_(t)),n&&(n=E_(n)),e.filter(t&&n?i=>t.has(i.x)&&n.has(i.y):t?i=>t.has(i.x):i=>n.has(i.y)).sort(t&&n?(i,r)=>t.get(i.x)-t.get(r.x)||n.get(i.y)-n.get(r.y):t?(i,r)=>t.get(i.x)-t.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Vv(e,{fx:t,fy:n}){const i=cs(e),r=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?hl(i,o=>(o.fx=r[o[0]],o.fy=s[o[0]],o),o=>r[o],o=>s[o]):t?hl(i,o=>(o.fx=r[o[0]],o),o=>r[o]):hl(i,o=>(o.fy=s[o[0]],o),o=>s[o])}function kY(e,t,{marginTop:n,marginLeft:i}){return e&&t?({x:r,y:s})=>`translate(${e(r)-i},${t(s)-n})`:e?({x:r})=>`translate(${e(r)-i},0)`:({y:r})=>`translate(0,${t(r)-n})`}function FY(e){const t=[],n=new Uint32Array(dr(e,i=>i.length));for(const i of e){let r=0;for(const s of e)i!==s&&(n.set(s,r),r+=s.length);t.push(n.slice(0,r))}return t}const PY=new Map([["top",Rp],["right",Lp],["bottom",Ap],["left",Ip],["top-left",Rh(Rp,Ip)],["top-right",Rh(Rp,Lp)],["bottom-left",Rh(Ap,Ip)],["bottom-right",Rh(Ap,Lp)],["top-empty",$Y],["right-empty",GY],["bottom-empty",zY],["left-empty",WY],["empty",BY]]);function NY(e){if(e==null)return null;const t=PY.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const CE=new WeakMap;function E_(e){let t=CE.get(e);return t||CE.set(e,t=new oa(ce(e,(n,i)=>[n,i]))),t}function fo(e,t){return E_(e).get(t)}function DY(e,t,n){return t=zo(t),n=zo(n),e.find(i=>Object.is(zo(i.x),t)&&Object.is(zo(i.y),n))}function Km(e,t,n){var i;return(i=DY(e,t,n))==null?void 0:i.empty}function Rp(e,{y:t},{y:n}){return t?fo(t,n)===0:!0}function Ap(e,{y:t},{y:n}){return t?fo(t,n)===t.length-1:!0}function Ip(e,{x:t},{x:n}){return t?fo(t,n)===0:!0}function Lp(e,{x:t},{x:n}){return t?fo(t,n)===t.length-1:!0}function $Y(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=fo(t,i);if(s>0)return Km(e,n,t[s-1])}function zY(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=fo(t,i);if(s<t.length-1)return Km(e,n,t[s+1])}function WY(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=fo(t,n);if(s>0)return Km(e,t[s-1],i)}function GY(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=fo(t,n);if(s<t.length-1)return Km(e,t[s+1],i)}function BY(e,t,{empty:n}){return n}function Rh(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function Op(e,{channels:{fx:t,fy:n},groups:i}){return t&&n?e.map(({x:r,y:s})=>{var o;return((o=i.get(r))==null?void 0:o.get(s))??[]}):t?e.map(({x:r})=>i.get(r)??[]):e.map(({y:r})=>i.get(r)??[])}class le{constructor(t,n={},i={},r){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:c,dx:u=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:g=h,marginBottom:m=h,marginLeft:_=h,clip:p=r==null?void 0:r.clip,channels:y,tip:w,render:v}=i;if(this.data=t,this.sort=Js(c)?c:null,this.initializer=$n(i).initializer,this.transform=this.initializer?i.transform:_r(i).transform,s===null||s===!1?this.facet=null:(this.facet=Jn(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===yu&&typeof a=="string"?[a]:a,this.fy=t===yu&&typeof l=="string"?[l]:l),this.facetAnchor=NY(o),n=xv(n),y!==void 0&&(n={...HY(y),...n}),r!==void 0&&(n={...M3(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([x,b])=>{if(Zi(b.value)){const{value:E,label:T=b.label,scale:M=b.scale}=b.value;b={...b,label:T,scale:M,value:E}}if(t===yu&&typeof b.value=="string"){const{value:E}=b;b={...b,value:[E]}}return[x,b]}).filter(([x,{value:b,optional:E}])=>{if(b!=null)return!0;if(E)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+u,this.dy=+f,this.marginTop=+d,this.marginRight=+g,this.marginBottom=+m,this.marginLeft=+_,this.clip=A3(p),this.tip=YY(w),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:b}=n[x];if(!(b!=="x"&&b!=="y"))throw new Error("super-faceting cannot use x or y")}}v!=null&&(this.render=J3(v,this.render))}initialize(t,n,i){let r=Dn(this.data);t===void 0&&r!=null&&(t=[cs(r)]);const s=t;this.transform!=null&&({facets:t,data:r}=this.transform(r,t,i),r=Dn(r)),t!==void 0&&(t.original=s);const o=x3(this.channels,r);return this.sort!=null&&gH(r,t,o,n,this.sort),{data:r,facets:t,channels:o}}filter(t,n,i){for(const r in n){const{filter:s=_n}=n[r];if(s!==null){const o=i[r];t=t.filter(a=>s(o[a]))}}return t}project(t,n,i){for(const r in t)if(t[r].scale==="x"&&/^x|x$/.test(r)){const s=r.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&F3(r,s,n,i.projection)}}scale(t,n,i){const r=Dv(t,n);return i.projection&&this.project(t,r,i),r}}function Wi(...e){return e.plot=le.prototype.plot,e}function J3(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,i,r,s,o,a){return e.call(this,n,i,r,s,o,(l,c,u,f,h)=>t.call(this,l,c,u,f,h,a))}}function HY(e){return Object.fromEntries(Object.entries(xv(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Mf(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function YY(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Jn(e,"tip",["x","y","xy"]):e}function uc(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:yi(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const SE=new WeakMap;function Xv(e,t,{x:n,y:i,px:r,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o=+o,r!=null&&(n??(n=null),a={...a,px:{value:r,scale:"x"}}),s!=null&&(i??(i=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:i,channels:a,...c,render:J3(function(u,f,h,d,g,m){g={...g,pointerSticky:!1};const _=g.ownerSVGElement,{data:p}=g.getMarkState(this);let y=SE.get(_);y||SE.set(_,y={sticky:!1,roots:[],renders:[]});let w=y.renders.push(Q)-1;const{x:v,y:x,fx:b,fy:E}=f;let T=b?b(u.fx)-d.marginLeft:0,M=E?E(u.fy)-d.marginTop:0;v!=null&&v.bandwidth&&(T+=v.bandwidth()/2),x!=null&&x.bandwidth&&(M+=x.bandwidth()/2);const C=u.fi!=null;let R;if(C){let z=y.facetStates;z||(y.facetStates=z=new Map),R=z.get(this),R||z.set(this,R=new Map)}const[A,k]=vr(this,d),{px:O,py:I}=h,F=O?z=>O[z]:Q3(h,A),P=I?z=>I[z]:t6(h,k);let G,j,U,q;function W(z,Y){if(C)if(q&&(q=cancelAnimationFrame(q)),z==null)R.delete(u.fi);else{R.set(u.fi,Y),q=requestAnimationFrame(()=>{q=null;for(const[$,V]of R)if(V<Y||V===Y&&$<u.fi){z=null;break}Q(z)});return}Q(z)}function Q(z){if(G===z&&U===y.sticky)return;G=z,U=g.pointerSticky=y.sticky;const Y=G==null?[]:[G];C&&(Y.fx=u.fx,Y.fy=u.fy,Y.fi=u.fi);const $=m(Y,f,h,d,g);if(j){if(C){const V=j.parentNode,K=j.getAttribute("transform"),S=$.getAttribute("transform");K?$.setAttribute("transform",K):$.removeAttribute("transform"),S?V.setAttribute("transform",S):V.removeAttribute("transform"),$.removeAttribute("aria-label"),$.removeAttribute("aria-description"),$.removeAttribute("aria-hidden")}j.replaceWith($)}return y.roots[w]=j=$,G==null&&(R==null?void 0:R.size)>1||g.dispatchValue(G==null?null:p[G]),$}function nt(z){if(y.sticky||z.pointerType==="mouse"&&z.buttons===1)return;let[Y,$]=B1(z);Y-=T,$-=M;const V=Y<d.marginLeft||Y>d.width-d.marginRight?1:e,K=$<d.marginTop||$>d.height-d.marginBottom?1:t;let S=null,L=o*o;for(const D of u){const B=V*(F(D)-Y),H=K*(P(D)-$),X=B*B+H*H;X<=L&&(S=D,L=X)}if(S!=null&&(e!==1||t!==1)){const D=F(S)-Y,B=P(S)-$;L=D*D+B*B}W(S,L)}function st(z){z.pointerType==="mouse"&&G!=null&&(y.sticky&&y.roots.some(Y=>Y==null?void 0:Y.contains(z.target))||(y.sticky?(y.sticky=!1,y.renders.forEach(Y=>Y(null))):(y.sticky=!0,Q(G)),z.stopImmediatePropagation()))}function ot(z){z.pointerType==="mouse"&&(y.sticky||W(null))}return _.addEventListener("pointerenter",nt),_.addEventListener("pointermove",nt),_.addEventListener("pointerdown",st),_.addEventListener("pointerleave",ot),Q(null)},l)}}function jv(e){return Xv(1,1,e)}function qu(e){return Xv(1,.01,e)}function qv(e){return Xv(.01,1,e)}function Q3({x1:e,x2:t,x:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function t6({y1:e,y2:t,y:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function e6(e){return xa(e)&&e.interval===void 0?void 0:"tabular-nums"}function UY(e,t){let{label:n=e.label,tickSize:i=6,width:r=240,height:s=44+i,marginTop:o=18,marginRight:a=0,marginBottom:l=16+i,marginLeft:c=0,style:u,ticks:f=(r-c-a)/64,tickFormat:h,fontVariant:d=e6(e),round:g=!0,opacity:m,className:_}=t;const p=Xm(t);_=Wv(_),m=Re(m)[1],h===null&&(h=()=>null);const y=Kt("svg",p).attr("class",`${_}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",s).attr("viewBox",`0 0 ${r} ${s}`).call(A=>A.append("style").text(`.${_}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${_}-ramp text {
  white-space: pre;
}`)).call(Gv,u);let w=A=>A.selectAll(".tick line").attr("y1",o+l-s),v;const x=g?(A,k)=>A.rangeRound(k):(A,k)=>A.range(k),{type:b,domain:E,range:T,interpolate:M,scale:C,pivot:R}=e;if(M){const A=T===void 0?M:Em(M.length===1?Yv(M):M,T);v=x(C.copy(),Ni(nn(c,r-a),Math.min(E.length+(R!==void 0),T===void 0?1/0:T.length)));const k=256,O=p.document.createElement("canvas");O.width=k,O.height=1;const I=O.getContext("2d");for(let F=0,P=k-1;F<k;++F)I.fillStyle=A(F/P),I.fillRect(F,0,1,1);y.append("image").attr("opacity",m).attr("x",c).attr("y",o).attr("width",r-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",O.toDataURL())}else if(b==="threshold"){const A=E,k=h===void 0?O=>O:typeof h=="string"?ao(h):h;v=x(nr().domain([-1,T.length-1]),[c,r-a]),y.append("g").attr("fill-opacity",m).selectAll().data(T).enter().append("rect").attr("x",(O,I)=>v(I-1)).attr("y",o).attr("width",(O,I)=>v(I)-v(I-1)).attr("height",s-o-l).attr("fill",O=>O),f=ce(A,(O,I)=>I),h=O=>k(A[O],O)}else v=x(Rm().domain(E),[c,r-a]),y.append("g").attr("fill-opacity",m).selectAll().data(E).enter().append("rect").attr("x",v).attr("y",o).attr("width",Math.max(0,v.bandwidth()-1)).attr("height",s-o-l).attr("fill",C),w=()=>{};return y.append("g").attr("transform",`translate(0,${s-l})`).call(z1(v).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(i).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Te(d,"normal")).call(w).call(A=>A.select(".domain").remove()),n!==void 0&&y.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),y.node()}const pg=Math.PI/180;function fc(e,{marker:t,markerStart:n=t,markerMid:i=t,markerEnd:r=t}={}){e.markerStart=kp(n),e.markerMid=kp(i),e.markerEnd=kp(r)}function kp(e){if(e==null||e===!1)return null;if(e===!0)return RE;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return ME("auto");case"arrow-reverse":return ME("auto-start-reverse");case"dot":return VY;case"circle":case"circle-fill":return RE;case"circle-stroke":return XY}throw new Error(`invalid marker: ${e}`)}function ME(e){return(t,n)=>Kt("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function VY(e,t){return Kt("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function RE(e,t){return Kt("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function XY(e,t){return Kt("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let jY=0;function Pf(e,t,{stroke:n},i){return n6(e,t,n&&(r=>n[r]),i)}function qY(e,t,{stroke:n},i){return n6(e,t,n&&(([r])=>n[r]),i)}function n6(e,{markerStart:t,markerMid:n,markerEnd:i,stroke:r},s=()=>r,o){const a=new Map;function l(c){return function(u){const f=s(u);let h=a.get(c);h||a.set(c,h=new Map);let d=h.get(f);if(!d){const g=this.parentNode.insertBefore(c(f,o),this),m=`plot-marker-${++jY}`;g.setAttribute("id",m),h.set(f,d=`url(#${m})`)}return d}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),i&&e.attr("marker-end",l(i))}function Nf({inset:e,insetLeft:t,insetRight:n,...i}={}){return[t,n]=i6(e,t,n),{inset:e,insetLeft:t,insetRight:n,...i}}function Df({inset:e,insetTop:t,insetBottom:n,...i}={}){return[t,n]=i6(e,t,n),{inset:e,insetTop:t,insetBottom:n,...i}}function i6(e,t,n){return e===void 0&&t===void 0&&n===void 0?Ze?[1,0]:[.5,.5]:[t,n]}function r6(e,{interval:t}){return e={...Mf(e)},e.interval=bv(e.interval===void 0?t:e.interval),e}function Jm(e,t,n,i){const{[e]:r,[`${e}1`]:s,[`${e}2`]:o}=n,{value:a,interval:l}=r6(r,n);if(a==null||l==null&&!i)return n;const c=us(r);if(l==null){let d;const g={transform:m=>d||(d=Nt(m,a)),label:c};return{...n,[e]:void 0,[`${e}1`]:s===void 0?g:s,[`${e}2`]:o===void 0?g:o}}let u,f;function h(d){return f!==void 0&&d===u?f:f=ce(Nt(u=d,a),g=>l.floor(g))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:h,label:c}:s,[`${e}2`]:o===void 0?{transform:d=>h(d).map(g=>l.offset(g)),label:c}:o})}function s6(e,t,n){const{[e]:i}=n,{value:r,interval:s}=r6(i,n);return r==null||s==null?n:t({...n,[e]:{label:us(i),transform:o=>{const a=ce(Nt(o,r),c=>s.floor(c)),l=a.map(c=>s.offset(c));return a.map(wn(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function o6(e={}){return Jm("x",Nf,e,!0)}function a6(e={}){return Jm("y",Df,e,!0)}function l6(e={}){return Jm("x",Nf,e)}function c6(e={}){return Jm("y",Df,e)}function u6(e={}){return s6("x",Nf,e)}function f6(e={}){return s6("y",Df,e)}const h6={ariaLabel:"rule",fill:null,stroke:"currentColor"};class d6 extends le{constructor(t,n={}){const{x:i,y1:r,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(t,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},uc(n,"x"),h6),this.insetTop=zt(a),this.insetBottom=zt(l),fc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y1:c,y2:u}=i,{width:f,height:h,marginTop:d,marginRight:g,marginLeft:m,marginBottom:_}=r,{insetTop:p,insetBottom:y}=this;return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,{x:l&&o},Ze,0).call(w=>w.selectAll().data(t).enter().append("line").call(he,this).attr("x1",l?v=>l[v]:(m+f-g)/2).attr("x2",l?v=>l[v]:(m+f-g)/2).attr("y1",c&&!ui(a)?v=>c[v]+p:d+p).attr("y2",u&&!ui(a)?a.bandwidth?v=>u[v]+a.bandwidth()-y:v=>u[v]-y:h-_-y).call(ze,this,i).call(Pf,this,i,s)).node()}}class g6 extends le{constructor(t,n={}){const{x1:i,x2:r,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},uc(n,"y"),h6),this.insetRight=zt(a),this.insetLeft=zt(l),fc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{y:l,x1:c,x2:u}=i,{width:f,height:h,marginTop:d,marginRight:g,marginLeft:m,marginBottom:_}=r,{insetLeft:p,insetRight:y}=this;return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,{y:l&&a},0,Ze).call(w=>w.selectAll().data(t).enter().append("line").call(he,this).attr("x1",c&&!ui(o)?v=>c[v]+p:m+p).attr("x2",u&&!ui(o)?o.bandwidth?v=>u[v]+o.bandwidth()-y:v=>u[v]-y:f-g-y).attr("y1",l?v=>l[v]:(d+h-_)/2).attr("y2",l?v=>l[v]:(d+h-_)/2).call(ze,this,i).call(Pf,this,i,s)).node()}}function rs(e,t){let{x:n=bt,y:i,y1:r,y2:s,...o}=c6(t);return[r,s]=m6(i,r,s),new d6(e,{...o,x:n,y1:r,y2:s})}function Qs(e,t){let{y:n=bt,x:i,x1:r,x2:s,...o}=l6(t);return[r,s]=m6(i,r,s),new g6(e,{...o,y:n,x1:r,x2:s})}function m6(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Qm(e,...t){let n=t.length;for(let i=0,r=!0;i<n;++i)typeof t[i]!="function"&&(r&&(e=e.slice(),r=!1),e.splice(i,2,e[i]+t[i]+e[i+1]),t.splice(i,1),--i,--n);return i=>{let r=e[0];for(let s=0;s<n;++s)r+=t[s](i)+e[s+1];return r}}const ZY={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},p6="­";let t0=class extends le{constructor(t,n={}){const{x:i,y:r,text:s=fs(t)&&g3(t)?bt:zn,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:m,fontVariant:_,fontWeight:p,rotate:y}=n,[w,v]=Re(y,0),[x,b]=tU(g);if(super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:BB(w),optional:!0},text:{value:s,filter:gv,optional:!0}},n,ZY),this.rotate=v,this.textAnchor=Te(a,"middle"),this.lineAnchor=Jn(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=y6(f),this.monospace=!!h,this.fontFamily=sn(d),this.fontSize=b,this.fontStyle=sn(m),this.fontVariant=sn(_),this.fontWeight=sn(p),this.frameAnchor=Af(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=b6(this),this.clipLine=x6(this)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,rotate:u,text:f,title:h,fontSize:d}=i,{rotate:g}=this,[m,_]=vr(this,r);return Kt("svg:g",s).call(pe,this,r,s).call(w6,this,f,r).call(ae,this,{x:l&&o,y:c&&a}).call(p=>p.selectAll().data(t).enter().append("text").call(he,this).call(KY,this,f,h).attr("transform",Qm`translate(${l?y=>l[y]:m},${c?y=>c[y]:_})${u?y=>` rotate(${u[y]})`:g?` rotate(${g})`:""}`).call(pt,"font-size",d&&(y=>d[y])).call(ze,this,i)).node()}};function y6(e){return e==null?null:Jn(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function KY(e,t,n,i){if(!n)return;const{lineAnchor:r,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(c){const u=a(ma(n[c])??"").map(l),f=u.length,h=r==="top"?.71:r==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let g=0;g<f;++g){if(++d,!u[g])continue;const m=this.ownerDocument.createElementNS(aa.svg,"tspan");m.setAttribute("x",0),g===d-1?m.setAttribute("y",`${(h+g)*s}em`):m.setAttribute("dy",`${d*s}em`),m.textContent=u[g],this.appendChild(m),d=0}}else h&&this.setAttribute("y",`${h*s}em`),this.textContent=u[0];if(o&&!i&&u[0]!==n[c]){const d=this.ownerDocument.createElementNS(aa.svg,"title");d.textContent=n[c],this.appendChild(d)}})}function Wl(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Yi(t,n)),new t0(e,{...i,x:t,y:n})}function _6(e,{x:t=bt,...n}={}){return new t0(e,f6({...n,x:t}))}function v6(e,{y:t=bt,...n}={}){return new t0(e,u6({...n,y:t}))}function w6(e,t,n){pt(e,"text-anchor",t.textAnchor),pt(e,"font-family",t.fontFamily),pt(e,"font-size",t.fontSize),pt(e,"font-style",t.fontStyle),pt(e,"font-variant",t.fontVariant===void 0?JY(n):t.fontVariant),pt(e,"font-weight",t.fontWeight)}function JY(e){return e&&(il(e)||wn(e))?"tabular-nums":void 0}const QY=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function tU(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),QY.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function eU(e,t,n){const i=[];let r,s=0;for(const[o,a,l]of nU(e)){if(r===void 0&&(r=o),s>r&&n(e,r,a)>t&&(i.push(e.slice(r,s)+(e[s-1]===p6?"-":"")),r=o),l){i.push(e.slice(r,a)),r=void 0;continue}s=a}return i}function*nU(e){let t=0,n=0;const i=e.length;for(;n<i;){let r=1;switch(e[n]){case p6:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++r;case`
`:yield[t,n,!0],n+=r,t=n;break;default:++n;break}}yield[t,n,!0]}const AE={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Zv(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=hc(e,r))i+=AE[e[r]]??(T6(e,r)?120:AE.e);return i}function Kv(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=hc(e,r))i+=T6(e,r)?200:100;return i}function b6({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const i=e?Kv:Zv,r=t*100;return s=>eU(s,r,i)}function x6({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const i=e?Kv:Zv,r=t*100;switch(n){case"clip-start":return s=>LE(s,r,i,"");case"clip-end":return s=>IE(s,r,i,"");case"ellipsis-start":return s=>LE(s,r,i,pl);case"ellipsis-middle":return s=>iU(s,r,i,pl);case"ellipsis-end":return s=>IE(s,r,i,pl)}}const pl="…";function Gl(e,t,n,i){const r=[];let s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=hc(e,o);const c=n(e,o,a);if(s+c>t){for(s+=i;s>t&&o>0;)a=o,o=r.pop(),s-=n(e,o,a);return[o,t-s]}s+=c,r.push(o)}return[-1,0]}function IE(e,t,n,i){e=e.trim();const r=n(i),[s]=Gl(e,t,n,r);return s<0?e:e.slice(0,s).trimEnd()+i}function iU(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i)/2,[o,a]=Gl(e,t/2,n,s),[l]=Gl(e,r-t/2-a+s,n,-s);return l<0?i:e.slice(0,o).trimEnd()+i+e.slice(hc(e,l)).trimStart()}function LE(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i),[o]=Gl(e,r-t+s,n,-s);return o<0?i:i+e.slice(hc(e,o)).trimStart()}const T_=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,OE=/\p{Extended_Pictographic}/uy;function hc(e,t){return t+=rU(e,t)?2:1,oU(e,t)&&(t=T_.lastIndex),sU(e,t)?hc(e,t+1):t}function E6(e,t){return e.charCodeAt(t)<128}function rU(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const i=e.charCodeAt(t+1);return i>=56320&&i<57344}return!1}function sU(e,t){return e.charCodeAt(t)===8205}function oU(e,t){return E6(e,t)?!1:(T_.lastIndex=t,T_.test(e))}function T6(e,t){return E6(e,t)?!1:(OE.lastIndex=t,OE.test(e))}const C6={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},S6=3.5,aU=S6*5,M6={draw(e,t,n){const i=t*n/aU;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-i,i-t),e.lineTo(0,-t),e.lineTo(i,i-t)}},R6={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},lU=new Map([["arrow",M6],["spike",R6]]);function cU(e){return e&&typeof e.draw=="function"}function uU(e){if(cU(e))return e;const t=lU.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class e0 extends le{constructor(t,n={}){const{x:i,y:r,r:s=S6,length:o,rotate:a,shape:l=M6,anchor:c="middle",frameAnchor:u}=n,[f,h]=Re(o,12),[d,g]=Re(a,0);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,C6),this.r=+s,this.length=h,this.rotate=g,this.shape=uU(l),this.anchor=Jn(c,"anchor",["start","middle","end"]),this.frameAnchor=Af(u)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,length:u,rotate:f}=i,{length:h,rotate:d,anchor:g,shape:m,r:_}=this,[p,y]=vr(this,r);return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,{x:l&&o,y:c&&a}).call(w=>w.selectAll().data(t).enter().append("path").call(he,this).attr("transform",Qm`translate(${l?v=>l[v]:p},${c?v=>c[v]:y})${f?v=>` rotate(${f[v]})`:d?` rotate(${d})`:""}${g==="start"?"":g==="end"?u?v=>` translate(0,${u[v]})`:` translate(0,${h})`:u?v=>` translate(0,${u[v]/2})`:` translate(0,${h/2})`}`).attr("d",u?v=>{const x=Gr();return m.draw(x,u[v],_),x}:(()=>{const v=Gr();return m.draw(v,h,_),v})()).call(ze,this,i)).node()}}function A6(e,t={}){let{x:n,y:i,...r}=t;return t.frameAnchor===void 0&&([n,i]=Yi(n,i)),new e0(e,{...r,x:n,y:i})}function I6(e,t={}){const{x:n=bt,...i}=t;return new e0(e,{...i,x:n})}function L6(e,t={}){const{y:n=bt,...i}=t;return new e0(e,{...i,y:n})}function fU(e,t={}){const{shape:n=R6,stroke:i=C6.stroke,strokeWidth:r=1,fill:s=i,fillOpacity:o=.3,anchor:a="start",...l}=t;return A6(e,{...l,shape:n,stroke:i,strokeWidth:r,fill:s,fillOpacity:o,anchor:a})}function ho(e,t){return arguments.length<2&&!fs(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function n0({anchor:e}={},t){return e===void 0?t[0]:Jn(e,"anchor",t)}function O6(e){return n0(e,["left","right"])}function k6(e){return n0(e,["right","left"])}function F6(e){return n0(e,["bottom","top"])}function P6(e){return n0(e,["top","bottom"])}function Jv(){const[e,t]=ho(...arguments);return $6("y",O6(t),e,t)}function N6(){const[e,t]=ho(...arguments);return $6("fy",k6(t),e,t)}function Qv(){const[e,t]=ho(...arguments);return z6("x",F6(t),e,t)}function D6(){const[e,t]=ho(...arguments);return z6("fx",P6(t),e,t)}function $6(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:g=e==="y"?6:0,tickPadding:m,tickRotate:_,x:p,margin:y,marginTop:w=y===void 0?20:y,marginRight:v=y===void 0?t==="right"?40:0:y,marginBottom:x=y===void 0?20:y,marginLeft:b=y===void 0?t==="left"?40:0:y,label:E,labelAnchor:T,labelArrow:M,labelOffset:C,...R}){return g=zt(g),m=zt(m),_=zt(_),T!==void 0&&(T=Jn(T,"labelAnchor",["center","top","bottom"])),M=K6(M),Wi(g&&!Se(s)?hU(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:_,x:p,...R}):null,Se(l)?null:gU(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:_,x:p,marginTop:w,marginRight:v,marginBottom:x,marginLeft:b,...R}),!Se(l)&&E!==null?Wl([],X6({fill:l,fillOpacity:c,...R},function(A,k,O,I,F){const P=I[e],{marginTop:G,marginRight:j,marginBottom:U,marginLeft:q}=e==="y"&&F.inset||F,W=T??(P.bandwidth?"center":"top"),Q=C??(t==="right"?j:q)-3;return W==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=W,this.frameAnchor=`${W}-${t}`,this.rotate=0),this.dy=W==="top"?3-G:W==="bottom"?U-3:0,this.dx=t==="right"?Q:-Q,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Z6(e,P,{anchor:t,label:E,labelAnchor:W,labelArrow:M})]}}}})):null)}function z6(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:g=e==="x"?6:0,tickPadding:m,tickRotate:_,y:p,margin:y,marginTop:w=y===void 0?t==="top"?30:0:y,marginRight:v=y===void 0?20:y,marginBottom:x=y===void 0?t==="bottom"?30:0:y,marginLeft:b=y===void 0?20:y,label:E,labelAnchor:T,labelArrow:M,labelOffset:C,...R}){return g=zt(g),m=zt(m),_=zt(_),T!==void 0&&(T=Jn(T,"labelAnchor",["center","left","right"])),M=K6(M),Wi(g&&!Se(s)?dU(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:_,y:p,...R}):null,Se(l)?null:mU(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:_,y:p,marginTop:w,marginRight:v,marginBottom:x,marginLeft:b,...R}),!Se(l)&&E!==null?Wl([],X6({fill:l,fillOpacity:c,...R},function(A,k,O,I,F){const P=I[e],{marginTop:G,marginRight:j,marginBottom:U,marginLeft:q}=e==="x"&&F.inset||F,W=T??(P.bandwidth?"center":"right"),Q=C??(t==="top"?G:U)-3;return W==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${W}`,this.textAnchor=W==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-Q:Q,this.dx=W==="right"?j-3:W==="left"?3-q:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Z6(e,P,{anchor:t,label:E,labelAnchor:W,labelArrow:M})]}}}})):null)}function hU(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:h=0,y:d=e==="y"?void 0:null,...g}){return dc(L6,e,t,`${e}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:d,...g,dx:t==="left"?+h-Ze+ +u:+h+Ze-f,anchor:"start",length:l,shape:t==="left"?vU:wU})}function dU(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:h=0,x:d=e==="x"?void 0:null,...g}){return dc(I6,e,t,`${e}-axis tick`,n,{strokeWidth:i,strokeLinejoin:s,strokeLinecap:r,facetAnchor:o,frameAnchor:a,x:d,...g,dy:t==="bottom"?+h-Ze-f:+h+Ze+ +u,anchor:"start",length:l,shape:t==="bottom"?yU:_U})}function gU(e,t,n,{facetAnchor:i=t+(e==="y"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*pg):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:g=h,dx:m=0,y:_=e==="y"?void 0:null,...p}){return dc(v6,e,t,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,y:_,...p,dx:t==="left"?+m-s-a+ +d:+m+ +s+ +a-g},function(y,w,v,x,b){f===void 0&&(this.fontVariant=q6(y)),l===void 0&&(b.text=j6(y,w,v,x,t))})}function mU(e,t,n,{facetAnchor:i=t+(e==="x"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*pg):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:g=h,dy:m=0,x:_=e==="x"?void 0:null,...p}){return dc(_6,e,t,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,x:_,...p,dy:t==="bottom"?+m+ +s+ +a-g:+m-s-a+ +d},function(y,w,v,x,b){f===void 0&&(this.fontVariant=q6(y)),l===void 0&&(b.text=j6(y,w,v,x,t))})}function W6(){const[e,t]=ho(...arguments);return Y6("y",O6(t),e,t)}function G6(){const[e,t]=ho(...arguments);return Y6("fy",k6(t),e,t)}function B6(){const[e,t]=ho(...arguments);return U6("x",F6(t),e,t)}function H6(){const[e,t]=ho(...arguments);return U6("fx",P6(t),e,t)}function Y6(e,t,n,{y:i=e==="y"?void 0:null,x:r=null,x1:s=t==="left"?r:null,x2:o=t==="right"?r:null,...a}){return dc(Qs,e,t,`${e}-grid`,n,{y:i,x1:s,x2:o,...V6(a)})}function U6(e,t,n,{x:i=e==="x"?void 0:null,y:r=null,y1:s=t==="top"?r:null,y2:o=t==="bottom"?r:null,...a}){return dc(rs,e,t,`${e}-grid`,n,{x:i,y1:s,y2:o,...V6(a)})}function V6({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:i=t,strokeWidth:r=1,...s}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...s}}function X6({fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},f){return[,e]=Nn(e),[,t]=Re(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:f}}function dc(e,t,n,i,r,s,o){let a;function l(f,h,d,g,m,_){const p=f==null&&(t==="fx"||t==="fy"),{[t]:y}=g;if(!y)throw new Error(`missing scale: ${t}`);const w=y.domain();let{interval:v,ticks:x,tickFormat:b,tickSpacing:E=t==="x"?80:35}=s;if(typeof x=="string"&&J6(y)&&(v=x,x=void 0),x===void 0&&(x=cc(v,y.type)??pU(y,E)),f==null){if(fs(x))f=Dn(x);else if(nl(x))f=Fp(x,...ye(w));else if(y.interval){let M=y.interval;if(y.ticks){const[C,R]=ye(w),A=(R-C)/M[Cf];M=sE(M,A/x)??M,f=Fp(M,C,R)}else{f=w;const C=f.length;M=sE(M,C/x)??M,M!==y.interval&&(f=Fp(M,...ye(f)))}if(M===y.interval){const C=Math.round(f.length/x);C>1&&(f=f.filter((R,A)=>A%C===0))}}else y.ticks?f=y.ticks(x):f=w;if(!y.ticks&&f.length&&f!==w){const M=new uf(w);f=f.filter(C=>M.has(C)),f.length||qr(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[cs(f)]:a[t]={scale:t,value:bt}}o==null||o.call(this,y,f,x,b,a);const T=Object.fromEntries(Object.entries(a).map(([M,C])=>[M,{...C,value:Nt(f,C.value)}]));return p&&(h=_.filterFacets(f,T)),{data:f,facets:h,channels:T}}const c=$n(s).initializer,u=e(r,$n({...s,initializer:l},c));return r==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function pU(e,t){const[n,i]=ye(e.range());return(i-n)/t}function j6(e,t,n,i,r){return{value:tw(e,t,n,i,r)}}function tw(e,t,n,i,r){return typeof i=="function"?i:i===void 0&&t&&wn(t)?kB(t,r)??ma:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,i):i===void 0?ma:typeof i=="string"?(wn(e.domain())?xf:ao)(i):Zn(i)}function Fp(e,t,n){return e.range(t,e.offset(e.floor(n)))}const yU={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},_U={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},vU={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},wU={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function q6(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function bU(e){return Math.sign(zl(e.domain()))*Math.sign(zl(e.range()))}function Z6(e,t,{anchor:n,label:i=t.label,labelAnchor:r,labelArrow:s}={}){if(!(i==null||i.inferred&&J6(t)&&/^(date|time|year)$/i.test(i))){if(i=String(i),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(i)),!s)return i;if(s===!0){const o=bU(t);o&&(s=/x$/.test(e)||r==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function K6(e="auto"){return Se(e)?!1:typeof e=="boolean"?e:Jn(e,"labelArrow",["auto","up","right","down","left"])}function J6(e){return wn(e.domain())}function kE(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function xU(e,{opacity:t,...n}={}){if(!xa(e)&&!Z3(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return Q6(e,n,(i,r,s,o)=>i.append("svg").attr("width",s).attr("height",o).attr("fill",r.scale).attr("fill-opacity",Re(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function EU(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:Se(t)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[f,h]=Nn(t),[d,g]=Nn(i),m=kE(l,f),_=kE(l,d),p=o*o*Math.PI;return n=Re(n)[1],r=Re(r)[1],s=Re(s)[1],Q6(e,a,(y,w,v,x)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",v).attr("height",x).attr("fill",f==="color"?b=>m.scale(b):h).attr("fill-opacity",n).attr("stroke",d==="color"?b=>_.scale(b):g).attr("stroke-opacity",r).attr("stroke-width",s).append("path").attr("d",b=>{const E=Gr();return e.scale(b).draw(E,p),E}))}function Q6(e,t={},n){let{columns:i,tickFormat:r,fontVariant:s=e6(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:f,width:h}=t;const d=Xm(t);u=Wv(u),r=tw(e.scale,e.domain,void 0,r);const g=Kt("div",d).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,g.style("columns",i).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,l).call(_=>_.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,g.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,l).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),g.call(_=>_.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",c?`${+c}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",Te(s,"normal")).call(Gv,f).node()}const yg=new Map([["symbol",EU],["color",tL],["opacity",SU]]);function TU(e={}){for(const[t,n]of yg){const i=e[t];if(Ko(i)){const r=Xm(e);let s;if(t==="symbol"){const{fill:o,stroke:a=o===void 0&&Ko(e.color)?"color":void 0}=e;s={fill:o,stroke:a}}return n(x_(t,i,s),ew(r,i,e),o=>Ko(e[o])?x_(o,e[o]):null)}}throw new Error("unknown legend type; no scale found")}function CU(e,t,n={}){return(i,r)=>{if(!yg.has(i))throw new Error(`unknown legend type: ${i}`);if(i in e)return yg.get(i)(e[i],ew(t,n[i],r),s=>e[s])}}function ew({className:e,...t},{label:n,ticks:i,tickFormat:r}={},s){return qB(s,{className:e,...t},{label:n,ticks:i,tickFormat:r})}function tL(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return xU(e,n);case"ramp":return UY(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function SU({type:e,interpolate:t,...n},{legend:i=!0,color:r=gr(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return tL({type:e,...n,interpolate:MU(r)},{legend:i,...s})}function MU(e){const{r:t,g:n,b:i}=gr(e)||gr(0,0,0);return r=>`rgba(${t},${n},${i},${r})`}function RU(e,t,n){const i=[];for(const[r,s]of yg){const o=n[r];if(o!=null&&o.legend&&r in e){const a=s(e[r],ew(t,e[r],o),l=>e[l]);a!=null&&i.push(a)}}return i}const AU={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},IU={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class eL extends le{constructor(t={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:s=i,insetBottom:o=i,insetLeft:a=i,rx:l,ry:c}=t;super(yu,void 0,t,n==null?AU:IU),this.anchor=l3(n,"anchor",["top","right","bottom","left"]),this.insetTop=zt(r),this.insetRight=zt(s),this.insetBottom=zt(o),this.insetLeft=zt(a),this.rx=zt(l),this.ry=zt(c)}render(t,n,i,r,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:f}=r,{anchor:h,insetTop:d,insetRight:g,insetBottom:m,insetLeft:_,rx:p,ry:y}=this,w=c+_,v=u-a-g,x=o+d,b=f-l-m;return Kt(h?"svg:line":"svg:rect",s).datum(0).call(pe,this,r,s).call(he,this).call(ze,this,i).call(ae,this,{}).call(h==="left"?E=>E.attr("x1",w).attr("x2",w).attr("y1",x).attr("y2",b):h==="right"?E=>E.attr("x1",v).attr("x2",v).attr("y1",x).attr("y2",b):h==="top"?E=>E.attr("x1",w).attr("x2",v).attr("y1",x).attr("y2",x):h==="bottom"?E=>E.attr("x1",w).attr("x2",v).attr("y1",b).attr("y2",b):E=>E.attr("x",w).attr("y",x).attr("width",v-w).attr("height",b-x).attr("rx",p).attr("ry",y)).node()}}function nw(e){return new eL(e)}const Pp={ariaLabel:"tip",fill:"white",stroke:"currentColor"},LU=new Set(["geometry","href","src","ariaLabel","scales"]);class nL extends le{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&fs(t)&&g3(t)&&(n={...n,title:bt});const{x:i,y:r,x1:s,x2:o,y1:a,y2:l,anchor:c,monospace:u,fontFamily:f=u?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:d,fontVariant:g,fontWeight:m,lineHeight:_=1,lineWidth:p=20,frameAnchor:y,format:w,textAnchor:v="start",textOverflow:x,textPadding:b=8,title:E,pointerSize:T=12,pathFilter:M="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:i,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:r,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:E,optional:!0}},n,Pp),this.anchor=m3(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=Af(y),this.textAnchor=Te(v,"middle"),this.textPadding=+b,this.pointerSize=+T,this.pathFilter=sn(M),this.lineHeight=+_,this.lineWidth=+p,this.textOverflow=y6(x),this.monospace=!!u,this.fontFamily=sn(f),this.fontSize=zt(h),this.fontStyle=sn(d),this.fontVariant=sn(g),this.fontWeight=sn(m);for(const C in Pp)C in this.channels&&(this[C]=Pp[C]);this.splitLines=b6(this),this.clipLine=x6(this),this.format={...w}}render(t,n,i,r,s){const o=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:f,document:h}=s,{anchor:d,monospace:g,lineHeight:m,lineWidth:_}=this,{textPadding:p,pointerSize:y,pathFilter:w}=this,{marginTop:v,marginLeft:x}=r,{x1:b,y1:E,x2:T,y2:M,x:C=b??T,y:R=E??M}=i,A=c?c(t.fx)-x:0,k=u?u(t.fy)-v:0,[O,I]=vr(this,r),F=Q3(i,O),P=t6(i,I),G=g?Kv:Zv,j=G(pl);let U,q;"title"in i?(U=i.channels,q=NU):(U=PU.call(this,i,n),q=DU);const W=Kt("svg:g",s).call(pe,this,r,s).call(w6,this).call(ae,this,{x:C&&a,y:R&&l}).call(st=>st.selectAll().data(t).enter().append("g").attr("transform",ot=>`translate(${Math.round(F(ot))},${Math.round(P(ot))})`).call(he,this).call(ot=>ot.append("path").attr("filter",w)).call(ot=>ot.append("text").each(function(z){const Y=di(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const $=q.call(o,z,t,U,n,i);if(typeof $=="string")for(const V of o.splitLines($))Q(Y,{value:o.clipLine(V)});else{const V=new Set;for(const K of $){const{label:S=""}=K;S&&V.has(S)||(V.add(S),Q(Y,K))}}})));function Q(st,{label:ot,value:z,color:Y,opacity:$}){ot??(ot=""),z??(z="");const V=Y!=null||$!=null;let K,S=_*100;const[L]=Gl(ot,S,G,j);if(L>=0)ot=ot.slice(0,L).trimEnd()+pl,K=z.trim(),z="";else{(ot||!z&&!V)&&(z=" "+z);const[B]=Gl(z,S-G(ot),G,j);B>=0&&(z=z.slice(0,B).trimEnd()+pl,K=z.trim())}const D=st.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");ot&&D.append("tspan").attr("font-weight","bold").text(ot),z&&D.append(()=>h.createTextNode(z)),V&&D.append("tspan").text(" ■").attr("fill",Y).attr("fill-opacity",$).style("user-select","none"),K&&D.append("title").text(K)}function nt(){const{width:st,height:ot}=r.facet??r;W.selectChildren().each(function(z){let{x:Y,width:$,height:V}=this.getBBox();$=Math.round($),V=Math.round(V);let K=d;if(K===void 0){K=o.previousAnchor;const D=F(z)+A,B=P(z)+k,H=D+$+p*2<st,X=D-$-p*2>0,rt=B+V+y+p*2+7<ot,J=B-V-y-p*2>0,tt=(/-left$/.test(K)?H||!X:H&&!X)?"left":"right",Z=(/^top-/.test(K)?rt||!J:rt&&!J)?"top":"bottom";K=o.previousAnchor=`${Z}-${tt}`}const S=this.firstChild,L=this.lastChild;if(S.setAttribute("d",FU(K,y,p,$,V)),Y)for(const D of L.childNodes)D.setAttribute("x",-Y);L.setAttribute("y",`${+OU(K,L.childNodes.length,m).toFixed(6)}em`),L.setAttribute("transform",`translate(${kU(K,y,p,$,V)})`)}),W.attr("visibility",null)}return t.length&&(W.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(nt):typeof requestAnimationFrame<"u"&&requestAnimationFrame(nt)),W.node()}}function iL(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Yi(t,n)),new nL(e,{...i,x:t,y:n})}function OU(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function kU(e,t,n,i,r){switch(e){case"middle":return[-i/2,r/2];case"top-left":return[n,t+n];case"top":return[-i/2,t/2+n];case"top-right":return[-i-n,t+n];case"right":return[-t/2-i-n,r/2];case"bottom-left":return[n,-t-n];case"bottom":return[-i/2,-t/2-n];case"bottom-right":return[-i-n,-t-n];case"left":return[n+t/2,r/2]}}function FU(e,t,n,i,r){const s=i+n*2,o=r+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function PU({channels:e},t){var r,s;const n={};let i=this.format;i=FE(i,e,"x"),i=FE(i,e,"y"),this.format=i;for(const o in i){const a=i[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=__(e,o);l&&(n[o]=l)}}for(const o in e){if(o in n||o in i||LU.has(o))continue;const a=__(e,o);a&&(n[o]=a)}this.facet&&(t.fx&&!("fx"in i)&&(n.fx=!0),t.fy&&!("fy"in i)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const l=((r=n[o])==null?void 0:r.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(wn(l)?xf:ao)(a)}else if(a===void 0||a===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?tw(l,l.domain()):ma}}return n}function FE(e,t,n){if(!(n in e))return e;const i=`${n}1`,r=`${n}2`;if((i in e||!(i in t))&&(r in e||!(r in t)))return e;const s=Object.entries(e),o=e[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[i,o],[r,o]),Object.fromEntries(s)}function NU(e,t,{title:n}){return ma(n.value[e],e)}function*DU(e,t,n,i,r){for(const s in n){if(s==="fx"||s==="fy"){yield{label:_g(i,n,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:NE(i,n,"x"),value:PE(this.format.x2,n.x1,o,e)};else if(s==="y2"&&"y1"in n)yield{label:NE(i,n,"y"),value:PE(this.format.y2,n.y1,o,e)};else{const a=o.value[e],l=o.scale;if(!_n(a)&&l==null)continue;yield{label:_g(i,n,s),value:this.format[s](a,e),color:l==="color"?r[s][e]:null,opacity:l==="opacity"?r[s][e]:null}}}}function PE(e,t,n,i){var r;return(r=n.hint)!=null&&r.length?`${e(n.value[i]-t.value[i],i)}`:`${e(t.value[i],i)}–${e(n.value[i],i)}`}function NE(e,t,n){const i=_g(e,t,`${n}1`,n),r=_g(e,t,`${n}2`,n);return i===r?i:`${i}–${r}`}function _g(e,t,n,i=n){const r=t[n],s=e[(r==null?void 0:r.scale)??n];return String((s==null?void 0:s.label)??(r==null?void 0:r.label)??i)}function rL(e={}){var j;const{facet:t,style:n,title:i,subtitle:r,caption:s,ariaLabel:o,ariaDescription:a}=e,l=Wv(e.className),c=e.marks===void 0?[]:$E(e.marks);c.push(...UU(c));const u=HU(t,e),f=new Map;for(const U of c){const q=zE(U,u,e);q&&f.set(U,q)}const h=new Map;u&&$c(h,[u],e),$c(h,f,e);const d=$E(VU(c,h,e));for(const U of d){const q=zE(U,u,e);q&&f.set(U,q)}c.unshift(...d);let g=LY(h,e);if(g!==void 0){const U=u?Op(g,u):void 0;for(const W of c){if(W.facet===null||W.facet==="super")continue;const Q=f.get(W);Q!==void 0&&(Q.facetsIndex=W.fx!=null||W.fy!=null?Op(g,Q):U)}const q=new Set;for(const{facetsIndex:W}of f.values())W==null||W.forEach((Q,nt)=>{(Q==null?void 0:Q.length)>0&&q.add(nt)});g.forEach(0<q.size&&q.size<g.length?(W,Q)=>W.empty=!q.has(Q):W=>W.empty=!1);for(const W of c)if(W.facet==="exclude"){const Q=f.get(W);Q!==void 0&&(Q.facetsIndex=FY(Q.facetsIndex))}}for(const U of _e.keys())Ko(e[U])&&U!=="fx"&&U!=="fy"&&h.set(U,[]);const m=new Map;for(const U of c){if(m.has(U))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:q,channels:W}=f.get(U)??{},{data:Q,facets:nt,channels:st}=U.initialize(q,W,e);iw(st,e),m.set(U,{data:Q,facets:nt,channels:st})}const _=b_($c(h,m,e),e),p=AY(_,c,e);bY(_,p);const y=wE(_),{fx:w,fy:v}=y,x=w||v?V3(_,p):p,b=w||v?QU(y,p):p,E=Xm(e),T=E.document,M=vm("svg").call(T.documentElement);let C=M;E.ownerSVGElement=M,E.className=l,E.projection=PH(e,x),E.filterFacets=(U,q)=>Op(g,{channels:q,groups:Vv(U,q)}),E.getMarkState=U=>{const q=m.get(U),W=f.get(U);return{...q,channels:{...q.channels,...W==null?void 0:W.channels}}},E.dispatchValue=U=>{C.value!==U&&(C.value=U,C.dispatchEvent(new Event("input",{bubbles:!0})))};const R=new Set;for(const[U,q]of m)if(U.initializer!=null){const W=U.facet==="super"?b:x,Q=U.initializer(q.data,q.facets,q.channels,y,W,E);if(Q.data!==void 0&&(q.data=Q.data),Q.facets!==void 0&&(q.facets=Q.facets),Q.channels!==void 0){const{fx:nt,fy:st,...ot}=Q.channels;BU(ot),Object.assign(q.channels,ot);for(const z of Object.values(ot)){const{scale:Y}=z;Y!=null&&!KB(_e.get(Y))&&(sL(z,e),R.add(Y))}(nt!=null||st!=null)&&f.set(U,!0)}}if(R.size){const U=new Map;$c(U,m,e,nt=>R.has(nt)),$c(h,m,e,nt=>R.has(nt));const q=JU(b_(U,e),_),{scales:W,...Q}=wE(q);Object.assign(_,q),Object.assign(y,Q),Object.assign(y.scales,W)}let A,k;g!==void 0&&(A={x:w==null?void 0:w.domain(),y:v==null?void 0:v.domain()},g=OY(g,A),k=kY(w,v,p));for(const[U,q]of m)q.values=U.scale(q.channels,y,E);const{width:O,height:I}=p;di(M).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",O).attr("height",I).attr("viewBox",`0 0 ${O} ${I}`).attr("aria-label",o).attr("aria-description",a).call(U=>U.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(Gv,n);for(const U of c){const{channels:q,values:W,facets:Q}=m.get(U);if(g===void 0||U.facet==="super"){let nt=null;if(Q&&(nt=Q[0],nt=U.filter(nt,q,W),nt.length===0))continue;const st=U.render(nt,y,W,b,E);if(st==null)continue;M.appendChild(st)}else{let nt;for(const st of g){if(!(((j=U.facetAnchor)==null?void 0:j.call(U,g,A,st))??!st.empty))continue;let ot=null;if(Q){const Y=f.has(U);if(ot=Q[Y?st.i:0],ot=U.filter(ot,q,W),ot.length===0)continue;!Y&&ot===Q[0]&&(ot=Jo(ot)),ot.fx=st.x,ot.fy=st.y,ot.fi=st.i}const z=U.render(ot,y,W,x,E);if(z!=null){(nt??(nt=di(M).append("g"))).append(()=>z).datum(st);for(const Y of["aria-label","aria-description","aria-hidden","transform"])z.hasAttribute(Y)&&(nt.attr(Y,z.getAttribute(Y)),z.removeAttribute(Y))}}nt==null||nt.selectChildren().attr("transform",k)}}const F=RU(_,E,e),{figure:P=i!=null||r!=null||s!=null||F.length>0}=e;P&&(C=T.createElement("figure"),C.className=`${l}-figure`,C.style.maxWidth="initial",i!=null&&C.append(DE(T,i,"h2")),r!=null&&C.append(DE(T,r,"h3")),C.append(...F,M),s!=null&&C.append($U(T,s))),C.scale=RY(y.scales),C.legend=CU(_,E,e);const G=CH();return G>0&&di(M).append("text").attr("x",O).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${G.toLocaleString("en-US")} warning${G===1?"":"s"}. Please check the console.`),C}function DE(e,t,n){if(t.ownerDocument)return t;const i=e.createElement(n);return i.append(t),i}function $U(e,t){const n=e.createElement("figcaption");return n.append(t),n}function zU({marks:e=[],...t}={}){return rL({...t,marks:[...e,this]})}le.prototype.plot=zU;function $E(e){return e.flat(1/0).filter(t=>t!=null).map(WU)}function WU(e){return typeof e.render=="function"?e:new GU(e)}class GU extends le{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function iw(e,t){for(const n in e)sL(e[n],t);return e}function sL(e,t){const{scale:n,transform:i=!0}=e;if(n==null||!i)return;const{type:r,percent:s,interval:o,transform:a=s?l=>l*100:d3(o,r)}=t[n]??{};a!=null&&(e.value=ce(e.value,a),e.transform=!1)}function BU(e){for(const t in e)E3(t,e[t])}function $c(e,t,n,i=DB){var r,s;for(const{channels:o}of t.values())for(const a in o){const l=o[a],{scale:c}=l;if(c!=null&&i(c))if(c==="projection"){if(!$H(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,f=((s=n.y)==null?void 0:s.domain)===void 0;if(u||f){const[h,d]=WH(l);u&&Np(e,"x",h),f&&Np(e,"y",d)}}}else Np(e,c,l)}return e}function Np(e,t,n){const i=e.get(t);i!==void 0?i.push(n):e.set(t,[n])}function HU(e,t){if(e==null)return;const{x:n,y:i}=e;if(n==null&&i==null)return;const r=Dn(e.data);if(r==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Xu(r,{value:n,scale:"fx"})),i!=null&&(s.fy=Xu(r,{value:i,scale:"fy"})),iw(s,t);const o=Vv(r,s);return{channels:s,groups:o,data:e.data}}function zE(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:i,fy:r}=e;if(i!=null||r!=null){const c=Dn(e.data??i??r);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const u={};return i!=null&&(u.fx=Xu(c,{value:i,scale:"fx"})),r!=null&&(u.fy=Xu(c,{value:r,scale:"fy"})),iw(u,n),{channels:u,groups:Vv(c,u)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=Dn(e.data))==null?void 0:l.length)===a.length&&qr(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function YU(e,t={}){return $n({...t,x:null,y:null},(n,i,r,s,o,a)=>a.getMarkState(e))}function UU(e){const t=[];for(const n of e){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r}=i;r=/^x$/i.test(r)?qu:/^y$/i.test(r)?qv:jv,i=r(YU(n,i)),i.title=null;const s=iL(n.data,i);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function VU(e,t,n){let{projection:i,x:r={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:f=l,grid:h}=u,x:{axis:d=l,grid:g=d===null?null:c}=r,y:{axis:m=l,grid:_=m===null?null:c}=s,fx:{axis:p=f,grid:y=p===null?null:h}=o,fy:{axis:w=f,grid:v=w===null?null:h}=a}=n;(i||!Ko(r)&&!WE("x",e))&&(d=g=null),(i||!Ko(s)&&!WE("y",e))&&(m=_=null),t.has("fx")||(p=y=null),t.has("fy")||(w=v=null),d===void 0&&(d=!Lh(e,"x")),m===void 0&&(m=!Lh(e,"y")),p===void 0&&(p=!Lh(e,"fx")),w===void 0&&(w=!Lh(e,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),p===!0&&(p=d==="top"||d===null?"bottom":"top"),w===!0&&(w=m==="right"||m===null?"left":"right");const x=[];return Ih(x,v,G6,a),Ah(x,w,N6,"right","left",u,a),Ih(x,y,H6,o),Ah(x,p,D6,"top","bottom",u,o),Ih(x,_,W6,s),Ah(x,m,Jv,"left","right",n,s),Ih(x,g,B6,r),Ah(x,d,Qv,"bottom","top",n,r),x}function Ah(e,t,n,i,r,s,o){if(!t)return;const a=XU(t);o=jU(a?i:t,s,o);const{line:l}=o;(n===Jv||n===Qv)&&l&&!$l(l)&&e.push(nw(qU(o))),e.push(n(o)),a&&e.push(n({...o,anchor:r,label:null}))}function Ih(e,t,n,i){!t||$l(t)||e.push(n(ZU(t,i)))}function XU(e){return/^\s*both\s*$/i.test(e)}function jU(e,t,{line:n=t.line,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:g=t.labelArrow,labelOffset:m}){return{anchor:e,line:n,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h,labelAnchor:d,labelArrow:g,labelOffset:m}}function qU(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function ZU(e,{stroke:t=Rf(e)?e:void 0,ticks:n=KU(e)?e:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:s}}function KU(e){switch(typeof e){case"number":return!0;case"string":return!Rf(e)}return fs(e)||typeof(e==null?void 0:e.range)=="function"}function Lh(e,t){const n=`${t}-axis `;return e.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function WE(e,t){for(const n of t)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===e||r==="projection")return!0}return!1}function JU(e,t){for(const n in e){const i=e[n],r=t[n];i.label===void 0&&r&&(i.label=r.label)}return e}function QU({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=Uv(n),c=e&&GE(e),u=t&&GE(t);return{marginTop:t?u[0]:i,marginRight:e?a-c[1]:r,marginBottom:t?l-u[1]:s,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function GE(e){const t=e.domain();let n=e(t[0]),i=e(t[t.length-1]);return i<n&&([n,i]=[i,n]),[n,i+e.bandwidth()]}const tV=new Map([["basis",Bu],["basis-closed",hB],["basis-open",dB],["bundle",gB],["bump-x",eB],["bump-y",nB],["cardinal",mB],["cardinal-closed",pB],["cardinal-open",yB],["catmull-rom",_B],["catmull-rom-closed",vB],["catmull-rom-open",wB],["linear",Tf],["linear-closed",bB],["monotone-x",xB],["monotone-y",EB],["natural",TB],["step",CB],["step-after",MB],["step-before",SB]]);function rw(e=Tf,t){if(typeof e=="function")return e;const n=tV.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function oL(e=Bl,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Bl:rw(e,t)}function Bl(e){return Tf(e)}function Ds(e={y:"count"},t={}){[e,t]=lw(e,t);const{x:n,y:i}=t;return aw(vg(n,t,bt),null,null,i,e,Nf(t))}function $s(e={x:"count"},t={}){[e,t]=lw(e,t);const{x:n,y:i}=t;return aw(null,vg(i,t,bt),n,null,e,Df(t))}function Oo(e={fill:"count"},t={}){[e,t]=lw(e,t);const{x:n,y:i}=eV(t);return aw(n,i,null,null,e,Nf(Df(t)))}function aL(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=Nv}=n,r={filter:null};return n[t]!=null&&(r[t]=i),n[`${t}1`]!=null&&(r[`${t}1`]=i),n[`${t}2`]!=null&&(r[`${t}2`]=i),e(r,n)}function sw(e={}){return aL(Ds,"y",uc(e,"x"))}function ow(e={}){return aL($s,"x",uc(e,"y"))}function aw(e,t,n,i,{data:r=Pv,filter:s=gg,sort:o,reverse:a,...l}={},c={}){e=BE(e),t=BE(t),l=nV(l,c),r=fL(r,bt),o=o==null?void 0:cL("sort",o,c),s=s==null?void 0:uL("filter",s,c),n!=null&&Ws(l,"x","x1","x2")&&(n=null),i!=null&&Ws(l,"y","y1","y2")&&(i=null);const[u,f]=Cn(e),[h,d]=Cn(e),[g,m]=Cn(t),[_,p]=Cn(t),[y,w]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[v,x]=Cn(y),{x:b,y:E,z:T,fill:M,stroke:C,x1:R,x2:A,y1:k,y2:O,domain:I,cumulative:F,thresholds:P,interval:G,...j}=c,[U,q]=Cn(T),[W]=Nn(M),[Q]=Nn(C),[nt,st]=Cn(W),[ot,z]=Cn(Q);return{..."z"in c&&{z:U||T},..."fill"in c&&{fill:nt||M},..."stroke"in c&&{stroke:ot||C},..._r(j,(Y,$,V)=>{const K=dg(Nt(Y,y),V==null?void 0:V[w]),S=Nt(Y,T),L=Nt(Y,W),D=Nt(Y,Q),B=Fv(l,{z:S,fill:L,stroke:D}),H=[],X=[],rt=K&&x([]),J=S&&q([]),tt=L&&st([]),Z=D&&z([]),ct=e&&f([]),at=e&&d([]),ut=t&&m([]),ft=t&&p([]),Ct=sV(e==null?void 0:e(Y),t==null?void 0:t(Y));let Pt=0;for(const Mt of l)Mt.initialize(Y);o&&o.initialize(Y),s&&s.initialize(Y);for(const Mt of $){const Jt=[];for(const we of l)we.scope("facet",Mt);o&&o.scope("facet",Mt),s&&s.scope("facet",Mt);for(const[we,de]of ml(Mt,B))for(const[ms,Qn]of ml(de,K))for(const[cn,ge]of Ct(Qn))if(!(s&&!s.reduce(cn,ge))){Jt.push(Pt++),X.push(r.reduceIndex(cn,Y,ge)),K&&rt.push(ms),S&&J.push(B===S?we:S[(cn.length>0?cn:Qn)[0]]),L&&tt.push(B===L?we:L[(cn.length>0?cn:Qn)[0]]),D&&Z.push(B===D?we:D[(cn.length>0?cn:Qn)[0]]),ct&&(ct.push(ge.x1),at.push(ge.x2)),ut&&(ut.push(ge.y1),ft.push(ge.y2));for(const un of l)un.reduce(cn,ge);o&&o.reduce(cn)}H.push(Jt)}return b3(H,o,a),{data:X,facets:H}}),...!Ws(l,"x")&&(u?{x1:u,x2:h,x:hg(u,h)}:{x:b,x1:R,x2:A}),...!Ws(l,"y")&&(g?{y1:g,y2:_,y:hg(g,_)}:{y:E,y1:k,y2:O}),...v&&{[w]:v},...Object.fromEntries(l.map(({name:Y,output:$})=>[Y,$]))}}function lw({cumulative:e,domain:t,thresholds:n,interval:i,...r},s){return[r,{cumulative:e,domain:t,thresholds:n,interval:i,...s}]}function vg(e,{cumulative:t,domain:n,thresholds:i,interval:r},s){return e={...Mf(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=i),e.interval===void 0&&(e.interval=r),e.value===void 0&&(e.value=s),e.thresholds=lL(e.thresholds,e.interval),e}function eV(e){let{x:t,y:n}=e;return t=vg(t,e),n=vg(n,e),[t.value,n.value]=Yi(t.value,n.value),{x:t,y:n}}function BE(e){if(e==null)return;const{value:t,cumulative:n,domain:i=ye,thresholds:r}=e,s=o=>{let a=Nt(o,t),l;if(wn(a)||rV(r)){a=ce(a,a3,Float64Array);let[u,f]=typeof i=="function"?i(a):i,h=typeof r=="function"&&!nl(r)?r(a,u,f):r;typeof h=="number"&&(h=oA(u,f,h)),nl(h)&&(i===ye&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f))),l=h}else{a=On(a);let[u,f]=typeof i=="function"?i(a):i,h=typeof r=="function"&&!nl(r)?r(a,u,f):r;if(typeof h=="number")if(i===ye){let d=Ou(u,f,h);if(isFinite(d))if(d>0){let g=Math.round(u/d),m=Math.round(f/d);g*d<=u||--g,m*d>f||++m;let _=m-g+1;h=new Float64Array(_);for(let p=0;p<_;++p)h[p]=(g+p)*d}else if(d<0){d=-d;let g=Math.round(u*d),m=Math.round(f*d);g/d<=u||--g,m/d>f||++m;let _=m-g+1;h=new Float64Array(_);for(let p=0;p<_;++p)h[p]=(g+p)/d}else h=[u];else h=[u]}else h=qs(u,f,h);else nl(h)&&(i===ye&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f)));l=h}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?aV:n>0?oV:cw)(c,l,a),c};return s.label=us(t),s}function lL(e,t,n=HE){if(e===void 0)return t===void 0?n:cc(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return sD;case"scott":return aM;case"sturges":return D1;case"auto":return HE}return pv(e)}return e}function nV(e,t){return Lv(e,t,cL)}function cL(e,t,n){return Ov(e,t,n,uL)}function uL(e,t,n){return kv(e,t,n,fL)}function fL(e,t){return Vm(e,t,iV)}function iV(e){switch(`${e}`.toLowerCase()){case"x":return lV;case"x1":return uV;case"x2":return fV;case"y":return cV;case"y1":return hV;case"y2":return dV}throw new Error(`invalid bin reduce: ${e}`)}function HE(e,t,n){return Math.min(200,aM(e,t,n))}function rV(e){return GB(e)||fs(e)&&wn(e)}function sV(e,t){return e&&t?function*(n){const i=e.bin(n);for(const[r,[s,o]]of e.entries()){const a=t.bin(i[r]);for(const[l,[c,u]]of t.entries())yield[a[l],{x1:s,y1:c,x2:o,y2:u}]}}:e?function*(n){const i=e.bin(n);for(const[r,[s,o]]of e.entries())yield[i[r],{x1:s,x2:o}]}:function*(n){const i=t.bin(n);for(const[r,[s,o]]of t.entries())yield[i[r],{y1:s,y2:o}]}}function cw(e,t,n){return t=On(t),i=>{var s;const r=e.map(()=>[]);for(const o of i)(s=r[mm(t,n[o])-1])==null||s.push(o);return r}}function oV(e,t,n){const i=cw(e,t,n);return r=>{const s=i(r);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],c=s[o];for(const u of l)c.push(u)}return s}}function aV(e,t,n){const i=cw(e,t,n);return r=>{const s=i(r);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const c of a)l.push(c)}return s}}function hL(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const lV={reduceIndex(e,t,{x1:n,x2:i}){return hL(n,i)}},cV={reduceIndex(e,t,{y1:n,y2:i}){return hL(n,i)}},uV={reduceIndex(e,t,{x1:n}){return n}},fV={reduceIndex(e,t,{x2:n}){return n}},hV={reduceIndex(e,t,{y1:n}){return n}},dV={reduceIndex(e,t,{y2:n}){return n}};function uw(e={}){return c3(e)?e:{...e,x:bt}}function fw(e={}){return u3(e)?e:{...e,y:bt}}function gV(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,i=new Uint8Array(n);let r=0;for(const a of t)for(const l of a)i[l]&&++r,i[l]=1;if(r===0)return{data:e,facets:t};e=Yu(e);const s=e[s3]=new Uint32Array(n+r);t=t.map(a=>Yu(a,Uint32Array));let o=n;i.fill(0);for(const a of t)for(let l=0,c=a.length;l<c;++l){const u=a[l];i[u]?(a[l]=o,e[o]=e[u],s[o]=u,++o):s[u]=u,i[u]=1}return{data:e,facets:t}}function dL(e={},t={}){arguments.length===1&&([e,t]=gc(e));const{y1:n,y:i=n,x:r,...s}=t,[o,a,l,c]=mc(i,r,"y","x",e,s);return{...o,y1:n,y:a,x1:l,x2:c,x:hg(l,c)}}function mV(e={},t={}){arguments.length===1&&([e,t]=gc(e));const{y1:n,y:i=n,x:r}=t,[s,o,a]=mc(i,r,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function pV(e={},t={}){arguments.length===1&&([e,t]=gc(e));const{y1:n,y:i=n,x:r}=t,[s,o,,a]=mc(i,r,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function gL(e={},t={}){arguments.length===1&&([e,t]=gc(e));const{x1:n,x:i=n,y:r,...s}=t,[o,a,l,c]=mc(i,r,"x","y",e,s);return{...o,x1:n,x:a,y1:l,y2:c,y:hg(l,c)}}function yV(e={},t={}){arguments.length===1&&([e,t]=gc(e));const{x1:n,x:i=n,y:r}=t,[s,o,a]=mc(i,r,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function _V(e={},t={}){arguments.length===1&&([e,t]=gc(e));const{x1:n,x:i=n,y:r}=t,[s,o,,a]=mc(i,r,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function hw({x:e,x1:t,x2:n,...i}={}){return i=uc(i,"y"),t===void 0&&n===void 0?dL({x:e,...i}):([t,n]=f3(e,t,n),{...i,x1:t,x2:n})}function dw({y:e,y1:t,y2:n,...i}={}){return i=uc(i,"x"),t===void 0&&n===void 0?gL({y:e,...i}):([t,n]=f3(e,t,n),{...i,y1:t,y2:n})}function gc(e){const{offset:t,order:n,reverse:i,...r}=e;return[{offset:t,order:n,reverse:i},r]}const vV={length:!0};function mc(e,t=yv,n,i,{offset:r,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${i}`);const l=uo(a),[c,u]=Cn(e),[f,h]=Un(t),[d,g]=Un(t);return f.hint=d.hint=vV,r=wV(r),s=EV(s,r,i),[_r(a,(m,_,p)=>{({data:m,facets:_}=gV(m,_));const y=e==null?void 0:u(dg(Nt(m,e),p==null?void 0:p[n])),w=Nt(m,t,Float64Array),v=Nt(m,l),x=s&&s(m,y,w,v),b=m.length,E=h(new Float64Array(b)),T=g(new Float64Array(b)),M=[];for(const C of _){const R=y?Array.from(ls(C,A=>y[A]).values()):[C];if(x)for(const A of R)A.sort(x);for(const A of R){let k=0,O=0;o&&A.reverse();for(const I of A){const F=w[I];F<0?k=T[I]=(E[I]=k)+F:F>0?O=T[I]=(E[I]=O)+F:T[I]=E[I]=O}}M.push(R)}return r&&r(M,E,T,v),{data:m,facets:_}}),c,f,d]}function wV(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return bV;case"center":case"silhouette":return xV;case"wiggle":return pL}throw new Error(`unknown offset: ${e}`)}}function mL(e,t){let n=0,i=0;for(const r of e){const s=t[r];s<n&&(n=s),s>i&&(i=s)}return[n,i]}function bV(e,t,n){for(const i of e)for(const r of i){const[s,o]=mL(r,n);for(const a of r){const l=1/(o-s||1);t[a]=l*(t[a]-s),n[a]=l*(n[a]-s)}}}function xV(e,t,n){for(const i of e){for(const r of i){const[s,o]=mL(r,n);for(const a of r){const l=(o+s)/2;t[a]-=l,n[a]-=l}}yL(i,t,n)}_L(e,t,n)}function pL(e,t,n,i){for(const r of e){const s=new oa;let o=0;for(const a of r){let l=-1;const c=a.map(d=>Math.abs(n[d]-t[d])),u=a.map(d=>{l=i?i[d]:++l;const g=n[d]-t[d],m=s.has(l)?g-s.get(l):0;return s.set(l,g),m}),f=[0,...ZN(u)];for(const d of a)t[d]+=o,n[d]+=o;const h=dr(c);h&&(o-=dr(c,(d,g)=>(u[g]/2+f[g])*d)/h)}yL(r,t,n)}_L(e,t,n)}function yL(e,t,n){const i=Xe(e,r=>Xe(r,s=>t[s]));for(const r of e)for(const s of r)t[s]-=i,n[s]-=i}function _L(e,t,n){const i=e.length;if(i===1)return;const r=e.map(a=>a.flat()),s=r.map(a=>(Xe(a,l=>t[l])+Ne(a,l=>n[l]))/2),o=Xe(s);for(let a=0;a<i;a++){const l=o-s[a];for(const c of r[a])t[c]+=l,n[c]+=l}}function EV(e,t,n){if(e===void 0&&t===pL)return YE(gi);if(e!=null){if(typeof e=="string"){const i=e.startsWith("-"),r=i?ug:gi;switch((i?e.slice(1):e).toLowerCase()){case"value":case n:return TV(r);case"z":return CV(r);case"sum":return SV(r);case"appearance":return MV(r);case"inside-out":return YE(r)}return UE(o3(e))}if(typeof e=="function")return(e.length===1?UE:RV)(e);if(Array.isArray(e))return AV(e);throw new Error(`invalid order: ${e}`)}}function TV(e){return(t,n,i)=>(r,s)=>e(i[r],i[s])}function CV(e){return(t,n,i,r)=>(s,o)=>e(r[s],r[o])}function SV(e){return i0(e,(t,n,i,r)=>N1(cs(t),s=>dr(s,o=>i[o]),s=>r[s]))}function MV(e){return i0(e,(t,n,i,r)=>N1(cs(t),s=>n[$1(s,o=>i[o])],s=>r[s]))}function YE(e){return i0(e,(t,n,i,r)=>{const s=cs(t),o=N1(s,f=>n[$1(f,h=>i[h])],f=>r[f]),a=hl(s,f=>dr(f,h=>i[h]),f=>r[f]),l=[],c=[];let u=0;for(const f of o)u<0?(u+=a.get(f),l.push(f)):(u-=a.get(f),c.push(f));return c.reverse().concat(l)})}function UE(e){return t=>{const n=Nt(t,e);return(i,r)=>gi(n[i],n[r])}}function RV(e){return t=>(n,i)=>e(t[n],t[i])}function AV(e){return i0(gi,()=>e)}function i0(e,t){return(n,i,r,s)=>{if(!s)throw new Error("missing channel: z");const o=new oa(t(n,i,r,s).map((a,l)=>[a,l]));return(a,l)=>e(o.get(s[a]),o.get(s[l]))}}const IV={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class r0 extends le{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,z:a,curve:l,tension:c}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:uo(n),optional:!0}},n,IV),this.z=a,this.curve=rw(l,c)}filter(t){return t}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i;return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,n,0,0).call(u=>u.selectAll().data(R3(t,[o,a,l,c],this,i)).enter().append("path").call(he,this).call(mg,this,i).attr("d",Nl().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>c[f]))).node()}}function LV(e,t){return t===void 0?pa(e,{x:Sf,y:Hu}):new r0(e,t)}function Zu(e,t){const{y:n=zn,...i}=ow(t);return new r0(e,hw(uw({...i,y1:n,y2:void 0})))}function pa(e,t){const{x:n=zn,...i}=sw(t);return new r0(e,dw(fw({...i,x1:n,x2:void 0})))}const OV={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class vL extends le{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,curve:a,tension:l}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,OV),this.curve=oL(a,l),fc(this,n)}project(t,n,i){this.curve!==Bl&&super.project(t,n,i)}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i,{curve:u}=this;return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(he,this).attr("d",u===Bl&&s.projection?kV(s.projection,o,a,l,c):h=>{const d=Gr(),g=u(d);return g.lineStart(),g.point(o[h],a[h]),g.point(l[h],c[h]),g.lineEnd(),d}).call(ze,this,i).call(Pf,this,i,s)).node()}}function kV(e,t,n,i,r){const s=lo(e);return t=On(t),n=On(n),i=On(i),r=On(r),o=>s({type:"LineString",coordinates:[[t[o],n[o]],[i[o],r[o]]]})}function wL(e,{x:t,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=wg(t,n,i),[s,o]=wg(r,s,o),new vL(e,{...a,x1:n,x2:i,y1:s,y2:o})}function wg(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const FV={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class bL extends le{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:h=u,sweep:d}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,FV),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+f,this.insetEnd=+h,this.sweep=PV(d)}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a,SW:u}=i,{strokeWidth:f,bend:h,headAngle:d,headLength:g,insetStart:m,insetEnd:_}=this,p=u?v=>u[v]:Zn(f===void 0?1:f),y=d*pg/2,w=g/1.5;return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,n).call(v=>v.selectAll().data(t).enter().append("path").call(he,this).attr("d",x=>{let b=o[x],E=a[x],T=l[x],M=c[x];const C=Math.hypot(T-b,M-E);if(C<=m+_)return null;let R=Math.atan2(M-E,T-b);const A=Math.min(w*p(x),C/3),k=this.sweep(b,E,T,M)*h*pg,O=Math.hypot(C/Math.tan(k),C)/2;if(m||_)if(O<1e5){const nt=Math.sign(k),[st,ot]=NV([b,E],[T,M],O,nt);if(m&&([b,E]=VE([st,ot,O],[b,E,m],-nt*Math.sign(m))),_){const[z,Y]=VE([st,ot,O],[T,M,_],nt*Math.sign(_));R+=Math.atan2(Y-ot,z-st)-Math.atan2(M-ot,T-st),T=z,M=Y}}else{const nt=T-b,st=M-E,ot=Math.hypot(nt,st);m&&(b+=nt/ot*m,E+=st/ot*m),_&&(T-=nt/ot*_,M-=st/ot*_)}const I=R+k,F=I+y,P=I-y,G=T-A*Math.cos(F),j=M-A*Math.sin(F),U=T-A*Math.cos(P),q=M-A*Math.sin(P),W=O<1e5?`A${O},${O} 0,0,${k>0?1:0} `:"L",Q=A?`M${G},${j}L${T},${M}L${U},${q}`:"";return`M${b},${E}${W}${T},${M}${Q}`}).call(ze,this,i)).node()}}function PV(e=1){if(typeof e=="number")return Zn(Math.sign(e));if(typeof e=="function")return(t,n,i,r)=>Math.sign(e(t,n,i,r));switch(Jn(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,i)=>ve(t,i);case"-x":return(t,n,i)=>sa(t,i);case"+y":return(t,n,i,r)=>ve(n,r);case"-y":return(t,n,i,r)=>sa(n,r)}}function NV([e,t],[n,i],r,s){const o=n-e,a=i-t,l=Math.hypot(o,a),c=s*Math.sqrt(r*r-l*l/4)/l;return[(e+n)/2-a*c,(t+i)/2+o*c]}function VE([e,t,n],[i,r,s],o){const a=i-e,l=r-t,c=Math.hypot(a,l),u=(a*a+l*l-s*s+n*n)/(2*c),f=o*Math.sqrt(n*n-u*u);return[e+(a*u+l*f)/c,t+(l*u-a*f)/c]}function DV(e,{x:t,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=wg(t,n,i),[s,o]=wg(r,s,o),new bL(e,{...a,x1:n,x2:i,y1:s,y2:o})}class gw extends le{constructor(t,n,i={},r){super(t,n,i,r);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:c=s,rx:u,ry:f}=i;this.insetTop=zt(o),this.insetRight=zt(a),this.insetBottom=zt(l),this.insetLeft=zt(c),this.rx=Te(u,"auto"),this.ry=Te(f,"auto")}render(t,n,i,r,s){const{rx:o,ry:a}=this;return Kt("svg:g",s).call(pe,this,r,s).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call(he,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(pt,"rx",o).call(pt,"ry",a).call(ze,this,i)).node()}_x(t,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?s=>n[s]+r:i+r}_y(t,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?s=>n[s]+r:i+r}_width({x:t},{x:n},{marginRight:i,marginLeft:r,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&t?t.bandwidth():s-i-r;return Math.max(0,l-o-a)}_height({y:t},{y:n},{marginTop:i,marginBottom:r,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&t?t.bandwidth():s-i-r;return Math.max(0,l-o-a)}}const xL={ariaLabel:"bar"};class EL extends gw{constructor(t,n={}){const{x1:i,x2:r,y:s}=n;super(t,{x1:{value:i,scale:"x"},x2:{value:r,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,xL)}_transform(t,n,{x:i}){t.call(ae,n,{x:i},0,0)}_x({x:t},{x1:n,x2:i},{marginLeft:r}){const{insetLeft:s}=this;return ui(t)?r+s:o=>Math.min(n[o],i[o])+s}_width({x:t},{x1:n,x2:i},{marginRight:r,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return ui(t)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}class TL extends gw{constructor(t,n={}){const{x:i,y1:r,y2:s}=n;super(t,{y1:{value:r,scale:"y"},y2:{value:s,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,xL)}_transform(t,n,{y:i}){t.call(ae,n,{y:i},0,0)}_y({y:t},{y1:n,y2:i},{marginTop:r}){const{insetTop:s}=this;return ui(t)?r+s:o=>Math.min(n[o],i[o])+s}_height({y:t},{y1:n,y2:i},{marginTop:r,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return ui(t)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}function Wo(e,t={}){return Gm(t)||(t={...t,y:zn,x2:bt}),new EL(e,hw(l6(uw(t))))}function Go(e,t={}){return Gm(t)||(t={...t,x:zn,y2:bt}),new TL(e,dw(c6(fw(t))))}const $V={ariaLabel:"cell"};class s0 extends gw{constructor(t,{x:n,y:i,...r}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,$V)}_transform(t,n){t.call(ae,n,{},0,0)}}function rl(e,{x:t,y:n,...i}={}){return[t,n]=Yi(t,n),new s0(e,{...i,x:t,y:n})}function zV(e,{x:t=zn,fill:n,stroke:i,...r}={}){return n===void 0&&Nn(i)[0]===void 0&&(n=bt),new s0(e,{...r,x:t,fill:n,stroke:i})}function WV(e,{y:t=zn,fill:n,stroke:i,...r}={}){return n===void 0&&Nn(i)[0]===void 0&&(n=bt),new s0(e,{...r,y:t,fill:n,stroke:i})}const GV={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function mw(e){return e.sort===void 0&&e.reverse===void 0?v3({channel:"-r"},e):e}class o0 extends le{constructor(t,n={}){const{x:i,y:r,r:s,rotate:o,symbol:a=Gu,frameAnchor:l}=n,[c,u]=Re(o,0),[f,h]=eH(a),[d,g]=Re(s,f==null?3:4.5);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:d,scale:"r",filter:jr,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},mw(n),GV),this.r=g,this.rotate=u,this.symbol=h,this.frameAnchor=Af(l);const{channels:m}=this,{symbol:_}=m;if(_){const{fill:p,stroke:y}=m;_.hint={fill:p?p.value===_.value?"color":"currentColor":this.fill??"currentColor",stroke:y?y.value===_.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,r:u,rotate:f,symbol:h}=i,{r:d,rotate:g,symbol:m}=this,[_,p]=vr(this,r),y=m===Gu,w=u?void 0:d*d*Math.PI;return zm(d)&&(t=[]),Kt("svg:g",s).call(pe,this,r,s).call(ae,this,{x:l&&o,y:c&&a}).call(v=>v.selectAll().data(t).enter().append(y?"circle":"path").call(he,this).call(y?x=>{x.attr("cx",l?b=>l[b]:_).attr("cy",c?b=>c[b]:p).attr("r",u?b=>u[b]:d)}:x=>{x.attr("transform",Qm`translate(${l?b=>l[b]:_},${c?b=>c[b]:p})${f?b=>` rotate(${f[b]})`:g?` rotate(${g})`:""}`).attr("d",u&&h?b=>{const E=Gr();return h[b].draw(E,u[b]*u[b]*Math.PI),E}:u?b=>{const E=Gr();return m.draw(E,u[b]*u[b]*Math.PI),E}:h?b=>{const E=Gr();return h[b].draw(E,w),E}:(()=>{const b=Gr();return m.draw(b,w),b})())}).call(ze,this,i)).node()}}function ds(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Yi(t,n)),new o0(e,{...i,x:t,y:n})}function BV(e,{x:t=bt,...n}={}){return new o0(e,f6({...n,x:t}))}function HV(e,{y:t=bt,...n}={}){return new o0(e,u6({...n,y:t}))}function YV(e,t){return ds(e,{...t,symbol:"circle"})}function UV(e,t){return ds(e,{...t,symbol:"hexagon"})}const VV={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class a0 extends le{constructor(t,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:uo(n),optional:!0}},n,VV),this.z=s,this.curve=oL(o,a),fc(this,n)}filter(t){return t}project(t,n,i){this.curve!==Bl&&super.project(t,n,i)}render(t,n,i,r,s){const{x:o,y:a}=i,{curve:l}=this;return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,n).call(c=>c.selectAll().data(R3(t,[o,a],this,i)).enter().append("path").call(he,this).call(mg,this,i).call(qY,this,i,s).attr("d",l===Bl&&s.projection?XV(s.projection,o,a):cv().curve(l).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function XV(e,t,n){const i=lo(e);return t=On(t),n=On(n),r=>{let s=[];const o=[s];for(const a of r)a===-1?(s=[],o.push(s)):s.push([t[a],n[a]]);return i({type:"MultiLineString",coordinates:o})}}function pw(e,{x:t,y:n,...i}={}){return[t,n]=Yi(t,n),new a0(e,{...i,x:t,y:n})}function Ku(e,{x:t=bt,y:n=zn,...i}={}){return new a0(e,ow({...i,x:t,y:n}))}function Hl(e,{x:t=zn,y:n=bt,...i}={}){return new a0(e,sw({...i,x:t,y:n}))}const jV={ariaLabel:"rect"};class l0 extends le{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:c=a,insetBottom:u=a,insetLeft:f=a,rx:h,ry:d}=n;super(t,{x1:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,jV),this.insetTop=zt(l),this.insetRight=zt(c),this.insetBottom=zt(u),this.insetLeft=zt(f),this.rx=Te(h,"auto"),this.ry=Te(d,"auto")}render(t,n,i,r,s){const{x:o,y:a}=n,{x1:l,y1:c,x2:u,y2:f}=i,{marginTop:h,marginRight:d,marginBottom:g,marginLeft:m,width:_,height:p}=r,{projection:y}=s,{insetTop:w,insetRight:v,insetBottom:x,insetLeft:b,rx:E,ry:T}=this;return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,{x:l&&u&&o,y:c&&f&&a},0,0).call(M=>M.selectAll().data(t).enter().append("rect").call(he,this).attr("x",l&&u&&(y||!ui(o))?C=>Math.min(l[C],u[C])+b:m+b).attr("y",c&&f&&(y||!ui(a))?C=>Math.min(c[C],f[C])+w:h+w).attr("width",l&&u&&(y||!ui(o))?C=>Math.max(0,Math.abs(u[C]-l[C])-b-v):_-d-m-v-b).attr("height",c&&f&&(y||!ui(a))?C=>Math.max(0,Math.abs(c[C]-f[C])-w-x):p-h-g-w-x).call(pt,"rx",E).call(pt,"ry",T).call(ze,this,i)).node()}}function yw(e,t){return new l0(e,o6(a6(t)))}function bg(e,t={}){return Gm(t)||(t={...t,y:zn,x2:bt,interval:1}),new l0(e,hw(a6(uw(t))))}function xg(e,t={}){return Gm(t)||(t={...t,x:zn,y2:bt,interval:1}),new l0(e,dw(o6(fw(t))))}function CL(e,t){t=ZV(t);const{x:n,y:i,color:r,size:s}=t,o=Oh(e,n),a=Oh(e,i),l=Oh(e,r),c=Oh(e,s);let{fx:u,fy:f,x:{value:h,reduce:d,zero:g,...m},y:{value:_,reduce:p,zero:y,...w},color:{value:v,color:x,reduce:b},size:{value:E,reduce:T},mark:M}=t;if(d===void 0&&(d=p==null&&h==null&&E==null&&_!=null?"count":null),p===void 0&&(p=d==null&&_==null&&E==null&&h!=null?"count":null),T===void 0&&E==null&&b==null&&d==null&&p==null&&(h==null||be(o))&&(_==null||be(a))&&(T="count"),g===void 0&&(g=kh(d)?!0:void 0),y===void 0&&(y=kh(p)?!0:void 0),h==null&&_==null)throw new Error("must specify x or y");if(d!=null&&_==null)throw new Error("reducing x requires y");if(p!=null&&h==null)throw new Error("reducing y requires x");M===void 0&&(M=E!=null||T!=null?"dot":kh(d)||kh(p)||b!=null?"bar":h!=null&&_!=null?be(o)||be(a)||d==null&&p==null&&!zc(o)&&!zc(a)?"dot":"line":h!=null||_!=null?"rule":null);let C,R,A;switch(M){case"dot":A=ds,R="stroke";break;case"line":A=o&&a||d!=null||p!=null?y||p!=null||o&&zc(o)?Hl:g||d!=null||a&&zc(a)?Ku:pw:o?Ku:Hl,R="stroke",jE(l)&&(C=null);break;case"area":A=!(y||p!=null)&&(g||d!=null||a&&zc(a))?Zu:pa,R="fill",jE(l)&&(C=null);break;case"rule":A=o?rs:Qs,R="stroke";break;case"bar":A=d!=null?be(a)?XE(d)&&o&&be(o)?rl:Wo:bg:p!=null?be(o)?XE(p)&&a&&be(a)?rl:Go:xg:b!=null||T!=null?o&&be(o)&&a&&be(a)?rl:o&&be(o)?Go:a&&be(a)?Wo:yw:o&&il(o)&&!(a&&il(a))?Wo:a&&il(a)&&!(o&&il(o))?Go:rl,R="fill";break;default:throw new Error(`invalid mark: ${M}`)}let k={fx:u,fy:f,x:o??void 0,y:a??void 0,[R]:l??x,z:C,r:c??void 0,tip:!0},O,I={[R]:b??void 0,r:T??void 0};if(d!=null&&p!=null)throw new Error("cannot reduce both x and y");return p!=null?(I.y=p,O=be(o)?Uu:Ds):d!=null?(I.x=d,O=be(a)?Vu:$s):(b!=null||T!=null)&&(o&&a?O=be(o)&&be(a)?Iv:be(o)?$s:be(a)?Ds:Oo:o?O=be(o)?Uu:Ds:a&&(O=be(a)?Vu:$s)),(O===Oo||O===Ds)&&(k.x={value:o,...m}),(O===Oo||O===$s)&&(k.y={value:a,...w}),g===void 0&&(g=o&&!(O===Oo||O===Ds)&&(A===Wo||A===Zu||A===bg||A===Qs)),y===void 0&&(y=a&&!(O===Oo||O===$s)&&(A===Go||A===pa||A===xg||A===rs)),{fx:u??null,fy:f??null,x:{value:h??null,reduce:d??null,zero:!!g,...m},y:{value:_??null,reduce:p??null,zero:!!y,...w},color:{value:v??null,reduce:b??null,...x!==void 0&&{color:x}},size:{value:E??null,reduce:T??null},mark:M,markImpl:qE[A],markOptions:k,transformImpl:qE[O],transformOptions:I,colorMode:R}}function qV(e,t){const n=CL(e,t),{fx:i,fy:r,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:c}=n,u=C_[n.markImpl],f=C_[n.transformImpl],h=i!=null||r!=null?nw({strokeOpacity:.1}):null,d=[s?rs([0]):null,o?Qs([0]):null],g=u(e,f?f(l,a):a);return c==="stroke"?Wi(h,d,g):Wi(h,g,d)}function zc(e){let t,n;for(const i of e){if(i==null)continue;if(t===void 0){t=i;continue}const r=Math.sign(ve(t,i));if(r){if(n!==void 0&&r!==n)return!1;t=i,n=r}}return!0}function ZV({x:e,y:t,color:n,size:i,fx:r,fy:s,mark:o}={}){return Zi(e)||(e=za(e)),Zi(t)||(t=za(t)),Zi(n)||(n=Rf(n)?{color:n}:za(n)),Zi(i)||(i=za(i)),Zi(r)&&({value:r}=za(r)),Zi(s)&&({value:s}=za(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:e,y:t,color:n,size:i,fx:r,fy:s,mark:o}}function Oh(e,t){const n=Nt(e,t.value);return n&&(n.label=us(t.value)),n}function za(e){return KV(e)?{reduce:e}:{value:e}}function kh(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function XE(e){return/^(?:first|last|mode)$/i.test(e)}function KV(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&yi(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function jE(e){return e?new uf(e).size>e.length>>1:!1}const C_={dot:ds,line:pw,lineX:Ku,lineY:Hl,areaX:Zu,areaY:pa,ruleX:rs,ruleY:Qs,barX:Wo,barY:Go,rect:yw,rectX:bg,rectY:xg,cell:rl,bin:Oo,binX:Ds,binY:$s,group:Iv,groupX:Uu,groupY:Vu},qE=Object.fromEntries(Object.entries(C_).map(([e,t])=>[t,e]));function _w(e,t={}){let{x:n,x1:i,x2:r}=t;n===void 0&&i===void 0&&r===void 0&&(t={...t,x:n=bt});const s={};return n!=null&&(s.x=e),i!=null&&(s.x1=e),r!=null&&(s.x2=e),ss(s,t)}function vw(e,t={}){let{y:n,y1:i,y2:r}=t;n===void 0&&i===void 0&&r===void 0&&(t={...t,y:n=bt});const s={};return n!=null&&(s.y=e),i!=null&&(s.y1=e),r!=null&&(s.y2=e),ss(s,t)}function ss(e={},t={}){const n=uo(t),i=Object.entries(e).map(([r,s])=>{const o=h3(r,t);if(o==null)throw new Error(`missing channel: ${r}`);const[a,l]=Un(o);return{key:r,input:o,output:a,setOutput:l,map:JV(s)}});return{..._r(t,(r,s)=>{const o=Nt(r,n),a=i.map(({input:c})=>Nt(r,c)),l=i.map(({setOutput:c})=>c(new Array(r.length)));for(const c of s)for(const u of o?ls(c,f=>o[f]).values():[c])i.forEach(({map:f},h)=>f.mapIndex(u,a[h],l[h]));return{data:r,facets:s}}),...Object.fromEntries(i.map(({key:r,output:s})=>[r,s]))}}function JV(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&yi(e))return QV(e);if(typeof e=="function")return Dp(wv(e));switch(`${e}`.toLowerCase()){case"cumsum":return eX;case"rank":return Dp((t,n)=>uM(t,i=>n[i]));case"quantile":return Dp((t,n)=>tX(t,i=>n[i]))}throw new Error(`invalid map: ${e}`)}function QV(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function tX(e,t){const n=pm(e,t)-1;return uM(e,t).map(i=>i/n)}function Dp(e){return{mapIndex(t,n,i){const r=e(t,n);if(r.length!==t.length)throw new Error("map function returned a mismatched length");for(let s=0,o=t.length;s<o;++s)i[t[s]]=r[s]}}}const eX={mapIndex(e,t,n){let i=0;for(const r of e)n[r]=i+=t[r]}};function nX(e={},t){return arguments.length===1&&(t=e),_w(c0(e),t)}function S_(e={},t){return arguments.length===1&&(t=e),vw(c0(e),t)}function c0(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:i,anchor:r,strict:s}=e;if(r===void 0&&i!==void 0&&(r=rX(i),qr(`Warning: the shift option is deprecated; please use anchor "${r}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return sX(n)(t,iX(r,t),s)}function iX(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function rX(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function sX(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return Fh(_v(e));switch(e.toLowerCase()){case"deviation":return Fh(cf);case"max":return Ph((t,n)=>Ne(t,i=>n[i]));case"mean":return oX;case"median":return Fh(ku);case"min":return Ph((t,n)=>Xe(t,i=>n[i]));case"mode":return Ph((t,n)=>cM(t,i=>n[i]));case"sum":return SL;case"variance":return Fh(k1);case"difference":return cX;case"ratio":return uX;case"first":return fX;case"last":return hX}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return Ph(wv(e))}function Fh(e){return(t,n,i)=>i?{mapIndex(r,s,o){const a=c=>s[c]==null?NaN:+s[c];let l=0;for(let c=0;c<t-1;++c)isNaN(a(c))&&++l;for(let c=0,u=r.length-t+1;c<u;++c)isNaN(a(c+t-1))&&++l,o[r[c+n]]=l===0?e(Jo(r,c,c+t),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(r,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[r[l+n]]=e(Jo(r,0,l+t),a);for(let l=0,c=r.length-n;l<c;++l)o[r[l+n]]=e(Jo(r,l,l+t),a)}}}function Ph(e){return(t,n,i)=>i?{mapIndex(r,s,o){let a=0;for(let l=0;l<t-1;++l)a+=_n(s[r[l]]);for(let l=0,c=r.length-t+1;l<c;++l)a+=_n(s[r[l+t-1]]),a===t&&(o[r[l+n]]=e(Jo(r,l,l+t),s)),a-=_n(s[r[l]])}}:{mapIndex(r,s,o){for(let a=-n;a<0;++a)o[r[a+n]]=e(Jo(r,0,a+t),s);for(let a=0,l=r.length-n;a<l;++a)o[r[a+n]]=e(Jo(r,a,a+t),s)}}}function SL(e,t,n){return n?{mapIndex(i,r,s){let o=0,a=0;for(let l=0;l<e-1;++l){const c=r[i[l]];c===null||isNaN(c)?++o:a+=+c}for(let l=0,c=i.length-e+1;l<c;++l){const u=r[i[l]],f=r[i[l+e-1]];f===null||isNaN(f)?++o:a+=+f,s[i[l+t]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(i,r,s){let o=0;const a=i.length;for(let l=0,c=Math.min(a,e-t-1);l<c;++l)o+=+r[i[l]]||0;for(let l=-t,c=a-t;l<c;++l)o+=+r[i[l+e-1]]||0,s[i[l+t]]=o,o-=+r[i[l]]||0}}}function oX(e,t,n){if(n){const i=SL(e,t,n);return{mapIndex(r,s,o){i.mapIndex(r,s,o);for(let a=0,l=r.length-e+1;a<l;++a)o[r[a+t]]/=e}}}else return{mapIndex(i,r,s){let o=0,a=0;const l=i.length;for(let c=0,u=Math.min(l,e-t-1);c<u;++c){let f=r[i[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let c=-t,u=l-t;c<u;++c){let f=r[i[c+e-1]],h=r[i[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[i[c+t]]=o/a,h!==null&&!isNaN(h=+h)&&(o-=h,--a)}}}}function aX(e,t,n,i){for(let r=n+i;n<r;++n){const s=e[t[n]];if(_n(s))return s}}function lX(e,t,n,i){for(let r=n+i-1;r>=n;--r){const s=e[t[r]];if(_n(s))return s}}function ML(e,t,n,i){for(let r=n+i;n<r;++n){let s=e[t[n]];if(s!==null&&!isNaN(s=+s))return s}}function RL(e,t,n,i){for(let r=n+i-1;r>=n;--r){let s=e[t[r]];if(s!==null&&!isNaN(s=+s))return s}}function cX(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o){const l=r[i[o]],c=r[i[o+e-1]];s[i[o+t]]=l===null||c===null?NaN:c-l}}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=RL(r,i,o,e)-ML(r,i,o,e)}}}function uX(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o){const l=r[i[o]],c=r[i[o+e-1]];s[i[o+t]]=l===null||c===null?NaN:c/l}}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=RL(r,i,o,e)/ML(r,i,o,e)}}}function fX(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o)s[i[o+t]]=r[i[o]]}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=aX(r,i,o,e)}}}function hX(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o)s[i[o+t]]=r[i[o+e-1]]}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=lX(r,i,o,e)}}}const Zr={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function dX(e,{x:t=bt,y:n,k:i=Zr.k,color:r=Zr.color,opacity:s=Zr.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...f}={}){return Wi(Se(o)?null:Zu(e,ss({x1:Qo({k:-i,...f}),x2:Qo({k:i,...f})},{x1:t,x2:t,y:n,fill:o,fillOpacity:a,...f})),Se(l)?null:Ku(e,ss({x:Qo(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function gX(e,{x:t,y:n=bt,k:i=Zr.k,color:r=Zr.color,opacity:s=Zr.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...f}={}){return Wi(Se(o)?null:pa(e,ss({y1:Qo({k:-i,...f}),y2:Qo({k:i,...f})},{x:t,y1:n,y2:n,fill:o,fillOpacity:a,...f})),Se(l)?null:Hl(e,ss({y:Qo(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function Qo({n:e=Zr.n,k:t=0,strict:n=Zr.strict,anchor:i=Zr.anchor}={}){return c0({k:e,reduce:r=>ym(r)+t*(cf(r)||0),strict:n,anchor:i})}const mX={ariaLabel:"tick",fill:null,stroke:"currentColor"};class AL extends le{constructor(t,n,i){super(t,n,i,mX),fc(this,i)}render(t,n,i,r,s){return Kt("svg:g",s).call(pe,this,r,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(he,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(ze,this,i).call(Pf,this,i,s)).node()}}class IL extends AL{constructor(t,n={}){const{x:i,y:r,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=zt(o),this.insetBottom=zt(a)}_transform(t,n,{x:i}){t.call(ae,n,{x:i},Ze,0)}_x1(t,{x:n}){return i=>n[i]}_x2(t,{x:n}){return i=>n[i]}_y1({y:t},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&t?s=>n[s]+r:i+r}_y2({y:t},{y:n},{height:i,marginBottom:r}){const{insetBottom:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:i-r-s}}class LL extends AL{constructor(t,n={}){const{x:i,y:r,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(t,{y:{value:r,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n),this.insetRight=zt(o),this.insetLeft=zt(a)}_transform(t,n,{y:i}){t.call(ae,n,{y:i},0,Ze)}_x1({x:t},{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n&&t?s=>n[s]+r:i+r}_x2({x:t},{x:n},{width:i,marginRight:r}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:i-r-s}_y1(t,{y:n}){return i=>n[i]}_y2(t,{y:n}){return i=>n[i]}}function OL(e,{x:t=bt,...n}={}){return new IL(e,{...n,x:t})}function kL(e,{y:t=bt,...n}={}){return new LL(e,{...n,y:t})}function pX(e,{x:t=bt,y:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Vu:Av;return Wi(Qs(e,u({x1:ww,x2:bw},{x:t,y:n,stroke:s,strokeOpacity:o,...c})),Wo(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:i,fillOpacity:r,...c})),OL(e,u({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),ds(e,ss({x:FL},{x:t,y:n,z:n,stroke:s,strokeOpacity:o,...c})))}function yX(e,{y:t=bt,x:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Uu:Av;return Wi(rs(e,u({y1:ww,y2:bw},{x:n,y:t,stroke:s,strokeOpacity:o,...c})),Go(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:i,fillOpacity:r,...c})),kL(e,u({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),ds(e,ss({y:FL},{x:n,y:t,z:n,stroke:s,strokeOpacity:o,...c})))}function FL(e){const t=ww(e),n=bw(e);return e.map(i=>i<t||i>n?i:NaN)}function ww(e){const t=PL(e)*2.5-NL(e)*1.5;return Xe(e,n=>n>=t?n:NaN)}function bw(e){const t=NL(e)*2.5-PL(e)*1.5;return Ne(e,n=>n<=t?n:NaN)}function PL(e){return Zs(e,.25)}function NL(e){return Zs(e,.75)}const _X={ariaLabel:"raster",stroke:null,pixelSize:1};function Wa(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function ZE(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class DL extends le{constructor(t,n,i={},r){let{width:s,height:o,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:f=a==null?s:void 0,y2:h=l==null?o:void 0,pixelSize:d=r.pixelSize,blur:g=0,interpolate:m}=i;if(s!=null&&(s=ZE(s,"width")),o!=null&&(o=ZE(o,"height")),c!=null&&(c=Wa(c,"x1")),u!=null&&(u=Wa(u,"y1")),f!=null&&(f=Wa(f,"x2")),h!=null&&(h=Wa(h,"y2")),a==null&&(c==null||f==null))throw new Error("missing x");if(l==null&&(u==null||h==null))throw new Error("missing y");t!=null&&s!=null&&o!=null&&(a===void 0&&c!=null&&f!=null&&(a=MX(c,f,s)),l===void 0&&u!=null&&h!=null&&(l=RX(u,h,s,o))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:h==null?null:[h],scale:"y",optional:!0,filter:null},...n},i,r),this.width=s,this.height=o,this.pixelSize=Wa(d,"pixelSize"),this.blur=Wa(g,"blur"),this.interpolate=a==null||l==null?null:wX(m)}}class $L extends DL{constructor(t,n={}){const{imageRendering:i}=n;if(t==null){const{fill:r,fillOpacity:s}=n;Re(s)[0]!==void 0&&(n=M_("fillOpacity",n)),Nn(r)[0]!==void 0&&(n=M_("fill",n))}super(t,void 0,n,_X),this.imageRendering=Te(i,"auto")}scale(t,{color:n,...i},r){return super.scale(t,i,r)}render(t,n,i,r,s){var I;const o=n[(I=i.channels.fill)==null?void 0:I.scale]??(F=>F),{x:a,y:l}=i,{document:c}=s,[u,f,h,d]=WL(i,r,s),g=h-u,m=d-f,{pixelSize:_,width:p=Math.round(Math.abs(g)/_),height:y=Math.round(Math.abs(m)/_)}=this,w=p*y;let{fill:v,fillOpacity:x}=i,b=0;if(this.interpolate){const F=p/g,P=y/m,G=ce(a,U=>(U-u)*F,Float64Array),j=ce(l,U=>(U-f)*P,Float64Array);v&&(v=this.interpolate(t,p,y,G,j,v)),x&&(x=this.interpolate(t,p,y,G,j,x))}else this.data==null&&t&&(b=t.fi*w);const E=c.createElement("canvas");E.width=p,E.height=y;const T=E.getContext("2d"),M=T.createImageData(p,y),C=M.data;let{r:R,g:A,b:k}=gr(this.fill)??{r:0,g:0,b:0},O=(this.fillOpacity??1)*255;for(let F=0;F<w;++F){const P=F<<2;if(v){const G=o(v[F+b]);if(G==null){C[P+3]=0;continue}({r:R,g:A,b:k}=gr(G))}x&&(O=x[F+b]*255),C[P+0]=R,C[P+1]=A,C[P+2]=k,C[P+3]=O}return this.blur>0&&BN(M,this.blur),T.putImageData(M,0,0),Kt("svg:g",s).call(pe,this,r,s).call(ae,this,n).call(F=>F.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(h-u)},${Math.sign(d-f)})`).attr("width",Math.abs(g)).attr("height",Math.abs(m)).attr("preserveAspectRatio","none").call(pt,"image-rendering",this.imageRendering).call(he,this).attr("xlink:href",E.toDataURL())).node()}}function zL(e,t,n){arguments.length<3&&(n=t,t=null);let{x:i,y:r,[e]:s,...o}=n;return i===void 0&&r===void 0&&HB(t)&&(i=Sf,r=Hu,s===void 0&&(s=$B)),[t,{...o,x:i,y:r,[e]:s}]}function vX(){const[e,t]=zL("fill",...arguments);return new $L(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:bt})}function WL({x1:e,y1:t,x2:n,y2:i},r,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f}=r;return[e&&s==null?e[0]:f,t&&s==null?t[0]:l,n&&s==null?n[0]:o-c,i&&s==null?i[0]:a-u]}function GL({x1:e,y1:t,x2:n,y2:i},r,s,o){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),i&&(a.y2=i),WL(Dv(a,r),s,o)}function M_(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return $n({...t,[e]:void 0},function(i,r,s,o,a,l){const{x:c,y:u}=o;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,h,d,g]=GL(s,o,a,l),m=d-f,_=g-h,{pixelSize:p}=this,{width:y=Math.round(Math.abs(m)/p),height:w=Math.round(Math.abs(_)/p)}=t,v=new Array(y*w*(r?r.length:1)),x=m/y,b=_/w;let E=0;for(const T of r??[void 0])for(let M=.5;M<w;++M)for(let C=.5;C<y;++C,++E)v[E]=n(c.invert(f+C*x),u.invert(h+M*b),T);return{data:v,facets:r,channels:{[e]:{value:v,scale:"auto"}}}})}function wX(e){if(typeof e=="function")return e;if(e==null)return R_;switch(`${e}`.toLowerCase()){case"none":return R_;case"nearest":return HL;case"barycentric":return BL();case"random-walk":return YL()}throw new Error(`invalid interpolate: ${e}`)}function R_(e,t,n,i,r,s){const o=new Array(t*n);for(const a of e)i[a]<0||i[a]>=t||r[a]<0||r[a]>=n||(o[Math.floor(r[a])*t+Math.floor(i[a])]=s[a]);return o}function BL({random:e=iv(42)}={}){return(t,n,i,r,s,o)=>{const{points:a,triangles:l,hull:c}=oo.from(t,d=>r[d],d=>s[d]),u=new o.constructor(n*i).fill(NaN),f=new Uint8Array(n*i),h=SX(o,e);for(let d=0;d<l.length;d+=3){const g=l[d],m=l[d+1],_=l[d+2],p=a[2*g],y=a[2*m],w=a[2*_],v=a[2*g+1],x=a[2*m+1],b=a[2*_+1],E=Math.min(p,y,w),T=Math.max(p,y,w),M=Math.min(v,x,b),C=Math.max(v,x,b),R=(x-b)*(p-w)+(v-b)*(w-y);if(!R)continue;const A=o[t[g]],k=o[t[m]],O=o[t[_]];for(let I=Math.floor(E);I<T;++I)for(let F=Math.floor(M);F<C;++F){if(I<0||I>=n||F<0||F>=i)continue;const P=I+.5,G=F+.5,j=((x-b)*(P-w)+(G-b)*(w-y))/R;if(j<0)continue;const U=((b-v)*(P-w)+(G-b)*(p-w))/R;if(U<0)continue;const q=1-j-U;if(q<0)continue;const W=I+n*F;u[W]=h(A,j,k,U,O,q,I,F),f[W]=1}}return bX(u,f,r,s,o,n,i,c,t,h),u}}function bX(e,t,n,i,r,s,o,a,l,c){n=Float64Array.from(a,d=>n[l[d]]),i=Float64Array.from(a,d=>i[l[d]]),r=Array.from(a,d=>r[l[d]]);const u=n.length,f=Array.from({length:u},(d,g)=>EX(g,n,i));let h=0;for(let d=0;d<o;++d){const g=d+.5;for(let m=0;m<s;++m){const _=m+s*d;if(!t[_]){const p=m+.5;for(let y=0;y<u;++y){const w=(u+h+(y%2?(y+1)/2:-y/2))%u;if(f[w](p,g)){const v=xX(n.at(w-1),i.at(w-1),n[w],i[w],p,g);e[_]=c(r.at(w-1),v,r[w],1-v,r[w],0,m,d),h=w;break}}}}}}function xX(e,t,n,i,r,s){const o=n-e,a=i-t,l=o*(n-r)+a*(i-s),c=o*(r-e)+a*(s-t);return l>0&&c>0?l/(l+c):+(l>c)}function Wc(e,t,n,i){return e*i-n*t}function EX(e,t,n){const i=t.length,r=t.at(e-2),s=n.at(e-2),o=t.at(e-1),a=n.at(e-1),l=t[e],c=n[e],u=t.at(e+1-i),f=n.at(e+1-i),h=o-l,d=a-c,g=r-o,m=s-a,_=l-u,p=c-f,y=Math.hypot(h,d),w=Math.hypot(g,m),v=Math.hypot(_,p);return(x,b)=>{const E=x-o,T=b-a,M=x-l,C=b-c;return Wc(E,T,M,C)>-1e-6&&Wc(E,T,h,d)*w-Wc(E,T,g,m)*y>-1e-6&&Wc(M,C,_,p)*y-Wc(M,C,h,d)*v<=0}}function HL(e,t,n,i,r,s){const o=new s.constructor(t*n),a=oo.from(e,u=>i[u],u=>r[u]);let l,c;for(let u=.5,f=0;u<n;++u){c=l;for(let h=.5;h<t;++h,++f)c=a.find(h,u,c),h===.5&&(l=c),o[f]=s[e[c]]}return o}function YL({random:e=iv(42),minDistance:t=.5,maxSteps:n=2}={}){return(i,r,s,o,a,l)=>{const c=new l.constructor(r*s),u=oo.from(i,g=>o[g],g=>a[g]);let f,h,d;for(let g=.5,m=0;g<s;++g){h=f;for(let _=.5;_<r;++_,++m){let p=_,y=g;d=h=u.find(p,y,h),_===.5&&(f=h);let w,v=0;for(;(w=Math.hypot(o[i[d]]-p,a[i[d]]-y))>t&&v<n;){const x=e(_,g,v)*2*Math.PI;p+=Math.cos(x)*w,y+=Math.sin(x)*w,d=u.find(p,y,d),++v}c[m]=l[i[d]]}}return c}}function TX(e,t,n,i,r,s){return t*e+i*n+s*r}function CX(e){return(t,n,i,r,s,o,a,l)=>{const c=e(a,l);return c<n?t:c<n+r?i:s}}function SX(e,t){return il(e)||wn(e)?TX:CX(t)}function MX(e,t,n){return{transform(i){const r=i.length,s=new Float64Array(r),o=(t-e)/n,a=e+o/2;for(let l=0;l<r;++l)s[l]=l%n*o+a;return s}}}function RX(e,t,n,i){return{transform(r){const s=r.length,o=new Float64Array(s),a=(t-e)/i,l=e+a/2;for(let c=0;c<s;++c)o[c]=Math.floor(c/n)%i*a+l;return o}}}const KE={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class UL extends DL{constructor(t,{smooth:n=!0,value:i,...r}={}){const s=M3({},r,KE);if(i===void 0){for(const a in s)if(s[a].value!=null){if(i!==void 0)throw new Error("ambiguous contour value");i=r[a],r[a]="value"}}if(i!=null){const a={transform:l=>l.map(c=>c.value),label:us(i)};for(const l in s)r[l]==="value"&&(r[l]=a)}if(t==null){if(i==null)throw new Error("missing contour value");r=M_("value",{value:i,...r}),i=null}else{let{interpolate:a}=r;i===void 0&&(i=bt),a===void 0&&(r.interpolate="nearest")}super(t,{value:{value:i,optional:!0}},AX(r),KE);const o={geometry:{value:bt}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(t,{x:n,y:i,value:r,...s},o){return super.filter(t,s,o)}render(t,n,i,r,s){const{geometry:o}=i,a=lo();return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,n).call(l=>{l.selectAll().data(t).enter().append("path").call(he,this).attr("d",c=>a(o[c])).call(ze,this,i)}).node()}}function AX({thresholds:e,interval:t,...n}){return e=lL(e,t,D1),$n(n,function(i,r,s,o,a,l){const[c,u,f,h]=GL(s,o,a,l),d=f-c,g=h-u,{pixelSize:m,width:_=Math.round(Math.abs(d)/m),height:p=Math.round(Math.abs(g)/m)}=this,y=_/d,w=p/g,v=s.value.value,x=[];if(this.interpolate){const{x:C,y:R}=jm(s,o,l),A=ce(C,F=>(F-c)*y,Float64Array),k=ce(R,F=>(F-u)*w,Float64Array),O=[s.x,s.y,s.value],I=[A,k,v];for(const F of r){const P=this.filter(F,O,I);x.push(this.interpolate(P,_,p,A,k,v))}}else if(r){const C=_*p,R=r.length;for(let A=0;A<R;++A)x.push(v.slice(A*C,A*C+C))}else x.push(v);if(this.blur>0)for(const C of x)QS({data:C,width:_,height:p},this.blur);const b=IX(e,v,...OX(x));if(b===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:E}=Hy().size([_,p]).smooth(this.smooth),T=[],M=[];for(const C of x)M.push(ai(T.length,T.push(...ce(b,R=>E(C,R)))));for(const{coordinates:C}of T)for(const R of C)for(const A of R)for(const k of A)k[0]=k[0]/y+c,k[1]=k[1]/w+u;return{data:T,facets:M,channels:x3(this.contourChannels,T)}})}function IX(e,t,n,i){if(typeof(e==null?void 0:e.range)=="function")return e.range(e.floor(n),i);if(typeof e=="function"&&(e=e(t,n,i)),typeof e!="number")return Dn(e);const r=qs(...sM(n,i,e),e);for(;r[r.length-1]>=i;)r.pop();for(;r[1]<n;)r.shift();return r}function LX(){return new UL(...zL("value",...arguments))}function OX(e){return[Xe(e,t=>Xe(t,JE)),Ne(e,t=>Ne(t,JE))]}function JE(e){return isFinite(e)?e:NaN}function kX(e,t){return xw(jv,e,t)}function FX(e,t={}){return xw(qu,e,t)}function PX(e,t={}){return xw(qv,e,t)}function xw(e,t,n={}){const{x:i,y:r,maxRadius:s}=n,o=e({px:i,py:r,maxRadius:s}),a=[];i!=null&&a.push(rs(t,QE("x",{...o,inset:-6},n))),r!=null&&a.push(Qs(t,QE("y",{...o,inset:-6},n))),i!=null&&a.push(Wl(t,tT("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),r!=null&&a.push(Wl(t,tT("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return Wi(...a)}function VL(e,{channels:t,...n},{facet:i,facetAnchor:r,fx:s,fy:o,[e]:a,channels:l,transform:c,initializer:u}){return{...n,facet:i,facetAnchor:r,fx:s,fy:o,[e]:a,channels:{...t,...l},transform:c,initializer:NX(e,u)}}function NX(e,t){return t==null?t:function(n,i,{x:r,y:s,px:o,py:a,...l},...c){const{channels:{x:u,y:f,...h}={},...d}=t.call(this,n,i,{...l,x:o,y:a},...c);return{channels:{...h,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...d}}}function QE(e,t,n){const{color:i="currentColor",opacity:r=.2,ruleStroke:s=i,ruleStrokeOpacity:o=r,ruleStrokeWidth:a}=n;return{...VL(e,t,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function tT(e,t,n){const{color:i="currentColor",textFill:r=i,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...VL(e,t,DX(e,n)),fill:r,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function DX(e,t){return $n(t,(n,i,r)=>{var s;return{channels:{text:{value:(s=__(r,e))==null?void 0:s.value}}}})}const $X={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},zX={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},WX={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},GX={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},BX={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class HX extends le{constructor(t,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,$X),this.curve=rw(o,a),fc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,{curve:f}=this,[h,d]=vr(this,r),g=l?y=>l[y]:Zn(h),m=c?y=>c[y]:Zn(d),_=this;function p(y){let w=-1;const v=[],x={};for(const O in i)x[O]=[];const b=[],E=[],T=[],M=[];function C(O,I){O=y[O],I=y[I],v.push(++w),b[w]=g(O),T[w]=m(O),E[w]=g(I),M[w]=m(I);for(const F in i)x[F].push(i[F][I])}const{halfedges:R,hull:A,triangles:k}=oo.from(y,g,m);for(let O=0;O<R.length;++O){const I=R[O];I>O&&C(k[O],k[I])}for(let O=0;O<A.length;++O)C(A[O],A[(O+1)%A.length]);di(this).selectAll().data(v).enter().append("path").call(he,_).attr("d",O=>{const I=Gr(),F=f(I);return F.lineStart(),F.point(b[O],T[O]),F.point(E[O],M[O]),F.lineEnd(),I}).call(ze,_,x).call(Pf,_,x,s)}return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(ls(t,w=>u[w]).values()).enter().append("g").each(p):y=>y.datum(t).each(p)).node()}}class Ew extends le{constructor(t,n={},i,r=({z:s})=>s){const{x:s,y:o}=n;super(t,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:r(n),optional:!0}},n,i)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[f,h]=vr(this,r),d=l?p=>l[p]:Zn(f),g=c?p=>c[p]:Zn(h),m=this;function _(p){const y=oo.from(p,d,g);di(this).append("path").datum(p[0]).call(he,m).attr("d",m._render(y,r)).call(ze,m,i)}return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,{x:l&&o,y:c&&a}).call(u?p=>p.selectAll().data(ls(t,y=>u[y]).values()).enter().append("g").each(_):p=>p.datum(t).each(_)).node()}}class YX extends Ew{constructor(t,n={}){super(t,n,zX),this.fill="none"}_render(t){return t.render()}}class UX extends Ew{constructor(t,n={}){super(t,n,WX,uo)}_render(t){return t.renderHull()}}class VX extends le{constructor(t,n={}){const{x:i,y:r,z:s}=n;super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,GX)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[f,h]=vr(this,r),d=l?p=>l[p]:Zn(f),g=c?p=>c[p]:Zn(h),m=this;function _(p){const y=oo.from(p,d,g),w=XL(y,r);di(this).selectAll().data(p).enter().append("path").call(he,m).attr("d",(v,x)=>w.renderCell(x)).call(ze,m,i)}return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,{x:l&&o,y:c&&a}).call(u?p=>p.selectAll().data(ls(t,y=>u[y]).values()).enter().append("g").each(_):p=>p.datum(t).each(_)).node()}}class XX extends Ew{constructor(t,n){super(t,n,BX),this.fill="none"}_render(t,n){return XL(t,n).render()}}function XL(e,t){const{width:n,height:i,marginTop:r,marginRight:s,marginBottom:o,marginLeft:a}=t;return e.voronoi([a,r,n-s,i-o])}function $f(e,t,{x:n,y:i,...r}={}){return[n,i]=Yi(n,i),new e(t,{...r,x:n,y:i})}function jX(e,t){return $f(HX,e,t)}function qX(e,t){return $f(YX,e,t)}function ZX(e,t){return $f(UX,e,t)}function KX(e,t){return $f(VX,e,t)}function JX(e,t){return $f(XX,e,t)}const QX={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class jL extends le{constructor(t,{x:n,y:i,z:r,weight:s,fill:o,stroke:a,...l}={}){const c=eT(o)&&(o="currentColor",!0),u=eT(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:uo({z:r,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},nj({...l,fill:o,stroke:a},c,u),QX),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=r}filter(t){return t}render(t,n,i,r,s){const{contours:o}=i,a=lo();return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,{}).call(l=>l.selectAll().data(t).enter().append("path").call(he,this).call(ze,this,i).attr("d",c=>a(o[c]))).node()}}function tj(e,{x:t,y:n,...i}={}){return[t,n]=Yi(t,n),new jL(e,{...i,x:t,y:n})}const ej=new Set(["x","y","z","weight"]);function nj(e,t,n){let{bandwidth:r,thresholds:s}=e;return r=r===void 0?20:+r,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?On(s):+s,$n(e,function(o,a,l,c,u,f){var k;const h=l.weight?On(l.weight.value):null,d=(k=l.z)==null?void 0:k.value,{z:g}=this,[m,_]=vr(this,u),{width:p,height:y}=u,{x:w,y:v}=jm(l,c,f),x=Object.fromEntries(Object.entries(l).filter(([O])=>!ej.has(O)).map(([O,I])=>[O,{...I,value:[]}])),b=t&&[],E=n&&[],T=s9().x(w?O=>w[O]:m).y(v?O=>v[O]:_).weight(h?O=>h[O]:1).size([p,y]).bandwidth(r),M=[];for(const O of a){const I=[];M.push(I);for(const F of d?zv(O,d,g):[O]){const P=T.contours(F);I.push([F,P])}}let C=s;if(!(C instanceof Dl)){let O=0;for(const I of M)for(const[,F]of I){const P=F.max;P>O&&(O=P)}C=Float64Array.from({length:s-1},(I,F)=>O*100*(F+1)/s)}const R=[],A=[];for(const O of M){const I=[];R.push(I);for(const[F,P]of O)for(const G of C){I.push(A.length),A.push(P(G/100)),b&&b.push(G),E&&E.push(G);for(const j in x)x[j].value.push(l[j].value[F[0]])}}return b&&b.push(0),E&&E.push(0),{data:o,facets:R,channels:{...x,...b&&{fill:{value:b,scale:"color"}},...E&&{stroke:{value:E,scale:"color"}},contours:{value:A}}}})}function eT(e){return/^density$/i.test(e)}const ij={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class qL extends le{constructor(t,n={}){const[i,r]=Re(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:i,scale:"r",filter:jr,optional:!0}},mw(n),ij),this.r=r}render(t,n,i,r,s){const{geometry:o,r:a}=i,l=lo(s.projection??rj(n)),{r:c}=this;return zm(c)?t=[]:c!==void 0&&l.pointRadius(c),Kt("svg:g",s).call(pe,this,r,s).call(ae,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(he,this).attr("d",a?f=>l.pointRadius(a[f])(o[f]):f=>l(o[f])).call(ze,this,i)}).node()}}function rj({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),Kd({point(n,i){this.stream.point(e(n),t(i))}})}function Tw(e,{geometry:t=bt,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new qL(e,{geometry:t,...n})}function sj({strokeWidth:e=1.5,...t}={}){return Tw({type:"Sphere"},{strokeWidth:e,...t})}function oj({strokeOpacity:e=.1,...t}={}){return Tw(tz(),{strokeOpacity:e,...t})}const _u=.5,vu=0;function aj(e={fill:"count"},{binWidth:t,...n}={}){const{z:i}=n;return t=t===void 0?20:zt(t),e=Lv(e,n),Ws(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!Ws(e,"r")&&(n.r=t/2),$n(n,(r,s,o,a,l,c)=>{let{x:u,y:f,z:h,fill:d,stroke:g,symbol:m}=o;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=jm(o,a,c)),h=h?h.value:Nt(r,i),d=d==null?void 0:d.value,g=g==null?void 0:g.value,m=m==null?void 0:m.value;const _=Fv(e,{z:h,fill:d,stroke:g,symbol:m}),p=h&&[],y=d&&[],w=g&&[],v=m&&[],x=[],b=[],E=[];let T=-1;for(const A of e)A.initialize(r);for(const A of s){const k=[];for(const O of e)O.scope("facet",A);for(const[O,I]of ml(A,_))for(const F of lj(I,u,f,t)){k.push(++T),b.push(F.x),E.push(F.y),h&&p.push(_===h?O:h[F[0]]),d&&y.push(_===d?O:d[F[0]]),g&&w.push(_===g?O:g[F[0]]),m&&v.push(_===m?O:m[F[0]]);for(const P of e)P.reduce(F)}x.push(k)}const M=o.x.scale,C=o.y.scale,R={x:{value:b,source:a[M]?{value:ce(b,a[M].invert),scale:M}:null},y:{value:E,source:a[C]?{value:ce(E,a[C].invert),scale:C}:null},...h&&{z:{value:p}},...d&&{fill:{value:y,scale:"auto"}},...g&&{stroke:{value:w,scale:"auto"}},...m&&{symbol:{value:v,scale:"auto"}},...Object.fromEntries(e.map(({name:A,output:k})=>[A,{scale:"auto",label:k.label,radius:A==="r"?t/2:void 0,value:k.transform()}]))};return{data:r,facets:x,channels:R}})}function lj(e,t,n,i){const r=i*(1.5/y3),s=new Map;for(const o of e){let a=t[o],l=n[o];if(isNaN(a)||isNaN(l))continue;let c=Math.round(l=(l-vu)/r),u=Math.round(a=(a-_u)/i-(c&1)/2),f=l-c;if(Math.abs(f)*3>1){let g=a-u,m=u+(a<u?-1:1)/2,_=c+(l<c?-1:1),p=a-m,y=l-_;g*g+f*f>p*p+y*y&&(u=m+(c&1?1:-1)/2,c=_)}const h=`${u},${c}`;let d=s.get(h);d===void 0&&(s.set(h,d=[]),d.x=(u+(c&1)/2)*i+_u,d.y=c*r+vu),d.push(o)}return s.values()}const cj={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function uj(e){return new ZL(e)}class ZL extends le{constructor({binWidth:t=20,clip:n=!0,...i}={}){super(yu,void 0,{clip:n,...i},cj),this.binWidth=zt(t)}render(t,n,i,r,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:f,height:h}=r,d=u-_u,g=f-l-_u,m=a-vu,_=h-c-vu,p=o/2,y=p*_3,w=y/2,v=p*2,x=y*1.5,b=Math.floor(d/v),E=Math.ceil(g/v),T=Math.floor((m+w)/x),M=Math.ceil((_-w)/x)+1,C=`m0,${ws(-y)}l${ws(p)},${ws(w)}v${ws(y)}l${ws(-p)},${ws(w)}`;let R=C;for(let A=T;A<M;++A)for(let k=b;k<E;++k)R+=`M${ws(k*v+(A&1)*p)},${ws(A*x)}${C}`;return Kt("svg:g",s).datum(0).call(pe,this,r,s).call(ae,this,{},Ze+_u,Ze+vu).call(A=>A.append("path").call(he,this).call(ze,this,i).attr("d",R)).node()}}function ws(e){return Math.round(e*1e3)/1e3}const fj={ariaLabel:"image",fill:null,stroke:null};function hj(e){return/^\.*\//.test(e)}function dj(e){return/^(blob|data|file|http|https):/i.test(e)}function gj(e){return typeof e=="string"&&(hj(e)||dj(e))?[void 0,e]:[e,void 0]}let KL=class extends le{constructor(t,n={}){let{x:i,y:r,r:s,width:o,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:h,imageRendering:d}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[g,m]=gj(c),[_,p]=Re(s),[y,w]=Re(o,p!==void 0?p*2:void 0),[v,x]=Re(a,p!==void 0?p*2:void 0),[b,E]=Re(l,0);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:_,scale:"r",filter:jr,optional:!0},width:{value:y,filter:jr,optional:!0},height:{value:v,filter:jr,optional:!0},rotate:{value:b,optional:!0},src:{value:g,optional:!0}},mw(n),fj),this.src=m,this.width=w,this.rotate=E,this.height=x,this.r=p,this.preserveAspectRatio=Te(u,"xMidYMid"),this.crossOrigin=sn(f),this.frameAnchor=Af(h),this.imageRendering=Te(d,"auto")}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,width:u,height:f,r:h,rotate:d,src:g}=i,{r:m,width:_,height:p,rotate:y}=this,[w,v]=vr(this,r);return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,{x:l&&o,y:c&&a}).call(x=>x.selectAll().data(t).enter().append("image").call(he,this).attr("x",nT(l,u,h,w,_,m)).attr("y",nT(c,f,h,v,p,m)).attr("width",u?b=>u[b]:_!==void 0?_:h?b=>h[b]*2:m*2).attr("height",f?b=>f[b]:p!==void 0?p:h?b=>h[b]*2:m*2).attr("transform",d?b=>`rotate(${d[b]})`:y?`rotate(${y})`:null).attr("transform-origin",d||y?Qm`${l?b=>l[b]:w}px ${c?b=>c[b]:v}px`:null).call(pt,"href",g?b=>g[b]:this.src).call(pt,"preserveAspectRatio",this.preserveAspectRatio).call(pt,"crossorigin",this.crossOrigin).call(pt,"image-rendering",this.imageRendering).call(pt,"clip-path",h?b=>`circle(${h[b]}px)`:m!==void 0?`circle(${m}px)`:null).call(ze,this,i)).node()}};function nT(e,t,n,i,r,s){return t&&e?o=>e[o]-t[o]/2:t?o=>i-t[o]/2:e&&r!==void 0?o=>e[o]-r/2:r!==void 0?i-r/2:n&&e?o=>e[o]-n[o]:n?o=>i-n[o]:e?o=>e[o]-s:i-s}function mj(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Yi(t,n)),new KL(e,{...i,x:t,y:n})}function pj(e,t,n){var i=1e-8,r=t-1,s=n-1,o=0,a,l,c,u,f,h,d,g,m,_,p;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),d=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(d=-d),g=(d*d-3)/6,m=2/(1/(2*t-1)+1/(2*n-1)),_=d*Math.sqrt(g+m)/m-(1/(2*n-1)-1/(2*t-1))*(g+5/6-2/(3*m)),d=t/(t+n*Math.exp(2*_))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,_=u+f,e<u/_?d=Math.pow(t*_*e,1/t):d=1-Math.pow(n*_*(1-e),1/n)),p=-yl(t)-yl(n)+yl(t+n);o<10;o++){if(d===0||d===1)return d;if(h=yj(d,t,n)-e,u=Math.exp(r*Math.log(d)+s*Math.log(1-d)+p),f=h/u,d-=u=f/(1-.5*Math.min(1,f*(r/d-s/(1-d)))),d<=0&&(d=.5*(d+u)),d>=1&&(d=.5*(d+u+1)),Math.abs(u)<i*d&&o>0)break}return d}function yj(e,t,n){var i=e===0||e===1?0:Math.exp(yl(t+n)-yl(t)-yl(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?i*iT(e,t,n)/t:1-i*iT(1-e,n,t)/n}function iT(e,t,n){var i=1e-30,r=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,h,d;for(Math.abs(c)<i&&(c=i),c=1/c,d=c;r<=100&&(u=2*r,f=r*(n-r)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<i&&(c=i),l=1+f/l,Math.abs(l)<i&&(l=i),c=1/c,d*=c*l,f=-(t+r)*(s+r)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<i&&(c=i),l=1+f/l,Math.abs(l)<i&&(l=i),c=1/c,h=c*l,d*=h,!(Math.abs(h-1)<3e-7));r++);return d}function yl(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],i=1.000000000190015,r,s,o;for(o=(s=r=e)+5.5,o-=(r+.5)*Math.log(o);t<6;t++)i+=n[t]/++s;return Math.log(2.506628274631*i/r)-o}function _j(e,t){var n=pj(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const vj={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class JL extends le{constructor(t,n={}){const{x:i,y:r,z:s,ci:o=.95,precision:a=4}=n;if(super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:uo(n),optional:!0}},n,vj),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,i,r,s){const{x:o,y:a,z:l}=i,{ci:c}=this;return Kt("svg:g",s).call(pe,this,r,s).call(ae,this,n).call(u=>u.selectAll().data(l?zv(t,l,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(he,this).call(mg,this,{...i,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,o,a)).call(c&&!$l(this.fill)?h=>h.select(wj).attr("stroke","none").call(he,this).call(mg,this,{...i,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,o,a)):()=>{}))).node()}}function wj(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(aa.svg,"path"),this)}class bj extends JL{constructor(t,n){super(t,n)}_renderBand(t,n,i){const{ci:r,precision:s}=this,[o,a]=ye(t,u=>i[u]),l=Eg(t,i,n),c=QL(t,i,n,(1-r)/2,l);return Nl().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(ai(o,a-s/2,s).concat(a))}_renderLine(t,n,i){const[r,s]=ye(t,a=>i[a]),o=Eg(t,i,n);return`M${o(r)},${r}L${o(s)},${s}`}}class xj extends JL{constructor(t,n){super(t,n)}_renderBand(t,n,i){const{ci:r,precision:s}=this,[o,a]=ye(t,u=>n[u]),l=Eg(t,n,i),c=QL(t,n,i,(1-r)/2,l);return Nl().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(ai(o,a-s/2,s).concat(a))}_renderLine(t,n,i){const[r,s]=ye(t,a=>n[a]),o=Eg(t,n,i);return`M${r},${o(r)}L${s},${o(s)}`}}function Ej(e,{y:t=zn,x:n=bt,stroke:i,fill:r=Se(i)?"currentColor":i,...s}={}){return new bj(e,ow({...s,x:n,y:t,fill:r,stroke:i}))}function Tj(e,{x:t=zn,y:n=bt,stroke:i,fill:r=Se(i)?"currentColor":i,...s}={}){return new xj(e,sw({...s,x:t,y:n,fill:r,stroke:i}))}function Eg(e,t,n){let i=0,r=0,s=0,o=0;for(const u of e){const f=t[u],h=n[u];i+=f,r+=h,s+=f*h,o+=f*f}const a=e.length,l=(a*s-i*r)/(a*o-i*i),c=(r-l*i)/a;return u=>l*u+c}function QL(e,t,n,i,r){const s=dr(e,u=>t[u])/e.length;let o=0,a=0;for(const u of e)o+=(t[u]-s)**2,a+=(n[u]-r(t[u]))**2;const l=Math.sqrt(a/(e.length-2)),c=_j(i,e.length-2);return(u,f)=>{const h=r(u),d=l*Math.sqrt(1/e.length+(u-s)**2/o);return h+f*c*d}}function A_({path:e=bt,delimiter:t,frameAnchor:n,treeLayout:i=eg,treeSort:r,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=Cw(o),r=e5(r),a!=null&&(a=L_(a)),n===void 0&&(n=o.frameAnchor);const c=n5(t),u=c5(l,L_),[f,h]=Un(),[d,g]=Un();return{x:f,y:d,frameAnchor:n,..._r(l,(m,_)=>{const p=c(Nt(m,e)),y=h([]),w=g([]);let v=-1;const x=[],b=[],E=$R().path(M=>p[M]),T=i();T.nodeSize&&T.nodeSize([1,1]),T.separation&&s!==void 0&&T.separation(s??yv);for(const M of u)M[Tg]=M[a5]([]);for(const M of _){const C=[],R=E(M.filter(A=>p[A]!=null)).each(A=>A.data=m[A.data]);r!=null&&R.sort(r),T(R);for(const A of R.descendants())if(!(a!=null&&!a(A))){C.push(++v),x[v]=A.data,o.position(A,v,y,w);for(const k of u)k[Tg][v]=k[l5](A)}b.push(C)}return{data:x,facets:b}}),...Object.fromEntries(u)}}function t5({path:e=bt,delimiter:t,curve:n="bump-x",stroke:i="#555",strokeWidth:r=1.5,strokeOpacity:s=.5,treeLayout:o=eg,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...f}={}){c=Cw(c),a=e5(a),u!=null&&(u=sT(u)),f={curve:n,stroke:i,strokeWidth:r,strokeOpacity:s,...f};const h=n5(t),d=c5(f,sT),[g,m]=Un(),[_,p]=Un(),[y,w]=Un(),[v,x]=Un();return{x1:g,x2:_,y1:y,y2:v,..._r(f,(b,E)=>{const T=h(Nt(b,e)),M=m([]),C=p([]),R=w([]),A=x([]);let k=-1;const O=[],I=[],F=$R().path(G=>T[G]),P=o();P.nodeSize&&P.nodeSize([1,1]),P.separation&&l!==void 0&&P.separation(l??yv);for(const G of d)G[Tg]=G[a5]([]);for(const G of E){const j=[],U=F(G.filter(q=>T[q]!=null)).each(q=>q.data=b[q.data]);a!=null&&U.sort(a),P(U);for(const{source:q,target:W}of U.links())if(!(u!=null&&!u(W,q))){j.push(++k),O[k]=W.data,c.position(q,k,M,R),c.position(W,k,C,A);for(const Q of d)Q[Tg][k]=Q[l5](W,q)}I.push(j)}return{data:O,facets:I}}),...Object.fromEntries(d)}}function Cw(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return Cj;case"right":return Sj}throw new Error(`invalid tree anchor: ${e}`)}const Cj={frameAnchor:"left",dx:6,position({x:e,y:t},n,i,r){i[n]=t,r[n]=-e}},Sj={frameAnchor:"right",dx:-6,position({x:e,y:t},n,i,r){i[n]=-t,r[n]=-e}};function e5(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?rT(L_(e)):rT(Mj(e))}function rT(e){return(t,n)=>gi(e(t),e(n))}function Mj(e){return t=>{var n;return(n=t.data)==null?void 0:n[e]}}function n5(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(i=>Rj(i,t))}const I_=92,i5=47;function Rj(e,t){if(t===I_)throw new Error("delimiter cannot be backslash");let n=!1;for(let i=0,r=e.length;i<r;++i){switch(e.charCodeAt(i)){case I_:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,i-1)+e.slice(i),--i,--r):e=e.slice(0,i)+"/"+e.slice(i+1);break;case i5:n?(e=e.slice(0,i)+"\\\\"+e.slice(i),i+=2,r+=2):(e=e.slice(0,i)+"\\"+e.slice(i),++i,++r);break}n=!1}return e}function Aj(e){let t=!1;for(let n=0,i=e.length;n<i;++n){switch(e.charCodeAt(n)){case I_:if(!t){t=!0;continue}case i5:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--i);break}t=!1}return e}function r5(e){return yi(e)&&typeof e.node=="function"}function Ij(e){return yi(e)&&typeof e.link=="function"}function L_(e){if(r5(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return k_;case"node:path":return O_;case"node:internal":return s5;case"node:external":return o5;case"node:depth":return F_;case"node:height":return P_}throw new Error(`invalid node value: ${e}`)}}function sT(e){if(r5(e))return e.node;if(Ij(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return Nh(k_);case"parent:path":return Nh(O_);case"parent:depth":return Nh(F_);case"parent:height":return Nh(P_);case"node:name":return k_;case"node:path":return O_;case"node:internal":return s5;case"node:external":return o5;case"node:depth":return F_;case"node:height":return P_}throw new Error(`invalid link value: ${e}`)}}function O_(e){return e.id}function k_(e){return Lj(e.id)}function F_(e){return e.depth}function P_(e){return e.height}function s5(e){return!!e.children}function o5(e){return!e.children}function Nh(e){return(t,n)=>n==null?void 0:e(n)}function Lj(e){let t=e.length;for(;--t>0&&!Oj(e,t););return Aj(e.slice(t+1))}function Oj(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}const a5=2,l5=3,Tg=4;function c5(e,t){const n=[];for(const i in e){const r=e[i],s=t(r);s!==void 0&&n.push([i,...Un(r),s])}return n}function u5(e,{fill:t,stroke:n,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:h=u,dot:d=Se(f)&&Se(h),text:g="node:name",textStroke:m="white",title:_="node:path",dx:p,dy:y,textAnchor:w,treeLayout:v=eg,textLayout:x=v===eg||v===PR?"mirrored":"normal",tip:b,...E}={}){if(p===void 0&&(p=Cw(E.treeAnchor).dx),w!==void 0)throw new Error("textAnchor is not a configurable tree option");x=Jn(x,"textLayout",["mirrored","normal"]);function T(M){return Wl(e,A_({treeLayout:v,text:g,fill:t===void 0?"currentColor":t,stroke:m,dx:p,dy:y,title:_,...M,...E}))}return Wi(wL(e,t5({treeLayout:v,markerStart:f,markerEnd:h,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...E})),d?ds(e,A_({treeLayout:v,fill:t===void 0?"node:internal":t,title:_,tip:b,...E})):null,g!=null?x==="mirrored"?[T({textAnchor:"start",treeFilter:"node:external"}),T({textAnchor:"end",treeFilter:"node:internal",dx:-p})]:T():null)}function kj(e,t){return u5(e,{...t,treeLayout:PR})}function Fj({geometry:e=bt,...t}={}){return $n({...t,x:null,y:null},(n,i,r,s,o,{projection:a})=>{const l=Nt(n,e),c=l.length,u=new Float64Array(c),f=new Float64Array(c),h=lo(a);for(let d=0;d<c;++d)[u[d],f[d]]=h.centroid(l[d]);return{data:n,facets:i,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function Pj({geometry:e=bt,...t}={}){let n;return{...t,x:{transform:i=>Float64Array.from(n=Nt(Nt(i,e),B9),([r])=>r)},y:{transform:()=>Float64Array.from(n,([,i])=>i)}}}function Nj(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Dj(e,t,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>=0?(s=o,r=o-1):i=o+1}return s}function $j(e,t,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>0?(s=o,r=o-1):i=o+1}return s}function zj(e,t,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<0?(s=o,i=o+1):r=o-1}return s}function Wj(e,t,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<=0?(s=o,i=o+1):r=o-1}return s}function Gj(e,t,n,i,r){for(;i<=r;){var s=i+r>>>1,o=e[s],a=n!==void 0?n(o,t):o-t;if(a===0)return s;a<=0?i=s+1:r=s-1}return-1}function Gc(e,t,n,i,r,s){return typeof n=="function"?s(e,t,n,i===void 0?0:i|0,r===void 0?e.length-1:r|0):s(e,t,void 0,n===void 0?0:n|0,i===void 0?e.length-1:i|0)}var Bj={ge:function(e,t,n,i,r){return Gc(e,t,n,i,r,Dj)},gt:function(e,t,n,i,r){return Gc(e,t,n,i,r,$j)},lt:function(e,t,n,i,r){return Gc(e,t,n,i,r,zj)},le:function(e,t,n,i,r){return Gc(e,t,n,i,r,Wj)},eq:function(e,t,n,i,r){return Gc(e,t,n,i,r,Gj)}},Cg=Bj,sl=0,Mo=1,hd=2,Hj=Uj;function Sw(e,t,n,i,r){this.mid=e,this.left=t,this.right=n,this.leftPoints=i,this.rightPoints=r,this.count=(t?t.count:0)+(n?n.count:0)+i.length}var zf=Sw.prototype;function $p(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function f5(e,t){var n=Yl(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function oT(e,t){var n=e.intervals([]);n.push(t),f5(e,n)}function aT(e,t){var n=e.intervals([]),i=n.indexOf(t);return i<0?sl:(n.splice(i,1),f5(e,n),Mo)}zf.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};zf.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?oT(this,e):this.left.insert(e):this.left=Yl([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?oT(this,e):this.right.insert(e):this.right=Yl([e]);else{var n=Cg.ge(this.leftPoints,e,Mw),i=Cg.ge(this.rightPoints,e,Rw);this.leftPoints.splice(n,0,e),this.rightPoints.splice(i,0,e)}};zf.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return sl;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return aT(this,e);var i=this.left.remove(e);return i===hd?(this.left=null,this.count-=1,Mo):(i===Mo&&(this.count-=1),i)}else if(e[0]>this.mid){if(!this.right)return sl;var r=this.left?this.left.count:0;if(4*r>3*(t-1))return aT(this,e);var i=this.right.remove(e);return i===hd?(this.right=null,this.count-=1,Mo):(i===Mo&&(this.count-=1),i)}else{if(this.count===1)return this.leftPoints[0]===e?hd:sl;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,i=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=i}$p(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?$p(this,this.left):$p(this,this.right);return Mo}for(var a=Cg.ge(this.leftPoints,e,Mw);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var i=Cg.ge(this.rightPoints,e,Rw);i<this.rightPoints.length&&this.rightPoints[i][1]===e[1];++i)if(this.rightPoints[i]===e)return this.rightPoints.splice(i,1),Mo}return sl}};function h5(e,t,n){for(var i=0;i<e.length&&e[i][0]<=t;++i){var r=n(e[i]);if(r)return r}}function d5(e,t,n){for(var i=e.length-1;i>=0&&e[i][1]>=t;--i){var r=n(e[i]);if(r)return r}}function g5(e,t){for(var n=0;n<e.length;++n){var i=t(e[n]);if(i)return i}}zf.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return h5(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return d5(this.rightPoints,e,t)}else return g5(this.leftPoints,t)};zf.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var i=this.left.queryInterval(e,t,n);if(i)return i}if(t>this.mid&&this.right){var i=this.right.queryInterval(e,t,n);if(i)return i}return t<this.mid?h5(this.leftPoints,t,n):e>this.mid?d5(this.rightPoints,e,n):g5(this.leftPoints,n)};function Yj(e,t){return e-t}function Mw(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function Rw(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function Yl(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(Yj);for(var i=t[t.length>>1],r=[],s=[],o=[],n=0;n<e.length;++n){var a=e[n];a[1]<i?r.push(a):i<a[0]?s.push(a):o.push(a)}var l=o,c=o.slice();return l.sort(Mw),c.sort(Rw),new Sw(i,Yl(r),Yl(s),l,c)}function N_(e){this.root=e}var pc=N_.prototype;pc.insert=function(e){this.root?this.root.insert(e):this.root=new Sw(e[0],null,null,[e],[e])};pc.remove=function(e){if(this.root){var t=this.root.remove(e);return t===hd&&(this.root=null),t!==sl}return!1};pc.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};pc.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(pc,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(pc,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function Uj(e){return!e||e.length===0?new N_(null):new N_(Yl(e))}const Vj=Nj(Hj),Xj=({marginLeft:e})=>[1,e],jj=({width:e,marginRight:t})=>[-1,e-t],qj=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],Zj=({marginTop:e})=>[1,e],Kj=({height:e,marginBottom:t})=>[-1,e-t],Jj=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function m5(e){return typeof e=="string"?{anchor:e}:e}function Qj(e={},t={}){arguments.length===1&&([e,t]=p5(e));let{anchor:n="left",padding:i=1,r=t.r}=m5(e);switch(`${n}`.toLowerCase()){case"left":n=Xj;break;case"right":n=jj;break;case"middle":n=qj;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return y5("x","y",n,zt(i),r,t)}function tq(e={},t={}){arguments.length===1&&([e,t]=p5(e));let{anchor:n="bottom",padding:i=1,r=t.r}=m5(e);switch(`${n}`.toLowerCase()){case"top":n=Zj;break;case"bottom":n=Kj;break;case"middle":n=Jj;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return y5("y","x",n,zt(i),r,t)}function p5(e){const{anchor:t,padding:n,...i}=e,{r}=i;return[{anchor:t,padding:n,r},i]}function y5(e,t,n,i,r,s){if(r!=null&&typeof r!="number"){let{channels:o,sort:a,reverse:l}=s;o=xv(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:r,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return $n(s,function(o,a,l,c,u,f){let{[t]:h,r:d}=l;if(!l[t])throw new Error(`missing channel: ${t}`);({[t]:h}=jm(l,c,f));const g=d?void 0:r!==void 0?zt(r):this.r!==void 0?this.r:3;d&&(d=Nt(d.value,c[d.scale]||bt,Float64Array));let[m,_]=n(u);const p=m?nq:eq,y=new Float64Array(h.length),w=d?v=>d[v]:()=>g;for(let v of a){const x=Vj();v=v.filter(d?E=>fg(h[E])&&jr(d[E]):E=>fg(h[E]));const b=new Float64Array(2*v.length+2);for(const E of v){const T=w(E),M=m?T+i:0,C=h[E]-T,R=h[E]+T;let A=2;x.queryInterval(C-i,R+i,([,,O])=>{const I=y[O]-M,F=h[E]-h[O],P=i+(d?d[E]+d[O]:2*g),G=Math.sqrt(P*P-F*F);b[A++]=I-G,b[A++]=I+G});let k=b.slice(0,A);m&&(k=k.filter(O=>O>=0));t:for(const O of k.sort(p)){for(let I=0;I<A;I+=2)if(b[I]+1e-6<O&&O<b[I+1]-1e-6)continue t;y[E]=O+M;break}x.insert([C,R,E])}}m||(m=1);for(const v of a)for(const x of v)y[x]=y[x]*m+_;return{data:o,facets:a,channels:{[e]:{value:y,source:null},[t]:{value:h,source:l[t]},...d&&{r:{value:d,source:l.r}}}}})}function eq(e,t){return Math.abs(e)-Math.abs(t)}function nq(e,t){return e-t}function iq(e,t){return arguments.length===1&&({basis:e,...t}=e),_w(Aw(e),t)}function rq(e,t){return arguments.length===1&&({basis:e,...t}=e),vw(Aw(e),t)}function Aw(e){if(e===void 0)return lT;if(typeof e=="function")return u0(wv(e));if(/^p\d{2}$/i.test(e))return yc(_v(e));switch(`${e}`.toLowerCase()){case"deviation":return aq;case"first":return lT;case"last":return oq;case"max":return lq;case"mean":return cq;case"median":return uq;case"min":return fq;case"sum":return hq;case"extent":return sq}throw new Error(`invalid basis: ${e}`)}function u0(e){return{mapIndex(t,n,i){const r=+e(t,n);for(const s of t)i[s]=n[s]===null?NaN:n[s]/r}}}function yc(e){return u0((t,n)=>e(t,i=>n[i]))}const sq={mapIndex(e,t,n){const[i,r]=ye(e,o=>t[o]),s=r-i;for(const o of e)n[o]=t[o]===null?NaN:(t[o]-i)/s}},lT=u0((e,t)=>{for(let n=0;n<e.length;++n){const i=t[e[n]];if(_n(i))return i}}),oq=u0((e,t)=>{for(let n=e.length-1;n>=0;--n){const i=t[e[n]];if(_n(i))return i}}),aq={mapIndex(e,t,n){const i=ym(e,s=>t[s]),r=cf(e,s=>t[s]);for(const s of e)n[s]=t[s]===null?NaN:r?(t[s]-i)/r:0}},lq=yc(Ne),cq=yc(ym),uq=yc(ku),fq=yc(Xe),hq=yc(dr);function dq(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return _5(t);case"last":return v5(t)}if(typeof e=="function")return to(null,e,t);let n,i;for(n in e){if(i!==void 0)throw new Error("ambiguous selector; multiple inputs");i=gq(e[n])}if(i===void 0)throw new Error(`invalid selector: ${e}`);return to(n,i,t)}function gq(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return Iw;case"max":return Lw}throw new Error(`unknown selector: ${e}`)}function _5(e){return to(null,vq,e)}function v5(e){return to(null,wq,e)}function mq(e){return to("x",Iw,e)}function pq(e){return to("y",Iw,e)}function yq(e){return to("x",Lw,e)}function _q(e){return to("y",Lw,e)}function*vq(e){yield e[0]}function*wq(e){yield e[e.length-1]}function*Iw(e,t){yield cD(e,n=>t[n])}function*Lw(e,t){yield $1(e,n=>t[n])}function to(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const i=uo(n);return _r(n,(r,s)=>{const o=Nt(r,i),a=Nt(r,e),l=[];for(const c of s){const u=[];for(const f of o?ls(c,h=>o[h]).values():[c])for(const h of t(f,a))u.push(h);l.push(u)}return{data:r,facets:l}})}const zp=Object.freeze(Object.defineProperty({__proto__:null,Area:r0,Arrow:bL,BarX:EL,BarY:TL,Cell:s0,Contour:UL,Density:jL,Dot:o0,Frame:eL,Geo:qL,Hexgrid:ZL,Image:KL,Line:a0,Link:vL,Mark:le,Raster:$L,Rect:l0,RuleX:d6,RuleY:g6,Text:t0,TickX:IL,TickY:LL,Tip:nL,Vector:e0,area:LV,areaX:Zu,areaY:pa,arrow:DV,auto:qV,autoSpec:CL,axisFx:D6,axisFy:N6,axisX:Qv,axisY:Jv,barX:Wo,barY:Go,bin:Oo,binX:Ds,binY:$s,bollinger:Qo,bollingerX:dX,bollingerY:gX,boxX:pX,boxY:yX,cell:rl,cellX:zV,cellY:WV,centroid:Fj,circle:YV,cluster:kj,column:Un,contour:LX,crosshair:kX,crosshairX:FX,crosshairY:PX,delaunayLink:jX,delaunayMesh:qX,density:tj,dodgeX:Qj,dodgeY:tq,dot:ds,dotX:BV,dotY:HV,filter:nH,formatIsoDate:S3,formatMonth:xH,formatWeekday:EH,frame:nw,geo:Tw,geoCentroid:Pj,graticule:oj,gridFx:H6,gridFy:G6,gridX:B6,gridY:W6,group:Iv,groupX:Uu,groupY:Vu,groupZ:Av,hexagon:UV,hexbin:aj,hexgrid:uj,hull:ZX,identity:bt,image:mj,indexOf:zn,initializer:$n,interpolateNearest:HL,interpolateNone:R_,interpolatorBarycentric:BL,interpolatorRandomWalk:YL,legend:TU,line:pw,lineX:Ku,lineY:Hl,linearRegressionX:Ej,linearRegressionY:Tj,link:wL,map:ss,mapX:_w,mapY:vw,marks:Wi,normalize:Aw,normalizeX:iq,normalizeY:rq,plot:rL,pointer:jv,pointerX:qu,pointerY:qv,raster:vX,rect:yw,rectX:bg,rectY:xg,reverse:iH,ruleX:rs,ruleY:Qs,scale:MY,select:dq,selectFirst:_5,selectLast:v5,selectMaxX:yq,selectMaxY:_q,selectMinX:mq,selectMinY:pq,shuffle:rH,sort:v3,sphere:sj,spike:fU,stackX:dL,stackX1:mV,stackX2:pV,stackY:gL,stackY1:yV,stackY2:_V,text:Wl,textX:_6,textY:v6,tickX:OL,tickY:kL,tip:iL,transform:_r,tree:u5,treeLink:t5,treeNode:A_,valueof:Nt,vector:A6,vectorX:I6,vectorY:L6,voronoi:KX,voronoiMesh:JX,window:c0,windowX:nX,windowY:S_},Symbol.toStringTag,{value:"Module"}));class bq{constructor(){this.documentElement=new Wp(this,"html")}createElementNS(t,n){return new Wp(this,n)}createElement(t){return new Wp(this,t)}createTextNode(t){return new Eq(this,t)}querySelector(){return null}querySelectorAll(){return[]}}var xl;let xq=(xl=class{setProperty(){}removeProperty(){}},xt(xl,"empty",new xl),xl),Wp=class{constructor(t,n){this.ownerDocument=t,this.tagName=n,this.attributes={},this.children=[],this.parentNode=null}setAttribute(t,n){this.attributes[t]=String(n)}setAttributeNS(t,n,i){this.setAttribute(n,i)}getAttribute(t){return this.attributes[t]}getAttributeNS(t){return this.getAttribute(t)}hasAttribute(t){return t in this.attributes}hasAttributeNS(t){return this.hasAttribute(t)}removeAttribute(t){delete this.attributes[t]}removeAttributeNS(t,n){this.removeAttribute(n)}addEventListener(){}removeEventListener(){}dispatchEvent(){}append(...t){for(const n of t)this.appendChild(n!=null&&n.ownerDocument?n:this.ownerDocument.createTextNode(n))}appendChild(t){return this.children.push(t),t.parentNode=this,t}insertBefore(t,n){if(n==null)this.children.push(t);else{const i=this.children.indexOf(n);if(i<0)throw new Error("insertBefore reference node not found");this.children.splice(i,0,t)}return t.parentNode=this,t}querySelector(){return null}querySelectorAll(){return[]}set textContent(t){this.children=[this.ownerDocument.createTextNode(t)]}set style(t){this.attributes.style=t}get style(){return xq.empty}toHyperScript(){return zr(this.tagName,this.attributes,this.children.map(t=>t.toHyperScript()))}};class Eq{constructor(t,n){this.ownerDocument=t,this.nodeValue=String(n)}toHyperScript(){return this.nodeValue}}function w5(e){if(e.nodeType===3)return e.nodeValue;const t={};for(const i of e.getAttributeNames())t[i]=e.getAttribute(i);const n=[];for(let i=e.firstChild;i;i=i.nextSibling)n.push(w5(i));return zr(e.tagName,t,n)}const Tq={props:{options:Object,mark:Object,defer:Boolean,method:{type:String,default:"plot"},onRender:Function},render(){const{method:e}=this,t={...e==="plot"&&{marks:this.mark==null?[]:[this.mark]},...this.options,className:"plot"};if(this.defer){const i=o=>{s();const a=()=>{r(o);const c=zp[e](t);o.append(c),this.onRender(c)},l=o.getBoundingClientRect();l.bottom>0&&l.top<window.innerHeight?a():(this._observer=new IntersectionObserver(([c])=>{c.isIntersecting&&a()},{rootMargin:"100px"}),this._observer.observe(o),typeof requestIdleCallback=="function"&&(this._idling=requestIdleCallback(a)))},r=o=>{for(;o.lastChild;)o.lastChild.remove();s()},s=()=>{this._observer!==void 0&&(this._observer.disconnect(),this._observer=void 0),this._idling!==void 0&&(cancelIdleCallback(this._idling),this._idling=void 0)};return this.options,en(zr("span",e==="plot"?[zr("div",{style:{maxWidth:"100%"}})]:[]),[[{mounted:i,updated:i,unmounted:r}]])}if(typeof document<"u"){const i=zp[e](t),r=s=>{for(;s.lastChild;)s.lastChild.remove();s.append(i),this.onRender(i)};return en(zr("span",[w5(i)]),[[{mounted:r,updated:r}]])}const n=zp[e]({...t,document:new bq});return this.onRender(n),zr("span",[n.toHyperScript()])}};class Ea extends Error{}class Cq extends Ea{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Sq extends Ea{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Mq extends Ea{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class su extends Ea{}class b5 extends Ea{constructor(t){super(`Invalid unit ${t}`)}}class oi extends Ea{}class bs extends Ea{constructor(){super("Zone is an abstract class")}}const lt="numeric",Gi="short",Xn="long",Sg={year:lt,month:lt,day:lt},x5={year:lt,month:Gi,day:lt},Rq={year:lt,month:Gi,day:lt,weekday:Gi},E5={year:lt,month:Xn,day:lt},T5={year:lt,month:Xn,day:lt,weekday:Xn},C5={hour:lt,minute:lt},S5={hour:lt,minute:lt,second:lt},M5={hour:lt,minute:lt,second:lt,timeZoneName:Gi},R5={hour:lt,minute:lt,second:lt,timeZoneName:Xn},A5={hour:lt,minute:lt,hourCycle:"h23"},I5={hour:lt,minute:lt,second:lt,hourCycle:"h23"},L5={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:Gi},O5={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:Xn},k5={year:lt,month:lt,day:lt,hour:lt,minute:lt},F5={year:lt,month:lt,day:lt,hour:lt,minute:lt,second:lt},P5={year:lt,month:Gi,day:lt,hour:lt,minute:lt},N5={year:lt,month:Gi,day:lt,hour:lt,minute:lt,second:lt},Aq={year:lt,month:Gi,day:lt,weekday:Gi,hour:lt,minute:lt},D5={year:lt,month:Xn,day:lt,hour:lt,minute:lt,timeZoneName:Gi},$5={year:lt,month:Xn,day:lt,hour:lt,minute:lt,second:lt,timeZoneName:Gi},z5={year:lt,month:Xn,day:lt,weekday:Xn,hour:lt,minute:lt,timeZoneName:Xn},W5={year:lt,month:Xn,day:lt,weekday:Xn,hour:lt,minute:lt,second:lt,timeZoneName:Xn};class Wf{get type(){throw new bs}get name(){throw new bs}get ianaName(){return this.name}get isUniversal(){throw new bs}offsetName(t,n){throw new bs}formatOffset(t,n){throw new bs}offset(t){throw new bs}equals(t){throw new bs}get isValid(){throw new bs}}let Gp=null;class f0 extends Wf{static get instance(){return Gp===null&&(Gp=new f0),Gp}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return B5(t,n,i)}formatOffset(t,n){return bu(this.offset(t),n)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let dd={};function Iq(e){return dd[e]||(dd[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),dd[e]}const Lq={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Oq(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,r,s,o,a,l,c,u]=i;return[o,r,s,a,l,c,u]}function kq(e,t){const n=e.formatToParts(t),i=[];for(let r=0;r<n.length;r++){const{type:s,value:o}=n[r],a=Lq[s];s==="era"?i[a]=o:Dt(a)||(i[a]=parseInt(o,10))}return i}let Dh={};class os extends Wf{static create(t){return Dh[t]||(Dh[t]=new os(t)),Dh[t]}static resetCache(){Dh={},dd={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=os.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return B5(t,n,i,this.name)}formatOffset(t,n){return bu(this.offset(t),n)}offset(t){const n=new Date(t);if(isNaN(n))return NaN;const i=Iq(this.name);let[r,s,o,a,l,c,u]=i.formatToParts?kq(i,n):Oq(i,n);a==="BC"&&(r=-Math.abs(r)+1);const h=d0({year:r,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let d=+n;const g=d%1e3;return d-=g>=0?g:1e3+g,(h-d)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let cT={};function Fq(e,t={}){const n=JSON.stringify([e,t]);let i=cT[n];return i||(i=new Intl.ListFormat(e,t),cT[n]=i),i}let D_={};function $_(e,t={}){const n=JSON.stringify([e,t]);let i=D_[n];return i||(i=new Intl.DateTimeFormat(e,t),D_[n]=i),i}let z_={};function Pq(e,t={}){const n=JSON.stringify([e,t]);let i=z_[n];return i||(i=new Intl.NumberFormat(e,t),z_[n]=i),i}let W_={};function Nq(e,t={}){const{base:n,...i}=t,r=JSON.stringify([e,i]);let s=W_[r];return s||(s=new Intl.RelativeTimeFormat(e,t),W_[r]=s),s}let ou=null;function Dq(){return ou||(ou=new Intl.DateTimeFormat().resolvedOptions().locale,ou)}function $q(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(n===-1)return[e];{let i,r;try{i=$_(e).resolvedOptions(),r=e}catch{const l=e.substring(0,n);i=$_(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:o}=i;return[r,s,o]}}function zq(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}function Wq(e){const t=[];for(let n=1;n<=12;n++){const i=Rt.utc(2009,n,1);t.push(e(i))}return t}function Gq(e){const t=[];for(let n=1;n<=7;n++){const i=Rt.utc(2016,11,13+n);t.push(e(i))}return t}function $h(e,t,n,i){const r=e.listingMode();return r==="error"?null:r==="en"?n(t):i(t)}function Bq(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class Hq{constructor(t,n,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:r,floor:s,...o}=i;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=Pq(t,a)}}format(t){if(this.inf){const n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{const n=this.floor?Math.floor(t):kw(t,3);return Ie(n,this.padTo)}}}class Yq{constructor(t,n,i){this.opts=i,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&os.create(a).valid?(r=a,this.dt=t):(r="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,r=t.zone.name):(r="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=$_(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(n=>{if(n.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:i}}else return n}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Uq{constructor(t,n,i){this.opts={style:"long",...i},!n&&G5()&&(this.rtf=Nq(t,i))}format(t,n){return this.rtf?this.rtf.format(t,n):lZ(n,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,n){return this.rtf?this.rtf.formatToParts(t,n):[]}}class ue{static fromOpts(t){return ue.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,n,i,r=!1){const s=t||Ae.defaultLocale,o=s||(r?"en-US":Dq()),a=n||Ae.defaultNumberingSystem,l=i||Ae.defaultOutputCalendar;return new ue(o,a,l,s)}static resetCache(){ou=null,D_={},z_={},W_={}}static fromObject({locale:t,numberingSystem:n,outputCalendar:i}={}){return ue.create(t,n,i)}constructor(t,n,i,r){const[s,o,a]=$q(t);this.locale=s,this.numberingSystem=n||o||null,this.outputCalendar=i||a||null,this.intl=zq(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Bq(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:ue.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,n=!1){return $h(this,t,U5,()=>{const i=n?{month:t,day:"numeric"}:{month:t},r=n?"format":"standalone";return this.monthsCache[r][t]||(this.monthsCache[r][t]=Wq(s=>this.extract(s,i,"month"))),this.monthsCache[r][t]})}weekdays(t,n=!1){return $h(this,t,j5,()=>{const i=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},r=n?"format":"standalone";return this.weekdaysCache[r][t]||(this.weekdaysCache[r][t]=Gq(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[r][t]})}meridiems(){return $h(this,void 0,()=>q5,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Rt.utc(2016,11,13,9),Rt.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(t){return $h(this,t,Z5,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[Rt.utc(-40,1,1),Rt.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[t]})}extract(t,n,i){const r=this.dtFormatter(t,n),s=r.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new Hq(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,n={}){return new Yq(t,this.intl,n)}relFormatter(t={}){return new Uq(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Fq(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Bp=null;class yn extends Wf{static get utcInstance(){return Bp===null&&(Bp=new yn(0)),Bp}static instance(t){return t===0?yn.utcInstance:new yn(t)}static parseSpecifier(t){if(t){const n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new yn(g0(n[1],n[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${bu(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${bu(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,n){return bu(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Vq extends Wf{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function zs(e,t){if(Dt(e)||e===null)return t;if(e instanceof Wf)return e;if(Xq(e)){const n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?f0.instance:n==="utc"||n==="gmt"?yn.utcInstance:yn.parseSpecifier(n)||os.create(e)}else return ta(e)?yn.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new Vq(e)}let uT=()=>Date.now(),fT="system",hT=null,dT=null,gT=null,mT=60,pT;class Ae{static get now(){return uT}static set now(t){uT=t}static set defaultZone(t){fT=t}static get defaultZone(){return zs(fT,f0.instance)}static get defaultLocale(){return hT}static set defaultLocale(t){hT=t}static get defaultNumberingSystem(){return dT}static set defaultNumberingSystem(t){dT=t}static get defaultOutputCalendar(){return gT}static set defaultOutputCalendar(t){gT=t}static get twoDigitCutoffYear(){return mT}static set twoDigitCutoffYear(t){mT=t%100}static get throwOnInvalid(){return pT}static set throwOnInvalid(t){pT=t}static resetCaches(){ue.resetCache(),os.resetCache()}}function Dt(e){return typeof e>"u"}function ta(e){return typeof e=="number"}function h0(e){return typeof e=="number"&&e%1===0}function Xq(e){return typeof e=="string"}function jq(e){return Object.prototype.toString.call(e)==="[object Date]"}function G5(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function qq(e){return Array.isArray(e)?e:[e]}function yT(e,t,n){if(e.length!==0)return e.reduce((i,r)=>{const s=[t(r),r];return i&&n(i[0],s[0])===i[0]?i:s},null)[1]}function Zq(e,t){return t.reduce((n,i)=>(n[i]=e[i],n),{})}function Ul(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Yr(e,t,n){return h0(e)&&e>=t&&e<=n}function Kq(e,t){return e-t*Math.floor(e/t)}function Ie(e,t=2){const n=e<0;let i;return n?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function Os(e){if(!(Dt(e)||e===null||e===""))return parseInt(e,10)}function xo(e){if(!(Dt(e)||e===null||e===""))return parseFloat(e)}function Ow(e){if(!(Dt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function kw(e,t,n=!1){const i=10**t;return(n?Math.trunc:Math.round)(e*i)/i}function Gf(e){return e%4===0&&(e%100!==0||e%400===0)}function wu(e){return Gf(e)?366:365}function Mg(e,t){const n=Kq(t-1,12)+1,i=e+(t-n)/12;return n===2?Gf(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function d0(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Rg(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,n=e-1,i=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return t===4||i===3?53:52}function G_(e){return e>99?e:e>Ae.twoDigitCutoffYear?1900+e:2e3+e}function B5(e,t,n,i=null){const r=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function g0(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0,r=n<0||Object.is(n,-0)?-i:i;return n*60+r}function H5(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new oi(`Invalid unit value ${e}`);return t}function Ag(e,t){const n={};for(const i in e)if(Ul(e,i)){const r=e[i];if(r==null)continue;n[t(i)]=H5(r)}return n}function bu(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),r=e>=0?"+":"-";switch(t){case"short":return`${r}${Ie(n,2)}:${Ie(i,2)}`;case"narrow":return`${r}${n}${i>0?`:${i}`:""}`;case"techie":return`${r}${Ie(n,2)}${Ie(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function m0(e){return Zq(e,["hour","minute","second","millisecond"])}const Jq=["January","February","March","April","May","June","July","August","September","October","November","December"],Y5=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Qq=["J","F","M","A","M","J","J","A","S","O","N","D"];function U5(e){switch(e){case"narrow":return[...Qq];case"short":return[...Y5];case"long":return[...Jq];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const V5=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],X5=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],tZ=["M","T","W","T","F","S","S"];function j5(e){switch(e){case"narrow":return[...tZ];case"short":return[...X5];case"long":return[...V5];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const q5=["AM","PM"],eZ=["Before Christ","Anno Domini"],nZ=["BC","AD"],iZ=["B","A"];function Z5(e){switch(e){case"narrow":return[...iZ];case"short":return[...nZ];case"long":return[...eZ];default:return null}}function rZ(e){return q5[e.hour<12?0:1]}function sZ(e,t){return j5(t)[e.weekday-1]}function oZ(e,t){return U5(t)[e.month-1]}function aZ(e,t){return Z5(t)[e.year<0?0:1]}function lZ(e,t,n="always",i=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&s){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${r[e][0]}`;case-1:return f?"yesterday":`last ${r[e][0]}`;case 0:return f?"today":`this ${r[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=r[e],u=i?l?c[1]:c[2]||c[1]:l?r[e][0]:e;return o?`${a} ${u} ago`:`in ${a} ${u}`}function _T(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const cZ={D:Sg,DD:x5,DDD:E5,DDDD:T5,t:C5,tt:S5,ttt:M5,tttt:R5,T:A5,TT:I5,TTT:L5,TTTT:O5,f:k5,ff:P5,fff:D5,ffff:z5,F:F5,FF:N5,FFF:$5,FFFF:W5};class on{static create(t,n={}){return new on(t,n)}static parseFormat(t){let n=null,i="",r=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),n=null,i="",r=!r):r||a===n?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,n=a)}return i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return cZ[t]}constructor(t,n){this.opts=n,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...n}).format()}dtFormatter(t,n={}){return this.loc.dtFormatter(t,{...this.opts,...n})}formatDateTime(t,n){return this.dtFormatter(t,n).format()}formatDateTimeParts(t,n){return this.dtFormatter(t,n).formatToParts()}formatInterval(t,n){return this.dtFormatter(t.start,n).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,n){return this.dtFormatter(t,n).resolvedOptions()}num(t,n=0){if(this.opts.forceSimple)return Ie(t,n);const i={...this.opts};return n>0&&(i.padTo=n),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,n){const i=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(d,g)=>this.loc.extract(t,d,g),o=d=>t.isOffsetFixed&&t.offset===0&&d.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,d.format):"",a=()=>i?rZ(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(d,g)=>i?oZ(t,d):s(g?{month:d}:{month:d,day:"numeric"},"month"),c=(d,g)=>i?sZ(t,d):s(g?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),u=d=>{const g=on.macroTokenToFormatOpts(d);return g?this.formatWithSystemDefault(t,g):d},f=d=>i?aZ(t,d):s({era:d},"era"),h=d=>{switch(d){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(t.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(t.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(t.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(d)}};return _T(on.parseFormat(n),h)}formatDurationFromString(t,n){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>c=>{const u=i(c);return u?this.num(l.get(u),c.length):c},s=on.parseFormat(n),o=s.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return _T(s,r(a))}}class Li{constructor(t,n){this.reason=t,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const K5=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function _c(...e){const t=e.reduce((n,i)=>n+i.source,"");return RegExp(`^${t}$`)}function vc(...e){return t=>e.reduce(([n,i,r],s)=>{const[o,a,l]=s(t,r);return[{...n,...o},a||i,l]},[{},null,1]).slice(0,2)}function wc(e,...t){if(e==null)return[null,null];for(const[n,i]of t){const r=n.exec(e);if(r)return i(r)}return[null,null]}function J5(...e){return(t,n)=>{const i={};let r;for(r=0;r<e.length;r++)i[e[r]]=Os(t[n+r]);return[i,null,n+r]}}const Q5=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,uZ=`(?:${Q5.source}?(?:\\[(${K5.source})\\])?)?`,Fw=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,tO=RegExp(`${Fw.source}${uZ}`),Pw=RegExp(`(?:T${tO.source})?`),fZ=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,hZ=/(\d{4})-?W(\d\d)(?:-?(\d))?/,dZ=/(\d{4})-?(\d{3})/,gZ=J5("weekYear","weekNumber","weekDay"),mZ=J5("year","ordinal"),pZ=/(\d{4})-(\d\d)-(\d\d)/,eO=RegExp(`${Fw.source} ?(?:${Q5.source}|(${K5.source}))?`),yZ=RegExp(`(?: ${eO.source})?`);function _l(e,t,n){const i=e[t];return Dt(i)?n:Os(i)}function _Z(e,t){return[{year:_l(e,t),month:_l(e,t+1,1),day:_l(e,t+2,1)},null,t+3]}function bc(e,t){return[{hours:_l(e,t,0),minutes:_l(e,t+1,0),seconds:_l(e,t+2,0),milliseconds:Ow(e[t+3])},null,t+4]}function Bf(e,t){const n=!e[t]&&!e[t+1],i=g0(e[t+1],e[t+2]),r=n?null:yn.instance(i);return[{},r,t+3]}function Hf(e,t){const n=e[t]?os.create(e[t]):null;return[{},n,t+1]}const vZ=RegExp(`^T?${Fw.source}$`),wZ=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function bZ(e){const[t,n,i,r,s,o,a,l,c]=e,u=t[0]==="-",f=l&&l[0]==="-",h=(d,g=!1)=>d!==void 0&&(g||d&&u)?-d:d;return[{years:h(xo(n)),months:h(xo(i)),weeks:h(xo(r)),days:h(xo(s)),hours:h(xo(o)),minutes:h(xo(a)),seconds:h(xo(l),l==="-0"),milliseconds:h(Ow(c),f)}]}const xZ={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Nw(e,t,n,i,r,s,o){const a={year:t.length===2?G_(Os(t)):Os(t),month:Y5.indexOf(n)+1,day:Os(i),hour:Os(r),minute:Os(s)};return o&&(a.second=Os(o)),e&&(a.weekday=e.length>3?V5.indexOf(e)+1:X5.indexOf(e)+1),a}const EZ=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function TZ(e){const[,t,n,i,r,s,o,a,l,c,u,f]=e,h=Nw(t,r,i,n,s,o,a);let d;return l?d=xZ[l]:c?d=0:d=g0(u,f),[h,new yn(d)]}function CZ(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const SZ=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,MZ=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,RZ=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function vT(e){const[,t,n,i,r,s,o,a]=e;return[Nw(t,r,i,n,s,o,a),yn.utcInstance]}function AZ(e){const[,t,n,i,r,s,o,a]=e;return[Nw(t,a,n,i,r,s,o),yn.utcInstance]}const IZ=_c(fZ,Pw),LZ=_c(hZ,Pw),OZ=_c(dZ,Pw),kZ=_c(tO),nO=vc(_Z,bc,Bf,Hf),FZ=vc(gZ,bc,Bf,Hf),PZ=vc(mZ,bc,Bf,Hf),NZ=vc(bc,Bf,Hf);function DZ(e){return wc(e,[IZ,nO],[LZ,FZ],[OZ,PZ],[kZ,NZ])}function $Z(e){return wc(CZ(e),[EZ,TZ])}function zZ(e){return wc(e,[SZ,vT],[MZ,vT],[RZ,AZ])}function WZ(e){return wc(e,[wZ,bZ])}const GZ=vc(bc);function BZ(e){return wc(e,[vZ,GZ])}const HZ=_c(pZ,yZ),YZ=_c(eO),UZ=vc(bc,Bf,Hf);function VZ(e){return wc(e,[HZ,nO],[YZ,UZ])}const wT="Invalid Duration",iO={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},XZ={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...iO},si=146097/400,Ga=146097/4800,jZ={years:{quarters:4,months:12,weeks:si/7,days:si,hours:si*24,minutes:si*24*60,seconds:si*24*60*60,milliseconds:si*24*60*60*1e3},quarters:{months:3,weeks:si/28,days:si/4,hours:si*24/4,minutes:si*24*60/4,seconds:si*24*60*60/4,milliseconds:si*24*60*60*1e3/4},months:{weeks:Ga/7,days:Ga,hours:Ga*24,minutes:Ga*24*60,seconds:Ga*24*60*60,milliseconds:Ga*24*60*60*1e3},...iO},Bo=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],qZ=Bo.slice(0).reverse();function xs(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Wt(i)}function rO(e,t){let n=t.milliseconds??0;for(const i of qZ.slice(1))t[i]&&(n+=t[i]*e[i].milliseconds);return n}function bT(e,t){const n=rO(e,t)<0?-1:1;Bo.reduceRight((i,r)=>{if(Dt(t[r]))return i;if(i){const s=t[i]*n,o=e[r][i],a=Math.floor(s/o);t[r]+=a*n,t[i]-=a*o*n}return r},null),Bo.reduce((i,r)=>{if(Dt(t[r]))return i;if(i){const s=t[i]%1;t[i]-=s,t[r]+=s*e[i][r]}return r},null)}function ZZ(e){const t={};for(const[n,i]of Object.entries(e))i!==0&&(t[n]=i);return t}class Wt{constructor(t){const n=t.conversionAccuracy==="longterm"||!1;let i=n?jZ:XZ;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||ue.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,n){return Wt.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(t==null||typeof t!="object")throw new oi(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Wt({values:Ag(t,Wt.normalizeUnit),loc:ue.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(ta(t))return Wt.fromMillis(t);if(Wt.isDuration(t))return t;if(typeof t=="object")return Wt.fromObject(t);throw new oi(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){const[i]=WZ(t);return i?Wt.fromObject(i,n):Wt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){const[i]=BZ(t);return i?Wt.fromObject(i,n):Wt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new oi("need to specify a reason the Duration is invalid");const i=t instanceof Li?t:new Li(t,n);if(Ae.throwOnInvalid)throw new Mq(i);return new Wt({invalid:i})}static normalizeUnit(t){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!n)throw new b5(t);return n}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,n={}){const i={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?on.create(this.loc,i).formatDurationFromString(this,t):wT}toHuman(t={}){if(!this.isValid)return wT;const n=Bo.map(i=>{const r=this.values[i];return Dt(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(r)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=kw(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Rt.fromMillis(n,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?rO(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const n=Wt.fromDurationLike(t),i={};for(const r of Bo)(Ul(n.values,r)||Ul(this.values,r))&&(i[r]=n.get(r)+this.get(r));return xs(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const n=Wt.fromDurationLike(t);return this.plus(n.negate())}mapUnits(t){if(!this.isValid)return this;const n={};for(const i of Object.keys(this.values))n[i]=H5(t(this.values[i],i));return xs(this,{values:n},!0)}get(t){return this[Wt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const n={...this.values,...Ag(t,Wt.normalizeUnit)};return xs(this,{values:n})}reconfigure({locale:t,numberingSystem:n,conversionAccuracy:i,matrix:r}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:n}),matrix:r,conversionAccuracy:i};return xs(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return bT(this.matrix,t),xs(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=ZZ(this.normalize().shiftToAll().toObject());return xs(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Wt.normalizeUnit(o));const n={},i={},r=this.toObject();let s;for(const o of Bo)if(t.indexOf(o)>=0){s=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;ta(r[o])&&(a+=r[o]);const l=Math.trunc(a);n[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else ta(r[o])&&(i[o]=r[o]);for(const o in i)i[o]!==0&&(n[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return bT(this.matrix,n),xs(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=this.values[n]===0?0:-this.values[n];return xs(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function n(i,r){return i===void 0||i===0?r===void 0||r===0:i===r}for(const i of Bo)if(!n(this.values[i],t.values[i]))return!1;return!0}}const Ba="Invalid Interval";function KZ(e,t){return!e||!e.isValid?xe.invalid("missing or invalid start"):!t||!t.isValid?xe.invalid("missing or invalid end"):t<e?xe.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class xe{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new oi("need to specify a reason the Interval is invalid");const i=t instanceof Li?t:new Li(t,n);if(Ae.throwOnInvalid)throw new Sq(i);return new xe({invalid:i})}static fromDateTimes(t,n){const i=Hc(t),r=Hc(n),s=KZ(i,r);return s??new xe({start:i,end:r})}static after(t,n){const i=Wt.fromDurationLike(n),r=Hc(t);return xe.fromDateTimes(r,r.plus(i))}static before(t,n){const i=Wt.fromDurationLike(n),r=Hc(t);return xe.fromDateTimes(r.minus(i),r)}static fromISO(t,n){const[i,r]=(t||"").split("/",2);if(i&&r){let s,o;try{s=Rt.fromISO(i,n),o=s.isValid}catch{o=!1}let a,l;try{a=Rt.fromISO(r,n),l=a.isValid}catch{l=!1}if(o&&l)return xe.fromDateTimes(s,a);if(o){const c=Wt.fromISO(r,n);if(c.isValid)return xe.after(s,c)}else if(l){const c=Wt.fromISO(i,n);if(c.isValid)return xe.before(a,c)}}return xe.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const n=this.start.startOf(t),i=this.end.startOf(t);return Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:n}={}){return this.isValid?xe.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];const n=t.map(Hc).filter(o=>this.contains(o)).sort(),i=[];let{s:r}=this,s=0;for(;r<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;i.push(xe.fromDateTimes(r,a)),r=a,s+=1}return i}splitBy(t){const n=Wt.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:i}=this,r=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(n.mapUnits(l=>l*r));s=+a>+this.e?this.e:a,o.push(xe.fromDateTimes(i,s)),i=s,r+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const n=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return n>=i?null:xe.fromDateTimes(n,i)}union(t){if(!this.isValid)return this;const n=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return xe.fromDateTimes(n,i)}static merge(t){const[n,i]=t.sort((r,s)=>r.s-s.s).reduce(([r,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[r,s.union(o)]:[r.concat([s]),o]:[r,o],[[],null]);return i&&n.push(i),n}static xor(t){let n=null,i=0;const r=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?n=l.time:(n&&+n!=+l.time&&r.push(xe.fromDateTimes(n,l.time)),n=null);return xe.merge(r)}difference(...t){return xe.xor([this].concat(t)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Ba}toLocaleString(t=Sg,n={}){return this.isValid?on.create(this.s.loc.clone(n),t).formatInterval(this):Ba}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Ba}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ba}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Ba}toFormat(t,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${n}${this.e.toFormat(t)}`:Ba}toDuration(t,n){return this.isValid?this.e.diff(this.s,t,n):Wt.invalid(this.invalidReason)}mapEndpoints(t){return xe.fromDateTimes(t(this.s),t(this.e))}}class zh{static hasDST(t=Ae.defaultZone){const n=Rt.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(t){return os.isValidZone(t)}static normalizeZone(t){return zs(t,Ae.defaultZone)}static months(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||ue.create(n,i,s)).months(t)}static monthsFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||ue.create(n,i,s)).months(t,!0)}static weekdays(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||ue.create(n,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||ue.create(n,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return ue.create(t).meridiems()}static eras(t="short",{locale:n=null}={}){return ue.create(n,null,"gregory").eras(t)}static features(){return{relative:G5()}}}function xT(e,t){const n=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor(Wt.fromMillis(i).as("days"))}function JZ(e,t,n){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=xT(l,c);return(u-u%7)/7}],["days",xT]],r={},s=e;let o,a;for(const[l,c]of i)n.indexOf(l)>=0&&(o=l,r[l]=c(e,t),a=s.plus(r),a>t?(r[l]--,e=s.plus(r),e>t&&(a=e,r[l]--,e=s.plus(r))):e=a);return[e,r,a,o]}function QZ(e,t,n,i){let[r,s,o,a]=JZ(e,t,n);const l=t-r,c=n.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<t&&(o=r.plus({[a]:1})),o!==r&&(s[a]=(s[a]||0)+l/(o-r)));const u=Wt.fromObject(s,i);return c.length>0?Wt.fromMillis(l,i).shiftTo(...c).plus(u):u}const Dw={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},ET={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},tK=Dw.hanidec.replace(/[\[|\]]/g,"").split("");function eK(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(e[n].search(Dw.hanidec)!==-1)t+=tK.indexOf(e[n]);else for(const r in ET){const[s,o]=ET[r];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}function _i({numberingSystem:e},t=""){return new RegExp(`${Dw[e||"latn"]}${t}`)}const nK="missing Intl.DateTimeFormat.formatToParts support";function Xt(e,t=n=>n){return{regex:e,deser:([n])=>t(eK(n))}}const iK=String.fromCharCode(160),sO=`[ ${iK}]`,oO=new RegExp(sO,"g");function rK(e){return e.replace(/\./g,"\\.?").replace(oO,sO)}function TT(e){return e.replace(/\./g,"").replace(oO," ").toLowerCase()}function vi(e,t){return e===null?null:{regex:RegExp(e.map(rK).join("|")),deser:([n])=>e.findIndex(i=>TT(n)===TT(i))+t}}function CT(e,t){return{regex:e,deser:([,n,i])=>g0(n,i),groups:t}}function Wh(e){return{regex:e,deser:([t])=>t}}function sK(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function oK(e,t){const n=_i(t),i=_i(t,"{2}"),r=_i(t,"{3}"),s=_i(t,"{4}"),o=_i(t,"{6}"),a=_i(t,"{1,2}"),l=_i(t,"{1,3}"),c=_i(t,"{1,6}"),u=_i(t,"{1,9}"),f=_i(t,"{2,4}"),h=_i(t,"{4,6}"),d=_=>({regex:RegExp(sK(_.val)),deser:([p])=>p,literal:!0}),m=(_=>{if(e.literal)return d(_);switch(_.val){case"G":return vi(t.eras("short"),0);case"GG":return vi(t.eras("long"),0);case"y":return Xt(c);case"yy":return Xt(f,G_);case"yyyy":return Xt(s);case"yyyyy":return Xt(h);case"yyyyyy":return Xt(o);case"M":return Xt(a);case"MM":return Xt(i);case"MMM":return vi(t.months("short",!0),1);case"MMMM":return vi(t.months("long",!0),1);case"L":return Xt(a);case"LL":return Xt(i);case"LLL":return vi(t.months("short",!1),1);case"LLLL":return vi(t.months("long",!1),1);case"d":return Xt(a);case"dd":return Xt(i);case"o":return Xt(l);case"ooo":return Xt(r);case"HH":return Xt(i);case"H":return Xt(a);case"hh":return Xt(i);case"h":return Xt(a);case"mm":return Xt(i);case"m":return Xt(a);case"q":return Xt(a);case"qq":return Xt(i);case"s":return Xt(a);case"ss":return Xt(i);case"S":return Xt(l);case"SSS":return Xt(r);case"u":return Wh(u);case"uu":return Wh(a);case"uuu":return Xt(n);case"a":return vi(t.meridiems(),0);case"kkkk":return Xt(s);case"kk":return Xt(f,G_);case"W":return Xt(a);case"WW":return Xt(i);case"E":case"c":return Xt(n);case"EEE":return vi(t.weekdays("short",!1),1);case"EEEE":return vi(t.weekdays("long",!1),1);case"ccc":return vi(t.weekdays("short",!0),1);case"cccc":return vi(t.weekdays("long",!0),1);case"Z":case"ZZ":return CT(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return CT(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return Wh(/[a-z_+-/]{1,256}?/i);case" ":return Wh(/[^\S\n\r]/);default:return d(_)}})(e)||{invalidReason:nK};return m.token=e,m}const aK={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function lK(e,t,n){const{type:i,value:r}=e;if(i==="literal"){const l=/^\s+$/.test(r);return{literal:!l,val:l?" ":r}}const s=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=aK[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function cK(e){return[`^${e.map(n=>n.regex).reduce((n,i)=>`${n}(${i.source})`,"")}$`,e]}function uK(e,t,n){const i=e.match(t);if(i){const r={};let s=1;for(const o in n)if(Ul(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(r[a.token.val[0]]=a.deser(i.slice(s,s+l))),s+=l}return[i,r]}else return[i,{}]}function fK(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,i;return Dt(e.z)||(n=os.create(e.z)),Dt(e.Z)||(n||(n=new yn(e.Z)),i=e.Z),Dt(e.q)||(e.M=(e.q-1)*3+1),Dt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Dt(e.u)||(e.S=Ow(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),n,i]}let Hp=null;function hK(){return Hp||(Hp=Rt.fromMillis(1555555555555)),Hp}function dK(e,t){if(e.literal)return e;const n=on.macroTokenToFormatOpts(e.val),i=cO(n,t);return i==null||i.includes(void 0)?e:i}function aO(e,t){return Array.prototype.concat(...e.map(n=>dK(n,t)))}function lO(e,t,n){const i=aO(on.parseFormat(n),e),r=i.map(o=>oK(o,e)),s=r.find(o=>o.invalidReason);if(s)return{input:t,tokens:i,invalidReason:s.invalidReason};{const[o,a]=cK(r),l=RegExp(o,"i"),[c,u]=uK(t,l,a),[f,h,d]=u?fK(u):[null,null,void 0];if(Ul(u,"a")&&Ul(u,"H"))throw new su("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:c,matches:u,result:f,zone:h,specificOffset:d}}}function gK(e,t,n){const{result:i,zone:r,specificOffset:s,invalidReason:o}=lO(e,t,n);return[i,r,s,o]}function cO(e,t){if(!e)return null;const i=on.create(t,e).dtFormatter(hK()),r=i.formatToParts(),s=i.resolvedOptions();return r.map(o=>lK(o,e,s))}const uO=[0,31,59,90,120,151,181,212,243,273,304,334],fO=[0,31,60,91,121,152,182,213,244,274,305,335];function fi(e,t){return new Li("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function hO(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const r=i.getUTCDay();return r===0?7:r}function dO(e,t,n){return n+(Gf(e)?fO:uO)[t-1]}function gO(e,t){const n=Gf(e)?fO:uO,i=n.findIndex(s=>s<t),r=t-n[i];return{month:i+1,day:r}}function B_(e){const{year:t,month:n,day:i}=e,r=dO(t,n,i),s=hO(t,n,i);let o=Math.floor((r-s+10)/7),a;return o<1?(a=t-1,o=Rg(a)):o>Rg(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:s,...m0(e)}}function ST(e){const{weekYear:t,weekNumber:n,weekday:i}=e,r=hO(t,1,4),s=wu(t);let o=n*7+i-r-3,a;o<1?(a=t-1,o+=wu(a)):o>s?(a=t+1,o-=wu(t)):a=t;const{month:l,day:c}=gO(a,o);return{year:a,month:l,day:c,...m0(e)}}function Yp(e){const{year:t,month:n,day:i}=e,r=dO(t,n,i);return{year:t,ordinal:r,...m0(e)}}function MT(e){const{year:t,ordinal:n}=e,{month:i,day:r}=gO(t,n);return{year:t,month:i,day:r,...m0(e)}}function mK(e){const t=h0(e.weekYear),n=Yr(e.weekNumber,1,Rg(e.weekYear)),i=Yr(e.weekday,1,7);return t?n?i?!1:fi("weekday",e.weekday):fi("week",e.week):fi("weekYear",e.weekYear)}function pK(e){const t=h0(e.year),n=Yr(e.ordinal,1,wu(e.year));return t?n?!1:fi("ordinal",e.ordinal):fi("year",e.year)}function mO(e){const t=h0(e.year),n=Yr(e.month,1,12),i=Yr(e.day,1,Mg(e.year,e.month));return t?n?i?!1:fi("day",e.day):fi("month",e.month):fi("year",e.year)}function pO(e){const{hour:t,minute:n,second:i,millisecond:r}=e,s=Yr(t,0,23)||t===24&&n===0&&i===0&&r===0,o=Yr(n,0,59),a=Yr(i,0,59),l=Yr(r,0,999);return s?o?a?l?!1:fi("millisecond",r):fi("second",i):fi("minute",n):fi("hour",t)}const Up="Invalid DateTime",RT=864e13;function Gh(e){return new Li("unsupported zone",`the zone "${e.name}" is not supported`)}function Vp(e){return e.weekData===null&&(e.weekData=B_(e.c)),e.weekData}function Eo(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Rt({...n,...t,old:n})}function yO(e,t,n){let i=e-t*60*1e3;const r=n.offset(i);if(t===r)return[i,t];i-=(r-t)*60*1e3;const s=n.offset(i);return r===s?[i,r]:[e-Math.min(r,s)*60*1e3,Math.max(r,s)]}function Bh(e,t){e+=t*60*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function gd(e,t,n){return yO(d0(e),t,n)}function AT(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),r=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:r,day:Math.min(e.c.day,Mg(i,r))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Wt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=d0(s);let[l,c]=yO(a,n,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function Bc(e,t,n,i,r,s){const{setZone:o,zone:a}=n;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=Rt.fromObject(e,{...n,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return Rt.invalid(new Li("unparsable",`the input "${r}" can't be parsed as ${i}`))}function Hh(e,t,n=!0){return e.isValid?on.create(ue.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Xp(e,t){const n=e.c.year>9999||e.c.year<0;let i="";return n&&e.c.year>=0&&(i+="+"),i+=Ie(e.c.year,n?6:4),t?(i+="-",i+=Ie(e.c.month),i+="-",i+=Ie(e.c.day)):(i+=Ie(e.c.month),i+=Ie(e.c.day)),i}function IT(e,t,n,i,r,s){let o=Ie(e.c.hour);return t?(o+=":",o+=Ie(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=":")):o+=Ie(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=Ie(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=Ie(e.c.millisecond,3))),r&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=Ie(Math.trunc(-e.o/60)),o+=":",o+=Ie(Math.trunc(-e.o%60))):(o+="+",o+=Ie(Math.trunc(e.o/60)),o+=":",o+=Ie(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const _O={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yK={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},_K={ordinal:1,hour:0,minute:0,second:0,millisecond:0},vO=["year","month","day","hour","minute","second","millisecond"],vK=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],wK=["year","ordinal","hour","minute","second","millisecond"];function LT(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new b5(e);return t}function OT(e,t){const n=zs(t.zone,Ae.defaultZone),i=ue.fromObject(t),r=Ae.now();let s,o;if(Dt(e.year))s=r;else{for(const c of vO)Dt(e[c])&&(e[c]=_O[c]);const a=mO(e)||pO(e);if(a)return Rt.invalid(a);const l=n.offset(r);[s,o]=gd(e,l,n)}return new Rt({ts:s,zone:n,loc:i,o})}function kT(e,t,n){const i=Dt(n.round)?!0:n.round,r=(o,a)=>(o=kw(o,i||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(o,a)),s=o=>n.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(n.unit)return r(s(n.unit),n.unit);for(const o of n.units){const a=s(o);if(Math.abs(a)>=1)return r(a,o)}return r(e>t?-0:0,n.units[n.units.length-1])}function FT(e){let t={},n;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}class Rt{constructor(t){const n=t.zone||Ae.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new Li("invalid input"):null)||(n.isValid?null:Gh(n));this.ts=Dt(t.ts)?Ae.now():t.ts;let r=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(n))[r,s]=[t.old.c,t.old.o];else{const a=n.offset(this.ts);r=Bh(this.ts,a),i=Number.isNaN(r.year)?new Li("invalid input"):null,r=i?null:r,s=i?null:a}this._zone=n,this.loc=t.loc||ue.create(),this.invalid=i,this.weekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new Rt({})}static local(){const[t,n]=FT(arguments),[i,r,s,o,a,l,c]=n;return OT({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,n]=FT(arguments),[i,r,s,o,a,l,c]=n;return t.zone=yn.utcInstance,OT({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,n={}){const i=jq(t)?t.valueOf():NaN;if(Number.isNaN(i))return Rt.invalid("invalid input");const r=zs(n.zone,Ae.defaultZone);return r.isValid?new Rt({ts:i,zone:r,loc:ue.fromObject(n)}):Rt.invalid(Gh(r))}static fromMillis(t,n={}){if(ta(t))return t<-RT||t>RT?Rt.invalid("Timestamp out of range"):new Rt({ts:t,zone:zs(n.zone,Ae.defaultZone),loc:ue.fromObject(n)});throw new oi(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(ta(t))return new Rt({ts:t*1e3,zone:zs(n.zone,Ae.defaultZone),loc:ue.fromObject(n)});throw new oi("fromSeconds requires a numerical input")}static fromObject(t,n={}){t=t||{};const i=zs(n.zone,Ae.defaultZone);if(!i.isValid)return Rt.invalid(Gh(i));const r=Ae.now(),s=Dt(n.specificOffset)?i.offset(r):n.specificOffset,o=Ag(t,LT),a=!Dt(o.ordinal),l=!Dt(o.year),c=!Dt(o.month)||!Dt(o.day),u=l||c,f=o.weekYear||o.weekNumber,h=ue.fromObject(n);if((u||a)&&f)throw new su("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new su("Can't mix ordinal dates with month/day");const d=f||o.weekday&&!u;let g,m,_=Bh(r,s);d?(g=vK,m=yK,_=B_(_)):a?(g=wK,m=_K,_=Yp(_)):(g=vO,m=_O);let p=!1;for(const T of g){const M=o[T];Dt(M)?p?o[T]=m[T]:o[T]=_[T]:p=!0}const y=d?mK(o):a?pK(o):mO(o),w=y||pO(o);if(w)return Rt.invalid(w);const v=d?ST(o):a?MT(o):o,[x,b]=gd(v,s,i),E=new Rt({ts:x,zone:i,o:b,loc:h});return o.weekday&&u&&t.weekday!==E.weekday?Rt.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${E.toISO()}`):E}static fromISO(t,n={}){const[i,r]=DZ(t);return Bc(i,r,n,"ISO 8601",t)}static fromRFC2822(t,n={}){const[i,r]=$Z(t);return Bc(i,r,n,"RFC 2822",t)}static fromHTTP(t,n={}){const[i,r]=zZ(t);return Bc(i,r,n,"HTTP",n)}static fromFormat(t,n,i={}){if(Dt(t)||Dt(n))throw new oi("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=i,o=ue.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=gK(o,t,n);return u?Rt.invalid(u):Bc(a,l,i,`format ${n}`,t,c)}static fromString(t,n,i={}){return Rt.fromFormat(t,n,i)}static fromSQL(t,n={}){const[i,r]=VZ(t);return Bc(i,r,n,"SQL",t)}static invalid(t,n=null){if(!t)throw new oi("need to specify a reason the DateTime is invalid");const i=t instanceof Li?t:new Li(t,n);if(Ae.throwOnInvalid)throw new Cq(i);return new Rt({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,n={}){const i=cO(t,ue.fromObject(n));return i?i.map(r=>r?r.val:null).join(""):null}static expandFormat(t,n={}){return aO(on.parseFormat(t),ue.fromObject(n)).map(r=>r.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Vp(this).weekYear:NaN}get weekNumber(){return this.isValid?Vp(this).weekNumber:NaN}get weekday(){return this.isValid?Vp(this).weekday:NaN}get ordinal(){return this.isValid?Yp(this.c).ordinal:NaN}get monthShort(){return this.isValid?zh.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?zh.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?zh.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?zh.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,n=6e4,i=d0(this.c),r=this.zone.offset(i-t),s=this.zone.offset(i+t),o=this.zone.offset(i-r*n),a=this.zone.offset(i-s*n);if(o===a)return[this];const l=i-o*n,c=i-a*n,u=Bh(l,o),f=Bh(c,a);return u.hour===f.hour&&u.minute===f.minute&&u.second===f.second&&u.millisecond===f.millisecond?[Eo(this,{ts:l}),Eo(this,{ts:c})]:[this]}get isInLeapYear(){return Gf(this.year)}get daysInMonth(){return Mg(this.year,this.month)}get daysInYear(){return this.isValid?wu(this.year):NaN}get weeksInWeekYear(){return this.isValid?Rg(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:n,numberingSystem:i,calendar:r}=on.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:n,numberingSystem:i,outputCalendar:r}}toUTC(t=0,n={}){return this.setZone(yn.instance(t),n)}toLocal(){return this.setZone(Ae.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:i=!1}={}){if(t=zs(t,Ae.defaultZone),t.equals(this.zone))return this;if(t.isValid){let r=this.ts;if(n||i){const s=t.offset(this.ts),o=this.toObject();[r]=gd(o,s,t)}return Eo(this,{ts:r,zone:t})}else return Rt.invalid(Gh(t))}reconfigure({locale:t,numberingSystem:n,outputCalendar:i}={}){const r=this.loc.clone({locale:t,numberingSystem:n,outputCalendar:i});return Eo(this,{loc:r})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const n=Ag(t,LT),i=!Dt(n.weekYear)||!Dt(n.weekNumber)||!Dt(n.weekday),r=!Dt(n.ordinal),s=!Dt(n.year),o=!Dt(n.month)||!Dt(n.day),a=s||o,l=n.weekYear||n.weekNumber;if((a||r)&&l)throw new su("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&r)throw new su("Can't mix ordinal dates with month/day");let c;i?c=ST({...B_(this.c),...n}):Dt(n.ordinal)?(c={...this.toObject(),...n},Dt(n.day)&&(c.day=Math.min(Mg(c.year,c.month),c.day))):c=MT({...Yp(this.c),...n});const[u,f]=gd(c,this.o,this.zone);return Eo(this,{ts:u,o:f})}plus(t){if(!this.isValid)return this;const n=Wt.fromDurationLike(t);return Eo(this,AT(this,n))}minus(t){if(!this.isValid)return this;const n=Wt.fromDurationLike(t).negate();return Eo(this,AT(this,n))}startOf(t){if(!this.isValid)return this;const n={},i=Wt.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks"&&(n.weekday=1),i==="quarters"){const r=Math.ceil(this.month/3);n.month=(r-1)*3+1}return this.set(n)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,n={}){return this.isValid?on.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):Up}toLocaleString(t=Sg,n={}){return this.isValid?on.create(this.loc.clone(n),t).formatDateTime(this):Up}toLocaleParts(t={}){return this.isValid?on.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:n=!1,suppressMilliseconds:i=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=Xp(this,o);return a+="T",a+=IT(this,o,n,i,r,s),a}toISODate({format:t="extended"}={}){return this.isValid?Xp(this,t==="extended"):null}toISOWeekDate(){return Hh(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:n=!1,includeOffset:i=!0,includePrefix:r=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+IT(this,o==="extended",n,t,i,s):null}toRFC2822(){return Hh(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Hh(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Xp(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:n=!1,includeOffsetSpace:i=!0}={}){let r="HH:mm:ss.SSS";return(n||t)&&(i&&(r+=" "),n?r+="z":t&&(r+="ZZ")),Hh(this,r,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Up}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const n={...this.c};return t.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,n="milliseconds",i={}){if(!this.isValid||!t.isValid)return Wt.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=qq(n).map(Wt.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=QZ(a,l,s,r);return o?c.negate():c}diffNow(t="milliseconds",n={}){return this.diff(Rt.now(),t,n)}until(t){return this.isValid?xe.fromDateTimes(this,t):this}hasSame(t,n){if(!this.isValid)return!1;const i=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(n)<=i&&i<=r.endOf(n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const n=t.base||Rt.fromObject({},{zone:this.zone}),i=t.padding?this<n?-t.padding:t.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(r=t.unit,s=void 0),kT(n,this.plus(i),{...t,numeric:"always",units:r,unit:s})}toRelativeCalendar(t={}){return this.isValid?kT(t.base||Rt.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Rt.isDateTime))throw new oi("min requires all arguments be DateTimes");return yT(t,n=>n.valueOf(),Math.min)}static max(...t){if(!t.every(Rt.isDateTime))throw new oi("max requires all arguments be DateTimes");return yT(t,n=>n.valueOf(),Math.max)}static fromFormatExplain(t,n,i={}){const{locale:r=null,numberingSystem:s=null}=i,o=ue.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return lO(o,t,n)}static fromStringExplain(t,n,i={}){return Rt.fromFormatExplain(t,n,i)}static get DATE_SHORT(){return Sg}static get DATE_MED(){return x5}static get DATE_MED_WITH_WEEKDAY(){return Rq}static get DATE_FULL(){return E5}static get DATE_HUGE(){return T5}static get TIME_SIMPLE(){return C5}static get TIME_WITH_SECONDS(){return S5}static get TIME_WITH_SHORT_OFFSET(){return M5}static get TIME_WITH_LONG_OFFSET(){return R5}static get TIME_24_SIMPLE(){return A5}static get TIME_24_WITH_SECONDS(){return I5}static get TIME_24_WITH_SHORT_OFFSET(){return L5}static get TIME_24_WITH_LONG_OFFSET(){return O5}static get DATETIME_SHORT(){return k5}static get DATETIME_SHORT_WITH_SECONDS(){return F5}static get DATETIME_MED(){return P5}static get DATETIME_MED_WITH_SECONDS(){return N5}static get DATETIME_MED_WITH_WEEKDAY(){return Aq}static get DATETIME_FULL(){return D5}static get DATETIME_FULL_WITH_SECONDS(){return $5}static get DATETIME_HUGE(){return z5}static get DATETIME_HUGE_WITH_SECONDS(){return W5}}function Hc(e){if(Rt.isDateTime(e))return e;if(e&&e.valueOf&&ta(e.valueOf()))return Rt.fromJSDate(e);if(e&&typeof e=="object")return Rt.fromObject(e);throw new oi(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function $w(e,t){if(!e)return"";let n=Rt.fromISO(e);return t&&(n=n.setZone(`UTC+${t}`)),n.toLocaleString({weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})}function wO(e){if(!e)return"UTC";let t="GMT";return e>0&&(t+="+"),t+e.toString()}function bO(e){const t=Math.floor(e/86400);e-=t*(60*60*24);const n=Math.floor(e/(60*60));e-=n*(60*60);const i=Math.floor(e/60);return e-=i*60,t>0?`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`:`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`}function PT(e,t="seconds",n){const i=["years","months","days","hours","minutes","seconds","milliseconds"],r=i.indexOf(t),s=Object.entries(e.shiftTo(...i).normalize().toObject()).filter(([a,l],c)=>l>0&&c<=r);return Wt.fromObject(s.length===0?{[t]:0}:Object.fromEntries(s)).toHuman(n)}function bK(e){if(e<=0)return"0s";const t=Math.floor(e/(1e3*60*60*24)),n=Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),i=Math.floor(e%(1e3*60*60)/(1e3*60)),r=Math.floor(e%(1e3*60)/1e3);let s="";return t>0&&(s+=t+"d "),n>0&&(s+=n+"h "),i>0&&(s+=i+"m "),r>0&&(s+=r+"s"),s}function NT(e,t){if(!e)return"0 m";t=t??0;const n=(t??0)<=0?1:10*t;return e<1e3?`${(Math.round(e*n)/n).toLocaleString()} m`:`${(Math.round(e/1e3*n)/n).toLocaleString()} km`}const xK={components:{PlotFigure:Tq},props:{activityFiles:Array,activityTimezoneOffset:Array},data(){return{x:e=>e.totalDistance,y:e=>e.altitude,firstData:ne,hovered:ne,cumulativeData:[],yMin:Number.MAX_VALUE,yMax:0,plotSizeWidth:0,plotSizeHeight:0}},watch:{activityFiles:{handler(e){let t=[],n=0;e==null||e.forEach((i,r)=>{i.records.length>0&&(i.records.map((s,o)=>{s.totalDistance=n+s.distance,typeof s.altitude=="number"&&s.altitude>this.yMax&&(this.yMax=s.altitude),typeof s.altitude=="number"&&s.altitude<this.yMin&&(this.yMin=s.altitude),s.activityIndex=r,s.recordIndex=o}),n=i.records[i.records.length-1].totalDistance,t=t.concat(i.records))}),this.firstData=t[0],this.cumulativeData=t}}},computed:{hoveredResult:function(){if(!this.hovered||!this.firstData)return null;const e=Rt.fromISO(this.hovered.timestamp??"").diff(Rt.fromISO(this.firstData.timestamp??""));return{distance:NT(this.hovered.totalDistance??0,2),duration:PT(e,"seconds",{unitDisplay:"short"}),altitude:(this.hovered.altitude??0).toFixed(2),grade:Math.round(this.hovered.grade??0)}},options:function(){const e=(this.cumulativeData.length<50?50:this.cumulativeData.length)/50;return{width:this.plotSizeWidth<=0?void 0:this.plotSizeWidth,height:this.plotSizeHeight<=0?void 0:this.plotSizeHeight,x:{grid:!0,label:"Distance (km)",transform:t=>t/1e3},y:{grid:!0,label:"Altitude (m)",nice:!0},color:{type:"diverging",scheme:"RdYlGn",reverse:!0,pivot:0,symmetric:!0},marks:[pa(this.cumulativeData,S_(e,{x:this.x,y:this.y,z:null,fill:"#2A303F",curve:"basis",y1:this.yMin})),Hl(this.cumulativeData,S_(e,{x:this.x,y:this.y,z:null,stroke:"grade",curve:"basis",strokeWidth:4,strokeOpacity:.5})),rs(this.cumulativeData,qu({x:this.x,py:this.y,stroke:"#f15a22"})),ds(this.cumulativeData,qu({x:this.x,y:this.y,r:10,stroke:"#f15a22"}))]}}},methods:{distanceToHuman:NT,toHuman:PT,getOptions(){},plotRendered(e){this.onResize(),e.addEventListener("input",()=>{this.hovered=e.value,this.$emit("record",e.value)})},onResize(){if(!this.$el)return;let e=this.$el.offsetWidth,t=this.$el.offsetHeight-this.$el.querySelector(".graph-detail").offsetHeight-1;this.plotSizeWidth!=e&&(this.plotSizeWidth=e),this.plotSizeHeight!=t&&(this.plotSizeHeight=t),console.log(this.plotSizeWidth,this.plotSizeHeight)}},updated(){},mounted(){this.$nextTick(()=>{window.addEventListener("resize",this.onResize),this.onResize()})},unmounted(){window.removeEventListener("resize",this.onResize)}};const wr=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},p0=e=>(ic("data-v-05838bb9"),e=e(),rc(),e),EK={style:{display:"flex","flex-direction":"column",height:"100%"}},TK={class:"graph-detail"},CK={class:"detail"},SK=p0(()=>N("span",null,[N("i",{class:"fa-solid fa-road"})],-1)),MK={class:"detail-value"},RK={class:"detail"},AK=p0(()=>N("span",null,[N("i",{class:"fa-solid fa-hourglass-half"})],-1)),IK={class:"detail-value"},LK={class:"detail"},OK=p0(()=>N("span",null,[N("i",{class:"fa-solid fa-mountain"})],-1)),kK={class:"detail-value"},FK={class:"detail"},PK=p0(()=>N("span",null,[N("i",{class:"fa-solid fa-angle-left"})],-1)),NK={class:"detail-value"},DK={class:"graph",style:{"flex-grow":"1"}};function $K(e,t,n,i,r,s){const o=_4("PlotFigure");return mt(),wt("div",EK,[N("div",TK,[N("div",CK,[SK,N("span",MK,ht(s.hoveredResult?s.hoveredResult.distance??"-":"-"),1)]),N("div",RK,[AK,N("span",IK,ht(s.hoveredResult?s.hoveredResult.duration??"-":"-"),1)]),N("div",LK,[OK,N("span",kK,ht(s.hoveredResult?s.hoveredResult.altitude??"-":"-")+" masl",1)]),N("div",FK,[PK,N("span",NK,ht(s.hoveredResult?s.hoveredResult.grade??"-":"-")+"%",1)])]),N("div",DK,[Lt(o,{options:s.options,defer:"",onRender:s.plotRendered},null,8,["options","onRender"])])])}const zK=wr(xK,[["render",$K],["__scopeId","data-v-05838bb9"]]),WK={props:{size:{default:"70px"},color:{default:"#41b883"}},computed:{diamondStyle(){let e=parseInt(this.size);return{width:e/4+"px",height:e/4+"px","--bg-color":this.color}},styles(){let e=parseInt(this.size);return{width:this.size,height:e/4+"px"}}}};const GK={class:"spinner-container"};function BK(e,t,n,i,r,s){return mt(),wt("div",GK,[N("span",{style:tn(s.styles),class:"spinner spinner--rotate-diamond"},[N("div",{style:tn(s.diamondStyle),class:"diamond"},null,4),N("div",{style:tn(s.diamondStyle),class:"diamond"},null,4),N("div",{style:tn(s.diamondStyle),class:"diamond"},null,4)],4)])}const xO=wr(WK,[["render",BK],["__scopeId","data-v-364d70a1"]]),HK="/assets/destination-point-63b16bda.svg",YK="/assets/starting-point-c9a465c9.svg";class UK{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const gs=UK,Vl={PROPERTYCHANGE:"propertychange"};class VK{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const zw=VK;function XK(e,t,n){let i,r;n=n||eo;let s=0,o=e.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+n(e[i],t),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function eo(e,t){return e>t?1:e<t?-1:0}function Ww(e,t,n){if(e[0]<=t)return 0;const i=e.length;if(t<=e[i-1])return i-1;if(typeof n=="function"){for(let r=1;r<i;++r){const s=e[r];if(s===t)return r;if(s<t)return n(t,e[r-1],s)>0?r-1:r}return i-1}if(n>0){for(let r=1;r<i;++r)if(e[r]<t)return r-1;return i-1}if(n<0){for(let r=1;r<i;++r)if(e[r]<=t)return r;return i-1}for(let r=1;r<i;++r){if(e[r]==t)return r;if(e[r]<t)return e[r-1]-t<t-e[r]?r-1:r}return i-1}function jK(e,t,n){for(;t<n;){const i=e[t];e[t]=e[n],e[n]=i,++t,--n}}function Kr(e,t){const n=Array.isArray(t)?t:[t],i=n.length;for(let r=0;r<i;r++)e[e.length]=n[r]}function go(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function qK(e,t,n){const i=t||eo;return e.every(function(r,s){if(s===0)return!0;const o=i(e[s-1],r);return!(o>0||n&&o===0)})}function Ju(){return!0}function y0(){return!1}function Xl(){}function ZK(e){let t=!1,n,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==r||!go(s,i))&&(t=!0,r=this,i=s,n=e.apply(this,arguments)),n}}function KK(e){function t(){let n;try{n=e()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return t()}function Yf(e){for(const t in e)delete e[t]}function jl(e){let t;for(t in e)return!1;return!t}class JK extends zw{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const i=this.listeners_||(this.listeners_={}),r=i[t]||(i[t]=[]);r.includes(n)||r.push(n)}dispatchEvent(t){const n=typeof t=="string",i=n?t:t.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=n?new gs(t):t;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,Xl);delete o[i]}return l}disposeInternal(){this.listeners_&&Yf(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){const i=this.listeners_&&this.listeners_[t];if(i){const r=i.indexOf(n);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[r]=Xl,++this.pendingRemovals_[t]):(i.splice(r,1),i.length===0&&delete this.listeners_[t]))}}}const Uf=JK,St={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function $t(e,t,n,i,r){if(i&&i!==e&&(n=n.bind(i)),r){const o=n;n=function(){e.removeEventListener(t,n),o.apply(this,arguments)}}const s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function Ig(e,t,n,i){return $t(e,t,n,i,!0)}function se(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Yf(e))}class _0 extends Uf{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(St.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const i=t.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=$t(this,t[s],n);return r}return $t(this,t,n)}onceInternal(t,n){let i;if(Array.isArray(t)){const r=t.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Ig(this,t[s],n)}else i=Ig(this,t,n);return n.ol_key=i,i}unInternal(t,n){const i=n.ol_key;if(i)QK(i);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)}}_0.prototype.on;_0.prototype.once;_0.prototype.un;function QK(e){if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)se(e[t]);else se(e)}const EO=_0;function Et(){throw new Error("Unimplemented abstract method.")}let tJ=0;function qt(e){return e.ol_uid||(e.ol_uid=String(++tJ))}class DT extends gs{constructor(t,n,i){super(t),this.key=n,this.oldValue=i}}class eJ extends EO{constructor(t){super(),this.on,this.once,this.un,qt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new DT(i,t,n)),i=Vl.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new DT(i,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,i){const r=this.values_||(this.values_={});if(i)r[t]=n;else{const s=r[t];r[t]=n,s!==n&&this.notify(t,s)}}setProperties(t,n){for(const i in t)this.set(i,t[i],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],jl(this.values_)&&(this.values_=null),n||this.notify(t,i)}}}const Ui=eJ,Rn={ADD:"add",REMOVE:"remove"},$T={LENGTH:"length"};class Yh extends gs{constructor(t,n,i){super(t),this.element=n,this.index=i}}class nJ extends Ui{constructor(t,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let n=0,i=t.length;n<i;++n)this.push(t[n]);return this}forEach(t){const n=this.array_;for(let i=0,r=n.length;i<r;++i)t(n[i],i,n)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get($T.LENGTH)}insertAt(t,n){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new Yh(Rn.ADD,n,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const n=this.getLength();return this.insertAt(n,t),this.getLength()}remove(t){const n=this.array_;for(let i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Yh(Rn.REMOVE,n,t)),n}setAt(t,n){const i=this.getLength();if(t>=i){this.insertAt(t,n);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n,t);const r=this.array_[t];this.array_[t]=n,this.dispatchEvent(new Yh(Rn.REMOVE,r,t)),this.dispatchEvent(new Yh(Rn.ADD,n,t))}updateLength_(){this.set($T.LENGTH,this.array_.length)}assertUnique_(t,n){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==n)throw new Error("Duplicate item added to a unique collection")}}const sr=nJ;function Gt(e,t){if(!e)throw new Error(t)}class Gw extends Ui{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const n=t;this.setGeometry(n)}else{const n=t;this.setProperties(n)}}clone(){const t=new Gw(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&t.setGeometry(n.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(se(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=$t(t,St.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?iJ(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function iJ(e){if(typeof e=="function")return e;let t;return Array.isArray(e)?t=e:(Gt(typeof e.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}const md=Gw,no=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",rJ=no.includes("firefox"),sJ=no.includes("safari")&&!no.includes("chrom");sJ&&(no.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(no));const oJ=no.includes("webkit")&&!no.includes("edge"),TO=no.includes("macintosh"),CO=typeof devicePixelRatio<"u"?devicePixelRatio:1,Bw=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,SO=typeof Image<"u"&&Image.prototype.decode,MO=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}();new Array(6);function Fi(){return[1,0,0,1,0,0]}function aJ(e,t,n,i,r,s,o){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=s,e[5]=o,e}function lJ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Me(e,t){const n=t[0],i=t[1];return t[0]=e[0]*n+e[2]*i+e[4],t[1]=e[1]*n+e[3]*i+e[5],t}function cJ(e,t,n){return aJ(e,t,0,0,n,0,0)}function Bi(e,t,n,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return e[0]=i*c,e[1]=r*l,e[2]=-i*l,e[3]=r*c,e[4]=o*i*c-a*i*l+t,e[5]=o*r*l+a*r*c+n,e}function v0(e,t){const n=uJ(t);Gt(n!==0,"Transformation matrix cannot be inverted");const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return e[0]=o/n,e[1]=-r/n,e[2]=-s/n,e[3]=i/n,e[4]=(s*l-o*a)/n,e[5]=-(i*l-r*a)/n,e}function uJ(e){return e[0]*e[3]-e[1]*e[2]}let zT;function Hw(e){const t="matrix("+e.join(", ")+")";if(Bw)return t;const n=zT||(zT=document.createElement("div"));return n.style.transform=t,n.style.transform}const He={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function WT(e){const t=mi();for(let n=0,i=e.length;n<i;++n)xu(t,e[n]);return t}function Yw(e,t,n){return n?(n[0]=e[0]-t,n[1]=e[1]-t,n[2]=e[2]+t,n[3]=e[3]+t,n):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function RO(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function Ta(e,t,n){let i,r;return t<e[0]?i=e[0]-t:e[2]<t?i=t-e[2]:i=0,n<e[1]?r=e[1]-n:e[3]<n?r=n-e[3]:r=0,i*i+r*r}function Vf(e,t){return Uw(e,t[0],t[1])}function Gs(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function Uw(e,t,n){return e[0]<=t&&t<=e[2]&&e[1]<=n&&n<=e[3]}function H_(e,t){const n=e[0],i=e[1],r=e[2],s=e[3],o=t[0],a=t[1];let l=He.UNKNOWN;return o<n?l=l|He.LEFT:o>r&&(l=l|He.RIGHT),a<i?l=l|He.BELOW:a>s&&(l=l|He.ABOVE),l===He.UNKNOWN&&(l=He.INTERSECTING),l}function mi(){return[1/0,1/0,-1/0,-1/0]}function io(e,t,n,i,r){return r?(r[0]=e,r[1]=t,r[2]=n,r[3]=i,r):[e,t,n,i]}function Xf(e){return io(1/0,1/0,-1/0,-1/0,e)}function fJ(e,t){const n=e[0],i=e[1];return io(n,i,n,i,t)}function AO(e,t,n,i,r){const s=Xf(r);return LO(s,e,t,n,i)}function Qu(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function IO(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function xu(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function LO(e,t,n,i,r){for(;n<i;n+=r)hJ(e,t[n],t[n+1]);return e}function hJ(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)}function OO(e,t){let n;return n=t(w0(e)),n||(n=t(b0(e)),n)||(n=t(x0(e)),n)||(n=t(Ca(e)),n)?n:!1}function Y_(e){let t=0;return Sa(e)||(t=ie(e)*Kn(e)),t}function w0(e){return[e[0],e[1]]}function b0(e){return[e[2],e[1]]}function ya(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function dJ(e,t){let n;if(t==="bottom-left")n=w0(e);else if(t==="bottom-right")n=b0(e);else if(t==="top-left")n=Ca(e);else if(t==="top-right")n=x0(e);else throw new Error("Invalid corner");return n}function U_(e,t,n,i,r){const[s,o,a,l,c,u,f,h]=V_(e,t,n,i);return io(Math.min(s,a,c,f),Math.min(o,l,u,h),Math.max(s,a,c,f),Math.max(o,l,u,h),r)}function V_(e,t,n,i){const r=t*i[0]/2,s=t*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,c=r*a,u=s*o,f=s*a,h=e[0],d=e[1];return[h-l+f,d-c-u,h-l-f,d-c+u,h+l-f,d+c+u,h+l+f,d+c-u,h-l+f,d-c-u]}function Kn(e){return e[3]-e[1]}function vl(e,t,n){const i=n||mi();return pn(e,t)?(e[0]>t[0]?i[0]=e[0]:i[0]=t[0],e[1]>t[1]?i[1]=e[1]:i[1]=t[1],e[2]<t[2]?i[2]=e[2]:i[2]=t[2],e[3]<t[3]?i[3]=e[3]:i[3]=t[3]):Xf(i),i}function Ca(e){return[e[0],e[3]]}function x0(e){return[e[2],e[3]]}function ie(e){return e[2]-e[0]}function pn(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Sa(e){return e[2]<e[0]||e[3]<e[1]}function gJ(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function mJ(e,t){const n=(e[2]-e[0])/2*(t-1),i=(e[3]-e[1])/2*(t-1);e[0]-=n,e[2]+=n,e[1]-=i,e[3]+=i}function pJ(e,t,n){let i=!1;const r=H_(e,t),s=H_(e,n);if(r===He.INTERSECTING||s===He.INTERSECTING)i=!0;else{const o=e[0],a=e[1],l=e[2],c=e[3],u=t[0],f=t[1],h=n[0],d=n[1],g=(d-f)/(h-u);let m,_;s&He.ABOVE&&!(r&He.ABOVE)&&(m=h-(d-c)/g,i=m>=o&&m<=l),!i&&s&He.RIGHT&&!(r&He.RIGHT)&&(_=d-(h-l)*g,i=_>=a&&_<=c),!i&&s&He.BELOW&&!(r&He.BELOW)&&(m=h-(d-a)/g,i=m>=o&&m<=l),!i&&s&He.LEFT&&!(r&He.LEFT)&&(_=d-(h-o)*g,i=_>=a&&_<=c)}return i}function kO(e,t){const n=t.getExtent(),i=ya(e);if(t.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const r=ie(n),o=Math.floor((i[0]-n[0])/r)*r;e[0]-=o,e[2]-=o}return e}function yJ(e,t){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];kO(e,t);const i=ie(n);if(ie(e)>i)return[[n[0],e[1],n[2],e[3]]];if(e[0]<n[0])return[[e[0]+i,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-i,e[3]]]}return[e]}const ql={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class _J{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||ql[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const FO=_J,jf=6378137,ol=Math.PI*jf,vJ=[-ol,-ol,ol,ol],wJ=[-180,-85,180,85],Uh=jf*Math.log(Math.tan(Math.PI/2));class Ha extends FO{constructor(t){super({code:t,units:"m",extent:vJ,global:!0,worldExtent:wJ,getPointResolution:function(n,i){return n/Math.cosh(i[1]/jf)}})}}const GT=[new Ha("EPSG:3857"),new Ha("EPSG:102100"),new Ha("EPSG:102113"),new Ha("EPSG:900913"),new Ha("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ha("http://www.opengis.net/gml/srs/epsg.xml#3857")];function bJ(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let r=0;r<i;r+=n){t[r]=ol*e[r]/180;let s=jf*Math.log(Math.tan(Math.PI*(+e[r+1]+90)/360));s>Uh?s=Uh:s<-Uh&&(s=-Uh),t[r+1]=s}return t}function xJ(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let r=0;r<i;r+=n)t[r]=180*e[r]/ol,t[r+1]=360*Math.atan(Math.exp(e[r+1]/jf))/Math.PI-90;return t}const EJ=6378137,BT=[-180,-90,180,90],TJ=Math.PI*EJ/180;class To extends FO{constructor(t,n){super({code:t,units:"degrees",extent:BT,axisOrientation:n,global:!0,metersPerUnit:TJ,worldExtent:BT})}}const HT=[new To("CRS:84"),new To("EPSG:4326","neu"),new To("urn:ogc:def:crs:OGC:1.3:CRS84"),new To("urn:ogc:def:crs:OGC:2:84"),new To("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new To("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new To("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let X_={};function CJ(e){return X_[e]||X_[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function SJ(e,t){X_[e]=t}let wl={};function Lg(e,t,n){const i=e.getCode(),r=t.getCode();i in wl||(wl[i]={}),wl[i][r]=n}function MJ(e,t){let n;return e in wl&&t in wl[e]&&(n=wl[e][t]),n}function Oe(e,t,n){return Math.min(Math.max(e,t),n)}function RJ(e,t,n,i,r,s){const o=r-n,a=s-i;if(o!==0||a!==0){const l=((e-n)*o+(t-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return ea(e,t,n,i)}function ea(e,t,n,i){const r=n-e,s=i-t;return r*r+s*s}function AJ(e){const t=e.length;for(let i=0;i<t;i++){let r=i,s=Math.abs(e[i][i]);for(let a=i+1;a<t;a++){const l=Math.abs(e[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=e[r];e[r]=e[i],e[i]=o;for(let a=i+1;a<t;a++){const l=-e[a][i]/e[i][i];for(let c=i;c<t+1;c++)i==c?e[a][c]=0:e[a][c]+=l*e[i][c]}}const n=new Array(t);for(let i=t-1;i>=0;i--){n[i]=e[i][t]/e[i][i];for(let r=i-1;r>=0;r--)e[r][t]-=e[r][i]*n[i]}return n}function pd(e){return e*Math.PI/180}function na(e,t){const n=e%t;return n*t<0?n+t:n}function Bn(e,t,n){return e+n*(t-e)}function E0(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function Vh(e,t){return Math.floor(E0(e,t))}function Xh(e,t){return Math.ceil(E0(e,t))}function YT(e,t,n){const i=n!==void 0?e.toFixed(n):""+e;let r=i.indexOf(".");return r=r===-1?i.length:r,r>t?i:new Array(1+t-r).join("0")+i}function IJ(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function UT(e,t,n){const i=na(t+180,360)-180,r=Math.abs(3600*i),s=n||0;let o=Math.floor(r/3600),a=Math.floor((r-o*3600)/60),l=E0(r-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"°";return(a!==0||l!==0)&&(c+=" "+YT(a,2)+"′"),l!==0&&(c+=" "+YT(l,2,s)+"″"),i!==0&&(c+=" "+e.charAt(i<0?1:0)),c}function Og(e,t){let n=!0;for(let i=e.length-1;i>=0;--i)if(e[i]!=t[i]){n=!1;break}return n}function Vw(e,t){const n=Math.cos(t),i=Math.sin(t),r=e[0]*n-e[1]*i,s=e[1]*n+e[0]*i;return e[0]=r,e[1]=s,e}function LJ(e,t){return e[0]*=t,e[1]*=t,e}function OJ(e,t){return e?UT("NS",e[1],t)+" "+UT("EW",e[0],t):""}function PO(e,t){if(t.canWrapX()){const n=ie(t.getExtent()),i=kJ(e,t,n);i&&(e[0]-=i*n)}return e}function kJ(e,t,n){const i=t.getExtent();let r=0;return t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])&&(n=n||ie(i),r=Math.floor((e[0]-i[0])/n)),r}const FJ=63710088e-1;function VT(e,t,n){n=n||FJ;const i=pd(e[1]),r=pd(t[1]),s=(r-i)/2,o=pd(t[0]-e[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const NO={info:1,warn:2,error:3,none:4};let PJ=NO.info;function DO(...e){PJ>NO.warn||console.warn(...e)}let j_=!0;function NJ(e){j_=!(e===void 0?!0:e)}function Xw(e,t){if(t!==void 0){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];t=t}else t=e.slice();return t}function $O(e,t){if(t!==void 0&&e!==t){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function DJ(e){SJ(e.getCode(),e),Lg(e,e,Xw)}function $J(e){e.forEach(DJ)}function Fe(e){return typeof e=="string"?CJ(e):e||null}function kg(e,t,n,i){e=Fe(e);let r;const s=e.getPointResolutionFunc();if(s){if(r=s(t,n),i&&i!==e.getUnits()){const o=e.getMetersPerUnit();o&&(r=r*o/ql[i])}}else{const o=e.getUnits();if(o=="degrees"&&!i||i=="degrees")r=t;else{const a=qw(e,Fe("EPSG:4326"));if(a===$O&&o!=="degrees")r=t*e.getMetersPerUnit();else{let c=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];c=a(c,c,2);const u=VT(c.slice(0,2),c.slice(2,4)),f=VT(c.slice(4,6),c.slice(6,8));r=(u+f)/2}const l=i?ql[i]:e.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function XT(e){$J(e),e.forEach(function(t){e.forEach(function(n){t!==n&&Lg(t,n,Xw)})})}function zJ(e,t,n,i){e.forEach(function(r){t.forEach(function(s){Lg(r,s,n),Lg(s,r,i)})})}function jw(e,t){return e?typeof e=="string"?Fe(e):e:Fe(t)}function ko(e,t){if(e===t)return!0;const n=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||qw(e,t)===Xw)&&n}function qw(e,t){const n=e.getCode(),i=t.getCode();let r=MJ(n,i);return r||(r=$O),r}function Fg(e,t){const n=Fe(e),i=Fe(t);return qw(n,i)}function WJ(e,t,n){return Fg(t,n)(e,void 0,e.length)}function q_(e,t){return e}function Fr(e,t){return j_&&!Og(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(j_=!1,DO("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function zO(e,t){return e}function Ur(e,t){return e}function GJ(){XT(GT),XT(HT),zJ(HT,GT,bJ,xJ)}GJ();function ia(e,t,n,i,r,s){s=s||[];let o=0;for(let a=t;a<n;a+=i){const l=e[a],c=e[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function WO(e,t,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let f=0;for(let h=t;h<n;h+=i){const d=e[h]-c,g=e[h+1]-u;o[f++]=c+d*a-g*l,o[f++]=u+d*l+g*a;for(let m=h+2;m<h+i;++m)o[f++]=e[m]}return o&&o.length!=f&&(o.length=f),o}function BJ(e,t,n,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let f=t;f<n;f+=i){const h=e[f]-l,d=e[f+1]-c;a[u++]=l+r*h,a[u++]=c+s*d;for(let g=f+2;g<f+i;++g)a[u++]=e[g]}return a&&a.length!=u&&(a.length=u),a}function HJ(e,t,n,i,r,s,o){o=o||[];let a=0;for(let l=t;l<n;l+=i){o[a++]=e[l]+r,o[a++]=e[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=e[c]}return o&&o.length!=a&&(o.length=a),o}const jT=Fi();class YJ extends Ui{constructor(){super(),this.extent_=mi(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=ZK(function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})}simplifyTransformed(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)}clone(){return Et()}closestPointXY(t,n,i,r){return Et()}containsXY(t,n){const i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n}getClosestPoint(t,n){return n=n||[NaN,NaN],this.closestPointXY(t[0],t[1],n,1/0),n}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Et()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Xf(n),this.extentRevision_=this.getRevision()}return gJ(this.extent_,t)}rotate(t,n){Et()}scale(t,n,i){Et()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Et()}getType(){return Et()}applyTransform(t){Et()}intersectsExtent(t){return Et()}translate(t,n){Et()}transform(t,n){const i=Fe(t),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=Kn(c)/Kn(l);return Bi(jT,c[0],c[3],u,-u,0,0,0),ia(s,0,s.length,a,jT,o),Fg(i,n)(s,o,a)}:Fg(i,n);return this.applyTransform(r),this}}const GO=YJ;class UJ extends GO{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return AO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Et()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,n){this.stride=qT(t),this.layout=t,this.flatCoordinates=n}setCoordinates(t,n){Et()}setLayout(t,n,i){let r;if(t)r=qT(t);else{for(let s=0;s<i;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,t=VJ(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();WO(i,0,i.length,r,t,n,i),this.changed()}}scale(t,n,i){n===void 0&&(n=t),i||(i=ya(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();BJ(r,0,r.length,s,t,n,i,r),this.changed()}}translate(t,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();HJ(i,0,i.length,r,t,n,i),this.changed()}}}function VJ(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function qT(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function XJ(e,t,n){const i=e.getFlatCoordinates();if(!i)return null;const r=e.getStride();return ia(i,0,i.length,r,t,n)}const Ma=UJ;function ZT(e,t,n,i,r,s,o){const a=e[t],l=e[t+1],c=e[n]-a,u=e[n+1]-l;let f;if(c===0&&u===0)f=t;else{const h=((r-a)*c+(s-l)*u)/(c*c+u*u);if(h>1)f=n;else if(h>0){for(let d=0;d<i;++d)o[d]=Bn(e[t+d],e[n+d],h);o.length=i;return}else f=t}for(let h=0;h<i;++h)o[h]=e[f+h];o.length=i}function Zw(e,t,n,i,r){let s=e[t],o=e[t+1];for(t+=i;t<n;t+=i){const a=e[t],l=e[t+1],c=ea(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function Kw(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=Zw(e,t,a,i,r),t=a}return r}function jJ(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=Kw(e,t,a,i,r),t=a[a.length-1]}return r}function Jw(e,t,n,i,r,s,o,a,l,c,u){if(t==n)return c;let f,h;if(r===0){if(h=ea(o,a,e[t],e[t+1]),h<c){for(f=0;f<i;++f)l[f]=e[t+f];return l.length=i,h}return c}u=u||[NaN,NaN];let d=t+i;for(;d<n;)if(ZT(e,d-i,d,i,o,a,u),h=ea(o,a,u[0],u[1]),h<c){for(c=h,f=0;f<i;++f)l[f]=u[f];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(h)-Math.sqrt(c))/r|0,1);if(s&&(ZT(e,n-i,t,i,o,a,u),h=ea(o,a,u[0],u[1]),h<c)){for(c=h,f=0;f<i;++f)l[f]=u[f];l.length=i}return c}function Qw(e,t,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let f=0,h=n.length;f<h;++f){const d=n[f];c=Jw(e,t,d,i,r,s,o,a,l,c,u),t=d}return c}function qJ(e,t,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let f=0,h=n.length;f<h;++f){const d=n[f];c=Qw(e,t,d,i,r,s,o,a,l,c,u),t=d[d.length-1]}return c}function ZJ(e,t,n,i){for(let r=0,s=n.length;r<s;++r)e[t++]=n[r];return t}function T0(e,t,n,i){for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0;a<i;++a)e[t++]=o[a]}return t}function tb(e,t,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=T0(e,t,n[o],i);r[s++]=l,t=l}return r.length=s,r}function KJ(e,t,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=tb(e,t,n[o],i,r[s]);l.length===0&&(l[0]=t),r[s++]=l,t=l[l.length-1]}return r.length=s,r}function eb(e,t,n,i,r,s,o){const a=(n-t)/i;if(a<3){for(;t<n;t+=i)s[o++]=e[t],s[o++]=e[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,n-i];let u=0;for(;c.length>0;){const f=c.pop(),h=c.pop();let d=0;const g=e[h],m=e[h+1],_=e[f],p=e[f+1];for(let y=h+i;y<f;y+=i){const w=e[y],v=e[y+1],x=RJ(w,v,g,m,_,p);x>d&&(u=y,d=x)}d>r&&(l[(u-t)/i]=1,h+i<u&&c.push(h,u),u+i<f&&c.push(u,f))}for(let f=0;f<a;++f)l[f]&&(s[o++]=e[t+f*i],s[o++]=e[t+f*i+1]);return o}function JJ(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=eb(e,t,u,i,r,s,o),a.push(o),t=u}return o}function Ro(e,t){return t*Math.round(e/t)}function QJ(e,t,n,i,r,s,o){if(t==n)return o;let a=Ro(e[t],r),l=Ro(e[t+1],r);t+=i,s[o++]=a,s[o++]=l;let c,u;do if(c=Ro(e[t],r),u=Ro(e[t+1],r),t+=i,t==n)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;t<n;){const f=Ro(e[t],r),h=Ro(e[t+1],r);if(t+=i,f==c&&h==u)continue;const d=c-a,g=u-l,m=f-a,_=h-l;if(d*_==g*m&&(d<0&&m<d||d==m||d>0&&m>d)&&(g<0&&_<g||g==_||g>0&&_>g)){c=f,u=h;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=f,u=h}return s[o++]=c,s[o++]=u,o}function BO(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=QJ(e,t,u,i,r,s,o),a.push(o),t=u}return o}function tQ(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],f=[];o=BO(e,t,u,i,r,s,o,f),a.push(f),t=u[u.length-1]}return o}function Bs(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=t;o<n;o+=i)r[s++]=e.slice(o,o+i);return r.length=s,r}function tf(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=Bs(e,t,l,i,r[s]),t=l}return r.length=s,r}function Z_(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=l.length===1&&l[0]===t?[]:tf(e,t,l,i,r[s]),t=l[l.length-1]}return r.length=s,r}function HO(e,t,n,i){let r=0,s=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];r+=o*a-s*l,s=a,o=l}return r/2}function YO(e,t,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=HO(e,t,a,i),t=a}return r}function eQ(e,t,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=YO(e,t,a,i),t=a[a.length-1]}return r}class Pg extends Ma{constructor(t,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}clone(){return new Pg(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,n,i,r){return r<Ta(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Zw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Jw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,r))}getArea(){return HO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Bs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const n=[];return n.length=eb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new Pg(n,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=T0(this.flatCoordinates,0,t,this.stride),this.changed()}}const KT=Pg;class nb extends Ma{constructor(t,n){super(),this.setCoordinates(t,n)}clone(){const t=new nb(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){const s=this.flatCoordinates,o=ea(t,n,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return fJ(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Uw(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ZJ(this.flatCoordinates,0,t,this.stride),this.changed()}}const Zl=nb;function nQ(e,t,n,i,r){return!OO(r,function(o){return!Ho(e,t,n,i,o[0],o[1])})}function Ho(e,t,n,i,r,s){let o=0,a=e[n-i],l=e[n-i+1];for(;t<n;t+=i){const c=e[t],u=e[t+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function ib(e,t,n,i,r,s){if(n.length===0||!Ho(e,t,n[0],i,r,s))return!1;for(let o=1,a=n.length;o<a;++o)if(Ho(e,n[o-1],n[o],i,r,s))return!1;return!0}function iQ(e,t,n,i,r,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(ib(e,t,l,i,r,s))return!0;t=l[l.length-1]}return!1}function UO(e,t,n,i,r,s,o){let a,l,c,u,f,h,d;const g=r[s+1],m=[];for(let y=0,w=n.length;y<w;++y){const v=n[y];for(u=e[v-i],h=e[v-i+1],a=t;a<v;a+=i)f=e[a],d=e[a+1],(g<=h&&d<=g||h<=g&&g<=d)&&(c=(g-h)/(d-h)*(f-u)+u,m.push(c)),u=f,h=d}let _=NaN,p=-1/0;for(m.sort(eo),u=m[0],a=1,l=m.length;a<l;++a){f=m[a];const y=Math.abs(f-u);y>p&&(c=(u+f)/2,ib(e,t,n,i,c,g)&&(_=c,p=y)),u=f}return isNaN(_)&&(_=r[s]),o?(o.push(_,g,p),o):[_,g,p]}function rQ(e,t,n,i,r){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=UO(e,t,l,i,r,2*o,s),t=l[l.length-1]}return s}function VO(e,t,n,i,r){let s;for(t+=i;t<n;t+=i)if(s=r(e.slice(t-i,t),e.slice(t,t+i)),s)return s;return!1}function C0(e,t,n,i,r){const s=LO(mi(),e,t,n,i);return pn(r,s)?Gs(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:VO(e,t,n,i,function(o,a){return pJ(r,o,a)}):!1}function sQ(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){if(C0(e,t,n[s],i,r))return!0;t=n[s]}return!1}function XO(e,t,n,i,r){return!!(C0(e,t,n,i,r)||Ho(e,t,n,i,r[0],r[1])||Ho(e,t,n,i,r[0],r[3])||Ho(e,t,n,i,r[2],r[1])||Ho(e,t,n,i,r[2],r[3]))}function jO(e,t,n,i,r){if(!XO(e,t,n[0],i,r))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(nQ(e,n[s-1],n[s],i,r)&&!C0(e,n[s-1],n[s],i,r))return!1;return!0}function oQ(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(jO(e,t,a,i,r))return!0;t=a[a.length-1]}return!1}function aQ(e,t,n,i){for(;t<n-i;){for(let r=0;r<i;++r){const s=e[t+r];e[t+r]=e[n-i+r],e[n-i+r]=s}t+=i,n-=i}}function qO(e,t,n,i){let r=0,s=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function ZO(e,t,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=qO(e,t,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=a}return!0}function lQ(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!ZO(e,t,a,i,r))return!1;a.length&&(t=a[a.length-1])}return!0}function K_(e,t,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=qO(e,t,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&aQ(e,t,a,i),t=a}return t}function JT(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s)t=K_(e,t,n[s],i,r);return t}class ro extends Ma{constructor(t,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,t),this.ends_=i):this.setCoordinates(t,n)}appendLinearRing(t){this.flatCoordinates?Kr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ro(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<Ta(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Kw(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qw(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,r))}containsXY(t,n){return ib(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)}getArea(){return YO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),K_(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,tf(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=ya(this.getExtent());this.flatInteriorPoint_=UO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Zl(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new KT(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,n=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new KT(n.slice(s,l),t);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;ZO(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=K_(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=BO(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new ro(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return jO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=tb(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function J_(e){if(Sa(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],n=e[1],i=e[2],r=e[3],s=[t,n,t,r,i,r,i,n,t,n];return new ro(s,"XY",[s.length])}const fr={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class rb{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new rb({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const sb=rb;function KO(e,t,n,i,r,s,o){let a,l;const c=(n-t)/i;if(c===1)a=t;else if(c===2)a=t,l=r;else if(c!==0){let u=e[t],f=e[t+1],h=0;const d=[0];for(let _=t+i;_<n;_+=i){const p=e[_],y=e[_+1];h+=Math.sqrt((p-u)*(p-u)+(y-f)*(y-f)),d.push(h),u=p,f=y}const g=r*h,m=XK(d,g);m<0?(l=(g-d[-m-2])/(d[-m-1]-d[-m-2]),a=t+(-m-2)*i):a=t+m*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?e[a+u]:Bn(e[a+u],e[a+i+u],l);return s}function Q_(e,t,n,i,r,s){if(n==t)return null;let o;if(r<e[t+i-1])return s?(o=e.slice(t,t+i),o[i-1]=r,o):null;if(e[n-1]<r)return s?(o=e.slice(n-i,n),o[i-1]=r,o):null;if(r==e[t+i-1])return e.slice(t,t+i);let a=t/i,l=n/i;for(;a<l;){const h=a+l>>1;r<e[(h+1)*i-1]?l=h:a=h+1}const c=e[a*i-1];if(r==c)return e.slice((a-1)*i,(a-1)*i+i);const u=e[(a+1)*i-1],f=(r-c)/(u-c);o=[];for(let h=0;h<i-1;++h)o.push(Bn(e[(a-1)*i+h],e[a*i+h],f));return o.push(r),o}function cQ(e,t,n,i,r,s,o){if(o)return Q_(e,t,n[n.length-1],i,r,s);let a;if(r<e[i-1])return s?(a=e.slice(0,i),a[i-1]=r,a):null;if(e[e.length-1]<r)return s?(a=e.slice(e.length-i),a[i-1]=r,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(t!=u){if(r<e[t+i-1])return null;if(r<=e[u-1])return Q_(e,t,u,i,r,!1);t=u}}return null}function JO(e,t,n,i){let r=e[t],s=e[t+1],o=0;for(let a=t+i;a<n;a+=i){const l=e[a],c=e[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class Ng extends Ma{constructor(t,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendCoordinate(t){this.flatCoordinates?Kr(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new Ng(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<Ta(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Zw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Jw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,r))}forEachSegment(t){return VO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,Q_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n))}getCoordinates(){return Bs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,n){return KO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)}getLength(){return JO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const n=[];return n.length=eb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new Ng(n,"XY")}getType(){return"LineString"}intersectsExtent(t){return C0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=T0(this.flatCoordinates,0,t,this.stride),this.changed()}}const Dg=Ng;class ob{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new ob({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const ab=ob,Ot={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function QT(e){return e[0]>0&&e[1]>0}function uQ(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]*t+.5|0,n[1]=e[1]*t+.5|0,n}function Vn(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}class lb{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Vn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new lb({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Et()}getImage(t){return Et()}getHitDetectionImage(){return Et()}getPixelRatio(t){return 1}getImageState(){return Et()}getImageSize(){return Et()}getOrigin(){return Et()}getSize(){return Et()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Vn(t)}listenImageChange(t){Et()}load(){Et()}unlistenImageChange(t){Et()}}const QO=lb,fQ=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,hQ=/^([a-z]*)$|^hsla?\(.*\)$/i;function tk(e){return typeof e=="string"?e:ek(e)}function dQ(e){const t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);const n=getComputedStyle(t).color;return document.body.removeChild(t),n}return""}const gQ=function(){const t={};let n=0;return function(i){let r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){let s=0;for(const o in t)s++&3||(delete t[o],--n)}r=mQ(i),t[i]=r,++n}return r}}();function $g(e){return Array.isArray(e)?e:gQ(e)}function mQ(e){let t,n,i,r,s;if(hQ.exec(e)&&(e=dQ(e)),fQ.exec(e)){const o=e.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(e.substr(1+0*a,a),16),n=parseInt(e.substr(1+1*a,a),16),i=parseInt(e.substr(1+2*a,a),16),l?r=parseInt(e.substr(1+3*a,a),16):r=255,a==1&&(t=(t<<4)+t,n=(n<<4)+n,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[t,n,i,r/255]}else if(e.startsWith("rgba("))s=e.slice(5,-1).split(",").map(Number),tC(s);else if(e.startsWith("rgb("))s=e.slice(4,-1).split(",").map(Number),s.push(1),tC(s);else throw new Error("Invalid color");return s}function tC(e){return e[0]=Oe(e[0]+.5|0,0,255),e[1]=Oe(e[1]+.5|0,0,255),e[2]=Oe(e[2]+.5|0,0,255),e[3]=Oe(e[3],0,1),e}function ek(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let n=e[1];n!=(n|0)&&(n=n+.5|0);let i=e[2];i!=(i|0)&&(i=i+.5|0);const r=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+n+","+i+","+r+")"}function or(e){return Array.isArray(e)?ek(e):e}function bn(e,t,n,i){let r;return n&&n.length?r=n.shift():Bw?r=new OffscreenCanvas(e||300,t||300):r=document.createElement("canvas"),e&&(r.width=e),t&&(r.height=t),r.getContext("2d",i)}function S0(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function pQ(e){let t=e.offsetWidth;const n=getComputedStyle(e);return t+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),t}function yQ(e){let t=e.offsetHeight;const n=getComputedStyle(e);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),t}function zg(e,t){const n=t.parentNode;n&&n.replaceChild(e,t)}function Wg(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function nk(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function _Q(e,t){const n=e.childNodes;for(let i=0;;++i){const r=n[i],s=t[i];if(!r&&!s)break;if(r!==s){if(!r){e.appendChild(s);continue}if(!s){e.removeChild(r),--i;continue}e.insertBefore(s,r)}}}const jh="ol-hidden",vQ="ol-selectable",Ra="ol-unselectable",eC="ol-unsupported",qf="ol-control",nC="ol-collapsed",wQ=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),iC=["style","variant","weight","size","lineHeight","family"],ik=function(e){const t=e.match(wQ);if(!t)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=iC.length;i<r;++i){const s=t[i+1];s!==void 0&&(n[iC[i]]=s)}return n.families=n.family.split(/,\s?/),n},rk="10px sans-serif",An="#000",Kl="round",Jr=[],Qr=0,Jl="round",ef=10,nf="#000",rf="center",Gg="middle",Yo=[0,0,0,0],sf=1,Pr=new Ui;let qa=null,t1;const e1={},bQ=function(){const t="32px ",n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(c,u,f){let h=!0;for(let d=0;d<i;++d){const g=n[d];if(o=Bg(c+" "+u+" "+t+g,r),f!=g){const m=Bg(c+" "+u+" "+t+f+","+g,r);h=h&&m!=o}}return!!h}function l(){let c=!0;const u=Pr.getKeys();for(let f=0,h=u.length;f<h;++f){const d=u[f];Pr.get(d)<100&&(a.apply(this,d.split(`
`))?(Yf(e1),qa=null,t1=void 0,Pr.set(d,100)):(Pr.set(d,Pr.get(d)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const u=ik(c);if(!u)return;const f=u.families;for(let h=0,d=f.length;h<d;++h){const g=f[h],m=u.style+`
`+u.weight+`
`+g;Pr.get(m)===void 0&&(Pr.set(m,100,!0),a(u.style,u.weight,g)||(Pr.set(m,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),xQ=function(){let e;return function(t){let n=e1[t];if(n==null){if(Bw){const i=ik(t),r=sk(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),n=e.offsetHeight,document.body.removeChild(e);e1[t]=n}return n}}();function sk(e,t){return qa||(qa=bn(1,1)),e!=t1&&(qa.font=e,t1=qa.font),qa.measureText(t)}function Bg(e,t){return sk(e,t).width}function rC(e,t,n){if(t in n)return n[t];const i=t.split(`
`).reduce((r,s)=>Math.max(r,Bg(e,s)),0);return n[t]=i,i}function EQ(e,t){const n=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=t.length;c<=u;c+=2){const f=t[c];if(f===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const h=t[c+1]||e.font,d=Bg(h,f);n.push(d),o+=d;const g=xQ(h);i.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:n,heights:i,lineWidths:r}}function TQ(e,t,n,i,r,s,o,a,l,c,u){e.save(),n!==1&&(e.globalAlpha*=n),t&&e.transform.apply(e,t),i.contextInstructions?(e.translate(l,c),e.scale(u[0],u[1]),CQ(i,e)):u[0]<0||u[1]<0?(e.translate(l,c),e.scale(u[0],u[1]),e.drawImage(i,r,s,o,a,0,0,o,a)):e.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),e.restore()}function CQ(e,t){const n=e.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?t[n[i]].apply(t,n[i+1]):t[n[i]]=n[i+1]}class cb extends QO{constructor(t){const n=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:n,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),n=new cb({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const t=this.size_;if(!t)return null;const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-n[0]/i[0],t[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let n=this.canvas_[t];if(!n){const i=this.renderOptions_,r=bn(i.size*t,i.size*t);this.draw_(i,r,t),n=r.canvas,this.canvas_[t]=n}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Ot.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const b=r;r=s,s=b}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,f=Math.sqrt(l*l+u*u),h=f/l;if(t==="miter"&&h<=i)return h*n;const d=n/2/h,g=n/2*(u/f),_=Math.sqrt((r+d)*(r+d)+g*g)-r;if(this.radius2_===void 0||t==="bevel")return _*2;const p=r*Math.sin(a),y=Math.sqrt(r*r-p*p),w=s-y,x=Math.sqrt(p*p+w*w)/p;if(x<=i){const b=x*n/2-s-r;return 2*Math.max(_,b)}return _*2}createRenderOptions(){let t=Kl,n=Jl,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=nf),o=or(o),a=this.stroke_.getWidth(),a===void 0&&(a=sf),r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),n=this.stroke_.getLineJoin(),n===void 0&&(n=Jl),t=this.stroke_.getLineCap(),t===void 0&&(t=Kl),i=this.stroke_.getMiterLimit(),i===void 0&&(i=ef));const l=this.calculateLineJoinSize_(n,a,i),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:t,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=An),n.fillStyle=or(r),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineCap=t.lineCap,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=$g(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){const r=bn(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let n=this.points_;const i=this.radius_;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,c=a%2===0?i:r;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=An,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}}const ok=cb;class ub extends ok{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),n=new ub({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(t){this.radius_=t,this.render()}}const ak=ub;class M0{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=sC,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new M0({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(n){return n.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=sC,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function SQ(e){let t;if(typeof e=="function")t=e;else{let n;Array.isArray(e)?n=e:(Gt(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[e]),t=function(){return n}}return t}let jp=null;function MQ(e,t){if(!jp){const n=new sb({color:"rgba(255,255,255,0.4)"}),i=new ab({color:"#3399CC",width:1.25});jp=[new M0({image:new ak({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return jp}function sC(e){return e.getGeometry()}const ra=M0,RQ="#333";class fb{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Vn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new sb({color:RQ}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new fb({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Vn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const AQ=fb,te={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class IQ extends Ui{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const n=Object.assign({},t);typeof t.properties=="object"&&(delete n.properties,Object.assign(n,t.properties)),n[te.OPACITY]=t.opacity!==void 0?t.opacity:1,Gt(typeof n[te.OPACITY]=="number","Layer opacity must be a number"),n[te.VISIBLE]=t.visible!==void 0?t.visible:!0,n[te.Z_INDEX]=t.zIndex,n[te.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[te.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[te.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[te.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=Oe(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(t){return Et()}getLayerStatesArray(t){return Et()}getExtent(){return this.get(te.EXTENT)}getMaxResolution(){return this.get(te.MAX_RESOLUTION)}getMinResolution(){return this.get(te.MIN_RESOLUTION)}getMinZoom(){return this.get(te.MIN_ZOOM)}getMaxZoom(){return this.get(te.MAX_ZOOM)}getOpacity(){return this.get(te.OPACITY)}getSourceState(){return Et()}getVisible(){return this.get(te.VISIBLE)}getZIndex(){return this.get(te.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(te.EXTENT,t)}setMaxResolution(t){this.set(te.MAX_RESOLUTION,t)}setMinResolution(t){this.set(te.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(te.MAX_ZOOM,t)}setMinZoom(t){this.set(te.MIN_ZOOM,t)}setOpacity(t){Gt(typeof t=="number","Layer opacity must be a number"),this.set(te.OPACITY,t)}setVisible(t){this.set(te.VISIBLE,t)}setZIndex(t){this.set(te.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const lk=IQ,Le={ANIMATING:0,INTERACTING:1},wi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},LQ=42,hb=256;function oC(e,t,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!t)return i;const l=t?0:s[0]*r,c=t?0:s[1]*r,u=a?a[0]:0,f=a?a[1]:0;let h=e[0]+l/2+u,d=e[2]-l/2+u,g=e[1]+c/2+f,m=e[3]-c/2+f;h>d&&(h=(d+h)/2,d=h),g>m&&(g=(m+g)/2,m=g);let _=Oe(i[0],h,d),p=Oe(i[1],g,m);if(o&&n&&r){const y=30*r;_+=-y*Math.log(1+Math.max(0,h-i[0])/y)+y*Math.log(1+Math.max(0,i[0]-d)/y),p+=-y*Math.log(1+Math.max(0,g-i[1])/y)+y*Math.log(1+Math.max(0,i[1]-m)/y)}return[_,p]}}function OQ(e){return e}function db(e,t,n,i){const r=ie(t)/n[0],s=Kn(t)/n[1];return i?Math.min(e,Math.max(r,s)):Math.min(e,Math.min(r,s))}function gb(e,t,n){let i=Math.min(e,t);const r=50;return i*=Math.log(1+r*Math.max(0,e/t-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/e-1))/r+1),Oe(i,n/2,t*2)}function kQ(e,t,n,i){return t=t!==void 0?t:!0,function(r,s,o,a){if(r!==void 0){const l=e[0],c=e[e.length-1],u=n?db(l,n,o,i):l;if(a)return t?gb(r,u,c):Oe(r,c,u);const f=Math.min(u,r),h=Math.floor(Ww(e,f,s));return e[h]>u&&h<e.length-1?e[h+1]:e[h]}}}function FQ(e,t,n,i,r,s){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,c){if(o!==void 0){const u=r?db(t,r,l,s):t;if(c)return i?gb(o,u,n):Oe(o,n,u);const f=1e-9,h=Math.ceil(Math.log(t/u)/Math.log(e)-f),d=-a*(.5-f)+.5,g=Math.min(u,o),m=Math.floor(Math.log(t/g)/Math.log(e)+d),_=Math.max(h,m),p=t/Math.pow(e,_);return Oe(p,n,u)}}}function aC(e,t,n,i,r){return n=n!==void 0?n:!0,function(s,o,a,l){if(s!==void 0){const c=i?db(e,i,a,r):e;return!n||!l?Oe(s,t,c):gb(s,c,t)}}}function mb(e){if(e!==void 0)return 0}function lC(e){if(e!==void 0)return e}function PQ(e){const t=2*Math.PI/e;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/t+.5)*t,n}}function NQ(e){return e=e||pd(5),function(t,n){if(n)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}function ck(e){return Math.pow(e,3)}function xc(e){return 1-ck(1-e)}function DQ(e){return 3*e*e-2*e*e*e}function $Q(e){return e}const qp=0;class zQ extends Ui{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=jw(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&NJ(),t.center&&(t.center=Fr(t.center,this.projection_)),t.extent&&(t.extent=Ur(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const n=Object.assign({},t);for(const a in wi)delete n[a];this.setProperties(n,!0);const i=GQ(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const r=WQ(t),s=i.constraint,o=BQ(t);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let n=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const r=t||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),a=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Fr(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Fr(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)}animateInternal(t){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===n){i&&qh(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<n;++r){const u=arguments[r],f={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||DQ,callback:i};if(u.center&&(f.sourceCenter=o,f.targetCenter=u.center.slice(),o=f.targetCenter),u.zoom!==void 0?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(u.zoom),a=f.targetResolution):u.resolution&&(f.sourceResolution=a,f.targetResolution=u.resolution,a=f.targetResolution),u.rotation!==void 0){f.sourceRotation=l;const h=na(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=l+h,l=f.targetRotation}HQ(f)?f.complete=!0:s+=f.duration,c.push(f)}this.animations_.push(c),this.setHint(Le.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Le.ANIMATING]>0}getInteracting(){return this.hints_[Le.INTERACTING]>0}cancelAnimations(){this.setHint(Le.ANIMATING,-this.hints_[Le.ANIMATING]);let t;for(let n=0,i=this.animations_.length;n<i;++n){const r=this.animations_[n];if(r[0].callback&&qh(r[0].callback,!1),!t)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=t-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const f=l.easing(u);if(l.sourceCenter){const h=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const _=h+f*(g-h),p=d+f*(m-d);this.targetCenter_=[_,p]}if(l.sourceResolution&&l.targetResolution){const h=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(h,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const h=f===1?na(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Le.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&qh(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,n){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-n[0],r[1]-n[1]],Vw(i,t-this.getRotation()),IJ(i,n)),i}calculateCenterZoom(t,n){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=n[0]-t*(n[0]-r[0])/s,a=n[1]-t*(n[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(t){const n=this.viewportSize_;if(t){const i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&q_(t,this.getProjection())}getCenterInternal(){return this.get(wi.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const n=this.calculateExtentInternal(t);return zO(n,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();Gt(n,"The view center is not defined");const i=this.getResolution();Gt(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Gt(r!==void 0,"The view rotation is not defined"),U_(n,i,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(wi.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,n){return this.getResolutionForExtentInternal(Ur(t,this.getProjection()),n)}getResolutionForExtentInternal(t,n){n=n||this.getViewportSizeMinusPadding_();const i=ie(t)/n[0],r=Kn(t)/n[1];return Math.max(i,r)}getResolutionForValueFunction(t){t=t||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(t);return function(s){return n/Math.pow(t,s*r)}}getRotation(){return this.get(wi.ROTATION)}getValueForResolutionFunction(t){const n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/n;return function(o){return Math.log(i/o)/n/s}}getViewportSizeMinusPadding_(t){let n=this.getViewportSize_(t);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const t=this.getProjection(),n=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=Zp(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t}getZoomForResolution(t){let n=this.minZoom_||0,i,r;if(this.resolutions_){const s=Ww(this.resolutions_,t,1);n=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=Oe(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Oe(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,n){let i;if(Gt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Gt(!Sa(t),"Cannot fit empty extent provided as `geometry`");const r=Ur(t,this.getProjection());i=J_(r)}else if(t.getType()==="Circle"){const r=Ur(t.getExtent(),this.getProjection());i=J_(r),i.rotate(this.getRotation(),ya(r))}else i=t;this.fitInternal(i,n)}rotatedExtentForGeometry(t){const n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let f=0,h=s.length;f<h;f+=o){const d=s[f]*i-s[f+1]*r,g=s[f]*r+s[f+1]*i;a=Math.min(a,d),l=Math.min(l,g),c=Math.max(c,d),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(t,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const r=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),f=Math.cos(c),h=ya(a);h[0]+=(r[1]-r[3])/2*l,h[1]+=(r[0]-r[2])/2*l;const d=h[0]*f-h[1]*u,g=h[1]*f+h[0]*u,m=this.getConstrainedCenter([d,g],l),_=n.callback?n.callback:Xl;n.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:n.duration,easing:n.easing},_):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),qh(_,!0))}centerOn(t,n,i){this.centerOnInternal(Fr(t,this.getProjection()),n,i)}centerOnInternal(t,n,i){this.setCenterInternal(Zp(t,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,n,i,r){let s;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),l=Zp(t,r,[a[0]/2+o[3],a[1]/2+o[0]],n,i);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const n=q_(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])}adjustCenterInternal(t){const n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])}adjustResolution(t,n){n=n&&Fr(n,this.getProjection()),this.adjustResolutionInternal(t,n)}adjustResolutionInternal(t,n){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,i);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)}adjustRotation(t,n){n&&(n=Fr(n,this.getProjection())),this.adjustRotationInternal(t,n)}adjustRotationInternal(t,n){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Fr(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,n){const i=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(wi.ROTATION)!==r&&this.set(wi.ROTATION,r),this.get(wi.RESOLUTION)!==o&&(this.set(wi.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(wi.CENTER)||!Og(this.get(wi.CENTER),a))&&this.set(wi.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,n,i){t=t!==void 0?t:200;const r=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Og(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:t,easing:xc,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Le.INTERACTING,1)}endInteraction(t,n,i){i=i&&Fr(i,this.getProjection()),this.endInteractionInternal(t,n,i)}endInteractionInternal(t,n,i){this.getInteracting()&&(this.setHint(Le.INTERACTING,-1),this.resolveConstraints(t,n,i))}getConstrainedCenter(t,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)}getConstrainedZoom(t,n){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(t,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)}}function qh(e,t){setTimeout(function(){e(t)},0)}function WQ(e){if(e.extent!==void 0){const n=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return oC(e.extent,e.constrainOnlyCenter,n)}const t=jw(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,oC(n,!1,!1)}return OQ}function GQ(e){let t,n,i,o=e.minZoom!==void 0?e.minZoom:qp,a=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,c=e.multiWorld!==void 0?e.multiWorld:!1,u=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,f=e.showFullExtent!==void 0?e.showFullExtent:!1,h=jw(e.projection,"EPSG:3857"),d=h.getExtent();let g=e.constrainOnlyCenter,m=e.extent;if(!c&&!m&&h.isGlobal()&&(g=!1,m=d),e.resolutions!==void 0){const _=e.resolutions;n=_[o],i=_[a]!==void 0?_[a]:_[_.length-1],e.constrainResolution?t=kQ(_,u,!g&&m,f):t=aC(n,i,u,!g&&m,f)}else{const p=(d?Math.max(ie(d),Kn(d)):360*ql.degrees/h.getMetersPerUnit())/hb/Math.pow(2,qp),y=p/Math.pow(2,28-qp);n=e.maxResolution,n!==void 0?o=0:n=p/Math.pow(l,o),i=e.minResolution,i===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?i=n/Math.pow(l,a):i=p/Math.pow(l,a):i=y),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),e.constrainResolution?t=FQ(l,n,i,u,!g&&m,f):t=aC(n,i,u,!g&&m,f)}return{constraint:t,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function BQ(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const n=e.constrainRotation;return n===void 0||n===!0?NQ():n===!1?lC:typeof n=="number"?PQ(n):lC}return mb}function HQ(e){return!(e.sourceCenter&&e.targetCenter&&!Og(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function Zp(e,t,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=e[0]*s-e[1]*o,l=e[1]*s+e[0]*o;a+=(t[0]/2-n[0])*i,l+=(n[1]-t[1]/2)*i,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const tr=zQ;class YQ extends lk{constructor(t){const n=Object.assign({},t);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(te.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(te.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(se(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=$t(t,St.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let n;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof tr?n={viewState:t.getState(),extent:t.calculateExtent()}:n=t,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;n.layerStatesArray?r=n.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return pb(r,n.viewState)&&(!s||pn(s,n.extent))}getAttributions(t){if(!this.isVisible(t))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const r=t instanceof tr?t.getViewStateAndExtent():t;let s=n(r);return Array.isArray(s)||(s=[s]),s}render(t,n){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,n)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(te.MAP,t)}getMapInternal(){return this.get(te.MAP)}setMap(t){this.mapPrecomposeKey_&&(se(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(se(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=$t(t,fr.PRECOMPOSE,function(n){const r=n.frameState.layerStatesArray,s=this.getLayerState(!1);Gt(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=$t(this,St.CHANGE,t.render,t),this.changed())}setSource(t){this.set(te.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function pb(e,t){if(!e.visible)return!1;const n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;const i=t.zoom;return i>e.minZoom&&i<=e.maxZoom}const R0=YQ;function UQ(e,t,n,i,r){uk(e,t,n||0,i||e.length-1,r||VQ)}function uk(e,t,n,i,r){for(;i>n;){if(i-n>600){var s=i-n+1,o=t-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),u=Math.max(n,Math.floor(t-o*l/s+c)),f=Math.min(i,Math.floor(t+(s-o)*l/s+c));uk(e,t,u,f,r)}var h=e[t],d=n,g=i;for(Yc(e,n,t),r(e[i],h)>0&&Yc(e,n,i);d<g;){for(Yc(e,d,g),d++,g--;r(e[d],h)<0;)d++;for(;r(e[g],h)>0;)g--}r(e[n],h)===0?Yc(e,n,g):(g++,Yc(e,g,i)),g<=t&&(n=g+1),t<=g&&(i=g-1)}}function Yc(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function VQ(e,t){return e<t?-1:e>t?1:0}let yb=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const i=[];if(!Kh(t,n))return i;const r=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?r(a):a;Kh(t,l)&&(n.leaf?i.push(a):Jp(t,l)?this._all(a,i):s.push(a))}n=s.pop()}return i}collides(t){let n=this.data;if(!Kh(t,n))return!1;const i=[];for(;n;){for(let r=0;r<n.children.length;r++){const s=n.children[r],o=n.leaf?this.toBBox(s):s;if(Kh(t,o)){if(n.leaf||Jp(t,o))return!0;i.push(s)}}n=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Za([]),this}remove(t,n){if(!t)return this;let i=this.data;const r=this.toBBox(t),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const u=XQ(t,i.children,n);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&Jp(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const i=[];for(;t;)t.leaf?n.push(...t.children):i.push(...t.children),t=i.pop();return n}_build(t,n,i,r){const s=i-n+1;let o=this._maxEntries,a;if(s<=o)return a=Za(t.slice(n,i+1)),Ya(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Za([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));cC(t,n,i,c,this.compareMinX);for(let u=n;u<=i;u+=c){const f=Math.min(u+c-1,i);cC(t,u,f,l,this.compareMinY);for(let h=u;h<=f;h+=l){const d=Math.min(h+l-1,f);a.children.push(this._build(t,h,d,r-1))}}return Ya(a,this.toBBox),a}_chooseSubtree(t,n,i,r){for(;r.push(n),!(n.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=Kp(c),f=ZQ(t,c)-u;f<o?(o=f,s=u<s?u:s,a=c):f===o&&u<s&&(s=u,a=c)}n=a||n.children[0]}return n}_insert(t,n,i){const r=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(t),lu(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)}_split(t,n){const i=t[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=Za(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Ya(i,this.toBBox),Ya(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,n){this.data=Za([t,n]),this.data.height=t.height+1,this.data.leaf=!1,Ya(this.data,this.toBBox)}_chooseSplitIndex(t,n,i){let r,s=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=au(t,0,a,this.toBBox),c=au(t,a,i,this.toBBox),u=KQ(l,c),f=Kp(l)+Kp(c);u<s?(s=u,r=a,o=f<o?f:o):u===s&&f<o&&(o=f,r=a)}return r||i-n}_chooseSplitAxis(t,n,i){const r=t.leaf?this.compareMinX:jQ,s=t.leaf?this.compareMinY:qQ,o=this._allDistMargin(t,n,i,r),a=this._allDistMargin(t,n,i,s);o<a&&t.children.sort(r)}_allDistMargin(t,n,i,r){t.children.sort(r);const s=this.toBBox,o=au(t,0,n,s),a=au(t,i-n,i,s);let l=Zh(o)+Zh(a);for(let c=n;c<i-n;c++){const u=t.children[c];lu(o,t.leaf?s(u):u),l+=Zh(o)}for(let c=i-n-1;c>=n;c--){const u=t.children[c];lu(a,t.leaf?s(u):u),l+=Zh(a)}return l}_adjustParentBBoxes(t,n,i){for(let r=i;r>=0;r--)lu(n[r],t)}_condense(t){for(let n=t.length-1,i;n>=0;n--)t[n].children.length===0?n>0?(i=t[n-1].children,i.splice(i.indexOf(t[n]),1)):this.clear():Ya(t[n],this.toBBox)}};function XQ(e,t,n){if(!n)return t.indexOf(e);for(let i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function Ya(e,t){au(e,0,e.children.length,t,e)}function au(e,t,n,i,r){r||(r=Za(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=t;s<n;s++){const o=e.children[s];lu(r,e.leaf?i(o):o)}return r}function lu(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function jQ(e,t){return e.minX-t.minX}function qQ(e,t){return e.minY-t.minY}function Kp(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Zh(e){return e.maxX-e.minX+(e.maxY-e.minY)}function ZQ(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function KQ(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function Jp(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Kh(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Za(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function cC(e,t,n,i,r){const s=[t,n];for(;s.length;){if(n=s.pop(),t=s.pop(),n-t<=i)continue;const o=t+Math.ceil((n-t)/i/2)*i;UQ(e,o,t,n,r),s.push(t,o,o,n)}}class JQ extends Uf{constructor(t,n,i,r){super(),this.extent=t,this.pixelRatio_=i,this.resolution=n,this.state=typeof r=="function"?Ot.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(St.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Ot.IDLE&&this.loader){this.state=Ot.LOADING,this.changed();const t=this.getResolution(),n=Array.isArray(t)?t[0]:t;KK(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Ot.LOADED}).catch(i=>{this.state=Ot.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function QQ(e,t,n){const i=e;let r=!0,s=!1,o=!1;const a=[Ig(i,St.LOAD,function(){o=!0,s||t()})];return i.src&&SO?(s=!0,i.decode().then(function(){r&&t()}).catch(function(l){r&&(o?t():n())})):a.push(Ig(i,St.ERROR,n)),function(){r=!1,a.forEach(se)}}function ttt(e,t){return new Promise((n,i)=>{function r(){o(),n(e)}function s(){o(),i(new Error("Image load error"))}function o(){e.removeEventListener("load",r),e.removeEventListener("error",s)}e.addEventListener("load",r),e.addEventListener("error",s),t&&(e.src=t)})}function ett(e,t){return t&&(e.src=t),SO?new Promise((n,i)=>e.decode().then(()=>n(e),i)):ttt(e)}const ntt=JQ;class itt{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const n in this.cache_){const i=this.cache_[n];!(t++&3)&&!i.hasListener()&&(delete this.cache_[n],--this.cacheSize_)}}}get(t,n,i){const r=uC(t,n,i);return r in this.cache_?this.cache_[r]:null}set(t,n,i,r){const s=uC(t,n,i);this.cache_[s]=r,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function uC(e,t,n){const i=n?tk(n):"null";return t+":"+e+":"+i}const Hg=new itt;let Uc=null;class rtt extends Uf{constructor(t,n,i,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?Ot.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=n,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ot.LOADED){Uc||(Uc=bn(1,1,void 0,{willReadFrequently:!0})),Uc.drawImage(this.image_,0,0);try{Uc.getImageData(0,0,1,1),this.tainted_=!1}catch{Uc=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(St.CHANGE)}handleImageError_(){this.imageState_=Ot.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ot.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],n=this.size_[1],i=bn(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ot.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ot.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&ett(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Ot.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*t),i.height=Math.ceil(n.height*t);const r=i.getContext("2d");r.scale(t,t),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=tk(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[t]=i}}function stt(e,t,n,i,r){let s=t===void 0?void 0:Hg.get(t,n,r);return s||(s=new rtt(e,e instanceof HTMLImageElement?e.src||void 0:t,n,i,r),Hg.set(t,n,r,s)),s}function fC(e,t,n,i){return n!==void 0&&i!==void 0?[n/e,i/t]:n!==void 0?n/e:i!==void 0?i/t:1}class _b extends QO{constructor(t){t=t||{};const n=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:n,rotation:i,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Gt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||qt(o)),Gt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Gt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=Ot.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?Ot.LOADED:Ot.IDLE:l=Ot.LOADING:l=Ot.LOADED),this.color_=t.color!==void 0?$g(t.color):null,this.iconImage_=stt(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let c,u;if(t.size)[c,u]=t.size;else{const f=this.getImage(1);if(f.width&&f.height)c=f.width,u=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=t;const h=()=>{if(this.unlistenImageChange(h),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(fC(d[0],d[1],t.width,t.height))};this.listenImageChange(h);return}}c!==void 0&&this.setScale(fC(c,u,t.width,t.height))}}clone(){let t,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new _b({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]-n[0]/i[0],t[1]+n[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Ot.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Ot.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(St.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(St.CHANGE,t)}}const Yg=_b;let Ec=0;const Qe=1<<Ec++,Ft=1<<Ec++,Ql=1<<Ec++,vb=1<<Ec++,Zf=1<<Ec++,bi=Math.pow(2,Ec)-1,fk={[Qe]:"boolean",[Ft]:"number",[Ql]:"string",[vb]:"color",[Zf]:"number[]"},ott=Object.keys(fk).map(Number).sort(eo);function Ug(e){const t=[];for(const n of ott)att(e,n)&&t.push(fk[n]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function att(e,t){return(e&t)===t}function hk(e,t){return!!(e&t)}class Hs{constructor(t,n){this.type=t,this.value=n}}class ltt{constructor(t,n,...i){this.type=t,this.operator=n,this.args=i}}function dk(){return{variables:new Set,properties:new Set}}function A0(e,t){switch(typeof e){case"boolean":return new Hs(Qe,e);case"number":return new Hs(Ft,e);case"string":return new Hs(Ql,e)}if(!Array.isArray(e))throw new Error("Expression must be an array or a primitive value");if(e.length===0)throw new Error("Empty expression");if(typeof e[0]=="string")return dtt(e,t);for(const i of e)if(typeof i!="number")throw new Error("Expected an array of numbers");let n=Zf;return(e.length===3||e.length===4)&&(n|=vb),new Hs(n,e)}const et={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},ctt={[et.Number]:Qt(re(1,1/0,bi),Ft),[et.String]:Qt(re(1,1/0,bi),Ql),[et.Get]:Qt(utt,bi),[et.Var]:Qt(ftt,bi),[et.Resolution]:Qt(htt,Ft),[et.Any]:Qt(re(2,1/0,Qe),Qe),[et.All]:Qt(re(2,1/0,Qe),Qe),[et.Not]:Qt(re(1,1,Qe),Qe),[et.Equal]:Qt(re(2,2,bi),Qe),[et.NotEqual]:Qt(re(2,2,bi),Qe),[et.GreaterThan]:Qt(re(2,2,bi),Qe),[et.GreaterThanOrEqualTo]:Qt(re(2,2,bi),Qe),[et.LessThan]:Qt(re(2,2,bi),Qe),[et.LessThanOrEqualTo]:Qt(re(2,2,bi),Qe),[et.Multiply]:Qt(re(2,1/0,Ft),Ft),[et.Divide]:Qt(re(2,2,Ft),Ft),[et.Add]:Qt(re(2,1/0,Ft),Ft),[et.Subtract]:Qt(re(2,2,Ft),Ft),[et.Clamp]:Qt(re(3,3,Ft),Ft),[et.Mod]:Qt(re(2,2,Ft),Ft),[et.Pow]:Qt(re(2,2,Ft),Ft),[et.Abs]:Qt(re(1,1,Ft),Ft),[et.Floor]:Qt(re(1,1,Ft),Ft),[et.Ceil]:Qt(re(1,1,Ft),Ft),[et.Round]:Qt(re(1,1,Ft),Ft),[et.Sin]:Qt(re(1,1,Ft),Ft),[et.Cos]:Qt(re(1,1,Ft),Ft),[et.Atan]:Qt(re(1,2,Ft),Ft),[et.Sqrt]:Qt(re(1,1,Ft),Ft),[et.Match]:Qt(re(4,1/0,Ql|Ft),bi)};function utt(e,t){if(e.length!==2)throw new Error("Expected 1 argument for get operation");const n=A0(e[1],t);if(!(n instanceof Hs))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.properties.add(n.value),[n]}function ftt(e,t){if(e.length!==2)throw new Error("Expected 1 argument for var operation");const n=A0(e[1],t);if(!(n instanceof Hs))throw new Error("Expected a literal argument for var operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.variables.add(n.value),[n]}function htt(e,t){const n=e[0];if(e.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function re(e,t,n){return function(i,r){const s=i[0],o=i.length-1;if(e===t){if(o!==e){const l=e===1?"":"s";throw new Error(`Expected ${e} argument${l} for operation ${s}, got ${o}`)}}else if(o<e||o>t)throw new Error(`Expected ${e} to ${t} arguments for operation ${s}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const c=A0(i[l+1],r);if(!hk(n,c.type)){const u=Ug(n),f=Ug(c.type);throw new Error(`Unexpected type for argument ${l} of ${s} operation : got ${u} but expected ${f}`)}a[l]=c}return a}}function Qt(e,t){return function(n,i){const r=n[0],s=e(n,i);return new ltt(t,r,...s)}}function dtt(e,t){const n=e[0],i=ctt[n];if(!i)throw new Error(`Unknown operator: ${n}`);return i(e,t)}function gk(){return{variables:{},properties:{},resolution:NaN}}function mo(e,t,n){const i=A0(e,n);if(!hk(t,i.type)){const r=Ug(t),s=Ug(i.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return _a(i)}function _a(e,t){if(e instanceof Hs)return function(){return e.value};const n=e.operator;switch(n){case et.Number:case et.String:return gtt(e);case et.Get:case et.Var:return mtt(e);case et.Resolution:return i=>i.resolution;case et.Any:case et.All:case et.Not:return ytt(e);case et.Equal:case et.NotEqual:case et.LessThan:case et.LessThanOrEqualTo:case et.GreaterThan:case et.GreaterThanOrEqualTo:return ptt(e);case et.Multiply:case et.Divide:case et.Add:case et.Subtract:case et.Clamp:case et.Mod:case et.Pow:case et.Abs:case et.Floor:case et.Ceil:case et.Round:case et.Sin:case et.Cos:case et.Atan:case et.Sqrt:return _tt(e);case et.Match:return vtt(e);default:throw new Error(`Unsupported operator ${n}`)}}function gtt(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=_a(e.args[s]);switch(n){case et.Number:case et.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function mtt(e,t){const n=e.args[0];if(!(n instanceof Hs))throw new Error("Expected literal name");const i=n.value;if(typeof i!="string")throw new Error("Expected string name");switch(e.operator){case et.Get:return r=>r.properties[i];case et.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function ptt(e,t){const n=e.operator,i=_a(e.args[0]),r=_a(e.args[1]);switch(n){case et.Equal:return s=>i(s)===r(s);case et.NotEqual:return s=>i(s)!==r(s);case et.LessThan:return s=>i(s)<r(s);case et.LessThanOrEqualTo:return s=>i(s)<=r(s);case et.GreaterThan:return s=>i(s)>r(s);case et.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function ytt(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=_a(e.args[s]);switch(n){case et.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case et.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case et.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function _tt(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=_a(e.args[s]);switch(n){case et.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case et.Divide:return s=>r[0](s)/r[1](s);case et.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case et.Subtract:return s=>r[0](s)-r[1](s);case et.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case et.Mod:return s=>r[0](s)%r[1](s);case et.Pow:return s=>Math.pow(r[0](s),r[1](s));case et.Abs:return s=>Math.abs(r[0](s));case et.Floor:return s=>Math.floor(r[0](s));case et.Ceil:return s=>Math.ceil(r[0](s));case et.Round:return s=>Math.round(r[0](s));case et.Sin:return s=>Math.sin(r[0](s));case et.Cos:return s=>Math.cos(r[0](s));case et.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case et.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function vtt(e,t){const n=e.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=_a(e.args[r]);return r=>{const s=i[0](r);for(let o=1;o<n;o+=2)if(s===i[o](r))return i[o+1](r);return i[n-1](r)}}function wtt(e){return!0}function btt(e){const t=dk(),n=xtt(e,t),i=gk();return function(r,s){return i.properties=r.getPropertiesInternal(),i.resolution=s,n(i)}}function hC(e){const t=dk(),n=e.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=n1(e[o],t);const r=gk(),s=new Array(n);return function(o,a){r.properties=o.getPropertiesInternal(),r.resolution=a;for(let l=0;l<n;++l)s[l]=i[l](r);return s}}function xtt(e,t){const n=e.length,i=new Array(n);for(let r=0;r<n;++r){const s=e[r],o="filter"in s?mo(s.filter,Qe,t):wtt;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=n1(s.style[c],t)}else a=[n1(s.style,t)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(r)&&!(e[a].else&&o)){o=!0;for(const c of i[a].styles){const u=c(r);u&&s.push(u)}}}return s}}function n1(e,t){const n=of(e,"",t),i=af(e,"",t),r=Ett(e,t),s=Ttt(e,t),o=In(e,"z-index",t),a=new ra;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(i){const u=i(l);u&&(c=!1),a.setStroke(u)}if(r){const u=r(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function of(e,t,n){const i=mk(e,t+"fill-color",n);if(!i)return null;const r=new sb;return function(s){const o=i(s);return o==="none"?null:(r.setColor(o),r)}}function af(e,t,n){const i=In(e,t+"stroke-width",n),r=mk(e,t+"stroke-color",n);if(!i&&!r)return null;const s=ks(e,t+"stroke-line-cap",n),o=ks(e,t+"stroke-line-join",n),a=pk(e,t+"stroke-line-dash",n),l=In(e,t+"stroke-line-dash-offset",n),c=In(e,t+"stroke-miter-limit",n),u=new ab;return function(f){if(r){const h=r(f);if(h==="none")return null;u.setColor(h)}if(i&&u.setWidth(i(f)),s){const h=s(f);if(h!=="butt"&&h!=="round"&&h!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(h)}if(o){const h=o(f);if(h!=="bevel"&&h!=="round"&&h!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(h)}return a&&u.setLineDash(a(f)),l&&u.setLineDashOffset(l(f)),c&&u.setMiterLimit(c(f)),u}}function Ett(e,t){const n="text-",i=ks(e,n+"value",t);if(!i)return null;const r=of(e,n,t),s=of(e,n+"background-",t),o=af(e,n,t),a=af(e,n+"background-",t),l=ks(e,n+"font",t),c=In(e,n+"max-angle",t),u=In(e,n+"offset-x",t),f=In(e,n+"offset-y",t),h=lf(e,n+"overflow",t),d=ks(e,n+"placement",t),g=In(e,n+"repeat",t),m=I0(e,n+"scale",t),_=lf(e,n+"rotate-with-view",t),p=In(e,n+"rotation",t),y=ks(e,n+"align",t),w=ks(e,n+"justify",t),v=ks(e,n+"baseline",t),x=pk(e,n+"padding",t),b=new AQ({});return function(E){if(b.setText(i(E)),r&&b.setFill(r(E)),s&&b.setBackgroundFill(s(E)),o&&b.setStroke(o(E)),a&&b.setBackgroundStroke(a(E)),l&&b.setFont(l(E)),c&&b.setMaxAngle(c(E)),u&&b.setOffsetX(u(E)),f&&b.setOffsetY(f(E)),h&&b.setOverflow(h(E)),d){const T=d(E);if(T!=="point"&&T!=="line")throw new Error("Expected point or line for text-placement");b.setPlacement(T)}if(g&&b.setRepeat(g(E)),m&&b.setScale(m(E)),_&&b.setRotateWithView(_(E)),p&&b.setRotation(p(E)),y){const T=y(E);if(T!=="left"&&T!=="center"&&T!=="right"&&T!=="end"&&T!=="start")throw new Error("Expected left, right, center, start, or end for text-align");b.setTextAlign(T)}if(w){const T=w(E);if(T!=="left"&&T!=="right"&&T!=="center")throw new Error("Expected left, right, or center for text-justify");b.setJustify(T)}if(v){const T=v(E);if(T!=="bottom"&&T!=="top"&&T!=="middle"&&T!=="alphabetic"&&T!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");b.setTextBaseline(T)}return x&&b.setPadding(x(E)),b}}function Ttt(e,t){return"icon-src"in e?Ctt(e,t):"shape-points"in e?Stt(e,t):"circle-radius"in e?Mtt(e,t):null}function Ctt(e,t){const n="icon-",i=n+"src",r=yk(e[i],i),s=Vg(e,n+"anchor",t),o=I0(e,n+"scale",t),a=In(e,n+"opacity",t),l=Vg(e,n+"displacement",t),c=In(e,n+"rotation",t),u=lf(e,n+"rotate-with-view",t),f=dC(e,n+"anchor-origin"),h=gC(e,n+"anchor-x-units"),d=gC(e,n+"anchor-y-units"),g=Ltt(e,n+"color"),m=Att(e,n+"cross-origin"),_=Itt(e,n+"offset"),p=dC(e,n+"offset-origin"),y=al(e,n+"width"),w=al(e,n+"height"),v=Rtt(e,n+"size"),x=wb(e,n+"declutter"),b=new Yg({src:r,anchorOrigin:f,anchorXUnits:h,anchorYUnits:d,color:g,crossOrigin:m,offset:_,offsetOrigin:p,height:w,width:y,size:v,declutterMode:x});return function(E){return a&&b.setOpacity(a(E)),l&&b.setDisplacement(l(E)),c&&b.setRotation(c(E)),u&&b.setRotateWithView(u(E)),o&&b.setScale(o(E)),s&&b.setAnchor(s(E)),b}}function Stt(e,t){const n="shape-",i=n+"points",r=_k(e[i],i),s=of(e,n,t),o=af(e,n,t),a=I0(e,n+"scale",t),l=Vg(e,n+"displacement",t),c=In(e,n+"rotation",t),u=lf(e,n+"rotate-with-view",t),f=al(e,n+"radius"),h=al(e,n+"radius1"),d=al(e,n+"radius2"),g=al(e,n+"angle"),m=wb(e,n+"declutter-mode"),_=new ok({points:r,radius:f,radius1:h,radius2:d,angle:g,declutterMode:m});return function(p){return s&&_.setFill(s(p)),o&&_.setStroke(o(p)),l&&_.setDisplacement(l(p)),c&&_.setRotation(c(p)),u&&_.setRotateWithView(u(p)),a&&_.setScale(a(p)),_}}function Mtt(e,t){const n="circle-",i=of(e,n,t),r=af(e,n,t),s=In(e,n+"radius",t),o=I0(e,n+"scale",t),a=Vg(e,n+"displacement",t),l=In(e,n+"rotation",t),c=lf(e,n+"rotate-with-view",t),u=wb(e,n+"declutter-mode"),f=new ak({radius:5,declutterMode:u});return function(h){return s&&f.setRadius(s(h)),i&&f.setFill(i(h)),r&&f.setStroke(r(h)),a&&f.setDisplacement(a(h)),l&&f.setRotation(l(h)),c&&f.setRotateWithView(c(h)),o&&f.setScale(o(h)),f}}function In(e,t,n){if(!(t in e))return;const i=mo(e[t],Ft,n);return function(r){return _k(i(r),t)}}function ks(e,t,n){if(!(t in e))return null;const i=mo(e[t],Ql,n);return function(r){return yk(i(r),t)}}function lf(e,t,n){if(!(t in e))return null;const i=mo(e[t],Qe,n);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function mk(e,t,n){if(!(t in e))return null;const i=mo(e[t],vb|Ql,n);return function(r){return vk(i(r),t)}}function pk(e,t,n){if(!(t in e))return null;const i=mo(e[t],Zf,n);return function(r){return Kf(i(r),t)}}function Vg(e,t,n){if(!(t in e))return null;const i=mo(e[t],Zf,n);return function(r){const s=Kf(i(r),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function I0(e,t,n){if(!(t in e))return null;const i=mo(e[t],Zf|Ft,n);return function(r){return Ott(i(r),t)}}function al(e,t){const n=e[t];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}}function Rtt(e,t){const n=e[t];if(n!==void 0){if(typeof n=="number")return Vn(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${t}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return n}}function Att(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}}function dC(e,t){const n=e[t];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function gC(e,t){const n=e[t];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return n}}function Itt(e,t){const n=e[t];if(n!==void 0)return Kf(n,t)}function wb(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function Ltt(e,t){const n=e[t];if(n!==void 0)return vk(n,t)}function Kf(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const n=e.length;for(let i=0;i<n;++i)if(typeof e[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function yk(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function _k(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function vk(e,t){if(typeof e=="string")return e;const n=Kf(e,t),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return n}function Ott(e,t){if(typeof e=="number")return e;const n=Kf(e,t);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return n}const mC={RENDER_ORDER:"renderOrder"};class ktt extends R0{constructor(t){t=t||{};const n=Object.assign({},t);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(mC.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new yb(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(mC.RENDER_ORDER,t)}setStyle(t){this.style_=Ftt(t),this.styleFunction_=t===null?void 0:SQ(this.style_),this.changed()}}function Ftt(e){if(e===void 0)return MQ;if(!e)return null;if(typeof e=="function"||e instanceof ra)return e;if(!Array.isArray(e))return hC([e]);if(e.length===0)return[];const t=e.length,n=e[0];if(n instanceof ra){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!(o instanceof ra))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in n){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return btt(r)}return hC(e)}const Ptt=ktt,Jf={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Jh=[Jf.FILL],Ys=[Jf.STROKE],Uo=[Jf.BEGIN_PATH],pC=[Jf.CLOSE_PATH],_t=Jf;class Ntt{drawCustom(t,n,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,n){}drawFeature(t,n){}drawGeometryCollection(t,n){}drawLineString(t,n){}drawMultiLineString(t,n){}drawMultiPoint(t,n){}drawMultiPolygon(t,n){}drawPoint(t,n){}drawPolygon(t,n){}drawText(t,n){}setFillStrokeStyle(t,n){}setImageStyle(t,n){}setTextStyle(t,n){}}const wk=Ntt;class Dtt extends wk{constructor(t,n,i,r){super(),this.tolerance=t,this.maxExtent=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})}appendFlatPointCoordinates(t,n){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=t.length;a<l;a+=n)r[0]=t[a],r[1]=t[a+1],Vf(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(t,n,i,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=r);let u=t[n],f=t[n+1];const h=this.tmpCoordinate_;let d=!0,g,m,_;for(g=n+r;g<i;g+=r)h[0]=t[g],h[1]=t[g+1],_=H_(c,h),_!==m?(d&&(a[l++]=u,a[l++]=f,d=!1),a[l++]=h[0],a[l++]=h[1]):_===He.INTERSECTING?(a[l++]=h[0],a[l++]=h[1],d=!1):d=!0,u=h[0],f=h[1],m=_;return(s&&d||g===n+r)&&(a[l++]=u,a[l++]=f),l}drawCustomCoordinates_(t,n,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(t,n,l,r,!1,!1);s.push(c),n=l}return n}drawCustom(t,n,i,r){this.beginGeometry(t,n);const s=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,c,u,f,h;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),f=[];const d=t.getEndss();h=0;for(let g=0,m=d.length;g<m;++g){const _=[];h=this.drawCustomCoordinates_(l,h,d[g],o,_),f.push(_)}this.instructions.push([_t.CUSTOM,a,f,t,i,Z_]),this.hitDetectionInstructions.push([_t.CUSTOM,a,f,t,r||i,Z_]);break;case"Polygon":case"MultiLineString":u=[],l=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(l,0,t.getEnds(),o,u),this.instructions.push([_t.CUSTOM,a,u,t,i,tf]),this.hitDetectionInstructions.push([_t.CUSTOM,a,u,t,r||i,tf]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([_t.CUSTOM,a,c,t,i,Bs]),this.hitDetectionInstructions.push([_t.CUSTOM,a,c,t,r||i,Bs]);break;case"MultiPoint":l=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([_t.CUSTOM,a,c,t,i,Bs]),this.hitDetectionInstructions.push([_t.CUSTOM,a,c,t,r||i,Bs]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([_t.CUSTOM,a,c,t,i]),this.hitDetectionInstructions.push([_t.CUSTOM,a,c,t,r||i]);break}this.endGeometry(n)}beginGeometry(t,n){this.beginGeometryInstruction1_=[_t.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[_t.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let n;const i=t.length;let r,s,o=-1;for(n=0;n<i;++n)r=t[n],s=r[0],s==_t.END_GEOMETRY?o=n:s==_t.BEGIN_GEOMETRY&&(r[2]=n,jK(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(t,n){const i=this.state;if(t){const r=t.getColor();i.fillStyle=or(r||An)}else i.fillStyle=void 0;if(n){const r=n.getColor();i.strokeStyle=or(r||nf);const s=n.getLineCap();i.lineCap=s!==void 0?s:Kl;const o=n.getLineDash();i.lineDash=o?o.slice():Jr;const a=n.getLineDashOffset();i.lineDashOffset=a||Qr;const l=n.getLineJoin();i.lineJoin=l!==void 0?l:Jl;const c=n.getWidth();i.lineWidth=c!==void 0?c:sf;const u=n.getMiterLimit();i.miterLimit=u!==void 0?u:ef,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const n=t.fillStyle,i=[_t.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[_t.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,n){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,n){const i=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||s!=t.currentLineDash&&!go(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[_t.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=RO(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Yw(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Qf=Dtt;class $tt extends Qf{constructor(t,n,i,r){super(t,n,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([_t.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([_t.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([_t.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([_t.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,n){const i=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}}const ztt=$tt;class Wtt extends Qf{constructor(t,n,i,r){super(t,n,i,r)}drawFlatCoordinates_(t,n,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),a=[_t.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([_t.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Jr,Qr],Uo);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Ys),this.endGeometry(n)}drawMultiLineString(t,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([_t.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Jr,Qr],Uo);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,f=o.length;u<f;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(Ys),this.endGeometry(n)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Ys),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Ys),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Uo)}}const Gtt=Wtt;class Btt extends Qf{constructor(t,n,i,r){super(t,n,i,r)}drawFlatCoordinatess_(t,n,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(Uo),this.hitDetectionInstructions.push(Uo);for(let c=0;c<l;++c){const u=i[c],f=this.coordinates.length,h=this.appendFlatLineCoordinates(t,n,u,r,!0,!a),d=[_t.MOVE_TO_LINE_TO,f,h];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(pC),this.hitDetectionInstructions.push(pC)),n=u}return o&&(this.instructions.push(Jh),this.hitDetectionInstructions.push(Jh)),a&&(this.instructions.push(Ys),this.hitDetectionInstructions.push(Ys)),n}drawCircle(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([_t.SET_FILL_STYLE,An]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([_t.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Jr,Qr]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[_t.CIRCLE,l];this.instructions.push(Uo,c),this.hitDetectionInstructions.push(Uo,c),i.fillStyle!==void 0&&(this.instructions.push(Jh),this.hitDetectionInstructions.push(Jh)),i.strokeStyle!==void 0&&(this.instructions.push(Ys),this.hitDetectionInstructions.push(Ys)),this.endGeometry(n)}drawPolygon(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([_t.SET_FILL_STYLE,An]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([_t.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Jr,Qr]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(n)}drawMultiPolygon(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([_t.SET_FILL_STYLE,An]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([_t.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Jr,Qr]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,f=o.length;u<f;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const n=this.coordinates;for(let i=0,r=n.length;i<r;++i)n[i]=Ro(n[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const yC=Btt;function Htt(e,t,n,i,r){const s=[];let o=n,a=0,l=t.slice(n,2);for(;a<e&&o+r<i;){const[c,u]=l.slice(-2),f=t[o+r],h=t[o+r+1],d=Math.sqrt((f-c)*(f-c)+(h-u)*(h-u));if(a+=d,a>=e){const g=(e-a+d)/d,m=Bn(c,f,g),_=Bn(u,h,g);l.push(m,_),s.push(l),l=[m,_],a==e&&(o+=r),a=0}else if(a<e)l.push(t[o+r],t[o+r+1]),o+=r;else{const g=d-a,m=Bn(c,f,g/d),_=Bn(u,h,g/d);l.push(m,_),s.push(l),l=[m,_],a=0,o+=r}}return a>0&&s.push(l),s}function Ytt(e,t,n,i,r){let s=n,o=n,a=0,l=0,c=n,u,f,h,d,g,m,_,p,y,w;for(f=n;f<i;f+=r){const v=t[f],x=t[f+1];g!==void 0&&(y=v-g,w=x-m,d=Math.sqrt(y*y+w*w),_!==void 0&&(l+=h,u=Math.acos((_*y+p*w)/(h*d)),u>e&&(l>a&&(a=l,s=c,o=f),l=0,c=f-r)),h=d,_=y,p=w),g=v,m=x}return l+=d,l>a?[c,f]:[s,o]}const Xg={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Utt extends Qf{constructor(t,n,i,r){super(t,n,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[An]={fillStyle:An},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,n){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=t.getType();let c=null,u=t.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!pn(this.getBufferedMaxExtent(),t.getExtent()))return;let f;if(c=t.getFlatCoordinates(),l=="LineString")f=[c.length];else if(l=="MultiLineString")f=t.getEnds();else if(l=="Polygon")f=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=t.getEndss();f=[];for(let _=0,p=m.length;_<p;++_)f.push(m[_][0])}this.beginGeometry(t,n);const h=s.repeat,d=h?void 0:s.textAlign;let g=0;for(let m=0,_=f.length;m<_;++m){let p;h?p=Htt(h*this.resolution,c,g,f[m],u):p=[c.slice(g,f[m])];for(let y=0,w=p.length;y<w;++y){const v=p[y];let x=0,b=v.length;if(d==null){const T=Ytt(s.maxAngle,v,0,v.length,2);x=T[0],b=T[1]}for(let T=x;T<b;T+=u)o.push(v[T],v[T+1]);const E=o.length;g=f[m],this.drawChars_(a,E),a=E}}this.endGeometry(n)}else{let f=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),u=2;break;case"Polygon":c=t.getFlatInteriorPoint(),s.overflow||f.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const p=t.getFlatInteriorPoints();c=[];for(let y=0,w=p.length;y<w;y+=3)s.overflow||f.push(p[y+2]/this.resolution),c.push(p[y],p[y+1]);if(c.length===0)return;u=2;break}const h=this.appendFlatPointCoordinates(c,u);if(h===a)return;if(f&&(h-a)/2!==c.length/u){let p=a/2;f=f.filter((y,w)=>{const v=o[(p+w)*2]===c[w*u]&&o[(p+w)*2+1]===c[w*u+1];return v||--p,v})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);let d=s.padding;if(d!=Yo&&(s.scale[0]<0||s.scale[1]<0)){let p=s.padding[0],y=s.padding[1],w=s.padding[2],v=s.padding[3];s.scale[0]<0&&(y=-y,v=-v),s.scale[1]<0&&(p=-p,w=-w),d=[p,y,w,v]}const g=this.pixelRatio;this.instructions.push([_t.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,d==Yo?Yo:d.map(function(p){return p*g}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const m=1/g,_=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=An,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([_t.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,d,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?An:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),s.backgroundFill&&(this.state.fillStyle=_,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||rf,justify:n.justify,textBaseline:n.textBaseline||Gg,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,n){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Xg[r.textBaseline],u=this.textOffsetY_*l,f=this.text_,h=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([_t.DRAW_CHARS,t,n,c,r.overflow,a,r.maxAngle,l,u,s,h*l,f,o,1]),this.hitDetectionInstructions.push([_t.DRAW_CHARS,t,n,c,r.overflow,a&&An,r.maxAngle,l,u,s,h*l,f,o,1/l])}setTextStyle(t,n){let i,r,s;if(!t)this.text_="";else{const o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=or(o.getColor()||An)):(r=null,this.textFillState_=r);const a=t.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=a.getLineDash(),m=a.getLineDashOffset(),_=a.getWidth(),p=a.getMiterLimit();s.lineCap=a.getLineCap()||Kl,s.lineDash=g?g.slice():Jr,s.lineDashOffset=m===void 0?Qr:m,s.lineJoin=a.getLineJoin()||Jl,s.lineWidth=_===void 0?sf:_,s.miterLimit=p===void 0?ef:p,s.strokeStyle=or(a.getColor()||nf)}i=this.textState_;const l=t.getFont()||rk;bQ(l);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Gg,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Yo,i.scale=c===void 0?[1,1]:c;const u=t.getOffsetX(),f=t.getOffsetY(),h=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=h===void 0?!1:h,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:qt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+qt(r.fillStyle):""}this.declutterImageWithText_=n}}const Vtt={Circle:yC,Default:Qf,Image:ztt,LineString:Gtt,Polygon:yC,Text:Utt};class Xtt{constructor(t,n,i,r){this.tolerance_=t,this.maxExtent_=n,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const n in this.buildersByZIndex_){t[n]=t[n]||{};const i=this.buildersByZIndex_[n];for(const r in i){const s=i[r].finish();t[n][r]=s}}return t}getBuilder(t,n){const i=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[n];if(s===void 0){const o=Vtt[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[n]=s}return s}}const _C=Xtt;class jtt extends EO{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return Et()}getData(t){return null}prepareFrame(t){return Et()}renderFrame(t,n){return Et()}loadedTileCallback(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i}createLoadedTileFinder(t,n,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,s,o)}}forEachFeatureAtCoordinate(t,n,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const n=t.target;(n.getState()===Ot.LOADED||n.getState()===Ot.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let n=t.getState();return n!=Ot.LOADED&&n!=Ot.ERROR&&t.addEventListener(St.CHANGE,this.boundHandleImageChange_),n==Ot.IDLE&&(t.load(),n=t.getState()),n==Ot.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const qtt=jtt;class Ztt extends gs{constructor(t,n,i,r){super(t),this.inversePixelTransform=n,this.frameState=i,this.context=r}}const bk=Ztt,vC=[];let Ka=null;function Ktt(){Ka=bn(1,1,void 0,{willReadFrequently:!0})}class Jtt extends qtt{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Fi(),this.pixelTransform=Fi(),this.inversePixelTransform=Fi(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,n,i){Ka||Ktt(),Ka.clearRect(0,0,1,1);let r;try{Ka.drawImage(t,n,i,1,1,0,0,1,1),r=Ka.getImageData(0,0,1,1).data}catch{return Ka=null,null}return r}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,n,i){const r=this.getLayer().getClassName();let s,o;if(t&&t.className===r&&(!i||t&&t.style.backgroundColor&&go($g(t.style.backgroundColor),$g(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=bn();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,n,i){const r=Ca(i),s=x0(i),o=b0(i),a=w0(i);Me(n.coordinateToPixelTransform,r),Me(n.coordinateToPixelTransform,s),Me(n.coordinateToPixelTransform,o),Me(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Me(l,r),Me(l,s),Me(l,o),Me(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,n,i){const r=this.getLayer();if(r.hasListener(t)){const s=new bk(t,this.inversePixelTransform,i,n);r.dispatchEvent(s)}}preRender(t,n){this.frameState=n,this.dispatchRenderEvent_(fr.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(fr.POSTRENDER,t,n)}getRenderTransform(t,n,i,r,s,o,a){const l=s/2,c=o/2,u=r/n,f=-u,h=-t[0]+a,d=-t[1];return Bi(this.tempTransform,l,c,u,f,-i,h,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const bb=Jtt;function Qtt(e,t,n,i,r,s,o,a,l,c,u,f){let h=e[t],d=e[t+1],g=0,m=0,_=0,p=0;function y(){g=h,m=d,t+=i,h=e[t],d=e[t+1],p+=_,_=Math.sqrt((h-g)*(h-g)+(d-m)*(d-m))}do y();while(t<n-i&&p+_<s);let w=_===0?0:(s-p)/_;const v=Bn(g,h,w),x=Bn(m,d,w),b=t-i,E=p,T=s+a*l(c,r,u);for(;t<n-i&&p+_<T;)y();w=_===0?0:(T-p)/_;const M=Bn(g,h,w),C=Bn(m,d,w);let R;if(f){const F=[v,x,M,C];WO(F,0,4,2,f,F,F),R=F[0]>F[2]}else R=v>M;const A=Math.PI,k=[],O=b+i===t;t=b,_=0,p=E,h=e[t],d=e[t+1];let I;if(O){y(),I=Math.atan2(d-m,h-g),R&&(I+=I>0?-A:A);const F=(M+v)/2,P=(C+x)/2;return k[0]=[F,P,(T-s)/2,I,r],k}r=r.replace(/\n/g," ");for(let F=0,P=r.length;F<P;){y();let G=Math.atan2(d-m,h-g);if(R&&(G+=G>0?-A:A),I!==void 0){let nt=G-I;if(nt+=nt>A?-2*A:nt<-A?2*A:0,Math.abs(nt)>o)return null}I=G;const j=F;let U=0;for(;F<P;++F){const nt=R?P-F-1:F,st=a*l(c,r[nt],u);if(t+i<n&&p+_<s+U+st/2)break;U+=st}if(F===j)continue;const q=R?r.substring(P-j,P-F):r.substring(j,F);w=_===0?0:(s+U/2-p)/_;const W=Bn(g,h,w),Q=Bn(m,d,w);k.push([W,Q,U/2,G,q]),s+=U}return k}const Ua=mi(),Es=[],Lr=[],Or=[],Ts=[];function wC(e){return e[3].declutterBox}const bC=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Qp(e,t){return t==="start"?t=bC.test(e)?"right":"left":t==="end"&&(t=bC.test(e)?"left":"right"),Xg[t]}function tet(e,t,n){return n>0&&e.push(`
`,""),e.push(t,""),e}class eet{constructor(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Fi(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(t,n,i,r){const s=t+n+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],f=Array.isArray(t),h=l.justify?Xg[l.justify]:Qp(Array.isArray(t)?t[0]:t,l.textAlign||rf),d=r&&o.lineWidth?o.lineWidth:0,g=f?t:t.split(`
`).reduce(tet,[]),{width:m,height:_,widths:p,heights:y,lineWidths:w}=EQ(l,g),v=m+d,x=[],b=(v+2)*u[0],E=(_+d)*u[1],T={width:b<0?Math.floor(b):Math.ceil(b),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:x};(u[0]!=1||u[1]!=1)&&x.push("scale",u),r&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",d),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)),i&&x.push("fillStyle",a.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const M=.5-h;let C=h*v+M*d;const R=[],A=[];let k=0,O=0,I=0,F=0,P;for(let G=0,j=g.length;G<j;G+=2){const U=g[G];if(U===`
`){O+=k,k=0,C=h*v+M*d,++F;continue}const q=g[G+1]||l.font;q!==P&&(r&&R.push("font",q),i&&A.push("font",q),P=q),k=Math.max(k,y[I]);const W=[U,C+M*p[I]+h*(p[I]-w[F]),.5*(d+k)+O];C+=p[I],r&&R.push("strokeText",W),i&&A.push("fillText",W),++I}return Array.prototype.push.apply(x,R),Array.prototype.push.apply(x,A),this.labels_[s]=T,T}replayTextBackground_(t,n,i,r,s,o,a){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,n),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,n,i,r,s,o,a,l,c,u,f,h,d,g,m,_){a*=h[0],l*=h[1];let p=i-a,y=r-l;const w=s+c>t?t-c:s,v=o+u>n?n-u:o,x=g[3]+w*h[0]+g[1],b=g[0]+v*h[1]+g[2],E=p-g[3],T=y-g[0];(m||f!==0)&&(Es[0]=E,Ts[0]=E,Es[1]=T,Lr[1]=T,Lr[0]=E+x,Or[0]=Lr[0],Or[1]=T+b,Ts[1]=Or[1]);let M;return f!==0?(M=Bi(Fi(),i,r,1,1,f,-i,-r),Me(M,Es),Me(M,Lr),Me(M,Or),Me(M,Ts),io(Math.min(Es[0],Lr[0],Or[0],Ts[0]),Math.min(Es[1],Lr[1],Or[1],Ts[1]),Math.max(Es[0],Lr[0],Or[0],Ts[0]),Math.max(Es[1],Lr[1],Or[1],Ts[1]),Ua)):io(Math.min(E,E+x),Math.min(T,T+b),Math.max(E,E+x),Math.max(T,T+b),Ua),d&&(p=Math.round(p),y=Math.round(y)),{drawImageX:p,drawImageY:y,drawImageW:w,drawImageH:v,originX:c,originY:u,declutterBox:{minX:Ua[0],minY:Ua[1],maxX:Ua[2],maxY:Ua[3],value:_},canvasTransform:M,scale:h}}replayImageOrLabel_(t,n,i,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=t.canvas,f=a?a[2]*r.scale[0]/2:0;return c.minX-f<=u.width/n&&c.maxX+f>=0&&c.minY-f<=u.height/n&&c.maxY+f>=0&&(l&&this.replayTextBackground_(t,Es,Lr,Or,Ts,o,a),TQ(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){const n=Me(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.lineDashOffset=n[7],t.setLineDash(n[6])}drawLabelWithPointPlacement_(t,n,i,r){const s=this.textStates[n],o=this.createLabel(t,n,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=Qp(Array.isArray(t)?t[0]:t,s.textAlign||rf),u=Xg[s.textBaseline||Gg],f=a&&a.lineWidth?a.lineWidth:0,h=o.width/l-2*s.scale[0],d=c*h+2*(.5-c)*f,g=u*o.height/l+2*(.5-u)*f;return{label:o,anchorX:d,anchorY:g}}execute_(t,n,i,r,s,o,a,l){let c;this.pixelCoordinates_&&go(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=ia(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),lJ(this.renderedTransform_,i));let u=0;const f=r.length;let h=0,d,g,m,_,p,y,w,v,x,b,E,T,M=0,C=0,R=null,A=null;const k=this.coordinateCache_,O=this.viewRotation_,I=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,F={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:O},P=this.instructions!=r||this.overlaps?0:200;let G,j,U,q;for(;u<f;){const W=r[u];switch(W[0]){case _t.BEGIN_GEOMETRY:G=W[1],q=W[3],G.getGeometry()?a!==void 0&&!pn(a,q.getExtent())?u=W[2]+1:++u:u=W[2];break;case _t.BEGIN_PATH:M>P&&(this.fill_(t),M=0),C>P&&(t.stroke(),C=0),!M&&!C&&(t.beginPath(),_=NaN,p=NaN),++u;break;case _t.CIRCLE:h=W[1];const nt=c[h],st=c[h+1],ot=c[h+2],z=c[h+3],Y=ot-nt,$=z-st,V=Math.sqrt(Y*Y+$*$);t.moveTo(nt+V,st),t.arc(nt,st,V,0,2*Math.PI,!0),++u;break;case _t.CLOSE_PATH:t.closePath(),++u;break;case _t.CUSTOM:h=W[1],d=W[2];const K=W[3],S=W[4],L=W.length==6?W[5]:void 0;F.geometry=K,F.feature=G,u in k||(k[u]=[]);const D=k[u];L?L(c,h,d,2,D):(D[0]=c[h],D[1]=c[h+1],D.length=2),S(D,F),++u;break;case _t.DRAW_IMAGE:h=W[1],d=W[2],v=W[3],g=W[4],m=W[5];let B=W[6];const H=W[7],X=W[8],rt=W[9],J=W[10];let tt=W[11];const Z=W[12];let ct=W[13];const at=W[14],ut=W[15];if(!v&&W.length>=20){x=W[19],b=W[20],E=W[21],T=W[22];const Wn=this.drawLabelWithPointPlacement_(x,b,E,T);v=Wn.label,W[3]=v;const Ia=W[23];g=(Wn.anchorX-Ia)*this.pixelRatio,W[4]=g;const ti=W[24];m=(Wn.anchorY-ti)*this.pixelRatio,W[5]=m,B=v.height,W[6]=B,ct=v.width,W[13]=ct}let ft;W.length>25&&(ft=W[25]);let Ct,Pt,Mt;W.length>17?(Ct=W[16],Pt=W[17],Mt=W[18]):(Ct=Yo,Pt=!1,Mt=!1),J&&I?tt+=O:!J&&!I&&(tt-=O);let Jt=0;for(;h<d;h+=2){if(ft&&ft[Jt++]<ct/this.pixelRatio)continue;const Wn=this.calculateImageOrLabelDimensions_(v.width,v.height,c[h],c[h+1],ct,B,g,m,X,rt,tt,Z,s,Ct,Pt||Mt,G),Ia=[t,n,v,Wn,H,Pt?R:null,Mt?A:null];if(l){if(at==="none")continue;if(at==="obstacle"){l.insert(Wn.declutterBox);continue}else{let ti,Er;if(ut){const Gn=d-h;if(!ut[Gn]){ut[Gn]=Ia;continue}if(ti=ut[Gn],delete ut[Gn],Er=wC(ti),l.collides(Er))continue}if(l.collides(Wn.declutterBox))continue;ti&&(l.insert(Er),this.replayImageOrLabel_.apply(this,ti)),l.insert(Wn.declutterBox)}}this.replayImageOrLabel_.apply(this,Ia)}++u;break;case _t.DRAW_CHARS:const we=W[1],de=W[2],ms=W[3],Qn=W[4];T=W[5];const cn=W[6],ge=W[7],un=W[8];E=W[9];const Aa=W[10];x=W[11],b=W[12];const Ab=[W[13],W[13]],P0=this.textStates[b],Cc=P0.font,Sc=[P0.scale[0]*ge,P0.scale[1]*ge];let Mc;Cc in this.widths_?Mc=this.widths_[Cc]:(Mc={},this.widths_[Cc]=Mc);const Ib=JO(c,we,de,2),Lb=Math.abs(Sc[0])*rC(Cc,x,Mc);if(Qn||Lb<=Ib){const Wn=this.textStates[b].textAlign,Ia=(Ib-Lb)*Qp(x,Wn),ti=Qtt(c,we,de,2,x,Ia,cn,Math.abs(Sc[0]),rC,Cc,Mc,I?0:this.viewRotation_);t:if(ti){const Er=[];let Gn,rh,sh,xn,ei;if(E)for(Gn=0,rh=ti.length;Gn<rh;++Gn){ei=ti[Gn],sh=ei[4],xn=this.createLabel(sh,b,"",E),g=ei[2]+(Sc[0]<0?-Aa:Aa),m=ms*xn.height+(.5-ms)*2*Aa*Sc[1]/Sc[0]-un;const Tr=this.calculateImageOrLabelDimensions_(xn.width,xn.height,ei[0],ei[1],xn.width,xn.height,g,m,0,0,ei[3],Ab,!1,Yo,!1,G);if(l&&l.collides(Tr.declutterBox))break t;Er.push([t,n,xn,Tr,1,null,null])}if(T)for(Gn=0,rh=ti.length;Gn<rh;++Gn){ei=ti[Gn],sh=ei[4],xn=this.createLabel(sh,b,T,""),g=ei[2],m=ms*xn.height-un;const Tr=this.calculateImageOrLabelDimensions_(xn.width,xn.height,ei[0],ei[1],xn.width,xn.height,g,m,0,0,ei[3],Ab,!1,Yo,!1,G);if(l&&l.collides(Tr.declutterBox))break t;Er.push([t,n,xn,Tr,1,null,null])}l&&l.load(Er.map(wC));for(let Tr=0,qk=Er.length;Tr<qk;++Tr)this.replayImageOrLabel_.apply(this,Er[Tr])}}++u;break;case _t.END_GEOMETRY:if(o!==void 0){G=W[1];const Wn=o(G,q);if(Wn)return Wn}++u;break;case _t.FILL:P?M++:this.fill_(t),++u;break;case _t.MOVE_TO_LINE_TO:for(h=W[1],d=W[2],j=c[h],U=c[h+1],y=j+.5|0,w=U+.5|0,(y!==_||w!==p)&&(t.moveTo(j,U),_=y,p=w),h+=2;h<d;h+=2)j=c[h],U=c[h+1],y=j+.5|0,w=U+.5|0,(h==d-2||y!==_||w!==p)&&(t.lineTo(j,U),_=y,p=w);++u;break;case _t.SET_FILL_STYLE:R=W,this.alignFill_=W[2],M&&(this.fill_(t),M=0,C&&(t.stroke(),C=0)),t.fillStyle=W[1],++u;break;case _t.SET_STROKE_STYLE:A=W,C&&(t.stroke(),C=0),this.setStrokeStyle_(t,W),++u;break;case _t.STROKE:P?C++:t.stroke(),++u;break;default:++u;break}}M&&this.fill_(t),C&&t.stroke()}execute(t,n,i,r,s,o){this.viewRotation_=r,this.execute_(t,n,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,n,i,r,s){return this.viewRotation_=i,this.execute_(t,1,n,this.hitDetectionInstructions,!0,r,s)}}const net=eet,ty=["Polygon","Circle","LineString","Image","Text","Default"];class iet{constructor(t,n,i,r,s,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Fi(),this.createExecutors_(s)}clip(t,n){const i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const n in t){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const r=t[n];for(const s in r){const o=r[s];i[s]=new net(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let r=0,s=t.length;r<s;++r)if(t[r]in i)return!0}return!1}forEachFeatureAtCoordinate(t,n,i,r,s,o){r=Math.round(r);const a=r*2+1,l=Bi(this.hitDetectionTransform_,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=bn(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let f;this.renderBuffer_!==void 0&&(f=mi(),xu(f,t),Yw(f,n*(this.renderBuffer_+r),f));const h=ret(r);let d;function g(x,b){const E=u.getImageData(0,0,a,a).data;for(let T=0,M=h.length;T<M;T++)if(E[h[T]]>0){if(!o||d!=="Image"&&d!=="Text"||o.includes(x)){const C=(h[T]-3)/4,R=r-C%a,A=r-(C/a|0),k=s(x,b,R*R+A*A);if(k)return k}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(eo);let _,p,y,w,v;for(_=m.length-1;_>=0;--_){const x=m[_].toString();for(y=this.executorsByZIndex_[x],p=ty.length-1;p>=0;--p)if(d=ty[p],w=y[d],w!==void 0&&(v=w.executeHitDetection(u,l,i,g,f),v))return v}}getClipCoords(t){const n=this.maxExtent_;if(!n)return null;const i=n[0],r=n[1],s=n[2],o=n[3],a=[i,r,i,o,s,o,s,r];return ia(a,0,8,2,t,a),a}isEmpty(){return jl(this.executorsByZIndex_)}execute(t,n,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(eo),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||ty;let c,u,f,h,d,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(d=this.executorsByZIndex_[m],f=0,h=o.length;f<h;++f){const _=o[f];g=d[_],g!==void 0&&g.execute(t,n,i,r,s,a)}}this.maxExtent_&&t.restore()}}const ey={};function ret(e){if(ey[e]!==void 0)return ey[e];const t=e*2+1,n=e*e,i=new Array(n+1);for(let s=0;s<=e;++s)for(let o=0;o<=e;++o){const a=s*s+o*o;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((e+s)*t+(e+o))*4+3),s>0&&l.push(((e-s)*t+(e+o))*4+3),o>0&&(l.push(((e+s)*t+(e-o))*4+3),s>0&&l.push(((e-s)*t+(e-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return ey[e]=r,r}const xC=iet;class set extends wk{constructor(t,n,i,r,s,o,a){super(),this.context_=t,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.transformRotation_=r?E0(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Fi()}drawImages_(t,n,i,r){if(!this.image_)return;const s=ia(t,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,f=s.length;u<f;u+=2){const h=s[u]-this.imageAnchorX_,d=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=h+this.imageAnchorX_,m=d+this.imageAnchorY_;Bi(a,g,m,1,1,c,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,n,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=ia(t,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=r){const l=s[n]+this.textOffsetX_,c=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(t,n,i,r,s){const o=this.context_,a=ia(t,n,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(t,n,i,r){for(let s=0,o=i.length;s<o;++s)n=this.moveToLineTo_(t,n,i[s],r,!0);return n}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!pn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=XJ(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,n){const i=n.getGeometryFunction()(t);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(t){const n=t.getGeometriesArray();for(let i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!pn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getExtent();if(pn(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=t.getFlatCoordinates();let s=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!pn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!pn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getOrientedFlatCoordinates();let r=0;const s=t.getEndss(),o=t.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(i,r,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(t){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),go(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset,n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const n=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:rf;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,n){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:or(i||An)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=s||Jr;this.strokeState_={lineCap:r!==void 0?r:Kl,lineDash:this.pixelRatio_===1?u:u.map(f=>f*this.pixelRatio_),lineDashOffset:(o||Qr)*this.pixelRatio_,lineJoin:a!==void 0?a:Jl,lineWidth:(l!==void 0?l:sf)*this.pixelRatio_,miterLimit:c!==void 0?c:ef,strokeStyle:or(i||nf)}}}setImageStyle(t){let n;if(!t||!(n=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(t){if(!t)this.text_="";else{const n=t.getFill();if(!n)this.textFillState_=null;else{const d=n.getColor();this.textFillState_={fillStyle:or(d||An)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const d=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),_=i.getLineDashOffset(),p=i.getLineJoin(),y=i.getWidth(),w=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:Kl,lineDash:m||Jr,lineDashOffset:_||Qr,lineJoin:p!==void 0?p:Jl,lineWidth:y!==void 0?y:sf,miterLimit:w!==void 0?w:ef,strokeStyle:or(d||nf)}}const r=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),u=t.getText(),f=t.getTextAlign(),h=t.getTextBaseline();this.textState_={font:r!==void 0?r:rk,textAlign:f!==void 0?f:rf,textBaseline:h!==void 0?h:Gg},this.text_=u!==void 0?Array.isArray(u)?u.reduce((d,g,m)=>d+=m%2?" ":g,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const oet=set,er=.5;function aet(e,t,n,i,r,s,o){const a=e[0]*er,l=e[1]*er,c=bn(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,f=new oet(c,er,r,null,o),h=n.length,d=Math.floor((256*256*256-1)/h),g={};for(let _=1;_<=h;++_){const p=n[_-1],y=p.getStyleFunction()||i;if(!y)continue;let w=y(p,s);if(!w)continue;Array.isArray(w)||(w=[w]);const x=(_*d).toString(16).padStart(7,"#00000");for(let b=0,E=w.length;b<E;++b){const T=w[b],M=T.getGeometryFunction()(p);if(!M||!pn(r,M.getExtent()))continue;const C=T.clone(),R=C.getFill();R&&R.setColor(x);const A=C.getStroke();A&&(A.setColor(x),A.setLineDash(null)),C.setText(void 0);const k=T.getImage();if(k){const P=k.getImageSize();if(!P)continue;const G=bn(P[0],P[1],void 0,{alpha:!1}),j=G.canvas;G.fillStyle=x,G.fillRect(0,0,j.width,j.height),C.setImage(new Yg({img:j,anchor:k.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:k.getOrigin(),opacity:1,size:k.getSize(),scale:k.getScale(),rotation:k.getRotation(),rotateWithView:k.getRotateWithView()}))}const O=C.getZIndex()||0;let I=g[O];I||(I={},g[O]=I,I.Polygon=[],I.Circle=[],I.LineString=[],I.Point=[]);const F=M.getType();if(F==="GeometryCollection"){const P=M.getGeometriesArrayRecursive();for(let G=0,j=P.length;G<j;++G){const U=P[G];I[U.getType().replace("Multi","")].push(U,C)}}else I[F.replace("Multi","")].push(M,C)}}const m=Object.keys(g).map(Number).sort(eo);for(let _=0,p=m.length;_<p;++_){const y=g[m[_]];for(const w in y){const v=y[w];for(let x=0,b=v.length;x<b;x+=2){f.setStyle(v[x+1]);for(let E=0,T=t.length;E<T;++E)f.setTransform(t[E]),f.drawGeometry(v[x])}}}return c.getImageData(0,0,u.width,u.height)}function cet(e,t,n){const i=[];if(n){const r=Math.floor(Math.round(e[0])*er),s=Math.floor(Math.round(e[1])*er),o=(Oe(r,0,n.width-1)+Oe(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),f=Math.floor((256*256*256-1)/t.length);u&&u%f===0&&i.push(t[u/f-1])}return i}const uet=.5,xk={Point:vet,LineString:pet,Polygon:bet,MultiPoint:wet,MultiLineString:yet,MultiPolygon:_et,GeometryCollection:met,Circle:det};function fet(e,t){return parseInt(qt(e),10)-parseInt(qt(t),10)}function het(e,t){const n=i1(e,t);return n*n}function i1(e,t){return uet*e/t}function det(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=e.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function EC(e,t,n,i,r,s,o){let a=!1;const l=n.getImage();if(l){const c=l.getImageState();c==Ot.LOADED||c==Ot.ERROR?l.unlistenImageChange(r):(c==Ot.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return get(e,t,n,i,s,o),a}function get(e,t,n,i,r,s){const o=n.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(i,r);if(n.getRenderer())Ek(e,a,n,t);else{const c=xk[a.getType()];c(e,a,n,t,s)}}function Ek(e,t,n,i){if(t.getType()=="GeometryCollection"){const s=t.getGeometries();for(let o=0,a=s.length;o<a;++o)Ek(e,s[o],n,i);return}e.getBuilder(n.getZIndex(),"Default").drawCustom(t,i,n.getRenderer(),n.getHitDetectionRenderer())}function met(e,t,n,i,r){const s=t.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=xk[s[o].getType()];l(e,s[o],n,i,r)}}function pet(e,t,n,i,r){const s=n.getStroke();if(s){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(r||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function yet(e,t,n,i,r){const s=n.getStroke();if(s){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(r||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function _et(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function vet(e,t,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=Ot.LOADED)return;let l=e;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const f=e.getBuilder(n.getZIndex(),"Image");f.setImageStyle(s,a),f.drawPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(t,i)}if(o&&o.getText()){let l=e;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function wet(e,t,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=Ot.LOADED)return;let l=e;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const f=e.getBuilder(n.getZIndex(),"Image");f.setImageStyle(s,a),f.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(t,i)}if(o&&o.getText()){let l=e;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function bet(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}class xet extends bb{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=mi(),this.wrappedRenderedExtent_=mi(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,n,i){const r=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),f=this.getLayer().getSource(),h=n.pixelRatio,d=n.viewHints,g=!(d[Le.ANIMATING]||d[Le.INTERACTING]),m=this.compositionContext_,_=Math.round(n.size[0]*h),p=Math.round(n.size[1]*h),y=f.getWrapX()&&l.canWrapX(),w=y?ie(u):null,v=y?Math.ceil((r[2]-u[2])/w)+1:1;let x=y?Math.floor((r[0]-u[0])/w):0;do{const b=this.getRenderTransform(o,a,c,h,_,p,x*w);t.execute(m,1,b,c,g,void 0,i)}while(++x<v)}setupCompositionContext_(){if(this.opacity_!==1){const t=bn(this.context.canvas.width,this.context.canvas.height,vC);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,S0(this.compositionContext_),vC.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,n){const i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];cJ(this.pixelTransform,1/i,1/i),v0(this.inversePixelTransform,this.pixelTransform);const s=Hw(this.pixelTransform);this.useContainer(n,s,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let u=l&&!l.isEmpty()||c&&!c.isEmpty();if(!u&&!(this.getLayer().hasListener(fr.PRERENDER)||this.getLayer().hasListener(fr.POSTRENDER)))return null;const f=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);a.width!=f||a.height!=h?(a.width=f,a.height=h,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,f,h),this.preRender(o,t);const d=t.viewState;d.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let g=!1;if(u&&r.extent&&this.clipping){const m=Ur(r.extent);u=pn(m,t.extent),g=u&&!Gs(m,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,m)}return u&&this.renderWorlds(l,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(n=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Me(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],f=i[0]*er,h=i[1]*er;u.push(this.getRenderTransform(r,s,o,er,f,h,0).slice());const d=c.getSource(),g=a.getExtent();if(d.getWrapX()&&a.canWrapX()&&!Gs(g,l)){let m=l[0];const _=ie(g);let p=0,y;for(;m<g[0];)--p,y=_*p,u.push(this.getRenderTransform(r,s,o,er,f,h,y).slice()),m+=_;for(p=0,m=l[2];m>g[2];)++p,y=_*p,u.push(this.getRenderTransform(r,s,o,er,f,h,y).slice()),m-=_}this.hitDetectionImageData_=aet(i,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}n(cet(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,n,i,r,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(d,g,m){const _=qt(d),p=c[_];if(p){if(p!==!0&&m<p.distanceSq){if(m===0)return c[_]=!0,s.splice(s.lastIndexOf(p),1),r(d,l,g);p.geometry=g,p.distanceSq=m}}else{if(m===0)return c[_]=!0,r(d,l,g);s.push(c[_]={feature:d,layer:l,geometry:g,distanceSq:m,callback:r})}};let f;const h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some(d=>f=d.forEachFeatureAtCoordinate(t,o,a,i,u,d===this.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(g=>g.value):null)),f}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const r=t.viewHints[Le.ANIMATING],s=t.viewHints[Le.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,u=c.projection,f=c.resolution,h=t.pixelRatio,d=n.getRevision(),g=n.getRenderBuffer();let m=n.getRenderOrder();m===void 0&&(m=fet);const _=c.center.slice(),p=Yw(l,g*f),y=p.slice(),w=[p.slice()],v=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!Gs(v,t.extent)){const I=ie(v),F=Math.max(ie(p)/2,I);p[0]=v[0]-F,p[2]=v[2]+F,PO(_,u);const P=kO(w[0],u);P[0]<v[0]&&P[2]<v[2]?w.push([P[0]+I,P[1],P[2]+I,P[3]]):P[0]>v[0]&&P[2]>v[2]&&w.push([P[0]-I,P[1],P[2]-I,P[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==d&&this.renderedRenderOrder_==m&&Gs(this.wrappedRenderedExtent_,p))return go(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new _C(i1(f,h),p,f,h);let b;this.getLayer().getDeclutter()&&(b=new _C(i1(f,h),p,f,h));let E;for(let I=0,F=w.length;I<F;++I)i.loadFeatures(w[I],f,u);const T=het(f,h);let M=!0;const C=I=>{let F;const P=I.getStyleFunction()||n.getStyleFunction();if(P&&(F=P(I,f)),F){const G=this.renderFeature(I,T,F,x,E,b);M=M&&!G}},R=zO(p),A=i.getFeaturesInExtent(R);m&&A.sort(m);for(let I=0,F=A.length;I<F;++I)C(A[I]);this.renderedFeatures_=A,this.ready=M;const k=x.finish(),O=new xC(p,f,h,i.getOverlaps(),k,n.getRenderBuffer());return b&&(this.declutterExecutorGroup=new xC(p,f,h,i.getOverlaps(),b.finish(),n.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=d,this.renderedRenderOrder_=m,this.renderedExtent_=y,this.wrappedRenderedExtent_=p,this.renderedCenter_=_,this.renderedProjection_=u,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,n,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=EC(r,t,i[l],n,this.boundHandleStyleImageChange_,s,o)||a;else a=EC(r,t,i,n,this.boundHandleStyleImageChange_,s,o);return a}}const Eet=xet;class Tet{constructor(t){this.rbush_=new yb(t),this.items_={}}insert(t,n){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.rbush_.insert(i),this.items_[qt(n)]=i}load(t,n){const i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const o=t[r],a=n[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[qt(a)]=l}this.rbush_.load(i)}remove(t){const n=qt(t),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(t,n){const i=this.items_[qt(n)],r=[i.minX,i.minY,i.maxX,i.maxY];Qu(r,t)||(this.remove(n),this.insert(t,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(t){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(n).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,n){return this.forEach_(this.getInExtent(t),n)}forEach_(t,n){let i;for(let r=0,s=t.length;r<s;r++)if(i=n(t[r]),i)return i;return i}isEmpty(){return jl(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const n=this.rbush_.toJSON();return io(n.minX,n.minY,n.maxX,n.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const n in t.items_)this.items_[n]=t.items_[n]}}const TC=Tet;class Cet extends Ui{constructor(t){super(),this.projection=Fe(t.projection),this.attributions_=CC(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,r){n.viewResolver=i,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=CC(t),this.changed()}setState(t){this.state_=t,this.changed()}}function CC(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}const Tk=Cet,xi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Met(e,t){return[[-1/0,-1/0,1/0,1/0]]}let Ret=!1;function Aet(e,t,n,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof e=="function"?e(n,i,r):e,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Ret,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?s(t.readFeatures(u,{extent:n,featureProjection:r}),t.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function SC(e,t){return function(n,i,r,s,o){const a=this;Aet(e,t,n,i,r,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||Xl)}}class Cs extends gs{constructor(t,n,i){super(t),this.feature=n,this.features=i}}class Iet extends Tk{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Xl,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Gt(this.format_,"`format` must be set when `url` is set"),this.loader_=SC(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Met;const n=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=n?new TC:null,this.loadedExtentsRtree_=new TC,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),!n&&i===void 0&&(i=new sr(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const n=qt(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);const i=t.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new Cs(xi.ADDFEATURE,t))}setupChangeEvents_(t,n){this.featureChangeKeys_[t]=[$t(n,St.CHANGE,this.handleFeatureChange_,this),$t(n,Vl.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,n){let i=!0;const r=n.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=n),i&&(Gt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=n),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const n=[],i=[],r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=qt(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=qt(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,r),this.hasListener(xi.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new Cs(xi.ADDFEATURE,i[s]))}bindFeaturesCollection_(t){let n=!1;this.addEventListener(xi.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(xi.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(Rn.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),t.addEventListener(Rn.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(se);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new Cs(xi.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,n){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(t))return n(r)})}forEachFeatureInExtent(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(t,n){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const s=n(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),jl(this.nullGeometryFeatures_)||Kr(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n}getFeaturesInExtent(t,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=yJ(t,n);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,n){const i=t[0],r=t[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||Ju,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),f=a;if(a=u.closestPointXY(i,r,o,a),a<f){s=c;const h=Math.sqrt(a);l[0]=i-h,l[1]=r-h,l[2]=i+h,l[3]=r+h}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const n=this.idIndex_[t.toString()];return n!==void 0?n:null}getFeatureByUid(t){const n=this.uidIndex_[t];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const n=t.target,i=qt(n),r=n.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new Cs(xi.CHANGEFEATURE,n))}hasFeature(t){const n=t.getId();return n!==void 0?n in this.idIndex_:qt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&jl(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,n,i){const r=this.loadedExtentsRtree_,s=this.strategy_(t,n,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return Gs(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Cs(xi.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new Cs(xi.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Cs(xi.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const n=this.loadedExtentsRtree_;let i;n.forEachInExtent(t,function(r){if(Qu(r.extent,t))return i=r,!0}),i&&n.remove(i)}removeFeature(t){if(!t)return;const n=qt(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const n=qt(t),i=this.featureChangeKeys_[n];if(!i)return;i.forEach(se),delete this.featureChangeKeys_[n];const r=t.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[n],this.dispatchEvent(new Cs(xi.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let n=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],n=!0;break}return n}setLoader(t){this.loader_=t}setUrl(t){Gt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(SC(t,this.format_))}}const Let=Iet;class Oet extends ntt{constructor(t,n,i,r,s){const o=s!==void 0?Ot.IDLE:Ot.LOADED;super(t,n,i,o),this.loader_=s!==void 0?s:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=Ot.ERROR):this.state=Ot.LOADED,this.changed()}load(){this.state==Ot.IDLE&&(this.state=Ot.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const ket=Oet,dt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Fet extends Uf{constructor(t,n,i){super(),i=i||{},this.tileCoord=t,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(St.CHANGE)}release(){this.state===dt.ERROR&&this.setState(dt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==dt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,n=this;do{if(t.getState()==dt.LOADED){t.interimTile=null;break}else t.getState()==dt.LOADING?n=t:t.getState()==dt.IDLE?n.interimTile=t.interimTile:n=t;t=n.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==dt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){Et()}getAlpha(t,n){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;const r=n-i+1e3/60;return r>=this.transition_?1:ck(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const Ck=Fet;class Pet extends Ck{constructor(t,n,i,r,s,o){super(t,n,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=dt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=dt.ERROR,this.unlistenImage_(),this.image_=Net(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=dt.LOADED:this.state=dt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==dt.ERROR&&(this.state=dt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==dt.IDLE&&(this.state=dt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=QQ(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Net(){const e=bn(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}const Sk=Pet;class Det{constructor(t,n,i){this.decay_=t,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,n){this.points_.push(t,n,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<t)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const r=this.points_[n+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const $et=Det;class zet extends zw{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,n){Et()}calculateMatrices2D(t){const n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Bi(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),v0(r,i)}forEachFeatureAtCoordinate(t,n,i,r,s,o,a,l){let c;const u=n.viewState;function f(v,x,b,E){return s.call(o,x,v?b:null,E)}const h=u.projection,d=PO(t.slice(),h),g=[[0,0]];if(h.canWrapX()&&r){const v=h.getExtent(),x=ie(v);g.push([-x,0],[x,0])}const m=n.layerStatesArray,_=m.length,p=[],y=[];for(let v=0;v<g.length;v++)for(let x=_-1;x>=0;--x){const b=m[x],E=b.layer;if(E.hasRenderer()&&pb(b,u)&&a.call(l,E)){const T=E.getRenderer(),M=E.getSource();if(T&&M){const C=M.getWrapX()?d:t,R=f.bind(null,b.managed);y[0]=C[0]+g[v][0],y[1]=C[1]+g[v][1],c=T.forEachFeatureAtCoordinate(y,n,i,R,p)}if(c)return c}}if(p.length===0)return;const w=1/p.length;return p.forEach((v,x)=>v.distanceSq+=x*w),p.sort((v,x)=>v.distanceSq-x.distanceSq),p.some(v=>c=v.callback(v.feature,v.layer,v.geometry)),c}hasFeatureAtCoordinate(t,n,i,r,s,o){return this.forEachFeatureAtCoordinate(t,n,i,r,Ju,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(t){Et()}flushDeclutterItems(t){}scheduleExpireIconCache(t){Hg.canExpireCache()&&t.postRenderFunctions.push(Wet)}}function Wet(e,t){Hg.expire()}const Get=zet;class Bet extends Get{constructor(t){super(t),this.fontChangeListenerKey_=$t(Pr,Vl.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=Ra+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,n){const i=this.getMap();if(i.hasListener(t)){const r=new bk(t,void 0,n);i.dispatchEvent(r)}}disposeInternal(){se(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(fr.PRECOMPOSE,t);const n=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;const r=this.declutterLayers_;r.length=0;let s=null;for(let o=0,a=n.length;o<a;++o){const l=n[o];t.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!pb(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const f=c.render(t,s);f&&(f!==s&&(this.children_.push(f),s=f),"getDeclutter"in c&&r.push(c))}this.flushDeclutterItems(t),_Q(this.element_,this.children_),this.dispatchRenderEvent(fr.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const n=this.declutterLayers_;for(let i=n.length-1;i>=0;--i)n[i].renderDeclutter(t);n.length=0}}const Het=Bet;class Fs extends gs{constructor(t,n){super(t),this.layer=n}}const ny={LAYERS:"layers"};class xb extends lk{constructor(t){t=t||{};const n=Object.assign({},t);delete n.layers;let i=t.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(ny.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new sr(i.slice(),{unique:!0}):Gt(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new sr(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(se),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push($t(t,Rn.ADD,this.handleLayersAdd_,this),$t(t,Rn.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(se);Yf(this.listenerKeys_);const n=t.getArray();for(let i=0,r=n.length;i<r;i++){const s=n[i];this.registerLayerListeners_(s),this.dispatchEvent(new Fs("addlayer",s))}this.changed()}registerLayerListeners_(t){const n=[$t(t,Vl.PROPERTYCHANGE,this.handleLayerChange_,this),$t(t,St.CHANGE,this.handleLayerChange_,this)];t instanceof xb&&n.push($t(t,"addlayer",this.handleLayerGroupAdd_,this),$t(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[qt(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new Fs("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Fs("removelayer",t.layer))}handleLayersAdd_(t){const n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new Fs("addlayer",n)),this.changed()}handleLayersRemove_(t){const n=t.element,i=qt(n);this.listenerKeys_[i].forEach(se),delete this.listenerKeys_[i],this.dispatchEvent(new Fs("removelayer",n)),this.changed()}getLayers(){return this.get(ny.LAYERS)}setLayers(t){const n=this.getLayers();if(n){const i=n.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new Fs("removelayer",i[r]))}this.set(ny.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(n){n.getLayersArray(t)}),t}getLayerStatesArray(t){const n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const r=this.getLayerState();let s=r.zIndex;!t&&r.zIndex===void 0&&(s=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=vl(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}}const L0=xb;class Yet extends gs{constructor(t,n,i){super(t),this.map=n,this.frameState=i!==void 0?i:null}}const Ja=Yet;class Uet extends Ja{constructor(t,n,i,r,s,o){super(t,n,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Rs=Uet,Ee={SINGLECLICK:"singleclick",CLICK:St.CLICK,DBLCLICK:St.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},r1={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Vet extends Uf{constructor(t,n){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=$t(i,r1.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=$t(i,r1.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(St.TOUCHMOVE,this.boundHandleTouchMove_,MO?{passive:!1}:!1)}emulateClick_(t){let n=new Rs(Ee.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Rs(Ee.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Rs(Ee.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const n=t,i=n.pointerId;if(n.type==Ee.POINTERUP||n.type==Ee.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==Ee.POINTERDOWN||n.type==Ee.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const n=new Rs(Ee.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(se),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const n=new Rs(Ee.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push($t(i,Ee.POINTERMOVE,this.handlePointerMove_,this),$t(i,Ee.POINTERUP,this.handlePointerUp_,this),$t(this.element_,Ee.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push($t(this.element_.getRootNode(),Ee.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const n=new Rs(Ee.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Rs(Ee.POINTERMOVE,this.map_,t,n))}handleTouchMove_(t){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(se(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(St.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(se(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(se),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Xet=Vet,Dr={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ge={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},jg=1/0;class jet{constructor(t,n){this.priorityFunction_=t,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Yf(this.queuedElements_)}dequeue(){const t=this.elements_,n=this.priorities_,i=t[0];t.length==1?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(t){Gt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(t);return n!=jg?(this.elements_.push(t),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const n=this.elements_,i=this.priorities_,r=n.length,s=n[t],o=i[t],a=t;for(;t<r>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),u=c<r&&i[c]<i[l]?c:l;n[t]=n[u],i[t]=i[u],t=u}n[t]=s,i[t]=o,this.siftDown_(a,t)}siftDown_(t,n){const i=this.elements_,r=this.priorities_,s=i[n],o=r[n];for(;n>t;){const a=this.getParentIndex_(n);if(r[a]>o)i[n]=i[a],r[n]=r[a],n=a;else break}i[n]=s,r[n]=o}reprioritize(){const t=this.priorityFunction_,n=this.elements_,i=this.priorities_;let r=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=t(o),l==jg?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,n[r++]=o);n.length=r,i.length=r,this.heapify_()}}const qet=jet;class Zet extends qet{constructor(t,n){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const n=super.enqueue(t);return n&&t[0].addEventListener(St.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const n=t.target,i=n.getState();if(i===dt.LOADED||i===dt.ERROR||i===dt.EMPTY){i!==dt.ERROR&&n.removeEventListener(St.CHANGE,this.boundHandleTileChange_);const r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,n){let i=0,r,s,o;for(;this.tilesLoading_<t&&i<n&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===dt.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}const Ket=Zet;function Jet(e,t,n,i,r){if(!e||!(n in e.wantedTiles)||!e.wantedTiles[n][t.getKey()])return jg;const s=e.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class Qet extends Ui{constructor(t){super();const n=t.element;n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Wg(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Wg(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)se(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Xl&&this.listenerKeys.push($t(t,Dr.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Tc=Qet;class tnt extends Tc{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:n+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"›",o=t.collapseClassName!==void 0?t.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(St.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+Ra+" "+qf+(this.collapsed_&&this.collapsible_?" "+nC:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(t)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!go(n,this.renderedAttributions_)){nk(this.ulElement_);for(let r=0,s=n.length;r<s;++r){const o=document.createElement("li");o.innerHTML=n[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(nC),this.collapsed_?zg(this.collapseLabel_,this.label_):zg(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const ent=tnt;class nnt extends Tc{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const n=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"⇧",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(St.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+Ra+" "+qf,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(jh)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:xc}):n.setRotation(0))}render(t){const n=t.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(jh);!s&&i===0?this.element.classList.add(jh):s&&i!==0&&this.element.classList.remove(jh)}this.label_.style.transform=r}this.rotation_=i}}const int=nnt;class rnt extends Tc{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const n=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:n+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:n+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(St.CLICK,this.handleClick_.bind(this,i),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=c,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(St.CLICK,this.handleClick_.bind(this,-i),!1);const h=n+" "+Ra+" "+qf,d=this.element;d.className=h,d.appendChild(u),d.appendChild(f),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,n){n.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:xc})):i.setZoom(s)}}}const snt=rnt;function Mk(e){e=e||{};const t=new sr;return(e.zoom!==void 0?e.zoom:!0)&&t.push(new snt(e.zoomOptions)),(e.rotate!==void 0?e.rotate:!0)&&t.push(new int(e.rotateOptions)),(e.attribution!==void 0?e.attribution:!0)&&t.push(new ent(e.attributionOptions)),t}const MC={ACTIVE:"active"};class ont extends Ui{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(MC.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(MC.ACTIVE,t)}setMap(t){this.map_=t}}function ant(e,t,n){const i=e.getCenterInternal();if(i){const r=[i[0]+t[0],i[1]+t[1]];e.animateInternal({duration:n!==void 0?n:250,easing:$Q,center:e.getConstrainedCenter(r)})}}function Eb(e,t,n,i){const r=e.getZoom();if(r===void 0)return;const s=e.getConstrainedZoom(r+t),o=e.getResolutionForZoom(s);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:xc})}const th=ont;class lnt extends th{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let n=!1;if(t.type==Ee.DBLCLICK){const i=t.originalEvent,r=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();Eb(a,o,s,this.duration_),i.preventDefault(),n=!0}return!n}}const cnt=lnt;class unt extends th{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Ee.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Ee.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Ee.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,n=this.stopDown(i)}else t.type==Ee.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Tb(e){const t=e.length;let n=0,i=0;for(let r=0;r<t;r++)n+=e[r].clientX,i+=e[r].clientY;return{clientX:n/t,clientY:i/t}}const eh=unt;function s1(e){const t=arguments;return function(n){let i=!0;for(let r=0,s=t.length;r<s&&(i=i&&t[r](n),!!i);++r);return i}}const fnt=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},hnt=function(e){const t=e.map.getTargetElement(),n=e.map.getOwnerDocument().activeElement;return t.contains(n)},Rk=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?hnt(e):!0},dnt=Ju,Ak=function(e){const t=e.originalEvent;return t.button==0&&!(oJ&&TO&&t.ctrlKey)},Ik=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},gnt=function(e){const t=e.originalEvent;return TO?t.metaKey:t.ctrlKey},mnt=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Lk=function(e){const t=e.originalEvent,n=t.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!t.target.isContentEditable},iy=function(e){const t=e.originalEvent;return Gt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},pnt=function(e){const t=e.originalEvent;return Gt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class ynt extends eh{constructor(t){super({stopDown:y0}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=t.condition?t.condition:s1(Ik,pnt);this.condition_=t.onFocusOnly?s1(Rk,n):n,this.noKinetic_=!1}handleDragEvent(t){const n=t.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,r=n.getEventPixel(Tb(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=t.map.getView();LJ(s,a.getResolution()),Vw(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:xc})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const _nt=ynt;class vnt extends eh{constructor(t){t=t||{},super({stopDown:y0}),this.condition_=t.condition?t.condition:fnt,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!iy(t))return;const n=t.map,i=n.getView();if(i.getConstraints().rotation===mb)return;const r=n.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return iy(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return iy(t)&&Ak(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const wnt=vnt;class bnt extends zw{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,n=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,n=this.endPixel_,r=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new ro([r])}getGeometry(){return this.geometry_}}const xnt=bnt,Qh={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class ry extends gs{constructor(t,n,i){super(t),this.coordinate=n,this.mapBrowserEvent=i}}class Ent extends eh{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new xnt(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Ak,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,n,i){const r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new ry(Qh.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new ry(n?Qh.BOXEND:Qh.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ry(Qh.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const Tnt=Ent;class Cnt extends Tnt{constructor(t){t=t||{};const n=t.condition?t.condition:mnt;super({condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:xc})}}const Snt=Cnt,Co={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Mnt extends th{constructor(t){super(),t=t||{},this.defaultCondition_=function(n){return Ik(n)&&Lk(n)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let n=!1;if(t.type==St.KEYDOWN){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==Co.DOWN||r==Co.LEFT||r==Co.RIGHT||r==Co.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==Co.DOWN?c=-a:r==Co.LEFT?l=-a:r==Co.RIGHT?l=a:c=a;const u=[l,c];Vw(u,o.getRotation()),ant(o,u,this.duration_),i.preventDefault(),n=!0}}return!n}}const Rnt=Mnt;class Ant extends th{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(n){return!gnt(n)&&Lk(n)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let n=!1;if(t.type==St.KEYDOWN||t.type==St.KEYPRESS){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==="+"||r==="-")){const s=t.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();Eb(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}const Int=Ant;class Lnt extends th{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const n=t.condition?t.condition:dnt;this.condition_=t.onFocusOnly?s1(Rk,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==St.WHEEL)return!0;const i=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==St.WHEEL&&(s=r.deltaY,rJ&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=CO),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const n=t.getView();n.getAnimating()&&n.cancelAnimations();let i=-Oe(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Eb(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const Ont=Lnt;class knt extends eh{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=y0),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let n=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=t.map,a=o.getView();a.getConstraints().rotation!==mb&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Tb(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const Fnt=knt;class Pnt extends eh{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=y0),super(n),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let n=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Tb(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const Nnt=Pnt;function Dnt(e){e=e||{};const t=new sr,n=new $et(-.005,.05,100);return(e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0)&&t.push(new wnt),(e.doubleClickZoom!==void 0?e.doubleClickZoom:!0)&&t.push(new cnt({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan!==void 0?e.dragPan:!0)&&t.push(new _nt({onFocusOnly:e.onFocusOnly,kinetic:n})),(e.pinchRotate!==void 0?e.pinchRotate:!0)&&t.push(new Fnt),(e.pinchZoom!==void 0?e.pinchZoom:!0)&&t.push(new Nnt({duration:e.zoomDuration})),(e.keyboard!==void 0?e.keyboard:!0)&&(t.push(new Rnt),t.push(new Int({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0)&&t.push(new Ont({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom!==void 0?e.shiftDragZoom:!0)&&t.push(new Snt({duration:e.zoomDuration})),t}function Ok(e){if(e instanceof R0){e.setMapInternal(null);return}e instanceof L0&&e.getLayers().forEach(Ok)}function kk(e,t){if(e instanceof R0){e.setMapInternal(t);return}if(e instanceof L0){const n=e.getLayers().getArray();for(let i=0,r=n.length;i<r;++i)kk(n[i],t)}}let $nt=class extends Ui{constructor(t){super(),t=t||{},this.on,this.once,this.un;const n=znt(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:CO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Fi(),this.pixelToCoordinateTransform_=Fi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||Mk(),this.interactions=n.interactions||Dnt({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Ket(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ge.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ge.VIEW,this.handleViewChanged_),this.addChangeListener(Ge.SIZE,this.handleSizeChanged_),this.addChangeListener(Ge.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;t.view&&!(t.view instanceof tr)&&t.view.then(function(r){i.setView(new tr(r))}),this.controls.addEventListener(Rn.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Rn.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Rn.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Rn.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Rn.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Rn.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){kk(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,n,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:Ju,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(t,n){const i=[];return this.forEachFeatureAtPixel(t,function(r){i.push(r)},n),i}getAllLayers(){const t=[];function n(i){i.forEach(function(r){r instanceof L0?n(r.getLayers()):t.push(r)})}return n(this.getLayers()),t}hasFeatureAtPixel(t,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.layerFilter!==void 0?n.layerFilter:Ju,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(Ge.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return q_(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const n=this.frameState_;return n?Me(n.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ge.LAYERGROUP)}setLayers(t){const n=this.getLayerGroup();if(t instanceof sr){n.setLayers(t);return}const i=n.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const r=t[n];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const n=Fr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(t){const n=this.frameState_;return n?Me(n.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ge.SIZE)}getView(){return this.get(Ge.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,n,i,r){return Jet(this.frameState_,t,n,i,r)}handleBrowserEvent(t,n){n=n||t.type;const i=new Rs(n,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const n=t.originalEvent,i=n.type;if(i===r1.POINTERDOWN||i===St.WHEEL||i===St.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=n.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,s=r;if(t){const o=t.viewHints;if(o[Le.ANIMATING]||o[Le.INTERACTING]){const a=Date.now()-t.time>8;r=a?0:8,s=a?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(fr.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(fr.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Ja(Dr.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Ja(Dr.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)se(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(St.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(St.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Wg(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),n=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Het(this)),this.mapBrowserEventHandler_=new Xet(this,this.moveTolerance_);for(const s in Ee)this.mapBrowserEventHandler_.addEventListener(Ee[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(St.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(St.WHEEL,this.boundHandleBrowserEvent_,MO?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[$t(i,St.KEYDOWN,this.handleBrowserEvent,this),$t(i,St.KEYPRESS,this.handleBrowserEvent,this)];const r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(se(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(se(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=$t(t,Vl.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=$t(t,St.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(se),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Fs("addlayer",t)),this.layerGroupPropertyListenerKeys_=[$t(t,Vl.PROPERTYCHANGE,this.render,this),$t(t,St.CHANGE,this.render,this),$t(t,"addlayer",this.handleLayerAdd_,this),$t(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Ok(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const n=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(n!==void 0&&QT(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:U_(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:qt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=U_(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Sa(this.previousExtent_)&&!Qu(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Ja(Dr.MOVESTART,this,r)),this.previousExtent_=Xf(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Le.ANIMATING]&&!s.viewHints[Le.INTERACTING]&&!Qu(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Ja(Dr.MOVEEND,this,s)),RO(s.extent,this.previousExtent_))),this.dispatchEvent(new Ja(Dr.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Dr.LOADSTART)||this.hasListener(Dr.LOADEND)||this.hasListener(fr.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new Fs("removelayer",n)),this.set(Ge.LAYERGROUP,t)}setSize(t){this.set(Ge.SIZE,t)}setTarget(t){this.set(Ge.TARGET,t)}setView(t){if(!t||t instanceof tr){this.set(Ge.VIEW,t);return}this.set(Ge.VIEW,new tr);const n=this;t.then(function(i){n.setView(new tr(i))})}updateSize(){const t=this.getTargetElement();let n;if(t){const r=getComputedStyle(t),s=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(n=[s,o],!QT(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&DO("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!go(n,i))&&(this.setSize(n),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let n;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}}};function znt(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const n={},i=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new L0({layers:e.layers});n[Ge.LAYERGROUP]=i,n[Ge.TARGET]=e.target,n[Ge.VIEW]=e.view instanceof tr?e.view:new tr;let r;e.controls!==void 0&&(Array.isArray(e.controls)?r=new sr(e.controls.slice()):(Gt(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=e.controls));let s;e.interactions!==void 0&&(Array.isArray(e.interactions)?s=new sr(e.interactions.slice()):(Gt(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=e.interactions));let o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new sr(e.overlays.slice()):(Gt(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=e.overlays):o=new sr,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:n}}const Wnt=$nt,Je={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Gnt extends Ui{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+vQ,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Je.ELEMENT,this.handleElementChanged),this.addChangeListener(Je.MAP,this.handleMapChanged),this.addChangeListener(Je.OFFSET,this.handleOffsetChanged),this.addChangeListener(Je.POSITION,this.handlePositionChanged),this.addChangeListener(Je.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(Je.ELEMENT)}getId(){return this.id}getMap(){return this.get(Je.MAP)||null}getOffset(){return this.get(Je.OFFSET)}getPosition(){return this.get(Je.POSITION)}getPositioning(){return this.get(Je.POSITIONING)}handleElementChanged(){nk(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(Wg(this.element),se(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=$t(t,Dr.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(Je.ELEMENT,t)}setMap(t){this.set(Je.MAP,t)}setOffset(t){this.set(Je.OFFSET,t)}setPosition(t){this.set(Je.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(Je.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),s=this.getRect(r,[pQ(r),yQ(r)]);t=t||{};const o=t.margin===void 0?20:t.margin;if(!Gs(i,s)){const a=s[0]-i[0],l=i[2]-s[2],c=s[1]-i[1],u=i[3]-s[3],f=[0,0];if(a<0?f[0]=a-o:l<0&&(f[0]=Math.abs(l)+o),c<0?f[1]=c-o:u<0&&(f[1]=Math.abs(u)+o),f[0]!==0||f[1]!==0){const h=n.getView().getCenterInternal(),d=n.getPixelFromCoordinateInternal(h);if(!d)return;const g=[d[0]+f[0],d[1]+f[1]],m=t.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(g),duration:m.duration,easing:m.easing})}}}getRect(t,n){const i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+n[0],s+n[1]]}setPositioning(t){this.set(Je.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),n=this.getPosition();if(!t||!t.isRendered()||!n){this.setVisible(!1);return}const i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(t,n){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(t[0]+r[0])+"px",a=Math.round(t[1]+r[1])+"px";let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}}const RC=Gnt;class Bnt{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let n=this.oldest_;for(;n;)t(n.value_,n.key_,this),n=n.newer}get(t,n){const i=this.entries_[t];return Gt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const n=this.entries_[t];return Gt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.key_;return t}getValues(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,n){this.get(t),this.entries_[t].value_=n}set(t,n){Gt(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const Hnt=Bnt;function AC(e,t,n,i){return i!==void 0?(i[0]=e,i[1]=t,i[2]=n,i):[e,t,n]}function O0(e,t,n){return e+"/"+t+"/"+n}function Fk(e){return O0(e[0],e[1],e[2])}function Ynt(e){return e.split("/").map(Number)}function Unt(e){return(e[1]<<e[0])+e[2]}function Vnt(e,t){const n=e[0],i=e[1],r=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;const s=t.getFullTileRange(n);return s?s.containsXY(i,r):!0}class Xnt extends Hnt{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),i=Ynt(t)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(Fk(r.tileCoord)),r.release())})}}const Pk=Xnt;class Nk{constructor(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Va(e,t,n,i,r){return r!==void 0?(r.minX=e,r.maxX=t,r.minY=n,r.maxY=i,r):new Nk(e,t,n,i)}const Dk=Nk,IC=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],LC={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class jnt extends Tc{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=t.keys!==void 0?t.keys:!1,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=t.className!==void 0?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=t.activeClassName!==void 0?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=t.inactiveClassName!==void 0?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const n=t.label!==void 0?t.label:"⤢";this.labelNode_=typeof n=="string"?document.createTextNode(n):n;const i=t.labelActive!==void 0?t.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const r=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(St.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Ra} ${qf}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const n=t.getOwnerDocument();if(OC(n))if(kC(n))Znt(n);else{let i;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?qnt(i):$k(i)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const n=this.isInFullscreen_;this.isInFullscreen_=kC(t.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(zg(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(LC.ENTERFULLSCREEN)):(zg(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(LC.LEAVEFULLSCREEN)),t.updateSize())}setClassName_(t,n){n?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const n=this.getMap();n&&n.removeChangeListener(Ge.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener(Ge.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let i=0,r=t.length;i<r;++i)se(t[i]);t.length=0;const n=this.getMap();if(n){const i=n.getOwnerDocument();OC(i)?this.element.classList.remove(eC):this.element.classList.add(eC);for(let r=0,s=IC.length;r<s;++r)t.push($t(i,IC[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function OC(e){const t=e.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&e.fullscreenEnabled)}function kC(e){return!!(e.webkitIsFullScreen||e.fullscreenElement)}function $k(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function qnt(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():$k(e)}function Znt(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}const Knt=jnt,sy="units",Jnt=[1,2,5],Vc=25.4/.28;class Qnt extends Tc{constructor(t){t=t||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:t.render,target:t.target}),this.on,this.once,this.un;const i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+Ra,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(sy,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(sy)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(sy,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=t.center,i=t.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=kg(i,t.resolution,n,s);const a=this.minWidth_*(this.dpi_||Vc)/Vc,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Vc)/Vc:void 0;let c=a*o,u="";if(r=="degrees"){const w=ql.degrees;c*=w,c<w/60?(u="″",o*=3600):c<w?(u="′",o*=60):u="°"}else if(r=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(r=="nautical")o/=1852,u="NM";else if(r=="metric")c<.001?(u="μm",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(r=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let f=3*Math.floor(Math.log(a*o)/Math.log(10)),h,d,g,m,_,p;for(;;){g=Math.floor(f/3);const w=Math.pow(10,g);if(h=Jnt[(f%3+3)%3]*w,d=Math.round(h/o),isNaN(d)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&d>=l){h=m,d=_,g=p;break}else if(d>=a)break;m=h,_=d,p=g,++f}const y=this.scaleBar_?this.createScaleBar(d,h,u):h.toFixed(g<0?-g:0)+" "+u;this.renderedHTML_!=y&&(this.innerElement_.innerHTML=y,this.renderedHTML_=y),this.renderedWidth_!=d&&(this.innerElement_.style.width=d+"px",this.renderedWidth_=d),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,n,i){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=t/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const f=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${f}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,t,!1,n,i):"")+"</div>")}return l.push(this.createStepText(o,t,!0,n,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+s+"</div>":"")+l.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,n,i,r,s){const a=(t===0?0:Math.round(r/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+s),l=t===0?-3:n/this.scaleBarSteps_*-1,c=t===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${t===0?"left":"center"};min-width: ${c}px;left: ${i?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const t=kg(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||Vc,i=1e3/25.4;return t*i*n}render(t){const n=t.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const tit=Qnt;class eit extends Tc{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const n=t.className!==void 0?t.className:"ol-zoom-extent",i=t.label!==void 0?t.label:"E",r=t.tipLabel!==void 0?t.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=r,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener(St.CLICK,this.handleClick_.bind(this),!1);const o=n+" "+Ra+" "+qf,a=this.element;a.className=o,a.appendChild(s)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const n=this.getMap().getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(J_(i))}}const oy=eit;class qg extends GO{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(se),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,n=this.geometries_.length;t<n;++t)this.changeEventsKeys_.push($t(this.geometries_[t],St.CHANGE,this.changed,this))}clone(){const t=new qg(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,n,i,r){if(r<Ta(this.getExtent(),t,n))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(t,n,i,r);return r}containsXY(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(t,n))return!0;return!1}computeExtent(t){Xf(t);const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)IO(t,n[i].getExtent());return t}getGeometries(){return FC(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(t);n.push(l),l!==a&&(r=!0)}if(r){const s=new qg(null);return s.setGeometriesArray(n),s}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(t,n);this.changed()}scale(t,n,i){i||(i=ya(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(t,n,i);this.changed()}setGeometries(t){this.setGeometriesArray(FC(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()}translate(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(t,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function FC(e){const t=[];for(let n=0,i=e.length;n<i;++n)t.push(e[n].clone());return t}const nit=qg;class Zg extends Ma{constructor(t,n,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,n);else if(n!==void 0&&i)this.setFlatCoordinates(n,t),this.ends_=i;else{let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout()),Kr(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?Kr(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Zg(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<Ta(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Kw(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qw(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,r))}getCoordinateAtM(t,n,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,i=i!==void 0?i:!1,cQ(this.flatCoordinates,0,this.ends_,this.stride,t,n,i))}getCoordinates(){return tf(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Dg(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,n=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new Dg(t.slice(s,l),i);r.push(c),s=l}return r}getFlatMidpoints(){const t=[],n=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=KO(n,i,l,s,.5);Kr(t,c),i=l}return t}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=JJ(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new Zg(n,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return sQ(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=tb(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const iit=Zg;class Cb extends Ma{constructor(t,n){super(),n&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendPoint(t){this.flatCoordinates?Kr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new Cb(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){if(r<Ta(this.getExtent(),t,n))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=ea(t,n,s[a],s[a+1]);if(c<r){r=c;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return Bs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new Zl(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,n=this.layout,i=this.stride,r=[];for(let s=0,o=t.length;s<o;s+=i){const a=new Zl(t.slice(s,s+i),n);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const n=this.flatCoordinates,i=this.stride;for(let r=0,s=n.length;r<s;r+=i){const o=n[r],a=n[r+1];if(Uw(t,o,a))return!0}return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=T0(this.flatCoordinates,0,t,this.stride),this.changed()}}const zk=Cb;function rit(e,t,n,i){const r=[];let s=mi();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=AO(e,t,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return r}class Kg extends Ma{constructor(t,n,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout());const f=o.length,h=u.getEnds();for(let d=0,g=h.length;d<g;++d)h[d]+=f;Kr(o,u.getFlatCoordinates()),a.push(h)}n=r,t=o,i=a}n!==void 0&&i?(this.setFlatCoordinates(n,t),this.endss_=i):this.setCoordinates(t,n)}appendPolygon(t){let n;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Kr(this.flatCoordinates,t.getFlatCoordinates()),n=t.getEnds().slice();for(let r=0,s=n.length;r<s;++r)n[r]+=i}this.endss_.push(n),this.changed()}clone(){const t=this.endss_.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=this.endss_[r].slice();const i=new Kg(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}closestPointXY(t,n,i,r){return r<Ta(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(jJ(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),qJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,i,r))}containsXY(t,n){return iQ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)}getArea(){return eQ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),JT(n,0,this.endss_,this.stride,t)):n=this.flatCoordinates,Z_(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=rit(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=rQ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new zk(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;lQ(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=JT(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=tQ(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new Kg(n,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let n;if(t===0)n=0;else{const s=this.endss_[t-1];n=s[s.length-1]}const i=this.endss_[t].slice(),r=i[i.length-1];if(n!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=n;return new ro(this.flatCoordinates.slice(n,r),this.layout,i)}getPolygons(){const t=this.layout,n=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(s!==0)for(let f=0,h=l.length;f<h;++f)l[f]-=s;const u=new ro(n.slice(s,c),t,l);r.push(u),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return oQ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=KJ(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const sit=Kg,td={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class oit extends R0{constructor(t){t=t||{};const n=Object.assign({},t);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(td.PRELOAD)}setPreload(t){this.set(td.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(td.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(td.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const ait=oit,lit=.5,cit=10,PC=.25;class uit{constructor(t,n,i,r,s,o){this.sourceProj_=t,this.targetProj_=n;let a={};const l=Fg(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){const w=y[0]+"/"+y[1];return a[w]||(a[w]=l(y)),a[w]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ie(r)>=ie(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ie(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ie(this.targetProj_.getExtent()):null;const c=Ca(i),u=x0(i),f=b0(i),h=w0(i),d=this.transformInv_(c),g=this.transformInv_(u),m=this.transformInv_(f),_=this.transformInv_(h),p=cit+(o?Math.max(0,Math.ceil(Math.log2(Y_(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,f,h,d,g,m,_,p),this.wrapsXInSource_){let y=1/0;this.triangles_.forEach(function(w,v,x){y=Math.min(y,w.source[0][0],w.source[1][0],w.source[2][0])}),this.triangles_.forEach(w=>{if(Math.max(w.source[0][0],w.source[1][0],w.source[2][0])-y>this.sourceWorldWidth_/2){const v=[[w.source[0][0],w.source[0][1]],[w.source[1][0],w.source[1][1]],[w.source[2][0],w.source[2][1]]];v[0][0]-y>this.sourceWorldWidth_/2&&(v[0][0]-=this.sourceWorldWidth_),v[1][0]-y>this.sourceWorldWidth_/2&&(v[1][0]-=this.sourceWorldWidth_),v[2][0]-y>this.sourceWorldWidth_/2&&(v[2][0]-=this.sourceWorldWidth_);const x=Math.min(v[0][0],v[1][0],v[2][0]);Math.max(v[0][0],v[1][0],v[2][0])-x<this.sourceWorldWidth_/2&&(w.source=v)}})}a={}}addTriangle_(t,n,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,n,i]})}addQuad_(t,n,i,r,s,o,a,l,c){const u=WT([s,o,a,l]),f=this.sourceWorldWidth_?ie(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&f>.5&&f<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const _=WT([t,n,i,r]);g=ie(_)/this.targetWorldWidth_>PC||g}!d&&this.sourceProj_.isGlobal()&&f&&(g=f>PC||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!pn(u,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!g){const _=[(t[0]+i[0])/2,(t[1]+i[1])/2],p=this.transformInv_(_);let y;d?y=(na(s[0],h)+na(a[0],h))/2-na(p[0],h):y=(s[0]+a[0])/2-p[0];const w=(s[1]+a[1])/2-p[1];g=y*y+w*w>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const _=[(n[0]+i[0])/2,(n[1]+i[1])/2],p=this.transformInv_(_),y=[(r[0]+t[0])/2,(r[1]+t[1])/2],w=this.transformInv_(y);this.addQuad_(t,n,_,y,s,o,p,w,c-1),this.addQuad_(y,_,i,r,w,p,a,l,c-1)}else{const _=[(t[0]+n[0])/2,(t[1]+n[1])/2],p=this.transformInv_(_),y=[(i[0]+r[0])/2,(i[1]+r[1])/2],w=this.transformInv_(y);this.addQuad_(t,_,y,r,s,p,w,l,c-1),this.addQuad_(_,n,i,y,p,o,a,w,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(t,i,r,s,a,l),m&14||this.addTriangle_(t,i,n,s,a,o),m&&(m&13||this.addTriangle_(n,r,t,o,l,s),m&7||this.addTriangle_(n,r,i,o,l,a))}calculateSourceExtent(){const t=mi();return this.triangles_.forEach(function(n,i,r){const s=n.source;xu(t,s[0]),xu(t,s[1]),xu(t,s[2])}),t}getTriangles(){return this.triangles_}}const fit=uit;let ay;const bl=[];function NC(e,t,n,i,r){e.beginPath(),e.moveTo(0,0),e.lineTo(t,n),e.lineTo(i,r),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,i)+1,Math.max(n,r)),e.restore()}function ly(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function hit(){if(ay===void 0){const e=bn(6,6,bl);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",NC(e,4,5,4,0),NC(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;ay=ly(t,0)||ly(t,4)||ly(t,8),S0(e),bl.push(e.canvas)}return ay}function DC(e,t,n,i){const r=WJ(n,t,e);let s=kg(t,i,n);const o=t.getMetersPerUnit();o!==void 0&&(s*=o);const a=e.getMetersPerUnit();a!==void 0&&(s/=a);const l=e.getExtent();if(!l||Vf(l,r)){const c=kg(e,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function dit(e,t,n,i){const r=ya(n);let s=DC(e,t,r,i);return(!isFinite(s)||s<=0)&&OO(n,function(o){return s=DC(e,t,o,i),isFinite(s)&&s>0}),s}function git(e,t,n,i,r,s,o,a,l,c,u,f){const h=bn(Math.round(n*e),Math.round(n*t),bl);if(f||(h.imageSmoothingEnabled=!1),l.length===0)return h.canvas;h.scale(n,n);function d(v){return Math.round(v*n)/n}h.globalCompositeOperation="lighter";const g=mi();l.forEach(function(v,x,b){IO(g,v.extent)});const m=ie(g),_=Kn(g),p=bn(Math.round(n*m/i),Math.round(n*_/i),bl);f||(p.imageSmoothingEnabled=!1);const y=n/i;l.forEach(function(v,x,b){const E=v.extent[0]-g[0],T=-(v.extent[3]-g[3]),M=ie(v.extent),C=Kn(v.extent);v.image.width>0&&v.image.height>0&&p.drawImage(v.image,c,c,v.image.width-2*c,v.image.height-2*c,E*y,T*y,M*y,C*y)});const w=Ca(o);return a.getTriangles().forEach(function(v,x,b){const E=v.source,T=v.target;let M=E[0][0],C=E[0][1],R=E[1][0],A=E[1][1],k=E[2][0],O=E[2][1];const I=d((T[0][0]-w[0])/s),F=d(-(T[0][1]-w[1])/s),P=d((T[1][0]-w[0])/s),G=d(-(T[1][1]-w[1])/s),j=d((T[2][0]-w[0])/s),U=d(-(T[2][1]-w[1])/s),q=M,W=C;M=0,C=0,R-=q,A-=W,k-=q,O-=W;const Q=[[R,A,0,0,P-I],[k,O,0,0,j-I],[0,0,R,A,G-F],[0,0,k,O,U-F]],nt=AJ(Q);if(nt){if(h.save(),h.beginPath(),hit()||!f){h.moveTo(P,G);const st=4,ot=I-P,z=F-G;for(let Y=0;Y<st;Y++)h.lineTo(P+d((Y+1)*ot/st),G+d(Y*z/(st-1))),Y!=st-1&&h.lineTo(P+d((Y+1)*ot/st),G+d((Y+1)*z/(st-1)));h.lineTo(j,U)}else h.moveTo(P,G),h.lineTo(I,F),h.lineTo(j,U);h.clip(),h.transform(nt[0],nt[2],nt[1],nt[3],I,F),h.translate(g[0]-q,g[3]-W),h.scale(i/n,-i/n),h.drawImage(p.canvas,0,0),h.restore()}}),S0(p),bl.push(p.canvas),u&&(h.save(),h.globalCompositeOperation="source-over",h.strokeStyle="black",h.lineWidth=1,a.getTriangles().forEach(function(v,x,b){const E=v.target,T=(E[0][0]-w[0])/s,M=-(E[0][1]-w[1])/s,C=(E[1][0]-w[0])/s,R=-(E[1][1]-w[1])/s,A=(E[2][0]-w[0])/s,k=-(E[2][1]-w[1])/s;h.beginPath(),h.moveTo(C,R),h.lineTo(T,M),h.lineTo(A,k),h.closePath(),h.stroke()}),h.restore()),h.canvas}class mit extends Ck{constructor(t,n,i,r,s,o,a,l,c,u,f,h){super(s,dt.IDLE,{interpolate:!!h}),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const _=g?vl(d,g):d;if(Y_(_)===0){this.state=dt.EMPTY;return}const p=t.getExtent();p&&(m?m=vl(m,p):m=p);const y=r.getResolution(this.wrappedTileCoord_[0]),w=dit(t,i,_,y);if(!isFinite(w)||w<=0){this.state=dt.EMPTY;return}const v=u!==void 0?u:lit;if(this.triangulation_=new fit(t,i,_,m,w*v,y),this.triangulation_.getTriangles().length===0){this.state=dt.EMPTY;return}this.sourceZ_=n.getZForResolution(w);let x=this.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(x[1]=Oe(x[1],m[1],m[3]),x[3]=Oe(x[3],m[1],m[3])):x=vl(x,m)),!Y_(x))this.state=dt.EMPTY;else{const b=n.getTileRangeForExtentAndZ(x,this.sourceZ_);for(let E=b.minX;E<=b.maxX;E++)for(let T=b.minY;T<=b.maxY;T++){const M=c(this.sourceZ_,E,T,a);M&&this.sourceTiles_.push(M)}this.sourceTiles_.length===0&&(this.state=dt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==dt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=dt.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=git(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=dt.LOADED}this.changed()}load(){if(this.state==dt.IDLE){this.state=dt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const i=n.getState();if(i==dt.IDLE||i==dt.LOADING){t++;const r=$t(n,St.CHANGE,function(s){const o=n.getState();(o==dt.LOADED||o==dt.ERROR||o==dt.EMPTY)&&(se(r),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,r){n.getState()==dt.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(se),this.sourcesListenerKeys_=null}release(){this.canvas_&&(S0(this.canvas_.getContext("2d")),bl.push(this.canvas_),this.canvas_=null),super.release()}}const o1=mit;class pit extends bb{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=mi(),this.tmpTileRange_=new Dk(0,0,0,0)}isDrawableTile(t){const n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==dt.LOADED||i==dt.EMPTY||i==dt.ERROR&&!r}getTile(t,n,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(t,n,i,s,o);return c.getState()==dt.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Me(n.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!Vf(s,r))return null;const o=n.pixelRatio,a=n.viewState.projection,l=n.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),f=c.getTilePixelRatio(n.pixelRatio);for(let h=u.getZForResolution(l.resolution);h>=u.getMinZoom();--h){const d=u.getTileCoordForCoordAndZ(r,h),g=c.getTile(h,d[1],d[2],o,a);if(!(g instanceof Sk||g instanceof o1)||g instanceof o1&&g.getState()===dt.EMPTY)return null;if(g.getState()!==dt.LOADED)continue;const m=u.getOrigin(h),_=Vn(u.getTileSize(h)),p=u.getResolution(h),y=Math.floor(f*((r[0]-m[0])/p-d[1]*_[0])),w=Math.floor(f*((m[1]-r[1])/p-d[2]*_[1])),v=Math.round(f*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),y+v,w+v)}return null}loadedTileCallback(t,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,n,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,n){const i=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=t.pixelRatio,u=this.getLayer(),f=u.getSource(),h=f.getRevision(),d=f.getTileGridForProjection(s),g=d.getZForResolution(o,f.zDirection),m=d.getResolution(g);let _=t.extent;const p=t.viewState.resolution,y=f.getTilePixelRatio(c),w=Math.round(ie(_)/p*c),v=Math.round(Kn(_)/p*c),x=i.extent&&Ur(i.extent);x&&(_=vl(_,Ur(i.extent)));const b=m*w/2/y,E=m*v/2/y,T=[a[0]-b,a[1]-E,a[0]+b,a[1]+E],M=d.getTileRangeForExtentAndZ(_,g),C={};C[g]={};const R=this.createLoadedTileFinder(f,s,C),A=this.tmpExtent,k=this.tmpTileRange_;this.newTiles_=!1;const O=l?V_(r.center,p,l,t.size):void 0;for(let Q=M.minX;Q<=M.maxX;++Q)for(let nt=M.minY;nt<=M.maxY;++nt){if(l&&!d.tileCoordIntersectsViewport([g,Q,nt],O))continue;const st=this.getTile(g,Q,nt,t);if(this.isDrawableTile(st)){const Y=qt(this);if(st.getState()==dt.LOADED){C[g][st.tileCoord.toString()]=st;let $=st.inTransition(Y);$&&i.opacity!==1&&(st.endTransition(Y),$=!1),!this.newTiles_&&($||!this.renderedTiles.includes(st))&&(this.newTiles_=!0)}if(st.getAlpha(Y,t.time)===1)continue}const ot=d.getTileCoordChildTileRange(st.tileCoord,k,A);let z=!1;ot&&(z=R(g+1,ot)),z||d.forEachTileCoordParentTileRange(st.tileCoord,R,k,A)}const I=m/o*c/y;Bi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,l,-w/2,-v/2);const F=Hw(this.pixelTransform);this.useContainer(n,F,this.getBackground(t));const P=this.context,G=P.canvas;v0(this.inversePixelTransform,this.pixelTransform),Bi(this.tempTransform,w/2,v/2,I,I,0,-w/2,-v/2),G.width!=w||G.height!=v?(G.width=w,G.height=v):this.containerReused||P.clearRect(0,0,w,v),x&&this.clipUnrotated(P,t,x),f.getInterpolate()||(P.imageSmoothingEnabled=!1),this.preRender(P,t),this.renderedTiles.length=0;let j=Object.keys(C).map(Number);j.sort(eo);let U,q,W;i.opacity===1&&(!this.containerReused||f.getOpaque(t.viewState.projection))?j=j.reverse():(U=[],q=[]);for(let Q=j.length-1;Q>=0;--Q){const nt=j[Q],st=f.getTilePixelSize(nt,c,s),z=d.getResolution(nt)/m,Y=st[0]*z*I,$=st[1]*z*I,V=d.getTileCoordForCoordAndZ(Ca(T),nt),K=d.getTileCoordExtent(V),S=Me(this.tempTransform,[y*(K[0]-T[0])/m,y*(T[3]-K[3])/m]),L=y*f.getGutterForProjection(s),D=C[nt];for(const B in D){const H=D[B],X=H.tileCoord,rt=V[1]-X[1],J=Math.round(S[0]-(rt-1)*Y),tt=V[2]-X[2],Z=Math.round(S[1]-(tt-1)*$),ct=Math.round(S[0]-rt*Y),at=Math.round(S[1]-tt*$),ut=J-ct,ft=Z-at,Ct=g===nt,Pt=Ct&&H.getAlpha(qt(this),t.time)!==1;let Mt=!1;if(!Pt)if(U){W=[ct,at,ct+ut,at,ct+ut,at+ft,ct,at+ft];for(let Jt=0,we=U.length;Jt<we;++Jt)if(g!==nt&&nt<q[Jt]){const de=U[Jt];pn([ct,at,ct+ut,at+ft],[de[0],de[3],de[4],de[7]])&&(Mt||(P.save(),Mt=!0),P.beginPath(),P.moveTo(W[0],W[1]),P.lineTo(W[2],W[3]),P.lineTo(W[4],W[5]),P.lineTo(W[6],W[7]),P.moveTo(de[6],de[7]),P.lineTo(de[4],de[5]),P.lineTo(de[2],de[3]),P.lineTo(de[0],de[1]),P.clip())}U.push(W),q.push(nt)}else P.clearRect(ct,at,ut,ft);this.drawTileImage(H,t,ct,at,ut,ft,L,Ct),U&&!Pt?(Mt&&P.restore(),this.renderedTiles.unshift(H)):this.renderedTiles.push(H),this.updateUsedTiles(t.usedTiles,f,H)}}return this.renderedRevision=h,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Qu(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(t,f,d,c,s,_,g,u.getPreload()),this.scheduleExpireCache(t,f),this.postRender(P,t),i.extent&&P.restore(),P.imageSmoothingEnabled=!0,F!==G.style.transform&&(G.style.transform=F),this.container}drawTileImage(t,n,i,r,s,o,a,l){const c=this.getTileImage(t);if(!c)return;const u=qt(this),f=n.layerStatesArray[n.layerIndex],h=f.opacity*(l?t.getAlpha(u,n.time):1),d=h!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),d&&this.context.restore(),h!==f.opacity?n.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,n){if(n.canExpireCache()){const i=(function(r,s,o){const a=qt(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,n);t.postRenderFunctions.push(i)}}updateUsedTiles(t,n,i){const r=qt(n);r in t||(t[r]={}),t[r][i.getKey()]=!0}manageTilePyramid(t,n,i,r,s,o,a,l,c){const u=qt(n);u in t.wantedTiles||(t.wantedTiles[u]={});const f=t.wantedTiles[u],h=t.tileQueue,d=i.getMinZoom(),g=t.viewState.rotation,m=g?V_(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let _=0,p,y,w,v,x,b;for(b=d;b<=a;++b)for(y=i.getTileRangeForExtentAndZ(o,b,y),w=i.getResolution(b),v=y.minX;v<=y.maxX;++v)for(x=y.minY;x<=y.maxY;++x)g&&!i.tileCoordIntersectsViewport([b,v,x],m)||(a-b<=l?(++_,p=n.getTile(b,v,x,r,s),p.getState()==dt.IDLE&&(f[p.getKey()]=!0,h.isKeyQueued(p.getKey())||h.enqueue([p,u,i.getTileCoordCenter(p.tileCoord),w])),c!==void 0&&c(p)):n.useTile(b,v,x,s));n.updateCacheSize(_,s)}}const yit=pit;class _it extends ait{constructor(t){super(t)}createRenderer(){return new yit(this)}}const vit=_it;class wit extends bb{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,s=r.resolution,o=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(n.extent!==void 0&&(l=vl(l,Ur(n.extent,r.projection))),!a[Le.ANIMATING]&&!a[Le.INTERACTING]&&!Sa(l))if(o){const c=r.projection,u=o.getImage(l,s,i,c);u&&(this.loadImage(u)?this.image_=u:u.getState()===Ot.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Me(n.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!Vf(s,r))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=ie(o),c=Math.floor(a.width*((r[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=Kn(o),f=Math.floor(a.height*((o[3]-r[1])/u));return f<0||f>=a.height?null:this.getImageData(a,c,f)}renderFrame(t,n){const i=this.image_,r=i.getExtent(),s=i.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=i.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],u=t.pixelRatio,f=t.viewState,h=f.center,d=f.resolution,g=u*o/(d*l),m=u*a/(d*l),_=t.extent,p=f.resolution,y=f.rotation,w=Math.round(ie(_)/p*u),v=Math.round(Kn(_)/p*u);Bi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,y,-w/2,-v/2),v0(this.inversePixelTransform,this.pixelTransform);const x=Hw(this.pixelTransform);this.useContainer(n,x,this.getBackground(t));const b=this.context,E=b.canvas;E.width!=w||E.height!=v?(E.width=w,E.height=v):this.containerReused||b.clearRect(0,0,w,v);let T=!1,M=!0;if(c.extent){const O=Ur(c.extent,f.projection);M=pn(O,t.extent),T=M&&!Gs(O,t.extent),T&&this.clipUnrotated(b,t,O)}const C=i.getImage(),R=Bi(this.tempTransform,w/2,v/2,g,m,0,l*(r[0]-h[0])/o,l*(h[1]-r[3])/a);this.renderedResolution=a*u/l;const A=C.width*R[0],k=C.height*R[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,t),M&&A>=.5&&k>=.5){const O=R[4],I=R[5],F=c.opacity;let P;F!==1&&(P=b.globalAlpha,b.globalAlpha=F),b.drawImage(C,0,0,+C.width,+C.height,O,I,A,k),F!==1&&(b.globalAlpha=P)}return this.postRender(b,t),T&&b.restore(),b.imageSmoothingEnabled=!0,x!==E.style.transform&&(E.style.transform=x),this.container}}const bit=wit;function xit(e){return Array.isArray(e)?Math.min(...e):e}class Eit extends bit{constructor(t){super(t),this.vectorRenderer_=new Eet(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=Fi(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const n=Me(this.coordinateToVectorPixelTransform_,Me(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const n=t.pixelRatio,i=t.viewState,r=i.resolution,s=t.viewHints,o=this.vectorRenderer_;let a=t.extent;this.layerImageRatio_!==1&&(a=a.slice(0),mJ(a,this.layerImageRatio_));const l=ie(a)/r,c=Kn(a)/r;if(!s[Le.ANIMATING]&&!s[Le.INTERACTING]&&!Sa(a)){o.useContainer(null,null);const u=o.context,f=t.layerStatesArray[t.layerIndex],h=Object.assign({},f,{opacity:1}),d=Object.assign({},t,{declutterTree:new yb(9),extent:a,size:[l,c],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[h],layerIndex:0});let g=!0;const m=new ket(a,r,n,u.canvas,function(_){o.prepareFrame(d)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(d,null)&&(o.renderDeclutter(d),g=!1),_())});m.addEventListener(St.CHANGE,()=>{if(m.getState()!==Ot.LOADED)return;this.image_=g?null:m;const _=m.getPixelRatio(),p=xit(m.getResolution())*n/_;this.renderedResolution=p,this.coordinateToVectorPixelTransform_=Bi(this.coordinateToVectorPixelTransform_,l/2,c/2,1/p,-1/p,0,-i.center[0],-i.center[1])}),m.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,n,i,r,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,n,i,r,s):super.forEachFeatureAtCoordinate(t,n,i,r,s)}}const Tit=Eit;class Cit extends Ptt{constructor(t){t=t||{};const n=Object.assign({},t);delete n.imageRatio,super(n),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new Tit(this)}}const Sit=Cit,cy={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Xa=[0,0,0],Ss=5;class Mit{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Gt(qK(this.resolutions_,function(r,s){return s-r},!0),"`resolutions` must be sorted in descending order");let n;if(!t.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!n)n=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Gt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Ca(i)),Gt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Gt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:hb,Gt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(r,s){const o=new Dk(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,n,i){const r=this.getTileRangeForExtentAndZ(t,n);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([n,s,a])}forEachTileCoordParentTileRange(t,n,i,r){let s,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=Va(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),n(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,n,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,o=t[2]*2;return Va(s,s+1,o,o+1,n)}const r=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,n)}return null}getTileRangeForTileCoordAndZ(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const r=t[0],s=t[1],o=t[2];if(n===r)return Va(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-r),c=Math.floor(s*l),u=Math.floor(o*l);if(n<r)return Va(c,c,u,u,i);const f=Math.floor(l*(s+1))-1,h=Math.floor(l*(o+1))-1;return Va(c,f,u,h,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(t,n,i){this.getTileCoordForXYAndZ_(t[0],t[3],n,!1,Xa);const r=Xa[1],s=Xa[2];this.getTileCoordForXYAndZ_(t[2],t[1],n,!0,Xa);const o=Xa[1],a=Xa[2];return Va(r,o,s,a,i)}getTileCoordCenter(t){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Vn(this.getTileSize(t[0]),this.tmpSize_);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,n){const i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Vn(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*r,a=i[1]-(t[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return io(o,a,l,c,n)}getTileCoordForCoordAndResolution(t,n,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],n,!1,i)}getTileCoordForXYAndResolution_(t,n,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=Vn(this.getTileSize(o),this.tmpSize_);let u=a*(t-l[0])/i/c[0],f=a*(l[1]-n)/i/c[1];return r?(u=Xh(u,Ss)-1,f=Xh(f,Ss)-1):(u=Vh(u,Ss),f=Vh(f,Ss)),AC(o,u,f,s)}getTileCoordForXYAndZ_(t,n,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=Vn(this.getTileSize(i),this.tmpSize_);let c=(t-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return r?(c=Xh(c,Ss)-1,u=Xh(u,Ss)-1):(c=Vh(c,Ss),u=Vh(u,Ss)),AC(i,c,u,s)}getTileCoordForCoordAndZ(t,n,i){return this.getTileCoordForXYAndZ_(t[0],t[1],n,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,n){const i=Ww(this.resolutions_,t,n||0);return Oe(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,n){return XO(n,0,n.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const n=this.resolutions_.length,i=new Array(n);for(let r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}}const Wk=Mit;function Gk(e){let t=e.getDefaultTileGrid();return t||(t=Lit(e),e.setDefaultTileGrid(t)),t}function Rit(e,t,n){const i=t[0],r=e.getTileCoordCenter(t),s=Sb(n);if(!Vf(s,r)){const o=ie(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,e.getTileCoordForCoordAndZ(r,i)}return t}function Ait(e,t,n,i){i=i!==void 0?i:"top-left";const r=Bk(e,t,n);return new Wk({extent:e,origin:dJ(e,i),resolutions:r,tileSize:n})}function Iit(e){const t=e||{},n=t.extent||Fe("EPSG:3857").getExtent(),i={extent:n,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:Bk(n,t.maxZoom,t.tileSize,t.maxResolution)};return new Wk(i)}function Bk(e,t,n,i){t=t!==void 0?t:LQ,n=Vn(n!==void 0?n:hb);const r=Kn(e),s=ie(e);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function Lit(e,t,n,i){const r=Sb(e);return Ait(r,t,n,i)}function Sb(e){e=Fe(e);let t=e.getExtent();if(!t){const n=180*ql.degrees/e.getMetersPerUnit();t=io(-n,-n,n,n)}return t}class Oit extends Tk{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const n=[256,256];this.tileGrid&&Vn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new Pk(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,n){const i=this.getTileCacheForProjection(t);i&&i.expireCache(n)}forEachLoadedTile(t,n,i,r){const s=this.getTileCacheForProjection(t);if(!s)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let f=i.minY;f<=i.maxY;++f)l=O0(n,u,f),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===dt.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const n=t?this.getTileGridForProjection(t):this.tileGrid;return n?n.getResolutions():null}getTile(t,n,i,r,s){return Et()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Gk(t)}getTileCacheForProjection(t){const n=this.getProjection();return Gt(n===null||ko(n,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,n,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=Vn(r.getTileSize(t),this.tmpSize);return s==1?o:uQ(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=Rit(i,t,n)),Vnt(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,n){const i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,n,i,r){}}class kit extends gs{constructor(t,n){super(t),this.tile=n}}const Fit=Oit;function Pit(e,t){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return e.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],u=t.getFullTileRange(c);return Gt(u,"The {-y} placeholder requires a tile grid with extent"),(u.getHeight()-o[2]-1).toString()})}}function Nit(e,t){const n=e.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Pit(e[r],t);return Dit(i)}function Dit(e){return e.length===1?e[0]:function(t,n,i){if(!t)return;const r=Unt(t),s=na(r,e.length);return e[s](t,n,i)}}function $it(e){const t=[];let n=/\{([a-z])-([a-z])\}/.exec(e);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)t.push(e.replace(n[0],String.fromCharCode(s)));return t}if(n=/\{(\d+)-(\d+)\}/.exec(e),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)t.push(e.replace(n[0],r.toString()));return t}return t.push(e),t}class Mb extends Fit{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Mb.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const n=t.target,i=qt(n),r=n.getState();let s;r==dt.LOADING?(this.tileLoadingKeys_[i]=!0,s=cy.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==dt.ERROR?cy.TILELOADERROR:r==dt.LOADED?cy.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new kit(s,n))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(t){const n=$it(t);this.urls=n,this.setUrls(n)}setUrls(t){this.urls=t;const n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Nit(t,this.tileGrid),n):this.setKey(n)}tileUrlFunction(t,n,i){}useTile(t,n,i){const r=O0(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const zit=Mb;class Wit extends zit{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Git,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Sk,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,n){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?n:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!ko(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!ko(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||ko(n,t)))return this.tileGrid;const i=qt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Gk(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const n=this.getProjection();if(!n||ko(n,t))return this.tileCache;const i=qt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Pk(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,n,i,r,s,o){const a=[t,n,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?dt.IDLE:dt.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(St.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,n,i,r,s){const o=this.getProjection();if(!o||!s||ko(o,s))return this.getTileInternal(t,n,i,r,o||s);const a=this.getTileCacheForProjection(s),l=[t,n,i];let c;const u=Fk(l);a.containsKey(u)&&(c=a.get(u));const f=this.getKey();if(c&&c.key==f)return c;const h=this.getTileGridForProjection(o),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),m=new o1(o,h,s,d,l,g,this.getTilePixelRatio(r),this.getGutter(),(_,p,y,w)=>this.getTileInternal(_,p,y,w,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=f,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(t,n,i,r,s){let o=null;const a=O0(t,n,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,n,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(t,n,i,r,s,l),c.getState()==dt.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(t,n){const i=Fe(t);if(i){const r=qt(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function Git(e,t){e.getImage().src=t}const Bit=Wit;class Hit extends Bit{constructor(t){t=t||{};const n=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:Iit({extent:Sb(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Yit=Hit,Uit='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Vit extends Yit{constructor(t){t=t||{};let n;t.attributions!==void 0?n=t.attributions:n=[Uit];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",r=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}}const Xit=Vit,Hk=document.createElement("i"),Yk=document.createElement("i");Hk.setAttribute("class","fa-solid fa-expand");Yk.setAttribute("class","fa-solid fa-compress");const jit={props:{features:Array,activityFiles:Array,timezoneOffsetHoursList:Array,receivedRecord:ne,hasCadence:Boolean,hasHeartRate:Boolean,hasPower:Boolean,hasTemperature:Boolean},data(){return{popupFreeze:new Boolean,popupRecord:new ne,hoveredRecord:new ne,popupActivityIndex:0,popupTimezoneOffsetHours:new Number(0),popupOverlay:new RC({}),vec:new Sit({source:new Let({features:[]}),visible:!0,style:new ra({stroke:new ab({color:"#34495e",width:4})})}),map:new Wnt({controls:Mk(),layers:[new vit({source:new Xit})],view:new tr({center:[0,0],zoom:1,enableRotation:!1,projection:"EPSG:4326"})}),zoomToExtent:new oy,pointer:new md}},watch:{features:{handler(e){requestAnimationFrame(()=>this.updateMapSource(e))}},zoomToExtent:{handler(e,t){this.map.removeControl(t),this.map.addControl(e)}},receivedRecord:{handler(e){if(this.popupRecord=e,JSON.stringify(e)==JSON.stringify(new ne)){this.popupOverlay.setPosition(void 0);return}this.popupOverlay.setPosition([e.positionLong,e.positionLat])}},hoveredRecord:{handler(e){this.popupRecord=e,this.$emit("hoveredRecord",e)}}},expose:["showPopUpRecord"],methods:{toStringHDMS:OJ,toTimezoneDateString:$w,updateMapSource(e){var s,o;this.popupOverlay.setPosition(void 0);const t=this.map.getView(),n=this.vec.getSource();n.clear(),n.addFeatures(e),t.fit(n.getExtent(),{padding:[50,50,50,50]});const i=new Array,r=new Array;for(let a=0;a<e.length;a++){const l=new md(new Zl(((s=e[a])==null?void 0:s.getGeometry()).getFirstCoordinate()));l.setStyle(new ra({image:new Yg({crossOrigin:"anonymous",src:YK,scale:1})})),l.setId("startingPoint-"+a),i.push(l);const c=new md(new Zl(((o=e[a])==null?void 0:o.getGeometry()).getLastCoordinate()));c.setStyle(new ra({image:new Yg({crossOrigin:"anonymous",src:HK,scale:1})})),c.setId("destinationPoint-"+a),r.push(c)}n.addFeatures(i),n.addFeatures(r),this.zoomToExtent=new oy({extent:t.getViewStateAndExtent().extent})},findNearestRecord(e,t){var s;const n=Number(e.split("-")[1]);this.popupActivityIndex=n;let i=new ne,r=Number.MAX_VALUE;return this.popupTimezoneOffsetHours=this.timezoneOffsetHoursList[n],(s=this.activityFiles[n].records)==null||s.forEach(o=>{if(!o.positionLong||!o.positionLat)return;const a=Math.abs(Math.sqrt(Math.pow(o.positionLong-t[0],2)+Math.pow(o.positionLat-t[1],2)));a<r&&(r=a,i=o)}),i},lineStringFeatureListener(e){e.type=="singleclick"&&(this.popupFreeze=!this.popupFreeze&&this.popupOverlay.getPosition()!=null),this.popupFreeze||(this.hoveredRecord=new ne,this.popupOverlay.setPosition(void 0)),!(this.popupFreeze==!0&&this.popupOverlay.getPosition()!=null)&&this.map.forEachFeatureAtPixel(e.pixel,t=>{t.getGeometry()instanceof Dg&&(this.hoveredRecord=this.findNearestRecord(t.getId(),e.coordinate),this.popupOverlay.setPosition([this.hoveredRecord.positionLong,this.hoveredRecord.positionLat]),this.popupFreeze=e.type=="singleclick")},{hitTolerance:10})},showPopUpRecord(e){this.popupOverlay.setPosition(void 0),e&&(this.popupRecord=e,this.popupOverlay.setPosition([this.popupRecord.positionLong,this.popupRecord.positionLat]),this.popupFreeze=!0)},updateExtent(){this.$nextTick(()=>{const e=this.vec.getSource().getExtent();Sa(e)||(this.map.getView().fit(e,{padding:[50,50,50,50]}),this.zoomToExtent=new oy({extent:this.map.getView().getViewStateAndExtent().extent}))})}},computed:{titleWidth(){this.popupRecord;let e=0;return document.querySelectorAll('.popup-content > div:not([style*="display: none"]) > span:nth-child(1)').forEach(n=>{const i=n.innerHTML.length*6;e=Math.max(e,i)}),e}},mounted(){this.popupOverlay=new RC({element:document.getElementById("popup")}),this.map.addOverlay(this.popupOverlay),this.map.addLayer(this.vec),this.map.setTarget("map"),this.map.addControl(new Knt({label:Hk,labelActive:Yk})),this.map.addControl(new tit),this.map.on("change:size",this.updateExtent),this.map.on("pointermove",this.lineStringFeatureListener),this.map.on("singleclick",this.lineStringFeatureListener)},unmounted(){this.map.un("change:size",this.updateExtent),this.map.un("pointermove",this.lineStringFeatureListener),this.map.un("singleclick",this.lineStringFeatureListener)}};const br=e=>(ic("data-v-e4c74b16"),e=e(),rc(),e),qit={class:"w-100 h-100"},Zit=br(()=>N("div",{id:"map",style:{width:"100%",height:"100%"}},null,-1)),Kit={id:"popup",class:"ol-popup"},Jit={class:"popup-content"},Qit=br(()=>N("span",null," km",-1)),trt=br(()=>N("span",null," km/h",-1)),ert=br(()=>N("span",null," rpm",-1)),nrt=br(()=>N("span",null," bpm",-1)),irt=br(()=>N("span",null," watts",-1)),rrt=br(()=>N("span",null," °C",-1)),srt={style:{display:"grid"}},ort={style:{"grid-column":"1"}},art=br(()=>N("span",null," masl",-1)),lrt={style:{"grid-column":"2"}},crt=br(()=>N("span",null,"(Grade: ",-1)),urt=br(()=>N("span",null," %)",-1));function frt(e,t,n,i,r,s){var o;return mt(),wt("div",qit,[Zit,N("div",Kit,[N("div",Jit,[N("div",null,[N("span",{style:tn({width:s.titleWidth+"px"})},"Time:",4),N("span",null,ht(r.popupRecord.timestamp?s.toTimezoneDateString(r.popupRecord.timestamp,r.popupTimezoneOffsetHours):"-"),1)]),N("div",null,[N("span",{style:tn({width:s.titleWidth+"px"})},"Distance:",4),N("span",null,ht(r.popupRecord.distance?(r.popupRecord.distance/1e3).toFixed(2):"-"),1),Qit]),N("div",null,[N("span",{style:tn({width:s.titleWidth+"px"})},"Speed:",4),N("span",null,ht(r.popupRecord.speed?(r.popupRecord.speed*3600/1e3).toFixed(2):"-"),1),trt]),en(N("div",null,[N("span",{style:tn({width:s.titleWidth+"px"})},"Cadence:",4),N("span",null,ht(r.popupRecord.cadence?r.popupRecord.cadence:"-"),1),ert],512),[[Tn,n.hasCadence]]),en(N("div",null,[N("span",{style:tn({width:s.titleWidth+"px"})},"Heart Rate:",4),N("span",null,ht(r.popupRecord.heartRate?r.popupRecord.heartRate:"-"),1),nrt],512),[[Tn,n.hasHeartRate]]),en(N("div",null,[N("span",{style:tn({width:s.titleWidth+"px"})},"Power:",4),N("span",null,ht(r.popupRecord.power?r.popupRecord.power:"-"),1),irt],512),[[Tn,n.hasPower]]),en(N("div",null,[N("span",{style:tn({width:s.titleWidth+"px"})},"Temperature:",4),N("span",null,ht(r.popupRecord.temperature?r.popupRecord.temperature:"-"),1),rrt],512),[[Tn,n.hasTemperature]]),N("div",srt,[N("div",ort,[N("span",{style:tn({width:s.titleWidth+"px"})},"Altitude:",4),N("span",null,ht(r.popupRecord.altitude?(o=r.popupRecord.altitude)==null?void 0:o.toFixed(2):"-"),1),art]),N("div",lrt,[crt,N("span",null,ht(r.popupRecord.grade?Math.round(r.popupRecord.grade):"0"),1),urt])]),N("div",null,[N("span",{style:tn({width:s.titleWidth+"px"})},"Location:",4),N("span",null,ht(r.popupRecord.positionLong&&r.popupRecord.positionLat?s.toStringHDMS([r.popupRecord.positionLong,r.popupRecord.positionLat]):"-"),1)])])])])}const Uk=wr(jit,[["render",frt],["__scopeId","data-v-e4c74b16"]]);class xr{constructor(){xt(this,"sport",null);xt(this,"subSport",null);xt(this,"totalMovingTime",null);xt(this,"totalElapsedTime",null);xt(this,"totalTimerTime",null);xt(this,"totalDistance",null);xt(this,"totalAscent",null);xt(this,"totalDescent",null);xt(this,"totalCycles",null);xt(this,"totalCalories",null);xt(this,"avgSpeed",null);xt(this,"maxSpeed",null);xt(this,"avgHeartRate",null);xt(this,"maxHeartRate",null);xt(this,"avgCadence",null);xt(this,"maxCadence",null);xt(this,"avgPower",null);xt(this,"maxPower",null);xt(this,"avgTemperature",null);xt(this,"maxTemperature",null);xt(this,"avgAltitude",null);xt(this,"maxAltitude",null)}}function Sn(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(n+=r,t++)}return t==0?null:n/t}function Mn(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(r>t&&(t=r),n++)}return n==0?null:t}function Ye(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(t+=r,n++)}return n==0?null:t}const hrt={props:{activityFiles:Array,timezoneOffsetHour:Number},computed:{summary(){const e=new xr;for(let t=0;t<this.activityFiles.length;t++)for(let n=0;n<this.activityFiles[t].sessions.length;n++){const i=this.activityFiles[t].sessions[n];e.sport=i.sport,e.subSport=i.subSport,e.totalMovingTime=Ye(e.totalMovingTime,i.totalMovingTime),e.totalElapsedTime=Ye(e.totalElapsedTime,i.totalElapsedTime),e.totalTimerTime=Ye(e.totalTimerTime,i.totalTimerTime),e.totalDistance=Ye(e.totalDistance,i.totalDistance),e.totalAscent=Ye(e.totalAscent,i.totalAscent),e.totalDescent=Ye(e.totalDescent,i.totalDescent),e.totalCycles=Ye(e.totalCycles,i.totalCycles),e.totalCalories=Ye(e.totalCalories,i.totalCalories),e.avgSpeed=Sn(e.avgSpeed,i.avgSpeed),e.maxSpeed=Mn(e.maxSpeed,i.maxSpeed),e.avgHeartRate=Sn(e.avgHeartRate,i.avgHeartRate),e.maxHeartRate=Mn(e.maxHeartRate,i.maxHeartRate),e.avgCadence=Sn(e.avgCadence,i.avgCadence),e.maxCadence=Mn(e.maxCadence,i.maxCadence),e.avgPower=Sn(e.avgPower,i.avgPower),e.maxPower=Mn(e.maxPower,i.maxPower),e.avgTemperature=Sn(e.avgTemperature,i.avgTemperature),e.maxTemperature=Mn(e.maxTemperature,i.maxTemperature),e.avgAltitude=Sn(e.avgAltitude,i.avgAltitude),e.maxAltitude=Mn(e.maxAltitude,i.maxAltitude)}return e}},methods:{toTimezoneDateString:$w,GMTString:wO,secondsToDHMS:bO,avg:Sn,max:Mn,sum:Ye}};const drt={class:"navigator"},grt={class:"navigator-info"},mrt={key:0,class:"time-created"},prt={key:1,class:"manufacturer"},yrt={class:"navigator-summary analysis"},_rt={class:"summary"},vrt={key:0,class:"section-title"},wrt={class:"summary-grid"},brt={key:0,class:"summary-item"},xrt=N("div",{class:"summary-title"},"Sport",-1),Ert={class:"summary-value"},Trt={key:1,class:"summary-item"},Crt=N("div",{class:"summary-title"},"Sub Sport",-1),Srt={class:"summary-value"},Mrt={class:"summary-grid"},Rrt={key:0,class:"summary-item"},Art=N("div",{class:"summary-title"},"Total Moving Time",-1),Irt={class:"summary-value"},Lrt=N("i",{class:"fa-solid fa-hourglass-half"},null,-1),Ort={key:1,class:"summary-item"},krt=N("div",{class:"summary-title"},"Total Elapsed Time",-1),Frt={class:"summary-value"},Prt=N("i",{class:"fa-solid fa-hourglass-end"},null,-1),Nrt={class:"summary-grid"},Drt={key:0,class:"summary-item"},$rt=N("div",{class:"summary-title"},"Total Distance",-1),zrt={class:"summary-value"},Wrt=N("i",{class:"fa-solid fa-road"},null,-1),Grt={key:1,class:"summary-item"},Brt=N("div",{class:"summary-title"},"Total Calories",-1),Hrt={class:"summary-value"},Yrt=N("i",{class:"fa-solid fa-droplet"},null,-1),Urt={class:"summary-grid"},Vrt={key:0,class:"summary-item"},Xrt=N("div",{class:"summary-title"},"Avg Speed",-1),jrt={class:"summary-value"},qrt=N("i",{class:"fa-solid fa-gauge"},null,-1),Zrt={key:1,class:"summary-item"},Krt=N("div",{class:"summary-title"},"Max Speed",-1),Jrt={class:"summary-value"},Qrt=N("i",{class:"fa-solid fa-gauge-high"},null,-1),tst={class:"summary-grid"},est={key:0,class:"summary-item"},nst=N("div",{class:"summary-title"},"Avg Heart Rate",-1),ist={class:"summary-value"},rst=N("i",{class:"fa-solid fa-heart-pulse"},null,-1),sst={key:1,class:"summary-item"},ost=N("div",{class:"summary-title"},"Max Heart Rate",-1),ast={class:"summary-value"},lst=N("i",{class:"fa-solid fa-heart-pulse"},null,-1),cst={class:"summary-grid"},ust={key:0,class:"summary-item"},fst=N("div",{class:"summary-title"},"Avg Cadence",-1),hst={class:"summary-value"},dst=N("i",{class:"fa-solid fa-rotate"},null,-1),gst={key:1,class:"summary-item"},mst=N("div",{class:"summary-title"},"Max Cadence",-1),pst={class:"summary-value"},yst=N("i",{class:"fa-solid fa-rotate"},null,-1),_st={class:"summary-grid"},vst={key:0,class:"summary-item"},wst=N("div",{class:"summary-title"},"Avg Power",-1),bst={class:"summary-value"},xst=N("i",{class:"fa-solid fa-bolt-lightning"},null,-1),Est={key:1,class:"summary-item"},Tst=N("div",{class:"summary-title"},"Max Power",-1),Cst={class:"summary-value"},Sst=N("i",{class:"fa-solid fa-bolt-lightning"},null,-1),Mst={class:"summary-grid"},Rst={key:0,class:"summary-item"},Ast=N("div",{class:"summary-title"},"Avg Temperature",-1),Ist={class:"summary-value"},Lst=N("i",{class:"fa-solid fa-temperature-low"},null,-1),Ost={key:1,class:"summary-item"},kst=N("div",{class:"summary-title"},"Max Temperature",-1),Fst={class:"summary-value"},Pst=N("i",{class:"fa-solid fa-temperature-high"},null,-1),Nst={class:"summary-grid"},Dst={key:0,class:"summary-item"},$st=N("div",{class:"summary-title"},"Total Ascent",-1),zst={class:"summary-value"},Wst=N("i",{class:"fa-solid fa-arrow-trend-up"},null,-1),Gst={key:1,class:"summary-item"},Bst=N("div",{class:"summary-title"},"Total Descent",-1),Hst={class:"summary-value"},Yst=N("i",{class:"fa-solid fa-arrow-trend-down"},null,-1),Ust={class:"summary-grid"},Vst={key:0,class:"summary-item"},Xst=N("div",{class:"summary-title"},"Avg Altitude",-1),jst={class:"summary-value"},qst=N("i",{class:"fa-solid fa-mountain"},null,-1),Zst={key:1,class:"summary-item"},Kst=N("div",{class:"summary-title"},"Max Altitude",-1),Jst={class:"summary-value"},Qst=N("i",{class:"fa-solid fa-mountain"},null,-1);function tot(e,t,n,i,r,s){var o,a,l,c,u,f,h;return mt(),wt("div",drt,[N("div",grt,[n.activityFiles&&n.activityFiles.length!=0?(mt(),wt("div",mrt," Created on: "+ht(s.toTimezoneDateString((a=(o=n.activityFiles[0])==null?void 0:o.fileId)==null?void 0:a.timeCreated,n.timezoneOffsetHour))+" "+ht(s.GMTString(n.timezoneOffsetHour)),1)):jt("",!0),n.activityFiles&&n.activityFiles.length!=0?(mt(),wt("div",prt," Device: "+ht((c=(l=n.activityFiles[0])==null?void 0:l.fileId)==null?void 0:c.manufacturer)+" ("+ht((f=(u=n.activityFiles[0])==null?void 0:u.fileId)==null?void 0:f.product)+") ",1)):jt("",!0)]),N("div",yrt,[N("div",_rt,[((h=n.activityFiles)==null?void 0:h.length)!=0?(mt(),wt("h4",vrt,"Summary")):jt("",!0),N("div",null,[N("div",wrt,[s.summary.sport?(mt(),wt("div",brt,[xrt,N("div",Ert,ht(s.summary.sport),1)])):jt("",!0),s.summary.subSport?(mt(),wt("div",Trt,[Crt,N("div",Srt,ht(s.summary.subSport),1)])):jt("",!0)]),N("div",Mrt,[s.summary.totalMovingTime?(mt(),wt("div",Rrt,[Art,N("div",Irt,[Lrt,Bt(" "+ht(s.secondsToDHMS(s.summary.totalMovingTime)),1)])])):jt("",!0),s.summary.totalElapsedTime?(mt(),wt("div",Ort,[krt,N("div",Frt,[Prt,Bt(" "+ht(s.secondsToDHMS(s.summary.totalElapsedTime)),1)])])):jt("",!0)]),N("div",Nrt,[s.summary.totalDistance?(mt(),wt("div",Drt,[$rt,N("div",zrt,[Wrt,Bt(" "+ht((s.summary.totalDistance/1e3).toFixed(2))+" km ",1)])])):jt("",!0),s.summary.totalCalories?(mt(),wt("div",Grt,[Brt,N("div",Hrt,[Yrt,Bt(" "+ht(s.summary.totalCalories.toLocaleString())+" Cal ",1)])])):jt("",!0)]),N("div",Urt,[s.summary.avgSpeed?(mt(),wt("div",Vrt,[Xrt,N("div",jrt,[qrt,Bt(" "+ht((s.summary.avgSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):jt("",!0),s.summary.maxSpeed?(mt(),wt("div",Zrt,[Krt,N("div",Jrt,[Qrt,Bt(" "+ht((s.summary.maxSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):jt("",!0)]),N("div",tst,[s.summary.avgHeartRate?(mt(),wt("div",est,[nst,N("div",ist,[rst,Bt(" "+ht(Math.round(s.summary.avgHeartRate))+" bpm ",1)])])):jt("",!0),s.summary.maxHeartRate?(mt(),wt("div",sst,[ost,N("div",ast,[lst,Bt(" "+ht(s.summary.maxHeartRate)+" bpm ",1)])])):jt("",!0)]),N("div",cst,[s.summary.avgCadence?(mt(),wt("div",ust,[fst,N("div",hst,[dst,Bt(" "+ht(Math.round(s.summary.avgCadence))+" rpm ",1)])])):jt("",!0),s.summary.maxCadence?(mt(),wt("div",gst,[mst,N("div",pst,[yst,Bt(" "+ht(s.summary.maxCadence)+" rpm ",1)])])):jt("",!0)]),N("div",_st,[s.summary.avgPower?(mt(),wt("div",vst,[wst,N("div",bst,[xst,Bt(" "+ht(Math.round(s.summary.avgPower)),1)])])):jt("",!0),s.summary.maxPower?(mt(),wt("div",Est,[Tst,N("div",Cst,[Sst,Bt(" "+ht(s.summary.maxPower),1)])])):jt("",!0)]),N("div",Mst,[s.summary.avgTemperature?(mt(),wt("div",Rst,[Ast,N("div",Ist,[Lst,Bt(" "+ht(Math.round(s.summary.avgTemperature))+" °C ",1)])])):jt("",!0),s.summary.maxTemperature?(mt(),wt("div",Ost,[kst,N("div",Fst,[Pst,Bt(" "+ht(s.summary.maxTemperature)+" °C ",1)])])):jt("",!0)]),N("div",Nst,[s.summary.totalAscent?(mt(),wt("div",Dst,[$st,N("div",zst,[Wst,Bt(" "+ht(s.summary.totalAscent)+" m ",1)])])):jt("",!0),s.summary.totalDescent?(mt(),wt("div",Gst,[Bst,N("div",Hst,[Yst,Bt(" "+ht(s.summary.totalDescent)+" m ",1)])])):jt("",!0)]),N("div",Ust,[s.summary.avgAltitude?(mt(),wt("div",Vst,[Xst,N("div",jst,[qst,Bt(" "+ht(s.summary.avgAltitude.toFixed(2))+" m ",1)])])):jt("",!0),s.summary.maxAltitude?(mt(),wt("div",Zst,[Kst,N("div",Jst,[Qst,Bt(" "+ht(s.summary.maxAltitude.toFixed(2))+" m ",1)])])):jt("",!0)])])])])])}const $C=wr(hrt,[["render",tot]]),eot={props:{id:String,isActivityFileReady:Boolean,isWebAssemblySupported:Boolean}};const not={class:"navigator"},iot={class:"navigator-input mx-auto"},rot=["id","disabled"];function sot(e,t,n,i,r,s){return mt(),wt("div",not,[N("div",iot,[N("input",{class:"form-control form-control-sm",type:"file",id:n.id??"fileInput",accept:".fit",multiple:"",disabled:!n.isWebAssemblySupported},null,8,rot)])])}const a1=wr(eot,[["render",sot]]);class oot{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,n){if(n){let i=n.dataProjection?Fe(n.dataProjection):this.readProjection(t);n.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Fe(i),i.setWorldExtent(n.extent)),n={dataProjection:i,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return Et()}readFeature(t,n){return Et()}readFeatures(t,n){return Et()}readGeometry(t,n){return Et()}readProjection(t){return Et()}writeFeature(t,n){return Et()}writeFeatures(t,n){return Et()}writeGeometry(t,n){return Et()}}function Vk(e,t,n){const i=n?Fe(n.featureProjection):null,r=n?Fe(n.dataProjection):null;let s;if(i&&r&&!ko(i,r)?s=(t?e.clone():e).transform(t?i:r,t?r:i):s=e,t&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===e&&(s=e.clone()),s.applyTransform(a)}return s}class aot extends oot{constructor(){super()}getType(){return"json"}readFeature(t,n){return this.readFeatureFromObject(ed(t),this.getReadOptions(t,n))}readFeatures(t,n){return this.readFeaturesFromObject(ed(t),this.getReadOptions(t,n))}readFeatureFromObject(t,n){return Et()}readFeaturesFromObject(t,n){return Et()}readGeometry(t,n){return this.readGeometryFromObject(ed(t),this.getReadOptions(t,n))}readGeometryFromObject(t,n){return Et()}readProjection(t){return this.readProjectionFromObject(ed(t))}readProjectionFromObject(t){return Et()}writeFeature(t,n){return JSON.stringify(this.writeFeatureObject(t,n))}writeFeatureObject(t,n){return Et()}writeFeatures(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))}writeFeaturesObject(t,n){return Et()}writeGeometry(t,n){return JSON.stringify(this.writeGeometryObject(t,n))}writeGeometryObject(t,n){return Et()}}function ed(e){if(typeof e=="string"){const t=JSON.parse(e);return t||null}return e!==null?e:null}const lot=aot;class cot extends lot{constructor(t){t=t||{},super(),this.dataProjection=Fe(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Fe(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,n){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const r=l1(i.geometry,n),s=new md;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,n){const i=t;let r=null;if(i.type==="FeatureCollection"){const s=t;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a)r.push(this.readFeatureFromObject(o[a],n))}else r=[this.readFeatureFromObject(t,n)];return r}readGeometryFromObject(t,n){return l1(t,n)}readProjectionFromObject(t){const n=t.crs;let i;if(n)if(n.type=="name")i=Fe(n.properties.name);else if(n.type==="EPSG")i=Fe("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,n){n=this.adaptOptions(n);const i={type:"Feature",geometry:null,properties:null},r=t.getId();if(r!==void 0&&(i.id=r),!t.hasProperties())return i;const s=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=c1(o,n),delete s[t.getGeometryName()]),jl(s)||(i.properties=s),i}writeFeaturesObject(t,n){n=this.adaptOptions(n);const i=[];for(let r=0,s=t.length;r<s;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,n){return c1(t,this.adaptOptions(n))}}function l1(e,t){if(!e)return null;let n;switch(e.type){case"Point":{n=fot(e);break}case"LineString":{n=hot(e);break}case"Polygon":{n=pot(e);break}case"MultiPoint":{n=got(e);break}case"MultiLineString":{n=dot(e);break}case"MultiPolygon":{n=mot(e);break}case"GeometryCollection":{n=uot(e);break}default:throw new Error("Unsupported GeoJSON type: "+e.type)}return Vk(n,!1,t)}function uot(e,t){const n=e.geometries.map(function(i){return l1(i,t)});return new nit(n)}function fot(e){return new Zl(e.coordinates)}function hot(e){return new Dg(e.coordinates)}function dot(e){return new iit(e.coordinates)}function got(e){return new zk(e.coordinates)}function mot(e){return new sit(e.coordinates)}function pot(e){return new ro(e.coordinates)}function c1(e,t){e=Vk(e,!0,t);const n=e.getType();let i;switch(n){case"Point":{i=xot(e);break}case"LineString":{i=_ot(e);break}case"Polygon":{i=Eot(e,t);break}case"MultiPoint":{i=wot(e);break}case"MultiLineString":{i=vot(e);break}case"MultiPolygon":{i=bot(e,t);break}case"GeometryCollection":{i=yot(e,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return i}function yot(e,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(i){return c1(i,t)})}}function _ot(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function vot(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function wot(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function bot(e,t){let n;return t&&(n=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(n)}}function xot(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function Eot(e,t){let n;return t&&(n=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(n)}}const Xk=cot,k0=e=>(ic("data-v-3b693e29"),e=e(),rc(),e),Tot={class:"offcanvas offcanvas-start",tabindex:"-1",id:"offcanvasSummary","aria-labelledby":"offcanvasSummaryLabel"},Cot=k0(()=>N("div",{class:"offcanvas-header"},[N("h5",{class:"offcanvas-title title",id:"offcanvasSummaryLabel"},"Open Activity"),N("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),Sot={class:"offcanvas-body"},Mot={class:"activity container-fluid text-center"},Rot=k0(()=>N("div",{class:"header pt-5 pb-1"},[N("h2",{class:"title"},"Open Activity")],-1)),Aot={class:"col-12 col-md-7 col-xl-9 map-container"},Iot={class:"row"},Lot={class:kn(["col-12","map"])},Oot=k0(()=>N("div",{class:kn(["col-12","bottom-info-button"])},[N("nav",{class:"position-relative bottom-info-nav"},[N("div",{class:"nav nav-tabs",role:"tablist"},[N("button",{class:"nav-link d-md-none",type:"button",role:"tab","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasSummary","aria-controls":"offcanvasSummary","aria-label":"Toggle Summary"},[N("i",{class:"fa-solid fa-bar"}),Bt(" Summary ")]),N("button",{class:"nav-link active",id:"nav-elevation-tab","data-bs-toggle":"tab","data-bs-target":"#nav-graph",type:"button",role:"tab","aria-controls":"nav-graph","aria-selected":"true"}," Elevation ")])])],-1)),kot={class:kn(["col-12","bottom-info"])},Fot={class:"tab-content h-100"},Pot={class:kn(["tab-pane fade show active h-100","graph"]),id:"nav-graph",role:"tabpanel","aria-labelledby":"nav-elevation-tab",tabindex:"0"},Not=k0(()=>N("div",{class:kn(["tab-pane fade h-100","graph"]),id:"nav-hr",role:"tabpanel","aria-labelledby":"nav-hr-tab",tabindex:"0"},null,-1)),u1=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function";u1==!1&&alert("Sorry, it appears that your browser does not support WebAssembly :(");class Dot{constructor(t){xt(this,"feature");xt(this,"activityFile");xt(this,"err");const n=t;this.feature=n==null?void 0:n.feature,this.activityFile=new PN(n==null?void 0:n.activityFile),this.err=n==null?void 0:n.err}}const $ot={data(){return{decodeWorker:new Worker(new URL("/assets/fitsvc-decode-0a8043f3.js",self.location),{type:"module"}),geojsons:new Array,activityFiles:new Array,timezoneOffsetHour:0,timezoneOffsetHoursList:new Array,loading:!1,begin:0,features:new Array}},computed:{isActivityFileReady:function(){return this.activityFiles&&this.activityFiles.length>0},combinedRecords:function(){var e;return(e=this.activityFiles)==null?void 0:e.flatMap(t=>t.records)},hasCadence(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].cadence;if(typeof t=="number"&&t!=255&&t!=0)return!0}return!1},hasHeartRate(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].heartRate;if(typeof t=="number"&&t!=255&&t!=0)return!0}return!1},hasPower(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].power;if(typeof t=="number"&&t!=65535&&t!=0)return!0}return!1},hasTemperature(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].temperature;if(typeof t=="number"&&t!=127)return!0}return!1}},watch:{activityFiles:{async handler(e){var n,i;const t=new Array;for(let r=0;r<e.length;r++){if(!((n=e[r].activity)!=null&&n.timestamp)||!((i=e[r].activity)!=null&&i.localDateTime))return;const s=new Date(e[r].activity.localDateTime),o=new Date(e[r].activity.timestamp),a=s.getTime()-o.getTime(),l=Math.floor(a/1e3/3600);t.push(l)}this.timezoneOffsetHoursList=t,this.timezoneOffsetHour=t[0],console.log("timezone offsets:",t)}}},methods:{createFeatures(e){const t=[];return e.forEach((n,i)=>{const r=[];n.records.forEach(o=>{o.positionLong==null||o.positionLat==null||r.push([o.positionLong,o.positionLat])});const s=new Xk().readFeature({id:"lineString-"+i,type:"Feature",geometry:{type:"LineString",coordinates:r}});t.push(s)}),t},fileInputEventListener(e){var i;const t=e.target;if(!t.files)return;let n=new Array;for(let r=0;r<((i=t.files)==null?void 0:i.length);r++)n.push(new Promise((s,o)=>{const a=t.files[r];if(!a)return;const l=new FileReader;l.onload=c=>{const u=c.target.result;s(new Uint8Array(u))},l.onerror=o,l.readAsArrayBuffer(a)}));Promise.all(n).then(r=>{this.begin=new Date().getTime(),this.loading=!0,this.decodeWorker.postMessage(r)})},decodeWorkerOnMessage(e){const t=e.data;if(t.err!=""){console.error(`decode return with err: ${t.err}`),alert(`decode return with err: ${t.err}`),this.loading=!1;return}const n=new Array;for(let s=0;s<t.decodeResults.length;s++)n[s]=new Dot(t.decodeResults[s]);const i=new Date().getTime()-this.begin;console.group("Elapsed"),console.log("Decode took:		",t.took,"ms"),console.log("Interop wasm to js:	",i-t.took,"ms"),console.log("Total elapsed:		",i,"ms"),console.groupEnd();const r=new Array;for(let s=0;s<n.length;s++){let o=n[s].activityFile.records;o=this.smoothingElevation(o,30),o=this.calculateGrade(o,100),n[s].activityFile.records=o,r.push(n[s].activityFile)}this.activityFiles=r,this.features=this.createFeatures(r),this.loading=!1},calculateGrade(e,t){for(let n=0;n<e.length-1;n++){if(typeof e[n].altitude!="number")continue;let i=0,r=0;for(let s=n+1;s<e.length;s++){if(typeof e[s].altitude!="number")continue;const o=e[s].distance-e[n].distance;if(o>t)break;r=e[s].altitude-e[n].altitude,i=o}e[n].grade=r/i*100}return e},smoothingElevation(e,t){for(let n=1;n<e.length;n++){if(e[n].distance<t||typeof e[n].altitude!="number")continue;let i=0,r=0;for(let s=n;s>=0;s--){if(typeof e[s].altitude!="number")continue;if(e[n].distance-e[s].distance>t)break;i+=e[s].altitude,r++}e[n].altitude=i/r}return e},elevationOnRecord(e){this.$refs.theMap.showPopUpRecord(e)}},mounted(){var e,t;(e=document.getElementById("fileInput"))==null||e.addEventListener("change",this.fileInputEventListener),(t=document.getElementById("fileInputMobile"))==null||t.addEventListener("change",this.fileInputEventListener),this.decodeWorker.onmessage=this.decodeWorkerOnMessage}},zot=pi({...$ot,__name:"TheActivity",setup(e){return(t,n)=>(mt(),wt("div",null,[Lt(hm,null,{default:S1(()=>[en(Lt(xO,null,null,512),[[Tn,t.loading]])]),_:1}),N("div",Tot,[Cot,N("div",Sot,[Lt(a1,{isWebAssemblySupported:ar(u1),id:"fileInputMobile"},null,8,["isWebAssemblySupported"]),Lt($C,{activityFiles:t.activityFiles,timezoneOffsetHour:t.timezoneOffsetHour},null,8,["activityFiles","timezoneOffsetHour"])])]),N("div",Mot,[N("div",{class:kn(["row h-100",t.isActivityFileReady?"":"align-items-center"])},[N("div",{class:kn(["navigator","col-12",t.isActivityFileReady?"col-xl-3 col-md-5 d-none d-md-block":"col-md-12"])},[Rot,Lt(a1,{isWebAssemblySupported:ar(u1)},null,8,["isWebAssemblySupported"]),Lt($C,{activityFiles:t.activityFiles,timezoneOffsetHour:t.timezoneOffsetHour},null,8,["activityFiles","timezoneOffsetHour"])],2),en(N("div",Aot,[N("div",Iot,[N("div",Lot,[Lt(Uk,{features:t.features,"activity-files":t.activityFiles,timezoneOffsetHoursList:t.timezoneOffsetHoursList,hasCadence:t.hasCadence,hasHeartRate:t.hasHeartRate,hasPower:t.hasPower,hasTemperature:t.hasTemperature,ref:"theMap"},null,8,["features","activity-files","timezoneOffsetHoursList","hasCadence","hasHeartRate","hasPower","hasTemperature"])]),Oot,N("div",kot,[N("div",Fot,[N("div",Pot,[Lt(zK,{activityFiles:t.activityFiles,activityTimezoneOffset:t.timezoneOffsetHoursList,onRecord:t.elevationOnRecord},null,8,["activityFiles","activityTimezoneOffset","onRecord"])]),Not])])])],512),[[Tn,t.isActivityFileReady]])],2)])]))}});const Wot=wr(zot,[["__scopeId","data-v-3b693e29"]]),Got=pi({__name:"ActivityView",setup(e){return(t,n)=>(mt(),wt("main",null,[Lt(Wot)]))}}),Bot={props:{name:{type:String,required:!0},icon:String,recordField:{type:String,required:!0},graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},yLabel:{type:String,required:!0},unit:{type:String,required:!0},color:{type:String,required:!0},pointerColor:{type:String,default:"#78e08f"},summary:xr,receivedRecord:ne,avg:String,max:String},data(){return{previousWindowWidth:0,hoveredRecord:new ne,recordView:new ne,xScale:nr()}},watch:{receivedRecord:{handler(e){this.recordView=e;const t=di(this.$refs[`${this.name}`]).select("g#pointer");if(JSON.stringify(e)==JSON.stringify(new ne)){t.style("opacity",0);return}t.style("opacity",1),t.attr("transform",`translate(${this.xScale(e.distance/1e3)}, 0)`)}},hoveredRecord:{async handler(e){this.recordView=e,this.$emit("hoveredRecord",e)}},graphRecords:{async handler(){this.$nextTick(()=>{requestAnimationFrame(()=>this.renderGraph())})}}},methods:{renderGraph(){const e=this.graphRecords;if(e.length==0)return;const t=25,n=5,i=35,r=35,s=this.$el,o=s.clientWidth,a=s.clientHeight-i,l=o>720?10:5,c=3,u=di(this.$refs[`${this.name}`]);u.select("svg").on("pointerdown",null).on("pointermove",null).on("mouseleave",null).remove();const f=u.append("svg").attr("width",o).attr("height",a).style("touch-action","none").style("user-select","none").style("--webkit-user-select","none").style("--ms-user-select","none"),h=nr().domain(ye(e,w=>w.distance/1e3)).range([r,o-n]);this.xScale=h;const d=nr().domain(ye(e,w=>w.altitude)).rangeRound([a-i,t]).nice(),g=nr().domain(ye(e,w=>this.scaleUnit(w[this.recordField])??0)).rangeRound([a-i,t]).nice();f.append("g").style("font-size","0.9em").attr("transform",`translate(0,${a-i})`).call(z1(h).ticks(l)),f.append("g").style("font-size","0.9em").attr("transform",`translate(${r},0)`).call(hM(g).ticks(c).tickFormat(ao("~s"))),f.append("text").attr("class","x-axis-label").attr("x",o-n-70).attr("y",t-15).style("fill","currentColor").style("font-size","0.9em").text("Dist. (km) →"),f.append("foreignObject").attr("x",0).attr("y",-5).attr("width",o).attr("height",100).attr("class","text-start").style("font-size","0.9em").style("width","100%").html(`
            <span>↑ ${this.yLabel}&nbsp;</span>
            <span>
                Avg: ${this.avg} ${this.unit}&nbsp;
            </span>
            <span>
                Max: ${this.max} ${this.unit}&nbsp;
            </span>
            `),f.append("g").attr("stroke","currentColor").attr("stroke-opacity",.1).style("stroke","lightgray").style("stroke-dasharray","2,2").call(w=>w.append("g").selectAll("line").data(h.ticks(l)).join("line").attr("x1",v=>.5+h(v)).attr("x2",v=>.5+h(v)).attr("y1",t).attr("y2",a-i)).call(w=>w.append("g").selectAll("line").data(g.ticks(c)).join("line").attr("y1",v=>.5+g(v)).attr("y2",v=>.5+g(v)).attr("x1",r).attr("x2",o-n));const m=Nl().curve(Bu).x(w=>h(w.distance/1e3)).y0(d(Xe(d.domain()))).y1(w=>d(w.altitude??0));f.append("g").append("path").datum(e).transition().attr("fill","lightgrey").style("opacity",.9).attr("d",m);const _=Nl().curve(Bu).x(w=>h(w.distance/1e3)).y0(g(Xe(g.domain()))).y1(w=>g(this.scaleUnit(w[this.recordField])??0));f.append("g").append("path").datum(e).transition().attr("fill",`${this.color}`).style("opacity",.8).attr("d",_);const p=f.append("g").attr("id","pointer").style("opacity",0).call(w=>{w.append("line").attr("x1",0).attr("y1",t).attr("x2",0).attr("y2",a-i).attr("stroke",`${this.pointerColor}`).attr("stroke-width",1.5)}).call(w=>{w.append("polygon").attr("points","0,30 -5,20 5,20").attr("fill",`${this.pointerColor}`)}),y=w=>{const[v]=B1(w),[x,b]=h.range();if(p.style("opacity",1),v<=x){p.attr("transform",`translate(${x}, 0)`),this.hoveredRecord=this.records[0];return}else if(v>=b){p.attr("transform",`translate(${b}, 0)`),this.hoveredRecord=this.records[this.records.length-1];return}p.attr("transform",`translate(${v}, 0)`);const E=(v-x)/(b-x),T=Math.round(E*this.records.length-1);let M=new ne,C=Number.MAX_VALUE;if(h(this.records[T].distance/1e3)<=v)for(let R=T;R<this.records.length;R++){const A=Math.abs(v-h(this.records[R].distance/1e3));if(A>C)break;M=this.records[R],C=A}else for(let R=T;R>=0;R--){const A=Math.abs(v-h(this.records[R].distance/1e3));if(A>C)break;M=this.records[R],C=A}this.hoveredRecord=M};f.on("pointerdown",y),f.on("pointermove",y,{passive:!0}),f.on("mouseleave",()=>{this.hoveredRecord=new ne,p.style("opacity",0)})},scaleUnit(e){return this.recordField==="speed"&&(e=e*3600/1e3),isNaN(e)?null:e},onResize(){this.$nextTick(()=>{window.innerWidth!=this.previousWindowWidth&&(this.previousWindowWidth=window.innerWidth,this.renderGraph())})}},mounted(){this.$nextTick(()=>this.previousWindowWidth=window.innerHeight),window.addEventListener("resize",this.onResize)},unmounted(){window.removeEventListener("resize",this.onResize)}};const Hot={class:"col-12 h-100"},Yot={class:"line-graph-hover row"},Uot={class:"col text-start"},Vot={style:{"text-align":"left",display:"inline-block"}},Xot={class:"col text-end"};function jot(e,t,n,i,r,s){var o;return mt(),wt("div",Hot,[N("div",Yot,[N("div",Uot,[N("h6",Vot,[Bt(ht(n.name)+" ",1),N("i",{class:kn(["fa-solid",n.icon])},null,2)])]),N("div",Xot,[N("span",null,ht(((o=s.scaleUnit(r.recordView[n.recordField]))==null?void 0:o.toFixed(2))??"0.00")+" "+ht(n.unit)+"  ",1)])]),N("div",{ref:n.name},null,512)])}const nh=wr(Bot,[["render",jot],["__scopeId","data-v-afd2207c"]]),qot={class:"col-12 h-100 pt-2"},Zot={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:xr,receivedRecord:ne},methods:{onHoveredRecord(e){this.$emit("hoveredRecord",e)}}},Kot=pi({...Zot,__name:"CadenceGraph",setup(e){return(t,n)=>{var i,r,s,o;return mt(),wt("div",qot,[Lt(nh,{name:"Cadence",icon:"fa-rotate","record-field":"cadence",avg:((r=(i=e.summary)==null?void 0:i.avgCadence)==null?void 0:r.toFixed(0))??0,max:((o=(s=e.summary)==null?void 0:s.maxCadence)==null?void 0:o.toFixed(0))??0,records:e.records,"graph-records":e.graphRecords,summary:e.summary,color:"darkslateblue","y-label":"Cad. (rpm)",unit:"rpm","received-record":e.receivedRecord,onHoveredRecord:t.onHoveredRecord},null,8,["avg","max","records","graph-records","summary","y-label","received-record","onHoveredRecord"])])}}}),Jot={props:{name:{type:String,required:!0},graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},summary:xr,receivedRecord:ne},data(){return{begin:new Date,elapsed:0,hoveredRecord:new ne,recordView:new ne,previousWindowWidth:0,xScale:nr(),color:fA().domain([-45,45]).interpolator(DM(["darkgreen","darkgreen","darkgreen","darkgreen","darkgreen","limegreen","limegreen","lemonchiffon","lemonchiffon","red","red","darkred","darkred","darkred","darkred","darkred"]))}},watch:{graphRecords:{async handler(){this.$nextTick(()=>{requestAnimationFrame(()=>this.renderGraph())})}},receivedRecord:{handler(e){this.recordView=e;const t=di(this.$refs[`${this.name}`]).select("g#pointer");if(JSON.stringify(e)==JSON.stringify(new ne)){t.style("opacity",0);return}t.style("opacity",1),t.attr("transform",`translate(${this.xScale(e.distance/1e3)}, 0)`)}},hoveredRecord:{handler(e){this.recordView=e,this.$emit("hoveredRecord",e)}}},methods:{formatDuration:bK,renderGraph(){var w,v,x,b,E,T;const e=this.graphRecords;if(e.length==0)return;this.hoveredRecord=new ne,this.begin=Xe(e.map(M=>new Date(M.timestamp)));const t=25,n=5,i=35,r=35,s=this.$el,o=s.clientWidth,a=s.clientHeight-i,l=o>720?10:5,c=3,u=di(this.$refs[`${this.name}`]);u.select("svg").on("pointerdown",null).on("pointermove",null).on("mouseleave",null).remove();const f=u.append("svg").attr("width",o).attr("height",a).style("touch-action","none").style("user-select","none").style("--webkit-user-select","none").style("--ms-user-select","none"),h=nr().domain(ye(e,M=>M.distance/1e3)).range([r,o-n]);this.xScale=h;const d=nr().domain(ye(e,M=>M.altitude)).rangeRound([a-i,t]).nice();f.append("g").style("font-size","0.9em").attr("transform",`translate(0,${a-i})`).call(z1(h).ticks(l)),f.append("g").style("font-size","0.9em").attr("transform",`translate(${r},0)`).call(hM(d).ticks(c).tickFormat(ao("~s"))),f.append("text").attr("class","x-axis-label").attr("x",o-n-70).attr("y",t-15).style("fill","currentColor").style("font-size","0.9em").text("Dist. (km) →"),f.append("foreignObject").attr("x",0).attr("y",-5).attr("width",o).attr("height",100).attr("class","text-start").style("font-size","0.9em").style("width","100%").html(`
            <span>↑ Alt. (m)&nbsp;</span>
            <span>
                <i class="fa-solid fa-solid fa-mountain"></i>
                ${(v=(w=this.summary)==null?void 0:w.maxAltitude)==null?void 0:v.toFixed(0)} m&nbsp;
            </span>
            <span>
                <i class="fa-solid fa-arrow-trend-up"></i>
                ${(b=(x=this.summary)==null?void 0:x.totalAscent)==null?void 0:b.toFixed(0)} m&nbsp;
            </span>
            <span>
                <i class="fa-solid fa-arrow-trend-down"></i>
                ${(T=(E=this.summary)==null?void 0:E.totalDescent)==null?void 0:T.toFixed(0)} m&nbsp;
            </span>
            `),f.append("g").attr("stroke","currentColor").attr("stroke-opacity",.1).style("stroke","lightgray").style("stroke-dasharray","2,2").call(M=>M.append("g").selectAll("line").data(h.ticks(l)).join("line").attr("x1",C=>.5+h(C)).attr("x2",C=>.5+h(C)).attr("y1",t).attr("y2",a-i)).call(M=>M.append("g").selectAll("line").data(d.ticks(c)).join("line").attr("y1",C=>.5+d(C)).attr("y2",C=>.5+d(C)).attr("x1",r).attr("x2",o-n));const g=Nl().curve(Bu).x(M=>h(M.distance/1e3)).y0(d(Xe(d.domain()))).y1(M=>d(M.altitude??0));f.append("g").append("path").datum(e).transition().attr("fill","#222222").style("opacity",1).attr("d",g);const m=`linearGradient-${this.name}`;f.append("linearGradient").attr("id",m).attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("x2",o).selectAll("stop").data(e).join("stop").attr("offset",M=>h(M.distance/1e3)/o).attr("stop-color",M=>this.color(M.grade));const _=cv().curve(Bu).x(M=>h(M.distance/1e3)).y(M=>d(M.altitude??0));f.append("g").append("path").datum(e).transition().attr("fill","none").attr("stroke",`url(#${m})`).attr("stroke-width",3).attr("d",_);const p=f.append("g").attr("id","pointer").style("opacity",0).call(M=>{M.append("line").attr("x1",0).attr("y1",t).attr("x2",0).attr("y2",a-i).attr("stroke","#78e08f").attr("stroke-width",1.5)}).call(M=>{M.append("polygon").attr("points","0,30 -5,20 5,20").attr("fill","#78e08f")}),y=M=>{const[C]=B1(M),[R,A]=h.range();if(p.style("opacity",1),C<=R){p.attr("transform",`translate(${R}, 0)`),this.hoveredRecord=this.records[0];return}else if(C>=A){p.attr("transform",`translate(${A}, 0)`),this.hoveredRecord=this.records[this.records.length-1];return}p.attr("transform",`translate(${C}, 0)`);const k=(C-R)/(A-R),O=Math.round(k*this.records.length-1);let I=new ne,F=Number.MAX_VALUE;if(h(this.records[O].distance/1e3)<=C)for(let P=O;P<this.records.length;P++){const G=Math.abs(C-h(this.records[P].distance/1e3));if(G>F)break;I=this.records[P],F=G}else for(let P=O;P>=0;P--){const G=Math.abs(C-h(this.records[P].distance/1e3));if(G>F)break;I=this.records[P],F=G}this.hoveredRecord=I};f.on("pointerdown",y),f.on("pointermove",y,{passive:!0}),f.on("mouseleave",()=>{this.hoveredRecord=new ne,p.style("opacity",0)})},onResize(){this.$nextTick(()=>{window.innerWidth!=this.previousWindowWidth&&(this.previousWindowWidth=window.innerWidth,this.renderGraph())})}},mounted(){this.$nextTick(()=>this.previousWindowWidth=window.innerHeight),window.addEventListener("resize",this.onResize)},unmounted(){window.removeEventListener("resize",this.onResize)}};const ih=e=>(ic("data-v-a3d4cadd"),e=e(),rc(),e),Qot={class:"col-12 h-100 pt-2"},tat={class:"row"},eat=ih(()=>N("div",{class:"col"},[N("h6",{class:"pt-1",style:{"text-align":"left"}},[Bt(" Elevation "),N("i",{class:"fa-solid fa-solid fa-mountain"})])],-1)),nat={class:"col text-md-end text-sm-center elevation-hover"},iat={class:"text-start"},rat=ih(()=>N("i",{class:"fa-solid fa-hourglass-half"},null,-1)),sat={class:"text-end"},oat=ih(()=>N("i",{class:"fa-solid fa-road"},null,-1)),aat={class:"text-end"},lat=ih(()=>N("i",{class:"fa-solid fa-mountain"},null,-1)),cat={class:"text-end"},uat=ih(()=>N("i",{class:"fa-solid fa-arrow-up-right-dots fa-sm"},null,-1));function fat(e,t,n,i,r,s){var o;return mt(),wt("div",Qot,[N("div",tat,[eat,N("div",nat,[N("span",iat,[rat,Bt(" "+ht(r.recordView.timestamp?s.formatDuration(new Date(r.recordView.timestamp).getTime()-r.begin.getTime()):"0 s"),1)]),N("span",sat,[oat,Bt(" "+ht(typeof r.recordView.distance=="number"?(r.recordView.distance/1e3).toFixed(2):"0.00")+" km ",1)]),N("span",aat,[lat,Bt(" "+ht(((o=r.recordView.altitude)==null?void 0:o.toFixed(0))??"0")+" m ",1)]),N("span",cat,[uat,Bt(" "+ht(r.recordView.grade?Math.round(r.recordView.grade):"0")+" % ",1)])])]),N("div",{ref:n.name},null,512)])}const hat=wr(Jot,[["render",fat],["__scopeId","data-v-a3d4cadd"]]),dat={class:"col-12 h-100 pt-2"},gat={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:xr,receivedRecord:ne},methods:{onHoveredRecord(e){this.$emit("hoveredRecord",e)}}},mat=pi({...gat,__name:"HeartRateGraph",setup(e){return(t,n)=>{var i,r,s,o;return mt(),wt("div",dat,[Lt(nh,{name:"Heart Rate",icon:"fa-heart-pulse","record-field":"heartRate",avg:((r=(i=e.summary)==null?void 0:i.avgHeartRate)==null?void 0:r.toFixed(0))??0,max:((o=(s=e.summary)==null?void 0:s.maxHeartRate)==null?void 0:o.toFixed(0))??0,records:e.records,"graph-records":e.graphRecords,summary:e.summary,color:"red","y-label":"HR (bpm)",unit:"bpm","received-record":e.receivedRecord,onHoveredRecord:t.onHoveredRecord},null,8,["avg","max","records","graph-records","summary","y-label","received-record","onHoveredRecord"])])}}}),pat={class:"col-12 h-100 pt-2"},yat={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:xr,receivedRecord:ne},methods:{onHoveredRecord(e){this.$emit("hoveredRecord",e)}}},_at=pi({...yat,__name:"PowerGraph",setup(e){return(t,n)=>{var i,r,s,o;return mt(),wt("div",pat,[Lt(nh,{name:"Power",icon:"fa-bolt-lightning","record-field":"power",avg:((r=(i=e.summary)==null?void 0:i.avgPower)==null?void 0:r.toFixed(0))??0,max:((o=(s=e.summary)==null?void 0:s.maxPower)==null?void 0:o.toFixed(0))??0,records:e.records,"graph-records":e.graphRecords,summary:e.summary,color:"darkslategray","y-label":"Pwr. (watts)",unit:"w","received-record":e.receivedRecord,onHoveredRecord:t.onHoveredRecord},null,8,["avg","max","records","graph-records","summary","y-label","received-record","onHoveredRecord"])])}}}),vat={class:"col-12 h-100 pt-2"},wat={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:xr,receivedRecord:ne},methods:{onHoveredRecord(e){this.$emit("hoveredRecord",e)}}},bat=pi({...wat,__name:"SpeedGraph",setup(e){return(t,n)=>{var i,r,s,o;return mt(),wt("div",vat,[Lt(nh,{name:"Speed",icon:"fa-gauge-high","record-field":"speed",avg:(i=e.summary)!=null&&i.avgSpeed?(((r=e.summary)==null?void 0:r.avgSpeed)*3600/1e3).toFixed(2):"0.00",max:(s=e.summary)!=null&&s.maxSpeed?(((o=e.summary)==null?void 0:o.maxSpeed)*3600/1e3).toFixed(2):"0.00",records:e.records,"graph-records":e.graphRecords,summary:e.summary,color:"lightgreen","pointer-color":"#7f8c8d","y-label":"Spd. (km/h)",unit:"km/h","received-record":e.receivedRecord,onHoveredRecord:t.onHoveredRecord},null,8,["avg","max","records","graph-records","summary","y-label","received-record","onHoveredRecord"])])}}}),xat={class:"col-12 h-100 pt-2"},Eat={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:xr,receivedRecord:ne},methods:{onHoveredRecord(e){this.$emit("hoveredRecord",e)}}},Tat=pi({...Eat,__name:"TemperatureGraph",setup(e){return(t,n)=>{var i,r,s,o;return mt(),wt("div",xat,[Lt(nh,{name:"Temperature",icon:"fa-temperature-low","record-field":"temperature",avg:((r=(i=e.summary)==null?void 0:i.avgTemperature)==null?void 0:r.toFixed(0))??0,max:((o=(s=e.summary)==null?void 0:s.maxTemperature)==null?void 0:o.toFixed(0))??0,records:e.records,"graph-records":e.graphRecords,summary:e.summary,color:"midnightblue","y-label":"Temp (°C)",unit:"°C","received-record":e.receivedRecord,onHoveredRecord:t.onHoveredRecord},null,8,["avg","max","records","graph-records","summary","y-label","received-record","onHoveredRecord"])])}}}),Cat={props:{activityFiles:Array,timezoneOffsetHour:Number},computed:{summary(){const e=new xr;for(let t=0;t<this.activityFiles.length;t++)for(let n=0;n<this.activityFiles[t].sessions.length;n++){const i=this.activityFiles[t].sessions[n];e.sport=i.sport,e.subSport=i.subSport,e.totalMovingTime=Ye(e.totalMovingTime,i.totalMovingTime),e.totalElapsedTime=Ye(e.totalElapsedTime,i.totalElapsedTime),e.totalTimerTime=Ye(e.totalTimerTime,i.totalTimerTime),e.totalDistance=Ye(e.totalDistance,i.totalDistance),e.totalAscent=Ye(e.totalAscent,i.totalAscent),e.totalDescent=Ye(e.totalDescent,i.totalDescent),e.totalCycles=Ye(e.totalCycles,i.totalCycles),e.totalCalories=Ye(e.totalCalories,i.totalCalories),e.avgSpeed=Sn(e.avgSpeed,i.avgSpeed),e.maxSpeed=Mn(e.maxSpeed,i.maxSpeed),e.avgHeartRate=Sn(e.avgHeartRate,i.avgHeartRate),e.maxHeartRate=Mn(e.maxHeartRate,i.maxHeartRate),e.avgCadence=Sn(e.avgCadence,i.avgCadence),e.maxCadence=Mn(e.maxCadence,i.maxCadence),e.avgPower=Sn(e.avgPower,i.avgPower),e.maxPower=Mn(e.maxPower,i.maxPower),e.avgTemperature=Sn(e.avgTemperature,i.avgTemperature),e.maxTemperature=Mn(e.maxTemperature,i.maxTemperature),e.avgAltitude=Sn(e.avgAltitude,i.avgAltitude),e.maxAltitude=Mn(e.maxAltitude,i.maxAltitude)}return this.$emit("summary",e),e}},methods:{toTimezoneDateString:$w,GMTString:wO,secondsToDHMS:bO,avg:Sn,max:Mn,sum:Ye}};const po=e=>(ic("data-v-db29665a"),e=e(),rc(),e),Sat={class:"navigator"},Mat={class:"navigator-info"},Rat={key:0,class:"time-created"},Aat={class:"row pt-4",style:{"font-size":"1em"}},Iat={key:0,class:"col text-start"},Lat={key:0},Oat={key:1,class:"col text-end"},kat={class:"row pt-2"},Fat={key:0,class:"col"},Pat=po(()=>N("div",{class:"summary-title"},"Total Elapsed",-1)),Nat={class:"summary-value"},Dat=po(()=>N("i",{class:"fa-solid fa-hourglass-end"},null,-1)),$at={key:1,class:"col"},zat={class:"row"},Wat=po(()=>N("div",{class:"summary-title"},"Total Moving",-1)),Gat={class:"summary-value"},Bat=po(()=>N("i",{class:"fa-solid fa-hourglass-half"},null,-1)),Hat={key:2,class:"col"},Yat=po(()=>N("div",{class:"summary-title"},"Total Distance",-1)),Uat={class:"summary-value"},Vat=po(()=>N("i",{class:"fa-solid fa-road"},null,-1)),Xat={key:3,class:"col"},jat=po(()=>N("div",{class:"summary-title"},"Total Calories",-1)),qat={class:"summary-value"},Zat=po(()=>N("i",{class:"fa-solid fa-droplet"},null,-1));function Kat(e,t,n,i,r,s){var o,a,l,c,u,f;return mt(),wt("div",Sat,[N("div",Mat,[n.activityFiles&&n.activityFiles.length!=0?(mt(),wt("div",Rat," Created on: "+ht(s.toTimezoneDateString((a=(o=n.activityFiles[0])==null?void 0:o.fileId)==null?void 0:a.timeCreated,n.timezoneOffsetHour))+" "+ht(s.GMTString(n.timezoneOffsetHour)),1)):jt("",!0),N("div",Aat,[s.summary.sport?(mt(),wt("div",Iat,[N("span",null,[Bt(" Sport: "+ht(s.summary.sport)+" ",1),s.summary.subSport?(mt(),wt("span",Lat,"("+ht(s.summary.subSport)+")",1)):jt("",!0)])])):jt("",!0),n.activityFiles&&n.activityFiles.length!=0?(mt(),wt("div",Oat," Device: "+ht((c=(l=n.activityFiles[0])==null?void 0:l.fileId)==null?void 0:c.manufacturer)+" ("+ht((f=(u=n.activityFiles[0])==null?void 0:u.fileId)==null?void 0:f.product)+") ",1)):jt("",!0)])]),N("div",kat,[s.summary.totalElapsedTime?(mt(),wt("div",Fat,[Pat,N("div",Nat,[Dat,Bt(" "+ht(s.secondsToDHMS(s.summary.totalElapsedTime)),1)])])):jt("",!0),s.summary.totalMovingTime?(mt(),wt("div",$at,[N("div",zat,[Wat,N("div",Gat,[Bat,Bt(" "+ht(s.secondsToDHMS(s.summary.totalMovingTime)),1)])])])):jt("",!0),s.summary.totalDistance?(mt(),wt("div",Hat,[Yat,N("div",Uat,[Vat,Bt(" "+ht((s.summary.totalDistance/1e3).toFixed(2))+" km ",1)])])):jt("",!0),s.summary.totalCalories?(mt(),wt("div",Xat,[jat,N("div",qat,[Zat,Bt(" "+ht(s.summary.totalCalories.toLocaleString())+" Cal ",1)])])):jt("",!0)])])}const Jat=wr(Cat,[["render",Kat],["__scopeId","data-v-db29665a"]]),F0=e=>(ic("data-v-a26969e0"),e=e(),rc(),e),Qat={class:"activity container-fluid text-center flex-container"},tlt=F0(()=>N("div",{class:"header pt-4 pb-2"},[N("h5",{class:"title"},"Open Activity"),N("span",{style:{"font-size":"0.9em"}}," Your Data, Your Control: 100% Client-Side Power. ")],-1)),elt={class:"mb-4"},nlt={class:"graph"},ilt={class:"graph"},rlt={class:"graph"},slt={class:"graph"},olt={class:"graph"},alt={class:"footer pt-3"},llt={class:"mx-1"},clt=F0(()=>N("i",{class:"fa-solid fa-copyright fa-rotate-180"},null,-1)),ult=F0(()=>N("span",{class:"mx-1"},[N("a",{href:"http://github.com/openivity/openivity.github.io",target:"_blank"},[N("i",{class:"fa-brands fa-github"}),Bt(" Code ")])],-1)),flt=F0(()=>N("div",{class:"mx-1 pt-1"},"Openivity's Open Source Project",-1)),hlt={id:"right",class:"col-12 col-xxl-9 col-xl-8 col-lg-7 map-container"},dlt={class:"row"},glt={class:kn(["col-12","map"])},mlt={class:"col-12 elevation-section"},jk=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function";jk==!1&&alert("Sorry, it appears that your browser does not support WebAssembly :(");const plt={data(){return{loading:!1,decodeWorker:new Worker(new URL("/assets/fitsvc-decode-0a8043f3.js",self.location),{type:"module"}),decodeBeginTimestamp:0,activityFiles:new Array,features:new Array,combinedRecords:new Array,graphRecords:new Array,summary:new xr,hoveredRecord:new ne}},computed:{isActivityFileReady:function(){return this.activityFiles&&this.activityFiles.length>0},createdAtTimezoneOffsetHour:function(){return this.timezoneOffsetHours.length==0?0:this.timezoneOffsetHours[0]},timezoneOffsetHours:function(){var t,n;const e=[];for(let i=0;i<this.activityFiles.length;i++){if(!((t=this.activityFiles[i].activity)!=null&&t.timestamp)||!((n=this.activityFiles[i].activity)!=null&&n.localDateTime)){e.push(0);continue}const r=new Date(this.activityFiles[i].activity.localDateTime),s=new Date(this.activityFiles[i].activity.timestamp),o=r.getTime()-s.getTime(),a=Math.floor(o/1e3/3600);e.push(a)}return e},hasCadence(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].cadence;if(typeof t=="number"&&t!=255&&t!=0)return!0}return!1},hasHeartRate(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].heartRate;if(typeof t=="number"&&t!=255&&t!=0)return!0}return!1},hasPower(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].power;if(typeof t=="number"&&t!=65535&&t!=0)return!0}return!1},hasTemperature(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].temperature;if(typeof t=="number"&&t!=127)return!0}return!1}},methods:{fileInputEventListener(e){var i;const t=e.target;if(!t.files)return;let n=new Array;for(let r=0;r<((i=t.files)==null?void 0:i.length);r++)n.push(new Promise((s,o)=>{const a=t.files[r];if(!a)return;const l=new FileReader;l.onload=c=>{const u=c.target.result;s(new Uint8Array(u))},l.onerror=o,l.readAsArrayBuffer(a)}));Promise.all(n).then(r=>{this.decodeBeginTimestamp=new Date().getTime(),this.loading=!0,this.decodeWorker.postMessage(r)})},decodeWorkerOnMessage(e){const t=e.data;if(t.err!=""){console.error(`decode return with err: ${t.err}`),alert(`decode return with err: ${t.err}`),this.loading=!1;return}const n=new Date().getTime()-this.decodeBeginTimestamp;console.group("Decoding"),console.debug("Decode took:		",t.took,"ms"),console.debug("Interop WASM to JS:	",n-t.took,"ms"),console.debug("Total elapsed:		",n,"ms"),console.groupEnd(),requestAnimationFrame(()=>this.preprocessingResults(t.decodeResults))},preprocessingResults(e){const t=new Array,n=new Date;for(let r=0;r<e.length;r++){let s=0,o=e[r].activityFile.records;const a=[];for(let l=0;l<o.length;l++){const c=o[l];typeof c.distance=="number"&&(c.distance+=s,a.push(c))}o=a,s=Ne(o.map(l=>l.distance)),o=this.smoothingElevation(o,30),o=this.calculateGrade(o,100),e[r].activityFile.records=o,t.push(e[r].activityFile)}this.activityFiles=t,this.features=this.createFeatures(t),this.combinedRecords=this.activityFiles.flatMap(r=>r.records),this.graphRecords=this.summarizeRecords(this.combinedRecords,100),setTimeout(()=>this.loading=!1,200);const i=new Date().getTime()-n.getTime();console.debug("Preprocessing Results:		",i,"ms")},createFeatures(e){const t=[];return e.forEach((n,i)=>{const r=[];n.records.forEach(o=>{o.positionLong==null||o.positionLat==null||r.push([o.positionLong,o.positionLat])});const s=new Xk().readFeature({id:"lineString-"+i,type:"Feature",geometry:{type:"LineString",coordinates:r}});t.push(s)}),t},smoothingElevation(e,t){for(let n=1;n<e.length;n++){if(e[n].distance<t||typeof e[n].altitude!="number")continue;let i=0,r=0;for(let s=n;s>=0;s--){if(typeof e[s].altitude!="number")continue;if(e[n].distance-e[s].distance>t)break;i+=e[s].altitude,r++}e[n].altitude=i/r}return e},calculateGrade(e,t){for(let n=0;n<e.length-1;n++){if(typeof e[n].altitude!="number")continue;let i=0,r=0;for(let s=n+1;s<e.length;s++){if(typeof e[s].altitude!="number")continue;const o=e[s].distance-e[n].distance;if(o>t)break;r=e[s].altitude-e[n].altitude,i=o}e[n].grade=r/i*100}return e},summarizeRecords(e,t){if(e.length==0)return e;let n=[],i=[],r=[],s=[],o=[],a=[],l=[];const c=[];let u=0;for(let f=0;f<e.length;f++){if(e[f].distance-e[u].distance>t){let d=new ne({timestamp:e[f].timestamp,distance:e[f].distance,positionLat:e[f].positionLat,positionLong:e[f].positionLong});n.length>0&&(d.altitude=n.reduce((g,m)=>g+m,0)/n.length),i.length>0&&(d.cadence=i.reduce((g,m)=>g+m,0)/i.length),l.length>0&&(d.grade=l.reduce((g,m)=>g+m,0)/l.length),r.length>0&&(d.heartRate=r.reduce((g,m)=>g+m,0)/r.length),o.length>0&&(d.power=o.reduce((g,m)=>g+m,0)/o.length),s.length>0&&(d.speed=s.reduce((g,m)=>g+m,0)/s.length),a.length>0&&(d.temperature=a.reduce((g,m)=>g+m,0)/a.length),c.push(d),n=[],i=[],r=[],s=[],o=[],a=[],l=[],u=f+1}e[f].altitude&&n.push(e[f].altitude),e[f].cadence&&i.push(e[f].cadence),e[f].heartRate&&r.push(e[f].heartRate),e[f].speed&&s.push(e[f].speed),e[f].power&&o.push(e[f].power),e[f].temperature&&a.push(e[f].temperature),e[f].grade&&l.push(e[f].grade)}return c},elevationOnRecord(e){this.$refs.theMap.showPopUpRecord(e)},receiveSummary(e){this.summary=e},onHoveredRecord(e){this.hoveredRecord=new ne(e)}},mounted(){var e;(e=document.getElementById("fileInput"))==null||e.addEventListener("change",this.fileInputEventListener),this.decodeWorker.onmessage=this.decodeWorkerOnMessage}},ylt=pi({...plt,__name:"TheActivity",setup(e){return(t,n)=>(mt(),wt("div",null,[Lt(hm,null,{default:S1(()=>[en(Lt(xO,null,null,512),[[Tn,t.loading]])]),_:1}),N("div",Qat,[N("div",{class:kn(["row h-100",t.isActivityFileReady?"":"align-items-center"])},[N("div",{id:"left",class:kn(["sidebar","col-12",t.isActivityFileReady?"col-xxl-3 col-xl-4 col-lg-5 d-md-block float-sm-right":"col-md-12 landing"])},[tlt,Lt(a1,{isActivityFileReady:t.isActivityFileReady,isWebAssemblySupported:ar(jk)},null,8,["isActivityFileReady","isWebAssemblySupported"]),en(N("div",elt,[Lt(Jat,{activityFiles:t.activityFiles,timezoneOffsetHour:t.createdAtTimezoneOffsetHour,onSummary:t.receiveSummary},null,8,["activityFiles","timezoneOffsetHour","onSummary"])],512),[[Tn,t.isActivityFileReady]]),en(N("div",nlt,[Lt(bat,{records:t.combinedRecords,"graph-records":t.graphRecords,summary:t.summary,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","graph-records","summary","received-record","onHoveredRecord"])],512),[[Tn,t.isActivityFileReady]]),en(N("div",ilt,[Lt(Kot,{records:t.combinedRecords,"graph-records":t.graphRecords,summary:t.summary,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","graph-records","summary","received-record","onHoveredRecord"])],512),[[Tn,t.hasCadence]]),en(N("div",rlt,[Lt(mat,{records:t.combinedRecords,"graph-records":t.graphRecords,summary:t.summary,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","graph-records","summary","received-record","onHoveredRecord"])],512),[[Tn,t.hasHeartRate]]),en(N("div",slt,[Lt(_at,{records:t.combinedRecords,"graph-records":t.graphRecords,summary:t.summary,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","graph-records","summary","received-record","onHoveredRecord"])],512),[[Tn,t.hasPower]]),en(N("div",olt,[Lt(Tat,{records:t.combinedRecords,"graph-records":t.graphRecords,summary:t.summary,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","graph-records","summary","received-record","onHoveredRecord"])],512),[[Tn,t.hasTemperature]]),N("span",alt,[N("span",llt,[clt,Bt(" "+ht(new Date().getFullYear()),1)]),ult,flt])],2),en(N("div",hlt,[N("div",dlt,[N("div",glt,[Lt(Uk,{features:t.features,"activity-files":t.activityFiles,timezoneOffsetHoursList:t.timezoneOffsetHours,hasCadence:t.hasCadence,hasHeartRate:t.hasHeartRate,hasPower:t.hasPower,hasTemperature:t.hasTemperature,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord,ref:"theMap"},null,8,["features","activity-files","timezoneOffsetHoursList","hasCadence","hasHeartRate","hasPower","hasTemperature","received-record","onHoveredRecord"])]),N("div",mlt,[Lt(hat,{name:"elev",summary:t.summary,records:t.combinedRecords,"graph-records":t.graphRecords,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["summary","records","graph-records","received-record","onHoveredRecord"])])])],512),[[Tn,t.isActivityFileReady]])],2)])]))}});const _lt=wr(ylt,[["__scopeId","data-v-a26969e0"]]),vlt=pi({__name:"ActivityView",setup(e){return(t,n)=>(mt(),wt("main",null,[Lt(_lt)]))}}),wlt=IN({history:XP("/"),routes:[{path:"/",name:"home",component:Got},{path:"/v0",name:"v0",component:vlt},{path:"/activity",name:"activity",component:()=>j0(()=>import("./ActivityView-771d43e1.js"),[])},{path:"/elevationgraph",name:"elevationgraph",component:()=>j0(()=>import("./ElevationGraph-bb7de019.js"),[])},{path:"/components/elevationgraph",name:"graph",component:()=>j0(()=>import("./ElevationGraphView-8ad30b79.js"),[])}]}),Rb=CP(ON);Rb.use(AP());Rb.use(wlt);Rb.mount("#app");export{zK as E,ne as R,Got as _,Lt as a,N as b,wt as c,pi as d,hat as e,mt as o};
