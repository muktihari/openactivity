var Ok=Object.defineProperty;var kk=(e,t,n)=>t in e?Ok(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ct=(e,t,n)=>(kk(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function j_(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const ae={},Ka=[],Ei=()=>{},Pk=()=>!1,Fk=/^on[^a-z]/,Gg=e=>Fk.test(e),Z_=e=>e.startsWith("onUpdate:"),Ie=Object.assign,q_=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Nk=Object.prototype.hasOwnProperty,$t=(e,t)=>Nk.call(e,t),xt=Array.isArray,Ja=e=>Wg(e)==="[object Map]",vC=e=>Wg(e)==="[object Set]",St=e=>typeof e=="function",ke=e=>typeof e=="string",K_=e=>typeof e=="symbol",fe=e=>e!==null&&typeof e=="object",EC=e=>fe(e)&&St(e.then)&&St(e.catch),TC=Object.prototype.toString,Wg=e=>TC.call(e),Dk=e=>Wg(e).slice(8,-1),CC=e=>Wg(e)==="[object Object]",J_=e=>ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Yh=j_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bg=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},$k=/-(\w)/g,er=Bg(e=>e.replace($k,(t,n)=>n?n.toUpperCase():"")),zk=/\B([A-Z])/g,Bl=Bg(e=>e.replace(zk,"-$1").toLowerCase()),Yg=Bg(e=>e.charAt(0).toUpperCase()+e.slice(1)),w0=Bg(e=>e?`on${Yg(e)}`:""),uu=(e,t)=>!Object.is(e,t),x0=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},nd=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Gk=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Wk=e=>{const t=ke(e)?Number(e):NaN;return isNaN(t)?e:t};let pb;const Hp=()=>pb||(pb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Eo(e){if(xt(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=ke(i)?Vk(i):Eo(i);if(r)for(const s in r)t[s]=r[s]}return t}else{if(ke(e))return e;if(fe(e))return e}}const Bk=/;(?![^(]*\))/g,Yk=/:([^]+)/,Uk=/\/\*[^]*?\*\//g;function Vk(e){const t={};return e.replace(Uk,"").split(Bk).forEach(n=>{if(n){const i=n.split(Yk);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Ug(e){let t="";if(ke(e))t=e;else if(xt(e))for(let n=0;n<e.length;n++){const i=Ug(e[n]);i&&(t+=i+" ")}else if(fe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Xk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hk=j_(Xk);function SC(e){return!!e||e===""}const zt=e=>ke(e)?e:e==null?"":xt(e)||fe(e)&&(e.toString===TC||!St(e.toString))?JSON.stringify(e,MC,2):String(e),MC=(e,t)=>t&&t.__v_isRef?MC(e,t.value):Ja(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:vC(t)?{[`Set(${t.size})`]:[...t.values()]}:fe(t)&&!xt(t)&&!CC(t)?String(t):t;let mi;class RC{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=mi,!t&&mi&&(this.index=(mi.scopes||(mi.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=mi;try{return mi=this,t()}finally{mi=n}}}on(){mi=this}off(){mi=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function jk(e){return new RC(e)}function Zk(e,t=mi){t&&t.active&&t.effects.push(e)}function qk(){return mi}const Q_=e=>{const t=new Set(e);return t.w=0,t.n=0,t},IC=e=>(e.w&Ns)>0,AC=e=>(e.n&Ns)>0,Kk=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ns},Jk=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];IC(r)&&!AC(r)?r.delete(e):t[n++]=r,r.w&=~Ns,r.n&=~Ns}t.length=n}},jp=new WeakMap;let kc=0,Ns=1;const Zp=30;let pi;const No=Symbol(""),qp=Symbol("");class t1{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Zk(this,i)}run(){if(!this.active)return this.fn();let t=pi,n=ks;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=pi,pi=this,ks=!0,Ns=1<<++kc,kc<=Zp?Kk(this):yb(this),this.fn()}finally{kc<=Zp&&Jk(this),Ns=1<<--kc,pi=this.parent,ks=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){pi===this?this.deferStop=!0:this.active&&(yb(this),this.onStop&&this.onStop(),this.active=!1)}}function yb(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let ks=!0;const LC=[];function Yl(){LC.push(ks),ks=!1}function Ul(){const e=LC.pop();ks=e===void 0?!0:e}function Tn(e,t,n){if(ks&&pi){let i=jp.get(e);i||jp.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=Q_()),OC(r)}}function OC(e,t){let n=!1;kc<=Zp?AC(e)||(e.n|=Ns,n=!IC(e)):n=!e.has(pi),n&&(e.add(pi),pi.deps.push(e))}function Br(e,t,n,i,r,s){const o=jp.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&xt(e)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":xt(e)?J_(n)&&a.push(o.get("length")):(a.push(o.get(No)),Ja(e)&&a.push(o.get(qp)));break;case"delete":xt(e)||(a.push(o.get(No)),Ja(e)&&a.push(o.get(qp)));break;case"set":Ja(e)&&a.push(o.get(No));break}if(a.length===1)a[0]&&Kp(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Kp(Q_(l))}}function Kp(e,t){const n=xt(e)?e:[...e];for(const i of n)i.computed&&_b(i);for(const i of n)i.computed||_b(i)}function _b(e,t){(e!==pi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Qk=j_("__proto__,__v_isRef,__isVue"),kC=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(K_)),t4=e1(),e4=e1(!1,!0),n4=e1(!0),wb=i4();function i4(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=Wt(this);for(let s=0,o=this.length;s<o;s++)Tn(i,"get",s+"");const r=i[t](...n);return r===-1||r===!1?i[t](...n.map(Wt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Yl();const i=Wt(this)[t].apply(this,n);return Ul(),i}}),e}function r4(e){const t=Wt(this);return Tn(t,"has",e),t.hasOwnProperty(e)}function e1(e=!1,t=!1){return function(i,r,s){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&s===(e?t?x4:$C:t?DC:NC).get(i))return i;const o=xt(i);if(!e){if(o&&$t(wb,r))return Reflect.get(wb,r,s);if(r==="hasOwnProperty")return r4}const a=Reflect.get(i,r,s);return(K_(r)?kC.has(r):Qk(r))||(e||Tn(i,"get",r),t)?a:en(a)?o&&J_(r)?a:a.value:fe(a)?e?GC(a):Xg(a):a}}const s4=PC(),o4=PC(!0);function PC(e=!1){return function(n,i,r,s){let o=n[i];if(hl(o)&&en(o)&&!en(r))return!1;if(!e&&(!id(r)&&!hl(r)&&(o=Wt(o),r=Wt(r)),!xt(n)&&en(o)&&!en(r)))return o.value=r,!0;const a=xt(n)&&J_(i)?Number(i)<n.length:$t(n,i),l=Reflect.set(n,i,r,s);return n===Wt(s)&&(a?uu(r,o)&&Br(n,"set",i,r):Br(n,"add",i,r)),l}}function a4(e,t){const n=$t(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Br(e,"delete",t,void 0),i}function l4(e,t){const n=Reflect.has(e,t);return(!K_(t)||!kC.has(t))&&Tn(e,"has",t),n}function c4(e){return Tn(e,"iterate",xt(e)?"length":No),Reflect.ownKeys(e)}const FC={get:t4,set:s4,deleteProperty:a4,has:l4,ownKeys:c4},u4={get:n4,set(e,t){return!0},deleteProperty(e,t){return!0}},f4=Ie({},FC,{get:e4,set:o4}),n1=e=>e,Vg=e=>Reflect.getPrototypeOf(e);function Xf(e,t,n=!1,i=!1){e=e.__v_raw;const r=Wt(e),s=Wt(t);n||(t!==s&&Tn(r,"get",t),Tn(r,"get",s));const{has:o}=Vg(r),a=i?n1:n?o1:fu;if(o.call(r,t))return a(e.get(t));if(o.call(r,s))return a(e.get(s));e!==r&&e.get(t)}function Hf(e,t=!1){const n=this.__v_raw,i=Wt(n),r=Wt(e);return t||(e!==r&&Tn(i,"has",e),Tn(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function jf(e,t=!1){return e=e.__v_raw,!t&&Tn(Wt(e),"iterate",No),Reflect.get(e,"size",e)}function xb(e){e=Wt(e);const t=Wt(this);return Vg(t).has.call(t,e)||(t.add(e),Br(t,"add",e,e)),this}function bb(e,t){t=Wt(t);const n=Wt(this),{has:i,get:r}=Vg(n);let s=i.call(n,e);s||(e=Wt(e),s=i.call(n,e));const o=r.call(n,e);return n.set(e,t),s?uu(t,o)&&Br(n,"set",e,t):Br(n,"add",e,t),this}function vb(e){const t=Wt(this),{has:n,get:i}=Vg(t);let r=n.call(t,e);r||(e=Wt(e),r=n.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return r&&Br(t,"delete",e,void 0),s}function Eb(){const e=Wt(this),t=e.size!==0,n=e.clear();return t&&Br(e,"clear",void 0,void 0),n}function Zf(e,t){return function(i,r){const s=this,o=s.__v_raw,a=Wt(o),l=t?n1:e?o1:fu;return!e&&Tn(a,"iterate",No),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function qf(e,t,n){return function(...i){const r=this.__v_raw,s=Wt(r),o=Ja(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=r[e](...i),u=n?n1:t?o1:fu;return!t&&Tn(s,"iterate",l?qp:No),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function rs(e){return function(...t){return e==="delete"?!1:this}}function h4(){const e={get(s){return Xf(this,s)},get size(){return jf(this)},has:Hf,add:xb,set:bb,delete:vb,clear:Eb,forEach:Zf(!1,!1)},t={get(s){return Xf(this,s,!1,!0)},get size(){return jf(this)},has:Hf,add:xb,set:bb,delete:vb,clear:Eb,forEach:Zf(!1,!0)},n={get(s){return Xf(this,s,!0)},get size(){return jf(this,!0)},has(s){return Hf.call(this,s,!0)},add:rs("add"),set:rs("set"),delete:rs("delete"),clear:rs("clear"),forEach:Zf(!0,!1)},i={get(s){return Xf(this,s,!0,!0)},get size(){return jf(this,!0)},has(s){return Hf.call(this,s,!0)},add:rs("add"),set:rs("set"),delete:rs("delete"),clear:rs("clear"),forEach:Zf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=qf(s,!1,!1),n[s]=qf(s,!0,!1),t[s]=qf(s,!1,!0),i[s]=qf(s,!0,!0)}),[e,n,t,i]}const[d4,g4,m4,p4]=h4();function i1(e,t){const n=t?e?p4:m4:e?g4:d4;return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get($t(n,r)&&r in i?n:i,r,s)}const y4={get:i1(!1,!1)},_4={get:i1(!1,!0)},w4={get:i1(!0,!1)},NC=new WeakMap,DC=new WeakMap,$C=new WeakMap,x4=new WeakMap;function b4(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function v4(e){return e.__v_skip||!Object.isExtensible(e)?0:b4(Dk(e))}function Xg(e){return hl(e)?e:r1(e,!1,FC,y4,NC)}function zC(e){return r1(e,!1,f4,_4,DC)}function GC(e){return r1(e,!0,u4,w4,$C)}function r1(e,t,n,i,r){if(!fe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const o=v4(e);if(o===0)return e;const a=new Proxy(e,o===2?i:n);return r.set(e,a),a}function Qa(e){return hl(e)?Qa(e.__v_raw):!!(e&&e.__v_isReactive)}function hl(e){return!!(e&&e.__v_isReadonly)}function id(e){return!!(e&&e.__v_isShallow)}function WC(e){return Qa(e)||hl(e)}function Wt(e){const t=e&&e.__v_raw;return t?Wt(t):e}function s1(e){return nd(e,"__v_skip",!0),e}const fu=e=>fe(e)?Xg(e):e,o1=e=>fe(e)?GC(e):e;function BC(e){ks&&pi&&(e=Wt(e),OC(e.dep||(e.dep=Q_())))}function YC(e,t){e=Wt(e);const n=e.dep;n&&Kp(n)}function en(e){return!!(e&&e.__v_isRef===!0)}function jr(e){return UC(e,!1)}function E4(e){return UC(e,!0)}function UC(e,t){return en(e)?e:new T4(e,t)}class T4{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Wt(t),this._value=n?t:fu(t)}get value(){return BC(this),this._value}set value(t){const n=this.__v_isShallow||id(t)||hl(t);t=n?t:Wt(t),uu(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:fu(t),YC(this))}}function Do(e){return en(e)?e.value:e}const C4={get:(e,t,n)=>Do(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return en(r)&&!en(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function VC(e){return Qa(e)?e:new Proxy(e,C4)}class S4{constructor(t,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new t1(t,()=>{this._dirty||(this._dirty=!0,YC(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=Wt(this);return BC(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function M4(e,t,n=!1){let i,r;const s=St(e);return s?(i=e,r=Ei):(i=e.get,r=e.set),new S4(i,r,s||!r,n)}function Ps(e,t,n,i){let r;try{r=i?e(...i):e()}catch(s){Hg(s,t,n)}return r}function si(e,t,n,i){if(St(e)){const s=Ps(e,t,n,i);return s&&EC(s)&&s.catch(o=>{Hg(o,t,n)}),s}const r=[];for(let s=0;s<e.length;s++)r.push(si(e[s],t,n,i));return r}function Hg(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=n;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Ps(l,null,10,[e,o,a]);return}}R4(e,n,r,i)}function R4(e,t,n,i=!0){console.error(e)}let hu=!1,Jp=!1;const Je=[];let Bi=0;const tl=[];let Tr=null,_o=0;const XC=Promise.resolve();let a1=null;function HC(e){const t=a1||XC;return e?t.then(this?e.bind(this):e):t}function I4(e){let t=Bi+1,n=Je.length;for(;t<n;){const i=t+n>>>1;du(Je[i])<e?t=i+1:n=i}return t}function l1(e){(!Je.length||!Je.includes(e,hu&&e.allowRecurse?Bi+1:Bi))&&(e.id==null?Je.push(e):Je.splice(I4(e.id),0,e),jC())}function jC(){!hu&&!Jp&&(Jp=!0,a1=XC.then(qC))}function A4(e){const t=Je.indexOf(e);t>Bi&&Je.splice(t,1)}function L4(e){xt(e)?tl.push(...e):(!Tr||!Tr.includes(e,e.allowRecurse?_o+1:_o))&&tl.push(e),jC()}function Tb(e,t=hu?Bi+1:0){for(;t<Je.length;t++){const n=Je[t];n&&n.pre&&(Je.splice(t,1),t--,n())}}function ZC(e){if(tl.length){const t=[...new Set(tl)];if(tl.length=0,Tr){Tr.push(...t);return}for(Tr=t,Tr.sort((n,i)=>du(n)-du(i)),_o=0;_o<Tr.length;_o++)Tr[_o]();Tr=null,_o=0}}const du=e=>e.id==null?1/0:e.id,O4=(e,t)=>{const n=du(e)-du(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function qC(e){Jp=!1,hu=!0,Je.sort(O4);const t=Ei;try{for(Bi=0;Bi<Je.length;Bi++){const n=Je[Bi];n&&n.active!==!1&&Ps(n,null,14)}}finally{Bi=0,Je.length=0,ZC(),hu=!1,a1=null,(Je.length||tl.length)&&qC()}}function k4(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||ae;let r=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:h}=i[u]||ae;h&&(r=n.map(d=>ke(d)?d.trim():d)),f&&(r=n.map(Gk))}let a,l=i[a=w0(t)]||i[a=w0(er(t))];!l&&s&&(l=i[a=w0(Bl(t))]),l&&si(l,e,6,r);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,si(c,e,6,r)}}function KC(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!St(e)){const l=c=>{const u=KC(c,t,!0);u&&(a=!0,Ie(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(fe(e)&&i.set(e,null),null):(xt(s)?s.forEach(l=>o[l]=null):Ie(o,s),fe(e)&&i.set(e,o),o)}function jg(e,t){return!e||!Gg(t)?!1:(t=t.slice(2).replace(/Once$/,""),$t(e,t[0].toLowerCase()+t.slice(1))||$t(e,Bl(t))||$t(e,t))}let Pn=null,JC=null;function rd(e){const t=Pn;return Pn=e,JC=e&&e.type.__scopeId||null,t}function QC(e,t=Pn,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Nb(-1);const s=rd(t);let o;try{o=e(...r)}finally{rd(s),i._d&&Nb(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function b0(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:h,setupState:d,ctx:g,inheritAttrs:m}=e;let _,p;const y=rd(e);try{if(n.shapeFlag&4){const w=r||i;_=Gi(u.call(w,w,f,s,d,h,g)),p=l}else{const w=t;_=Gi(w.length>1?w(s,{attrs:l,slots:a,emit:c}):w(s,null)),p=t.props?l:P4(l)}}catch(w){Kc.length=0,Hg(w,e,1),_=Le(Ti)}let x=_;if(p&&m!==!1){const w=Object.keys(p),{shapeFlag:v}=x;w.length&&v&7&&(o&&w.some(Z_)&&(p=F4(p,o)),x=Ds(x,p))}return n.dirs&&(x=Ds(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),_=x,rd(y),_}const P4=e=>{let t;for(const n in e)(n==="class"||n==="style"||Gg(n))&&((t||(t={}))[n]=e[n]);return t},F4=(e,t)=>{const n={};for(const i in e)(!Z_(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function N4(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?Cb(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==i[h]&&!jg(c,h))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Cb(i,o,c):!0:!!o;return!1}function Cb(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!jg(n,s))return!0}return!1}function D4({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const $4=e=>e.__isSuspense;function z4(e,t){t&&t.pendingBranch?xt(e)?t.effects.push(...e):t.effects.push(e):L4(e)}const Kf={};function jc(e,t,n){return tS(e,t,n)}function tS(e,t,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=ae){var a;const l=qk()===((a=We)==null?void 0:a.scope)?We:null;let c,u=!1,f=!1;if(en(e)?(c=()=>e.value,u=id(e)):Qa(e)?(c=()=>e,i=!0):xt(e)?(f=!0,u=e.some(w=>Qa(w)||id(w)),c=()=>e.map(w=>{if(en(w))return w.value;if(Qa(w))return To(w);if(St(w))return Ps(w,l,2)})):St(e)?t?c=()=>Ps(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return h&&h(),si(e,l,3,[d])}:c=Ei,t&&i){const w=c;c=()=>To(w())}let h,d=w=>{h=y.onStop=()=>{Ps(w,l,4)}},g;if(mu)if(d=Ei,t?n&&si(t,l,3,[c(),f?[]:void 0,d]):c(),r==="sync"){const w=FP();g=w.__watcherHandles||(w.__watcherHandles=[])}else return Ei;let m=f?new Array(e.length).fill(Kf):Kf;const _=()=>{if(y.active)if(t){const w=y.run();(i||u||(f?w.some((v,b)=>uu(v,m[b])):uu(w,m)))&&(h&&h(),si(t,l,3,[w,m===Kf?void 0:f&&m[0]===Kf?[]:m,d]),m=w)}else y.run()};_.allowRecurse=!!t;let p;r==="sync"?p=_:r==="post"?p=()=>_n(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),p=()=>l1(_));const y=new t1(c,p);t?n?_():m=y.run():r==="post"?_n(y.run.bind(y),l&&l.suspense):y.run();const x=()=>{y.stop(),l&&l.scope&&q_(l.scope.effects,y)};return g&&g.push(x),x}function G4(e,t,n){const i=this.proxy,r=ke(e)?e.includes(".")?eS(i,e):()=>i[e]:e.bind(i,i);let s;St(t)?s=t:(s=t.handler,n=t);const o=We;dl(this);const a=tS(r,s.bind(i),n);return o?dl(o):$o(),a}function eS(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function To(e,t){if(!fe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),en(e))To(e.value,t);else if(xt(e))for(let n=0;n<e.length;n++)To(e[n],t);else if(vC(e)||Ja(e))e.forEach(n=>{To(n,t)});else if(CC(e))for(const n in e)To(e[n],t);return e}function Zc(e,t){const n=Pn;if(n===null)return e;const i=Qg(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,a,l,c=ae]=t[s];o&&(St(o)&&(o={mounted:o,updated:o}),o.deep&&To(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function io(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Yl(),si(l,n,8,[e.el,a,e,t]),Ul())}}function W4(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return c1(()=>{e.isMounted=!0}),oS(()=>{e.isUnmounting=!0}),e}const Hn=[Function,Array],nS={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Hn,onEnter:Hn,onAfterEnter:Hn,onEnterCancelled:Hn,onBeforeLeave:Hn,onLeave:Hn,onAfterLeave:Hn,onLeaveCancelled:Hn,onBeforeAppear:Hn,onAppear:Hn,onAfterAppear:Hn,onAppearCancelled:Hn},B4={name:"BaseTransition",props:nS,setup(e,{slots:t}){const n=MP(),i=W4();let r;return()=>{const s=t.default&&rS(t.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==Ti){o=m;break}}const a=Wt(e),{mode:l}=a;if(i.isLeaving)return v0(o);const c=Sb(o);if(!c)return v0(o);const u=Qp(c,a,i,n);ty(c,u);const f=n.subTree,h=f&&Sb(f);let d=!1;const{getTransitionKey:g}=c.type;if(g){const m=g();r===void 0?r=m:m!==r&&(r=m,d=!0)}if(h&&h.type!==Ti&&(!wo(c,h)||d)){const m=Qp(h,a,i,n);if(ty(h,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},v0(o);l==="in-out"&&c.type!==Ti&&(m.delayLeave=(_,p,y)=>{const x=iS(i,h);x[String(h.key)]=h,_._leaveCb=()=>{p(),_._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=y})}return o}}},Y4=B4;function iS(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Qp(e,t,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:m,onAppear:_,onAfterAppear:p,onAppearCancelled:y}=t,x=String(e.key),w=iS(n,e),v=(C,I)=>{C&&si(C,i,9,I)},b=(C,I)=>{const S=I[1];v(C,I),xt(C)?C.every(R=>R.length<=1)&&S():C.length<=1&&S()},E={mode:s,persisted:o,beforeEnter(C){let I=a;if(!n.isMounted)if(r)I=m||a;else return;C._leaveCb&&C._leaveCb(!0);const S=w[x];S&&wo(e,S)&&S.el._leaveCb&&S.el._leaveCb(),v(I,[C])},enter(C){let I=l,S=c,R=u;if(!n.isMounted)if(r)I=_||l,S=p||c,R=y||u;else return;let M=!1;const k=C._enterCb=O=>{M||(M=!0,O?v(R,[C]):v(S,[C]),E.delayedLeave&&E.delayedLeave(),C._enterCb=void 0)};I?b(I,[C,k]):k()},leave(C,I){const S=String(e.key);if(C._enterCb&&C._enterCb(!0),n.isUnmounting)return I();v(f,[C]);let R=!1;const M=C._leaveCb=k=>{R||(R=!0,I(),k?v(g,[C]):v(d,[C]),C._leaveCb=void 0,w[S]===e&&delete w[S])};w[S]=e,h?b(h,[C,M]):M()},clone(C){return Qp(C,t,n,i)}};return E}function v0(e){if(Zg(e))return e=Ds(e),e.children=null,e}function Sb(e){return Zg(e)?e.children?e.children[0]:void 0:e}function ty(e,t){e.shapeFlag&6&&e.component?ty(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function rS(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Kn?(o.patchFlag&128&&r++,i=i.concat(rS(o.children,t,a))):(t||o.type!==Ti)&&i.push(a!=null?Ds(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function Hu(e,t){return St(e)?(()=>Ie({name:e.name},t,{setup:e}))():e}const Uh=e=>!!e.type.__asyncLoader,Zg=e=>e.type.__isKeepAlive;function U4(e,t){sS(e,"a",t)}function V4(e,t){sS(e,"da",t)}function sS(e,t,n=We){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(qg(t,i,n),n){let r=n.parent;for(;r&&r.parent;)Zg(r.parent.vnode)&&X4(i,t,n,r),r=r.parent}}function X4(e,t,n,i){const r=qg(t,e,i,!0);aS(()=>{q_(i[t],r)},n)}function qg(e,t,n=We,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Yl(),dl(n);const a=si(t,n,e,o);return $o(),Ul(),a});return i?r.unshift(s):r.push(s),s}}const Zr=e=>(t,n=We)=>(!mu||e==="sp")&&qg(e,(...i)=>t(...i),n),H4=Zr("bm"),c1=Zr("m"),j4=Zr("bu"),Z4=Zr("u"),oS=Zr("bum"),aS=Zr("um"),q4=Zr("sp"),K4=Zr("rtg"),J4=Zr("rtc");function Q4(e,t=We){qg("ec",e,t)}const lS="components";function tP(e,t){return nP(lS,e,!0,t)||e}const eP=Symbol.for("v-ndc");function nP(e,t,n=!0,i=!1){const r=Pn||We;if(r){const s=r.type;if(e===lS){const a=OP(s,!1);if(a&&(a===t||a===er(t)||a===Yg(er(t))))return s}const o=Mb(r[e]||s[e],t)||Mb(r.appContext[e],t);return!o&&i?s:o}}function Mb(e,t){return e&&(e[t]||e[er(t)]||e[Yg(er(t))])}const ey=e=>e?wS(e)?Qg(e)||e.proxy:ey(e.parent):null,qc=Ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ey(e.parent),$root:e=>ey(e.root),$emit:e=>e.emit,$options:e=>u1(e),$forceUpdate:e=>e.f||(e.f=()=>l1(e.update)),$nextTick:e=>e.n||(e.n=HC.bind(e.proxy)),$watch:e=>G4.bind(e)}),E0=(e,t)=>e!==ae&&!e.__isScriptSetup&&$t(e,t),iP={get({_:e},t){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(E0(i,t))return o[t]=1,i[t];if(r!==ae&&$t(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&$t(c,t))return o[t]=3,s[t];if(n!==ae&&$t(n,t))return o[t]=4,n[t];ny&&(o[t]=0)}}const u=qc[t];let f,h;if(u)return t==="$attrs"&&Tn(e,"get",t),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==ae&&$t(n,t))return o[t]=4,n[t];if(h=l.config.globalProperties,$t(h,t))return h[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return E0(r,t)?(r[t]=n,!0):i!==ae&&$t(i,t)?(i[t]=n,!0):$t(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!n[o]||e!==ae&&$t(e,o)||E0(t,o)||(a=s[0])&&$t(a,o)||$t(i,o)||$t(qc,o)||$t(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:$t(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Rb(e){return xt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ny=!0;function rP(e){const t=u1(e),n=e.proxy,i=e.ctx;ny=!1,t.beforeCreate&&Ib(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:m,deactivated:_,beforeDestroy:p,beforeUnmount:y,destroyed:x,unmounted:w,render:v,renderTracked:b,renderTriggered:E,errorCaptured:C,serverPrefetch:I,expose:S,inheritAttrs:R,components:M,directives:k,filters:O}=t;if(c&&sP(c,i,null),o)for(const N in o){const G=o[N];St(G)&&(i[N]=G.bind(n))}if(r){const N=r.call(n,n);fe(N)&&(e.data=Xg(N))}if(ny=!0,s)for(const N in s){const G=s[N],H=St(G)?G.bind(n,n):St(G.get)?G.get.bind(n,n):Ei,U=!St(G)&&St(G.set)?G.set.bind(n):Ei,Z=yi({get:H,set:U});Object.defineProperty(i,N,{enumerable:!0,configurable:!0,get:()=>Z.value,set:z=>Z.value=z})}if(a)for(const N in a)cS(a[N],i,n,N);if(l){const N=St(l)?l.call(n):l;Reflect.ownKeys(N).forEach(G=>{Vh(G,N[G])})}u&&Ib(u,e,"c");function P(N,G){xt(G)?G.forEach(H=>N(H.bind(n))):G&&N(G.bind(n))}if(P(H4,f),P(c1,h),P(j4,d),P(Z4,g),P(U4,m),P(V4,_),P(Q4,C),P(J4,b),P(K4,E),P(oS,y),P(aS,w),P(q4,I),xt(S))if(S.length){const N=e.exposed||(e.exposed={});S.forEach(G=>{Object.defineProperty(N,G,{get:()=>n[G],set:H=>n[G]=H})})}else e.exposed||(e.exposed={});v&&e.render===Ei&&(e.render=v),R!=null&&(e.inheritAttrs=R),M&&(e.components=M),k&&(e.directives=k)}function sP(e,t,n=Ei){xt(e)&&(e=iy(e));for(const i in e){const r=e[i];let s;fe(r)?"default"in r?s=Pr(r.from||i,r.default,!0):s=Pr(r.from||i):s=Pr(r),en(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function Ib(e,t,n){si(xt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function cS(e,t,n,i){const r=i.includes(".")?eS(n,i):()=>n[i];if(ke(e)){const s=t[e];St(s)&&jc(r,s)}else if(St(e))jc(r,e.bind(n));else if(fe(e))if(xt(e))e.forEach(s=>cS(s,t,n,i));else{const s=St(e.handler)?e.handler.bind(n):t[e.handler];St(s)&&jc(r,s,e)}}function u1(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!n&&!i?l=t:(l={},r.length&&r.forEach(c=>sd(l,c,o,!0)),sd(l,t,o)),fe(t)&&s.set(t,l),l}function sd(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&sd(e,s,n,!0),r&&r.forEach(o=>sd(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=oP[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const oP={data:Ab,props:Lb,emits:Lb,methods:Pc,computed:Pc,beforeCreate:an,created:an,beforeMount:an,mounted:an,beforeUpdate:an,updated:an,beforeDestroy:an,beforeUnmount:an,destroyed:an,unmounted:an,activated:an,deactivated:an,errorCaptured:an,serverPrefetch:an,components:Pc,directives:Pc,watch:lP,provide:Ab,inject:aP};function Ab(e,t){return t?e?function(){return Ie(St(e)?e.call(this,this):e,St(t)?t.call(this,this):t)}:t:e}function aP(e,t){return Pc(iy(e),iy(t))}function iy(e){if(xt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function an(e,t){return e?[...new Set([].concat(e,t))]:t}function Pc(e,t){return e?Ie(Object.create(null),e,t):t}function Lb(e,t){return e?xt(e)&&xt(t)?[...new Set([...e,...t])]:Ie(Object.create(null),Rb(e),Rb(t??{})):t}function lP(e,t){if(!e)return t;if(!t)return e;const n=Ie(Object.create(null),e);for(const i in t)n[i]=an(e[i],t[i]);return n}function uS(){return{app:null,config:{isNativeTag:Pk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cP=0;function uP(e,t){return function(i,r=null){St(i)||(i=Ie({},i)),r!=null&&!fe(r)&&(r=null);const s=uS(),o=new Set;let a=!1;const l=s.app={_uid:cP++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:NP,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&St(c.install)?(o.add(c),c.install(l,...u)):St(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,f){if(!a){const h=Le(i,r);return h.appContext=s,u&&t?t(h,c):e(h,c,f),a=!0,l._container=c,c.__vue_app__=l,Qg(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){od=l;try{return c()}finally{od=null}}};return l}}let od=null;function Vh(e,t){if(We){let n=We.provides;const i=We.parent&&We.parent.provides;i===n&&(n=We.provides=Object.create(i)),n[e]=t}}function Pr(e,t,n=!1){const i=We||Pn;if(i||od){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:od._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&St(t)?t.call(i&&i.proxy):t}}function fP(e,t,n,i=!1){const r={},s={};nd(s,Jg,1),e.propsDefaults=Object.create(null),fS(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:zC(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function hP(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=Wt(r),[l]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(jg(e.emitsOptions,h))continue;const d=t[h];if(l)if($t(s,h))d!==s[h]&&(s[h]=d,c=!0);else{const g=er(h);r[g]=ry(l,a,g,d,e,!1)}else d!==s[h]&&(s[h]=d,c=!0)}}}else{fS(e,t,r,s)&&(c=!0);let u;for(const f in a)(!t||!$t(t,f)&&((u=Bl(f))===f||!$t(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=ry(l,a,f,void 0,e,!0)):delete r[f]);if(s!==a)for(const f in s)(!t||!$t(t,f))&&(delete s[f],c=!0)}c&&Br(e,"set","$attrs")}function fS(e,t,n,i){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Yh(l))continue;const c=t[l];let u;r&&$t(r,u=er(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:jg(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=Wt(n),c=a||ae;for(let u=0;u<s.length;u++){const f=s[u];n[f]=ry(r,l,f,c[f],e,!$t(c,f))}}return o}function ry(e,t,n,i,r,s){const o=e[n];if(o!=null){const a=$t(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&St(l)){const{propsDefaults:c}=r;n in c?i=c[n]:(dl(r),i=c[n]=l.call(null,t),$o())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===Bl(n))&&(i=!0))}return i}function hS(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let l=!1;if(!St(e)){const u=f=>{l=!0;const[h,d]=hS(f,t,!0);Ie(o,h),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return fe(e)&&i.set(e,Ka),Ka;if(xt(s))for(let u=0;u<s.length;u++){const f=er(s[u]);Ob(f)&&(o[f]=ae)}else if(s)for(const u in s){const f=er(u);if(Ob(f)){const h=s[u],d=o[f]=xt(h)||St(h)?{type:h}:Ie({},h);if(d){const g=Fb(Boolean,d.type),m=Fb(String,d.type);d[0]=g>-1,d[1]=m<0||g<m,(g>-1||$t(d,"default"))&&a.push(f)}}}const c=[o,a];return fe(e)&&i.set(e,c),c}function Ob(e){return e[0]!=="$"}function kb(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Pb(e,t){return kb(e)===kb(t)}function Fb(e,t){return xt(t)?t.findIndex(n=>Pb(n,e)):St(t)&&Pb(t,e)?0:-1}const dS=e=>e[0]==="_"||e==="$stable",f1=e=>xt(e)?e.map(Gi):[Gi(e)],dP=(e,t,n)=>{if(t._n)return t;const i=QC((...r)=>f1(t(...r)),n);return i._c=!1,i},gS=(e,t,n)=>{const i=e._ctx;for(const r in e){if(dS(r))continue;const s=e[r];if(St(s))t[r]=dP(r,s,i);else if(s!=null){const o=f1(s);t[r]=()=>o}}},mS=(e,t)=>{const n=f1(t);e.slots.default=()=>n},gP=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Wt(t),nd(t,"_",n)):gS(t,e.slots={})}else e.slots={},t&&mS(e,t);nd(e.slots,Jg,1)},mP=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=ae;if(i.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:(Ie(r,t),!n&&a===1&&delete r._):(s=!t.$stable,gS(t,r)),o=t}else t&&(mS(e,t),o={default:1});if(s)for(const a in r)!dS(a)&&!(a in o)&&delete r[a]};function sy(e,t,n,i,r=!1){if(xt(e)){e.forEach((h,d)=>sy(h,t&&(xt(t)?t[d]:t),n,i,r));return}if(Uh(i)&&!r)return;const s=i.shapeFlag&4?Qg(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=e,c=t&&t.r,u=a.refs===ae?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(ke(c)?(u[c]=null,$t(f,c)&&(f[c]=null)):en(c)&&(c.value=null)),St(l))Ps(l,a,12,[o,u]);else{const h=ke(l),d=en(l);if(h||d){const g=()=>{if(e.f){const m=h?$t(f,l)?f[l]:u[l]:l.value;r?xt(m)&&q_(m,s):xt(m)?m.includes(s)||m.push(s):h?(u[l]=[s],$t(f,l)&&(f[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else h?(u[l]=o,$t(f,l)&&(f[l]=o)):d&&(l.value=o,e.k&&(u[e.k]=o))};o?(g.id=-1,_n(g,n)):g()}}}const _n=z4;function pP(e){return yP(e)}function yP(e,t){const n=Hp();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=Ei,insertStaticContent:g}=e,m=(T,L,F,W=null,B=null,X=null,rt=!1,J=null,tt=!!L.dynamicChildren)=>{if(T===L)return;T&&!wo(T,L)&&(W=$(T),z(T,B,X,!0),T=null),L.patchFlag===-2&&(tt=!1,L.dynamicChildren=null);const{type:q,ref:ct,shapeFlag:at}=L;switch(q){case Kg:_(T,L,F,W);break;case Ti:p(T,L,F,W);break;case T0:T==null&&y(L,F,W,rt);break;case Kn:M(T,L,F,W,B,X,rt,J,tt);break;default:at&1?v(T,L,F,W,B,X,rt,J,tt):at&6?k(T,L,F,W,B,X,rt,J,tt):(at&64||at&128)&&q.process(T,L,F,W,B,X,rt,J,tt,D)}ct!=null&&B&&sy(ct,T&&T.ref,X,L||T,!L)},_=(T,L,F,W)=>{if(T==null)i(L.el=a(L.children),F,W);else{const B=L.el=T.el;L.children!==T.children&&c(B,L.children)}},p=(T,L,F,W)=>{T==null?i(L.el=l(L.children||""),F,W):L.el=T.el},y=(T,L,F,W)=>{[T.el,T.anchor]=g(T.children,L,F,W,T.el,T.anchor)},x=({el:T,anchor:L},F,W)=>{let B;for(;T&&T!==L;)B=h(T),i(T,F,W),T=B;i(L,F,W)},w=({el:T,anchor:L})=>{let F;for(;T&&T!==L;)F=h(T),r(T),T=F;r(L)},v=(T,L,F,W,B,X,rt,J,tt)=>{rt=rt||L.type==="svg",T==null?b(L,F,W,B,X,rt,J,tt):I(T,L,B,X,rt,J,tt)},b=(T,L,F,W,B,X,rt,J)=>{let tt,q;const{type:ct,props:at,shapeFlag:ut,transition:ft,dirs:bt}=T;if(tt=T.el=o(T.type,X,at&&at.is,at),ut&8?u(tt,T.children):ut&16&&C(T.children,tt,null,W,B,X&&ct!=="foreignObject",rt,J),bt&&io(T,null,W,"created"),E(tt,T,T.scopeId,rt,W),at){for(const Et in at)Et!=="value"&&!Yh(Et)&&s(tt,Et,null,at[Et],X,T.children,W,B,ot);"value"in at&&s(tt,"value",null,at.value),(q=at.onVnodeBeforeMount)&&Di(q,W,T)}bt&&io(T,null,W,"beforeMount");const Lt=(!B||B&&!B.pendingBranch)&&ft&&!ft.persisted;Lt&&ft.beforeEnter(tt),i(tt,L,F),((q=at&&at.onVnodeMounted)||Lt||bt)&&_n(()=>{q&&Di(q,W,T),Lt&&ft.enter(tt),bt&&io(T,null,W,"mounted")},B)},E=(T,L,F,W,B)=>{if(F&&d(T,F),W)for(let X=0;X<W.length;X++)d(T,W[X]);if(B){let X=B.subTree;if(L===X){const rt=B.vnode;E(T,rt,rt.scopeId,rt.slotScopeIds,B.parent)}}},C=(T,L,F,W,B,X,rt,J,tt=0)=>{for(let q=tt;q<T.length;q++){const ct=T[q]=J?ys(T[q]):Gi(T[q]);m(null,ct,L,F,W,B,X,rt,J)}},I=(T,L,F,W,B,X,rt)=>{const J=L.el=T.el;let{patchFlag:tt,dynamicChildren:q,dirs:ct}=L;tt|=T.patchFlag&16;const at=T.props||ae,ut=L.props||ae;let ft;F&&ro(F,!1),(ft=ut.onVnodeBeforeUpdate)&&Di(ft,F,L,T),ct&&io(L,T,F,"beforeUpdate"),F&&ro(F,!0);const bt=B&&L.type!=="foreignObject";if(q?S(T.dynamicChildren,q,J,F,W,bt,X):rt||G(T,L,J,null,F,W,bt,X,!1),tt>0){if(tt&16)R(J,L,at,ut,F,W,B);else if(tt&2&&at.class!==ut.class&&s(J,"class",null,ut.class,B),tt&4&&s(J,"style",at.style,ut.style,B),tt&8){const Lt=L.dynamicProps;for(let Et=0;Et<Lt.length;Et++){const jt=Lt[Et],pe=at[jt],ce=ut[jt];(ce!==pe||jt==="value")&&s(J,jt,pe,ce,B,T.children,F,W,ot)}}tt&1&&T.children!==L.children&&u(J,L.children)}else!rt&&q==null&&R(J,L,at,ut,F,W,B);((ft=ut.onVnodeUpdated)||ct)&&_n(()=>{ft&&Di(ft,F,L,T),ct&&io(L,T,F,"updated")},W)},S=(T,L,F,W,B,X,rt)=>{for(let J=0;J<L.length;J++){const tt=T[J],q=L[J],ct=tt.el&&(tt.type===Kn||!wo(tt,q)||tt.shapeFlag&70)?f(tt.el):F;m(tt,q,ct,null,W,B,X,rt,!0)}},R=(T,L,F,W,B,X,rt)=>{if(F!==W){if(F!==ae)for(const J in F)!Yh(J)&&!(J in W)&&s(T,J,F[J],null,rt,L.children,B,X,ot);for(const J in W){if(Yh(J))continue;const tt=W[J],q=F[J];tt!==q&&J!=="value"&&s(T,J,q,tt,rt,L.children,B,X,ot)}"value"in W&&s(T,"value",F.value,W.value)}},M=(T,L,F,W,B,X,rt,J,tt)=>{const q=L.el=T?T.el:a(""),ct=L.anchor=T?T.anchor:a("");let{patchFlag:at,dynamicChildren:ut,slotScopeIds:ft}=L;ft&&(J=J?J.concat(ft):ft),T==null?(i(q,F,W),i(ct,F,W),C(L.children,F,ct,B,X,rt,J,tt)):at>0&&at&64&&ut&&T.dynamicChildren?(S(T.dynamicChildren,ut,F,B,X,rt,J),(L.key!=null||B&&L===B.subTree)&&pS(T,L,!0)):G(T,L,F,ct,B,X,rt,J,tt)},k=(T,L,F,W,B,X,rt,J,tt)=>{L.slotScopeIds=J,T==null?L.shapeFlag&512?B.ctx.activate(L,F,W,rt,tt):O(L,F,W,B,X,rt,tt):A(T,L,tt)},O=(T,L,F,W,B,X,rt)=>{const J=T.component=SP(T,W,B);if(Zg(T)&&(J.ctx.renderer=D),RP(J),J.asyncDep){if(B&&B.registerDep(J,P),!T.el){const tt=J.subTree=Le(Ti);p(null,tt,L,F)}return}P(J,T,L,F,B,X,rt)},A=(T,L,F)=>{const W=L.component=T.component;if(N4(T,L,F))if(W.asyncDep&&!W.asyncResolved){N(W,L,F);return}else W.next=L,A4(W.update),W.update();else L.el=T.el,W.vnode=L},P=(T,L,F,W,B,X,rt)=>{const J=()=>{if(T.isMounted){let{next:ct,bu:at,u:ut,parent:ft,vnode:bt}=T,Lt=ct,Et;ro(T,!1),ct?(ct.el=bt.el,N(T,ct,rt)):ct=bt,at&&x0(at),(Et=ct.props&&ct.props.onVnodeBeforeUpdate)&&Di(Et,ft,ct,bt),ro(T,!0);const jt=b0(T),pe=T.subTree;T.subTree=jt,m(pe,jt,f(pe.el),$(pe),T,B,X),ct.el=jt.el,Lt===null&&D4(T,jt.el),ut&&_n(ut,B),(Et=ct.props&&ct.props.onVnodeUpdated)&&_n(()=>Di(Et,ft,ct,bt),B)}else{let ct;const{el:at,props:ut}=L,{bm:ft,m:bt,parent:Lt}=T,Et=Uh(L);if(ro(T,!1),ft&&x0(ft),!Et&&(ct=ut&&ut.onVnodeBeforeMount)&&Di(ct,Lt,L),ro(T,!0),at&&K){const jt=()=>{T.subTree=b0(T),K(at,T.subTree,T,B,null)};Et?L.type.__asyncLoader().then(()=>!T.isUnmounted&&jt()):jt()}else{const jt=T.subTree=b0(T);m(null,jt,F,W,T,B,X),L.el=jt.el}if(bt&&_n(bt,B),!Et&&(ct=ut&&ut.onVnodeMounted)){const jt=L;_n(()=>Di(ct,Lt,jt),B)}(L.shapeFlag&256||Lt&&Uh(Lt.vnode)&&Lt.vnode.shapeFlag&256)&&T.a&&_n(T.a,B),T.isMounted=!0,L=F=W=null}},tt=T.effect=new t1(J,()=>l1(q),T.scope),q=T.update=()=>tt.run();q.id=T.uid,ro(T,!0),q()},N=(T,L,F)=>{L.component=T;const W=T.vnode.props;T.vnode=L,T.next=null,hP(T,L.props,W,F),mP(T,L.children,F),Yl(),Tb(),Ul()},G=(T,L,F,W,B,X,rt,J,tt=!1)=>{const q=T&&T.children,ct=T?T.shapeFlag:0,at=L.children,{patchFlag:ut,shapeFlag:ft}=L;if(ut>0){if(ut&128){U(q,at,F,W,B,X,rt,J,tt);return}else if(ut&256){H(q,at,F,W,B,X,rt,J,tt);return}}ft&8?(ct&16&&ot(q,B,X),at!==q&&u(F,at)):ct&16?ft&16?U(q,at,F,W,B,X,rt,J,tt):ot(q,B,X,!0):(ct&8&&u(F,""),ft&16&&C(at,F,W,B,X,rt,J,tt))},H=(T,L,F,W,B,X,rt,J,tt)=>{T=T||Ka,L=L||Ka;const q=T.length,ct=L.length,at=Math.min(q,ct);let ut;for(ut=0;ut<at;ut++){const ft=L[ut]=tt?ys(L[ut]):Gi(L[ut]);m(T[ut],ft,F,null,B,X,rt,J,tt)}q>ct?ot(T,B,X,!0,!1,at):C(L,F,W,B,X,rt,J,tt,at)},U=(T,L,F,W,B,X,rt,J,tt)=>{let q=0;const ct=L.length;let at=T.length-1,ut=ct-1;for(;q<=at&&q<=ut;){const ft=T[q],bt=L[q]=tt?ys(L[q]):Gi(L[q]);if(wo(ft,bt))m(ft,bt,F,null,B,X,rt,J,tt);else break;q++}for(;q<=at&&q<=ut;){const ft=T[at],bt=L[ut]=tt?ys(L[ut]):Gi(L[ut]);if(wo(ft,bt))m(ft,bt,F,null,B,X,rt,J,tt);else break;at--,ut--}if(q>at){if(q<=ut){const ft=ut+1,bt=ft<ct?L[ft].el:W;for(;q<=ut;)m(null,L[q]=tt?ys(L[q]):Gi(L[q]),F,bt,B,X,rt,J,tt),q++}}else if(q>ut)for(;q<=at;)z(T[q],B,X,!0),q++;else{const ft=q,bt=q,Lt=new Map;for(q=bt;q<=ut;q++){const ue=L[q]=tt?ys(L[q]):Gi(L[q]);ue.key!=null&&Lt.set(ue.key,q)}let Et,jt=0;const pe=ut-bt+1;let ce=!1,is=0;const Un=new Array(pe);for(q=0;q<pe;q++)Un[q]=0;for(q=ft;q<=at;q++){const ue=T[q];if(jt>=pe){z(ue,B,X,!0);continue}let sn;if(ue.key!=null)sn=Lt.get(ue.key);else for(Et=bt;Et<=ut;Et++)if(Un[Et-bt]===0&&wo(ue,L[Et])){sn=Et;break}sn===void 0?z(ue,B,X,!0):(Un[sn-bt]=q+1,sn>=is?is=sn:ce=!0,m(ue,L[sn],F,null,B,X,rt,J,tt),jt++)}const rn=ce?_P(Un):Ka;for(Et=rn.length-1,q=pe-1;q>=0;q--){const ue=bt+q,sn=L[ue],_a=ue+1<ct?L[ue+1].el:W;Un[q]===0?m(null,sn,F,_a,B,X,rt,J,tt):ce&&(Et<0||q!==rn[Et]?Z(sn,F,_a,2):Et--)}}},Z=(T,L,F,W,B=null)=>{const{el:X,type:rt,transition:J,children:tt,shapeFlag:q}=T;if(q&6){Z(T.component.subTree,L,F,W);return}if(q&128){T.suspense.move(L,F,W);return}if(q&64){rt.move(T,L,F,D);return}if(rt===Kn){i(X,L,F);for(let at=0;at<tt.length;at++)Z(tt[at],L,F,W);i(T.anchor,L,F);return}if(rt===T0){x(T,L,F);return}if(W!==2&&q&1&&J)if(W===0)J.beforeEnter(X),i(X,L,F),_n(()=>J.enter(X),B);else{const{leave:at,delayLeave:ut,afterLeave:ft}=J,bt=()=>i(X,L,F),Lt=()=>{at(X,()=>{bt(),ft&&ft()})};ut?ut(X,bt,Lt):Lt()}else i(X,L,F)},z=(T,L,F,W=!1,B=!1)=>{const{type:X,props:rt,ref:J,children:tt,dynamicChildren:q,shapeFlag:ct,patchFlag:at,dirs:ut}=T;if(J!=null&&sy(J,null,F,T,!0),ct&256){L.ctx.deactivate(T);return}const ft=ct&1&&ut,bt=!Uh(T);let Lt;if(bt&&(Lt=rt&&rt.onVnodeBeforeUnmount)&&Di(Lt,L,T),ct&6)st(T.component,F,W);else{if(ct&128){T.suspense.unmount(F,W);return}ft&&io(T,null,L,"beforeUnmount"),ct&64?T.type.remove(T,L,F,B,D,W):q&&(X!==Kn||at>0&&at&64)?ot(q,L,F,!1,!0):(X===Kn&&at&384||!B&&ct&16)&&ot(tt,L,F),W&&Q(T)}(bt&&(Lt=rt&&rt.onVnodeUnmounted)||ft)&&_n(()=>{Lt&&Di(Lt,L,T),ft&&io(T,null,L,"unmounted")},F)},Q=T=>{const{type:L,el:F,anchor:W,transition:B}=T;if(L===Kn){nt(F,W);return}if(L===T0){w(T);return}const X=()=>{r(F),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(T.shapeFlag&1&&B&&!B.persisted){const{leave:rt,delayLeave:J}=B,tt=()=>rt(F,X);J?J(T.el,X,tt):tt()}else X()},nt=(T,L)=>{let F;for(;T!==L;)F=h(T),r(T),T=F;r(L)},st=(T,L,F)=>{const{bum:W,scope:B,update:X,subTree:rt,um:J}=T;W&&x0(W),B.stop(),X&&(X.active=!1,z(rt,T,L,F)),J&&_n(J,L),_n(()=>{T.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},ot=(T,L,F,W=!1,B=!1,X=0)=>{for(let rt=X;rt<T.length;rt++)z(T[rt],L,F,W,B)},$=T=>T.shapeFlag&6?$(T.component.subTree):T.shapeFlag&128?T.suspense.next():h(T.anchor||T.el),Y=(T,L,F)=>{T==null?L._vnode&&z(L._vnode,null,null,!0):m(L._vnode||null,T,L,null,null,null,F),Tb(),ZC(),L._vnode=T},D={p:m,um:z,m:Z,r:Q,mt:O,mc:C,pc:G,pbc:S,n:$,o:e};let V,K;return t&&([V,K]=t(D)),{render:Y,hydrate:V,createApp:uP(Y,V)}}function ro({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function pS(e,t,n=!1){const i=e.children,r=t.children;if(xt(i)&&xt(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=ys(r[s]),a.el=o.el),n||pS(o,a)),a.type===Kg&&(a.el=o.el)}}function _P(e){const t=e.slice(),n=[0];let i,r,s,o,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(r=n[n.length-1],e[r]<c){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<c?s=a+1:o=a;c<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const wP=e=>e.__isTeleport,Kn=Symbol.for("v-fgt"),Kg=Symbol.for("v-txt"),Ti=Symbol.for("v-cmt"),T0=Symbol.for("v-stc"),Kc=[];let xi=null;function Ut(e=!1){Kc.push(xi=e?null:[])}function xP(){Kc.pop(),xi=Kc[Kc.length-1]||null}let gu=1;function Nb(e){gu+=e}function yS(e){return e.dynamicChildren=gu>0?xi||Ka:null,xP(),gu>0&&xi&&xi.push(e),e}function Jt(e,t,n,i,r,s){return yS(j(e,t,n,i,r,s,!0))}function h1(e,t,n,i,r){return yS(Le(e,t,n,i,r,!0))}function oy(e){return e?e.__v_isVNode===!0:!1}function wo(e,t){return e.type===t.type&&e.key===t.key}const Jg="__vInternal",_S=({key:e})=>e??null,Xh=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ke(e)||en(e)||St(e)?{i:Pn,r:e,k:t,f:!!n}:e:null);function j(e,t=null,n=null,i=0,r=null,s=e===Kn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&_S(t),ref:t&&Xh(t),scopeId:JC,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Pn};return a?(d1(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=ke(n)?8:16),gu>0&&!o&&xi&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&xi.push(l),l}const Le=bP;function bP(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===eP)&&(e=Ti),oy(e)){const a=Ds(e,t,!0);return n&&d1(a,n),gu>0&&!s&&xi&&(a.shapeFlag&6?xi[xi.indexOf(e)]=a:xi.push(a)),a.patchFlag|=-2,a}if(kP(e)&&(e=e.__vccOpts),t){t=vP(t);let{class:a,style:l}=t;a&&!ke(a)&&(t.class=Ug(a)),fe(l)&&(WC(l)&&!xt(l)&&(l=Ie({},l)),t.style=Eo(l))}const o=ke(e)?1:$4(e)?128:wP(e)?64:fe(e)?4:St(e)?2:0;return j(e,t,n,i,r,o,s,!0)}function vP(e){return e?WC(e)||Jg in e?Ie({},e):e:null}function Ds(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=e,a=t?EP(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&_S(a),ref:t&&t.ref?n&&r?xt(r)?r.concat(Xh(t)):[r,Xh(t)]:Xh(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Kn?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ds(e.ssContent),ssFallback:e.ssFallback&&Ds(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ae(e=" ",t=0){return Le(Kg,null,e,t)}function de(e="",t=!1){return t?(Ut(),h1(Ti,null,e)):Le(Ti,null,e)}function Gi(e){return e==null||typeof e=="boolean"?Le(Ti):xt(e)?Le(Kn,null,e.slice()):typeof e=="object"?ys(e):Le(Kg,null,String(e))}function ys(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ds(e)}function d1(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(xt(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),d1(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(Jg in t)?t._ctx=Pn:r===3&&Pn&&(Pn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else St(t)?(t={default:t,_ctx:Pn},n=32):(t=String(t),i&64?(n=16,t=[Ae(t)]):n=8);e.children=t,e.shapeFlag|=n}function EP(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Ug([t.class,i.class]));else if(r==="style")t.style=Eo([t.style,i.style]);else if(Gg(r)){const s=t[r],o=i[r];o&&s!==o&&!(xt(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function Di(e,t,n,i=null){si(e,t,7,[n,i])}const TP=uS();let CP=0;function SP(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||TP,s={uid:CP++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new RC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hS(i,r),emitsOptions:KC(i,r),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:i.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=k4.bind(null,s),e.ce&&e.ce(s),s}let We=null;const MP=()=>We||Pn;let g1,xa,Db="__VUE_INSTANCE_SETTERS__";(xa=Hp()[Db])||(xa=Hp()[Db]=[]),xa.push(e=>We=e),g1=e=>{xa.length>1?xa.forEach(t=>t(e)):xa[0](e)};const dl=e=>{g1(e),e.scope.on()},$o=()=>{We&&We.scope.off(),g1(null)};function wS(e){return e.vnode.shapeFlag&4}let mu=!1;function RP(e,t=!1){mu=t;const{props:n,children:i}=e.vnode,r=wS(e);fP(e,n,r,t),gP(e,i);const s=r?IP(e,t):void 0;return mu=!1,s}function IP(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=s1(new Proxy(e.ctx,iP));const{setup:i}=n;if(i){const r=e.setupContext=i.length>1?LP(e):null;dl(e),Yl();const s=Ps(i,e,0,[e.props,r]);if(Ul(),$o(),EC(s)){if(s.then($o,$o),t)return s.then(o=>{$b(e,o,t)}).catch(o=>{Hg(o,e,0)});e.asyncDep=s}else $b(e,s,t)}else xS(e,t)}function $b(e,t,n){St(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:fe(t)&&(e.setupState=VC(t)),xS(e,n)}let zb;function xS(e,t,n){const i=e.type;if(!e.render){if(!t&&zb&&!i.render){const r=i.template||u1(e).template;if(r){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Ie(Ie({isCustomElement:s,delimiters:a},o),l);i.render=zb(r,c)}}e.render=i.render||Ei}dl(e),Yl(),rP(e),Ul(),$o()}function AP(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Tn(e,"get","$attrs"),t[n]}}))}function LP(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return AP(e)},slots:e.slots,emit:e.emit,expose:t}}function Qg(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(VC(s1(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qc)return qc[n](e)},has(t,n){return n in t||n in qc}}))}function OP(e,t=!0){return St(e)?e.displayName||e.name:e.name||t&&e.__name}function kP(e){return St(e)&&"__vccOpts"in e}const yi=(e,t)=>M4(e,t,mu);function Mr(e,t,n){const i=arguments.length;return i===2?fe(t)&&!xt(t)?oy(t)?Le(e,null,[t]):Le(e,t):Le(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&oy(n)&&(n=[n]),Le(e,t,n))}const PP=Symbol.for("v-scx"),FP=()=>Pr(PP),NP="3.3.4",DP="http://www.w3.org/2000/svg",xo=typeof document<"u"?document:null,Gb=xo&&xo.createElement("template"),$P={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?xo.createElementNS(DP,e):xo.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>xo.createTextNode(e),createComment:e=>xo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>xo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{Gb.innerHTML=i?`<svg>${e}</svg>`:e;const a=Gb.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function zP(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function GP(e,t,n){const i=e.style,r=ke(n);if(n&&!r){if(t&&!ke(t))for(const s in t)n[s]==null&&ay(i,s,"");for(const s in n)ay(i,s,n[s])}else{const s=i.display;r?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const Wb=/\s*!important$/;function ay(e,t,n){if(xt(n))n.forEach(i=>ay(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=WP(e,t);Wb.test(n)?e.setProperty(Bl(i),n.replace(Wb,""),"important"):e[i]=n}}const Bb=["Webkit","Moz","ms"],C0={};function WP(e,t){const n=C0[t];if(n)return n;let i=er(t);if(i!=="filter"&&i in e)return C0[t]=i;i=Yg(i);for(let r=0;r<Bb.length;r++){const s=Bb[r]+i;if(s in e)return C0[t]=s}return t}const Yb="http://www.w3.org/1999/xlink";function BP(e,t,n,i,r){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Yb,t.slice(6,t.length)):e.setAttributeNS(Yb,t,n);else{const s=Hk(t);n==null||s&&!SC(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function YP(e,t,n,i,r,s,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,r,s),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=SC(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function UP(e,t,n,i){e.addEventListener(t,n,i)}function VP(e,t,n,i){e.removeEventListener(t,n,i)}function XP(e,t,n,i,r=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[a,l]=HP(t);if(i){const c=s[t]=qP(i,r);UP(e,a,c,l)}else o&&(VP(e,a,o,l),s[t]=void 0)}}const Ub=/(?:Once|Passive|Capture)$/;function HP(e){let t;if(Ub.test(e)){t={};let i;for(;i=e.match(Ub);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Bl(e.slice(2)),t]}let S0=0;const jP=Promise.resolve(),ZP=()=>S0||(jP.then(()=>S0=0),S0=Date.now());function qP(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;si(KP(i,n.value),t,5,[i])};return n.value=e,n.attached=ZP(),n}function KP(e,t){if(xt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const Vb=/^on[a-z]/,JP=(e,t,n,i,r=!1,s,o,a,l)=>{t==="class"?zP(e,i,r):t==="style"?GP(e,n,i):Gg(t)?Z_(t)||XP(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):QP(e,t,i,r))?YP(e,t,i,s,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),BP(e,t,i,r))};function QP(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&Vb.test(t)&&St(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Vb.test(t)&&ke(n)?!1:t in e}const ss="transition",gc="animation",m1=(e,{slots:t})=>Mr(Y4,tF(e),t);m1.displayName="Transition";const bS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};m1.props=Ie({},nS,bS);const so=(e,t=[])=>{xt(e)?e.forEach(n=>n(...t)):e&&e(...t)},Xb=e=>e?xt(e)?e.some(t=>t.length>1):e.length>1:!1;function tF(e){const t={};for(const M in e)M in bS||(t[M]=e[M]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,g=eF(r),m=g&&g[0],_=g&&g[1],{onBeforeEnter:p,onEnter:y,onEnterCancelled:x,onLeave:w,onLeaveCancelled:v,onBeforeAppear:b=p,onAppear:E=y,onAppearCancelled:C=x}=t,I=(M,k,O)=>{oo(M,k?u:a),oo(M,k?c:o),O&&O()},S=(M,k)=>{M._isLeaving=!1,oo(M,f),oo(M,d),oo(M,h),k&&k()},R=M=>(k,O)=>{const A=M?E:y,P=()=>I(k,M,O);so(A,[k,P]),Hb(()=>{oo(k,M?l:s),os(k,M?u:a),Xb(A)||jb(k,i,m,P)})};return Ie(t,{onBeforeEnter(M){so(p,[M]),os(M,s),os(M,o)},onBeforeAppear(M){so(b,[M]),os(M,l),os(M,c)},onEnter:R(!1),onAppear:R(!0),onLeave(M,k){M._isLeaving=!0;const O=()=>S(M,k);os(M,f),rF(),os(M,h),Hb(()=>{M._isLeaving&&(oo(M,f),os(M,d),Xb(w)||jb(M,i,_,O))}),so(w,[M,O])},onEnterCancelled(M){I(M,!1),so(x,[M])},onAppearCancelled(M){I(M,!0),so(C,[M])},onLeaveCancelled(M){S(M),so(v,[M])}})}function eF(e){if(e==null)return null;if(fe(e))return[M0(e.enter),M0(e.leave)];{const t=M0(e);return[t,t]}}function M0(e){return Wk(e)}function os(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function oo(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Hb(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let nF=0;function jb(e,t,n,i){const r=e._endId=++nF,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=iF(e,t);if(!o)return i();const c=o+"end";let u=0;const f=()=>{e.removeEventListener(c,h),s()},h=d=>{d.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(c,h)}function iF(e,t){const n=window.getComputedStyle(e),i=g=>(n[g]||"").split(", "),r=i(`${ss}Delay`),s=i(`${ss}Duration`),o=Zb(r,s),a=i(`${gc}Delay`),l=i(`${gc}Duration`),c=Zb(a,l);let u=null,f=0,h=0;t===ss?o>0&&(u=ss,f=o,h=s.length):t===gc?c>0&&(u=gc,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?ss:gc:null,h=u?u===ss?s.length:l.length:0);const d=u===ss&&/\b(transform|all)(,|$)/.test(i(`${ss}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function Zb(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>qb(n)+qb(e[i])))}function qb(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function rF(){return document.body.offsetHeight}const R0={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):mc(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),mc(e,!0),i.enter(e)):i.leave(e,()=>{mc(e,!1)}):mc(e,t))},beforeUnmount(e,{value:t}){mc(e,t)}};function mc(e,t){e.style.display=t?e._vod:"none"}const sF=Ie({patchProp:JP},$P);let Kb;function oF(){return Kb||(Kb=pP(sF))}const aF=(...e)=>{const t=oF().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=lF(i);if(!r)return;const s=t._component;!St(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function lF(e){return ke(e)?document.querySelector(e):e}var cF=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const uF=Symbol();var Jb;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Jb||(Jb={}));function fF(){const e=jk(!0),t=e.run(()=>jr({}));let n=[],i=[];const r=s1({install(s){r._a=s,s.provide(uF,r),s.config.globalProperties.$pinia=r,i.forEach(o=>n.push(o)),i=[]},use(s){return!this._a&&!cF?i.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Da=typeof window<"u";function hF(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Kt=Object.assign;function I0(e,t){const n={};for(const i in t){const r=t[i];n[i]=Si(r)?r.map(e):e(r)}return n}const Jc=()=>{},Si=Array.isArray,dF=/\/$/,gF=e=>e.replace(dF,"");function A0(e,t,n="/"){let i,r={},s="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),r=e(s)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=_F(i??t,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function mF(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Qb(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function pF(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&gl(t.matched[i],n.matched[r])&&vS(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function gl(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function vS(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!yF(e[n],t[n]))return!1;return!0}function yF(e,t){return Si(e)?tv(e,t):Si(t)?tv(t,e):e===t}function tv(e,t){return Si(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function _F(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var pu;(function(e){e.pop="pop",e.push="push"})(pu||(pu={}));var Qc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Qc||(Qc={}));function wF(e){if(!e)if(Da){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),gF(e)}const xF=/^[^#]+#/;function bF(e,t){return e.replace(xF,"#")+t}function vF(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const tm=()=>({left:window.pageXOffset,top:window.pageYOffset});function EF(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=vF(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function ev(e,t){return(history.state?history.state.position-t:-1)+e}const ly=new Map;function TF(e,t){ly.set(e,t)}function CF(e){const t=ly.get(e);return ly.delete(e),t}let SF=()=>location.protocol+"//"+location.host;function ES(e,t){const{pathname:n,search:i,hash:r}=t,s=e.indexOf("#");if(s>-1){let a=r.includes(e.slice(s))?e.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),Qb(l,"")}return Qb(n,e)+i+r}function MF(e,t,n,i){let r=[],s=[],o=null;const a=({state:h})=>{const d=ES(e,location),g=n.value,m=t.value;let _=0;if(h){if(n.value=d,t.value=h,o&&o===g){o=null;return}_=m?h.position-m.position:0}else i(d);r.forEach(p=>{p(n.value,g,{delta:_,type:pu.pop,direction:_?_>0?Qc.forward:Qc.back:Qc.unknown})})};function l(){o=n.value}function c(h){r.push(h);const d=()=>{const g=r.indexOf(h);g>-1&&r.splice(g,1)};return s.push(d),d}function u(){const{history:h}=window;h.state&&h.replaceState(Kt({},h.state,{scroll:tm()}),"")}function f(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function nv(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?tm():null}}function RF(e){const{history:t,location:n}=window,i={value:ES(e,n)},r={value:t.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:SF()+e+l;try{t[u?"replaceState":"pushState"](c,"",h),r.value=c}catch(d){console.error(d),n[u?"replace":"assign"](h)}}function o(l,c){const u=Kt({},t.state,nv(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=Kt({},r.value,t.state,{forward:l,scroll:tm()});s(u.current,u,!0);const f=Kt({},nv(i.value,l,null),{position:u.position+1},c);s(l,f,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function IF(e){e=wF(e);const t=RF(e),n=MF(e,t.state,t.location,t.replace);function i(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=Kt({location:"",base:e,go:i,createHref:bF.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function AF(e){return typeof e=="string"||e&&typeof e=="object"}function TS(e){return typeof e=="string"||typeof e=="symbol"}const as={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},CS=Symbol("");var iv;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(iv||(iv={}));function ml(e,t){return Kt(new Error,{type:e,[CS]:!0},t)}function hr(e,t){return e instanceof Error&&CS in e&&(t==null||!!(e.type&t))}const rv="[^/]+?",LF={sensitive:!1,strict:!1,start:!0,end:!0},OF=/[.+*?^${}()[\]/\\]/g;function kF(e,t){const n=Kt({},LF,t),i=[];let r=n.start?"^":"";const s=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const h=c[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(r+="/"),r+=h.value.replace(OF,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:m,optional:_,regexp:p}=h;s.push({name:g,repeatable:m,optional:_});const y=p||rv;if(y!==rv){d+=10;try{new RegExp(`(${y})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${y}): `+w.message)}}let x=m?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(x=_&&c.length<2?`(?:/${x})`:"/"+x),_&&(x+="?"),r+=x,d+=20,_&&(d+=-8),m&&(d+=-20),y===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const d=u[h]||"",g=s[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function l(c){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const d of h)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:_}=d,p=g in c?c[g]:"";if(Si(p)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const y=Si(p)?p.join("/"):p;if(!y)if(_)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=y}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function PF(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function FF(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const s=PF(i[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-i.length)===1){if(sv(i))return 1;if(sv(r))return-1}return r.length-i.length}function sv(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const NF={type:0,value:""},DF=/[a-zA-Z0-9_]/;function $F(e){if(!e)return[[]];if(e==="/")return[[NF]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function f(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):h();break;case 4:h(),n=i;break;case 1:l==="("?n=2:DF.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}function zF(e,t,n){const i=kF($F(e.path),n),r=Kt(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function GF(e,t){const n=[],i=new Map;t=lv({strict:!1,end:!0,sensitive:!1},t);function r(u){return i.get(u)}function s(u,f,h){const d=!h,g=WF(u);g.aliasOf=h&&h.record;const m=lv(t,u),_=[g];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const w of x)_.push(Kt({},g,{components:h?h.record.components:g.components,path:w,aliasOf:h?h.record:g}))}let p,y;for(const x of _){const{path:w}=x;if(f&&w[0]!=="/"){const v=f.record.path,b=v[v.length-1]==="/"?"":"/";x.path=f.record.path+(w&&b+w)}if(p=zF(x,f,m),h?h.alias.push(p):(y=y||p,y!==p&&y.alias.push(p),d&&u.name&&!av(p)&&o(u.name)),g.children){const v=g.children;for(let b=0;b<v.length;b++)s(v[b],p,h&&h.children[b])}h=h||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&l(p)}return y?()=>{o(y)}:Jc}function o(u){if(TS(u)){const f=i.get(u);f&&(i.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let f=0;for(;f<n.length&&FF(u,n[f])>=0&&(u.record.path!==n[f].record.path||!SS(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!av(u)&&i.set(u.record.name,u)}function c(u,f){let h,d={},g,m;if("name"in u&&u.name){if(h=i.get(u.name),!h)throw ml(1,{location:u});m=h.record.name,d=Kt(ov(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),u.params&&ov(u.params,h.keys.map(y=>y.name))),g=h.stringify(d)}else if("path"in u)g=u.path,h=n.find(y=>y.re.test(g)),h&&(d=h.parse(g),m=h.record.name);else{if(h=f.name?i.get(f.name):n.find(y=>y.re.test(f.path)),!h)throw ml(1,{location:u,currentLocation:f});m=h.record.name,d=Kt({},f.params,u.params),g=h.stringify(d)}const _=[];let p=h;for(;p;)_.unshift(p.record),p=p.parent;return{name:m,path:g,params:d,matched:_,meta:YF(_)}}return e.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function ov(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function WF(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:BF(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function BF(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function av(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function YF(e){return e.reduce((t,n)=>Kt(t,n.meta),{})}function lv(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function SS(e,t){return t.children.some(n=>n===e||SS(e,n))}const MS=/#/g,UF=/&/g,VF=/\//g,XF=/=/g,HF=/\?/g,RS=/\+/g,jF=/%5B/g,ZF=/%5D/g,IS=/%5E/g,qF=/%60/g,AS=/%7B/g,KF=/%7C/g,LS=/%7D/g,JF=/%20/g;function p1(e){return encodeURI(""+e).replace(KF,"|").replace(jF,"[").replace(ZF,"]")}function QF(e){return p1(e).replace(AS,"{").replace(LS,"}").replace(IS,"^")}function cy(e){return p1(e).replace(RS,"%2B").replace(JF,"+").replace(MS,"%23").replace(UF,"%26").replace(qF,"`").replace(AS,"{").replace(LS,"}").replace(IS,"^")}function tN(e){return cy(e).replace(XF,"%3D")}function eN(e){return p1(e).replace(MS,"%23").replace(HF,"%3F")}function nN(e){return e==null?"":eN(e).replace(VF,"%2F")}function ad(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function iN(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(RS," "),o=s.indexOf("="),a=ad(o<0?s:s.slice(0,o)),l=o<0?null:ad(s.slice(o+1));if(a in t){let c=t[a];Si(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function cv(e){let t="";for(let n in e){const i=e[n];if(n=tN(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Si(i)?i.map(s=>s&&cy(s)):[i&&cy(i)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function rN(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Si(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const sN=Symbol(""),uv=Symbol(""),y1=Symbol(""),OS=Symbol(""),uy=Symbol("");function pc(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function _s(e,t,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=f=>{f===!1?a(ml(4,{from:n,to:t})):f instanceof Error?a(f):AF(f)?a(ml(2,{from:t,to:f})):(s&&i.enterCallbacks[r]===s&&typeof f=="function"&&s.push(f),o())},c=e.call(i&&i.instances[r],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(f=>a(f))})}function L0(e,t,n,i){const r=[];for(const s of e)for(const o in s.components){let a=s.components[o];if(!(t!=="beforeRouteEnter"&&!s.instances[o]))if(oN(a)){const c=(a.__vccOpts||a)[t];c&&r.push(_s(c,n,i,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=hF(c)?c.default:c;s.components[o]=u;const h=(u.__vccOpts||u)[t];return h&&_s(h,n,i,s,o)()}))}}return r}function oN(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function fv(e){const t=Pr(y1),n=Pr(OS),i=yi(()=>t.resolve(Do(e.to))),r=yi(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(gl.bind(null,u));if(h>-1)return h;const d=hv(l[c-2]);return c>1&&hv(u)===d&&f[f.length-1].path!==d?f.findIndex(gl.bind(null,l[c-2])):h}),s=yi(()=>r.value>-1&&uN(n.params,i.value.params)),o=yi(()=>r.value>-1&&r.value===n.matched.length-1&&vS(n.params,i.value.params));function a(l={}){return cN(l)?t[Do(e.replace)?"replace":"push"](Do(e.to)).catch(Jc):Promise.resolve()}return{route:i,href:yi(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const aN=Hu({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:fv,setup(e,{slots:t}){const n=Xg(fv(e)),{options:i}=Pr(y1),r=yi(()=>({[dv(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[dv(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:Mr("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),lN=aN;function cN(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function uN(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!Si(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function hv(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const dv=(e,t,n)=>e??t??n,fN=Hu({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=Pr(uy),r=yi(()=>e.route||i.value),s=Pr(uv,0),o=yi(()=>{let c=Do(s);const{matched:u}=r.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=yi(()=>r.value.matched[o.value]);Vh(uv,yi(()=>o.value+1)),Vh(sN,a),Vh(uy,r);const l=jr();return jc(()=>[l.value,a.value,e.name],([c,u,f],[h,d,g])=>{u&&(u.instances[f]=c,d&&d!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!gl(u,d)||!h)&&(u.enterCallbacks[f]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=r.value,u=e.name,f=a.value,h=f&&f.components[u];if(!h)return gv(n.default,{Component:h,route:c});const d=f.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,_=Mr(h,Kt({},g,t,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return gv(n.default,{Component:_,route:c})||_}}});function gv(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const kS=fN;function hN(e){const t=GF(e.routes,e),n=e.parseQuery||iN,i=e.stringifyQuery||cv,r=e.history,s=pc(),o=pc(),a=pc(),l=E4(as);let c=as;Da&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=I0.bind(null,$=>""+$),f=I0.bind(null,nN),h=I0.bind(null,ad);function d($,Y){let D,V;return TS($)?(D=t.getRecordMatcher($),V=Y):V=$,t.addRoute(V,D)}function g($){const Y=t.getRecordMatcher($);Y&&t.removeRoute(Y)}function m(){return t.getRoutes().map($=>$.record)}function _($){return!!t.getRecordMatcher($)}function p($,Y){if(Y=Kt({},Y||l.value),typeof $=="string"){const F=A0(n,$,Y.path),W=t.resolve({path:F.path},Y),B=r.createHref(F.fullPath);return Kt(F,W,{params:h(W.params),hash:ad(F.hash),redirectedFrom:void 0,href:B})}let D;if("path"in $)D=Kt({},$,{path:A0(n,$.path,Y.path).path});else{const F=Kt({},$.params);for(const W in F)F[W]==null&&delete F[W];D=Kt({},$,{params:f(F)}),Y.params=f(Y.params)}const V=t.resolve(D,Y),K=$.hash||"";V.params=u(h(V.params));const T=mF(i,Kt({},$,{hash:QF(K),path:V.path})),L=r.createHref(T);return Kt({fullPath:T,hash:K,query:i===cv?rN($.query):$.query||{}},V,{redirectedFrom:void 0,href:L})}function y($){return typeof $=="string"?A0(n,$,l.value.path):Kt({},$)}function x($,Y){if(c!==$)return ml(8,{from:Y,to:$})}function w($){return E($)}function v($){return w(Kt(y($),{replace:!0}))}function b($){const Y=$.matched[$.matched.length-1];if(Y&&Y.redirect){const{redirect:D}=Y;let V=typeof D=="function"?D($):D;return typeof V=="string"&&(V=V.includes("?")||V.includes("#")?V=y(V):{path:V},V.params={}),Kt({query:$.query,hash:$.hash,params:"path"in V?{}:$.params},V)}}function E($,Y){const D=c=p($),V=l.value,K=$.state,T=$.force,L=$.replace===!0,F=b(D);if(F)return E(Kt(y(F),{state:typeof F=="object"?Kt({},K,F.state):K,force:T,replace:L}),Y||D);const W=D;W.redirectedFrom=Y;let B;return!T&&pF(i,V,D)&&(B=ml(16,{to:W,from:V}),Z(V,V,!0,!1)),(B?Promise.resolve(B):S(W,V)).catch(X=>hr(X)?hr(X,2)?X:U(X):G(X,W,V)).then(X=>{if(X){if(hr(X,2))return E(Kt({replace:L},y(X.to),{state:typeof X.to=="object"?Kt({},K,X.to.state):K,force:T}),Y||W)}else X=M(W,V,!0,L,K);return R(W,V,X),X})}function C($,Y){const D=x($,Y);return D?Promise.reject(D):Promise.resolve()}function I($){const Y=nt.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext($):$()}function S($,Y){let D;const[V,K,T]=dN($,Y);D=L0(V.reverse(),"beforeRouteLeave",$,Y);for(const F of V)F.leaveGuards.forEach(W=>{D.push(_s(W,$,Y))});const L=C.bind(null,$,Y);return D.push(L),ot(D).then(()=>{D=[];for(const F of s.list())D.push(_s(F,$,Y));return D.push(L),ot(D)}).then(()=>{D=L0(K,"beforeRouteUpdate",$,Y);for(const F of K)F.updateGuards.forEach(W=>{D.push(_s(W,$,Y))});return D.push(L),ot(D)}).then(()=>{D=[];for(const F of T)if(F.beforeEnter)if(Si(F.beforeEnter))for(const W of F.beforeEnter)D.push(_s(W,$,Y));else D.push(_s(F.beforeEnter,$,Y));return D.push(L),ot(D)}).then(()=>($.matched.forEach(F=>F.enterCallbacks={}),D=L0(T,"beforeRouteEnter",$,Y),D.push(L),ot(D))).then(()=>{D=[];for(const F of o.list())D.push(_s(F,$,Y));return D.push(L),ot(D)}).catch(F=>hr(F,8)?F:Promise.reject(F))}function R($,Y,D){a.list().forEach(V=>I(()=>V($,Y,D)))}function M($,Y,D,V,K){const T=x($,Y);if(T)return T;const L=Y===as,F=Da?history.state:{};D&&(V||L?r.replace($.fullPath,Kt({scroll:L&&F&&F.scroll},K)):r.push($.fullPath,K)),l.value=$,Z($,Y,D,L),U()}let k;function O(){k||(k=r.listen(($,Y,D)=>{if(!st.listening)return;const V=p($),K=b(V);if(K){E(Kt(K,{replace:!0}),V).catch(Jc);return}c=V;const T=l.value;Da&&TF(ev(T.fullPath,D.delta),tm()),S(V,T).catch(L=>hr(L,12)?L:hr(L,2)?(E(L.to,V).then(F=>{hr(F,20)&&!D.delta&&D.type===pu.pop&&r.go(-1,!1)}).catch(Jc),Promise.reject()):(D.delta&&r.go(-D.delta,!1),G(L,V,T))).then(L=>{L=L||M(V,T,!1),L&&(D.delta&&!hr(L,8)?r.go(-D.delta,!1):D.type===pu.pop&&hr(L,20)&&r.go(-1,!1)),R(V,T,L)}).catch(Jc)}))}let A=pc(),P=pc(),N;function G($,Y,D){U($);const V=P.list();return V.length?V.forEach(K=>K($,Y,D)):console.error($),Promise.reject($)}function H(){return N&&l.value!==as?Promise.resolve():new Promise(($,Y)=>{A.add([$,Y])})}function U($){return N||(N=!$,O(),A.list().forEach(([Y,D])=>$?D($):Y()),A.reset()),$}function Z($,Y,D,V){const{scrollBehavior:K}=e;if(!Da||!K)return Promise.resolve();const T=!D&&CF(ev($.fullPath,0))||(V||!D)&&history.state&&history.state.scroll||null;return HC().then(()=>K($,Y,T)).then(L=>L&&EF(L)).catch(L=>G(L,$,Y))}const z=$=>r.go($);let Q;const nt=new Set,st={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,hasRoute:_,getRoutes:m,resolve:p,options:e,push:w,replace:v,go:z,back:()=>z(-1),forward:()=>z(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:P.add,isReady:H,install($){const Y=this;$.component("RouterLink",lN),$.component("RouterView",kS),$.config.globalProperties.$router=Y,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>Do(l)}),Da&&!Q&&l.value===as&&(Q=!0,w(r.location).catch(K=>{}));const D={};for(const K in as)Object.defineProperty(D,K,{get:()=>l.value[K],enumerable:!0});$.provide(y1,Y),$.provide(OS,zC(D)),$.provide(uy,l);const V=$.unmount;nt.add($),$.unmount=function(){nt.delete($),nt.size<1&&(c=as,k&&k(),k=null,l.value=as,Q=!1,N=!1),V()}}};function ot($){return $.reduce((Y,D)=>Y.then(()=>I(D)),Promise.resolve())}return st}function dN(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(c=>gl(c,a))?i.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>gl(c,l))||r.push(l))}return[n,i,r]}const gN=Hu({__name:"App",setup(e){return(t,n)=>(Ut(),h1(Do(kS)))}}),mN="modulepreload",pN=function(e){return"/openactivity/"+e},mv={},pv=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=pN(s),s in mv)return;mv[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const f=r[u];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":mN,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};const yN="/openactivity/assets/destination-point-63b16bda.svg",_N="/openactivity/assets/starting-point-c9a465c9.svg";class wN{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const qr=wN,pl={PROPERTYCHANGE:"propertychange"};class xN{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const _1=xN;function bN(e,t,n){let i,r;n=n||$s;let s=0,o=e.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+n(e[i],t),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function $s(e,t){return e>t?1:e<t?-1:0}function w1(e,t,n){if(e[0]<=t)return 0;const i=e.length;if(t<=e[i-1])return i-1;if(typeof n=="function"){for(let r=1;r<i;++r){const s=e[r];if(s===t)return r;if(s<t)return n(t,e[r-1],s)>0?r-1:r}return i-1}if(n>0){for(let r=1;r<i;++r)if(e[r]<t)return r-1;return i-1}if(n<0){for(let r=1;r<i;++r)if(e[r]<=t)return r;return i-1}for(let r=1;r<i;++r){if(e[r]==t)return r;if(e[r]<t)return e[r-1]-t<t-e[r]?r-1:r}return i-1}function vN(e,t,n){for(;t<n;){const i=e[t];e[t]=e[n],e[n]=i,++t,--n}}function Fr(e,t){const n=Array.isArray(t)?t:[t],i=n.length;for(let r=0;r<i;r++)e[e.length]=n[r]}function js(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function EN(e,t,n){const i=t||$s;return e.every(function(r,s){if(s===0)return!0;const o=i(e[s-1],r);return!(o>0||n&&o===0)})}function yu(){return!0}function em(){return!1}function yl(){}function TN(e){let t=!1,n,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==r||!js(s,i))&&(t=!0,r=this,i=s,n=e.apply(this,arguments)),n}}function CN(e){function t(){let n;try{n=e()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return t()}function ju(e){for(const t in e)delete e[t]}function _l(e){let t;for(t in e)return!1;return!t}class SN extends _1{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const i=this.listeners_||(this.listeners_={}),r=i[t]||(i[t]=[]);r.includes(n)||r.push(n)}dispatchEvent(t){const n=typeof t=="string",i=n?t:t.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=n?new qr(t):t;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,yl);delete o[i]}return l}disposeInternal(){this.listeners_&&ju(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){const i=this.listeners_&&this.listeners_[t];if(i){const r=i.indexOf(n);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[r]=yl,++this.pendingRemovals_[t]):(i.splice(r,1),i.length===0&&delete this.listeners_[t]))}}}const Zu=SN,vt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Pt(e,t,n,i,r){if(i&&i!==e&&(n=n.bind(i)),r){const o=n;n=function(){e.removeEventListener(t,n),o.apply(this,arguments)}}const s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function ld(e,t,n,i){return Pt(e,t,n,i,!0)}function ee(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),ju(e))}class nm extends Zu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(vt.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const i=t.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Pt(this,t[s],n);return r}return Pt(this,t,n)}onceInternal(t,n){let i;if(Array.isArray(t)){const r=t.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=ld(this,t[s],n)}else i=ld(this,t,n);return n.ol_key=i,i}unInternal(t,n){const i=n.ol_key;if(i)MN(i);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)}}nm.prototype.on;nm.prototype.once;nm.prototype.un;function MN(e){if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)ee(e[t]);else ee(e)}const PS=nm;function wt(){throw new Error("Unimplemented abstract method.")}let RN=0;function Vt(e){return e.ol_uid||(e.ol_uid=String(++RN))}class yv extends qr{constructor(t,n,i){super(t),this.key=n,this.oldValue=i}}class IN extends PS{constructor(t){super(),this.on,this.once,this.un,Vt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new yv(i,t,n)),i=pl.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new yv(i,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,i){const r=this.values_||(this.values_={});if(i)r[t]=n;else{const s=r[t];r[t]=n,s!==n&&this.notify(t,s)}}setProperties(t,n){for(const i in t)this.set(i,t[i],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],_l(this.values_)&&(this.values_=null),n||this.notify(t,i)}}}const Pi=IN,xn={ADD:"add",REMOVE:"remove"},_v={LENGTH:"length"};class Jf extends qr{constructor(t,n,i){super(t),this.element=n,this.index=i}}class AN extends Pi{constructor(t,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let n=0,i=t.length;n<i;++n)this.push(t[n]);return this}forEach(t){const n=this.array_;for(let i=0,r=n.length;i<r;++i)t(n[i],i,n)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(_v.LENGTH)}insertAt(t,n){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new Jf(xn.ADD,n,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const n=this.getLength();return this.insertAt(n,t),this.getLength()}remove(t){const n=this.array_;for(let i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Jf(xn.REMOVE,n,t)),n}setAt(t,n){const i=this.getLength();if(t>=i){this.insertAt(t,n);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n,t);const r=this.array_[t];this.array_[t]=n,this.dispatchEvent(new Jf(xn.REMOVE,r,t)),this.dispatchEvent(new Jf(xn.ADD,n,t))}updateLength_(){this.set(_v.LENGTH,this.array_.length)}assertUnique_(t,n){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==n)throw new Error("Duplicate item added to a unique collection")}}const Hi=AN,zs=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",LN=zs.includes("firefox"),ON=zs.includes("safari")&&!zs.includes("chrom");ON&&(zs.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(zs));const kN=zs.includes("webkit")&&!zs.includes("edge"),FS=zs.includes("macintosh"),NS=typeof devicePixelRatio<"u"?devicePixelRatio:1,x1=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,DS=typeof Image<"u"&&Image.prototype.decode,$S=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}();function Nt(e,t){if(!e)throw new Error(t)}new Array(6);function Ci(){return[1,0,0,1,0,0]}function PN(e,t,n,i,r,s,o){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=s,e[5]=o,e}function FN(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ee(e,t){const n=t[0],i=t[1];return t[0]=e[0]*n+e[2]*i+e[4],t[1]=e[1]*n+e[3]*i+e[5],t}function NN(e,t,n){return PN(e,t,0,0,n,0,0)}function Mi(e,t,n,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return e[0]=i*c,e[1]=r*l,e[2]=-i*l,e[3]=r*c,e[4]=o*i*c-a*i*l+t,e[5]=o*r*l+a*r*c+n,e}function im(e,t){const n=DN(t);Nt(n!==0,"Transformation matrix cannot be inverted");const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return e[0]=o/n,e[1]=-r/n,e[2]=-s/n,e[3]=i/n,e[4]=(s*l-o*a)/n,e[5]=-(i*l-r*a)/n,e}function DN(e){return e[0]*e[3]-e[1]*e[2]}let wv;function b1(e){const t="matrix("+e.join(", ")+")";if(x1)return t;const n=wv||(wv=document.createElement("div"));return n.style.transform=t,n.style.transform}const Ge={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function xv(e){const t=oi();for(let n=0,i=e.length;n<i;++n)tu(t,e[n]);return t}function v1(e,t,n){return n?(n[0]=e[0]-t,n[1]=e[1]-t,n[2]=e[2]+t,n[3]=e[3]+t,n):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function zS(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function ca(e,t,n){let i,r;return t<e[0]?i=e[0]-t:e[2]<t?i=t-e[2]:i=0,n<e[1]?r=e[1]-n:e[3]<n?r=n-e[3]:r=0,i*i+r*r}function qu(e,t){return E1(e,t[0],t[1])}function Rs(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function E1(e,t,n){return e[0]<=t&&t<=e[2]&&e[1]<=n&&n<=e[3]}function fy(e,t){const n=e[0],i=e[1],r=e[2],s=e[3],o=t[0],a=t[1];let l=Ge.UNKNOWN;return o<n?l=l|Ge.LEFT:o>r&&(l=l|Ge.RIGHT),a<i?l=l|Ge.BELOW:a>s&&(l=l|Ge.ABOVE),l===Ge.UNKNOWN&&(l=Ge.INTERSECTING),l}function oi(){return[1/0,1/0,-1/0,-1/0]}function Gs(e,t,n,i,r){return r?(r[0]=e,r[1]=t,r[2]=n,r[3]=i,r):[e,t,n,i]}function Ku(e){return Gs(1/0,1/0,-1/0,-1/0,e)}function $N(e,t){const n=e[0],i=e[1];return Gs(n,i,n,i,t)}function GS(e,t,n,i,r){const s=Ku(r);return BS(s,e,t,n,i)}function _u(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function WS(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function tu(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function BS(e,t,n,i,r){for(;n<i;n+=r)zN(e,t[n],t[n+1]);return e}function zN(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)}function YS(e,t){let n;return n=t(rm(e)),n||(n=t(sm(e)),n)||(n=t(om(e)),n)||(n=t(ua(e)),n)?n:!1}function hy(e){let t=0;return Vl(e)||(t=Qt(e)*zn(e)),t}function rm(e){return[e[0],e[1]]}function sm(e){return[e[2],e[1]]}function qo(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function GN(e,t){let n;if(t==="bottom-left")n=rm(e);else if(t==="bottom-right")n=sm(e);else if(t==="top-left")n=ua(e);else if(t==="top-right")n=om(e);else throw new Error("Invalid corner");return n}function dy(e,t,n,i,r){const[s,o,a,l,c,u,f,h]=gy(e,t,n,i);return Gs(Math.min(s,a,c,f),Math.min(o,l,u,h),Math.max(s,a,c,f),Math.max(o,l,u,h),r)}function gy(e,t,n,i){const r=t*i[0]/2,s=t*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,c=r*a,u=s*o,f=s*a,h=e[0],d=e[1];return[h-l+f,d-c-u,h-l-f,d-c+u,h+l-f,d+c+u,h+l+f,d+c-u,h-l+f,d-c-u]}function zn(e){return e[3]-e[1]}function el(e,t,n){const i=n||oi();return fn(e,t)?(e[0]>t[0]?i[0]=e[0]:i[0]=t[0],e[1]>t[1]?i[1]=e[1]:i[1]=t[1],e[2]<t[2]?i[2]=e[2]:i[2]=t[2],e[3]<t[3]?i[3]=e[3]:i[3]=t[3]):Ku(i),i}function ua(e){return[e[0],e[3]]}function om(e){return[e[2],e[3]]}function Qt(e){return e[2]-e[0]}function fn(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Vl(e){return e[2]<e[0]||e[3]<e[1]}function WN(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function BN(e,t){const n=(e[2]-e[0])/2*(t-1),i=(e[3]-e[1])/2*(t-1);e[0]-=n,e[2]+=n,e[1]-=i,e[3]+=i}function YN(e,t,n){let i=!1;const r=fy(e,t),s=fy(e,n);if(r===Ge.INTERSECTING||s===Ge.INTERSECTING)i=!0;else{const o=e[0],a=e[1],l=e[2],c=e[3],u=t[0],f=t[1],h=n[0],d=n[1],g=(d-f)/(h-u);let m,_;s&Ge.ABOVE&&!(r&Ge.ABOVE)&&(m=h-(d-c)/g,i=m>=o&&m<=l),!i&&s&Ge.RIGHT&&!(r&Ge.RIGHT)&&(_=d-(h-l)*g,i=_>=a&&_<=c),!i&&s&Ge.BELOW&&!(r&Ge.BELOW)&&(m=h-(d-a)/g,i=m>=o&&m<=l),!i&&s&Ge.LEFT&&!(r&Ge.LEFT)&&(_=d-(h-o)*g,i=_>=a&&_<=c)}return i}function US(e,t){const n=t.getExtent(),i=qo(e);if(t.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const r=Qt(n),o=Math.floor((i[0]-n[0])/r)*r;e[0]-=o,e[2]-=o}return e}function UN(e,t){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];US(e,t);const i=Qt(n);if(Qt(e)>i)return[[n[0],e[1],n[2],e[3]]];if(e[0]<n[0])return[[e[0]+i,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-i,e[3]]]}return[e]}function Re(e,t,n){return Math.min(Math.max(e,t),n)}function VN(e,t,n,i,r,s){const o=r-n,a=s-i;if(o!==0||a!==0){const l=((e-n)*o+(t-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return zo(e,t,n,i)}function zo(e,t,n,i){const r=n-e,s=i-t;return r*r+s*s}function XN(e){const t=e.length;for(let i=0;i<t;i++){let r=i,s=Math.abs(e[i][i]);for(let a=i+1;a<t;a++){const l=Math.abs(e[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=e[r];e[r]=e[i],e[i]=o;for(let a=i+1;a<t;a++){const l=-e[a][i]/e[i][i];for(let c=i;c<t+1;c++)i==c?e[a][c]=0:e[a][c]+=l*e[i][c]}}const n=new Array(t);for(let i=t-1;i>=0;i--){n[i]=e[i][t]/e[i][i];for(let r=i-1;r>=0;r--)e[r][t]-=e[r][i]*n[i]}return n}function Hh(e){return e*Math.PI/180}function Go(e,t){const n=e%t;return n*t<0?n+t:n}function kn(e,t,n){return e+n*(t-e)}function am(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function Qf(e,t){return Math.floor(am(e,t))}function th(e,t){return Math.ceil(am(e,t))}const HN=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,jN=/^([a-z]*)$|^hsla?\(.*\)$/i;function VS(e){return typeof e=="string"?e:XS(e)}function ZN(e){const t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);const n=getComputedStyle(t).color;return document.body.removeChild(t),n}return""}const qN=function(){const t={};let n=0;return function(i){let r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){let s=0;for(const o in t)s++&3||(delete t[o],--n)}r=KN(i),t[i]=r,++n}return r}}();function cd(e){return Array.isArray(e)?e:qN(e)}function KN(e){let t,n,i,r,s;if(jN.exec(e)&&(e=ZN(e)),HN.exec(e)){const o=e.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(e.substr(1+0*a,a),16),n=parseInt(e.substr(1+1*a,a),16),i=parseInt(e.substr(1+2*a,a),16),l?r=parseInt(e.substr(1+3*a,a),16):r=255,a==1&&(t=(t<<4)+t,n=(n<<4)+n,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[t,n,i,r/255]}else if(e.startsWith("rgba("))s=e.slice(5,-1).split(",").map(Number),bv(s);else if(e.startsWith("rgb("))s=e.slice(4,-1).split(",").map(Number),s.push(1),bv(s);else throw new Error("Invalid color");return s}function bv(e){return e[0]=Re(e[0]+.5|0,0,255),e[1]=Re(e[1]+.5|0,0,255),e[2]=Re(e[2]+.5|0,0,255),e[3]=Re(e[3],0,1),e}function XS(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let n=e[1];n!=(n|0)&&(n=n+.5|0);let i=e[2];i!=(i|0)&&(i=i+.5|0);const r=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+n+","+i+","+r+")"}class JN{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const n in this.cache_){const i=this.cache_[n];!(t++&3)&&!i.hasListener()&&(delete this.cache_[n],--this.cacheSize_)}}}get(t,n,i){const r=vv(t,n,i);return r in this.cache_?this.cache_[r]:null}set(t,n,i,r){const s=vv(t,n,i);this.cache_[s]=r,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function vv(e,t,n){const i=n?VS(n):"null";return t+":"+e+":"+i}const ud=new JN,qt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class QN extends Pi{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const n=Object.assign({},t);typeof t.properties=="object"&&(delete n.properties,Object.assign(n,t.properties)),n[qt.OPACITY]=t.opacity!==void 0?t.opacity:1,Nt(typeof n[qt.OPACITY]=="number","Layer opacity must be a number"),n[qt.VISIBLE]=t.visible!==void 0?t.visible:!0,n[qt.Z_INDEX]=t.zIndex,n[qt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[qt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[qt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[qt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=Re(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(t){return wt()}getLayerStatesArray(t){return wt()}getExtent(){return this.get(qt.EXTENT)}getMaxResolution(){return this.get(qt.MAX_RESOLUTION)}getMinResolution(){return this.get(qt.MIN_RESOLUTION)}getMinZoom(){return this.get(qt.MIN_ZOOM)}getMaxZoom(){return this.get(qt.MAX_ZOOM)}getOpacity(){return this.get(qt.OPACITY)}getSourceState(){return wt()}getVisible(){return this.get(qt.VISIBLE)}getZIndex(){return this.get(qt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(qt.EXTENT,t)}setMaxResolution(t){this.set(qt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(qt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(qt.MAX_ZOOM,t)}setMinZoom(t){this.set(qt.MIN_ZOOM,t)}setOpacity(t){Nt(typeof t=="number","Layer opacity must be a number"),this.set(qt.OPACITY,t)}setVisible(t){this.set(qt.VISIBLE,t)}setZIndex(t){this.set(qt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const HS=QN,Ki={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Me={ANIMATING:0,INTERACTING:1},ci={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},tD=42,T1=256,wl={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class eD{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||wl[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const jS=eD,Ju=6378137,Ba=Math.PI*Ju,nD=[-Ba,-Ba,Ba,Ba],iD=[-180,-85,180,85],eh=Ju*Math.log(Math.tan(Math.PI/2));class ba extends jS{constructor(t){super({code:t,units:"m",extent:nD,global:!0,worldExtent:iD,getPointResolution:function(n,i){return n/Math.cosh(i[1]/Ju)}})}}const Ev=[new ba("EPSG:3857"),new ba("EPSG:102100"),new ba("EPSG:102113"),new ba("EPSG:900913"),new ba("http://www.opengis.net/def/crs/EPSG/0/3857"),new ba("http://www.opengis.net/gml/srs/epsg.xml#3857")];function rD(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let r=0;r<i;r+=n){t[r]=Ba*e[r]/180;let s=Ju*Math.log(Math.tan(Math.PI*(+e[r+1]+90)/360));s>eh?s=eh:s<-eh&&(s=-eh),t[r+1]=s}return t}function sD(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let r=0;r<i;r+=n)t[r]=180*e[r]/Ba,t[r+1]=360*Math.atan(Math.exp(e[r+1]/Ju))/Math.PI-90;return t}const oD=6378137,Tv=[-180,-90,180,90],aD=Math.PI*oD/180;class ao extends jS{constructor(t,n){super({code:t,units:"degrees",extent:Tv,axisOrientation:n,global:!0,metersPerUnit:aD,worldExtent:Tv})}}const Cv=[new ao("CRS:84"),new ao("EPSG:4326","neu"),new ao("urn:ogc:def:crs:OGC:1.3:CRS84"),new ao("urn:ogc:def:crs:OGC:2:84"),new ao("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ao("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ao("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let my={};function lD(e){return my[e]||my[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function cD(e,t){my[e]=t}let nl={};function fd(e,t,n){const i=e.getCode(),r=t.getCode();i in nl||(nl[i]={}),nl[i][r]=n}function uD(e,t){let n;return e in nl&&t in nl[e]&&(n=nl[e][t]),n}function Sv(e,t,n){const i=n!==void 0?e.toFixed(n):""+e;let r=i.indexOf(".");return r=r===-1?i.length:r,r>t?i:new Array(1+t-r).join("0")+i}function fD(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function Mv(e,t,n){const i=Go(t+180,360)-180,r=Math.abs(3600*i),s=n||0;let o=Math.floor(r/3600),a=Math.floor((r-o*3600)/60),l=am(r-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"°";return(a!==0||l!==0)&&(c+=" "+Sv(a,2)+"′"),l!==0&&(c+=" "+Sv(l,2,s)+"″"),i!==0&&(c+=" "+e.charAt(i<0?1:0)),c}function hd(e,t){let n=!0;for(let i=e.length-1;i>=0;--i)if(e[i]!=t[i]){n=!1;break}return n}function C1(e,t){const n=Math.cos(t),i=Math.sin(t),r=e[0]*n-e[1]*i,s=e[1]*n+e[0]*i;return e[0]=r,e[1]=s,e}function hD(e,t){return e[0]*=t,e[1]*=t,e}function dD(e,t){return e?Mv("NS",e[1],t)+" "+Mv("EW",e[0],t):""}function ZS(e,t){if(t.canWrapX()){const n=Qt(t.getExtent()),i=gD(e,t,n);i&&(e[0]-=i*n)}return e}function gD(e,t,n){const i=t.getExtent();let r=0;return t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])&&(n=n||Qt(i),r=Math.floor((e[0]-i[0])/n)),r}const mD=63710088e-1;function Rv(e,t,n){n=n||mD;const i=Hh(e[1]),r=Hh(t[1]),s=(r-i)/2,o=Hh(t[0]-e[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const qS={info:1,warn:2,error:3,none:4};let pD=qS.info;function KS(...e){pD>qS.warn||console.warn(...e)}let py=!0;function yD(e){py=!(e===void 0?!0:e)}function S1(e,t){if(t!==void 0){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];t=t}else t=e.slice();return t}function JS(e,t){if(t!==void 0&&e!==t){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function _D(e){cD(e.getCode(),e),fd(e,e,S1)}function wD(e){e.forEach(_D)}function Oe(e){return typeof e=="string"?lD(e):e||null}function dd(e,t,n,i){e=Oe(e);let r;const s=e.getPointResolutionFunc();if(s){if(r=s(t,n),i&&i!==e.getUnits()){const o=e.getMetersPerUnit();o&&(r=r*o/wl[i])}}else{const o=e.getUnits();if(o=="degrees"&&!i||i=="degrees")r=t;else{const a=R1(e,Oe("EPSG:4326"));if(a===JS&&o!=="degrees")r=t*e.getMetersPerUnit();else{let c=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];c=a(c,c,2);const u=Rv(c.slice(0,2),c.slice(2,4)),f=Rv(c.slice(4,6),c.slice(6,8));r=(u+f)/2}const l=i?wl[i]:e.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function Iv(e){wD(e),e.forEach(function(t){e.forEach(function(n){t!==n&&fd(t,n,S1)})})}function xD(e,t,n,i){e.forEach(function(r){t.forEach(function(s){fd(r,s,n),fd(s,r,i)})})}function M1(e,t){return e?typeof e=="string"?Oe(e):e:Oe(t)}function bo(e,t){if(e===t)return!0;const n=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||R1(e,t)===S1)&&n}function R1(e,t){const n=e.getCode(),i=t.getCode();let r=uD(n,i);return r||(r=JS),r}function gd(e,t){const n=Oe(e),i=Oe(t);return R1(n,i)}function bD(e,t,n){return gd(t,n)(e,void 0,e.length)}function yy(e,t){return e}function br(e,t){return py&&!hd(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(py=!1,KS("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function QS(e,t){return e}function Rr(e,t){return e}function vD(){Iv(Ev),Iv(Cv),xD(Cv,Ev,rD,sD)}vD();function Av(e,t,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!t)return i;const l=t?0:s[0]*r,c=t?0:s[1]*r,u=a?a[0]:0,f=a?a[1]:0;let h=e[0]+l/2+u,d=e[2]-l/2+u,g=e[1]+c/2+f,m=e[3]-c/2+f;h>d&&(h=(d+h)/2,d=h),g>m&&(g=(m+g)/2,m=g);let _=Re(i[0],h,d),p=Re(i[1],g,m);if(o&&n&&r){const y=30*r;_+=-y*Math.log(1+Math.max(0,h-i[0])/y)+y*Math.log(1+Math.max(0,i[0]-d)/y),p+=-y*Math.log(1+Math.max(0,g-i[1])/y)+y*Math.log(1+Math.max(0,i[1]-m)/y)}return[_,p]}}function ED(e){return e}function I1(e,t,n,i){const r=Qt(t)/n[0],s=zn(t)/n[1];return i?Math.min(e,Math.max(r,s)):Math.min(e,Math.min(r,s))}function A1(e,t,n){let i=Math.min(e,t);const r=50;return i*=Math.log(1+r*Math.max(0,e/t-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/e-1))/r+1),Re(i,n/2,t*2)}function TD(e,t,n,i){return t=t!==void 0?t:!0,function(r,s,o,a){if(r!==void 0){const l=e[0],c=e[e.length-1],u=n?I1(l,n,o,i):l;if(a)return t?A1(r,u,c):Re(r,c,u);const f=Math.min(u,r),h=Math.floor(w1(e,f,s));return e[h]>u&&h<e.length-1?e[h+1]:e[h]}}}function CD(e,t,n,i,r,s){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,c){if(o!==void 0){const u=r?I1(t,r,l,s):t;if(c)return i?A1(o,u,n):Re(o,n,u);const f=1e-9,h=Math.ceil(Math.log(t/u)/Math.log(e)-f),d=-a*(.5-f)+.5,g=Math.min(u,o),m=Math.floor(Math.log(t/g)/Math.log(e)+d),_=Math.max(h,m),p=t/Math.pow(e,_);return Re(p,n,u)}}}function Lv(e,t,n,i,r){return n=n!==void 0?n:!0,function(s,o,a,l){if(s!==void 0){const c=i?I1(e,i,a,r):e;return!n||!l?Re(s,t,c):A1(s,c,t)}}}function L1(e){if(e!==void 0)return 0}function Ov(e){if(e!==void 0)return e}function SD(e){const t=2*Math.PI/e;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/t+.5)*t,n}}function MD(e){return e=e||Hh(5),function(t,n){if(n)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}function tM(e){return Math.pow(e,3)}function Xl(e){return 1-tM(1-e)}function RD(e){return 3*e*e-2*e*e*e}function ID(e){return e}function Wo(e,t,n,i,r,s){s=s||[];let o=0;for(let a=t;a<n;a+=i){const l=e[a],c=e[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function eM(e,t,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let f=0;for(let h=t;h<n;h+=i){const d=e[h]-c,g=e[h+1]-u;o[f++]=c+d*a-g*l,o[f++]=u+d*l+g*a;for(let m=h+2;m<h+i;++m)o[f++]=e[m]}return o&&o.length!=f&&(o.length=f),o}function AD(e,t,n,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let f=t;f<n;f+=i){const h=e[f]-l,d=e[f+1]-c;a[u++]=l+r*h,a[u++]=c+s*d;for(let g=f+2;g<f+i;++g)a[u++]=e[g]}return a&&a.length!=u&&(a.length=u),a}function LD(e,t,n,i,r,s,o){o=o||[];let a=0;for(let l=t;l<n;l+=i){o[a++]=e[l]+r,o[a++]=e[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=e[c]}return o&&o.length!=a&&(o.length=a),o}const kv=Ci();class OD extends Pi{constructor(){super(),this.extent_=oi(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=TN(function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})}simplifyTransformed(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)}clone(){return wt()}closestPointXY(t,n,i,r){return wt()}containsXY(t,n){const i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n}getClosestPoint(t,n){return n=n||[NaN,NaN],this.closestPointXY(t[0],t[1],n,1/0),n}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return wt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Ku(n),this.extentRevision_=this.getRevision()}return WN(this.extent_,t)}rotate(t,n){wt()}scale(t,n,i){wt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return wt()}getType(){return wt()}applyTransform(t){wt()}intersectsExtent(t){return wt()}translate(t,n){wt()}transform(t,n){const i=Oe(t),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=zn(c)/zn(l);return Mi(kv,c[0],c[3],u,-u,0,0,0),Wo(s,0,s.length,a,kv,o),gd(i,n)(s,o,a)}:gd(i,n);return this.applyTransform(r),this}}const nM=OD;class kD extends nM{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return GS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return wt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,n){this.stride=Pv(t),this.layout=t,this.flatCoordinates=n}setCoordinates(t,n){wt()}setLayout(t,n,i){let r;if(t)r=Pv(t);else{for(let s=0;s<i;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,t=PD(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();eM(i,0,i.length,r,t,n,i),this.changed()}}scale(t,n,i){n===void 0&&(n=t),i||(i=qo(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();AD(r,0,r.length,s,t,n,i,r),this.changed()}}translate(t,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();LD(i,0,i.length,r,t,n,i),this.changed()}}}function PD(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function Pv(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function FD(e,t,n){const i=e.getFlatCoordinates();if(!i)return null;const r=e.getStride();return Wo(i,0,i.length,r,t,n)}const fa=kD;function Fv(e,t,n,i,r,s,o){const a=e[t],l=e[t+1],c=e[n]-a,u=e[n+1]-l;let f;if(c===0&&u===0)f=t;else{const h=((r-a)*c+(s-l)*u)/(c*c+u*u);if(h>1)f=n;else if(h>0){for(let d=0;d<i;++d)o[d]=kn(e[t+d],e[n+d],h);o.length=i;return}else f=t}for(let h=0;h<i;++h)o[h]=e[f+h];o.length=i}function O1(e,t,n,i,r){let s=e[t],o=e[t+1];for(t+=i;t<n;t+=i){const a=e[t],l=e[t+1],c=zo(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function k1(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=O1(e,t,a,i,r),t=a}return r}function ND(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=k1(e,t,a,i,r),t=a[a.length-1]}return r}function P1(e,t,n,i,r,s,o,a,l,c,u){if(t==n)return c;let f,h;if(r===0){if(h=zo(o,a,e[t],e[t+1]),h<c){for(f=0;f<i;++f)l[f]=e[t+f];return l.length=i,h}return c}u=u||[NaN,NaN];let d=t+i;for(;d<n;)if(Fv(e,d-i,d,i,o,a,u),h=zo(o,a,u[0],u[1]),h<c){for(c=h,f=0;f<i;++f)l[f]=u[f];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(h)-Math.sqrt(c))/r|0,1);if(s&&(Fv(e,n-i,t,i,o,a,u),h=zo(o,a,u[0],u[1]),h<c)){for(c=h,f=0;f<i;++f)l[f]=u[f];l.length=i}return c}function F1(e,t,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let f=0,h=n.length;f<h;++f){const d=n[f];c=P1(e,t,d,i,r,s,o,a,l,c,u),t=d}return c}function DD(e,t,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let f=0,h=n.length;f<h;++f){const d=n[f];c=F1(e,t,d,i,r,s,o,a,l,c,u),t=d[d.length-1]}return c}function $D(e,t,n,i){for(let r=0,s=n.length;r<s;++r)e[t++]=n[r];return t}function lm(e,t,n,i){for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0;a<i;++a)e[t++]=o[a]}return t}function N1(e,t,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=lm(e,t,n[o],i);r[s++]=l,t=l}return r.length=s,r}function zD(e,t,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=N1(e,t,n[o],i,r[s]);l.length===0&&(l[0]=t),r[s++]=l,t=l[l.length-1]}return r.length=s,r}function D1(e,t,n,i,r,s,o){const a=(n-t)/i;if(a<3){for(;t<n;t+=i)s[o++]=e[t],s[o++]=e[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,n-i];let u=0;for(;c.length>0;){const f=c.pop(),h=c.pop();let d=0;const g=e[h],m=e[h+1],_=e[f],p=e[f+1];for(let y=h+i;y<f;y+=i){const x=e[y],w=e[y+1],v=VN(x,w,g,m,_,p);v>d&&(u=y,d=v)}d>r&&(l[(u-t)/i]=1,h+i<u&&c.push(h,u),u+i<f&&c.push(u,f))}for(let f=0;f<a;++f)l[f]&&(s[o++]=e[t+f*i],s[o++]=e[t+f*i+1]);return o}function GD(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=D1(e,t,u,i,r,s,o),a.push(o),t=u}return o}function mo(e,t){return t*Math.round(e/t)}function WD(e,t,n,i,r,s,o){if(t==n)return o;let a=mo(e[t],r),l=mo(e[t+1],r);t+=i,s[o++]=a,s[o++]=l;let c,u;do if(c=mo(e[t],r),u=mo(e[t+1],r),t+=i,t==n)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;t<n;){const f=mo(e[t],r),h=mo(e[t+1],r);if(t+=i,f==c&&h==u)continue;const d=c-a,g=u-l,m=f-a,_=h-l;if(d*_==g*m&&(d<0&&m<d||d==m||d>0&&m>d)&&(g<0&&_<g||g==_||g>0&&_>g)){c=f,u=h;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=f,u=h}return s[o++]=c,s[o++]=u,o}function iM(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=WD(e,t,u,i,r,s,o),a.push(o),t=u}return o}function BD(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],f=[];o=iM(e,t,u,i,r,s,o,f),a.push(f),t=u[u.length-1]}return o}function Is(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=t;o<n;o+=i)r[s++]=e.slice(o,o+i);return r.length=s,r}function wu(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=Is(e,t,l,i,r[s]),t=l}return r.length=s,r}function _y(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=l.length===1&&l[0]===t?[]:wu(e,t,l,i,r[s]),t=l[l.length-1]}return r.length=s,r}function rM(e,t,n,i){let r=0,s=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];r+=o*a-s*l,s=a,o=l}return r/2}function sM(e,t,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=rM(e,t,a,i),t=a}return r}function YD(e,t,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=sM(e,t,a,i),t=a[a.length-1]}return r}class md extends fa{constructor(t,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}clone(){return new md(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,n,i,r){return r<ca(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(O1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),P1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,r))}getArea(){return rM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Is(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const n=[];return n.length=D1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new md(n,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lm(this.flatCoordinates,0,t,this.stride),this.changed()}}const Nv=md;class $1 extends fa{constructor(t,n){super(),this.setCoordinates(t,n)}clone(){const t=new $1(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){const s=this.flatCoordinates,o=zo(t,n,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return $N(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return E1(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$D(this.flatCoordinates,0,t,this.stride),this.changed()}}const xl=$1;function UD(e,t,n,i,r){return!YS(r,function(o){return!Co(e,t,n,i,o[0],o[1])})}function Co(e,t,n,i,r,s){let o=0,a=e[n-i],l=e[n-i+1];for(;t<n;t+=i){const c=e[t],u=e[t+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function z1(e,t,n,i,r,s){if(n.length===0||!Co(e,t,n[0],i,r,s))return!1;for(let o=1,a=n.length;o<a;++o)if(Co(e,n[o-1],n[o],i,r,s))return!1;return!0}function VD(e,t,n,i,r,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(z1(e,t,l,i,r,s))return!0;t=l[l.length-1]}return!1}function oM(e,t,n,i,r,s,o){let a,l,c,u,f,h,d;const g=r[s+1],m=[];for(let y=0,x=n.length;y<x;++y){const w=n[y];for(u=e[w-i],h=e[w-i+1],a=t;a<w;a+=i)f=e[a],d=e[a+1],(g<=h&&d<=g||h<=g&&g<=d)&&(c=(g-h)/(d-h)*(f-u)+u,m.push(c)),u=f,h=d}let _=NaN,p=-1/0;for(m.sort($s),u=m[0],a=1,l=m.length;a<l;++a){f=m[a];const y=Math.abs(f-u);y>p&&(c=(u+f)/2,z1(e,t,n,i,c,g)&&(_=c,p=y)),u=f}return isNaN(_)&&(_=r[s]),o?(o.push(_,g,p),o):[_,g,p]}function XD(e,t,n,i,r){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=oM(e,t,l,i,r,2*o,s),t=l[l.length-1]}return s}function aM(e,t,n,i,r){let s;for(t+=i;t<n;t+=i)if(s=r(e.slice(t-i,t),e.slice(t,t+i)),s)return s;return!1}function cm(e,t,n,i,r){const s=BS(oi(),e,t,n,i);return fn(r,s)?Rs(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:aM(e,t,n,i,function(o,a){return YN(r,o,a)}):!1}function HD(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){if(cm(e,t,n[s],i,r))return!0;t=n[s]}return!1}function lM(e,t,n,i,r){return!!(cm(e,t,n,i,r)||Co(e,t,n,i,r[0],r[1])||Co(e,t,n,i,r[0],r[3])||Co(e,t,n,i,r[2],r[1])||Co(e,t,n,i,r[2],r[3]))}function cM(e,t,n,i,r){if(!lM(e,t,n[0],i,r))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(UD(e,n[s-1],n[s],i,r)&&!cm(e,n[s-1],n[s],i,r))return!1;return!0}function jD(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(cM(e,t,a,i,r))return!0;t=a[a.length-1]}return!1}function ZD(e,t,n,i){for(;t<n-i;){for(let r=0;r<i;++r){const s=e[t+r];e[t+r]=e[n-i+r],e[n-i+r]=s}t+=i,n-=i}}function uM(e,t,n,i){let r=0,s=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function fM(e,t,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=uM(e,t,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=a}return!0}function qD(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!fM(e,t,a,i,r))return!1;a.length&&(t=a[a.length-1])}return!0}function wy(e,t,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=uM(e,t,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&ZD(e,t,a,i),t=a}return t}function Dv(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s)t=wy(e,t,n[s],i,r);return t}let hM=class xy extends fa{constructor(t,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,t),this.ends_=i):this.setCoordinates(t,n)}appendLinearRing(t){this.flatCoordinates?Fr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new xy(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<ca(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(k1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),F1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,r))}containsXY(t,n){return z1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)}getArea(){return sM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),wy(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,wu(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=qo(this.getExtent());this.flatInteriorPoint_=oM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new xl(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Nv(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,n=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new Nv(n.slice(s,l),t);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;fM(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=wy(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=iM(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new xy(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return cM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=N1(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}};const pd=hM;function by(e){if(Vl(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],n=e[1],i=e[2],r=e[3],s=[t,n,t,r,i,r,i,n,t,n];return new hM(s,"XY",[s.length])}const O0=0;class KD extends Pi{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=M1(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&yD(),t.center&&(t.center=br(t.center,this.projection_)),t.extent&&(t.extent=Rr(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const n=Object.assign({},t);for(const a in ci)delete n[a];this.setProperties(n,!0);const i=QD(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const r=JD(t),s=i.constraint,o=t8(t);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let n=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const r=t||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),a=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=br(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=br(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)}animateInternal(t){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===n){i&&nh(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<n;++r){const u=arguments[r],f={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||RD,callback:i};if(u.center&&(f.sourceCenter=o,f.targetCenter=u.center.slice(),o=f.targetCenter),u.zoom!==void 0?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(u.zoom),a=f.targetResolution):u.resolution&&(f.sourceResolution=a,f.targetResolution=u.resolution,a=f.targetResolution),u.rotation!==void 0){f.sourceRotation=l;const h=Go(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=l+h,l=f.targetRotation}e8(f)?f.complete=!0:s+=f.duration,c.push(f)}this.animations_.push(c),this.setHint(Me.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Me.ANIMATING]>0}getInteracting(){return this.hints_[Me.INTERACTING]>0}cancelAnimations(){this.setHint(Me.ANIMATING,-this.hints_[Me.ANIMATING]);let t;for(let n=0,i=this.animations_.length;n<i;++n){const r=this.animations_[n];if(r[0].callback&&nh(r[0].callback,!1),!t)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=t-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const f=l.easing(u);if(l.sourceCenter){const h=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const _=h+f*(g-h),p=d+f*(m-d);this.targetCenter_=[_,p]}if(l.sourceResolution&&l.targetResolution){const h=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(h,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const h=f===1?Go(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Me.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&nh(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,n){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-n[0],r[1]-n[1]],C1(i,t-this.getRotation()),fD(i,n)),i}calculateCenterZoom(t,n){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=n[0]-t*(n[0]-r[0])/s,a=n[1]-t*(n[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(t){const n=this.viewportSize_;if(t){const i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&yy(t,this.getProjection())}getCenterInternal(){return this.get(ci.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const n=this.calculateExtentInternal(t);return QS(n,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();Nt(n,"The view center is not defined");const i=this.getResolution();Nt(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Nt(r!==void 0,"The view rotation is not defined"),dy(n,i,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(ci.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,n){return this.getResolutionForExtentInternal(Rr(t,this.getProjection()),n)}getResolutionForExtentInternal(t,n){n=n||this.getViewportSizeMinusPadding_();const i=Qt(t)/n[0],r=zn(t)/n[1];return Math.max(i,r)}getResolutionForValueFunction(t){t=t||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(t);return function(s){return n/Math.pow(t,s*r)}}getRotation(){return this.get(ci.ROTATION)}getValueForResolutionFunction(t){const n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/n;return function(o){return Math.log(i/o)/n/s}}getViewportSizeMinusPadding_(t){let n=this.getViewportSize_(t);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const t=this.getProjection(),n=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=k0(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t}getZoomForResolution(t){let n=this.minZoom_||0,i,r;if(this.resolutions_){const s=w1(this.resolutions_,t,1);n=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=Re(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Re(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,n){let i;if(Nt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Nt(!Vl(t),"Cannot fit empty extent provided as `geometry`");const r=Rr(t,this.getProjection());i=by(r)}else if(t.getType()==="Circle"){const r=Rr(t.getExtent(),this.getProjection());i=by(r),i.rotate(this.getRotation(),qo(r))}else i=t;this.fitInternal(i,n)}rotatedExtentForGeometry(t){const n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let f=0,h=s.length;f<h;f+=o){const d=s[f]*i-s[f+1]*r,g=s[f]*r+s[f+1]*i;a=Math.min(a,d),l=Math.min(l,g),c=Math.max(c,d),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(t,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const r=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),f=Math.cos(c),h=qo(a);h[0]+=(r[1]-r[3])/2*l,h[1]+=(r[0]-r[2])/2*l;const d=h[0]*f-h[1]*u,g=h[1]*f+h[0]*u,m=this.getConstrainedCenter([d,g],l),_=n.callback?n.callback:yl;n.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:n.duration,easing:n.easing},_):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),nh(_,!0))}centerOn(t,n,i){this.centerOnInternal(br(t,this.getProjection()),n,i)}centerOnInternal(t,n,i){this.setCenterInternal(k0(t,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,n,i,r){let s;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),l=k0(t,r,[a[0]/2+o[3],a[1]/2+o[0]],n,i);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const n=yy(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])}adjustCenterInternal(t){const n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])}adjustResolution(t,n){n=n&&br(n,this.getProjection()),this.adjustResolutionInternal(t,n)}adjustResolutionInternal(t,n){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,i);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)}adjustRotation(t,n){n&&(n=br(n,this.getProjection())),this.adjustRotationInternal(t,n)}adjustRotationInternal(t,n){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&br(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,n){const i=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(ci.ROTATION)!==r&&this.set(ci.ROTATION,r),this.get(ci.RESOLUTION)!==o&&(this.set(ci.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ci.CENTER)||!hd(this.get(ci.CENTER),a))&&this.set(ci.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,n,i){t=t!==void 0?t:200;const r=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!hd(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:t,easing:Xl,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Me.INTERACTING,1)}endInteraction(t,n,i){i=i&&br(i,this.getProjection()),this.endInteractionInternal(t,n,i)}endInteractionInternal(t,n,i){this.getInteracting()&&(this.setHint(Me.INTERACTING,-1),this.resolveConstraints(t,n,i))}getConstrainedCenter(t,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)}getConstrainedZoom(t,n){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(t,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)}}function nh(e,t){setTimeout(function(){e(t)},0)}function JD(e){if(e.extent!==void 0){const n=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return Av(e.extent,e.constrainOnlyCenter,n)}const t=M1(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Av(n,!1,!1)}return ED}function QD(e){let t,n,i,o=e.minZoom!==void 0?e.minZoom:O0,a=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,c=e.multiWorld!==void 0?e.multiWorld:!1,u=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,f=e.showFullExtent!==void 0?e.showFullExtent:!1,h=M1(e.projection,"EPSG:3857"),d=h.getExtent();let g=e.constrainOnlyCenter,m=e.extent;if(!c&&!m&&h.isGlobal()&&(g=!1,m=d),e.resolutions!==void 0){const _=e.resolutions;n=_[o],i=_[a]!==void 0?_[a]:_[_.length-1],e.constrainResolution?t=TD(_,u,!g&&m,f):t=Lv(n,i,u,!g&&m,f)}else{const p=(d?Math.max(Qt(d),zn(d)):360*wl.degrees/h.getMetersPerUnit())/T1/Math.pow(2,O0),y=p/Math.pow(2,28-O0);n=e.maxResolution,n!==void 0?o=0:n=p/Math.pow(l,o),i=e.minResolution,i===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?i=n/Math.pow(l,a):i=p/Math.pow(l,a):i=y),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),e.constrainResolution?t=CD(l,n,i,u,!g&&m,f):t=Lv(n,i,u,!g&&m,f)}return{constraint:t,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function t8(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const n=e.constrainRotation;return n===void 0||n===!0?MD():n===!1?Ov:typeof n=="number"?SD(n):Ov}return L1}function e8(e){return!(e.sourceCenter&&e.targetCenter&&!hd(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function k0(e,t,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=e[0]*s-e[1]*o,l=e[1]*s+e[0]*o;a+=(t[0]/2-n[0])*i,l+=(n[1]-t[1]/2)*i,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const Yi=KD;class n8 extends HS{constructor(t){const n=Object.assign({},t);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(qt.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(qt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ee(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Pt(t,vt.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let n;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof Yi?n={viewState:t.getState(),extent:t.calculateExtent()}:n=t,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;n.layerStatesArray?r=n.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return G1(r,n.viewState)&&(!s||fn(s,n.extent))}getAttributions(t){if(!this.isVisible(t))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const r=t instanceof Yi?t.getViewStateAndExtent():t;let s=n(r);return Array.isArray(s)||(s=[s]),s}render(t,n){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,n)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(qt.MAP,t)}getMapInternal(){return this.get(qt.MAP)}setMap(t){this.mapPrecomposeKey_&&(ee(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(ee(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Pt(t,Ki.PRECOMPOSE,function(n){const r=n.frameState.layerStatesArray,s=this.getLayerState(!1);Nt(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=Pt(this,vt.CHANGE,t.render,t),this.changed())}setSource(t){this.set(qt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function G1(e,t){if(!e.visible)return!1;const n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;const i=t.zoom;return i>e.minZoom&&i<=e.maxZoom}const um=n8;class i8 extends _1{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,n){wt()}calculateMatrices2D(t){const n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Mi(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),im(r,i)}forEachFeatureAtCoordinate(t,n,i,r,s,o,a,l){let c;const u=n.viewState;function f(w,v,b,E){return s.call(o,v,w?b:null,E)}const h=u.projection,d=ZS(t.slice(),h),g=[[0,0]];if(h.canWrapX()&&r){const w=h.getExtent(),v=Qt(w);g.push([-v,0],[v,0])}const m=n.layerStatesArray,_=m.length,p=[],y=[];for(let w=0;w<g.length;w++)for(let v=_-1;v>=0;--v){const b=m[v],E=b.layer;if(E.hasRenderer()&&G1(b,u)&&a.call(l,E)){const C=E.getRenderer(),I=E.getSource();if(C&&I){const S=I.getWrapX()?d:t,R=f.bind(null,b.managed);y[0]=S[0]+g[w][0],y[1]=S[1]+g[w][1],c=C.forEachFeatureAtCoordinate(y,n,i,R,p)}if(c)return c}}if(p.length===0)return;const x=1/p.length;return p.forEach((w,v)=>w.distanceSq+=v*x),p.sort((w,v)=>w.distanceSq-v.distanceSq),p.some(w=>c=w.callback(w.feature,w.layer,w.geometry)),c}hasFeatureAtCoordinate(t,n,i,r,s,o){return this.forEachFeatureAtCoordinate(t,n,i,r,yu,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(t){wt()}flushDeclutterItems(t){}scheduleExpireIconCache(t){ud.canExpireCache()&&t.postRenderFunctions.push(r8)}}function r8(e,t){ud.expire()}const s8=i8;class o8 extends qr{constructor(t,n,i,r){super(t),this.inversePixelTransform=n,this.frameState=i,this.context=r}}const dM=o8,ih="ol-hidden",a8="ol-selectable",ha="ol-unselectable",$v="ol-unsupported",Qu="ol-control",zv="ol-collapsed",l8=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Gv=["style","variant","weight","size","lineHeight","family"],gM=function(e){const t=e.match(l8);if(!t)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Gv.length;i<r;++i){const s=t[i+1];s!==void 0&&(n[Gv[i]]=s)}return n.families=n.family.split(/,\s?/),n};function gn(e,t,n,i){let r;return n&&n.length?r=n.shift():x1?r=new OffscreenCanvas(e||300,t||300):r=document.createElement("canvas"),e&&(r.width=e),t&&(r.height=t),r.getContext("2d",i)}function fm(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function c8(e){let t=e.offsetWidth;const n=getComputedStyle(e);return t+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),t}function u8(e){let t=e.offsetHeight;const n=getComputedStyle(e);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),t}function yd(e,t){const n=t.parentNode;n&&n.replaceChild(e,t)}function _d(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function mM(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function f8(e,t){const n=e.childNodes;for(let i=0;;++i){const r=n[i],s=t[i];if(!r&&!s)break;if(r!==s){if(!r){e.appendChild(s);continue}if(!s){e.removeChild(r),--i;continue}e.insertBefore(s,r)}}}const pM="10px sans-serif",bn="#000",bl="round",Nr=[],Dr=0,vl="round",xu=10,bu="#000",vu="center",wd="middle",So=[0,0,0,0],Eu=1,vr=new Pi;let $a=null,vy;const Ey={},h8=function(){const t="32px ",n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(c,u,f){let h=!0;for(let d=0;d<i;++d){const g=n[d];if(o=xd(c+" "+u+" "+t+g,r),f!=g){const m=xd(c+" "+u+" "+t+f+","+g,r);h=h&&m!=o}}return!!h}function l(){let c=!0;const u=vr.getKeys();for(let f=0,h=u.length;f<h;++f){const d=u[f];vr.get(d)<100&&(a.apply(this,d.split(`
`))?(ju(Ey),$a=null,vy=void 0,vr.set(d,100)):(vr.set(d,vr.get(d)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const u=gM(c);if(!u)return;const f=u.families;for(let h=0,d=f.length;h<d;++h){const g=f[h],m=u.style+`
`+u.weight+`
`+g;vr.get(m)===void 0&&(vr.set(m,100,!0),a(u.style,u.weight,g)||(vr.set(m,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),d8=function(){let e;return function(t){let n=Ey[t];if(n==null){if(x1){const i=gM(t),r=yM(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),n=e.offsetHeight,document.body.removeChild(e);Ey[t]=n}return n}}();function yM(e,t){return $a||($a=gn(1,1)),e!=vy&&($a.font=e,vy=$a.font),$a.measureText(t)}function xd(e,t){return yM(e,t).width}function Wv(e,t,n){if(t in n)return n[t];const i=t.split(`
`).reduce((r,s)=>Math.max(r,xd(e,s)),0);return n[t]=i,i}function g8(e,t){const n=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=t.length;c<=u;c+=2){const f=t[c];if(f===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const h=t[c+1]||e.font,d=xd(h,f);n.push(d),o+=d;const g=d8(h);i.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:n,heights:i,lineWidths:r}}function m8(e,t,n,i,r,s,o,a,l,c,u){e.save(),n!==1&&(e.globalAlpha*=n),t&&e.transform.apply(e,t),i.contextInstructions?(e.translate(l,c),e.scale(u[0],u[1]),p8(i,e)):u[0]<0||u[1]<0?(e.translate(l,c),e.scale(u[0],u[1]),e.drawImage(i,r,s,o,a,0,0,o,a)):e.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),e.restore()}function p8(e,t){const n=e.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?t[n[i]].apply(t,n[i+1]):t[n[i]]=n[i+1]}class y8 extends s8{constructor(t){super(t),this.fontChangeListenerKey_=Pt(vr,pl.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=ha+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,n){const i=this.getMap();if(i.hasListener(t)){const r=new dM(t,void 0,n);i.dispatchEvent(r)}}disposeInternal(){ee(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Ki.PRECOMPOSE,t);const n=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;const r=this.declutterLayers_;r.length=0;let s=null;for(let o=0,a=n.length;o<a;++o){const l=n[o];t.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!G1(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const f=c.render(t,s);f&&(f!==s&&(this.children_.push(f),s=f),"getDeclutter"in c&&r.push(c))}this.flushDeclutterItems(t),f8(this.element_,this.children_),this.dispatchRenderEvent(Ki.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const n=this.declutterLayers_;for(let i=n.length-1;i>=0;--i)n[i].renderDeclutter(t);n.length=0}}const _8=y8;class ws extends qr{constructor(t,n){super(t),this.layer=n}}const P0={LAYERS:"layers"};class W1 extends HS{constructor(t){t=t||{};const n=Object.assign({},t);delete n.layers;let i=t.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(P0.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Hi(i.slice(),{unique:!0}):Nt(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Hi(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ee),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Pt(t,xn.ADD,this.handleLayersAdd_,this),Pt(t,xn.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(ee);ju(this.listenerKeys_);const n=t.getArray();for(let i=0,r=n.length;i<r;i++){const s=n[i];this.registerLayerListeners_(s),this.dispatchEvent(new ws("addlayer",s))}this.changed()}registerLayerListeners_(t){const n=[Pt(t,pl.PROPERTYCHANGE,this.handleLayerChange_,this),Pt(t,vt.CHANGE,this.handleLayerChange_,this)];t instanceof W1&&n.push(Pt(t,"addlayer",this.handleLayerGroupAdd_,this),Pt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Vt(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new ws("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new ws("removelayer",t.layer))}handleLayersAdd_(t){const n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new ws("addlayer",n)),this.changed()}handleLayersRemove_(t){const n=t.element,i=Vt(n);this.listenerKeys_[i].forEach(ee),delete this.listenerKeys_[i],this.dispatchEvent(new ws("removelayer",n)),this.changed()}getLayers(){return this.get(P0.LAYERS)}setLayers(t){const n=this.getLayers();if(n){const i=n.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new ws("removelayer",i[r]))}this.set(P0.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(n){n.getLayersArray(t)}),t}getLayerStatesArray(t){const n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const r=this.getLayerState();let s=r.zIndex;!t&&r.zIndex===void 0&&(s=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=el(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}}const hm=W1;class w8 extends qr{constructor(t,n,i){super(t),this.map=n,this.frameState=i!==void 0?i:null}}const za=w8;class x8 extends za{constructor(t,n,i,r,s,o){super(t,n,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ms=x8,we={SINGLECLICK:"singleclick",CLICK:vt.CLICK,DBLCLICK:vt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ty={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class b8 extends Zu{constructor(t,n){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Pt(i,Ty.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Pt(i,Ty.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(vt.TOUCHMOVE,this.boundHandleTouchMove_,$S?{passive:!1}:!1)}emulateClick_(t){let n=new ms(we.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new ms(we.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new ms(we.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const n=t,i=n.pointerId;if(n.type==we.POINTERUP||n.type==we.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==we.POINTERDOWN||n.type==we.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const n=new ms(we.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ee),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const n=new ms(we.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Pt(i,we.POINTERMOVE,this.handlePointerMove_,this),Pt(i,we.POINTERUP,this.handlePointerUp_,this),Pt(this.element_,we.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Pt(this.element_.getRootNode(),we.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const n=new ms(we.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new ms(we.POINTERMOVE,this.map_,t,n))}handleTouchMove_(t){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ee(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(vt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ee(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ee),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const v8=b8,Cr={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},$e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},bd=1/0;class E8{constructor(t,n){this.priorityFunction_=t,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,ju(this.queuedElements_)}dequeue(){const t=this.elements_,n=this.priorities_,i=t[0];t.length==1?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(t){Nt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(t);return n!=bd?(this.elements_.push(t),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const n=this.elements_,i=this.priorities_,r=n.length,s=n[t],o=i[t],a=t;for(;t<r>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),u=c<r&&i[c]<i[l]?c:l;n[t]=n[u],i[t]=i[u],t=u}n[t]=s,i[t]=o,this.siftDown_(a,t)}siftDown_(t,n){const i=this.elements_,r=this.priorities_,s=i[n],o=r[n];for(;n>t;){const a=this.getParentIndex_(n);if(r[a]>o)i[n]=i[a],r[n]=r[a],n=a;else break}i[n]=s,r[n]=o}reprioritize(){const t=this.priorityFunction_,n=this.elements_,i=this.priorities_;let r=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=t(o),l==bd?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,n[r++]=o);n.length=r,i.length=r,this.heapify_()}}const T8=E8,ht={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class C8 extends T8{constructor(t,n){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const n=super.enqueue(t);return n&&t[0].addEventListener(vt.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const n=t.target,i=n.getState();if(i===ht.LOADED||i===ht.ERROR||i===ht.EMPTY){i!==ht.ERROR&&n.removeEventListener(vt.CHANGE,this.boundHandleTileChange_);const r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,n){let i=0,r,s,o;for(;this.tilesLoading_<t&&i<n&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===ht.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}const S8=C8;function M8(e,t,n,i,r){if(!e||!(n in e.wantedTiles)||!e.wantedTiles[n][t.getKey()])return bd;const s=e.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class R8 extends Pi{constructor(t){super();const n=t.element;n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){_d(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&_d(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)ee(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==yl&&this.listenerKeys.push(Pt(t,Cr.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Hl=R8;class I8 extends Hl{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:n+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"›",o=t.collapseClassName!==void 0?t.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(vt.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+ha+" "+Qu+(this.collapsed_&&this.collapsible_?" "+zv:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(t)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!js(n,this.renderedAttributions_)){mM(this.ulElement_);for(let r=0,s=n.length;r<s;++r){const o=document.createElement("li");o.innerHTML=n[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(zv),this.collapsed_?yd(this.collapseLabel_,this.label_):yd(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const A8=I8;class L8 extends Hl{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const n=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"⇧",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(vt.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+ha+" "+Qu,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ih)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Xl}):n.setRotation(0))}render(t){const n=t.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(ih);!s&&i===0?this.element.classList.add(ih):s&&i!==0&&this.element.classList.remove(ih)}this.label_.style.transform=r}this.rotation_=i}}const O8=L8;class k8 extends Hl{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const n=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:n+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:n+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(vt.CLICK,this.handleClick_.bind(this,i),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=c,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(vt.CLICK,this.handleClick_.bind(this,-i),!1);const h=n+" "+ha+" "+Qu,d=this.element;d.className=h,d.appendChild(u),d.appendChild(f),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,n){n.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:Xl})):i.setZoom(s)}}}const P8=k8;function _M(e){e=e||{};const t=new Hi;return(e.zoom!==void 0?e.zoom:!0)&&t.push(new P8(e.zoomOptions)),(e.rotate!==void 0?e.rotate:!0)&&t.push(new O8(e.rotateOptions)),(e.attribution!==void 0?e.attribution:!0)&&t.push(new A8(e.attributionOptions)),t}const Bv={ACTIVE:"active"};class F8 extends Pi{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Bv.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Bv.ACTIVE,t)}setMap(t){this.map_=t}}function N8(e,t,n){const i=e.getCenterInternal();if(i){const r=[i[0]+t[0],i[1]+t[1]];e.animateInternal({duration:n!==void 0?n:250,easing:ID,center:e.getConstrainedCenter(r)})}}function B1(e,t,n,i){const r=e.getZoom();if(r===void 0)return;const s=e.getConstrainedZoom(r+t),o=e.getResolutionForZoom(s);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:Xl})}const tf=F8;class D8 extends tf{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let n=!1;if(t.type==we.DBLCLICK){const i=t.originalEvent,r=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();B1(a,o,s,this.duration_),i.preventDefault(),n=!0}return!n}}const $8=D8;class z8 extends tf{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==we.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==we.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==we.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,n=this.stopDown(i)}else t.type==we.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Y1(e){const t=e.length;let n=0,i=0;for(let r=0;r<t;r++)n+=e[r].clientX,i+=e[r].clientY;return{clientX:n/t,clientY:i/t}}const ef=z8;function Cy(e){const t=arguments;return function(n){let i=!0;for(let r=0,s=t.length;r<s&&(i=i&&t[r](n),!!i);++r);return i}}const G8=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},W8=function(e){const t=e.map.getTargetElement(),n=e.map.getOwnerDocument().activeElement;return t.contains(n)},wM=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?W8(e):!0},B8=yu,xM=function(e){const t=e.originalEvent;return t.button==0&&!(kN&&FS&&t.ctrlKey)},bM=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Y8=function(e){const t=e.originalEvent;return FS?t.metaKey:t.ctrlKey},U8=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},vM=function(e){const t=e.originalEvent,n=t.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!t.target.isContentEditable},F0=function(e){const t=e.originalEvent;return Nt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},V8=function(e){const t=e.originalEvent;return Nt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class X8 extends ef{constructor(t){super({stopDown:em}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=t.condition?t.condition:Cy(bM,V8);this.condition_=t.onFocusOnly?Cy(wM,n):n,this.noKinetic_=!1}handleDragEvent(t){const n=t.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,r=n.getEventPixel(Y1(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=t.map.getView();hD(s,a.getResolution()),C1(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Xl})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const H8=X8;class j8 extends ef{constructor(t){t=t||{},super({stopDown:em}),this.condition_=t.condition?t.condition:G8,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!F0(t))return;const n=t.map,i=n.getView();if(i.getConstraints().rotation===L1)return;const r=n.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return F0(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return F0(t)&&xM(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const Z8=j8;class q8 extends _1{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,n=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,n=this.endPixel_,r=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new pd([r])}getGeometry(){return this.geometry_}}const K8=q8,rh={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class N0 extends qr{constructor(t,n,i){super(t),this.coordinate=n,this.mapBrowserEvent=i}}class J8 extends ef{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new K8(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:xM,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,n,i){const r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new N0(rh.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new N0(n?rh.BOXEND:rh.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new N0(rh.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const Q8=J8;class t$ extends Q8{constructor(t){t=t||{};const n=t.condition?t.condition:U8;super({condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:Xl})}}const e$=t$,lo={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class n$ extends tf{constructor(t){super(),t=t||{},this.defaultCondition_=function(n){return bM(n)&&vM(n)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let n=!1;if(t.type==vt.KEYDOWN){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==lo.DOWN||r==lo.LEFT||r==lo.RIGHT||r==lo.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==lo.DOWN?c=-a:r==lo.LEFT?l=-a:r==lo.RIGHT?l=a:c=a;const u=[l,c];C1(u,o.getRotation()),N8(o,u,this.duration_),i.preventDefault(),n=!0}}return!n}}const i$=n$;class r$ extends tf{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(n){return!Y8(n)&&vM(n)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let n=!1;if(t.type==vt.KEYDOWN||t.type==vt.KEYPRESS){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==="+"||r==="-")){const s=t.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();B1(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}const s$=r$;class o${constructor(t,n,i){this.decay_=t,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,n){this.points_.push(t,n,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<t)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const r=this.points_[n+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const a$=o$;class l$ extends tf{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const n=t.condition?t.condition:B8;this.condition_=t.onFocusOnly?Cy(wM,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==vt.WHEEL)return!0;const i=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==vt.WHEEL&&(s=r.deltaY,LN&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=NS),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const n=t.getView();n.getAnimating()&&n.cancelAnimations();let i=-Re(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),B1(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const c$=l$;class u$ extends ef{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=em),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let n=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=t.map,a=o.getView();a.getConstraints().rotation!==L1&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Y1(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const f$=u$;class h$ extends ef{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=em),super(n),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let n=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Y1(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const d$=h$;function g$(e){e=e||{};const t=new Hi,n=new a$(-.005,.05,100);return(e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0)&&t.push(new Z8),(e.doubleClickZoom!==void 0?e.doubleClickZoom:!0)&&t.push(new $8({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan!==void 0?e.dragPan:!0)&&t.push(new H8({onFocusOnly:e.onFocusOnly,kinetic:n})),(e.pinchRotate!==void 0?e.pinchRotate:!0)&&t.push(new f$),(e.pinchZoom!==void 0?e.pinchZoom:!0)&&t.push(new d$({duration:e.zoomDuration})),(e.keyboard!==void 0?e.keyboard:!0)&&(t.push(new i$),t.push(new s$({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0)&&t.push(new c$({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom!==void 0?e.shiftDragZoom:!0)&&t.push(new e$({duration:e.zoomDuration})),t}function Yv(e){return e[0]>0&&e[1]>0}function m$(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]*t+.5|0,n[1]=e[1]*t+.5|0,n}function Fn(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}function EM(e){if(e instanceof um){e.setMapInternal(null);return}e instanceof hm&&e.getLayers().forEach(EM)}function TM(e,t){if(e instanceof um){e.setMapInternal(t);return}if(e instanceof hm){const n=e.getLayers().getArray();for(let i=0,r=n.length;i<r;++i)TM(n[i],t)}}let p$=class extends Pi{constructor(t){super(),t=t||{},this.on,this.once,this.un;const n=y$(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:NS,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ci(),this.pixelToCoordinateTransform_=Ci(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||_M(),this.interactions=n.interactions||g$({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new S8(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener($e.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener($e.VIEW,this.handleViewChanged_),this.addChangeListener($e.SIZE,this.handleSizeChanged_),this.addChangeListener($e.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;t.view&&!(t.view instanceof Yi)&&t.view.then(function(r){i.setView(new Yi(r))}),this.controls.addEventListener(xn.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(xn.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(xn.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(xn.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(xn.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(xn.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){TM(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,n,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:yu,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(t,n){const i=[];return this.forEachFeatureAtPixel(t,function(r){i.push(r)},n),i}getAllLayers(){const t=[];function n(i){i.forEach(function(r){r instanceof hm?n(r.getLayers()):t.push(r)})}return n(this.getLayers()),t}hasFeatureAtPixel(t,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.layerFilter!==void 0?n.layerFilter:yu,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get($e.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return yy(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const n=this.frameState_;return n?Ee(n.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get($e.LAYERGROUP)}setLayers(t){const n=this.getLayerGroup();if(t instanceof Hi){n.setLayers(t);return}const i=n.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const r=t[n];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const n=br(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(t){const n=this.frameState_;return n?Ee(n.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get($e.SIZE)}getView(){return this.get($e.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,n,i,r){return M8(this.frameState_,t,n,i,r)}handleBrowserEvent(t,n){n=n||t.type;const i=new ms(n,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const n=t.originalEvent,i=n.type;if(i===Ty.POINTERDOWN||i===vt.WHEEL||i===vt.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=n.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,s=r;if(t){const o=t.viewHints;if(o[Me.ANIMATING]||o[Me.INTERACTING]){const a=Date.now()-t.time>8;r=a?0:8,s=a?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Ki.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ki.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new za(Cr.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new za(Cr.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)ee(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(vt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(vt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,_d(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),n=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new _8(this)),this.mapBrowserEventHandler_=new v8(this,this.moveTolerance_);for(const s in we)this.mapBrowserEventHandler_.addEventListener(we[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(vt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(vt.WHEEL,this.boundHandleBrowserEvent_,$S?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[Pt(i,vt.KEYDOWN,this.handleBrowserEvent,this),Pt(i,vt.KEYPRESS,this.handleBrowserEvent,this)];const r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ee(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ee(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Pt(t,pl.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Pt(t,vt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ee),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new ws("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Pt(t,pl.PROPERTYCHANGE,this.render,this),Pt(t,vt.CHANGE,this.render,this),Pt(t,"addlayer",this.handleLayerAdd_,this),Pt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){EM(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const n=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(n!==void 0&&Yv(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:dy(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Vt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=dy(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Vl(this.previousExtent_)&&!_u(s.extent,this.previousExtent_))&&(this.dispatchEvent(new za(Cr.MOVESTART,this,r)),this.previousExtent_=Ku(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Me.ANIMATING]&&!s.viewHints[Me.INTERACTING]&&!_u(s.extent,this.previousExtent_)&&(this.dispatchEvent(new za(Cr.MOVEEND,this,s)),zS(s.extent,this.previousExtent_))),this.dispatchEvent(new za(Cr.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Cr.LOADSTART)||this.hasListener(Cr.LOADEND)||this.hasListener(Ki.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new ws("removelayer",n)),this.set($e.LAYERGROUP,t)}setSize(t){this.set($e.SIZE,t)}setTarget(t){this.set($e.TARGET,t)}setView(t){if(!t||t instanceof Yi){this.set($e.VIEW,t);return}this.set($e.VIEW,new Yi);const n=this;t.then(function(i){n.setView(new Yi(i))})}updateSize(){const t=this.getTargetElement();let n;if(t){const r=getComputedStyle(t),s=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(n=[s,o],!Yv(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&KS("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!js(n,i))&&(this.setSize(n),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let n;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}}};function y$(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const n={},i=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new hm({layers:e.layers});n[$e.LAYERGROUP]=i,n[$e.TARGET]=e.target,n[$e.VIEW]=e.view instanceof Yi?e.view:new Yi;let r;e.controls!==void 0&&(Array.isArray(e.controls)?r=new Hi(e.controls.slice()):(Nt(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=e.controls));let s;e.interactions!==void 0&&(Array.isArray(e.interactions)?s=new Hi(e.interactions.slice()):(Nt(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=e.interactions));let o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new Hi(e.overlays.slice()):(Nt(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=e.overlays):o=new Hi,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:n}}const _$=p$;class U1 extends Pi{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const n=t;this.setGeometry(n)}else{const n=t;this.setProperties(n)}}clone(){const t=new U1(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&t.setGeometry(n.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ee(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Pt(t,vt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?w$(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function w$(e){if(typeof e=="function")return e;let t;return Array.isArray(e)?t=e:(Nt(typeof e.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}const Sy=U1;class x${constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,n){if(n){let i=n.dataProjection?Oe(n.dataProjection):this.readProjection(t);n.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Oe(i),i.setWorldExtent(n.extent)),n={dataProjection:i,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return wt()}readFeature(t,n){return wt()}readFeatures(t,n){return wt()}readGeometry(t,n){return wt()}readProjection(t){return wt()}writeFeature(t,n){return wt()}writeFeatures(t,n){return wt()}writeGeometry(t,n){return wt()}}function CM(e,t,n){const i=n?Oe(n.featureProjection):null,r=n?Oe(n.dataProjection):null;let s;if(i&&r&&!bo(i,r)?s=(t?e.clone():e).transform(t?i:r,t?r:i):s=e,t&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===e&&(s=e.clone()),s.applyTransform(a)}return s}class b$ extends x${constructor(){super()}getType(){return"json"}readFeature(t,n){return this.readFeatureFromObject(sh(t),this.getReadOptions(t,n))}readFeatures(t,n){return this.readFeaturesFromObject(sh(t),this.getReadOptions(t,n))}readFeatureFromObject(t,n){return wt()}readFeaturesFromObject(t,n){return wt()}readGeometry(t,n){return this.readGeometryFromObject(sh(t),this.getReadOptions(t,n))}readGeometryFromObject(t,n){return wt()}readProjection(t){return this.readProjectionFromObject(sh(t))}readProjectionFromObject(t){return wt()}writeFeature(t,n){return JSON.stringify(this.writeFeatureObject(t,n))}writeFeatureObject(t,n){return wt()}writeFeatures(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))}writeFeaturesObject(t,n){return wt()}writeGeometry(t,n){return JSON.stringify(this.writeGeometryObject(t,n))}writeGeometryObject(t,n){return wt()}}function sh(e){if(typeof e=="string"){const t=JSON.parse(e);return t||null}return e!==null?e:null}const v$=b$;function SM(e,t,n,i,r,s,o){let a,l;const c=(n-t)/i;if(c===1)a=t;else if(c===2)a=t,l=r;else if(c!==0){let u=e[t],f=e[t+1],h=0;const d=[0];for(let _=t+i;_<n;_+=i){const p=e[_],y=e[_+1];h+=Math.sqrt((p-u)*(p-u)+(y-f)*(y-f)),d.push(h),u=p,f=y}const g=r*h,m=bN(d,g);m<0?(l=(g-d[-m-2])/(d[-m-1]-d[-m-2]),a=t+(-m-2)*i):a=t+m*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?e[a+u]:kn(e[a+u],e[a+i+u],l);return s}function My(e,t,n,i,r,s){if(n==t)return null;let o;if(r<e[t+i-1])return s?(o=e.slice(t,t+i),o[i-1]=r,o):null;if(e[n-1]<r)return s?(o=e.slice(n-i,n),o[i-1]=r,o):null;if(r==e[t+i-1])return e.slice(t,t+i);let a=t/i,l=n/i;for(;a<l;){const h=a+l>>1;r<e[(h+1)*i-1]?l=h:a=h+1}const c=e[a*i-1];if(r==c)return e.slice((a-1)*i,(a-1)*i+i);const u=e[(a+1)*i-1],f=(r-c)/(u-c);o=[];for(let h=0;h<i-1;++h)o.push(kn(e[(a-1)*i+h],e[a*i+h],f));return o.push(r),o}function E$(e,t,n,i,r,s,o){if(o)return My(e,t,n[n.length-1],i,r,s);let a;if(r<e[i-1])return s?(a=e.slice(0,i),a[i-1]=r,a):null;if(e[e.length-1]<r)return s?(a=e.slice(e.length-i),a[i-1]=r,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(t!=u){if(r<e[t+i-1])return null;if(r<=e[u-1])return My(e,t,u,i,r,!1);t=u}}return null}function MM(e,t,n,i){let r=e[t],s=e[t+1],o=0;for(let a=t+i;a<n;a+=i){const l=e[a],c=e[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class vd extends fa{constructor(t,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendCoordinate(t){this.flatCoordinates?Fr(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new vd(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<ca(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(O1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),P1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,r))}forEachSegment(t){return aM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,My(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n))}getCoordinates(){return Is(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,n){return SM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)}getLength(){return MM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const n=[];return n.length=D1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new vd(n,"XY")}getType(){return"LineString"}intersectsExtent(t){return cm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lm(this.flatCoordinates,0,t,this.stride),this.changed()}}const Ed=vd;class Td extends fa{constructor(t,n,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,n);else if(n!==void 0&&i)this.setFlatCoordinates(n,t),this.ends_=i;else{let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout()),Fr(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?Fr(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Td(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<ca(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(k1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),F1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,r))}getCoordinateAtM(t,n,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,i=i!==void 0?i:!1,E$(this.flatCoordinates,0,this.ends_,this.stride,t,n,i))}getCoordinates(){return wu(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Ed(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,n=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new Ed(t.slice(s,l),i);r.push(c),s=l}return r}getFlatMidpoints(){const t=[],n=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=SM(n,i,l,s,.5);Fr(t,c),i=l}return t}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=GD(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new Td(n,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return HD(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=N1(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const T$=Td;class V1 extends fa{constructor(t,n){super(),n&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendPoint(t){this.flatCoordinates?Fr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new V1(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){if(r<ca(this.getExtent(),t,n))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=zo(t,n,s[a],s[a+1]);if(c<r){r=c;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return Is(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new xl(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,n=this.layout,i=this.stride,r=[];for(let s=0,o=t.length;s<o;s+=i){const a=new xl(t.slice(s,s+i),n);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const n=this.flatCoordinates,i=this.stride;for(let r=0,s=n.length;r<s;r+=i){const o=n[r],a=n[r+1];if(E1(t,o,a))return!0}return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lm(this.flatCoordinates,0,t,this.stride),this.changed()}}const RM=V1;function C$(e,t,n,i){const r=[];let s=oi();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=GS(e,t,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return r}class Cd extends fa{constructor(t,n,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout());const f=o.length,h=u.getEnds();for(let d=0,g=h.length;d<g;++d)h[d]+=f;Fr(o,u.getFlatCoordinates()),a.push(h)}n=r,t=o,i=a}n!==void 0&&i?(this.setFlatCoordinates(n,t),this.endss_=i):this.setCoordinates(t,n)}appendPolygon(t){let n;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Fr(this.flatCoordinates,t.getFlatCoordinates()),n=t.getEnds().slice();for(let r=0,s=n.length;r<s;++r)n[r]+=i}this.endss_.push(n),this.changed()}clone(){const t=this.endss_.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=this.endss_[r].slice();const i=new Cd(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}closestPointXY(t,n,i,r){return r<ca(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ND(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),DD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,i,r))}containsXY(t,n){return VD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)}getArea(){return YD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Dv(n,0,this.endss_,this.stride,t)):n=this.flatCoordinates,_y(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=C$(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=XD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new RM(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;qD(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Dv(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=BD(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new Cd(n,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let n;if(t===0)n=0;else{const s=this.endss_[t-1];n=s[s.length-1]}const i=this.endss_[t].slice(),r=i[i.length-1];if(n!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=n;return new pd(this.flatCoordinates.slice(n,r),this.layout,i)}getPolygons(){const t=this.layout,n=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(s!==0)for(let f=0,h=l.length;f<h;++f)l[f]-=s;const u=new pd(n.slice(s,c),t,l);r.push(u),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return jD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=zD(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const S$=Cd;class Sd extends nM{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ee),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,n=this.geometries_.length;t<n;++t)this.changeEventsKeys_.push(Pt(this.geometries_[t],vt.CHANGE,this.changed,this))}clone(){const t=new Sd(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,n,i,r){if(r<ca(this.getExtent(),t,n))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(t,n,i,r);return r}containsXY(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(t,n))return!0;return!1}computeExtent(t){Ku(t);const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)WS(t,n[i].getExtent());return t}getGeometries(){return Uv(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(t);n.push(l),l!==a&&(r=!0)}if(r){const s=new Sd(null);return s.setGeometriesArray(n),s}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(t,n);this.changed()}scale(t,n,i){i||(i=qo(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(t,n,i);this.changed()}setGeometries(t){this.setGeometriesArray(Uv(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()}translate(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(t,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Uv(e){const t=[];for(let n=0,i=e.length;n<i;++n)t.push(e[n].clone());return t}const M$=Sd;class R$ extends v${constructor(t){t=t||{},super(),this.dataProjection=Oe(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Oe(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,n){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const r=Ry(i.geometry,n),s=new Sy;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,n){const i=t;let r=null;if(i.type==="FeatureCollection"){const s=t;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a)r.push(this.readFeatureFromObject(o[a],n))}else r=[this.readFeatureFromObject(t,n)];return r}readGeometryFromObject(t,n){return Ry(t,n)}readProjectionFromObject(t){const n=t.crs;let i;if(n)if(n.type=="name")i=Oe(n.properties.name);else if(n.type==="EPSG")i=Oe("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,n){n=this.adaptOptions(n);const i={type:"Feature",geometry:null,properties:null},r=t.getId();if(r!==void 0&&(i.id=r),!t.hasProperties())return i;const s=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=Iy(o,n),delete s[t.getGeometryName()]),_l(s)||(i.properties=s),i}writeFeaturesObject(t,n){n=this.adaptOptions(n);const i=[];for(let r=0,s=t.length;r<s;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,n){return Iy(t,this.adaptOptions(n))}}function Ry(e,t){if(!e)return null;let n;switch(e.type){case"Point":{n=A$(e);break}case"LineString":{n=L$(e);break}case"Polygon":{n=F$(e);break}case"MultiPoint":{n=k$(e);break}case"MultiLineString":{n=O$(e);break}case"MultiPolygon":{n=P$(e);break}case"GeometryCollection":{n=I$(e);break}default:throw new Error("Unsupported GeoJSON type: "+e.type)}return CM(n,!1,t)}function I$(e,t){const n=e.geometries.map(function(i){return Ry(i,t)});return new M$(n)}function A$(e){return new xl(e.coordinates)}function L$(e){return new Ed(e.coordinates)}function O$(e){return new T$(e.coordinates)}function k$(e){return new RM(e.coordinates)}function P$(e){return new S$(e.coordinates)}function F$(e){return new pd(e.coordinates)}function Iy(e,t){e=CM(e,!0,t);const n=e.getType();let i;switch(n){case"Point":{i=W$(e);break}case"LineString":{i=D$(e);break}case"Polygon":{i=B$(e,t);break}case"MultiPoint":{i=z$(e);break}case"MultiLineString":{i=$$(e);break}case"MultiPolygon":{i=G$(e,t);break}case"GeometryCollection":{i=N$(e,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return i}function N$(e,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(i){return Iy(i,t)})}}function D$(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function $$(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function z$(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function G$(e,t){let n;return t&&(n=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(n)}}function W$(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function B$(e,t){let n;return t&&(n=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(n)}}const Y$=R$;class X1{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new X1({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const H1=X1,Rt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class j1{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Fn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new j1({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return wt()}getImage(t){return wt()}getHitDetectionImage(){return wt()}getPixelRatio(t){return 1}getImageState(){return wt()}getImageSize(){return wt()}getOrigin(){return wt()}getSize(){return wt()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Fn(t)}listenImageChange(t){wt()}load(){wt()}unlistenImageChange(t){wt()}}const IM=j1;class U$ extends Zu{constructor(t,n,i,r){super(),this.extent=t,this.pixelRatio_=i,this.resolution=n,this.state=typeof r=="function"?Rt.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(vt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Rt.IDLE&&this.loader){this.state=Rt.LOADING,this.changed();const t=this.getResolution(),n=Array.isArray(t)?t[0]:t;CN(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Rt.LOADED}).catch(i=>{this.state=Rt.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function V$(e,t,n){const i=e;let r=!0,s=!1,o=!1;const a=[ld(i,vt.LOAD,function(){o=!0,s||t()})];return i.src&&DS?(s=!0,i.decode().then(function(){r&&t()}).catch(function(l){r&&(o?t():n())})):a.push(ld(i,vt.ERROR,n)),function(){r=!1,a.forEach(ee)}}function X$(e,t){return new Promise((n,i)=>{function r(){o(),n(e)}function s(){o(),i(new Error("Image load error"))}function o(){e.removeEventListener("load",r),e.removeEventListener("error",s)}e.addEventListener("load",r),e.addEventListener("error",s),t&&(e.src=t)})}function H$(e,t){return t&&(e.src=t),DS?new Promise((n,i)=>e.decode().then(()=>n(e),i)):X$(e)}const j$=U$;let yc=null;class Z$ extends Zu{constructor(t,n,i,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?Rt.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=n,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Rt.LOADED){yc||(yc=gn(1,1,void 0,{willReadFrequently:!0})),yc.drawImage(this.image_,0,0);try{yc.getImageData(0,0,1,1),this.tainted_=!1}catch{yc=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(vt.CHANGE)}handleImageError_(){this.imageState_=Rt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Rt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],n=this.size_[1],i=gn(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Rt.IDLE){this.image_||this.initializeImage_(),this.imageState_=Rt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&H$(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Rt.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*t),i.height=Math.ceil(n.height*t);const r=i.getContext("2d");r.scale(t,t),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=VS(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[t]=i}}function q$(e,t,n,i,r){let s=t===void 0?void 0:ud.get(t,n,r);return s||(s=new Z$(e,e instanceof HTMLImageElement?e.src||void 0:t,n,i,r),ud.set(t,n,r,s)),s}function Vv(e,t,n,i){return n!==void 0&&i!==void 0?[n/e,i/t]:n!==void 0?n/e:i!==void 0?i/t:1}class Z1 extends IM{constructor(t){t=t||{};const n=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:n,rotation:i,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Nt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Vt(o)),Nt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Nt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=Rt.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?Rt.LOADED:Rt.IDLE:l=Rt.LOADING:l=Rt.LOADED),this.color_=t.color!==void 0?cd(t.color):null,this.iconImage_=q$(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let c,u;if(t.size)[c,u]=t.size;else{const f=this.getImage(1);if(f.width&&f.height)c=f.width,u=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=t;const h=()=>{if(this.unlistenImageChange(h),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(Vv(d[0],d[1],t.width,t.height))};this.listenImageChange(h);return}}c!==void 0&&this.setScale(Vv(c,u,t.width,t.height))}}clone(){let t,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Z1({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]-n[0]/i[0],t[1]+n[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Rt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Rt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(vt.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(vt.CHANGE,t)}}const Md=Z1;class q1{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new q1({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const K1=q1;function ji(e){return Array.isArray(e)?XS(e):e}class J1 extends IM{constructor(t){const n=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:n,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),n=new J1({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const t=this.size_;if(!t)return null;const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-n[0]/i[0],t[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let n=this.canvas_[t];if(!n){const i=this.renderOptions_,r=gn(i.size*t,i.size*t);this.draw_(i,r,t),n=r.canvas,this.canvas_[t]=n}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Rt.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const b=r;r=s,s=b}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,f=Math.sqrt(l*l+u*u),h=f/l;if(t==="miter"&&h<=i)return h*n;const d=n/2/h,g=n/2*(u/f),_=Math.sqrt((r+d)*(r+d)+g*g)-r;if(this.radius2_===void 0||t==="bevel")return _*2;const p=r*Math.sin(a),y=Math.sqrt(r*r-p*p),x=s-y,v=Math.sqrt(p*p+x*x)/p;if(v<=i){const b=v*n/2-s-r;return 2*Math.max(_,b)}return _*2}createRenderOptions(){let t=bl,n=vl,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=bu),o=ji(o),a=this.stroke_.getWidth(),a===void 0&&(a=Eu),r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),n=this.stroke_.getLineJoin(),n===void 0&&(n=vl),t=this.stroke_.getLineCap(),t===void 0&&(t=bl),i=this.stroke_.getMiterLimit(),i===void 0&&(i=xu));const l=this.calculateLineJoinSize_(n,a,i),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:t,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=bn),n.fillStyle=ji(r),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineCap=t.lineCap,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=cd(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){const r=gn(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let n=this.points_;const i=this.radius_;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,c=a%2===0?i:r;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=bn,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}}const AM=J1;class Q1 extends AM{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),n=new Q1({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(t){this.radius_=t,this.render()}}const LM=Q1;let OM=class kM{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Xv,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new kM({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(n){return n.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Xv,this.geometry_=t}setZIndex(t){this.zIndex_=t}};function K$(e){let t;if(typeof e=="function")t=e;else{let n;Array.isArray(e)?n=e:(Nt(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[e]),t=function(){return n}}return t}let D0=null;function J$(e,t){if(!D0){const n=new H1({color:"rgba(255,255,255,0.4)"}),i=new K1({color:"#3399CC",width:1.25});D0=[new OM({image:new LM({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return D0}function Xv(e){return e.getGeometry()}const Bo=OM,Q$="#333";let t7=class PM{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Fn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new H1({color:Q$}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new PM({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Fn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}};const e7=t7;function n7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const oh={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class i7 extends um{constructor(t){t=t||{};const n=Object.assign({},t);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(oh.PRELOAD)}setPreload(t){this.set(oh.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(oh.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(oh.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const r7=i7;class s7 extends PS{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return wt()}getData(t){return null}prepareFrame(t){return wt()}renderFrame(t,n){return wt()}loadedTileCallback(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i}createLoadedTileFinder(t,n,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,s,o)}}forEachFeatureAtCoordinate(t,n,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const n=t.target;(n.getState()===Rt.LOADED||n.getState()===Rt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let n=t.getState();return n!=Rt.LOADED&&n!=Rt.ERROR&&t.addEventListener(vt.CHANGE,this.boundHandleImageChange_),n==Rt.IDLE&&(t.load(),n=t.getState()),n==Rt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const o7=s7,Hv=[];let Ga=null;function a7(){Ga=gn(1,1,void 0,{willReadFrequently:!0})}class l7 extends o7{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Ci(),this.pixelTransform=Ci(),this.inversePixelTransform=Ci(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,n,i){Ga||a7(),Ga.clearRect(0,0,1,1);let r;try{Ga.drawImage(t,n,i,1,1,0,0,1,1),r=Ga.getImageData(0,0,1,1).data}catch{return Ga=null,null}return r}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,n,i){const r=this.getLayer().getClassName();let s,o;if(t&&t.className===r&&(!i||t&&t.style.backgroundColor&&js(cd(t.style.backgroundColor),cd(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=gn();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,n,i){const r=ua(i),s=om(i),o=sm(i),a=rm(i);Ee(n.coordinateToPixelTransform,r),Ee(n.coordinateToPixelTransform,s),Ee(n.coordinateToPixelTransform,o),Ee(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ee(l,r),Ee(l,s),Ee(l,o),Ee(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,n,i){const r=this.getLayer();if(r.hasListener(t)){const s=new dM(t,this.inversePixelTransform,i,n);r.dispatchEvent(s)}}preRender(t,n){this.frameState=n,this.dispatchRenderEvent_(Ki.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(Ki.POSTRENDER,t,n)}getRenderTransform(t,n,i,r,s,o,a){const l=s/2,c=o/2,u=r/n,f=-u,h=-t[0]+a,d=-t[1];return Mi(this.tempTransform,l,c,u,f,-i,h,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const tw=l7;class c7 extends Zu{constructor(t,n,i){super(),i=i||{},this.tileCoord=t,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(vt.CHANGE)}release(){this.state===ht.ERROR&&this.setState(ht.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==ht.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,n=this;do{if(t.getState()==ht.LOADED){t.interimTile=null;break}else t.getState()==ht.LOADING?n=t:t.getState()==ht.IDLE?n.interimTile=t.interimTile:n=t;t=n.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==ht.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){wt()}getAlpha(t,n){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;const r=n-i+1e3/60;return r>=this.transition_?1:tM(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const FM=c7;class u7 extends FM{constructor(t,n,i,r,s,o){super(t,n,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=ht.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ht.ERROR,this.unlistenImage_(),this.image_=f7(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=ht.LOADED:this.state=ht.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ht.ERROR&&(this.state=ht.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ht.IDLE&&(this.state=ht.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=V$(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function f7(){const e=gn(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}const NM=u7,h7=.5,d7=10,jv=.25;class g7{constructor(t,n,i,r,s,o){this.sourceProj_=t,this.targetProj_=n;let a={};const l=gd(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){const x=y[0]+"/"+y[1];return a[x]||(a[x]=l(y)),a[x]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Qt(r)>=Qt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Qt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Qt(this.targetProj_.getExtent()):null;const c=ua(i),u=om(i),f=sm(i),h=rm(i),d=this.transformInv_(c),g=this.transformInv_(u),m=this.transformInv_(f),_=this.transformInv_(h),p=d7+(o?Math.max(0,Math.ceil(Math.log2(hy(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,f,h,d,g,m,_,p),this.wrapsXInSource_){let y=1/0;this.triangles_.forEach(function(x,w,v){y=Math.min(y,x.source[0][0],x.source[1][0],x.source[2][0])}),this.triangles_.forEach(x=>{if(Math.max(x.source[0][0],x.source[1][0],x.source[2][0])-y>this.sourceWorldWidth_/2){const w=[[x.source[0][0],x.source[0][1]],[x.source[1][0],x.source[1][1]],[x.source[2][0],x.source[2][1]]];w[0][0]-y>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-y>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-y>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);const v=Math.min(w[0][0],w[1][0],w[2][0]);Math.max(w[0][0],w[1][0],w[2][0])-v<this.sourceWorldWidth_/2&&(x.source=w)}})}a={}}addTriangle_(t,n,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,n,i]})}addQuad_(t,n,i,r,s,o,a,l,c){const u=xv([s,o,a,l]),f=this.sourceWorldWidth_?Qt(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&f>.5&&f<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const _=xv([t,n,i,r]);g=Qt(_)/this.targetWorldWidth_>jv||g}!d&&this.sourceProj_.isGlobal()&&f&&(g=f>jv||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!fn(u,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!g){const _=[(t[0]+i[0])/2,(t[1]+i[1])/2],p=this.transformInv_(_);let y;d?y=(Go(s[0],h)+Go(a[0],h))/2-Go(p[0],h):y=(s[0]+a[0])/2-p[0];const x=(s[1]+a[1])/2-p[1];g=y*y+x*x>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const _=[(n[0]+i[0])/2,(n[1]+i[1])/2],p=this.transformInv_(_),y=[(r[0]+t[0])/2,(r[1]+t[1])/2],x=this.transformInv_(y);this.addQuad_(t,n,_,y,s,o,p,x,c-1),this.addQuad_(y,_,i,r,x,p,a,l,c-1)}else{const _=[(t[0]+n[0])/2,(t[1]+n[1])/2],p=this.transformInv_(_),y=[(i[0]+r[0])/2,(i[1]+r[1])/2],x=this.transformInv_(y);this.addQuad_(t,_,y,r,s,p,x,l,c-1),this.addQuad_(_,n,i,y,p,o,a,x,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(t,i,r,s,a,l),m&14||this.addTriangle_(t,i,n,s,a,o),m&&(m&13||this.addTriangle_(n,r,t,o,l,s),m&7||this.addTriangle_(n,r,i,o,l,a))}calculateSourceExtent(){const t=oi();return this.triangles_.forEach(function(n,i,r){const s=n.source;tu(t,s[0]),tu(t,s[1]),tu(t,s[2])}),t}getTriangles(){return this.triangles_}}const m7=g7;let $0;const il=[];function Zv(e,t,n,i,r){e.beginPath(),e.moveTo(0,0),e.lineTo(t,n),e.lineTo(i,r),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,i)+1,Math.max(n,r)),e.restore()}function z0(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function p7(){if($0===void 0){const e=gn(6,6,il);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Zv(e,4,5,4,0),Zv(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;$0=z0(t,0)||z0(t,4)||z0(t,8),fm(e),il.push(e.canvas)}return $0}function qv(e,t,n,i){const r=bD(n,t,e);let s=dd(t,i,n);const o=t.getMetersPerUnit();o!==void 0&&(s*=o);const a=e.getMetersPerUnit();a!==void 0&&(s/=a);const l=e.getExtent();if(!l||qu(l,r)){const c=dd(e,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function y7(e,t,n,i){const r=qo(n);let s=qv(e,t,r,i);return(!isFinite(s)||s<=0)&&YS(n,function(o){return s=qv(e,t,o,i),isFinite(s)&&s>0}),s}function _7(e,t,n,i,r,s,o,a,l,c,u,f){const h=gn(Math.round(n*e),Math.round(n*t),il);if(f||(h.imageSmoothingEnabled=!1),l.length===0)return h.canvas;h.scale(n,n);function d(w){return Math.round(w*n)/n}h.globalCompositeOperation="lighter";const g=oi();l.forEach(function(w,v,b){WS(g,w.extent)});const m=Qt(g),_=zn(g),p=gn(Math.round(n*m/i),Math.round(n*_/i),il);f||(p.imageSmoothingEnabled=!1);const y=n/i;l.forEach(function(w,v,b){const E=w.extent[0]-g[0],C=-(w.extent[3]-g[3]),I=Qt(w.extent),S=zn(w.extent);w.image.width>0&&w.image.height>0&&p.drawImage(w.image,c,c,w.image.width-2*c,w.image.height-2*c,E*y,C*y,I*y,S*y)});const x=ua(o);return a.getTriangles().forEach(function(w,v,b){const E=w.source,C=w.target;let I=E[0][0],S=E[0][1],R=E[1][0],M=E[1][1],k=E[2][0],O=E[2][1];const A=d((C[0][0]-x[0])/s),P=d(-(C[0][1]-x[1])/s),N=d((C[1][0]-x[0])/s),G=d(-(C[1][1]-x[1])/s),H=d((C[2][0]-x[0])/s),U=d(-(C[2][1]-x[1])/s),Z=I,z=S;I=0,S=0,R-=Z,M-=z,k-=Z,O-=z;const Q=[[R,M,0,0,N-A],[k,O,0,0,H-A],[0,0,R,M,G-P],[0,0,k,O,U-P]],nt=XN(Q);if(nt){if(h.save(),h.beginPath(),p7()||!f){h.moveTo(N,G);const st=4,ot=A-N,$=P-G;for(let Y=0;Y<st;Y++)h.lineTo(N+d((Y+1)*ot/st),G+d(Y*$/(st-1))),Y!=st-1&&h.lineTo(N+d((Y+1)*ot/st),G+d((Y+1)*$/(st-1)));h.lineTo(H,U)}else h.moveTo(N,G),h.lineTo(A,P),h.lineTo(H,U);h.clip(),h.transform(nt[0],nt[2],nt[1],nt[3],A,P),h.translate(g[0]-Z,g[3]-z),h.scale(i/n,-i/n),h.drawImage(p.canvas,0,0),h.restore()}}),fm(p),il.push(p.canvas),u&&(h.save(),h.globalCompositeOperation="source-over",h.strokeStyle="black",h.lineWidth=1,a.getTriangles().forEach(function(w,v,b){const E=w.target,C=(E[0][0]-x[0])/s,I=-(E[0][1]-x[1])/s,S=(E[1][0]-x[0])/s,R=-(E[1][1]-x[1])/s,M=(E[2][0]-x[0])/s,k=-(E[2][1]-x[1])/s;h.beginPath(),h.moveTo(S,R),h.lineTo(C,I),h.lineTo(M,k),h.closePath(),h.stroke()}),h.restore()),h.canvas}class w7 extends FM{constructor(t,n,i,r,s,o,a,l,c,u,f,h){super(s,ht.IDLE,{interpolate:!!h}),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const _=g?el(d,g):d;if(hy(_)===0){this.state=ht.EMPTY;return}const p=t.getExtent();p&&(m?m=el(m,p):m=p);const y=r.getResolution(this.wrappedTileCoord_[0]),x=y7(t,i,_,y);if(!isFinite(x)||x<=0){this.state=ht.EMPTY;return}const w=u!==void 0?u:h7;if(this.triangulation_=new m7(t,i,_,m,x*w,y),this.triangulation_.getTriangles().length===0){this.state=ht.EMPTY;return}this.sourceZ_=n.getZForResolution(x);let v=this.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(v[1]=Re(v[1],m[1],m[3]),v[3]=Re(v[3],m[1],m[3])):v=el(v,m)),!hy(v))this.state=ht.EMPTY;else{const b=n.getTileRangeForExtentAndZ(v,this.sourceZ_);for(let E=b.minX;E<=b.maxX;E++)for(let C=b.minY;C<=b.maxY;C++){const I=c(this.sourceZ_,E,C,a);I&&this.sourceTiles_.push(I)}this.sourceTiles_.length===0&&(this.state=ht.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==ht.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=ht.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=_7(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=ht.LOADED}this.changed()}load(){if(this.state==ht.IDLE){this.state=ht.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const i=n.getState();if(i==ht.IDLE||i==ht.LOADING){t++;const r=Pt(n,vt.CHANGE,function(s){const o=n.getState();(o==ht.LOADED||o==ht.ERROR||o==ht.EMPTY)&&(ee(r),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,r){n.getState()==ht.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ee),this.sourcesListenerKeys_=null}release(){this.canvas_&&(fm(this.canvas_.getContext("2d")),il.push(this.canvas_),this.canvas_=null),super.release()}}const Ay=w7;class DM{constructor(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function va(e,t,n,i,r){return r!==void 0?(r.minX=e,r.maxX=t,r.minY=n,r.maxY=i,r):new DM(e,t,n,i)}const $M=DM;class x7 extends tw{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=oi(),this.tmpTileRange_=new $M(0,0,0,0)}isDrawableTile(t){const n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==ht.LOADED||i==ht.EMPTY||i==ht.ERROR&&!r}getTile(t,n,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(t,n,i,s,o);return c.getState()==ht.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Ee(n.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!qu(s,r))return null;const o=n.pixelRatio,a=n.viewState.projection,l=n.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),f=c.getTilePixelRatio(n.pixelRatio);for(let h=u.getZForResolution(l.resolution);h>=u.getMinZoom();--h){const d=u.getTileCoordForCoordAndZ(r,h),g=c.getTile(h,d[1],d[2],o,a);if(!(g instanceof NM||g instanceof Ay)||g instanceof Ay&&g.getState()===ht.EMPTY)return null;if(g.getState()!==ht.LOADED)continue;const m=u.getOrigin(h),_=Fn(u.getTileSize(h)),p=u.getResolution(h),y=Math.floor(f*((r[0]-m[0])/p-d[1]*_[0])),x=Math.floor(f*((m[1]-r[1])/p-d[2]*_[1])),w=Math.round(f*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),y+w,x+w)}return null}loadedTileCallback(t,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,n,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,n){const i=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=t.pixelRatio,u=this.getLayer(),f=u.getSource(),h=f.getRevision(),d=f.getTileGridForProjection(s),g=d.getZForResolution(o,f.zDirection),m=d.getResolution(g);let _=t.extent;const p=t.viewState.resolution,y=f.getTilePixelRatio(c),x=Math.round(Qt(_)/p*c),w=Math.round(zn(_)/p*c),v=i.extent&&Rr(i.extent);v&&(_=el(_,Rr(i.extent)));const b=m*x/2/y,E=m*w/2/y,C=[a[0]-b,a[1]-E,a[0]+b,a[1]+E],I=d.getTileRangeForExtentAndZ(_,g),S={};S[g]={};const R=this.createLoadedTileFinder(f,s,S),M=this.tmpExtent,k=this.tmpTileRange_;this.newTiles_=!1;const O=l?gy(r.center,p,l,t.size):void 0;for(let Q=I.minX;Q<=I.maxX;++Q)for(let nt=I.minY;nt<=I.maxY;++nt){if(l&&!d.tileCoordIntersectsViewport([g,Q,nt],O))continue;const st=this.getTile(g,Q,nt,t);if(this.isDrawableTile(st)){const Y=Vt(this);if(st.getState()==ht.LOADED){S[g][st.tileCoord.toString()]=st;let D=st.inTransition(Y);D&&i.opacity!==1&&(st.endTransition(Y),D=!1),!this.newTiles_&&(D||!this.renderedTiles.includes(st))&&(this.newTiles_=!0)}if(st.getAlpha(Y,t.time)===1)continue}const ot=d.getTileCoordChildTileRange(st.tileCoord,k,M);let $=!1;ot&&($=R(g+1,ot)),$||d.forEachTileCoordParentTileRange(st.tileCoord,R,k,M)}const A=m/o*c/y;Mi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,l,-x/2,-w/2);const P=b1(this.pixelTransform);this.useContainer(n,P,this.getBackground(t));const N=this.context,G=N.canvas;im(this.inversePixelTransform,this.pixelTransform),Mi(this.tempTransform,x/2,w/2,A,A,0,-x/2,-w/2),G.width!=x||G.height!=w?(G.width=x,G.height=w):this.containerReused||N.clearRect(0,0,x,w),v&&this.clipUnrotated(N,t,v),f.getInterpolate()||(N.imageSmoothingEnabled=!1),this.preRender(N,t),this.renderedTiles.length=0;let H=Object.keys(S).map(Number);H.sort($s);let U,Z,z;i.opacity===1&&(!this.containerReused||f.getOpaque(t.viewState.projection))?H=H.reverse():(U=[],Z=[]);for(let Q=H.length-1;Q>=0;--Q){const nt=H[Q],st=f.getTilePixelSize(nt,c,s),$=d.getResolution(nt)/m,Y=st[0]*$*A,D=st[1]*$*A,V=d.getTileCoordForCoordAndZ(ua(C),nt),K=d.getTileCoordExtent(V),T=Ee(this.tempTransform,[y*(K[0]-C[0])/m,y*(C[3]-K[3])/m]),L=y*f.getGutterForProjection(s),F=S[nt];for(const W in F){const B=F[W],X=B.tileCoord,rt=V[1]-X[1],J=Math.round(T[0]-(rt-1)*Y),tt=V[2]-X[2],q=Math.round(T[1]-(tt-1)*D),ct=Math.round(T[0]-rt*Y),at=Math.round(T[1]-tt*D),ut=J-ct,ft=q-at,bt=g===nt,Lt=bt&&B.getAlpha(Vt(this),t.time)!==1;let Et=!1;if(!Lt)if(U){z=[ct,at,ct+ut,at,ct+ut,at+ft,ct,at+ft];for(let jt=0,pe=U.length;jt<pe;++jt)if(g!==nt&&nt<Z[jt]){const ce=U[jt];fn([ct,at,ct+ut,at+ft],[ce[0],ce[3],ce[4],ce[7]])&&(Et||(N.save(),Et=!0),N.beginPath(),N.moveTo(z[0],z[1]),N.lineTo(z[2],z[3]),N.lineTo(z[4],z[5]),N.lineTo(z[6],z[7]),N.moveTo(ce[6],ce[7]),N.lineTo(ce[4],ce[5]),N.lineTo(ce[2],ce[3]),N.lineTo(ce[0],ce[1]),N.clip())}U.push(z),Z.push(nt)}else N.clearRect(ct,at,ut,ft);this.drawTileImage(B,t,ct,at,ut,ft,L,bt),U&&!Lt?(Et&&N.restore(),this.renderedTiles.unshift(B)):this.renderedTiles.push(B),this.updateUsedTiles(t.usedTiles,f,B)}}return this.renderedRevision=h,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!_u(this.renderedExtent_,C),this.renderedExtent_=C,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(t,f,d,c,s,_,g,u.getPreload()),this.scheduleExpireCache(t,f),this.postRender(N,t),i.extent&&N.restore(),N.imageSmoothingEnabled=!0,P!==G.style.transform&&(G.style.transform=P),this.container}drawTileImage(t,n,i,r,s,o,a,l){const c=this.getTileImage(t);if(!c)return;const u=Vt(this),f=n.layerStatesArray[n.layerIndex],h=f.opacity*(l?t.getAlpha(u,n.time):1),d=h!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),d&&this.context.restore(),h!==f.opacity?n.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,n){if(n.canExpireCache()){const i=(function(r,s,o){const a=Vt(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,n);t.postRenderFunctions.push(i)}}updateUsedTiles(t,n,i){const r=Vt(n);r in t||(t[r]={}),t[r][i.getKey()]=!0}manageTilePyramid(t,n,i,r,s,o,a,l,c){const u=Vt(n);u in t.wantedTiles||(t.wantedTiles[u]={});const f=t.wantedTiles[u],h=t.tileQueue,d=i.getMinZoom(),g=t.viewState.rotation,m=g?gy(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let _=0,p,y,x,w,v,b;for(b=d;b<=a;++b)for(y=i.getTileRangeForExtentAndZ(o,b,y),x=i.getResolution(b),w=y.minX;w<=y.maxX;++w)for(v=y.minY;v<=y.maxY;++v)g&&!i.tileCoordIntersectsViewport([b,w,v],m)||(a-b<=l?(++_,p=n.getTile(b,w,v,r,s),p.getState()==ht.IDLE&&(f[p.getKey()]=!0,h.isKeyQueued(p.getKey())||h.enqueue([p,u,i.getTileCoordCenter(p.tileCoord),x])),c!==void 0&&c(p)):n.useTile(b,w,v,s));n.updateCacheSize(_,s)}}const b7=x7;class v7 extends r7{constructor(t){super(t)}createRenderer(){return new b7(this)}}const E7=v7;function T7(e,t,n,i,r){zM(e,t,n||0,i||e.length-1,r||C7)}function zM(e,t,n,i,r){for(;i>n;){if(i-n>600){var s=i-n+1,o=t-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),u=Math.max(n,Math.floor(t-o*l/s+c)),f=Math.min(i,Math.floor(t+(s-o)*l/s+c));zM(e,t,u,f,r)}var h=e[t],d=n,g=i;for(_c(e,n,t),r(e[i],h)>0&&_c(e,n,i);d<g;){for(_c(e,d,g),d++,g--;r(e[d],h)<0;)d++;for(;r(e[g],h)>0;)g--}r(e[n],h)===0?_c(e,n,g):(g++,_c(e,g,i)),g<=t&&(n=g+1),t<=g&&(i=g-1)}}function _c(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function C7(e,t){return e<t?-1:e>t?1:0}let ew=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const i=[];if(!lh(t,n))return i;const r=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?r(a):a;lh(t,l)&&(n.leaf?i.push(a):W0(t,l)?this._all(a,i):s.push(a))}n=s.pop()}return i}collides(t){let n=this.data;if(!lh(t,n))return!1;const i=[];for(;n;){for(let r=0;r<n.children.length;r++){const s=n.children[r],o=n.leaf?this.toBBox(s):s;if(lh(t,o)){if(n.leaf||W0(t,o))return!0;i.push(s)}}n=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Wa([]),this}remove(t,n){if(!t)return this;let i=this.data;const r=this.toBBox(t),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const u=S7(t,i.children,n);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&W0(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const i=[];for(;t;)t.leaf?n.push(...t.children):i.push(...t.children),t=i.pop();return n}_build(t,n,i,r){const s=i-n+1;let o=this._maxEntries,a;if(s<=o)return a=Wa(t.slice(n,i+1)),Ea(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Wa([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));Kv(t,n,i,c,this.compareMinX);for(let u=n;u<=i;u+=c){const f=Math.min(u+c-1,i);Kv(t,u,f,l,this.compareMinY);for(let h=u;h<=f;h+=l){const d=Math.min(h+l-1,f);a.children.push(this._build(t,h,d,r-1))}}return Ea(a,this.toBBox),a}_chooseSubtree(t,n,i,r){for(;r.push(n),!(n.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=G0(c),f=I7(t,c)-u;f<o?(o=f,s=u<s?u:s,a=c):f===o&&u<s&&(s=u,a=c)}n=a||n.children[0]}return n}_insert(t,n,i){const r=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(t),Nc(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)}_split(t,n){const i=t[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=Wa(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Ea(i,this.toBBox),Ea(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,n){this.data=Wa([t,n]),this.data.height=t.height+1,this.data.leaf=!1,Ea(this.data,this.toBBox)}_chooseSplitIndex(t,n,i){let r,s=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=Fc(t,0,a,this.toBBox),c=Fc(t,a,i,this.toBBox),u=A7(l,c),f=G0(l)+G0(c);u<s?(s=u,r=a,o=f<o?f:o):u===s&&f<o&&(o=f,r=a)}return r||i-n}_chooseSplitAxis(t,n,i){const r=t.leaf?this.compareMinX:M7,s=t.leaf?this.compareMinY:R7,o=this._allDistMargin(t,n,i,r),a=this._allDistMargin(t,n,i,s);o<a&&t.children.sort(r)}_allDistMargin(t,n,i,r){t.children.sort(r);const s=this.toBBox,o=Fc(t,0,n,s),a=Fc(t,i-n,i,s);let l=ah(o)+ah(a);for(let c=n;c<i-n;c++){const u=t.children[c];Nc(o,t.leaf?s(u):u),l+=ah(o)}for(let c=i-n-1;c>=n;c--){const u=t.children[c];Nc(a,t.leaf?s(u):u),l+=ah(a)}return l}_adjustParentBBoxes(t,n,i){for(let r=i;r>=0;r--)Nc(n[r],t)}_condense(t){for(let n=t.length-1,i;n>=0;n--)t[n].children.length===0?n>0?(i=t[n-1].children,i.splice(i.indexOf(t[n]),1)):this.clear():Ea(t[n],this.toBBox)}};function S7(e,t,n){if(!n)return t.indexOf(e);for(let i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function Ea(e,t){Fc(e,0,e.children.length,t,e)}function Fc(e,t,n,i,r){r||(r=Wa(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=t;s<n;s++){const o=e.children[s];Nc(r,e.leaf?i(o):o)}return r}function Nc(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function M7(e,t){return e.minX-t.minX}function R7(e,t){return e.minY-t.minY}function G0(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function ah(e){return e.maxX-e.minX+(e.maxY-e.minY)}function I7(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function A7(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function W0(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function lh(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Wa(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Kv(e,t,n,i,r){const s=[t,n];for(;s.length;){if(n=s.pop(),t=s.pop(),n-t<=i)continue;const o=t+Math.ceil((n-t)/i/2)*i;T7(e,o,t,n,r),s.push(t,o,o,n)}}let jl=0;const qe=1<<jl++,At=1<<jl++,El=1<<jl++,nw=1<<jl++,nf=1<<jl++,ui=Math.pow(2,jl)-1,GM={[qe]:"boolean",[At]:"number",[El]:"string",[nw]:"color",[nf]:"number[]"},L7=Object.keys(GM).map(Number).sort($s);function Rd(e){const t=[];for(const n of L7)O7(e,n)&&t.push(GM[n]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function O7(e,t){return(e&t)===t}function WM(e,t){return!!(e&t)}class As{constructor(t,n){this.type=t,this.value=n}}class k7{constructor(t,n,...i){this.type=t,this.operator=n,this.args=i}}function BM(){return{variables:new Set,properties:new Set}}function dm(e,t){switch(typeof e){case"boolean":return new As(qe,e);case"number":return new As(At,e);case"string":return new As(El,e)}if(!Array.isArray(e))throw new Error("Expression must be an array or a primitive value");if(e.length===0)throw new Error("Empty expression");if(typeof e[0]=="string")return $7(e,t);for(const i of e)if(typeof i!="number")throw new Error("Expected an array of numbers");let n=nf;return(e.length===3||e.length===4)&&(n|=nw),new As(n,e)}const et={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},P7={[et.Number]:Zt(te(1,1/0,ui),At),[et.String]:Zt(te(1,1/0,ui),El),[et.Get]:Zt(F7,ui),[et.Var]:Zt(N7,ui),[et.Resolution]:Zt(D7,At),[et.Any]:Zt(te(2,1/0,qe),qe),[et.All]:Zt(te(2,1/0,qe),qe),[et.Not]:Zt(te(1,1,qe),qe),[et.Equal]:Zt(te(2,2,ui),qe),[et.NotEqual]:Zt(te(2,2,ui),qe),[et.GreaterThan]:Zt(te(2,2,ui),qe),[et.GreaterThanOrEqualTo]:Zt(te(2,2,ui),qe),[et.LessThan]:Zt(te(2,2,ui),qe),[et.LessThanOrEqualTo]:Zt(te(2,2,ui),qe),[et.Multiply]:Zt(te(2,1/0,At),At),[et.Divide]:Zt(te(2,2,At),At),[et.Add]:Zt(te(2,1/0,At),At),[et.Subtract]:Zt(te(2,2,At),At),[et.Clamp]:Zt(te(3,3,At),At),[et.Mod]:Zt(te(2,2,At),At),[et.Pow]:Zt(te(2,2,At),At),[et.Abs]:Zt(te(1,1,At),At),[et.Floor]:Zt(te(1,1,At),At),[et.Ceil]:Zt(te(1,1,At),At),[et.Round]:Zt(te(1,1,At),At),[et.Sin]:Zt(te(1,1,At),At),[et.Cos]:Zt(te(1,1,At),At),[et.Atan]:Zt(te(1,2,At),At),[et.Sqrt]:Zt(te(1,1,At),At),[et.Match]:Zt(te(4,1/0,El|At),ui)};function F7(e,t){if(e.length!==2)throw new Error("Expected 1 argument for get operation");const n=dm(e[1],t);if(!(n instanceof As))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.properties.add(n.value),[n]}function N7(e,t){if(e.length!==2)throw new Error("Expected 1 argument for var operation");const n=dm(e[1],t);if(!(n instanceof As))throw new Error("Expected a literal argument for var operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.variables.add(n.value),[n]}function D7(e,t){const n=e[0];if(e.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function te(e,t,n){return function(i,r){const s=i[0],o=i.length-1;if(e===t){if(o!==e){const l=e===1?"":"s";throw new Error(`Expected ${e} argument${l} for operation ${s}, got ${o}`)}}else if(o<e||o>t)throw new Error(`Expected ${e} to ${t} arguments for operation ${s}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const c=dm(i[l+1],r);if(!WM(n,c.type)){const u=Rd(n),f=Rd(c.type);throw new Error(`Unexpected type for argument ${l} of ${s} operation : got ${u} but expected ${f}`)}a[l]=c}return a}}function Zt(e,t){return function(n,i){const r=n[0],s=e(n,i);return new k7(t,r,...s)}}function $7(e,t){const n=e[0],i=P7[n];if(!i)throw new Error(`Unknown operator: ${n}`);return i(e,t)}function YM(){return{variables:{},properties:{},resolution:NaN}}function Zs(e,t,n){const i=dm(e,n);if(!WM(t,i.type)){const r=Rd(t),s=Rd(i.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return Ko(i)}function Ko(e,t){if(e instanceof As)return function(){return e.value};const n=e.operator;switch(n){case et.Number:case et.String:return z7(e);case et.Get:case et.Var:return G7(e);case et.Resolution:return i=>i.resolution;case et.Any:case et.All:case et.Not:return B7(e);case et.Equal:case et.NotEqual:case et.LessThan:case et.LessThanOrEqualTo:case et.GreaterThan:case et.GreaterThanOrEqualTo:return W7(e);case et.Multiply:case et.Divide:case et.Add:case et.Subtract:case et.Clamp:case et.Mod:case et.Pow:case et.Abs:case et.Floor:case et.Ceil:case et.Round:case et.Sin:case et.Cos:case et.Atan:case et.Sqrt:return Y7(e);case et.Match:return U7(e);default:throw new Error(`Unsupported operator ${n}`)}}function z7(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ko(e.args[s]);switch(n){case et.Number:case et.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function G7(e,t){const n=e.args[0];if(!(n instanceof As))throw new Error("Expected literal name");const i=n.value;if(typeof i!="string")throw new Error("Expected string name");switch(e.operator){case et.Get:return r=>r.properties[i];case et.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function W7(e,t){const n=e.operator,i=Ko(e.args[0]),r=Ko(e.args[1]);switch(n){case et.Equal:return s=>i(s)===r(s);case et.NotEqual:return s=>i(s)!==r(s);case et.LessThan:return s=>i(s)<r(s);case et.LessThanOrEqualTo:return s=>i(s)<=r(s);case et.GreaterThan:return s=>i(s)>r(s);case et.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function B7(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ko(e.args[s]);switch(n){case et.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case et.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case et.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function Y7(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ko(e.args[s]);switch(n){case et.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case et.Divide:return s=>r[0](s)/r[1](s);case et.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case et.Subtract:return s=>r[0](s)-r[1](s);case et.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case et.Mod:return s=>r[0](s)%r[1](s);case et.Pow:return s=>Math.pow(r[0](s),r[1](s));case et.Abs:return s=>Math.abs(r[0](s));case et.Floor:return s=>Math.floor(r[0](s));case et.Ceil:return s=>Math.ceil(r[0](s));case et.Round:return s=>Math.round(r[0](s));case et.Sin:return s=>Math.sin(r[0](s));case et.Cos:return s=>Math.cos(r[0](s));case et.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case et.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function U7(e,t){const n=e.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Ko(e.args[r]);return r=>{const s=i[0](r);for(let o=1;o<n;o+=2)if(s===i[o](r))return i[o+1](r);return i[n-1](r)}}function V7(e){return!0}function X7(e){const t=BM(),n=H7(e,t),i=YM();return function(r,s){return i.properties=r.getPropertiesInternal(),i.resolution=s,n(i)}}function Jv(e){const t=BM(),n=e.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Ly(e[o],t);const r=YM(),s=new Array(n);return function(o,a){r.properties=o.getPropertiesInternal(),r.resolution=a;for(let l=0;l<n;++l)s[l]=i[l](r);return s}}function H7(e,t){const n=e.length,i=new Array(n);for(let r=0;r<n;++r){const s=e[r],o="filter"in s?Zs(s.filter,qe,t):V7;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Ly(s.style[c],t)}else a=[Ly(s.style,t)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(r)&&!(e[a].else&&o)){o=!0;for(const c of i[a].styles){const u=c(r);u&&s.push(u)}}}return s}}function Ly(e,t){const n=Tu(e,"",t),i=Cu(e,"",t),r=j7(e,t),s=Z7(e,t),o=vn(e,"z-index",t),a=new Bo;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(i){const u=i(l);u&&(c=!1),a.setStroke(u)}if(r){const u=r(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function Tu(e,t,n){const i=UM(e,t+"fill-color",n);if(!i)return null;const r=new H1;return function(s){const o=i(s);return o==="none"?null:(r.setColor(o),r)}}function Cu(e,t,n){const i=vn(e,t+"stroke-width",n),r=UM(e,t+"stroke-color",n);if(!i&&!r)return null;const s=xs(e,t+"stroke-line-cap",n),o=xs(e,t+"stroke-line-join",n),a=VM(e,t+"stroke-line-dash",n),l=vn(e,t+"stroke-line-dash-offset",n),c=vn(e,t+"stroke-miter-limit",n),u=new K1;return function(f){if(r){const h=r(f);if(h==="none")return null;u.setColor(h)}if(i&&u.setWidth(i(f)),s){const h=s(f);if(h!=="butt"&&h!=="round"&&h!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(h)}if(o){const h=o(f);if(h!=="bevel"&&h!=="round"&&h!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(h)}return a&&u.setLineDash(a(f)),l&&u.setLineDashOffset(l(f)),c&&u.setMiterLimit(c(f)),u}}function j7(e,t){const n="text-",i=xs(e,n+"value",t);if(!i)return null;const r=Tu(e,n,t),s=Tu(e,n+"background-",t),o=Cu(e,n,t),a=Cu(e,n+"background-",t),l=xs(e,n+"font",t),c=vn(e,n+"max-angle",t),u=vn(e,n+"offset-x",t),f=vn(e,n+"offset-y",t),h=Su(e,n+"overflow",t),d=xs(e,n+"placement",t),g=vn(e,n+"repeat",t),m=gm(e,n+"scale",t),_=Su(e,n+"rotate-with-view",t),p=vn(e,n+"rotation",t),y=xs(e,n+"align",t),x=xs(e,n+"justify",t),w=xs(e,n+"baseline",t),v=VM(e,n+"padding",t),b=new e7({});return function(E){if(b.setText(i(E)),r&&b.setFill(r(E)),s&&b.setBackgroundFill(s(E)),o&&b.setStroke(o(E)),a&&b.setBackgroundStroke(a(E)),l&&b.setFont(l(E)),c&&b.setMaxAngle(c(E)),u&&b.setOffsetX(u(E)),f&&b.setOffsetY(f(E)),h&&b.setOverflow(h(E)),d){const C=d(E);if(C!=="point"&&C!=="line")throw new Error("Expected point or line for text-placement");b.setPlacement(C)}if(g&&b.setRepeat(g(E)),m&&b.setScale(m(E)),_&&b.setRotateWithView(_(E)),p&&b.setRotation(p(E)),y){const C=y(E);if(C!=="left"&&C!=="center"&&C!=="right"&&C!=="end"&&C!=="start")throw new Error("Expected left, right, center, start, or end for text-align");b.setTextAlign(C)}if(x){const C=x(E);if(C!=="left"&&C!=="right"&&C!=="center")throw new Error("Expected left, right, or center for text-justify");b.setJustify(C)}if(w){const C=w(E);if(C!=="bottom"&&C!=="top"&&C!=="middle"&&C!=="alphabetic"&&C!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");b.setTextBaseline(C)}return v&&b.setPadding(v(E)),b}}function Z7(e,t){return"icon-src"in e?q7(e,t):"shape-points"in e?K7(e,t):"circle-radius"in e?J7(e,t):null}function q7(e,t){const n="icon-",i=n+"src",r=XM(e[i],i),s=Id(e,n+"anchor",t),o=gm(e,n+"scale",t),a=vn(e,n+"opacity",t),l=Id(e,n+"displacement",t),c=vn(e,n+"rotation",t),u=Su(e,n+"rotate-with-view",t),f=Qv(e,n+"anchor-origin"),h=t2(e,n+"anchor-x-units"),d=t2(e,n+"anchor-y-units"),g=n9(e,n+"color"),m=t9(e,n+"cross-origin"),_=e9(e,n+"offset"),p=Qv(e,n+"offset-origin"),y=Ya(e,n+"width"),x=Ya(e,n+"height"),w=Q7(e,n+"size"),v=iw(e,n+"declutter"),b=new Md({src:r,anchorOrigin:f,anchorXUnits:h,anchorYUnits:d,color:g,crossOrigin:m,offset:_,offsetOrigin:p,height:x,width:y,size:w,declutterMode:v});return function(E){return a&&b.setOpacity(a(E)),l&&b.setDisplacement(l(E)),c&&b.setRotation(c(E)),u&&b.setRotateWithView(u(E)),o&&b.setScale(o(E)),s&&b.setAnchor(s(E)),b}}function K7(e,t){const n="shape-",i=n+"points",r=HM(e[i],i),s=Tu(e,n,t),o=Cu(e,n,t),a=gm(e,n+"scale",t),l=Id(e,n+"displacement",t),c=vn(e,n+"rotation",t),u=Su(e,n+"rotate-with-view",t),f=Ya(e,n+"radius"),h=Ya(e,n+"radius1"),d=Ya(e,n+"radius2"),g=Ya(e,n+"angle"),m=iw(e,n+"declutter-mode"),_=new AM({points:r,radius:f,radius1:h,radius2:d,angle:g,declutterMode:m});return function(p){return s&&_.setFill(s(p)),o&&_.setStroke(o(p)),l&&_.setDisplacement(l(p)),c&&_.setRotation(c(p)),u&&_.setRotateWithView(u(p)),a&&_.setScale(a(p)),_}}function J7(e,t){const n="circle-",i=Tu(e,n,t),r=Cu(e,n,t),s=vn(e,n+"radius",t),o=gm(e,n+"scale",t),a=Id(e,n+"displacement",t),l=vn(e,n+"rotation",t),c=Su(e,n+"rotate-with-view",t),u=iw(e,n+"declutter-mode"),f=new LM({radius:5,declutterMode:u});return function(h){return s&&f.setRadius(s(h)),i&&f.setFill(i(h)),r&&f.setStroke(r(h)),a&&f.setDisplacement(a(h)),l&&f.setRotation(l(h)),c&&f.setRotateWithView(c(h)),o&&f.setScale(o(h)),f}}function vn(e,t,n){if(!(t in e))return;const i=Zs(e[t],At,n);return function(r){return HM(i(r),t)}}function xs(e,t,n){if(!(t in e))return null;const i=Zs(e[t],El,n);return function(r){return XM(i(r),t)}}function Su(e,t,n){if(!(t in e))return null;const i=Zs(e[t],qe,n);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function UM(e,t,n){if(!(t in e))return null;const i=Zs(e[t],nw|El,n);return function(r){return jM(i(r),t)}}function VM(e,t,n){if(!(t in e))return null;const i=Zs(e[t],nf,n);return function(r){return rf(i(r),t)}}function Id(e,t,n){if(!(t in e))return null;const i=Zs(e[t],nf,n);return function(r){const s=rf(i(r),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function gm(e,t,n){if(!(t in e))return null;const i=Zs(e[t],nf|At,n);return function(r){return i9(i(r),t)}}function Ya(e,t){const n=e[t];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}}function Q7(e,t){const n=e[t];if(n!==void 0){if(typeof n=="number")return Fn(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${t}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return n}}function t9(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}}function Qv(e,t){const n=e[t];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function t2(e,t){const n=e[t];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return n}}function e9(e,t){const n=e[t];if(n!==void 0)return rf(n,t)}function iw(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function n9(e,t){const n=e[t];if(n!==void 0)return jM(n,t)}function rf(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const n=e.length;for(let i=0;i<n;++i)if(typeof e[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function XM(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function HM(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function jM(e,t){if(typeof e=="string")return e;const n=rf(e,t),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return n}function i9(e,t){if(typeof e=="number")return e;const n=rf(e,t);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return n}const e2={RENDER_ORDER:"renderOrder"};class r9 extends um{constructor(t){t=t||{};const n=Object.assign({},t);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(e2.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new ew(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(e2.RENDER_ORDER,t)}setStyle(t){this.style_=s9(t),this.styleFunction_=t===null?void 0:K$(this.style_),this.changed()}}function s9(e){if(e===void 0)return J$;if(!e)return null;if(typeof e=="function"||e instanceof Bo)return e;if(!Array.isArray(e))return Jv([e]);if(e.length===0)return[];const t=e.length,n=e[0];if(n instanceof Bo){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!(o instanceof Bo))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in n){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return X7(r)}return Jv(e)}const o9=r9;class a9 extends tw{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,s=r.resolution,o=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(n.extent!==void 0&&(l=el(l,Rr(n.extent,r.projection))),!a[Me.ANIMATING]&&!a[Me.INTERACTING]&&!Vl(l))if(o){const c=r.projection,u=o.getImage(l,s,i,c);u&&(this.loadImage(u)?this.image_=u:u.getState()===Rt.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Ee(n.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!qu(s,r))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=Qt(o),c=Math.floor(a.width*((r[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=zn(o),f=Math.floor(a.height*((o[3]-r[1])/u));return f<0||f>=a.height?null:this.getImageData(a,c,f)}renderFrame(t,n){const i=this.image_,r=i.getExtent(),s=i.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=i.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],u=t.pixelRatio,f=t.viewState,h=f.center,d=f.resolution,g=u*o/(d*l),m=u*a/(d*l),_=t.extent,p=f.resolution,y=f.rotation,x=Math.round(Qt(_)/p*u),w=Math.round(zn(_)/p*u);Mi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,y,-x/2,-w/2),im(this.inversePixelTransform,this.pixelTransform);const v=b1(this.pixelTransform);this.useContainer(n,v,this.getBackground(t));const b=this.context,E=b.canvas;E.width!=x||E.height!=w?(E.width=x,E.height=w):this.containerReused||b.clearRect(0,0,x,w);let C=!1,I=!0;if(c.extent){const O=Rr(c.extent,f.projection);I=fn(O,t.extent),C=I&&!Rs(O,t.extent),C&&this.clipUnrotated(b,t,O)}const S=i.getImage(),R=Mi(this.tempTransform,x/2,w/2,g,m,0,l*(r[0]-h[0])/o,l*(h[1]-r[3])/a);this.renderedResolution=a*u/l;const M=S.width*R[0],k=S.height*R[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,t),I&&M>=.5&&k>=.5){const O=R[4],A=R[5],P=c.opacity;let N;P!==1&&(N=b.globalAlpha,b.globalAlpha=P),b.drawImage(S,0,0,+S.width,+S.height,O,A,M,k),P!==1&&(b.globalAlpha=N)}return this.postRender(b,t),C&&b.restore(),b.imageSmoothingEnabled=!0,v!==E.style.transform&&(E.style.transform=v),this.container}}const l9=a9,sf={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ch=[sf.FILL],Ls=[sf.STROKE],Mo=[sf.BEGIN_PATH],n2=[sf.CLOSE_PATH],pt=sf;class c9{drawCustom(t,n,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,n){}drawFeature(t,n){}drawGeometryCollection(t,n){}drawLineString(t,n){}drawMultiLineString(t,n){}drawMultiPoint(t,n){}drawMultiPolygon(t,n){}drawPoint(t,n){}drawPolygon(t,n){}drawText(t,n){}setFillStrokeStyle(t,n){}setImageStyle(t,n){}setTextStyle(t,n){}}const ZM=c9;class u9 extends ZM{constructor(t,n,i,r){super(),this.tolerance=t,this.maxExtent=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})}appendFlatPointCoordinates(t,n){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=t.length;a<l;a+=n)r[0]=t[a],r[1]=t[a+1],qu(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(t,n,i,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=r);let u=t[n],f=t[n+1];const h=this.tmpCoordinate_;let d=!0,g,m,_;for(g=n+r;g<i;g+=r)h[0]=t[g],h[1]=t[g+1],_=fy(c,h),_!==m?(d&&(a[l++]=u,a[l++]=f,d=!1),a[l++]=h[0],a[l++]=h[1]):_===Ge.INTERSECTING?(a[l++]=h[0],a[l++]=h[1],d=!1):d=!0,u=h[0],f=h[1],m=_;return(s&&d||g===n+r)&&(a[l++]=u,a[l++]=f),l}drawCustomCoordinates_(t,n,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(t,n,l,r,!1,!1);s.push(c),n=l}return n}drawCustom(t,n,i,r){this.beginGeometry(t,n);const s=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,c,u,f,h;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),f=[];const d=t.getEndss();h=0;for(let g=0,m=d.length;g<m;++g){const _=[];h=this.drawCustomCoordinates_(l,h,d[g],o,_),f.push(_)}this.instructions.push([pt.CUSTOM,a,f,t,i,_y]),this.hitDetectionInstructions.push([pt.CUSTOM,a,f,t,r||i,_y]);break;case"Polygon":case"MultiLineString":u=[],l=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(l,0,t.getEnds(),o,u),this.instructions.push([pt.CUSTOM,a,u,t,i,wu]),this.hitDetectionInstructions.push([pt.CUSTOM,a,u,t,r||i,wu]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([pt.CUSTOM,a,c,t,i,Is]),this.hitDetectionInstructions.push([pt.CUSTOM,a,c,t,r||i,Is]);break;case"MultiPoint":l=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([pt.CUSTOM,a,c,t,i,Is]),this.hitDetectionInstructions.push([pt.CUSTOM,a,c,t,r||i,Is]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([pt.CUSTOM,a,c,t,i]),this.hitDetectionInstructions.push([pt.CUSTOM,a,c,t,r||i]);break}this.endGeometry(n)}beginGeometry(t,n){this.beginGeometryInstruction1_=[pt.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[pt.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let n;const i=t.length;let r,s,o=-1;for(n=0;n<i;++n)r=t[n],s=r[0],s==pt.END_GEOMETRY?o=n:s==pt.BEGIN_GEOMETRY&&(r[2]=n,vN(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(t,n){const i=this.state;if(t){const r=t.getColor();i.fillStyle=ji(r||bn)}else i.fillStyle=void 0;if(n){const r=n.getColor();i.strokeStyle=ji(r||bu);const s=n.getLineCap();i.lineCap=s!==void 0?s:bl;const o=n.getLineDash();i.lineDash=o?o.slice():Nr;const a=n.getLineDashOffset();i.lineDashOffset=a||Dr;const l=n.getLineJoin();i.lineJoin=l!==void 0?l:vl;const c=n.getWidth();i.lineWidth=c!==void 0?c:Eu;const u=n.getMiterLimit();i.miterLimit=u!==void 0?u:xu,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const n=t.fillStyle,i=[pt.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[pt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,n){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,n){const i=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||s!=t.currentLineDash&&!js(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[pt.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=zS(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;v1(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const of=u9;class f9 extends of{constructor(t,n,i,r){super(t,n,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([pt.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pt.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([pt.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pt.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,n){const i=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}}const h9=f9;class d9 extends of{constructor(t,n,i,r){super(t,n,i,r)}drawFlatCoordinates_(t,n,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),a=[pt.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nr,Dr],Mo);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Ls),this.endGeometry(n)}drawMultiLineString(t,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nr,Dr],Mo);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,f=o.length;u<f;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(Ls),this.endGeometry(n)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Ls),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Ls),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Mo)}}const g9=d9;class m9 extends of{constructor(t,n,i,r){super(t,n,i,r)}drawFlatCoordinatess_(t,n,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(Mo),this.hitDetectionInstructions.push(Mo);for(let c=0;c<l;++c){const u=i[c],f=this.coordinates.length,h=this.appendFlatLineCoordinates(t,n,u,r,!0,!a),d=[pt.MOVE_TO_LINE_TO,f,h];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(n2),this.hitDetectionInstructions.push(n2)),n=u}return o&&(this.instructions.push(ch),this.hitDetectionInstructions.push(ch)),a&&(this.instructions.push(Ls),this.hitDetectionInstructions.push(Ls)),n}drawCircle(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pt.SET_FILL_STYLE,bn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nr,Dr]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[pt.CIRCLE,l];this.instructions.push(Mo,c),this.hitDetectionInstructions.push(Mo,c),i.fillStyle!==void 0&&(this.instructions.push(ch),this.hitDetectionInstructions.push(ch)),i.strokeStyle!==void 0&&(this.instructions.push(Ls),this.hitDetectionInstructions.push(Ls)),this.endGeometry(n)}drawPolygon(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pt.SET_FILL_STYLE,bn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nr,Dr]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(n)}drawMultiPolygon(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([pt.SET_FILL_STYLE,bn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nr,Dr]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,f=o.length;u<f;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const n=this.coordinates;for(let i=0,r=n.length;i<r;++i)n[i]=mo(n[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const i2=m9;function p9(e,t,n,i,r){const s=[];let o=n,a=0,l=t.slice(n,2);for(;a<e&&o+r<i;){const[c,u]=l.slice(-2),f=t[o+r],h=t[o+r+1],d=Math.sqrt((f-c)*(f-c)+(h-u)*(h-u));if(a+=d,a>=e){const g=(e-a+d)/d,m=kn(c,f,g),_=kn(u,h,g);l.push(m,_),s.push(l),l=[m,_],a==e&&(o+=r),a=0}else if(a<e)l.push(t[o+r],t[o+r+1]),o+=r;else{const g=d-a,m=kn(c,f,g/d),_=kn(u,h,g/d);l.push(m,_),s.push(l),l=[m,_],a=0,o+=r}}return a>0&&s.push(l),s}function y9(e,t,n,i,r){let s=n,o=n,a=0,l=0,c=n,u,f,h,d,g,m,_,p,y,x;for(f=n;f<i;f+=r){const w=t[f],v=t[f+1];g!==void 0&&(y=w-g,x=v-m,d=Math.sqrt(y*y+x*x),_!==void 0&&(l+=h,u=Math.acos((_*y+p*x)/(h*d)),u>e&&(l>a&&(a=l,s=c,o=f),l=0,c=f-r)),h=d,_=y,p=x),g=w,m=v}return l+=d,l>a?[c,f]:[s,o]}const Ad={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class _9 extends of{constructor(t,n,i,r){super(t,n,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[bn]={fillStyle:bn},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,n){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=t.getType();let c=null,u=t.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!fn(this.getBufferedMaxExtent(),t.getExtent()))return;let f;if(c=t.getFlatCoordinates(),l=="LineString")f=[c.length];else if(l=="MultiLineString")f=t.getEnds();else if(l=="Polygon")f=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=t.getEndss();f=[];for(let _=0,p=m.length;_<p;++_)f.push(m[_][0])}this.beginGeometry(t,n);const h=s.repeat,d=h?void 0:s.textAlign;let g=0;for(let m=0,_=f.length;m<_;++m){let p;h?p=p9(h*this.resolution,c,g,f[m],u):p=[c.slice(g,f[m])];for(let y=0,x=p.length;y<x;++y){const w=p[y];let v=0,b=w.length;if(d==null){const C=y9(s.maxAngle,w,0,w.length,2);v=C[0],b=C[1]}for(let C=v;C<b;C+=u)o.push(w[C],w[C+1]);const E=o.length;g=f[m],this.drawChars_(a,E),a=E}}this.endGeometry(n)}else{let f=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),u=2;break;case"Polygon":c=t.getFlatInteriorPoint(),s.overflow||f.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const p=t.getFlatInteriorPoints();c=[];for(let y=0,x=p.length;y<x;y+=3)s.overflow||f.push(p[y+2]/this.resolution),c.push(p[y],p[y+1]);if(c.length===0)return;u=2;break}const h=this.appendFlatPointCoordinates(c,u);if(h===a)return;if(f&&(h-a)/2!==c.length/u){let p=a/2;f=f.filter((y,x)=>{const w=o[(p+x)*2]===c[x*u]&&o[(p+x)*2+1]===c[x*u+1];return w||--p,w})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);let d=s.padding;if(d!=So&&(s.scale[0]<0||s.scale[1]<0)){let p=s.padding[0],y=s.padding[1],x=s.padding[2],w=s.padding[3];s.scale[0]<0&&(y=-y,w=-w),s.scale[1]<0&&(p=-p,x=-x),d=[p,y,x,w]}const g=this.pixelRatio;this.instructions.push([pt.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,d==So?So:d.map(function(p){return p*g}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const m=1/g,_=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=bn,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([pt.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,d,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?bn:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),s.backgroundFill&&(this.state.fillStyle=_,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||vu,justify:n.justify,textBaseline:n.textBaseline||wd,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,n){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Ad[r.textBaseline],u=this.textOffsetY_*l,f=this.text_,h=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([pt.DRAW_CHARS,t,n,c,r.overflow,a,r.maxAngle,l,u,s,h*l,f,o,1]),this.hitDetectionInstructions.push([pt.DRAW_CHARS,t,n,c,r.overflow,a&&bn,r.maxAngle,l,u,s,h*l,f,o,1/l])}setTextStyle(t,n){let i,r,s;if(!t)this.text_="";else{const o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=ji(o.getColor()||bn)):(r=null,this.textFillState_=r);const a=t.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=a.getLineDash(),m=a.getLineDashOffset(),_=a.getWidth(),p=a.getMiterLimit();s.lineCap=a.getLineCap()||bl,s.lineDash=g?g.slice():Nr,s.lineDashOffset=m===void 0?Dr:m,s.lineJoin=a.getLineJoin()||vl,s.lineWidth=_===void 0?Eu:_,s.miterLimit=p===void 0?xu:p,s.strokeStyle=ji(a.getColor()||bu)}i=this.textState_;const l=t.getFont()||pM;h8(l);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||wd,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||So,i.scale=c===void 0?[1,1]:c;const u=t.getOffsetX(),f=t.getOffsetY(),h=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=h===void 0?!1:h,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Vt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+Vt(r.fillStyle):""}this.declutterImageWithText_=n}}const w9={Circle:i2,Default:of,Image:h9,LineString:g9,Polygon:i2,Text:_9};class x9{constructor(t,n,i,r){this.tolerance_=t,this.maxExtent_=n,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const n in this.buildersByZIndex_){t[n]=t[n]||{};const i=this.buildersByZIndex_[n];for(const r in i){const s=i[r].finish();t[n][r]=s}}return t}getBuilder(t,n){const i=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[n];if(s===void 0){const o=w9[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[n]=s}return s}}const r2=x9;function b9(e,t,n,i,r,s,o,a,l,c,u,f){let h=e[t],d=e[t+1],g=0,m=0,_=0,p=0;function y(){g=h,m=d,t+=i,h=e[t],d=e[t+1],p+=_,_=Math.sqrt((h-g)*(h-g)+(d-m)*(d-m))}do y();while(t<n-i&&p+_<s);let x=_===0?0:(s-p)/_;const w=kn(g,h,x),v=kn(m,d,x),b=t-i,E=p,C=s+a*l(c,r,u);for(;t<n-i&&p+_<C;)y();x=_===0?0:(C-p)/_;const I=kn(g,h,x),S=kn(m,d,x);let R;if(f){const P=[w,v,I,S];eM(P,0,4,2,f,P,P),R=P[0]>P[2]}else R=w>I;const M=Math.PI,k=[],O=b+i===t;t=b,_=0,p=E,h=e[t],d=e[t+1];let A;if(O){y(),A=Math.atan2(d-m,h-g),R&&(A+=A>0?-M:M);const P=(I+w)/2,N=(S+v)/2;return k[0]=[P,N,(C-s)/2,A,r],k}r=r.replace(/\n/g," ");for(let P=0,N=r.length;P<N;){y();let G=Math.atan2(d-m,h-g);if(R&&(G+=G>0?-M:M),A!==void 0){let nt=G-A;if(nt+=nt>M?-2*M:nt<-M?2*M:0,Math.abs(nt)>o)return null}A=G;const H=P;let U=0;for(;P<N;++P){const nt=R?N-P-1:P,st=a*l(c,r[nt],u);if(t+i<n&&p+_<s+U+st/2)break;U+=st}if(P===H)continue;const Z=R?r.substring(N-H,N-P):r.substring(H,P);x=_===0?0:(s+U/2-p)/_;const z=kn(g,h,x),Q=kn(m,d,x);k.push([z,Q,U/2,G,Z]),s+=U}return k}const Ta=oi(),ls=[],dr=[],gr=[],cs=[];function s2(e){return e[3].declutterBox}const o2=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function B0(e,t){return t==="start"?t=o2.test(e)?"right":"left":t==="end"&&(t=o2.test(e)?"left":"right"),Ad[t]}function v9(e,t,n){return n>0&&e.push(`
`,""),e.push(t,""),e}class E9{constructor(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Ci(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(t,n,i,r){const s=t+n+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],f=Array.isArray(t),h=l.justify?Ad[l.justify]:B0(Array.isArray(t)?t[0]:t,l.textAlign||vu),d=r&&o.lineWidth?o.lineWidth:0,g=f?t:t.split(`
`).reduce(v9,[]),{width:m,height:_,widths:p,heights:y,lineWidths:x}=g8(l,g),w=m+d,v=[],b=(w+2)*u[0],E=(_+d)*u[1],C={width:b<0?Math.floor(b):Math.ceil(b),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:v};(u[0]!=1||u[1]!=1)&&v.push("scale",u),r&&(v.push("strokeStyle",o.strokeStyle),v.push("lineWidth",d),v.push("lineCap",o.lineCap),v.push("lineJoin",o.lineJoin),v.push("miterLimit",o.miterLimit),v.push("setLineDash",[o.lineDash]),v.push("lineDashOffset",o.lineDashOffset)),i&&v.push("fillStyle",a.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");const I=.5-h;let S=h*w+I*d;const R=[],M=[];let k=0,O=0,A=0,P=0,N;for(let G=0,H=g.length;G<H;G+=2){const U=g[G];if(U===`
`){O+=k,k=0,S=h*w+I*d,++P;continue}const Z=g[G+1]||l.font;Z!==N&&(r&&R.push("font",Z),i&&M.push("font",Z),N=Z),k=Math.max(k,y[A]);const z=[U,S+I*p[A]+h*(p[A]-x[P]),.5*(d+k)+O];S+=p[A],r&&R.push("strokeText",z),i&&M.push("fillText",z),++A}return Array.prototype.push.apply(v,R),Array.prototype.push.apply(v,M),this.labels_[s]=C,C}replayTextBackground_(t,n,i,r,s,o,a){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,n),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,n,i,r,s,o,a,l,c,u,f,h,d,g,m,_){a*=h[0],l*=h[1];let p=i-a,y=r-l;const x=s+c>t?t-c:s,w=o+u>n?n-u:o,v=g[3]+x*h[0]+g[1],b=g[0]+w*h[1]+g[2],E=p-g[3],C=y-g[0];(m||f!==0)&&(ls[0]=E,cs[0]=E,ls[1]=C,dr[1]=C,dr[0]=E+v,gr[0]=dr[0],gr[1]=C+b,cs[1]=gr[1]);let I;return f!==0?(I=Mi(Ci(),i,r,1,1,f,-i,-r),Ee(I,ls),Ee(I,dr),Ee(I,gr),Ee(I,cs),Gs(Math.min(ls[0],dr[0],gr[0],cs[0]),Math.min(ls[1],dr[1],gr[1],cs[1]),Math.max(ls[0],dr[0],gr[0],cs[0]),Math.max(ls[1],dr[1],gr[1],cs[1]),Ta)):Gs(Math.min(E,E+v),Math.min(C,C+b),Math.max(E,E+v),Math.max(C,C+b),Ta),d&&(p=Math.round(p),y=Math.round(y)),{drawImageX:p,drawImageY:y,drawImageW:x,drawImageH:w,originX:c,originY:u,declutterBox:{minX:Ta[0],minY:Ta[1],maxX:Ta[2],maxY:Ta[3],value:_},canvasTransform:I,scale:h}}replayImageOrLabel_(t,n,i,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=t.canvas,f=a?a[2]*r.scale[0]/2:0;return c.minX-f<=u.width/n&&c.maxX+f>=0&&c.minY-f<=u.height/n&&c.maxY+f>=0&&(l&&this.replayTextBackground_(t,ls,dr,gr,cs,o,a),m8(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){const n=Ee(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.lineDashOffset=n[7],t.setLineDash(n[6])}drawLabelWithPointPlacement_(t,n,i,r){const s=this.textStates[n],o=this.createLabel(t,n,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=B0(Array.isArray(t)?t[0]:t,s.textAlign||vu),u=Ad[s.textBaseline||wd],f=a&&a.lineWidth?a.lineWidth:0,h=o.width/l-2*s.scale[0],d=c*h+2*(.5-c)*f,g=u*o.height/l+2*(.5-u)*f;return{label:o,anchorX:d,anchorY:g}}execute_(t,n,i,r,s,o,a,l){let c;this.pixelCoordinates_&&js(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Wo(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),FN(this.renderedTransform_,i));let u=0;const f=r.length;let h=0,d,g,m,_,p,y,x,w,v,b,E,C,I=0,S=0,R=null,M=null;const k=this.coordinateCache_,O=this.viewRotation_,A=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,P={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:O},N=this.instructions!=r||this.overlaps?0:200;let G,H,U,Z;for(;u<f;){const z=r[u];switch(z[0]){case pt.BEGIN_GEOMETRY:G=z[1],Z=z[3],G.getGeometry()?a!==void 0&&!fn(a,Z.getExtent())?u=z[2]+1:++u:u=z[2];break;case pt.BEGIN_PATH:I>N&&(this.fill_(t),I=0),S>N&&(t.stroke(),S=0),!I&&!S&&(t.beginPath(),_=NaN,p=NaN),++u;break;case pt.CIRCLE:h=z[1];const nt=c[h],st=c[h+1],ot=c[h+2],$=c[h+3],Y=ot-nt,D=$-st,V=Math.sqrt(Y*Y+D*D);t.moveTo(nt+V,st),t.arc(nt,st,V,0,2*Math.PI,!0),++u;break;case pt.CLOSE_PATH:t.closePath(),++u;break;case pt.CUSTOM:h=z[1],d=z[2];const K=z[3],T=z[4],L=z.length==6?z[5]:void 0;P.geometry=K,P.feature=G,u in k||(k[u]=[]);const F=k[u];L?L(c,h,d,2,F):(F[0]=c[h],F[1]=c[h+1],F.length=2),T(F,P),++u;break;case pt.DRAW_IMAGE:h=z[1],d=z[2],w=z[3],g=z[4],m=z[5];let W=z[6];const B=z[7],X=z[8],rt=z[9],J=z[10];let tt=z[11];const q=z[12];let ct=z[13];const at=z[14],ut=z[15];if(!w&&z.length>=20){v=z[19],b=z[20],E=z[21],C=z[22];const Ln=this.drawLabelWithPointPlacement_(v,b,E,C);w=Ln.label,z[3]=w;const wa=z[23];g=(Ln.anchorX-wa)*this.pixelRatio,z[4]=g;const Vn=z[24];m=(Ln.anchorY-Vn)*this.pixelRatio,z[5]=m,W=w.height,z[6]=W,ct=w.width,z[13]=ct}let ft;z.length>25&&(ft=z[25]);let bt,Lt,Et;z.length>17?(bt=z[16],Lt=z[17],Et=z[18]):(bt=So,Lt=!1,Et=!1),J&&A?tt+=O:!J&&!A&&(tt-=O);let jt=0;for(;h<d;h+=2){if(ft&&ft[jt++]<ct/this.pixelRatio)continue;const Ln=this.calculateImageOrLabelDimensions_(w.width,w.height,c[h],c[h+1],ct,W,g,m,X,rt,tt,q,s,bt,Lt||Et,G),wa=[t,n,w,Ln,B,Lt?R:null,Et?M:null];if(l){if(at==="none")continue;if(at==="obstacle"){l.insert(Ln.declutterBox);continue}else{let Vn,ur;if(ut){const On=d-h;if(!ut[On]){ut[On]=wa;continue}if(Vn=ut[On],delete ut[On],ur=s2(Vn),l.collides(ur))continue}if(l.collides(Ln.declutterBox))continue;Vn&&(l.insert(ur),this.replayImageOrLabel_.apply(this,Vn)),l.insert(Ln.declutterBox)}}this.replayImageOrLabel_.apply(this,wa)}++u;break;case pt.DRAW_CHARS:const pe=z[1],ce=z[2],is=z[3],Un=z[4];C=z[5];const rn=z[6],ue=z[7],sn=z[8];E=z[9];const _a=z[10];v=z[11],b=z[12];const db=[z[13],z[13]],_0=this.textStates[b],fc=_0.font,hc=[_0.scale[0]*ue,_0.scale[1]*ue];let dc;fc in this.widths_?dc=this.widths_[fc]:(dc={},this.widths_[fc]=dc);const gb=MM(c,pe,ce,2),mb=Math.abs(hc[0])*Wv(fc,v,dc);if(Un||mb<=gb){const Ln=this.textStates[b].textAlign,wa=(gb-mb)*B0(v,Ln),Vn=b9(c,pe,ce,2,v,wa,rn,Math.abs(hc[0]),Wv,fc,dc,A?0:this.viewRotation_);t:if(Vn){const ur=[];let On,Uf,Vf,yn,Xn;if(E)for(On=0,Uf=Vn.length;On<Uf;++On){Xn=Vn[On],Vf=Xn[4],yn=this.createLabel(Vf,b,"",E),g=Xn[2]+(hc[0]<0?-_a:_a),m=is*yn.height+(.5-is)*2*_a*hc[1]/hc[0]-sn;const fr=this.calculateImageOrLabelDimensions_(yn.width,yn.height,Xn[0],Xn[1],yn.width,yn.height,g,m,0,0,Xn[3],db,!1,So,!1,G);if(l&&l.collides(fr.declutterBox))break t;ur.push([t,n,yn,fr,1,null,null])}if(C)for(On=0,Uf=Vn.length;On<Uf;++On){Xn=Vn[On],Vf=Xn[4],yn=this.createLabel(Vf,b,C,""),g=Xn[2],m=is*yn.height-sn;const fr=this.calculateImageOrLabelDimensions_(yn.width,yn.height,Xn[0],Xn[1],yn.width,yn.height,g,m,0,0,Xn[3],db,!1,So,!1,G);if(l&&l.collides(fr.declutterBox))break t;ur.push([t,n,yn,fr,1,null,null])}l&&l.load(ur.map(s2));for(let fr=0,Lk=ur.length;fr<Lk;++fr)this.replayImageOrLabel_.apply(this,ur[fr])}}++u;break;case pt.END_GEOMETRY:if(o!==void 0){G=z[1];const Ln=o(G,Z);if(Ln)return Ln}++u;break;case pt.FILL:N?I++:this.fill_(t),++u;break;case pt.MOVE_TO_LINE_TO:for(h=z[1],d=z[2],H=c[h],U=c[h+1],y=H+.5|0,x=U+.5|0,(y!==_||x!==p)&&(t.moveTo(H,U),_=y,p=x),h+=2;h<d;h+=2)H=c[h],U=c[h+1],y=H+.5|0,x=U+.5|0,(h==d-2||y!==_||x!==p)&&(t.lineTo(H,U),_=y,p=x);++u;break;case pt.SET_FILL_STYLE:R=z,this.alignFill_=z[2],I&&(this.fill_(t),I=0,S&&(t.stroke(),S=0)),t.fillStyle=z[1],++u;break;case pt.SET_STROKE_STYLE:M=z,S&&(t.stroke(),S=0),this.setStrokeStyle_(t,z),++u;break;case pt.STROKE:N?S++:t.stroke(),++u;break;default:++u;break}}I&&this.fill_(t),S&&t.stroke()}execute(t,n,i,r,s,o){this.viewRotation_=r,this.execute_(t,n,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,n,i,r,s){return this.viewRotation_=i,this.execute_(t,1,n,this.hitDetectionInstructions,!0,r,s)}}const T9=E9,Y0=["Polygon","Circle","LineString","Image","Text","Default"];class C9{constructor(t,n,i,r,s,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ci(),this.createExecutors_(s)}clip(t,n){const i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const n in t){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const r=t[n];for(const s in r){const o=r[s];i[s]=new T9(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let r=0,s=t.length;r<s;++r)if(t[r]in i)return!0}return!1}forEachFeatureAtCoordinate(t,n,i,r,s,o){r=Math.round(r);const a=r*2+1,l=Mi(this.hitDetectionTransform_,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=gn(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let f;this.renderBuffer_!==void 0&&(f=oi(),tu(f,t),v1(f,n*(this.renderBuffer_+r),f));const h=S9(r);let d;function g(v,b){const E=u.getImageData(0,0,a,a).data;for(let C=0,I=h.length;C<I;C++)if(E[h[C]]>0){if(!o||d!=="Image"&&d!=="Text"||o.includes(v)){const S=(h[C]-3)/4,R=r-S%a,M=r-(S/a|0),k=s(v,b,R*R+M*M);if(k)return k}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort($s);let _,p,y,x,w;for(_=m.length-1;_>=0;--_){const v=m[_].toString();for(y=this.executorsByZIndex_[v],p=Y0.length-1;p>=0;--p)if(d=Y0[p],x=y[d],x!==void 0&&(w=x.executeHitDetection(u,l,i,g,f),w))return w}}getClipCoords(t){const n=this.maxExtent_;if(!n)return null;const i=n[0],r=n[1],s=n[2],o=n[3],a=[i,r,i,o,s,o,s,r];return Wo(a,0,8,2,t,a),a}isEmpty(){return _l(this.executorsByZIndex_)}execute(t,n,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort($s),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||Y0;let c,u,f,h,d,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(d=this.executorsByZIndex_[m],f=0,h=o.length;f<h;++f){const _=o[f];g=d[_],g!==void 0&&g.execute(t,n,i,r,s,a)}}this.maxExtent_&&t.restore()}}const U0={};function S9(e){if(U0[e]!==void 0)return U0[e];const t=e*2+1,n=e*e,i=new Array(n+1);for(let s=0;s<=e;++s)for(let o=0;o<=e;++o){const a=s*s+o*o;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((e+s)*t+(e+o))*4+3),s>0&&l.push(((e-s)*t+(e+o))*4+3),o>0&&(l.push(((e+s)*t+(e-o))*4+3),s>0&&l.push(((e-s)*t+(e-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return U0[e]=r,r}const a2=C9;class M9 extends ZM{constructor(t,n,i,r,s,o,a){super(),this.context_=t,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.transformRotation_=r?am(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ci()}drawImages_(t,n,i,r){if(!this.image_)return;const s=Wo(t,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,f=s.length;u<f;u+=2){const h=s[u]-this.imageAnchorX_,d=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=h+this.imageAnchorX_,m=d+this.imageAnchorY_;Mi(a,g,m,1,1,c,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,n,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Wo(t,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=r){const l=s[n]+this.textOffsetX_,c=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(t,n,i,r,s){const o=this.context_,a=Wo(t,n,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(t,n,i,r){for(let s=0,o=i.length;s<o;++s)n=this.moveToLineTo_(t,n,i[s],r,!0);return n}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!fn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=FD(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,n){const i=n.getGeometryFunction()(t);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(t){const n=t.getGeometriesArray();for(let i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!fn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getExtent();if(fn(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=t.getFlatCoordinates();let s=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!fn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!fn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getOrientedFlatCoordinates();let r=0;const s=t.getEndss(),o=t.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(i,r,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(t){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),js(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset,n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const n=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:vu;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,n){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:ji(i||bn)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=s||Nr;this.strokeState_={lineCap:r!==void 0?r:bl,lineDash:this.pixelRatio_===1?u:u.map(f=>f*this.pixelRatio_),lineDashOffset:(o||Dr)*this.pixelRatio_,lineJoin:a!==void 0?a:vl,lineWidth:(l!==void 0?l:Eu)*this.pixelRatio_,miterLimit:c!==void 0?c:xu,strokeStyle:ji(i||bu)}}}setImageStyle(t){let n;if(!t||!(n=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(t){if(!t)this.text_="";else{const n=t.getFill();if(!n)this.textFillState_=null;else{const d=n.getColor();this.textFillState_={fillStyle:ji(d||bn)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const d=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),_=i.getLineDashOffset(),p=i.getLineJoin(),y=i.getWidth(),x=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:bl,lineDash:m||Nr,lineDashOffset:_||Dr,lineJoin:p!==void 0?p:vl,lineWidth:y!==void 0?y:Eu,miterLimit:x!==void 0?x:xu,strokeStyle:ji(d||bu)}}const r=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),u=t.getText(),f=t.getTextAlign(),h=t.getTextBaseline();this.textState_={font:r!==void 0?r:pM,textAlign:f!==void 0?f:vu,textBaseline:h!==void 0?h:wd},this.text_=u!==void 0?Array.isArray(u)?u.reduce((d,g,m)=>d+=m%2?" ":g,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const R9=M9,Ui=.5;function I9(e,t,n,i,r,s,o){const a=e[0]*Ui,l=e[1]*Ui,c=gn(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,f=new R9(c,Ui,r,null,o),h=n.length,d=Math.floor((256*256*256-1)/h),g={};for(let _=1;_<=h;++_){const p=n[_-1],y=p.getStyleFunction()||i;if(!y)continue;let x=y(p,s);if(!x)continue;Array.isArray(x)||(x=[x]);const v=(_*d).toString(16).padStart(7,"#00000");for(let b=0,E=x.length;b<E;++b){const C=x[b],I=C.getGeometryFunction()(p);if(!I||!fn(r,I.getExtent()))continue;const S=C.clone(),R=S.getFill();R&&R.setColor(v);const M=S.getStroke();M&&(M.setColor(v),M.setLineDash(null)),S.setText(void 0);const k=C.getImage();if(k){const N=k.getImageSize();if(!N)continue;const G=gn(N[0],N[1],void 0,{alpha:!1}),H=G.canvas;G.fillStyle=v,G.fillRect(0,0,H.width,H.height),S.setImage(new Md({img:H,anchor:k.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:k.getOrigin(),opacity:1,size:k.getSize(),scale:k.getScale(),rotation:k.getRotation(),rotateWithView:k.getRotateWithView()}))}const O=S.getZIndex()||0;let A=g[O];A||(A={},g[O]=A,A.Polygon=[],A.Circle=[],A.LineString=[],A.Point=[]);const P=I.getType();if(P==="GeometryCollection"){const N=I.getGeometriesArrayRecursive();for(let G=0,H=N.length;G<H;++G){const U=N[G];A[U.getType().replace("Multi","")].push(U,S)}}else A[P.replace("Multi","")].push(I,S)}}const m=Object.keys(g).map(Number).sort($s);for(let _=0,p=m.length;_<p;++_){const y=g[m[_]];for(const x in y){const w=y[x];for(let v=0,b=w.length;v<b;v+=2){f.setStyle(w[v+1]);for(let E=0,C=t.length;E<C;++E)f.setTransform(t[E]),f.drawGeometry(w[v])}}}return c.getImageData(0,0,u.width,u.height)}function A9(e,t,n){const i=[];if(n){const r=Math.floor(Math.round(e[0])*Ui),s=Math.floor(Math.round(e[1])*Ui),o=(Re(r,0,n.width-1)+Re(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),f=Math.floor((256*256*256-1)/t.length);u&&u%f===0&&i.push(t[u/f-1])}return i}const L9=.5,qM={Point:G9,LineString:D9,Polygon:B9,MultiPoint:W9,MultiLineString:$9,MultiPolygon:z9,GeometryCollection:N9,Circle:P9};function O9(e,t){return parseInt(Vt(e),10)-parseInt(Vt(t),10)}function k9(e,t){const n=Oy(e,t);return n*n}function Oy(e,t){return L9*e/t}function P9(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=e.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function l2(e,t,n,i,r,s,o){let a=!1;const l=n.getImage();if(l){const c=l.getImageState();c==Rt.LOADED||c==Rt.ERROR?l.unlistenImageChange(r):(c==Rt.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return F9(e,t,n,i,s,o),a}function F9(e,t,n,i,r,s){const o=n.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(i,r);if(n.getRenderer())KM(e,a,n,t);else{const c=qM[a.getType()];c(e,a,n,t,s)}}function KM(e,t,n,i){if(t.getType()=="GeometryCollection"){const s=t.getGeometries();for(let o=0,a=s.length;o<a;++o)KM(e,s[o],n,i);return}e.getBuilder(n.getZIndex(),"Default").drawCustom(t,i,n.getRenderer(),n.getHitDetectionRenderer())}function N9(e,t,n,i,r){const s=t.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=qM[s[o].getType()];l(e,s[o],n,i,r)}}function D9(e,t,n,i,r){const s=n.getStroke();if(s){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(r||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function $9(e,t,n,i,r){const s=n.getStroke();if(s){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(r||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function z9(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function G9(e,t,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=Rt.LOADED)return;let l=e;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const f=e.getBuilder(n.getZIndex(),"Image");f.setImageStyle(s,a),f.drawPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(t,i)}if(o&&o.getText()){let l=e;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function W9(e,t,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=Rt.LOADED)return;let l=e;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const f=e.getBuilder(n.getZIndex(),"Image");f.setImageStyle(s,a),f.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(t,i)}if(o&&o.getText()){let l=e;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function B9(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}class Y9 extends tw{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=oi(),this.wrappedRenderedExtent_=oi(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,n,i){const r=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),f=this.getLayer().getSource(),h=n.pixelRatio,d=n.viewHints,g=!(d[Me.ANIMATING]||d[Me.INTERACTING]),m=this.compositionContext_,_=Math.round(n.size[0]*h),p=Math.round(n.size[1]*h),y=f.getWrapX()&&l.canWrapX(),x=y?Qt(u):null,w=y?Math.ceil((r[2]-u[2])/x)+1:1;let v=y?Math.floor((r[0]-u[0])/x):0;do{const b=this.getRenderTransform(o,a,c,h,_,p,v*x);t.execute(m,1,b,c,g,void 0,i)}while(++v<w)}setupCompositionContext_(){if(this.opacity_!==1){const t=gn(this.context.canvas.width,this.context.canvas.height,Hv);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,fm(this.compositionContext_),Hv.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,n){const i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];NN(this.pixelTransform,1/i,1/i),im(this.inversePixelTransform,this.pixelTransform);const s=b1(this.pixelTransform);this.useContainer(n,s,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let u=l&&!l.isEmpty()||c&&!c.isEmpty();if(!u&&!(this.getLayer().hasListener(Ki.PRERENDER)||this.getLayer().hasListener(Ki.POSTRENDER)))return null;const f=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);a.width!=f||a.height!=h?(a.width=f,a.height=h,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,f,h),this.preRender(o,t);const d=t.viewState;d.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let g=!1;if(u&&r.extent&&this.clipping){const m=Rr(r.extent);u=fn(m,t.extent),g=u&&!Rs(m,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,m)}return u&&this.renderWorlds(l,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(n=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Ee(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],f=i[0]*Ui,h=i[1]*Ui;u.push(this.getRenderTransform(r,s,o,Ui,f,h,0).slice());const d=c.getSource(),g=a.getExtent();if(d.getWrapX()&&a.canWrapX()&&!Rs(g,l)){let m=l[0];const _=Qt(g);let p=0,y;for(;m<g[0];)--p,y=_*p,u.push(this.getRenderTransform(r,s,o,Ui,f,h,y).slice()),m+=_;for(p=0,m=l[2];m>g[2];)++p,y=_*p,u.push(this.getRenderTransform(r,s,o,Ui,f,h,y).slice()),m-=_}this.hitDetectionImageData_=I9(i,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}n(A9(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,n,i,r,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(d,g,m){const _=Vt(d),p=c[_];if(p){if(p!==!0&&m<p.distanceSq){if(m===0)return c[_]=!0,s.splice(s.lastIndexOf(p),1),r(d,l,g);p.geometry=g,p.distanceSq=m}}else{if(m===0)return c[_]=!0,r(d,l,g);s.push(c[_]={feature:d,layer:l,geometry:g,distanceSq:m,callback:r})}};let f;const h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some(d=>f=d.forEachFeatureAtCoordinate(t,o,a,i,u,d===this.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(g=>g.value):null)),f}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const r=t.viewHints[Me.ANIMATING],s=t.viewHints[Me.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,u=c.projection,f=c.resolution,h=t.pixelRatio,d=n.getRevision(),g=n.getRenderBuffer();let m=n.getRenderOrder();m===void 0&&(m=O9);const _=c.center.slice(),p=v1(l,g*f),y=p.slice(),x=[p.slice()],w=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!Rs(w,t.extent)){const A=Qt(w),P=Math.max(Qt(p)/2,A);p[0]=w[0]-P,p[2]=w[2]+P,ZS(_,u);const N=US(x[0],u);N[0]<w[0]&&N[2]<w[2]?x.push([N[0]+A,N[1],N[2]+A,N[3]]):N[0]>w[0]&&N[2]>w[2]&&x.push([N[0]-A,N[1],N[2]-A,N[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==d&&this.renderedRenderOrder_==m&&Rs(this.wrappedRenderedExtent_,p))return js(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const v=new r2(Oy(f,h),p,f,h);let b;this.getLayer().getDeclutter()&&(b=new r2(Oy(f,h),p,f,h));let E;for(let A=0,P=x.length;A<P;++A)i.loadFeatures(x[A],f,u);const C=k9(f,h);let I=!0;const S=A=>{let P;const N=A.getStyleFunction()||n.getStyleFunction();if(N&&(P=N(A,f)),P){const G=this.renderFeature(A,C,P,v,E,b);I=I&&!G}},R=QS(p),M=i.getFeaturesInExtent(R);m&&M.sort(m);for(let A=0,P=M.length;A<P;++A)S(M[A]);this.renderedFeatures_=M,this.ready=I;const k=v.finish(),O=new a2(p,f,h,i.getOverlaps(),k,n.getRenderBuffer());return b&&(this.declutterExecutorGroup=new a2(p,f,h,i.getOverlaps(),b.finish(),n.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=d,this.renderedRenderOrder_=m,this.renderedExtent_=y,this.wrappedRenderedExtent_=p,this.renderedCenter_=_,this.renderedProjection_=u,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,n,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=l2(r,t,i[l],n,this.boundHandleStyleImageChange_,s,o)||a;else a=l2(r,t,i,n,this.boundHandleStyleImageChange_,s,o);return a}}const U9=Y9;class V9 extends j${constructor(t,n,i,r,s){const o=s!==void 0?Rt.IDLE:Rt.LOADED;super(t,n,i,o),this.loader_=s!==void 0?s:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=Rt.ERROR):this.state=Rt.LOADED,this.changed()}load(){this.state==Rt.IDLE&&(this.state=Rt.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const X9=V9;function H9(e){return Array.isArray(e)?Math.min(...e):e}class j9 extends l9{constructor(t){super(t),this.vectorRenderer_=new U9(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=Ci(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const n=Ee(this.coordinateToVectorPixelTransform_,Ee(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const n=t.pixelRatio,i=t.viewState,r=i.resolution,s=t.viewHints,o=this.vectorRenderer_;let a=t.extent;this.layerImageRatio_!==1&&(a=a.slice(0),BN(a,this.layerImageRatio_));const l=Qt(a)/r,c=zn(a)/r;if(!s[Me.ANIMATING]&&!s[Me.INTERACTING]&&!Vl(a)){o.useContainer(null,null);const u=o.context,f=t.layerStatesArray[t.layerIndex],h=Object.assign({},f,{opacity:1}),d=Object.assign({},t,{declutterTree:new ew(9),extent:a,size:[l,c],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[h],layerIndex:0});let g=!0;const m=new X9(a,r,n,u.canvas,function(_){o.prepareFrame(d)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(d,null)&&(o.renderDeclutter(d),g=!1),_())});m.addEventListener(vt.CHANGE,()=>{if(m.getState()!==Rt.LOADED)return;this.image_=g?null:m;const _=m.getPixelRatio(),p=H9(m.getResolution())*n/_;this.renderedResolution=p,this.coordinateToVectorPixelTransform_=Mi(this.coordinateToVectorPixelTransform_,l/2,c/2,1/p,-1/p,0,-i.center[0],-i.center[1])}),m.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,n,i,r,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,n,i,r,s):super.forEachFeatureAtCoordinate(t,n,i,r,s)}}const Z9=j9;class q9 extends o9{constructor(t){t=t||{};const n=Object.assign({},t);delete n.imageRatio,super(n),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new Z9(this)}}const K9=q9;class J9{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let n=this.oldest_;for(;n;)t(n.value_,n.key_,this),n=n.newer}get(t,n){const i=this.entries_[t];return Nt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const n=this.entries_[t];return Nt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.key_;return t}getValues(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,n){this.get(t),this.entries_[t].value_=n}set(t,n){Nt(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const Q9=J9;function c2(e,t,n,i){return i!==void 0?(i[0]=e,i[1]=t,i[2]=n,i):[e,t,n]}function mm(e,t,n){return e+"/"+t+"/"+n}function JM(e){return mm(e[0],e[1],e[2])}function tz(e){return e.split("/").map(Number)}function ez(e){return(e[1]<<e[0])+e[2]}function nz(e,t){const n=e[0],i=e[1],r=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;const s=t.getFullTileRange(n);return s?s.containsXY(i,r):!0}class iz extends Q9{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),i=tz(t)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(JM(r.tileCoord)),r.release())})}}const QM=iz,V0={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class rz extends Pi{constructor(t){super(),this.projection=Oe(t.projection),this.attributions_=u2(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,r){n.viewResolver=i,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=u2(t),this.changed()}setState(t){this.state_=t,this.changed()}}function u2(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}const tR=rz,Ca=[0,0,0],us=5;class sz{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Nt(EN(this.resolutions_,function(r,s){return s-r},!0),"`resolutions` must be sorted in descending order");let n;if(!t.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!n)n=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Nt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ua(i)),Nt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Nt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:T1,Nt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(r,s){const o=new $M(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,n,i){const r=this.getTileRangeForExtentAndZ(t,n);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([n,s,a])}forEachTileCoordParentTileRange(t,n,i,r){let s,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=va(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),n(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,n,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,o=t[2]*2;return va(s,s+1,o,o+1,n)}const r=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,n)}return null}getTileRangeForTileCoordAndZ(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const r=t[0],s=t[1],o=t[2];if(n===r)return va(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-r),c=Math.floor(s*l),u=Math.floor(o*l);if(n<r)return va(c,c,u,u,i);const f=Math.floor(l*(s+1))-1,h=Math.floor(l*(o+1))-1;return va(c,f,u,h,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(t,n,i){this.getTileCoordForXYAndZ_(t[0],t[3],n,!1,Ca);const r=Ca[1],s=Ca[2];this.getTileCoordForXYAndZ_(t[2],t[1],n,!0,Ca);const o=Ca[1],a=Ca[2];return va(r,o,s,a,i)}getTileCoordCenter(t){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Fn(this.getTileSize(t[0]),this.tmpSize_);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,n){const i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Fn(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*r,a=i[1]-(t[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return Gs(o,a,l,c,n)}getTileCoordForCoordAndResolution(t,n,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],n,!1,i)}getTileCoordForXYAndResolution_(t,n,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=Fn(this.getTileSize(o),this.tmpSize_);let u=a*(t-l[0])/i/c[0],f=a*(l[1]-n)/i/c[1];return r?(u=th(u,us)-1,f=th(f,us)-1):(u=Qf(u,us),f=Qf(f,us)),c2(o,u,f,s)}getTileCoordForXYAndZ_(t,n,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=Fn(this.getTileSize(i),this.tmpSize_);let c=(t-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return r?(c=th(c,us)-1,u=th(u,us)-1):(c=Qf(c,us),u=Qf(u,us)),c2(i,c,u,s)}getTileCoordForCoordAndZ(t,n,i){return this.getTileCoordForXYAndZ_(t[0],t[1],n,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,n){const i=w1(this.resolutions_,t,n||0);return Re(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,n){return lM(n,0,n.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const n=this.resolutions_.length,i=new Array(n);for(let r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}}const eR=sz;function nR(e){let t=e.getDefaultTileGrid();return t||(t=cz(e),e.setDefaultTileGrid(t)),t}function oz(e,t,n){const i=t[0],r=e.getTileCoordCenter(t),s=rw(n);if(!qu(s,r)){const o=Qt(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,e.getTileCoordForCoordAndZ(r,i)}return t}function az(e,t,n,i){i=i!==void 0?i:"top-left";const r=iR(e,t,n);return new eR({extent:e,origin:GN(e,i),resolutions:r,tileSize:n})}function lz(e){const t=e||{},n=t.extent||Oe("EPSG:3857").getExtent(),i={extent:n,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:iR(n,t.maxZoom,t.tileSize,t.maxResolution)};return new eR(i)}function iR(e,t,n,i){t=t!==void 0?t:tD,n=Fn(n!==void 0?n:T1);const r=zn(e),s=Qt(e);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function cz(e,t,n,i){const r=rw(e);return az(r,t,n,i)}function rw(e){e=Oe(e);let t=e.getExtent();if(!t){const n=180*wl.degrees/e.getMetersPerUnit();t=Gs(-n,-n,n,n)}return t}class uz extends tR{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const n=[256,256];this.tileGrid&&Fn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new QM(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,n){const i=this.getTileCacheForProjection(t);i&&i.expireCache(n)}forEachLoadedTile(t,n,i,r){const s=this.getTileCacheForProjection(t);if(!s)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let f=i.minY;f<=i.maxY;++f)l=mm(n,u,f),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===ht.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const n=t?this.getTileGridForProjection(t):this.tileGrid;return n?n.getResolutions():null}getTile(t,n,i,r,s){return wt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:nR(t)}getTileCacheForProjection(t){const n=this.getProjection();return Nt(n===null||bo(n,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,n,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=Fn(r.getTileSize(t),this.tmpSize);return s==1?o:m$(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=oz(i,t,n)),nz(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,n){const i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,n,i,r){}}class fz extends qr{constructor(t,n){super(t),this.tile=n}}const hz=uz;function dz(e,t){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return e.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],u=t.getFullTileRange(c);return Nt(u,"The {-y} placeholder requires a tile grid with extent"),(u.getHeight()-o[2]-1).toString()})}}function gz(e,t){const n=e.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=dz(e[r],t);return mz(i)}function mz(e){return e.length===1?e[0]:function(t,n,i){if(!t)return;const r=ez(t),s=Go(r,e.length);return e[s](t,n,i)}}function pz(e){const t=[];let n=/\{([a-z])-([a-z])\}/.exec(e);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)t.push(e.replace(n[0],String.fromCharCode(s)));return t}if(n=/\{(\d+)-(\d+)\}/.exec(e),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)t.push(e.replace(n[0],r.toString()));return t}return t.push(e),t}class sw extends hz{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===sw.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const n=t.target,i=Vt(n),r=n.getState();let s;r==ht.LOADING?(this.tileLoadingKeys_[i]=!0,s=V0.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==ht.ERROR?V0.TILELOADERROR:r==ht.LOADED?V0.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new fz(s,n))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(t){const n=pz(t);this.urls=n,this.setUrls(n)}setUrls(t){this.urls=t;const n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(gz(t,this.tileGrid),n):this.setKey(n)}tileUrlFunction(t,n,i){}useTile(t,n,i){const r=mm(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const yz=sw;class _z extends yz{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:wz,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:NM,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,n){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?n:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!bo(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!bo(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||bo(n,t)))return this.tileGrid;const i=Vt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=nR(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const n=this.getProjection();if(!n||bo(n,t))return this.tileCache;const i=Vt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new QM(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,n,i,r,s,o){const a=[t,n,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?ht.IDLE:ht.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(vt.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,n,i,r,s){const o=this.getProjection();if(!o||!s||bo(o,s))return this.getTileInternal(t,n,i,r,o||s);const a=this.getTileCacheForProjection(s),l=[t,n,i];let c;const u=JM(l);a.containsKey(u)&&(c=a.get(u));const f=this.getKey();if(c&&c.key==f)return c;const h=this.getTileGridForProjection(o),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),m=new Ay(o,h,s,d,l,g,this.getTilePixelRatio(r),this.getGutter(),(_,p,y,x)=>this.getTileInternal(_,p,y,x,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=f,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(t,n,i,r,s){let o=null;const a=mm(t,n,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,n,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(t,n,i,r,s,l),c.getState()==ht.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(t,n){const i=Oe(t);if(i){const r=Vt(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function wz(e,t){e.getImage().src=t}const xz=_z;class bz extends xz{constructor(t){t=t||{};const n=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:lz({extent:rw(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const vz=bz,Ez='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Tz extends vz{constructor(t){t=t||{};let n;t.attributions!==void 0?n=t.attributions:n=[Ez];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",r=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}}const Cz=Tz;class Sz{constructor(t){this.rbush_=new ew(t),this.items_={}}insert(t,n){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.rbush_.insert(i),this.items_[Vt(n)]=i}load(t,n){const i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const o=t[r],a=n[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[Vt(a)]=l}this.rbush_.load(i)}remove(t){const n=Vt(t),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(t,n){const i=this.items_[Vt(n)],r=[i.minX,i.minY,i.maxX,i.maxY];_u(r,t)||(this.remove(n),this.insert(t,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(t){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(n).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,n){return this.forEach_(this.getInExtent(t),n)}forEach_(t,n){let i;for(let r=0,s=t.length;r<s;r++)if(i=n(t[r]),i)return i;return i}isEmpty(){return _l(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const n=this.rbush_.toJSON();return Gs(n.minX,n.minY,n.maxX,n.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const n in t.items_)this.items_[n]=t.items_[n]}}const f2=Sz,fi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Mz(e,t){return[[-1/0,-1/0,1/0,1/0]]}let Rz=!1;function Iz(e,t,n,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof e=="function"?e(n,i,r):e,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Rz,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?s(t.readFeatures(u,{extent:n,featureProjection:r}),t.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function h2(e,t){return function(n,i,r,s,o){const a=this;Iz(e,t,n,i,r,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||yl)}}class fs extends qr{constructor(t,n,i){super(t),this.feature=n,this.features=i}}class Az extends tR{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=yl,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Nt(this.format_,"`format` must be set when `url` is set"),this.loader_=h2(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Mz;const n=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=n?new f2:null,this.loadedExtentsRtree_=new f2,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),!n&&i===void 0&&(i=new Hi(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const n=Vt(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);const i=t.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new fs(fi.ADDFEATURE,t))}setupChangeEvents_(t,n){this.featureChangeKeys_[t]=[Pt(n,vt.CHANGE,this.handleFeatureChange_,this),Pt(n,pl.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,n){let i=!0;const r=n.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=n),i&&(Nt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=n),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const n=[],i=[],r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=Vt(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=Vt(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,r),this.hasListener(fi.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new fs(fi.ADDFEATURE,i[s]))}bindFeaturesCollection_(t){let n=!1;this.addEventListener(fi.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(fi.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(xn.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),t.addEventListener(xn.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(ee);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new fs(fi.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,n){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(t))return n(r)})}forEachFeatureInExtent(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(t,n){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const s=n(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),_l(this.nullGeometryFeatures_)||Fr(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n}getFeaturesInExtent(t,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=UN(t,n);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,n){const i=t[0],r=t[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||yu,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),f=a;if(a=u.closestPointXY(i,r,o,a),a<f){s=c;const h=Math.sqrt(a);l[0]=i-h,l[1]=r-h,l[2]=i+h,l[3]=r+h}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const n=this.idIndex_[t.toString()];return n!==void 0?n:null}getFeatureByUid(t){const n=this.uidIndex_[t];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const n=t.target,i=Vt(n),r=n.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new fs(fi.CHANGEFEATURE,n))}hasFeature(t){const n=t.getId();return n!==void 0?n in this.idIndex_:Vt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&_l(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,n,i){const r=this.loadedExtentsRtree_,s=this.strategy_(t,n,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return Rs(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new fs(fi.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new fs(fi.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new fs(fi.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const n=this.loadedExtentsRtree_;let i;n.forEachInExtent(t,function(r){if(_u(r.extent,t))return i=r,!0}),i&&n.remove(i)}removeFeature(t){if(!t)return;const n=Vt(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const n=Vt(t),i=this.featureChangeKeys_[n];if(!i)return;i.forEach(ee),delete this.featureChangeKeys_[n];const r=t.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[n],this.dispatchEvent(new fs(fi.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let n=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],n=!0;break}return n}setLoader(t){this.loader_=t}setUrl(t){Nt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(h2(t,this.format_))}}const Lz=Az,d2=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],g2={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class Oz extends Hl{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=t.keys!==void 0?t.keys:!1,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=t.className!==void 0?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=t.activeClassName!==void 0?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=t.inactiveClassName!==void 0?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const n=t.label!==void 0?t.label:"⤢";this.labelNode_=typeof n=="string"?document.createTextNode(n):n;const i=t.labelActive!==void 0?t.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const r=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(vt.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${ha} ${Qu}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const n=t.getOwnerDocument();if(m2(n))if(p2(n))Pz(n);else{let i;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?kz(i):rR(i)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const n=this.isInFullscreen_;this.isInFullscreen_=p2(t.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(yd(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(g2.ENTERFULLSCREEN)):(yd(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(g2.LEAVEFULLSCREEN)),t.updateSize())}setClassName_(t,n){n?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const n=this.getMap();n&&n.removeChangeListener($e.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener($e.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let i=0,r=t.length;i<r;++i)ee(t[i]);t.length=0;const n=this.getMap();if(n){const i=n.getOwnerDocument();m2(i)?this.element.classList.remove($v):this.element.classList.add($v);for(let r=0,s=d2.length;r<s;++r)t.push(Pt(i,d2[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function m2(e){const t=e.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&e.fullscreenEnabled)}function p2(e){return!!(e.webkitIsFullScreen||e.fullscreenElement)}function rR(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function kz(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():rR(e)}function Pz(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}const Fz=Oz,je={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Nz extends Pi{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+a8,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(je.ELEMENT,this.handleElementChanged),this.addChangeListener(je.MAP,this.handleMapChanged),this.addChangeListener(je.OFFSET,this.handleOffsetChanged),this.addChangeListener(je.POSITION,this.handlePositionChanged),this.addChangeListener(je.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(je.ELEMENT)}getId(){return this.id}getMap(){return this.get(je.MAP)||null}getOffset(){return this.get(je.OFFSET)}getPosition(){return this.get(je.POSITION)}getPositioning(){return this.get(je.POSITIONING)}handleElementChanged(){mM(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(_d(this.element),ee(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Pt(t,Cr.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(je.ELEMENT,t)}setMap(t){this.set(je.MAP,t)}setOffset(t){this.set(je.OFFSET,t)}setPosition(t){this.set(je.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(je.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),s=this.getRect(r,[c8(r),u8(r)]);t=t||{};const o=t.margin===void 0?20:t.margin;if(!Rs(i,s)){const a=s[0]-i[0],l=i[2]-s[2],c=s[1]-i[1],u=i[3]-s[3],f=[0,0];if(a<0?f[0]=a-o:l<0&&(f[0]=Math.abs(l)+o),c<0?f[1]=c-o:u<0&&(f[1]=Math.abs(u)+o),f[0]!==0||f[1]!==0){const h=n.getView().getCenterInternal(),d=n.getPixelFromCoordinateInternal(h);if(!d)return;const g=[d[0]+f[0],d[1]+f[1]],m=t.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(g),duration:m.duration,easing:m.easing})}}}getRect(t,n){const i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+n[0],s+n[1]]}setPositioning(t){this.set(je.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),n=this.getPosition();if(!t||!t.isRendered()||!n){this.setVisible(!1);return}const i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(t,n){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(t[0]+r[0])+"px",a=Math.round(t[1]+r[1])+"px";let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}}const y2=Nz,X0="units",Dz=[1,2,5],wc=25.4/.28;class $z extends Hl{constructor(t){t=t||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:t.render,target:t.target}),this.on,this.once,this.un;const i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+ha,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(X0,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(X0)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(X0,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=t.center,i=t.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=dd(i,t.resolution,n,s);const a=this.minWidth_*(this.dpi_||wc)/wc,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||wc)/wc:void 0;let c=a*o,u="";if(r=="degrees"){const x=wl.degrees;c*=x,c<x/60?(u="″",o*=3600):c<x?(u="′",o*=60):u="°"}else if(r=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(r=="nautical")o/=1852,u="NM";else if(r=="metric")c<.001?(u="μm",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(r=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let f=3*Math.floor(Math.log(a*o)/Math.log(10)),h,d,g,m,_,p;for(;;){g=Math.floor(f/3);const x=Math.pow(10,g);if(h=Dz[(f%3+3)%3]*x,d=Math.round(h/o),isNaN(d)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&d>=l){h=m,d=_,g=p;break}else if(d>=a)break;m=h,_=d,p=g,++f}const y=this.scaleBar_?this.createScaleBar(d,h,u):h.toFixed(g<0?-g:0)+" "+u;this.renderedHTML_!=y&&(this.innerElement_.innerHTML=y,this.renderedHTML_=y),this.renderedWidth_!=d&&(this.innerElement_.style.width=d+"px",this.renderedWidth_=d),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,n,i){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=t/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const f=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${f}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,t,!1,n,i):"")+"</div>")}return l.push(this.createStepText(o,t,!0,n,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+s+"</div>":"")+l.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,n,i,r,s){const a=(t===0?0:Math.round(r/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+s),l=t===0?-3:n/this.scaleBarSteps_*-1,c=t===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${t===0?"left":"center"};min-width: ${c}px;left: ${i?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const t=dd(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||wc,i=1e3/25.4;return t*i*n}render(t){const n=t.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const zz=$z;class Gz extends Hl{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const n=t.className!==void 0?t.className:"ol-zoom-extent",i=t.label!==void 0?t.label:"E",r=t.tipLabel!==void 0?t.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=r,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener(vt.CLICK,this.handleClick_.bind(this),!1);const o=n+" "+ha+" "+Qu,a=this.element;a.className=o,a.appendChild(s)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const n=this.getMap().getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(by(i))}}const H0=Gz;class sR{constructor(t){Ct(this,"fileId",null);Ct(this,"activity",null);Ct(this,"sessions",null);Ct(this,"records",null);const n=t;this.fileId=n==null?void 0:n.fileId,this.activity=n==null?void 0:n.activity,this.sessions=n==null?void 0:n.sessions,this.records=n==null?void 0:n.records}}class _2{constructor(t){Ct(this,"timestamp",null);Ct(this,"positionLat",null);Ct(this,"positionLong",null);Ct(this,"distance",null);Ct(this,"speed",null);Ct(this,"altitude",null);Ct(this,"cadence",null);Ct(this,"heartRate",null);Ct(this,"power",null);Ct(this,"grade",0);const n=t;this.positionLat=n==null?void 0:n.positionLat,this.positionLong=n==null?void 0:n.positionLong,this.altitude=n==null?void 0:n.altitude,this.cadence=n==null?void 0:n.cadence,this.distance=n==null?void 0:n.distance,this.heartRate=n==null?void 0:n.heartRate,this.speed=n==null?void 0:n.speed,this.timestamp=n==null?void 0:n.timestamp,this.power=n==null?void 0:n.power,this.grade=n==null?void 0:n.grade}}class da extends Error{}class Wz extends da{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Bz extends da{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Yz extends da{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Dc extends da{}class oR extends da{constructor(t){super(`Invalid unit ${t}`)}}class Jn extends da{}class hs extends da{constructor(){super("Zone is an abstract class")}}const lt="numeric",Ri="short",$n="long",Ld={year:lt,month:lt,day:lt},aR={year:lt,month:Ri,day:lt},Uz={year:lt,month:Ri,day:lt,weekday:Ri},lR={year:lt,month:$n,day:lt},cR={year:lt,month:$n,day:lt,weekday:$n},uR={hour:lt,minute:lt},fR={hour:lt,minute:lt,second:lt},hR={hour:lt,minute:lt,second:lt,timeZoneName:Ri},dR={hour:lt,minute:lt,second:lt,timeZoneName:$n},gR={hour:lt,minute:lt,hourCycle:"h23"},mR={hour:lt,minute:lt,second:lt,hourCycle:"h23"},pR={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:Ri},yR={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:$n},_R={year:lt,month:lt,day:lt,hour:lt,minute:lt},wR={year:lt,month:lt,day:lt,hour:lt,minute:lt,second:lt},xR={year:lt,month:Ri,day:lt,hour:lt,minute:lt},bR={year:lt,month:Ri,day:lt,hour:lt,minute:lt,second:lt},Vz={year:lt,month:Ri,day:lt,weekday:Ri,hour:lt,minute:lt},vR={year:lt,month:$n,day:lt,hour:lt,minute:lt,timeZoneName:Ri},ER={year:lt,month:$n,day:lt,hour:lt,minute:lt,second:lt,timeZoneName:Ri},TR={year:lt,month:$n,day:lt,weekday:$n,hour:lt,minute:lt,timeZoneName:$n},CR={year:lt,month:$n,day:lt,weekday:$n,hour:lt,minute:lt,second:lt,timeZoneName:$n};class af{get type(){throw new hs}get name(){throw new hs}get ianaName(){return this.name}get isUniversal(){throw new hs}offsetName(t,n){throw new hs}formatOffset(t,n){throw new hs}offset(t){throw new hs}equals(t){throw new hs}get isValid(){throw new hs}}let j0=null;class pm extends af{static get instance(){return j0===null&&(j0=new pm),j0}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return MR(t,n,i)}formatOffset(t,n){return nu(this.offset(t),n)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let jh={};function Xz(e){return jh[e]||(jh[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),jh[e]}const Hz={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function jz(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,r,s,o,a,l,c,u]=i;return[o,r,s,a,l,c,u]}function Zz(e,t){const n=e.formatToParts(t),i=[];for(let r=0;r<n.length;r++){const{type:s,value:o}=n[r],a=Hz[s];s==="era"?i[a]=o:kt(a)||(i[a]=parseInt(o,10))}return i}let uh={};class Yr extends af{static create(t){return uh[t]||(uh[t]=new Yr(t)),uh[t]}static resetCache(){uh={},jh={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Yr.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return MR(t,n,i,this.name)}formatOffset(t,n){return nu(this.offset(t),n)}offset(t){const n=new Date(t);if(isNaN(n))return NaN;const i=Xz(this.name);let[r,s,o,a,l,c,u]=i.formatToParts?Zz(i,n):jz(i,n);a==="BC"&&(r=-Math.abs(r)+1);const h=_m({year:r,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let d=+n;const g=d%1e3;return d-=g>=0?g:1e3+g,(h-d)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let w2={};function qz(e,t={}){const n=JSON.stringify([e,t]);let i=w2[n];return i||(i=new Intl.ListFormat(e,t),w2[n]=i),i}let ky={};function Py(e,t={}){const n=JSON.stringify([e,t]);let i=ky[n];return i||(i=new Intl.DateTimeFormat(e,t),ky[n]=i),i}let Fy={};function Kz(e,t={}){const n=JSON.stringify([e,t]);let i=Fy[n];return i||(i=new Intl.NumberFormat(e,t),Fy[n]=i),i}let Ny={};function Jz(e,t={}){const{base:n,...i}=t,r=JSON.stringify([e,i]);let s=Ny[r];return s||(s=new Intl.RelativeTimeFormat(e,t),Ny[r]=s),s}let $c=null;function Qz(){return $c||($c=new Intl.DateTimeFormat().resolvedOptions().locale,$c)}function tG(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(n===-1)return[e];{let i,r;try{i=Py(e).resolvedOptions(),r=e}catch{const l=e.substring(0,n);i=Py(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:o}=i;return[r,s,o]}}function eG(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}function nG(e){const t=[];for(let n=1;n<=12;n++){const i=Tt.utc(2009,n,1);t.push(e(i))}return t}function iG(e){const t=[];for(let n=1;n<=7;n++){const i=Tt.utc(2016,11,13+n);t.push(e(i))}return t}function fh(e,t,n,i){const r=e.listingMode();return r==="error"?null:r==="en"?n(t):i(t)}function rG(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class sG{constructor(t,n,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:r,floor:s,...o}=i;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=Kz(t,a)}}format(t){if(this.inf){const n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{const n=this.floor?Math.floor(t):aw(t,3);return Se(n,this.padTo)}}}class oG{constructor(t,n,i){this.opts=i,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Yr.create(a).valid?(r=a,this.dt=t):(r="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,r=t.zone.name):(r="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=Py(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(n=>{if(n.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:i}}else return n}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class aG{constructor(t,n,i){this.opts={style:"long",...i},!n&&SR()&&(this.rtf=Jz(t,i))}format(t,n){return this.rtf?this.rtf.format(t,n):TG(n,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,n){return this.rtf?this.rtf.formatToParts(t,n):[]}}class oe{static fromOpts(t){return oe.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,n,i,r=!1){const s=t||Ce.defaultLocale,o=s||(r?"en-US":Qz()),a=n||Ce.defaultNumberingSystem,l=i||Ce.defaultOutputCalendar;return new oe(o,a,l,s)}static resetCache(){$c=null,ky={},Fy={},Ny={}}static fromObject({locale:t,numberingSystem:n,outputCalendar:i}={}){return oe.create(t,n,i)}constructor(t,n,i,r){const[s,o,a]=tG(t);this.locale=s,this.numberingSystem=n||o||null,this.outputCalendar=i||a||null,this.intl=eG(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=rG(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:oe.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,n=!1){return fh(this,t,AR,()=>{const i=n?{month:t,day:"numeric"}:{month:t},r=n?"format":"standalone";return this.monthsCache[r][t]||(this.monthsCache[r][t]=nG(s=>this.extract(s,i,"month"))),this.monthsCache[r][t]})}weekdays(t,n=!1){return fh(this,t,kR,()=>{const i=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},r=n?"format":"standalone";return this.weekdaysCache[r][t]||(this.weekdaysCache[r][t]=iG(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[r][t]})}meridiems(){return fh(this,void 0,()=>PR,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Tt.utc(2016,11,13,9),Tt.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(t){return fh(this,t,FR,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[Tt.utc(-40,1,1),Tt.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[t]})}extract(t,n,i){const r=this.dtFormatter(t,n),s=r.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new sG(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,n={}){return new oG(t,this.intl,n)}relFormatter(t={}){return new aG(this.intl,this.isEnglish(),t)}listFormatter(t={}){return qz(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Z0=null;class hn extends af{static get utcInstance(){return Z0===null&&(Z0=new hn(0)),Z0}static instance(t){return t===0?hn.utcInstance:new hn(t)}static parseSpecifier(t){if(t){const n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new hn(wm(n[1],n[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${nu(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${nu(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,n){return nu(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class lG extends af{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Es(e,t){if(kt(e)||e===null)return t;if(e instanceof af)return e;if(cG(e)){const n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?pm.instance:n==="utc"||n==="gmt"?hn.utcInstance:hn.parseSpecifier(n)||Yr.create(e)}else return Yo(e)?hn.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new lG(e)}let x2=()=>Date.now(),b2="system",v2=null,E2=null,T2=null,C2=60,S2;class Ce{static get now(){return x2}static set now(t){x2=t}static set defaultZone(t){b2=t}static get defaultZone(){return Es(b2,pm.instance)}static get defaultLocale(){return v2}static set defaultLocale(t){v2=t}static get defaultNumberingSystem(){return E2}static set defaultNumberingSystem(t){E2=t}static get defaultOutputCalendar(){return T2}static set defaultOutputCalendar(t){T2=t}static get twoDigitCutoffYear(){return C2}static set twoDigitCutoffYear(t){C2=t%100}static get throwOnInvalid(){return S2}static set throwOnInvalid(t){S2=t}static resetCaches(){oe.resetCache(),Yr.resetCache()}}function kt(e){return typeof e>"u"}function Yo(e){return typeof e=="number"}function ym(e){return typeof e=="number"&&e%1===0}function cG(e){return typeof e=="string"}function uG(e){return Object.prototype.toString.call(e)==="[object Date]"}function SR(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function fG(e){return Array.isArray(e)?e:[e]}function M2(e,t,n){if(e.length!==0)return e.reduce((i,r)=>{const s=[t(r),r];return i&&n(i[0],s[0])===i[0]?i:s},null)[1]}function hG(e,t){return t.reduce((n,i)=>(n[i]=e[i],n),{})}function Tl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ir(e,t,n){return ym(e)&&e>=t&&e<=n}function dG(e,t){return e-t*Math.floor(e/t)}function Se(e,t=2){const n=e<0;let i;return n?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function bs(e){if(!(kt(e)||e===null||e===""))return parseInt(e,10)}function co(e){if(!(kt(e)||e===null||e===""))return parseFloat(e)}function ow(e){if(!(kt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function aw(e,t,n=!1){const i=10**t;return(n?Math.trunc:Math.round)(e*i)/i}function lf(e){return e%4===0&&(e%100!==0||e%400===0)}function eu(e){return lf(e)?366:365}function Od(e,t){const n=dG(t-1,12)+1,i=e+(t-n)/12;return n===2?lf(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function _m(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function kd(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,n=e-1,i=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return t===4||i===3?53:52}function Dy(e){return e>99?e:e>Ce.twoDigitCutoffYear?1900+e:2e3+e}function MR(e,t,n,i=null){const r=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function wm(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0,r=n<0||Object.is(n,-0)?-i:i;return n*60+r}function RR(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Jn(`Invalid unit value ${e}`);return t}function Pd(e,t){const n={};for(const i in e)if(Tl(e,i)){const r=e[i];if(r==null)continue;n[t(i)]=RR(r)}return n}function nu(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),r=e>=0?"+":"-";switch(t){case"short":return`${r}${Se(n,2)}:${Se(i,2)}`;case"narrow":return`${r}${n}${i>0?`:${i}`:""}`;case"techie":return`${r}${Se(n,2)}${Se(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function xm(e){return hG(e,["hour","minute","second","millisecond"])}const gG=["January","February","March","April","May","June","July","August","September","October","November","December"],IR=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mG=["J","F","M","A","M","J","J","A","S","O","N","D"];function AR(e){switch(e){case"narrow":return[...mG];case"short":return[...IR];case"long":return[...gG];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const LR=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],OR=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],pG=["M","T","W","T","F","S","S"];function kR(e){switch(e){case"narrow":return[...pG];case"short":return[...OR];case"long":return[...LR];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const PR=["AM","PM"],yG=["Before Christ","Anno Domini"],_G=["BC","AD"],wG=["B","A"];function FR(e){switch(e){case"narrow":return[...wG];case"short":return[..._G];case"long":return[...yG];default:return null}}function xG(e){return PR[e.hour<12?0:1]}function bG(e,t){return kR(t)[e.weekday-1]}function vG(e,t){return AR(t)[e.month-1]}function EG(e,t){return FR(t)[e.year<0?0:1]}function TG(e,t,n="always",i=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&s){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${r[e][0]}`;case-1:return f?"yesterday":`last ${r[e][0]}`;case 0:return f?"today":`this ${r[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=r[e],u=i?l?c[1]:c[2]||c[1]:l?r[e][0]:e;return o?`${a} ${u} ago`:`in ${a} ${u}`}function R2(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const CG={D:Ld,DD:aR,DDD:lR,DDDD:cR,t:uR,tt:fR,ttt:hR,tttt:dR,T:gR,TT:mR,TTT:pR,TTTT:yR,f:_R,ff:xR,fff:vR,ffff:TR,F:wR,FF:bR,FFF:ER,FFFF:CR};class Qe{static create(t,n={}){return new Qe(t,n)}static parseFormat(t){let n=null,i="",r=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),n=null,i="",r=!r):r||a===n?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,n=a)}return i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return CG[t]}constructor(t,n){this.opts=n,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...n}).format()}dtFormatter(t,n={}){return this.loc.dtFormatter(t,{...this.opts,...n})}formatDateTime(t,n){return this.dtFormatter(t,n).format()}formatDateTimeParts(t,n){return this.dtFormatter(t,n).formatToParts()}formatInterval(t,n){return this.dtFormatter(t.start,n).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,n){return this.dtFormatter(t,n).resolvedOptions()}num(t,n=0){if(this.opts.forceSimple)return Se(t,n);const i={...this.opts};return n>0&&(i.padTo=n),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,n){const i=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(d,g)=>this.loc.extract(t,d,g),o=d=>t.isOffsetFixed&&t.offset===0&&d.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,d.format):"",a=()=>i?xG(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(d,g)=>i?vG(t,d):s(g?{month:d}:{month:d,day:"numeric"},"month"),c=(d,g)=>i?bG(t,d):s(g?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),u=d=>{const g=Qe.macroTokenToFormatOpts(d);return g?this.formatWithSystemDefault(t,g):d},f=d=>i?EG(t,d):s({era:d},"era"),h=d=>{switch(d){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(t.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(t.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(t.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(d)}};return R2(Qe.parseFormat(n),h)}formatDurationFromString(t,n){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>c=>{const u=i(c);return u?this.num(l.get(u),c.length):c},s=Qe.parseFormat(n),o=s.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return R2(s,r(a))}}class bi{constructor(t,n){this.reason=t,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const NR=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Zl(...e){const t=e.reduce((n,i)=>n+i.source,"");return RegExp(`^${t}$`)}function ql(...e){return t=>e.reduce(([n,i,r],s)=>{const[o,a,l]=s(t,r);return[{...n,...o},a||i,l]},[{},null,1]).slice(0,2)}function Kl(e,...t){if(e==null)return[null,null];for(const[n,i]of t){const r=n.exec(e);if(r)return i(r)}return[null,null]}function DR(...e){return(t,n)=>{const i={};let r;for(r=0;r<e.length;r++)i[e[r]]=bs(t[n+r]);return[i,null,n+r]}}const $R=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,SG=`(?:${$R.source}?(?:\\[(${NR.source})\\])?)?`,lw=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,zR=RegExp(`${lw.source}${SG}`),cw=RegExp(`(?:T${zR.source})?`),MG=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,RG=/(\d{4})-?W(\d\d)(?:-?(\d))?/,IG=/(\d{4})-?(\d{3})/,AG=DR("weekYear","weekNumber","weekDay"),LG=DR("year","ordinal"),OG=/(\d{4})-(\d\d)-(\d\d)/,GR=RegExp(`${lw.source} ?(?:${$R.source}|(${NR.source}))?`),kG=RegExp(`(?: ${GR.source})?`);function rl(e,t,n){const i=e[t];return kt(i)?n:bs(i)}function PG(e,t){return[{year:rl(e,t),month:rl(e,t+1,1),day:rl(e,t+2,1)},null,t+3]}function Jl(e,t){return[{hours:rl(e,t,0),minutes:rl(e,t+1,0),seconds:rl(e,t+2,0),milliseconds:ow(e[t+3])},null,t+4]}function cf(e,t){const n=!e[t]&&!e[t+1],i=wm(e[t+1],e[t+2]),r=n?null:hn.instance(i);return[{},r,t+3]}function uf(e,t){const n=e[t]?Yr.create(e[t]):null;return[{},n,t+1]}const FG=RegExp(`^T?${lw.source}$`),NG=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function DG(e){const[t,n,i,r,s,o,a,l,c]=e,u=t[0]==="-",f=l&&l[0]==="-",h=(d,g=!1)=>d!==void 0&&(g||d&&u)?-d:d;return[{years:h(co(n)),months:h(co(i)),weeks:h(co(r)),days:h(co(s)),hours:h(co(o)),minutes:h(co(a)),seconds:h(co(l),l==="-0"),milliseconds:h(ow(c),f)}]}const $G={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function uw(e,t,n,i,r,s,o){const a={year:t.length===2?Dy(bs(t)):bs(t),month:IR.indexOf(n)+1,day:bs(i),hour:bs(r),minute:bs(s)};return o&&(a.second=bs(o)),e&&(a.weekday=e.length>3?LR.indexOf(e)+1:OR.indexOf(e)+1),a}const zG=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function GG(e){const[,t,n,i,r,s,o,a,l,c,u,f]=e,h=uw(t,r,i,n,s,o,a);let d;return l?d=$G[l]:c?d=0:d=wm(u,f),[h,new hn(d)]}function WG(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const BG=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,YG=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,UG=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function I2(e){const[,t,n,i,r,s,o,a]=e;return[uw(t,r,i,n,s,o,a),hn.utcInstance]}function VG(e){const[,t,n,i,r,s,o,a]=e;return[uw(t,a,n,i,r,s,o),hn.utcInstance]}const XG=Zl(MG,cw),HG=Zl(RG,cw),jG=Zl(IG,cw),ZG=Zl(zR),WR=ql(PG,Jl,cf,uf),qG=ql(AG,Jl,cf,uf),KG=ql(LG,Jl,cf,uf),JG=ql(Jl,cf,uf);function QG(e){return Kl(e,[XG,WR],[HG,qG],[jG,KG],[ZG,JG])}function tW(e){return Kl(WG(e),[zG,GG])}function eW(e){return Kl(e,[BG,I2],[YG,I2],[UG,VG])}function nW(e){return Kl(e,[NG,DG])}const iW=ql(Jl);function rW(e){return Kl(e,[FG,iW])}const sW=Zl(OG,kG),oW=Zl(GR),aW=ql(Jl,cf,uf);function lW(e){return Kl(e,[sW,WR],[oW,aW])}const A2="Invalid Duration",BR={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},cW={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...BR},jn=146097/400,Sa=146097/4800,uW={years:{quarters:4,months:12,weeks:jn/7,days:jn,hours:jn*24,minutes:jn*24*60,seconds:jn*24*60*60,milliseconds:jn*24*60*60*1e3},quarters:{months:3,weeks:jn/28,days:jn/4,hours:jn*24/4,minutes:jn*24*60/4,seconds:jn*24*60*60/4,milliseconds:jn*24*60*60*1e3/4},months:{weeks:Sa/7,days:Sa,hours:Sa*24,minutes:Sa*24*60,seconds:Sa*24*60*60,milliseconds:Sa*24*60*60*1e3},...BR},Ro=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],fW=Ro.slice(0).reverse();function ds(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Dt(i)}function YR(e,t){let n=t.milliseconds??0;for(const i of fW.slice(1))t[i]&&(n+=t[i]*e[i].milliseconds);return n}function L2(e,t){const n=YR(e,t)<0?-1:1;Ro.reduceRight((i,r)=>{if(kt(t[r]))return i;if(i){const s=t[i]*n,o=e[r][i],a=Math.floor(s/o);t[r]+=a*n,t[i]-=a*o*n}return r},null),Ro.reduce((i,r)=>{if(kt(t[r]))return i;if(i){const s=t[i]%1;t[i]-=s,t[r]+=s*e[i][r]}return r},null)}function hW(e){const t={};for(const[n,i]of Object.entries(e))i!==0&&(t[n]=i);return t}class Dt{constructor(t){const n=t.conversionAccuracy==="longterm"||!1;let i=n?uW:cW;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||oe.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,n){return Dt.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(t==null||typeof t!="object")throw new Jn(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Dt({values:Pd(t,Dt.normalizeUnit),loc:oe.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(Yo(t))return Dt.fromMillis(t);if(Dt.isDuration(t))return t;if(typeof t=="object")return Dt.fromObject(t);throw new Jn(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){const[i]=nW(t);return i?Dt.fromObject(i,n):Dt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){const[i]=rW(t);return i?Dt.fromObject(i,n):Dt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new Jn("need to specify a reason the Duration is invalid");const i=t instanceof bi?t:new bi(t,n);if(Ce.throwOnInvalid)throw new Yz(i);return new Dt({invalid:i})}static normalizeUnit(t){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!n)throw new oR(t);return n}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,n={}){const i={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Qe.create(this.loc,i).formatDurationFromString(this,t):A2}toHuman(t={}){if(!this.isValid)return A2;const n=Ro.map(i=>{const r=this.values[i];return kt(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(r)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=aw(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Tt.fromMillis(n,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?YR(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t),i={};for(const r of Ro)(Tl(n.values,r)||Tl(this.values,r))&&(i[r]=n.get(r)+this.get(r));return ds(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t);return this.plus(n.negate())}mapUnits(t){if(!this.isValid)return this;const n={};for(const i of Object.keys(this.values))n[i]=RR(t(this.values[i],i));return ds(this,{values:n},!0)}get(t){return this[Dt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const n={...this.values,...Pd(t,Dt.normalizeUnit)};return ds(this,{values:n})}reconfigure({locale:t,numberingSystem:n,conversionAccuracy:i,matrix:r}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:n}),matrix:r,conversionAccuracy:i};return ds(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return L2(this.matrix,t),ds(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=hW(this.normalize().shiftToAll().toObject());return ds(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Dt.normalizeUnit(o));const n={},i={},r=this.toObject();let s;for(const o of Ro)if(t.indexOf(o)>=0){s=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;Yo(r[o])&&(a+=r[o]);const l=Math.trunc(a);n[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else Yo(r[o])&&(i[o]=r[o]);for(const o in i)i[o]!==0&&(n[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return L2(this.matrix,n),ds(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=this.values[n]===0?0:-this.values[n];return ds(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function n(i,r){return i===void 0||i===0?r===void 0||r===0:i===r}for(const i of Ro)if(!n(this.values[i],t.values[i]))return!1;return!0}}const Ma="Invalid Interval";function dW(e,t){return!e||!e.isValid?_e.invalid("missing or invalid start"):!t||!t.isValid?_e.invalid("missing or invalid end"):t<e?_e.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class _e{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new Jn("need to specify a reason the Interval is invalid");const i=t instanceof bi?t:new bi(t,n);if(Ce.throwOnInvalid)throw new Bz(i);return new _e({invalid:i})}static fromDateTimes(t,n){const i=bc(t),r=bc(n),s=dW(i,r);return s??new _e({start:i,end:r})}static after(t,n){const i=Dt.fromDurationLike(n),r=bc(t);return _e.fromDateTimes(r,r.plus(i))}static before(t,n){const i=Dt.fromDurationLike(n),r=bc(t);return _e.fromDateTimes(r.minus(i),r)}static fromISO(t,n){const[i,r]=(t||"").split("/",2);if(i&&r){let s,o;try{s=Tt.fromISO(i,n),o=s.isValid}catch{o=!1}let a,l;try{a=Tt.fromISO(r,n),l=a.isValid}catch{l=!1}if(o&&l)return _e.fromDateTimes(s,a);if(o){const c=Dt.fromISO(r,n);if(c.isValid)return _e.after(s,c)}else if(l){const c=Dt.fromISO(i,n);if(c.isValid)return _e.before(a,c)}}return _e.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const n=this.start.startOf(t),i=this.end.startOf(t);return Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:n}={}){return this.isValid?_e.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];const n=t.map(bc).filter(o=>this.contains(o)).sort(),i=[];let{s:r}=this,s=0;for(;r<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;i.push(_e.fromDateTimes(r,a)),r=a,s+=1}return i}splitBy(t){const n=Dt.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:i}=this,r=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(n.mapUnits(l=>l*r));s=+a>+this.e?this.e:a,o.push(_e.fromDateTimes(i,s)),i=s,r+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const n=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return n>=i?null:_e.fromDateTimes(n,i)}union(t){if(!this.isValid)return this;const n=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return _e.fromDateTimes(n,i)}static merge(t){const[n,i]=t.sort((r,s)=>r.s-s.s).reduce(([r,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[r,s.union(o)]:[r.concat([s]),o]:[r,o],[[],null]);return i&&n.push(i),n}static xor(t){let n=null,i=0;const r=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?n=l.time:(n&&+n!=+l.time&&r.push(_e.fromDateTimes(n,l.time)),n=null);return _e.merge(r)}difference(...t){return _e.xor([this].concat(t)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Ma}toLocaleString(t=Ld,n={}){return this.isValid?Qe.create(this.s.loc.clone(n),t).formatInterval(this):Ma}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Ma}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ma}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Ma}toFormat(t,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${n}${this.e.toFormat(t)}`:Ma}toDuration(t,n){return this.isValid?this.e.diff(this.s,t,n):Dt.invalid(this.invalidReason)}mapEndpoints(t){return _e.fromDateTimes(t(this.s),t(this.e))}}class hh{static hasDST(t=Ce.defaultZone){const n=Tt.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(t){return Yr.isValidZone(t)}static normalizeZone(t){return Es(t,Ce.defaultZone)}static months(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||oe.create(n,i,s)).months(t)}static monthsFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||oe.create(n,i,s)).months(t,!0)}static weekdays(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||oe.create(n,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||oe.create(n,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return oe.create(t).meridiems()}static eras(t="short",{locale:n=null}={}){return oe.create(n,null,"gregory").eras(t)}static features(){return{relative:SR()}}}function O2(e,t){const n=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor(Dt.fromMillis(i).as("days"))}function gW(e,t,n){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=O2(l,c);return(u-u%7)/7}],["days",O2]],r={},s=e;let o,a;for(const[l,c]of i)n.indexOf(l)>=0&&(o=l,r[l]=c(e,t),a=s.plus(r),a>t?(r[l]--,e=s.plus(r),e>t&&(a=e,r[l]--,e=s.plus(r))):e=a);return[e,r,a,o]}function mW(e,t,n,i){let[r,s,o,a]=gW(e,t,n);const l=t-r,c=n.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<t&&(o=r.plus({[a]:1})),o!==r&&(s[a]=(s[a]||0)+l/(o-r)));const u=Dt.fromObject(s,i);return c.length>0?Dt.fromMillis(l,i).shiftTo(...c).plus(u):u}const fw={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},k2={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},pW=fw.hanidec.replace(/[\[|\]]/g,"").split("");function yW(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(e[n].search(fw.hanidec)!==-1)t+=pW.indexOf(e[n]);else for(const r in k2){const[s,o]=k2[r];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}function hi({numberingSystem:e},t=""){return new RegExp(`${fw[e||"latn"]}${t}`)}const _W="missing Intl.DateTimeFormat.formatToParts support";function Yt(e,t=n=>n){return{regex:e,deser:([n])=>t(yW(n))}}const wW=String.fromCharCode(160),UR=`[ ${wW}]`,VR=new RegExp(UR,"g");function xW(e){return e.replace(/\./g,"\\.?").replace(VR,UR)}function P2(e){return e.replace(/\./g,"").replace(VR," ").toLowerCase()}function di(e,t){return e===null?null:{regex:RegExp(e.map(xW).join("|")),deser:([n])=>e.findIndex(i=>P2(n)===P2(i))+t}}function F2(e,t){return{regex:e,deser:([,n,i])=>wm(n,i),groups:t}}function dh(e){return{regex:e,deser:([t])=>t}}function bW(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function vW(e,t){const n=hi(t),i=hi(t,"{2}"),r=hi(t,"{3}"),s=hi(t,"{4}"),o=hi(t,"{6}"),a=hi(t,"{1,2}"),l=hi(t,"{1,3}"),c=hi(t,"{1,6}"),u=hi(t,"{1,9}"),f=hi(t,"{2,4}"),h=hi(t,"{4,6}"),d=_=>({regex:RegExp(bW(_.val)),deser:([p])=>p,literal:!0}),m=(_=>{if(e.literal)return d(_);switch(_.val){case"G":return di(t.eras("short"),0);case"GG":return di(t.eras("long"),0);case"y":return Yt(c);case"yy":return Yt(f,Dy);case"yyyy":return Yt(s);case"yyyyy":return Yt(h);case"yyyyyy":return Yt(o);case"M":return Yt(a);case"MM":return Yt(i);case"MMM":return di(t.months("short",!0),1);case"MMMM":return di(t.months("long",!0),1);case"L":return Yt(a);case"LL":return Yt(i);case"LLL":return di(t.months("short",!1),1);case"LLLL":return di(t.months("long",!1),1);case"d":return Yt(a);case"dd":return Yt(i);case"o":return Yt(l);case"ooo":return Yt(r);case"HH":return Yt(i);case"H":return Yt(a);case"hh":return Yt(i);case"h":return Yt(a);case"mm":return Yt(i);case"m":return Yt(a);case"q":return Yt(a);case"qq":return Yt(i);case"s":return Yt(a);case"ss":return Yt(i);case"S":return Yt(l);case"SSS":return Yt(r);case"u":return dh(u);case"uu":return dh(a);case"uuu":return Yt(n);case"a":return di(t.meridiems(),0);case"kkkk":return Yt(s);case"kk":return Yt(f,Dy);case"W":return Yt(a);case"WW":return Yt(i);case"E":case"c":return Yt(n);case"EEE":return di(t.weekdays("short",!1),1);case"EEEE":return di(t.weekdays("long",!1),1);case"ccc":return di(t.weekdays("short",!0),1);case"cccc":return di(t.weekdays("long",!0),1);case"Z":case"ZZ":return F2(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return F2(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return dh(/[a-z_+-/]{1,256}?/i);case" ":return dh(/[^\S\n\r]/);default:return d(_)}})(e)||{invalidReason:_W};return m.token=e,m}const EW={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function TW(e,t,n){const{type:i,value:r}=e;if(i==="literal"){const l=/^\s+$/.test(r);return{literal:!l,val:l?" ":r}}const s=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=EW[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function CW(e){return[`^${e.map(n=>n.regex).reduce((n,i)=>`${n}(${i.source})`,"")}$`,e]}function SW(e,t,n){const i=e.match(t);if(i){const r={};let s=1;for(const o in n)if(Tl(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(r[a.token.val[0]]=a.deser(i.slice(s,s+l))),s+=l}return[i,r]}else return[i,{}]}function MW(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,i;return kt(e.z)||(n=Yr.create(e.z)),kt(e.Z)||(n||(n=new hn(e.Z)),i=e.Z),kt(e.q)||(e.M=(e.q-1)*3+1),kt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),kt(e.u)||(e.S=ow(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),n,i]}let q0=null;function RW(){return q0||(q0=Tt.fromMillis(1555555555555)),q0}function IW(e,t){if(e.literal)return e;const n=Qe.macroTokenToFormatOpts(e.val),i=jR(n,t);return i==null||i.includes(void 0)?e:i}function XR(e,t){return Array.prototype.concat(...e.map(n=>IW(n,t)))}function HR(e,t,n){const i=XR(Qe.parseFormat(n),e),r=i.map(o=>vW(o,e)),s=r.find(o=>o.invalidReason);if(s)return{input:t,tokens:i,invalidReason:s.invalidReason};{const[o,a]=CW(r),l=RegExp(o,"i"),[c,u]=SW(t,l,a),[f,h,d]=u?MW(u):[null,null,void 0];if(Tl(u,"a")&&Tl(u,"H"))throw new Dc("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:c,matches:u,result:f,zone:h,specificOffset:d}}}function AW(e,t,n){const{result:i,zone:r,specificOffset:s,invalidReason:o}=HR(e,t,n);return[i,r,s,o]}function jR(e,t){if(!e)return null;const i=Qe.create(t,e).dtFormatter(RW()),r=i.formatToParts(),s=i.resolvedOptions();return r.map(o=>TW(o,e,s))}const ZR=[0,31,59,90,120,151,181,212,243,273,304,334],qR=[0,31,60,91,121,152,182,213,244,274,305,335];function Qn(e,t){return new bi("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function KR(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const r=i.getUTCDay();return r===0?7:r}function JR(e,t,n){return n+(lf(e)?qR:ZR)[t-1]}function QR(e,t){const n=lf(e)?qR:ZR,i=n.findIndex(s=>s<t),r=t-n[i];return{month:i+1,day:r}}function $y(e){const{year:t,month:n,day:i}=e,r=JR(t,n,i),s=KR(t,n,i);let o=Math.floor((r-s+10)/7),a;return o<1?(a=t-1,o=kd(a)):o>kd(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:s,...xm(e)}}function N2(e){const{weekYear:t,weekNumber:n,weekday:i}=e,r=KR(t,1,4),s=eu(t);let o=n*7+i-r-3,a;o<1?(a=t-1,o+=eu(a)):o>s?(a=t+1,o-=eu(t)):a=t;const{month:l,day:c}=QR(a,o);return{year:a,month:l,day:c,...xm(e)}}function K0(e){const{year:t,month:n,day:i}=e,r=JR(t,n,i);return{year:t,ordinal:r,...xm(e)}}function D2(e){const{year:t,ordinal:n}=e,{month:i,day:r}=QR(t,n);return{year:t,month:i,day:r,...xm(e)}}function LW(e){const t=ym(e.weekYear),n=Ir(e.weekNumber,1,kd(e.weekYear)),i=Ir(e.weekday,1,7);return t?n?i?!1:Qn("weekday",e.weekday):Qn("week",e.week):Qn("weekYear",e.weekYear)}function OW(e){const t=ym(e.year),n=Ir(e.ordinal,1,eu(e.year));return t?n?!1:Qn("ordinal",e.ordinal):Qn("year",e.year)}function tI(e){const t=ym(e.year),n=Ir(e.month,1,12),i=Ir(e.day,1,Od(e.year,e.month));return t?n?i?!1:Qn("day",e.day):Qn("month",e.month):Qn("year",e.year)}function eI(e){const{hour:t,minute:n,second:i,millisecond:r}=e,s=Ir(t,0,23)||t===24&&n===0&&i===0&&r===0,o=Ir(n,0,59),a=Ir(i,0,59),l=Ir(r,0,999);return s?o?a?l?!1:Qn("millisecond",r):Qn("second",i):Qn("minute",n):Qn("hour",t)}const J0="Invalid DateTime",$2=864e13;function gh(e){return new bi("unsupported zone",`the zone "${e.name}" is not supported`)}function Q0(e){return e.weekData===null&&(e.weekData=$y(e.c)),e.weekData}function uo(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Tt({...n,...t,old:n})}function nI(e,t,n){let i=e-t*60*1e3;const r=n.offset(i);if(t===r)return[i,t];i-=(r-t)*60*1e3;const s=n.offset(i);return r===s?[i,r]:[e-Math.min(r,s)*60*1e3,Math.max(r,s)]}function mh(e,t){e+=t*60*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Zh(e,t,n){return nI(_m(e),t,n)}function z2(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),r=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:r,day:Math.min(e.c.day,Od(i,r))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Dt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=_m(s);let[l,c]=nI(a,n,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function xc(e,t,n,i,r,s){const{setZone:o,zone:a}=n;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=Tt.fromObject(e,{...n,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return Tt.invalid(new bi("unparsable",`the input "${r}" can't be parsed as ${i}`))}function ph(e,t,n=!0){return e.isValid?Qe.create(oe.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function tp(e,t){const n=e.c.year>9999||e.c.year<0;let i="";return n&&e.c.year>=0&&(i+="+"),i+=Se(e.c.year,n?6:4),t?(i+="-",i+=Se(e.c.month),i+="-",i+=Se(e.c.day)):(i+=Se(e.c.month),i+=Se(e.c.day)),i}function G2(e,t,n,i,r,s){let o=Se(e.c.hour);return t?(o+=":",o+=Se(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=":")):o+=Se(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=Se(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=Se(e.c.millisecond,3))),r&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=Se(Math.trunc(-e.o/60)),o+=":",o+=Se(Math.trunc(-e.o%60))):(o+="+",o+=Se(Math.trunc(e.o/60)),o+=":",o+=Se(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const iI={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},kW={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},PW={ordinal:1,hour:0,minute:0,second:0,millisecond:0},rI=["year","month","day","hour","minute","second","millisecond"],FW=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],NW=["year","ordinal","hour","minute","second","millisecond"];function W2(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new oR(e);return t}function B2(e,t){const n=Es(t.zone,Ce.defaultZone),i=oe.fromObject(t),r=Ce.now();let s,o;if(kt(e.year))s=r;else{for(const c of rI)kt(e[c])&&(e[c]=iI[c]);const a=tI(e)||eI(e);if(a)return Tt.invalid(a);const l=n.offset(r);[s,o]=Zh(e,l,n)}return new Tt({ts:s,zone:n,loc:i,o})}function Y2(e,t,n){const i=kt(n.round)?!0:n.round,r=(o,a)=>(o=aw(o,i||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(o,a)),s=o=>n.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(n.unit)return r(s(n.unit),n.unit);for(const o of n.units){const a=s(o);if(Math.abs(a)>=1)return r(a,o)}return r(e>t?-0:0,n.units[n.units.length-1])}function U2(e){let t={},n;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}class Tt{constructor(t){const n=t.zone||Ce.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new bi("invalid input"):null)||(n.isValid?null:gh(n));this.ts=kt(t.ts)?Ce.now():t.ts;let r=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(n))[r,s]=[t.old.c,t.old.o];else{const a=n.offset(this.ts);r=mh(this.ts,a),i=Number.isNaN(r.year)?new bi("invalid input"):null,r=i?null:r,s=i?null:a}this._zone=n,this.loc=t.loc||oe.create(),this.invalid=i,this.weekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new Tt({})}static local(){const[t,n]=U2(arguments),[i,r,s,o,a,l,c]=n;return B2({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,n]=U2(arguments),[i,r,s,o,a,l,c]=n;return t.zone=hn.utcInstance,B2({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,n={}){const i=uG(t)?t.valueOf():NaN;if(Number.isNaN(i))return Tt.invalid("invalid input");const r=Es(n.zone,Ce.defaultZone);return r.isValid?new Tt({ts:i,zone:r,loc:oe.fromObject(n)}):Tt.invalid(gh(r))}static fromMillis(t,n={}){if(Yo(t))return t<-$2||t>$2?Tt.invalid("Timestamp out of range"):new Tt({ts:t,zone:Es(n.zone,Ce.defaultZone),loc:oe.fromObject(n)});throw new Jn(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(Yo(t))return new Tt({ts:t*1e3,zone:Es(n.zone,Ce.defaultZone),loc:oe.fromObject(n)});throw new Jn("fromSeconds requires a numerical input")}static fromObject(t,n={}){t=t||{};const i=Es(n.zone,Ce.defaultZone);if(!i.isValid)return Tt.invalid(gh(i));const r=Ce.now(),s=kt(n.specificOffset)?i.offset(r):n.specificOffset,o=Pd(t,W2),a=!kt(o.ordinal),l=!kt(o.year),c=!kt(o.month)||!kt(o.day),u=l||c,f=o.weekYear||o.weekNumber,h=oe.fromObject(n);if((u||a)&&f)throw new Dc("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new Dc("Can't mix ordinal dates with month/day");const d=f||o.weekday&&!u;let g,m,_=mh(r,s);d?(g=FW,m=kW,_=$y(_)):a?(g=NW,m=PW,_=K0(_)):(g=rI,m=iI);let p=!1;for(const C of g){const I=o[C];kt(I)?p?o[C]=m[C]:o[C]=_[C]:p=!0}const y=d?LW(o):a?OW(o):tI(o),x=y||eI(o);if(x)return Tt.invalid(x);const w=d?N2(o):a?D2(o):o,[v,b]=Zh(w,s,i),E=new Tt({ts:v,zone:i,o:b,loc:h});return o.weekday&&u&&t.weekday!==E.weekday?Tt.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${E.toISO()}`):E}static fromISO(t,n={}){const[i,r]=QG(t);return xc(i,r,n,"ISO 8601",t)}static fromRFC2822(t,n={}){const[i,r]=tW(t);return xc(i,r,n,"RFC 2822",t)}static fromHTTP(t,n={}){const[i,r]=eW(t);return xc(i,r,n,"HTTP",n)}static fromFormat(t,n,i={}){if(kt(t)||kt(n))throw new Jn("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=i,o=oe.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=AW(o,t,n);return u?Tt.invalid(u):xc(a,l,i,`format ${n}`,t,c)}static fromString(t,n,i={}){return Tt.fromFormat(t,n,i)}static fromSQL(t,n={}){const[i,r]=lW(t);return xc(i,r,n,"SQL",t)}static invalid(t,n=null){if(!t)throw new Jn("need to specify a reason the DateTime is invalid");const i=t instanceof bi?t:new bi(t,n);if(Ce.throwOnInvalid)throw new Wz(i);return new Tt({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,n={}){const i=jR(t,oe.fromObject(n));return i?i.map(r=>r?r.val:null).join(""):null}static expandFormat(t,n={}){return XR(Qe.parseFormat(t),oe.fromObject(n)).map(r=>r.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Q0(this).weekYear:NaN}get weekNumber(){return this.isValid?Q0(this).weekNumber:NaN}get weekday(){return this.isValid?Q0(this).weekday:NaN}get ordinal(){return this.isValid?K0(this.c).ordinal:NaN}get monthShort(){return this.isValid?hh.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?hh.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?hh.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?hh.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,n=6e4,i=_m(this.c),r=this.zone.offset(i-t),s=this.zone.offset(i+t),o=this.zone.offset(i-r*n),a=this.zone.offset(i-s*n);if(o===a)return[this];const l=i-o*n,c=i-a*n,u=mh(l,o),f=mh(c,a);return u.hour===f.hour&&u.minute===f.minute&&u.second===f.second&&u.millisecond===f.millisecond?[uo(this,{ts:l}),uo(this,{ts:c})]:[this]}get isInLeapYear(){return lf(this.year)}get daysInMonth(){return Od(this.year,this.month)}get daysInYear(){return this.isValid?eu(this.year):NaN}get weeksInWeekYear(){return this.isValid?kd(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:n,numberingSystem:i,calendar:r}=Qe.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:n,numberingSystem:i,outputCalendar:r}}toUTC(t=0,n={}){return this.setZone(hn.instance(t),n)}toLocal(){return this.setZone(Ce.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:i=!1}={}){if(t=Es(t,Ce.defaultZone),t.equals(this.zone))return this;if(t.isValid){let r=this.ts;if(n||i){const s=t.offset(this.ts),o=this.toObject();[r]=Zh(o,s,t)}return uo(this,{ts:r,zone:t})}else return Tt.invalid(gh(t))}reconfigure({locale:t,numberingSystem:n,outputCalendar:i}={}){const r=this.loc.clone({locale:t,numberingSystem:n,outputCalendar:i});return uo(this,{loc:r})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const n=Pd(t,W2),i=!kt(n.weekYear)||!kt(n.weekNumber)||!kt(n.weekday),r=!kt(n.ordinal),s=!kt(n.year),o=!kt(n.month)||!kt(n.day),a=s||o,l=n.weekYear||n.weekNumber;if((a||r)&&l)throw new Dc("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&r)throw new Dc("Can't mix ordinal dates with month/day");let c;i?c=N2({...$y(this.c),...n}):kt(n.ordinal)?(c={...this.toObject(),...n},kt(n.day)&&(c.day=Math.min(Od(c.year,c.month),c.day))):c=D2({...K0(this.c),...n});const[u,f]=Zh(c,this.o,this.zone);return uo(this,{ts:u,o:f})}plus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t);return uo(this,z2(this,n))}minus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t).negate();return uo(this,z2(this,n))}startOf(t){if(!this.isValid)return this;const n={},i=Dt.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks"&&(n.weekday=1),i==="quarters"){const r=Math.ceil(this.month/3);n.month=(r-1)*3+1}return this.set(n)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,n={}){return this.isValid?Qe.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):J0}toLocaleString(t=Ld,n={}){return this.isValid?Qe.create(this.loc.clone(n),t).formatDateTime(this):J0}toLocaleParts(t={}){return this.isValid?Qe.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:n=!1,suppressMilliseconds:i=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=tp(this,o);return a+="T",a+=G2(this,o,n,i,r,s),a}toISODate({format:t="extended"}={}){return this.isValid?tp(this,t==="extended"):null}toISOWeekDate(){return ph(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:n=!1,includeOffset:i=!0,includePrefix:r=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+G2(this,o==="extended",n,t,i,s):null}toRFC2822(){return ph(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ph(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?tp(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:n=!1,includeOffsetSpace:i=!0}={}){let r="HH:mm:ss.SSS";return(n||t)&&(i&&(r+=" "),n?r+="z":t&&(r+="ZZ")),ph(this,r,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():J0}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const n={...this.c};return t.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,n="milliseconds",i={}){if(!this.isValid||!t.isValid)return Dt.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=fG(n).map(Dt.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=mW(a,l,s,r);return o?c.negate():c}diffNow(t="milliseconds",n={}){return this.diff(Tt.now(),t,n)}until(t){return this.isValid?_e.fromDateTimes(this,t):this}hasSame(t,n){if(!this.isValid)return!1;const i=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(n)<=i&&i<=r.endOf(n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const n=t.base||Tt.fromObject({},{zone:this.zone}),i=t.padding?this<n?-t.padding:t.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(r=t.unit,s=void 0),Y2(n,this.plus(i),{...t,numeric:"always",units:r,unit:s})}toRelativeCalendar(t={}){return this.isValid?Y2(t.base||Tt.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Tt.isDateTime))throw new Jn("min requires all arguments be DateTimes");return M2(t,n=>n.valueOf(),Math.min)}static max(...t){if(!t.every(Tt.isDateTime))throw new Jn("max requires all arguments be DateTimes");return M2(t,n=>n.valueOf(),Math.max)}static fromFormatExplain(t,n,i={}){const{locale:r=null,numberingSystem:s=null}=i,o=oe.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return HR(o,t,n)}static fromStringExplain(t,n,i={}){return Tt.fromFormatExplain(t,n,i)}static get DATE_SHORT(){return Ld}static get DATE_MED(){return aR}static get DATE_MED_WITH_WEEKDAY(){return Uz}static get DATE_FULL(){return lR}static get DATE_HUGE(){return cR}static get TIME_SIMPLE(){return uR}static get TIME_WITH_SECONDS(){return fR}static get TIME_WITH_SHORT_OFFSET(){return hR}static get TIME_WITH_LONG_OFFSET(){return dR}static get TIME_24_SIMPLE(){return gR}static get TIME_24_WITH_SECONDS(){return mR}static get TIME_24_WITH_SHORT_OFFSET(){return pR}static get TIME_24_WITH_LONG_OFFSET(){return yR}static get DATETIME_SHORT(){return _R}static get DATETIME_SHORT_WITH_SECONDS(){return wR}static get DATETIME_MED(){return xR}static get DATETIME_MED_WITH_SECONDS(){return bR}static get DATETIME_MED_WITH_WEEKDAY(){return Vz}static get DATETIME_FULL(){return vR}static get DATETIME_FULL_WITH_SECONDS(){return ER}static get DATETIME_HUGE(){return TR}static get DATETIME_HUGE_WITH_SECONDS(){return CR}}function bc(e){if(Tt.isDateTime(e))return e;if(e&&e.valueOf&&Yo(e.valueOf()))return Tt.fromJSDate(e);if(e&&typeof e=="object")return Tt.fromObject(e);throw new Jn(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function sI(e,t){if(!e)return"";let n=Tt.fromISO(e);return t&&(n=n.setZone(`UTC+${t}`)),n.toLocaleString({weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})}function DW(e){if(!e)return"UTC";let t="GMT";return e>0&&(t+="+"),t+e.toString()}function $W(e){const t=Math.floor(e/86400);e-=t*(60*60*24);const n=Math.floor(e/(60*60));e-=n*(60*60);const i=Math.floor(e/60);return e-=i*60,t>0?`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`:`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`}const oI=document.createElement("i"),aI=document.createElement("i");oI.setAttribute("class","fa-solid fa-expand");aI.setAttribute("class","fa-solid fa-compress");const zW={props:{geojsons:Array,activityFiles:Array,timezoneOffsetHoursList:Array},data(){return{popupFreeze:new Boolean,popupRecord:new _2,popupTimezoneOffsetHours:new Number(0),popupOverlay:new y2({}),vec:new K9({source:new Lz({features:[]}),visible:!0,style:new Bo({stroke:new K1({color:[60,99,130,1],width:3})})}),map:new _$({controls:_M(),layers:[new E7({source:new Cz})],view:new Yi({enableRotation:!1,projection:"EPSG:4326"})}),zoomToExtent:new H0}},watch:{geojsons:{handler(e){this.updateMapSource(e)}},zoomToExtent:{handler(e,t){this.map.removeControl(t),this.map.addControl(e)}}},methods:{toStringHDMS:dD,toTimezoneDateString:sI,updateMapSource(e){var o,a;this.popupOverlay.setPosition(void 0);const t=this.map.getView(),n=this.vec.getSource(),i=new Array;for(let l=0;l<e.length;l++){const c=new Y$().readFeature(e[l]);c.setId("lineString-"+l),i.push(c)}n.clear(),n.addFeatures(i),t.fit(n.getExtent(),{padding:[50,50,50,50]});const r=new Array,s=new Array;for(let l=0;l<i.length;l++){const c=new Sy(new xl(((o=i[l])==null?void 0:o.getGeometry()).getFirstCoordinate()));c.setStyle(new Bo({image:new Md({crossOrigin:"anonymous",src:_N,scale:.8})})),c.setId("startingPoint-"+l),r.push(c);const u=new Sy(new xl(((a=i[l])==null?void 0:a.getGeometry()).getLastCoordinate()));u.setStyle(new Bo({image:new Md({crossOrigin:"anonymous",src:yN,scale:.8})})),u.setId("destinationPoint-"+l),s.push(u)}n.addFeatures(r),n.addFeatures(s),this.zoomToExtent=new H0({extent:t.getViewStateAndExtent().extent})},findNearestRecord(e,t){var s;const n=Number(e.split("-")[1]);let i=new _2,r=Number.MAX_VALUE;return this.popupTimezoneOffsetHours=this.timezoneOffsetHoursList[n],(s=this.activityFiles[n].records)==null||s.forEach(o=>{if(!o.positionLong||!o.positionLat)return;const a=Math.abs(Math.sqrt(Math.pow(o.positionLong-t[0],2)+Math.pow(o.positionLat-t[1],2)));a<r&&(r=a,i=o)}),i},lineStringFeatureListener(e,t){e=="singleclick"&&(this.popupFreeze=!this.popupFreeze&&this.popupOverlay.getPosition()!=null),this.popupFreeze||this.popupOverlay.setPosition(void 0),!(this.popupFreeze==!0&&this.popupOverlay.getPosition()!=null)&&this.map.forEachFeatureAtPixel(t.pixel,n=>{n.getGeometry()instanceof Ed&&(this.popupRecord=this.findNearestRecord(n.getId(),t.coordinate),this.popupOverlay.setPosition([this.popupRecord.positionLong,this.popupRecord.positionLat]),this.popupFreeze=e=="singleclick")},{hitTolerance:10})},updateExtent(){this.map.getView().fit(this.vec.getSource().getExtent(),{padding:[50,50,50,50]}),this.zoomToExtent=new H0({extent:this.map.getView().getViewStateAndExtent().extent})}},mounted(){this.popupOverlay=new y2({element:document.getElementById("popup")}),this.map.addOverlay(this.popupOverlay),this.map.addLayer(this.vec),this.map.setTarget("map"),this.map.addControl(new Fz({label:oI,labelActive:aI})),this.map.addControl(new zz),this.map.once("precompose",()=>this.updateExtent()),this.map.on("change:size",()=>this.updateExtent()),this.map.on("pointermove",e=>this.lineStringFeatureListener(e.type,e)),this.map.on("singleclick",e=>this.lineStringFeatureListener(e.type,e))}};const bm=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},GW=j("div",{id:"map",style:{width:"100%",height:"100%"}},null,-1),WW={id:"popup",class:"ol-popup"},BW={class:"popup-content"},YW=j("span",null,"Time:",-1),UW=j("span",null,"Distance:",-1),VW=j("span",null," km",-1),XW=j("span",null,"Speed:",-1),HW=j("span",null," km/h",-1),jW=j("span",null,"Cadence:",-1),ZW=j("span",null," rpm",-1),qW=j("span",null,"Heart Rate:",-1),KW=j("span",null," bpm",-1),JW=j("span",null,"Power:",-1),QW=j("span",null," watts",-1),tB=j("span",null,"Altitude:",-1),eB=j("span",null," masl",-1),nB=j("span",null,"Location:",-1);function iB(e,t,n,i,r,s){var o;return Ut(),Jt(Kn,null,[GW,j("div",WW,[j("div",BW,[j("div",null,[YW,j("span",null,zt(r.popupRecord.timestamp?s.toTimezoneDateString(r.popupRecord.timestamp,r.popupTimezoneOffsetHours):"-"),1)]),j("div",null,[UW,j("span",null,zt(r.popupRecord.distance?(r.popupRecord.distance/1e3).toFixed(2):"-"),1),VW]),j("div",null,[XW,j("span",null,zt(r.popupRecord.speed?(r.popupRecord.speed*3600/1e3).toFixed(2):"-"),1),HW]),j("div",null,[jW,j("span",null,zt(r.popupRecord.cadence?r.popupRecord.cadence:"-"),1),ZW]),j("div",null,[qW,j("span",null,zt(r.popupRecord.heartRate?r.popupRecord.heartRate:"-"),1),KW]),j("div",null,[JW,j("span",null,zt(r.popupRecord.power?r.popupRecord.power:"-"),1),QW]),j("div",null,[tB,j("span",null,zt(r.popupRecord.altitude?(o=r.popupRecord.altitude)==null?void 0:o.toFixed(2):"-"),1),eB]),j("div",null,[nB,j("span",null,zt(r.popupRecord.positionLong&&r.popupRecord.positionLat?s.toStringHDMS([r.popupRecord.positionLong,r.popupRecord.positionLat]):"-"),1)])])])],64)}const rB=bm(zW,[["render",iB]]);function me(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Jo(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vm(e){let t,n,i;e.length!==2?(t=me,n=(a,l)=>me(e(a),l),i=(a,l)=>e(a)-l):(t=e===me||e===Jo?e:sB,n=e,i=e);function r(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=r(a,l,c,u-1);return f>c&&i(a[f-1],l)>-i(a[f],l)?f-1:f}return{left:r,center:o,right:s}}function sB(){return 0}function lI(e){return e===null?NaN:+e}function*oB(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const aB=vm(me),lB=aB.right;vm(lI).center;const Em=lB,cI=uI(fI),cB=uI(uB);function uI(e){return function(t,n,i=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((i=+i)>=0))throw new RangeError("invalid ry");let{data:r,width:s,height:o}=t;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:r.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!i)return t;const a=n&&e(n),l=i&&e(i),c=r.slice();return a&&l?(Ra(a,c,r,s,o),Ra(a,r,c,s,o),Ra(a,c,r,s,o),Ia(l,r,c,s,o),Ia(l,c,r,s,o),Ia(l,r,c,s,o)):a?(Ra(a,r,c,s,o),Ra(a,c,r,s,o),Ra(a,r,c,s,o)):l&&(Ia(l,r,c,s,o),Ia(l,c,r,s,o),Ia(l,r,c,s,o)),t}}function Ra(e,t,n,i,r){for(let s=0,o=i*r;s<o;)e(t,n,s,s+=i,1)}function Ia(e,t,n,i,r){for(let s=0,o=i*r;s<i;++s)e(t,n,s,s+o,i)}function uB(e){const t=fI(e);return(n,i,r,s,o)=>{r<<=2,s<<=2,o<<=2,t(n,i,r+0,s+0,o),t(n,i,r+1,s+1,o),t(n,i,r+2,s+2,o),t(n,i,r+3,s+3,o)}}function fI(e){const t=Math.floor(e);if(t===e)return fB(e);const n=e-t,i=2*e+1;return(r,s,o,a,l)=>{if(!((a-=l)>=o))return;let c=t*s[o];const u=l*t,f=u+l;for(let h=o,d=o+u;h<d;h+=l)c+=s[Math.min(a,h)];for(let h=o,d=a;h<=d;h+=l)c+=s[Math.min(a,h+u)],r[h]=(c+n*(s[Math.max(o,h-f)]+s[Math.min(a,h+f)]))/i,c-=s[Math.max(o,h-u)]}}function fB(e){const t=2*e+1;return(n,i,r,s,o)=>{if(!((s-=o)>=r))return;let a=e*i[r];const l=o*e;for(let c=r,u=r+l;c<u;c+=o)a+=i[Math.min(s,c)];for(let c=r,u=s;c<=u;c+=o)a+=i[Math.min(s,c+l)],n[c]=a/t,a-=i[Math.max(r,c-l)]}}function Tm(e,t){let n=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(r=+r)>=r&&++n}return n}function hB(e){return e.length|0}function dB(e){return!(e>0)}function gB(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function mB(e){return t=>e(...t)}function pB(...e){const t=typeof e[e.length-1]=="function"&&mB(e.pop());e=e.map(gB);const n=e.map(hB),i=e.length-1,r=new Array(i+1).fill(0),s=[];if(i<0||n.some(dB))return s;for(;;){s.push(r.map((a,l)=>e[l][a]));let o=i;for(;++r[o]===n[o];){if(o===0)return t?s.map(t):s;r[o--]=0}}}function yB(e,t){var n=0,i=0;return Float64Array.from(e,t===void 0?r=>n+=+r||0:r=>n+=+t(r,i++,e)||0)}function hw(e,t){let n=0,i,r=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r))}if(n>1)return s/(n-1)}function ff(e,t){const n=hw(e,t);return n&&Math.sqrt(n)}function Be(e,t){let n,i;if(t===void 0)for(const r of e)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class Ji{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[i++]=a),t=o}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=t[--n];n>0&&(i=o,r=t[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}class Qo extends Map{constructor(t,n=gI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(zy(this,t))}has(t){return super.has(zy(this,t))}set(t,n){return super.set(hI(this,t),n)}delete(t){return super.delete(dI(this,t))}}class hf extends Set{constructor(t,n=gI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(zy(this,t))}add(t){return super.add(hI(this,t))}delete(t){return super.delete(dI(this,t))}}function zy({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function hI({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function dI({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function gI(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Gy(e){return e}function Kr(e,...t){return dw(e,Gy,Gy,t)}function sl(e,t,...n){return dw(e,Gy,t,n)}function _B(e,t,...n){return dw(e,Array.from,t,n)}function dw(e,t,n,i){return function r(s,o){if(o>=i.length)return n(s);const a=new Qo,l=i[o++];let c=-1;for(const u of s){const f=l(u,++c,s),h=a.get(f);h?h.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,r(f,o));return t(a)}(e,0)}function wB(e,t){return Array.from(t,n=>e[n])}function Mu(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const i=Uint32Array.from(e,(r,s)=>s);return t.length>1?(t=t.map(r=>e.map(r)),i.sort((r,s)=>{for(const o of t){const a=Ru(o[r],o[s]);if(a)return a}})):(n=e.map(n),i.sort((r,s)=>Ru(n[r],n[s]))),wB(e,i)}return e.sort(gw(n))}function gw(e=me){if(e===me)return Ru;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function Ru(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function mw(e,t,n){return(t.length!==2?Mu(sl(e,t,n),([i,r],[s,o])=>me(r,o)||me(i,s)):Mu(Kr(e,n),([i,r],[s,o])=>t(r,o)||me(i,s))).map(([i])=>i)}const xB=Math.sqrt(50),bB=Math.sqrt(10),vB=Math.sqrt(2);function Fd(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=xB?10:s>=bB?5:s>=vB?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Fd(e,t,n*2):[a,l,c]}function Ws(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,s,o]=i?Fd(t,e,n):Fd(e,t,n);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function Iu(e,t,n){return t=+t,e=+e,n=+n,Fd(e,t,n)[2]}function Wy(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?Iu(t,e,n):Iu(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function mI(e,t,n){let i;for(;;){const r=Iu(e,t,n);if(r===i||r===0||!isFinite(r))return[e,t];r>0?(e=Math.floor(e/r)*r,t=Math.ceil(t/r)*r):r<0&&(e=Math.ceil(e*r)/r,t=Math.floor(t*r)/r),i=r}}function pw(e){return Math.max(1,Math.ceil(Math.log(Tm(e))/Math.LN2)+1)}function Ue(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function EB(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);return i}function Cn(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function TB(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);return i}function pI(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?Ru:gw(r);i>n;){if(i-n>600){const l=i-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(t-c*f/l+h)),g=Math.min(i,Math.floor(t+(l-c)*f/l+h));pI(e,t,d,g,r)}const s=e[t];let o=n,a=i;for(vc(e,n,t),r(e[i],s)>0&&vc(e,n,i);o<a;){for(vc(e,o,a),++o,--a;r(e[o],s)<0;)++o;for(;r(e[a],s)>0;)--a}r(e[n],s)===0?vc(e,n,a):(++a,vc(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function vc(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function yw(e,t=me){let n,i=!1;if(t.length===1){let r;for(const s of e){const o=t(s);(i?me(o,r)>0:me(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of e)(i?t(r,n)>0:t(r,r)===0)&&(n=r,i=!0);return n}function Bs(e,t,n){if(e=Float64Array.from(oB(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Cn(e);if(t>=1)return Ue(e);var i,r=(i-1)*t,s=Math.floor(r),o=Ue(pI(e,s).subarray(0,s+1)),a=Cn(e.subarray(s+1));return o+(a-o)*(r-s)}}function CB(e,t,n=lI){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(r-s)}}function SB(e,t,n){const i=Tm(e),r=Bs(e,.75)-Bs(e,.25);return i&&r?Math.ceil((n-t)/(2*r*Math.pow(i,-1/3))):1}function yI(e,t,n){const i=Tm(e),r=ff(e);return i&&r?Math.ceil((n-t)*Math.cbrt(i)/(3.49*r)):1}function Cm(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function Au(e,t){return Bs(e,.5,t)}function*MB(e){for(const t of e)yield*t}function _I(e){return Array.from(MB(e))}function wI(e,t){const n=new Qo;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let i,r=0;for(const[s,o]of n)o>r&&(r=o,i=s);return i}function RB(e,t=IB){const n=[];let i,r=!1;for(const s of e)r&&n.push(t(i,s)),i=s,r=!0;return n}function IB(e,t){return[e,t]}function ti(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(r);++i<r;)s[i]=e+i*n;return s}function xI(e,t=me){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const i=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=me);const r=(a,l)=>t(n[a],n[l]);let s,o;return e=Uint32Array.from(n,(a,l)=>l),e.sort(t===me?(a,l)=>Ru(n[a],n[l]):gw(r)),e.forEach((a,l)=>{const c=r(a,s===void 0?a:s);c>=0?((s===void 0||c>0)&&(s=a,o=l),i[a]=o):i[a]=NaN}),i}function AB(e,t=me){let n,i=!1;if(t.length===1){let r;for(const s of e){const o=t(s);(i?me(o,r)<0:me(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of e)(i?t(r,n)<0:t(r,r)===0)&&(n=r,i=!0);return n}function nr(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function Nd(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function LB(e){return e}var ep=1,np=2,By=3,yh=4,V2=1e-6;function OB(e){return"translate("+e+",0)"}function kB(e){return"translate(0,"+e+")"}function PB(e){return t=>+e(t)}function FB(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function NB(){return!this.__axis}function DB(e,t){var n=[],i=null,r=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===ep||e===yh?-1:1,u=e===yh||e===np?"x":"y",f=e===ep||e===By?OB:kB;function h(d){var g=i??(t.ticks?t.ticks.apply(t,n):t.domain()),m=r??(t.tickFormat?t.tickFormat.apply(t,n):LB),_=Math.max(s,0)+a,p=t.range(),y=+p[0]+l,x=+p[p.length-1]+l,w=(t.bandwidth?FB:PB)(t.copy(),l),v=d.selection?d.selection():d,b=v.selectAll(".domain").data([null]),E=v.selectAll(".tick").data(g,t).order(),C=E.exit(),I=E.enter().append("g").attr("class","tick"),S=E.select("line"),R=E.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(I),S=S.merge(I.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),R=R.merge(I.append("text").attr("fill","currentColor").attr(u,c*_).attr("dy",e===ep?"0em":e===By?"0.71em":"0.32em")),d!==v&&(b=b.transition(d),E=E.transition(d),S=S.transition(d),R=R.transition(d),C=C.transition(d).attr("opacity",V2).attr("transform",function(M){return isFinite(M=w(M))?f(M+l):this.getAttribute("transform")}),I.attr("opacity",V2).attr("transform",function(M){var k=this.parentNode.__axis;return f((k&&isFinite(k=k(M))?k:w(M))+l)})),C.remove(),b.attr("d",e===yh||e===np?o?"M"+c*o+","+y+"H"+l+"V"+x+"H"+c*o:"M"+l+","+y+"V"+x:o?"M"+y+","+c*o+"V"+l+"H"+x+"V"+c*o:"M"+y+","+l+"H"+x),E.attr("opacity",1).attr("transform",function(M){return f(w(M)+l)}),S.attr(u+"2",c*s),R.attr(u,c*_).text(m),v.filter(NB).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===np?"start":e===yh?"end":"middle"),v.each(function(){this.__axis=w})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),h):i&&i.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(s=o=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(a=+d,h):a},h.offset=function(d){return arguments.length?(l=+d,h):l},h}function $B(e){return DB(By,e)}var zB={value:()=>{}};function bI(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new qh(n)}function qh(e){this._=e}function GB(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}qh.prototype=bI.prototype={constructor:qh,on:function(e,t){var n=this._,i=GB(e+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(e=i[s]).type)&&(r=WB(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=i[s]).type)n[r]=X2(n[r],e.name,t);else if(t==null)for(r in n)n[r]=X2(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new qh(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function WB(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function X2(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=zB,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Yy="http://www.w3.org/1999/xhtml";const ta={svg:"http://www.w3.org/2000/svg",xhtml:Yy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Sm(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ta.hasOwnProperty(t)?{space:ta[t],local:e}:e}function BB(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Yy&&t.documentElement.namespaceURI===Yy?t.createElement(e):t.createElementNS(n,e)}}function YB(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Mm(e){var t=Sm(e);return(t.local?YB:BB)(t)}function UB(){}function _w(e){return e==null?UB:function(){return this.querySelector(e)}}function VB(e){typeof e!="function"&&(e=_w(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Gn(i,this._parents)}function XB(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function HB(){return[]}function vI(e){return e==null?HB:function(){return this.querySelectorAll(e)}}function jB(e){return function(){return XB(e.apply(this,arguments))}}function ZB(e){typeof e=="function"?e=jB(e):e=vI(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(e.call(l,l.__data__,c,o)),r.push(l));return new Gn(i,r)}function EI(e){return function(){return this.matches(e)}}function TI(e){return function(t){return t.matches(e)}}var qB=Array.prototype.find;function KB(e){return function(){return qB.call(this.children,e)}}function JB(){return this.firstElementChild}function QB(e){return this.select(e==null?JB:KB(typeof e=="function"?e:TI(e)))}var tY=Array.prototype.filter;function eY(){return Array.from(this.children)}function nY(e){return function(){return tY.call(this.children,e)}}function iY(e){return this.selectAll(e==null?eY:nY(typeof e=="function"?e:TI(e)))}function rY(e){typeof e!="function"&&(e=EI(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Gn(i,this._parents)}function CI(e){return new Array(e.length)}function sY(){return new Gn(this._enter||this._groups.map(CI),this._parents)}function Dd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Dd.prototype={constructor:Dd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function oY(e){return function(){return e}}function aY(e,t,n,i,r,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],i[o]=a):n[o]=new Dd(e,s[o]);for(;o<l;++o)(a=t[o])&&(r[o]=a)}function lY(e,t,n,i,r,s,o){var a,l,c=new Map,u=t.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(l=t[a])&&(h[a]=d=o.call(l,l.__data__,a,t)+"",c.has(d)?r[a]=l:c.set(d,l));for(a=0;a<f;++a)d=o.call(e,s[a],a,s)+"",(l=c.get(d))?(i[a]=l,l.__data__=s[a],c.delete(d)):n[a]=new Dd(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(h[a])===l&&(r[a]=l)}function cY(e){return e.__data__}function uY(e,t){if(!arguments.length)return Array.from(this,cY);var n=t?lY:aY,i=this._parents,r=this._groups;typeof e!="function"&&(e=oY(e));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],f=r[c],h=f.length,d=fY(e.call(u,u&&u.__data__,c,i)),g=d.length,m=a[c]=new Array(g),_=o[c]=new Array(g),p=l[c]=new Array(h);n(u,f,m,_,p,d,t);for(var y=0,x=0,w,v;y<g;++y)if(w=m[y]){for(y>=x&&(x=y+1);!(v=_[x])&&++x<g;);w._next=v||null}}return o=new Gn(o,i),o._enter=a,o._exit=l,o}function fY(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hY(){return new Gn(this._exit||this._groups.map(CI),this._parents)}function dY(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function gY(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=i[l],f=c.length,h=a[l]=new Array(f),d,g=0;g<f;++g)(d=c[g]||u[g])&&(h[g]=d);for(;l<r;++l)a[l]=n[l];return new Gn(a,this._parents)}function mY(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function pY(e){e||(e=yY);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],a=o.length,l=r[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Gn(r,this._parents).order()}function yY(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _Y(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wY(){return Array.from(this)}function xY(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function bY(){let e=0;for(const t of this)++e;return e}function vY(){return!this.node()}function EY(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,o=r.length,a;s<o;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function TY(e){return function(){this.removeAttribute(e)}}function CY(e){return function(){this.removeAttributeNS(e.space,e.local)}}function SY(e,t){return function(){this.setAttribute(e,t)}}function MY(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function RY(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function IY(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function AY(e,t){var n=Sm(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?CY:TY:typeof t=="function"?n.local?IY:RY:n.local?MY:SY)(n,t))}function SI(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function LY(e){return function(){this.style.removeProperty(e)}}function OY(e,t,n){return function(){this.style.setProperty(e,t,n)}}function kY(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function PY(e,t,n){return arguments.length>1?this.each((t==null?LY:typeof t=="function"?kY:OY)(e,t,n??"")):Cl(this.node(),e)}function Cl(e,t){return e.style.getPropertyValue(t)||SI(e).getComputedStyle(e,null).getPropertyValue(t)}function FY(e){return function(){delete this[e]}}function NY(e,t){return function(){this[e]=t}}function DY(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function $Y(e,t){return arguments.length>1?this.each((t==null?FY:typeof t=="function"?DY:NY)(e,t)):this.node()[e]}function MI(e){return e.trim().split(/^|\s+/)}function ww(e){return e.classList||new RI(e)}function RI(e){this._node=e,this._names=MI(e.getAttribute("class")||"")}RI.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function II(e,t){for(var n=ww(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function AI(e,t){for(var n=ww(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function zY(e){return function(){II(this,e)}}function GY(e){return function(){AI(this,e)}}function WY(e,t){return function(){(t.apply(this,arguments)?II:AI)(this,e)}}function BY(e,t){var n=MI(e+"");if(arguments.length<2){for(var i=ww(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?WY:t?zY:GY)(n,t))}function YY(){this.textContent=""}function UY(e){return function(){this.textContent=e}}function VY(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function XY(e){return arguments.length?this.each(e==null?YY:(typeof e=="function"?VY:UY)(e)):this.node().textContent}function HY(){this.innerHTML=""}function jY(e){return function(){this.innerHTML=e}}function ZY(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function qY(e){return arguments.length?this.each(e==null?HY:(typeof e=="function"?ZY:jY)(e)):this.node().innerHTML}function KY(){this.nextSibling&&this.parentNode.appendChild(this)}function JY(){return this.each(KY)}function QY(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tU(){return this.each(QY)}function eU(e){var t=typeof e=="function"?e:Mm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nU(){return null}function iU(e,t){var n=typeof e=="function"?e:Mm(e),i=t==null?nU:typeof t=="function"?t:_w(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function rU(){var e=this.parentNode;e&&e.removeChild(this)}function sU(){return this.each(rU)}function oU(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function aU(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lU(e){return this.select(e?aU:oU)}function cU(e){return arguments.length?this.property("__data__",e):this.node().__data__}function uU(e){return function(t){e.call(this,t,this.__data__)}}function fU(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function hU(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function dU(e,t,n){return function(){var i=this.__on,r,s=uU(t);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function gU(e,t,n){var i=fU(e+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?dU:hU,r=0;r<s;++r)this.each(a(i[r],t,n));return this}function LI(e,t,n){var i=SI(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function mU(e,t){return function(){return LI(this,e,t)}}function pU(e,t){return function(){return LI(this,e,t.apply(this,arguments))}}function yU(e,t){return this.each((typeof t=="function"?pU:mU)(e,t))}function*_U(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var OI=[null];function Gn(e,t){this._groups=e,this._parents=t}function df(){return new Gn([[document.documentElement]],OI)}function wU(){return this}Gn.prototype=df.prototype={constructor:Gn,select:VB,selectAll:ZB,selectChild:QB,selectChildren:iY,filter:rY,data:uY,enter:sY,exit:hY,join:dY,merge:gY,selection:wU,order:mY,sort:pY,call:_Y,nodes:wY,node:xY,size:bY,empty:vY,each:EY,attr:AY,style:PY,property:$Y,classed:BY,text:XY,html:qY,raise:JY,lower:tU,append:eU,insert:iU,remove:sU,clone:lU,datum:cU,on:gU,dispatch:yU,[Symbol.iterator]:_U};function Fs(e){return typeof e=="string"?new Gn([[document.querySelector(e)]],[document.documentElement]):new Gn([[e]],OI)}function xU(e){let t;for(;t=e.sourceEvent;)e=t;return e}function bU(e,t){if(e=xU(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}function Ql(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gf(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function qs(){}var ea=.7,Sl=1/ea,ol="\\s*([+-]?\\d+)\\s*",Lu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vU=/^#([0-9a-f]{3,8})$/,EU=new RegExp(`^rgb\\(${ol},${ol},${ol}\\)$`),TU=new RegExp(`^rgb\\(${Qi},${Qi},${Qi}\\)$`),CU=new RegExp(`^rgba\\(${ol},${ol},${ol},${Lu}\\)$`),SU=new RegExp(`^rgba\\(${Qi},${Qi},${Qi},${Lu}\\)$`),MU=new RegExp(`^hsl\\(${Lu},${Qi},${Qi}\\)$`),RU=new RegExp(`^hsla\\(${Lu},${Qi},${Qi},${Lu}\\)$`),H2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ql(qs,na,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:j2,formatHex:j2,formatHex8:IU,formatHsl:AU,formatRgb:Z2,toString:Z2});function j2(){return this.rgb().formatHex()}function IU(){return this.rgb().formatHex8()}function AU(){return kI(this).formatHsl()}function Z2(){return this.rgb().formatRgb()}function na(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vU.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?q2(t):n===3?new Ye(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_h(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_h(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=EU.exec(e))?new Ye(t[1],t[2],t[3],1):(t=TU.exec(e))?new Ye(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=CU.exec(e))?_h(t[1],t[2],t[3],t[4]):(t=SU.exec(e))?_h(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=MU.exec(e))?Q2(t[1],t[2]/100,t[3]/100,1):(t=RU.exec(e))?Q2(t[1],t[2]/100,t[3]/100,t[4]):H2.hasOwnProperty(e)?q2(H2[e]):e==="transparent"?new Ye(NaN,NaN,NaN,0):null}function q2(e){return new Ye(e>>16&255,e>>8&255,e&255,1)}function _h(e,t,n,i){return i<=0&&(e=t=n=NaN),new Ye(e,t,n,i)}function xw(e){return e instanceof qs||(e=na(e)),e?(e=e.rgb(),new Ye(e.r,e.g,e.b,e.opacity)):new Ye}function ir(e,t,n,i){return arguments.length===1?xw(e):new Ye(e,t,n,i??1)}function Ye(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Ql(Ye,ir,gf(qs,{brighter(e){return e=e==null?Sl:Math.pow(Sl,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ea:Math.pow(ea,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ye(Uo(this.r),Uo(this.g),Uo(this.b),$d(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K2,formatHex:K2,formatHex8:LU,formatRgb:J2,toString:J2}));function K2(){return`#${Io(this.r)}${Io(this.g)}${Io(this.b)}`}function LU(){return`#${Io(this.r)}${Io(this.g)}${Io(this.b)}${Io((isNaN(this.opacity)?1:this.opacity)*255)}`}function J2(){const e=$d(this.opacity);return`${e===1?"rgb(":"rgba("}${Uo(this.r)}, ${Uo(this.g)}, ${Uo(this.b)}${e===1?")":`, ${e})`}`}function $d(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Uo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Io(e){return e=Uo(e),(e<16?"0":"")+e.toString(16)}function Q2(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _i(e,t,n,i)}function kI(e){if(e instanceof _i)return new _i(e.h,e.s,e.l,e.opacity);if(e instanceof qs||(e=na(e)),!e)return new _i;if(e instanceof _i)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(t===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new _i(o,a,l,e.opacity)}function Uy(e,t,n,i){return arguments.length===1?kI(e):new _i(e,t,n,i??1)}function _i(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Ql(_i,Uy,gf(qs,{brighter(e){return e=e==null?Sl:Math.pow(Sl,e),new _i(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ea:Math.pow(ea,e),new _i(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Ye(ip(e>=240?e-240:e+120,r,i),ip(e,r,i),ip(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new _i(tE(this.h),wh(this.s),wh(this.l),$d(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$d(this.opacity);return`${e===1?"hsl(":"hsla("}${tE(this.h)}, ${wh(this.s)*100}%, ${wh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tE(e){return e=(e||0)%360,e<0?e+360:e}function wh(e){return Math.max(0,Math.min(1,e||0))}function ip(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const PI=Math.PI/180,FI=180/Math.PI,zd=18,NI=.96422,DI=1,$I=.82521,zI=4/29,al=6/29,GI=3*al*al,OU=al*al*al;function WI(e){if(e instanceof tr)return new tr(e.l,e.a,e.b,e.opacity);if(e instanceof Ar)return BI(e);e instanceof Ye||(e=xw(e));var t=ap(e.r),n=ap(e.g),i=ap(e.b),r=rp((.2225045*t+.7168786*n+.0606169*i)/DI),s,o;return t===n&&n===i?s=o=r:(s=rp((.4360747*t+.3850649*n+.1430804*i)/NI),o=rp((.0139322*t+.0971045*n+.7141733*i)/$I)),new tr(116*r-16,500*(s-r),200*(r-o),e.opacity)}function Vy(e,t,n,i){return arguments.length===1?WI(e):new tr(e,t,n,i??1)}function tr(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Ql(tr,Vy,gf(qs,{brighter(e){return new tr(this.l+zd*(e??1),this.a,this.b,this.opacity)},darker(e){return new tr(this.l-zd*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=NI*sp(t),e=DI*sp(e),n=$I*sp(n),new Ye(op(3.1338561*t-1.6168667*e-.4906146*n),op(-.9787684*t+1.9161415*e+.033454*n),op(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function rp(e){return e>OU?Math.pow(e,1/3):e/GI+zI}function sp(e){return e>al?e*e*e:GI*(e-zI)}function op(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ap(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function kU(e){if(e instanceof Ar)return new Ar(e.h,e.c,e.l,e.opacity);if(e instanceof tr||(e=WI(e)),e.a===0&&e.b===0)return new Ar(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*FI;return new Ar(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Xy(e,t,n,i){return arguments.length===1?kU(e):new Ar(e,t,n,i??1)}function Ar(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function BI(e){if(isNaN(e.h))return new tr(e.l,0,0,e.opacity);var t=e.h*PI;return new tr(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ql(Ar,Xy,gf(qs,{brighter(e){return new Ar(this.h,this.c,this.l+zd*(e??1),this.opacity)},darker(e){return new Ar(this.h,this.c,this.l-zd*(e??1),this.opacity)},rgb(){return BI(this).rgb()}}));var YI=-.14861,bw=1.78277,vw=-.29227,Rm=-.90649,Ou=1.97294,eE=Ou*Rm,nE=Ou*bw,iE=bw*vw-Rm*YI;function PU(e){if(e instanceof Vo)return new Vo(e.h,e.s,e.l,e.opacity);e instanceof Ye||(e=xw(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(iE*i+eE*t-nE*n)/(iE+eE-nE),s=i-r,o=(Ou*(n-r)-vw*s)/Rm,a=Math.sqrt(o*o+s*s)/(Ou*r*(1-r)),l=a?Math.atan2(o,s)*FI-120:NaN;return new Vo(l<0?l+360:l,a,r,e.opacity)}function rr(e,t,n,i){return arguments.length===1?PU(e):new Vo(e,t,n,i??1)}function Vo(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Ql(Vo,rr,gf(qs,{brighter(e){return e=e==null?Sl:Math.pow(Sl,e),new Vo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ea:Math.pow(ea,e),new Vo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*PI,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Ye(255*(t+n*(YI*i+bw*r)),255*(t+n*(vw*i+Rm*r)),255*(t+n*(Ou*i)),this.opacity)}}));function FU(e,t,n,i,r){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*i+o*r)/6}function NU(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],o=i>0?e[i-1]:2*r-s,a=i<t-1?e[i+2]:2*s-r;return FU((n-i/t)*t,o,r,s,a)}}const Im=e=>()=>e;function UI(e,t){return function(n){return e+n*t}}function DU(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Ew(e,t){var n=t-e;return n?UI(e,n>180||n<-180?n-360*Math.round(n/360):n):Im(isNaN(e)?t:e)}function $U(e){return(e=+e)==1?nn:function(t,n){return n-t?DU(t,n,e):Im(isNaN(t)?n:t)}}function nn(e,t){var n=t-e;return n?UI(e,n):Im(isNaN(e)?t:e)}const Ys=function e(t){var n=$U(t);function i(r,s){var o=n((r=ir(r)).r,(s=ir(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),c=nn(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function zU(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=ir(t[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=e(i),r=e(r),s=e(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var GU=zU(NU);function WU(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function BU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function YU(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=mf(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function UU(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Ke(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function VU(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=mf(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Hy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lp=new RegExp(Hy.source,"g");function XU(e){return function(){return e}}function HU(e){return function(t){return e(t)+""}}function VI(e,t){var n=Hy.lastIndex=lp.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(i=Hy.exec(e))&&(r=lp.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Ke(i,r)})),n=lp.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?HU(l[0].x):XU(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function mf(e,t){var n=typeof t,i;return t==null||n==="boolean"?Im(t):(n==="number"?Ke:n==="string"?(i=na(t))?(t=i,Ys):VI:t instanceof na?Ys:t instanceof Date?UU:BU(t)?WU:Array.isArray(t)?YU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?VU:Ke)(e,t)}function Tw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var rE=180/Math.PI,jy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function XI(e,t,n,i,r,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*rE,skewX:Math.atan(l)*rE,scaleX:o,scaleY:a}}var xh;function jU(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?jy:XI(t.a,t.b,t.c,t.d,t.e,t.f)}function ZU(e){return e==null||(xh||(xh=document.createElementNS("http://www.w3.org/2000/svg","g")),xh.setAttribute("transform",e),!(e=xh.transform.baseVal.consolidate()))?jy:(e=e.matrix,XI(e.a,e.b,e.c,e.d,e.e,e.f))}function HI(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,g){if(c!==f||u!==h){var m=d.push("translate(",null,t,null,n);g.push({i:m-4,x:Ke(c,f)},{i:m-2,x:Ke(u,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:Ke(c,u)})):u&&f.push(r(f)+"rotate("+u+i)}function a(c,u,f,h){c!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:Ke(c,u)}):u&&f.push(r(f)+"skewX("+u+i)}function l(c,u,f,h,d,g){if(c!==f||u!==h){var m=d.push(r(d)+"scale(",null,",",null,")");g.push({i:m-4,x:Ke(c,f)},{i:m-2,x:Ke(u,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var g=-1,m=h.length,_;++g<m;)f[(_=h[g]).i]=_.x(d);return f.join("")}}}var qU=HI(jU,"px, ","px)","deg)"),KU=HI(ZU,", ",")",")");function JU(e){return function(t,n){var i=e((t=Uy(t)).h,(n=Uy(n)).h),r=nn(t.s,n.s),s=nn(t.l,n.l),o=nn(t.opacity,n.opacity);return function(a){return t.h=i(a),t.s=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const QU=JU(Ew);function tV(e,t){var n=nn((e=Vy(e)).l,(t=Vy(t)).l),i=nn(e.a,t.a),r=nn(e.b,t.b),s=nn(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=r(o),e.opacity=s(o),e+""}}function eV(e){return function(t,n){var i=e((t=Xy(t)).h,(n=Xy(n)).h),r=nn(t.c,n.c),s=nn(t.l,n.l),o=nn(t.opacity,n.opacity);return function(a){return t.h=i(a),t.c=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const nV=eV(Ew);function jI(e){return function t(n){n=+n;function i(r,s){var o=e((r=rr(r)).h,(s=rr(s)).h),a=nn(r.s,s.s),l=nn(r.l,s.l),c=nn(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,n)),r.opacity=c(u),r+""}}return i.gamma=t,i}(1)}jI(Ew);var Cw=jI(nn);function pf(e,t){t===void 0&&(t=e,e=mf);for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[a](o-a)}}function Ii(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}var Ml=0,zc=0,Ec=0,ZI=1e3,Gd,Gc,Wd=0,ia=0,Am=0,ku=typeof performance=="object"&&performance.now?performance:Date,qI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Sw(){return ia||(qI(iV),ia=ku.now()+Am)}function iV(){ia=0}function Bd(){this._call=this._time=this._next=null}Bd.prototype=KI.prototype={constructor:Bd,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Sw():+n)+(t==null?0:+t),!this._next&&Gc!==this&&(Gc?Gc._next=this:Gd=this,Gc=this),this._call=e,this._time=n,Zy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zy())}};function KI(e,t,n){var i=new Bd;return i.restart(e,t,n),i}function rV(){Sw(),++Ml;for(var e=Gd,t;e;)(t=ia-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ml}function sE(){ia=(Wd=ku.now())+Am,Ml=zc=0;try{rV()}finally{Ml=0,oV(),ia=0}}function sV(){var e=ku.now(),t=e-Wd;t>ZI&&(Am-=t,Wd=e)}function oV(){for(var e,t=Gd,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Gd=n);Gc=e,Zy(i)}function Zy(e){if(!Ml){zc&&(zc=clearTimeout(zc));var t=e-ia;t>24?(e<1/0&&(zc=setTimeout(sE,e-ku.now()-Am)),Ec&&(Ec=clearInterval(Ec))):(Ec||(Wd=ku.now(),Ec=setInterval(sV,ZI)),Ml=1,qI(sE))}}function oE(e,t,n){var i=new Bd;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var aV=bI("start","end","cancel","interrupt"),lV=[],JI=0,aE=1,qy=2,Kh=3,lE=4,Ky=5,Jh=6;function Lm(e,t,n,i,r,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;cV(e,n,{name:t,index:i,group:r,on:aV,tween:lV,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:JI})}function Mw(e,t){var n=Fi(e,t);if(n.state>JI)throw new Error("too late; already scheduled");return n}function or(e,t){var n=Fi(e,t);if(n.state>Kh)throw new Error("too late; already running");return n}function Fi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function cV(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=KI(s,0,n.time);function s(c){n.state=aE,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,h,d;if(n.state!==aE)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===Kh)return oE(o);d.state===lE?(d.state=Jh,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=Jh,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if(oE(function(){n.state===Kh&&(n.state=lE,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=qy,n.on.call("start",e,e.__data__,n.index,n.group),n.state===qy){for(n.state=Kh,r=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=d);r.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Ky,1),f=-1,h=r.length;++f<h;)r[f].call(e,u);n.state===Ky&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Jh,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function uV(e,t){var n=e.__transition,i,r,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){s=!1;continue}r=i.state>qy&&i.state<Ky,i.state=Jh,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}s&&delete e.__transition}}function fV(e){return this.each(function(){uV(this,e)})}function hV(e,t){var n,i;return function(){var r=or(this,e),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function dV(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=or(this,e),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function gV(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Fi(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?hV:dV)(n,e,t))}function Rw(e,t,n){var i=e._id;return e.each(function(){var r=or(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Fi(r,i).value[t]}}function QI(e,t){var n;return(typeof t=="number"?Ke:t instanceof na?Ys:(n=na(t))?(t=n,Ys):VI)(e,t)}function mV(e){return function(){this.removeAttribute(e)}}function pV(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yV(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttribute(e);return o===r?null:o===i?s:s=t(i=o,n)}}function _V(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?s:s=t(i=o,n)}}function wV(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function xV(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function bV(e,t){var n=Sm(e),i=n==="transform"?KU:QI;return this.attrTween(e,typeof t=="function"?(n.local?xV:wV)(n,i,Rw(this,"attr."+e,t)):t==null?(n.local?pV:mV)(n):(n.local?_V:yV)(n,i,t))}function vV(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function EV(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function TV(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&EV(e,s)),n}return r._value=t,r}function CV(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&vV(e,s)),n}return r._value=t,r}function SV(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Sm(e);return this.tween(n,(i.local?TV:CV)(i,t))}function MV(e,t){return function(){Mw(this,e).delay=+t.apply(this,arguments)}}function RV(e,t){return t=+t,function(){Mw(this,e).delay=t}}function IV(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?MV:RV)(t,e)):Fi(this.node(),t).delay}function AV(e,t){return function(){or(this,e).duration=+t.apply(this,arguments)}}function LV(e,t){return t=+t,function(){or(this,e).duration=t}}function OV(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?AV:LV)(t,e)):Fi(this.node(),t).duration}function kV(e,t){if(typeof t!="function")throw new Error;return function(){or(this,e).ease=t}}function PV(e){var t=this._id;return arguments.length?this.each(kV(t,e)):Fi(this.node(),t).ease}function FV(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;or(this,e).ease=n}}function NV(e){if(typeof e!="function")throw new Error;return this.each(FV(this._id,e))}function DV(e){typeof e!="function"&&(e=EI(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Ur(i,this._parents,this._name,this._id)}function $V(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=t[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<i;++a)o[a]=t[a];return new Ur(o,this._parents,this._name,this._id)}function zV(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function GV(e,t,n){var i,r,s=zV(t)?Mw:or;return function(){var o=s(this,e),a=o.on;a!==i&&(r=(i=a).copy()).on(t,n),o.on=r}}function WV(e,t){var n=this._id;return arguments.length<2?Fi(this.node(),n).on.on(e):this.each(GV(n,e,t))}function BV(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function YV(){return this.on("end.remove",BV(this._id))}function UV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_w(e));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,Lm(c[h],t,n,h,c,Fi(u,n)));return new Ur(s,this._parents,t,n)}function VV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vI(e));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),d,g=Fi(u,n),m=0,_=h.length;m<_;++m)(d=h[m])&&Lm(d,t,n,m,h,g);s.push(h),o.push(u)}return new Ur(s,o,t,n)}var XV=df.prototype.constructor;function HV(){return new XV(this._groups,this._parents)}function jV(e,t){var n,i,r;return function(){var s=Cl(this,e),o=(this.style.removeProperty(e),Cl(this,e));return s===o?null:s===n&&o===i?r:r=t(n=s,i=o)}}function tA(e){return function(){this.style.removeProperty(e)}}function ZV(e,t,n){var i,r=n+"",s;return function(){var o=Cl(this,e);return o===r?null:o===i?s:s=t(i=o,n)}}function qV(e,t,n){var i,r,s;return function(){var o=Cl(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Cl(this,e))),o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a))}}function KV(e,t){var n,i,r,s="style."+t,o="end."+s,a;return function(){var l=or(this,e),c=l.on,u=l.value[s]==null?a||(a=tA(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(o,r=u),l.on=i}}function JV(e,t,n){var i=(e+="")=="transform"?qU:QI;return t==null?this.styleTween(e,jV(e,i)).on("end.style."+e,tA(e)):typeof t=="function"?this.styleTween(e,qV(e,i,Rw(this,"style."+e,t))).each(KV(this._id,e)):this.styleTween(e,ZV(e,i,t),n).on("end.style."+e,null)}function QV(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function tX(e,t,n){var i,r;function s(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&QV(e,o,n)),i}return s._value=t,s}function eX(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,tX(e,t,n??""))}function nX(e){return function(){this.textContent=e}}function iX(e){return function(){var t=e(this);this.textContent=t??""}}function rX(e){return this.tween("text",typeof e=="function"?iX(Rw(this,"text",e)):nX(e==null?"":e+""))}function sX(e){return function(t){this.textContent=e.call(this,t)}}function oX(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&sX(r)),t}return i._value=e,i}function aX(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,oX(e))}function lX(){for(var e=this._name,t=this._id,n=eA(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Fi(l,t);Lm(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ur(i,this._parents,e,n)}function cX(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};n.each(function(){var c=or(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&s()})}var uX=0;function Ur(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function eA(){return++uX}var mr=df.prototype;Ur.prototype={constructor:Ur,select:UV,selectAll:VV,selectChild:mr.selectChild,selectChildren:mr.selectChildren,filter:DV,merge:$V,selection:HV,transition:lX,call:mr.call,nodes:mr.nodes,node:mr.node,size:mr.size,empty:mr.empty,each:mr.each,on:WV,attr:bV,attrTween:SV,style:JV,styleTween:eX,text:rX,textTween:aX,remove:YV,tween:gV,delay:IV,duration:OV,ease:PV,easeVarying:NV,end:cX,[Symbol.iterator]:mr[Symbol.iterator]};function fX(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var hX={time:null,delay:0,duration:250,ease:fX};function dX(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function gX(e){var t,n;e instanceof Ur?(t=e._id,e=e._name):(t=eA(),(n=hX).time=Sw(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Lm(l,e,t,c,o,n||dX(l,t));return new Ur(i,this._parents,e,t)}df.prototype.interrupt=fV;df.prototype.transition=gX;const Jy=Math.PI,Qy=2*Jy,po=1e-6,mX=Qy-po;function nA(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function pX(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return nA;const n=10**t;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let iA=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?nA:pX(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,s,o){this._append`C${+t},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,i,r,s){if(t=+t,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-t,c=r-n,u=o-t,f=a-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>po)if(!(Math.abs(f*l-c*u)>po)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let d=i-o,g=r-a,m=l*l+c*c,_=d*d+g*g,p=Math.sqrt(m),y=Math.sqrt(h),x=s*Math.tan((Jy-Math.acos((m+h-_)/(2*p*y)))/2),w=x/y,v=x/p;Math.abs(w-1)>po&&this._append`L${t+w*u},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*d>u*g)},${this._x1=t+v*l},${this._y1=n+v*c}`}}arc(t,n,i,r,s,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=t+a,u=n+l,f=1^o,h=o?r-s:s-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>po||Math.abs(this._y1-u)>po)&&this._append`L${c},${u}`,i&&(h<0&&(h=h%Qy+Qy),h>mX?this._append`A${i},${i},0,1,${f},${t-a},${n-l}A${i},${i},0,1,${f},${this._x1=c},${this._y1=u}`:h>po&&this._append`A${i},${i},0,${+(h>=Jy)},${f},${this._x1=t+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Lr(e=3){return new iA(+e)}var yX=Array.prototype,rA=yX.slice;function _X(e,t){return e-t}function wX(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}const vs=e=>()=>e;function xX(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=bX(e,t[n]))return r;return 0}function bX(e,t){for(var n=t[0],i=t[1],r=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],c=l[0],u=l[1],f=e[a],h=f[0],d=f[1];if(vX(l,f,t))return 0;u>i!=d>i&&n<(h-c)*(i-u)/(d-u)+c&&(r=-r)}return r}function vX(e,t,n){var i;return EX(e,t,n)&&TX(e[i=+(e[0]===t[0])],n[i],t[i])}function EX(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function TX(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function CX(){}var pr=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function t_(){var e=1,t=1,n=pw,i=l;function r(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(_X);else{const f=Be(c,SX);for(u=Ws(...mI(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(c,f))}function s(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var h=[],d=[];return o(c,f,function(g){i(g,c,f),wX(g)>0?h.push([g]):d.push(g)}),d.forEach(function(g){for(var m=0,_=h.length,p;m<_;++m)if(xX((p=h[m])[0],g)!==-1){p.push(g);return}}),{type:"MultiPolygon",value:u,coordinates:h}}function o(c,u,f){var h=new Array,d=new Array,g,m,_,p,y,x;for(g=m=-1,p=fo(c[0],u),pr[p<<1].forEach(w);++g<e-1;)_=p,p=fo(c[g+1],u),pr[_|p<<1].forEach(w);for(pr[p<<0].forEach(w);++m<t-1;){for(g=-1,p=fo(c[m*e+e],u),y=fo(c[m*e],u),pr[p<<1|y<<2].forEach(w);++g<e-1;)_=p,p=fo(c[m*e+e+g+1],u),x=y,y=fo(c[m*e+g+1],u),pr[_|p<<1|y<<2|x<<3].forEach(w);pr[p|y<<3].forEach(w)}for(g=-1,y=c[m*e]>=u,pr[y<<2].forEach(w);++g<e-1;)x=y,y=fo(c[m*e+g+1],u),pr[y<<2|x<<3].forEach(w);pr[y<<3].forEach(w);function w(v){var b=[v[0][0]+g,v[0][1]+m],E=[v[1][0]+g,v[1][1]+m],C=a(b),I=a(E),S,R;(S=d[C])?(R=h[I])?(delete d[S.end],delete h[R.start],S===R?(S.ring.push(E),f(S.ring)):h[S.start]=d[R.end]={start:S.start,end:R.end,ring:S.ring.concat(R.ring)}):(delete d[S.end],S.ring.push(E),d[S.end=I]=S):(S=h[I])?(R=d[C])?(delete h[S.start],delete d[R.end],S===R?(S.ring.push(E),f(S.ring)):h[R.start]=d[S.end]={start:R.start,end:S.end,ring:R.ring.concat(S.ring)}):(delete h[S.start],S.ring.unshift(b),h[S.start=C]=S):h[C]=d[I]={start:C,end:I,ring:[b,E]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function l(c,u,f){c.forEach(function(h){var d=h[0],g=h[1],m=d|0,_=g|0,p=cp(u[_*e+m]);d>0&&d<e&&m===d&&(h[0]=cE(d,cp(u[_*e+m-1]),p,f)),g>0&&g<t&&_===g&&(h[1]=cE(g,cp(u[(_-1)*e+m]),p,f))})}return r.contour=s,r.size=function(c){if(!arguments.length)return[e,t];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,r},r.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?vs(rA.call(c)):vs(c),r):n},r.smooth=function(c){return arguments.length?(i=c?l:CX,r):i===l},r}function SX(e){return isFinite(e)?e:NaN}function fo(e,t){return e==null?!1:+e>=t}function cp(e){return e==null||isNaN(e=+e)?-1/0:e}function cE(e,t,n,i){const r=i-t,s=n-t,o=isFinite(r)||isFinite(s)?r/s:Math.sign(r)/Math.sign(s);return isNaN(o)?e:e+o-.5}function MX(e){return e[0]}function RX(e){return e[1]}function IX(){return 1}function AX(){var e=MX,t=RX,n=IX,i=960,r=500,s=20,o=2,a=s*3,l=i+a*2>>o,c=r+a*2>>o,u=vs(20);function f(y){var x=new Float32Array(l*c),w=Math.pow(2,-o),v=-1;for(const k of y){var b=(e(k,++v,y)+a)*w,E=(t(k,v,y)+a)*w,C=+n(k,v,y);if(C&&b>=0&&b<l&&E>=0&&E<c){var I=Math.floor(b),S=Math.floor(E),R=b-I-.5,M=E-S-.5;x[I+S*l]+=(1-R)*(1-M)*C,x[I+1+S*l]+=R*(1-M)*C,x[I+1+(S+1)*l]+=R*M*C,x[I+(S+1)*l]+=(1-R)*M*C}}return cI({data:x,width:l,height:c},s*w),x}function h(y){var x=f(y),w=u(x),v=Math.pow(2,2*o);return Array.isArray(w)||(w=Ws(Number.MIN_VALUE,Ue(x)/v,w)),t_().size([l,c]).thresholds(w.map(b=>b*v))(x).map((b,E)=>(b.value=+w[E],d(b)))}h.contours=function(y){var x=f(y),w=t_().size([l,c]),v=Math.pow(2,2*o),b=E=>{E=+E;var C=d(w.contour(x,E*v));return C.value=E,C};return Object.defineProperty(b,"max",{get:()=>Ue(x)/v}),b};function d(y){return y.coordinates.forEach(g),y}function g(y){y.forEach(m)}function m(y){y.forEach(_)}function _(y){y[0]=y[0]*Math.pow(2,o)-a,y[1]=y[1]*Math.pow(2,o)-a}function p(){return a=s*3,l=i+a*2>>o,c=r+a*2>>o,h}return h.x=function(y){return arguments.length?(e=typeof y=="function"?y:vs(+y),h):e},h.y=function(y){return arguments.length?(t=typeof y=="function"?y:vs(+y),h):t},h.weight=function(y){return arguments.length?(n=typeof y=="function"?y:vs(+y),h):n},h.size=function(y){if(!arguments.length)return[i,r];var x=+y[0],w=+y[1];if(!(x>=0&&w>=0))throw new Error("invalid size");return i=x,r=w,p()},h.cellSize=function(y){if(!arguments.length)return 1<<o;if(!((y=+y)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(y)/Math.LN2),p()},h.thresholds=function(y){return arguments.length?(u=typeof y=="function"?y:Array.isArray(y)?vs(rA.call(y)):vs(y),h):u},h.bandwidth=function(y){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((y=+y)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*y*y+1)-1)/2,p()},h}const $r=11102230246251565e-32,Ze=134217729,LX=(3+8*$r)*$r;function up(e,t,n,i,r){let s,o,a,l,c=t[0],u=i[0],f=0,h=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=i[++h]);let d=0;if(f<e&&h<n)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=t[++f]):(o=u+s,a=s-(o-u),u=i[++h]),s=o,a!==0&&(r[d++]=a);f<e&&h<n;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++h]),s=o,a!==0&&(r[d++]=a);for(;f<e;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f],s=o,a!==0&&(r[d++]=a);for(;h<n;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++h],s=o,a!==0&&(r[d++]=a);return(s!==0||d===0)&&(r[d++]=s),d}function OX(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function yf(e){return new Float64Array(e)}const kX=(3+16*$r)*$r,PX=(2+12*$r)*$r,FX=(9+64*$r)*$r*$r,Aa=yf(4),uE=yf(8),fE=yf(12),hE=yf(16),on=yf(4);function NX(e,t,n,i,r,s,o){let a,l,c,u,f,h,d,g,m,_,p,y,x,w,v,b,E,C;const I=e-r,S=n-r,R=t-s,M=i-s;w=I*M,h=Ze*I,d=h-(h-I),g=I-d,h=Ze*M,m=h-(h-M),_=M-m,v=g*_-(w-d*m-g*m-d*_),b=R*S,h=Ze*R,d=h-(h-R),g=R-d,h=Ze*S,m=h-(h-S),_=S-m,E=g*_-(b-d*m-g*m-d*_),p=v-E,f=v-p,Aa[0]=v-(p+f)+(f-E),y=w+p,f=y-w,x=w-(y-f)+(p-f),p=x-b,f=x-p,Aa[1]=x-(p+f)+(f-b),C=y+p,f=C-y,Aa[2]=y-(C-f)+(p-f),Aa[3]=C;let k=OX(4,Aa),O=PX*o;if(k>=O||-k>=O||(f=e-I,a=e-(I+f)+(f-r),f=n-S,c=n-(S+f)+(f-r),f=t-R,l=t-(R+f)+(f-s),f=i-M,u=i-(M+f)+(f-s),a===0&&l===0&&c===0&&u===0)||(O=FX*o+LX*Math.abs(k),k+=I*u+M*a-(R*c+S*l),k>=O||-k>=O))return k;w=a*M,h=Ze*a,d=h-(h-a),g=a-d,h=Ze*M,m=h-(h-M),_=M-m,v=g*_-(w-d*m-g*m-d*_),b=l*S,h=Ze*l,d=h-(h-l),g=l-d,h=Ze*S,m=h-(h-S),_=S-m,E=g*_-(b-d*m-g*m-d*_),p=v-E,f=v-p,on[0]=v-(p+f)+(f-E),y=w+p,f=y-w,x=w-(y-f)+(p-f),p=x-b,f=x-p,on[1]=x-(p+f)+(f-b),C=y+p,f=C-y,on[2]=y-(C-f)+(p-f),on[3]=C;const A=up(4,Aa,4,on,uE);w=I*u,h=Ze*I,d=h-(h-I),g=I-d,h=Ze*u,m=h-(h-u),_=u-m,v=g*_-(w-d*m-g*m-d*_),b=R*c,h=Ze*R,d=h-(h-R),g=R-d,h=Ze*c,m=h-(h-c),_=c-m,E=g*_-(b-d*m-g*m-d*_),p=v-E,f=v-p,on[0]=v-(p+f)+(f-E),y=w+p,f=y-w,x=w-(y-f)+(p-f),p=x-b,f=x-p,on[1]=x-(p+f)+(f-b),C=y+p,f=C-y,on[2]=y-(C-f)+(p-f),on[3]=C;const P=up(A,uE,4,on,fE);w=a*u,h=Ze*a,d=h-(h-a),g=a-d,h=Ze*u,m=h-(h-u),_=u-m,v=g*_-(w-d*m-g*m-d*_),b=l*c,h=Ze*l,d=h-(h-l),g=l-d,h=Ze*c,m=h-(h-c),_=c-m,E=g*_-(b-d*m-g*m-d*_),p=v-E,f=v-p,on[0]=v-(p+f)+(f-E),y=w+p,f=y-w,x=w-(y-f)+(p-f),p=x-b,f=x-p,on[1]=x-(p+f)+(f-b),C=y+p,f=C-y,on[2]=y-(C-f)+(p-f),on[3]=C;const N=up(P,fE,4,on,hE);return hE[N-1]}function bh(e,t,n,i,r,s){const o=(t-s)*(n-r),a=(e-r)*(i-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=kX*c?l:-NX(e,t,n,i,r,s,c)}const dE=Math.pow(2,-52),vh=new Uint32Array(512);class Yd{static from(t,n=WX,i=BX){const r=t.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=i(a)}return new Yd(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let S=0;S<o;S++){const R=t[2*S],M=t[2*S+1];R<a&&(a=R),M<l&&(l=M),R>c&&(c=R),M>u&&(u=M),this._ids[S]=S}const f=(a+c)/2,h=(l+u)/2;let d=1/0,g,m,_;for(let S=0;S<o;S++){const R=fp(f,h,t[2*S],t[2*S+1]);R<d&&(g=S,d=R)}const p=t[2*g],y=t[2*g+1];d=1/0;for(let S=0;S<o;S++){if(S===g)continue;const R=fp(p,y,t[2*S],t[2*S+1]);R<d&&R>0&&(m=S,d=R)}let x=t[2*m],w=t[2*m+1],v=1/0;for(let S=0;S<o;S++){if(S===g||S===m)continue;const R=zX(p,y,x,w,t[2*S],t[2*S+1]);R<v&&(_=S,v=R)}let b=t[2*_],E=t[2*_+1];if(v===1/0){for(let M=0;M<o;M++)this._dists[M]=t[2*M]-t[0]||t[2*M+1]-t[1];Ua(this._ids,this._dists,0,o-1);const S=new Uint32Array(o);let R=0;for(let M=0,k=-1/0;M<o;M++){const O=this._ids[M];this._dists[O]>k&&(S[R++]=O,k=this._dists[O])}this.hull=S.subarray(0,R),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(bh(p,y,x,w,b,E)<0){const S=m,R=x,M=w;m=_,x=b,w=E,_=S,b=R,E=M}const C=GX(p,y,x,w,b,E);this._cx=C.x,this._cy=C.y;for(let S=0;S<o;S++)this._dists[S]=fp(t[2*S],t[2*S+1],C.x,C.y);Ua(this._ids,this._dists,0,o-1),this._hullStart=g;let I=3;i[g]=n[_]=m,i[m]=n[g]=_,i[_]=n[m]=g,r[g]=0,r[m]=1,r[_]=2,s.fill(-1),s[this._hashKey(p,y)]=g,s[this._hashKey(x,w)]=m,s[this._hashKey(b,E)]=_,this.trianglesLen=0,this._addTriangle(g,m,_,-1,-1,-1);for(let S=0,R,M;S<this._ids.length;S++){const k=this._ids[S],O=t[2*k],A=t[2*k+1];if(S>0&&Math.abs(O-R)<=dE&&Math.abs(A-M)<=dE||(R=O,M=A,k===g||k===m||k===_))continue;let P=0;for(let Z=0,z=this._hashKey(O,A);Z<this._hashSize&&(P=s[(z+Z)%this._hashSize],!(P!==-1&&P!==i[P]));Z++);P=n[P];let N=P,G;for(;G=i[N],bh(O,A,t[2*N],t[2*N+1],t[2*G],t[2*G+1])>=0;)if(N=G,N===P){N=-1;break}if(N===-1)continue;let H=this._addTriangle(N,k,i[N],-1,-1,r[N]);r[k]=this._legalize(H+2),r[N]=H,I++;let U=i[N];for(;G=i[U],bh(O,A,t[2*U],t[2*U+1],t[2*G],t[2*G+1])<0;)H=this._addTriangle(U,k,G,r[k],-1,r[U]),r[k]=this._legalize(H+2),i[U]=U,I--,U=G;if(N===P)for(;G=n[N],bh(O,A,t[2*G],t[2*G+1],t[2*N],t[2*N+1])<0;)H=this._addTriangle(G,k,N,-1,r[N],r[G]),this._legalize(H+2),r[G]=H,i[N]=N,I--,N=G;this._hullStart=n[k]=N,i[N]=n[U]=k,i[k]=U,s[this._hashKey(O,A)]=k,s[this._hashKey(t[2*N],t[2*N+1])]=N}this.hull=new Uint32Array(I);for(let S=0,R=this._hullStart;S<I;S++)this.hull[S]=R,R=i[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(DX(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let s=0,o=0;for(;;){const a=i[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=vh[--s];continue}const c=a-a%3,u=l+(t+1)%3,f=c+(a+2)%3,h=n[o],d=n[t],g=n[u],m=n[f];if($X(r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*g],r[2*g+1],r[2*m],r[2*m+1])){n[t]=m,n[a]=h;const p=i[f];if(p===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,p),this._link(a,i[o]),this._link(o,f);const y=c+(a+1)%3;s<vh.length&&(vh[s++]=y)}else{if(s===0)break;t=vh[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function DX(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function fp(e,t,n,i){const r=e-n,s=t-i;return r*r+s*s}function $X(e,t,n,i,r,s,o,a){const l=e-o,c=t-a,u=n-o,f=i-a,h=r-o,d=s-a,g=l*l+c*c,m=u*u+f*f,_=h*h+d*d;return l*(f*_-m*d)-c*(u*_-m*h)+g*(u*d-f*h)<0}function zX(e,t,n,i,r,s){const o=n-e,a=i-t,l=r-e,c=s-t,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),d=(c*u-a*f)*h,g=(o*f-l*u)*h;return d*d+g*g}function GX(e,t,n,i,r,s){const o=n-e,a=i-t,l=r-e,c=s-t,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),d=e+(c*u-a*f)*h,g=t+(o*f-l*u)*h;return{x:d,y:g}}function Ua(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const s=e[r],o=t[s];let a=r-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const r=n+i>>1;let s=n+1,o=i;Tc(e,r,s),t[e[n]]>t[e[i]]&&Tc(e,n,i),t[e[s]]>t[e[i]]&&Tc(e,s,i),t[e[n]]>t[e[s]]&&Tc(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;Tc(e,s,o)}e[n+1]=e[o],e[o]=a,i-s+1>=o-n?(Ua(e,t,s,i),Ua(e,t,n,o-1)):(Ua(e,t,n,o-1),Ua(e,t,s,i))}}function Tc(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function WX(e){return e[0]}function BX(e){return e[1]}const gE=1e-6;class Ao{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,s=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>gE||Math.abs(this._y1-s)>gE)&&(this._+="L"+r+","+s),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class e_{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let YX=class{constructor(t,[n,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let m=0,_=0,p=i.length,y,x;m<p;m+=3,_+=2){const w=i[m]*2,v=i[m+1]*2,b=i[m+2]*2,E=t[w],C=t[w+1],I=t[v],S=t[v+1],R=t[b],M=t[b+1],k=I-E,O=S-C,A=R-E,P=M-C,N=(k*P-O*A)*2;if(Math.abs(N)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const G=1e9*Math.sign((s-E)*P-(o-C)*A);y=(E+R)/2-G*P,x=(C+M)/2+G*A}else{const G=1/N,H=k*k+O*O,U=A*A+P*P;y=E+(P*H-O*U)*G,x=C+(k*U-A*H)*G}a[_]=y,a[_+1]=x}let l=n[n.length-1],c,u=l*4,f,h=t[2*l],d,g=t[2*l+1];r.fill(0);for(let m=0;m<n.length;++m)l=n[m],c=u,f=h,d=g,u=l*4,h=t[2*l],g=t[2*l+1],r[c+2]=r[u]=d-g,r[c+3]=r[u+1]=h-f}render(t){const n=t==null?t=new Ao:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=i.length;u<f;++u){const h=i[u];if(h<u)continue;const d=Math.floor(u/3)*2,g=Math.floor(h/3)*2,m=o[d],_=o[d+1],p=o[g],y=o[g+1];this._renderSegment(m,_,p,y,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(r[c]/3)*2,h=o[f],d=o[f+1],g=l*4,m=this._project(h,d,a[g+2],a[g+3]);m&&this._renderSegment(h,d,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Ao:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Ao:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new e_;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,s){let o;const a=this._regioncode(t,n),l=this._regioncode(i,r);a===0&&l===0?(s.moveTo(t,n),s.lineTo(i,r)):(o=this._clipSegment(t,n,i,r,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[s]===r[a]&&n[s+1]===r[a+1]&&n[(s+2)%o]===r[(a+l-2)%l]&&n[(s+3)%o]===r[(a+l-1)%l]){yield i;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,o=i[t];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=r[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,s,o,a=n[i-2],l=n[i-1],c,u=this._regioncode(a,l),f,h=0;for(let d=0;d<i;d+=2)if(s=a,o=l,a=n[d],l=n[d+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=h,h=0,r?r.push(a,l):r=[a,l];else{let g,m,_,p,y;if(c===0){if((g=this._clipSegment(s,o,a,l,c,u))===null)continue;[m,_,p,y]=g}else{if((g=this._clipSegment(a,l,s,o,u,c))===null)continue;[p,y,m,_]=g,f=h,h=this._edgecode(m,_),f&&h&&this._edge(t,f,h,r,r.length),r?r.push(m,_):r=[m,_]}f=h,h=this._edgecode(p,y),f&&h&&this._edge(t,f,h,r,r.length),r?r.push(p,y):r=[p,y]}if(r)f=h,h=this._edgecode(r[0],r[1]),f&&h&&this._edge(t,f,h,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,s,o){const a=s<o;for(a&&([t,n,i,r,s,o]=[i,r,t,n,o,s]);;){if(s===0&&o===0)return a?[i,r,t,n]:[t,n,i,r];if(s&o)return null;let l,c,u=s||o;u&8?(l=t+(i-t)*(this.ymax-n)/(r-n),c=this.ymax):u&4?(l=t+(i-t)*(this.ymin-n)/(r-n),c=this.ymin):u&2?(c=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(c=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(i=l,r=c,o=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,u=a.length,f,h=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=h,h=this._edgecode(a[c],a[c+1]),f&&h&&(c=this._edge(t,f,h,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,i,r,s){for(;n!==i;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(t,o,a)&&(r.splice(s,0,o,a),s+=2)}return s}_project(t,n,i,r){let s=1/0,o,a,l;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<s&&(l=this.ymin,a=t+(s=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<s&&(l=this.ymax,a=t+(s=o)*i)}if(i>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/i)<s&&(a=this.xmax,l=n+(s=o)*r)}else if(i<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/i)<s&&(a=this.xmin,l=n+(s=o)*r)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const UX=2*Math.PI,La=Math.pow;function VX(e){return e[0]}function XX(e){return e[1]}function HX(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],s=2*t[i+1],o=2*t[i+2];if((n[o]-n[r])*(n[s+1]-n[r+1])-(n[s]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function jX(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Ks{static from(t,n=VX,i=XX,r){return new Ks("length"in t?ZX(t,n,i,r):Float64Array.from(qX(t,n,i,r)))}constructor(t){this._delaunator=new Yd(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&HX(t)){this.collinear=Int32Array.from({length:n.length/2},(h,d)=>d).sort((h,d)=>n[2*h]-n[2*d]||n[2*h+1]-n[2*d+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let h=0,d=n.length/2;h<d;++h){const g=jX(n[2*h],n[2*h+1],f);n[2*h]=g[0],n[2*h+1]=g[1]}this._delaunator=new Yd(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=i.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(i[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=r.length;l<c;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new YX(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==t)return;if(c=s[c],c===-1){const f=i[(r[t]+1)%i.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let s;for(;(s=this._step(i,t,n))>=0&&s!==i&&s!==r;)i=s;return s}_step(t,n,i){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(r[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=La(n-c[t*2],2)+La(i-c[t*2+1],2);const h=r[t];let d=h;do{let g=l[d];const m=La(n-c[g*2],2)+La(i-c[g*2+1],2);if(m<f&&(f=m,u=g),d=d%3===2?d-2:d+1,l[d]!==t)break;if(d=a[d],d===-1){if(d=s[(o[t]+1)%s.length],d!==g&&La(n-c[d*2],2)+La(i-c[d*2+1],2)<f)return d;break}}while(d!==h);return u}render(t){const n=t==null?t=new Ao:void 0,{points:i,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;t.moveTo(i[c],i[c+1]),t.lineTo(i[u],i[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Ao:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],l=r[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,UX)}return i&&i.value()}renderHull(t){const n=t==null?t=new Ao:void 0,{hull:i,points:r}=this,s=i[0]*2,o=i.length;t.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const l=2*i[a];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new e_;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Ao:void 0,{points:r,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new e_;return this.renderTriangle(t,n),n.value()}}function ZX(e,t,n,i){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=e[o];s[o*2]=t.call(i,a,o,e),s[o*2+1]=n.call(i,a,o,e)}return s}function*qX(e,t,n,i){let r=0;for(const s of e)yield t.call(i,s,r,e),yield n.call(i,s,r,e),++r}function KX(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ud(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Rl(e){return e=Ud(Math.abs(e)),e?e[1]:NaN}function JX(e,t){return function(n,i){for(var r=n.length,s=[],o=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function QX(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var tH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pu(e){if(!(t=tH.exec(e)))throw new Error("invalid format: "+e);var t;return new Iw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Pu.prototype=Iw.prototype;function Iw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Iw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eH(e){t:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break t;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var sA;function nH(e,t){var n=Ud(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(sA=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Ud(e,Math.max(0,t+s-1))[0]}function mE(e,t){var n=Ud(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const pE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:KX,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>mE(e*100,t),r:mE,s:nH,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yE(e){return e}var _E=Array.prototype.map,wE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function iH(e){var t=e.grouping===void 0||e.thousands===void 0?yE:JX(_E.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?yE:QX(_E.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=Pu(f);var h=f.fill,d=f.align,g=f.sign,m=f.symbol,_=f.zero,p=f.width,y=f.comma,x=f.precision,w=f.trim,v=f.type;v==="n"?(y=!0,v="g"):pE[v]||(x===void 0&&(x=12),w=!0,v="g"),(_||h==="0"&&d==="=")&&(_=!0,h="0",d="=");var b=m==="$"?n:m==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",E=m==="$"?i:/[%p]/.test(v)?o:"",C=pE[v],I=/[defgprs%]/.test(v);x=x===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function S(R){var M=b,k=E,O,A,P;if(v==="c")k=C(R)+k,R="";else{R=+R;var N=R<0||1/R<0;if(R=isNaN(R)?l:C(Math.abs(R),x),w&&(R=eH(R)),N&&+R==0&&g!=="+"&&(N=!1),M=(N?g==="("?g:a:g==="-"||g==="("?"":g)+M,k=(v==="s"?wE[8+sA/3]:"")+k+(N&&g==="("?")":""),I){for(O=-1,A=R.length;++O<A;)if(P=R.charCodeAt(O),48>P||P>57){k=(P===46?r+R.slice(O+1):R.slice(O))+k,R=R.slice(0,O);break}}}y&&!_&&(R=t(R,1/0));var G=M.length+R.length+k.length,H=G<p?new Array(p-G+1).join(h):"";switch(y&&_&&(R=t(H+R,H.length?p-k.length:1/0),H=""),d){case"<":R=M+R+k+H;break;case"=":R=M+H+R+k;break;case"^":R=H.slice(0,G=H.length>>1)+M+R+k+H.slice(G);break;default:R=H+M+R+k;break}return s(R)}return S.toString=function(){return f+""},S}function u(f,h){var d=c((f=Pu(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Rl(h)/3)))*3,m=Math.pow(10,-g),_=wE[8+g/3];return function(p){return d(m*p)+_}}return{format:c,formatPrefix:u}}var Eh,tc,oA;rH({thousands:",",grouping:[3],currency:["$",""]});function rH(e){return Eh=iH(e),tc=Eh.format,oA=Eh.formatPrefix,Eh}function sH(e){return Math.max(0,-Rl(Math.abs(e)))}function oH(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rl(t)/3)))*3-Rl(Math.abs(e)))}function aH(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Rl(t)-Rl(e))+1}var mt=1e-6,Vd=1e-12,It=Math.PI,be=It/2,xE=It/4,Wn=It*2,Xe=180/It,Gt=It/180,Xt=Math.abs,ec=Math.atan,Ai=Math.atan2,yt=Math.cos,Th=Math.ceil,aA=Math.exp,n_=Math.hypot,Xd=Math.log,hp=Math.pow,dt=Math.sin,ei=Math.sign||function(e){return e>0?1:e<0?-1:0},mn=Math.sqrt,Aw=Math.tan;function lA(e){return e>1?0:e<-1?It:Math.acos(e)}function Sn(e){return e>1?be:e<-1?-be:Math.asin(e)}function Nn(){}function Hd(e,t){e&&vE.hasOwnProperty(e.type)&&vE[e.type](e,t)}var bE={Feature:function(e,t){Hd(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Hd(n[i].geometry,t)}},vE={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){i_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)i_(n[i],t,0)},Polygon:function(e,t){EE(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)EE(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Hd(n[i],t)}};function i_(e,t,n){var i=-1,r=e.length-n,s;for(t.lineStart();++i<r;)s=e[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function EE(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)i_(e[n],t,1);t.polygonEnd()}function Ts(e,t){e&&bE.hasOwnProperty(e.type)?bE[e.type](e,t):Hd(e,t)}function r_(e){return[Ai(e[1],e[0]),Sn(e[2])]}function Il(e){var t=e[0],n=e[1],i=yt(n);return[i*yt(t),i*dt(t),dt(n)]}function Ch(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function jd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function dp(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Sh(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function s_(e){var t=mn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Wc,Zd,qd,Kd,Jd,Qd,tg,eg,o_,a_,l_,cA,uA,ln,cn,un,vi={sphere:Nn,point:Lw,lineStart:TE,lineEnd:CE,polygonStart:function(){vi.lineStart=uH,vi.lineEnd=fH},polygonEnd:function(){vi.lineStart=TE,vi.lineEnd=CE}};function Lw(e,t){e*=Gt,t*=Gt;var n=yt(t);_f(n*yt(e),n*dt(e),dt(t))}function _f(e,t,n){++Wc,qd+=(e-qd)/Wc,Kd+=(t-Kd)/Wc,Jd+=(n-Jd)/Wc}function TE(){vi.point=lH}function lH(e,t){e*=Gt,t*=Gt;var n=yt(t);ln=n*yt(e),cn=n*dt(e),un=dt(t),vi.point=cH,_f(ln,cn,un)}function cH(e,t){e*=Gt,t*=Gt;var n=yt(t),i=n*yt(e),r=n*dt(e),s=dt(t),o=Ai(mn((o=cn*s-un*r)*o+(o=un*i-ln*s)*o+(o=ln*r-cn*i)*o),ln*i+cn*r+un*s);Zd+=o,Qd+=o*(ln+(ln=i)),tg+=o*(cn+(cn=r)),eg+=o*(un+(un=s)),_f(ln,cn,un)}function CE(){vi.point=Lw}function uH(){vi.point=hH}function fH(){fA(cA,uA),vi.point=Lw}function hH(e,t){cA=e,uA=t,e*=Gt,t*=Gt,vi.point=fA;var n=yt(t);ln=n*yt(e),cn=n*dt(e),un=dt(t),_f(ln,cn,un)}function fA(e,t){e*=Gt,t*=Gt;var n=yt(t),i=n*yt(e),r=n*dt(e),s=dt(t),o=cn*s-un*r,a=un*i-ln*s,l=ln*r-cn*i,c=n_(o,a,l),u=Sn(c),f=c&&-u/c;o_.add(f*o),a_.add(f*a),l_.add(f*l),Zd+=u,Qd+=u*(ln+(ln=i)),tg+=u*(cn+(cn=r)),eg+=u*(un+(un=s)),_f(ln,cn,un)}function dH(e){Wc=Zd=qd=Kd=Jd=Qd=tg=eg=0,o_=new Ji,a_=new Ji,l_=new Ji,Ts(e,vi);var t=+o_,n=+a_,i=+l_,r=n_(t,n,i);return r<Vd&&(t=Qd,n=tg,i=eg,Zd<mt&&(t=qd,n=Kd,i=Jd),r=n_(t,n,i),r<Vd)?[NaN,NaN]:[Ai(n,t)*Xe,Sn(i/r)*Xe]}function c_(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function u_(e,t){return Xt(e)>It&&(e-=Math.round(e/Wn)*Wn),[e,t]}u_.invert=u_;function hA(e,t,n){return(e%=Wn)?t||n?c_(ME(e),RE(t,n)):ME(e):t||n?RE(t,n):u_}function SE(e){return function(t,n){return t+=e,Xt(t)>It&&(t-=Math.round(t/Wn)*Wn),[t,n]}}function ME(e){var t=SE(e);return t.invert=SE(-e),t}function RE(e,t){var n=yt(e),i=dt(e),r=yt(t),s=dt(t);function o(a,l){var c=yt(l),u=yt(a)*c,f=dt(a)*c,h=dt(l),d=h*n+u*i;return[Ai(f*r-d*s,u*n-h*i),Sn(d*r+f*s)]}return o.invert=function(a,l){var c=yt(l),u=yt(a)*c,f=dt(a)*c,h=dt(l),d=h*r-f*s;return[Ai(f*r+h*s,u*n+d*i),Sn(d*n-u*i)]},o}function gH(e){e=hA(e[0]*Gt,e[1]*Gt,e.length>2?e[2]*Gt:0);function t(n){return n=e(n[0]*Gt,n[1]*Gt),n[0]*=Xe,n[1]*=Xe,n}return t.invert=function(n){return n=e.invert(n[0]*Gt,n[1]*Gt),n[0]*=Xe,n[1]*=Xe,n},t}function mH(e,t,n,i,r,s){if(n){var o=yt(t),a=dt(t),l=i*n;r==null?(r=t+i*Wn,s=t-l/2):(r=IE(o,r),s=IE(o,s),(i>0?r<s:r>s)&&(r+=i*Wn));for(var c,u=r;i>0?u>s:u<s;u-=l)c=r_([o,-a*yt(u),-a*dt(u)]),e.point(c[0],c[1])}}function IE(e,t){t=Il(t),t[0]-=e,s_(t);var n=lA(-t[1]);return((-t[2]<0?-n:n)+Wn-mt)%Wn}function dA(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Nn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Qh(e,t){return Xt(e[0]-t[0])<mt&&Xt(e[1]-t[1])<mt}function Mh(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function gA(e,t,n,i,r){var s=[],o=[],a,l;if(e.forEach(function(g){if(!((m=g.length-1)<=0)){var m,_=g[0],p=g[m],y;if(Qh(_,p)){if(!_[2]&&!p[2]){for(r.lineStart(),a=0;a<m;++a)r.point((_=g[a])[0],_[1]);r.lineEnd();return}p[0]+=2*mt}s.push(y=new Mh(_,g,null,!0)),o.push(y.o=new Mh(_,null,y,!1)),s.push(y=new Mh(p,g,null,!1)),o.push(y.o=new Mh(p,null,y,!0))}}),!!s.length){for(o.sort(t),AE(s),AE(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,l=u.length;a<l;++a)r.point((f=u[a])[0],f[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(d)for(u=h.p.z,a=u.length-1;a>=0;--a)r.point((f=u[a])[0],f[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);r.lineEnd()}}}function AE(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function gp(e){return Xt(e[0])<=It?e[0]:ei(e[0])*((Xt(e[0])+It)%Wn-It)}function pH(e,t){var n=gp(t),i=t[1],r=dt(i),s=[dt(n),-yt(n),0],o=0,a=0,l=new Ji;r===1?i=be+mt:r===-1&&(i=-be-mt);for(var c=0,u=e.length;c<u;++c)if(h=(f=e[c]).length)for(var f,h,d=f[h-1],g=gp(d),m=d[1]/2+xE,_=dt(m),p=yt(m),y=0;y<h;++y,g=w,_=b,p=E,d=x){var x=f[y],w=gp(x),v=x[1]/2+xE,b=dt(v),E=yt(v),C=w-g,I=C>=0?1:-1,S=I*C,R=S>It,M=_*b;if(l.add(Ai(M*I*dt(S),p*E+M*yt(S))),o+=R?C+I*Wn:C,R^g>=n^w>=n){var k=jd(Il(d),Il(x));s_(k);var O=jd(s,k);s_(O);var A=(R^C>=0?-1:1)*Sn(O[2]);(i>A||i===A&&(k[0]||k[1]))&&(a+=R^C>=0?1:-1)}}return(o<-mt||o<mt&&l<-Vd)^a&1}function mA(e,t,n,i){return function(r){var s=t(r),o=dA(),a=t(o),l=!1,c,u,f,h={point:d,lineStart:m,lineEnd:_,polygonStart:function(){h.point=p,h.lineStart=y,h.lineEnd=x,u=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=_,u=_I(u);var w=pH(c,i);u.length?(l||(r.polygonStart(),l=!0),gA(u,_H,w,n,r)):w&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(w,v){e(w,v)&&r.point(w,v)}function g(w,v){s.point(w,v)}function m(){h.point=g,s.lineStart()}function _(){h.point=d,s.lineEnd()}function p(w,v){f.push([w,v]),a.point(w,v)}function y(){a.lineStart(),f=[]}function x(){p(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),v=o.result(),b,E=v.length,C,I,S;if(f.pop(),c.push(f),f=null,!!E){if(w&1){if(I=v[0],(C=I.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),b=0;b<C;++b)r.point((S=I[b])[0],S[1]);r.lineEnd()}return}E>1&&w&2&&v.push(v.pop().concat(v.shift())),u.push(v.filter(yH))}}return h}}function yH(e){return e.length>1}function _H(e,t){return((e=e.x)[0]<0?e[1]-be-mt:be-e[1])-((t=t.x)[0]<0?t[1]-be-mt:be-t[1])}const LE=mA(function(){return!0},wH,bH,[-It,-be]);function wH(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(s,o){var a=s>0?It:-It,l=Xt(s-t);Xt(l-It)<mt?(e.point(t,n=(n+o)/2>0?be:-be),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),r=0):i!==a&&l>=It&&(Xt(t-i)<mt&&(t-=i*mt),Xt(s-a)<mt&&(s-=a*mt),n=xH(t,n,s,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),r=0),e.point(t=s,n=o),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function xH(e,t,n,i){var r,s,o=dt(e-n);return Xt(o)>mt?ec((dt(t)*(s=yt(i))*dt(n)-dt(i)*(r=yt(t))*dt(e))/(r*s*o)):(t+i)/2}function bH(e,t,n,i){var r;if(e==null)r=n*be,i.point(-It,r),i.point(0,r),i.point(It,r),i.point(It,0),i.point(It,-r),i.point(0,-r),i.point(-It,-r),i.point(-It,0),i.point(-It,r);else if(Xt(e[0]-t[0])>mt){var s=e[0]<t[0]?It:-It;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function vH(e){var t=yt(e),n=6*Gt,i=t>0,r=Xt(t)>mt;function s(u,f,h,d){mH(d,e,n,h,u,f)}function o(u,f){return yt(u)*yt(f)>t}function a(u){var f,h,d,g,m;return{lineStart:function(){g=d=!1,m=1},point:function(_,p){var y=[_,p],x,w=o(_,p),v=i?w?0:c(_,p):w?c(_+(_<0?It:-It),p):0;if(!f&&(g=d=w)&&u.lineStart(),w!==d&&(x=l(f,y),(!x||Qh(f,x)||Qh(y,x))&&(y[2]=1)),w!==d)m=0,w?(u.lineStart(),x=l(y,f),u.point(x[0],x[1])):(x=l(f,y),u.point(x[0],x[1],2),u.lineEnd()),f=x;else if(r&&f&&i^w){var b;!(v&h)&&(b=l(y,f,!0))&&(m=0,i?(u.lineStart(),u.point(b[0][0],b[0][1]),u.point(b[1][0],b[1][1]),u.lineEnd()):(u.point(b[1][0],b[1][1]),u.lineEnd(),u.lineStart(),u.point(b[0][0],b[0][1],3)))}w&&(!f||!Qh(f,y))&&u.point(y[0],y[1]),f=y,d=w,h=v},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return m|(g&&d)<<1}}}function l(u,f,h){var d=Il(u),g=Il(f),m=[1,0,0],_=jd(d,g),p=Ch(_,_),y=_[0],x=p-y*y;if(!x)return!h&&u;var w=t*p/x,v=-t*y/x,b=jd(m,_),E=Sh(m,w),C=Sh(_,v);dp(E,C);var I=b,S=Ch(E,I),R=Ch(I,I),M=S*S-R*(Ch(E,E)-1);if(!(M<0)){var k=mn(M),O=Sh(I,(-S-k)/R);if(dp(O,E),O=r_(O),!h)return O;var A=u[0],P=f[0],N=u[1],G=f[1],H;P<A&&(H=A,A=P,P=H);var U=P-A,Z=Xt(U-It)<mt,z=Z||U<mt;if(!Z&&G<N&&(H=N,N=G,G=H),z?Z?N+G>0^O[1]<(Xt(O[0]-A)<mt?N:G):N<=O[1]&&O[1]<=G:U>It^(A<=O[0]&&O[0]<=P)){var Q=Sh(I,(-S+k)/R);return dp(Q,E),[O,r_(Q)]}}}function c(u,f){var h=i?e:It-e,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return mA(o,a,s,i?[0,-e]:[-It,e-It])}function EH(e,t,n,i,r,s){var o=e[0],a=e[1],l=t[0],c=t[1],u=0,f=1,h=l-o,d=c-a,g;if(g=n-o,!(!h&&g>0)){if(g/=h,h<0){if(g<u)return;g<f&&(f=g)}else if(h>0){if(g>f)return;g>u&&(u=g)}if(g=r-o,!(!h&&g<0)){if(g/=h,h<0){if(g>f)return;g>u&&(u=g)}else if(h>0){if(g<u)return;g<f&&(f=g)}if(g=i-a,!(!d&&g>0)){if(g/=d,d<0){if(g<u)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>u&&(u=g)}if(g=s-a,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>u&&(u=g)}else if(d>0){if(g<u)return;g<f&&(f=g)}return u>0&&(e[0]=o+u*h,e[1]=a+u*d),f<1&&(t[0]=o+f*h,t[1]=a+f*d),!0}}}}}var Bc=1e9,Rh=-Bc;function pA(e,t,n,i){function r(c,u){return e<=c&&c<=n&&t<=u&&u<=i}function s(c,u,f,h){var d=0,g=0;if(c==null||(d=o(c,f))!==(g=o(u,f))||l(c,u)<0^f>0)do h.point(d===0||d===3?e:n,d>1?i:t);while((d=(d+f+4)%4)!==g);else h.point(u[0],u[1])}function o(c,u){return Xt(c[0]-e)<mt?u>0?0:3:Xt(c[0]-n)<mt?u>0?2:1:Xt(c[1]-t)<mt?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),h=o(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=dA(),h,d,g,m,_,p,y,x,w,v,b,E={point:C,lineStart:M,lineEnd:k,polygonStart:S,polygonEnd:R};function C(A,P){r(A,P)&&u.point(A,P)}function I(){for(var A=0,P=0,N=d.length;P<N;++P)for(var G=d[P],H=1,U=G.length,Z=G[0],z,Q,nt=Z[0],st=Z[1];H<U;++H)z=nt,Q=st,Z=G[H],nt=Z[0],st=Z[1],Q<=i?st>i&&(nt-z)*(i-Q)>(st-Q)*(e-z)&&++A:st<=i&&(nt-z)*(i-Q)<(st-Q)*(e-z)&&--A;return A}function S(){u=f,h=[],d=[],b=!0}function R(){var A=I(),P=b&&A,N=(h=_I(h)).length;(P||N)&&(c.polygonStart(),P&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),N&&gA(h,a,A,s,c),c.polygonEnd()),u=c,h=d=g=null}function M(){E.point=O,d&&d.push(g=[]),v=!0,w=!1,y=x=NaN}function k(){h&&(O(m,_),p&&w&&f.rejoin(),h.push(f.result())),E.point=C,w&&u.lineEnd()}function O(A,P){var N=r(A,P);if(d&&g.push([A,P]),v)m=A,_=P,p=N,v=!1,N&&(u.lineStart(),u.point(A,P));else if(N&&w)u.point(A,P);else{var G=[y=Math.max(Rh,Math.min(Bc,y)),x=Math.max(Rh,Math.min(Bc,x))],H=[A=Math.max(Rh,Math.min(Bc,A)),P=Math.max(Rh,Math.min(Bc,P))];EH(G,H,e,t,n,i)?(w||(u.lineStart(),u.point(G[0],G[1])),u.point(H[0],H[1]),N||u.lineEnd(),b=!1):N&&(u.lineStart(),u.point(A,P),b=!1)}y=A,x=P,w=N}return E}}function OE(e,t,n){var i=ti(e,t-mt,n).concat(t);return function(r){return i.map(function(s){return[r,s]})}}function kE(e,t,n){var i=ti(e,t-mt,n).concat(t);return function(r){return i.map(function(s){return[s,r]})}}function TH(){var e,t,n,i,r,s,o,a,l=10,c=l,u=90,f=360,h,d,g,m,_=2.5;function p(){return{type:"MultiLineString",coordinates:y()}}function y(){return ti(Th(i/u)*u,n,u).map(g).concat(ti(Th(a/f)*f,o,f).map(m)).concat(ti(Th(t/l)*l,e,l).filter(function(x){return Xt(x%u)>mt}).map(h)).concat(ti(Th(s/c)*c,r,c).filter(function(x){return Xt(x%f)>mt}).map(d))}return p.lines=function(){return y().map(function(x){return{type:"LineString",coordinates:x}})},p.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(m(o).slice(1),g(n).reverse().slice(1),m(a).reverse().slice(1))]}},p.extent=function(x){return arguments.length?p.extentMajor(x).extentMinor(x):p.extentMinor()},p.extentMajor=function(x){return arguments.length?(i=+x[0][0],n=+x[1][0],a=+x[0][1],o=+x[1][1],i>n&&(x=i,i=n,n=x),a>o&&(x=a,a=o,o=x),p.precision(_)):[[i,a],[n,o]]},p.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],s=+x[0][1],r=+x[1][1],t>e&&(x=t,t=e,e=x),s>r&&(x=s,s=r,r=x),p.precision(_)):[[t,s],[e,r]]},p.step=function(x){return arguments.length?p.stepMajor(x).stepMinor(x):p.stepMinor()},p.stepMajor=function(x){return arguments.length?(u=+x[0],f=+x[1],p):[u,f]},p.stepMinor=function(x){return arguments.length?(l=+x[0],c=+x[1],p):[l,c]},p.precision=function(x){return arguments.length?(_=+x,h=OE(s,r,90),d=kE(t,e,_),g=OE(a,o,90),m=kE(i,n,_),p):_},p.extentMajor([[-180,-90+mt],[180,90-mt]]).extentMinor([[-180,-80-mt],[180,80+mt]])}function CH(){return TH()()}const f_=e=>e;var mp=new Ji,h_=new Ji,yA,_A,d_,g_,Cs={point:Nn,lineStart:Nn,lineEnd:Nn,polygonStart:function(){Cs.lineStart=SH,Cs.lineEnd=RH},polygonEnd:function(){Cs.lineStart=Cs.lineEnd=Cs.point=Nn,mp.add(Xt(h_)),h_=new Ji},result:function(){var e=mp/2;return mp=new Ji,e}};function SH(){Cs.point=MH}function MH(e,t){Cs.point=wA,yA=d_=e,_A=g_=t}function wA(e,t){h_.add(g_*e-d_*t),d_=e,g_=t}function RH(){wA(yA,_A)}const PE=Cs;var Al=1/0,ng=Al,Fu=-Al,ig=Fu,IH={point:AH,lineStart:Nn,lineEnd:Nn,polygonStart:Nn,polygonEnd:Nn,result:function(){var e=[[Al,ng],[Fu,ig]];return Fu=ig=-(ng=Al=1/0),e}};function AH(e,t){e<Al&&(Al=e),e>Fu&&(Fu=e),t<ng&&(ng=t),t>ig&&(ig=t)}const rg=IH;var m_=0,p_=0,Yc=0,sg=0,og=0,Va=0,y_=0,__=0,Uc=0,xA,bA,Vi,Xi,wi={point:ra,lineStart:FE,lineEnd:NE,polygonStart:function(){wi.lineStart=kH,wi.lineEnd=PH},polygonEnd:function(){wi.point=ra,wi.lineStart=FE,wi.lineEnd=NE},result:function(){var e=Uc?[y_/Uc,__/Uc]:Va?[sg/Va,og/Va]:Yc?[m_/Yc,p_/Yc]:[NaN,NaN];return m_=p_=Yc=sg=og=Va=y_=__=Uc=0,e}};function ra(e,t){m_+=e,p_+=t,++Yc}function FE(){wi.point=LH}function LH(e,t){wi.point=OH,ra(Vi=e,Xi=t)}function OH(e,t){var n=e-Vi,i=t-Xi,r=mn(n*n+i*i);sg+=r*(Vi+e)/2,og+=r*(Xi+t)/2,Va+=r,ra(Vi=e,Xi=t)}function NE(){wi.point=ra}function kH(){wi.point=FH}function PH(){vA(xA,bA)}function FH(e,t){wi.point=vA,ra(xA=Vi=e,bA=Xi=t)}function vA(e,t){var n=e-Vi,i=t-Xi,r=mn(n*n+i*i);sg+=r*(Vi+e)/2,og+=r*(Xi+t)/2,Va+=r,r=Xi*e-Vi*t,y_+=r*(Vi+e),__+=r*(Xi+t),Uc+=r*3,ra(Vi=e,Xi=t)}const DE=wi;function EA(e){this._context=e}EA.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Wn);break}}},result:Nn};var w_=new Ji,pp,TA,CA,Vc,Xc,ag={point:Nn,lineStart:function(){ag.point=NH},lineEnd:function(){pp&&SA(TA,CA),ag.point=Nn},polygonStart:function(){pp=!0},polygonEnd:function(){pp=null},result:function(){var e=+w_;return w_=new Ji,e}};function NH(e,t){ag.point=SA,TA=Vc=e,CA=Xc=t}function SA(e,t){Vc-=e,Xc-=t,w_.add(mn(Vc*Vc+Xc*Xc)),Vc=e,Xc=t}const $E=ag;let zE,lg,GE,WE;class BE{constructor(t){this._append=t==null?MA:DH(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==GE||this._append!==lg){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,GE=i,lg=this._append,WE=this._,this._=r}this._+=WE;break}}}result(){const t=this._;return this._="",t.length?t:null}}function MA(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function DH(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return MA;if(t!==zE){const n=10**t;zE=t,lg=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return lg}function Js(e,t){let n=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),Ts(a,r(s))),s.result()}return o.area=function(a){return Ts(a,r(PE)),PE.result()},o.measure=function(a){return Ts(a,r($E)),$E.result()},o.bounds=function(a){return Ts(a,r(rg)),rg.result()},o.centroid=function(a){return Ts(a,r(DE)),DE.result()},o.projection=function(a){return arguments.length?(r=a==null?(e=null,f_):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new BE(n)):new EA(t=a),typeof i!="function"&&s.pointRadius(i),o):t},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new BE(n)),o},o.projection(e).digits(n).context(t)}function cg(e){return{stream:Om(e)}}function Om(e){return function(t){var n=new x_;for(var i in e)n[i]=e[i];return n.stream=t,n}}function x_(){}x_.prototype={constructor:x_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ow(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Ts(n,e.stream(rg)),t(rg.result()),i!=null&&e.clipExtent(i),e}function kw(e,t,n){return Ow(e,function(i){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(s-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function RA(e,t,n){return kw(e,[[0,0],t],n)}function IA(e,t,n){return Ow(e,function(i){var r=+t,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];e.scale(150*s).translate([o,a])},n)}function AA(e,t,n){return Ow(e,function(i){var r=+t,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var YE=16,$H=yt(30*Gt);function UE(e,t){return+t?GH(e,t):zH(e)}function zH(e){return Om({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function GH(e,t){function n(i,r,s,o,a,l,c,u,f,h,d,g,m,_){var p=c-i,y=u-r,x=p*p+y*y;if(x>4*t&&m--){var w=o+h,v=a+d,b=l+g,E=mn(w*w+v*v+b*b),C=Sn(b/=E),I=Xt(Xt(b)-1)<mt||Xt(s-f)<mt?(s+f)/2:Ai(v,w),S=e(I,C),R=S[0],M=S[1],k=R-i,O=M-r,A=y*k-p*O;(A*A/x>t||Xt((p*k+y*O)/x-.5)>.3||o*h+a*d+l*g<$H)&&(n(i,r,s,o,a,l,R,M,I,w/=E,v/=E,b,m,_),_.point(R,M),n(R,M,I,w,v,b,c,u,f,h,d,g,m,_))}}return function(i){var r,s,o,a,l,c,u,f,h,d,g,m,_={point:p,lineStart:y,lineEnd:w,polygonStart:function(){i.polygonStart(),_.lineStart=v},polygonEnd:function(){i.polygonEnd(),_.lineStart=y}};function p(C,I){C=e(C,I),i.point(C[0],C[1])}function y(){f=NaN,_.point=x,i.lineStart()}function x(C,I){var S=Il([C,I]),R=e(C,I);n(f,h,u,d,g,m,f=R[0],h=R[1],u=C,d=S[0],g=S[1],m=S[2],YE,i),i.point(f,h)}function w(){_.point=p,i.lineEnd()}function v(){y(),_.point=b,_.lineEnd=E}function b(C,I){x(r=C,I),s=f,o=h,a=d,l=g,c=m,_.point=x}function E(){n(f,h,u,d,g,m,s,o,r,a,l,c,YE,i),_.lineEnd=w,w()}return _}}var WH=Om({point:function(e,t){this.stream.point(e*Gt,t*Gt)}});function BH(e){return Om({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function YH(e,t,n,i,r){function s(o,a){return o*=i,a*=r,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*i,(n-a)/e*r]},s}function VE(e,t,n,i,r,s){if(!s)return YH(e,t,n,i,r);var o=yt(s),a=dt(s),l=o*e,c=a*e,u=o/e,f=a/e,h=(a*n-o*t)/e,d=(a*t+o*n)/e;function g(m,_){return m*=i,_*=r,[l*m-c*_+t,n-c*m-l*_]}return g.invert=function(m,_){return[i*(u*m-f*_+h),r*(d-f*m-u*_)]},g}function Qs(e){return LA(function(){return e})()}function LA(e){var t,n=150,i=480,r=250,s=0,o=0,a=0,l=0,c=0,u,f=0,h=1,d=1,g=null,m=LE,_=null,p,y,x,w=f_,v=.5,b,E,C,I,S;function R(A){return C(A[0]*Gt,A[1]*Gt)}function M(A){return A=C.invert(A[0],A[1]),A&&[A[0]*Xe,A[1]*Xe]}R.stream=function(A){return I&&S===A?I:I=WH(BH(u)(m(b(w(S=A)))))},R.preclip=function(A){return arguments.length?(m=A,g=void 0,O()):m},R.postclip=function(A){return arguments.length?(w=A,_=p=y=x=null,O()):w},R.clipAngle=function(A){return arguments.length?(m=+A?vH(g=A*Gt):(g=null,LE),O()):g*Xe},R.clipExtent=function(A){return arguments.length?(w=A==null?(_=p=y=x=null,f_):pA(_=+A[0][0],p=+A[0][1],y=+A[1][0],x=+A[1][1]),O()):_==null?null:[[_,p],[y,x]]},R.scale=function(A){return arguments.length?(n=+A,k()):n},R.translate=function(A){return arguments.length?(i=+A[0],r=+A[1],k()):[i,r]},R.center=function(A){return arguments.length?(s=A[0]%360*Gt,o=A[1]%360*Gt,k()):[s*Xe,o*Xe]},R.rotate=function(A){return arguments.length?(a=A[0]%360*Gt,l=A[1]%360*Gt,c=A.length>2?A[2]%360*Gt:0,k()):[a*Xe,l*Xe,c*Xe]},R.angle=function(A){return arguments.length?(f=A%360*Gt,k()):f*Xe},R.reflectX=function(A){return arguments.length?(h=A?-1:1,k()):h<0},R.reflectY=function(A){return arguments.length?(d=A?-1:1,k()):d<0},R.precision=function(A){return arguments.length?(b=UE(E,v=A*A),O()):mn(v)},R.fitExtent=function(A,P){return kw(R,A,P)},R.fitSize=function(A,P){return RA(R,A,P)},R.fitWidth=function(A,P){return IA(R,A,P)},R.fitHeight=function(A,P){return AA(R,A,P)};function k(){var A=VE(n,0,0,h,d,f).apply(null,t(s,o)),P=VE(n,i-A[0],r-A[1],h,d,f);return u=hA(a,l,c),E=c_(t,P),C=c_(u,E),b=UE(E,v),O()}function O(){return I=S=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&M,k()}}function Pw(e){var t=0,n=It/3,i=LA(e),r=i(t,n);return r.parallels=function(s){return arguments.length?i(t=s[0]*Gt,n=s[1]*Gt):[t*Xe,n*Xe]},r}function UH(e){var t=yt(e);function n(i,r){return[i*t,dt(r)/t]}return n.invert=function(i,r){return[i/t,Sn(r*t)]},n}function VH(e,t){var n=dt(e),i=(n+dt(t))/2;if(Xt(i)<mt)return UH(e);var r=1+n*(2*i-n),s=mn(r)/i;function o(a,l){var c=mn(r-2*i*dt(l))/i;return[c*dt(a*=i),s-c*yt(a)]}return o.invert=function(a,l){var c=s-l,u=Ai(a,Xt(c))*ei(c);return c*i<0&&(u-=It*ei(a)*ei(c)),[u/i,Sn((r-(a*a+c*c)*i*i)/(2*i))]},o}function ug(){return Pw(VH).scale(155.424).center([0,33.6442])}function OA(){return ug().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function XH(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function HH(){var e,t,n=OA(),i,r=ug().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=ug().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(h,d){l=[h,d]}};function u(h){var d=h[0],g=h[1];return l=null,i.point(d,g),l||(s.point(d,g),l)||(a.point(d,g),l)}u.invert=function(h){var d=n.scale(),g=n.translate(),m=(h[0]-g[0])/d,_=(h[1]-g[1])/d;return(_>=.12&&_<.234&&m>=-.425&&m<-.214?r:_>=.166&&_<.234&&m>=-.214&&m<-.115?o:n).invert(h)},u.stream=function(h){return e&&t===h?e:e=XH([n.stream(t=h),r.stream(h),o.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),o.precision(h),f()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),o.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),g=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[g-.455*d,m-.238*d],[g+.455*d,m+.238*d]]).stream(c),s=r.translate([g-.307*d,m+.201*d]).clipExtent([[g-.425*d+mt,m+.12*d+mt],[g-.214*d-mt,m+.234*d-mt]]).stream(c),a=o.translate([g-.205*d,m+.212*d]).clipExtent([[g-.214*d+mt,m+.166*d+mt],[g-.115*d-mt,m+.234*d-mt]]).stream(c),f()},u.fitExtent=function(h,d){return kw(u,h,d)},u.fitSize=function(h,d){return RA(u,h,d)},u.fitWidth=function(h,d){return IA(u,h,d)},u.fitHeight=function(h,d){return AA(u,h,d)};function f(){return e=t=null,u}return u.scale(1070)}function kA(e){return function(t,n){var i=yt(t),r=yt(n),s=e(i*r);return s===1/0?[2,0]:[s*r*dt(t),s*dt(n)]}}function wf(e){return function(t,n){var i=mn(t*t+n*n),r=e(i),s=dt(r),o=yt(r);return[Ai(t*s,i*o),Sn(i&&n*s/i)]}}var PA=kA(function(e){return mn(2/(1+e))});PA.invert=wf(function(e){return 2*Sn(e/2)});function jH(){return Qs(PA).scale(124.75).clipAngle(180-.001)}var FA=kA(function(e){return(e=lA(e))&&e/dt(e)});FA.invert=wf(function(e){return e});function ZH(){return Qs(FA).scale(79.4188).clipAngle(180-.001)}function km(e,t){return[e,Xd(Aw((be+t)/2))]}km.invert=function(e,t){return[e,2*ec(aA(t))-be]};function qH(){return NA(km).scale(961/Wn)}function NA(e){var t=Qs(e),n=t.center,i=t.scale,r=t.translate,s=t.clipExtent,o=null,a,l,c;t.scale=function(f){return arguments.length?(i(f),u()):i()},t.translate=function(f){return arguments.length?(r(f),u()):r()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=l=c=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var f=It*i(),h=t(gH(t.rotate()).invert([0,0]));return s(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===km?[[Math.max(h[0]-f,o),a],[Math.min(h[0]+f,l),c]]:[[o,Math.max(h[1]-f,a)],[l,Math.min(h[1]+f,c)]])}return u()}function Ih(e){return Aw((be+e)/2)}function KH(e,t){var n=yt(e),i=e===t?dt(e):Xd(n/yt(t))/Xd(Ih(t)/Ih(e)),r=n*hp(Ih(e),i)/i;if(!i)return km;function s(o,a){r>0?a<-be+mt&&(a=-be+mt):a>be-mt&&(a=be-mt);var l=r/hp(Ih(a),i);return[l*dt(i*o),r-l*yt(i*o)]}return s.invert=function(o,a){var l=r-a,c=ei(i)*mn(o*o+l*l),u=Ai(o,Xt(l))*ei(l);return l*i<0&&(u-=It*ei(o)*ei(l)),[u/i,2*ec(hp(r/c,1/i))-be]},s}function JH(){return Pw(KH).scale(109.5).parallels([30,30])}function fg(e,t){return[e,t]}fg.invert=fg;function QH(){return Qs(fg).scale(152.63)}function tj(e,t){var n=yt(e),i=e===t?dt(e):(n-yt(t))/(t-e),r=n/i+e;if(Xt(i)<mt)return fg;function s(o,a){var l=r-a,c=i*o;return[l*dt(c),r-l*yt(c)]}return s.invert=function(o,a){var l=r-a,c=Ai(o,Xt(l))*ei(l);return l*i<0&&(c-=It*ei(o)*ei(l)),[c/i,r-ei(i)*mn(o*o+l*l)]},s}function ej(){return Pw(tj).scale(131.154).center([0,13.9389])}var iu=1.340264,ru=-.081106,su=893e-6,ou=.003796,hg=mn(3)/2,nj=12;function DA(e,t){var n=Sn(hg*dt(t)),i=n*n,r=i*i*i;return[e*yt(n)/(hg*(iu+3*ru*i+r*(7*su+9*ou*i))),n*(iu+ru*i+r*(su+ou*i))]}DA.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,s=0,o,a,l;s<nj&&(a=n*(iu+ru*i+r*(su+ou*i))-t,l=iu+3*ru*i+r*(7*su+9*ou*i),n-=o=a/l,i=n*n,r=i*i*i,!(Xt(o)<Vd));++s);return[hg*e*(iu+3*ru*i+r*(7*su+9*ou*i))/yt(n),Sn(dt(n)/hg)]};function ij(){return Qs(DA).scale(177.158)}function $A(e,t){var n=yt(t),i=yt(e)*n;return[n*dt(e)/i,dt(t)/i]}$A.invert=wf(ec);function rj(){return Qs($A).scale(144.049).clipAngle(60)}function zA(e,t){return[yt(t)*dt(e),dt(t)]}zA.invert=wf(Sn);function sj(){return Qs(zA).scale(249.5).clipAngle(90+mt)}function GA(e,t){var n=yt(t),i=1+yt(e)*n;return[n*dt(e)/i,dt(t)/i]}GA.invert=wf(function(e){return 2*ec(e)});function oj(){return Qs(GA).scale(250).clipAngle(142)}function WA(e,t){return[Xd(Aw((be+t)/2)),-e]}WA.invert=function(e,t){return[-t,2*ec(aA(e))-be]};function aj(){var e=NA(WA),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function lj(e,t){return e.parent===t.parent?1:2}function cj(e){return e.reduce(uj,0)/e.length}function uj(e,t){return e+t.x}function fj(e){return 1+e.reduce(hj,0)}function hj(e,t){return Math.max(e,t.y)}function dj(e){for(var t;t=e.children;)e=t[0];return e}function gj(e){for(var t;t=e.children;)e=t[t.length-1];return e}function BA(){var e=lj,t=1,n=1,i=!1;function r(s){var o,a=0;s.eachAfter(function(h){var d=h.children;d?(h.x=cj(d),h.y=fj(d)):(h.x=o?a+=e(h,o):0,h.y=0,o=h)});var l=dj(s),c=gj(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(i?function(h){h.x=(h.x-s.x)*t,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*t,h.y=(1-(s.y?h.y/s.y:1))*n})}return r.separation=function(s){return arguments.length?(e=s,r):e},r.size=function(s){return arguments.length?(i=!1,t=+s[0],n=+s[1],r):i?null:[t,n]},r.nodeSize=function(s){return arguments.length?(i=!0,t=+s[0],n=+s[1],r):i?[t,n]:null},r}function mj(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function pj(){return this.eachAfter(mj)}function yj(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function _j(e,t){for(var n=this,i=[n],r,s,o=-1;n=i.pop();)if(e.call(t,n,++o,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function wj(e,t){for(var n=this,i=[n],r=[],s,o,a,l=-1;n=i.pop();)if(r.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function xj(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function bj(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function vj(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Ej(e){for(var t=this,n=Tj(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Tj(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Cj(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Sj(){return Array.from(this)}function Mj(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Rj(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Ij(){var e=this,t,n=[e],i,r,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function YA(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Oj)):t===void 0&&(t=Lj);for(var n=new Ll(e),i,r=[n],s,o,a,l;i=r.pop();)if((o=t(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,a=l-1;a>=0;--a)r.push(s=o[a]=new Ll(o[a])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(UA)}function Aj(){return YA(this).eachBefore(kj)}function Lj(e){return e.children}function Oj(e){return Array.isArray(e)?e[1]:null}function kj(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function UA(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ll(e){this.data=e,this.depth=this.height=0,this.parent=null}Ll.prototype=YA.prototype={constructor:Ll,count:pj,each:yj,eachAfter:wj,eachBefore:_j,find:xj,sum:bj,sort:vj,path:Ej,ancestors:Cj,descendants:Sj,leaves:Mj,links:Rj,copy:Aj,[Symbol.iterator]:Ij};function yp(e){return e==null?null:Pj(e)}function Pj(e){if(typeof e!="function")throw new Error;return e}var Fj={depth:-1},XE={},_p={};function Nj(e){return e.id}function Dj(e){return e.parentId}function VA(){var e=Nj,t=Dj,n;function i(r){var s=Array.from(r),o=e,a=t,l,c,u,f,h,d,g,m,_=new Map;if(n!=null){const p=s.map((w,v)=>$j(n(w,v,r))),y=p.map(HE),x=new Set(p).add("");for(const w of y)x.has(w)||(x.add(w),p.push(w),y.push(HE(w)),s.push(_p));o=(w,v)=>p[v],a=(w,v)=>y[v]}for(u=0,l=s.length;u<l;++u)c=s[u],d=s[u]=new Ll(c),(g=o(c,u,r))!=null&&(g+="")&&(m=d.id=g,_.set(m,_.has(m)?XE:d)),(g=a(c,u,r))!=null&&(g+="")&&(d.parent=g);for(u=0;u<l;++u)if(d=s[u],g=d.parent){if(h=_.get(g),!h)throw new Error("missing: "+g);if(h===XE)throw new Error("ambiguous: "+g);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(n!=null){for(;f.data===_p&&f.children.length===1;)f=f.children[0],--l;for(let p=s.length-1;p>=0&&(d=s[p],d.data===_p);--p)d.data=null}if(f.parent=Fj,f.eachBefore(function(p){p.depth=p.parent.depth+1,--l}).eachBefore(UA),f.parent=null,l>0)throw new Error("cycle");return f}return i.id=function(r){return arguments.length?(e=yp(r),i):e},i.parentId=function(r){return arguments.length?(t=yp(r),i):t},i.path=function(r){return arguments.length?(n=yp(r),i):n},i}function $j(e){e=`${e}`;let t=e.length;return b_(e,t-1)&&!b_(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function HE(e){let t=e.length;if(t<2)return"";for(;--t>1&&!b_(e,t););return e.slice(0,t)}function b_(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function zj(e,t){return e.parent===t.parent?1:2}function wp(e){var t=e.children;return t?t[0]:e.t}function xp(e){var t=e.children;return t?t[t.length-1]:e.t}function Gj(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Wj(e){for(var t=0,n=0,i=e.children,r=i.length,s;--r>=0;)s=i[r],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Bj(e,t,n){return e.a.parent===t.parent?e.a:n}function td(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}td.prototype=Object.create(Ll.prototype);function Yj(e){for(var t=new td(e,0),n,i=[t],r,s,o,a;n=i.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=n.children[o]=new td(s[o],o)),r.parent=n;return(t.parent=new td(null,0)).children=[t],t}function dg(){var e=zj,t=1,n=1,i=null;function r(c){var u=Yj(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),i)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(y){y.x<f.x&&(f=y),y.x>h.x&&(h=y),y.depth>d.depth&&(d=y)});var g=f===h?1:e(f,h)/2,m=g-f.x,_=t/(h.x+g+m),p=n/(d.depth||1);c.eachBefore(function(y){y.x=(y.x+m)*_,y.y=y.depth*p})}return c}function s(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){Wj(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+e(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+e(c._,h._));c.parent.A=a(c,h,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var h=c,d=c,g=u,m=h.parent.children[0],_=h.m,p=d.m,y=g.m,x=m.m,w;g=xp(g),h=wp(h),g&&h;)m=wp(m),d=xp(d),d.a=c,w=g.z+y-h.z-_+e(g._,h._),w>0&&(Gj(Bj(g,c,f),c,w),_+=w,p+=w),y+=g.m,_+=h.m,x+=m.m,p+=d.m;g&&!xp(d)&&(d.t=g,d.m+=y-p),h&&!wp(m)&&(m.t=h,m.m+=_-x,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return r.separation=function(c){return arguments.length?(e=c,r):e},r.size=function(c){return arguments.length?(i=!1,t=+c[0],n=+c[1],r):i?null:[t,n]},r.nodeSize=function(c){return arguments.length?(i=!0,t=+c[0],n=+c[1],r):i?[t,n]:null},r}const Uj=1664525,Vj=1013904223,jE=1/4294967296;function Fw(e=Math.random()){let t=(0<=e&&e<1?e/jE:Math.abs(e))|0;return()=>(t=Uj*t+Vj|0,jE*(t>>>0))}function ar(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Pm(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const v_=Symbol("implicit");function Nw(){var e=new Qo,t=[],n=[],i=v_;function r(s){let o=e.get(s);if(o===void 0){if(i!==v_)return i;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Qo;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return Nw(t,n).unknown(i)},ar.apply(r,arguments),r}function Fm(){var e=Nw().unknown(void 0),t=e.domain,n=e.range,i=0,r=1,s,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var h=t().length,d=r<i,g=d?r:i,m=d?i:r;s=(m-g)/Math.max(1,h-l+c*2),a&&(s=Math.floor(s)),g+=(m-g-s*(h-l))*u,o=s*(1-l),a&&(g=Math.round(g),o=Math.round(o));var _=ti(h).map(function(p){return g+s*p});return n(d?_.reverse():_)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,f()):[i,r]},e.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(a=!!h,f()):a},e.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return Fm(t(),[i,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},ar.apply(f(),arguments)}function XA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return XA(t())},e}function Xj(){return XA(Fm.apply(null,arguments).paddingInner(1))}function Hj(e){return function(){return e}}function E_(e){return+e}var ZE=[0,1];function ni(e){return e}function T_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Hj(isNaN(t)?NaN:.5)}function jj(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Zj(e,t,n){var i=e[0],r=e[1],s=t[0],o=t[1];return r<i?(i=T_(r,i),s=n(o,s)):(i=T_(i,r),s=n(s,o)),function(a){return s(i(a))}}function qj(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=T_(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=Em(e,a,1,i)-1;return s[l](r[l](a))}}function xf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Nm(){var e=ZE,t=ZE,n=mf,i,r,s,o=ni,a,l,c;function u(){var h=Math.min(e.length,t.length);return o!==ni&&(o=jj(e[0],e[h-1])),a=h>2?qj:Zj,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(e.map(i),t,n)))(i(o(h)))}return f.invert=function(h){return o(r((c||(c=a(t,e.map(i),Ke)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,E_),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=Tw,u()},f.clamp=function(h){return arguments.length?(o=h?!0:ni,u()):o!==ni},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return i=h,r=d,u()}}function HA(){return Nm()(ni,ni)}function Kj(e,t,n,i){var r=Wy(e,t,n),s;switch(i=Pu(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=oH(r,o))&&(i.precision=s),oA(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=aH(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=sH(r))&&(i.precision=s-(i.type==="%")*2);break}}return tc(i)}function bf(e){var t=e.domain;return e.ticks=function(n){var i=t();return Ws(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return Kj(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,o=i[r],a=i[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);u-- >0;){if(c=Iu(o,a,n),c===l)return i[r]=o,i[s]=a,t(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function Dw(){var e=HA();return e.copy=function(){return xf(e,Dw())},ar.apply(e,arguments),bf(e)}function jA(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,E_),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return jA(e).unknown(t)},e=arguments.length?Array.from(e,E_):[0,1],bf(n)}function ZA(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],s=e[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),e[n]=t.floor(r),e[i]=t.ceil(s),e}function qE(e){return Math.log(e)}function KE(e){return Math.exp(e)}function Jj(e){return-Math.log(-e)}function Qj(e){return-Math.exp(-e)}function tZ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function eZ(e){return e===10?tZ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function nZ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function JE(e){return(t,n)=>-e(-t,n)}function qA(e){const t=e(qE,KE),n=t.domain;let i=10,r,s;function o(){return r=nZ(i),s=eZ(i),n()[0]<0?(r=JE(r),s=JE(s),e(Jj,Qj)):e(qE,KE),t}return t.base=function(a){return arguments.length?(i=+a,o()):i},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=r(c),d=r(u),g,m;const _=a==null?10:+a;let p=[];if(!(i%1)&&d-h<_){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(g=1;g<i;++g)if(m=h<0?g/s(-h):g*s(h),!(m<c)){if(m>u)break;p.push(m)}}else for(;h<=d;++h)for(g=i-1;g>=1;--g)if(m=h>0?g/s(-h):g*s(h),!(m<c)){if(m>u)break;p.push(m)}p.length*2<_&&(p=Ws(c,u,_))}else p=Ws(h,d,Math.min(d-h,_)).map(s);return f?p.reverse():p},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Pu(l)).precision==null&&(l.trim=!0),l=tc(l)),a===1/0)return l;const c=Math.max(1,i*a/t.ticks().length);return u=>{let f=u/s(Math.round(r(u)));return f*i<i-.5&&(f*=i),f<=c?l(u):""}},t.nice=()=>n(ZA(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),t}function KA(){const e=qA(Nm()).domain([1,10]);return e.copy=()=>xf(e,KA()).base(e.base()),ar.apply(e,arguments),e}function QE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function tT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function JA(e){var t=1,n=e(QE(t),tT(t));return n.constant=function(i){return arguments.length?e(QE(t=+i),tT(t)):t},bf(n)}function QA(){var e=JA(Nm());return e.copy=function(){return xf(e,QA()).constant(e.constant())},ar.apply(e,arguments)}function eT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function iZ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rZ(e){return e<0?-e*e:e*e}function t3(e){var t=e(ni,ni),n=1;function i(){return n===1?e(ni,ni):n===.5?e(iZ,rZ):e(eT(n),eT(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},bf(t)}function e3(){var e=t3(Nm());return e.copy=function(){return xf(e,e3()).exponent(e.exponent())},ar.apply(e,arguments),e}function n3(){var e=[],t=[],n=[],i;function r(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=CB(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?i:t[Em(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(me),r()},s.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return n3().domain(e).range(t).unknown(i)},ar.apply(s,arguments)}function i3(){var e=[.5],t=[0,1],n,i=1;function r(s){return s!=null&&s<=s?t[Em(e,s,0,i)]:n}return r.domain=function(s){return arguments.length?(e=Array.from(s),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(s){return arguments.length?(t=Array.from(s),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return i3().domain(e).range(t).unknown(n)},ar.apply(r,arguments)}const bp=new Date,vp=new Date;function Pe(e,t,n,i){function r(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(e(s=new Date(+s)),s),r.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),e(s);while(c<s&&s<o);return l},r.filter=s=>Pe(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(r.count=(s,o)=>(bp.setTime(+s),vp.setTime(+o),e(bp),e(vp),Math.floor(n(bp,vp))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const gg=Pe(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Pe(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gg);gg.range;const Or=1e3,ii=Or*60,kr=ii*60,Vr=kr*24,$w=Vr*7,nT=Vr*30,Ep=Vr*365,Zi=Pe(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Or)},(e,t)=>(t-e)/Or,e=>e.getUTCSeconds());Zi.range;const Dm=Pe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Or)},(e,t)=>{e.setTime(+e+t*ii)},(e,t)=>(t-e)/ii,e=>e.getMinutes());Dm.range;const vf=Pe(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ii)},(e,t)=>(t-e)/ii,e=>e.getUTCMinutes());vf.range;const $m=Pe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Or-e.getMinutes()*ii)},(e,t)=>{e.setTime(+e+t*kr)},(e,t)=>(t-e)/kr,e=>e.getHours());$m.range;const Ef=Pe(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*kr)},(e,t)=>(t-e)/kr,e=>e.getUTCHours());Ef.range;const ga=Pe(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ii)/Vr,e=>e.getDate()-1);ga.range;const zm=Pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vr,e=>e.getUTCDate()-1);zm.range;const Gm=Pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vr,e=>Math.floor(e/Vr));Gm.range;function ma(e){return Pe(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ii)/$w)}const Ol=ma(0),Nu=ma(1),r3=ma(2),s3=ma(3),sa=ma(4),o3=ma(5),a3=ma(6);Ol.range;Nu.range;r3.range;s3.range;sa.range;o3.range;a3.range;function pa(e){return Pe(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/$w)}const kl=pa(0),Du=pa(1),l3=pa(2),c3=pa(3),oa=pa(4),u3=pa(5),f3=pa(6);kl.range;Du.range;l3.range;c3.range;oa.range;u3.range;f3.range;const Tf=Pe(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Tf.range;const Cf=Pe(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Cf.range;const Li=Pe(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Li.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pe(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Li.range;const Oi=Pe(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Oi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pe(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Oi.range;function h3(e,t,n,i,r,s){const o=[[Zi,1,Or],[Zi,5,5*Or],[Zi,15,15*Or],[Zi,30,30*Or],[s,1,ii],[s,5,5*ii],[s,15,15*ii],[s,30,30*ii],[r,1,kr],[r,3,3*kr],[r,6,6*kr],[r,12,12*kr],[i,1,Vr],[i,2,2*Vr],[n,1,$w],[t,1,nT],[t,3,3*nT],[e,1,Ep]];function a(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),g=d?d.range(c,+u+1):[];return h?g.reverse():g}function l(c,u,f){const h=Math.abs(u-c)/f,d=vm(([,,_])=>_).right(o,h);if(d===o.length)return e.every(Wy(c/Ep,u/Ep,f));if(d===0)return gg.every(Math.max(Wy(c,u,f),1));const[g,m]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return g.every(m)}return[a,l]}const[sZ,d3]=h3(Oi,Cf,kl,Gm,Ef,vf),[oZ,aZ]=h3(Li,Tf,Ol,ga,$m,Dm);function Tp(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Cp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Cc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function lZ(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Sc(r),u=Mc(r),f=Sc(s),h=Mc(s),d=Sc(o),g=Mc(o),m=Sc(a),_=Mc(a),p=Sc(l),y=Mc(l),x={a:N,A:G,b:H,B:U,c:null,d:lT,e:lT,f:LZ,g:WZ,G:YZ,H:RZ,I:IZ,j:AZ,L:g3,m:OZ,M:kZ,p:Z,q:z,Q:fT,s:hT,S:PZ,u:FZ,U:NZ,V:DZ,w:$Z,W:zZ,x:null,X:null,y:GZ,Y:BZ,Z:UZ,"%":uT},w={a:Q,A:nt,b:st,B:ot,c:null,d:cT,e:cT,f:jZ,g:rq,G:oq,H:VZ,I:XZ,j:HZ,L:p3,m:ZZ,M:qZ,p:$,q:Y,Q:fT,s:hT,S:KZ,u:JZ,U:QZ,V:tq,w:eq,W:nq,x:null,X:null,y:iq,Y:sq,Z:aq,"%":uT},v={a:S,A:R,b:M,B:k,c:O,d:oT,e:oT,f:TZ,g:sT,G:rT,H:aT,I:aT,j:xZ,L:EZ,m:wZ,M:bZ,p:I,q:_Z,Q:SZ,s:MZ,S:vZ,u:dZ,U:gZ,V:mZ,w:hZ,W:pZ,x:A,X:P,y:sT,Y:rT,Z:yZ,"%":CZ};x.x=b(n,x),x.X=b(i,x),x.c=b(t,x),w.x=b(n,w),w.X=b(i,w),w.c=b(t,w);function b(D,V){return function(K){var T=[],L=-1,F=0,W=D.length,B,X,rt;for(K instanceof Date||(K=new Date(+K));++L<W;)D.charCodeAt(L)===37&&(T.push(D.slice(F,L)),(X=iT[B=D.charAt(++L)])!=null?B=D.charAt(++L):X=B==="e"?" ":"0",(rt=V[B])&&(B=rt(K,X)),T.push(B),F=L+1);return T.push(D.slice(F,L)),T.join("")}}function E(D,V){return function(K){var T=Cc(1900,void 0,1),L=C(T,D,K+="",0),F,W;if(L!=K.length)return null;if("Q"in T)return new Date(T.Q);if("s"in T)return new Date(T.s*1e3+("L"in T?T.L:0));if(V&&!("Z"in T)&&(T.Z=0),"p"in T&&(T.H=T.H%12+T.p*12),T.m===void 0&&(T.m="q"in T?T.q:0),"V"in T){if(T.V<1||T.V>53)return null;"w"in T||(T.w=1),"Z"in T?(F=Cp(Cc(T.y,0,1)),W=F.getUTCDay(),F=W>4||W===0?Du.ceil(F):Du(F),F=zm.offset(F,(T.V-1)*7),T.y=F.getUTCFullYear(),T.m=F.getUTCMonth(),T.d=F.getUTCDate()+(T.w+6)%7):(F=Tp(Cc(T.y,0,1)),W=F.getDay(),F=W>4||W===0?Nu.ceil(F):Nu(F),F=ga.offset(F,(T.V-1)*7),T.y=F.getFullYear(),T.m=F.getMonth(),T.d=F.getDate()+(T.w+6)%7)}else("W"in T||"U"in T)&&("w"in T||(T.w="u"in T?T.u%7:"W"in T?1:0),W="Z"in T?Cp(Cc(T.y,0,1)).getUTCDay():Tp(Cc(T.y,0,1)).getDay(),T.m=0,T.d="W"in T?(T.w+6)%7+T.W*7-(W+5)%7:T.w+T.U*7-(W+6)%7);return"Z"in T?(T.H+=T.Z/100|0,T.M+=T.Z%100,Cp(T)):Tp(T)}}function C(D,V,K,T){for(var L=0,F=V.length,W=K.length,B,X;L<F;){if(T>=W)return-1;if(B=V.charCodeAt(L++),B===37){if(B=V.charAt(L++),X=v[B in iT?V.charAt(L++):B],!X||(T=X(D,K,T))<0)return-1}else if(B!=K.charCodeAt(T++))return-1}return T}function I(D,V,K){var T=c.exec(V.slice(K));return T?(D.p=u.get(T[0].toLowerCase()),K+T[0].length):-1}function S(D,V,K){var T=d.exec(V.slice(K));return T?(D.w=g.get(T[0].toLowerCase()),K+T[0].length):-1}function R(D,V,K){var T=f.exec(V.slice(K));return T?(D.w=h.get(T[0].toLowerCase()),K+T[0].length):-1}function M(D,V,K){var T=p.exec(V.slice(K));return T?(D.m=y.get(T[0].toLowerCase()),K+T[0].length):-1}function k(D,V,K){var T=m.exec(V.slice(K));return T?(D.m=_.get(T[0].toLowerCase()),K+T[0].length):-1}function O(D,V,K){return C(D,t,V,K)}function A(D,V,K){return C(D,n,V,K)}function P(D,V,K){return C(D,i,V,K)}function N(D){return o[D.getDay()]}function G(D){return s[D.getDay()]}function H(D){return l[D.getMonth()]}function U(D){return a[D.getMonth()]}function Z(D){return r[+(D.getHours()>=12)]}function z(D){return 1+~~(D.getMonth()/3)}function Q(D){return o[D.getUTCDay()]}function nt(D){return s[D.getUTCDay()]}function st(D){return l[D.getUTCMonth()]}function ot(D){return a[D.getUTCMonth()]}function $(D){return r[+(D.getUTCHours()>=12)]}function Y(D){return 1+~~(D.getUTCMonth()/3)}return{format:function(D){var V=b(D+="",x);return V.toString=function(){return D},V},parse:function(D){var V=E(D+="",!1);return V.toString=function(){return D},V},utcFormat:function(D){var V=b(D+="",w);return V.toString=function(){return D},V},utcParse:function(D){var V=E(D+="",!0);return V.toString=function(){return D},V}}}var iT={"-":"",_:" ",0:"0"},Ve=/^\s*\d+/,cZ=/^%/,uZ=/[\\^$*+?|[\]().{}]/g;function Bt(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function fZ(e){return e.replace(uZ,"\\$&")}function Sc(e){return new RegExp("^(?:"+e.map(fZ).join("|")+")","i")}function Mc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function hZ(e,t,n){var i=Ve.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function dZ(e,t,n){var i=Ve.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function gZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function mZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function pZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function rT(e,t,n){var i=Ve.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function sT(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function yZ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function _Z(e,t,n){var i=Ve.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function wZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function oT(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function xZ(e,t,n){var i=Ve.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function aT(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function bZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function vZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function EZ(e,t,n){var i=Ve.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function TZ(e,t,n){var i=Ve.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function CZ(e,t,n){var i=cZ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function SZ(e,t,n){var i=Ve.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function MZ(e,t,n){var i=Ve.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function lT(e,t){return Bt(e.getDate(),t,2)}function RZ(e,t){return Bt(e.getHours(),t,2)}function IZ(e,t){return Bt(e.getHours()%12||12,t,2)}function AZ(e,t){return Bt(1+ga.count(Li(e),e),t,3)}function g3(e,t){return Bt(e.getMilliseconds(),t,3)}function LZ(e,t){return g3(e,t)+"000"}function OZ(e,t){return Bt(e.getMonth()+1,t,2)}function kZ(e,t){return Bt(e.getMinutes(),t,2)}function PZ(e,t){return Bt(e.getSeconds(),t,2)}function FZ(e){var t=e.getDay();return t===0?7:t}function NZ(e,t){return Bt(Ol.count(Li(e)-1,e),t,2)}function m3(e){var t=e.getDay();return t>=4||t===0?sa(e):sa.ceil(e)}function DZ(e,t){return e=m3(e),Bt(sa.count(Li(e),e)+(Li(e).getDay()===4),t,2)}function $Z(e){return e.getDay()}function zZ(e,t){return Bt(Nu.count(Li(e)-1,e),t,2)}function GZ(e,t){return Bt(e.getFullYear()%100,t,2)}function WZ(e,t){return e=m3(e),Bt(e.getFullYear()%100,t,2)}function BZ(e,t){return Bt(e.getFullYear()%1e4,t,4)}function YZ(e,t){var n=e.getDay();return e=n>=4||n===0?sa(e):sa.ceil(e),Bt(e.getFullYear()%1e4,t,4)}function UZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Bt(t/60|0,"0",2)+Bt(t%60,"0",2)}function cT(e,t){return Bt(e.getUTCDate(),t,2)}function VZ(e,t){return Bt(e.getUTCHours(),t,2)}function XZ(e,t){return Bt(e.getUTCHours()%12||12,t,2)}function HZ(e,t){return Bt(1+zm.count(Oi(e),e),t,3)}function p3(e,t){return Bt(e.getUTCMilliseconds(),t,3)}function jZ(e,t){return p3(e,t)+"000"}function ZZ(e,t){return Bt(e.getUTCMonth()+1,t,2)}function qZ(e,t){return Bt(e.getUTCMinutes(),t,2)}function KZ(e,t){return Bt(e.getUTCSeconds(),t,2)}function JZ(e){var t=e.getUTCDay();return t===0?7:t}function QZ(e,t){return Bt(kl.count(Oi(e)-1,e),t,2)}function y3(e){var t=e.getUTCDay();return t>=4||t===0?oa(e):oa.ceil(e)}function tq(e,t){return e=y3(e),Bt(oa.count(Oi(e),e)+(Oi(e).getUTCDay()===4),t,2)}function eq(e){return e.getUTCDay()}function nq(e,t){return Bt(Du.count(Oi(e)-1,e),t,2)}function iq(e,t){return Bt(e.getUTCFullYear()%100,t,2)}function rq(e,t){return e=y3(e),Bt(e.getUTCFullYear()%100,t,2)}function sq(e,t){return Bt(e.getUTCFullYear()%1e4,t,4)}function oq(e,t){var n=e.getUTCDay();return e=n>=4||n===0?oa(e):oa.ceil(e),Bt(e.getUTCFullYear()%1e4,t,4)}function aq(){return"+0000"}function uT(){return"%"}function fT(e){return+e}function hT(e){return Math.floor(+e/1e3)}var Oa,zw,Sf;lq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lq(e){return Oa=lZ(e),zw=Oa.format,Oa.parse,Sf=Oa.utcFormat,Oa.utcParse,Oa}function cq(e){return new Date(e)}function uq(e){return e instanceof Date?+e:+new Date(+e)}function Gw(e,t,n,i,r,s,o,a,l,c){var u=HA(),f=u.invert,h=u.domain,d=c(".%L"),g=c(":%S"),m=c("%I:%M"),_=c("%I %p"),p=c("%a %d"),y=c("%b %d"),x=c("%B"),w=c("%Y");function v(b){return(l(b)<b?d:a(b)<b?g:o(b)<b?m:s(b)<b?_:i(b)<b?r(b)<b?p:y:n(b)<b?x:w)(b)}return u.invert=function(b){return new Date(f(b))},u.domain=function(b){return arguments.length?h(Array.from(b,uq)):h().map(cq)},u.ticks=function(b){var E=h();return e(E[0],E[E.length-1],b??10)},u.tickFormat=function(b,E){return E==null?v:c(E)},u.nice=function(b){var E=h();return(!b||typeof b.range!="function")&&(b=t(E[0],E[E.length-1],b??10)),b?h(ZA(E,b)):u},u.copy=function(){return xf(u,Gw(e,t,n,i,r,s,o,a,l,c))},u}function fq(){return ar.apply(Gw(oZ,aZ,Li,Tf,Ol,ga,$m,Dm,Zi,zw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hq(){return ar.apply(Gw(sZ,d3,Oi,Cf,kl,zm,Ef,vf,Zi,Sf).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Wm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Bm(){var e=0,t=.5,n=1,i=1,r,s,o,a,l,c=ni,u,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-s)*(i*m<i*s?a:l),c(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t,n]=m,r=u(e=+e),s=u(t=+t),o=u(n=+n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d):[e,t,n]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(c=m,d):c};function g(m){return function(_){var p,y,x;return arguments.length?([p,y,x]=_,c=pf(m,[p,y,x]),d):[c(0),c(.5),c(1)]}}return d.range=g(mf),d.rangeRound=g(Tw),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return u=m,r=m(e),s=m(t),o=m(n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d}}function _3(){var e=bf(Bm()(ni));return e.copy=function(){return Wm(e,_3())},Pm.apply(e,arguments)}function w3(){var e=qA(Bm()).domain([.1,1,10]);return e.copy=function(){return Wm(e,w3()).base(e.base())},Pm.apply(e,arguments)}function x3(){var e=JA(Bm());return e.copy=function(){return Wm(e,x3()).constant(e.constant())},Pm.apply(e,arguments)}function b3(){var e=t3(Bm());return e.copy=function(){return Wm(e,b3()).exponent(e.exponent())},Pm.apply(e,arguments)}function Mt(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const dq=Mt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),gq=Mt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),mq=Mt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),pq=Mt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),yq=Mt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),_q=Mt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),wq=Mt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),xq=Mt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),bq=Mt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),vq=Mt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ne=e=>GU(e[e.length-1]);var v3=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Mt);const E3=ne(v3);var T3=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Mt);const C3=ne(T3);var S3=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Mt);const M3=ne(S3);var R3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Mt);const I3=ne(R3);var C_=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Mt);const mg=ne(C_);var A3=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Mt);const L3=ne(A3);var S_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Mt);const pg=ne(S_);var O3=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Mt);const k3=ne(O3);var P3=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Mt);const F3=ne(P3);var N3=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Mt);const D3=ne(N3);var $3=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Mt);const z3=ne($3);var G3=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Mt);const W3=ne(G3);var B3=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Mt);const Y3=ne(B3);var U3=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Mt);const V3=ne(U3);var X3=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Mt);const H3=ne(X3);var j3=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Mt);const Z3=ne(j3);var q3=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Mt);const K3=ne(q3);var J3=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Mt);const Q3=ne(J3);var t6=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Mt);const e6=ne(t6);var n6=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Mt);const i6=ne(n6);var r6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Mt);const s6=ne(r6);var o6=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Mt);const a6=ne(o6);var l6=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Mt);const c6=ne(l6);var u6=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Mt);const f6=ne(u6);var h6=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Mt);const d6=ne(h6);var g6=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Mt);const m6=ne(g6);var p6=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Mt);const y6=ne(p6);function _6(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const w6=Cw(rr(300,.5,0),rr(-240,.5,1));var x6=Cw(rr(-100,.75,.35),rr(80,1.5,.8)),b6=Cw(rr(260,.75,.35),rr(80,1.5,.8)),Ah=rr();function v6(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Ah.h=360*e-100,Ah.s=1.5-1.5*t,Ah.l=.8-.9*t,Ah+""}var Lh=ir(),Eq=Math.PI/3,Tq=Math.PI*2/3;function E6(e){var t;return e=(.5-e)*Math.PI,Lh.r=255*(t=Math.sin(e))*t,Lh.g=255*(t=Math.sin(e+Eq))*t,Lh.b=255*(t=Math.sin(e+Tq))*t,Lh+""}function T6(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Ym(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const C6=Ym(Mt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var S6=Ym(Mt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),M6=Ym(Mt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),R6=Ym(Mt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ze(e){return function(){return e}}const I6=Math.cos,Ww=Math.min,yg=Math.sin,Fe=Math.sqrt,dT=1e-12,_g=Math.PI,Um=2*_g;function A6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new iA(t)}function L6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function O6(e){this._context=e}O6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Mf(e){return new O6(e)}function k6(e){return e[0]}function P6(e){return e[1]}function F6(e,t){var n=ze(!0),i=null,r=Mf,s=null,o=A6(a);e=typeof e=="function"?e:e===void 0?k6:ze(e),t=typeof t=="function"?t:t===void 0?P6:ze(t);function a(l){var c,u=(l=L6(l)).length,f,h=!1,d;for(i==null&&(s=r(d=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,c,l),+t(f,c,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:ze(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:ze(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ze(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),a):i},a}function Bw(e,t,n){var i=null,r=ze(!0),s=null,o=Mf,a=null,l=A6(c);e=typeof e=="function"?e:e===void 0?k6:ze(+e),t=typeof t=="function"?t:ze(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?P6:ze(+n);function c(f){var h,d,g,m=(f=L6(f)).length,_,p=!1,y,x=new Array(m),w=new Array(m);for(s==null&&(a=o(y=l())),h=0;h<=m;++h){if(!(h<m&&r(_=f[h],h,f))===p)if(p=!p)d=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=h-1;g>=d;--g)a.point(x[g],w[g]);a.lineEnd(),a.areaEnd()}p&&(x[h]=+e(_,h,f),w[h]=+t(_,h,f),a.point(i?+i(_,h,f):x[h],n?+n(_,h,f):w[h]))}if(y)return a=null,y+""||null}function u(){return F6().defined(r).curve(o).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:ze(+f),i=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ze(+f),c):e},c.x1=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:ze(+f),c):i},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:ze(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ze(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ze(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(i).y(t)},c.defined=function(f){return arguments.length?(r=typeof f=="function"?f:ze(!!f),c):r},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class N6{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Cq(e){return new N6(e,!0)}function Sq(e){return new N6(e,!1)}const Mq=Fe(3),D6={draw(e,t){const n=Fe(t+Ww(t/28,.75))*.59436,i=n/2,r=i*Mq;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-r,-i),e.lineTo(r,i),e.moveTo(-r,i),e.lineTo(r,-i)}},$u={draw(e,t){const n=Fe(t/_g);e.moveTo(n,0),e.arc(0,0,n,0,Um)}},$6={draw(e,t){const n=Fe(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},z6=Fe(1/3),Rq=z6*2,G6={draw(e,t){const n=Fe(t/Rq),i=n*z6;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},W6={draw(e,t){const n=Fe(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},B6={draw(e,t){const n=Fe(t-Ww(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},Y6={draw(e,t){const n=Fe(t),i=-n/2;e.rect(i,i,n,n)}},U6={draw(e,t){const n=Fe(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},Iq=.8908130915292852,V6=yg(_g/10)/yg(7*_g/10),Aq=yg(Um/10)*V6,Lq=-I6(Um/10)*V6,X6={draw(e,t){const n=Fe(t*Iq),i=Aq*n,r=Lq*n;e.moveTo(0,-n),e.lineTo(i,r);for(let s=1;s<5;++s){const o=Um*s/5,a=I6(o),l=yg(o);e.lineTo(l*n,-a*n),e.lineTo(a*i-l*r,l*i+a*r)}e.closePath()}},Sp=Fe(3),H6={draw(e,t){const n=-Fe(t/(Sp*3));e.moveTo(0,n*2),e.lineTo(-Sp*n,-n),e.lineTo(Sp*n,-n),e.closePath()}},Oq=Fe(3),j6={draw(e,t){const n=Fe(t)*.6824,i=n/2,r=n*Oq/2;e.moveTo(0,-n),e.lineTo(r,i),e.lineTo(-r,i),e.closePath()}},Zn=-.5,qn=Fe(3)/2,M_=1/Fe(12),kq=(M_/2+1)*3,Z6={draw(e,t){const n=Fe(t/kq),i=n/2,r=n*M_,s=i,o=n*M_+n,a=-s,l=o;e.moveTo(i,r),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(Zn*i-qn*r,qn*i+Zn*r),e.lineTo(Zn*s-qn*o,qn*s+Zn*o),e.lineTo(Zn*a-qn*l,qn*a+Zn*l),e.lineTo(Zn*i+qn*r,Zn*r-qn*i),e.lineTo(Zn*s+qn*o,Zn*o-qn*s),e.lineTo(Zn*a+qn*l,Zn*l-qn*a),e.closePath()}},q6={draw(e,t){const n=Fe(t-Ww(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},Pq=[$u,$6,G6,Y6,X6,H6,Z6],Fq=[$u,B6,q6,j6,D6,U6,W6];function Us(){}function wg(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Vm(e){this._context=e}Vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nq(e){return new Vm(e)}function K6(e){this._context=e}K6.prototype={areaStart:Us,areaEnd:Us,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:wg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dq(e){return new K6(e)}function J6(e){this._context=e}J6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:wg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $q(e){return new J6(e)}function Q6(e,t){this._basis=new Vm(e),this._beta=t}Q6.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],s=e[n]-i,o=t[n]-r,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(i+l*s),this._beta*t[a]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const zq=function e(t){function n(i){return t===1?new Vm(i):new Q6(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function xg(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Yw(e,t){this._context=e,this._k=(1-t)/6}Yw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:xg(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:xg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gq=function e(t){function n(i){return new Yw(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Uw(e,t){this._context=e,this._k=(1-t)/6}Uw.prototype={areaStart:Us,areaEnd:Us,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:xg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Wq=function e(t){function n(i){return new Uw(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Vw(e,t){this._context=e,this._k=(1-t)/6}Vw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bq=function e(t){function n(i){return new Vw(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Xw(e,t,n){var i=e._x1,r=e._y1,s=e._x2,o=e._y2;if(e._l01_a>dT){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>dT){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(i,r,s,o,e._x2,e._y2)}function tL(e,t){this._context=e,this._alpha=t}tL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Xw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Yq=function e(t){function n(i){return t?new tL(i,t):new Yw(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function eL(e,t){this._context=e,this._alpha=t}eL.prototype={areaStart:Us,areaEnd:Us,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Xw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Uq=function e(t){function n(i){return t?new eL(i,t):new Uw(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function nL(e,t){this._context=e,this._alpha=t}nL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vq=function e(t){function n(i){return t?new nL(i,t):new Vw(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function iL(e){this._context=e}iL.prototype={areaStart:Us,areaEnd:Us,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Xq(e){return new iL(e)}function gT(e){return e<0?-1:1}function mT(e,t,n){var i=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(i||r<0&&-0),o=(n-e._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(gT(s)+gT(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function pT(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Mp(e,t,n){var i=e._x0,r=e._y0,s=e._x1,o=e._y1,a=(s-i)/3;e._context.bezierCurveTo(i+a,r+a*t,s-a,o-a*n,s,o)}function bg(e){this._context=e}bg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Mp(this,this._t0,pT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Mp(this,pT(this,n=mT(this,e,t)),n);break;default:Mp(this,this._t0,n=mT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function rL(e){this._context=new sL(e)}(rL.prototype=Object.create(bg.prototype)).point=function(e,t){bg.prototype.point.call(this,t,e)};function sL(e){this._context=e}sL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,s){this._context.bezierCurveTo(t,e,i,n,s,r)}};function Hq(e){return new bg(e)}function jq(e){return new rL(e)}function oL(e){this._context=e}oL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=yT(e),r=yT(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yT(e){var t,n=e.length-1,i,r=new Array(n),s=new Array(n),o=new Array(n);for(r[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/s[t-1],s[t]-=i,o[t]-=i*o[t-1];for(r[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)r[t]=(o[t]-r[t+1])/s[t];for(s[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function Zq(e){return new oL(e)}function Xm(e,t){this._context=e,this._t=t}Xm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function qq(e){return new Xm(e,.5)}function Kq(e){return new Xm(e,0)}function Jq(e){return new Xm(e,1)}function Hc(e,t,n){this.k=e,this.x=t,this.y=n}Hc.prototype={constructor:Hc,scale:function(e){return e===1?this:new Hc(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Hc(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Hc.prototype;function dn(e){return e!=null&&!Number.isNaN(e)}function ai(e,t){return+dn(t)-+dn(e)||me(e,t)}function vg(e,t){return+dn(t)-+dn(e)||Jo(e,t)}function Hw(e){return e!=null&&`${e}`!=""}function Eg(e){return isFinite(e)?e:NaN}function zr(e){return e>0&&isFinite(e)?e:NaN}function Hm(e){return e<0&&isFinite(e)?e:NaN}function Qq(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${tK(e.getUTCFullYear())}-${Sr(e.getUTCMonth()+1,2)}-${Sr(e.getUTCDate(),2)}${n||i||r||s?`T${Sr(n,2)}:${Sr(i,2)}${r||s?`:${Sr(r,2)}${s?`.${Sr(s,3)}`:""}`:""}Z`:""}`}function tK(e){return e<0?`-${Sr(-e,6)}`:e>9999?`+${Sr(e,6)}`:Sr(e,4)}function Sr(e,t){return`${e}`.padStart(t,"0")}const eK=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function aL(e,t){return eK.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Xa=1e3,Lo=Xa*60,Oo=Lo*60,Xr=Oo*24,$i=Xr*7,Xo=Xr*30,ps=Xr*365,Rp=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Xa],["5 seconds",5*Xa],["15 seconds",15*Xa],["30 seconds",30*Xa],["minute",Lo],["5 minutes",5*Lo],["15 minutes",15*Lo],["30 minutes",30*Lo],["hour",Oo],["3 hours",3*Oo],["6 hours",6*Oo],["12 hours",12*Oo],["day",Xr],["2 days",2*Xr],["week",$i],["2 weeks",2*$i],["month",Xo],["3 months",3*Xo],["6 months",6*Xo],["year",ps],["2 years",2*ps],["5 years",5*ps],["10 years",10*ps],["20 years",20*ps],["50 years",50*ps],["100 years",100*ps]],jw=new Map([["second",Xa],["minute",Lo],["hour",Oo],["day",Xr],["monday",$i],["tuesday",$i],["wednesday",$i],["thursday",$i],["friday",$i],["saturday",$i],["sunday",$i],["week",$i],["month",Xo],["year",ps]]),lL=new Map([["second",Zi],["minute",Dm],["hour",$m],["day",ga],["monday",Nu],["tuesday",r3],["wednesday",s3],["thursday",sa],["friday",o3],["saturday",a3],["sunday",Ol],["week",Ol],["month",Tf],["year",Li]]),cL=new Map([["second",Zi],["minute",vf],["hour",Ef],["day",Gm],["monday",Du],["tuesday",l3],["wednesday",c3],["thursday",oa],["friday",u3],["saturday",f3],["sunday",kl],["week",kl],["month",Cf],["year",Oi]]),Rf=Symbol("intervalDuration"),jm=Symbol("intervalType");for(const[e,t]of lL)t[Rf]=jw.get(e),t[jm]="time";for(const[e,t]of cL)t[Rf]=jw.get(e),t[jm]="utc";const nK=[["year",Oi,"utc"],["year",Li,"time"],["month",Cf,"utc"],["month",Tf,"time"],["day",Gm,"utc",6*Xo],["day",ga,"time",6*Xo],["hour",Ef,"utc",3*Xr],["minute",vf,"utc",6*Oo],["second",Zi,"utc",30*Lo]];function uL(e,t,n){let i=`${e}`.toLowerCase();i.endsWith("s")&&(i=i.slice(0,-1));let r=1;const s=/^(?:(\d+)\s+)/.exec(i);switch(s&&(i=i.slice(s[0].length),r=+s[1]),i){case"quarter":i="month",r*=3;break;case"half":i="month",r*=6;break}let o=t.get(i);if(!o)throw new Error(`unknown interval: ${e}`);if(r>1){if(!o.every)throw new Error(`non-periodic interval: ${i}`);o=o.every(r),o[Rf]=jw.get(i)*r,o[jm]=n}return o}function fL(e){return uL(e,lL,"time")}function Zw(e){return uL(e,cL,"utc")}function _T(e,t){if(!(t>1))return;const n=e[Rf];if(!Rp.some(([,r])=>r===n)||n%Xr===0&&Xr<n&&n<Xo)return;const[i]=Rp[vm(([,r])=>Math.log(r)).center(Rp,Math.log(n*t))];return(e[jm]==="time"?fL:Zw)(i)}function wT(e,t,n){const i=t==="time"?zw:Sf;if(n==null)return i(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=iK(n);switch(e){case"millisecond":return ka(i(".%L"),i(":%M:%S"),r);case"second":return ka(i(":%S"),i("%-I:%M"),r);case"minute":return ka(i("%-I:%M"),i("%p"),r);case"hour":return ka(i("%-I %p"),i("%b %-d"),r);case"day":return ka(i("%-d"),i("%b"),r);case"month":return ka(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function iK(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function rK(e,t){const n=Ue(RB(e,(i,r)=>Math.abs(r-i)));if(n<1e3)return wT("millisecond","utc",t);for(const[i,r,s,o]of nK){if(n>o||i==="hour"&&!n)break;if(e.every(a=>r.floor(a)>=a))return wT(i,s,t)}}function ka(e,t,n){return(i,r,s)=>{const o=e(i,r),a=t(i,r),l=r-Nl(s);return r!==l&&s[l]!==void 0&&a===t(s[l],l)?o:n(o,a)}}const Pl=Object.getPrototypeOf(Uint8Array),sK=Object.prototype.toString,hL=Symbol("reindex");function Ot(e,t,n){const i=typeof t;return i==="string"?xT(e,dL(t),n):i==="function"?xT(e,t,n):i==="number"||t instanceof Date||i==="boolean"?se(e,Bn(t),n):typeof(t==null?void 0:t.transform)=="function"?bT(t.transform(e),n):oK(bT(t,n),e==null?void 0:e[hL])}function oK(e,t){return t?qm(e,t):e}function xT(e,t,n){return se(e,(n==null?void 0:n.prototype)instanceof Pl?aK(t):t,n)}function bT(e,t){return t===void 0?Rn(e):e instanceof t?e:t.prototype instanceof Pl&&!(e instanceof Pl)?t.from(e,Jw):t.from(e)}function aK(e){return(t,n)=>Jw(e(t,n))}const au=[null],dL=e=>t=>t[e],An={transform:Jr},_t={transform:e=>e},qw=()=>1,lK=()=>!0,tn=e=>e==null?e:`${e}`,Ft=e=>e==null?e:+e,If=e=>e?e[0]:void 0,zu=e=>e?e[1]:void 0,cK=e=>e?e[2]:void 0,Bn=e=>()=>e;function Kw(e){const t=+`${e}`.slice(1)/100;return(n,i)=>Bs(n,t,i)}function En(e){return e instanceof Pl?e:se(e,Jw,Float64Array)}function Jw(e){return e==null?NaN:Number(e)}function uK(e){return se(e,gL)}function gL(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?aL(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Mn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:Lf(e)?[void 0,e]:[e,void 0]}function Te(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function mL(e,t,n){if(e!=null)return Yn(e,t,n)}function Yn(e,t,n){const i=`${e}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${t}: ${e}`);return i}function Rn(e){return e==null||e instanceof Array||e instanceof Pl?e:Array.from(e)}function se(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Gu(e,t=Array){return e instanceof t?e.slice():t.from(e)}function pL({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function yL({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function Zm(e){return pL(e)||yL(e)||e.interval!==void 0}function li(e){return(e==null?void 0:e.toString)===sK}function Ho(e){return li(e)&&(e.type!==void 0||e.domain!==void 0)}function Wi(e){return li(e)&&typeof e.transform!="function"}function Vs(e){return Wi(e)&&e.value===void 0&&e.channel===void 0}function _L(e,t,n,i=_t){return t===void 0&&n===void 0?(t=0,n=e===void 0?i:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Ni(e,t){return e===void 0&&t===void 0?[If,zu]:[e,t]}function to({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Mn(t)),e===void 0&&([e]=Mn(n)),e}function Jr(e){const t=e.length,n=new Uint32Array(t);for(let i=0;i<t;++i)n[i]=i;return n}function qm(e,t){return se(t,n=>e[n],e.constructor)}function Qw(e){return e.length===1?(t,n)=>e(qm(n,t)):e}function jo(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function ko(e){return e!==null&&typeof e=="object"?e.valueOf():e}function wL(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function Dn(e){let t;return[{transform:()=>t,label:Qr(e)},n=>t=n]}function wn(e){return e==null?[e]:Dn(e)}function Qr(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function Tg(e,t){return{transform(n){const i=e.transform(n),r=t.transform(n);return pn(i)||pn(r)?se(i,(s,o)=>new Date((+i[o]+ +r[o])/2)):se(i,(s,o)=>(+i[o]+ +r[o])/2,Float64Array)},label:e.label}}function Cg(e,t){const n=xL(t==null?void 0:t.interval,t==null?void 0:t.type);return n?se(e,n):e}function xL(e,t){const n=tx(e,t);return n&&(i=>dn(i)?n.floor(i):i)}function tx(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>ti(Math.ceil(i*n),r*n).map(s=>s/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>ti(Math.ceil(i/n),r/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?fL:Zw)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function nc(e,t){if(e=tx(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function fK(e,t){if(e=nc(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function hK(e){return Ha(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Ha(e){return typeof(e==null?void 0:e.range)=="function"}function Af(e){return e===void 0||Wi(e)?e:{value:e}}function dK(e){return e==null?null:{transform:t=>Ot(t,e,Float64Array),label:Qr(e)}}function gK(e){if(!ts(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function ts(e){return e&&typeof e[Symbol.iterator]=="function"}function bL(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function ye(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function pn(e){for(const t of e)if(t!=null)return t instanceof Date}function mK(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&aL(t)}function pK(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function ja(e){for(const t of e)if(t!=null)return typeof t=="number"}function Ip(e,t){let n;for(const i of e)if(i!=null){if(!t(i))return!1;n=!0}return n}const yK=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Lf(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||yK.has(e))}function _K(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function ve(e){return e==null||Fl(e)}function Fl(e){return/^\s*none\s*$/i.test(e)}function wK(e){return/^\s*round\s*$/i.test(e)}function vL(e,t){return mL(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Of(e="middle"){return vL(e,"frameAnchor")}function Nl(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Jo(t,n)}function xK(e={},...t){let n=e;for(const i of t)for(const r in i)if(n[r]===void 0){const s=i[r];n===e?n={...n,[r]:s}:n[r]=s}return n}function bK(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(t.has(r))throw new Error(`duplicate name: ${r}`);return t.add(r),[i,n]}))}function ex(e){return ts(e)?bK(e):e}const qi=Symbol("position"),es=Symbol("color"),kf=Symbol("radius"),Pf=Symbol("length"),Ff=Symbol("opacity"),Km=Symbol("symbol"),EL=Symbol("projection"),ge=new Map([["x",qi],["y",qi],["fx",qi],["fy",qi],["r",kf],["color",es],["opacity",Ff],["symbol",Km],["length",Pf],["projection",EL]]);function vK(e){return e===qi||e===EL}function EK(e){return e===qi||e===kf||e===Pf||e===Ff}const TL=Math.sqrt(3),CL=2/TL,TK={draw(e,t){const n=Math.sqrt(t/Math.PI),i=n*CL,r=i/2;e.moveTo(0,i),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(0,-i),e.lineTo(-n,-r),e.lineTo(-n,r),e.closePath()}},nx=new Map([["asterisk",D6],["circle",$u],["cross",$6],["diamond",G6],["diamond2",W6],["hexagon",TK],["plus",B6],["square",Y6],["square2",U6],["star",X6],["times",q6],["triangle",H6],["triangle2",j6],["wye",Z6]]);function ix(e){return e&&typeof e.draw=="function"}function CK(e){return ix(e)?!0:typeof e!="string"?!1:nx.has(e.toLowerCase())}function rx(e){if(e==null||ix(e))return e;const t=nx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function SK(e){if(e==null||ix(e))return[void 0,e];if(typeof e=="string"){const t=nx.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function lr({filter:e,sort:t,reverse:n,transform:i,initializer:r,...s}={},o){if(i===void 0&&(e!=null&&(i=sx(e)),t!=null&&!Vs(t)&&(i=Ap(i,ax(t))),n&&(i=Ap(i,ox))),o!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||Vs(t))&&{sort:t},transform:Ap(i,o)}}function In({filter:e,sort:t,reverse:n,initializer:i,...r}={},s){return i===void 0&&(e!=null&&(i=sx(e)),t!=null&&!Vs(t)&&(i=Lp(i,ax(t))),n&&(i=Lp(i,ox))),{...r,...(t===null||Vs(t))&&{sort:t},initializer:Lp(i,s)}}function Ap(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r){return{data:n,facets:i}=e.call(this,n,i,r),t.call(this,Rn(n),i,r)}}function Lp(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r,...s){let o,a,l,c,u,f;return{data:a=n,facets:l=i,channels:o}=e.call(this,n,i,r,...s),{data:u=a,facets:f=l,channels:c}=t.call(this,a,l,{...r,...o},...s),{data:u,facets:f,channels:{...o,...c}}}}function Jm(e,t){return(e.initializer!=null?In:lr)(e,t)}function MK(e,t){return Jm(t,sx(e))}function sx(e){return(t,n)=>{const i=Ot(t,e);return{data:t,facets:n.map(r=>r.filter(s=>i[s]))}}}function RK({sort:e,...t}={}){return{...Jm(t,ox),sort:Vs(e)?e:null}}function ox(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function IK({seed:e,sort:t,...n}={}){return{...Jm(n,ML(e==null?Math.random:Fw(e))),sort:Vs(t)?t:null}}function SL(e,{sort:t,...n}={}){return{...(Wi(e)&&e.channel!==void 0?In:Jm)(n,ax(e)),sort:Vs(t)?t:null}}function ax(e){return(typeof e=="function"&&e.length!==1?AK:ML)(e)}function AK(e){return(t,n)=>{const i=(r,s)=>e(t[r],t[s]);return{data:t,facets:n.map(r=>r.slice().sort(i))}}}function ML(e){let t,n;({channel:t,value:e,order:n}={...Af(e)});const i=t==null?void 0:t.startsWith("-");if(i&&(t=t.slice(1)),n===void 0&&(n=i?vg:ai),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=ai;break;case"descending":n=vg;break;default:throw new Error(`invalid order: ${n}`)}return(r,s,o)=>{let a;if(t===void 0)a=Ot(r,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:r,facets:s.map(c=>c.slice().sort(l))}}}function lx(e,t){return Qm(null,null,e,t)}function Wu(e={y:"count"},t={}){const{x:n=_t}=t;if(n==null)throw new Error("missing channel: x");return Qm(n,null,e,t)}function Bu(e={x:"count"},t={}){const{y:n=_t}=t;if(n==null)throw new Error("missing channel: y");return Qm(null,n,e,t)}function cx(e={fill:"count"},t={}){let{x:n,y:i}=t;if([n,i]=Ni(n,i),n==null)throw new Error("missing channel: x");if(i==null)throw new Error("missing channel: y");return Qm(n,i,e,t)}function Qm(e,t,{data:n=gx,filter:i,sort:r,reverse:s,...o}={},a={}){o=ux(o,a),n=t0(n,_t),r=r==null?void 0:fx("sort",r,a),i=i==null?void 0:hx("filter",i,a);const[l,c]=wn(e),[u,f]=wn(t),{z:h,fill:d,stroke:g,x1:m,x2:_,y1:p,y2:y,...x}=a,[w,v]=wn(h),[b]=Mn(d),[E]=Mn(g),[C,I]=wn(b),[S,R]=wn(E);return{..."z"in a&&{z:w||h},..."fill"in a&&{fill:C||d},..."stroke"in a&&{stroke:S||g},...lr(x,(M,k,O)=>{const A=Cg(Ot(M,e),O==null?void 0:O.x),P=Cg(Ot(M,t),O==null?void 0:O.y),N=Ot(M,h),G=Ot(M,b),H=Ot(M,E),U=dx(o,{z:N,fill:G,stroke:H}),Z=[],z=[],Q=A&&c([]),nt=P&&f([]),st=N&&v([]),ot=G&&I([]),$=H&&R([]);let Y=0;for(const D of o)D.initialize(M);r&&r.initialize(M),i&&i.initialize(M);for(const D of k){const V=[];for(const K of o)K.scope("facet",D);r&&r.scope("facet",D),i&&i.scope("facet",D);for(const[K,T]of ll(D,U))for(const[L,F]of ll(T,P))for(const[W,B]of ll(F,A))if(!(i&&!i.reduce(B))){V.push(Y++),z.push(n.reduceIndex(B,M)),A&&Q.push(W),P&&nt.push(L),N&&st.push(U===N?K:N[B[0]]),G&&ot.push(U===G?K:G[B[0]]),H&&$.push(U===H?K:H[B[0]]);for(const X of o)X.reduce(B);r&&r.reduce(B)}Z.push(V)}return RL(Z,r,s),{data:z,facets:Z}}),...!Os(o,"x")&&(l?{x:l}:{x1:m,x2:_}),...!Os(o,"y")&&(u?{y:u}:{y1:p,y2:y}),...Object.fromEntries(o.map(({name:M,output:k})=>[M,k]))}}function Os(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function ux(e,t,n=fx){const i=Object.entries(e);return t.title!=null&&e.title===void 0&&i.push(["title",FK]),t.href!=null&&e.href===void 0&&i.push(["href",mx]),i.filter(([,r])=>r!==void 0).map(([r,s])=>s===null?LK(r):n(r,s,t))}function fx(e,t,n,i=hx){let r;li(t)&&"reduce"in t&&(r=t.scale,t=t.reduce);const s=i(e,t,n),[o,a]=Dn(s.label);let l;return{name:e,output:r===void 0?o:{value:o,scale:r},initialize(c){s.initialize(c),l=a([])},scope(c,u){s.scope(c,u)},reduce(c,u){l.push(s.reduce(c,u))}}}function LK(e){return{name:e,initialize(){},scope(){},reduce(){}}}function hx(e,t,n,i=t0){const r=wL(e,n),s=i(t,r);let o,a;return{label:Qr(s===Sg?null:r,s.label),initialize(l){o=r===void 0?l:Ot(l,r),s.scope==="data"&&(a=s.reduceIndex(Jr(l),o))},scope(l,c){s.scope===l&&(a=s.reduceIndex(c,o))},reduce(l,c){return s.scope==null?s.reduceIndex(l,o,c):s.reduceIndex(l,o,a,c)}}}function ll(e,t){return t?Mu(Kr(e,n=>t[n]),If):[[,e]]}function t0(e,t,n=OK){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&li(e))return kK(e);if(typeof e=="function")return PK(e);if(/^p\d{2}$/i.test(e))return Er(Kw(e));switch(`${e}`.toLowerCase()){case"first":return mx;case"last":return NK;case"identity":return gx;case"count":return Sg;case"distinct":return DK;case"sum":return t==null?Sg:$K;case"proportion":return ET(t,"data");case"proportion-facet":return ET(t,"facet");case"deviation":return Er(ff);case"min":return Er(Cn);case"min-index":return Er(TB);case"max":return Er(Ue);case"max-index":return Er(EB);case"mean":return vT(Cm);case"median":return vT(Au);case"variance":return Er(hw);case"mode":return Er(wI)}return n(e)}function OK(e){throw new Error(`invalid reduce: ${e}`)}function dx(e,t){for(const n in t){const i=t[n];if(i!==void 0&&!e.some(r=>r.name===n))return i}}function RL(e,t,n){if(t){const i=t.output.transform(),r=(s,o)=>ai(i[s],i[o]);e.forEach(s=>s.sort(r))}n&&e.forEach(i=>i.reverse())}function kK(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function PK(e){return{reduceIndex(t,n,i){return e(qm(n,t),i)}}}function Er(e){return{reduceIndex(t,n){return e(t,i=>n[i])}}}function vT(e){return{reduceIndex(t,n){const i=e(t,r=>n[r]);return pn(n)?new Date(i):i}}}const gx={reduceIndex(e,t){return qm(t,e)}},mx={reduceIndex(e,t){return t[e[0]]}},FK={reduceIndex(e,t){const i=Mu(sl(e,s=>s.length,s=>t[s]),zu),r=i.slice(-5).reverse();if(r.length<i.length){const s=i.slice(0,-4);r[5-1]=[`… ${s.length.toLocaleString("en-US")} more`,nr(s,zu)]}return r.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},NK={reduceIndex(e,t){return t[e[e.length-1]]}},Sg={label:"Frequency",reduceIndex(e){return e.length}},DK={label:"Distinct",reduceIndex(e,t){const n=new hf;for(const i of e)n.add(t[i]);return n.size}},$K=Er(nr);function ET(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:t,reduceIndex:(n,i,r=1)=>nr(n,s=>i[s])/r}}function Yu(e,{scale:t,type:n,value:i,filter:r,hint:s,label:o=Qr(i)},a){return s===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(s=i.hint),AL(a,{scale:t,type:n,value:Ot(e,i),label:o,filter:r,hint:s})}function IL(e,t){return Object.fromEntries(Object.entries(e).map(([n,i])=>[n,Yu(t,i,n)]))}function px(e,t){const n=Object.fromEntries(Object.entries(e).map(([i,{scale:r,value:s}])=>{const o=r==null?null:t[r];return[i,o==null?s:se(s,o)]}));return n.channels=e,n}function AL(e,t){const{scale:n,value:i}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Ip(i,Lf)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Ip(i,_K)?null:"opacity";break;case"symbol":n!==!0&&Ip(i,CK)?(t.scale=null,t.value=se(i,rx)):t.scale="symbol";break;default:t.scale=ge.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!ge.has(n))throw new Error(`unknown scale: ${n}`);return t}function zK(e,t,n,i,r){const{order:s,reverse:o,reduce:a=!0,limit:l}=r;for(const c in r){if(!ge.has(c))continue;let{value:u,order:f=s,reverse:h=o,reduce:d=a,limit:g=l}=Af(r[c]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),f=f===void 0?m!==(u==="width"||u==="height")?OL:LL:BK(f),d==null||d===!1)continue;const _=c==="fx"||c==="fy"?WK(t,i[c]):GK(n,c);if(!_)throw new Error(`missing channel for scale: ${c}`);const p=_.value,[y=0,x=1/0]=ts(g)?g:g<0?[g]:[0,g];if(u==null)_.domain=()=>{let w=Array.from(new hf(p));return h&&(w=w.reverse()),(y!==0||x!==1/0)&&(w=w.slice(y,x)),w};else{const w=u==="data"?e:u==="height"?TT(n,"y1","y2"):u==="width"?TT(n,"x1","x2"):R_(n,u,u==="y"?"y2":u==="x"?"x2":void 0),v=t0(d===!0?"max":d,w);_.domain=()=>{let b=_B(Jr(p),E=>v.reduceIndex(E,w),E=>p[E]);return f&&b.sort(f),h&&b.reverse(),(y!==0||x!==1/0)&&(b=b.slice(y,x)),b.map(If)}}}}function GK(e,t){for(const n in e){const i=e[n];if(i.scale===t)return i}}function WK(e,t){const n=e.original;if(n===e)return t;const i=t.value,r=t.value=[];for(let s=0;s<n.length;++s){const o=i[n[s][0]];for(const a of e[s])r[a]=o}return t}function TT(e,t,n){const i=R_(e,t),r=R_(e,n);return se(r,(s,o)=>Math.abs(s-i[o]),Float64Array)}function R_(e,t,n){let i=e[t];if(!i&&n!==void 0&&(i=e[n]),i)return i.value;throw new Error(`missing channel: ${t}`)}function BK(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return LL;case"descending":return OL}throw new Error(`invalid order: ${e}`)}function LL([e,t],[n,i]){return ai(t,i)||ai(e,n)}function OL([e,t],[n,i]){return vg(t,i)||ai(e,n)}function I_(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function yx(e){let t,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,s)=>r!==i[s]))&&(n=i,t=e(...i)),t)}const YK=yx(e=>new Intl.NumberFormat(e)),UK=yx((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),VK=yx((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function XK(e="en-US"){const t=YK(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function HK(e="en-US",t="short"){const n=UK(e,t);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2e3,+i)))?n.format(i):void 0}function jK(e="en-US",t="short"){const n=VK(e,t);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2001,0,+i)))?n.format(i):void 0}function kL(e){return Qq(e,"Invalid Date")}function ZK(e="en-US"){const t=XK(e);return n=>(n instanceof Date?kL:typeof n=="number"?t:tn)(n)}const aa=ZK();let A_=0,L_;function qK(){const e=A_;return A_=0,L_=void 0,e}function Gr(e){e!==L_&&(L_=e,console.warn(e),++A_)}const He=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let KK=0;function CT(){return`plot-clip-${++KK}`}function PL(e,{title:t,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:g,strokeDasharray:m,strokeDashoffset:_,opacity:p,mixBlendMode:y,imageFilter:x,paintOrder:w,pointerEvents:v,shapeRendering:b,channels:E},{ariaLabel:C,fill:I="currentColor",fillOpacity:S,stroke:R="none",strokeOpacity:M,strokeWidth:k,strokeLinecap:O,strokeLinejoin:A,strokeMiterlimit:P,paintOrder:N}){I===null&&(a=null,l=null),R===null&&(c=null,f=null),ve(I)?!ve(R)&&(!ve(a)||E!=null&&E.fill)&&(R="none"):ve(R)&&(!ve(c)||E!=null&&E.stroke)&&(I="none");const[G,H]=Mn(a,I),[U,Z]=Te(l,S),[z,Q]=Mn(c,R),[nt,st]=Te(f,M),[ot,$]=Te(p);Fl(Q)||(u===void 0&&(u=k),d===void 0&&(d=O),h===void 0&&(h=A),g===void 0&&!wK(h)&&(g=P),!Fl(H)&&w===void 0&&(w=N));const[Y,D]=Te(u);return I!==null&&(e.fill=xe(H,"currentColor"),e.fillOpacity=Rc(Z,1)),R!==null&&(e.stroke=xe(Q,"none"),e.strokeWidth=Rc(D,1),e.strokeOpacity=Rc(st,1),e.strokeLinejoin=xe(h,"miter"),e.strokeLinecap=xe(d,"butt"),e.strokeMiterlimit=Rc(g,4),e.strokeDasharray=xe(m,"none"),e.strokeDashoffset=xe(_,"0")),e.target=tn(o),e.ariaLabel=tn(C),e.ariaDescription=tn(r),e.ariaHidden=tn(s),e.opacity=Rc($,1),e.mixBlendMode=xe(y,"normal"),e.imageFilter=xe(x,"none"),e.paintOrder=xe(w,"normal"),e.pointerEvents=xe(v,"auto"),e.shapeRendering=xe(b,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:G,scale:"auto",optional:!0},fillOpacity:{value:U,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:nt,scale:"auto",optional:!0},strokeWidth:{value:Y,optional:!0},opacity:{value:ot,scale:"auto",optional:!0}}}function JK(e,t){t&&e.filter(n=>Hw(t[n])).append("title").call(tJ,t)}function QK(e,t){t&&e.filter(([n])=>Hw(t[n])).append("title").call(eJ,t)}function tJ(e,t){t&&e.text(n=>aa(t[n]))}function eJ(e,t){t&&e.text(([n])=>aa(t[n]))}function Ne(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){i&&gt(e,"aria-label",h=>i[h]),s&&gt(e,"fill",h=>s[h]),o&&gt(e,"fill-opacity",h=>o[h]),a&&gt(e,"stroke",h=>a[h]),l&&gt(e,"stroke-opacity",h=>l[h]),c&&gt(e,"stroke-width",h=>c[h]),u&&gt(e,"opacity",h=>u[h]),f&&DL(e,h=>f[h],t),n||JK(e,r)}function Mg(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){i&&gt(e,"aria-label",([h])=>i[h]),s&&gt(e,"fill",([h])=>s[h]),o&&gt(e,"fill-opacity",([h])=>o[h]),a&&gt(e,"stroke",([h])=>a[h]),l&&gt(e,"stroke-opacity",([h])=>l[h]),c&&gt(e,"stroke-width",([h])=>c[h]),u&&gt(e,"opacity",([h])=>u[h]),f&&DL(e,([h])=>f[h],t),n||QK(e,r)}function nJ({ariaLabel:e,title:t,fill:n,fillOpacity:i,stroke:r,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,i,r,s,o,a,l].filter(u=>u!==void 0)}function _x(e,t,n){const i=Kr(e,r=>t[r]);return n===void 0&&i.size>1+e.length>>1&&Gr("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*FL(e,t,n,i){const{z:r}=n,{z:s}=i,o=nJ(i,n),a=[...t,...o];for(const l of s?_x(e,s,r):[e]){let c,u;t:for(const f of l){for(const h of a)if(!dn(h[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=o.map(h=>ko(h[f])),u=[f];continue}u.push(f);for(let h=0;h<o.length;++h)if(ko(o[h][f])!==c[h]){yield u,c=o.map(g=>ko(g[f])),u=[f];continue t}}u&&(yield u)}}function NL(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Yn(e,"clip",["frame","sphere"])),e}function iJ(e,t,n,i){let r;const{clip:s=i.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:c,marginTop:u,marginBottom:f}=n,h=CT();r=`url(#${h})`,e=Ht("svg:g",i).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=i;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=CT();r=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",Js(o)({type:"Sphere"}));break}}gt(e,"aria-label",t.ariaLabel),gt(e,"aria-description",t.ariaDescription),gt(e,"aria-hidden",t.ariaHidden),gt(e,"clip-path",r)}function he(e,t,n,i){iJ(e,t,n,i),gt(e,"fill",t.fill),gt(e,"fill-opacity",t.fillOpacity),gt(e,"stroke",t.stroke),gt(e,"stroke-width",t.strokeWidth),gt(e,"stroke-opacity",t.strokeOpacity),gt(e,"stroke-linejoin",t.strokeLinejoin),gt(e,"stroke-linecap",t.strokeLinecap),gt(e,"stroke-miterlimit",t.strokeMiterlimit),gt(e,"stroke-dasharray",t.strokeDasharray),gt(e,"stroke-dashoffset",t.strokeDashoffset),gt(e,"shape-rendering",t.shapeRendering),gt(e,"filter",t.imageFilter),gt(e,"paint-order",t.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=t;gt(e,"pointer-events",r)}function le(e,t){rJ(e,"mix-blend-mode",t.mixBlendMode),gt(e,"opacity",t.opacity)}function DL(e,t,n){e.each(function(i){const r=t(i);if(r!=null){const s=this.ownerDocument.createElementNS(ta.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(ta.xlink,"href",r),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function gt(e,t,n){n!=null&&e.attr(t,n)}function rJ(e,t,n){n!=null&&e.style(t,n)}function ie(e,t,{x:n,y:i},r=He,s=He){r+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(s+=i.bandwidth()/2),(r||s)&&e.attr("transform",`translate(${r},${s})`)}function xe(e,t){if((e=tn(e))!==t)return e}function Rc(e,t){if((e=Ft(e))!==t)return e}const sJ=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function wx(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!sJ.test(e))throw new Error(`invalid class name: ${e}`);return e}function xx(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function cr({frameAnchor:e},{width:t,height:n,marginTop:i,marginRight:r,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-r:(o+t-r)/2,/^top/.test(e)?i:/^bottom/.test(e)?n-s:(i+n-s)/2]}function e0(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:NL(n)}}function Ht(e,{document:t}){return Fs(Mm(e).call(t.documentElement))}const $L=Math.PI,yr=2*$L,ST=.618;function oJ({projection:e,inset:t=0,insetTop:n=t,insetRight:i=t,insetBottom:r=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,c="frame";if(li(e)){let v;if({type:e,domain:l,inset:v,insetTop:n=v!==void 0?v:n,insetRight:i=v!==void 0?v:i,insetBottom:r=v!==void 0?v:r,insetLeft:s=v!==void 0?v:s,clip:c=c,...a}=e,e==null)return}typeof e!="function"&&({type:e}=zL(e));const{width:u,height:f,marginLeft:h,marginRight:d,marginTop:g,marginBottom:m}=o,_=u-h-d-s-i,p=f-g-m-n-r;if(e=e==null?void 0:e({width:_,height:p,clip:c,...a}),e==null)return;c=aJ(c,h,g,u-d,f-m);let y=h+s,x=g+n,w;if(l!=null){const[[v,b],[E,C]]=Js(e).bounds(l),I=Math.min(_/(E-v),p/(C-b));I>0?(y-=(I*(v+E)-_)/2,x-=(I*(b+C)-p)/2,w=cg({point(S,R){this.stream.point(S*I+y,R*I+x)}})):Gr("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=y===0&&x===0?GL():cg({point(v,b){this.stream.point(v+y,b+x)}})),{stream:v=>e.stream(w.stream(c(v)))}}function zL(e){switch(`${e}`.toLowerCase()){case"albers-usa":return gi(HH,.7463,.4673);case"albers":return Oh(OA,.7463,.4673);case"azimuthal-equal-area":return gi(jH,4,4);case"azimuthal-equidistant":return gi(ZH,yr,yr);case"conic-conformal":return Oh(JH,yr,yr);case"conic-equal-area":return Oh(ug,6.1702,2.9781);case"conic-equidistant":return Oh(ej,7.312,3.6282);case"equal-earth":return gi(ij,5.4133,2.6347);case"equirectangular":return gi(QH,yr,$L);case"gnomonic":return gi(rj,3.4641,3.4641);case"identity":return{type:GL};case"reflect-y":return{type:lJ};case"mercator":return gi(qH,yr,yr);case"orthographic":return gi(sj,2,2);case"stereographic":return gi(oj,2,2);case"transverse-mercator":return gi(aj,yr,yr);default:throw new Error(`unknown projection type: ${e}`)}}function aJ(e,t,n,i,r){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return pA(t,n,i,r);default:throw new Error(`unknown projection clip type: ${e}`)}}function gi(e,t,n){return{type:({width:i,height:r,rotate:s,precision:o=.15,clip:a})=>{var c,u,f;const l=e();return o!=null&&((c=l.precision)==null||c.call(l,o)),s!=null&&((u=l.rotate)==null||u.call(l,s)),typeof a=="number"&&((f=l.clipAngle)==null||f.call(l,a)),l.scale(Math.min(i/t,r/n)),l.translate([i/2,r/2]),l},aspectRatio:n/t}}function Oh(e,t,n){const{type:i,aspectRatio:r}=gi(e,t,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:c}=s,u=i(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:r}}const GL=Bn({stream:e=>e}),lJ=Bn(cg({point(e,t){this.stream.point(e,-t)}}));function WL(e,t,n,i){const r=n[e],s=n[t],o=r.length,a=n[e]=new Float64Array(o).fill(NaN),l=n[t]=new Float64Array(o).fill(NaN);let c;const u=i.stream({point(f,h){a[c]=f,l[c]=h}});for(c=0;c<o;++c)u.point(r[c],s[c])}function cJ({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(li(e)&&(e=e.type),e!=null)}function uJ(e){if(typeof(e==null?void 0:e.stream)=="function")return ST;if(li(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=zL(e);if(t)return t}return ST}}function n0(e,t,{projection:n}){const{x:i,y:r}=e;let s={};return i&&(s.x=i),r&&(s.y=r),s=px(s,t),n&&(i==null?void 0:i.scale)==="x"&&(r==null?void 0:r.scale)==="y"&&WL("x","y",s,n),i&&(s.x=En(s.x)),r&&(s.y=En(s.y)),s}function fJ(e){const t=[],n=[],i={scale:"x",value:t},r={scale:"y",value:n},s={point(o,a){t.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)Ts(o,s);return[i,r]}const BL=new Map([["accent",gq],["category10",dq],["dark2",mq],["paired",pq],["pastel1",yq],["pastel2",_q],["set1",wq],["set2",xq],["set3",bq],["tableau10",vq]]);function hJ(e){return e!=null&&BL.has(`${e}`.toLowerCase())}const MT=new Map([...BL,["brbg",_r(v3,E3)],["prgn",_r(T3,C3)],["piyg",_r(S3,M3)],["puor",_r(R3,I3)],["rdbu",_r(C_,mg)],["rdgy",_r(A3,L3)],["rdylbu",_r(S_,pg)],["rdylgn",_r(O3,k3)],["spectral",_r(P3,F3)],["burd",RT(C_,mg)],["buylrd",RT(S_,pg)],["blues",De(o6,a6)],["greens",De(l6,c6)],["greys",De(u6,f6)],["oranges",De(p6,y6)],["purples",De(h6,d6)],["reds",De(g6,m6)],["turbo",wr(T6)],["viridis",wr(C6)],["magma",wr(S6)],["inferno",wr(M6)],["plasma",wr(R6)],["cividis",wr(_6)],["cubehelix",wr(w6)],["warm",wr(x6)],["cool",wr(b6)],["bugn",De(N3,D3)],["bupu",De($3,z3)],["gnbu",De(G3,W3)],["orrd",De(B3,Y3)],["pubu",De(X3,H3)],["pubugn",De(U3,V3)],["purd",De(j3,Z3)],["rdpu",De(q3,K3)],["ylgn",De(t6,e6)],["ylgnbu",De(J3,Q3)],["ylorbr",De(n6,i6)],["ylorrd",De(r6,s6)],["rainbow",IT(v6)],["sinebow",IT(E6)]]);function De(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ii(t,n):e[n])}function _r(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ii(t,n):e[n])}function RT(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ii(i=>t(1-i),n):e[n].slice().reverse())}function wr(e){return({length:t})=>Ii(e,Math.max(2,Math.floor(t)))}function IT(e){return({length:t})=>Ii(e,Math.floor(t)+1).slice(0,-1)}function YL(e){const t=`${e}`.toLowerCase();if(!MT.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return MT.get(t)}function i0(e,t){const n=YL(e),i=typeof n=="function"?n({length:t}):n;return i.length!==t?i.slice(0,t):i}function dJ(e,t="greys"){const n=new Set,[i,r]=i0(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(r);else if(s===!1)n.add(i);else return;return[...n]}const AT=new Map([["brbg",E3],["prgn",C3],["piyg",M3],["puor",I3],["rdbu",mg],["rdgy",L3],["rdylbu",pg],["rdylgn",k3],["spectral",F3],["burd",e=>mg(1-e)],["buylrd",e=>pg(1-e)],["blues",a6],["greens",c6],["greys",f6],["purples",d6],["reds",m6],["oranges",y6],["turbo",T6],["viridis",C6],["magma",S6],["inferno",M6],["plasma",R6],["cividis",_6],["cubehelix",w6],["warm",x6],["cool",b6],["bugn",D3],["bupu",z3],["gnbu",W3],["orrd",Y3],["pubugn",V3],["pubu",H3],["purd",Z3],["rdpu",K3],["ylgnbu",Q3],["ylgn",e6],["ylorbr",i6],["ylorrd",s6],["rainbow",v6],["sinebow",E6]]);function bx(e){const t=`${e}`.toLowerCase();if(!AT.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return AT.get(t)}const gJ=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function mJ(e){return e!=null&&gJ.has(`${e}`.toLowerCase())}const UL=e=>t=>e(1-t),Op=[0,1],LT=new Map([["number",Ke],["rgb",Ys],["hsl",QU],["hcl",nV],["lab",tV]]);function VL(e){const t=`${e}`.toLowerCase();if(!LT.has(t))throw new Error(`unknown interpolator: ${t}`);return LT.get(t)}function Nf(e,t,n,{type:i,nice:r,clamp:s,zero:o,domain:a=HL(e,n),unknown:l,round:c,scheme:u,interval:f,range:h=ge.get(e)===kf?SJ(n,a):ge.get(e)===Pf?MJ(n,a):ge.get(e)===Ff?Op:void 0,interpolate:d=ge.get(e)===es?u==null&&h!==void 0?Ys:bx(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):c?Tw:Ke,reverse:g}){if(f=nc(f,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof d!="function"&&(d=VL(d)),g=!!g,h!==void 0){const m=(a=Rn(a)).length,_=(h=Rn(h)).length;if(m!==_){if(d.length===1)throw new Error("invalid piecewise interpolator");d=pf(d,h),h=void 0}}if(d.length===1?(g&&(d=UL(d),g=!1),h===void 0&&(h=Float64Array.from(a,(m,_)=>_/(a.length-1)),h.length===2&&(h=Op)),t.interpolate((h===Op?Bn:Ex)(d))):t.interpolate(d),o){const[m,_]=Be(a);(m>0||_<0)&&(a=Gu(a),Nl(a)!==Math.sign(m)?a[a.length-1]=0:a[0]=0)}return g&&(a=Nd(a)),t.domain(a).unknown(l),r&&(t.nice(pJ(r,i)),a=t.domain()),h!==void 0&&t.range(h),s&&t.clamp(s),{type:i,domain:a,range:h,scale:t,interpolate:d,interval:f}}function pJ(e,t){return e===!0?void 0:typeof e=="number"?e:fK(e,t)}function yJ(e,t,n){return Nf(e,Dw(),t,n)}function _J(e,t,n){return XL(e,t,{...n,exponent:.5})}function XL(e,t,{exponent:n=1,...i}){return Nf(e,e3().exponent(n),t,{...i,type:"pow"})}function wJ(e,t,{base:n=10,domain:i=RJ(t),...r}){return Nf(e,KA().base(n),t,{...r,domain:i})}function xJ(e,t,{constant:n=1,...i}){return Nf(e,QA().constant(n),t,i)}function bJ(e,t,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:s="rdylbu",domain:o=IJ(t),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?Ii(l,r):ge.get(e)===es?i0(s,r):void 0),o.length>0&&(o=n3(o,n===void 0?{length:r}:n).quantiles()),vx(e,t,{domain:o,range:n,reverse:c,unknown:a})}function vJ(e,t,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:s=HL(e,t),unknown:o,interpolate:a,reverse:l}){const[c,u]=Be(s);let f;return n===void 0?(f=Ws(c,u,i),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),i=f.length+1,n=a!==void 0?Ii(a,i):ge.get(e)===es?i0(r,i):void 0):(f=Ii(Ke(c,u),i+1).slice(1,-1),c instanceof Date&&(f=f.map(h=>new Date(h)))),Nl(Rn(s))<0&&f.reverse(),vx(e,t,{domain:f,range:n,reverse:l,unknown:o})}function vx(e,t,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:s,range:o=s!==void 0?Ii(s,n.length+1):ge.get(e)===es?i0(r,n.length+1):void 0,reverse:a}){n=Rn(n);const l=Nl(n);if(!isNaN(l)&&!EJ(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=Nd(o)),{type:"threshold",scale:i3(l<0?Nd(n):n,o===void 0?[]:o).unknown(i),domain:n,range:o}}function EJ(e,t){for(let n=1,i=e.length,r=e[0];n<i;++n){const s=Jo(r,r=e[n]);if(s!==0&&s!==t)return!1}return!0}function TJ(e){return{type:"identity",scale:EK(ge.get(e))?jA():t=>t}}function Uu(e,t=Eg){return e.length?[Cn(e,({value:n})=>n===void 0?n:Cn(n,t)),Ue(e,({value:n})=>n===void 0?n:Ue(n,t))]:[0,1]}function HL(e,t){const n=ge.get(e);return(n===kf||n===Ff||n===Pf?CJ:Uu)(t)}function CJ(e){return[0,e.length?Ue(e,({value:t})=>t===void 0?t:Ue(t,Eg)):1]}function SJ(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const i=Bs(e,.5,({value:o})=>o===void 0?NaN:Bs(o,.25,zr)),r=t.map(o=>3*Math.sqrt(o/i)),s=30/Ue(r);return s<1?r.map(o=>o*s):r}function MJ(e,t){const n=Au(e,({value:s})=>s===void 0?NaN:Au(s,Math.abs)),i=t.map(s=>12*s/n),r=60/Ue(i);return r<1?i.map(s=>s*r):i}function RJ(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return Uu(e,zr);if(n<0)return Uu(e,Hm)}return[1,10]}function IJ(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const i of n)t.push(i);return t}function Ex(e){return(t,n)=>i=>e(t+i*(n-t))}function r0(e,t,n,i,{type:r,nice:s,clamp:o,domain:a=Uu(i),unknown:l,pivot:c=0,scheme:u,range:f,symmetric:h=!0,interpolate:d=ge.get(e)===es?u==null&&f!==void 0?Ys:bx(u!==void 0?u:"rdbu"):Ke,reverse:g}){c=+c,a=Rn(a);let[m,_]=a;if(a.length>2&&Gr(`Warning: the diverging ${e} scale domain contains extra elements.`),Jo(m,_)<0&&([m,_]=[_,m],g=!g),m=Math.min(m,c),_=Math.max(_,c),typeof d!="function"&&(d=VL(d)),f!==void 0&&(d=d.length===1?Ex(d)(...f):pf(d,f)),g&&(d=UL(d)),h){const p=n.apply(c),y=p-n.apply(m),x=n.apply(_)-p;y<x?m=n.invert(p-x):y>x&&(_=n.invert(p+y))}return t.domain([m,c,_]).unknown(l).interpolator(d),o&&t.clamp(o),s&&t.nice(s),{type:r,domain:[m,_],pivot:c,interpolate:d,scale:t}}function AJ(e,t,n){return r0(e,_3(),PJ,t,n)}function LJ(e,t,n){return jL(e,t,{...n,exponent:.5})}function jL(e,t,{exponent:n=1,...i}){return r0(e,b3().exponent(n=+n),DJ(n),t,{...i,type:"diverging-pow"})}function OJ(e,t,{base:n=10,pivot:i=1,domain:r=Uu(t,i<0?Hm:zr),...s}){return r0(e,w3().base(n=+n),FJ,t,{domain:r,pivot:i,...s})}function kJ(e,t,{constant:n=1,...i}){return r0(e,x3().constant(n=+n),$J(n),t,i)}const PJ={apply(e){return e},invert(e){return e}},FJ={apply:Math.log,invert:Math.exp},NJ={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function DJ(e){return e===.5?NJ:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function $J(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function ZL(e,t,n,i){return Nf(e,t,n,i)}function zJ(e,t,n){return ZL(e,fq(),t,n)}function GJ(e,t,n){return ZL(e,hq(),t,n)}const Df=Symbol("ordinal");function qL(e,t,n,{type:i,interval:r,domain:s,range:o,reverse:a,hint:l}){return r=nc(r,i),s===void 0&&(s=JL(n,r,e)),(i==="categorical"||i===Df)&&(i="ordinal"),a&&(s=Nd(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:i,domain:s,range:o,scale:t,hint:l,interval:r}}function WJ(e,t,{type:n,interval:i,domain:r,range:s,scheme:o,unknown:a,...l}){i=nc(i,n),r===void 0&&(r=JL(t,i,e));let c;if(ge.get(e)===Km)c=UJ(t),s=s===void 0?VJ(c):se(s,rx);else if(ge.get(e)===es&&(s===void 0&&(n==="ordinal"||n===Df)&&(s=dJ(r,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=bx(o),f=s[0],h=s[1]-s[0];s=({length:d})=>Ii(g=>u(f+h*g),d)}else s=YL(o);if(a===v_)throw new Error(`implicit unknown on ${e} scale is not supported`);return qL(e,Nw().unknown(a),t,{...l,type:n,domain:r,range:s,hint:c})}function BJ(e,t,{align:n=.5,padding:i=.5,...r}){return KL(Xj().align(n).padding(i),t,r,e)}function YJ(e,t,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:s=e==="fx"||e==="fy"?0:i,...o}){return KL(Fm().align(n).paddingInner(r).paddingOuter(s),t,o,e)}function KL(e,t,n,i){let{round:r}=n;return r!==void 0&&e.round(r=!!r),e=qL(i,e,t,n),e.round=r,e}function JL(e,t,n){const i=new hf;for(const{value:r,domain:s}of e){if(s!==void 0)return s();if(r!==void 0)for(const o of r)i.add(o)}if(t!==void 0){const[r,s]=Be(i).map(t.floor,t);return t.range(r,t.offset(s))}if(i.size>1e4&&ge.get(n)===qi)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Mu(i,ai)}function OT(e,t){let n;for(const{hint:i}of e){const r=i==null?void 0:i[t];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function UJ(e){return{fill:OT(e,"fill"),stroke:OT(e,"stroke")}}function VJ(e){return ve(e.fill)?Fq:Pq}function O_(e,{label:t,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:c,zero:u,align:f,padding:h,projection:d,facet:{label:g=t}={},...m}={}){const _={};for(const[p,y]of e){const x=m[p],w=nO(p,y,{round:ge.get(p)===qi?a:void 0,nice:l,clamp:c,zero:u,align:f,padding:h,projection:d,...x});if(w){let{label:v=p==="fx"||p==="fy"?g:t,percent:b,transform:E,inset:C,insetTop:I=C!==void 0?C:p==="y"?i:0,insetRight:S=C!==void 0?C:p==="x"?r:0,insetBottom:R=C!==void 0?C:p==="y"?s:0,insetLeft:M=C!==void 0?C:p==="x"?o:0}=x||{};if(E==null)E=void 0;else if(typeof E!="function")throw new Error("invalid scale transform; not a function");w.percent=!!b,w.label=v===void 0?HJ(y,w):v,w.transform=E,p==="x"||p==="fx"?(w.insetLeft=+M,w.insetRight=+S):(p==="y"||p==="fy")&&(w.insetTop=+I,w.insetBottom=+R),_[p]=w}}return _}function kT(e){const t={},n={scales:t};for(const[i,r]of Object.entries(e)){const{scale:s,type:o,interval:a,label:l}=r;t[i]=rO(r),n[i]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function XJ(e,t){const{x:n,y:i,fx:r,fy:s}=e,o=r||s?Tx(t):t;r&&PT(r,o),s&&FT(s,o);const a=r||s?QL(e,t):t;n&&PT(n,a),i&&FT(i,a)}function HJ(e=[],t){let n;for(const{label:i}of e)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!ya(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Tx(e){const{marginTop:t,marginRight:n,marginBottom:i,marginLeft:r,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(i,c),marginLeft:Math.max(r,u),width:s,height:o}}function QL({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=Tx(n);return{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+r:a,height:t?t.scale.bandwidth()+i+s:l,facet:{width:a,height:l}}}function PT(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:i}=e,{width:r,marginLeft:s=0,marginRight:o=0}=t,a=s+n,l=r-o-i;e.range=[a,Math.max(a,l)],ya(e)||(e.range=eO(e)),e.scale.range(e.range)}tO(e)}function FT(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:i}=e,{height:r,marginTop:s=0,marginBottom:o=0}=t,a=s+n,l=r-o-i;e.range=[Math.max(a,l),a],ya(e)?e.range.reverse():e.range=eO(e),e.scale.range(e.range)}tO(e)}function tO(e){e.round===void 0&&qJ(e)&&jJ(e)<=30&&e.scale.round(!0)}function jJ({scale:e}){const t=e.domain().length,[n,i]=e.range(),r=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-r,a=Math.abs(i-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function eO(e){const t=e.scale.domain().length+iO(e);if(!(t>2))return e.range;const[n,i]=e.range;return Array.from({length:t},(r,s)=>n+s/(t-1)*(i-n))}function k_(e,t,n){return nO(e,n===void 0?void 0:[{hint:n}],{...t})}function nO(e,t=[],n={}){const i=ZJ(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&ya({type:i})){const r=t.map(({value:s})=>s).filter(s=>s!==void 0);r.some(pn)?Gr(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Pa(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Pa(i)}".`):r.some(mK)?Gr(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Pa(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Pa(i)}".`):r.some(pK)&&Gr(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Pa(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Pa(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=kh(t,n,En);break;case"identity":switch(ge.get(e)){case qi:n=kh(t,n,En);break;case Km:n=kh(t,n,KJ);break}break;case"utc":case"time":n=kh(t,n,uK);break}switch(i){case"diverging":return AJ(e,t,n);case"diverging-sqrt":return LJ(e,t,n);case"diverging-pow":return jL(e,t,n);case"diverging-log":return OJ(e,t,n);case"diverging-symlog":return kJ(e,t,n);case"categorical":case"ordinal":case Df:return WJ(e,t,n);case"cyclical":case"sequential":case"linear":return yJ(e,t,n);case"sqrt":return _J(e,t,n);case"threshold":return vx(e,t,n);case"quantile":return bJ(e,t,n);case"quantize":return vJ(e,t,n);case"pow":return XL(e,t,n);case"log":return wJ(e,t,n);case"symlog":return xJ(e,t,n);case"utc":return GJ(e,t,n);case"time":return zJ(e,t,n);case"point":return BJ(e,t,n);case"band":return YJ(e,t,n);case"identity":return TJ(e);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Pa(e){return typeof e=="symbol"?e.description:e}const NT={toString:()=>"projection"};function ZJ(e,t,{type:n,domain:i,range:r,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=NT);for(const{type:c}of t)if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}if(n===NT)return;if(n!==void 0)return n;if(i===void 0&&!t.some(({value:c})=>c!==void 0))return;const l=ge.get(e);if(l===kf)return"sqrt";if(l===Ff||l===Pf)return"linear";if(l===Km)return"ordinal";if((i||r||[]).length>2)return kp(l);if(i!==void 0){if(ye(i))return kp(l);if(pn(i))return"utc"}else{const c=t.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(ye))return kp(l);if(c.some(pn))return"utc"}if(l===es){if(o!=null||mJ(s))return"diverging";if(hJ(s))return"categorical"}return"linear"}function kp(e){switch(e){case qi:return"point";case es:return Df;default:return"ordinal"}}function ya({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Df}function iO({type:e}){return e==="threshold"}function qJ({type:e}){return e==="point"||e==="band"}function ri(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let i=1,r=t.length;i<r;++i)if(e(t[i])-n)return!1;return!0}function kh(e,{domain:t,...n},i){for(const r of e)r.value!==void 0&&(r.value=i(r.value));return{domain:t===void 0?t:i(t),...n}}function KJ(e){return se(e,rx)}function JJ(e={}){let t;for(const n in e)if(ge.has(n)&&Ho(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=rO(k_(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function QJ(e){return t=>{if(!ge.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function rO({scale:e,type:t,domain:n,range:i,interpolate:r,interval:s,transform:o,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:Gu(n),...i!==void 0&&{range:Gu(i)},...o!==void 0&&{transform:o},...a&&{percent:a},...c!==void 0&&{unknown:c},...s!==void 0&&{interval:s},...r!==void 0&&{interpolate:r},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function tQ(e,t,n={}){let i=.5-He,r=.5+He,s=.5+He,o=.5-He;for(const{marginTop:m,marginRight:_,marginBottom:p,marginLeft:y}of t)m>i&&(i=m),_>r&&(r=_),p>s&&(s=p),y>o&&(o=y);let{margin:a,marginTop:l=a!==void 0?a:i,marginRight:c=a!==void 0?a:r,marginBottom:u=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;l=+l,c=+c,u=+u,f=+f;let{width:h=640,height:d=eQ(e,n,{width:h,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-i+u-s)}=n;h=+h,d=+d;const g={width:h,height:d,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:m,marginTop:_=m!==void 0?m:l,marginRight:p=m!==void 0?m:c,marginBottom:y=m!==void 0?m:u,marginLeft:x=m!==void 0?m:f}=n.facet??{};_=+_,p=+p,y=+y,x=+x,g.facet={marginTop:_,marginRight:p,marginBottom:y,marginLeft:x}}return g}function eQ({x:e,y:t,fy:n,fx:i},{projection:r,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const f=n?n.scale.domain().length:1,h=uJ(r);if(h){const g=i?i.scale.domain().length:1,m=(1.1*f-.1)/(1.1*g-.1)*h,_=Math.max(.1,Math.min(10,m));return Math.round((o-u-l)*_+a+c)}const d=t?ya(t)?t.scale.domain().length:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const g=DT("y",t)/(DT("x",e)*s),m=i?i.scale.bandwidth():1,_=n?n.scale.bandwidth():1,p=m*(o-u-l)-e.insetLeft-e.insetRight;return(g*p+t.insetTop+t.insetBottom)/_+a+c}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!i*30+60}function DT(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:i}=t;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const a=t.scale.exponent();r=l=>Math.pow(l,a);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=Be(i);return Math.abs(r(o)-r(s))}function nQ(e,t){const{fx:n,fy:i}=O_(e,t),r=n==null?void 0:n.scale.domain(),s=i==null?void 0:i.scale.domain();return r&&s?pB(r,s).map(([o,a],l)=>({x:o,y:a,i:l})):r?r.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function iQ(e,{x:t,y:n}){return t&&(t=P_(t)),n&&(n=P_(n)),e.filter(t&&n?i=>t.has(i.x)&&n.has(i.y):t?i=>t.has(i.x):i=>n.has(i.y)).sort(t&&n?(i,r)=>t.get(i.x)-t.get(r.x)||n.get(i.y)-n.get(r.y):t?(i,r)=>t.get(i.x)-t.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Cx(e,{fx:t,fy:n}){const i=Jr(e),r=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?sl(i,o=>(o.fx=r[o[0]],o.fy=s[o[0]],o),o=>r[o],o=>s[o]):t?sl(i,o=>(o.fx=r[o[0]],o),o=>r[o]):sl(i,o=>(o.fy=s[o[0]],o),o=>s[o])}function rQ(e,t,{marginTop:n,marginLeft:i}){return e&&t?({x:r,y:s})=>`translate(${e(r)-i},${t(s)-n})`:e?({x:r})=>`translate(${e(r)-i},0)`:({y:r})=>`translate(0,${t(r)-n})`}function sQ(e){const t=[],n=new Uint32Array(nr(e,i=>i.length));for(const i of e){let r=0;for(const s of e)i!==s&&(n.set(s,r),r+=s.length);t.push(n.slice(0,r))}return t}const oQ=new Map([["top",Pp],["right",Dp],["bottom",Fp],["left",Np],["top-left",Ph(Pp,Np)],["top-right",Ph(Pp,Dp)],["bottom-left",Ph(Fp,Np)],["bottom-right",Ph(Fp,Dp)],["top-empty",cQ],["right-empty",hQ],["bottom-empty",uQ],["left-empty",fQ],["empty",dQ]]);function aQ(e){if(e==null)return null;const t=oQ.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const $T=new WeakMap;function P_(e){let t=$T.get(e);return t||$T.set(e,t=new Qo(se(e,(n,i)=>[n,i]))),t}function eo(e,t){return P_(e).get(t)}function lQ(e,t,n){return t=ko(t),n=ko(n),e.find(i=>Object.is(ko(i.x),t)&&Object.is(ko(i.y),n))}function s0(e,t,n){var i;return(i=lQ(e,t,n))==null?void 0:i.empty}function Pp(e,{y:t},{y:n}){return t?eo(t,n)===0:!0}function Fp(e,{y:t},{y:n}){return t?eo(t,n)===t.length-1:!0}function Np(e,{x:t},{x:n}){return t?eo(t,n)===0:!0}function Dp(e,{x:t},{x:n}){return t?eo(t,n)===t.length-1:!0}function cQ(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=eo(t,i);if(s>0)return s0(e,n,t[s-1])}function uQ(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=eo(t,i);if(s<t.length-1)return s0(e,n,t[s+1])}function fQ(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=eo(t,n);if(s>0)return s0(e,t[s-1],i)}function hQ(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=eo(t,n);if(s<t.length-1)return s0(e,t[s+1],i)}function dQ(e,t,{empty:n}){return n}function Ph(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function $p(e,{channels:{fx:t,fy:n},groups:i}){return t&&n?e.map(({x:r,y:s})=>{var o;return((o=i.get(r))==null?void 0:o.get(s))??[]}):t?e.map(({x:r})=>i.get(r)??[]):e.map(({y:r})=>i.get(r)??[])}class re{constructor(t,n={},i={},r){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:c,dx:u=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:g=h,marginBottom:m=h,marginLeft:_=h,clip:p=r==null?void 0:r.clip,channels:y,tip:x,render:w}=i;if(this.data=t,this.sort=Vs(c)?c:null,this.initializer=In(i).initializer,this.transform=this.initializer?i.transform:lr(i).transform,s===null||s===!1?this.facet=null:(this.facet=Yn(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===au&&typeof a=="string"?[a]:a,this.fy=t===au&&typeof l=="string"?[l]:l),this.facetAnchor=aQ(o),n=ex(n),y!==void 0&&(n={...gQ(y),...n}),r!==void 0&&(n={...PL(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([v,b])=>{if(Wi(b.value)){const{value:E,label:C=b.label,scale:I=b.scale}=b.value;b={...b,label:C,scale:I,value:E}}if(t===au&&typeof b.value=="string"){const{value:E}=b;b={...b,value:[E]}}return[v,b]}).filter(([v,{value:b,optional:E}])=>{if(b!=null)return!0;if(E)return!1;throw new Error(`missing channel value: ${v}`)})),this.dx=+u,this.dy=+f,this.marginTop=+d,this.marginRight=+g,this.marginBottom=+m,this.marginLeft=+_,this.clip=NL(p),this.tip=mQ(x),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const v in this.channels){const{scale:b}=n[v];if(!(b!=="x"&&b!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=sO(w,this.render))}initialize(t,n,i){let r=Rn(this.data);t===void 0&&r!=null&&(t=[Jr(r)]);const s=t;this.transform!=null&&({facets:t,data:r}=this.transform(r,t,i),r=Rn(r)),t!==void 0&&(t.original=s);const o=IL(this.channels,r);return this.sort!=null&&zK(r,t,o,n,this.sort),{data:r,facets:t,channels:o}}filter(t,n,i){for(const r in n){const{filter:s=dn}=n[r];if(s!==null){const o=i[r];t=t.filter(a=>s(o[a]))}}return t}project(t,n,i){for(const r in t)if(t[r].scale==="x"&&/^x|x$/.test(r)){const s=r.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&WL(r,s,n,i.projection)}}scale(t,n,i){const r=px(t,n);return i.projection&&this.project(t,r,i),r}}function ki(...e){return e.plot=re.prototype.plot,e}function sO(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,i,r,s,o,a){return e.call(this,n,i,r,s,o,(l,c,u,f,h)=>t.call(this,l,c,u,f,h,a))}}function gQ(e){return Object.fromEntries(Object.entries(ex(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Af(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function mQ(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Yn(e,"tip",["x","y","xy"]):e}function ic(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:li(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const zT=new WeakMap;function Sx(e,t,{x:n,y:i,px:r,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o=+o,r!=null&&(n??(n=null),a={...a,px:{value:r,scale:"x"}}),s!=null&&(i??(i=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:i,channels:a,...c,render:sO(function(u,f,h,d,g,m){g={...g,pointerSticky:!1};const _=g.ownerSVGElement,{data:p}=g.getMarkState(this);let y=zT.get(_);y||zT.set(_,y={sticky:!1,roots:[],renders:[]});let x=y.renders.push(Q)-1;const{x:w,y:v,fx:b,fy:E}=f;let C=b?b(u.fx)-d.marginLeft:0,I=E?E(u.fy)-d.marginTop:0;w!=null&&w.bandwidth&&(C+=w.bandwidth()/2),v!=null&&v.bandwidth&&(I+=v.bandwidth()/2);const S=u.fi!=null;let R;if(S){let $=y.facetStates;$||(y.facetStates=$=new Map),R=$.get(this),R||$.set(this,R=new Map)}const[M,k]=cr(this,d),{px:O,py:A}=h,P=O?$=>O[$]:oO(h,M),N=A?$=>A[$]:aO(h,k);let G,H,U,Z;function z($,Y){if(S)if(Z&&(Z=cancelAnimationFrame(Z)),$==null)R.delete(u.fi);else{R.set(u.fi,Y),Z=requestAnimationFrame(()=>{Z=null;for(const[D,V]of R)if(V<Y||V===Y&&D<u.fi){$=null;break}Q($)});return}Q($)}function Q($){if(G===$&&U===y.sticky)return;G=$,U=g.pointerSticky=y.sticky;const Y=G==null?[]:[G];S&&(Y.fx=u.fx,Y.fy=u.fy,Y.fi=u.fi);const D=m(Y,f,h,d,g);if(H){if(S){const V=H.parentNode,K=H.getAttribute("transform"),T=D.getAttribute("transform");K?D.setAttribute("transform",K):D.removeAttribute("transform"),T?V.setAttribute("transform",T):V.removeAttribute("transform"),D.removeAttribute("aria-label"),D.removeAttribute("aria-description"),D.removeAttribute("aria-hidden")}H.replaceWith(D)}return y.roots[x]=H=D,G==null&&(R==null?void 0:R.size)>1||g.dispatchValue(G==null?null:p[G]),D}function nt($){if(y.sticky||$.pointerType==="mouse"&&$.buttons===1)return;let[Y,D]=bU($);Y-=C,D-=I;const V=Y<d.marginLeft||Y>d.width-d.marginRight?1:e,K=D<d.marginTop||D>d.height-d.marginBottom?1:t;let T=null,L=o*o;for(const F of u){const W=V*(P(F)-Y),B=K*(N(F)-D),X=W*W+B*B;X<=L&&(T=F,L=X)}if(T!=null&&(e!==1||t!==1)){const F=P(T)-Y,W=N(T)-D;L=F*F+W*W}z(T,L)}function st($){$.pointerType==="mouse"&&G!=null&&(y.sticky&&y.roots.some(Y=>Y==null?void 0:Y.contains($.target))||(y.sticky?(y.sticky=!1,y.renders.forEach(Y=>Y(null))):(y.sticky=!0,Q(G)),$.stopImmediatePropagation()))}function ot($){$.pointerType==="mouse"&&(y.sticky||z(null))}return _.addEventListener("pointerenter",nt),_.addEventListener("pointermove",nt),_.addEventListener("pointerdown",st),_.addEventListener("pointerleave",ot),Q(null)},l)}}function Mx(e){return Sx(1,1,e)}function cl(e){return Sx(1,.01,e)}function Rx(e){return Sx(.01,1,e)}function oO({x1:e,x2:t,x:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function aO({y1:e,y2:t,y:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function lO(e){return ya(e)&&e.interval===void 0?void 0:"tabular-nums"}function pQ(e,t){let{label:n=e.label,tickSize:i=6,width:r=240,height:s=44+i,marginTop:o=18,marginRight:a=0,marginBottom:l=16+i,marginLeft:c=0,style:u,ticks:f=(r-c-a)/64,tickFormat:h,fontVariant:d=lO(e),round:g=!0,opacity:m,className:_}=t;const p=e0(t);_=wx(_),m=Te(m)[1],h===null&&(h=()=>null);const y=Ht("svg",p).attr("class",`${_}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",s).attr("viewBox",`0 0 ${r} ${s}`).call(M=>M.append("style").text(`.${_}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${_}-ramp text {
  white-space: pre;
}`)).call(xx,u);let x=M=>M.selectAll(".tick line").attr("y1",o+l-s),w;const v=g?(M,k)=>M.rangeRound(k):(M,k)=>M.range(k),{type:b,domain:E,range:C,interpolate:I,scale:S,pivot:R}=e;if(I){const M=C===void 0?I:pf(I.length===1?Ex(I):I,C);w=v(S.copy(),Ii(Ke(c,r-a),Math.min(E.length+(R!==void 0),C===void 0?1/0:C.length)));const k=256,O=p.document.createElement("canvas");O.width=k,O.height=1;const A=O.getContext("2d");for(let P=0,N=k-1;P<k;++P)A.fillStyle=M(P/N),A.fillRect(P,0,1,1);y.append("image").attr("opacity",m).attr("x",c).attr("y",o).attr("width",r-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",O.toDataURL())}else if(b==="threshold"){const M=E,k=h===void 0?O=>O:typeof h=="string"?tc(h):h;w=v(Dw().domain([-1,C.length-1]),[c,r-a]),y.append("g").attr("fill-opacity",m).selectAll().data(C).enter().append("rect").attr("x",(O,A)=>w(A-1)).attr("y",o).attr("width",(O,A)=>w(A)-w(A-1)).attr("height",s-o-l).attr("fill",O=>O),f=se(M,(O,A)=>A),h=O=>k(M[O],O)}else w=v(Fm().domain(E),[c,r-a]),y.append("g").attr("fill-opacity",m).selectAll().data(E).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",s-o-l).attr("fill",S),x=()=>{};return y.append("g").attr("transform",`translate(0,${s-l})`).call($B(w).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(i).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",xe(d,"normal")).call(x).call(M=>M.select(".domain").remove()),n!==void 0&&y.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),y.node()}const Rg=Math.PI/180;function rc(e,{marker:t,markerStart:n=t,markerMid:i=t,markerEnd:r=t}={}){e.markerStart=zp(n),e.markerMid=zp(i),e.markerEnd=zp(r)}function zp(e){if(e==null||e===!1)return null;if(e===!0)return WT;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return GT("auto");case"arrow-reverse":return GT("auto-start-reverse");case"dot":return yQ;case"circle":case"circle-fill":return WT;case"circle-stroke":return _Q}throw new Error(`invalid marker: ${e}`)}function GT(e){return(t,n)=>Ht("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function yQ(e,t){return Ht("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function WT(e,t){return Ht("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function _Q(e,t){return Ht("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let wQ=0;function $f(e,t,{stroke:n},i){return cO(e,t,n&&(r=>n[r]),i)}function xQ(e,t,{stroke:n},i){return cO(e,t,n&&(([r])=>n[r]),i)}function cO(e,{markerStart:t,markerMid:n,markerEnd:i,stroke:r},s=()=>r,o){const a=new Map;function l(c){return function(u){const f=s(u);let h=a.get(c);h||a.set(c,h=new Map);let d=h.get(f);if(!d){const g=this.parentNode.insertBefore(c(f,o),this),m=`plot-marker-${++wQ}`;g.setAttribute("id",m),h.set(f,d=`url(#${m})`)}return d}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),i&&e.attr("marker-end",l(i))}function zf({inset:e,insetLeft:t,insetRight:n,...i}={}){return[t,n]=uO(e,t,n),{inset:e,insetLeft:t,insetRight:n,...i}}function Gf({inset:e,insetTop:t,insetBottom:n,...i}={}){return[t,n]=uO(e,t,n),{inset:e,insetTop:t,insetBottom:n,...i}}function uO(e,t,n){return e===void 0&&t===void 0&&n===void 0?He?[1,0]:[.5,.5]:[t,n]}function fO(e,{interval:t}){return e={...Af(e)},e.interval=tx(e.interval===void 0?t:e.interval),e}function o0(e,t,n,i){const{[e]:r,[`${e}1`]:s,[`${e}2`]:o}=n,{value:a,interval:l}=fO(r,n);if(a==null||l==null&&!i)return n;const c=Qr(r);if(l==null){let d;const g={transform:m=>d||(d=Ot(m,a)),label:c};return{...n,[e]:void 0,[`${e}1`]:s===void 0?g:s,[`${e}2`]:o===void 0?g:o}}let u,f;function h(d){return f!==void 0&&d===u?f:f=se(Ot(u=d,a),g=>l.floor(g))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:h,label:c}:s,[`${e}2`]:o===void 0?{transform:d=>h(d).map(g=>l.offset(g)),label:c}:o})}function hO(e,t,n){const{[e]:i}=n,{value:r,interval:s}=fO(i,n);return r==null||s==null?n:t({...n,[e]:{label:Qr(i),transform:o=>{const a=se(Ot(o,r),c=>s.floor(c)),l=a.map(c=>s.offset(c));return a.map(pn(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function dO(e={}){return o0("x",zf,e,!0)}function gO(e={}){return o0("y",Gf,e,!0)}function mO(e={}){return o0("x",zf,e)}function pO(e={}){return o0("y",Gf,e)}function yO(e={}){return hO("x",zf,e)}function _O(e={}){return hO("y",Gf,e)}const wO={ariaLabel:"rule",fill:null,stroke:"currentColor"};class xO extends re{constructor(t,n={}){const{x:i,y1:r,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(t,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},ic(n,"x"),wO),this.insetTop=Ft(a),this.insetBottom=Ft(l),rc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y1:c,y2:u}=i,{width:f,height:h,marginTop:d,marginRight:g,marginLeft:m,marginBottom:_}=r,{insetTop:p,insetBottom:y}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o},He,0).call(x=>x.selectAll().data(t).enter().append("line").call(le,this).attr("x1",l?w=>l[w]:(m+f-g)/2).attr("x2",l?w=>l[w]:(m+f-g)/2).attr("y1",c&&!ri(a)?w=>c[w]+p:d+p).attr("y2",u&&!ri(a)?a.bandwidth?w=>u[w]+a.bandwidth()-y:w=>u[w]-y:h-_-y).call(Ne,this,i).call($f,this,i,s)).node()}}class bO extends re{constructor(t,n={}){const{x1:i,x2:r,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},ic(n,"y"),wO),this.insetRight=Ft(a),this.insetLeft=Ft(l),rc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{y:l,x1:c,x2:u}=i,{width:f,height:h,marginTop:d,marginRight:g,marginLeft:m,marginBottom:_}=r,{insetLeft:p,insetRight:y}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{y:l&&a},0,He).call(x=>x.selectAll().data(t).enter().append("line").call(le,this).attr("x1",c&&!ri(o)?w=>c[w]+p:m+p).attr("x2",u&&!ri(o)?o.bandwidth?w=>u[w]+o.bandwidth()-y:w=>u[w]-y:f-g-y).attr("y1",l?w=>l[w]:(d+h-_)/2).attr("y2",l?w=>l[w]:(d+h-_)/2).call(Ne,this,i).call($f,this,i,s)).node()}}function Hr(e,t){let{x:n=_t,y:i,y1:r,y2:s,...o}=pO(t);return[r,s]=vO(i,r,s),new xO(e,{...o,x:n,y1:r,y2:s})}function Xs(e,t){let{y:n=_t,x:i,x1:r,x2:s,...o}=mO(t);return[r,s]=vO(i,r,s),new bO(e,{...o,y:n,x1:r,x2:s})}function vO(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function a0(e,...t){let n=t.length;for(let i=0,r=!0;i<n;++i)typeof t[i]!="function"&&(r&&(e=e.slice(),r=!1),e.splice(i,2,e[i]+t[i]+e[i+1]),t.splice(i,1),--i,--n);return i=>{let r=e[0];for(let s=0;s<n;++s)r+=t[s](i)+e[s+1];return r}}const bQ={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},EO="­";class l0 extends re{constructor(t,n={}){const{x:i,y:r,text:s=ts(t)&&bL(t)?_t:An,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:m,fontVariant:_,fontWeight:p,rotate:y}=n,[x,w]=Te(y,0),[v,b]=CQ(g);if(super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:v,optional:!0},rotate:{value:dK(x),optional:!0},text:{value:s,filter:Hw,optional:!0}},n,bQ),this.rotate=w,this.textAnchor=xe(a,"middle"),this.lineAnchor=Yn(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=TO(f),this.monospace=!!h,this.fontFamily=tn(d),this.fontSize=b,this.fontStyle=tn(m),this.fontVariant=tn(_),this.fontWeight=tn(p),this.frameAnchor=Of(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=RO(this),this.clipLine=IO(this)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,rotate:u,text:f,title:h,fontSize:d}=i,{rotate:g}=this,[m,_]=cr(this,r);return Ht("svg:g",s).call(he,this,r,s).call(MO,this,f,r).call(ie,this,{x:l&&o,y:c&&a}).call(p=>p.selectAll().data(t).enter().append("text").call(le,this).call(vQ,this,f,h).attr("transform",a0`translate(${l?y=>l[y]:m},${c?y=>c[y]:_})${u?y=>` rotate(${u[y]})`:g?` rotate(${g})`:""}`).call(gt,"font-size",d&&(y=>d[y])).call(Ne,this,i)).node()}}function TO(e){return e==null?null:Yn(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function vQ(e,t,n,i){if(!n)return;const{lineAnchor:r,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(c){const u=a(aa(n[c])??"").map(l),f=u.length,h=r==="top"?.71:r==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let g=0;g<f;++g){if(++d,!u[g])continue;const m=this.ownerDocument.createElementNS(ta.svg,"tspan");m.setAttribute("x",0),g===d-1?m.setAttribute("y",`${(h+g)*s}em`):m.setAttribute("dy",`${d*s}em`),m.textContent=u[g],this.appendChild(m),d=0}}else h&&this.setAttribute("y",`${h*s}em`),this.textContent=u[0];if(o&&!i&&u[0]!==n[c]){const d=this.ownerDocument.createElementNS(ta.svg,"title");d.textContent=n[c],this.appendChild(d)}})}function Dl(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Ni(t,n)),new l0(e,{...i,x:t,y:n})}function CO(e,{x:t=_t,...n}={}){return new l0(e,_O({...n,x:t}))}function SO(e,{y:t=_t,...n}={}){return new l0(e,yO({...n,y:t}))}function MO(e,t,n){gt(e,"text-anchor",t.textAnchor),gt(e,"font-family",t.fontFamily),gt(e,"font-size",t.fontSize),gt(e,"font-style",t.fontStyle),gt(e,"font-variant",t.fontVariant===void 0?EQ(n):t.fontVariant),gt(e,"font-weight",t.fontWeight)}function EQ(e){return e&&(ja(e)||pn(e))?"tabular-nums":void 0}const TQ=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function CQ(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),TQ.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function SQ(e,t,n){const i=[];let r,s=0;for(const[o,a,l]of MQ(e)){if(r===void 0&&(r=o),s>r&&n(e,r,a)>t&&(i.push(e.slice(r,s)+(e[s-1]===EO?"-":"")),r=o),l){i.push(e.slice(r,a)),r=void 0;continue}s=a}return i}function*MQ(e){let t=0,n=0;const i=e.length;for(;n<i;){let r=1;switch(e[n]){case EO:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++r;case`
`:yield[t,n,!0],n+=r,t=n;break;default:++n;break}}yield[t,n,!0]}const BT={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Ix(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=sc(e,r))i+=BT[e[r]]??(LO(e,r)?120:BT.e);return i}function Ax(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=sc(e,r))i+=LO(e,r)?200:100;return i}function RO({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const i=e?Ax:Ix,r=t*100;return s=>SQ(s,r,i)}function IO({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const i=e?Ax:Ix,r=t*100;switch(n){case"clip-start":return s=>UT(s,r,i,"");case"clip-end":return s=>YT(s,r,i,"");case"ellipsis-start":return s=>UT(s,r,i,ul);case"ellipsis-middle":return s=>RQ(s,r,i,ul);case"ellipsis-end":return s=>YT(s,r,i,ul)}}const ul="…";function $l(e,t,n,i){const r=[];let s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=sc(e,o);const c=n(e,o,a);if(s+c>t){for(s+=i;s>t&&o>0;)a=o,o=r.pop(),s-=n(e,o,a);return[o,t-s]}s+=c,r.push(o)}return[-1,0]}function YT(e,t,n,i){e=e.trim();const r=n(i),[s]=$l(e,t,n,r);return s<0?e:e.slice(0,s).trimEnd()+i}function RQ(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i)/2,[o,a]=$l(e,t/2,n,s),[l]=$l(e,r-t/2-a+s,n,-s);return l<0?i:e.slice(0,o).trimEnd()+i+e.slice(sc(e,l)).trimStart()}function UT(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i),[o]=$l(e,r-t+s,n,-s);return o<0?i:i+e.slice(sc(e,o)).trimStart()}const F_=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,VT=/\p{Extended_Pictographic}/uy;function sc(e,t){return t+=IQ(e,t)?2:1,LQ(e,t)&&(t=F_.lastIndex),AQ(e,t)?sc(e,t+1):t}function AO(e,t){return e.charCodeAt(t)<128}function IQ(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const i=e.charCodeAt(t+1);return i>=56320&&i<57344}return!1}function AQ(e,t){return e.charCodeAt(t)===8205}function LQ(e,t){return AO(e,t)?!1:(F_.lastIndex=t,F_.test(e))}function LO(e,t){return AO(e,t)?!1:(VT.lastIndex=t,VT.test(e))}const OO={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},kO=3.5,OQ=kO*5,PO={draw(e,t,n){const i=t*n/OQ;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-i,i-t),e.lineTo(0,-t),e.lineTo(i,i-t)}},FO={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},kQ=new Map([["arrow",PO],["spike",FO]]);function PQ(e){return e&&typeof e.draw=="function"}function FQ(e){if(PQ(e))return e;const t=kQ.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class c0 extends re{constructor(t,n={}){const{x:i,y:r,r:s=kO,length:o,rotate:a,shape:l=PO,anchor:c="middle",frameAnchor:u}=n,[f,h]=Te(o,12),[d,g]=Te(a,0);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,OO),this.r=+s,this.length=h,this.rotate=g,this.shape=FQ(l),this.anchor=Yn(c,"anchor",["start","middle","end"]),this.frameAnchor=Of(u)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,length:u,rotate:f}=i,{length:h,rotate:d,anchor:g,shape:m,r:_}=this,[p,y]=cr(this,r);return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(x=>x.selectAll().data(t).enter().append("path").call(le,this).attr("transform",a0`translate(${l?w=>l[w]:p},${c?w=>c[w]:y})${f?w=>` rotate(${f[w]})`:d?` rotate(${d})`:""}${g==="start"?"":g==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${h})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${h/2})`}`).attr("d",u?w=>{const v=Lr();return m.draw(v,u[w],_),v}:(()=>{const w=Lr();return m.draw(w,h,_),w})()).call(Ne,this,i)).node()}}function NO(e,t={}){let{x:n,y:i,...r}=t;return t.frameAnchor===void 0&&([n,i]=Ni(n,i)),new c0(e,{...r,x:n,y:i})}function DO(e,t={}){const{x:n=_t,...i}=t;return new c0(e,{...i,x:n})}function $O(e,t={}){const{y:n=_t,...i}=t;return new c0(e,{...i,y:n})}function NQ(e,t={}){const{shape:n=FO,stroke:i=OO.stroke,strokeWidth:r=1,fill:s=i,fillOpacity:o=.3,anchor:a="start",...l}=t;return NO(e,{...l,shape:n,stroke:i,strokeWidth:r,fill:s,fillOpacity:o,anchor:a})}function no(e,t){return arguments.length<2&&!ts(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function u0({anchor:e}={},t){return e===void 0?t[0]:Yn(e,"anchor",t)}function zO(e){return u0(e,["left","right"])}function GO(e){return u0(e,["right","left"])}function WO(e){return u0(e,["bottom","top"])}function BO(e){return u0(e,["top","bottom"])}function Lx(){const[e,t]=no(...arguments);return VO("y",zO(t),e,t)}function YO(){const[e,t]=no(...arguments);return VO("fy",GO(t),e,t)}function Ox(){const[e,t]=no(...arguments);return XO("x",WO(t),e,t)}function UO(){const[e,t]=no(...arguments);return XO("fx",BO(t),e,t)}function VO(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:g=e==="y"?6:0,tickPadding:m,tickRotate:_,x:p,margin:y,marginTop:x=y===void 0?20:y,marginRight:w=y===void 0?t==="right"?40:0:y,marginBottom:v=y===void 0?20:y,marginLeft:b=y===void 0?t==="left"?40:0:y,label:E,labelAnchor:C,labelArrow:I,labelOffset:S,...R}){return g=Ft(g),m=Ft(m),_=Ft(_),C!==void 0&&(C=Yn(C,"labelAnchor",["center","top","bottom"])),I=r5(I),ki(g&&!ve(s)?DQ(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:_,x:p,...R}):null,ve(l)?null:zQ(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:_,x:p,marginTop:x,marginRight:w,marginBottom:v,marginLeft:b,...R}),!ve(l)&&E!==null?Dl([],t5({fill:l,fillOpacity:c,...R},function(M,k,O,A,P){const N=A[e],{marginTop:G,marginRight:H,marginBottom:U,marginLeft:Z}=e==="y"&&P.inset||P,z=C??(N.bandwidth?"center":"top"),Q=S??(t==="right"?H:Z)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-G:z==="bottom"?U-3:0,this.dx=t==="right"?Q:-Q,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[i5(e,N,{anchor:t,label:E,labelAnchor:z,labelArrow:I})]}}}})):null)}function XO(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:g=e==="x"?6:0,tickPadding:m,tickRotate:_,y:p,margin:y,marginTop:x=y===void 0?t==="top"?30:0:y,marginRight:w=y===void 0?20:y,marginBottom:v=y===void 0?t==="bottom"?30:0:y,marginLeft:b=y===void 0?20:y,label:E,labelAnchor:C,labelArrow:I,labelOffset:S,...R}){return g=Ft(g),m=Ft(m),_=Ft(_),C!==void 0&&(C=Yn(C,"labelAnchor",["center","left","right"])),I=r5(I),ki(g&&!ve(s)?$Q(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:_,y:p,...R}):null,ve(l)?null:GQ(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:_,y:p,marginTop:x,marginRight:w,marginBottom:v,marginLeft:b,...R}),!ve(l)&&E!==null?Dl([],t5({fill:l,fillOpacity:c,...R},function(M,k,O,A,P){const N=A[e],{marginTop:G,marginRight:H,marginBottom:U,marginLeft:Z}=e==="x"&&P.inset||P,z=C??(N.bandwidth?"center":"right"),Q=S??(t==="top"?G:U)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-Q:Q,this.dx=z==="right"?H-3:z==="left"?3-Z:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[i5(e,N,{anchor:t,label:E,labelAnchor:z,labelArrow:I})]}}}})):null)}function DQ(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:h=0,y:d=e==="y"?void 0:null,...g}){return oc($O,e,t,`${e}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:d,...g,dx:t==="left"?+h-He+ +u:+h+He-f,anchor:"start",length:l,shape:t==="left"?UQ:VQ})}function $Q(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:h=0,x:d=e==="x"?void 0:null,...g}){return oc(DO,e,t,`${e}-axis tick`,n,{strokeWidth:i,strokeLinejoin:s,strokeLinecap:r,facetAnchor:o,frameAnchor:a,x:d,...g,dy:t==="bottom"?+h-He-f:+h+He+ +u,anchor:"start",length:l,shape:t==="bottom"?BQ:YQ})}function zQ(e,t,n,{facetAnchor:i=t+(e==="y"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*Rg):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:g=h,dx:m=0,y:_=e==="y"?void 0:null,...p}){return oc(SO,e,t,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,y:_,...p,dx:t==="left"?+m-s-a+ +d:+m+ +s+ +a-g},function(y,x,w,v,b){f===void 0&&(this.fontVariant=n5(y)),l===void 0&&(b.text=e5(y,x,w,v,t))})}function GQ(e,t,n,{facetAnchor:i=t+(e==="x"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*Rg):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:g=h,dy:m=0,x:_=e==="x"?void 0:null,...p}){return oc(CO,e,t,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,x:_,...p,dy:t==="bottom"?+m+ +s+ +a-g:+m-s-a+ +d},function(y,x,w,v,b){f===void 0&&(this.fontVariant=n5(y)),l===void 0&&(b.text=e5(y,x,w,v,t))})}function HO(){const[e,t]=no(...arguments);return KO("y",zO(t),e,t)}function jO(){const[e,t]=no(...arguments);return KO("fy",GO(t),e,t)}function ZO(){const[e,t]=no(...arguments);return JO("x",WO(t),e,t)}function qO(){const[e,t]=no(...arguments);return JO("fx",BO(t),e,t)}function KO(e,t,n,{y:i=e==="y"?void 0:null,x:r=null,x1:s=t==="left"?r:null,x2:o=t==="right"?r:null,...a}){return oc(Xs,e,t,`${e}-grid`,n,{y:i,x1:s,x2:o,...QO(a)})}function JO(e,t,n,{x:i=e==="x"?void 0:null,y:r=null,y1:s=t==="top"?r:null,y2:o=t==="bottom"?r:null,...a}){return oc(Hr,e,t,`${e}-grid`,n,{x:i,y1:s,y2:o,...QO(a)})}function QO({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:i=t,strokeWidth:r=1,...s}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...s}}function t5({fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},f){return[,e]=Mn(e),[,t]=Te(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:f}}function oc(e,t,n,i,r,s,o){let a;function l(f,h,d,g,m,_){const p=f==null&&(t==="fx"||t==="fy"),{[t]:y}=g;if(!y)throw new Error(`missing scale: ${t}`);const x=y.domain();let{interval:w,ticks:v,tickFormat:b,tickSpacing:E=t==="x"?80:35}=s;if(typeof v=="string"&&s5(y)&&(w=v,v=void 0),v===void 0&&(v=nc(w,y.type)??WQ(y,E)),f==null){if(ts(v))f=Rn(v);else if(Ha(v))f=Gp(v,...Be(x));else if(y.interval){let I=y.interval;if(y.ticks){const[S,R]=Be(x),M=(R-S)/I[Rf];I=_T(I,M/v)??I,f=Gp(I,S,R)}else{f=x;const S=f.length;I=_T(I,S/v)??I,I!==y.interval&&(f=Gp(I,...Be(f)))}if(I===y.interval){const S=Math.round(f.length/v);S>1&&(f=f.filter((R,M)=>M%S===0))}}else y.ticks?f=y.ticks(v):f=x;if(!y.ticks&&f.length&&f!==x){const I=new hf(x);f=f.filter(S=>I.has(S)),f.length||Gr(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[Jr(f)]:a[t]={scale:t,value:_t}}o==null||o.call(this,y,f,v,b,a);const C=Object.fromEntries(Object.entries(a).map(([I,S])=>[I,{...S,value:Ot(f,S.value)}]));return p&&(h=_.filterFacets(f,C)),{data:f,facets:h,channels:C}}const c=In(s).initializer,u=e(r,In({...s,initializer:l},c));return r==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function WQ(e,t){const[n,i]=Be(e.range());return(i-n)/t}function e5(e,t,n,i,r){return{value:kx(e,t,n,i,r)}}function kx(e,t,n,i,r){return typeof i=="function"?i:i===void 0&&t&&pn(t)?rK(t,r)??aa:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,i):i===void 0?aa:typeof i=="string"?(pn(e.domain())?Sf:tc)(i):Bn(i)}function Gp(e,t,n){return e.range(t,e.offset(e.floor(n)))}const BQ={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},YQ={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},UQ={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},VQ={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function n5(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function XQ(e){return Math.sign(Nl(e.domain()))*Math.sign(Nl(e.range()))}function i5(e,t,{anchor:n,label:i=t.label,labelAnchor:r,labelArrow:s}={}){if(!(i==null||i.inferred&&s5(t)&&/^(date|time|year)$/i.test(i))){if(i=String(i),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(i)),!s)return i;if(s===!0){const o=XQ(t);o&&(s=/x$/.test(e)||r==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function r5(e="auto"){return ve(e)?!1:typeof e=="boolean"?e:Yn(e,"labelArrow",["auto","up","right","down","left"])}function s5(e){return pn(e.domain())}function XT(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function HQ(e,{opacity:t,...n}={}){if(!ya(e)&&!iO(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return o5(e,n,(i,r,s,o)=>i.append("svg").attr("width",s).attr("height",o).attr("fill",r.scale).attr("fill-opacity",Te(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function jQ(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:ve(t)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[f,h]=Mn(t),[d,g]=Mn(i),m=XT(l,f),_=XT(l,d),p=o*o*Math.PI;return n=Te(n)[1],r=Te(r)[1],s=Te(s)[1],o5(e,a,(y,x,w,v)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",v).attr("fill",f==="color"?b=>m.scale(b):h).attr("fill-opacity",n).attr("stroke",d==="color"?b=>_.scale(b):g).attr("stroke-opacity",r).attr("stroke-width",s).append("path").attr("d",b=>{const E=Lr();return e.scale(b).draw(E,p),E}))}function o5(e,t={},n){let{columns:i,tickFormat:r,fontVariant:s=lO(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:f,width:h}=t;const d=e0(t);u=wx(u),r=kx(e.scale,e.domain,void 0,r);const g=Ht("div",d).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,g.style("columns",i).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,l).call(_=>_.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,g.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,l).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),g.call(_=>_.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",c?`${+c}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",xe(s,"normal")).call(xx,f).node()}const Ig=new Map([["symbol",jQ],["color",a5],["opacity",KQ]]);function ZQ(e={}){for(const[t,n]of Ig){const i=e[t];if(Ho(i)){const r=e0(e);let s;if(t==="symbol"){const{fill:o,stroke:a=o===void 0&&Ho(e.color)?"color":void 0}=e;s={fill:o,stroke:a}}return n(k_(t,i,s),Px(r,i,e),o=>Ho(e[o])?k_(o,e[o]):null)}}throw new Error("unknown legend type; no scale found")}function qQ(e,t,n={}){return(i,r)=>{if(!Ig.has(i))throw new Error(`unknown legend type: ${i}`);if(i in e)return Ig.get(i)(e[i],Px(t,n[i],r),s=>e[s])}}function Px({className:e,...t},{label:n,ticks:i,tickFormat:r}={},s){return xK(s,{className:e,...t},{label:n,ticks:i,tickFormat:r})}function a5(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return HQ(e,n);case"ramp":return pQ(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function KQ({type:e,interpolate:t,...n},{legend:i=!0,color:r=ir(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return a5({type:e,...n,interpolate:JQ(r)},{legend:i,...s})}function JQ(e){const{r:t,g:n,b:i}=ir(e)||ir(0,0,0);return r=>`rgba(${t},${n},${i},${r})`}function QQ(e,t,n){const i=[];for(const[r,s]of Ig){const o=n[r];if(o!=null&&o.legend&&r in e){const a=s(e[r],Px(t,e[r],o),l=>e[l]);a!=null&&i.push(a)}}return i}const ttt={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},ett={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class l5 extends re{constructor(t={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:s=i,insetBottom:o=i,insetLeft:a=i,rx:l,ry:c}=t;super(au,void 0,t,n==null?ttt:ett),this.anchor=mL(n,"anchor",["top","right","bottom","left"]),this.insetTop=Ft(r),this.insetRight=Ft(s),this.insetBottom=Ft(o),this.insetLeft=Ft(a),this.rx=Ft(l),this.ry=Ft(c)}render(t,n,i,r,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:f}=r,{anchor:h,insetTop:d,insetRight:g,insetBottom:m,insetLeft:_,rx:p,ry:y}=this,x=c+_,w=u-a-g,v=o+d,b=f-l-m;return Ht(h?"svg:line":"svg:rect",s).datum(0).call(he,this,r,s).call(le,this).call(Ne,this,i).call(ie,this,{}).call(h==="left"?E=>E.attr("x1",x).attr("x2",x).attr("y1",v).attr("y2",b):h==="right"?E=>E.attr("x1",w).attr("x2",w).attr("y1",v).attr("y2",b):h==="top"?E=>E.attr("x1",x).attr("x2",w).attr("y1",v).attr("y2",v):h==="bottom"?E=>E.attr("x1",x).attr("x2",w).attr("y1",b).attr("y2",b):E=>E.attr("x",x).attr("y",v).attr("width",w-x).attr("height",b-v).attr("rx",p).attr("ry",y)).node()}}function Fx(e){return new l5(e)}const Wp={ariaLabel:"tip",fill:"white",stroke:"currentColor"},ntt=new Set(["geometry","href","src","ariaLabel","scales"]);class c5 extends re{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ts(t)&&bL(t)&&(n={...n,title:_t});const{x:i,y:r,x1:s,x2:o,y1:a,y2:l,anchor:c,monospace:u,fontFamily:f=u?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:d,fontVariant:g,fontWeight:m,lineHeight:_=1,lineWidth:p=20,frameAnchor:y,format:x,textAnchor:w="start",textOverflow:v,textPadding:b=8,title:E,pointerSize:C=12,pathFilter:I="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:i,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:r,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:E,optional:!0}},n,Wp),this.anchor=vL(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=Of(y),this.textAnchor=xe(w,"middle"),this.textPadding=+b,this.pointerSize=+C,this.pathFilter=tn(I),this.lineHeight=+_,this.lineWidth=+p,this.textOverflow=TO(v),this.monospace=!!u,this.fontFamily=tn(f),this.fontSize=Ft(h),this.fontStyle=tn(d),this.fontVariant=tn(g),this.fontWeight=tn(m);for(const S in Wp)S in this.channels&&(this[S]=Wp[S]);this.splitLines=RO(this),this.clipLine=IO(this),this.format={...x}}render(t,n,i,r,s){const o=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:f,document:h}=s,{anchor:d,monospace:g,lineHeight:m,lineWidth:_}=this,{textPadding:p,pointerSize:y,pathFilter:x}=this,{marginTop:w,marginLeft:v}=r,{x1:b,y1:E,x2:C,y2:I,x:S=b??C,y:R=E??I}=i,M=c?c(t.fx)-v:0,k=u?u(t.fy)-w:0,[O,A]=cr(this,r),P=oO(i,O),N=aO(i,A),G=g?Ax:Ix,H=G(ul);let U,Z;"title"in i?(U=i.channels,Z=att):(U=ott.call(this,i,n),Z=ltt);const z=Ht("svg:g",s).call(he,this,r,s).call(MO,this).call(ie,this,{x:S&&a,y:R&&l}).call(st=>st.selectAll().data(t).enter().append("g").attr("transform",ot=>`translate(${Math.round(P(ot))},${Math.round(N(ot))})`).call(le,this).call(ot=>ot.append("path").attr("filter",x)).call(ot=>ot.append("text").each(function($){const Y=Fs(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const D=Z.call(o,$,t,U,n,i);if(typeof D=="string")for(const V of o.splitLines(D))Q(Y,{value:o.clipLine(V)});else{const V=new Set;for(const K of D){const{label:T=""}=K;T&&V.has(T)||(V.add(T),Q(Y,K))}}})));function Q(st,{label:ot,value:$,color:Y,opacity:D}){ot??(ot=""),$??($="");const V=Y!=null||D!=null;let K,T=_*100;const[L]=$l(ot,T,G,H);if(L>=0)ot=ot.slice(0,L).trimEnd()+ul,K=$.trim(),$="";else{(ot||!$&&!V)&&($=" "+$);const[W]=$l($,T-G(ot),G,H);W>=0&&($=$.slice(0,W).trimEnd()+ul,K=$.trim())}const F=st.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");ot&&F.append("tspan").attr("font-weight","bold").text(ot),$&&F.append(()=>h.createTextNode($)),V&&F.append("tspan").text(" ■").attr("fill",Y).attr("fill-opacity",D).style("user-select","none"),K&&F.append("title").text(K)}function nt(){const{width:st,height:ot}=r.facet??r;z.selectChildren().each(function($){let{x:Y,width:D,height:V}=this.getBBox();D=Math.round(D),V=Math.round(V);let K=d;if(K===void 0){K=o.previousAnchor;const F=P($)+M,W=N($)+k,B=F+D+p*2<st,X=F-D-p*2>0,rt=W+V+y+p*2+7<ot,J=W-V-y-p*2>0,tt=(/-left$/.test(K)?B||!X:B&&!X)?"left":"right",q=(/^top-/.test(K)?rt||!J:rt&&!J)?"top":"bottom";K=o.previousAnchor=`${q}-${tt}`}const T=this.firstChild,L=this.lastChild;if(T.setAttribute("d",stt(K,y,p,D,V)),Y)for(const F of L.childNodes)F.setAttribute("x",-Y);L.setAttribute("y",`${+itt(K,L.childNodes.length,m).toFixed(6)}em`),L.setAttribute("transform",`translate(${rtt(K,y,p,D,V)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(nt):typeof requestAnimationFrame<"u"&&requestAnimationFrame(nt)),z.node()}}function Nx(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Ni(t,n)),new c5(e,{...i,x:t,y:n})}function itt(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function rtt(e,t,n,i,r){switch(e){case"middle":return[-i/2,r/2];case"top-left":return[n,t+n];case"top":return[-i/2,t/2+n];case"top-right":return[-i-n,t+n];case"right":return[-t/2-i-n,r/2];case"bottom-left":return[n,-t-n];case"bottom":return[-i/2,-t/2-n];case"bottom-right":return[-i-n,-t-n];case"left":return[n+t/2,r/2]}}function stt(e,t,n,i,r){const s=i+n*2,o=r+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function ott({channels:e},t){var r,s;const n={};let i=this.format;i=HT(i,e,"x"),i=HT(i,e,"y"),this.format=i;for(const o in i){const a=i[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=I_(e,o);l&&(n[o]=l)}}for(const o in e){if(o in n||o in i||ntt.has(o))continue;const a=I_(e,o);a&&(n[o]=a)}this.facet&&(t.fx&&!("fx"in i)&&(n.fx=!0),t.fy&&!("fy"in i)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const l=((r=n[o])==null?void 0:r.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(pn(l)?Sf:tc)(a)}else if(a===void 0||a===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?kx(l,l.domain()):aa}}return n}function HT(e,t,n){if(!(n in e))return e;const i=`${n}1`,r=`${n}2`;if((i in e||!(i in t))&&(r in e||!(r in t)))return e;const s=Object.entries(e),o=e[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[i,o],[r,o]),Object.fromEntries(s)}function att(e,t,{title:n}){return aa(n.value[e],e)}function*ltt(e,t,n,i,r){for(const s in n){if(s==="fx"||s==="fy"){yield{label:Ag(i,n,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:ZT(i,n,"x"),value:jT(this.format.x2,n.x1,o,e)};else if(s==="y2"&&"y1"in n)yield{label:ZT(i,n,"y"),value:jT(this.format.y2,n.y1,o,e)};else{const a=o.value[e],l=o.scale;if(!dn(a)&&l==null)continue;yield{label:Ag(i,n,s),value:this.format[s](a,e),color:l==="color"?r[s][e]:null,opacity:l==="opacity"?r[s][e]:null}}}}function jT(e,t,n,i){var r;return(r=n.hint)!=null&&r.length?`${e(n.value[i]-t.value[i],i)}`:`${e(t.value[i],i)}–${e(n.value[i],i)}`}function ZT(e,t,n){const i=Ag(e,t,`${n}1`,n),r=Ag(e,t,`${n}2`,n);return i===r?i:`${i}–${r}`}function Ag(e,t,n,i=n){const r=t[n],s=e[(r==null?void 0:r.scale)??n];return String((s==null?void 0:s.label)??(r==null?void 0:r.label)??i)}function u5(e={}){var H;const{facet:t,style:n,title:i,subtitle:r,caption:s,ariaLabel:o,ariaDescription:a}=e,l=wx(e.className),c=e.marks===void 0?[]:KT(e.marks);c.push(...ptt(c));const u=gtt(t,e),f=new Map;for(const U of c){const Z=JT(U,u,e);Z&&f.set(U,Z)}const h=new Map;u&&Ic(h,[u],e),Ic(h,f,e);const d=KT(ytt(c,h,e));for(const U of d){const Z=JT(U,u,e);Z&&f.set(U,Z)}c.unshift(...d);let g=nQ(h,e);if(g!==void 0){const U=u?$p(g,u):void 0;for(const z of c){if(z.facet===null||z.facet==="super")continue;const Q=f.get(z);Q!==void 0&&(Q.facetsIndex=z.fx!=null||z.fy!=null?$p(g,Q):U)}const Z=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((Q,nt)=>{(Q==null?void 0:Q.length)>0&&Z.add(nt)});g.forEach(0<Z.size&&Z.size<g.length?(z,Q)=>z.empty=!Z.has(Q):z=>z.empty=!1);for(const z of c)if(z.facet==="exclude"){const Q=f.get(z);Q!==void 0&&(Q.facetsIndex=sQ(Q.facetsIndex))}}for(const U of ge.keys())Ho(e[U])&&U!=="fx"&&U!=="fy"&&h.set(U,[]);const m=new Map;for(const U of c){if(m.has(U))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:Z,channels:z}=f.get(U)??{},{data:Q,facets:nt,channels:st}=U.initialize(Z,z,e);Dx(st,e),m.set(U,{data:Q,facets:nt,channels:st})}const _=O_(Ic(h,m,e),e),p=tQ(_,c,e);XJ(_,p);const y=kT(_),{fx:x,fy:w}=y,v=x||w?QL(_,p):p,b=x||w?Ttt(y,p):p,E=e0(e),C=E.document,I=Mm("svg").call(C.documentElement);let S=I;E.ownerSVGElement=I,E.className=l,E.projection=oJ(e,v),E.filterFacets=(U,Z)=>$p(g,{channels:Z,groups:Cx(U,Z)}),E.getMarkState=U=>{const Z=m.get(U),z=f.get(U);return{...Z,channels:{...Z.channels,...z==null?void 0:z.channels}}},E.dispatchValue=U=>{S.value!==U&&(S.value=U,S.dispatchEvent(new Event("input",{bubbles:!0})))};const R=new Set;for(const[U,Z]of m)if(U.initializer!=null){const z=U.facet==="super"?b:v,Q=U.initializer(Z.data,Z.facets,Z.channels,y,z,E);if(Q.data!==void 0&&(Z.data=Q.data),Q.facets!==void 0&&(Z.facets=Q.facets),Q.channels!==void 0){const{fx:nt,fy:st,...ot}=Q.channels;dtt(ot),Object.assign(Z.channels,ot);for(const $ of Object.values(ot)){const{scale:Y}=$;Y!=null&&!vK(ge.get(Y))&&(f5($,e),R.add(Y))}(nt!=null||st!=null)&&f.set(U,!0)}}if(R.size){const U=new Map;Ic(U,m,e,nt=>R.has(nt)),Ic(h,m,e,nt=>R.has(nt));const Z=Ett(O_(U,e),_),{scales:z,...Q}=kT(Z);Object.assign(_,Z),Object.assign(y,Q),Object.assign(y.scales,z)}let M,k;g!==void 0&&(M={x:x==null?void 0:x.domain(),y:w==null?void 0:w.domain()},g=iQ(g,M),k=rQ(x,w,p));for(const[U,Z]of m)Z.values=U.scale(Z.channels,y,E);const{width:O,height:A}=p;Fs(I).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",O).attr("height",A).attr("viewBox",`0 0 ${O} ${A}`).attr("aria-label",o).attr("aria-description",a).call(U=>U.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(xx,n);for(const U of c){const{channels:Z,values:z,facets:Q}=m.get(U);if(g===void 0||U.facet==="super"){let nt=null;if(Q&&(nt=Q[0],nt=U.filter(nt,Z,z),nt.length===0))continue;const st=U.render(nt,y,z,b,E);if(st==null)continue;I.appendChild(st)}else{let nt;for(const st of g){if(!(((H=U.facetAnchor)==null?void 0:H.call(U,g,M,st))??!st.empty))continue;let ot=null;if(Q){const Y=f.has(U);if(ot=Q[Y?st.i:0],ot=U.filter(ot,Z,z),ot.length===0)continue;!Y&&ot===Q[0]&&(ot=jo(ot)),ot.fx=st.x,ot.fy=st.y,ot.fi=st.i}const $=U.render(ot,y,z,v,E);if($!=null){(nt??(nt=Fs(I).append("g"))).append(()=>$).datum(st);for(const Y of["aria-label","aria-description","aria-hidden","transform"])$.hasAttribute(Y)&&(nt.attr(Y,$.getAttribute(Y)),$.removeAttribute(Y))}}nt==null||nt.selectChildren().attr("transform",k)}}const P=QQ(_,E,e),{figure:N=i!=null||r!=null||s!=null||P.length>0}=e;N&&(S=C.createElement("figure"),S.className=`${l}-figure`,S.style.maxWidth="initial",i!=null&&S.append(qT(C,i,"h2")),r!=null&&S.append(qT(C,r,"h3")),S.append(...P,I),s!=null&&S.append(ctt(C,s))),S.scale=QJ(y.scales),S.legend=qQ(_,E,e);const G=qK();return G>0&&Fs(I).append("text").attr("x",O).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${G.toLocaleString("en-US")} warning${G===1?"":"s"}. Please check the console.`),S}function qT(e,t,n){if(t.ownerDocument)return t;const i=e.createElement(n);return i.append(t),i}function ctt(e,t){const n=e.createElement("figcaption");return n.append(t),n}function utt({marks:e=[],...t}={}){return u5({...t,marks:[...e,this]})}re.prototype.plot=utt;function KT(e){return e.flat(1/0).filter(t=>t!=null).map(ftt)}function ftt(e){return typeof e.render=="function"?e:new htt(e)}class htt extends re{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Dx(e,t){for(const n in e)f5(e[n],t);return e}function f5(e,t){const{scale:n,transform:i=!0}=e;if(n==null||!i)return;const{type:r,percent:s,interval:o,transform:a=s?l=>l*100:xL(o,r)}=t[n]??{};a!=null&&(e.value=se(e.value,a),e.transform=!1)}function dtt(e){for(const t in e)AL(t,e[t])}function Ic(e,t,n,i=lK){var r,s;for(const{channels:o}of t.values())for(const a in o){const l=o[a],{scale:c}=l;if(c!=null&&i(c))if(c==="projection"){if(!cJ(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,f=((s=n.y)==null?void 0:s.domain)===void 0;if(u||f){const[h,d]=fJ(l);u&&Bp(e,"x",h),f&&Bp(e,"y",d)}}}else Bp(e,c,l)}return e}function Bp(e,t,n){const i=e.get(t);i!==void 0?i.push(n):e.set(t,[n])}function gtt(e,t){if(e==null)return;const{x:n,y:i}=e;if(n==null&&i==null)return;const r=Rn(e.data);if(r==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Yu(r,{value:n,scale:"fx"})),i!=null&&(s.fy=Yu(r,{value:i,scale:"fy"})),Dx(s,t);const o=Cx(r,s);return{channels:s,groups:o,data:e.data}}function JT(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:i,fy:r}=e;if(i!=null||r!=null){const c=Rn(e.data??i??r);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const u={};return i!=null&&(u.fx=Yu(c,{value:i,scale:"fx"})),r!=null&&(u.fy=Yu(c,{value:r,scale:"fy"})),Dx(u,n),{channels:u,groups:Cx(c,u)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=Rn(e.data))==null?void 0:l.length)===a.length&&Gr(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function mtt(e,t={}){return In({...t,x:null,y:null},(n,i,r,s,o,a)=>a.getMarkState(e))}function ptt(e){const t=[];for(const n of e){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r}=i;r=/^x$/i.test(r)?cl:/^y$/i.test(r)?Rx:Mx,i=r(mtt(n,i)),i.title=null;const s=Nx(n.data,i);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function ytt(e,t,n){let{projection:i,x:r={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:f=l,grid:h}=u,x:{axis:d=l,grid:g=d===null?null:c}=r,y:{axis:m=l,grid:_=m===null?null:c}=s,fx:{axis:p=f,grid:y=p===null?null:h}=o,fy:{axis:x=f,grid:w=x===null?null:h}=a}=n;(i||!Ho(r)&&!QT("x",e))&&(d=g=null),(i||!Ho(s)&&!QT("y",e))&&(m=_=null),t.has("fx")||(p=y=null),t.has("fy")||(x=w=null),d===void 0&&(d=!Dh(e,"x")),m===void 0&&(m=!Dh(e,"y")),p===void 0&&(p=!Dh(e,"fx")),x===void 0&&(x=!Dh(e,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),p===!0&&(p=d==="top"||d===null?"bottom":"top"),x===!0&&(x=m==="right"||m===null?"left":"right");const v=[];return Nh(v,w,jO,a),Fh(v,x,YO,"right","left",u,a),Nh(v,y,qO,o),Fh(v,p,UO,"top","bottom",u,o),Nh(v,_,HO,s),Fh(v,m,Lx,"left","right",n,s),Nh(v,g,ZO,r),Fh(v,d,Ox,"bottom","top",n,r),v}function Fh(e,t,n,i,r,s,o){if(!t)return;const a=_tt(t);o=wtt(a?i:t,s,o);const{line:l}=o;(n===Lx||n===Ox)&&l&&!Fl(l)&&e.push(Fx(xtt(o))),e.push(n(o)),a&&e.push(n({...o,anchor:r,label:null}))}function Nh(e,t,n,i){!t||Fl(t)||e.push(n(btt(t,i)))}function _tt(e){return/^\s*both\s*$/i.test(e)}function wtt(e,t,{line:n=t.line,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:g=t.labelArrow,labelOffset:m}){return{anchor:e,line:n,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h,labelAnchor:d,labelArrow:g,labelOffset:m}}function xtt(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function btt(e,{stroke:t=Lf(e)?e:void 0,ticks:n=vtt(e)?e:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:s}}function vtt(e){switch(typeof e){case"number":return!0;case"string":return!Lf(e)}return ts(e)||typeof(e==null?void 0:e.range)=="function"}function Dh(e,t){const n=`${t}-axis `;return e.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function QT(e,t){for(const n of t)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===e||r==="projection")return!0}return!1}function Ett(e,t){for(const n in e){const i=e[n],r=t[n];i.label===void 0&&r&&(i.label=r.label)}return e}function Ttt({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=Tx(n),c=e&&tC(e),u=t&&tC(t);return{marginTop:t?u[0]:i,marginRight:e?a-c[1]:r,marginBottom:t?l-u[1]:s,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function tC(e){const t=e.domain();let n=e(t[0]),i=e(t[t.length-1]);return i<n&&([n,i]=[i,n]),[n,i+e.bandwidth()]}const Ctt=new Map([["basis",Nq],["basis-closed",Dq],["basis-open",$q],["bundle",zq],["bump-x",Cq],["bump-y",Sq],["cardinal",Gq],["cardinal-closed",Wq],["cardinal-open",Bq],["catmull-rom",Yq],["catmull-rom-closed",Uq],["catmull-rom-open",Vq],["linear",Mf],["linear-closed",Xq],["monotone-x",Hq],["monotone-y",jq],["natural",Zq],["step",qq],["step-after",Jq],["step-before",Kq]]);function $x(e=Mf,t){if(typeof e=="function")return e;const n=Ctt.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function h5(e=zl,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?zl:$x(e,t)}function zl(e){return Mf(e)}function Ss(e={y:"count"},t={}){[e,t]=Bx(e,t);const{x:n,y:i}=t;return Wx(Lg(n,t,_t),null,null,i,e,zf(t))}function Ms(e={x:"count"},t={}){[e,t]=Bx(e,t);const{x:n,y:i}=t;return Wx(null,Lg(i,t,_t),n,null,e,Gf(t))}function vo(e={fill:"count"},t={}){[e,t]=Bx(e,t);const{x:n,y:i}=Stt(t);return Wx(n,i,null,null,e,zf(Gf(t)))}function d5(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=mx}=n,r={filter:null};return n[t]!=null&&(r[t]=i),n[`${t}1`]!=null&&(r[`${t}1`]=i),n[`${t}2`]!=null&&(r[`${t}2`]=i),e(r,n)}function zx(e={}){return d5(Ss,"y",ic(e,"x"))}function Gx(e={}){return d5(Ms,"x",ic(e,"y"))}function Wx(e,t,n,i,{data:r=gx,filter:s=Sg,sort:o,reverse:a,...l}={},c={}){e=eC(e),t=eC(t),l=Mtt(l,c),r=y5(r,_t),o=o==null?void 0:m5("sort",o,c),s=s==null?void 0:p5("filter",s,c),n!=null&&Os(l,"x","x1","x2")&&(n=null),i!=null&&Os(l,"y","y1","y2")&&(i=null);const[u,f]=wn(e),[h,d]=wn(e),[g,m]=wn(t),[_,p]=wn(t),[y,x]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[w,v]=wn(y),{x:b,y:E,z:C,fill:I,stroke:S,x1:R,x2:M,y1:k,y2:O,domain:A,cumulative:P,thresholds:N,interval:G,...H}=c,[U,Z]=wn(C),[z]=Mn(I),[Q]=Mn(S),[nt,st]=wn(z),[ot,$]=wn(Q);return{..."z"in c&&{z:U||C},..."fill"in c&&{fill:nt||I},..."stroke"in c&&{stroke:ot||S},...lr(H,(Y,D,V)=>{const K=Cg(Ot(Y,y),V==null?void 0:V[x]),T=Ot(Y,C),L=Ot(Y,z),F=Ot(Y,Q),W=dx(l,{z:T,fill:L,stroke:F}),B=[],X=[],rt=K&&v([]),J=T&&Z([]),tt=L&&st([]),q=F&&$([]),ct=e&&f([]),at=e&&d([]),ut=t&&m([]),ft=t&&p([]),bt=Att(e==null?void 0:e(Y),t==null?void 0:t(Y));let Lt=0;for(const Et of l)Et.initialize(Y);o&&o.initialize(Y),s&&s.initialize(Y);for(const Et of D){const jt=[];for(const pe of l)pe.scope("facet",Et);o&&o.scope("facet",Et),s&&s.scope("facet",Et);for(const[pe,ce]of ll(Et,W))for(const[is,Un]of ll(ce,K))for(const[rn,ue]of bt(Un))if(!(s&&!s.reduce(rn,ue))){jt.push(Lt++),X.push(r.reduceIndex(rn,Y,ue)),K&&rt.push(is),T&&J.push(W===T?pe:T[(rn.length>0?rn:Un)[0]]),L&&tt.push(W===L?pe:L[(rn.length>0?rn:Un)[0]]),F&&q.push(W===F?pe:F[(rn.length>0?rn:Un)[0]]),ct&&(ct.push(ue.x1),at.push(ue.x2)),ut&&(ut.push(ue.y1),ft.push(ue.y2));for(const sn of l)sn.reduce(rn,ue);o&&o.reduce(rn)}B.push(jt)}return RL(B,o,a),{data:X,facets:B}}),...!Os(l,"x")&&(u?{x1:u,x2:h,x:Tg(u,h)}:{x:b,x1:R,x2:M}),...!Os(l,"y")&&(g?{y1:g,y2:_,y:Tg(g,_)}:{y:E,y1:k,y2:O}),...w&&{[x]:w},...Object.fromEntries(l.map(({name:Y,output:D})=>[Y,D]))}}function Bx({cumulative:e,domain:t,thresholds:n,interval:i,...r},s){return[r,{cumulative:e,domain:t,thresholds:n,interval:i,...s}]}function Lg(e,{cumulative:t,domain:n,thresholds:i,interval:r},s){return e={...Af(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=i),e.interval===void 0&&(e.interval=r),e.value===void 0&&(e.value=s),e.thresholds=g5(e.thresholds,e.interval),e}function Stt(e){let{x:t,y:n}=e;return t=Lg(t,e),n=Lg(n,e),[t.value,n.value]=Ni(t.value,n.value),{x:t,y:n}}function eC(e){if(e==null)return;const{value:t,cumulative:n,domain:i=Be,thresholds:r}=e,s=o=>{let a=Ot(o,t),l;if(pn(a)||Itt(r)){a=se(a,gL,Float64Array);let[u,f]=typeof i=="function"?i(a):i,h=typeof r=="function"&&!Ha(r)?r(a,u,f):r;typeof h=="number"&&(h=d3(u,f,h)),Ha(h)&&(i===Be&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f))),l=h}else{a=En(a);let[u,f]=typeof i=="function"?i(a):i,h=typeof r=="function"&&!Ha(r)?r(a,u,f):r;if(typeof h=="number")if(i===Be){let d=Iu(u,f,h);if(isFinite(d))if(d>0){let g=Math.round(u/d),m=Math.round(f/d);g*d<=u||--g,m*d>f||++m;let _=m-g+1;h=new Float64Array(_);for(let p=0;p<_;++p)h[p]=(g+p)*d}else if(d<0){d=-d;let g=Math.round(u*d),m=Math.round(f*d);g/d<=u||--g,m/d>f||++m;let _=m-g+1;h=new Float64Array(_);for(let p=0;p<_;++p)h[p]=(g+p)/d}else h=[u];else h=[u]}else h=Ws(u,f,h);else Ha(h)&&(i===Be&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f)));l=h}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?Ott:n>0?Ltt:Yx)(c,l,a),c};return s.label=Qr(t),s}function g5(e,t,n=nC){if(e===void 0)return t===void 0?n:nc(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return SB;case"scott":return yI;case"sturges":return pw;case"auto":return nC}return Zw(e)}return e}function Mtt(e,t){return ux(e,t,m5)}function m5(e,t,n){return fx(e,t,n,p5)}function p5(e,t,n){return hx(e,t,n,y5)}function y5(e,t){return t0(e,t,Rtt)}function Rtt(e){switch(`${e}`.toLowerCase()){case"x":return ktt;case"x1":return Ftt;case"x2":return Ntt;case"y":return Ptt;case"y1":return Dtt;case"y2":return $tt}throw new Error(`invalid bin reduce: ${e}`)}function nC(e,t,n){return Math.min(200,yI(e,t,n))}function Itt(e){return hK(e)||ts(e)&&pn(e)}function Att(e,t){return e&&t?function*(n){const i=e.bin(n);for(const[r,[s,o]]of e.entries()){const a=t.bin(i[r]);for(const[l,[c,u]]of t.entries())yield[a[l],{x1:s,y1:c,x2:o,y2:u}]}}:e?function*(n){const i=e.bin(n);for(const[r,[s,o]]of e.entries())yield[i[r],{x1:s,x2:o}]}:function*(n){const i=t.bin(n);for(const[r,[s,o]]of t.entries())yield[i[r],{y1:s,y2:o}]}}function Yx(e,t,n){return t=En(t),i=>{var s;const r=e.map(()=>[]);for(const o of i)(s=r[Em(t,n[o])-1])==null||s.push(o);return r}}function Ltt(e,t,n){const i=Yx(e,t,n);return r=>{const s=i(r);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],c=s[o];for(const u of l)c.push(u)}return s}}function Ott(e,t,n){const i=Yx(e,t,n);return r=>{const s=i(r);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const c of a)l.push(c)}return s}}function _5(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const ktt={reduceIndex(e,t,{x1:n,x2:i}){return _5(n,i)}},Ptt={reduceIndex(e,t,{y1:n,y2:i}){return _5(n,i)}},Ftt={reduceIndex(e,t,{x1:n}){return n}},Ntt={reduceIndex(e,t,{x2:n}){return n}},Dtt={reduceIndex(e,t,{y1:n}){return n}},$tt={reduceIndex(e,t,{y2:n}){return n}};function Ux(e={}){return pL(e)?e:{...e,x:_t}}function Vx(e={}){return yL(e)?e:{...e,y:_t}}function ztt(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,i=new Uint8Array(n);let r=0;for(const a of t)for(const l of a)i[l]&&++r,i[l]=1;if(r===0)return{data:e,facets:t};e=Gu(e);const s=e[hL]=new Uint32Array(n+r);t=t.map(a=>Gu(a,Uint32Array));let o=n;i.fill(0);for(const a of t)for(let l=0,c=a.length;l<c;++l){const u=a[l];i[u]?(a[l]=o,e[o]=e[u],s[o]=u,++o):s[u]=u,i[u]=1}return{data:e,facets:t}}function w5(e={},t={}){arguments.length===1&&([e,t]=ac(e));const{y1:n,y:i=n,x:r,...s}=t,[o,a,l,c]=lc(i,r,"y","x",e,s);return{...o,y1:n,y:a,x1:l,x2:c,x:Tg(l,c)}}function Gtt(e={},t={}){arguments.length===1&&([e,t]=ac(e));const{y1:n,y:i=n,x:r}=t,[s,o,a]=lc(i,r,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function Wtt(e={},t={}){arguments.length===1&&([e,t]=ac(e));const{y1:n,y:i=n,x:r}=t,[s,o,,a]=lc(i,r,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function x5(e={},t={}){arguments.length===1&&([e,t]=ac(e));const{x1:n,x:i=n,y:r,...s}=t,[o,a,l,c]=lc(i,r,"x","y",e,s);return{...o,x1:n,x:a,y1:l,y2:c,y:Tg(l,c)}}function Btt(e={},t={}){arguments.length===1&&([e,t]=ac(e));const{x1:n,x:i=n,y:r}=t,[s,o,a]=lc(i,r,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function Ytt(e={},t={}){arguments.length===1&&([e,t]=ac(e));const{x1:n,x:i=n,y:r}=t,[s,o,,a]=lc(i,r,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function Xx({x:e,x1:t,x2:n,...i}={}){return i=ic(i,"y"),t===void 0&&n===void 0?w5({x:e,...i}):([t,n]=_L(e,t,n),{...i,x1:t,x2:n})}function Hx({y:e,y1:t,y2:n,...i}={}){return i=ic(i,"x"),t===void 0&&n===void 0?x5({y:e,...i}):([t,n]=_L(e,t,n),{...i,y1:t,y2:n})}function ac(e){const{offset:t,order:n,reverse:i,...r}=e;return[{offset:t,order:n,reverse:i},r]}const Utt={length:!0};function lc(e,t=qw,n,i,{offset:r,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${i}`);const l=to(a),[c,u]=wn(e),[f,h]=Dn(t),[d,g]=Dn(t);return f.hint=d.hint=Utt,r=Vtt(r),s=jtt(s,r,i),[lr(a,(m,_,p)=>{({data:m,facets:_}=ztt(m,_));const y=e==null?void 0:u(Cg(Ot(m,e),p==null?void 0:p[n])),x=Ot(m,t,Float64Array),w=Ot(m,l),v=s&&s(m,y,x,w),b=m.length,E=h(new Float64Array(b)),C=g(new Float64Array(b)),I=[];for(const S of _){const R=y?Array.from(Kr(S,M=>y[M]).values()):[S];if(v)for(const M of R)M.sort(v);for(const M of R){let k=0,O=0;o&&M.reverse();for(const A of M){const P=x[A];P<0?k=C[A]=(E[A]=k)+P:P>0?O=C[A]=(E[A]=O)+P:C[A]=E[A]=O}}I.push(R)}return r&&r(I,E,C,w),{data:m,facets:_}}),c,f,d]}function Vtt(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Xtt;case"center":case"silhouette":return Htt;case"wiggle":return v5}throw new Error(`unknown offset: ${e}`)}}function b5(e,t){let n=0,i=0;for(const r of e){const s=t[r];s<n&&(n=s),s>i&&(i=s)}return[n,i]}function Xtt(e,t,n){for(const i of e)for(const r of i){const[s,o]=b5(r,n);for(const a of r){const l=1/(o-s||1);t[a]=l*(t[a]-s),n[a]=l*(n[a]-s)}}}function Htt(e,t,n){for(const i of e){for(const r of i){const[s,o]=b5(r,n);for(const a of r){const l=(o+s)/2;t[a]-=l,n[a]-=l}}E5(i,t,n)}T5(e,t,n)}function v5(e,t,n,i){for(const r of e){const s=new Qo;let o=0;for(const a of r){let l=-1;const c=a.map(d=>Math.abs(n[d]-t[d])),u=a.map(d=>{l=i?i[d]:++l;const g=n[d]-t[d],m=s.has(l)?g-s.get(l):0;return s.set(l,g),m}),f=[0,...yB(u)];for(const d of a)t[d]+=o,n[d]+=o;const h=nr(c);h&&(o-=nr(c,(d,g)=>(u[g]/2+f[g])*d)/h)}E5(r,t,n)}T5(e,t,n)}function E5(e,t,n){const i=Cn(e,r=>Cn(r,s=>t[s]));for(const r of e)for(const s of r)t[s]-=i,n[s]-=i}function T5(e,t,n){const i=e.length;if(i===1)return;const r=e.map(a=>a.flat()),s=r.map(a=>(Cn(a,l=>t[l])+Ue(a,l=>n[l]))/2),o=Cn(s);for(let a=0;a<i;a++){const l=o-s[a];for(const c of r[a])t[c]+=l,n[c]+=l}}function jtt(e,t,n){if(e===void 0&&t===v5)return iC(ai);if(e!=null){if(typeof e=="string"){const i=e.startsWith("-"),r=i?vg:ai;switch((i?e.slice(1):e).toLowerCase()){case"value":case n:return Ztt(r);case"z":return qtt(r);case"sum":return Ktt(r);case"appearance":return Jtt(r);case"inside-out":return iC(r)}return rC(dL(e))}if(typeof e=="function")return(e.length===1?rC:Qtt)(e);if(Array.isArray(e))return tet(e);throw new Error(`invalid order: ${e}`)}}function Ztt(e){return(t,n,i)=>(r,s)=>e(i[r],i[s])}function qtt(e){return(t,n,i,r)=>(s,o)=>e(r[s],r[o])}function Ktt(e){return f0(e,(t,n,i,r)=>mw(Jr(t),s=>nr(s,o=>i[o]),s=>r[s]))}function Jtt(e){return f0(e,(t,n,i,r)=>mw(Jr(t),s=>n[yw(s,o=>i[o])],s=>r[s]))}function iC(e){return f0(e,(t,n,i,r)=>{const s=Jr(t),o=mw(s,f=>n[yw(f,h=>i[h])],f=>r[f]),a=sl(s,f=>nr(f,h=>i[h]),f=>r[f]),l=[],c=[];let u=0;for(const f of o)u<0?(u+=a.get(f),l.push(f)):(u-=a.get(f),c.push(f));return c.reverse().concat(l)})}function rC(e){return t=>{const n=Ot(t,e);return(i,r)=>ai(n[i],n[r])}}function Qtt(e){return t=>(n,i)=>e(t[n],t[i])}function tet(e){return f0(ai,()=>e)}function f0(e,t){return(n,i,r,s)=>{if(!s)throw new Error("missing channel: z");const o=new Qo(t(n,i,r,s).map((a,l)=>[a,l]));return(a,l)=>e(o.get(s[a]),o.get(s[l]))}}const eet={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class h0 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,z:a,curve:l,tension:c}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:to(n),optional:!0}},n,eet),this.z=a,this.curve=$x(l,c)}filter(t){return t}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n,0,0).call(u=>u.selectAll().data(FL(t,[o,a,l,c],this,i)).enter().append("path").call(le,this).call(Mg,this,i).attr("d",Bw().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>c[f]))).node()}}function net(e,t){return t===void 0?la(e,{x:If,y:zu}):new h0(e,t)}function Vu(e,t){const{y:n=An,...i}=Gx(t);return new h0(e,Xx(Ux({...i,y1:n,y2:void 0})))}function la(e,t){const{x:n=An,...i}=zx(t);return new h0(e,Hx(Vx({...i,x1:n,x2:void 0})))}const iet={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class C5 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,curve:a,tension:l}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,iet),this.curve=h5(a,l),rc(this,n)}project(t,n,i){this.curve!==zl&&super.project(t,n,i)}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i,{curve:u}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(le,this).attr("d",u===zl&&s.projection?ret(s.projection,o,a,l,c):h=>{const d=Lr(),g=u(d);return g.lineStart(),g.point(o[h],a[h]),g.point(l[h],c[h]),g.lineEnd(),d}).call(Ne,this,i).call($f,this,i,s)).node()}}function ret(e,t,n,i,r){const s=Js(e);return t=En(t),n=En(n),i=En(i),r=En(r),o=>s({type:"LineString",coordinates:[[t[o],n[o]],[i[o],r[o]]]})}function S5(e,{x:t,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=Og(t,n,i),[s,o]=Og(r,s,o),new C5(e,{...a,x1:n,x2:i,y1:s,y2:o})}function Og(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const set={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class M5 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:h=u,sweep:d}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,set),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+f,this.insetEnd=+h,this.sweep=oet(d)}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a,SW:u}=i,{strokeWidth:f,bend:h,headAngle:d,headLength:g,insetStart:m,insetEnd:_}=this,p=u?w=>u[w]:Bn(f===void 0?1:f),y=d*Rg/2,x=g/1.5;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(w=>w.selectAll().data(t).enter().append("path").call(le,this).attr("d",v=>{let b=o[v],E=a[v],C=l[v],I=c[v];const S=Math.hypot(C-b,I-E);if(S<=m+_)return null;let R=Math.atan2(I-E,C-b);const M=Math.min(x*p(v),S/3),k=this.sweep(b,E,C,I)*h*Rg,O=Math.hypot(S/Math.tan(k),S)/2;if(m||_)if(O<1e5){const nt=Math.sign(k),[st,ot]=aet([b,E],[C,I],O,nt);if(m&&([b,E]=sC([st,ot,O],[b,E,m],-nt*Math.sign(m))),_){const[$,Y]=sC([st,ot,O],[C,I,_],nt*Math.sign(_));R+=Math.atan2(Y-ot,$-st)-Math.atan2(I-ot,C-st),C=$,I=Y}}else{const nt=C-b,st=I-E,ot=Math.hypot(nt,st);m&&(b+=nt/ot*m,E+=st/ot*m),_&&(C-=nt/ot*_,I-=st/ot*_)}const A=R+k,P=A+y,N=A-y,G=C-M*Math.cos(P),H=I-M*Math.sin(P),U=C-M*Math.cos(N),Z=I-M*Math.sin(N),z=O<1e5?`A${O},${O} 0,0,${k>0?1:0} `:"L",Q=M?`M${G},${H}L${C},${I}L${U},${Z}`:"";return`M${b},${E}${z}${C},${I}${Q}`}).call(Ne,this,i)).node()}}function oet(e=1){if(typeof e=="number")return Bn(Math.sign(e));if(typeof e=="function")return(t,n,i,r)=>Math.sign(e(t,n,i,r));switch(Yn(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,i)=>me(t,i);case"-x":return(t,n,i)=>Jo(t,i);case"+y":return(t,n,i,r)=>me(n,r);case"-y":return(t,n,i,r)=>Jo(n,r)}}function aet([e,t],[n,i],r,s){const o=n-e,a=i-t,l=Math.hypot(o,a),c=s*Math.sqrt(r*r-l*l/4)/l;return[(e+n)/2-a*c,(t+i)/2+o*c]}function sC([e,t,n],[i,r,s],o){const a=i-e,l=r-t,c=Math.hypot(a,l),u=(a*a+l*l-s*s+n*n)/(2*c),f=o*Math.sqrt(n*n-u*u);return[e+(a*u+l*f)/c,t+(l*u-a*f)/c]}function cet(e,{x:t,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=Og(t,n,i),[s,o]=Og(r,s,o),new M5(e,{...a,x1:n,x2:i,y1:s,y2:o})}class jx extends re{constructor(t,n,i={},r){super(t,n,i,r);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:c=s,rx:u,ry:f}=i;this.insetTop=Ft(o),this.insetRight=Ft(a),this.insetBottom=Ft(l),this.insetLeft=Ft(c),this.rx=xe(u,"auto"),this.ry=xe(f,"auto")}render(t,n,i,r,s){const{rx:o,ry:a}=this;return Ht("svg:g",s).call(he,this,r,s).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call(le,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(gt,"rx",o).call(gt,"ry",a).call(Ne,this,i)).node()}_x(t,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?s=>n[s]+r:i+r}_y(t,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?s=>n[s]+r:i+r}_width({x:t},{x:n},{marginRight:i,marginLeft:r,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&t?t.bandwidth():s-i-r;return Math.max(0,l-o-a)}_height({y:t},{y:n},{marginTop:i,marginBottom:r,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&t?t.bandwidth():s-i-r;return Math.max(0,l-o-a)}}const R5={ariaLabel:"bar"};class I5 extends jx{constructor(t,n={}){const{x1:i,x2:r,y:s}=n;super(t,{x1:{value:i,scale:"x"},x2:{value:r,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,R5)}_transform(t,n,{x:i}){t.call(ie,n,{x:i},0,0)}_x({x:t},{x1:n,x2:i},{marginLeft:r}){const{insetLeft:s}=this;return ri(t)?r+s:o=>Math.min(n[o],i[o])+s}_width({x:t},{x1:n,x2:i},{marginRight:r,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return ri(t)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}class A5 extends jx{constructor(t,n={}){const{x:i,y1:r,y2:s}=n;super(t,{y1:{value:r,scale:"y"},y2:{value:s,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,R5)}_transform(t,n,{y:i}){t.call(ie,n,{y:i},0,0)}_y({y:t},{y1:n,y2:i},{marginTop:r}){const{insetTop:s}=this;return ri(t)?r+s:o=>Math.min(n[o],i[o])+s}_height({y:t},{y1:n,y2:i},{marginTop:r,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return ri(t)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}function Po(e,t={}){return Zm(t)||(t={...t,y:An,x2:_t}),new I5(e,Xx(mO(Ux(t))))}function Fo(e,t={}){return Zm(t)||(t={...t,x:An,y2:_t}),new A5(e,Hx(pO(Vx(t))))}const uet={ariaLabel:"cell"};class d0 extends jx{constructor(t,{x:n,y:i,...r}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,uet)}_transform(t,n){t.call(ie,n,{},0,0)}}function Za(e,{x:t,y:n,...i}={}){return[t,n]=Ni(t,n),new d0(e,{...i,x:t,y:n})}function fet(e,{x:t=An,fill:n,stroke:i,...r}={}){return n===void 0&&Mn(i)[0]===void 0&&(n=_t),new d0(e,{...r,x:t,fill:n,stroke:i})}function het(e,{y:t=An,fill:n,stroke:i,...r}={}){return n===void 0&&Mn(i)[0]===void 0&&(n=_t),new d0(e,{...r,y:t,fill:n,stroke:i})}const det={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function Zx(e){return e.sort===void 0&&e.reverse===void 0?SL({channel:"-r"},e):e}class g0 extends re{constructor(t,n={}){const{x:i,y:r,r:s,rotate:o,symbol:a=$u,frameAnchor:l}=n,[c,u]=Te(o,0),[f,h]=SK(a),[d,g]=Te(s,f==null?3:4.5);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:d,scale:"r",filter:zr,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},Zx(n),det),this.r=g,this.rotate=u,this.symbol=h,this.frameAnchor=Of(l);const{channels:m}=this,{symbol:_}=m;if(_){const{fill:p,stroke:y}=m;_.hint={fill:p?p.value===_.value?"color":"currentColor":this.fill??"currentColor",stroke:y?y.value===_.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,r:u,rotate:f,symbol:h}=i,{r:d,rotate:g,symbol:m}=this,[_,p]=cr(this,r),y=m===$u,x=u?void 0:d*d*Math.PI;return Hm(d)&&(t=[]),Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(w=>w.selectAll().data(t).enter().append(y?"circle":"path").call(le,this).call(y?v=>{v.attr("cx",l?b=>l[b]:_).attr("cy",c?b=>c[b]:p).attr("r",u?b=>u[b]:d)}:v=>{v.attr("transform",a0`translate(${l?b=>l[b]:_},${c?b=>c[b]:p})${f?b=>` rotate(${f[b]})`:g?` rotate(${g})`:""}`).attr("d",u&&h?b=>{const E=Lr();return h[b].draw(E,u[b]*u[b]*Math.PI),E}:u?b=>{const E=Lr();return m.draw(E,u[b]*u[b]*Math.PI),E}:h?b=>{const E=Lr();return h[b].draw(E,x),E}:(()=>{const b=Lr();return m.draw(b,x),b})())}).call(Ne,this,i)).node()}}function ns(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Ni(t,n)),new g0(e,{...i,x:t,y:n})}function get(e,{x:t=_t,...n}={}){return new g0(e,_O({...n,x:t}))}function met(e,{y:t=_t,...n}={}){return new g0(e,yO({...n,y:t}))}function pet(e,t){return ns(e,{...t,symbol:"circle"})}function yet(e,t){return ns(e,{...t,symbol:"hexagon"})}const _et={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class m0 extends re{constructor(t,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:to(n),optional:!0}},n,_et),this.z=s,this.curve=h5(o,a),rc(this,n)}filter(t){return t}project(t,n,i){this.curve!==zl&&super.project(t,n,i)}render(t,n,i,r,s){const{x:o,y:a}=i,{curve:l}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(c=>c.selectAll().data(FL(t,[o,a],this,i)).enter().append("path").call(le,this).call(Mg,this,i).call(xQ,this,i,s).attr("d",l===zl&&s.projection?wet(s.projection,o,a):F6().curve(l).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function wet(e,t,n){const i=Js(e);return t=En(t),n=En(n),r=>{let s=[];const o=[s];for(const a of r)a===-1?(s=[],o.push(s)):s.push([t[a],n[a]]);return i({type:"MultiLineString",coordinates:o})}}function qx(e,{x:t,y:n,...i}={}){return[t,n]=Ni(t,n),new m0(e,{...i,x:t,y:n})}function Xu(e,{x:t=_t,y:n=An,...i}={}){return new m0(e,Gx({...i,x:t,y:n}))}function Gl(e,{x:t=An,y:n=_t,...i}={}){return new m0(e,zx({...i,x:t,y:n}))}const xet={ariaLabel:"rect"};class p0 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:c=a,insetBottom:u=a,insetLeft:f=a,rx:h,ry:d}=n;super(t,{x1:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,xet),this.insetTop=Ft(l),this.insetRight=Ft(c),this.insetBottom=Ft(u),this.insetLeft=Ft(f),this.rx=xe(h,"auto"),this.ry=xe(d,"auto")}render(t,n,i,r,s){const{x:o,y:a}=n,{x1:l,y1:c,x2:u,y2:f}=i,{marginTop:h,marginRight:d,marginBottom:g,marginLeft:m,width:_,height:p}=r,{projection:y}=s,{insetTop:x,insetRight:w,insetBottom:v,insetLeft:b,rx:E,ry:C}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&u&&o,y:c&&f&&a},0,0).call(I=>I.selectAll().data(t).enter().append("rect").call(le,this).attr("x",l&&u&&(y||!ri(o))?S=>Math.min(l[S],u[S])+b:m+b).attr("y",c&&f&&(y||!ri(a))?S=>Math.min(c[S],f[S])+x:h+x).attr("width",l&&u&&(y||!ri(o))?S=>Math.max(0,Math.abs(u[S]-l[S])-b-w):_-d-m-w-b).attr("height",c&&f&&(y||!ri(a))?S=>Math.max(0,Math.abs(c[S]-f[S])-x-v):p-h-g-x-v).call(gt,"rx",E).call(gt,"ry",C).call(Ne,this,i)).node()}}function Kx(e,t){return new p0(e,dO(gO(t)))}function kg(e,t={}){return Zm(t)||(t={...t,y:An,x2:_t,interval:1}),new p0(e,Xx(gO(Ux(t))))}function Pg(e,t={}){return Zm(t)||(t={...t,x:An,y2:_t,interval:1}),new p0(e,Hx(dO(Vx(t))))}function L5(e,t){t=vet(t);const{x:n,y:i,color:r,size:s}=t,o=$h(e,n),a=$h(e,i),l=$h(e,r),c=$h(e,s);let{fx:u,fy:f,x:{value:h,reduce:d,zero:g,...m},y:{value:_,reduce:p,zero:y,...x},color:{value:w,color:v,reduce:b},size:{value:E,reduce:C},mark:I}=t;if(d===void 0&&(d=p==null&&h==null&&E==null&&_!=null?"count":null),p===void 0&&(p=d==null&&_==null&&E==null&&h!=null?"count":null),C===void 0&&E==null&&b==null&&d==null&&p==null&&(h==null||ye(o))&&(_==null||ye(a))&&(C="count"),g===void 0&&(g=zh(d)?!0:void 0),y===void 0&&(y=zh(p)?!0:void 0),h==null&&_==null)throw new Error("must specify x or y");if(d!=null&&_==null)throw new Error("reducing x requires y");if(p!=null&&h==null)throw new Error("reducing y requires x");I===void 0&&(I=E!=null||C!=null?"dot":zh(d)||zh(p)||b!=null?"bar":h!=null&&_!=null?ye(o)||ye(a)||d==null&&p==null&&!Ac(o)&&!Ac(a)?"dot":"line":h!=null||_!=null?"rule":null);let S,R,M;switch(I){case"dot":M=ns,R="stroke";break;case"line":M=o&&a||d!=null||p!=null?y||p!=null||o&&Ac(o)?Gl:g||d!=null||a&&Ac(a)?Xu:qx:o?Xu:Gl,R="stroke",aC(l)&&(S=null);break;case"area":M=!(y||p!=null)&&(g||d!=null||a&&Ac(a))?Vu:la,R="fill",aC(l)&&(S=null);break;case"rule":M=o?Hr:Xs,R="stroke";break;case"bar":M=d!=null?ye(a)?oC(d)&&o&&ye(o)?Za:Po:kg:p!=null?ye(o)?oC(p)&&a&&ye(a)?Za:Fo:Pg:b!=null||C!=null?o&&ye(o)&&a&&ye(a)?Za:o&&ye(o)?Fo:a&&ye(a)?Po:Kx:o&&ja(o)&&!(a&&ja(a))?Po:a&&ja(a)&&!(o&&ja(o))?Fo:Za,R="fill";break;default:throw new Error(`invalid mark: ${I}`)}let k={fx:u,fy:f,x:o??void 0,y:a??void 0,[R]:l??v,z:S,r:c??void 0,tip:!0},O,A={[R]:b??void 0,r:C??void 0};if(d!=null&&p!=null)throw new Error("cannot reduce both x and y");return p!=null?(A.y=p,O=ye(o)?Wu:Ss):d!=null?(A.x=d,O=ye(a)?Bu:Ms):(b!=null||C!=null)&&(o&&a?O=ye(o)&&ye(a)?cx:ye(o)?Ms:ye(a)?Ss:vo:o?O=ye(o)?Wu:Ss:a&&(O=ye(a)?Bu:Ms)),(O===vo||O===Ss)&&(k.x={value:o,...m}),(O===vo||O===Ms)&&(k.y={value:a,...x}),g===void 0&&(g=o&&!(O===vo||O===Ss)&&(M===Po||M===Vu||M===kg||M===Xs)),y===void 0&&(y=a&&!(O===vo||O===Ms)&&(M===Fo||M===la||M===Pg||M===Hr)),{fx:u??null,fy:f??null,x:{value:h??null,reduce:d??null,zero:!!g,...m},y:{value:_??null,reduce:p??null,zero:!!y,...x},color:{value:w??null,reduce:b??null,...v!==void 0&&{color:v}},size:{value:E??null,reduce:C??null},mark:I,markImpl:lC[M],markOptions:k,transformImpl:lC[O],transformOptions:A,colorMode:R}}function bet(e,t){const n=L5(e,t),{fx:i,fy:r,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:c}=n,u=N_[n.markImpl],f=N_[n.transformImpl],h=i!=null||r!=null?Fx({strokeOpacity:.1}):null,d=[s?Hr([0]):null,o?Xs([0]):null],g=u(e,f?f(l,a):a);return c==="stroke"?ki(h,d,g):ki(h,g,d)}function Ac(e){let t,n;for(const i of e){if(i==null)continue;if(t===void 0){t=i;continue}const r=Math.sign(me(t,i));if(r){if(n!==void 0&&r!==n)return!1;t=i,n=r}}return!0}function vet({x:e,y:t,color:n,size:i,fx:r,fy:s,mark:o}={}){return Wi(e)||(e=Fa(e)),Wi(t)||(t=Fa(t)),Wi(n)||(n=Lf(n)?{color:n}:Fa(n)),Wi(i)||(i=Fa(i)),Wi(r)&&({value:r}=Fa(r)),Wi(s)&&({value:s}=Fa(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:e,y:t,color:n,size:i,fx:r,fy:s,mark:o}}function $h(e,t){const n=Ot(e,t.value);return n&&(n.label=Qr(t.value)),n}function Fa(e){return Eet(e)?{reduce:e}:{value:e}}function zh(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function oC(e){return/^(?:first|last|mode)$/i.test(e)}function Eet(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&li(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function aC(e){return e?new hf(e).size>e.length>>1:!1}const N_={dot:ns,line:qx,lineX:Xu,lineY:Gl,areaX:Vu,areaY:la,ruleX:Hr,ruleY:Xs,barX:Po,barY:Fo,rect:Kx,rectX:kg,rectY:Pg,cell:Za,bin:vo,binX:Ss,binY:Ms,group:cx,groupX:Wu,groupY:Bu},lC=Object.fromEntries(Object.entries(N_).map(([e,t])=>[t,e]));function Jx(e,t={}){let{x:n,x1:i,x2:r}=t;n===void 0&&i===void 0&&r===void 0&&(t={...t,x:n=_t});const s={};return n!=null&&(s.x=e),i!=null&&(s.x1=e),r!=null&&(s.x2=e),sr(s,t)}function Qx(e,t={}){let{y:n,y1:i,y2:r}=t;n===void 0&&i===void 0&&r===void 0&&(t={...t,y:n=_t});const s={};return n!=null&&(s.y=e),i!=null&&(s.y1=e),r!=null&&(s.y2=e),sr(s,t)}function sr(e={},t={}){const n=to(t),i=Object.entries(e).map(([r,s])=>{const o=wL(r,t);if(o==null)throw new Error(`missing channel: ${r}`);const[a,l]=Dn(o);return{key:r,input:o,output:a,setOutput:l,map:Tet(s)}});return{...lr(t,(r,s)=>{const o=Ot(r,n),a=i.map(({input:c})=>Ot(r,c)),l=i.map(({setOutput:c})=>c(new Array(r.length)));for(const c of s)for(const u of o?Kr(c,f=>o[f]).values():[c])i.forEach(({map:f},h)=>f.mapIndex(u,a[h],l[h]));return{data:r,facets:s}}),...Object.fromEntries(i.map(({key:r,output:s})=>[r,s]))}}function Tet(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&li(e))return Cet(e);if(typeof e=="function")return Yp(Qw(e));switch(`${e}`.toLowerCase()){case"cumsum":return Ret;case"rank":return Yp((t,n)=>xI(t,i=>n[i]));case"quantile":return Yp((t,n)=>Met(t,i=>n[i]))}throw new Error(`invalid map: ${e}`)}function Cet(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function Met(e,t){const n=Tm(e,t)-1;return xI(e,t).map(i=>i/n)}function Yp(e){return{mapIndex(t,n,i){const r=e(t,n);if(r.length!==t.length)throw new Error("map function returned a mismatched length");for(let s=0,o=t.length;s<o;++s)i[t[s]]=r[s]}}}const Ret={mapIndex(e,t,n){let i=0;for(const r of e)n[r]=i+=t[r]}};function Iet(e={},t){return arguments.length===1&&(t=e),Jx(Wf(e),t)}function Aet(e={},t){return arguments.length===1&&(t=e),Qx(Wf(e),t)}function Wf(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:i,anchor:r,strict:s}=e;if(r===void 0&&i!==void 0&&(r=Oet(i),Gr(`Warning: the shift option is deprecated; please use anchor "${r}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return ket(n)(t,Let(r,t),s)}function Let(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function Oet(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function ket(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return Gh(Kw(e));switch(e.toLowerCase()){case"deviation":return Gh(ff);case"max":return Wh((t,n)=>Ue(t,i=>n[i]));case"mean":return Pet;case"median":return Gh(Au);case"min":return Wh((t,n)=>Cn(t,i=>n[i]));case"mode":return Wh((t,n)=>wI(t,i=>n[i]));case"sum":return O5;case"variance":return Gh(hw);case"difference":return Det;case"ratio":return $et;case"first":return zet;case"last":return Get}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return Wh(Qw(e))}function Gh(e){return(t,n,i)=>i?{mapIndex(r,s,o){const a=c=>s[c]==null?NaN:+s[c];let l=0;for(let c=0;c<t-1;++c)isNaN(a(c))&&++l;for(let c=0,u=r.length-t+1;c<u;++c)isNaN(a(c+t-1))&&++l,o[r[c+n]]=l===0?e(jo(r,c,c+t),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(r,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[r[l+n]]=e(jo(r,0,l+t),a);for(let l=0,c=r.length-n;l<c;++l)o[r[l+n]]=e(jo(r,l,l+t),a)}}}function Wh(e){return(t,n,i)=>i?{mapIndex(r,s,o){let a=0;for(let l=0;l<t-1;++l)a+=dn(s[r[l]]);for(let l=0,c=r.length-t+1;l<c;++l)a+=dn(s[r[l+t-1]]),a===t&&(o[r[l+n]]=e(jo(r,l,l+t),s)),a-=dn(s[r[l]])}}:{mapIndex(r,s,o){for(let a=-n;a<0;++a)o[r[a+n]]=e(jo(r,0,a+t),s);for(let a=0,l=r.length-n;a<l;++a)o[r[a+n]]=e(jo(r,a,a+t),s)}}}function O5(e,t,n){return n?{mapIndex(i,r,s){let o=0,a=0;for(let l=0;l<e-1;++l){const c=r[i[l]];c===null||isNaN(c)?++o:a+=+c}for(let l=0,c=i.length-e+1;l<c;++l){const u=r[i[l]],f=r[i[l+e-1]];f===null||isNaN(f)?++o:a+=+f,s[i[l+t]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(i,r,s){let o=0;const a=i.length;for(let l=0,c=Math.min(a,e-t-1);l<c;++l)o+=+r[i[l]]||0;for(let l=-t,c=a-t;l<c;++l)o+=+r[i[l+e-1]]||0,s[i[l+t]]=o,o-=+r[i[l]]||0}}}function Pet(e,t,n){if(n){const i=O5(e,t,n);return{mapIndex(r,s,o){i.mapIndex(r,s,o);for(let a=0,l=r.length-e+1;a<l;++a)o[r[a+t]]/=e}}}else return{mapIndex(i,r,s){let o=0,a=0;const l=i.length;for(let c=0,u=Math.min(l,e-t-1);c<u;++c){let f=r[i[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let c=-t,u=l-t;c<u;++c){let f=r[i[c+e-1]],h=r[i[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[i[c+t]]=o/a,h!==null&&!isNaN(h=+h)&&(o-=h,--a)}}}}function Fet(e,t,n,i){for(let r=n+i;n<r;++n){const s=e[t[n]];if(dn(s))return s}}function Net(e,t,n,i){for(let r=n+i-1;r>=n;--r){const s=e[t[r]];if(dn(s))return s}}function k5(e,t,n,i){for(let r=n+i;n<r;++n){let s=e[t[n]];if(s!==null&&!isNaN(s=+s))return s}}function P5(e,t,n,i){for(let r=n+i-1;r>=n;--r){let s=e[t[r]];if(s!==null&&!isNaN(s=+s))return s}}function Det(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o){const l=r[i[o]],c=r[i[o+e-1]];s[i[o+t]]=l===null||c===null?NaN:c-l}}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=P5(r,i,o,e)-k5(r,i,o,e)}}}function $et(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o){const l=r[i[o]],c=r[i[o+e-1]];s[i[o+t]]=l===null||c===null?NaN:c/l}}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=P5(r,i,o,e)/k5(r,i,o,e)}}}function zet(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o)s[i[o+t]]=r[i[o]]}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=Fet(r,i,o,e)}}}function Get(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o)s[i[o+t]]=r[i[o+e-1]]}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=Net(r,i,o,e)}}}const Wr={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function Wet(e,{x:t=_t,y:n,k:i=Wr.k,color:r=Wr.color,opacity:s=Wr.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...f}={}){return ki(ve(o)?null:Vu(e,sr({x1:Zo({k:-i,...f}),x2:Zo({k:i,...f})},{x1:t,x2:t,y:n,fill:o,fillOpacity:a,...f})),ve(l)?null:Xu(e,sr({x:Zo(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function Bet(e,{x:t,y:n=_t,k:i=Wr.k,color:r=Wr.color,opacity:s=Wr.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...f}={}){return ki(ve(o)?null:la(e,sr({y1:Zo({k:-i,...f}),y2:Zo({k:i,...f})},{x:t,y1:n,y2:n,fill:o,fillOpacity:a,...f})),ve(l)?null:Gl(e,sr({y:Zo(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function Zo({n:e=Wr.n,k:t=0,strict:n=Wr.strict,anchor:i=Wr.anchor}={}){return Wf({k:e,reduce:r=>Cm(r)+t*(ff(r)||0),strict:n,anchor:i})}const Yet={ariaLabel:"tick",fill:null,stroke:"currentColor"};class F5 extends re{constructor(t,n,i){super(t,n,i,Yet),rc(this,i)}render(t,n,i,r,s){return Ht("svg:g",s).call(he,this,r,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(le,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(Ne,this,i).call($f,this,i,s)).node()}}class N5 extends F5{constructor(t,n={}){const{x:i,y:r,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=Ft(o),this.insetBottom=Ft(a)}_transform(t,n,{x:i}){t.call(ie,n,{x:i},He,0)}_x1(t,{x:n}){return i=>n[i]}_x2(t,{x:n}){return i=>n[i]}_y1({y:t},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&t?s=>n[s]+r:i+r}_y2({y:t},{y:n},{height:i,marginBottom:r}){const{insetBottom:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:i-r-s}}class D5 extends F5{constructor(t,n={}){const{x:i,y:r,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(t,{y:{value:r,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n),this.insetRight=Ft(o),this.insetLeft=Ft(a)}_transform(t,n,{y:i}){t.call(ie,n,{y:i},0,He)}_x1({x:t},{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n&&t?s=>n[s]+r:i+r}_x2({x:t},{x:n},{width:i,marginRight:r}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:i-r-s}_y1(t,{y:n}){return i=>n[i]}_y2(t,{y:n}){return i=>n[i]}}function $5(e,{x:t=_t,...n}={}){return new N5(e,{...n,x:t})}function z5(e,{y:t=_t,...n}={}){return new D5(e,{...n,y:t})}function Uet(e,{x:t=_t,y:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Bu:lx;return ki(Xs(e,u({x1:tb,x2:eb},{x:t,y:n,stroke:s,strokeOpacity:o,...c})),Po(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:i,fillOpacity:r,...c})),$5(e,u({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),ns(e,sr({x:G5},{x:t,y:n,z:n,stroke:s,strokeOpacity:o,...c})))}function Vet(e,{y:t=_t,x:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Wu:lx;return ki(Hr(e,u({y1:tb,y2:eb},{x:n,y:t,stroke:s,strokeOpacity:o,...c})),Fo(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:i,fillOpacity:r,...c})),z5(e,u({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),ns(e,sr({y:G5},{x:n,y:t,z:n,stroke:s,strokeOpacity:o,...c})))}function G5(e){const t=tb(e),n=eb(e);return e.map(i=>i<t||i>n?i:NaN)}function tb(e){const t=W5(e)*2.5-B5(e)*1.5;return Cn(e,n=>n>=t?n:NaN)}function eb(e){const t=B5(e)*2.5-W5(e)*1.5;return Ue(e,n=>n<=t?n:NaN)}function W5(e){return Bs(e,.25)}function B5(e){return Bs(e,.75)}const Xet={ariaLabel:"raster",stroke:null,pixelSize:1};function Na(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function cC(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class Y5 extends re{constructor(t,n,i={},r){let{width:s,height:o,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:f=a==null?s:void 0,y2:h=l==null?o:void 0,pixelSize:d=r.pixelSize,blur:g=0,interpolate:m}=i;if(s!=null&&(s=cC(s,"width")),o!=null&&(o=cC(o,"height")),c!=null&&(c=Na(c,"x1")),u!=null&&(u=Na(u,"y1")),f!=null&&(f=Na(f,"x2")),h!=null&&(h=Na(h,"y2")),a==null&&(c==null||f==null))throw new Error("missing x");if(l==null&&(u==null||h==null))throw new Error("missing y");t!=null&&s!=null&&o!=null&&(a===void 0&&c!=null&&f!=null&&(a=ent(c,f,s)),l===void 0&&u!=null&&h!=null&&(l=nnt(u,h,s,o))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:h==null?null:[h],scale:"y",optional:!0,filter:null},...n},i,r),this.width=s,this.height=o,this.pixelSize=Na(d,"pixelSize"),this.blur=Na(g,"blur"),this.interpolate=a==null||l==null?null:jet(m)}}class U5 extends Y5{constructor(t,n={}){const{imageRendering:i}=n;if(t==null){const{fill:r,fillOpacity:s}=n;Te(s)[0]!==void 0&&(n=D_("fillOpacity",n)),Mn(r)[0]!==void 0&&(n=D_("fill",n))}super(t,void 0,n,Xet),this.imageRendering=xe(i,"auto")}scale(t,{color:n,...i},r){return super.scale(t,i,r)}render(t,n,i,r,s){var A;const o=n[(A=i.channels.fill)==null?void 0:A.scale]??(P=>P),{x:a,y:l}=i,{document:c}=s,[u,f,h,d]=X5(i,r,s),g=h-u,m=d-f,{pixelSize:_,width:p=Math.round(Math.abs(g)/_),height:y=Math.round(Math.abs(m)/_)}=this,x=p*y;let{fill:w,fillOpacity:v}=i,b=0;if(this.interpolate){const P=p/g,N=y/m,G=se(a,U=>(U-u)*P,Float64Array),H=se(l,U=>(U-f)*N,Float64Array);w&&(w=this.interpolate(t,p,y,G,H,w)),v&&(v=this.interpolate(t,p,y,G,H,v))}else this.data==null&&t&&(b=t.fi*x);const E=c.createElement("canvas");E.width=p,E.height=y;const C=E.getContext("2d"),I=C.createImageData(p,y),S=I.data;let{r:R,g:M,b:k}=ir(this.fill)??{r:0,g:0,b:0},O=(this.fillOpacity??1)*255;for(let P=0;P<x;++P){const N=P<<2;if(w){const G=o(w[P+b]);if(G==null){S[N+3]=0;continue}({r:R,g:M,b:k}=ir(G))}v&&(O=v[P+b]*255),S[N+0]=R,S[N+1]=M,S[N+2]=k,S[N+3]=O}return this.blur>0&&cB(I,this.blur),C.putImageData(I,0,0),Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(P=>P.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(h-u)},${Math.sign(d-f)})`).attr("width",Math.abs(g)).attr("height",Math.abs(m)).attr("preserveAspectRatio","none").call(gt,"image-rendering",this.imageRendering).call(le,this).attr("xlink:href",E.toDataURL())).node()}}function V5(e,t,n){arguments.length<3&&(n=t,t=null);let{x:i,y:r,[e]:s,...o}=n;return i===void 0&&r===void 0&&gK(t)&&(i=If,r=zu,s===void 0&&(s=cK)),[t,{...o,x:i,y:r,[e]:s}]}function Het(){const[e,t]=V5("fill",...arguments);return new U5(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:_t})}function X5({x1:e,y1:t,x2:n,y2:i},r,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f}=r;return[e&&s==null?e[0]:f,t&&s==null?t[0]:l,n&&s==null?n[0]:o-c,i&&s==null?i[0]:a-u]}function H5({x1:e,y1:t,x2:n,y2:i},r,s,o){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),i&&(a.y2=i),X5(px(a,r),s,o)}function D_(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return In({...t,[e]:void 0},function(i,r,s,o,a,l){const{x:c,y:u}=o;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,h,d,g]=H5(s,o,a,l),m=d-f,_=g-h,{pixelSize:p}=this,{width:y=Math.round(Math.abs(m)/p),height:x=Math.round(Math.abs(_)/p)}=t,w=new Array(y*x*(r?r.length:1)),v=m/y,b=_/x;let E=0;for(const C of r??[void 0])for(let I=.5;I<x;++I)for(let S=.5;S<y;++S,++E)w[E]=n(c.invert(f+S*v),u.invert(h+I*b),C);return{data:w,facets:r,channels:{[e]:{value:w,scale:"auto"}}}})}function jet(e){if(typeof e=="function")return e;if(e==null)return $_;switch(`${e}`.toLowerCase()){case"none":return $_;case"nearest":return Z5;case"barycentric":return j5();case"random-walk":return q5()}throw new Error(`invalid interpolate: ${e}`)}function $_(e,t,n,i,r,s){const o=new Array(t*n);for(const a of e)i[a]<0||i[a]>=t||r[a]<0||r[a]>=n||(o[Math.floor(r[a])*t+Math.floor(i[a])]=s[a]);return o}function j5({random:e=Fw(42)}={}){return(t,n,i,r,s,o)=>{const{points:a,triangles:l,hull:c}=Ks.from(t,d=>r[d],d=>s[d]),u=new o.constructor(n*i).fill(NaN),f=new Uint8Array(n*i),h=tnt(o,e);for(let d=0;d<l.length;d+=3){const g=l[d],m=l[d+1],_=l[d+2],p=a[2*g],y=a[2*m],x=a[2*_],w=a[2*g+1],v=a[2*m+1],b=a[2*_+1],E=Math.min(p,y,x),C=Math.max(p,y,x),I=Math.min(w,v,b),S=Math.max(w,v,b),R=(v-b)*(p-x)+(w-b)*(x-y);if(!R)continue;const M=o[t[g]],k=o[t[m]],O=o[t[_]];for(let A=Math.floor(E);A<C;++A)for(let P=Math.floor(I);P<S;++P){if(A<0||A>=n||P<0||P>=i)continue;const N=A+.5,G=P+.5,H=((v-b)*(N-x)+(G-b)*(x-y))/R;if(H<0)continue;const U=((b-w)*(N-x)+(G-b)*(p-x))/R;if(U<0)continue;const Z=1-H-U;if(Z<0)continue;const z=A+n*P;u[z]=h(M,H,k,U,O,Z,A,P),f[z]=1}}return Zet(u,f,r,s,o,n,i,c,t,h),u}}function Zet(e,t,n,i,r,s,o,a,l,c){n=Float64Array.from(a,d=>n[l[d]]),i=Float64Array.from(a,d=>i[l[d]]),r=Array.from(a,d=>r[l[d]]);const u=n.length,f=Array.from({length:u},(d,g)=>Ket(g,n,i));let h=0;for(let d=0;d<o;++d){const g=d+.5;for(let m=0;m<s;++m){const _=m+s*d;if(!t[_]){const p=m+.5;for(let y=0;y<u;++y){const x=(u+h+(y%2?(y+1)/2:-y/2))%u;if(f[x](p,g)){const w=qet(n.at(x-1),i.at(x-1),n[x],i[x],p,g);e[_]=c(r.at(x-1),w,r[x],1-w,r[x],0,m,d),h=x;break}}}}}}function qet(e,t,n,i,r,s){const o=n-e,a=i-t,l=o*(n-r)+a*(i-s),c=o*(r-e)+a*(s-t);return l>0&&c>0?l/(l+c):+(l>c)}function Lc(e,t,n,i){return e*i-n*t}function Ket(e,t,n){const i=t.length,r=t.at(e-2),s=n.at(e-2),o=t.at(e-1),a=n.at(e-1),l=t[e],c=n[e],u=t.at(e+1-i),f=n.at(e+1-i),h=o-l,d=a-c,g=r-o,m=s-a,_=l-u,p=c-f,y=Math.hypot(h,d),x=Math.hypot(g,m),w=Math.hypot(_,p);return(v,b)=>{const E=v-o,C=b-a,I=v-l,S=b-c;return Lc(E,C,I,S)>-1e-6&&Lc(E,C,h,d)*x-Lc(E,C,g,m)*y>-1e-6&&Lc(I,S,_,p)*y-Lc(I,S,h,d)*w<=0}}function Z5(e,t,n,i,r,s){const o=new s.constructor(t*n),a=Ks.from(e,u=>i[u],u=>r[u]);let l,c;for(let u=.5,f=0;u<n;++u){c=l;for(let h=.5;h<t;++h,++f)c=a.find(h,u,c),h===.5&&(l=c),o[f]=s[e[c]]}return o}function q5({random:e=Fw(42),minDistance:t=.5,maxSteps:n=2}={}){return(i,r,s,o,a,l)=>{const c=new l.constructor(r*s),u=Ks.from(i,g=>o[g],g=>a[g]);let f,h,d;for(let g=.5,m=0;g<s;++g){h=f;for(let _=.5;_<r;++_,++m){let p=_,y=g;d=h=u.find(p,y,h),_===.5&&(f=h);let x,w=0;for(;(x=Math.hypot(o[i[d]]-p,a[i[d]]-y))>t&&w<n;){const v=e(_,g,w)*2*Math.PI;p+=Math.cos(v)*x,y+=Math.sin(v)*x,d=u.find(p,y,d),++w}c[m]=l[i[d]]}}return c}}function Jet(e,t,n,i,r,s){return t*e+i*n+s*r}function Qet(e){return(t,n,i,r,s,o,a,l)=>{const c=e(a,l);return c<n?t:c<n+r?i:s}}function tnt(e,t){return ja(e)||pn(e)?Jet:Qet(t)}function ent(e,t,n){return{transform(i){const r=i.length,s=new Float64Array(r),o=(t-e)/n,a=e+o/2;for(let l=0;l<r;++l)s[l]=l%n*o+a;return s}}}function nnt(e,t,n,i){return{transform(r){const s=r.length,o=new Float64Array(s),a=(t-e)/i,l=e+a/2;for(let c=0;c<s;++c)o[c]=Math.floor(c/n)%i*a+l;return o}}}const uC={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class K5 extends Y5{constructor(t,{smooth:n=!0,value:i,...r}={}){const s=PL({},r,uC);if(i===void 0){for(const a in s)if(s[a].value!=null){if(i!==void 0)throw new Error("ambiguous contour value");i=r[a],r[a]="value"}}if(i!=null){const a={transform:l=>l.map(c=>c.value),label:Qr(i)};for(const l in s)r[l]==="value"&&(r[l]=a)}if(t==null){if(i==null)throw new Error("missing contour value");r=D_("value",{value:i,...r}),i=null}else{let{interpolate:a}=r;i===void 0&&(i=_t),a===void 0&&(r.interpolate="nearest")}super(t,{value:{value:i,optional:!0}},int(r),uC);const o={geometry:{value:_t}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(t,{x:n,y:i,value:r,...s},o){return super.filter(t,s,o)}render(t,n,i,r,s){const{geometry:o}=i,a=Js();return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(l=>{l.selectAll().data(t).enter().append("path").call(le,this).attr("d",c=>a(o[c])).call(Ne,this,i)}).node()}}function int({thresholds:e,interval:t,...n}){return e=g5(e,t,pw),In(n,function(i,r,s,o,a,l){const[c,u,f,h]=H5(s,o,a,l),d=f-c,g=h-u,{pixelSize:m,width:_=Math.round(Math.abs(d)/m),height:p=Math.round(Math.abs(g)/m)}=this,y=_/d,x=p/g,w=s.value.value,v=[];if(this.interpolate){const{x:S,y:R}=n0(s,o,l),M=se(S,P=>(P-c)*y,Float64Array),k=se(R,P=>(P-u)*x,Float64Array),O=[s.x,s.y,s.value],A=[M,k,w];for(const P of r){const N=this.filter(P,O,A);v.push(this.interpolate(N,_,p,M,k,w))}}else if(r){const S=_*p,R=r.length;for(let M=0;M<R;++M)v.push(w.slice(M*S,M*S+S))}else v.push(w);if(this.blur>0)for(const S of v)cI({data:S,width:_,height:p},this.blur);const b=rnt(e,w,...ont(v));if(b===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:E}=t_().size([_,p]).smooth(this.smooth),C=[],I=[];for(const S of v)I.push(ti(C.length,C.push(...se(b,R=>E(S,R)))));for(const{coordinates:S}of C)for(const R of S)for(const M of R)for(const k of M)k[0]=k[0]/y+c,k[1]=k[1]/x+u;return{data:C,facets:I,channels:IL(this.contourChannels,C)}})}function rnt(e,t,n,i){if(typeof(e==null?void 0:e.range)=="function")return e.range(e.floor(n),i);if(typeof e=="function"&&(e=e(t,n,i)),typeof e!="number")return Rn(e);const r=Ws(...mI(n,i,e),e);for(;r[r.length-1]>=i;)r.pop();for(;r[1]<n;)r.shift();return r}function snt(){return new K5(...V5("value",...arguments))}function ont(e){return[Cn(e,t=>Cn(t,fC)),Ue(e,t=>Ue(t,fC))]}function fC(e){return isFinite(e)?e:NaN}function ant(e,t){return nb(Mx,e,t)}function lnt(e,t={}){return nb(cl,e,t)}function cnt(e,t={}){return nb(Rx,e,t)}function nb(e,t,n={}){const{x:i,y:r,maxRadius:s}=n,o=e({px:i,py:r,maxRadius:s}),a=[];i!=null&&a.push(Hr(t,hC("x",{...o,inset:-6},n))),r!=null&&a.push(Xs(t,hC("y",{...o,inset:-6},n))),i!=null&&a.push(Dl(t,dC("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),r!=null&&a.push(Dl(t,dC("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return ki(...a)}function J5(e,{channels:t,...n},{facet:i,facetAnchor:r,fx:s,fy:o,[e]:a,channels:l,transform:c,initializer:u}){return{...n,facet:i,facetAnchor:r,fx:s,fy:o,[e]:a,channels:{...t,...l},transform:c,initializer:unt(e,u)}}function unt(e,t){return t==null?t:function(n,i,{x:r,y:s,px:o,py:a,...l},...c){const{channels:{x:u,y:f,...h}={},...d}=t.call(this,n,i,{...l,x:o,y:a},...c);return{channels:{...h,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...d}}}function hC(e,t,n){const{color:i="currentColor",opacity:r=.2,ruleStroke:s=i,ruleStrokeOpacity:o=r,ruleStrokeWidth:a}=n;return{...J5(e,t,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function dC(e,t,n){const{color:i="currentColor",textFill:r=i,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...J5(e,t,fnt(e,n)),fill:r,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function fnt(e,t){return In(t,(n,i,r)=>{var s;return{channels:{text:{value:(s=I_(r,e))==null?void 0:s.value}}}})}const hnt={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},dnt={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},gnt={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},mnt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},pnt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class ynt extends re{constructor(t,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,hnt),this.curve=$x(o,a),rc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,{curve:f}=this,[h,d]=cr(this,r),g=l?y=>l[y]:Bn(h),m=c?y=>c[y]:Bn(d),_=this;function p(y){let x=-1;const w=[],v={};for(const O in i)v[O]=[];const b=[],E=[],C=[],I=[];function S(O,A){O=y[O],A=y[A],w.push(++x),b[x]=g(O),C[x]=m(O),E[x]=g(A),I[x]=m(A);for(const P in i)v[P].push(i[P][A])}const{halfedges:R,hull:M,triangles:k}=Ks.from(y,g,m);for(let O=0;O<R.length;++O){const A=R[O];A>O&&S(k[O],k[A])}for(let O=0;O<M.length;++O)S(M[O],M[(O+1)%M.length]);Fs(this).selectAll().data(w).enter().append("path").call(le,_).attr("d",O=>{const A=Lr(),P=f(A);return P.lineStart(),P.point(b[O],C[O]),P.point(E[O],I[O]),P.lineEnd(),A}).call(Ne,_,v).call($f,_,v,s)}return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Kr(t,x=>u[x]).values()).enter().append("g").each(p):y=>y.datum(t).each(p)).node()}}class ib extends re{constructor(t,n={},i,r=({z:s})=>s){const{x:s,y:o}=n;super(t,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:r(n),optional:!0}},n,i)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[f,h]=cr(this,r),d=l?p=>l[p]:Bn(f),g=c?p=>c[p]:Bn(h),m=this;function _(p){const y=Ks.from(p,d,g);Fs(this).append("path").datum(p[0]).call(le,m).attr("d",m._render(y,r)).call(Ne,m,i)}return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(u?p=>p.selectAll().data(Kr(t,y=>u[y]).values()).enter().append("g").each(_):p=>p.datum(t).each(_)).node()}}class _nt extends ib{constructor(t,n={}){super(t,n,dnt),this.fill="none"}_render(t){return t.render()}}class wnt extends ib{constructor(t,n={}){super(t,n,gnt,to)}_render(t){return t.renderHull()}}class xnt extends re{constructor(t,n={}){const{x:i,y:r,z:s}=n;super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,mnt)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[f,h]=cr(this,r),d=l?p=>l[p]:Bn(f),g=c?p=>c[p]:Bn(h),m=this;function _(p){const y=Ks.from(p,d,g),x=Q5(y,r);Fs(this).selectAll().data(p).enter().append("path").call(le,m).attr("d",(w,v)=>x.renderCell(v)).call(Ne,m,i)}return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(u?p=>p.selectAll().data(Kr(t,y=>u[y]).values()).enter().append("g").each(_):p=>p.datum(t).each(_)).node()}}class bnt extends ib{constructor(t,n){super(t,n,pnt),this.fill="none"}_render(t,n){return Q5(t,n).render()}}function Q5(e,t){const{width:n,height:i,marginTop:r,marginRight:s,marginBottom:o,marginLeft:a}=t;return e.voronoi([a,r,n-s,i-o])}function Bf(e,t,{x:n,y:i,...r}={}){return[n,i]=Ni(n,i),new e(t,{...r,x:n,y:i})}function vnt(e,t){return Bf(ynt,e,t)}function Ent(e,t){return Bf(_nt,e,t)}function Tnt(e,t){return Bf(wnt,e,t)}function Cnt(e,t){return Bf(xnt,e,t)}function Snt(e,t){return Bf(bnt,e,t)}const Mnt={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class tk extends re{constructor(t,{x:n,y:i,z:r,weight:s,fill:o,stroke:a,...l}={}){const c=gC(o)&&(o="currentColor",!0),u=gC(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:to({z:r,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},Ant({...l,fill:o,stroke:a},c,u),Mnt),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=r}filter(t){return t}render(t,n,i,r,s){const{contours:o}=i,a=Js();return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{}).call(l=>l.selectAll().data(t).enter().append("path").call(le,this).call(Ne,this,i).attr("d",c=>a(o[c]))).node()}}function Rnt(e,{x:t,y:n,...i}={}){return[t,n]=Ni(t,n),new tk(e,{...i,x:t,y:n})}const Int=new Set(["x","y","z","weight"]);function Ant(e,t,n){let{bandwidth:r,thresholds:s}=e;return r=r===void 0?20:+r,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?En(s):+s,In(e,function(o,a,l,c,u,f){var k;const h=l.weight?En(l.weight.value):null,d=(k=l.z)==null?void 0:k.value,{z:g}=this,[m,_]=cr(this,u),{width:p,height:y}=u,{x,y:w}=n0(l,c,f),v=Object.fromEntries(Object.entries(l).filter(([O])=>!Int.has(O)).map(([O,A])=>[O,{...A,value:[]}])),b=t&&[],E=n&&[],C=AX().x(x?O=>x[O]:m).y(w?O=>w[O]:_).weight(h?O=>h[O]:1).size([p,y]).bandwidth(r),I=[];for(const O of a){const A=[];I.push(A);for(const P of d?_x(O,d,g):[O]){const N=C.contours(P);A.push([P,N])}}let S=s;if(!(S instanceof Pl)){let O=0;for(const A of I)for(const[,P]of A){const N=P.max;N>O&&(O=N)}S=Float64Array.from({length:s-1},(A,P)=>O*100*(P+1)/s)}const R=[],M=[];for(const O of I){const A=[];R.push(A);for(const[P,N]of O)for(const G of S){A.push(M.length),M.push(N(G/100)),b&&b.push(G),E&&E.push(G);for(const H in v)v[H].value.push(l[H].value[P[0]])}}return b&&b.push(0),E&&E.push(0),{data:o,facets:R,channels:{...v,...b&&{fill:{value:b,scale:"color"}},...E&&{stroke:{value:E,scale:"color"}},contours:{value:M}}}})}function gC(e){return/^density$/i.test(e)}const Lnt={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ek extends re{constructor(t,n={}){const[i,r]=Te(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:i,scale:"r",filter:zr,optional:!0}},Zx(n),Lnt),this.r=r}render(t,n,i,r,s){const{geometry:o,r:a}=i,l=Js(s.projection??Ont(n)),{r:c}=this;return Hm(c)?t=[]:c!==void 0&&l.pointRadius(c),Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(le,this).attr("d",a?f=>l.pointRadius(a[f])(o[f]):f=>l(o[f])).call(Ne,this,i)}).node()}}function Ont({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),cg({point(n,i){this.stream.point(e(n),t(i))}})}function rb(e,{geometry:t=_t,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new ek(e,{geometry:t,...n})}function knt({strokeWidth:e=1.5,...t}={}){return rb({type:"Sphere"},{strokeWidth:e,...t})}function Pnt({strokeOpacity:e=.1,...t}={}){return rb(CH(),{strokeOpacity:e,...t})}const lu=.5,cu=0;function Fnt(e={fill:"count"},{binWidth:t,...n}={}){const{z:i}=n;return t=t===void 0?20:Ft(t),e=ux(e,n),Os(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!Os(e,"r")&&(n.r=t/2),In(n,(r,s,o,a,l,c)=>{let{x:u,y:f,z:h,fill:d,stroke:g,symbol:m}=o;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=n0(o,a,c)),h=h?h.value:Ot(r,i),d=d==null?void 0:d.value,g=g==null?void 0:g.value,m=m==null?void 0:m.value;const _=dx(e,{z:h,fill:d,stroke:g,symbol:m}),p=h&&[],y=d&&[],x=g&&[],w=m&&[],v=[],b=[],E=[];let C=-1;for(const M of e)M.initialize(r);for(const M of s){const k=[];for(const O of e)O.scope("facet",M);for(const[O,A]of ll(M,_))for(const P of Nnt(A,u,f,t)){k.push(++C),b.push(P.x),E.push(P.y),h&&p.push(_===h?O:h[P[0]]),d&&y.push(_===d?O:d[P[0]]),g&&x.push(_===g?O:g[P[0]]),m&&w.push(_===m?O:m[P[0]]);for(const N of e)N.reduce(P)}v.push(k)}const I=o.x.scale,S=o.y.scale,R={x:{value:b,source:a[I]?{value:se(b,a[I].invert),scale:I}:null},y:{value:E,source:a[S]?{value:se(E,a[S].invert),scale:S}:null},...h&&{z:{value:p}},...d&&{fill:{value:y,scale:"auto"}},...g&&{stroke:{value:x,scale:"auto"}},...m&&{symbol:{value:w,scale:"auto"}},...Object.fromEntries(e.map(({name:M,output:k})=>[M,{scale:"auto",label:k.label,radius:M==="r"?t/2:void 0,value:k.transform()}]))};return{data:r,facets:v,channels:R}})}function Nnt(e,t,n,i){const r=i*(1.5/TL),s=new Map;for(const o of e){let a=t[o],l=n[o];if(isNaN(a)||isNaN(l))continue;let c=Math.round(l=(l-cu)/r),u=Math.round(a=(a-lu)/i-(c&1)/2),f=l-c;if(Math.abs(f)*3>1){let g=a-u,m=u+(a<u?-1:1)/2,_=c+(l<c?-1:1),p=a-m,y=l-_;g*g+f*f>p*p+y*y&&(u=m+(c&1?1:-1)/2,c=_)}const h=`${u},${c}`;let d=s.get(h);d===void 0&&(s.set(h,d=[]),d.x=(u+(c&1)/2)*i+lu,d.y=c*r+cu),d.push(o)}return s.values()}const Dnt={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function $nt(e){return new nk(e)}class nk extends re{constructor({binWidth:t=20,clip:n=!0,...i}={}){super(au,void 0,{clip:n,...i},Dnt),this.binWidth=Ft(t)}render(t,n,i,r,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:f,height:h}=r,d=u-lu,g=f-l-lu,m=a-cu,_=h-c-cu,p=o/2,y=p*CL,x=y/2,w=p*2,v=y*1.5,b=Math.floor(d/w),E=Math.ceil(g/w),C=Math.floor((m+x)/v),I=Math.ceil((_-x)/v)+1,S=`m0,${gs(-y)}l${gs(p)},${gs(x)}v${gs(y)}l${gs(-p)},${gs(x)}`;let R=S;for(let M=C;M<I;++M)for(let k=b;k<E;++k)R+=`M${gs(k*w+(M&1)*p)},${gs(M*v)}${S}`;return Ht("svg:g",s).datum(0).call(he,this,r,s).call(ie,this,{},He+lu,He+cu).call(M=>M.append("path").call(le,this).call(Ne,this,i).attr("d",R)).node()}}function gs(e){return Math.round(e*1e3)/1e3}const znt={ariaLabel:"image",fill:null,stroke:null};function Gnt(e){return/^\.*\//.test(e)}function Wnt(e){return/^(blob|data|file|http|https):/i.test(e)}function Bnt(e){return typeof e=="string"&&(Gnt(e)||Wnt(e))?[void 0,e]:[e,void 0]}let ik=class extends re{constructor(t,n={}){let{x:i,y:r,r:s,width:o,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:h,imageRendering:d}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[g,m]=Bnt(c),[_,p]=Te(s),[y,x]=Te(o,p!==void 0?p*2:void 0),[w,v]=Te(a,p!==void 0?p*2:void 0),[b,E]=Te(l,0);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:_,scale:"r",filter:zr,optional:!0},width:{value:y,filter:zr,optional:!0},height:{value:w,filter:zr,optional:!0},rotate:{value:b,optional:!0},src:{value:g,optional:!0}},Zx(n),znt),this.src=m,this.width=x,this.rotate=E,this.height=v,this.r=p,this.preserveAspectRatio=xe(u,"xMidYMid"),this.crossOrigin=tn(f),this.frameAnchor=Of(h),this.imageRendering=xe(d,"auto")}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,width:u,height:f,r:h,rotate:d,src:g}=i,{r:m,width:_,height:p,rotate:y}=this,[x,w]=cr(this,r);return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(v=>v.selectAll().data(t).enter().append("image").call(le,this).attr("x",mC(l,u,h,x,_,m)).attr("y",mC(c,f,h,w,p,m)).attr("width",u?b=>u[b]:_!==void 0?_:h?b=>h[b]*2:m*2).attr("height",f?b=>f[b]:p!==void 0?p:h?b=>h[b]*2:m*2).attr("transform",d?b=>`rotate(${d[b]})`:y?`rotate(${y})`:null).attr("transform-origin",d||y?a0`${l?b=>l[b]:x}px ${c?b=>c[b]:w}px`:null).call(gt,"href",g?b=>g[b]:this.src).call(gt,"preserveAspectRatio",this.preserveAspectRatio).call(gt,"crossorigin",this.crossOrigin).call(gt,"image-rendering",this.imageRendering).call(gt,"clip-path",h?b=>`circle(${h[b]}px)`:m!==void 0?`circle(${m}px)`:null).call(Ne,this,i)).node()}};function mC(e,t,n,i,r,s){return t&&e?o=>e[o]-t[o]/2:t?o=>i-t[o]/2:e&&r!==void 0?o=>e[o]-r/2:r!==void 0?i-r/2:n&&e?o=>e[o]-n[o]:n?o=>i-n[o]:e?o=>e[o]-s:i-s}function Ynt(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Ni(t,n)),new ik(e,{...i,x:t,y:n})}function Unt(e,t,n){var i=1e-8,r=t-1,s=n-1,o=0,a,l,c,u,f,h,d,g,m,_,p;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),d=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(d=-d),g=(d*d-3)/6,m=2/(1/(2*t-1)+1/(2*n-1)),_=d*Math.sqrt(g+m)/m-(1/(2*n-1)-1/(2*t-1))*(g+5/6-2/(3*m)),d=t/(t+n*Math.exp(2*_))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,_=u+f,e<u/_?d=Math.pow(t*_*e,1/t):d=1-Math.pow(n*_*(1-e),1/n)),p=-fl(t)-fl(n)+fl(t+n);o<10;o++){if(d===0||d===1)return d;if(h=Vnt(d,t,n)-e,u=Math.exp(r*Math.log(d)+s*Math.log(1-d)+p),f=h/u,d-=u=f/(1-.5*Math.min(1,f*(r/d-s/(1-d)))),d<=0&&(d=.5*(d+u)),d>=1&&(d=.5*(d+u+1)),Math.abs(u)<i*d&&o>0)break}return d}function Vnt(e,t,n){var i=e===0||e===1?0:Math.exp(fl(t+n)-fl(t)-fl(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?i*pC(e,t,n)/t:1-i*pC(1-e,n,t)/n}function pC(e,t,n){var i=1e-30,r=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,h,d;for(Math.abs(c)<i&&(c=i),c=1/c,d=c;r<=100&&(u=2*r,f=r*(n-r)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<i&&(c=i),l=1+f/l,Math.abs(l)<i&&(l=i),c=1/c,d*=c*l,f=-(t+r)*(s+r)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<i&&(c=i),l=1+f/l,Math.abs(l)<i&&(l=i),c=1/c,h=c*l,d*=h,!(Math.abs(h-1)<3e-7));r++);return d}function fl(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],i=1.000000000190015,r,s,o;for(o=(s=r=e)+5.5,o-=(r+.5)*Math.log(o);t<6;t++)i+=n[t]/++s;return Math.log(2.506628274631*i/r)-o}function Xnt(e,t){var n=Unt(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const Hnt={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class rk extends re{constructor(t,n={}){const{x:i,y:r,z:s,ci:o=.95,precision:a=4}=n;if(super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:to(n),optional:!0}},n,Hnt),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,i,r,s){const{x:o,y:a,z:l}=i,{ci:c}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(u=>u.selectAll().data(l?_x(t,l,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(le,this).call(Mg,this,{...i,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,o,a)).call(c&&!Fl(this.fill)?h=>h.select(jnt).attr("stroke","none").call(le,this).call(Mg,this,{...i,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,o,a)):()=>{}))).node()}}function jnt(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(ta.svg,"path"),this)}class Znt extends rk{constructor(t,n){super(t,n)}_renderBand(t,n,i){const{ci:r,precision:s}=this,[o,a]=Be(t,u=>i[u]),l=Fg(t,i,n),c=sk(t,i,n,(1-r)/2,l);return Bw().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(ti(o,a-s/2,s).concat(a))}_renderLine(t,n,i){const[r,s]=Be(t,a=>i[a]),o=Fg(t,i,n);return`M${o(r)},${r}L${o(s)},${s}`}}class qnt extends rk{constructor(t,n){super(t,n)}_renderBand(t,n,i){const{ci:r,precision:s}=this,[o,a]=Be(t,u=>n[u]),l=Fg(t,n,i),c=sk(t,n,i,(1-r)/2,l);return Bw().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(ti(o,a-s/2,s).concat(a))}_renderLine(t,n,i){const[r,s]=Be(t,a=>n[a]),o=Fg(t,n,i);return`M${r},${o(r)}L${s},${o(s)}`}}function Knt(e,{y:t=An,x:n=_t,stroke:i,fill:r=ve(i)?"currentColor":i,...s}={}){return new Znt(e,Gx({...s,x:n,y:t,fill:r,stroke:i}))}function Jnt(e,{x:t=An,y:n=_t,stroke:i,fill:r=ve(i)?"currentColor":i,...s}={}){return new qnt(e,zx({...s,x:t,y:n,fill:r,stroke:i}))}function Fg(e,t,n){let i=0,r=0,s=0,o=0;for(const u of e){const f=t[u],h=n[u];i+=f,r+=h,s+=f*h,o+=f*f}const a=e.length,l=(a*s-i*r)/(a*o-i*i),c=(r-l*i)/a;return u=>l*u+c}function sk(e,t,n,i,r){const s=nr(e,u=>t[u])/e.length;let o=0,a=0;for(const u of e)o+=(t[u]-s)**2,a+=(n[u]-r(t[u]))**2;const l=Math.sqrt(a/(e.length-2)),c=Xnt(i,e.length-2);return(u,f)=>{const h=r(u),d=l*Math.sqrt(1/e.length+(u-s)**2/o);return h+f*c*d}}function z_({path:e=_t,delimiter:t,frameAnchor:n,treeLayout:i=dg,treeSort:r,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=sb(o),r=ak(r),a!=null&&(a=W_(a)),n===void 0&&(n=o.frameAnchor);const c=lk(t),u=mk(l,W_),[f,h]=Dn(),[d,g]=Dn();return{x:f,y:d,frameAnchor:n,...lr(l,(m,_)=>{const p=c(Ot(m,e)),y=h([]),x=g([]);let w=-1;const v=[],b=[],E=VA().path(I=>p[I]),C=i();C.nodeSize&&C.nodeSize([1,1]),C.separation&&s!==void 0&&C.separation(s??qw);for(const I of u)I[Ng]=I[dk]([]);for(const I of _){const S=[],R=E(I.filter(M=>p[M]!=null)).each(M=>M.data=m[M.data]);r!=null&&R.sort(r),C(R);for(const M of R.descendants())if(!(a!=null&&!a(M))){S.push(++w),v[w]=M.data,o.position(M,w,y,x);for(const k of u)k[Ng][w]=k[gk](M)}b.push(S)}return{data:v,facets:b}}),...Object.fromEntries(u)}}function ok({path:e=_t,delimiter:t,curve:n="bump-x",stroke:i="#555",strokeWidth:r=1.5,strokeOpacity:s=.5,treeLayout:o=dg,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...f}={}){c=sb(c),a=ak(a),u!=null&&(u=_C(u)),f={curve:n,stroke:i,strokeWidth:r,strokeOpacity:s,...f};const h=lk(t),d=mk(f,_C),[g,m]=Dn(),[_,p]=Dn(),[y,x]=Dn(),[w,v]=Dn();return{x1:g,x2:_,y1:y,y2:w,...lr(f,(b,E)=>{const C=h(Ot(b,e)),I=m([]),S=p([]),R=x([]),M=v([]);let k=-1;const O=[],A=[],P=VA().path(G=>C[G]),N=o();N.nodeSize&&N.nodeSize([1,1]),N.separation&&l!==void 0&&N.separation(l??qw);for(const G of d)G[Ng]=G[dk]([]);for(const G of E){const H=[],U=P(G.filter(Z=>C[Z]!=null)).each(Z=>Z.data=b[Z.data]);a!=null&&U.sort(a),N(U);for(const{source:Z,target:z}of U.links())if(!(u!=null&&!u(z,Z))){H.push(++k),O[k]=z.data,c.position(Z,k,I,R),c.position(z,k,S,M);for(const Q of d)Q[Ng][k]=Q[gk](z,Z)}A.push(H)}return{data:O,facets:A}}),...Object.fromEntries(d)}}function sb(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return Qnt;case"right":return tit}throw new Error(`invalid tree anchor: ${e}`)}const Qnt={frameAnchor:"left",dx:6,position({x:e,y:t},n,i,r){i[n]=t,r[n]=-e}},tit={frameAnchor:"right",dx:-6,position({x:e,y:t},n,i,r){i[n]=-t,r[n]=-e}};function ak(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?yC(W_(e)):yC(eit(e))}function yC(e){return(t,n)=>ai(e(t),e(n))}function eit(e){return t=>{var n;return(n=t.data)==null?void 0:n[e]}}function lk(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(i=>nit(i,t))}const G_=92,ck=47;function nit(e,t){if(t===G_)throw new Error("delimiter cannot be backslash");let n=!1;for(let i=0,r=e.length;i<r;++i){switch(e.charCodeAt(i)){case G_:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,i-1)+e.slice(i),--i,--r):e=e.slice(0,i)+"/"+e.slice(i+1);break;case ck:n?(e=e.slice(0,i)+"\\\\"+e.slice(i),i+=2,r+=2):(e=e.slice(0,i)+"\\"+e.slice(i),++i,++r);break}n=!1}return e}function iit(e){let t=!1;for(let n=0,i=e.length;n<i;++n){switch(e.charCodeAt(n)){case G_:if(!t){t=!0;continue}case ck:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--i);break}t=!1}return e}function uk(e){return li(e)&&typeof e.node=="function"}function rit(e){return li(e)&&typeof e.link=="function"}function W_(e){if(uk(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return Y_;case"node:path":return B_;case"node:internal":return fk;case"node:external":return hk;case"node:depth":return U_;case"node:height":return V_}throw new Error(`invalid node value: ${e}`)}}function _C(e){if(uk(e))return e.node;if(rit(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return Bh(Y_);case"parent:path":return Bh(B_);case"parent:depth":return Bh(U_);case"parent:height":return Bh(V_);case"node:name":return Y_;case"node:path":return B_;case"node:internal":return fk;case"node:external":return hk;case"node:depth":return U_;case"node:height":return V_}throw new Error(`invalid link value: ${e}`)}}function B_(e){return e.id}function Y_(e){return sit(e.id)}function U_(e){return e.depth}function V_(e){return e.height}function fk(e){return!!e.children}function hk(e){return!e.children}function Bh(e){return(t,n)=>n==null?void 0:e(n)}function sit(e){let t=e.length;for(;--t>0&&!oit(e,t););return iit(e.slice(t+1))}function oit(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}const dk=2,gk=3,Ng=4;function mk(e,t){const n=[];for(const i in e){const r=e[i],s=t(r);s!==void 0&&n.push([i,...Dn(r),s])}return n}function pk(e,{fill:t,stroke:n,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:h=u,dot:d=ve(f)&&ve(h),text:g="node:name",textStroke:m="white",title:_="node:path",dx:p,dy:y,textAnchor:x,treeLayout:w=dg,textLayout:v=w===dg||w===BA?"mirrored":"normal",tip:b,...E}={}){if(p===void 0&&(p=sb(E.treeAnchor).dx),x!==void 0)throw new Error("textAnchor is not a configurable tree option");v=Yn(v,"textLayout",["mirrored","normal"]);function C(I){return Dl(e,z_({treeLayout:w,text:g,fill:t===void 0?"currentColor":t,stroke:m,dx:p,dy:y,title:_,...I,...E}))}return ki(S5(e,ok({treeLayout:w,markerStart:f,markerEnd:h,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...E})),d?ns(e,z_({treeLayout:w,fill:t===void 0?"node:internal":t,title:_,tip:b,...E})):null,g!=null?v==="mirrored"?[C({textAnchor:"start",treeFilter:"node:external"}),C({textAnchor:"end",treeFilter:"node:internal",dx:-p})]:C():null)}function ait(e,t){return pk(e,{...t,treeLayout:BA})}function lit({geometry:e=_t,...t}={}){return In({...t,x:null,y:null},(n,i,r,s,o,{projection:a})=>{const l=Ot(n,e),c=l.length,u=new Float64Array(c),f=new Float64Array(c),h=Js(a);for(let d=0;d<c;++d)[u[d],f[d]]=h.centroid(l[d]);return{data:n,facets:i,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function cit({geometry:e=_t,...t}={}){let n;return{...t,x:{transform:i=>Float64Array.from(n=Ot(Ot(i,e),dH),([r])=>r)},y:{transform:()=>Float64Array.from(n,([,i])=>i)}}}function uit(e,t,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>=0?(s=o,r=o-1):i=o+1}return s}function fit(e,t,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>0?(s=o,r=o-1):i=o+1}return s}function hit(e,t,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<0?(s=o,i=o+1):r=o-1}return s}function dit(e,t,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<=0?(s=o,i=o+1):r=o-1}return s}function git(e,t,n,i,r){for(;i<=r;){var s=i+r>>>1,o=e[s],a=n!==void 0?n(o,t):o-t;if(a===0)return s;a<=0?i=s+1:r=s-1}return-1}function Oc(e,t,n,i,r,s){return typeof n=="function"?s(e,t,n,i===void 0?0:i|0,r===void 0?e.length-1:r|0):s(e,t,void 0,n===void 0?0:n|0,i===void 0?e.length-1:i|0)}var mit={ge:function(e,t,n,i,r){return Oc(e,t,n,i,r,uit)},gt:function(e,t,n,i,r){return Oc(e,t,n,i,r,fit)},lt:function(e,t,n,i,r){return Oc(e,t,n,i,r,hit)},le:function(e,t,n,i,r){return Oc(e,t,n,i,r,dit)},eq:function(e,t,n,i,r){return Oc(e,t,n,i,r,git)}},Dg=mit,qa=0,yo=1,ed=2,pit=_it;function ob(e,t,n,i,r){this.mid=e,this.left=t,this.right=n,this.leftPoints=i,this.rightPoints=r,this.count=(t?t.count:0)+(n?n.count:0)+i.length}var Yf=ob.prototype;function Up(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function yk(e,t){var n=Wl(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function wC(e,t){var n=e.intervals([]);n.push(t),yk(e,n)}function xC(e,t){var n=e.intervals([]),i=n.indexOf(t);return i<0?qa:(n.splice(i,1),yk(e,n),yo)}Yf.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};Yf.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?wC(this,e):this.left.insert(e):this.left=Wl([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?wC(this,e):this.right.insert(e):this.right=Wl([e]);else{var n=Dg.ge(this.leftPoints,e,ab),i=Dg.ge(this.rightPoints,e,lb);this.leftPoints.splice(n,0,e),this.rightPoints.splice(i,0,e)}};Yf.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return qa;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return xC(this,e);var i=this.left.remove(e);return i===ed?(this.left=null,this.count-=1,yo):(i===yo&&(this.count-=1),i)}else if(e[0]>this.mid){if(!this.right)return qa;var r=this.left?this.left.count:0;if(4*r>3*(t-1))return xC(this,e);var i=this.right.remove(e);return i===ed?(this.right=null,this.count-=1,yo):(i===yo&&(this.count-=1),i)}else{if(this.count===1)return this.leftPoints[0]===e?ed:qa;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,i=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=i}Up(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?Up(this,this.left):Up(this,this.right);return yo}for(var a=Dg.ge(this.leftPoints,e,ab);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var i=Dg.ge(this.rightPoints,e,lb);i<this.rightPoints.length&&this.rightPoints[i][1]===e[1];++i)if(this.rightPoints[i]===e)return this.rightPoints.splice(i,1),yo}return qa}};function _k(e,t,n){for(var i=0;i<e.length&&e[i][0]<=t;++i){var r=n(e[i]);if(r)return r}}function wk(e,t,n){for(var i=e.length-1;i>=0&&e[i][1]>=t;--i){var r=n(e[i]);if(r)return r}}function xk(e,t){for(var n=0;n<e.length;++n){var i=t(e[n]);if(i)return i}}Yf.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return _k(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return wk(this.rightPoints,e,t)}else return xk(this.leftPoints,t)};Yf.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var i=this.left.queryInterval(e,t,n);if(i)return i}if(t>this.mid&&this.right){var i=this.right.queryInterval(e,t,n);if(i)return i}return t<this.mid?_k(this.leftPoints,t,n):e>this.mid?wk(this.rightPoints,e,n):xk(this.leftPoints,n)};function yit(e,t){return e-t}function ab(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function lb(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function Wl(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(yit);for(var i=t[t.length>>1],r=[],s=[],o=[],n=0;n<e.length;++n){var a=e[n];a[1]<i?r.push(a):i<a[0]?s.push(a):o.push(a)}var l=o,c=o.slice();return l.sort(ab),c.sort(lb),new ob(i,Wl(r),Wl(s),l,c)}function X_(e){this.root=e}var cc=X_.prototype;cc.insert=function(e){this.root?this.root.insert(e):this.root=new ob(e[0],null,null,[e],[e])};cc.remove=function(e){if(this.root){var t=this.root.remove(e);return t===ed&&(this.root=null),t!==qa}return!1};cc.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};cc.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(cc,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(cc,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function _it(e){return!e||e.length===0?new X_(null):new X_(Wl(e))}const wit=n7(pit),xit=({marginLeft:e})=>[1,e],bit=({width:e,marginRight:t})=>[-1,e-t],vit=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],Eit=({marginTop:e})=>[1,e],Tit=({height:e,marginBottom:t})=>[-1,e-t],Cit=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function bk(e){return typeof e=="string"?{anchor:e}:e}function Sit(e={},t={}){arguments.length===1&&([e,t]=vk(e));let{anchor:n="left",padding:i=1,r=t.r}=bk(e);switch(`${n}`.toLowerCase()){case"left":n=xit;break;case"right":n=bit;break;case"middle":n=vit;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return Ek("x","y",n,Ft(i),r,t)}function Mit(e={},t={}){arguments.length===1&&([e,t]=vk(e));let{anchor:n="bottom",padding:i=1,r=t.r}=bk(e);switch(`${n}`.toLowerCase()){case"top":n=Eit;break;case"bottom":n=Tit;break;case"middle":n=Cit;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return Ek("y","x",n,Ft(i),r,t)}function vk(e){const{anchor:t,padding:n,...i}=e,{r}=i;return[{anchor:t,padding:n,r},i]}function Ek(e,t,n,i,r,s){if(r!=null&&typeof r!="number"){let{channels:o,sort:a,reverse:l}=s;o=ex(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:r,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return In(s,function(o,a,l,c,u,f){let{[t]:h,r:d}=l;if(!l[t])throw new Error(`missing channel: ${t}`);({[t]:h}=n0(l,c,f));const g=d?void 0:r!==void 0?Ft(r):this.r!==void 0?this.r:3;d&&(d=Ot(d.value,c[d.scale]||_t,Float64Array));let[m,_]=n(u);const p=m?Iit:Rit,y=new Float64Array(h.length),x=d?w=>d[w]:()=>g;for(let w of a){const v=wit();w=w.filter(d?E=>Eg(h[E])&&zr(d[E]):E=>Eg(h[E]));const b=new Float64Array(2*w.length+2);for(const E of w){const C=x(E),I=m?C+i:0,S=h[E]-C,R=h[E]+C;let M=2;v.queryInterval(S-i,R+i,([,,O])=>{const A=y[O]-I,P=h[E]-h[O],N=i+(d?d[E]+d[O]:2*g),G=Math.sqrt(N*N-P*P);b[M++]=A-G,b[M++]=A+G});let k=b.slice(0,M);m&&(k=k.filter(O=>O>=0));t:for(const O of k.sort(p)){for(let A=0;A<M;A+=2)if(b[A]+1e-6<O&&O<b[A+1]-1e-6)continue t;y[E]=O+I;break}v.insert([S,R,E])}}m||(m=1);for(const w of a)for(const v of w)y[v]=y[v]*m+_;return{data:o,facets:a,channels:{[e]:{value:y,source:null},[t]:{value:h,source:l[t]},...d&&{r:{value:d,source:l.r}}}}})}function Rit(e,t){return Math.abs(e)-Math.abs(t)}function Iit(e,t){return e-t}function Ait(e,t){return arguments.length===1&&({basis:e,...t}=e),Jx(cb(e),t)}function Lit(e,t){return arguments.length===1&&({basis:e,...t}=e),Qx(cb(e),t)}function cb(e){if(e===void 0)return bC;if(typeof e=="function")return y0(Qw(e));if(/^p\d{2}$/i.test(e))return uc(Kw(e));switch(`${e}`.toLowerCase()){case"deviation":return Pit;case"first":return bC;case"last":return kit;case"max":return Fit;case"mean":return Nit;case"median":return Dit;case"min":return $it;case"sum":return zit;case"extent":return Oit}throw new Error(`invalid basis: ${e}`)}function y0(e){return{mapIndex(t,n,i){const r=+e(t,n);for(const s of t)i[s]=n[s]===null?NaN:n[s]/r}}}function uc(e){return y0((t,n)=>e(t,i=>n[i]))}const Oit={mapIndex(e,t,n){const[i,r]=Be(e,o=>t[o]),s=r-i;for(const o of e)n[o]=t[o]===null?NaN:(t[o]-i)/s}},bC=y0((e,t)=>{for(let n=0;n<e.length;++n){const i=t[e[n]];if(dn(i))return i}}),kit=y0((e,t)=>{for(let n=e.length-1;n>=0;--n){const i=t[e[n]];if(dn(i))return i}}),Pit={mapIndex(e,t,n){const i=Cm(e,s=>t[s]),r=ff(e,s=>t[s]);for(const s of e)n[s]=t[s]===null?NaN:r?(t[s]-i)/r:0}},Fit=uc(Ue),Nit=uc(Cm),Dit=uc(Au),$it=uc(Cn),zit=uc(nr);function Git(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return Tk(t);case"last":return Ck(t)}if(typeof e=="function")return Hs(null,e,t);let n,i;for(n in e){if(i!==void 0)throw new Error("ambiguous selector; multiple inputs");i=Wit(e[n])}if(i===void 0)throw new Error(`invalid selector: ${e}`);return Hs(n,i,t)}function Wit(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return ub;case"max":return fb}throw new Error(`unknown selector: ${e}`)}function Tk(e){return Hs(null,Xit,e)}function Ck(e){return Hs(null,Hit,e)}function Bit(e){return Hs("x",ub,e)}function Yit(e){return Hs("y",ub,e)}function Uit(e){return Hs("x",fb,e)}function Vit(e){return Hs("y",fb,e)}function*Xit(e){yield e[0]}function*Hit(e){yield e[e.length-1]}function*ub(e,t){yield AB(e,n=>t[n])}function*fb(e,t){yield yw(e,n=>t[n])}function Hs(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const i=to(n);return lr(n,(r,s)=>{const o=Ot(r,i),a=Ot(r,e),l=[];for(const c of s){const u=[];for(const f of o?Kr(c,h=>o[h]).values():[c])for(const h of t(f,a))u.push(h);l.push(u)}return{data:r,facets:l}})}const Vp=Object.freeze(Object.defineProperty({__proto__:null,Area:h0,Arrow:M5,BarX:I5,BarY:A5,Cell:d0,Contour:K5,Density:tk,Dot:g0,Frame:l5,Geo:ek,Hexgrid:nk,Image:ik,Line:m0,Link:C5,Mark:re,Raster:U5,Rect:p0,RuleX:xO,RuleY:bO,Text:l0,TickX:N5,TickY:D5,Tip:c5,Vector:c0,area:net,areaX:Vu,areaY:la,arrow:cet,auto:bet,autoSpec:L5,axisFx:UO,axisFy:YO,axisX:Ox,axisY:Lx,barX:Po,barY:Fo,bin:vo,binX:Ss,binY:Ms,bollinger:Zo,bollingerX:Wet,bollingerY:Bet,boxX:Uet,boxY:Vet,cell:Za,cellX:fet,cellY:het,centroid:lit,circle:pet,cluster:ait,column:Dn,contour:snt,crosshair:ant,crosshairX:lnt,crosshairY:cnt,delaunayLink:vnt,delaunayMesh:Ent,density:Rnt,dodgeX:Sit,dodgeY:Mit,dot:ns,dotX:get,dotY:met,filter:MK,formatIsoDate:kL,formatMonth:HK,formatWeekday:jK,frame:Fx,geo:rb,geoCentroid:cit,graticule:Pnt,gridFx:qO,gridFy:jO,gridX:ZO,gridY:HO,group:cx,groupX:Wu,groupY:Bu,groupZ:lx,hexagon:yet,hexbin:Fnt,hexgrid:$nt,hull:Tnt,identity:_t,image:Ynt,indexOf:An,initializer:In,interpolateNearest:Z5,interpolateNone:$_,interpolatorBarycentric:j5,interpolatorRandomWalk:q5,legend:ZQ,line:qx,lineX:Xu,lineY:Gl,linearRegressionX:Knt,linearRegressionY:Jnt,link:S5,map:sr,mapX:Jx,mapY:Qx,marks:ki,normalize:cb,normalizeX:Ait,normalizeY:Lit,plot:u5,pointer:Mx,pointerX:cl,pointerY:Rx,raster:Het,rect:Kx,rectX:kg,rectY:Pg,reverse:RK,ruleX:Hr,ruleY:Xs,scale:JJ,select:Git,selectFirst:Tk,selectLast:Ck,selectMaxX:Uit,selectMaxY:Vit,selectMinX:Bit,selectMinY:Yit,shuffle:IK,sort:SL,sphere:knt,spike:NQ,stackX:w5,stackX1:Gtt,stackX2:Wtt,stackY:x5,stackY1:Btt,stackY2:Ytt,text:Dl,textX:CO,textY:SO,tickX:$5,tickY:z5,tip:Nx,transform:lr,tree:pk,treeLink:ok,treeNode:z_,valueof:Ot,vector:NO,vectorX:DO,vectorY:$O,voronoi:Cnt,voronoiMesh:Snt,window:Wf,windowX:Iet,windowY:Aet},Symbol.toStringTag,{value:"Module"}));class jit{constructor(){this.documentElement=new Xp(this,"html")}createElementNS(t,n){return new Xp(this,n)}createElement(t){return new Xp(this,t)}createTextNode(t){return new Zit(this,t)}querySelector(){return null}querySelectorAll(){return[]}}const zg=class zg{setProperty(){}removeProperty(){}};Ct(zg,"empty",new zg);let H_=zg,Xp=class{constructor(t,n){this.ownerDocument=t,this.tagName=n,this.attributes={},this.children=[],this.parentNode=null}setAttribute(t,n){this.attributes[t]=String(n)}setAttributeNS(t,n,i){this.setAttribute(n,i)}getAttribute(t){return this.attributes[t]}getAttributeNS(t){return this.getAttribute(t)}hasAttribute(t){return t in this.attributes}hasAttributeNS(t){return this.hasAttribute(t)}removeAttribute(t){delete this.attributes[t]}removeAttributeNS(t,n){this.removeAttribute(n)}addEventListener(){}removeEventListener(){}dispatchEvent(){}append(...t){for(const n of t)this.appendChild(n!=null&&n.ownerDocument?n:this.ownerDocument.createTextNode(n))}appendChild(t){return this.children.push(t),t.parentNode=this,t}insertBefore(t,n){if(n==null)this.children.push(t);else{const i=this.children.indexOf(n);if(i<0)throw new Error("insertBefore reference node not found");this.children.splice(i,0,t)}return t.parentNode=this,t}querySelector(){return null}querySelectorAll(){return[]}set textContent(t){this.children=[this.ownerDocument.createTextNode(t)]}set style(t){this.attributes.style=t}get style(){return H_.empty}toHyperScript(){return Mr(this.tagName,this.attributes,this.children.map(t=>t.toHyperScript()))}};class Zit{constructor(t,n){this.ownerDocument=t,this.nodeValue=String(n)}toHyperScript(){return this.nodeValue}}function Sk(e){if(e.nodeType===3)return e.nodeValue;const t={};for(const i of e.getAttributeNames())t[i]=e.getAttribute(i);const n=[];for(let i=e.firstChild;i;i=i.nextSibling)n.push(Sk(i));return Mr(e.tagName,t,n)}const qit={props:{options:Object,mark:Object,defer:Boolean,method:{type:String,default:"plot"}},render(){const{method:e}=this,t={...e==="plot"&&{marks:this.mark==null?[]:[this.mark],width:688},...this.options,className:"plot"};if(this.defer){const n=o=>{r();function a(){i(o),o.append(Vp[e](t))}const l=o.getBoundingClientRect();l.bottom>0&&l.top<window.innerHeight?a():(this._observer=new IntersectionObserver(([c])=>{c.isIntersecting&&a()},{rootMargin:"100px"}),this._observer.observe(o),typeof requestIdleCallback=="function"&&(this._idling=requestIdleCallback(a)))},i=o=>{for(;o.lastChild;)o.lastChild.remove();r()},r=()=>{this._observer!==void 0&&(this._observer.disconnect(),this._observer=void 0),this._idling!==void 0&&(cancelIdleCallback(this._idling),this._idling=void 0)},{height:s=400}=this.options;return Zc(Mr("span",e==="plot"?[Mr("div",{style:{maxWidth:"100%",width:"688px",aspectRatio:`688 / ${s}`}})]:[]),[[{mounted:n,updated:n,unmounted:i}]])}if(typeof document<"u"){const n=Vp[e](t),i=r=>{for(;r.lastChild;)r.lastChild.remove();r.append(n)};return Zc(Mr("span",[Sk(n)]),[[{mounted:i,updated:i}]])}return Mr("span",[Vp[e]({...t,document:new jit}).toHyperScript()])}},Kit={components:{PlotFigure:qit},props:{activityFile:sR},data(){return{x:e=>new Date(e.timestamp),y:e=>e.altitude}},watch:{activityFile:{handler(){}}},computed:{marks:function(){var t;const e=((t=this.activityFile)==null?void 0:t.records)||[];return[la(e,{x:this.x,y:this.y,z:null,fill:"#2A303F"}),Gl(e,sr({stroke:Wf({k:5,reduce:"difference"})},{x:this.x,y:this.y,z:null,stroke:this.y,strokeWidth:5,strokeOpacity:.7})),Hr(e,cl({x:this.x,py:this.y,stroke:"lawngreen"})),ns(e,cl({x:this.x,y:this.y,r:10,stroke:"lawngreen"})),Nx(e,cl({x:this.x,y:this.y,fill:"#2A303F",fontSize:16,fontWeight:"bolder",channels:{altitude:{label:"Altitude",value:"altitude"},speed:{label:"Speed",value:"speed"}},format:{y:!1,x:!1}}))]},options:function(){return{x:{grid:!0,label:"time"},y:{grid:!0,label:"Altitude (m)"},color:{interpolate:pf(Ys.gamma(2.2),["lawngreen","lawngreen","yellow","yellow","yellow","yellow","yellow","red","red"]),domain:[-.5,.5]}}}},methods:{getOptions(){}},mounted(){}};function Jit(e,t,n,i,r,s){const o=tP("PlotFigure");return Ut(),h1(o,{options:s.options,mark:s.marks,ref:"plot"},null,8,["options","mark"])}const Qit=bm(Kit,[["render",Jit]]);class trt{constructor(){Ct(this,"sport",null);Ct(this,"subSport",null);Ct(this,"totalMovingTime",null);Ct(this,"totalElapsedTime",null);Ct(this,"totalTimerTime",null);Ct(this,"totalDistance",null);Ct(this,"totalAscent",null);Ct(this,"totalDescent",null);Ct(this,"totalCycles",null);Ct(this,"totalCalories",null);Ct(this,"avgSpeed",null);Ct(this,"maxSpeed",null);Ct(this,"avgHeartRate",null);Ct(this,"maxHeartRate",null);Ct(this,"avgCadence",null);Ct(this,"maxCadence",null);Ct(this,"avgPower",null);Ct(this,"maxPower",null);Ct(this,"avgTemperature",null);Ct(this,"maxTemperature",null);Ct(this,"avgAltitude",null);Ct(this,"maxAltitude",null)}}function ho(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(n+=r,t++)}return t==0?null:n/t}function go(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(r>t&&(t=r),n++)}return n==0?null:t}function xr(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(t+=r,n++)}return n==0?null:t}const ert={props:{activityFiles:Array,timezoneOffsetHours:Number,isWebAssemblySupported:Boolean},computed:{summary(){const e=new trt;for(let t=0;t<this.activityFiles.length;t++)for(let n=0;n<this.activityFiles[t].sessions.length;n++){const i=this.activityFiles[t].sessions[n];e.sport=i.sport,e.subSport=i.subSport,e.totalMovingTime=xr(e.totalMovingTime,i.totalMovingTime),e.totalElapsedTime=xr(e.totalElapsedTime,i.totalElapsedTime),e.totalTimerTime=xr(e.totalTimerTime,i.totalTimerTime),e.totalDistance=xr(e.totalDistance,i.totalDistance),e.totalAscent=xr(e.totalAscent,i.totalAscent),e.totalDescent=xr(e.totalDescent,i.totalDescent),e.totalCycles=xr(e.totalCycles,i.totalCycles),e.totalCalories=xr(e.totalCalories,i.totalCalories),e.avgSpeed=ho(e.avgSpeed,i.avgSpeed),e.maxSpeed=go(e.maxSpeed,i.maxSpeed),e.avgHeartRate=ho(e.avgHeartRate,i.avgHeartRate),e.maxHeartRate=go(e.maxHeartRate,i.maxHeartRate),e.avgCadence=ho(e.avgCadence,i.avgCadence),e.maxCadence=go(e.maxCadence,i.maxCadence),e.avgPower=ho(e.avgPower,i.avgPower),e.maxPower=go(e.maxPower,i.maxPower),e.avgTemperature=ho(e.avgTemperature,i.avgTemperature),e.maxTemperature=go(e.maxTemperature,i.maxTemperature),e.avgAltitude=ho(e.avgAltitude,i.avgAltitude),e.maxAltitude=go(e.maxAltitude,i.maxAltitude)}return e}},methods:{toTimezoneDateString:sI,GMTString:DW,secondsToDHMS:$W,avg:ho,max:go,sum:xr}};const nrt={style:{"text-align":"center"}},irt=["disabled"],rrt={key:0,class:"time-created"},srt={key:1,class:"manufacturer"},ort={class:"analysis"},art={class:"summary"},lrt={key:0,class:"section-title"},crt={class:"summary-grid"},urt={key:0,class:"summary-item"},frt=j("div",{class:"summary-title"},"Sport",-1),hrt={class:"summary-value"},drt={key:1,class:"summary-item"},grt=j("div",{class:"summary-title"},"Sub Sport",-1),mrt={class:"summary-value"},prt={class:"summary-grid"},yrt={key:0,class:"summary-item"},_rt=j("div",{class:"summary-title"},"Total Moving Time",-1),wrt={class:"summary-value"},xrt=j("i",{class:"fa-solid fa-hourglass-half"},null,-1),brt={key:1,class:"summary-item"},vrt=j("div",{class:"summary-title"},"Total Elapsed Time",-1),Ert={class:"summary-value"},Trt=j("i",{class:"fa-solid fa-hourglass-end"},null,-1),Crt={class:"summary-grid"},Srt={key:0,class:"summary-item"},Mrt=j("div",{class:"summary-title"},"Total Distance",-1),Rrt={class:"summary-value"},Irt=j("i",{class:"fa-solid fa-road"},null,-1),Art={key:1,class:"summary-item"},Lrt=j("div",{class:"summary-title"},"Total Calories",-1),Ort={class:"summary-value"},krt=j("i",{class:"fa-solid fa-droplet"},null,-1),Prt={class:"summary-grid"},Frt={key:0,class:"summary-item"},Nrt=j("div",{class:"summary-title"},"Avg Speed",-1),Drt={class:"summary-value"},$rt=j("i",{class:"fa-solid fa-gauge"},null,-1),zrt={key:1,class:"summary-item"},Grt=j("div",{class:"summary-title"},"Max Speed",-1),Wrt={class:"summary-value"},Brt=j("i",{class:"fa-solid fa-gauge-high"},null,-1),Yrt={class:"summary-grid"},Urt={key:0,class:"summary-item"},Vrt=j("div",{class:"summary-title"},"Avg Heart Rate",-1),Xrt={class:"summary-value"},Hrt=j("i",{class:"fa-solid fa-heart-pulse"},null,-1),jrt={key:1,class:"summary-item"},Zrt=j("div",{class:"summary-title"},"Max Heart Rate",-1),qrt={class:"summary-value"},Krt=j("i",{class:"fa-solid fa-heart-pulse"},null,-1),Jrt={class:"summary-grid"},Qrt={key:0,class:"summary-item"},tst=j("div",{class:"summary-title"},"Avg Cadence",-1),est={class:"summary-value"},nst=j("i",{class:"fa-solid fa-rotate"},null,-1),ist={key:1,class:"summary-item"},rst=j("div",{class:"summary-title"},"Max Cadence",-1),sst={class:"summary-value"},ost=j("i",{class:"fa-solid fa-rotate"},null,-1),ast={class:"summary-grid"},lst={key:0,class:"summary-item"},cst=j("div",{class:"summary-title"},"Avg Power",-1),ust={class:"summary-value"},fst=j("i",{class:"fa-solid fa-bolt-lightning"},null,-1),hst={key:1,class:"summary-item"},dst=j("div",{class:"summary-title"},"Max Power",-1),gst={class:"summary-value"},mst=j("i",{class:"fa-solid fa-bolt-lightning"},null,-1),pst={class:"summary-grid"},yst={key:0,class:"summary-item"},_st=j("div",{class:"summary-title"},"Avg Temperature",-1),wst={class:"summary-value"},xst=j("i",{class:"fa-solid fa-temperature-low"},null,-1),bst={key:1,class:"summary-item"},vst=j("div",{class:"summary-title"},"Max Temperature",-1),Est={class:"summary-value"},Tst=j("i",{class:"fa-solid fa-temperature-high"},null,-1),Cst={class:"summary-grid"},Sst={key:0,class:"summary-item"},Mst=j("div",{class:"summary-title"},"Total Ascent",-1),Rst={class:"summary-value"},Ist=j("i",{class:"fa-solid fa-arrow-trend-up"},null,-1),Ast={key:1,class:"summary-item"},Lst=j("div",{class:"summary-title"},"Total Descent",-1),Ost={class:"summary-value"},kst=j("i",{class:"fa-solid fa-arrow-trend-down"},null,-1),Pst={class:"summary-grid"},Fst={key:0,class:"summary-item"},Nst=j("div",{class:"summary-title"},"Avg Altitude",-1),Dst={class:"summary-value"},$st=j("i",{class:"fa-solid fa-mountain"},null,-1),zst={key:1,class:"summary-item"},Gst=j("div",{class:"summary-title"},"Max Altitude",-1),Wst={class:"summary-value"},Bst=j("i",{class:"fa-solid fa-mountain"},null,-1);function Yst(e,t,n,i,r,s){var o,a,l,c,u,f,h;return Ut(),Jt(Kn,null,[j("div",nrt,[j("input",{class:"input",type:"file",id:"fileInput",accept:".fit",multiple:"",disabled:!n.isWebAssemblySupported},null,8,irt)]),n.activityFiles&&n.activityFiles.length!=0?(Ut(),Jt("div",rrt," Created on: "+zt(s.toTimezoneDateString((a=(o=n.activityFiles[0])==null?void 0:o.fileId)==null?void 0:a.timeCreated,n.timezoneOffsetHours))+" "+zt(s.GMTString(n.timezoneOffsetHours)),1)):de("",!0),n.activityFiles&&n.activityFiles.length!=0?(Ut(),Jt("div",srt," Device: "+zt((c=(l=n.activityFiles[0])==null?void 0:l.fileId)==null?void 0:c.manufacturer)+" ("+zt((f=(u=n.activityFiles[0])==null?void 0:u.fileId)==null?void 0:f.product)+") ",1)):de("",!0),j("div",ort,[j("div",art,[((h=n.activityFiles)==null?void 0:h.length)!=0?(Ut(),Jt("h4",lrt,"Summary")):de("",!0),j("div",null,[j("div",crt,[s.summary.sport?(Ut(),Jt("div",urt,[frt,j("div",hrt,zt(s.summary.sport),1)])):de("",!0),s.summary.subSport?(Ut(),Jt("div",drt,[grt,j("div",mrt,zt(s.summary.subSport),1)])):de("",!0)]),j("div",prt,[s.summary.totalMovingTime?(Ut(),Jt("div",yrt,[_rt,j("div",wrt,[xrt,Ae(" "+zt(s.secondsToDHMS(s.summary.totalMovingTime)),1)])])):de("",!0),s.summary.totalElapsedTime?(Ut(),Jt("div",brt,[vrt,j("div",Ert,[Trt,Ae(" "+zt(s.secondsToDHMS(s.summary.totalElapsedTime)),1)])])):de("",!0)]),j("div",Crt,[s.summary.totalDistance?(Ut(),Jt("div",Srt,[Mrt,j("div",Rrt,[Irt,Ae(" "+zt((s.summary.totalDistance/1e3).toFixed(2))+" km ",1)])])):de("",!0),s.summary.totalCalories?(Ut(),Jt("div",Art,[Lrt,j("div",Ort,[krt,Ae(" "+zt(s.summary.totalCalories.toLocaleString())+" Cal ",1)])])):de("",!0)]),j("div",Prt,[s.summary.avgSpeed?(Ut(),Jt("div",Frt,[Nrt,j("div",Drt,[$rt,Ae(" "+zt((s.summary.avgSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):de("",!0),s.summary.maxSpeed?(Ut(),Jt("div",zrt,[Grt,j("div",Wrt,[Brt,Ae(" "+zt((s.summary.maxSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):de("",!0)]),j("div",Yrt,[s.summary.avgHeartRate?(Ut(),Jt("div",Urt,[Vrt,j("div",Xrt,[Hrt,Ae(" "+zt(Math.round(s.summary.avgHeartRate))+" bpm ",1)])])):de("",!0),s.summary.maxHeartRate?(Ut(),Jt("div",jrt,[Zrt,j("div",qrt,[Krt,Ae(" "+zt(s.summary.maxHeartRate)+" bpm ",1)])])):de("",!0)]),j("div",Jrt,[s.summary.avgCadence?(Ut(),Jt("div",Qrt,[tst,j("div",est,[nst,Ae(" "+zt(Math.round(s.summary.avgCadence))+" rpm ",1)])])):de("",!0),s.summary.maxCadence?(Ut(),Jt("div",ist,[rst,j("div",sst,[ost,Ae(" "+zt(s.summary.maxCadence)+" rpm ",1)])])):de("",!0)]),j("div",ast,[s.summary.avgPower?(Ut(),Jt("div",lst,[cst,j("div",ust,[fst,Ae(" "+zt(Math.round(s.summary.avgPower)),1)])])):de("",!0),s.summary.maxPower?(Ut(),Jt("div",hst,[dst,j("div",gst,[mst,Ae(" "+zt(s.summary.maxPower),1)])])):de("",!0)]),j("div",pst,[s.summary.avgTemperature?(Ut(),Jt("div",yst,[_st,j("div",wst,[xst,Ae(" "+zt(Math.round(s.summary.avgTemperature))+" °C ",1)])])):de("",!0),s.summary.maxTemperature?(Ut(),Jt("div",bst,[vst,j("div",Est,[Tst,Ae(" "+zt(s.summary.maxTemperature)+" °C ",1)])])):de("",!0)]),j("div",Cst,[s.summary.totalAscent?(Ut(),Jt("div",Sst,[Mst,j("div",Rst,[Ist,Ae(" "+zt(s.summary.totalAscent)+" m ",1)])])):de("",!0),s.summary.totalDescent?(Ut(),Jt("div",Ast,[Lst,j("div",Ost,[kst,Ae(" "+zt(s.summary.totalDescent)+" m ",1)])])):de("",!0)]),j("div",Pst,[s.summary.avgAltitude?(Ut(),Jt("div",Fst,[Nst,j("div",Dst,[$st,Ae(" "+zt(s.summary.avgAltitude.toFixed(2))+" m ",1)])])):de("",!0),s.summary.maxAltitude?(Ut(),Jt("div",zst,[Gst,j("div",Wst,[Bst,Ae(" "+zt(s.summary.maxAltitude.toFixed(2))+" m ",1)])])):de("",!0)])])])])],64)}const Ust=bm(ert,[["render",Yst]]),Vst={props:{size:{default:"70px"},color:{default:"#41b883"}},computed:{diamondStyle(){let e=parseInt(this.size);return{width:e/4+"px",height:e/4+"px","--bg-color":this.color}},styles(){let e=parseInt(this.size);return{width:this.size,height:e/4+"px"}}}};const Xst={class:"spinner-container"};function Hst(e,t,n,i,r,s){return Ut(),Jt("div",Xst,[j("span",{style:Eo(s.styles),class:"spinner spinner--rotate-diamond"},[j("div",{style:Eo(s.diamondStyle),class:"diamond"},null,4),j("div",{style:Eo(s.diamondStyle),class:"diamond"},null,4),j("div",{style:Eo(s.diamondStyle),class:"diamond"},null,4)],4)])}const jst=bm(Vst,[["render",Hst],["__scopeId","data-v-ad6abded"]]),Zst={class:"container"},qst=j("div",{class:"header"},[j("h2",{class:"title"},"Open Activity")],-1),Kst={class:"graph"},Jst={class:"map"},Mk=new Worker(new URL("/openactivity/assets/worker-ea4563ef.js",self.location),{type:"module"}),Rk=jr(new Array),zi=jr(new Array),Qst=jr(0),Ik=jr(new Array),$g=jr(!1),Ak=jr(0);jc(zi,async e=>{var n,i;const t=new Array;for(let r=0;r<e.length;r++){if(!((n=e[r].activity)!=null&&n.timestamp)||!((i=e[r].activity)!=null&&i.localDateTime))return;const s=new Date(e[r].activity.localDateTime),o=new Date(e[r].activity.timestamp),a=s.getTime()-o.getTime(),l=Math.floor(a/1e3/3600);t.push(l)}Ik.value=t,console.log("timezone offsets:",t)});class tot{constructor(t){Ct(this,"feature");Ct(this,"activityFile");Ct(this,"err");const n=t;this.feature=n==null?void 0:n.feature,this.activityFile=new sR(n==null?void 0:n.activityFile),this.err=n==null?void 0:n.err}}Mk.onmessage=e=>{const t=e.data;if(t.err!=""){console.error(`decode return with err: ${t.err}`),alert(`decode return with err: ${t.err}`),$g.value=!1;return}const n=new Array;for(let o=0;o<t.decodeResults.length;o++)n[o]=new tot(t.decodeResults[o]);const i=new Date().getTime()-Ak.value;console.group("Elapsed"),console.log("Decode took:		",t.took,"ms"),console.log("Interop wasm to js:	",i-t.took,"ms"),console.log("Total elapsed:		",i,"ms"),console.groupEnd();const r=new Array;for(let o=0;o<n.length;o++)r.push(n[o].feature);Rk.value=r;const s=new Array;for(let o=0;o<n.length;o++)s.push(n[o].activityFile);zi.value=s,$g.value=!1};const eot=Hu({__name:"TheActivity",setup(e){const t=jr(!1);return c1(()=>{var n;if(t.value=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function",t.value==!1){alert("Sorry, it appears that your browser does not support WebAssembly :(");return}(n=document.getElementById("fileInput"))==null||n.addEventListener("change",i=>{var o;const r=i.target;if(!r.files)return;let s=new Array;for(let a=0;a<((o=r.files)==null?void 0:o.length);a++)s.push(new Promise((l,c)=>{const u=r.files[a];if(!u)return;const f=new FileReader;f.onload=h=>{const d=h.target.result;l(new Uint8Array(d))},f.onerror=c,f.readAsArrayBuffer(u)}));Promise.all(s).then(a=>{Ak.value=new Date().getTime(),$g.value=!0,Mk.postMessage(a)})})}),(n,i)=>(Ut(),Jt("div",Zst,[Le(m1,null,{default:QC(()=>[Zc(Le(jst,null,null,512),[[R0,$g.value]])]),_:1}),j("div",{class:Ug([zi.value.length>0?"navigator-left":"navigator-center","navigator"])},[qst,Le(Ust,{activityFiles:zi.value,timezoneOffsetHours:Qst.value,isWebAssemblySupported:t.value},null,8,["activityFiles","timezoneOffsetHours","isWebAssemblySupported"]),Zc(j("div",Kst,[Le(Qit,{activityFile:zi.value[0]},null,8,["activityFile"])],512),[[R0,zi.value&&zi.value.length>0]])],2),Zc(j("div",Jst,[Le(rB,{geojsons:Rk.value,"activity-files":zi.value,timezoneOffsetHoursList:Ik.value},null,8,["geojsons","activity-files","timezoneOffsetHoursList"])],512),[[R0,zi.value&&zi.value.length>0]])]))}});const not=Hu({__name:"ActivityView",setup(e){return(t,n)=>(Ut(),Jt("main",null,[Le(eot)]))}}),iot=hN({history:IF("/openactivity/"),routes:[{path:"/",name:"home",component:not},{path:"/activity",name:"activity",component:()=>pv(()=>import("./ActivityView-0e246967.js"),[])},{path:"/elevationgraph",name:"elevationgraph",component:()=>pv(()=>import("./ElevationGraph-6953312b.js"),[])}]}),hb=aF(gN);hb.use(fF());hb.use(iot);hb.mount("#app");export{Qit as E,not as _,Le as a,Jt as c,Hu as d,Ut as o};
