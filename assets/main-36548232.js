var LF=Object.defineProperty;var OF=(e,t,n)=>t in e?LF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Mt=(e,t,n)=>(OF(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Rb(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const me={},nc=[],ji=()=>{},kF=()=>!1,$F=/^on[^a-z]/,zp=e=>$F.test(e),Ib=e=>e.startsWith("onUpdate:"),De=Object.assign,Lb=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},NF=Object.prototype.hasOwnProperty,Yt=(e,t)=>NF.call(e,t),pt=Array.isArray,ic=e=>Eh(e)==="[object Map]",eu=e=>Eh(e)==="[object Set]",m2=e=>Eh(e)==="[object Date]",kt=e=>typeof e=="function",Pe=e=>typeof e=="string",Nf=e=>typeof e=="symbol",ce=e=>e!==null&&typeof e=="object",dR=e=>ce(e)&&kt(e.then)&&kt(e.catch),gR=Object.prototype.toString,Eh=e=>gR.call(e),DF=e=>Eh(e).slice(8,-1),mR=e=>Eh(e)==="[object Object]",Ob=e=>Pe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Rg=Rb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wp=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},PF=/-(\w)/g,Ir=Wp(e=>e.replace(PF,(t,n)=>n?n.toUpperCase():"")),FF=/\B([A-Z])/g,nu=Wp(e=>e.replace(FF,"-$1").toLowerCase()),Vp=Wp(e=>e.charAt(0).toUpperCase()+e.slice(1)),L_=Wp(e=>e?`on${Vp(e)}`:""),Df=(e,t)=>!Object.is(e,t),Ig=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Kg=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},pR=e=>{const t=parseFloat(e);return isNaN(t)?e:t},zF=e=>{const t=Pe(e)?Number(e):NaN;return isNaN(t)?e:t};let p2;const v1=()=>p2||(p2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ze(e){if(pt(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=Pe(i)?GF(i):Ze(i);if(r)for(const s in r)t[s]=r[s]}return t}else{if(Pe(e))return e;if(ce(e))return e}}const WF=/;(?![^(]*\))/g,VF=/:([^]+)/,HF=/\/\*[^]*?\*\//g;function GF(e){const t={};return e.replace(HF,"").split(WF).forEach(n=>{if(n){const i=n.split(VF);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Fn(e){let t="";if(Pe(e))t=e;else if(pt(e))for(let n=0;n<e.length;n++){const i=Fn(e[n]);i&&(t+=i+" ")}else if(ce(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const BF="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",UF=Rb(BF);function _R(e){return!!e||e===""}function YF(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=Th(e[i],t[i]);return n}function Th(e,t){if(e===t)return!0;let n=m2(e),i=m2(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=Nf(e),i=Nf(t),n||i)return e===t;if(n=pt(e),i=pt(t),n||i)return n&&i?YF(e,t):!1;if(n=ce(e),i=ce(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Th(e[o],t[o]))return!1}}return String(e)===String(t)}function kb(e,t){return e.findIndex(n=>Th(n,t))}const ot=e=>Pe(e)?e:e==null?"":pt(e)||ce(e)&&(e.toString===gR||!kt(e.toString))?JSON.stringify(e,yR,2):String(e),yR=(e,t)=>t&&t.__v_isRef?yR(e,t.value):ic(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:eu(t)?{[`Set(${t.size})`]:[...t.values()]}:ce(t)&&!pt(t)&&!mR(t)?String(t):t;let zi;class vR{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=zi,!t&&zi&&(this.index=(zi.scopes||(zi.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=zi;try{return zi=this,t()}finally{zi=n}}}on(){zi=this}off(){zi=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function jF(e){return new vR(e)}function XF(e,t=zi){t&&t.active&&t.effects.push(e)}function qF(){return zi}const $b=e=>{const t=new Set(e);return t.w=0,t.n=0,t},bR=e=>(e.w&wo)>0,wR=e=>(e.n&wo)>0,KF=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=wo},ZF=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];bR(r)&&!wR(r)?r.delete(e):t[n++]=r,r.w&=~wo,r.n&=~wo}t.length=n}},b1=new WeakMap;let nf=0,wo=1;const w1=30;let Wi;const Aa=Symbol(""),x1=Symbol("");class Nb{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,XF(this,i)}run(){if(!this.active)return this.fn();let t=Wi,n=vo;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Wi,Wi=this,vo=!0,wo=1<<++nf,nf<=w1?KF(this):_2(this),this.fn()}finally{nf<=w1&&ZF(this),wo=1<<--nf,Wi=this.parent,vo=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Wi===this?this.deferStop=!0:this.active&&(_2(this),this.onStop&&this.onStop(),this.active=!1)}}function _2(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let vo=!0;const xR=[];function iu(){xR.push(vo),vo=!1}function ru(){const e=xR.pop();vo=e===void 0?!0:e}function zn(e,t,n){if(vo&&Wi){let i=b1.get(e);i||b1.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=$b()),ER(r)}}function ER(e,t){let n=!1;nf<=w1?wR(e)||(e.n|=wo,n=!bR(e)):n=!e.has(Wi),n&&(e.add(Wi),Wi.deps.push(e))}function ws(e,t,n,i,r,s){const o=b1.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&pt(e)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":pt(e)?Ob(n)&&a.push(o.get("length")):(a.push(o.get(Aa)),ic(e)&&a.push(o.get(x1)));break;case"delete":pt(e)||(a.push(o.get(Aa)),ic(e)&&a.push(o.get(x1)));break;case"set":ic(e)&&a.push(o.get(Aa));break}if(a.length===1)a[0]&&E1(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);E1($b(l))}}function E1(e,t){const n=pt(e)?e:[...e];for(const i of n)i.computed&&y2(i);for(const i of n)i.computed||y2(i)}function y2(e,t){(e!==Wi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const JF=Rb("__proto__,__v_isRef,__isVue"),TR=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Nf)),QF=Db(),t4=Db(!1,!0),e4=Db(!0),v2=n4();function n4(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=Xt(this);for(let s=0,o=this.length;s<o;s++)zn(i,"get",s+"");const r=i[t](...n);return r===-1||r===!1?i[t](...n.map(Xt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){iu();const i=Xt(this)[t].apply(this,n);return ru(),i}}),e}function i4(e){const t=Xt(this);return zn(t,"has",e),t.hasOwnProperty(e)}function Db(e=!1,t=!1){return function(i,r,s){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&s===(e?t?v4:RR:t?MR:AR).get(i))return i;const o=pt(i);if(!e){if(o&&Yt(v2,r))return Reflect.get(v2,r,s);if(r==="hasOwnProperty")return i4}const a=Reflect.get(i,r,s);return(Nf(r)?TR.has(r):JF(r))||(e||zn(i,"get",r),t)?a:cn(a)?o&&Ob(r)?a:a.value:ce(a)?e?LR(a):Gp(a):a}}const r4=SR(),s4=SR(!0);function SR(e=!1){return function(n,i,r,s){let o=n[i];if(pc(o)&&cn(o)&&!cn(r))return!1;if(!e&&(!Zg(r)&&!pc(r)&&(o=Xt(o),r=Xt(r)),!pt(n)&&cn(o)&&!cn(r)))return o.value=r,!0;const a=pt(n)&&Ob(i)?Number(i)<n.length:Yt(n,i),l=Reflect.set(n,i,r,s);return n===Xt(s)&&(a?Df(r,o)&&ws(n,"set",i,r):ws(n,"add",i,r)),l}}function o4(e,t){const n=Yt(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&ws(e,"delete",t,void 0),i}function a4(e,t){const n=Reflect.has(e,t);return(!Nf(t)||!TR.has(t))&&zn(e,"has",t),n}function l4(e){return zn(e,"iterate",pt(e)?"length":Aa),Reflect.ownKeys(e)}const CR={get:QF,set:r4,deleteProperty:o4,has:a4,ownKeys:l4},c4={get:e4,set(e,t){return!0},deleteProperty(e,t){return!0}},u4=De({},CR,{get:t4,set:s4}),Pb=e=>e,Hp=e=>Reflect.getPrototypeOf(e);function Cd(e,t,n=!1,i=!1){e=e.__v_raw;const r=Xt(e),s=Xt(t);n||(t!==s&&zn(r,"get",t),zn(r,"get",s));const{has:o}=Hp(r),a=i?Pb:n?Vb:Pf;if(o.call(r,t))return a(e.get(t));if(o.call(r,s))return a(e.get(s));e!==r&&e.get(t)}function Ad(e,t=!1){const n=this.__v_raw,i=Xt(n),r=Xt(e);return t||(e!==r&&zn(i,"has",e),zn(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function Md(e,t=!1){return e=e.__v_raw,!t&&zn(Xt(e),"iterate",Aa),Reflect.get(e,"size",e)}function b2(e){e=Xt(e);const t=Xt(this);return Hp(t).has.call(t,e)||(t.add(e),ws(t,"add",e,e)),this}function w2(e,t){t=Xt(t);const n=Xt(this),{has:i,get:r}=Hp(n);let s=i.call(n,e);s||(e=Xt(e),s=i.call(n,e));const o=r.call(n,e);return n.set(e,t),s?Df(t,o)&&ws(n,"set",e,t):ws(n,"add",e,t),this}function x2(e){const t=Xt(this),{has:n,get:i}=Hp(t);let r=n.call(t,e);r||(e=Xt(e),r=n.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return r&&ws(t,"delete",e,void 0),s}function E2(){const e=Xt(this),t=e.size!==0,n=e.clear();return t&&ws(e,"clear",void 0,void 0),n}function Rd(e,t){return function(i,r){const s=this,o=s.__v_raw,a=Xt(o),l=t?Pb:e?Vb:Pf;return!e&&zn(a,"iterate",Aa),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function Id(e,t,n){return function(...i){const r=this.__v_raw,s=Xt(r),o=ic(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=r[e](...i),u=n?Pb:t?Vb:Pf;return!t&&zn(s,"iterate",l?x1:Aa),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Hs(e){return function(...t){return e==="delete"?!1:this}}function f4(){const e={get(s){return Cd(this,s)},get size(){return Md(this)},has:Ad,add:b2,set:w2,delete:x2,clear:E2,forEach:Rd(!1,!1)},t={get(s){return Cd(this,s,!1,!0)},get size(){return Md(this)},has:Ad,add:b2,set:w2,delete:x2,clear:E2,forEach:Rd(!1,!0)},n={get(s){return Cd(this,s,!0)},get size(){return Md(this,!0)},has(s){return Ad.call(this,s,!0)},add:Hs("add"),set:Hs("set"),delete:Hs("delete"),clear:Hs("clear"),forEach:Rd(!0,!1)},i={get(s){return Cd(this,s,!0,!0)},get size(){return Md(this,!0)},has(s){return Ad.call(this,s,!0)},add:Hs("add"),set:Hs("set"),delete:Hs("delete"),clear:Hs("clear"),forEach:Rd(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Id(s,!1,!1),n[s]=Id(s,!0,!1),t[s]=Id(s,!1,!0),i[s]=Id(s,!0,!0)}),[e,n,t,i]}const[h4,d4,g4,m4]=f4();function Fb(e,t){const n=t?e?m4:g4:e?d4:h4;return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(Yt(n,r)&&r in i?n:i,r,s)}const p4={get:Fb(!1,!1)},_4={get:Fb(!1,!0)},y4={get:Fb(!0,!1)},AR=new WeakMap,MR=new WeakMap,RR=new WeakMap,v4=new WeakMap;function b4(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function w4(e){return e.__v_skip||!Object.isExtensible(e)?0:b4(DF(e))}function Gp(e){return pc(e)?e:zb(e,!1,CR,p4,AR)}function IR(e){return zb(e,!1,u4,_4,MR)}function LR(e){return zb(e,!0,c4,y4,RR)}function zb(e,t,n,i,r){if(!ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const o=w4(e);if(o===0)return e;const a=new Proxy(e,o===2?i:n);return r.set(e,a),a}function rc(e){return pc(e)?rc(e.__v_raw):!!(e&&e.__v_isReactive)}function pc(e){return!!(e&&e.__v_isReadonly)}function Zg(e){return!!(e&&e.__v_isShallow)}function OR(e){return rc(e)||pc(e)}function Xt(e){const t=e&&e.__v_raw;return t?Xt(t):e}function Wb(e){return Kg(e,"__v_skip",!0),e}const Pf=e=>ce(e)?Gp(e):e,Vb=e=>ce(e)?LR(e):e;function kR(e){vo&&Wi&&(e=Xt(e),ER(e.dep||(e.dep=$b())))}function $R(e,t){e=Xt(e);const n=e.dep;n&&E1(n)}function cn(e){return!!(e&&e.__v_isRef===!0)}function NR(e){return DR(e,!1)}function x4(e){return DR(e,!0)}function DR(e,t){return cn(e)?e:new E4(e,t)}class E4{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Xt(t),this._value=n?t:Pf(t)}get value(){return kR(this),this._value}set value(t){const n=this.__v_isShallow||Zg(t)||pc(t);t=n?t:Xt(t),Df(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Pf(t),$R(this))}}function Er(e){return cn(e)?e.value:e}const T4={get:(e,t,n)=>Er(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return cn(r)&&!cn(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function PR(e){return rc(e)?e:new Proxy(e,T4)}class S4{constructor(t,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Nb(t,()=>{this._dirty||(this._dirty=!0,$R(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=Xt(this);return kR(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function C4(e,t,n=!1){let i,r;const s=kt(e);return s?(i=e,r=ji):(i=e.get,r=e.set),new S4(i,r,s||!r,n)}function bo(e,t,n,i){let r;try{r=i?e(...i):e()}catch(s){Bp(s,t,n)}return r}function xi(e,t,n,i){if(kt(e)){const s=bo(e,t,n,i);return s&&dR(s)&&s.catch(o=>{Bp(o,t,n)}),s}const r=[];for(let s=0;s<e.length;s++)r.push(xi(e[s],t,n,i));return r}function Bp(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=n;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){bo(l,null,10,[e,o,a]);return}}A4(e,n,r,i)}function A4(e,t,n,i=!0){console.error(e)}let Ff=!1,T1=!1;const on=[];let hr=0;const sc=[];let es=null,aa=0;const FR=Promise.resolve();let Hb=null;function zR(e){const t=Hb||FR;return e?t.then(this?e.bind(this):e):t}function M4(e){let t=hr+1,n=on.length;for(;t<n;){const i=t+n>>>1;zf(on[i])<e?t=i+1:n=i}return t}function Gb(e){(!on.length||!on.includes(e,Ff&&e.allowRecurse?hr+1:hr))&&(e.id==null?on.push(e):on.splice(M4(e.id),0,e),WR())}function WR(){!Ff&&!T1&&(T1=!0,Hb=FR.then(HR))}function R4(e){const t=on.indexOf(e);t>hr&&on.splice(t,1)}function I4(e){pt(e)?sc.push(...e):(!es||!es.includes(e,e.allowRecurse?aa+1:aa))&&sc.push(e),WR()}function T2(e,t=Ff?hr+1:0){for(;t<on.length;t++){const n=on[t];n&&n.pre&&(on.splice(t,1),t--,n())}}function VR(e){if(sc.length){const t=[...new Set(sc)];if(sc.length=0,es){es.push(...t);return}for(es=t,es.sort((n,i)=>zf(n)-zf(i)),aa=0;aa<es.length;aa++)es[aa]();es=null,aa=0}}const zf=e=>e.id==null?1/0:e.id,L4=(e,t)=>{const n=zf(e)-zf(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function HR(e){T1=!1,Ff=!0,on.sort(L4);const t=ji;try{for(hr=0;hr<on.length;hr++){const n=on[hr];n&&n.active!==!1&&bo(n,null,14)}}finally{hr=0,on.length=0,VR(),Ff=!1,Hb=null,(on.length||sc.length)&&HR()}}function O4(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||me;let r=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:h}=i[u]||me;h&&(r=n.map(d=>Pe(d)?d.trim():d)),f&&(r=n.map(pR))}let a,l=i[a=L_(t)]||i[a=L_(Ir(t))];!l&&s&&(l=i[a=L_(nu(t))]),l&&xi(l,e,6,r);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,xi(c,e,6,r)}}function GR(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!kt(e)){const l=c=>{const u=GR(c,t,!0);u&&(a=!0,De(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(ce(e)&&i.set(e,null),null):(pt(s)?s.forEach(l=>o[l]=null):De(o,s),ce(e)&&i.set(e,o),o)}function Up(e,t){return!e||!zp(t)?!1:(t=t.slice(2).replace(/Once$/,""),Yt(e,t[0].toLowerCase()+t.slice(1))||Yt(e,nu(t))||Yt(e,t))}let Xn=null,Yp=null;function Jg(e){const t=Xn;return Xn=e,Yp=e&&e.type.__scopeId||null,t}function Nr(e){Yp=e}function Dr(){Yp=null}function Bb(e,t=Xn,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&D2(-1);const s=Jg(t);let o;try{o=e(...r)}finally{Jg(s),i._d&&D2(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function O_(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:h,setupState:d,ctx:g,inheritAttrs:m}=e;let p,_;const y=Jg(e);try{if(n.shapeFlag&4){const v=r||i;p=ur(u.call(v,v,f,s,d,h,g)),_=l}else{const v=t;p=ur(v.length>1?v(s,{attrs:l,slots:a,emit:c}):v(s,null)),_=t.props?l:k4(l)}}catch(v){bf.length=0,Bp(v,e,1),p=Ot(Xi)}let b=p;if(_&&m!==!1){const v=Object.keys(_),{shapeFlag:x}=b;v.length&&x&7&&(o&&v.some(Ib)&&(_=$4(_,o)),b=xo(b,_))}return n.dirs&&(b=xo(b),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),p=b,Jg(y),p}const k4=e=>{let t;for(const n in e)(n==="class"||n==="style"||zp(n))&&((t||(t={}))[n]=e[n]);return t},$4=(e,t)=>{const n={};for(const i in e)(!Ib(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function N4(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?S2(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==i[h]&&!Up(c,h))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?S2(i,o,c):!0:!!o;return!1}function S2(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!Up(n,s))return!0}return!1}function D4({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const P4=e=>e.__isSuspense;function F4(e,t){t&&t.pendingBranch?pt(e)?t.effects.push(...e):t.effects.push(e):I4(e)}const Ld={};function Lg(e,t,n){return BR(e,t,n)}function BR(e,t,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=me){var a;const l=qF()===((a=je)==null?void 0:a.scope)?je:null;let c,u=!1,f=!1;if(cn(e)?(c=()=>e.value,u=Zg(e)):rc(e)?(c=()=>e,i=!0):pt(e)?(f=!0,u=e.some(v=>rc(v)||Zg(v)),c=()=>e.map(v=>{if(cn(v))return v.value;if(rc(v))return ha(v);if(kt(v))return bo(v,l,2)})):kt(e)?t?c=()=>bo(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return h&&h(),xi(e,l,3,[d])}:c=ji,t&&i){const v=c;c=()=>ha(v())}let h,d=v=>{h=y.onStop=()=>{bo(v,l,4)}},g;if(Vf)if(d=ji,t?n&&xi(t,l,3,[c(),f?[]:void 0,d]):c(),r==="sync"){const v=$8();g=v.__watcherHandles||(v.__watcherHandles=[])}else return ji;let m=f?new Array(e.length).fill(Ld):Ld;const p=()=>{if(y.active)if(t){const v=y.run();(i||u||(f?v.some((x,w)=>Df(x,m[w])):Df(v,m)))&&(h&&h(),xi(t,l,3,[v,m===Ld?void 0:f&&m[0]===Ld?[]:m,d]),m=v)}else y.run()};p.allowRecurse=!!t;let _;r==="sync"?_=p:r==="post"?_=()=>Rn(p,l&&l.suspense):(p.pre=!0,l&&(p.id=l.uid),_=()=>Gb(p));const y=new Nb(c,_);t?n?p():m=y.run():r==="post"?Rn(y.run.bind(y),l&&l.suspense):y.run();const b=()=>{y.stop(),l&&l.scope&&Lb(l.scope.effects,y)};return g&&g.push(b),b}function z4(e,t,n){const i=this.proxy,r=Pe(e)?e.includes(".")?UR(i,e):()=>i[e]:e.bind(i,i);let s;kt(t)?s=t:(s=t.handler,n=t);const o=je;_c(this);const a=BR(r,s.bind(i),n);return o?_c(o):Ma(),a}function UR(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function ha(e,t){if(!ce(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),cn(e))ha(e.value,t);else if(pt(e))for(let n=0;n<e.length;n++)ha(e[n],t);else if(eu(e)||ic(e))e.forEach(n=>{ha(n,t)});else if(mR(e))for(const n in e)ha(e[n],t);return e}function Va(e,t){const n=Xn;if(n===null)return e;const i=Qp(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,a,l,c=me]=t[s];o&&(kt(o)&&(o={mounted:o,updated:o}),o.deep&&ha(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function qo(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(iu(),xi(l,n,8,[e.el,a,e,t]),ru())}}function W4(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return KR(()=>{e.isMounted=!0}),ZR(()=>{e.isUnmounting=!0}),e}const hi=[Function,Array],YR={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hi,onEnter:hi,onAfterEnter:hi,onEnterCancelled:hi,onBeforeLeave:hi,onLeave:hi,onAfterLeave:hi,onLeaveCancelled:hi,onBeforeAppear:hi,onAppear:hi,onAfterAppear:hi,onAppearCancelled:hi},V4={name:"BaseTransition",props:YR,setup(e,{slots:t}){const n=C8(),i=W4();let r;return()=>{const s=t.default&&XR(t.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==Xi){o=m;break}}const a=Xt(e),{mode:l}=a;if(i.isLeaving)return k_(o);const c=C2(o);if(!c)return k_(o);const u=S1(c,a,i,n);C1(c,u);const f=n.subTree,h=f&&C2(f);let d=!1;const{getTransitionKey:g}=c.type;if(g){const m=g();r===void 0?r=m:m!==r&&(r=m,d=!0)}if(h&&h.type!==Xi&&(!la(c,h)||d)){const m=S1(h,a,i,n);if(C1(h,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},k_(o);l==="in-out"&&c.type!==Xi&&(m.delayLeave=(p,_,y)=>{const b=jR(i,h);b[String(h.key)]=h,p._leaveCb=()=>{_(),p._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=y})}return o}}},H4=V4;function jR(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function S1(e,t,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:m,onAppear:p,onAfterAppear:_,onAppearCancelled:y}=t,b=String(e.key),v=jR(n,e),x=(T,I)=>{T&&xi(T,i,9,I)},w=(T,I)=>{const S=I[1];x(T,I),pt(T)?T.every(A=>A.length<=1)&&S():T.length<=1&&S()},E={mode:s,persisted:o,beforeEnter(T){let I=a;if(!n.isMounted)if(r)I=m||a;else return;T._leaveCb&&T._leaveCb(!0);const S=v[b];S&&la(e,S)&&S.el._leaveCb&&S.el._leaveCb(),x(I,[T])},enter(T){let I=l,S=c,A=u;if(!n.isMounted)if(r)I=p||l,S=_||c,A=y||u;else return;let R=!1;const k=T._enterCb=$=>{R||(R=!0,$?x(A,[T]):x(S,[T]),E.delayedLeave&&E.delayedLeave(),T._enterCb=void 0)};I?w(I,[T,k]):k()},leave(T,I){const S=String(e.key);if(T._enterCb&&T._enterCb(!0),n.isUnmounting)return I();x(f,[T]);let A=!1;const R=T._leaveCb=k=>{A||(A=!0,I(),k?x(g,[T]):x(d,[T]),T._leaveCb=void 0,v[S]===e&&delete v[S])};v[S]=e,h?w(h,[T,R]):R()},clone(T){return S1(T,t,n,i)}};return E}function k_(e){if(jp(e))return e=xo(e),e.children=null,e}function C2(e){return jp(e)?e.children?e.children[0]:void 0:e}function C1(e,t){e.shapeFlag&6&&e.component?C1(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function XR(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Ln?(o.patchFlag&128&&r++,i=i.concat(XR(o.children,t,a))):(t||o.type!==Xi)&&i.push(a!=null?xo(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function oi(e,t){return kt(e)?(()=>De({name:e.name},t,{setup:e}))():e}const Og=e=>!!e.type.__asyncLoader,jp=e=>e.type.__isKeepAlive;function G4(e,t){qR(e,"a",t)}function B4(e,t){qR(e,"da",t)}function qR(e,t,n=je){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Xp(t,i,n),n){let r=n.parent;for(;r&&r.parent;)jp(r.parent.vnode)&&U4(i,t,n,r),r=r.parent}}function U4(e,t,n,i){const r=Xp(t,e,i,!0);JR(()=>{Lb(i[t],r)},n)}function Xp(e,t,n=je,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;iu(),_c(n);const a=xi(t,n,e,o);return Ma(),ru(),a});return i?r.unshift(s):r.push(s),s}}const Rs=e=>(t,n=je)=>(!Vf||e==="sp")&&Xp(e,(...i)=>t(...i),n),Y4=Rs("bm"),KR=Rs("m"),j4=Rs("bu"),X4=Rs("u"),ZR=Rs("bum"),JR=Rs("um"),q4=Rs("sp"),K4=Rs("rtg"),Z4=Rs("rtc");function J4(e,t=je){Xp("ec",e,t)}const QR="components";function Q4(e,t){return e8(QR,e,!0,t)||e}const t8=Symbol.for("v-ndc");function e8(e,t,n=!0,i=!1){const r=Xn||je;if(r){const s=r.type;if(e===QR){const a=L8(s,!1);if(a&&(a===t||a===Ir(t)||a===Vp(Ir(t))))return s}const o=A2(r[e]||s[e],t)||A2(r.appContext[e],t);return!o&&i?s:o}}function A2(e,t){return e&&(e[t]||e[Ir(t)]||e[Vp(Ir(t))])}function qp(e,t,n,i){let r;const s=n&&n[i];if(pt(e)||Pe(e)){r=new Array(e.length);for(let o=0,a=e.length;o<a;o++)r[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){r=new Array(e);for(let o=0;o<e;o++)r[o]=t(o+1,o,void 0,s&&s[o])}else if(ce(e))if(e[Symbol.iterator])r=Array.from(e,(o,a)=>t(o,a,void 0,s&&s[a]));else{const o=Object.keys(e);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=t(e[c],c,a,s&&s[a])}}else r=[];return n&&(n[i]=r),r}const A1=e=>e?uI(e)?Qp(e)||e.proxy:A1(e.parent):null,vf=De(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>A1(e.parent),$root:e=>A1(e.root),$emit:e=>e.emit,$options:e=>Ub(e),$forceUpdate:e=>e.f||(e.f=()=>Gb(e.update)),$nextTick:e=>e.n||(e.n=zR.bind(e.proxy)),$watch:e=>z4.bind(e)}),$_=(e,t)=>e!==me&&!e.__isScriptSetup&&Yt(e,t),n8={get({_:e},t){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if($_(i,t))return o[t]=1,i[t];if(r!==me&&Yt(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&Yt(c,t))return o[t]=3,s[t];if(n!==me&&Yt(n,t))return o[t]=4,n[t];M1&&(o[t]=0)}}const u=vf[t];let f,h;if(u)return t==="$attrs"&&zn(e,"get",t),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==me&&Yt(n,t))return o[t]=4,n[t];if(h=l.config.globalProperties,Yt(h,t))return h[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return $_(r,t)?(r[t]=n,!0):i!==me&&Yt(i,t)?(i[t]=n,!0):Yt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!n[o]||e!==me&&Yt(e,o)||$_(t,o)||(a=s[0])&&Yt(a,o)||Yt(i,o)||Yt(vf,o)||Yt(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Yt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function M2(e){return pt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let M1=!0;function i8(e){const t=Ub(e),n=e.proxy,i=e.ctx;M1=!1,t.beforeCreate&&R2(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:m,deactivated:p,beforeDestroy:_,beforeUnmount:y,destroyed:b,unmounted:v,render:x,renderTracked:w,renderTriggered:E,errorCaptured:T,serverPrefetch:I,expose:S,inheritAttrs:A,components:R,directives:k,filters:$}=t;if(c&&r8(c,i,null),o)for(const D in o){const V=o[D];kt(V)&&(i[D]=V.bind(n))}if(r){const D=r.call(n,n);ce(D)&&(e.data=Gp(D))}if(M1=!0,s)for(const D in s){const V=s[D],Y=kt(V)?V.bind(n,n):kt(V.get)?V.get.bind(n,n):ji,B=!kt(V)&&kt(V.set)?V.set.bind(n):ji,q=Vi({get:Y,set:B});Object.defineProperty(i,D,{enumerable:!0,configurable:!0,get:()=>q.value,set:z=>q.value=z})}if(a)for(const D in a)tI(a[D],i,n,D);if(l){const D=kt(l)?l.call(n):l;Reflect.ownKeys(D).forEach(V=>{kg(V,D[V])})}u&&R2(u,e,"c");function N(D,V){pt(V)?V.forEach(Y=>D(Y.bind(n))):V&&D(V.bind(n))}if(N(Y4,f),N(KR,h),N(j4,d),N(X4,g),N(G4,m),N(B4,p),N(J4,T),N(Z4,w),N(K4,E),N(ZR,y),N(JR,v),N(q4,I),pt(S))if(S.length){const D=e.exposed||(e.exposed={});S.forEach(V=>{Object.defineProperty(D,V,{get:()=>n[V],set:Y=>n[V]=Y})})}else e.exposed||(e.exposed={});x&&e.render===ji&&(e.render=x),A!=null&&(e.inheritAttrs=A),R&&(e.components=R),k&&(e.directives=k)}function r8(e,t,n=ji){pt(e)&&(e=R1(e));for(const i in e){const r=e[i];let s;ce(r)?"default"in r?s=fs(r.from||i,r.default,!0):s=fs(r.from||i):s=fs(r),cn(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function R2(e,t,n){xi(pt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function tI(e,t,n,i){const r=i.includes(".")?UR(n,i):()=>n[i];if(Pe(e)){const s=t[e];kt(s)&&Lg(r,s)}else if(kt(e))Lg(r,e.bind(n));else if(ce(e))if(pt(e))e.forEach(s=>tI(s,t,n,i));else{const s=kt(e.handler)?e.handler.bind(n):t[e.handler];kt(s)&&Lg(r,s,e)}}function Ub(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!n&&!i?l=t:(l={},r.length&&r.forEach(c=>Qg(l,c,o,!0)),Qg(l,t,o)),ce(t)&&s.set(t,l),l}function Qg(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&Qg(e,s,n,!0),r&&r.forEach(o=>Qg(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=s8[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const s8={data:I2,props:L2,emits:L2,methods:rf,computed:rf,beforeCreate:gn,created:gn,beforeMount:gn,mounted:gn,beforeUpdate:gn,updated:gn,beforeDestroy:gn,beforeUnmount:gn,destroyed:gn,unmounted:gn,activated:gn,deactivated:gn,errorCaptured:gn,serverPrefetch:gn,components:rf,directives:rf,watch:a8,provide:I2,inject:o8};function I2(e,t){return t?e?function(){return De(kt(e)?e.call(this,this):e,kt(t)?t.call(this,this):t)}:t:e}function o8(e,t){return rf(R1(e),R1(t))}function R1(e){if(pt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function gn(e,t){return e?[...new Set([].concat(e,t))]:t}function rf(e,t){return e?De(Object.create(null),e,t):t}function L2(e,t){return e?pt(e)&&pt(t)?[...new Set([...e,...t])]:De(Object.create(null),M2(e),M2(t??{})):t}function a8(e,t){if(!e)return t;if(!t)return e;const n=De(Object.create(null),e);for(const i in t)n[i]=gn(e[i],t[i]);return n}function eI(){return{app:null,config:{isNativeTag:kF,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let l8=0;function c8(e,t){return function(i,r=null){kt(i)||(i=De({},i)),r!=null&&!ce(r)&&(r=null);const s=eI(),o=new Set;let a=!1;const l=s.app={_uid:l8++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:N8,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&kt(c.install)?(o.add(c),c.install(l,...u)):kt(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,f){if(!a){const h=Ot(i,r);return h.appContext=s,u&&t?t(h,c):e(h,c,f),a=!0,l._container=c,c.__vue_app__=l,Qp(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){tm=l;try{return c()}finally{tm=null}}};return l}}let tm=null;function kg(e,t){if(je){let n=je.provides;const i=je.parent&&je.parent.provides;i===n&&(n=je.provides=Object.create(i)),n[e]=t}}function fs(e,t,n=!1){const i=je||Xn;if(i||tm){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:tm._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&kt(t)?t.call(i&&i.proxy):t}}function u8(e,t,n,i=!1){const r={},s={};Kg(s,Zp,1),e.propsDefaults=Object.create(null),nI(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:IR(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function f8(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=Xt(r),[l]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Up(e.emitsOptions,h))continue;const d=t[h];if(l)if(Yt(s,h))d!==s[h]&&(s[h]=d,c=!0);else{const g=Ir(h);r[g]=I1(l,a,g,d,e,!1)}else d!==s[h]&&(s[h]=d,c=!0)}}}else{nI(e,t,r,s)&&(c=!0);let u;for(const f in a)(!t||!Yt(t,f)&&((u=nu(f))===f||!Yt(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=I1(l,a,f,void 0,e,!0)):delete r[f]);if(s!==a)for(const f in s)(!t||!Yt(t,f))&&(delete s[f],c=!0)}c&&ws(e,"set","$attrs")}function nI(e,t,n,i){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Rg(l))continue;const c=t[l];let u;r&&Yt(r,u=Ir(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:Up(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=Xt(n),c=a||me;for(let u=0;u<s.length;u++){const f=s[u];n[f]=I1(r,l,f,c[f],e,!Yt(c,f))}}return o}function I1(e,t,n,i,r,s){const o=e[n];if(o!=null){const a=Yt(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&kt(l)){const{propsDefaults:c}=r;n in c?i=c[n]:(_c(r),i=c[n]=l.call(null,t),Ma())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===nu(n))&&(i=!0))}return i}function iI(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let l=!1;if(!kt(e)){const u=f=>{l=!0;const[h,d]=iI(f,t,!0);De(o,h),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return ce(e)&&i.set(e,nc),nc;if(pt(s))for(let u=0;u<s.length;u++){const f=Ir(s[u]);O2(f)&&(o[f]=me)}else if(s)for(const u in s){const f=Ir(u);if(O2(f)){const h=s[u],d=o[f]=pt(h)||kt(h)?{type:h}:De({},h);if(d){const g=N2(Boolean,d.type),m=N2(String,d.type);d[0]=g>-1,d[1]=m<0||g<m,(g>-1||Yt(d,"default"))&&a.push(f)}}}const c=[o,a];return ce(e)&&i.set(e,c),c}function O2(e){return e[0]!=="$"}function k2(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function $2(e,t){return k2(e)===k2(t)}function N2(e,t){return pt(t)?t.findIndex(n=>$2(n,e)):kt(t)&&$2(t,e)?0:-1}const rI=e=>e[0]==="_"||e==="$stable",Yb=e=>pt(e)?e.map(ur):[ur(e)],h8=(e,t,n)=>{if(t._n)return t;const i=Bb((...r)=>Yb(t(...r)),n);return i._c=!1,i},sI=(e,t,n)=>{const i=e._ctx;for(const r in e){if(rI(r))continue;const s=e[r];if(kt(s))t[r]=h8(r,s,i);else if(s!=null){const o=Yb(s);t[r]=()=>o}}},oI=(e,t)=>{const n=Yb(t);e.slots.default=()=>n},d8=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Xt(t),Kg(t,"_",n)):sI(t,e.slots={})}else e.slots={},t&&oI(e,t);Kg(e.slots,Zp,1)},g8=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=me;if(i.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:(De(r,t),!n&&a===1&&delete r._):(s=!t.$stable,sI(t,r)),o=t}else t&&(oI(e,t),o={default:1});if(s)for(const a in r)!rI(a)&&!(a in o)&&delete r[a]};function L1(e,t,n,i,r=!1){if(pt(e)){e.forEach((h,d)=>L1(h,t&&(pt(t)?t[d]:t),n,i,r));return}if(Og(i)&&!r)return;const s=i.shapeFlag&4?Qp(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=e,c=t&&t.r,u=a.refs===me?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(Pe(c)?(u[c]=null,Yt(f,c)&&(f[c]=null)):cn(c)&&(c.value=null)),kt(l))bo(l,a,12,[o,u]);else{const h=Pe(l),d=cn(l);if(h||d){const g=()=>{if(e.f){const m=h?Yt(f,l)?f[l]:u[l]:l.value;r?pt(m)&&Lb(m,s):pt(m)?m.includes(s)||m.push(s):h?(u[l]=[s],Yt(f,l)&&(f[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else h?(u[l]=o,Yt(f,l)&&(f[l]=o)):d&&(l.value=o,e.k&&(u[e.k]=o))};o?(g.id=-1,Rn(g,n)):g()}}}const Rn=F4;function m8(e){return p8(e)}function p8(e,t){const n=v1();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=ji,insertStaticContent:g}=e,m=(C,O,P,H=null,U=null,X=null,lt=!1,tt=null,et=!!O.dynamicChildren)=>{if(C===O)return;C&&!la(C,O)&&(H=W(C),z(C,U,X,!0),C=null),O.patchFlag===-2&&(et=!1,O.dynamicChildren=null);const{type:K,ref:dt,shapeFlag:ut}=O;switch(K){case Kp:p(C,O,P,H);break;case Xi:_(C,O,P,H);break;case $g:C==null&&y(O,P,H,lt);break;case Ln:R(C,O,P,H,U,X,lt,tt,et);break;default:ut&1?x(C,O,P,H,U,X,lt,tt,et):ut&6?k(C,O,P,H,U,X,lt,tt,et):(ut&64||ut&128)&&K.process(C,O,P,H,U,X,lt,tt,et,F)}dt!=null&&U&&L1(dt,C&&C.ref,X,O||C,!O)},p=(C,O,P,H)=>{if(C==null)i(O.el=a(O.children),P,H);else{const U=O.el=C.el;O.children!==C.children&&c(U,O.children)}},_=(C,O,P,H)=>{C==null?i(O.el=l(O.children||""),P,H):O.el=C.el},y=(C,O,P,H)=>{[C.el,C.anchor]=g(C.children,O,P,H,C.el,C.anchor)},b=({el:C,anchor:O},P,H)=>{let U;for(;C&&C!==O;)U=h(C),i(C,P,H),C=U;i(O,P,H)},v=({el:C,anchor:O})=>{let P;for(;C&&C!==O;)P=h(C),r(C),C=P;r(O)},x=(C,O,P,H,U,X,lt,tt,et)=>{lt=lt||O.type==="svg",C==null?w(O,P,H,U,X,lt,tt,et):I(C,O,U,X,lt,tt,et)},w=(C,O,P,H,U,X,lt,tt)=>{let et,K;const{type:dt,props:ut,shapeFlag:gt,transition:mt,dirs:Tt}=C;if(et=C.el=o(C.type,X,ut&&ut.is,ut),gt&8?u(et,C.children):gt&16&&T(C.children,et,null,H,U,X&&dt!=="foreignObject",lt,tt),Tt&&qo(C,null,H,"created"),E(et,C,C.scopeId,lt,H),ut){for(const Ct in ut)Ct!=="value"&&!Rg(Ct)&&s(et,Ct,null,ut[Ct],X,C.children,H,U,at);"value"in ut&&s(et,"value",null,ut.value),(K=ut.onVnodeBeforeMount)&&lr(K,H,C)}Tt&&qo(C,null,H,"beforeMount");const Nt=(!U||U&&!U.pendingBranch)&&mt&&!mt.persisted;Nt&&mt.beforeEnter(et),i(et,O,P),((K=ut&&ut.onVnodeMounted)||Nt||Tt)&&Rn(()=>{K&&lr(K,H,C),Nt&&mt.enter(et),Tt&&qo(C,null,H,"mounted")},U)},E=(C,O,P,H,U)=>{if(P&&d(C,P),H)for(let X=0;X<H.length;X++)d(C,H[X]);if(U){let X=U.subTree;if(O===X){const lt=U.vnode;E(C,lt,lt.scopeId,lt.slotScopeIds,U.parent)}}},T=(C,O,P,H,U,X,lt,tt,et=0)=>{for(let K=et;K<C.length;K++){const dt=C[K]=tt?no(C[K]):ur(C[K]);m(null,dt,O,P,H,U,X,lt,tt)}},I=(C,O,P,H,U,X,lt)=>{const tt=O.el=C.el;let{patchFlag:et,dynamicChildren:K,dirs:dt}=O;et|=C.patchFlag&16;const ut=C.props||me,gt=O.props||me;let mt;P&&Ko(P,!1),(mt=gt.onVnodeBeforeUpdate)&&lr(mt,P,O,C),dt&&qo(O,C,P,"beforeUpdate"),P&&Ko(P,!0);const Tt=U&&O.type!=="foreignObject";if(K?S(C.dynamicChildren,K,tt,P,H,Tt,X):lt||V(C,O,tt,null,P,H,Tt,X,!1),et>0){if(et&16)A(tt,O,ut,gt,P,H,U);else if(et&2&&ut.class!==gt.class&&s(tt,"class",null,gt.class,U),et&4&&s(tt,"style",ut.style,gt.style,U),et&8){const Nt=O.dynamicProps;for(let Ct=0;Ct<Nt.length;Ct++){const ee=Nt[Ct],Ee=ut[ee],_e=gt[ee];(_e!==Ee||ee==="value")&&s(tt,ee,Ee,_e,U,C.children,P,H,at)}}et&1&&C.children!==O.children&&u(tt,O.children)}else!lt&&K==null&&A(tt,O,ut,gt,P,H,U);((mt=gt.onVnodeUpdated)||dt)&&Rn(()=>{mt&&lr(mt,P,O,C),dt&&qo(O,C,P,"updated")},H)},S=(C,O,P,H,U,X,lt)=>{for(let tt=0;tt<O.length;tt++){const et=C[tt],K=O[tt],dt=et.el&&(et.type===Ln||!la(et,K)||et.shapeFlag&70)?f(et.el):P;m(et,K,dt,null,H,U,X,lt,!0)}},A=(C,O,P,H,U,X,lt)=>{if(P!==H){if(P!==me)for(const tt in P)!Rg(tt)&&!(tt in H)&&s(C,tt,P[tt],null,lt,O.children,U,X,at);for(const tt in H){if(Rg(tt))continue;const et=H[tt],K=P[tt];et!==K&&tt!=="value"&&s(C,tt,K,et,lt,O.children,U,X,at)}"value"in H&&s(C,"value",P.value,H.value)}},R=(C,O,P,H,U,X,lt,tt,et)=>{const K=O.el=C?C.el:a(""),dt=O.anchor=C?C.anchor:a("");let{patchFlag:ut,dynamicChildren:gt,slotScopeIds:mt}=O;mt&&(tt=tt?tt.concat(mt):mt),C==null?(i(K,P,H),i(dt,P,H),T(O.children,P,dt,U,X,lt,tt,et)):ut>0&&ut&64&&gt&&C.dynamicChildren?(S(C.dynamicChildren,gt,P,U,X,lt,tt),(O.key!=null||U&&O===U.subTree)&&aI(C,O,!0)):V(C,O,P,dt,U,X,lt,tt,et)},k=(C,O,P,H,U,X,lt,tt,et)=>{O.slotScopeIds=tt,C==null?O.shapeFlag&512?U.ctx.activate(O,P,H,lt,et):$(O,P,H,U,X,lt,et):L(C,O,et)},$=(C,O,P,H,U,X,lt)=>{const tt=C.component=S8(C,H,U);if(jp(C)&&(tt.ctx.renderer=F),A8(tt),tt.asyncDep){if(U&&U.registerDep(tt,N),!C.el){const et=tt.subTree=Ot(Xi);_(null,et,O,P)}return}N(tt,C,O,P,U,X,lt)},L=(C,O,P)=>{const H=O.component=C.component;if(N4(C,O,P))if(H.asyncDep&&!H.asyncResolved){D(H,O,P);return}else H.next=O,R4(H.update),H.update();else O.el=C.el,H.vnode=O},N=(C,O,P,H,U,X,lt)=>{const tt=()=>{if(C.isMounted){let{next:dt,bu:ut,u:gt,parent:mt,vnode:Tt}=C,Nt=dt,Ct;Ko(C,!1),dt?(dt.el=Tt.el,D(C,dt,lt)):dt=Tt,ut&&Ig(ut),(Ct=dt.props&&dt.props.onVnodeBeforeUpdate)&&lr(Ct,mt,dt,Tt),Ko(C,!0);const ee=O_(C),Ee=C.subTree;C.subTree=ee,m(Ee,ee,f(Ee.el),W(Ee),C,U,X),dt.el=ee.el,Nt===null&&D4(C,ee.el),gt&&Rn(gt,U),(Ct=dt.props&&dt.props.onVnodeUpdated)&&Rn(()=>lr(Ct,mt,dt,Tt),U)}else{let dt;const{el:ut,props:gt}=O,{bm:mt,m:Tt,parent:Nt}=C,Ct=Og(O);if(Ko(C,!1),mt&&Ig(mt),!Ct&&(dt=gt&&gt.onVnodeBeforeMount)&&lr(dt,Nt,O),Ko(C,!0),ut&&Z){const ee=()=>{C.subTree=O_(C),Z(ut,C.subTree,C,U,null)};Ct?O.type.__asyncLoader().then(()=>!C.isUnmounted&&ee()):ee()}else{const ee=C.subTree=O_(C);m(null,ee,P,H,C,U,X),O.el=ee.el}if(Tt&&Rn(Tt,U),!Ct&&(dt=gt&&gt.onVnodeMounted)){const ee=O;Rn(()=>lr(dt,Nt,ee),U)}(O.shapeFlag&256||Nt&&Og(Nt.vnode)&&Nt.vnode.shapeFlag&256)&&C.a&&Rn(C.a,U),C.isMounted=!0,O=P=H=null}},et=C.effect=new Nb(tt,()=>Gb(K),C.scope),K=C.update=()=>et.run();K.id=C.uid,Ko(C,!0),K()},D=(C,O,P)=>{O.component=C;const H=C.vnode.props;C.vnode=O,C.next=null,f8(C,O.props,H,P),g8(C,O.children,P),iu(),T2(),ru()},V=(C,O,P,H,U,X,lt,tt,et=!1)=>{const K=C&&C.children,dt=C?C.shapeFlag:0,ut=O.children,{patchFlag:gt,shapeFlag:mt}=O;if(gt>0){if(gt&128){B(K,ut,P,H,U,X,lt,tt,et);return}else if(gt&256){Y(K,ut,P,H,U,X,lt,tt,et);return}}mt&8?(dt&16&&at(K,U,X),ut!==K&&u(P,ut)):dt&16?mt&16?B(K,ut,P,H,U,X,lt,tt,et):at(K,U,X,!0):(dt&8&&u(P,""),mt&16&&T(ut,P,H,U,X,lt,tt,et))},Y=(C,O,P,H,U,X,lt,tt,et)=>{C=C||nc,O=O||nc;const K=C.length,dt=O.length,ut=Math.min(K,dt);let gt;for(gt=0;gt<ut;gt++){const mt=O[gt]=et?no(O[gt]):ur(O[gt]);m(C[gt],mt,P,null,U,X,lt,tt,et)}K>dt?at(C,U,X,!0,!1,ut):T(O,P,H,U,X,lt,tt,et,ut)},B=(C,O,P,H,U,X,lt,tt,et)=>{let K=0;const dt=O.length;let ut=C.length-1,gt=dt-1;for(;K<=ut&&K<=gt;){const mt=C[K],Tt=O[K]=et?no(O[K]):ur(O[K]);if(la(mt,Tt))m(mt,Tt,P,null,U,X,lt,tt,et);else break;K++}for(;K<=ut&&K<=gt;){const mt=C[ut],Tt=O[gt]=et?no(O[gt]):ur(O[gt]);if(la(mt,Tt))m(mt,Tt,P,null,U,X,lt,tt,et);else break;ut--,gt--}if(K>ut){if(K<=gt){const mt=gt+1,Tt=mt<dt?O[mt].el:H;for(;K<=gt;)m(null,O[K]=et?no(O[K]):ur(O[K]),P,Tt,U,X,lt,tt,et),K++}}else if(K>gt)for(;K<=ut;)z(C[K],U,X,!0),K++;else{const mt=K,Tt=K,Nt=new Map;for(K=Tt;K<=gt;K++){const ye=O[K]=et?no(O[K]):ur(O[K]);ye.key!=null&&Nt.set(ye.key,K)}let Ct,ee=0;const Ee=gt-Tt+1;let _e=!1,Vs=0;const ci=new Array(Ee);for(K=0;K<Ee;K++)ci[K]=0;for(K=mt;K<=ut;K++){const ye=C[K];if(ee>=Ee){z(ye,U,X,!0);continue}let hn;if(ye.key!=null)hn=Nt.get(ye.key);else for(Ct=Tt;Ct<=gt;Ct++)if(ci[Ct-Tt]===0&&la(ye,O[Ct])){hn=Ct;break}hn===void 0?z(ye,U,X,!0):(ci[hn-Tt]=K+1,hn>=Vs?Vs=hn:_e=!0,m(ye,O[hn],P,null,U,X,lt,tt,et),ee++)}const fn=_e?_8(ci):nc;for(Ct=fn.length-1,K=Ee-1;K>=0;K--){const ye=Tt+K,hn=O[ye],_l=ye+1<dt?O[ye+1].el:H;ci[K]===0?m(null,hn,P,_l,U,X,lt,tt,et):_e&&(Ct<0||K!==fn[Ct]?q(hn,P,_l,2):Ct--)}}},q=(C,O,P,H,U=null)=>{const{el:X,type:lt,transition:tt,children:et,shapeFlag:K}=C;if(K&6){q(C.component.subTree,O,P,H);return}if(K&128){C.suspense.move(O,P,H);return}if(K&64){lt.move(C,O,P,F);return}if(lt===Ln){i(X,O,P);for(let ut=0;ut<et.length;ut++)q(et[ut],O,P,H);i(C.anchor,O,P);return}if(lt===$g){b(C,O,P);return}if(H!==2&&K&1&&tt)if(H===0)tt.beforeEnter(X),i(X,O,P),Rn(()=>tt.enter(X),U);else{const{leave:ut,delayLeave:gt,afterLeave:mt}=tt,Tt=()=>i(X,O,P),Nt=()=>{ut(X,()=>{Tt(),mt&&mt()})};gt?gt(X,Tt,Nt):Nt()}else i(X,O,P)},z=(C,O,P,H=!1,U=!1)=>{const{type:X,props:lt,ref:tt,children:et,dynamicChildren:K,shapeFlag:dt,patchFlag:ut,dirs:gt}=C;if(tt!=null&&L1(tt,null,P,C,!0),dt&256){O.ctx.deactivate(C);return}const mt=dt&1&&gt,Tt=!Og(C);let Nt;if(Tt&&(Nt=lt&&lt.onVnodeBeforeUnmount)&&lr(Nt,O,C),dt&6)rt(C.component,P,H);else{if(dt&128){C.suspense.unmount(P,H);return}mt&&qo(C,null,O,"beforeUnmount"),dt&64?C.type.remove(C,O,P,U,F,H):K&&(X!==Ln||ut>0&&ut&64)?at(K,O,P,!1,!0):(X===Ln&&ut&384||!U&&dt&16)&&at(et,O,P),H&&Q(C)}(Tt&&(Nt=lt&&lt.onVnodeUnmounted)||mt)&&Rn(()=>{Nt&&lr(Nt,O,C),mt&&qo(C,null,O,"unmounted")},P)},Q=C=>{const{type:O,el:P,anchor:H,transition:U}=C;if(O===Ln){nt(P,H);return}if(O===$g){v(C);return}const X=()=>{r(P),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(C.shapeFlag&1&&U&&!U.persisted){const{leave:lt,delayLeave:tt}=U,et=()=>lt(P,X);tt?tt(C.el,X,et):et()}else X()},nt=(C,O)=>{let P;for(;C!==O;)P=h(C),r(C),C=P;r(O)},rt=(C,O,P)=>{const{bum:H,scope:U,update:X,subTree:lt,um:tt}=C;H&&Ig(H),U.stop(),X&&(X.active=!1,z(lt,C,O,P)),tt&&Rn(tt,O),Rn(()=>{C.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},at=(C,O,P,H=!1,U=!1,X=0)=>{for(let lt=X;lt<C.length;lt++)z(C[lt],O,P,H,U)},W=C=>C.shapeFlag&6?W(C.component.subTree):C.shapeFlag&128?C.suspense.next():h(C.anchor||C.el),G=(C,O,P)=>{C==null?O._vnode&&z(O._vnode,null,null,!0):m(O._vnode||null,C,O,null,null,null,P),T2(),VR(),O._vnode=C},F={p:m,um:z,m:q,r:Q,mt:$,mc:T,pc:V,pbc:S,n:W,o:e};let j,Z;return t&&([j,Z]=t(F)),{render:G,hydrate:j,createApp:c8(G,j)}}function Ko({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function aI(e,t,n=!1){const i=e.children,r=t.children;if(pt(i)&&pt(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=no(r[s]),a.el=o.el),n||aI(o,a)),a.type===Kp&&(a.el=o.el)}}function _8(e){const t=e.slice(),n=[0];let i,r,s,o,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(r=n[n.length-1],e[r]<c){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<c?s=a+1:o=a;c<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const y8=e=>e.__isTeleport,Ln=Symbol.for("v-fgt"),Kp=Symbol.for("v-txt"),Xi=Symbol.for("v-cmt"),$g=Symbol.for("v-stc"),bf=[];let Bi=null;function ct(e=!1){bf.push(Bi=e?null:[])}function v8(){bf.pop(),Bi=bf[bf.length-1]||null}let Wf=1;function D2(e){Wf+=e}function lI(e){return e.dynamicChildren=Wf>0?Bi||nc:null,v8(),Wf>0&&Bi&&Bi.push(e),e}function ft(e,t,n,i,r,s){return lI(M(e,t,n,i,r,s,!0))}function jb(e,t,n,i,r){return lI(Ot(e,t,n,i,r,!0))}function O1(e){return e?e.__v_isVNode===!0:!1}function la(e,t){return e.type===t.type&&e.key===t.key}const Zp="__vInternal",cI=({key:e})=>e??null,Ng=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Pe(e)||cn(e)||kt(e)?{i:Xn,r:e,k:t,f:!!n}:e:null);function M(e,t=null,n=null,i=0,r=null,s=e===Ln?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&cI(t),ref:t&&Ng(t),scopeId:Yp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Xn};return a?(Xb(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=Pe(n)?8:16),Wf>0&&!o&&Bi&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Bi.push(l),l}const Ot=b8;function b8(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===t8)&&(e=Xi),O1(e)){const a=xo(e,t,!0);return n&&Xb(a,n),Wf>0&&!s&&Bi&&(a.shapeFlag&6?Bi[Bi.indexOf(e)]=a:Bi.push(a)),a.patchFlag|=-2,a}if(O8(e)&&(e=e.__vccOpts),t){t=w8(t);let{class:a,style:l}=t;a&&!Pe(a)&&(t.class=Fn(a)),ce(l)&&(OR(l)&&!pt(l)&&(l=De({},l)),t.style=Ze(l))}const o=Pe(e)?1:P4(e)?128:y8(e)?64:ce(e)?4:kt(e)?2:0;return M(e,t,n,i,r,o,s,!0)}function w8(e){return e?OR(e)||Zp in e?De({},e):e:null}function xo(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=e,a=t?x8(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&cI(a),ref:t&&t.ref?n&&r?pt(r)?r.concat(Ng(t)):[r,Ng(t)]:Ng(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ln?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&xo(e.ssContent),ssFallback:e.ssFallback&&xo(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function ie(e=" ",t=0){return Ot(Kp,null,e,t)}function Jp(e,t){const n=Ot($g,null,e);return n.staticCount=t,n}function Rt(e="",t=!1){return t?(ct(),jb(Xi,null,e)):Ot(Xi,null,e)}function ur(e){return e==null||typeof e=="boolean"?Ot(Xi):pt(e)?Ot(Ln,null,e.slice()):typeof e=="object"?no(e):Ot(Kp,null,String(e))}function no(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:xo(e)}function Xb(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(pt(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),Xb(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(Zp in t)?t._ctx=Xn:r===3&&Xn&&(Xn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else kt(t)?(t={default:t,_ctx:Xn},n=32):(t=String(t),i&64?(n=16,t=[ie(t)]):n=8);e.children=t,e.shapeFlag|=n}function x8(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Fn([t.class,i.class]));else if(r==="style")t.style=Ze([t.style,i.style]);else if(zp(r)){const s=t[r],o=i[r];o&&s!==o&&!(pt(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function lr(e,t,n,i=null){xi(e,t,7,[n,i])}const E8=eI();let T8=0;function S8(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||E8,s={uid:T8++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new vR(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:iI(i,r),emitsOptions:GR(i,r),emit:null,emitted:null,propsDefaults:me,inheritAttrs:i.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=O4.bind(null,s),e.ce&&e.ce(s),s}let je=null;const C8=()=>je||Xn;let qb,vl,P2="__VUE_INSTANCE_SETTERS__";(vl=v1()[P2])||(vl=v1()[P2]=[]),vl.push(e=>je=e),qb=e=>{vl.length>1?vl.forEach(t=>t(e)):vl[0](e)};const _c=e=>{qb(e),e.scope.on()},Ma=()=>{je&&je.scope.off(),qb(null)};function uI(e){return e.vnode.shapeFlag&4}let Vf=!1;function A8(e,t=!1){Vf=t;const{props:n,children:i}=e.vnode,r=uI(e);u8(e,n,r,t),d8(e,i);const s=r?M8(e,t):void 0;return Vf=!1,s}function M8(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Wb(new Proxy(e.ctx,n8));const{setup:i}=n;if(i){const r=e.setupContext=i.length>1?I8(e):null;_c(e),iu();const s=bo(i,e,0,[e.props,r]);if(ru(),Ma(),dR(s)){if(s.then(Ma,Ma),t)return s.then(o=>{F2(e,o,t)}).catch(o=>{Bp(o,e,0)});e.asyncDep=s}else F2(e,s,t)}else fI(e,t)}function F2(e,t,n){kt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ce(t)&&(e.setupState=PR(t)),fI(e,n)}let z2;function fI(e,t,n){const i=e.type;if(!e.render){if(!t&&z2&&!i.render){const r=i.template||Ub(e).template;if(r){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,c=De(De({isCustomElement:s,delimiters:a},o),l);i.render=z2(r,c)}}e.render=i.render||ji}_c(e),iu(),i8(e),ru(),Ma()}function R8(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return zn(e,"get","$attrs"),t[n]}}))}function I8(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return R8(e)},slots:e.slots,emit:e.emit,expose:t}}function Qp(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(PR(Wb(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in vf)return vf[n](e)},has(t,n){return n in t||n in vf}}))}function L8(e,t=!0){return kt(e)?e.displayName||e.name:e.name||t&&e.__name}function O8(e){return kt(e)&&"__vccOpts"in e}const Vi=(e,t)=>C4(e,t,Vf);function rs(e,t,n){const i=arguments.length;return i===2?ce(t)&&!pt(t)?O1(t)?Ot(e,null,[t]):Ot(e,t):Ot(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&O1(n)&&(n=[n]),Ot(e,t,n))}const k8=Symbol.for("v-scx"),$8=()=>fs(k8),N8="3.3.4",D8="http://www.w3.org/2000/svg",ca=typeof document<"u"?document:null,W2=ca&&ca.createElement("template"),P8={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?ca.createElementNS(D8,e):ca.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>ca.createTextNode(e),createComment:e=>ca.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ca.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{W2.innerHTML=i?`<svg>${e}</svg>`:e;const a=W2.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function F8(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function z8(e,t,n){const i=e.style,r=Pe(n);if(n&&!r){if(t&&!Pe(t))for(const s in t)n[s]==null&&k1(i,s,"");for(const s in n)k1(i,s,n[s])}else{const s=i.display;r?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const V2=/\s*!important$/;function k1(e,t,n){if(pt(n))n.forEach(i=>k1(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=W8(e,t);V2.test(n)?e.setProperty(nu(i),n.replace(V2,""),"important"):e[i]=n}}const H2=["Webkit","Moz","ms"],N_={};function W8(e,t){const n=N_[t];if(n)return n;let i=Ir(t);if(i!=="filter"&&i in e)return N_[t]=i;i=Vp(i);for(let r=0;r<H2.length;r++){const s=H2[r]+i;if(s in e)return N_[t]=s}return t}const G2="http://www.w3.org/1999/xlink";function V8(e,t,n,i,r){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(G2,t.slice(6,t.length)):e.setAttributeNS(G2,t,n);else{const s=UF(t);n==null||s&&!_R(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function H8(e,t,n,i,r,s,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,r,s),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=_R(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function Kb(e,t,n,i){e.addEventListener(t,n,i)}function G8(e,t,n,i){e.removeEventListener(t,n,i)}function B8(e,t,n,i,r=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[a,l]=U8(t);if(i){const c=s[t]=X8(i,r);Kb(e,a,c,l)}else o&&(G8(e,a,o,l),s[t]=void 0)}}const B2=/(?:Once|Passive|Capture)$/;function U8(e){let t;if(B2.test(e)){t={};let i;for(;i=e.match(B2);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):nu(e.slice(2)),t]}let D_=0;const Y8=Promise.resolve(),j8=()=>D_||(Y8.then(()=>D_=0),D_=Date.now());function X8(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;xi(q8(i,n.value),t,5,[i])};return n.value=e,n.attached=j8(),n}function q8(e,t){if(pt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const U2=/^on[a-z]/,K8=(e,t,n,i,r=!1,s,o,a,l)=>{t==="class"?F8(e,i,r):t==="style"?z8(e,n,i):zp(t)?Ib(t)||B8(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Z8(e,t,i,r))?H8(e,t,i,s,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),V8(e,t,i,r))};function Z8(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&U2.test(t)&&kt(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||U2.test(t)&&Pe(n)?!1:t in e}const Gs="transition",ku="animation",t0=(e,{slots:t})=>rs(H4,J8(e),t);t0.displayName="Transition";const hI={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};t0.props=De({},YR,hI);const Zo=(e,t=[])=>{pt(e)?e.forEach(n=>n(...t)):e&&e(...t)},Y2=e=>e?pt(e)?e.some(t=>t.length>1):e.length>1:!1;function J8(e){const t={};for(const R in e)R in hI||(t[R]=e[R]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,g=Q8(r),m=g&&g[0],p=g&&g[1],{onBeforeEnter:_,onEnter:y,onEnterCancelled:b,onLeave:v,onLeaveCancelled:x,onBeforeAppear:w=_,onAppear:E=y,onAppearCancelled:T=b}=t,I=(R,k,$)=>{Jo(R,k?u:a),Jo(R,k?c:o),$&&$()},S=(R,k)=>{R._isLeaving=!1,Jo(R,f),Jo(R,d),Jo(R,h),k&&k()},A=R=>(k,$)=>{const L=R?E:y,N=()=>I(k,R,$);Zo(L,[k,N]),j2(()=>{Jo(k,R?l:s),Bs(k,R?u:a),Y2(L)||X2(k,i,m,N)})};return De(t,{onBeforeEnter(R){Zo(_,[R]),Bs(R,s),Bs(R,o)},onBeforeAppear(R){Zo(w,[R]),Bs(R,l),Bs(R,c)},onEnter:A(!1),onAppear:A(!0),onLeave(R,k){R._isLeaving=!0;const $=()=>S(R,k);Bs(R,f),n7(),Bs(R,h),j2(()=>{R._isLeaving&&(Jo(R,f),Bs(R,d),Y2(v)||X2(R,i,p,$))}),Zo(v,[R,$])},onEnterCancelled(R){I(R,!1),Zo(b,[R])},onAppearCancelled(R){I(R,!0),Zo(T,[R])},onLeaveCancelled(R){S(R),Zo(x,[R])}})}function Q8(e){if(e==null)return null;if(ce(e))return[P_(e.enter),P_(e.leave)];{const t=P_(e);return[t,t]}}function P_(e){return zF(e)}function Bs(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function Jo(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function j2(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let t7=0;function X2(e,t,n,i){const r=e._endId=++t7,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=e7(e,t);if(!o)return i();const c=o+"end";let u=0;const f=()=>{e.removeEventListener(c,h),s()},h=d=>{d.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(c,h)}function e7(e,t){const n=window.getComputedStyle(e),i=g=>(n[g]||"").split(", "),r=i(`${Gs}Delay`),s=i(`${Gs}Duration`),o=q2(r,s),a=i(`${ku}Delay`),l=i(`${ku}Duration`),c=q2(a,l);let u=null,f=0,h=0;t===Gs?o>0&&(u=Gs,f=o,h=s.length):t===ku?c>0&&(u=ku,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?Gs:ku:null,h=u?u===Gs?s.length:l.length:0);const d=u===Gs&&/\b(transform|all)(,|$)/.test(i(`${Gs}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function q2(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>K2(n)+K2(e[i])))}function K2(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function n7(){return document.body.offsetHeight}const em=e=>{const t=e.props["onUpdate:modelValue"]||!1;return pt(t)?n=>Ig(t,n):t},i7={deep:!0,created(e,t,n){e._assign=em(n),Kb(e,"change",()=>{const i=e._modelValue,r=Hf(e),s=e.checked,o=e._assign;if(pt(i)){const a=kb(i,r),l=a!==-1;if(s&&!l)o(i.concat(r));else if(!s&&l){const c=[...i];c.splice(a,1),o(c)}}else if(eu(i)){const a=new Set(i);s?a.add(r):a.delete(r),o(a)}else o(gI(e,s))})},mounted:Z2,beforeUpdate(e,t,n){e._assign=em(n),Z2(e,t,n)}};function Z2(e,{value:t,oldValue:n},i){e._modelValue=t,pt(t)?e.checked=kb(t,i.props.value)>-1:eu(t)?e.checked=t.has(i.props.value):t!==n&&(e.checked=Th(t,gI(e,!0)))}const dI={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=eu(t);Kb(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?pR(Hf(o)):Hf(o));e._assign(e.multiple?r?new Set(s):s:s[0])}),e._assign=em(i)},mounted(e,{value:t}){J2(e,t)},beforeUpdate(e,t,n){e._assign=em(n)},updated(e,{value:t}){J2(e,t)}};function J2(e,t){const n=e.multiple;if(!(n&&!pt(t)&&!eu(t))){for(let i=0,r=e.options.length;i<r;i++){const s=e.options[i],o=Hf(s);if(n)pt(t)?s.selected=kb(t,o)>-1:s.selected=t.has(o);else if(Th(Hf(s),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Hf(e){return"_value"in e?e._value:e.value}function gI(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Q2={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):$u(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),$u(e,!0),i.enter(e)):i.leave(e,()=>{$u(e,!1)}):$u(e,t))},beforeUnmount(e,{value:t}){$u(e,t)}};function $u(e,t){e.style.display=t?e._vod:"none"}const r7=De({patchProp:K8},P8);let tT;function s7(){return tT||(tT=m8(r7))}const o7=(...e)=>{const t=s7().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=a7(i);if(!r)return;const s=t._component;!kt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function a7(e){return Pe(e)?document.querySelector(e):e}var l7=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const c7=Symbol();var eT;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(eT||(eT={}));function u7(){const e=jF(!0),t=e.run(()=>NR({}));let n=[],i=[];const r=Wb({install(s){r._a=s,s.provide(c7,r),s.config.globalProperties.$pinia=r,i.forEach(o=>n.push(o)),i=[]},use(s){return!this._a&&!l7?i.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Fl=typeof window<"u";function f7(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const se=Object.assign;function F_(e,t){const n={};for(const i in t){const r=t[i];n[i]=Ki(r)?r.map(e):e(r)}return n}const wf=()=>{},Ki=Array.isArray,h7=/\/$/,d7=e=>e.replace(h7,"");function z_(e,t,n="/"){let i,r={},s="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),r=e(s)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=_7(i??t,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function g7(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function nT(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function m7(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&yc(t.matched[i],n.matched[r])&&mI(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function yc(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function mI(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!p7(e[n],t[n]))return!1;return!0}function p7(e,t){return Ki(e)?iT(e,t):Ki(t)?iT(t,e):e===t}function iT(e,t){return Ki(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function _7(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var Gf;(function(e){e.pop="pop",e.push="push"})(Gf||(Gf={}));var xf;(function(e){e.back="back",e.forward="forward",e.unknown=""})(xf||(xf={}));function y7(e){if(!e)if(Fl){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),d7(e)}const v7=/^[^#]+#/;function b7(e,t){return e.replace(v7,"#")+t}function w7(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const e0=()=>({left:window.pageXOffset,top:window.pageYOffset});function x7(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=w7(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function rT(e,t){return(history.state?history.state.position-t:-1)+e}const $1=new Map;function E7(e,t){$1.set(e,t)}function T7(e){const t=$1.get(e);return $1.delete(e),t}let S7=()=>location.protocol+"//"+location.host;function pI(e,t){const{pathname:n,search:i,hash:r}=t,s=e.indexOf("#");if(s>-1){let a=r.includes(e.slice(s))?e.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),nT(l,"")}return nT(n,e)+i+r}function C7(e,t,n,i){let r=[],s=[],o=null;const a=({state:h})=>{const d=pI(e,location),g=n.value,m=t.value;let p=0;if(h){if(n.value=d,t.value=h,o&&o===g){o=null;return}p=m?h.position-m.position:0}else i(d);r.forEach(_=>{_(n.value,g,{delta:p,type:Gf.pop,direction:p?p>0?xf.forward:xf.back:xf.unknown})})};function l(){o=n.value}function c(h){r.push(h);const d=()=>{const g=r.indexOf(h);g>-1&&r.splice(g,1)};return s.push(d),d}function u(){const{history:h}=window;h.state&&h.replaceState(se({},h.state,{scroll:e0()}),"")}function f(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function sT(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?e0():null}}function A7(e){const{history:t,location:n}=window,i={value:pI(e,n)},r={value:t.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:S7()+e+l;try{t[u?"replaceState":"pushState"](c,"",h),r.value=c}catch(d){console.error(d),n[u?"replace":"assign"](h)}}function o(l,c){const u=se({},t.state,sT(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=se({},r.value,t.state,{forward:l,scroll:e0()});s(u.current,u,!0);const f=se({},sT(i.value,l,null),{position:u.position+1},c);s(l,f,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function M7(e){e=y7(e);const t=A7(e),n=C7(e,t.state,t.location,t.replace);function i(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=se({location:"",base:e,go:i,createHref:b7.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function R7(e){return typeof e=="string"||e&&typeof e=="object"}function _I(e){return typeof e=="string"||typeof e=="symbol"}const Us={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},yI=Symbol("");var oT;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(oT||(oT={}));function vc(e,t){return se(new Error,{type:e,[yI]:!0},t)}function Br(e,t){return e instanceof Error&&yI in e&&(t==null||!!(e.type&t))}const aT="[^/]+?",I7={sensitive:!1,strict:!1,start:!0,end:!0},L7=/[.+*?^${}()[\]/\\]/g;function O7(e,t){const n=se({},I7,t),i=[];let r=n.start?"^":"";const s=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const h=c[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(r+="/"),r+=h.value.replace(L7,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:m,optional:p,regexp:_}=h;s.push({name:g,repeatable:m,optional:p});const y=_||aT;if(y!==aT){d+=10;try{new RegExp(`(${y})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${g}" (${y}): `+v.message)}}let b=m?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(b=p&&c.length<2?`(?:/${b})`:"/"+b),p&&(b+="?"),r+=b,d+=20,p&&(d+=-8),m&&(d+=-20),y===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const d=u[h]||"",g=s[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function l(c){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const d of h)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:p}=d,_=g in c?c[g]:"";if(Ki(_)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const y=Ki(_)?_.join("/"):_;if(!y)if(p)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=y}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function k7(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function $7(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const s=k7(i[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-i.length)===1){if(lT(i))return 1;if(lT(r))return-1}return r.length-i.length}function lT(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const N7={type:0,value:""},D7=/[a-zA-Z0-9_]/;function P7(e){if(!e)return[[]];if(e==="/")return[[N7]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function f(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):h();break;case 4:h(),n=i;break;case 1:l==="("?n=2:D7.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}function F7(e,t,n){const i=O7(P7(e.path),n),r=se(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function z7(e,t){const n=[],i=new Map;t=fT({strict:!1,end:!0,sensitive:!1},t);function r(u){return i.get(u)}function s(u,f,h){const d=!h,g=W7(u);g.aliasOf=h&&h.record;const m=fT(t,u),p=[g];if("alias"in u){const b=typeof u.alias=="string"?[u.alias]:u.alias;for(const v of b)p.push(se({},g,{components:h?h.record.components:g.components,path:v,aliasOf:h?h.record:g}))}let _,y;for(const b of p){const{path:v}=b;if(f&&v[0]!=="/"){const x=f.record.path,w=x[x.length-1]==="/"?"":"/";b.path=f.record.path+(v&&w+v)}if(_=F7(b,f,m),h?h.alias.push(_):(y=y||_,y!==_&&y.alias.push(_),d&&u.name&&!uT(_)&&o(u.name)),g.children){const x=g.children;for(let w=0;w<x.length;w++)s(x[w],_,h&&h.children[w])}h=h||_,(_.record.components&&Object.keys(_.record.components).length||_.record.name||_.record.redirect)&&l(_)}return y?()=>{o(y)}:wf}function o(u){if(_I(u)){const f=i.get(u);f&&(i.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let f=0;for(;f<n.length&&$7(u,n[f])>=0&&(u.record.path!==n[f].record.path||!vI(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!uT(u)&&i.set(u.record.name,u)}function c(u,f){let h,d={},g,m;if("name"in u&&u.name){if(h=i.get(u.name),!h)throw vc(1,{location:u});m=h.record.name,d=se(cT(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),u.params&&cT(u.params,h.keys.map(y=>y.name))),g=h.stringify(d)}else if("path"in u)g=u.path,h=n.find(y=>y.re.test(g)),h&&(d=h.parse(g),m=h.record.name);else{if(h=f.name?i.get(f.name):n.find(y=>y.re.test(f.path)),!h)throw vc(1,{location:u,currentLocation:f});m=h.record.name,d=se({},f.params,u.params),g=h.stringify(d)}const p=[];let _=h;for(;_;)p.unshift(_.record),_=_.parent;return{name:m,path:g,params:d,matched:p,meta:H7(p)}}return e.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function cT(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function W7(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:V7(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function V7(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function uT(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function H7(e){return e.reduce((t,n)=>se(t,n.meta),{})}function fT(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function vI(e,t){return t.children.some(n=>n===e||vI(e,n))}const bI=/#/g,G7=/&/g,B7=/\//g,U7=/=/g,Y7=/\?/g,wI=/\+/g,j7=/%5B/g,X7=/%5D/g,xI=/%5E/g,q7=/%60/g,EI=/%7B/g,K7=/%7C/g,TI=/%7D/g,Z7=/%20/g;function Zb(e){return encodeURI(""+e).replace(K7,"|").replace(j7,"[").replace(X7,"]")}function J7(e){return Zb(e).replace(EI,"{").replace(TI,"}").replace(xI,"^")}function N1(e){return Zb(e).replace(wI,"%2B").replace(Z7,"+").replace(bI,"%23").replace(G7,"%26").replace(q7,"`").replace(EI,"{").replace(TI,"}").replace(xI,"^")}function Q7(e){return N1(e).replace(U7,"%3D")}function t9(e){return Zb(e).replace(bI,"%23").replace(Y7,"%3F")}function e9(e){return e==null?"":t9(e).replace(B7,"%2F")}function nm(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function n9(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(wI," "),o=s.indexOf("="),a=nm(o<0?s:s.slice(0,o)),l=o<0?null:nm(s.slice(o+1));if(a in t){let c=t[a];Ki(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function hT(e){let t="";for(let n in e){const i=e[n];if(n=Q7(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ki(i)?i.map(s=>s&&N1(s)):[i&&N1(i)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function i9(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Ki(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const r9=Symbol(""),dT=Symbol(""),Jb=Symbol(""),SI=Symbol(""),D1=Symbol("");function Nu(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function io(e,t,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=f=>{f===!1?a(vc(4,{from:n,to:t})):f instanceof Error?a(f):R7(f)?a(vc(2,{from:t,to:f})):(s&&i.enterCallbacks[r]===s&&typeof f=="function"&&s.push(f),o())},c=e.call(i&&i.instances[r],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(f=>a(f))})}function W_(e,t,n,i){const r=[];for(const s of e)for(const o in s.components){let a=s.components[o];if(!(t!=="beforeRouteEnter"&&!s.instances[o]))if(s9(a)){const c=(a.__vccOpts||a)[t];c&&r.push(io(c,n,i,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=f7(c)?c.default:c;s.components[o]=u;const h=(u.__vccOpts||u)[t];return h&&io(h,n,i,s,o)()}))}}return r}function s9(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function gT(e){const t=fs(Jb),n=fs(SI),i=Vi(()=>t.resolve(Er(e.to))),r=Vi(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(yc.bind(null,u));if(h>-1)return h;const d=mT(l[c-2]);return c>1&&mT(u)===d&&f[f.length-1].path!==d?f.findIndex(yc.bind(null,l[c-2])):h}),s=Vi(()=>r.value>-1&&c9(n.params,i.value.params)),o=Vi(()=>r.value>-1&&r.value===n.matched.length-1&&mI(n.params,i.value.params));function a(l={}){return l9(l)?t[Er(e.replace)?"replace":"push"](Er(e.to)).catch(wf):Promise.resolve()}return{route:i,href:Vi(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const o9=oi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:gT,setup(e,{slots:t}){const n=Gp(gT(e)),{options:i}=fs(Jb),r=Vi(()=>({[pT(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[pT(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:rs("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),a9=o9;function l9(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function c9(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!Ki(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function mT(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const pT=(e,t,n)=>e??t??n,u9=oi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=fs(D1),r=Vi(()=>e.route||i.value),s=fs(dT,0),o=Vi(()=>{let c=Er(s);const{matched:u}=r.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=Vi(()=>r.value.matched[o.value]);kg(dT,Vi(()=>o.value+1)),kg(r9,a),kg(D1,r);const l=NR();return Lg(()=>[l.value,a.value,e.name],([c,u,f],[h,d,g])=>{u&&(u.instances[f]=c,d&&d!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!yc(u,d)||!h)&&(u.enterCallbacks[f]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=r.value,u=e.name,f=a.value,h=f&&f.components[u];if(!h)return _T(n.default,{Component:h,route:c});const d=f.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,p=rs(h,se({},g,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return _T(n.default,{Component:p,route:c})||p}}});function _T(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const CI=u9;function f9(e){const t=z7(e.routes,e),n=e.parseQuery||n9,i=e.stringifyQuery||hT,r=e.history,s=Nu(),o=Nu(),a=Nu(),l=x4(Us);let c=Us;Fl&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=F_.bind(null,W=>""+W),f=F_.bind(null,e9),h=F_.bind(null,nm);function d(W,G){let F,j;return _I(W)?(F=t.getRecordMatcher(W),j=G):j=W,t.addRoute(j,F)}function g(W){const G=t.getRecordMatcher(W);G&&t.removeRoute(G)}function m(){return t.getRoutes().map(W=>W.record)}function p(W){return!!t.getRecordMatcher(W)}function _(W,G){if(G=se({},G||l.value),typeof W=="string"){const P=z_(n,W,G.path),H=t.resolve({path:P.path},G),U=r.createHref(P.fullPath);return se(P,H,{params:h(H.params),hash:nm(P.hash),redirectedFrom:void 0,href:U})}let F;if("path"in W)F=se({},W,{path:z_(n,W.path,G.path).path});else{const P=se({},W.params);for(const H in P)P[H]==null&&delete P[H];F=se({},W,{params:f(P)}),G.params=f(G.params)}const j=t.resolve(F,G),Z=W.hash||"";j.params=u(h(j.params));const C=g7(i,se({},W,{hash:J7(Z),path:j.path})),O=r.createHref(C);return se({fullPath:C,hash:Z,query:i===hT?i9(W.query):W.query||{}},j,{redirectedFrom:void 0,href:O})}function y(W){return typeof W=="string"?z_(n,W,l.value.path):se({},W)}function b(W,G){if(c!==W)return vc(8,{from:G,to:W})}function v(W){return E(W)}function x(W){return v(se(y(W),{replace:!0}))}function w(W){const G=W.matched[W.matched.length-1];if(G&&G.redirect){const{redirect:F}=G;let j=typeof F=="function"?F(W):F;return typeof j=="string"&&(j=j.includes("?")||j.includes("#")?j=y(j):{path:j},j.params={}),se({query:W.query,hash:W.hash,params:"path"in j?{}:W.params},j)}}function E(W,G){const F=c=_(W),j=l.value,Z=W.state,C=W.force,O=W.replace===!0,P=w(F);if(P)return E(se(y(P),{state:typeof P=="object"?se({},Z,P.state):Z,force:C,replace:O}),G||F);const H=F;H.redirectedFrom=G;let U;return!C&&m7(i,j,F)&&(U=vc(16,{to:H,from:j}),q(j,j,!0,!1)),(U?Promise.resolve(U):S(H,j)).catch(X=>Br(X)?Br(X,2)?X:B(X):V(X,H,j)).then(X=>{if(X){if(Br(X,2))return E(se({replace:O},y(X.to),{state:typeof X.to=="object"?se({},Z,X.to.state):Z,force:C}),G||H)}else X=R(H,j,!0,O,Z);return A(H,j,X),X})}function T(W,G){const F=b(W,G);return F?Promise.reject(F):Promise.resolve()}function I(W){const G=nt.values().next().value;return G&&typeof G.runWithContext=="function"?G.runWithContext(W):W()}function S(W,G){let F;const[j,Z,C]=h9(W,G);F=W_(j.reverse(),"beforeRouteLeave",W,G);for(const P of j)P.leaveGuards.forEach(H=>{F.push(io(H,W,G))});const O=T.bind(null,W,G);return F.push(O),at(F).then(()=>{F=[];for(const P of s.list())F.push(io(P,W,G));return F.push(O),at(F)}).then(()=>{F=W_(Z,"beforeRouteUpdate",W,G);for(const P of Z)P.updateGuards.forEach(H=>{F.push(io(H,W,G))});return F.push(O),at(F)}).then(()=>{F=[];for(const P of C)if(P.beforeEnter)if(Ki(P.beforeEnter))for(const H of P.beforeEnter)F.push(io(H,W,G));else F.push(io(P.beforeEnter,W,G));return F.push(O),at(F)}).then(()=>(W.matched.forEach(P=>P.enterCallbacks={}),F=W_(C,"beforeRouteEnter",W,G),F.push(O),at(F))).then(()=>{F=[];for(const P of o.list())F.push(io(P,W,G));return F.push(O),at(F)}).catch(P=>Br(P,8)?P:Promise.reject(P))}function A(W,G,F){a.list().forEach(j=>I(()=>j(W,G,F)))}function R(W,G,F,j,Z){const C=b(W,G);if(C)return C;const O=G===Us,P=Fl?history.state:{};F&&(j||O?r.replace(W.fullPath,se({scroll:O&&P&&P.scroll},Z)):r.push(W.fullPath,Z)),l.value=W,q(W,G,F,O),B()}let k;function $(){k||(k=r.listen((W,G,F)=>{if(!rt.listening)return;const j=_(W),Z=w(j);if(Z){E(se(Z,{replace:!0}),j).catch(wf);return}c=j;const C=l.value;Fl&&E7(rT(C.fullPath,F.delta),e0()),S(j,C).catch(O=>Br(O,12)?O:Br(O,2)?(E(O.to,j).then(P=>{Br(P,20)&&!F.delta&&F.type===Gf.pop&&r.go(-1,!1)}).catch(wf),Promise.reject()):(F.delta&&r.go(-F.delta,!1),V(O,j,C))).then(O=>{O=O||R(j,C,!1),O&&(F.delta&&!Br(O,8)?r.go(-F.delta,!1):F.type===Gf.pop&&Br(O,20)&&r.go(-1,!1)),A(j,C,O)}).catch(wf)}))}let L=Nu(),N=Nu(),D;function V(W,G,F){B(W);const j=N.list();return j.length?j.forEach(Z=>Z(W,G,F)):console.error(W),Promise.reject(W)}function Y(){return D&&l.value!==Us?Promise.resolve():new Promise((W,G)=>{L.add([W,G])})}function B(W){return D||(D=!W,$(),L.list().forEach(([G,F])=>W?F(W):G()),L.reset()),W}function q(W,G,F,j){const{scrollBehavior:Z}=e;if(!Fl||!Z)return Promise.resolve();const C=!F&&T7(rT(W.fullPath,0))||(j||!F)&&history.state&&history.state.scroll||null;return zR().then(()=>Z(W,G,C)).then(O=>O&&x7(O)).catch(O=>V(O,W,G))}const z=W=>r.go(W);let Q;const nt=new Set,rt={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,hasRoute:p,getRoutes:m,resolve:_,options:e,push:v,replace:x,go:z,back:()=>z(-1),forward:()=>z(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:N.add,isReady:Y,install(W){const G=this;W.component("RouterLink",a9),W.component("RouterView",CI),W.config.globalProperties.$router=G,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>Er(l)}),Fl&&!Q&&l.value===Us&&(Q=!0,v(r.location).catch(Z=>{}));const F={};for(const Z in Us)Object.defineProperty(F,Z,{get:()=>l.value[Z],enumerable:!0});W.provide(Jb,G),W.provide(SI,IR(F)),W.provide(D1,l);const j=W.unmount;nt.add(W),W.unmount=function(){nt.delete(W),nt.size<1&&(c=Us,k&&k(),k=null,l.value=Us,Q=!1,D=!1),j()}}};function at(W){return W.reduce((G,F)=>G.then(()=>I(F)),Promise.resolve())}return rt}function h9(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(c=>yc(c,a))?i.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>yc(c,l))||r.push(l))}return[n,i,r]}const d9=oi({__name:"App",setup(e){return(t,n)=>(ct(),jb(Er(CI)))}}),g9="modulepreload",m9=function(e){return"/"+e},yT={},vT=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=m9(s),s in yT)return;yT[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const f=r[u];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":g9,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};class Zt{constructor(t){Mt(this,"timestamp",null);Mt(this,"positionLat",null);Mt(this,"positionLong",null);Mt(this,"distance",null);Mt(this,"speed",null);Mt(this,"altitude",null);Mt(this,"cadence",null);Mt(this,"heartRate",null);Mt(this,"power",null);Mt(this,"temperature",null);Mt(this,"grade",0);Mt(this,"pace",null);const n=t;this.positionLat=n==null?void 0:n.positionLat,this.positionLong=n==null?void 0:n.positionLong,this.altitude=n==null?void 0:n.altitude,this.cadence=n==null?void 0:n.cadence,this.distance=n==null?void 0:n.distance,this.heartRate=n==null?void 0:n.heartRate,this.speed=n==null?void 0:n.speed,this.timestamp=n==null?void 0:n.timestamp,this.power=n==null?void 0:n.power,this.temperature=n==null?void 0:n.temperature,this.grade=n==null?void 0:n.grade,this.pace=n==null?void 0:n.pace}}function bc(e){const t=Math.floor(e/60),n=e%60;return`${t}:${n<10?"0":""}${n.toFixed(0)}`}function xe(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ha(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function n0(e){let t,n,i;e.length!==2?(t=xe,n=(a,l)=>xe(e(a),l),i=(a,l)=>e(a)-l):(t=e===xe||e===Ha?e:p9,n=e,i=e);function r(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=r(a,l,c,u-1);return f>c&&i(a[f-1],l)>-i(a[f],l)?f-1:f}return{left:r,center:o,right:s}}function p9(){return 0}function AI(e){return e===null?NaN:+e}function*_9(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const y9=n0(xe),v9=y9.right;n0(AI).center;const i0=v9,MI=RI(II),b9=RI(w9);function RI(e){return function(t,n,i=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((i=+i)>=0))throw new RangeError("invalid ry");let{data:r,width:s,height:o}=t;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:r.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!i)return t;const a=n&&e(n),l=i&&e(i),c=r.slice();return a&&l?(bl(a,c,r,s,o),bl(a,r,c,s,o),bl(a,c,r,s,o),wl(l,r,c,s,o),wl(l,c,r,s,o),wl(l,r,c,s,o)):a?(bl(a,r,c,s,o),bl(a,c,r,s,o),bl(a,r,c,s,o)):l&&(wl(l,r,c,s,o),wl(l,c,r,s,o),wl(l,r,c,s,o)),t}}function bl(e,t,n,i,r){for(let s=0,o=i*r;s<o;)e(t,n,s,s+=i,1)}function wl(e,t,n,i,r){for(let s=0,o=i*r;s<i;++s)e(t,n,s,s+o,i)}function w9(e){const t=II(e);return(n,i,r,s,o)=>{r<<=2,s<<=2,o<<=2,t(n,i,r+0,s+0,o),t(n,i,r+1,s+1,o),t(n,i,r+2,s+2,o),t(n,i,r+3,s+3,o)}}function II(e){const t=Math.floor(e);if(t===e)return x9(e);const n=e-t,i=2*e+1;return(r,s,o,a,l)=>{if(!((a-=l)>=o))return;let c=t*s[o];const u=l*t,f=u+l;for(let h=o,d=o+u;h<d;h+=l)c+=s[Math.min(a,h)];for(let h=o,d=a;h<=d;h+=l)c+=s[Math.min(a,h+u)],r[h]=(c+n*(s[Math.max(o,h-f)]+s[Math.min(a,h+f)]))/i,c-=s[Math.max(o,h-u)]}}function x9(e){const t=2*e+1;return(n,i,r,s,o)=>{if(!((s-=o)>=r))return;let a=e*i[r];const l=o*e;for(let c=r,u=r+l;c<u;c+=o)a+=i[Math.min(s,c)];for(let c=r,u=s;c<=u;c+=o)a+=i[Math.min(s,c+l)],n[c]=a/t,a-=i[Math.max(r,c-l)]}}function r0(e,t){let n=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(r=+r)>=r&&++n}return n}function E9(e){return e.length|0}function T9(e){return!(e>0)}function S9(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function C9(e){return t=>e(...t)}function A9(...e){const t=typeof e[e.length-1]=="function"&&C9(e.pop());e=e.map(S9);const n=e.map(E9),i=e.length-1,r=new Array(i+1).fill(0),s=[];if(i<0||n.some(T9))return s;for(;;){s.push(r.map((a,l)=>e[l][a]));let o=i;for(;++r[o]===n[o];){if(o===0)return t?s.map(t):s;r[o--]=0}}}function M9(e,t){var n=0,i=0;return Float64Array.from(e,t===void 0?r=>n+=+r||0:r=>n+=+t(r,i++,e)||0)}function Qb(e,t){let n=0,i,r=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r))}if(n>1)return s/(n-1)}function Sh(e,t){const n=Qb(e,t);return n&&Math.sqrt(n)}function be(e,t){let n,i;if(t===void 0)for(const r of e)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class Tr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[i++]=a),t=o}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=t[--n];n>0&&(i=o,r=t[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}class Ga extends Map{constructor(t,n=kI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(P1(this,t))}has(t){return super.has(P1(this,t))}set(t,n){return super.set(LI(this,t),n)}delete(t){return super.delete(OI(this,t))}}class Ch extends Set{constructor(t,n=kI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(P1(this,t))}add(t){return super.add(LI(this,t))}delete(t){return super.delete(OI(this,t))}}function P1({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function LI({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function OI({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function kI(e){return e!==null&&typeof e=="object"?e.valueOf():e}function F1(e){return e}function Is(e,...t){return tw(e,F1,F1,t)}function oc(e,t,...n){return tw(e,F1,t,n)}function R9(e,t,...n){return tw(e,Array.from,t,n)}function tw(e,t,n,i){return function r(s,o){if(o>=i.length)return n(s);const a=new Ga,l=i[o++];let c=-1;for(const u of s){const f=l(u,++c,s),h=a.get(f);h?h.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,r(f,o));return t(a)}(e,0)}function I9(e,t){return Array.from(t,n=>e[n])}function Bf(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const i=Uint32Array.from(e,(r,s)=>s);return t.length>1?(t=t.map(r=>e.map(r)),i.sort((r,s)=>{for(const o of t){const a=Uf(o[r],o[s]);if(a)return a}})):(n=e.map(n),i.sort((r,s)=>Uf(n[r],n[s]))),I9(e,i)}return e.sort(ew(n))}function ew(e=xe){if(e===xe)return Uf;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function Uf(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function nw(e,t,n){return(t.length!==2?Bf(oc(e,t,n),([i,r],[s,o])=>xe(r,o)||xe(i,s)):Bf(Is(e,n),([i,r],[s,o])=>t(r,o)||xe(i,s))).map(([i])=>i)}const L9=Math.sqrt(50),O9=Math.sqrt(10),k9=Math.sqrt(2);function im(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=L9?10:s>=O9?5:s>=k9?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?im(e,t,n*2):[a,l,c]}function Eo(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,s,o]=i?im(t,e,n):im(e,t,n);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function Yf(e,t,n){return t=+t,e=+e,n=+n,im(e,t,n)[2]}function z1(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?Yf(t,e,n):Yf(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function $I(e,t,n){let i;for(;;){const r=Yf(e,t,n);if(r===i||r===0||!isFinite(r))return[e,t];r>0?(e=Math.floor(e/r)*r,t=Math.ceil(t/r)*r):r<0&&(e=Math.ceil(e*r)/r,t=Math.floor(t*r)/r),i=r}}function iw(e){return Math.max(1,Math.ceil(Math.log(r0(e))/Math.LN2)+1)}function ze(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function $9(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);return i}function qe(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function N9(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);return i}function NI(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?Uf:ew(r);i>n;){if(i-n>600){const l=i-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(t-c*f/l+h)),g=Math.min(i,Math.floor(t+(l-c)*f/l+h));NI(e,t,d,g,r)}const s=e[t];let o=n,a=i;for(Du(e,n,t),r(e[i],s)>0&&Du(e,n,i);o<a;){for(Du(e,o,a),++o,--a;r(e[o],s)<0;)++o;for(;r(e[a],s)>0;)--a}r(e[n],s)===0?Du(e,n,a):(++a,Du(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function Du(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function rw(e,t=xe){let n,i=!1;if(t.length===1){let r;for(const s of e){const o=t(s);(i?xe(o,r)>0:xe(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of e)(i?t(r,n)>0:t(r,r)===0)&&(n=r,i=!0);return n}function To(e,t,n){if(e=Float64Array.from(_9(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return qe(e);if(t>=1)return ze(e);var i,r=(i-1)*t,s=Math.floor(r),o=ze(NI(e,s).subarray(0,s+1)),a=qe(e.subarray(s+1));return o+(a-o)*(r-s)}}function D9(e,t,n=AI){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(r-s)}}function P9(e,t,n){const i=r0(e),r=To(e,.75)-To(e,.25);return i&&r?Math.ceil((n-t)/(2*r*Math.pow(i,-1/3))):1}function DI(e,t,n){const i=r0(e),r=Sh(e);return i&&r?Math.ceil((n-t)*Math.cbrt(i)/(3.49*r)):1}function s0(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function jf(e,t){return To(e,.5,t)}function*F9(e){for(const t of e)yield*t}function PI(e){return Array.from(F9(e))}function FI(e,t){const n=new Ga;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let i,r=0;for(const[s,o]of n)o>r&&(r=o,i=s);return i}function z9(e,t=W9){const n=[];let i,r=!1;for(const s of e)r&&n.push(t(i,s)),i=s,r=!0;return n}function W9(e,t){return[e,t]}function _i(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(r);++i<r;)s[i]=e+i*n;return s}function zI(e,t=xe){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const i=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=xe);const r=(a,l)=>t(n[a],n[l]);let s,o;return e=Uint32Array.from(n,(a,l)=>l),e.sort(t===xe?(a,l)=>Uf(n[a],n[l]):ew(r)),e.forEach((a,l)=>{const c=r(a,s===void 0?a:s);c>=0?((s===void 0||c>0)&&(s=a,o=l),i[a]=o):i[a]=NaN}),i}function V9(e,t=xe){let n,i=!1;if(t.length===1){let r;for(const s of e){const o=t(s);(i?xe(o,r)<0:xe(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of e)(i?t(r,n)<0:t(r,r)===0)&&(n=r,i=!0);return n}function Lr(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function rm(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function H9(e){return e}var V_=1,H_=2,W1=3,sf=4,bT=1e-6;function G9(e){return"translate("+e+",0)"}function B9(e){return"translate(0,"+e+")"}function U9(e){return t=>+e(t)}function Y9(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function j9(){return!this.__axis}function WI(e,t){var n=[],i=null,r=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===V_||e===sf?-1:1,u=e===sf||e===H_?"x":"y",f=e===V_||e===W1?G9:B9;function h(d){var g=i??(t.ticks?t.ticks.apply(t,n):t.domain()),m=r??(t.tickFormat?t.tickFormat.apply(t,n):H9),p=Math.max(s,0)+a,_=t.range(),y=+_[0]+l,b=+_[_.length-1]+l,v=(t.bandwidth?Y9:U9)(t.copy(),l),x=d.selection?d.selection():d,w=x.selectAll(".domain").data([null]),E=x.selectAll(".tick").data(g,t).order(),T=E.exit(),I=E.enter().append("g").attr("class","tick"),S=E.select("line"),A=E.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(I),S=S.merge(I.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),A=A.merge(I.append("text").attr("fill","currentColor").attr(u,c*p).attr("dy",e===V_?"0em":e===W1?"0.71em":"0.32em")),d!==x&&(w=w.transition(d),E=E.transition(d),S=S.transition(d),A=A.transition(d),T=T.transition(d).attr("opacity",bT).attr("transform",function(R){return isFinite(R=v(R))?f(R+l):this.getAttribute("transform")}),I.attr("opacity",bT).attr("transform",function(R){var k=this.parentNode.__axis;return f((k&&isFinite(k=k(R))?k:v(R))+l)})),T.remove(),w.attr("d",e===sf||e===H_?o?"M"+c*o+","+y+"H"+l+"V"+b+"H"+c*o:"M"+l+","+y+"V"+b:o?"M"+y+","+c*o+"V"+l+"H"+b+"V"+c*o:"M"+y+","+l+"H"+b),E.attr("opacity",1).attr("transform",function(R){return f(v(R)+l)}),S.attr(u+"2",c*s),A.attr(u,c*p).text(m),x.filter(j9).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===H_?"start":e===sf?"end":"middle"),x.each(function(){this.__axis=v})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),h):i&&i.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(s=o=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(a=+d,h):a},h.offset=function(d){return arguments.length?(l=+d,h):l},h}function sw(e){return WI(W1,e)}function VI(e){return WI(sf,e)}var X9={value:()=>{}};function HI(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Dg(n)}function Dg(e){this._=e}function q9(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Dg.prototype=HI.prototype={constructor:Dg,on:function(e,t){var n=this._,i=q9(e+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(e=i[s]).type)&&(r=K9(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=i[s]).type)n[r]=wT(n[r],e.name,t);else if(t==null)for(r in n)n[r]=wT(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Dg(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function K9(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function wT(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=X9,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var V1="http://www.w3.org/1999/xhtml";const Ba={svg:"http://www.w3.org/2000/svg",xhtml:V1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function o0(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ba.hasOwnProperty(t)?{space:Ba[t],local:e}:e}function Z9(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===V1&&t.documentElement.namespaceURI===V1?t.createElement(e):t.createElementNS(n,e)}}function J9(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function a0(e){var t=o0(e);return(t.local?J9:Z9)(t)}function Q9(){}function ow(e){return e==null?Q9:function(){return this.querySelector(e)}}function tz(e){typeof e!="function"&&(e=ow(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Qn(i,this._parents)}function ez(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function nz(){return[]}function GI(e){return e==null?nz:function(){return this.querySelectorAll(e)}}function iz(e){return function(){return ez(e.apply(this,arguments))}}function rz(e){typeof e=="function"?e=iz(e):e=GI(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(e.call(l,l.__data__,c,o)),r.push(l));return new Qn(i,r)}function BI(e){return function(){return this.matches(e)}}function UI(e){return function(t){return t.matches(e)}}var sz=Array.prototype.find;function oz(e){return function(){return sz.call(this.children,e)}}function az(){return this.firstElementChild}function lz(e){return this.select(e==null?az:oz(typeof e=="function"?e:UI(e)))}var cz=Array.prototype.filter;function uz(){return Array.from(this.children)}function fz(e){return function(){return cz.call(this.children,e)}}function hz(e){return this.selectAll(e==null?uz:fz(typeof e=="function"?e:UI(e)))}function dz(e){typeof e!="function"&&(e=BI(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Qn(i,this._parents)}function YI(e){return new Array(e.length)}function gz(){return new Qn(this._enter||this._groups.map(YI),this._parents)}function sm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sm.prototype={constructor:sm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function mz(e){return function(){return e}}function pz(e,t,n,i,r,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],i[o]=a):n[o]=new sm(e,s[o]);for(;o<l;++o)(a=t[o])&&(r[o]=a)}function _z(e,t,n,i,r,s,o){var a,l,c=new Map,u=t.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(l=t[a])&&(h[a]=d=o.call(l,l.__data__,a,t)+"",c.has(d)?r[a]=l:c.set(d,l));for(a=0;a<f;++a)d=o.call(e,s[a],a,s)+"",(l=c.get(d))?(i[a]=l,l.__data__=s[a],c.delete(d)):n[a]=new sm(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(h[a])===l&&(r[a]=l)}function yz(e){return e.__data__}function vz(e,t){if(!arguments.length)return Array.from(this,yz);var n=t?_z:pz,i=this._parents,r=this._groups;typeof e!="function"&&(e=mz(e));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],f=r[c],h=f.length,d=bz(e.call(u,u&&u.__data__,c,i)),g=d.length,m=a[c]=new Array(g),p=o[c]=new Array(g),_=l[c]=new Array(h);n(u,f,m,p,_,d,t);for(var y=0,b=0,v,x;y<g;++y)if(v=m[y]){for(y>=b&&(b=y+1);!(x=p[b])&&++b<g;);v._next=x||null}}return o=new Qn(o,i),o._enter=a,o._exit=l,o}function bz(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wz(){return new Qn(this._exit||this._groups.map(YI),this._parents)}function xz(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function Ez(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=i[l],f=c.length,h=a[l]=new Array(f),d,g=0;g<f;++g)(d=c[g]||u[g])&&(h[g]=d);for(;l<r;++l)a[l]=n[l];return new Qn(a,this._parents)}function Tz(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Sz(e){e||(e=Cz);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],a=o.length,l=r[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Qn(r,this._parents).order()}function Cz(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Az(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Mz(){return Array.from(this)}function Rz(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function Iz(){let e=0;for(const t of this)++e;return e}function Lz(){return!this.node()}function Oz(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,o=r.length,a;s<o;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function kz(e){return function(){this.removeAttribute(e)}}function $z(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nz(e,t){return function(){this.setAttribute(e,t)}}function Dz(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Pz(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Fz(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function zz(e,t){var n=o0(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?$z:kz:typeof t=="function"?n.local?Fz:Pz:n.local?Dz:Nz)(n,t))}function jI(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Wz(e){return function(){this.style.removeProperty(e)}}function Vz(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Hz(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Gz(e,t,n){return arguments.length>1?this.each((t==null?Wz:typeof t=="function"?Hz:Vz)(e,t,n??"")):wc(this.node(),e)}function wc(e,t){return e.style.getPropertyValue(t)||jI(e).getComputedStyle(e,null).getPropertyValue(t)}function Bz(e){return function(){delete this[e]}}function Uz(e,t){return function(){this[e]=t}}function Yz(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function jz(e,t){return arguments.length>1?this.each((t==null?Bz:typeof t=="function"?Yz:Uz)(e,t)):this.node()[e]}function XI(e){return e.trim().split(/^|\s+/)}function aw(e){return e.classList||new qI(e)}function qI(e){this._node=e,this._names=XI(e.getAttribute("class")||"")}qI.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function KI(e,t){for(var n=aw(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function ZI(e,t){for(var n=aw(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Xz(e){return function(){KI(this,e)}}function qz(e){return function(){ZI(this,e)}}function Kz(e,t){return function(){(t.apply(this,arguments)?KI:ZI)(this,e)}}function Zz(e,t){var n=XI(e+"");if(arguments.length<2){for(var i=aw(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Kz:t?Xz:qz)(n,t))}function Jz(){this.textContent=""}function Qz(e){return function(){this.textContent=e}}function tW(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function eW(e){return arguments.length?this.each(e==null?Jz:(typeof e=="function"?tW:Qz)(e)):this.node().textContent}function nW(){this.innerHTML=""}function iW(e){return function(){this.innerHTML=e}}function rW(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function sW(e){return arguments.length?this.each(e==null?nW:(typeof e=="function"?rW:iW)(e)):this.node().innerHTML}function oW(){this.nextSibling&&this.parentNode.appendChild(this)}function aW(){return this.each(oW)}function lW(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cW(){return this.each(lW)}function uW(e){var t=typeof e=="function"?e:a0(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function fW(){return null}function hW(e,t){var n=typeof e=="function"?e:a0(e),i=t==null?fW:typeof t=="function"?t:ow(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function dW(){var e=this.parentNode;e&&e.removeChild(this)}function gW(){return this.each(dW)}function mW(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pW(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _W(e){return this.select(e?pW:mW)}function yW(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vW(e){return function(t){e.call(this,t,this.__data__)}}function bW(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function wW(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function xW(e,t,n){return function(){var i=this.__on,r,s=vW(t);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function EW(e,t,n){var i=bW(e+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?xW:wW,r=0;r<s;++r)this.each(a(i[r],t,n));return this}function JI(e,t,n){var i=jI(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function TW(e,t){return function(){return JI(this,e,t)}}function SW(e,t){return function(){return JI(this,e,t.apply(this,arguments))}}function CW(e,t){return this.each((typeof t=="function"?SW:TW)(e,t))}function*AW(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var QI=[null];function Qn(e,t){this._groups=e,this._parents=t}function Ah(){return new Qn([[document.documentElement]],QI)}function MW(){return this}Qn.prototype=Ah.prototype={constructor:Qn,select:tz,selectAll:rz,selectChild:lz,selectChildren:hz,filter:dz,data:vz,enter:gz,exit:wz,join:xz,merge:Ez,selection:MW,order:Tz,sort:Sz,call:Az,nodes:Mz,node:Rz,size:Iz,empty:Lz,each:Oz,attr:zz,style:Gz,property:jz,classed:Zz,text:eW,html:sW,raise:aW,lower:cW,append:uW,insert:hW,remove:gW,clone:_W,datum:yW,on:EW,dispatch:CW,[Symbol.iterator]:AW};function Ei(e){return typeof e=="string"?new Qn([[document.querySelector(e)]],[document.documentElement]):new Qn([[e]],QI)}function RW(e){let t;for(;t=e.sourceEvent;)e=t;return e}function lw(e,t){if(e=RW(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}function su(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Mh(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Do(){}var Ua=.7,xc=1/Ua,ac="\\s*([+-]?\\d+)\\s*",Xf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",IW=/^#([0-9a-f]{3,8})$/,LW=new RegExp(`^rgb\\(${ac},${ac},${ac}\\)$`),OW=new RegExp(`^rgb\\(${Sr},${Sr},${Sr}\\)$`),kW=new RegExp(`^rgba\\(${ac},${ac},${ac},${Xf}\\)$`),$W=new RegExp(`^rgba\\(${Sr},${Sr},${Sr},${Xf}\\)$`),NW=new RegExp(`^hsl\\(${Xf},${Sr},${Sr}\\)$`),DW=new RegExp(`^hsla\\(${Xf},${Sr},${Sr},${Xf}\\)$`),xT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};su(Do,Ya,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ET,formatHex:ET,formatHex8:PW,formatHsl:FW,formatRgb:TT,toString:TT});function ET(){return this.rgb().formatHex()}function PW(){return this.rgb().formatHex8()}function FW(){return tL(this).formatHsl()}function TT(){return this.rgb().formatRgb()}function Ya(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=IW.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ST(t):n===3?new Xe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Od(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Od(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=LW.exec(e))?new Xe(t[1],t[2],t[3],1):(t=OW.exec(e))?new Xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kW.exec(e))?Od(t[1],t[2],t[3],t[4]):(t=$W.exec(e))?Od(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=NW.exec(e))?MT(t[1],t[2]/100,t[3]/100,1):(t=DW.exec(e))?MT(t[1],t[2]/100,t[3]/100,t[4]):xT.hasOwnProperty(e)?ST(xT[e]):e==="transparent"?new Xe(NaN,NaN,NaN,0):null}function ST(e){return new Xe(e>>16&255,e>>8&255,e&255,1)}function Od(e,t,n,i){return i<=0&&(e=t=n=NaN),new Xe(e,t,n,i)}function cw(e){return e instanceof Do||(e=Ya(e)),e?(e=e.rgb(),new Xe(e.r,e.g,e.b,e.opacity)):new Xe}function Or(e,t,n,i){return arguments.length===1?cw(e):new Xe(e,t,n,i??1)}function Xe(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}su(Xe,Or,Mh(Do,{brighter(e){return e=e==null?xc:Math.pow(xc,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ua:Math.pow(Ua,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xe(Ra(this.r),Ra(this.g),Ra(this.b),om(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CT,formatHex:CT,formatHex8:zW,formatRgb:AT,toString:AT}));function CT(){return`#${da(this.r)}${da(this.g)}${da(this.b)}`}function zW(){return`#${da(this.r)}${da(this.g)}${da(this.b)}${da((isNaN(this.opacity)?1:this.opacity)*255)}`}function AT(){const e=om(this.opacity);return`${e===1?"rgb(":"rgba("}${Ra(this.r)}, ${Ra(this.g)}, ${Ra(this.b)}${e===1?")":`, ${e})`}`}function om(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ra(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function da(e){return e=Ra(e),(e<16?"0":"")+e.toString(16)}function MT(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hi(e,t,n,i)}function tL(e){if(e instanceof Hi)return new Hi(e.h,e.s,e.l,e.opacity);if(e instanceof Do||(e=Ya(e)),!e)return new Hi;if(e instanceof Hi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(t===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new Hi(o,a,l,e.opacity)}function H1(e,t,n,i){return arguments.length===1?tL(e):new Hi(e,t,n,i??1)}function Hi(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}su(Hi,H1,Mh(Do,{brighter(e){return e=e==null?xc:Math.pow(xc,e),new Hi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ua:Math.pow(Ua,e),new Hi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Xe(G_(e>=240?e-240:e+120,r,i),G_(e,r,i),G_(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Hi(RT(this.h),kd(this.s),kd(this.l),om(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=om(this.opacity);return`${e===1?"hsl(":"hsla("}${RT(this.h)}, ${kd(this.s)*100}%, ${kd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function RT(e){return e=(e||0)%360,e<0?e+360:e}function kd(e){return Math.max(0,Math.min(1,e||0))}function G_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const eL=Math.PI/180,nL=180/Math.PI,am=18,iL=.96422,rL=1,sL=.82521,oL=4/29,lc=6/29,aL=3*lc*lc,WW=lc*lc*lc;function lL(e){if(e instanceof Cr)return new Cr(e.l,e.a,e.b,e.opacity);if(e instanceof ss)return cL(e);e instanceof Xe||(e=cw(e));var t=j_(e.r),n=j_(e.g),i=j_(e.b),r=B_((.2225045*t+.7168786*n+.0606169*i)/rL),s,o;return t===n&&n===i?s=o=r:(s=B_((.4360747*t+.3850649*n+.1430804*i)/iL),o=B_((.0139322*t+.0971045*n+.7141733*i)/sL)),new Cr(116*r-16,500*(s-r),200*(r-o),e.opacity)}function G1(e,t,n,i){return arguments.length===1?lL(e):new Cr(e,t,n,i??1)}function Cr(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}su(Cr,G1,Mh(Do,{brighter(e){return new Cr(this.l+am*(e??1),this.a,this.b,this.opacity)},darker(e){return new Cr(this.l-am*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=iL*U_(t),e=rL*U_(e),n=sL*U_(n),new Xe(Y_(3.1338561*t-1.6168667*e-.4906146*n),Y_(-.9787684*t+1.9161415*e+.033454*n),Y_(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function B_(e){return e>WW?Math.pow(e,1/3):e/aL+oL}function U_(e){return e>lc?e*e*e:aL*(e-oL)}function Y_(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function j_(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function VW(e){if(e instanceof ss)return new ss(e.h,e.c,e.l,e.opacity);if(e instanceof Cr||(e=lL(e)),e.a===0&&e.b===0)return new ss(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*nL;return new ss(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function B1(e,t,n,i){return arguments.length===1?VW(e):new ss(e,t,n,i??1)}function ss(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function cL(e){if(isNaN(e.h))return new Cr(e.l,0,0,e.opacity);var t=e.h*eL;return new Cr(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}su(ss,B1,Mh(Do,{brighter(e){return new ss(this.h,this.c,this.l+am*(e??1),this.opacity)},darker(e){return new ss(this.h,this.c,this.l-am*(e??1),this.opacity)},rgb(){return cL(this).rgb()}}));var uL=-.14861,uw=1.78277,fw=-.29227,l0=-.90649,qf=1.97294,IT=qf*l0,LT=qf*uw,OT=uw*fw-l0*uL;function HW(e){if(e instanceof Ia)return new Ia(e.h,e.s,e.l,e.opacity);e instanceof Xe||(e=cw(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(OT*i+IT*t-LT*n)/(OT+IT-LT),s=i-r,o=(qf*(n-r)-fw*s)/l0,a=Math.sqrt(o*o+s*s)/(qf*r*(1-r)),l=a?Math.atan2(o,s)*nL-120:NaN;return new Ia(l<0?l+360:l,a,r,e.opacity)}function kr(e,t,n,i){return arguments.length===1?HW(e):new Ia(e,t,n,i??1)}function Ia(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}su(Ia,kr,Mh(Do,{brighter(e){return e=e==null?xc:Math.pow(xc,e),new Ia(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ua:Math.pow(Ua,e),new Ia(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*eL,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Xe(255*(t+n*(uL*i+uw*r)),255*(t+n*(fw*i+l0*r)),255*(t+n*(qf*i)),this.opacity)}}));function GW(e,t,n,i,r){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*i+o*r)/6}function BW(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],o=i>0?e[i-1]:2*r-s,a=i<t-1?e[i+2]:2*s-r;return GW((n-i/t)*t,o,r,s,a)}}const c0=e=>()=>e;function fL(e,t){return function(n){return e+n*t}}function UW(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function hw(e,t){var n=t-e;return n?fL(e,n>180||n<-180?n-360*Math.round(n/360):n):c0(isNaN(e)?t:e)}function YW(e){return(e=+e)==1?un:function(t,n){return n-t?UW(t,n,e):c0(isNaN(t)?n:t)}}function un(e,t){var n=t-e;return n?fL(e,n):c0(isNaN(e)?t:e)}const ja=function e(t){var n=YW(t);function i(r,s){var o=n((r=Or(r)).r,(s=Or(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),c=un(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function jW(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Or(t[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=e(i),r=e(r),s=e(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var hL=jW(BW);function XW(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function qW(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function KW(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=ou(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function ZW(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function sn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function JW(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=ou(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var U1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,X_=new RegExp(U1.source,"g");function QW(e){return function(){return e}}function tV(e){return function(t){return e(t)+""}}function dL(e,t){var n=U1.lastIndex=X_.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(i=U1.exec(e))&&(r=X_.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:sn(i,r)})),n=X_.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?tV(l[0].x):QW(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function ou(e,t){var n=typeof t,i;return t==null||n==="boolean"?c0(t):(n==="number"?sn:n==="string"?(i=Ya(t))?(t=i,ja):dL:t instanceof Ya?ja:t instanceof Date?ZW:qW(t)?XW:Array.isArray(t)?KW:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?JW:sn)(e,t)}function u0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var kT=180/Math.PI,Y1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gL(e,t,n,i,r,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*kT,skewX:Math.atan(l)*kT,scaleX:o,scaleY:a}}var $d;function eV(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Y1:gL(t.a,t.b,t.c,t.d,t.e,t.f)}function nV(e){return e==null||($d||($d=document.createElementNS("http://www.w3.org/2000/svg","g")),$d.setAttribute("transform",e),!(e=$d.transform.baseVal.consolidate()))?Y1:(e=e.matrix,gL(e.a,e.b,e.c,e.d,e.e,e.f))}function mL(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,g){if(c!==f||u!==h){var m=d.push("translate(",null,t,null,n);g.push({i:m-4,x:sn(c,f)},{i:m-2,x:sn(u,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:sn(c,u)})):u&&f.push(r(f)+"rotate("+u+i)}function a(c,u,f,h){c!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:sn(c,u)}):u&&f.push(r(f)+"skewX("+u+i)}function l(c,u,f,h,d,g){if(c!==f||u!==h){var m=d.push(r(d)+"scale(",null,",",null,")");g.push({i:m-4,x:sn(c,f)},{i:m-2,x:sn(u,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var g=-1,m=h.length,p;++g<m;)f[(p=h[g]).i]=p.x(d);return f.join("")}}}var iV=mL(eV,"px, ","px)","deg)"),rV=mL(nV,", ",")",")");function sV(e){return function(t,n){var i=e((t=H1(t)).h,(n=H1(n)).h),r=un(t.s,n.s),s=un(t.l,n.l),o=un(t.opacity,n.opacity);return function(a){return t.h=i(a),t.s=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const oV=sV(hw);function aV(e,t){var n=un((e=G1(e)).l,(t=G1(t)).l),i=un(e.a,t.a),r=un(e.b,t.b),s=un(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=r(o),e.opacity=s(o),e+""}}function lV(e){return function(t,n){var i=e((t=B1(t)).h,(n=B1(n)).h),r=un(t.c,n.c),s=un(t.l,n.l),o=un(t.opacity,n.opacity);return function(a){return t.h=i(a),t.c=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const cV=lV(hw);function pL(e){return function t(n){n=+n;function i(r,s){var o=e((r=kr(r)).h,(s=kr(s)).h),a=un(r.s,s.s),l=un(r.l,s.l),c=un(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,n)),r.opacity=c(u),r+""}}return i.gamma=t,i}(1)}pL(hw);var dw=pL(un);function f0(e,t){t===void 0&&(t=e,e=ou);for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[a](o-a)}}function Zi(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}var Ec=0,of=0,Pu=0,_L=1e3,lm,af,cm=0,Xa=0,h0=0,Kf=typeof performance=="object"&&performance.now?performance:Date,yL=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function gw(){return Xa||(yL(uV),Xa=Kf.now()+h0)}function uV(){Xa=0}function um(){this._call=this._time=this._next=null}um.prototype=vL.prototype={constructor:um,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?gw():+n)+(t==null?0:+t),!this._next&&af!==this&&(af?af._next=this:lm=this,af=this),this._call=e,this._time=n,j1()},stop:function(){this._call&&(this._call=null,this._time=1/0,j1())}};function vL(e,t,n){var i=new um;return i.restart(e,t,n),i}function fV(){gw(),++Ec;for(var e=lm,t;e;)(t=Xa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ec}function $T(){Xa=(cm=Kf.now())+h0,Ec=of=0;try{fV()}finally{Ec=0,dV(),Xa=0}}function hV(){var e=Kf.now(),t=e-cm;t>_L&&(h0-=t,cm=e)}function dV(){for(var e,t=lm,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:lm=n);af=e,j1(i)}function j1(e){if(!Ec){of&&(of=clearTimeout(of));var t=e-Xa;t>24?(e<1/0&&(of=setTimeout($T,e-Kf.now()-h0)),Pu&&(Pu=clearInterval(Pu))):(Pu||(cm=Kf.now(),Pu=setInterval(hV,_L)),Ec=1,yL($T))}}function NT(e,t,n){var i=new um;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var gV=HI("start","end","cancel","interrupt"),mV=[],bL=0,DT=1,X1=2,Pg=3,PT=4,q1=5,Fg=6;function d0(e,t,n,i,r,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;pV(e,n,{name:t,index:i,group:r,on:gV,tween:mV,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:bL})}function mw(e,t){var n=rr(e,t);if(n.state>bL)throw new Error("too late; already scheduled");return n}function Pr(e,t){var n=rr(e,t);if(n.state>Pg)throw new Error("too late; already running");return n}function rr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function pV(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=vL(s,0,n.time);function s(c){n.state=DT,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,h,d;if(n.state!==DT)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===Pg)return NT(o);d.state===PT?(d.state=Fg,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=Fg,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if(NT(function(){n.state===Pg&&(n.state=PT,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=X1,n.on.call("start",e,e.__data__,n.index,n.group),n.state===X1){for(n.state=Pg,r=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=d);r.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=q1,1),f=-1,h=r.length;++f<h;)r[f].call(e,u);n.state===q1&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Fg,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function _V(e,t){var n=e.__transition,i,r,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){s=!1;continue}r=i.state>X1&&i.state<q1,i.state=Fg,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}s&&delete e.__transition}}function yV(e){return this.each(function(){_V(this,e)})}function vV(e,t){var n,i;return function(){var r=Pr(this,e),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function bV(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Pr(this,e),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function wV(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=rr(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?vV:bV)(n,e,t))}function pw(e,t,n){var i=e._id;return e.each(function(){var r=Pr(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return rr(r,i).value[t]}}function wL(e,t){var n;return(typeof t=="number"?sn:t instanceof Ya?ja:(n=Ya(t))?(t=n,ja):dL)(e,t)}function xV(e){return function(){this.removeAttribute(e)}}function EV(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TV(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttribute(e);return o===r?null:o===i?s:s=t(i=o,n)}}function SV(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?s:s=t(i=o,n)}}function CV(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function AV(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function MV(e,t){var n=o0(e),i=n==="transform"?rV:wL;return this.attrTween(e,typeof t=="function"?(n.local?AV:CV)(n,i,pw(this,"attr."+e,t)):t==null?(n.local?EV:xV)(n):(n.local?SV:TV)(n,i,t))}function RV(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function IV(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function LV(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&IV(e,s)),n}return r._value=t,r}function OV(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&RV(e,s)),n}return r._value=t,r}function kV(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=o0(e);return this.tween(n,(i.local?LV:OV)(i,t))}function $V(e,t){return function(){mw(this,e).delay=+t.apply(this,arguments)}}function NV(e,t){return t=+t,function(){mw(this,e).delay=t}}function DV(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$V:NV)(t,e)):rr(this.node(),t).delay}function PV(e,t){return function(){Pr(this,e).duration=+t.apply(this,arguments)}}function FV(e,t){return t=+t,function(){Pr(this,e).duration=t}}function zV(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?PV:FV)(t,e)):rr(this.node(),t).duration}function WV(e,t){if(typeof t!="function")throw new Error;return function(){Pr(this,e).ease=t}}function VV(e){var t=this._id;return arguments.length?this.each(WV(t,e)):rr(this.node(),t).ease}function HV(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pr(this,e).ease=n}}function GV(e){if(typeof e!="function")throw new Error;return this.each(HV(this._id,e))}function BV(e){typeof e!="function"&&(e=BI(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new xs(i,this._parents,this._name,this._id)}function UV(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=t[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<i;++a)o[a]=t[a];return new xs(o,this._parents,this._name,this._id)}function YV(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function jV(e,t,n){var i,r,s=YV(t)?mw:Pr;return function(){var o=s(this,e),a=o.on;a!==i&&(r=(i=a).copy()).on(t,n),o.on=r}}function XV(e,t){var n=this._id;return arguments.length<2?rr(this.node(),n).on.on(e):this.each(jV(n,e,t))}function qV(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function KV(){return this.on("end.remove",qV(this._id))}function ZV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ow(e));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,d0(c[h],t,n,h,c,rr(u,n)));return new xs(s,this._parents,t,n)}function JV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=GI(e));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),d,g=rr(u,n),m=0,p=h.length;m<p;++m)(d=h[m])&&d0(d,t,n,m,h,g);s.push(h),o.push(u)}return new xs(s,o,t,n)}var QV=Ah.prototype.constructor;function tH(){return new QV(this._groups,this._parents)}function eH(e,t){var n,i,r;return function(){var s=wc(this,e),o=(this.style.removeProperty(e),wc(this,e));return s===o?null:s===n&&o===i?r:r=t(n=s,i=o)}}function xL(e){return function(){this.style.removeProperty(e)}}function nH(e,t,n){var i,r=n+"",s;return function(){var o=wc(this,e);return o===r?null:o===i?s:s=t(i=o,n)}}function iH(e,t,n){var i,r,s;return function(){var o=wc(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),wc(this,e))),o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a))}}function rH(e,t){var n,i,r,s="style."+t,o="end."+s,a;return function(){var l=Pr(this,e),c=l.on,u=l.value[s]==null?a||(a=xL(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(o,r=u),l.on=i}}function sH(e,t,n){var i=(e+="")=="transform"?iV:wL;return t==null?this.styleTween(e,eH(e,i)).on("end.style."+e,xL(e)):typeof t=="function"?this.styleTween(e,iH(e,i,pw(this,"style."+e,t))).each(rH(this._id,e)):this.styleTween(e,nH(e,i,t),n).on("end.style."+e,null)}function oH(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function aH(e,t,n){var i,r;function s(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&oH(e,o,n)),i}return s._value=t,s}function lH(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,aH(e,t,n??""))}function cH(e){return function(){this.textContent=e}}function uH(e){return function(){var t=e(this);this.textContent=t??""}}function fH(e){return this.tween("text",typeof e=="function"?uH(pw(this,"text",e)):cH(e==null?"":e+""))}function hH(e){return function(t){this.textContent=e.call(this,t)}}function dH(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&hH(r)),t}return i._value=e,i}function gH(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,dH(e))}function mH(){for(var e=this._name,t=this._id,n=EL(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=rr(l,t);d0(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new xs(i,this._parents,e,n)}function pH(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};n.each(function(){var c=Pr(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&s()})}var _H=0;function xs(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function EL(){return++_H}var Ur=Ah.prototype;xs.prototype={constructor:xs,select:ZV,selectAll:JV,selectChild:Ur.selectChild,selectChildren:Ur.selectChildren,filter:BV,merge:UV,selection:tH,transition:mH,call:Ur.call,nodes:Ur.nodes,node:Ur.node,size:Ur.size,empty:Ur.empty,each:Ur.each,on:XV,attr:MV,attrTween:kV,style:sH,styleTween:lH,text:fH,textTween:gH,remove:KV,tween:wV,delay:DV,duration:zV,ease:VV,easeVarying:GV,end:pH,[Symbol.iterator]:Ur[Symbol.iterator]};function yH(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var vH={time:null,delay:0,duration:250,ease:yH};function bH(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function wH(e){var t,n;e instanceof xs?(t=e._id,e=e._name):(t=EL(),(n=vH).time=gw(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&d0(l,e,t,c,o,n||bH(l,t));return new xs(i,this._parents,e,t)}Ah.prototype.interrupt=yV;Ah.prototype.transition=wH;const K1=Math.PI,Z1=2*K1,ra=1e-6,xH=Z1-ra;function TL(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function EH(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return TL;const n=10**t;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let SL=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?TL:EH(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,s,o){this._append`C${+t},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,i,r,s){if(t=+t,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-t,c=r-n,u=o-t,f=a-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>ra)if(!(Math.abs(f*l-c*u)>ra)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let d=i-o,g=r-a,m=l*l+c*c,p=d*d+g*g,_=Math.sqrt(m),y=Math.sqrt(h),b=s*Math.tan((K1-Math.acos((m+h-p)/(2*_*y)))/2),v=b/y,x=b/_;Math.abs(v-1)>ra&&this._append`L${t+v*u},${n+v*f}`,this._append`A${s},${s},0,0,${+(f*d>u*g)},${this._x1=t+x*l},${this._y1=n+x*c}`}}arc(t,n,i,r,s,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=t+a,u=n+l,f=1^o,h=o?r-s:s-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>ra||Math.abs(this._y1-u)>ra)&&this._append`L${c},${u}`,i&&(h<0&&(h=h%Z1+Z1),h>xH?this._append`A${i},${i},0,1,${f},${t-a},${n-l}A${i},${i},0,1,${f},${this._x1=c},${this._y1=u}`:h>ra&&this._append`A${i},${i},0,${+(h>=K1)},${f},${this._x1=t+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function os(e=3){return new SL(+e)}var TH=Array.prototype,CL=TH.slice;function SH(e,t){return e-t}function CH(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}const ro=e=>()=>e;function AH(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=MH(e,t[n]))return r;return 0}function MH(e,t){for(var n=t[0],i=t[1],r=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],c=l[0],u=l[1],f=e[a],h=f[0],d=f[1];if(RH(l,f,t))return 0;u>i!=d>i&&n<(h-c)*(i-u)/(d-u)+c&&(r=-r)}return r}function RH(e,t,n){var i;return IH(e,t,n)&&LH(e[i=+(e[0]===t[0])],n[i],t[i])}function IH(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function LH(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function OH(){}var Yr=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function J1(){var e=1,t=1,n=iw,i=l;function r(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(SH);else{const f=be(c,kH);for(u=Eo(...$I(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(c,f))}function s(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var h=[],d=[];return o(c,f,function(g){i(g,c,f),CH(g)>0?h.push([g]):d.push(g)}),d.forEach(function(g){for(var m=0,p=h.length,_;m<p;++m)if(AH((_=h[m])[0],g)!==-1){_.push(g);return}}),{type:"MultiPolygon",value:u,coordinates:h}}function o(c,u,f){var h=new Array,d=new Array,g,m,p,_,y,b;for(g=m=-1,_=Qo(c[0],u),Yr[_<<1].forEach(v);++g<e-1;)p=_,_=Qo(c[g+1],u),Yr[p|_<<1].forEach(v);for(Yr[_<<0].forEach(v);++m<t-1;){for(g=-1,_=Qo(c[m*e+e],u),y=Qo(c[m*e],u),Yr[_<<1|y<<2].forEach(v);++g<e-1;)p=_,_=Qo(c[m*e+e+g+1],u),b=y,y=Qo(c[m*e+g+1],u),Yr[p|_<<1|y<<2|b<<3].forEach(v);Yr[_|y<<3].forEach(v)}for(g=-1,y=c[m*e]>=u,Yr[y<<2].forEach(v);++g<e-1;)b=y,y=Qo(c[m*e+g+1],u),Yr[y<<2|b<<3].forEach(v);Yr[y<<3].forEach(v);function v(x){var w=[x[0][0]+g,x[0][1]+m],E=[x[1][0]+g,x[1][1]+m],T=a(w),I=a(E),S,A;(S=d[T])?(A=h[I])?(delete d[S.end],delete h[A.start],S===A?(S.ring.push(E),f(S.ring)):h[S.start]=d[A.end]={start:S.start,end:A.end,ring:S.ring.concat(A.ring)}):(delete d[S.end],S.ring.push(E),d[S.end=I]=S):(S=h[I])?(A=d[T])?(delete h[S.start],delete d[A.end],S===A?(S.ring.push(E),f(S.ring)):h[A.start]=d[S.end]={start:A.start,end:S.end,ring:A.ring.concat(S.ring)}):(delete h[S.start],S.ring.unshift(w),h[S.start=T]=S):h[T]=d[I]={start:T,end:I,ring:[w,E]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function l(c,u,f){c.forEach(function(h){var d=h[0],g=h[1],m=d|0,p=g|0,_=q_(u[p*e+m]);d>0&&d<e&&m===d&&(h[0]=FT(d,q_(u[p*e+m-1]),_,f)),g>0&&g<t&&p===g&&(h[1]=FT(g,q_(u[(p-1)*e+m]),_,f))})}return r.contour=s,r.size=function(c){if(!arguments.length)return[e,t];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,r},r.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?ro(CL.call(c)):ro(c),r):n},r.smooth=function(c){return arguments.length?(i=c?l:OH,r):i===l},r}function kH(e){return isFinite(e)?e:NaN}function Qo(e,t){return e==null?!1:+e>=t}function q_(e){return e==null||isNaN(e=+e)?-1/0:e}function FT(e,t,n,i){const r=i-t,s=n-t,o=isFinite(r)||isFinite(s)?r/s:Math.sign(r)/Math.sign(s);return isNaN(o)?e:e+o-.5}function $H(e){return e[0]}function NH(e){return e[1]}function DH(){return 1}function PH(){var e=$H,t=NH,n=DH,i=960,r=500,s=20,o=2,a=s*3,l=i+a*2>>o,c=r+a*2>>o,u=ro(20);function f(y){var b=new Float32Array(l*c),v=Math.pow(2,-o),x=-1;for(const k of y){var w=(e(k,++x,y)+a)*v,E=(t(k,x,y)+a)*v,T=+n(k,x,y);if(T&&w>=0&&w<l&&E>=0&&E<c){var I=Math.floor(w),S=Math.floor(E),A=w-I-.5,R=E-S-.5;b[I+S*l]+=(1-A)*(1-R)*T,b[I+1+S*l]+=A*(1-R)*T,b[I+1+(S+1)*l]+=A*R*T,b[I+(S+1)*l]+=(1-A)*R*T}}return MI({data:b,width:l,height:c},s*v),b}function h(y){var b=f(y),v=u(b),x=Math.pow(2,2*o);return Array.isArray(v)||(v=Eo(Number.MIN_VALUE,ze(b)/x,v)),J1().size([l,c]).thresholds(v.map(w=>w*x))(b).map((w,E)=>(w.value=+v[E],d(w)))}h.contours=function(y){var b=f(y),v=J1().size([l,c]),x=Math.pow(2,2*o),w=E=>{E=+E;var T=d(v.contour(b,E*x));return T.value=E,T};return Object.defineProperty(w,"max",{get:()=>ze(b)/x}),w};function d(y){return y.coordinates.forEach(g),y}function g(y){y.forEach(m)}function m(y){y.forEach(p)}function p(y){y[0]=y[0]*Math.pow(2,o)-a,y[1]=y[1]*Math.pow(2,o)-a}function _(){return a=s*3,l=i+a*2>>o,c=r+a*2>>o,h}return h.x=function(y){return arguments.length?(e=typeof y=="function"?y:ro(+y),h):e},h.y=function(y){return arguments.length?(t=typeof y=="function"?y:ro(+y),h):t},h.weight=function(y){return arguments.length?(n=typeof y=="function"?y:ro(+y),h):n},h.size=function(y){if(!arguments.length)return[i,r];var b=+y[0],v=+y[1];if(!(b>=0&&v>=0))throw new Error("invalid size");return i=b,r=v,_()},h.cellSize=function(y){if(!arguments.length)return 1<<o;if(!((y=+y)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(y)/Math.LN2),_()},h.thresholds=function(y){return arguments.length?(u=typeof y=="function"?y:Array.isArray(y)?ro(CL.call(y)):ro(y),h):u},h.bandwidth=function(y){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((y=+y)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*y*y+1)-1)/2,_()},h}const hs=11102230246251565e-32,tn=134217729,FH=(3+8*hs)*hs;function K_(e,t,n,i,r){let s,o,a,l,c=t[0],u=i[0],f=0,h=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=i[++h]);let d=0;if(f<e&&h<n)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=t[++f]):(o=u+s,a=s-(o-u),u=i[++h]),s=o,a!==0&&(r[d++]=a);f<e&&h<n;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++h]),s=o,a!==0&&(r[d++]=a);for(;f<e;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f],s=o,a!==0&&(r[d++]=a);for(;h<n;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++h],s=o,a!==0&&(r[d++]=a);return(s!==0||d===0)&&(r[d++]=s),d}function zH(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Rh(e){return new Float64Array(e)}const WH=(3+16*hs)*hs,VH=(2+12*hs)*hs,HH=(9+64*hs)*hs*hs,xl=Rh(4),zT=Rh(8),WT=Rh(12),VT=Rh(16),dn=Rh(4);function GH(e,t,n,i,r,s,o){let a,l,c,u,f,h,d,g,m,p,_,y,b,v,x,w,E,T;const I=e-r,S=n-r,A=t-s,R=i-s;v=I*R,h=tn*I,d=h-(h-I),g=I-d,h=tn*R,m=h-(h-R),p=R-m,x=g*p-(v-d*m-g*m-d*p),w=A*S,h=tn*A,d=h-(h-A),g=A-d,h=tn*S,m=h-(h-S),p=S-m,E=g*p-(w-d*m-g*m-d*p),_=x-E,f=x-_,xl[0]=x-(_+f)+(f-E),y=v+_,f=y-v,b=v-(y-f)+(_-f),_=b-w,f=b-_,xl[1]=b-(_+f)+(f-w),T=y+_,f=T-y,xl[2]=y-(T-f)+(_-f),xl[3]=T;let k=zH(4,xl),$=VH*o;if(k>=$||-k>=$||(f=e-I,a=e-(I+f)+(f-r),f=n-S,c=n-(S+f)+(f-r),f=t-A,l=t-(A+f)+(f-s),f=i-R,u=i-(R+f)+(f-s),a===0&&l===0&&c===0&&u===0)||($=HH*o+FH*Math.abs(k),k+=I*u+R*a-(A*c+S*l),k>=$||-k>=$))return k;v=a*R,h=tn*a,d=h-(h-a),g=a-d,h=tn*R,m=h-(h-R),p=R-m,x=g*p-(v-d*m-g*m-d*p),w=l*S,h=tn*l,d=h-(h-l),g=l-d,h=tn*S,m=h-(h-S),p=S-m,E=g*p-(w-d*m-g*m-d*p),_=x-E,f=x-_,dn[0]=x-(_+f)+(f-E),y=v+_,f=y-v,b=v-(y-f)+(_-f),_=b-w,f=b-_,dn[1]=b-(_+f)+(f-w),T=y+_,f=T-y,dn[2]=y-(T-f)+(_-f),dn[3]=T;const L=K_(4,xl,4,dn,zT);v=I*u,h=tn*I,d=h-(h-I),g=I-d,h=tn*u,m=h-(h-u),p=u-m,x=g*p-(v-d*m-g*m-d*p),w=A*c,h=tn*A,d=h-(h-A),g=A-d,h=tn*c,m=h-(h-c),p=c-m,E=g*p-(w-d*m-g*m-d*p),_=x-E,f=x-_,dn[0]=x-(_+f)+(f-E),y=v+_,f=y-v,b=v-(y-f)+(_-f),_=b-w,f=b-_,dn[1]=b-(_+f)+(f-w),T=y+_,f=T-y,dn[2]=y-(T-f)+(_-f),dn[3]=T;const N=K_(L,zT,4,dn,WT);v=a*u,h=tn*a,d=h-(h-a),g=a-d,h=tn*u,m=h-(h-u),p=u-m,x=g*p-(v-d*m-g*m-d*p),w=l*c,h=tn*l,d=h-(h-l),g=l-d,h=tn*c,m=h-(h-c),p=c-m,E=g*p-(w-d*m-g*m-d*p),_=x-E,f=x-_,dn[0]=x-(_+f)+(f-E),y=v+_,f=y-v,b=v-(y-f)+(_-f),_=b-w,f=b-_,dn[1]=b-(_+f)+(f-w),T=y+_,f=T-y,dn[2]=y-(T-f)+(_-f),dn[3]=T;const D=K_(N,WT,4,dn,VT);return VT[D-1]}function Nd(e,t,n,i,r,s){const o=(t-s)*(n-r),a=(e-r)*(i-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=WH*c?l:-GH(e,t,n,i,r,s,c)}const HT=Math.pow(2,-52),Dd=new Uint32Array(512);class fm{static from(t,n=XH,i=qH){const r=t.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=i(a)}return new fm(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let S=0;S<o;S++){const A=t[2*S],R=t[2*S+1];A<a&&(a=A),R<l&&(l=R),A>c&&(c=A),R>u&&(u=R),this._ids[S]=S}const f=(a+c)/2,h=(l+u)/2;let d=1/0,g,m,p;for(let S=0;S<o;S++){const A=Z_(f,h,t[2*S],t[2*S+1]);A<d&&(g=S,d=A)}const _=t[2*g],y=t[2*g+1];d=1/0;for(let S=0;S<o;S++){if(S===g)continue;const A=Z_(_,y,t[2*S],t[2*S+1]);A<d&&A>0&&(m=S,d=A)}let b=t[2*m],v=t[2*m+1],x=1/0;for(let S=0;S<o;S++){if(S===g||S===m)continue;const A=YH(_,y,b,v,t[2*S],t[2*S+1]);A<x&&(p=S,x=A)}let w=t[2*p],E=t[2*p+1];if(x===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];Yl(this._ids,this._dists,0,o-1);const S=new Uint32Array(o);let A=0;for(let R=0,k=-1/0;R<o;R++){const $=this._ids[R];this._dists[$]>k&&(S[A++]=$,k=this._dists[$])}this.hull=S.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Nd(_,y,b,v,w,E)<0){const S=m,A=b,R=v;m=p,b=w,v=E,p=S,w=A,E=R}const T=jH(_,y,b,v,w,E);this._cx=T.x,this._cy=T.y;for(let S=0;S<o;S++)this._dists[S]=Z_(t[2*S],t[2*S+1],T.x,T.y);Yl(this._ids,this._dists,0,o-1),this._hullStart=g;let I=3;i[g]=n[p]=m,i[m]=n[g]=p,i[p]=n[m]=g,r[g]=0,r[m]=1,r[p]=2,s.fill(-1),s[this._hashKey(_,y)]=g,s[this._hashKey(b,v)]=m,s[this._hashKey(w,E)]=p,this.trianglesLen=0,this._addTriangle(g,m,p,-1,-1,-1);for(let S=0,A,R;S<this._ids.length;S++){const k=this._ids[S],$=t[2*k],L=t[2*k+1];if(S>0&&Math.abs($-A)<=HT&&Math.abs(L-R)<=HT||(A=$,R=L,k===g||k===m||k===p))continue;let N=0;for(let q=0,z=this._hashKey($,L);q<this._hashSize&&(N=s[(z+q)%this._hashSize],!(N!==-1&&N!==i[N]));q++);N=n[N];let D=N,V;for(;V=i[D],Nd($,L,t[2*D],t[2*D+1],t[2*V],t[2*V+1])>=0;)if(D=V,D===N){D=-1;break}if(D===-1)continue;let Y=this._addTriangle(D,k,i[D],-1,-1,r[D]);r[k]=this._legalize(Y+2),r[D]=Y,I++;let B=i[D];for(;V=i[B],Nd($,L,t[2*B],t[2*B+1],t[2*V],t[2*V+1])<0;)Y=this._addTriangle(B,k,V,r[k],-1,r[B]),r[k]=this._legalize(Y+2),i[B]=B,I--,B=V;if(D===N)for(;V=n[D],Nd($,L,t[2*V],t[2*V+1],t[2*D],t[2*D+1])<0;)Y=this._addTriangle(V,k,D,-1,r[D],r[V]),this._legalize(Y+2),r[V]=Y,i[D]=D,I--,D=V;this._hullStart=n[k]=D,i[D]=n[B]=k,i[k]=B,s[this._hashKey($,L)]=k,s[this._hashKey(t[2*D],t[2*D+1])]=D}this.hull=new Uint32Array(I);for(let S=0,A=this._hullStart;S<I;S++)this.hull[S]=A,A=i[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(BH(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let s=0,o=0;for(;;){const a=i[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=Dd[--s];continue}const c=a-a%3,u=l+(t+1)%3,f=c+(a+2)%3,h=n[o],d=n[t],g=n[u],m=n[f];if(UH(r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*g],r[2*g+1],r[2*m],r[2*m+1])){n[t]=m,n[a]=h;const _=i[f];if(_===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,_),this._link(a,i[o]),this._link(o,f);const y=c+(a+1)%3;s<Dd.length&&(Dd[s++]=y)}else{if(s===0)break;t=Dd[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function BH(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Z_(e,t,n,i){const r=e-n,s=t-i;return r*r+s*s}function UH(e,t,n,i,r,s,o,a){const l=e-o,c=t-a,u=n-o,f=i-a,h=r-o,d=s-a,g=l*l+c*c,m=u*u+f*f,p=h*h+d*d;return l*(f*p-m*d)-c*(u*p-m*h)+g*(u*d-f*h)<0}function YH(e,t,n,i,r,s){const o=n-e,a=i-t,l=r-e,c=s-t,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),d=(c*u-a*f)*h,g=(o*f-l*u)*h;return d*d+g*g}function jH(e,t,n,i,r,s){const o=n-e,a=i-t,l=r-e,c=s-t,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),d=e+(c*u-a*f)*h,g=t+(o*f-l*u)*h;return{x:d,y:g}}function Yl(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const s=e[r],o=t[s];let a=r-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const r=n+i>>1;let s=n+1,o=i;Fu(e,r,s),t[e[n]]>t[e[i]]&&Fu(e,n,i),t[e[s]]>t[e[i]]&&Fu(e,s,i),t[e[n]]>t[e[s]]&&Fu(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;Fu(e,s,o)}e[n+1]=e[o],e[o]=a,i-s+1>=o-n?(Yl(e,t,s,i),Yl(e,t,n,o-1)):(Yl(e,t,n,o-1),Yl(e,t,s,i))}}function Fu(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function XH(e){return e[0]}function qH(e){return e[1]}const GT=1e-6;class ga{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,s=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>GT||Math.abs(this._y1-s)>GT)&&(this._+="L"+r+","+s),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}let Q1=class{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}},KH=class{constructor(t,[n,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let m=0,p=0,_=i.length,y,b;m<_;m+=3,p+=2){const v=i[m]*2,x=i[m+1]*2,w=i[m+2]*2,E=t[v],T=t[v+1],I=t[x],S=t[x+1],A=t[w],R=t[w+1],k=I-E,$=S-T,L=A-E,N=R-T,D=(k*N-$*L)*2;if(Math.abs(D)<1e-9){if(s===void 0){s=o=0;for(const Y of n)s+=t[Y*2],o+=t[Y*2+1];s/=n.length,o/=n.length}const V=1e9*Math.sign((s-E)*N-(o-T)*L);y=(E+A)/2-V*N,b=(T+R)/2+V*L}else{const V=1/D,Y=k*k+$*$,B=L*L+N*N;y=E+(N*Y-$*B)*V,b=T+(k*B-L*Y)*V}a[p]=y,a[p+1]=b}let l=n[n.length-1],c,u=l*4,f,h=t[2*l],d,g=t[2*l+1];r.fill(0);for(let m=0;m<n.length;++m)l=n[m],c=u,f=h,d=g,u=l*4,h=t[2*l],g=t[2*l+1],r[c+2]=r[u]=d-g,r[c+3]=r[u+1]=h-f}render(t){const n=t==null?t=new ga:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=i.length;u<f;++u){const h=i[u];if(h<u)continue;const d=Math.floor(u/3)*2,g=Math.floor(h/3)*2,m=o[d],p=o[d+1],_=o[g],y=o[g+1];this._renderSegment(m,p,_,y,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(r[c]/3)*2,h=o[f],d=o[f+1],g=l*4,m=this._project(h,d,a[g+2],a[g+3]);m&&this._renderSegment(h,d,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new ga:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new ga:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new Q1;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,s){let o;const a=this._regioncode(t,n),l=this._regioncode(i,r);a===0&&l===0?(s.moveTo(t,n),s.lineTo(i,r)):(o=this._clipSegment(t,n,i,r,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[s]===r[a]&&n[s+1]===r[a+1]&&n[(s+2)%o]===r[(a+l-2)%l]&&n[(s+3)%o]===r[(a+l-1)%l]){yield i;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,o=i[t];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=r[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,s,o,a=n[i-2],l=n[i-1],c,u=this._regioncode(a,l),f,h=0;for(let d=0;d<i;d+=2)if(s=a,o=l,a=n[d],l=n[d+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=h,h=0,r?r.push(a,l):r=[a,l];else{let g,m,p,_,y;if(c===0){if((g=this._clipSegment(s,o,a,l,c,u))===null)continue;[m,p,_,y]=g}else{if((g=this._clipSegment(a,l,s,o,u,c))===null)continue;[_,y,m,p]=g,f=h,h=this._edgecode(m,p),f&&h&&this._edge(t,f,h,r,r.length),r?r.push(m,p):r=[m,p]}f=h,h=this._edgecode(_,y),f&&h&&this._edge(t,f,h,r,r.length),r?r.push(_,y):r=[_,y]}if(r)f=h,h=this._edgecode(r[0],r[1]),f&&h&&this._edge(t,f,h,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,s,o){const a=s<o;for(a&&([t,n,i,r,s,o]=[i,r,t,n,o,s]);;){if(s===0&&o===0)return a?[i,r,t,n]:[t,n,i,r];if(s&o)return null;let l,c,u=s||o;u&8?(l=t+(i-t)*(this.ymax-n)/(r-n),c=this.ymax):u&4?(l=t+(i-t)*(this.ymin-n)/(r-n),c=this.ymin):u&2?(c=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(c=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(i=l,r=c,o=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,u=a.length,f,h=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=h,h=this._edgecode(a[c],a[c+1]),f&&h&&(c=this._edge(t,f,h,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,i,r,s){for(;n!==i;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(t,o,a)&&(r.splice(s,0,o,a),s+=2)}return s}_project(t,n,i,r){let s=1/0,o,a,l;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<s&&(l=this.ymin,a=t+(s=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<s&&(l=this.ymax,a=t+(s=o)*i)}if(i>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/i)<s&&(a=this.xmax,l=n+(s=o)*r)}else if(i<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/i)<s&&(a=this.xmin,l=n+(s=o)*r)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const ZH=2*Math.PI,El=Math.pow;function JH(e){return e[0]}function QH(e){return e[1]}function tG(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],s=2*t[i+1],o=2*t[i+2];if((n[o]-n[r])*(n[s+1]-n[r+1])-(n[s]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function eG(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Po{static from(t,n=JH,i=QH,r){return new Po("length"in t?nG(t,n,i,r):Float64Array.from(iG(t,n,i,r)))}constructor(t){this._delaunator=new fm(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&tG(t)){this.collinear=Int32Array.from({length:n.length/2},(h,d)=>d).sort((h,d)=>n[2*h]-n[2*d]||n[2*h+1]-n[2*d+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let h=0,d=n.length/2;h<d;++h){const g=eG(n[2*h],n[2*h+1],f);n[2*h]=g[0],n[2*h+1]=g[1]}this._delaunator=new fm(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=i.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(i[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=r.length;l<c;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new KH(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==t)return;if(c=s[c],c===-1){const f=i[(r[t]+1)%i.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let s;for(;(s=this._step(i,t,n))>=0&&s!==i&&s!==r;)i=s;return s}_step(t,n,i){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(r[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=El(n-c[t*2],2)+El(i-c[t*2+1],2);const h=r[t];let d=h;do{let g=l[d];const m=El(n-c[g*2],2)+El(i-c[g*2+1],2);if(m<f&&(f=m,u=g),d=d%3===2?d-2:d+1,l[d]!==t)break;if(d=a[d],d===-1){if(d=s[(o[t]+1)%s.length],d!==g&&El(n-c[d*2],2)+El(i-c[d*2+1],2)<f)return d;break}}while(d!==h);return u}render(t){const n=t==null?t=new ga:void 0,{points:i,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;t.moveTo(i[c],i[c+1]),t.lineTo(i[u],i[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new ga:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],l=r[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,ZH)}return i&&i.value()}renderHull(t){const n=t==null?t=new ga:void 0,{hull:i,points:r}=this,s=i[0]*2,o=i.length;t.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const l=2*i[a];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Q1;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new ga:void 0,{points:r,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Q1;return this.renderTriangle(t,n),n.value()}}function nG(e,t,n,i){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=e[o];s[o*2]=t.call(i,a,o,e),s[o*2+1]=n.call(i,a,o,e)}return s}function*iG(e,t,n,i){let r=0;for(const s of e)yield t.call(i,s,r,e),yield n.call(i,s,r,e),++r}function rG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hm(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Tc(e){return e=hm(Math.abs(e)),e?e[1]:NaN}function sG(e,t){return function(n,i){for(var r=n.length,s=[],o=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function oG(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var aG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zf(e){if(!(t=aG.exec(e)))throw new Error("invalid format: "+e);var t;return new _w({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Zf.prototype=_w.prototype;function _w(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_w.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lG(e){t:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break t;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var AL;function cG(e,t){var n=hm(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(AL=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+hm(e,Math.max(0,t+s-1))[0]}function BT(e,t){var n=hm(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const UT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:rG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>BT(e*100,t),r:BT,s:cG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function YT(e){return e}var jT=Array.prototype.map,XT=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function uG(e){var t=e.grouping===void 0||e.thousands===void 0?YT:sG(jT.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?YT:oG(jT.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=Zf(f);var h=f.fill,d=f.align,g=f.sign,m=f.symbol,p=f.zero,_=f.width,y=f.comma,b=f.precision,v=f.trim,x=f.type;x==="n"?(y=!0,x="g"):UT[x]||(b===void 0&&(b=12),v=!0,x="g"),(p||h==="0"&&d==="=")&&(p=!0,h="0",d="=");var w=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",E=m==="$"?i:/[%p]/.test(x)?o:"",T=UT[x],I=/[defgprs%]/.test(x);b=b===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function S(A){var R=w,k=E,$,L,N;if(x==="c")k=T(A)+k,A="";else{A=+A;var D=A<0||1/A<0;if(A=isNaN(A)?l:T(Math.abs(A),b),v&&(A=lG(A)),D&&+A==0&&g!=="+"&&(D=!1),R=(D?g==="("?g:a:g==="-"||g==="("?"":g)+R,k=(x==="s"?XT[8+AL/3]:"")+k+(D&&g==="("?")":""),I){for($=-1,L=A.length;++$<L;)if(N=A.charCodeAt($),48>N||N>57){k=(N===46?r+A.slice($+1):A.slice($))+k,A=A.slice(0,$);break}}}y&&!p&&(A=t(A,1/0));var V=R.length+A.length+k.length,Y=V<_?new Array(_-V+1).join(h):"";switch(y&&p&&(A=t(Y+A,Y.length?_-k.length:1/0),Y=""),d){case"<":A=R+A+k+Y;break;case"=":A=R+Y+A+k;break;case"^":A=Y.slice(0,V=Y.length>>1)+R+A+k+Y.slice(V);break;default:A=Y+R+A+k;break}return s(A)}return S.toString=function(){return f+""},S}function u(f,h){var d=c((f=Zf(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Tc(h)/3)))*3,m=Math.pow(10,-g),p=XT[8+g/3];return function(_){return d(m*_)+p}}return{format:c,formatPrefix:u}}var Pd,Fo,ML;fG({thousands:",",grouping:[3],currency:["$",""]});function fG(e){return Pd=uG(e),Fo=Pd.format,ML=Pd.formatPrefix,Pd}function hG(e){return Math.max(0,-Tc(Math.abs(e)))}function dG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tc(t)/3)))*3-Tc(Math.abs(e)))}function gG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Tc(t)-Tc(e))+1}var wt=1e-6,dm=1e-12,Pt=Math.PI,Me=Pt/2,qT=Pt/4,ti=Pt*2,Je=180/Pt,jt=Pt/180,Qt=Math.abs,au=Math.atan,Ji=Math.atan2,Et=Math.cos,Fd=Math.ceil,RL=Math.exp,tv=Math.hypot,gm=Math.log,J_=Math.pow,vt=Math.sin,yi=Math.sign||function(e){return e>0?1:e<0?-1:0},Sn=Math.sqrt,yw=Math.tan;function IL(e){return e>1?0:e<-1?Pt:Math.acos(e)}function Wn(e){return e>1?Me:e<-1?-Me:Math.asin(e)}function qn(){}function mm(e,t){e&&ZT.hasOwnProperty(e.type)&&ZT[e.type](e,t)}var KT={Feature:function(e,t){mm(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)mm(n[i].geometry,t)}},ZT={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){ev(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)ev(n[i],t,0)},Polygon:function(e,t){JT(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)JT(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)mm(n[i],t)}};function ev(e,t,n){var i=-1,r=e.length-n,s;for(t.lineStart();++i<r;)s=e[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function JT(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)ev(e[n],t,1);t.polygonEnd()}function lo(e,t){e&&KT.hasOwnProperty(e.type)?KT[e.type](e,t):mm(e,t)}function nv(e){return[Ji(e[1],e[0]),Wn(e[2])]}function Sc(e){var t=e[0],n=e[1],i=Et(n);return[i*Et(t),i*vt(t),vt(n)]}function zd(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pm(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Q_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Wd(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function iv(e){var t=Sn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var lf,_m,ym,vm,bm,wm,xm,Em,rv,sv,ov,LL,OL,_n,yn,vn,Ui={sphere:qn,point:vw,lineStart:QT,lineEnd:tS,polygonStart:function(){Ui.lineStart=_G,Ui.lineEnd=yG},polygonEnd:function(){Ui.lineStart=QT,Ui.lineEnd=tS}};function vw(e,t){e*=jt,t*=jt;var n=Et(t);Ih(n*Et(e),n*vt(e),vt(t))}function Ih(e,t,n){++lf,ym+=(e-ym)/lf,vm+=(t-vm)/lf,bm+=(n-bm)/lf}function QT(){Ui.point=mG}function mG(e,t){e*=jt,t*=jt;var n=Et(t);_n=n*Et(e),yn=n*vt(e),vn=vt(t),Ui.point=pG,Ih(_n,yn,vn)}function pG(e,t){e*=jt,t*=jt;var n=Et(t),i=n*Et(e),r=n*vt(e),s=vt(t),o=Ji(Sn((o=yn*s-vn*r)*o+(o=vn*i-_n*s)*o+(o=_n*r-yn*i)*o),_n*i+yn*r+vn*s);_m+=o,wm+=o*(_n+(_n=i)),xm+=o*(yn+(yn=r)),Em+=o*(vn+(vn=s)),Ih(_n,yn,vn)}function tS(){Ui.point=vw}function _G(){Ui.point=vG}function yG(){kL(LL,OL),Ui.point=vw}function vG(e,t){LL=e,OL=t,e*=jt,t*=jt,Ui.point=kL;var n=Et(t);_n=n*Et(e),yn=n*vt(e),vn=vt(t),Ih(_n,yn,vn)}function kL(e,t){e*=jt,t*=jt;var n=Et(t),i=n*Et(e),r=n*vt(e),s=vt(t),o=yn*s-vn*r,a=vn*i-_n*s,l=_n*r-yn*i,c=tv(o,a,l),u=Wn(c),f=c&&-u/c;rv.add(f*o),sv.add(f*a),ov.add(f*l),_m+=u,wm+=u*(_n+(_n=i)),xm+=u*(yn+(yn=r)),Em+=u*(vn+(vn=s)),Ih(_n,yn,vn)}function bG(e){lf=_m=ym=vm=bm=wm=xm=Em=0,rv=new Tr,sv=new Tr,ov=new Tr,lo(e,Ui);var t=+rv,n=+sv,i=+ov,r=tv(t,n,i);return r<dm&&(t=wm,n=xm,i=Em,_m<wt&&(t=ym,n=vm,i=bm),r=tv(t,n,i),r<dm)?[NaN,NaN]:[Ji(n,t)*Je,Wn(i/r)*Je]}function av(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function lv(e,t){return Qt(e)>Pt&&(e-=Math.round(e/ti)*ti),[e,t]}lv.invert=lv;function $L(e,t,n){return(e%=ti)?t||n?av(nS(e),iS(t,n)):nS(e):t||n?iS(t,n):lv}function eS(e){return function(t,n){return t+=e,Qt(t)>Pt&&(t-=Math.round(t/ti)*ti),[t,n]}}function nS(e){var t=eS(e);return t.invert=eS(-e),t}function iS(e,t){var n=Et(e),i=vt(e),r=Et(t),s=vt(t);function o(a,l){var c=Et(l),u=Et(a)*c,f=vt(a)*c,h=vt(l),d=h*n+u*i;return[Ji(f*r-d*s,u*n-h*i),Wn(d*r+f*s)]}return o.invert=function(a,l){var c=Et(l),u=Et(a)*c,f=vt(a)*c,h=vt(l),d=h*r-f*s;return[Ji(f*r+h*s,u*n+d*i),Wn(d*n-u*i)]},o}function wG(e){e=$L(e[0]*jt,e[1]*jt,e.length>2?e[2]*jt:0);function t(n){return n=e(n[0]*jt,n[1]*jt),n[0]*=Je,n[1]*=Je,n}return t.invert=function(n){return n=e.invert(n[0]*jt,n[1]*jt),n[0]*=Je,n[1]*=Je,n},t}function xG(e,t,n,i,r,s){if(n){var o=Et(t),a=vt(t),l=i*n;r==null?(r=t+i*ti,s=t-l/2):(r=rS(o,r),s=rS(o,s),(i>0?r<s:r>s)&&(r+=i*ti));for(var c,u=r;i>0?u>s:u<s;u-=l)c=nv([o,-a*Et(u),-a*vt(u)]),e.point(c[0],c[1])}}function rS(e,t){t=Sc(t),t[0]-=e,iv(t);var n=IL(-t[1]);return((-t[2]<0?-n:n)+ti-wt)%ti}function NL(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:qn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function zg(e,t){return Qt(e[0]-t[0])<wt&&Qt(e[1]-t[1])<wt}function Vd(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function DL(e,t,n,i,r){var s=[],o=[],a,l;if(e.forEach(function(g){if(!((m=g.length-1)<=0)){var m,p=g[0],_=g[m],y;if(zg(p,_)){if(!p[2]&&!_[2]){for(r.lineStart(),a=0;a<m;++a)r.point((p=g[a])[0],p[1]);r.lineEnd();return}_[0]+=2*wt}s.push(y=new Vd(p,g,null,!0)),o.push(y.o=new Vd(p,null,y,!1)),s.push(y=new Vd(_,g,null,!1)),o.push(y.o=new Vd(_,null,y,!0))}}),!!s.length){for(o.sort(t),sS(s),sS(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,l=u.length;a<l;++a)r.point((f=u[a])[0],f[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(d)for(u=h.p.z,a=u.length-1;a>=0;--a)r.point((f=u[a])[0],f[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);r.lineEnd()}}}function sS(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function ty(e){return Qt(e[0])<=Pt?e[0]:yi(e[0])*((Qt(e[0])+Pt)%ti-Pt)}function EG(e,t){var n=ty(t),i=t[1],r=vt(i),s=[vt(n),-Et(n),0],o=0,a=0,l=new Tr;r===1?i=Me+wt:r===-1&&(i=-Me-wt);for(var c=0,u=e.length;c<u;++c)if(h=(f=e[c]).length)for(var f,h,d=f[h-1],g=ty(d),m=d[1]/2+qT,p=vt(m),_=Et(m),y=0;y<h;++y,g=v,p=w,_=E,d=b){var b=f[y],v=ty(b),x=b[1]/2+qT,w=vt(x),E=Et(x),T=v-g,I=T>=0?1:-1,S=I*T,A=S>Pt,R=p*w;if(l.add(Ji(R*I*vt(S),_*E+R*Et(S))),o+=A?T+I*ti:T,A^g>=n^v>=n){var k=pm(Sc(d),Sc(b));iv(k);var $=pm(s,k);iv($);var L=(A^T>=0?-1:1)*Wn($[2]);(i>L||i===L&&(k[0]||k[1]))&&(a+=A^T>=0?1:-1)}}return(o<-wt||o<wt&&l<-dm)^a&1}function PL(e,t,n,i){return function(r){var s=t(r),o=NL(),a=t(o),l=!1,c,u,f,h={point:d,lineStart:m,lineEnd:p,polygonStart:function(){h.point=_,h.lineStart=y,h.lineEnd=b,u=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=p,u=PI(u);var v=EG(c,i);u.length?(l||(r.polygonStart(),l=!0),DL(u,SG,v,n,r)):v&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(v,x){e(v,x)&&r.point(v,x)}function g(v,x){s.point(v,x)}function m(){h.point=g,s.lineStart()}function p(){h.point=d,s.lineEnd()}function _(v,x){f.push([v,x]),a.point(v,x)}function y(){a.lineStart(),f=[]}function b(){_(f[0][0],f[0][1]),a.lineEnd();var v=a.clean(),x=o.result(),w,E=x.length,T,I,S;if(f.pop(),c.push(f),f=null,!!E){if(v&1){if(I=x[0],(T=I.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),w=0;w<T;++w)r.point((S=I[w])[0],S[1]);r.lineEnd()}return}E>1&&v&2&&x.push(x.pop().concat(x.shift())),u.push(x.filter(TG))}}return h}}function TG(e){return e.length>1}function SG(e,t){return((e=e.x)[0]<0?e[1]-Me-wt:Me-e[1])-((t=t.x)[0]<0?t[1]-Me-wt:Me-t[1])}const oS=PL(function(){return!0},CG,MG,[-Pt,-Me]);function CG(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(s,o){var a=s>0?Pt:-Pt,l=Qt(s-t);Qt(l-Pt)<wt?(e.point(t,n=(n+o)/2>0?Me:-Me),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),r=0):i!==a&&l>=Pt&&(Qt(t-i)<wt&&(t-=i*wt),Qt(s-a)<wt&&(s-=a*wt),n=AG(t,n,s,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),r=0),e.point(t=s,n=o),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function AG(e,t,n,i){var r,s,o=vt(e-n);return Qt(o)>wt?au((vt(t)*(s=Et(i))*vt(n)-vt(i)*(r=Et(t))*vt(e))/(r*s*o)):(t+i)/2}function MG(e,t,n,i){var r;if(e==null)r=n*Me,i.point(-Pt,r),i.point(0,r),i.point(Pt,r),i.point(Pt,0),i.point(Pt,-r),i.point(0,-r),i.point(-Pt,-r),i.point(-Pt,0),i.point(-Pt,r);else if(Qt(e[0]-t[0])>wt){var s=e[0]<t[0]?Pt:-Pt;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function RG(e){var t=Et(e),n=6*jt,i=t>0,r=Qt(t)>wt;function s(u,f,h,d){xG(d,e,n,h,u,f)}function o(u,f){return Et(u)*Et(f)>t}function a(u){var f,h,d,g,m;return{lineStart:function(){g=d=!1,m=1},point:function(p,_){var y=[p,_],b,v=o(p,_),x=i?v?0:c(p,_):v?c(p+(p<0?Pt:-Pt),_):0;if(!f&&(g=d=v)&&u.lineStart(),v!==d&&(b=l(f,y),(!b||zg(f,b)||zg(y,b))&&(y[2]=1)),v!==d)m=0,v?(u.lineStart(),b=l(y,f),u.point(b[0],b[1])):(b=l(f,y),u.point(b[0],b[1],2),u.lineEnd()),f=b;else if(r&&f&&i^v){var w;!(x&h)&&(w=l(y,f,!0))&&(m=0,i?(u.lineStart(),u.point(w[0][0],w[0][1]),u.point(w[1][0],w[1][1]),u.lineEnd()):(u.point(w[1][0],w[1][1]),u.lineEnd(),u.lineStart(),u.point(w[0][0],w[0][1],3)))}v&&(!f||!zg(f,y))&&u.point(y[0],y[1]),f=y,d=v,h=x},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return m|(g&&d)<<1}}}function l(u,f,h){var d=Sc(u),g=Sc(f),m=[1,0,0],p=pm(d,g),_=zd(p,p),y=p[0],b=_-y*y;if(!b)return!h&&u;var v=t*_/b,x=-t*y/b,w=pm(m,p),E=Wd(m,v),T=Wd(p,x);Q_(E,T);var I=w,S=zd(E,I),A=zd(I,I),R=S*S-A*(zd(E,E)-1);if(!(R<0)){var k=Sn(R),$=Wd(I,(-S-k)/A);if(Q_($,E),$=nv($),!h)return $;var L=u[0],N=f[0],D=u[1],V=f[1],Y;N<L&&(Y=L,L=N,N=Y);var B=N-L,q=Qt(B-Pt)<wt,z=q||B<wt;if(!q&&V<D&&(Y=D,D=V,V=Y),z?q?D+V>0^$[1]<(Qt($[0]-L)<wt?D:V):D<=$[1]&&$[1]<=V:B>Pt^(L<=$[0]&&$[0]<=N)){var Q=Wd(I,(-S+k)/A);return Q_(Q,E),[$,nv(Q)]}}}function c(u,f){var h=i?e:Pt-e,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return PL(o,a,s,i?[0,-e]:[-Pt,e-Pt])}function IG(e,t,n,i,r,s){var o=e[0],a=e[1],l=t[0],c=t[1],u=0,f=1,h=l-o,d=c-a,g;if(g=n-o,!(!h&&g>0)){if(g/=h,h<0){if(g<u)return;g<f&&(f=g)}else if(h>0){if(g>f)return;g>u&&(u=g)}if(g=r-o,!(!h&&g<0)){if(g/=h,h<0){if(g>f)return;g>u&&(u=g)}else if(h>0){if(g<u)return;g<f&&(f=g)}if(g=i-a,!(!d&&g>0)){if(g/=d,d<0){if(g<u)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>u&&(u=g)}if(g=s-a,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>u&&(u=g)}else if(d>0){if(g<u)return;g<f&&(f=g)}return u>0&&(e[0]=o+u*h,e[1]=a+u*d),f<1&&(t[0]=o+f*h,t[1]=a+f*d),!0}}}}}var cf=1e9,Hd=-cf;function FL(e,t,n,i){function r(c,u){return e<=c&&c<=n&&t<=u&&u<=i}function s(c,u,f,h){var d=0,g=0;if(c==null||(d=o(c,f))!==(g=o(u,f))||l(c,u)<0^f>0)do h.point(d===0||d===3?e:n,d>1?i:t);while((d=(d+f+4)%4)!==g);else h.point(u[0],u[1])}function o(c,u){return Qt(c[0]-e)<wt?u>0?0:3:Qt(c[0]-n)<wt?u>0?2:1:Qt(c[1]-t)<wt?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),h=o(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=NL(),h,d,g,m,p,_,y,b,v,x,w,E={point:T,lineStart:R,lineEnd:k,polygonStart:S,polygonEnd:A};function T(L,N){r(L,N)&&u.point(L,N)}function I(){for(var L=0,N=0,D=d.length;N<D;++N)for(var V=d[N],Y=1,B=V.length,q=V[0],z,Q,nt=q[0],rt=q[1];Y<B;++Y)z=nt,Q=rt,q=V[Y],nt=q[0],rt=q[1],Q<=i?rt>i&&(nt-z)*(i-Q)>(rt-Q)*(e-z)&&++L:rt<=i&&(nt-z)*(i-Q)<(rt-Q)*(e-z)&&--L;return L}function S(){u=f,h=[],d=[],w=!0}function A(){var L=I(),N=w&&L,D=(h=PI(h)).length;(N||D)&&(c.polygonStart(),N&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),D&&DL(h,a,L,s,c),c.polygonEnd()),u=c,h=d=g=null}function R(){E.point=$,d&&d.push(g=[]),x=!0,v=!1,y=b=NaN}function k(){h&&($(m,p),_&&v&&f.rejoin(),h.push(f.result())),E.point=T,v&&u.lineEnd()}function $(L,N){var D=r(L,N);if(d&&g.push([L,N]),x)m=L,p=N,_=D,x=!1,D&&(u.lineStart(),u.point(L,N));else if(D&&v)u.point(L,N);else{var V=[y=Math.max(Hd,Math.min(cf,y)),b=Math.max(Hd,Math.min(cf,b))],Y=[L=Math.max(Hd,Math.min(cf,L)),N=Math.max(Hd,Math.min(cf,N))];IG(V,Y,e,t,n,i)?(v||(u.lineStart(),u.point(V[0],V[1])),u.point(Y[0],Y[1]),D||u.lineEnd(),w=!1):D&&(u.lineStart(),u.point(L,N),w=!1)}y=L,b=N,v=D}return E}}function aS(e,t,n){var i=_i(e,t-wt,n).concat(t);return function(r){return i.map(function(s){return[r,s]})}}function lS(e,t,n){var i=_i(e,t-wt,n).concat(t);return function(r){return i.map(function(s){return[s,r]})}}function LG(){var e,t,n,i,r,s,o,a,l=10,c=l,u=90,f=360,h,d,g,m,p=2.5;function _(){return{type:"MultiLineString",coordinates:y()}}function y(){return _i(Fd(i/u)*u,n,u).map(g).concat(_i(Fd(a/f)*f,o,f).map(m)).concat(_i(Fd(t/l)*l,e,l).filter(function(b){return Qt(b%u)>wt}).map(h)).concat(_i(Fd(s/c)*c,r,c).filter(function(b){return Qt(b%f)>wt}).map(d))}return _.lines=function(){return y().map(function(b){return{type:"LineString",coordinates:b}})},_.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(m(o).slice(1),g(n).reverse().slice(1),m(a).reverse().slice(1))]}},_.extent=function(b){return arguments.length?_.extentMajor(b).extentMinor(b):_.extentMinor()},_.extentMajor=function(b){return arguments.length?(i=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],i>n&&(b=i,i=n,n=b),a>o&&(b=a,a=o,o=b),_.precision(p)):[[i,a],[n,o]]},_.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],r=+b[1][1],t>e&&(b=t,t=e,e=b),s>r&&(b=s,s=r,r=b),_.precision(p)):[[t,s],[e,r]]},_.step=function(b){return arguments.length?_.stepMajor(b).stepMinor(b):_.stepMinor()},_.stepMajor=function(b){return arguments.length?(u=+b[0],f=+b[1],_):[u,f]},_.stepMinor=function(b){return arguments.length?(l=+b[0],c=+b[1],_):[l,c]},_.precision=function(b){return arguments.length?(p=+b,h=aS(s,r,90),d=lS(t,e,p),g=aS(a,o,90),m=lS(i,n,p),_):p},_.extentMajor([[-180,-90+wt],[180,90-wt]]).extentMinor([[-180,-80-wt],[180,80+wt]])}function OG(){return LG()()}const cv=e=>e;var ey=new Tr,uv=new Tr,zL,WL,fv,hv,co={point:qn,lineStart:qn,lineEnd:qn,polygonStart:function(){co.lineStart=kG,co.lineEnd=NG},polygonEnd:function(){co.lineStart=co.lineEnd=co.point=qn,ey.add(Qt(uv)),uv=new Tr},result:function(){var e=ey/2;return ey=new Tr,e}};function kG(){co.point=$G}function $G(e,t){co.point=VL,zL=fv=e,WL=hv=t}function VL(e,t){uv.add(hv*e-fv*t),fv=e,hv=t}function NG(){VL(zL,WL)}const cS=co;var Cc=1/0,Tm=Cc,Jf=-Cc,Sm=Jf,DG={point:PG,lineStart:qn,lineEnd:qn,polygonStart:qn,polygonEnd:qn,result:function(){var e=[[Cc,Tm],[Jf,Sm]];return Jf=Sm=-(Tm=Cc=1/0),e}};function PG(e,t){e<Cc&&(Cc=e),e>Jf&&(Jf=e),t<Tm&&(Tm=t),t>Sm&&(Sm=t)}const Cm=DG;var dv=0,gv=0,uf=0,Am=0,Mm=0,jl=0,mv=0,pv=0,ff=0,HL,GL,dr,gr,Gi={point:qa,lineStart:uS,lineEnd:fS,polygonStart:function(){Gi.lineStart=WG,Gi.lineEnd=VG},polygonEnd:function(){Gi.point=qa,Gi.lineStart=uS,Gi.lineEnd=fS},result:function(){var e=ff?[mv/ff,pv/ff]:jl?[Am/jl,Mm/jl]:uf?[dv/uf,gv/uf]:[NaN,NaN];return dv=gv=uf=Am=Mm=jl=mv=pv=ff=0,e}};function qa(e,t){dv+=e,gv+=t,++uf}function uS(){Gi.point=FG}function FG(e,t){Gi.point=zG,qa(dr=e,gr=t)}function zG(e,t){var n=e-dr,i=t-gr,r=Sn(n*n+i*i);Am+=r*(dr+e)/2,Mm+=r*(gr+t)/2,jl+=r,qa(dr=e,gr=t)}function fS(){Gi.point=qa}function WG(){Gi.point=HG}function VG(){BL(HL,GL)}function HG(e,t){Gi.point=BL,qa(HL=dr=e,GL=gr=t)}function BL(e,t){var n=e-dr,i=t-gr,r=Sn(n*n+i*i);Am+=r*(dr+e)/2,Mm+=r*(gr+t)/2,jl+=r,r=gr*e-dr*t,mv+=r*(dr+e),pv+=r*(gr+t),ff+=r*3,qa(dr=e,gr=t)}const hS=Gi;function UL(e){this._context=e}UL.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ti);break}}},result:qn};var _v=new Tr,ny,YL,jL,hf,df,Rm={point:qn,lineStart:function(){Rm.point=GG},lineEnd:function(){ny&&XL(YL,jL),Rm.point=qn},polygonStart:function(){ny=!0},polygonEnd:function(){ny=null},result:function(){var e=+_v;return _v=new Tr,e}};function GG(e,t){Rm.point=XL,YL=hf=e,jL=df=t}function XL(e,t){hf-=e,df-=t,_v.add(Sn(hf*hf+df*df)),hf=e,df=t}const dS=Rm;let gS,Im,mS,pS;class _S{constructor(t){this._append=t==null?qL:BG(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==mS||this._append!==Im){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,mS=i,Im=this._append,pS=this._,this._=r}this._+=pS;break}}}result(){const t=this._;return this._="",t.length?t:null}}function qL(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function BG(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return qL;if(t!==gS){const n=10**t;gS=t,Im=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return Im}function zo(e,t){let n=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),lo(a,r(s))),s.result()}return o.area=function(a){return lo(a,r(cS)),cS.result()},o.measure=function(a){return lo(a,r(dS)),dS.result()},o.bounds=function(a){return lo(a,r(Cm)),Cm.result()},o.centroid=function(a){return lo(a,r(hS)),hS.result()},o.projection=function(a){return arguments.length?(r=a==null?(e=null,cv):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new _S(n)):new UL(t=a),typeof i!="function"&&s.pointRadius(i),o):t},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new _S(n)),o},o.projection(e).digits(n).context(t)}function Lm(e){return{stream:g0(e)}}function g0(e){return function(t){var n=new yv;for(var i in e)n[i]=e[i];return n.stream=t,n}}function yv(){}yv.prototype={constructor:yv,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function bw(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),lo(n,e.stream(Cm)),t(Cm.result()),i!=null&&e.clipExtent(i),e}function ww(e,t,n){return bw(e,function(i){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(s-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function KL(e,t,n){return ww(e,[[0,0],t],n)}function ZL(e,t,n){return bw(e,function(i){var r=+t,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];e.scale(150*s).translate([o,a])},n)}function JL(e,t,n){return bw(e,function(i){var r=+t,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var yS=16,UG=Et(30*jt);function vS(e,t){return+t?jG(e,t):YG(e)}function YG(e){return g0({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function jG(e,t){function n(i,r,s,o,a,l,c,u,f,h,d,g,m,p){var _=c-i,y=u-r,b=_*_+y*y;if(b>4*t&&m--){var v=o+h,x=a+d,w=l+g,E=Sn(v*v+x*x+w*w),T=Wn(w/=E),I=Qt(Qt(w)-1)<wt||Qt(s-f)<wt?(s+f)/2:Ji(x,v),S=e(I,T),A=S[0],R=S[1],k=A-i,$=R-r,L=y*k-_*$;(L*L/b>t||Qt((_*k+y*$)/b-.5)>.3||o*h+a*d+l*g<UG)&&(n(i,r,s,o,a,l,A,R,I,v/=E,x/=E,w,m,p),p.point(A,R),n(A,R,I,v,x,w,c,u,f,h,d,g,m,p))}}return function(i){var r,s,o,a,l,c,u,f,h,d,g,m,p={point:_,lineStart:y,lineEnd:v,polygonStart:function(){i.polygonStart(),p.lineStart=x},polygonEnd:function(){i.polygonEnd(),p.lineStart=y}};function _(T,I){T=e(T,I),i.point(T[0],T[1])}function y(){f=NaN,p.point=b,i.lineStart()}function b(T,I){var S=Sc([T,I]),A=e(T,I);n(f,h,u,d,g,m,f=A[0],h=A[1],u=T,d=S[0],g=S[1],m=S[2],yS,i),i.point(f,h)}function v(){p.point=_,i.lineEnd()}function x(){y(),p.point=w,p.lineEnd=E}function w(T,I){b(r=T,I),s=f,o=h,a=d,l=g,c=m,p.point=b}function E(){n(f,h,u,d,g,m,s,o,r,a,l,c,yS,i),p.lineEnd=v,v()}return p}}var XG=g0({point:function(e,t){this.stream.point(e*jt,t*jt)}});function qG(e){return g0({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function KG(e,t,n,i,r){function s(o,a){return o*=i,a*=r,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*i,(n-a)/e*r]},s}function bS(e,t,n,i,r,s){if(!s)return KG(e,t,n,i,r);var o=Et(s),a=vt(s),l=o*e,c=a*e,u=o/e,f=a/e,h=(a*n-o*t)/e,d=(a*t+o*n)/e;function g(m,p){return m*=i,p*=r,[l*m-c*p+t,n-c*m-l*p]}return g.invert=function(m,p){return[i*(u*m-f*p+h),r*(d-f*m-u*p)]},g}function Wo(e){return QL(function(){return e})()}function QL(e){var t,n=150,i=480,r=250,s=0,o=0,a=0,l=0,c=0,u,f=0,h=1,d=1,g=null,m=oS,p=null,_,y,b,v=cv,x=.5,w,E,T,I,S;function A(L){return T(L[0]*jt,L[1]*jt)}function R(L){return L=T.invert(L[0],L[1]),L&&[L[0]*Je,L[1]*Je]}A.stream=function(L){return I&&S===L?I:I=XG(qG(u)(m(w(v(S=L)))))},A.preclip=function(L){return arguments.length?(m=L,g=void 0,$()):m},A.postclip=function(L){return arguments.length?(v=L,p=_=y=b=null,$()):v},A.clipAngle=function(L){return arguments.length?(m=+L?RG(g=L*jt):(g=null,oS),$()):g*Je},A.clipExtent=function(L){return arguments.length?(v=L==null?(p=_=y=b=null,cv):FL(p=+L[0][0],_=+L[0][1],y=+L[1][0],b=+L[1][1]),$()):p==null?null:[[p,_],[y,b]]},A.scale=function(L){return arguments.length?(n=+L,k()):n},A.translate=function(L){return arguments.length?(i=+L[0],r=+L[1],k()):[i,r]},A.center=function(L){return arguments.length?(s=L[0]%360*jt,o=L[1]%360*jt,k()):[s*Je,o*Je]},A.rotate=function(L){return arguments.length?(a=L[0]%360*jt,l=L[1]%360*jt,c=L.length>2?L[2]%360*jt:0,k()):[a*Je,l*Je,c*Je]},A.angle=function(L){return arguments.length?(f=L%360*jt,k()):f*Je},A.reflectX=function(L){return arguments.length?(h=L?-1:1,k()):h<0},A.reflectY=function(L){return arguments.length?(d=L?-1:1,k()):d<0},A.precision=function(L){return arguments.length?(w=vS(E,x=L*L),$()):Sn(x)},A.fitExtent=function(L,N){return ww(A,L,N)},A.fitSize=function(L,N){return KL(A,L,N)},A.fitWidth=function(L,N){return ZL(A,L,N)},A.fitHeight=function(L,N){return JL(A,L,N)};function k(){var L=bS(n,0,0,h,d,f).apply(null,t(s,o)),N=bS(n,i-L[0],r-L[1],h,d,f);return u=$L(a,l,c),E=av(t,N),T=av(u,E),w=vS(E,x),$()}function $(){return I=S=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&R,k()}}function xw(e){var t=0,n=Pt/3,i=QL(e),r=i(t,n);return r.parallels=function(s){return arguments.length?i(t=s[0]*jt,n=s[1]*jt):[t*Je,n*Je]},r}function ZG(e){var t=Et(e);function n(i,r){return[i*t,vt(r)/t]}return n.invert=function(i,r){return[i/t,Wn(r*t)]},n}function JG(e,t){var n=vt(e),i=(n+vt(t))/2;if(Qt(i)<wt)return ZG(e);var r=1+n*(2*i-n),s=Sn(r)/i;function o(a,l){var c=Sn(r-2*i*vt(l))/i;return[c*vt(a*=i),s-c*Et(a)]}return o.invert=function(a,l){var c=s-l,u=Ji(a,Qt(c))*yi(c);return c*i<0&&(u-=Pt*yi(a)*yi(c)),[u/i,Wn((r-(a*a+c*c)*i*i)/(2*i))]},o}function Om(){return xw(JG).scale(155.424).center([0,33.6442])}function tO(){return Om().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function QG(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function tB(){var e,t,n=tO(),i,r=Om().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=Om().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(h,d){l=[h,d]}};function u(h){var d=h[0],g=h[1];return l=null,i.point(d,g),l||(s.point(d,g),l)||(a.point(d,g),l)}u.invert=function(h){var d=n.scale(),g=n.translate(),m=(h[0]-g[0])/d,p=(h[1]-g[1])/d;return(p>=.12&&p<.234&&m>=-.425&&m<-.214?r:p>=.166&&p<.234&&m>=-.214&&m<-.115?o:n).invert(h)},u.stream=function(h){return e&&t===h?e:e=QG([n.stream(t=h),r.stream(h),o.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),o.precision(h),f()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),o.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),g=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[g-.455*d,m-.238*d],[g+.455*d,m+.238*d]]).stream(c),s=r.translate([g-.307*d,m+.201*d]).clipExtent([[g-.425*d+wt,m+.12*d+wt],[g-.214*d-wt,m+.234*d-wt]]).stream(c),a=o.translate([g-.205*d,m+.212*d]).clipExtent([[g-.214*d+wt,m+.166*d+wt],[g-.115*d-wt,m+.234*d-wt]]).stream(c),f()},u.fitExtent=function(h,d){return ww(u,h,d)},u.fitSize=function(h,d){return KL(u,h,d)},u.fitWidth=function(h,d){return ZL(u,h,d)},u.fitHeight=function(h,d){return JL(u,h,d)};function f(){return e=t=null,u}return u.scale(1070)}function eO(e){return function(t,n){var i=Et(t),r=Et(n),s=e(i*r);return s===1/0?[2,0]:[s*r*vt(t),s*vt(n)]}}function Lh(e){return function(t,n){var i=Sn(t*t+n*n),r=e(i),s=vt(r),o=Et(r);return[Ji(t*s,i*o),Wn(i&&n*s/i)]}}var nO=eO(function(e){return Sn(2/(1+e))});nO.invert=Lh(function(e){return 2*Wn(e/2)});function eB(){return Wo(nO).scale(124.75).clipAngle(180-.001)}var iO=eO(function(e){return(e=IL(e))&&e/vt(e)});iO.invert=Lh(function(e){return e});function nB(){return Wo(iO).scale(79.4188).clipAngle(180-.001)}function m0(e,t){return[e,gm(yw((Me+t)/2))]}m0.invert=function(e,t){return[e,2*au(RL(t))-Me]};function iB(){return rO(m0).scale(961/ti)}function rO(e){var t=Wo(e),n=t.center,i=t.scale,r=t.translate,s=t.clipExtent,o=null,a,l,c;t.scale=function(f){return arguments.length?(i(f),u()):i()},t.translate=function(f){return arguments.length?(r(f),u()):r()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=l=c=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var f=Pt*i(),h=t(wG(t.rotate()).invert([0,0]));return s(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===m0?[[Math.max(h[0]-f,o),a],[Math.min(h[0]+f,l),c]]:[[o,Math.max(h[1]-f,a)],[l,Math.min(h[1]+f,c)]])}return u()}function Gd(e){return yw((Me+e)/2)}function rB(e,t){var n=Et(e),i=e===t?vt(e):gm(n/Et(t))/gm(Gd(t)/Gd(e)),r=n*J_(Gd(e),i)/i;if(!i)return m0;function s(o,a){r>0?a<-Me+wt&&(a=-Me+wt):a>Me-wt&&(a=Me-wt);var l=r/J_(Gd(a),i);return[l*vt(i*o),r-l*Et(i*o)]}return s.invert=function(o,a){var l=r-a,c=yi(i)*Sn(o*o+l*l),u=Ji(o,Qt(l))*yi(l);return l*i<0&&(u-=Pt*yi(o)*yi(l)),[u/i,2*au(J_(r/c,1/i))-Me]},s}function sB(){return xw(rB).scale(109.5).parallels([30,30])}function km(e,t){return[e,t]}km.invert=km;function oB(){return Wo(km).scale(152.63)}function aB(e,t){var n=Et(e),i=e===t?vt(e):(n-Et(t))/(t-e),r=n/i+e;if(Qt(i)<wt)return km;function s(o,a){var l=r-a,c=i*o;return[l*vt(c),r-l*Et(c)]}return s.invert=function(o,a){var l=r-a,c=Ji(o,Qt(l))*yi(l);return l*i<0&&(c-=Pt*yi(o)*yi(l)),[c/i,r-yi(i)*Sn(o*o+l*l)]},s}function lB(){return xw(aB).scale(131.154).center([0,13.9389])}var Ef=1.340264,Tf=-.081106,Sf=893e-6,Cf=.003796,$m=Sn(3)/2,cB=12;function sO(e,t){var n=Wn($m*vt(t)),i=n*n,r=i*i*i;return[e*Et(n)/($m*(Ef+3*Tf*i+r*(7*Sf+9*Cf*i))),n*(Ef+Tf*i+r*(Sf+Cf*i))]}sO.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,s=0,o,a,l;s<cB&&(a=n*(Ef+Tf*i+r*(Sf+Cf*i))-t,l=Ef+3*Tf*i+r*(7*Sf+9*Cf*i),n-=o=a/l,i=n*n,r=i*i*i,!(Qt(o)<dm));++s);return[$m*e*(Ef+3*Tf*i+r*(7*Sf+9*Cf*i))/Et(n),Wn(vt(n)/$m)]};function uB(){return Wo(sO).scale(177.158)}function oO(e,t){var n=Et(t),i=Et(e)*n;return[n*vt(e)/i,vt(t)/i]}oO.invert=Lh(au);function fB(){return Wo(oO).scale(144.049).clipAngle(60)}function aO(e,t){return[Et(t)*vt(e),vt(t)]}aO.invert=Lh(Wn);function hB(){return Wo(aO).scale(249.5).clipAngle(90+wt)}function lO(e,t){var n=Et(t),i=1+Et(e)*n;return[n*vt(e)/i,vt(t)/i]}lO.invert=Lh(function(e){return 2*au(e)});function dB(){return Wo(lO).scale(250).clipAngle(142)}function cO(e,t){return[gm(yw((Me+t)/2)),-e]}cO.invert=function(e,t){return[-t,2*au(RL(e))-Me]};function gB(){var e=rO(cO),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function mB(e,t){return e.parent===t.parent?1:2}function pB(e){return e.reduce(_B,0)/e.length}function _B(e,t){return e+t.x}function yB(e){return 1+e.reduce(vB,0)}function vB(e,t){return Math.max(e,t.y)}function bB(e){for(var t;t=e.children;)e=t[0];return e}function wB(e){for(var t;t=e.children;)e=t[t.length-1];return e}function uO(){var e=mB,t=1,n=1,i=!1;function r(s){var o,a=0;s.eachAfter(function(h){var d=h.children;d?(h.x=pB(d),h.y=yB(d)):(h.x=o?a+=e(h,o):0,h.y=0,o=h)});var l=bB(s),c=wB(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(i?function(h){h.x=(h.x-s.x)*t,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*t,h.y=(1-(s.y?h.y/s.y:1))*n})}return r.separation=function(s){return arguments.length?(e=s,r):e},r.size=function(s){return arguments.length?(i=!1,t=+s[0],n=+s[1],r):i?null:[t,n]},r.nodeSize=function(s){return arguments.length?(i=!0,t=+s[0],n=+s[1],r):i?[t,n]:null},r}function xB(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function EB(){return this.eachAfter(xB)}function TB(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function SB(e,t){for(var n=this,i=[n],r,s,o=-1;n=i.pop();)if(e.call(t,n,++o,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function CB(e,t){for(var n=this,i=[n],r=[],s,o,a,l=-1;n=i.pop();)if(r.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function AB(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function MB(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function RB(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function IB(e){for(var t=this,n=LB(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function LB(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function OB(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function kB(){return Array.from(this)}function $B(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function NB(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*DB(){var e=this,t,n=[e],i,r,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function fO(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=zB)):t===void 0&&(t=FB);for(var n=new Ac(e),i,r=[n],s,o,a,l;i=r.pop();)if((o=t(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,a=l-1;a>=0;--a)r.push(s=o[a]=new Ac(o[a])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(hO)}function PB(){return fO(this).eachBefore(WB)}function FB(e){return e.children}function zB(e){return Array.isArray(e)?e[1]:null}function WB(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function hO(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ac(e){this.data=e,this.depth=this.height=0,this.parent=null}Ac.prototype=fO.prototype={constructor:Ac,count:EB,each:TB,eachAfter:CB,eachBefore:SB,find:AB,sum:MB,sort:RB,path:IB,ancestors:OB,descendants:kB,leaves:$B,links:NB,copy:PB,[Symbol.iterator]:DB};function iy(e){return e==null?null:VB(e)}function VB(e){if(typeof e!="function")throw new Error;return e}var HB={depth:-1},wS={},ry={};function GB(e){return e.id}function BB(e){return e.parentId}function dO(){var e=GB,t=BB,n;function i(r){var s=Array.from(r),o=e,a=t,l,c,u,f,h,d,g,m,p=new Map;if(n!=null){const _=s.map((v,x)=>UB(n(v,x,r))),y=_.map(xS),b=new Set(_).add("");for(const v of y)b.has(v)||(b.add(v),_.push(v),y.push(xS(v)),s.push(ry));o=(v,x)=>_[x],a=(v,x)=>y[x]}for(u=0,l=s.length;u<l;++u)c=s[u],d=s[u]=new Ac(c),(g=o(c,u,r))!=null&&(g+="")&&(m=d.id=g,p.set(m,p.has(m)?wS:d)),(g=a(c,u,r))!=null&&(g+="")&&(d.parent=g);for(u=0;u<l;++u)if(d=s[u],g=d.parent){if(h=p.get(g),!h)throw new Error("missing: "+g);if(h===wS)throw new Error("ambiguous: "+g);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(n!=null){for(;f.data===ry&&f.children.length===1;)f=f.children[0],--l;for(let _=s.length-1;_>=0&&(d=s[_],d.data===ry);--_)d.data=null}if(f.parent=HB,f.eachBefore(function(_){_.depth=_.parent.depth+1,--l}).eachBefore(hO),f.parent=null,l>0)throw new Error("cycle");return f}return i.id=function(r){return arguments.length?(e=iy(r),i):e},i.parentId=function(r){return arguments.length?(t=iy(r),i):t},i.path=function(r){return arguments.length?(n=iy(r),i):n},i}function UB(e){e=`${e}`;let t=e.length;return vv(e,t-1)&&!vv(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function xS(e){let t=e.length;if(t<2)return"";for(;--t>1&&!vv(e,t););return e.slice(0,t)}function vv(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function YB(e,t){return e.parent===t.parent?1:2}function sy(e){var t=e.children;return t?t[0]:e.t}function oy(e){var t=e.children;return t?t[t.length-1]:e.t}function jB(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function XB(e){for(var t=0,n=0,i=e.children,r=i.length,s;--r>=0;)s=i[r],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function qB(e,t,n){return e.a.parent===t.parent?e.a:n}function Wg(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Wg.prototype=Object.create(Ac.prototype);function KB(e){for(var t=new Wg(e,0),n,i=[t],r,s,o,a;n=i.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=n.children[o]=new Wg(s[o],o)),r.parent=n;return(t.parent=new Wg(null,0)).children=[t],t}function Nm(){var e=YB,t=1,n=1,i=null;function r(c){var u=KB(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),i)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(y){y.x<f.x&&(f=y),y.x>h.x&&(h=y),y.depth>d.depth&&(d=y)});var g=f===h?1:e(f,h)/2,m=g-f.x,p=t/(h.x+g+m),_=n/(d.depth||1);c.eachBefore(function(y){y.x=(y.x+m)*p,y.y=y.depth*_})}return c}function s(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){XB(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+e(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+e(c._,h._));c.parent.A=a(c,h,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var h=c,d=c,g=u,m=h.parent.children[0],p=h.m,_=d.m,y=g.m,b=m.m,v;g=oy(g),h=sy(h),g&&h;)m=sy(m),d=oy(d),d.a=c,v=g.z+y-h.z-p+e(g._,h._),v>0&&(jB(qB(g,c,f),c,v),p+=v,_+=v),y+=g.m,p+=h.m,b+=m.m,_+=d.m;g&&!oy(d)&&(d.t=g,d.m+=y-_),h&&!sy(m)&&(m.t=h,m.m+=p-b,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return r.separation=function(c){return arguments.length?(e=c,r):e},r.size=function(c){return arguments.length?(i=!1,t=+c[0],n=+c[1],r):i?null:[t,n]},r.nodeSize=function(c){return arguments.length?(i=!0,t=+c[0],n=+c[1],r):i?[t,n]:null},r}const ZB=1664525,JB=1013904223,ES=1/4294967296;function Ew(e=Math.random()){let t=(0<=e&&e<1?e/ES:Math.abs(e))|0;return()=>(t=ZB*t+JB|0,ES*(t>>>0))}function Fr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Oh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const bv=Symbol("implicit");function Tw(){var e=new Ga,t=[],n=[],i=bv;function r(s){let o=e.get(s);if(o===void 0){if(i!==bv)return i;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Ga;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return Tw(t,n).unknown(i)},Fr.apply(r,arguments),r}function p0(){var e=Tw().unknown(void 0),t=e.domain,n=e.range,i=0,r=1,s,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var h=t().length,d=r<i,g=d?r:i,m=d?i:r;s=(m-g)/Math.max(1,h-l+c*2),a&&(s=Math.floor(s)),g+=(m-g-s*(h-l))*u,o=s*(1-l),a&&(g=Math.round(g),o=Math.round(o));var p=_i(h).map(function(_){return g+s*_});return n(d?p.reverse():p)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,f()):[i,r]},e.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(a=!!h,f()):a},e.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return p0(t(),[i,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},Fr.apply(f(),arguments)}function gO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return gO(t())},e}function QB(){return gO(p0.apply(null,arguments).paddingInner(1))}function tU(e){return function(){return e}}function wv(e){return+e}var TS=[0,1];function Dn(e){return e}function xv(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:tU(isNaN(t)?NaN:.5)}function eU(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function nU(e,t,n){var i=e[0],r=e[1],s=t[0],o=t[1];return r<i?(i=xv(r,i),s=n(o,s)):(i=xv(i,r),s=n(s,o)),function(a){return s(i(a))}}function iU(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=xv(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=i0(e,a,1,i)-1;return s[l](r[l](a))}}function kh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function _0(){var e=TS,t=TS,n=ou,i,r,s,o=Dn,a,l,c;function u(){var h=Math.min(e.length,t.length);return o!==Dn&&(o=eU(e[0],e[h-1])),a=h>2?iU:nU,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(e.map(i),t,n)))(i(o(h)))}return f.invert=function(h){return o(r((c||(c=a(t,e.map(i),sn)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,wv),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=u0,u()},f.clamp=function(h){return arguments.length?(o=h?!0:Dn,u()):o!==Dn},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return i=h,r=d,u()}}function mO(){return _0()(Dn,Dn)}function rU(e,t,n,i){var r=z1(e,t,n),s;switch(i=Zf(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=dG(r,o))&&(i.precision=s),ML(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=gG(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=hG(r))&&(i.precision=s-(i.type==="%")*2);break}}return Fo(i)}function lu(e){var t=e.domain;return e.ticks=function(n){var i=t();return Eo(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return rU(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,o=i[r],a=i[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);u-- >0;){if(c=Yf(o,a,n),c===l)return i[r]=o,i[s]=a,t(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function _r(){var e=mO();return e.copy=function(){return kh(e,_r())},Fr.apply(e,arguments),lu(e)}function pO(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,wv),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return pO(e).unknown(t)},e=arguments.length?Array.from(e,wv):[0,1],lu(n)}function _O(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],s=e[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),e[n]=t.floor(r),e[i]=t.ceil(s),e}function SS(e){return Math.log(e)}function CS(e){return Math.exp(e)}function sU(e){return-Math.log(-e)}function oU(e){return-Math.exp(-e)}function aU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function lU(e){return e===10?aU:e===Math.E?Math.exp:t=>Math.pow(e,t)}function cU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function AS(e){return(t,n)=>-e(-t,n)}function yO(e){const t=e(SS,CS),n=t.domain;let i=10,r,s;function o(){return r=cU(i),s=lU(i),n()[0]<0?(r=AS(r),s=AS(s),e(sU,oU)):e(SS,CS),t}return t.base=function(a){return arguments.length?(i=+a,o()):i},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=r(c),d=r(u),g,m;const p=a==null?10:+a;let _=[];if(!(i%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(g=1;g<i;++g)if(m=h<0?g/s(-h):g*s(h),!(m<c)){if(m>u)break;_.push(m)}}else for(;h<=d;++h)for(g=i-1;g>=1;--g)if(m=h>0?g/s(-h):g*s(h),!(m<c)){if(m>u)break;_.push(m)}_.length*2<p&&(_=Eo(c,u,p))}else _=Eo(h,d,Math.min(d-h,p)).map(s);return f?_.reverse():_},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Zf(l)).precision==null&&(l.trim=!0),l=Fo(l)),a===1/0)return l;const c=Math.max(1,i*a/t.ticks().length);return u=>{let f=u/s(Math.round(r(u)));return f*i<i-.5&&(f*=i),f<=c?l(u):""}},t.nice=()=>n(_O(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),t}function vO(){const e=yO(_0()).domain([1,10]);return e.copy=()=>kh(e,vO()).base(e.base()),Fr.apply(e,arguments),e}function MS(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function RS(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function bO(e){var t=1,n=e(MS(t),RS(t));return n.constant=function(i){return arguments.length?e(MS(t=+i),RS(t)):t},lu(n)}function wO(){var e=bO(_0());return e.copy=function(){return kh(e,wO()).constant(e.constant())},Fr.apply(e,arguments)}function IS(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function uU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function fU(e){return e<0?-e*e:e*e}function xO(e){var t=e(Dn,Dn),n=1;function i(){return n===1?e(Dn,Dn):n===.5?e(uU,fU):e(IS(n),IS(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},lu(t)}function EO(){var e=xO(_0());return e.copy=function(){return kh(e,EO()).exponent(e.exponent())},Fr.apply(e,arguments),e}function TO(){var e=[],t=[],n=[],i;function r(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=D9(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?i:t[i0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(xe),r()},s.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return TO().domain(e).range(t).unknown(i)},Fr.apply(s,arguments)}function SO(){var e=[.5],t=[0,1],n,i=1;function r(s){return s!=null&&s<=s?t[i0(e,s,0,i)]:n}return r.domain=function(s){return arguments.length?(e=Array.from(s),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(s){return arguments.length?(t=Array.from(s),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return SO().domain(e).range(t).unknown(n)},Fr.apply(r,arguments)}const ay=new Date,ly=new Date;function We(e,t,n,i){function r(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(e(s=new Date(+s)),s),r.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),e(s);while(c<s&&s<o);return l},r.filter=s=>We(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(r.count=(s,o)=>(ay.setTime(+s),ly.setTime(+o),e(ay),e(ly),Math.floor(n(ay,ly))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const Dm=We(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Dm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?We(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Dm);Dm.range;const as=1e3,vi=as*60,ls=vi*60,Es=ls*24,Sw=Es*7,LS=Es*30,cy=Es*365,yr=We(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*as)},(e,t)=>(t-e)/as,e=>e.getUTCSeconds());yr.range;const y0=We(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*as)},(e,t)=>{e.setTime(+e+t*vi)},(e,t)=>(t-e)/vi,e=>e.getMinutes());y0.range;const $h=We(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*vi)},(e,t)=>(t-e)/vi,e=>e.getUTCMinutes());$h.range;const v0=We(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*as-e.getMinutes()*vi)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getHours());v0.range;const Nh=We(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getUTCHours());Nh.range;const rl=We(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vi)/Es,e=>e.getDate()-1);rl.range;const b0=We(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Es,e=>e.getUTCDate()-1);b0.range;const w0=We(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Es,e=>Math.floor(e/Es));w0.range;function sl(e){return We(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*vi)/Sw)}const Mc=sl(0),Qf=sl(1),CO=sl(2),AO=sl(3),Ka=sl(4),MO=sl(5),RO=sl(6);Mc.range;Qf.range;CO.range;AO.range;Ka.range;MO.range;RO.range;function ol(e){return We(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Sw)}const Rc=ol(0),th=ol(1),IO=ol(2),LO=ol(3),Za=ol(4),OO=ol(5),kO=ol(6);Rc.range;th.range;IO.range;LO.range;Za.range;OO.range;kO.range;const Dh=We(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Dh.range;const Ph=We(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ph.range;const Qi=We(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:We(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Qi.range;const tr=We(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());tr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:We(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});tr.range;function $O(e,t,n,i,r,s){const o=[[yr,1,as],[yr,5,5*as],[yr,15,15*as],[yr,30,30*as],[s,1,vi],[s,5,5*vi],[s,15,15*vi],[s,30,30*vi],[r,1,ls],[r,3,3*ls],[r,6,6*ls],[r,12,12*ls],[i,1,Es],[i,2,2*Es],[n,1,Sw],[t,1,LS],[t,3,3*LS],[e,1,cy]];function a(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),g=d?d.range(c,+u+1):[];return h?g.reverse():g}function l(c,u,f){const h=Math.abs(u-c)/f,d=n0(([,,p])=>p).right(o,h);if(d===o.length)return e.every(z1(c/cy,u/cy,f));if(d===0)return Dm.every(Math.max(z1(c,u,f),1));const[g,m]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return g.every(m)}return[a,l]}const[hU,NO]=$O(tr,Ph,Rc,w0,Nh,$h),[dU,gU]=$O(Qi,Dh,Mc,rl,v0,y0);function uy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zu(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function mU(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Wu(r),u=Vu(r),f=Wu(s),h=Vu(s),d=Wu(o),g=Vu(o),m=Wu(a),p=Vu(a),_=Wu(l),y=Vu(l),b={a:D,A:V,b:Y,B,c:null,d:PS,e:PS,f:FU,g:XU,G:KU,H:NU,I:DU,j:PU,L:DO,m:zU,M:WU,p:q,q:z,Q:WS,s:VS,S:VU,u:HU,U:GU,V:BU,w:UU,W:YU,x:null,X:null,y:jU,Y:qU,Z:ZU,"%":zS},v={a:Q,A:nt,b:rt,B:at,c:null,d:FS,e:FS,f:eY,g:fY,G:dY,H:JU,I:QU,j:tY,L:FO,m:nY,M:iY,p:W,q:G,Q:WS,s:VS,S:rY,u:sY,U:oY,V:aY,w:lY,W:cY,x:null,X:null,y:uY,Y:hY,Z:gY,"%":zS},x={a:S,A,b:R,B:k,c:$,d:NS,e:NS,f:LU,g:$S,G:kS,H:DS,I:DS,j:AU,L:IU,m:CU,M:MU,p:I,q:SU,Q:kU,s:$U,S:RU,u:bU,U:wU,V:xU,w:vU,W:EU,x:L,X:N,y:$S,Y:kS,Z:TU,"%":OU};b.x=w(n,b),b.X=w(i,b),b.c=w(t,b),v.x=w(n,v),v.X=w(i,v),v.c=w(t,v);function w(F,j){return function(Z){var C=[],O=-1,P=0,H=F.length,U,X,lt;for(Z instanceof Date||(Z=new Date(+Z));++O<H;)F.charCodeAt(O)===37&&(C.push(F.slice(P,O)),(X=OS[U=F.charAt(++O)])!=null?U=F.charAt(++O):X=U==="e"?" ":"0",(lt=j[U])&&(U=lt(Z,X)),C.push(U),P=O+1);return C.push(F.slice(P,O)),C.join("")}}function E(F,j){return function(Z){var C=zu(1900,void 0,1),O=T(C,F,Z+="",0),P,H;if(O!=Z.length)return null;if("Q"in C)return new Date(C.Q);if("s"in C)return new Date(C.s*1e3+("L"in C?C.L:0));if(j&&!("Z"in C)&&(C.Z=0),"p"in C&&(C.H=C.H%12+C.p*12),C.m===void 0&&(C.m="q"in C?C.q:0),"V"in C){if(C.V<1||C.V>53)return null;"w"in C||(C.w=1),"Z"in C?(P=fy(zu(C.y,0,1)),H=P.getUTCDay(),P=H>4||H===0?th.ceil(P):th(P),P=b0.offset(P,(C.V-1)*7),C.y=P.getUTCFullYear(),C.m=P.getUTCMonth(),C.d=P.getUTCDate()+(C.w+6)%7):(P=uy(zu(C.y,0,1)),H=P.getDay(),P=H>4||H===0?Qf.ceil(P):Qf(P),P=rl.offset(P,(C.V-1)*7),C.y=P.getFullYear(),C.m=P.getMonth(),C.d=P.getDate()+(C.w+6)%7)}else("W"in C||"U"in C)&&("w"in C||(C.w="u"in C?C.u%7:"W"in C?1:0),H="Z"in C?fy(zu(C.y,0,1)).getUTCDay():uy(zu(C.y,0,1)).getDay(),C.m=0,C.d="W"in C?(C.w+6)%7+C.W*7-(H+5)%7:C.w+C.U*7-(H+6)%7);return"Z"in C?(C.H+=C.Z/100|0,C.M+=C.Z%100,fy(C)):uy(C)}}function T(F,j,Z,C){for(var O=0,P=j.length,H=Z.length,U,X;O<P;){if(C>=H)return-1;if(U=j.charCodeAt(O++),U===37){if(U=j.charAt(O++),X=x[U in OS?j.charAt(O++):U],!X||(C=X(F,Z,C))<0)return-1}else if(U!=Z.charCodeAt(C++))return-1}return C}function I(F,j,Z){var C=c.exec(j.slice(Z));return C?(F.p=u.get(C[0].toLowerCase()),Z+C[0].length):-1}function S(F,j,Z){var C=d.exec(j.slice(Z));return C?(F.w=g.get(C[0].toLowerCase()),Z+C[0].length):-1}function A(F,j,Z){var C=f.exec(j.slice(Z));return C?(F.w=h.get(C[0].toLowerCase()),Z+C[0].length):-1}function R(F,j,Z){var C=_.exec(j.slice(Z));return C?(F.m=y.get(C[0].toLowerCase()),Z+C[0].length):-1}function k(F,j,Z){var C=m.exec(j.slice(Z));return C?(F.m=p.get(C[0].toLowerCase()),Z+C[0].length):-1}function $(F,j,Z){return T(F,t,j,Z)}function L(F,j,Z){return T(F,n,j,Z)}function N(F,j,Z){return T(F,i,j,Z)}function D(F){return o[F.getDay()]}function V(F){return s[F.getDay()]}function Y(F){return l[F.getMonth()]}function B(F){return a[F.getMonth()]}function q(F){return r[+(F.getHours()>=12)]}function z(F){return 1+~~(F.getMonth()/3)}function Q(F){return o[F.getUTCDay()]}function nt(F){return s[F.getUTCDay()]}function rt(F){return l[F.getUTCMonth()]}function at(F){return a[F.getUTCMonth()]}function W(F){return r[+(F.getUTCHours()>=12)]}function G(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var j=w(F+="",b);return j.toString=function(){return F},j},parse:function(F){var j=E(F+="",!1);return j.toString=function(){return F},j},utcFormat:function(F){var j=w(F+="",v);return j.toString=function(){return F},j},utcParse:function(F){var j=E(F+="",!0);return j.toString=function(){return F},j}}}var OS={"-":"",_:" ",0:"0"},Ke=/^\s*\d+/,pU=/^%/,_U=/[\\^$*+?|[\]().{}]/g;function qt(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function yU(e){return e.replace(_U,"\\$&")}function Wu(e){return new RegExp("^(?:"+e.map(yU).join("|")+")","i")}function Vu(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function vU(e,t,n){var i=Ke.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function bU(e,t,n){var i=Ke.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function wU(e,t,n){var i=Ke.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function xU(e,t,n){var i=Ke.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function EU(e,t,n){var i=Ke.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function kS(e,t,n){var i=Ke.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function $S(e,t,n){var i=Ke.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function TU(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function SU(e,t,n){var i=Ke.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function CU(e,t,n){var i=Ke.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function NS(e,t,n){var i=Ke.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function AU(e,t,n){var i=Ke.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function DS(e,t,n){var i=Ke.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function MU(e,t,n){var i=Ke.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function RU(e,t,n){var i=Ke.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function IU(e,t,n){var i=Ke.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function LU(e,t,n){var i=Ke.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function OU(e,t,n){var i=pU.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function kU(e,t,n){var i=Ke.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function $U(e,t,n){var i=Ke.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function PS(e,t){return qt(e.getDate(),t,2)}function NU(e,t){return qt(e.getHours(),t,2)}function DU(e,t){return qt(e.getHours()%12||12,t,2)}function PU(e,t){return qt(1+rl.count(Qi(e),e),t,3)}function DO(e,t){return qt(e.getMilliseconds(),t,3)}function FU(e,t){return DO(e,t)+"000"}function zU(e,t){return qt(e.getMonth()+1,t,2)}function WU(e,t){return qt(e.getMinutes(),t,2)}function VU(e,t){return qt(e.getSeconds(),t,2)}function HU(e){var t=e.getDay();return t===0?7:t}function GU(e,t){return qt(Mc.count(Qi(e)-1,e),t,2)}function PO(e){var t=e.getDay();return t>=4||t===0?Ka(e):Ka.ceil(e)}function BU(e,t){return e=PO(e),qt(Ka.count(Qi(e),e)+(Qi(e).getDay()===4),t,2)}function UU(e){return e.getDay()}function YU(e,t){return qt(Qf.count(Qi(e)-1,e),t,2)}function jU(e,t){return qt(e.getFullYear()%100,t,2)}function XU(e,t){return e=PO(e),qt(e.getFullYear()%100,t,2)}function qU(e,t){return qt(e.getFullYear()%1e4,t,4)}function KU(e,t){var n=e.getDay();return e=n>=4||n===0?Ka(e):Ka.ceil(e),qt(e.getFullYear()%1e4,t,4)}function ZU(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+qt(t/60|0,"0",2)+qt(t%60,"0",2)}function FS(e,t){return qt(e.getUTCDate(),t,2)}function JU(e,t){return qt(e.getUTCHours(),t,2)}function QU(e,t){return qt(e.getUTCHours()%12||12,t,2)}function tY(e,t){return qt(1+b0.count(tr(e),e),t,3)}function FO(e,t){return qt(e.getUTCMilliseconds(),t,3)}function eY(e,t){return FO(e,t)+"000"}function nY(e,t){return qt(e.getUTCMonth()+1,t,2)}function iY(e,t){return qt(e.getUTCMinutes(),t,2)}function rY(e,t){return qt(e.getUTCSeconds(),t,2)}function sY(e){var t=e.getUTCDay();return t===0?7:t}function oY(e,t){return qt(Rc.count(tr(e)-1,e),t,2)}function zO(e){var t=e.getUTCDay();return t>=4||t===0?Za(e):Za.ceil(e)}function aY(e,t){return e=zO(e),qt(Za.count(tr(e),e)+(tr(e).getUTCDay()===4),t,2)}function lY(e){return e.getUTCDay()}function cY(e,t){return qt(th.count(tr(e)-1,e),t,2)}function uY(e,t){return qt(e.getUTCFullYear()%100,t,2)}function fY(e,t){return e=zO(e),qt(e.getUTCFullYear()%100,t,2)}function hY(e,t){return qt(e.getUTCFullYear()%1e4,t,4)}function dY(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Za(e):Za.ceil(e),qt(e.getUTCFullYear()%1e4,t,4)}function gY(){return"+0000"}function zS(){return"%"}function WS(e){return+e}function VS(e){return Math.floor(+e/1e3)}var Tl,Cw,Fh;mY({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mY(e){return Tl=mU(e),Cw=Tl.format,Tl.parse,Fh=Tl.utcFormat,Tl.utcParse,Tl}function pY(e){return new Date(e)}function _Y(e){return e instanceof Date?+e:+new Date(+e)}function Aw(e,t,n,i,r,s,o,a,l,c){var u=mO(),f=u.invert,h=u.domain,d=c(".%L"),g=c(":%S"),m=c("%I:%M"),p=c("%I %p"),_=c("%a %d"),y=c("%b %d"),b=c("%B"),v=c("%Y");function x(w){return(l(w)<w?d:a(w)<w?g:o(w)<w?m:s(w)<w?p:i(w)<w?r(w)<w?_:y:n(w)<w?b:v)(w)}return u.invert=function(w){return new Date(f(w))},u.domain=function(w){return arguments.length?h(Array.from(w,_Y)):h().map(pY)},u.ticks=function(w){var E=h();return e(E[0],E[E.length-1],w??10)},u.tickFormat=function(w,E){return E==null?x:c(E)},u.nice=function(w){var E=h();return(!w||typeof w.range!="function")&&(w=t(E[0],E[E.length-1],w??10)),w?h(_O(E,w)):u},u.copy=function(){return kh(u,Aw(e,t,n,i,r,s,o,a,l,c))},u}function yY(){return Fr.apply(Aw(dU,gU,Qi,Dh,Mc,rl,v0,y0,yr,Cw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vY(){return Fr.apply(Aw(hU,NO,tr,Ph,Rc,b0,Nh,$h,yr,Fh).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bY(){var e=0,t=1,n,i,r,s,o=Dn,a=!1,l;function c(f){return f==null||isNaN(f=+f)?l:o(r===0?.5:(f=(s(f)-n)*r,a?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),i=s(t=+t),r=n===i?0:1/(i-n),c):[e,t]},c.clamp=function(f){return arguments.length?(a=!!f,c):a},c.interpolator=function(f){return arguments.length?(o=f,c):o};function u(f){return function(h){var d,g;return arguments.length?([d,g]=h,o=f(d,g),c):[o(0),o(1)]}}return c.range=u(ou),c.rangeRound=u(u0),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return s=f,n=f(e),i=f(t),r=n===i?0:1/(i-n),c}}function zh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function WO(){var e=lu(bY()(Dn));return e.copy=function(){return zh(e,WO())},Oh.apply(e,arguments)}function x0(){var e=0,t=.5,n=1,i=1,r,s,o,a,l,c=Dn,u,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-s)*(i*m<i*s?a:l),c(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t,n]=m,r=u(e=+e),s=u(t=+t),o=u(n=+n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d):[e,t,n]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(c=m,d):c};function g(m){return function(p){var _,y,b;return arguments.length?([_,y,b]=p,c=f0(m,[_,y,b]),d):[c(0),c(.5),c(1)]}}return d.range=g(ou),d.rangeRound=g(u0),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return u=m,r=m(e),s=m(t),o=m(n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d}}function VO(){var e=lu(x0()(Dn));return e.copy=function(){return zh(e,VO())},Oh.apply(e,arguments)}function HO(){var e=yO(x0()).domain([.1,1,10]);return e.copy=function(){return zh(e,HO()).base(e.base())},Oh.apply(e,arguments)}function GO(){var e=bO(x0());return e.copy=function(){return zh(e,GO()).constant(e.constant())},Oh.apply(e,arguments)}function BO(){var e=xO(x0());return e.copy=function(){return zh(e,BO()).exponent(e.exponent())},Oh.apply(e,arguments)}function $t(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const wY=$t("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),xY=$t("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),EY=$t("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),TY=$t("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),SY=$t("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),CY=$t("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),AY=$t("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),MY=$t("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),RY=$t("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),IY=$t("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ue=e=>hL(e[e.length-1]);var UO=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map($t);const YO=ue(UO);var jO=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map($t);const XO=ue(jO);var qO=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map($t);const KO=ue(qO);var ZO=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map($t);const JO=ue(ZO);var Ev=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map($t);const Pm=ue(Ev);var QO=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map($t);const t3=ue(QO);var Tv=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map($t);const Fm=ue(Tv);var e3=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map($t);const n3=ue(e3);var i3=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map($t);const r3=ue(i3);var s3=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map($t);const o3=ue(s3);var a3=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map($t);const l3=ue(a3);var c3=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map($t);const u3=ue(c3);var f3=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map($t);const h3=ue(f3);var d3=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map($t);const g3=ue(d3);var m3=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map($t);const p3=ue(m3);var _3=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map($t);const y3=ue(_3);var v3=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map($t);const b3=ue(v3);var w3=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map($t);const x3=ue(w3);var E3=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map($t);const T3=ue(E3);var S3=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map($t);const C3=ue(S3);var A3=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map($t);const M3=ue(A3);var R3=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map($t);const I3=ue(R3);var L3=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map($t);const O3=ue(L3);var k3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map($t);const $3=ue(k3);var N3=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map($t);const D3=ue(N3);var P3=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map($t);const F3=ue(P3);var z3=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map($t);const W3=ue(z3);function V3(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const H3=dw(kr(300,.5,0),kr(-240,.5,1));var G3=dw(kr(-100,.75,.35),kr(80,1.5,.8)),B3=dw(kr(260,.75,.35),kr(80,1.5,.8)),Bd=kr();function U3(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Bd.h=360*e-100,Bd.s=1.5-1.5*t,Bd.l=.8-.9*t,Bd+""}var Ud=Or(),LY=Math.PI/3,OY=Math.PI*2/3;function Y3(e){var t;return e=(.5-e)*Math.PI,Ud.r=255*(t=Math.sin(e))*t,Ud.g=255*(t=Math.sin(e+LY))*t,Ud.b=255*(t=Math.sin(e+OY))*t,Ud+""}function j3(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function E0(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const X3=E0($t("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var q3=E0($t("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),K3=E0($t("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Z3=E0($t("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ue(e){return function(){return e}}const J3=Math.cos,Mw=Math.min,zm=Math.sin,Ve=Math.sqrt,HS=1e-12,Wm=Math.PI,T0=2*Wm;function Q3(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new SL(t)}function tk(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ek(e){this._context=e}ek.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Wh(e){return new ek(e)}function nk(e){return e[0]}function ik(e){return e[1]}function Rw(e,t){var n=Ue(!0),i=null,r=Wh,s=null,o=Q3(a);e=typeof e=="function"?e:e===void 0?nk:Ue(e),t=typeof t=="function"?t:t===void 0?ik:Ue(t);function a(l){var c,u=(l=tk(l)).length,f,h=!1,d;for(i==null&&(s=r(d=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,c,l),+t(f,c,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:Ue(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:Ue(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Ue(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),a):i},a}function Ic(e,t,n){var i=null,r=Ue(!0),s=null,o=Wh,a=null,l=Q3(c);e=typeof e=="function"?e:e===void 0?nk:Ue(+e),t=typeof t=="function"?t:Ue(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ik:Ue(+n);function c(f){var h,d,g,m=(f=tk(f)).length,p,_=!1,y,b=new Array(m),v=new Array(m);for(s==null&&(a=o(y=l())),h=0;h<=m;++h){if(!(h<m&&r(p=f[h],h,f))===_)if(_=!_)d=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=h-1;g>=d;--g)a.point(b[g],v[g]);a.lineEnd(),a.areaEnd()}_&&(b[h]=+e(p,h,f),v[h]=+t(p,h,f),a.point(i?+i(p,h,f):b[h],n?+n(p,h,f):v[h]))}if(y)return a=null,y+""||null}function u(){return Rw().defined(r).curve(o).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ue(+f),i=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ue(+f),c):e},c.x1=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:Ue(+f),c):i},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ue(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ue(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ue(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(i).y(t)},c.defined=function(f){return arguments.length?(r=typeof f=="function"?f:Ue(!!f),c):r},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class rk{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function kY(e){return new rk(e,!0)}function $Y(e){return new rk(e,!1)}const NY=Ve(3),sk={draw(e,t){const n=Ve(t+Mw(t/28,.75))*.59436,i=n/2,r=i*NY;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-r,-i),e.lineTo(r,i),e.moveTo(-r,i),e.lineTo(r,-i)}},eh={draw(e,t){const n=Ve(t/Wm);e.moveTo(n,0),e.arc(0,0,n,0,T0)}},ok={draw(e,t){const n=Ve(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},ak=Ve(1/3),DY=ak*2,lk={draw(e,t){const n=Ve(t/DY),i=n*ak;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},ck={draw(e,t){const n=Ve(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},uk={draw(e,t){const n=Ve(t-Mw(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},fk={draw(e,t){const n=Ve(t),i=-n/2;e.rect(i,i,n,n)}},hk={draw(e,t){const n=Ve(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},PY=.8908130915292852,dk=zm(Wm/10)/zm(7*Wm/10),FY=zm(T0/10)*dk,zY=-J3(T0/10)*dk,gk={draw(e,t){const n=Ve(t*PY),i=FY*n,r=zY*n;e.moveTo(0,-n),e.lineTo(i,r);for(let s=1;s<5;++s){const o=T0*s/5,a=J3(o),l=zm(o);e.lineTo(l*n,-a*n),e.lineTo(a*i-l*r,l*i+a*r)}e.closePath()}},hy=Ve(3),mk={draw(e,t){const n=-Ve(t/(hy*3));e.moveTo(0,n*2),e.lineTo(-hy*n,-n),e.lineTo(hy*n,-n),e.closePath()}},WY=Ve(3),pk={draw(e,t){const n=Ve(t)*.6824,i=n/2,r=n*WY/2;e.moveTo(0,-n),e.lineTo(r,i),e.lineTo(-r,i),e.closePath()}},di=-.5,gi=Ve(3)/2,Sv=1/Ve(12),VY=(Sv/2+1)*3,_k={draw(e,t){const n=Ve(t/VY),i=n/2,r=n*Sv,s=i,o=n*Sv+n,a=-s,l=o;e.moveTo(i,r),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(di*i-gi*r,gi*i+di*r),e.lineTo(di*s-gi*o,gi*s+di*o),e.lineTo(di*a-gi*l,gi*a+di*l),e.lineTo(di*i+gi*r,di*r-gi*i),e.lineTo(di*s+gi*o,di*o-gi*s),e.lineTo(di*a+gi*l,di*l-gi*a),e.closePath()}},yk={draw(e,t){const n=Ve(t-Mw(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},HY=[eh,ok,lk,fk,gk,mk,_k],GY=[eh,uk,yk,pk,sk,hk,ck];function So(){}function Vm(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function S0(e){this._context=e}S0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nh(e){return new S0(e)}function vk(e){this._context=e}vk.prototype={areaStart:So,areaEnd:So,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Vm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function BY(e){return new vk(e)}function bk(e){this._context=e}bk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Vm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function UY(e){return new bk(e)}function wk(e,t){this._basis=new S0(e),this._beta=t}wk.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],s=e[n]-i,o=t[n]-r,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(i+l*s),this._beta*t[a]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const YY=function e(t){function n(i){return t===1?new S0(i):new wk(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function Hm(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Iw(e,t){this._context=e,this._k=(1-t)/6}Iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Hm(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Hm(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jY=function e(t){function n(i){return new Iw(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Lw(e,t){this._context=e,this._k=(1-t)/6}Lw.prototype={areaStart:So,areaEnd:So,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Hm(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const XY=function e(t){function n(i){return new Lw(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Ow(e,t){this._context=e,this._k=(1-t)/6}Ow.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Hm(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qY=function e(t){function n(i){return new Ow(i,t)}return n.tension=function(i){return e(+i)},n}(0);function kw(e,t,n){var i=e._x1,r=e._y1,s=e._x2,o=e._y2;if(e._l01_a>HS){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>HS){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(i,r,s,o,e._x2,e._y2)}function xk(e,t){this._context=e,this._alpha=t}xk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:kw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const KY=function e(t){function n(i){return t?new xk(i,t):new Iw(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Ek(e,t){this._context=e,this._alpha=t}Ek.prototype={areaStart:So,areaEnd:So,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:kw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ZY=function e(t){function n(i){return t?new Ek(i,t):new Lw(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Tk(e,t){this._context=e,this._alpha=t}Tk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:kw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const JY=function e(t){function n(i){return t?new Tk(i,t):new Ow(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Sk(e){this._context=e}Sk.prototype={areaStart:So,areaEnd:So,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function QY(e){return new Sk(e)}function GS(e){return e<0?-1:1}function BS(e,t,n){var i=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(i||r<0&&-0),o=(n-e._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(GS(s)+GS(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function US(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function dy(e,t,n){var i=e._x0,r=e._y0,s=e._x1,o=e._y1,a=(s-i)/3;e._context.bezierCurveTo(i+a,r+a*t,s-a,o-a*n,s,o)}function Gm(e){this._context=e}Gm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dy(this,this._t0,US(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,dy(this,US(this,n=BS(this,e,t)),n);break;default:dy(this,this._t0,n=BS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Ck(e){this._context=new Ak(e)}(Ck.prototype=Object.create(Gm.prototype)).point=function(e,t){Gm.prototype.point.call(this,t,e)};function Ak(e){this._context=e}Ak.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,s){this._context.bezierCurveTo(t,e,i,n,s,r)}};function tj(e){return new Gm(e)}function ej(e){return new Ck(e)}function Mk(e){this._context=e}Mk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=YS(e),r=YS(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function YS(e){var t,n=e.length-1,i,r=new Array(n),s=new Array(n),o=new Array(n);for(r[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/s[t-1],s[t]-=i,o[t]-=i*o[t-1];for(r[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)r[t]=(o[t]-r[t+1])/s[t];for(s[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function nj(e){return new Mk(e)}function C0(e,t){this._context=e,this._t=t}C0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ij(e){return new C0(e,.5)}function rj(e){return new C0(e,0)}function sj(e){return new C0(e,1)}function gf(e,t,n){this.k=e,this.x=t,this.y=n}gf.prototype={constructor:gf,scale:function(e){return e===1?this:new gf(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new gf(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};gf.prototype;class Si{constructor(t){Mt(this,"title","");Mt(this,"value","");const n=t;this.title=n==null?void 0:n.title,this.value=n==null?void 0:n.value}}const oj={props:{name:{type:String,required:!0},icon:String,recordField:{type:String,required:!0},graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},yLabel:{type:String,required:!0},unit:{type:String,required:!0},color:{type:String,required:!0},pointerColor:{type:String,default:"#78e08f"},receivedRecord:Zt,details:Array},data(){return{elemWidth:0,hoveredRecord:new Zt,recordView:new Zt,xScale:_r()}},watch:{receivedRecord:{handler(e){this.recordView=e;const t=Ei(this.$refs[`${this.graphName}`]).select("g#pointer");if(JSON.stringify(e)==JSON.stringify(new Zt)){t.style("opacity",0);return}t.style("opacity",1),t.attr("transform",`translate(${this.xScale(e.distance/1e3)}, 0)`)}},hoveredRecord:{handler(e){this.recordView=e,this.$emit("hoveredRecord",e)}},graphRecords:{handler(){this.$nextTick(()=>requestAnimationFrame(()=>this.renderGraph()))}}},computed:{graphName(){return this.name.toLowerCase().replace(/\s/g,"-")+"-graph"},graphContainerName(){return this.graphName+"-container"}},methods:{formatLabel(e){const t=typeof e=="number"?e:e.valueOf();return this.name=="Pace"?bc(t):(this.name=="Speed"&&(e=t*3600/1e3),Fo("~s")(t))},renderGraph(){const e=this.graphRecords;if(e.length==0)return;const t=25,n=10,i=25,r=45,s=this.elemWidth,o=230-i,a=s>720?10:5,l=3,c=Ei(this.$refs[`${this.graphName}`]);c.select("svg").on("pointerdown",null).on("pointermove",null).on("mouseleave",null).remove();const u=c.append("svg").attr("width",s).attr("height",o).style("touch-action","none").style("user-select","none").style("--webkit-user-select","none").style("--ms-user-select","none"),f=_r().domain(be(e,b=>b.distance/1e3)).range([r,s-n]);this.xScale=f;const h=_r().domain(be(e,b=>b.altitude)).rangeRound([o-i,t]).nice(),d=be(e,b=>this.scaleUnit(b[this.recordField])??0),g=_r().domain(d).rangeRound([o-i,t]).nice();this.name=="Pace"&&g.domain([d[1],d[0]]),u.append("g").style("font-size","0.8em").attr("transform",`translate(0,${o-i})`).call(sw(f).ticks(a)),u.append("g").style("font-size","0.8em").attr("transform",`translate(${r},0)`).call(VI(g).ticks(l).tickFormat(this.formatLabel)),u.append("text").attr("class","x-axis-label").attr("x",s-n-70).attr("y",t-15).style("fill","currentColor").style("font-size","0.9em").text("Dist. (km) →"),u.append("text").attr("class","y-axis-label").attr("x",0).attr("y",t-15).style("fill","currentColor").style("font-size","0.9em").text(`↑ ${this.yLabel}`),u.append("g").attr("stroke","currentColor").attr("stroke-opacity",.1).style("stroke","lightgray").style("stroke-dasharray","2,2").call(b=>b.append("g").selectAll("line").data(f.ticks(a)).join("line").attr("x1",v=>.5+f(v)).attr("x2",v=>.5+f(v)).attr("y1",t).attr("y2",o-i)).call(b=>b.append("g").selectAll("line").data(g.ticks(l)).join("line").attr("y1",v=>.5+g(v)).attr("y2",v=>.5+g(v)).attr("x1",r).attr("x2",s-n));const m=Ic().curve(nh).x(b=>f(b.distance/1e3)).y0(h(qe(h.domain()))).y1(b=>h(b.altitude??0));u.append("g").append("path").datum(e).transition().attr("fill","lightgrey").style("opacity",.9).attr("d",m);const p=Ic().curve(nh).x(b=>f(b.distance/1e3)).y0(g(qe(g.domain()))).y1(b=>{let v=b[this.recordField];return v=v??g.domain()[0],g(this.scaleUnit(v))});this.name=="Pace"&&p.y0(g(ze(g.domain()))),u.append("g").append("path").datum(e).transition().attr("fill",`${this.color}`).style("opacity",.8).attr("d",p);const _=u.append("g").attr("id","pointer").style("opacity",0).call(b=>{b.append("line").attr("x1",0).attr("y1",t).attr("x2",0).attr("y2",o-i).attr("stroke",`${this.pointerColor}`).attr("stroke-width",1.5)}).call(b=>{b.append("polygon").attr("points","0,30 -5,20 5,20").attr("fill",`${this.pointerColor}`)}),y=b=>{const[v]=lw(b),[x,w]=f.range();if(_.style("opacity",1),v<=x){_.attr("transform",`translate(${x}, 0)`),this.hoveredRecord=this.records[0];return}else if(v>=w){_.attr("transform",`translate(${w}, 0)`),this.hoveredRecord=this.records[this.records.length-1];return}_.attr("transform",`translate(${v}, 0)`);const E=(v-x)/(w-x),T=Math.round(E*(this.records.length-1));let I=new Zt,S=Number.MAX_VALUE;if(f(this.records[T].distance/1e3)<=v)for(let A=T;A<this.records.length;A++){const R=Math.abs(v-f(this.records[A].distance/1e3));if(R>S)break;I=this.records[A],S=R}else for(let A=T;A>=0;A--){const R=Math.abs(v-f(this.records[A].distance/1e3));if(R>S)break;I=this.records[A],S=R}this.hoveredRecord=I};u.on("pointerdown",y),u.on("pointermove",y,{passive:!0}),u.on("mouseleave",()=>{this.hoveredRecord=new Zt,_.style("opacity",0)})},formatUnit(e){return this.recordField==="pace"?e?bc(e):"-:-":e?e.toFixed(2):"0.00"},scaleUnit(e){return this.recordField==="speed"&&(e=e*3600/1e3),isNaN(e)?null:e},onResize(){this.$nextTick(()=>{const e=this.$el;e.clientWidth!=0&&e.clientWidth!=this.elemWidth&&(this.elemWidth=e.clientWidth,this.renderGraph())})}},mounted(){const e=this.$el;this.$nextTick(()=>{this.elemWidth=e.clientWidth,requestAnimationFrame(()=>this.renderGraph())}),new IntersectionObserver(n=>{n.forEach(i=>{i.isIntersecting&&this.elemWidth==0&&(this.elemWidth=e.clientWidth,this.renderGraph())})},{root:null,rootMargin:"0px",threshold:.5}).observe(e),window.addEventListener("resize",this.onResize)},unmounted(){window.removeEventListener("resize",this.onResize)}};const Ii=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},Rk=e=>(Nr("data-v-9c145625"),e=e(),Dr(),e),aj={class:"col-12 h-100"},lj=["data-bs-target","aria-controls"],cj={class:"col text-start"},uj={class:"title"},fj=Rk(()=>M("i",{class:"fa-solid fa-caret-down when-opened"},null,-1)),hj=Rk(()=>M("i",{class:"fa-solid fa-caret-right when-closed"},null,-1)),dj={class:"col text-end"},gj={class:"pe-1 fs-6"},mj=["id"],pj={class:"graph-summary pt-1 pb-1"},_j={class:"col px-0 text-start"},yj={style:{"font-size":"0.9em"}},vj={class:"col px-0 text-end"},bj={class:"fs-6 pe-1"},wj={style:{"font-size":"0.9em"}};function xj(e,t,n,i,r,s){return ct(),ft("div",aj,[M("div",{class:"line-graph-hover row m-0",style:{cursor:"pointer"},"data-bs-toggle":"collapse","data-bs-target":`#${s.graphContainerName}`,"aria-expanded":"false","aria-controls":s.graphContainerName},[M("div",cj,[M("h6",uj,[fj,hj,ie(" "+ot(n.name)+" ",1),M("i",{class:Fn(["fa-solid",n.icon])},null,2)])]),M("div",dj,[M("span",null,[M("span",gj,ot(s.formatUnit(s.scaleUnit(r.recordView[n.recordField]))),1),M("span",null,ot(n.unit),1)])])],8,lj),M("div",{class:"collapse show",id:s.graphContainerName},[M("div",{ref:s.graphName},null,512),M("div",pj,[(ct(!0),ft(Ln,null,qp(n.details,(o,a)=>(ct(),ft("div",{class:"row",key:a},[M("span",_j,[M("span",yj,ot(o.title),1)]),M("span",vj,[M("span",bj,ot(o.value),1),M("span",wj,ot(n.unit),1)])]))),128))])],8,mj)])}const cu=Ii(oj,[["render",xj],["__scopeId","data-v-9c145625"]]);class zr{constructor(){Mt(this,"sport",null);Mt(this,"subSport",null);Mt(this,"totalMovingTime",null);Mt(this,"totalElapsedTime",null);Mt(this,"totalTimerTime",null);Mt(this,"totalDistance",null);Mt(this,"totalAscent",null);Mt(this,"totalDescent",null);Mt(this,"totalCycles",null);Mt(this,"totalCalories",null);Mt(this,"avgSpeed",null);Mt(this,"maxSpeed",null);Mt(this,"avgHeartRate",null);Mt(this,"maxHeartRate",null);Mt(this,"avgCadence",null);Mt(this,"maxCadence",null);Mt(this,"avgPower",null);Mt(this,"maxPower",null);Mt(this,"avgTemperature",null);Mt(this,"maxTemperature",null);Mt(this,"avgAltitude",null);Mt(this,"maxAltitude",null);Mt(this,"avgPace",null);Mt(this,"avgElapsedPace",null)}}const Ej={class:"col-12 h-100 pt-2"},Tj={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:zr,required:!0},receivedRecord:Zt},computed:{details(){var e,t;return[new Si({title:"Avg Cadence",value:((e=this.summary.avgCadence)==null?void 0:e.toFixed(0))??"0"}),new Si({title:"Max Cadence",value:((t=this.summary.maxCadence)==null?void 0:t.toFixed(0))??"0"})]}},methods:{onHoveredRecord(e){this.$emit("hoveredRecord",e)}}},Sj=oi({...Tj,__name:"CadenceGraph",setup(e){return(t,n)=>(ct(),ft("div",Ej,[Ot(cu,{name:"Cadence",icon:"fa-rotate","record-field":"cadence",records:e.records,details:t.details,"graph-records":e.graphRecords,color:"darkslateblue","y-label":"Cad. (rpm)",unit:"rpm","received-record":e.receivedRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","details","graph-records","y-label","received-record","onHoveredRecord"])]))}});class al extends Error{}class Cj extends al{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Aj extends al{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Mj extends al{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class mf extends al{}class Ik extends al{constructor(t){super(`Invalid unit ${t}`)}}class pi extends al{}class Ys extends al{constructor(){super("Zone is an abstract class")}}const ht="numeric",er="short",Jn="long",Bm={year:ht,month:ht,day:ht},Lk={year:ht,month:er,day:ht},Rj={year:ht,month:er,day:ht,weekday:er},Ok={year:ht,month:Jn,day:ht},kk={year:ht,month:Jn,day:ht,weekday:Jn},$k={hour:ht,minute:ht},Nk={hour:ht,minute:ht,second:ht},Dk={hour:ht,minute:ht,second:ht,timeZoneName:er},Pk={hour:ht,minute:ht,second:ht,timeZoneName:Jn},Fk={hour:ht,minute:ht,hourCycle:"h23"},zk={hour:ht,minute:ht,second:ht,hourCycle:"h23"},Wk={hour:ht,minute:ht,second:ht,hourCycle:"h23",timeZoneName:er},Vk={hour:ht,minute:ht,second:ht,hourCycle:"h23",timeZoneName:Jn},Hk={year:ht,month:ht,day:ht,hour:ht,minute:ht},Gk={year:ht,month:ht,day:ht,hour:ht,minute:ht,second:ht},Bk={year:ht,month:er,day:ht,hour:ht,minute:ht},Uk={year:ht,month:er,day:ht,hour:ht,minute:ht,second:ht},Ij={year:ht,month:er,day:ht,weekday:er,hour:ht,minute:ht},Yk={year:ht,month:Jn,day:ht,hour:ht,minute:ht,timeZoneName:er},jk={year:ht,month:Jn,day:ht,hour:ht,minute:ht,second:ht,timeZoneName:er},Xk={year:ht,month:Jn,day:ht,weekday:Jn,hour:ht,minute:ht,timeZoneName:Jn},qk={year:ht,month:Jn,day:ht,weekday:Jn,hour:ht,minute:ht,second:ht,timeZoneName:Jn};class Vh{get type(){throw new Ys}get name(){throw new Ys}get ianaName(){return this.name}get isUniversal(){throw new Ys}offsetName(t,n){throw new Ys}formatOffset(t,n){throw new Ys}offset(t){throw new Ys}equals(t){throw new Ys}get isValid(){throw new Ys}}let gy=null;class A0 extends Vh{static get instance(){return gy===null&&(gy=new A0),gy}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return Zk(t,n,i)}formatOffset(t,n){return Mf(this.offset(t),n)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Vg={};function Lj(e){return Vg[e]||(Vg[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Vg[e]}const Oj={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function kj(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,r,s,o,a,l,c,u]=i;return[o,r,s,a,l,c,u]}function $j(e,t){const n=e.formatToParts(t),i=[];for(let r=0;r<n.length;r++){const{type:s,value:o}=n[r],a=Oj[s];s==="era"?i[a]=o:Vt(a)||(i[a]=parseInt(o,10))}return i}let Yd={};class Ts extends Vh{static create(t){return Yd[t]||(Yd[t]=new Ts(t)),Yd[t]}static resetCache(){Yd={},Vg={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Ts.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return Zk(t,n,i,this.name)}formatOffset(t,n){return Mf(this.offset(t),n)}offset(t){const n=new Date(t);if(isNaN(n))return NaN;const i=Lj(this.name);let[r,s,o,a,l,c,u]=i.formatToParts?$j(i,n):kj(i,n);a==="BC"&&(r=-Math.abs(r)+1);const h=R0({year:r,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let d=+n;const g=d%1e3;return d-=g>=0?g:1e3+g,(h-d)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let jS={};function Nj(e,t={}){const n=JSON.stringify([e,t]);let i=jS[n];return i||(i=new Intl.ListFormat(e,t),jS[n]=i),i}let Cv={};function Av(e,t={}){const n=JSON.stringify([e,t]);let i=Cv[n];return i||(i=new Intl.DateTimeFormat(e,t),Cv[n]=i),i}let Mv={};function Dj(e,t={}){const n=JSON.stringify([e,t]);let i=Mv[n];return i||(i=new Intl.NumberFormat(e,t),Mv[n]=i),i}let Rv={};function Pj(e,t={}){const{base:n,...i}=t,r=JSON.stringify([e,i]);let s=Rv[r];return s||(s=new Intl.RelativeTimeFormat(e,t),Rv[r]=s),s}let pf=null;function Fj(){return pf||(pf=new Intl.DateTimeFormat().resolvedOptions().locale,pf)}function zj(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(n===-1)return[e];{let i,r;try{i=Av(e).resolvedOptions(),r=e}catch{const l=e.substring(0,n);i=Av(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:o}=i;return[r,s,o]}}function Wj(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}function Vj(e){const t=[];for(let n=1;n<=12;n++){const i=It.utc(2009,n,1);t.push(e(i))}return t}function Hj(e){const t=[];for(let n=1;n<=7;n++){const i=It.utc(2016,11,13+n);t.push(e(i))}return t}function jd(e,t,n,i){const r=e.listingMode();return r==="error"?null:r==="en"?n(t):i(t)}function Gj(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class Bj{constructor(t,n,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:r,floor:s,...o}=i;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=Dj(t,a)}}format(t){if(this.inf){const n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{const n=this.floor?Math.floor(t):Nw(t,3);return ke(n,this.padTo)}}}class Uj{constructor(t,n,i){this.opts=i,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Ts.create(a).valid?(r=a,this.dt=t):(r="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,r=t.zone.name):(r="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=Av(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(n=>{if(n.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:i}}else return n}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Yj{constructor(t,n,i){this.opts={style:"long",...i},!n&&Kk()&&(this.rtf=Pj(t,i))}format(t,n){return this.rtf?this.rtf.format(t,n):cX(n,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,n){return this.rtf?this.rtf.formatToParts(t,n):[]}}class ge{static fromOpts(t){return ge.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,n,i,r=!1){const s=t||Oe.defaultLocale,o=s||(r?"en-US":Fj()),a=n||Oe.defaultNumberingSystem,l=i||Oe.defaultOutputCalendar;return new ge(o,a,l,s)}static resetCache(){pf=null,Cv={},Mv={},Rv={}}static fromObject({locale:t,numberingSystem:n,outputCalendar:i}={}){return ge.create(t,n,i)}constructor(t,n,i,r){const[s,o,a]=zj(t);this.locale=s,this.numberingSystem=n||o||null,this.outputCalendar=i||a||null,this.intl=Wj(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Gj(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:ge.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,n=!1){return jd(this,t,t$,()=>{const i=n?{month:t,day:"numeric"}:{month:t},r=n?"format":"standalone";return this.monthsCache[r][t]||(this.monthsCache[r][t]=Vj(s=>this.extract(s,i,"month"))),this.monthsCache[r][t]})}weekdays(t,n=!1){return jd(this,t,i$,()=>{const i=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},r=n?"format":"standalone";return this.weekdaysCache[r][t]||(this.weekdaysCache[r][t]=Hj(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[r][t]})}meridiems(){return jd(this,void 0,()=>r$,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[It.utc(2016,11,13,9),It.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(t){return jd(this,t,s$,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[It.utc(-40,1,1),It.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[t]})}extract(t,n,i){const r=this.dtFormatter(t,n),s=r.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new Bj(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,n={}){return new Uj(t,this.intl,n)}relFormatter(t={}){return new Yj(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Nj(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let my=null;class wn extends Vh{static get utcInstance(){return my===null&&(my=new wn(0)),my}static instance(t){return t===0?wn.utcInstance:new wn(t)}static parseSpecifier(t){if(t){const n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new wn(I0(n[1],n[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Mf(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Mf(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,n){return Mf(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class jj extends Vh{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function uo(e,t){if(Vt(e)||e===null)return t;if(e instanceof Vh)return e;if(Xj(e)){const n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?A0.instance:n==="utc"||n==="gmt"?wn.utcInstance:wn.parseSpecifier(n)||Ts.create(e)}else return La(e)?wn.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new jj(e)}let XS=()=>Date.now(),qS="system",KS=null,ZS=null,JS=null,QS=60,tC;class Oe{static get now(){return XS}static set now(t){XS=t}static set defaultZone(t){qS=t}static get defaultZone(){return uo(qS,A0.instance)}static get defaultLocale(){return KS}static set defaultLocale(t){KS=t}static get defaultNumberingSystem(){return ZS}static set defaultNumberingSystem(t){ZS=t}static get defaultOutputCalendar(){return JS}static set defaultOutputCalendar(t){JS=t}static get twoDigitCutoffYear(){return QS}static set twoDigitCutoffYear(t){QS=t%100}static get throwOnInvalid(){return tC}static set throwOnInvalid(t){tC=t}static resetCaches(){ge.resetCache(),Ts.resetCache()}}function Vt(e){return typeof e>"u"}function La(e){return typeof e=="number"}function M0(e){return typeof e=="number"&&e%1===0}function Xj(e){return typeof e=="string"}function qj(e){return Object.prototype.toString.call(e)==="[object Date]"}function Kk(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Kj(e){return Array.isArray(e)?e:[e]}function eC(e,t,n){if(e.length!==0)return e.reduce((i,r)=>{const s=[t(r),r];return i&&n(i[0],s[0])===i[0]?i:s},null)[1]}function Zj(e,t){return t.reduce((n,i)=>(n[i]=e[i],n),{})}function Lc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function cs(e,t,n){return M0(e)&&e>=t&&e<=n}function Jj(e,t){return e-t*Math.floor(e/t)}function ke(e,t=2){const n=e<0;let i;return n?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function so(e){if(!(Vt(e)||e===null||e===""))return parseInt(e,10)}function ta(e){if(!(Vt(e)||e===null||e===""))return parseFloat(e)}function $w(e){if(!(Vt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function Nw(e,t,n=!1){const i=10**t;return(n?Math.trunc:Math.round)(e*i)/i}function Hh(e){return e%4===0&&(e%100!==0||e%400===0)}function Af(e){return Hh(e)?366:365}function Um(e,t){const n=Jj(t-1,12)+1,i=e+(t-n)/12;return n===2?Hh(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function R0(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Ym(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,n=e-1,i=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return t===4||i===3?53:52}function Iv(e){return e>99?e:e>Oe.twoDigitCutoffYear?1900+e:2e3+e}function Zk(e,t,n,i=null){const r=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function I0(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0,r=n<0||Object.is(n,-0)?-i:i;return n*60+r}function Jk(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new pi(`Invalid unit value ${e}`);return t}function jm(e,t){const n={};for(const i in e)if(Lc(e,i)){const r=e[i];if(r==null)continue;n[t(i)]=Jk(r)}return n}function Mf(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),r=e>=0?"+":"-";switch(t){case"short":return`${r}${ke(n,2)}:${ke(i,2)}`;case"narrow":return`${r}${n}${i>0?`:${i}`:""}`;case"techie":return`${r}${ke(n,2)}${ke(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function L0(e){return Zj(e,["hour","minute","second","millisecond"])}const Qj=["January","February","March","April","May","June","July","August","September","October","November","December"],Qk=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tX=["J","F","M","A","M","J","J","A","S","O","N","D"];function t$(e){switch(e){case"narrow":return[...tX];case"short":return[...Qk];case"long":return[...Qj];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const e$=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],n$=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],eX=["M","T","W","T","F","S","S"];function i$(e){switch(e){case"narrow":return[...eX];case"short":return[...n$];case"long":return[...e$];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const r$=["AM","PM"],nX=["Before Christ","Anno Domini"],iX=["BC","AD"],rX=["B","A"];function s$(e){switch(e){case"narrow":return[...rX];case"short":return[...iX];case"long":return[...nX];default:return null}}function sX(e){return r$[e.hour<12?0:1]}function oX(e,t){return i$(t)[e.weekday-1]}function aX(e,t){return t$(t)[e.month-1]}function lX(e,t){return s$(t)[e.year<0?0:1]}function cX(e,t,n="always",i=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&s){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${r[e][0]}`;case-1:return f?"yesterday":`last ${r[e][0]}`;case 0:return f?"today":`this ${r[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=r[e],u=i?l?c[1]:c[2]||c[1]:l?r[e][0]:e;return o?`${a} ${u} ago`:`in ${a} ${u}`}function nC(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const uX={D:Bm,DD:Lk,DDD:Ok,DDDD:kk,t:$k,tt:Nk,ttt:Dk,tttt:Pk,T:Fk,TT:zk,TTT:Wk,TTTT:Vk,f:Hk,ff:Bk,fff:Yk,ffff:Xk,F:Gk,FF:Uk,FFF:jk,FFFF:qk};class an{static create(t,n={}){return new an(t,n)}static parseFormat(t){let n=null,i="",r=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),n=null,i="",r=!r):r||a===n?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,n=a)}return i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return uX[t]}constructor(t,n){this.opts=n,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...n}).format()}dtFormatter(t,n={}){return this.loc.dtFormatter(t,{...this.opts,...n})}formatDateTime(t,n){return this.dtFormatter(t,n).format()}formatDateTimeParts(t,n){return this.dtFormatter(t,n).formatToParts()}formatInterval(t,n){return this.dtFormatter(t.start,n).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,n){return this.dtFormatter(t,n).resolvedOptions()}num(t,n=0){if(this.opts.forceSimple)return ke(t,n);const i={...this.opts};return n>0&&(i.padTo=n),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,n){const i=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(d,g)=>this.loc.extract(t,d,g),o=d=>t.isOffsetFixed&&t.offset===0&&d.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,d.format):"",a=()=>i?sX(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(d,g)=>i?aX(t,d):s(g?{month:d}:{month:d,day:"numeric"},"month"),c=(d,g)=>i?oX(t,d):s(g?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),u=d=>{const g=an.macroTokenToFormatOpts(d);return g?this.formatWithSystemDefault(t,g):d},f=d=>i?lX(t,d):s({era:d},"era"),h=d=>{switch(d){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(t.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(t.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(t.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(d)}};return nC(an.parseFormat(n),h)}formatDurationFromString(t,n){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>c=>{const u=i(c);return u?this.num(l.get(u),c.length):c},s=an.parseFormat(n),o=s.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return nC(s,r(a))}}class Yi{constructor(t,n){this.reason=t,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const o$=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function uu(...e){const t=e.reduce((n,i)=>n+i.source,"");return RegExp(`^${t}$`)}function fu(...e){return t=>e.reduce(([n,i,r],s)=>{const[o,a,l]=s(t,r);return[{...n,...o},a||i,l]},[{},null,1]).slice(0,2)}function hu(e,...t){if(e==null)return[null,null];for(const[n,i]of t){const r=n.exec(e);if(r)return i(r)}return[null,null]}function a$(...e){return(t,n)=>{const i={};let r;for(r=0;r<e.length;r++)i[e[r]]=so(t[n+r]);return[i,null,n+r]}}const l$=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,fX=`(?:${l$.source}?(?:\\[(${o$.source})\\])?)?`,Dw=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,c$=RegExp(`${Dw.source}${fX}`),Pw=RegExp(`(?:T${c$.source})?`),hX=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,dX=/(\d{4})-?W(\d\d)(?:-?(\d))?/,gX=/(\d{4})-?(\d{3})/,mX=a$("weekYear","weekNumber","weekDay"),pX=a$("year","ordinal"),_X=/(\d{4})-(\d\d)-(\d\d)/,u$=RegExp(`${Dw.source} ?(?:${l$.source}|(${o$.source}))?`),yX=RegExp(`(?: ${u$.source})?`);function cc(e,t,n){const i=e[t];return Vt(i)?n:so(i)}function vX(e,t){return[{year:cc(e,t),month:cc(e,t+1,1),day:cc(e,t+2,1)},null,t+3]}function du(e,t){return[{hours:cc(e,t,0),minutes:cc(e,t+1,0),seconds:cc(e,t+2,0),milliseconds:$w(e[t+3])},null,t+4]}function Gh(e,t){const n=!e[t]&&!e[t+1],i=I0(e[t+1],e[t+2]),r=n?null:wn.instance(i);return[{},r,t+3]}function Bh(e,t){const n=e[t]?Ts.create(e[t]):null;return[{},n,t+1]}const bX=RegExp(`^T?${Dw.source}$`),wX=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function xX(e){const[t,n,i,r,s,o,a,l,c]=e,u=t[0]==="-",f=l&&l[0]==="-",h=(d,g=!1)=>d!==void 0&&(g||d&&u)?-d:d;return[{years:h(ta(n)),months:h(ta(i)),weeks:h(ta(r)),days:h(ta(s)),hours:h(ta(o)),minutes:h(ta(a)),seconds:h(ta(l),l==="-0"),milliseconds:h($w(c),f)}]}const EX={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Fw(e,t,n,i,r,s,o){const a={year:t.length===2?Iv(so(t)):so(t),month:Qk.indexOf(n)+1,day:so(i),hour:so(r),minute:so(s)};return o&&(a.second=so(o)),e&&(a.weekday=e.length>3?e$.indexOf(e)+1:n$.indexOf(e)+1),a}const TX=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function SX(e){const[,t,n,i,r,s,o,a,l,c,u,f]=e,h=Fw(t,r,i,n,s,o,a);let d;return l?d=EX[l]:c?d=0:d=I0(u,f),[h,new wn(d)]}function CX(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const AX=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,MX=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,RX=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function iC(e){const[,t,n,i,r,s,o,a]=e;return[Fw(t,r,i,n,s,o,a),wn.utcInstance]}function IX(e){const[,t,n,i,r,s,o,a]=e;return[Fw(t,a,n,i,r,s,o),wn.utcInstance]}const LX=uu(hX,Pw),OX=uu(dX,Pw),kX=uu(gX,Pw),$X=uu(c$),f$=fu(vX,du,Gh,Bh),NX=fu(mX,du,Gh,Bh),DX=fu(pX,du,Gh,Bh),PX=fu(du,Gh,Bh);function FX(e){return hu(e,[LX,f$],[OX,NX],[kX,DX],[$X,PX])}function zX(e){return hu(CX(e),[TX,SX])}function WX(e){return hu(e,[AX,iC],[MX,iC],[RX,IX])}function VX(e){return hu(e,[wX,xX])}const HX=fu(du);function GX(e){return hu(e,[bX,HX])}const BX=uu(_X,yX),UX=uu(u$),YX=fu(du,Gh,Bh);function jX(e){return hu(e,[BX,f$],[UX,YX])}const rC="Invalid Duration",h$={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},XX={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...h$},mi=146097/400,Sl=146097/4800,qX={years:{quarters:4,months:12,weeks:mi/7,days:mi,hours:mi*24,minutes:mi*24*60,seconds:mi*24*60*60,milliseconds:mi*24*60*60*1e3},quarters:{months:3,weeks:mi/28,days:mi/4,hours:mi*24/4,minutes:mi*24*60/4,seconds:mi*24*60*60/4,milliseconds:mi*24*60*60*1e3/4},months:{weeks:Sl/7,days:Sl,hours:Sl*24,minutes:Sl*24*60,seconds:Sl*24*60*60,milliseconds:Sl*24*60*60*1e3},...h$},ma=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],KX=ma.slice(0).reverse();function js(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Bt(i)}function d$(e,t){let n=t.milliseconds??0;for(const i of KX.slice(1))t[i]&&(n+=t[i]*e[i].milliseconds);return n}function sC(e,t){const n=d$(e,t)<0?-1:1;ma.reduceRight((i,r)=>{if(Vt(t[r]))return i;if(i){const s=t[i]*n,o=e[r][i],a=Math.floor(s/o);t[r]+=a*n,t[i]-=a*o*n}return r},null),ma.reduce((i,r)=>{if(Vt(t[r]))return i;if(i){const s=t[i]%1;t[i]-=s,t[r]+=s*e[i][r]}return r},null)}function ZX(e){const t={};for(const[n,i]of Object.entries(e))i!==0&&(t[n]=i);return t}class Bt{constructor(t){const n=t.conversionAccuracy==="longterm"||!1;let i=n?qX:XX;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||ge.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,n){return Bt.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(t==null||typeof t!="object")throw new pi(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Bt({values:jm(t,Bt.normalizeUnit),loc:ge.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(La(t))return Bt.fromMillis(t);if(Bt.isDuration(t))return t;if(typeof t=="object")return Bt.fromObject(t);throw new pi(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){const[i]=VX(t);return i?Bt.fromObject(i,n):Bt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){const[i]=GX(t);return i?Bt.fromObject(i,n):Bt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new pi("need to specify a reason the Duration is invalid");const i=t instanceof Yi?t:new Yi(t,n);if(Oe.throwOnInvalid)throw new Mj(i);return new Bt({invalid:i})}static normalizeUnit(t){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!n)throw new Ik(t);return n}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,n={}){const i={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?an.create(this.loc,i).formatDurationFromString(this,t):rC}toHuman(t={}){if(!this.isValid)return rC;const n=ma.map(i=>{const r=this.values[i];return Vt(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(r)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=Nw(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},It.fromMillis(n,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?d$(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const n=Bt.fromDurationLike(t),i={};for(const r of ma)(Lc(n.values,r)||Lc(this.values,r))&&(i[r]=n.get(r)+this.get(r));return js(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const n=Bt.fromDurationLike(t);return this.plus(n.negate())}mapUnits(t){if(!this.isValid)return this;const n={};for(const i of Object.keys(this.values))n[i]=Jk(t(this.values[i],i));return js(this,{values:n},!0)}get(t){return this[Bt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const n={...this.values,...jm(t,Bt.normalizeUnit)};return js(this,{values:n})}reconfigure({locale:t,numberingSystem:n,conversionAccuracy:i,matrix:r}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:n}),matrix:r,conversionAccuracy:i};return js(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return sC(this.matrix,t),js(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=ZX(this.normalize().shiftToAll().toObject());return js(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Bt.normalizeUnit(o));const n={},i={},r=this.toObject();let s;for(const o of ma)if(t.indexOf(o)>=0){s=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;La(r[o])&&(a+=r[o]);const l=Math.trunc(a);n[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else La(r[o])&&(i[o]=r[o]);for(const o in i)i[o]!==0&&(n[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return sC(this.matrix,n),js(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=this.values[n]===0?0:-this.values[n];return js(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function n(i,r){return i===void 0||i===0?r===void 0||r===0:i===r}for(const i of ma)if(!n(this.values[i],t.values[i]))return!1;return!0}}const Cl="Invalid Interval";function JX(e,t){return!e||!e.isValid?Se.invalid("missing or invalid start"):!t||!t.isValid?Se.invalid("missing or invalid end"):t<e?Se.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Se{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new pi("need to specify a reason the Interval is invalid");const i=t instanceof Yi?t:new Yi(t,n);if(Oe.throwOnInvalid)throw new Aj(i);return new Se({invalid:i})}static fromDateTimes(t,n){const i=Gu(t),r=Gu(n),s=JX(i,r);return s??new Se({start:i,end:r})}static after(t,n){const i=Bt.fromDurationLike(n),r=Gu(t);return Se.fromDateTimes(r,r.plus(i))}static before(t,n){const i=Bt.fromDurationLike(n),r=Gu(t);return Se.fromDateTimes(r.minus(i),r)}static fromISO(t,n){const[i,r]=(t||"").split("/",2);if(i&&r){let s,o;try{s=It.fromISO(i,n),o=s.isValid}catch{o=!1}let a,l;try{a=It.fromISO(r,n),l=a.isValid}catch{l=!1}if(o&&l)return Se.fromDateTimes(s,a);if(o){const c=Bt.fromISO(r,n);if(c.isValid)return Se.after(s,c)}else if(l){const c=Bt.fromISO(i,n);if(c.isValid)return Se.before(a,c)}}return Se.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const n=this.start.startOf(t),i=this.end.startOf(t);return Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:n}={}){return this.isValid?Se.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];const n=t.map(Gu).filter(o=>this.contains(o)).sort(),i=[];let{s:r}=this,s=0;for(;r<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;i.push(Se.fromDateTimes(r,a)),r=a,s+=1}return i}splitBy(t){const n=Bt.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:i}=this,r=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(n.mapUnits(l=>l*r));s=+a>+this.e?this.e:a,o.push(Se.fromDateTimes(i,s)),i=s,r+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const n=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return n>=i?null:Se.fromDateTimes(n,i)}union(t){if(!this.isValid)return this;const n=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return Se.fromDateTimes(n,i)}static merge(t){const[n,i]=t.sort((r,s)=>r.s-s.s).reduce(([r,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[r,s.union(o)]:[r.concat([s]),o]:[r,o],[[],null]);return i&&n.push(i),n}static xor(t){let n=null,i=0;const r=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?n=l.time:(n&&+n!=+l.time&&r.push(Se.fromDateTimes(n,l.time)),n=null);return Se.merge(r)}difference(...t){return Se.xor([this].concat(t)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Cl}toLocaleString(t=Bm,n={}){return this.isValid?an.create(this.s.loc.clone(n),t).formatInterval(this):Cl}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Cl}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Cl}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Cl}toFormat(t,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${n}${this.e.toFormat(t)}`:Cl}toDuration(t,n){return this.isValid?this.e.diff(this.s,t,n):Bt.invalid(this.invalidReason)}mapEndpoints(t){return Se.fromDateTimes(t(this.s),t(this.e))}}class Xd{static hasDST(t=Oe.defaultZone){const n=It.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(t){return Ts.isValidZone(t)}static normalizeZone(t){return uo(t,Oe.defaultZone)}static months(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||ge.create(n,i,s)).months(t)}static monthsFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||ge.create(n,i,s)).months(t,!0)}static weekdays(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||ge.create(n,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||ge.create(n,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return ge.create(t).meridiems()}static eras(t="short",{locale:n=null}={}){return ge.create(n,null,"gregory").eras(t)}static features(){return{relative:Kk()}}}function oC(e,t){const n=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor(Bt.fromMillis(i).as("days"))}function QX(e,t,n){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=oC(l,c);return(u-u%7)/7}],["days",oC]],r={},s=e;let o,a;for(const[l,c]of i)n.indexOf(l)>=0&&(o=l,r[l]=c(e,t),a=s.plus(r),a>t?(r[l]--,e=s.plus(r),e>t&&(a=e,r[l]--,e=s.plus(r))):e=a);return[e,r,a,o]}function tq(e,t,n,i){let[r,s,o,a]=QX(e,t,n);const l=t-r,c=n.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<t&&(o=r.plus({[a]:1})),o!==r&&(s[a]=(s[a]||0)+l/(o-r)));const u=Bt.fromObject(s,i);return c.length>0?Bt.fromMillis(l,i).shiftTo(...c).plus(u):u}const zw={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},aC={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},eq=zw.hanidec.replace(/[\[|\]]/g,"").split("");function nq(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(e[n].search(zw.hanidec)!==-1)t+=eq.indexOf(e[n]);else for(const r in aC){const[s,o]=aC[r];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}function ki({numberingSystem:e},t=""){return new RegExp(`${zw[e||"latn"]}${t}`)}const iq="missing Intl.DateTimeFormat.formatToParts support";function Kt(e,t=n=>n){return{regex:e,deser:([n])=>t(nq(n))}}const rq=String.fromCharCode(160),g$=`[ ${rq}]`,m$=new RegExp(g$,"g");function sq(e){return e.replace(/\./g,"\\.?").replace(m$,g$)}function lC(e){return e.replace(/\./g,"").replace(m$," ").toLowerCase()}function $i(e,t){return e===null?null:{regex:RegExp(e.map(sq).join("|")),deser:([n])=>e.findIndex(i=>lC(n)===lC(i))+t}}function cC(e,t){return{regex:e,deser:([,n,i])=>I0(n,i),groups:t}}function qd(e){return{regex:e,deser:([t])=>t}}function oq(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function aq(e,t){const n=ki(t),i=ki(t,"{2}"),r=ki(t,"{3}"),s=ki(t,"{4}"),o=ki(t,"{6}"),a=ki(t,"{1,2}"),l=ki(t,"{1,3}"),c=ki(t,"{1,6}"),u=ki(t,"{1,9}"),f=ki(t,"{2,4}"),h=ki(t,"{4,6}"),d=p=>({regex:RegExp(oq(p.val)),deser:([_])=>_,literal:!0}),m=(p=>{if(e.literal)return d(p);switch(p.val){case"G":return $i(t.eras("short"),0);case"GG":return $i(t.eras("long"),0);case"y":return Kt(c);case"yy":return Kt(f,Iv);case"yyyy":return Kt(s);case"yyyyy":return Kt(h);case"yyyyyy":return Kt(o);case"M":return Kt(a);case"MM":return Kt(i);case"MMM":return $i(t.months("short",!0),1);case"MMMM":return $i(t.months("long",!0),1);case"L":return Kt(a);case"LL":return Kt(i);case"LLL":return $i(t.months("short",!1),1);case"LLLL":return $i(t.months("long",!1),1);case"d":return Kt(a);case"dd":return Kt(i);case"o":return Kt(l);case"ooo":return Kt(r);case"HH":return Kt(i);case"H":return Kt(a);case"hh":return Kt(i);case"h":return Kt(a);case"mm":return Kt(i);case"m":return Kt(a);case"q":return Kt(a);case"qq":return Kt(i);case"s":return Kt(a);case"ss":return Kt(i);case"S":return Kt(l);case"SSS":return Kt(r);case"u":return qd(u);case"uu":return qd(a);case"uuu":return Kt(n);case"a":return $i(t.meridiems(),0);case"kkkk":return Kt(s);case"kk":return Kt(f,Iv);case"W":return Kt(a);case"WW":return Kt(i);case"E":case"c":return Kt(n);case"EEE":return $i(t.weekdays("short",!1),1);case"EEEE":return $i(t.weekdays("long",!1),1);case"ccc":return $i(t.weekdays("short",!0),1);case"cccc":return $i(t.weekdays("long",!0),1);case"Z":case"ZZ":return cC(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return cC(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return qd(/[a-z_+-/]{1,256}?/i);case" ":return qd(/[^\S\n\r]/);default:return d(p)}})(e)||{invalidReason:iq};return m.token=e,m}const lq={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function cq(e,t,n){const{type:i,value:r}=e;if(i==="literal"){const l=/^\s+$/.test(r);return{literal:!l,val:l?" ":r}}const s=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=lq[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function uq(e){return[`^${e.map(n=>n.regex).reduce((n,i)=>`${n}(${i.source})`,"")}$`,e]}function fq(e,t,n){const i=e.match(t);if(i){const r={};let s=1;for(const o in n)if(Lc(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(r[a.token.val[0]]=a.deser(i.slice(s,s+l))),s+=l}return[i,r]}else return[i,{}]}function hq(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,i;return Vt(e.z)||(n=Ts.create(e.z)),Vt(e.Z)||(n||(n=new wn(e.Z)),i=e.Z),Vt(e.q)||(e.M=(e.q-1)*3+1),Vt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Vt(e.u)||(e.S=$w(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),n,i]}let py=null;function dq(){return py||(py=It.fromMillis(1555555555555)),py}function gq(e,t){if(e.literal)return e;const n=an.macroTokenToFormatOpts(e.val),i=y$(n,t);return i==null||i.includes(void 0)?e:i}function p$(e,t){return Array.prototype.concat(...e.map(n=>gq(n,t)))}function _$(e,t,n){const i=p$(an.parseFormat(n),e),r=i.map(o=>aq(o,e)),s=r.find(o=>o.invalidReason);if(s)return{input:t,tokens:i,invalidReason:s.invalidReason};{const[o,a]=uq(r),l=RegExp(o,"i"),[c,u]=fq(t,l,a),[f,h,d]=u?hq(u):[null,null,void 0];if(Lc(u,"a")&&Lc(u,"H"))throw new mf("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:c,matches:u,result:f,zone:h,specificOffset:d}}}function mq(e,t,n){const{result:i,zone:r,specificOffset:s,invalidReason:o}=_$(e,t,n);return[i,r,s,o]}function y$(e,t){if(!e)return null;const i=an.create(t,e).dtFormatter(dq()),r=i.formatToParts(),s=i.resolvedOptions();return r.map(o=>cq(o,e,s))}const v$=[0,31,59,90,120,151,181,212,243,273,304,334],b$=[0,31,60,91,121,152,182,213,244,274,305,335];function bi(e,t){return new Yi("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function w$(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const r=i.getUTCDay();return r===0?7:r}function x$(e,t,n){return n+(Hh(e)?b$:v$)[t-1]}function E$(e,t){const n=Hh(e)?b$:v$,i=n.findIndex(s=>s<t),r=t-n[i];return{month:i+1,day:r}}function Lv(e){const{year:t,month:n,day:i}=e,r=x$(t,n,i),s=w$(t,n,i);let o=Math.floor((r-s+10)/7),a;return o<1?(a=t-1,o=Ym(a)):o>Ym(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:s,...L0(e)}}function uC(e){const{weekYear:t,weekNumber:n,weekday:i}=e,r=w$(t,1,4),s=Af(t);let o=n*7+i-r-3,a;o<1?(a=t-1,o+=Af(a)):o>s?(a=t+1,o-=Af(t)):a=t;const{month:l,day:c}=E$(a,o);return{year:a,month:l,day:c,...L0(e)}}function _y(e){const{year:t,month:n,day:i}=e,r=x$(t,n,i);return{year:t,ordinal:r,...L0(e)}}function fC(e){const{year:t,ordinal:n}=e,{month:i,day:r}=E$(t,n);return{year:t,month:i,day:r,...L0(e)}}function pq(e){const t=M0(e.weekYear),n=cs(e.weekNumber,1,Ym(e.weekYear)),i=cs(e.weekday,1,7);return t?n?i?!1:bi("weekday",e.weekday):bi("week",e.week):bi("weekYear",e.weekYear)}function _q(e){const t=M0(e.year),n=cs(e.ordinal,1,Af(e.year));return t?n?!1:bi("ordinal",e.ordinal):bi("year",e.year)}function T$(e){const t=M0(e.year),n=cs(e.month,1,12),i=cs(e.day,1,Um(e.year,e.month));return t?n?i?!1:bi("day",e.day):bi("month",e.month):bi("year",e.year)}function S$(e){const{hour:t,minute:n,second:i,millisecond:r}=e,s=cs(t,0,23)||t===24&&n===0&&i===0&&r===0,o=cs(n,0,59),a=cs(i,0,59),l=cs(r,0,999);return s?o?a?l?!1:bi("millisecond",r):bi("second",i):bi("minute",n):bi("hour",t)}const yy="Invalid DateTime",hC=864e13;function Kd(e){return new Yi("unsupported zone",`the zone "${e.name}" is not supported`)}function vy(e){return e.weekData===null&&(e.weekData=Lv(e.c)),e.weekData}function ea(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new It({...n,...t,old:n})}function C$(e,t,n){let i=e-t*60*1e3;const r=n.offset(i);if(t===r)return[i,t];i-=(r-t)*60*1e3;const s=n.offset(i);return r===s?[i,r]:[e-Math.min(r,s)*60*1e3,Math.max(r,s)]}function Zd(e,t){e+=t*60*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Hg(e,t,n){return C$(R0(e),t,n)}function dC(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),r=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:r,day:Math.min(e.c.day,Um(i,r))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Bt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=R0(s);let[l,c]=C$(a,n,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function Hu(e,t,n,i,r,s){const{setZone:o,zone:a}=n;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=It.fromObject(e,{...n,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return It.invalid(new Yi("unparsable",`the input "${r}" can't be parsed as ${i}`))}function Jd(e,t,n=!0){return e.isValid?an.create(ge.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function by(e,t){const n=e.c.year>9999||e.c.year<0;let i="";return n&&e.c.year>=0&&(i+="+"),i+=ke(e.c.year,n?6:4),t?(i+="-",i+=ke(e.c.month),i+="-",i+=ke(e.c.day)):(i+=ke(e.c.month),i+=ke(e.c.day)),i}function gC(e,t,n,i,r,s){let o=ke(e.c.hour);return t?(o+=":",o+=ke(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=":")):o+=ke(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=ke(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=ke(e.c.millisecond,3))),r&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=ke(Math.trunc(-e.o/60)),o+=":",o+=ke(Math.trunc(-e.o%60))):(o+="+",o+=ke(Math.trunc(e.o/60)),o+=":",o+=ke(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const A$={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yq={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},vq={ordinal:1,hour:0,minute:0,second:0,millisecond:0},M$=["year","month","day","hour","minute","second","millisecond"],bq=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],wq=["year","ordinal","hour","minute","second","millisecond"];function mC(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new Ik(e);return t}function pC(e,t){const n=uo(t.zone,Oe.defaultZone),i=ge.fromObject(t),r=Oe.now();let s,o;if(Vt(e.year))s=r;else{for(const c of M$)Vt(e[c])&&(e[c]=A$[c]);const a=T$(e)||S$(e);if(a)return It.invalid(a);const l=n.offset(r);[s,o]=Hg(e,l,n)}return new It({ts:s,zone:n,loc:i,o})}function _C(e,t,n){const i=Vt(n.round)?!0:n.round,r=(o,a)=>(o=Nw(o,i||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(o,a)),s=o=>n.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(n.unit)return r(s(n.unit),n.unit);for(const o of n.units){const a=s(o);if(Math.abs(a)>=1)return r(a,o)}return r(e>t?-0:0,n.units[n.units.length-1])}function yC(e){let t={},n;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}class It{constructor(t){const n=t.zone||Oe.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new Yi("invalid input"):null)||(n.isValid?null:Kd(n));this.ts=Vt(t.ts)?Oe.now():t.ts;let r=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(n))[r,s]=[t.old.c,t.old.o];else{const a=n.offset(this.ts);r=Zd(this.ts,a),i=Number.isNaN(r.year)?new Yi("invalid input"):null,r=i?null:r,s=i?null:a}this._zone=n,this.loc=t.loc||ge.create(),this.invalid=i,this.weekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new It({})}static local(){const[t,n]=yC(arguments),[i,r,s,o,a,l,c]=n;return pC({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,n]=yC(arguments),[i,r,s,o,a,l,c]=n;return t.zone=wn.utcInstance,pC({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,n={}){const i=qj(t)?t.valueOf():NaN;if(Number.isNaN(i))return It.invalid("invalid input");const r=uo(n.zone,Oe.defaultZone);return r.isValid?new It({ts:i,zone:r,loc:ge.fromObject(n)}):It.invalid(Kd(r))}static fromMillis(t,n={}){if(La(t))return t<-hC||t>hC?It.invalid("Timestamp out of range"):new It({ts:t,zone:uo(n.zone,Oe.defaultZone),loc:ge.fromObject(n)});throw new pi(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(La(t))return new It({ts:t*1e3,zone:uo(n.zone,Oe.defaultZone),loc:ge.fromObject(n)});throw new pi("fromSeconds requires a numerical input")}static fromObject(t,n={}){t=t||{};const i=uo(n.zone,Oe.defaultZone);if(!i.isValid)return It.invalid(Kd(i));const r=Oe.now(),s=Vt(n.specificOffset)?i.offset(r):n.specificOffset,o=jm(t,mC),a=!Vt(o.ordinal),l=!Vt(o.year),c=!Vt(o.month)||!Vt(o.day),u=l||c,f=o.weekYear||o.weekNumber,h=ge.fromObject(n);if((u||a)&&f)throw new mf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new mf("Can't mix ordinal dates with month/day");const d=f||o.weekday&&!u;let g,m,p=Zd(r,s);d?(g=bq,m=yq,p=Lv(p)):a?(g=wq,m=vq,p=_y(p)):(g=M$,m=A$);let _=!1;for(const T of g){const I=o[T];Vt(I)?_?o[T]=m[T]:o[T]=p[T]:_=!0}const y=d?pq(o):a?_q(o):T$(o),b=y||S$(o);if(b)return It.invalid(b);const v=d?uC(o):a?fC(o):o,[x,w]=Hg(v,s,i),E=new It({ts:x,zone:i,o:w,loc:h});return o.weekday&&u&&t.weekday!==E.weekday?It.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${E.toISO()}`):E}static fromISO(t,n={}){const[i,r]=FX(t);return Hu(i,r,n,"ISO 8601",t)}static fromRFC2822(t,n={}){const[i,r]=zX(t);return Hu(i,r,n,"RFC 2822",t)}static fromHTTP(t,n={}){const[i,r]=WX(t);return Hu(i,r,n,"HTTP",n)}static fromFormat(t,n,i={}){if(Vt(t)||Vt(n))throw new pi("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=i,o=ge.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=mq(o,t,n);return u?It.invalid(u):Hu(a,l,i,`format ${n}`,t,c)}static fromString(t,n,i={}){return It.fromFormat(t,n,i)}static fromSQL(t,n={}){const[i,r]=jX(t);return Hu(i,r,n,"SQL",t)}static invalid(t,n=null){if(!t)throw new pi("need to specify a reason the DateTime is invalid");const i=t instanceof Yi?t:new Yi(t,n);if(Oe.throwOnInvalid)throw new Cj(i);return new It({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,n={}){const i=y$(t,ge.fromObject(n));return i?i.map(r=>r?r.val:null).join(""):null}static expandFormat(t,n={}){return p$(an.parseFormat(t),ge.fromObject(n)).map(r=>r.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?vy(this).weekYear:NaN}get weekNumber(){return this.isValid?vy(this).weekNumber:NaN}get weekday(){return this.isValid?vy(this).weekday:NaN}get ordinal(){return this.isValid?_y(this.c).ordinal:NaN}get monthShort(){return this.isValid?Xd.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Xd.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Xd.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Xd.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,n=6e4,i=R0(this.c),r=this.zone.offset(i-t),s=this.zone.offset(i+t),o=this.zone.offset(i-r*n),a=this.zone.offset(i-s*n);if(o===a)return[this];const l=i-o*n,c=i-a*n,u=Zd(l,o),f=Zd(c,a);return u.hour===f.hour&&u.minute===f.minute&&u.second===f.second&&u.millisecond===f.millisecond?[ea(this,{ts:l}),ea(this,{ts:c})]:[this]}get isInLeapYear(){return Hh(this.year)}get daysInMonth(){return Um(this.year,this.month)}get daysInYear(){return this.isValid?Af(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ym(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:n,numberingSystem:i,calendar:r}=an.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:n,numberingSystem:i,outputCalendar:r}}toUTC(t=0,n={}){return this.setZone(wn.instance(t),n)}toLocal(){return this.setZone(Oe.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:i=!1}={}){if(t=uo(t,Oe.defaultZone),t.equals(this.zone))return this;if(t.isValid){let r=this.ts;if(n||i){const s=t.offset(this.ts),o=this.toObject();[r]=Hg(o,s,t)}return ea(this,{ts:r,zone:t})}else return It.invalid(Kd(t))}reconfigure({locale:t,numberingSystem:n,outputCalendar:i}={}){const r=this.loc.clone({locale:t,numberingSystem:n,outputCalendar:i});return ea(this,{loc:r})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const n=jm(t,mC),i=!Vt(n.weekYear)||!Vt(n.weekNumber)||!Vt(n.weekday),r=!Vt(n.ordinal),s=!Vt(n.year),o=!Vt(n.month)||!Vt(n.day),a=s||o,l=n.weekYear||n.weekNumber;if((a||r)&&l)throw new mf("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&r)throw new mf("Can't mix ordinal dates with month/day");let c;i?c=uC({...Lv(this.c),...n}):Vt(n.ordinal)?(c={...this.toObject(),...n},Vt(n.day)&&(c.day=Math.min(Um(c.year,c.month),c.day))):c=fC({..._y(this.c),...n});const[u,f]=Hg(c,this.o,this.zone);return ea(this,{ts:u,o:f})}plus(t){if(!this.isValid)return this;const n=Bt.fromDurationLike(t);return ea(this,dC(this,n))}minus(t){if(!this.isValid)return this;const n=Bt.fromDurationLike(t).negate();return ea(this,dC(this,n))}startOf(t){if(!this.isValid)return this;const n={},i=Bt.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks"&&(n.weekday=1),i==="quarters"){const r=Math.ceil(this.month/3);n.month=(r-1)*3+1}return this.set(n)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,n={}){return this.isValid?an.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):yy}toLocaleString(t=Bm,n={}){return this.isValid?an.create(this.loc.clone(n),t).formatDateTime(this):yy}toLocaleParts(t={}){return this.isValid?an.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:n=!1,suppressMilliseconds:i=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=by(this,o);return a+="T",a+=gC(this,o,n,i,r,s),a}toISODate({format:t="extended"}={}){return this.isValid?by(this,t==="extended"):null}toISOWeekDate(){return Jd(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:n=!1,includeOffset:i=!0,includePrefix:r=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+gC(this,o==="extended",n,t,i,s):null}toRFC2822(){return Jd(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Jd(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?by(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:n=!1,includeOffsetSpace:i=!0}={}){let r="HH:mm:ss.SSS";return(n||t)&&(i&&(r+=" "),n?r+="z":t&&(r+="ZZ")),Jd(this,r,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():yy}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const n={...this.c};return t.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,n="milliseconds",i={}){if(!this.isValid||!t.isValid)return Bt.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=Kj(n).map(Bt.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=tq(a,l,s,r);return o?c.negate():c}diffNow(t="milliseconds",n={}){return this.diff(It.now(),t,n)}until(t){return this.isValid?Se.fromDateTimes(this,t):this}hasSame(t,n){if(!this.isValid)return!1;const i=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(n)<=i&&i<=r.endOf(n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const n=t.base||It.fromObject({},{zone:this.zone}),i=t.padding?this<n?-t.padding:t.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(r=t.unit,s=void 0),_C(n,this.plus(i),{...t,numeric:"always",units:r,unit:s})}toRelativeCalendar(t={}){return this.isValid?_C(t.base||It.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(It.isDateTime))throw new pi("min requires all arguments be DateTimes");return eC(t,n=>n.valueOf(),Math.min)}static max(...t){if(!t.every(It.isDateTime))throw new pi("max requires all arguments be DateTimes");return eC(t,n=>n.valueOf(),Math.max)}static fromFormatExplain(t,n,i={}){const{locale:r=null,numberingSystem:s=null}=i,o=ge.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return _$(o,t,n)}static fromStringExplain(t,n,i={}){return It.fromFormatExplain(t,n,i)}static get DATE_SHORT(){return Bm}static get DATE_MED(){return Lk}static get DATE_MED_WITH_WEEKDAY(){return Rj}static get DATE_FULL(){return Ok}static get DATE_HUGE(){return kk}static get TIME_SIMPLE(){return $k}static get TIME_WITH_SECONDS(){return Nk}static get TIME_WITH_SHORT_OFFSET(){return Dk}static get TIME_WITH_LONG_OFFSET(){return Pk}static get TIME_24_SIMPLE(){return Fk}static get TIME_24_WITH_SECONDS(){return zk}static get TIME_24_WITH_SHORT_OFFSET(){return Wk}static get TIME_24_WITH_LONG_OFFSET(){return Vk}static get DATETIME_SHORT(){return Hk}static get DATETIME_SHORT_WITH_SECONDS(){return Gk}static get DATETIME_MED(){return Bk}static get DATETIME_MED_WITH_SECONDS(){return Uk}static get DATETIME_MED_WITH_WEEKDAY(){return Ij}static get DATETIME_FULL(){return Yk}static get DATETIME_FULL_WITH_SECONDS(){return jk}static get DATETIME_HUGE(){return Xk}static get DATETIME_HUGE_WITH_SECONDS(){return qk}}function Gu(e){if(It.isDateTime(e))return e;if(e&&e.valueOf&&La(e.valueOf()))return It.fromJSDate(e);if(e&&typeof e=="object")return It.fromObject(e);throw new pi(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function R$(e,t=0){let n=It.fromISO(e),i="";return t>0?i="+"+(t==null?void 0:t.toString()):t<0&&(i=t==null?void 0:t.toString()),t&&(n=n.setZone(`UTC${i}`)),n}function Ww(e,t=0){return R$(e,t).toLocaleString({weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})}function I$(e){if(!e)return"UTC";let t="GMT";return e>0&&(t+="+"),t+e.toString()}function O0(e){const t=Math.floor(e/86400);e-=t*(60*60*24);const n=Math.floor(e/(60*60));e-=n*(60*60);const i=Math.floor(e/60);return e-=i*60,e=Math.round(e),t>0?`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`:`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`}function vC(e,t="seconds",n){const i=["years","months","days","hours","minutes","seconds","milliseconds"],r=i.indexOf(t),s=Object.entries(e.shiftTo(...i).normalize().toObject()).filter(([,a],l)=>a>0&&l<=r);return Bt.fromObject(s.length===0?{[t]:0}:Object.fromEntries(s)).toHuman(n)}function xq(e){if(e<=0)return"0s";const t=Math.floor(e/(1e3*60*60*24)),n=Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),i=Math.floor(e%(1e3*60*60)/(1e3*60)),r=Math.floor(e%(1e3*60)/1e3);let s="";return t>0&&(s+=t+"d "),n>0&&(s+=n+"h "),i>0&&(s+=i+"m "),r>0&&(s+=r+"s"),s}const Eq={props:{name:{type:String,required:!0},hasAltitude:Boolean,graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},summary:zr,receivedRecord:Zt},data(){return{begin:new Date,elapsed:0,hoveredRecord:new Zt,recordView:new Zt,elemWidth:0,xScale:_r(),color:WO().domain([-45,45]).interpolator(hL(["darkgreen","darkgreen","darkgreen","darkgreen","darkgreen","limegreen","limegreen","lemonchiffon","lemonchiffon","red","red","darkred","darkred","darkred","darkred","darkred"]))}},watch:{graphRecords:{async handler(){this.$nextTick(()=>{requestAnimationFrame(()=>this.renderGraph())})}},receivedRecord:{handler(e){this.recordView=e;const t=Ei(this.$refs[`${this.name}`]).select("g#pointer");if(JSON.stringify(e)==JSON.stringify(new Zt)){t.style("opacity",0);return}t.style("opacity",1),t.attr("transform",`translate(${this.xScale(e.distance/1e3)}, 0)`)}},hoveredRecord:{handler(e){this.recordView=e,this.$emit("hoveredRecord",e)}}},methods:{formatDuration:xq,renderGraph(){var x,w,E,T,I,S;const e=this.graphRecords;if(e.length==0)return;this.hoveredRecord=new Zt,this.begin=qe(e.map(A=>new Date(A.timestamp)));const t=25,n=5,i=20,r=45,s=this.elemWidth,o=this.$el,a=this.$refs[`title-${this.name}`],c=o.clientHeight-a.clientHeight-i,u=s>720?10:5,f=3,h=Ei(this.$refs[`${this.name}`]);h.select("svg").on("pointerdown",null).on("pointermove",null).on("mouseleave",null).remove();const d=h.append("svg").attr("width",s).attr("height",c).style("touch-action","none").style("user-select","none").style("--webkit-user-select","none").style("--ms-user-select","none"),g=_r().domain(be(e,A=>A.distance/1e3)).range([r,s-n]);this.xScale=g;const m=_r().domain(be(e,A=>A.altitude)).rangeRound([c-i,t]).nice();d.append("g").style("font-size","0.8em").attr("transform",`translate(0,${c-i})`).call(sw(g).ticks(u)),d.append("g").style("font-size","0.8em").attr("transform",`translate(${r},0)`).call(VI(m).ticks(f).tickFormat(Fo("~s"))),d.append("text").attr("class","x-axis-label").attr("x",s-n-70).attr("y",t-15).style("fill","currentColor").style("font-size","0.9em").text("Dist. (km) →"),d.append("foreignObject").attr("x",0).attr("y",-5).attr("width",s).attr("height",100).attr("class","text-start").style("font-size","0.9em").style("width","100%").html(`
            <span>↑ Alt. (m)&nbsp;</span>
            <span class="fw-bold">
                <i class="fa-solid fa-solid fa-mountain"></i>
                ${(w=(x=this.summary)==null?void 0:x.maxAltitude)==null?void 0:w.toFixed(0)} m&nbsp;
            </span>
            <span class="fw-bold">
                <i class="fa-solid fa-arrow-trend-up"></i>
                ${(T=(E=this.summary)==null?void 0:E.totalAscent)==null?void 0:T.toFixed(0)} m&nbsp;
            </span>
            <span class="fw-bold">
                <i class="fa-solid fa-arrow-trend-down"></i>
                ${(S=(I=this.summary)==null?void 0:I.totalDescent)==null?void 0:S.toFixed(0)} m&nbsp;
            </span>
            `),d.append("g").attr("stroke","currentColor").attr("stroke-opacity",.1).style("stroke","lightgray").style("stroke-dasharray","2,2").call(A=>A.append("g").selectAll("line").data(g.ticks(u)).join("line").attr("x1",R=>.5+g(R)).attr("x2",R=>.5+g(R)).attr("y1",t).attr("y2",c-i)).call(A=>A.append("g").selectAll("line").data(m.ticks(f)).join("line").attr("y1",R=>.5+m(R)).attr("y2",R=>.5+m(R)).attr("x1",r).attr("x2",s-n));const p=Ic().curve(nh).x(A=>g(A.distance/1e3)).y0(m(qe(m.domain()))).y1(A=>m(A.altitude??0));d.append("g").append("path").datum(e).transition().attr("fill","#222222").style("opacity",.9).attr("d",p);const _=`linearGradient-${this.name}`;d.append("linearGradient").attr("id",_).attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("x2",s).selectAll("stop").data(e).join("stop").attr("offset",A=>g(A.distance/1e3)/s).attr("stop-color",A=>this.color(A.grade??0));const y=Rw().curve(nh).x(A=>g(A.distance/1e3)).y(A=>m(A.altitude??0));d.append("g").append("path").datum(e).transition().attr("fill","none").attr("stroke",`url(#${_})`).attr("stroke-width",3).attr("d",y);const b=d.append("g").attr("id","pointer").style("opacity",0).call(A=>{A.append("line").attr("x1",0).attr("y1",t).attr("x2",0).attr("y2",c-i).attr("stroke","#78e08f").attr("stroke-width",1.5)}).call(A=>{A.append("polygon").attr("points","0,30 -5,20 5,20").attr("fill","#78e08f")}),v=A=>{const[R]=lw(A),[k,$]=g.range();if(b.style("opacity",1),R<=k){b.attr("transform",`translate(${k}, 0)`),this.hoveredRecord=this.records[0];return}else if(R>=$){b.attr("transform",`translate(${$}, 0)`),this.hoveredRecord=this.records[this.records.length-1];return}b.attr("transform",`translate(${R}, 0)`);const L=(R-k)/($-k),N=Math.round(L*(this.records.length-1));let D=new Zt,V=Number.MAX_VALUE;if(g(this.records[N].distance/1e3)<=R)for(let Y=N;Y<this.records.length;Y++){const B=Math.abs(R-g(this.records[Y].distance/1e3));if(B>V)break;D=this.records[Y],V=B}else for(let Y=N;Y>=0;Y--){const B=Math.abs(R-g(this.records[Y].distance/1e3));if(B>V)break;D=this.records[Y],V=B}this.hoveredRecord=D};d.on("pointerdown",v),d.on("pointermove",v,{passive:!0}),d.on("mouseleave",()=>{this.hoveredRecord=new Zt,b.style("opacity",0)})},onResize(){this.$nextTick(()=>{const e=this.$el;e.clientWidth!=0&&e.clientWidth!=this.elemWidth&&(this.elemWidth=e.clientWidth,this.renderGraph())})}},mounted(){this.$nextTick(()=>{const e=this.$el;this.elemWidth=e.clientWidth,requestAnimationFrame(()=>this.renderGraph())}),window.addEventListener("resize",this.onResize)},unmounted(){window.removeEventListener("resize",this.onResize)}};const Uh=e=>(Nr("data-v-c81bd019"),e=e(),Dr(),e),Tq={class:"col-12 h-100 pt-2"},Sq=Uh(()=>M("div",{class:"col-auto"},[M("h6",{class:"pt-1 title"},[ie(" Elevation "),M("i",{class:"fa-solid fa-solid fa-mountain"})])],-1)),Cq={key:0,class:"text-md-end text-sm-center elevation-hover"},Aq={class:"text-start pe-1"},Mq=Uh(()=>M("i",{class:"fa-solid fa-hourglass-half"},null,-1)),Rq={class:"text-end pe-1"},Iq=Uh(()=>M("i",{class:"fa-solid fa-road"},null,-1)),Lq={class:"text-end pe-1"},Oq=Uh(()=>M("i",{class:"fa-solid fa-mountain"},null,-1)),kq={class:"text-end"},$q=Uh(()=>M("i",{class:"fa-solid fa-arrow-up-right-dots fa-sm"},null,-1)),Nq={key:0};function Dq(e,t,n,i,r,s){var o;return ct(),ft("div",Tq,[M("div",{class:"row",ref:"title-"+n.name},[Sq,n.hasAltitude?(ct(),ft("div",Cq,[M("span",Aq,[Mq,ie(" "+ot(r.recordView.timestamp?s.formatDuration(new Date(r.recordView.timestamp).getTime()-r.begin.getTime()):"0 s"),1)]),M("span",Rq,[Iq,ie(" "+ot(typeof r.recordView.distance=="number"?(r.recordView.distance/1e3).toFixed(2):"0.00")+" km ",1)]),M("span",Lq,[Oq,ie(" "+ot(((o=r.recordView.altitude)==null?void 0:o.toFixed(0))??"0")+" m ",1)]),M("span",kq,[$q,ie(" "+ot(r.recordView.grade?Math.round(r.recordView.grade):"0")+" % ",1)])])):Rt("",!0)],512),M("div",null,[n.hasAltitude?(ct(),ft("div",{key:1,ref:n.name},null,512)):(ct(),ft("div",Nq,"No altitude data"))])])}const Pq=Ii(Eq,[["render",Dq],["__scopeId","data-v-c81bd019"]]),Fq={class:"col-12 h-100 pt-2"},zq={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:zr,required:!0},receivedRecord:Zt},computed:{details(){var e,t;return[new Si({title:"Avg Heart Rate",value:((e=this.summary.avgHeartRate)==null?void 0:e.toFixed(0))??"0"}),new Si({title:"Max Heart Rate",value:((t=this.summary.maxHeartRate)==null?void 0:t.toFixed(0))??"0"})]}},methods:{onHoveredRecord(e){this.$emit("hoveredRecord",e)}}},Wq=oi({...zq,__name:"HeartRateGraph",setup(e){return(t,n)=>(ct(),ft("div",Fq,[Ot(cu,{name:"Heart Rate",icon:"fa-heart-pulse","record-field":"heartRate",records:e.records,details:t.details,"graph-records":e.graphRecords,color:"red","y-label":"HR (bpm)",unit:"bpm","received-record":e.receivedRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","details","graph-records","y-label","received-record","onHoveredRecord"])]))}}),Vq={class:"col-12 h-100 pt-2"},Hq={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:zr,required:!0},receivedRecord:Zt},computed:{details(){return[new Si({title:"Avg Pace",value:this.summary.avgPace?bc(this.summary.avgPace):"-:-"}),new Si({title:"Avg Elapsed Pace",value:this.summary.avgElapsedPace?bc(this.summary.avgElapsedPace):"-:-"})]}},methods:{onHoveredRecord(e){this.$emit("hoveredRecord",e)}}},Gq=oi({...Hq,__name:"PaceGraph",setup(e){return(t,n)=>(ct(),ft("div",Vq,[Ot(cu,{name:"Pace",icon:"fa-clock-rotate-left","record-field":"pace",records:e.records,details:t.details,"graph-records":e.graphRecords,summary:e.summary,color:"dodgerblue","y-label":"Pace (duration/km)",unit:"/km","received-record":e.receivedRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","details","graph-records","summary","y-label","received-record","onHoveredRecord"])]))}}),Bq={class:"col-12 h-100 pt-2"},Uq={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:zr,required:!0},receivedRecord:Zt},computed:{details(){var e,t;return[new Si({title:"Avg Power",value:((e=this.summary.avgPower)==null?void 0:e.toFixed(0))??"0"}),new Si({title:"Max Power",value:((t=this.summary.maxPower)==null?void 0:t.toFixed(0))??"0"})]}},methods:{onHoveredRecord(e){this.$emit("hoveredRecord",e)}}},Yq=oi({...Uq,__name:"PowerGraph",setup(e){return(t,n)=>(ct(),ft("div",Bq,[Ot(cu,{name:"Power",icon:"fa-bolt-lightning","record-field":"power",records:e.records,details:t.details,"graph-records":e.graphRecords,color:"darkslategray","y-label":"Pwr. (W)",unit:"W","received-record":e.receivedRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","details","graph-records","y-label","received-record","onHoveredRecord"])]))}}),jq={class:"col-12 h-100 pt-2"},Xq={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:zr,required:!0},receivedRecord:Zt},computed:{details(){var e,t,n,i;return[new Si({title:"Avg Speed",value:(e=this.summary)!=null&&e.avgSpeed?(((t=this.summary)==null?void 0:t.avgSpeed)*3600/1e3).toFixed(2):"0.00"}),new Si({title:"Max Speed",value:(n=this.summary)!=null&&n.maxSpeed?(((i=this.summary)==null?void 0:i.maxSpeed)*3600/1e3).toFixed(2):"0.00"})]}},methods:{onHoveredRecord(e){this.$emit("hoveredRecord",e)}}},qq=oi({...Xq,__name:"SpeedGraph",setup(e){return(t,n)=>(ct(),ft("div",jq,[Ot(cu,{name:"Speed",icon:"fa-gauge-high","record-field":"speed",records:e.records,details:t.details,"graph-records":e.graphRecords,color:"lightgreen","pointer-color":"#7f8c8d","y-label":"Spd. (km/h)",unit:"km/h","received-record":e.receivedRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","details","graph-records","y-label","received-record","onHoveredRecord"])]))}}),Kq={class:"col-12 h-100 pt-2"},Zq={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:zr,required:!0},receivedRecord:Zt},computed:{details(){var e,t;return[new Si({title:"Avg Temperature",value:((e=this.summary.avgTemperature)==null?void 0:e.toFixed(0))??"0"}),new Si({title:"Max Temperature",value:((t=this.summary.maxTemperature)==null?void 0:t.toFixed(0))??"0"})]}},methods:{onHoveredRecord(e){this.$emit("hoveredRecord",e)}}},Jq=oi({...Zq,__name:"TemperatureGraph",setup(e){return(t,n)=>(ct(),ft("div",Kq,[Ot(cu,{name:"Temperature",icon:"fa-temperature-low","record-field":"temperature",records:e.records,details:t.details,"graph-records":e.graphRecords,color:"midnightblue","y-label":"Temp (°C)",unit:"°C","received-record":e.receivedRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","details","graph-records","y-label","received-record","onHoveredRecord"])]))}}),Qq={props:{laps:{type:Array,required:!0}},methods:{secondsToDHMS:O0}};const Ls=e=>(Nr("data-v-07a2bca5"),e=e(),Dr(),e),tK={key:0,class:"col-12 h-100"},eK=["data-bs-target","aria-controls"],nK={class:"row text-start"},iK={class:"col-auto d-inline-block",style:{height:"50px"}},rK={style:{"text-align":"left"}},sK=Ls(()=>M("i",{class:"fa-solid fa-caret-down"},null,-1)),oK=Ls(()=>M("i",{class:"fa-solid fa-caret-right"},null,-1)),aK={class:"px-1"},lK={class:"col"},cK=Ls(()=>M("div",{class:"row overview-title"},"Distance",-1)),uK={class:"row overview-value"},fK={class:"col"},hK=Ls(()=>M("div",{class:"row overview-title"},"Moving Time",-1)),dK={class:"row overview-value"},gK={class:"col"},mK=Ls(()=>M("div",{class:"row overview-title"},"Avg Cadence",-1)),pK={class:"row overview-value"},_K=["id"],yK={class:"row m-0"},vK=Jp('<div class="col ps-4 pe-0" data-v-07a2bca5><div data-v-07a2bca5> </div><div class="right-border" data-v-07a2bca5><div class="detail-title" data-v-07a2bca5>Speed</div><div class="detail-title" data-v-07a2bca5>Cadence</div><div class="detail-title" data-v-07a2bca5>Heart Rate</div><div class="detail-title" data-v-07a2bca5>Power</div></div></div>',1),bK={class:"col fw-bold text-center px-0"},wK=Ls(()=>M("div",{class:"fw-normal"},"Avg",-1)),xK={class:"right-border"},EK={class:"detail-value"},TK={class:"detail-value"},SK={class:"detail-value"},CK={class:"detail-value"},AK={class:"col fw-bold text-center px-0"},MK=Ls(()=>M("div",{class:"fw-normal"},"Max",-1)),RK={class:"right-border"},IK={class:"detail-value"},LK={class:"detail-value"},OK={class:"detail-value"},kK={class:"detail-value"},$K=Jp('<div class="col m-0" data-v-07a2bca5><div data-v-07a2bca5> </div><div data-v-07a2bca5><div class="ps-2 detail-unit" data-v-07a2bca5>km/h</div><div class="ps-2 detail-unit" data-v-07a2bca5>rpm</div><div class="ps-2 detail-unit" data-v-07a2bca5>bpm</div><div class="ps-2 detail-unit" data-v-07a2bca5>W</div></div></div>',1),NK={class:"calories mt-1"},DK={class:"row m-0 pt-1 pb-1"},PK=Ls(()=>M("div",{class:"col ps-4 m-0 text-start detail-title"},"Calories",-1)),FK={class:"col pe-4 m-0 text-end"},zK={class:"fw-bold pe-1"},WK=Ls(()=>M("span",{class:"detail-unit"},"Cal",-1));function VK(e,t,n,i,r,s){var o;return((o=n.laps)==null?void 0:o.length)>0?(ct(),ft("div",tK,[(ct(!0),ft(Ln,null,qp(n.laps,(a,l)=>(ct(),ft("div",{key:l},[M("div",{class:"tab row m-0 mt-2 pt-2",style:{cursor:"pointer"},"data-bs-toggle":"collapse","data-bs-target":"#laps-"+l,"aria-expanded":"false","aria-controls":"laps-"+l},[M("div",nK,[M("div",iK,[M("h6",rK,[sK,oK,M("span",aK,"Lap "+ot(l+1),1)])]),M("div",lK,[cK,M("div",uK,ot(a.totalDistance?(a.totalDistance/1e3).toFixed(2):"-")+" km ",1)]),M("div",fK,[hK,M("div",dK,ot(a.totalMovingTime?s.secondsToDHMS(a.totalMovingTime):"-:-"),1)]),M("div",gK,[mK,M("div",pK,ot(a.avgCadence?a.avgCadence:"-")+" rpm",1)])])],8,eK),M("div",{class:"collapse show text-start pb-3",id:"laps-"+l},[M("div",yK,[vK,M("div",bK,[wK,M("div",xK,[M("div",EK,ot(a.avgSpeed?(a.avgSpeed*3600/1e3).toFixed(2):"-"),1),M("div",TK,ot(a.avgCadence?a.avgCadence:"-"),1),M("div",SK,ot(a.avgHeartRate?a.avgHeartRate:"-"),1),M("div",CK,ot(a.avgPower?a.avgPower:"-"),1)])]),M("div",AK,[MK,M("div",RK,[M("div",IK,ot(a.maxSpeed?(a.maxSpeed*3600/1e3).toFixed(2):"-"),1),M("div",LK,ot(a.maxCadence?a.maxCadence:"-"),1),M("div",OK,ot(a.maxHeartRate?a.maxHeartRate:"-"),1),M("div",kK,ot(a.maxPower?a.maxPower:"-"),1)])]),$K]),M("div",NK,[M("div",DK,[PK,M("div",FK,[M("span",zK,ot(a.totalCalories?a.totalCalories.toLocaleString():"-"),1),WK])])])],8,_K)]))),128))])):Rt("",!0)}const HK=Ii(Qq,[["render",VK],["__scopeId","data-v-07a2bca5"]]),GK={props:{size:{default:"70px"}},computed:{diamondStyle(){let e=parseInt(this.size);return{width:e/4+"px",height:e/4+"px"}},styles(){let e=parseInt(this.size);return{width:this.size,height:e/4+"px"}}}};const BK={class:"spinner-container"};function UK(e,t,n,i,r,s){return ct(),ft("div",BK,[M("span",{style:Ze(s.styles),class:"spinner spinner--rotate-diamond"},[M("div",{style:Ze(s.diamondStyle),class:"diamond"},null,4),M("div",{style:Ze(s.diamondStyle),class:"diamond"},null,4),M("div",{style:Ze(s.diamondStyle),class:"diamond"},null,4)],4)])}const L$=Ii(GK,[["render",UK],["__scopeId","data-v-d6d77f04"]]),YK="/assets/destination-point-63b16bda.svg",jK="/assets/starting-point-c9a465c9.svg";class XK{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Os=XK,Oc={PROPERTYCHANGE:"propertychange"};class qK{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Vw=qK;function KK(e,t,n){let i,r;n=n||Co;let s=0,o=e.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+n(e[i],t),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function Co(e,t){return e>t?1:e<t?-1:0}function Hw(e,t,n){if(e[0]<=t)return 0;const i=e.length;if(t<=e[i-1])return i-1;if(typeof n=="function"){for(let r=1;r<i;++r){const s=e[r];if(s===t)return r;if(s<t)return n(t,e[r-1],s)>0?r-1:r}return i-1}if(n>0){for(let r=1;r<i;++r)if(e[r]<t)return r-1;return i-1}if(n<0){for(let r=1;r<i;++r)if(e[r]<=t)return r;return i-1}for(let r=1;r<i;++r){if(e[r]==t)return r;if(e[r]<t)return e[r-1]-t<t-e[r]?r-1:r}return i-1}function ZK(e,t,n){for(;t<n;){const i=e[t];e[t]=e[n],e[n]=i,++t,--n}}function ds(e,t){const n=Array.isArray(t)?t:[t],i=n.length;for(let r=0;r<i;r++)e[e.length]=n[r]}function Vo(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function JK(e,t,n){const i=t||Co;return e.every(function(r,s){if(s===0)return!0;const o=i(e[s-1],r);return!(o>0||n&&o===0)})}function ih(){return!0}function k0(){return!1}function kc(){}function QK(e){let t=!1,n,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==r||!Vo(s,i))&&(t=!0,r=this,i=s,n=e.apply(this,arguments)),n}}function tZ(e){function t(){let n;try{n=e()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return t()}function Yh(e){for(const t in e)delete e[t]}function $c(e){let t;for(t in e)return!1;return!t}class eZ extends Vw{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const i=this.listeners_||(this.listeners_={}),r=i[t]||(i[t]=[]);r.includes(n)||r.push(n)}dispatchEvent(t){const n=typeof t=="string",i=n?t:t.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=n?new Os(t):t;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,kc);delete o[i]}return l}disposeInternal(){this.listeners_&&Yh(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){const i=this.listeners_&&this.listeners_[t];if(i){const r=i.indexOf(n);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[r]=kc,++this.pendingRemovals_[t]):(i.splice(r,1),i.length===0&&delete this.listeners_[t]))}}}const jh=eZ,Lt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ht(e,t,n,i,r){if(i&&i!==e&&(n=n.bind(i)),r){const o=n;n=function(){e.removeEventListener(t,n),o.apply(this,arguments)}}const s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function Xm(e,t,n,i){return Ht(e,t,n,i,!0)}function le(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Yh(e))}class $0 extends jh{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Lt.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const i=t.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ht(this,t[s],n);return r}return Ht(this,t,n)}onceInternal(t,n){let i;if(Array.isArray(t)){const r=t.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Xm(this,t[s],n)}else i=Xm(this,t,n);return n.ol_key=i,i}unInternal(t,n){const i=n.ol_key;if(i)nZ(i);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)}}$0.prototype.on;$0.prototype.once;$0.prototype.un;function nZ(e){if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)le(e[t]);else le(e)}const O$=$0;function At(){throw new Error("Unimplemented abstract method.")}let iZ=0;function Jt(e){return e.ol_uid||(e.ol_uid=String(++iZ))}class bC extends Os{constructor(t,n,i){super(t),this.key=n,this.oldValue=i}}class rZ extends O${constructor(t){super(),this.on,this.once,this.un,Jt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new bC(i,t,n)),i=Oc.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new bC(i,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,i){const r=this.values_||(this.values_={});if(i)r[t]=n;else{const s=r[t];r[t]=n,s!==n&&this.notify(t,s)}}setProperties(t,n){for(const i in t)this.set(i,t[i],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],$c(this.values_)&&(this.values_=null),n||this.notify(t,i)}}}const sr=rZ,On={ADD:"add",REMOVE:"remove"},wC={LENGTH:"length"};class Qd extends Os{constructor(t,n,i){super(t),this.element=n,this.index=i}}class sZ extends sr{constructor(t,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let n=0,i=t.length;n<i;++n)this.push(t[n]);return this}forEach(t){const n=this.array_;for(let i=0,r=n.length;i<r;++i)t(n[i],i,n)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(wC.LENGTH)}insertAt(t,n){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new Qd(On.ADD,n,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const n=this.getLength();return this.insertAt(n,t),this.getLength()}remove(t){const n=this.array_;for(let i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Qd(On.REMOVE,n,t)),n}setAt(t,n){const i=this.getLength();if(t>=i){this.insertAt(t,n);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n,t);const r=this.array_[t];this.array_[t]=n,this.dispatchEvent(new Qd(On.REMOVE,r,t)),this.dispatchEvent(new Qd(On.ADD,n,t))}updateLength_(){this.set(wC.LENGTH,this.array_.length)}assertUnique_(t,n){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==n)throw new Error("Duplicate item added to a unique collection")}}const vr=sZ;function Ut(e,t){if(!e)throw new Error(t)}class Gw extends sr{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const n=t;this.setGeometry(n)}else{const n=t;this.setProperties(n)}}clone(){const t=new Gw(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&t.setGeometry(n.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(le(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Ht(t,Lt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?oZ(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function oZ(e){if(typeof e=="function")return e;let t;return Array.isArray(e)?t=e:(Ut(typeof e.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}const Gg=Gw,Ao=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",aZ=Ao.includes("firefox"),lZ=Ao.includes("safari")&&!Ao.includes("chrom");lZ&&(Ao.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ao));const cZ=Ao.includes("webkit")&&!Ao.includes("edge"),k$=Ao.includes("macintosh"),$$=typeof devicePixelRatio<"u"?devicePixelRatio:1,Bw=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,N$=typeof Image<"u"&&Image.prototype.decode,D$=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}();new Array(6);function qi(){return[1,0,0,1,0,0]}function uZ(e,t,n,i,r,s,o){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=s,e[5]=o,e}function fZ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ie(e,t){const n=t[0],i=t[1];return t[0]=e[0]*n+e[2]*i+e[4],t[1]=e[1]*n+e[3]*i+e[5],t}function hZ(e,t,n){return uZ(e,t,0,0,n,0,0)}function nr(e,t,n,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return e[0]=i*c,e[1]=r*l,e[2]=-i*l,e[3]=r*c,e[4]=o*i*c-a*i*l+t,e[5]=o*r*l+a*r*c+n,e}function N0(e,t){const n=dZ(t);Ut(n!==0,"Transformation matrix cannot be inverted");const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return e[0]=o/n,e[1]=-r/n,e[2]=-s/n,e[3]=i/n,e[4]=(s*l-o*a)/n,e[5]=-(i*l-r*a)/n,e}function dZ(e){return e[0]*e[3]-e[1]*e[2]}let xC;function Uw(e){const t="matrix("+e.join(", ")+")";if(Bw)return t;const n=xC||(xC=document.createElement("div"));return n.style.transform=t,n.style.transform}const Ye={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function EC(e){const t=Ci();for(let n=0,i=e.length;n<i;++n)Rf(t,e[n]);return t}function Yw(e,t,n){return n?(n[0]=e[0]-t,n[1]=e[1]-t,n[2]=e[2]+t,n[3]=e[3]+t,n):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function P$(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function ll(e,t,n){let i,r;return t<e[0]?i=e[0]-t:e[2]<t?i=t-e[2]:i=0,n<e[1]?r=e[1]-n:e[3]<n?r=n-e[3]:r=0,i*i+r*r}function Xh(e,t){return jw(e,t[0],t[1])}function go(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function jw(e,t,n){return e[0]<=t&&t<=e[2]&&e[1]<=n&&n<=e[3]}function Ov(e,t){const n=e[0],i=e[1],r=e[2],s=e[3],o=t[0],a=t[1];let l=Ye.UNKNOWN;return o<n?l=l|Ye.LEFT:o>r&&(l=l|Ye.RIGHT),a<i?l=l|Ye.BELOW:a>s&&(l=l|Ye.ABOVE),l===Ye.UNKNOWN&&(l=Ye.INTERSECTING),l}function Ci(){return[1/0,1/0,-1/0,-1/0]}function Mo(e,t,n,i,r){return r?(r[0]=e,r[1]=t,r[2]=n,r[3]=i,r):[e,t,n,i]}function qh(e){return Mo(1/0,1/0,-1/0,-1/0,e)}function gZ(e,t){const n=e[0],i=e[1];return Mo(n,i,n,i,t)}function F$(e,t,n,i,r){const s=qh(r);return W$(s,e,t,n,i)}function rh(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function z$(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function Rf(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function W$(e,t,n,i,r){for(;n<i;n+=r)mZ(e,t[n],t[n+1]);return e}function mZ(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)}function V$(e,t){let n;return n=t(D0(e)),n||(n=t(P0(e)),n)||(n=t(F0(e)),n)||(n=t(cl(e)),n)?n:!1}function kv(e){let t=0;return ul(e)||(t=oe(e)*ei(e)),t}function D0(e){return[e[0],e[1]]}function P0(e){return[e[2],e[1]]}function Ja(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function pZ(e,t){let n;if(t==="bottom-left")n=D0(e);else if(t==="bottom-right")n=P0(e);else if(t==="top-left")n=cl(e);else if(t==="top-right")n=F0(e);else throw new Error("Invalid corner");return n}function $v(e,t,n,i,r){const[s,o,a,l,c,u,f,h]=Nv(e,t,n,i);return Mo(Math.min(s,a,c,f),Math.min(o,l,u,h),Math.max(s,a,c,f),Math.max(o,l,u,h),r)}function Nv(e,t,n,i){const r=t*i[0]/2,s=t*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,c=r*a,u=s*o,f=s*a,h=e[0],d=e[1];return[h-l+f,d-c-u,h-l-f,d-c+u,h+l-f,d+c+u,h+l+f,d+c-u,h-l+f,d-c-u]}function ei(e){return e[3]-e[1]}function uc(e,t,n){const i=n||Ci();return bn(e,t)?(e[0]>t[0]?i[0]=e[0]:i[0]=t[0],e[1]>t[1]?i[1]=e[1]:i[1]=t[1],e[2]<t[2]?i[2]=e[2]:i[2]=t[2],e[3]<t[3]?i[3]=e[3]:i[3]=t[3]):qh(i),i}function cl(e){return[e[0],e[3]]}function F0(e){return[e[2],e[3]]}function oe(e){return e[2]-e[0]}function bn(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function ul(e){return e[2]<e[0]||e[3]<e[1]}function _Z(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function yZ(e,t){const n=(e[2]-e[0])/2*(t-1),i=(e[3]-e[1])/2*(t-1);e[0]-=n,e[2]+=n,e[1]-=i,e[3]+=i}function vZ(e,t,n){let i=!1;const r=Ov(e,t),s=Ov(e,n);if(r===Ye.INTERSECTING||s===Ye.INTERSECTING)i=!0;else{const o=e[0],a=e[1],l=e[2],c=e[3],u=t[0],f=t[1],h=n[0],d=n[1],g=(d-f)/(h-u);let m,p;s&Ye.ABOVE&&!(r&Ye.ABOVE)&&(m=h-(d-c)/g,i=m>=o&&m<=l),!i&&s&Ye.RIGHT&&!(r&Ye.RIGHT)&&(p=d-(h-l)*g,i=p>=a&&p<=c),!i&&s&Ye.BELOW&&!(r&Ye.BELOW)&&(m=h-(d-a)/g,i=m>=o&&m<=l),!i&&s&Ye.LEFT&&!(r&Ye.LEFT)&&(p=d-(h-o)*g,i=p>=a&&p<=c)}return i}function H$(e,t){const n=t.getExtent(),i=Ja(e);if(t.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const r=oe(n),o=Math.floor((i[0]-n[0])/r)*r;e[0]-=o,e[2]-=o}return e}function bZ(e,t){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];H$(e,t);const i=oe(n);if(oe(e)>i)return[[n[0],e[1],n[2],e[3]]];if(e[0]<n[0])return[[e[0]+i,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-i,e[3]]]}return[e]}const Nc={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class wZ{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Nc[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const G$=wZ,Kh=6378137,Xl=Math.PI*Kh,xZ=[-Xl,-Xl,Xl,Xl],EZ=[-180,-85,180,85],tg=Kh*Math.log(Math.tan(Math.PI/2));class Al extends G${constructor(t){super({code:t,units:"m",extent:xZ,global:!0,worldExtent:EZ,getPointResolution:function(n,i){return n/Math.cosh(i[1]/Kh)}})}}const TC=[new Al("EPSG:3857"),new Al("EPSG:102100"),new Al("EPSG:102113"),new Al("EPSG:900913"),new Al("http://www.opengis.net/def/crs/EPSG/0/3857"),new Al("http://www.opengis.net/gml/srs/epsg.xml#3857")];function TZ(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let r=0;r<i;r+=n){t[r]=Xl*e[r]/180;let s=Kh*Math.log(Math.tan(Math.PI*(+e[r+1]+90)/360));s>tg?s=tg:s<-tg&&(s=-tg),t[r+1]=s}return t}function SZ(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let r=0;r<i;r+=n)t[r]=180*e[r]/Xl,t[r+1]=360*Math.atan(Math.exp(e[r+1]/Kh))/Math.PI-90;return t}const CZ=6378137,SC=[-180,-90,180,90],AZ=Math.PI*CZ/180;class na extends G${constructor(t,n){super({code:t,units:"degrees",extent:SC,axisOrientation:n,global:!0,metersPerUnit:AZ,worldExtent:SC})}}const CC=[new na("CRS:84"),new na("EPSG:4326","neu"),new na("urn:ogc:def:crs:OGC:1.3:CRS84"),new na("urn:ogc:def:crs:OGC:2:84"),new na("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new na("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new na("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Dv={};function MZ(e){return Dv[e]||Dv[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function RZ(e,t){Dv[e]=t}let fc={};function qm(e,t,n){const i=e.getCode(),r=t.getCode();i in fc||(fc[i]={}),fc[i][r]=n}function IZ(e,t){let n;return e in fc&&t in fc[e]&&(n=fc[e][t]),n}function Ne(e,t,n){return Math.min(Math.max(e,t),n)}function LZ(e,t,n,i,r,s){const o=r-n,a=s-i;if(o!==0||a!==0){const l=((e-n)*o+(t-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return Oa(e,t,n,i)}function Oa(e,t,n,i){const r=n-e,s=i-t;return r*r+s*s}function OZ(e){const t=e.length;for(let i=0;i<t;i++){let r=i,s=Math.abs(e[i][i]);for(let a=i+1;a<t;a++){const l=Math.abs(e[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=e[r];e[r]=e[i],e[i]=o;for(let a=i+1;a<t;a++){const l=-e[a][i]/e[i][i];for(let c=i;c<t+1;c++)i==c?e[a][c]=0:e[a][c]+=l*e[i][c]}}const n=new Array(t);for(let i=t-1;i>=0;i--){n[i]=e[i][t]/e[i][i];for(let r=i-1;r>=0;r--)e[r][t]-=e[r][i]*n[i]}return n}function Bg(e){return e*Math.PI/180}function ka(e,t){const n=e%t;return n*t<0?n+t:n}function jn(e,t,n){return e+n*(t-e)}function z0(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function eg(e,t){return Math.floor(z0(e,t))}function ng(e,t){return Math.ceil(z0(e,t))}function AC(e,t,n){const i=n!==void 0?e.toFixed(n):""+e;let r=i.indexOf(".");return r=r===-1?i.length:r,r>t?i:new Array(1+t-r).join("0")+i}function kZ(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function MC(e,t,n){const i=ka(t+180,360)-180,r=Math.abs(3600*i),s=n||0;let o=Math.floor(r/3600),a=Math.floor((r-o*3600)/60),l=z0(r-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"°";return(a!==0||l!==0)&&(c+=" "+AC(a,2)+"′"),l!==0&&(c+=" "+AC(l,2,s)+"″"),i!==0&&(c+=" "+e.charAt(i<0?1:0)),c}function Km(e,t){let n=!0;for(let i=e.length-1;i>=0;--i)if(e[i]!=t[i]){n=!1;break}return n}function Xw(e,t){const n=Math.cos(t),i=Math.sin(t),r=e[0]*n-e[1]*i,s=e[1]*n+e[0]*i;return e[0]=r,e[1]=s,e}function $Z(e,t){return e[0]*=t,e[1]*=t,e}function NZ(e,t){return e?MC("NS",e[1],t)+" "+MC("EW",e[0],t):""}function B$(e,t){if(t.canWrapX()){const n=oe(t.getExtent()),i=DZ(e,t,n);i&&(e[0]-=i*n)}return e}function DZ(e,t,n){const i=t.getExtent();let r=0;return t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])&&(n=n||oe(i),r=Math.floor((e[0]-i[0])/n)),r}const PZ=63710088e-1;function RC(e,t,n){n=n||PZ;const i=Bg(e[1]),r=Bg(t[1]),s=(r-i)/2,o=Bg(t[0]-e[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const U$={info:1,warn:2,error:3,none:4};let FZ=U$.info;function Y$(...e){FZ>U$.warn||console.warn(...e)}let Pv=!0;function zZ(e){Pv=!(e===void 0?!0:e)}function qw(e,t){if(t!==void 0){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];t=t}else t=e.slice();return t}function j$(e,t){if(t!==void 0&&e!==t){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function WZ(e){RZ(e.getCode(),e),qm(e,e,qw)}function VZ(e){e.forEach(WZ)}function Fe(e){return typeof e=="string"?MZ(e):e||null}function Zm(e,t,n,i){e=Fe(e);let r;const s=e.getPointResolutionFunc();if(s){if(r=s(t,n),i&&i!==e.getUnits()){const o=e.getMetersPerUnit();o&&(r=r*o/Nc[i])}}else{const o=e.getUnits();if(o=="degrees"&&!i||i=="degrees")r=t;else{const a=Zw(e,Fe("EPSG:4326"));if(a===j$&&o!=="degrees")r=t*e.getMetersPerUnit();else{let c=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];c=a(c,c,2);const u=RC(c.slice(0,2),c.slice(2,4)),f=RC(c.slice(4,6),c.slice(6,8));r=(u+f)/2}const l=i?Nc[i]:e.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function IC(e){VZ(e),e.forEach(function(t){e.forEach(function(n){t!==n&&qm(t,n,qw)})})}function HZ(e,t,n,i){e.forEach(function(r){t.forEach(function(s){qm(r,s,n),qm(s,r,i)})})}function Kw(e,t){return e?typeof e=="string"?Fe(e):e:Fe(t)}function ua(e,t){if(e===t)return!0;const n=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||Zw(e,t)===qw)&&n}function Zw(e,t){const n=e.getCode(),i=t.getCode();let r=IZ(n,i);return r||(r=j$),r}function Jm(e,t){const n=Fe(e),i=Fe(t);return Zw(n,i)}function GZ(e,t,n){return Jm(t,n)(e,void 0,e.length)}function Fv(e,t){return e}function Jr(e,t){return Pv&&!Km(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(Pv=!1,Y$("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function X$(e,t){return e}function us(e,t){return e}function BZ(){IC(TC),IC(CC),HZ(CC,TC,TZ,SZ)}BZ();function $a(e,t,n,i,r,s){s=s||[];let o=0;for(let a=t;a<n;a+=i){const l=e[a],c=e[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function q$(e,t,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let f=0;for(let h=t;h<n;h+=i){const d=e[h]-c,g=e[h+1]-u;o[f++]=c+d*a-g*l,o[f++]=u+d*l+g*a;for(let m=h+2;m<h+i;++m)o[f++]=e[m]}return o&&o.length!=f&&(o.length=f),o}function UZ(e,t,n,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let f=t;f<n;f+=i){const h=e[f]-l,d=e[f+1]-c;a[u++]=l+r*h,a[u++]=c+s*d;for(let g=f+2;g<f+i;++g)a[u++]=e[g]}return a&&a.length!=u&&(a.length=u),a}function YZ(e,t,n,i,r,s,o){o=o||[];let a=0;for(let l=t;l<n;l+=i){o[a++]=e[l]+r,o[a++]=e[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=e[c]}return o&&o.length!=a&&(o.length=a),o}const LC=qi();class jZ extends sr{constructor(){super(),this.extent_=Ci(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=QK(function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})}simplifyTransformed(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)}clone(){return At()}closestPointXY(t,n,i,r){return At()}containsXY(t,n){const i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n}getClosestPoint(t,n){return n=n||[NaN,NaN],this.closestPointXY(t[0],t[1],n,1/0),n}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return At()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&qh(n),this.extentRevision_=this.getRevision()}return _Z(this.extent_,t)}rotate(t,n){At()}scale(t,n,i){At()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return At()}getType(){return At()}applyTransform(t){At()}intersectsExtent(t){return At()}translate(t,n){At()}transform(t,n){const i=Fe(t),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=ei(c)/ei(l);return nr(LC,c[0],c[3],u,-u,0,0,0),$a(s,0,s.length,a,LC,o),Jm(i,n)(s,o,a)}:Jm(i,n);return this.applyTransform(r),this}}const K$=jZ;class XZ extends K${constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return F$(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return At()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,n){this.stride=OC(t),this.layout=t,this.flatCoordinates=n}setCoordinates(t,n){At()}setLayout(t,n,i){let r;if(t)r=OC(t);else{for(let s=0;s<i;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,t=qZ(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();q$(i,0,i.length,r,t,n,i),this.changed()}}scale(t,n,i){n===void 0&&(n=t),i||(i=Ja(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();UZ(r,0,r.length,s,t,n,i,r),this.changed()}}translate(t,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();YZ(i,0,i.length,r,t,n,i),this.changed()}}}function qZ(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function OC(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function KZ(e,t,n){const i=e.getFlatCoordinates();if(!i)return null;const r=e.getStride();return $a(i,0,i.length,r,t,n)}const fl=XZ;function kC(e,t,n,i,r,s,o){const a=e[t],l=e[t+1],c=e[n]-a,u=e[n+1]-l;let f;if(c===0&&u===0)f=t;else{const h=((r-a)*c+(s-l)*u)/(c*c+u*u);if(h>1)f=n;else if(h>0){for(let d=0;d<i;++d)o[d]=jn(e[t+d],e[n+d],h);o.length=i;return}else f=t}for(let h=0;h<i;++h)o[h]=e[f+h];o.length=i}function Jw(e,t,n,i,r){let s=e[t],o=e[t+1];for(t+=i;t<n;t+=i){const a=e[t],l=e[t+1],c=Oa(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function Qw(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=Jw(e,t,a,i,r),t=a}return r}function ZZ(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=Qw(e,t,a,i,r),t=a[a.length-1]}return r}function tx(e,t,n,i,r,s,o,a,l,c,u){if(t==n)return c;let f,h;if(r===0){if(h=Oa(o,a,e[t],e[t+1]),h<c){for(f=0;f<i;++f)l[f]=e[t+f];return l.length=i,h}return c}u=u||[NaN,NaN];let d=t+i;for(;d<n;)if(kC(e,d-i,d,i,o,a,u),h=Oa(o,a,u[0],u[1]),h<c){for(c=h,f=0;f<i;++f)l[f]=u[f];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(h)-Math.sqrt(c))/r|0,1);if(s&&(kC(e,n-i,t,i,o,a,u),h=Oa(o,a,u[0],u[1]),h<c)){for(c=h,f=0;f<i;++f)l[f]=u[f];l.length=i}return c}function ex(e,t,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let f=0,h=n.length;f<h;++f){const d=n[f];c=tx(e,t,d,i,r,s,o,a,l,c,u),t=d}return c}function JZ(e,t,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let f=0,h=n.length;f<h;++f){const d=n[f];c=ex(e,t,d,i,r,s,o,a,l,c,u),t=d[d.length-1]}return c}function QZ(e,t,n,i){for(let r=0,s=n.length;r<s;++r)e[t++]=n[r];return t}function W0(e,t,n,i){for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0;a<i;++a)e[t++]=o[a]}return t}function nx(e,t,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=W0(e,t,n[o],i);r[s++]=l,t=l}return r.length=s,r}function tJ(e,t,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=nx(e,t,n[o],i,r[s]);l.length===0&&(l[0]=t),r[s++]=l,t=l[l.length-1]}return r.length=s,r}function ix(e,t,n,i,r,s,o){const a=(n-t)/i;if(a<3){for(;t<n;t+=i)s[o++]=e[t],s[o++]=e[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,n-i];let u=0;for(;c.length>0;){const f=c.pop(),h=c.pop();let d=0;const g=e[h],m=e[h+1],p=e[f],_=e[f+1];for(let y=h+i;y<f;y+=i){const b=e[y],v=e[y+1],x=LZ(b,v,g,m,p,_);x>d&&(u=y,d=x)}d>r&&(l[(u-t)/i]=1,h+i<u&&c.push(h,u),u+i<f&&c.push(u,f))}for(let f=0;f<a;++f)l[f]&&(s[o++]=e[t+f*i],s[o++]=e[t+f*i+1]);return o}function eJ(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=ix(e,t,u,i,r,s,o),a.push(o),t=u}return o}function sa(e,t){return t*Math.round(e/t)}function nJ(e,t,n,i,r,s,o){if(t==n)return o;let a=sa(e[t],r),l=sa(e[t+1],r);t+=i,s[o++]=a,s[o++]=l;let c,u;do if(c=sa(e[t],r),u=sa(e[t+1],r),t+=i,t==n)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;t<n;){const f=sa(e[t],r),h=sa(e[t+1],r);if(t+=i,f==c&&h==u)continue;const d=c-a,g=u-l,m=f-a,p=h-l;if(d*p==g*m&&(d<0&&m<d||d==m||d>0&&m>d)&&(g<0&&p<g||g==p||g>0&&p>g)){c=f,u=h;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=f,u=h}return s[o++]=c,s[o++]=u,o}function Z$(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=nJ(e,t,u,i,r,s,o),a.push(o),t=u}return o}function iJ(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],f=[];o=Z$(e,t,u,i,r,s,o,f),a.push(f),t=u[u.length-1]}return o}function mo(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=t;o<n;o+=i)r[s++]=e.slice(o,o+i);return r.length=s,r}function sh(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=mo(e,t,l,i,r[s]),t=l}return r.length=s,r}function zv(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=l.length===1&&l[0]===t?[]:sh(e,t,l,i,r[s]),t=l[l.length-1]}return r.length=s,r}function J$(e,t,n,i){let r=0,s=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];r+=o*a-s*l,s=a,o=l}return r/2}function Q$(e,t,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=J$(e,t,a,i),t=a}return r}function rJ(e,t,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=Q$(e,t,a,i),t=a[a.length-1]}return r}class Qm extends fl{constructor(t,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}clone(){return new Qm(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,n,i,r){return r<ll(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Jw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),tx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,r))}getArea(){return J$(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return mo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const n=[];return n.length=ix(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new Qm(n,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=W0(this.flatCoordinates,0,t,this.stride),this.changed()}}const $C=Qm;class rx extends fl{constructor(t,n){super(),this.setCoordinates(t,n)}clone(){const t=new rx(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){const s=this.flatCoordinates,o=Oa(t,n,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return gZ(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return jw(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=QZ(this.flatCoordinates,0,t,this.stride),this.changed()}}const Dc=rx;function sJ(e,t,n,i,r){return!V$(r,function(o){return!pa(e,t,n,i,o[0],o[1])})}function pa(e,t,n,i,r,s){let o=0,a=e[n-i],l=e[n-i+1];for(;t<n;t+=i){const c=e[t],u=e[t+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function sx(e,t,n,i,r,s){if(n.length===0||!pa(e,t,n[0],i,r,s))return!1;for(let o=1,a=n.length;o<a;++o)if(pa(e,n[o-1],n[o],i,r,s))return!1;return!0}function oJ(e,t,n,i,r,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(sx(e,t,l,i,r,s))return!0;t=l[l.length-1]}return!1}function tN(e,t,n,i,r,s,o){let a,l,c,u,f,h,d;const g=r[s+1],m=[];for(let y=0,b=n.length;y<b;++y){const v=n[y];for(u=e[v-i],h=e[v-i+1],a=t;a<v;a+=i)f=e[a],d=e[a+1],(g<=h&&d<=g||h<=g&&g<=d)&&(c=(g-h)/(d-h)*(f-u)+u,m.push(c)),u=f,h=d}let p=NaN,_=-1/0;for(m.sort(Co),u=m[0],a=1,l=m.length;a<l;++a){f=m[a];const y=Math.abs(f-u);y>_&&(c=(u+f)/2,sx(e,t,n,i,c,g)&&(p=c,_=y)),u=f}return isNaN(p)&&(p=r[s]),o?(o.push(p,g,_),o):[p,g,_]}function aJ(e,t,n,i,r){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=tN(e,t,l,i,r,2*o,s),t=l[l.length-1]}return s}function eN(e,t,n,i,r){let s;for(t+=i;t<n;t+=i)if(s=r(e.slice(t-i,t),e.slice(t,t+i)),s)return s;return!1}function V0(e,t,n,i,r){const s=W$(Ci(),e,t,n,i);return bn(r,s)?go(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:eN(e,t,n,i,function(o,a){return vZ(r,o,a)}):!1}function lJ(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){if(V0(e,t,n[s],i,r))return!0;t=n[s]}return!1}function nN(e,t,n,i,r){return!!(V0(e,t,n,i,r)||pa(e,t,n,i,r[0],r[1])||pa(e,t,n,i,r[0],r[3])||pa(e,t,n,i,r[2],r[1])||pa(e,t,n,i,r[2],r[3]))}function iN(e,t,n,i,r){if(!nN(e,t,n[0],i,r))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(sJ(e,n[s-1],n[s],i,r)&&!V0(e,n[s-1],n[s],i,r))return!1;return!0}function cJ(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(iN(e,t,a,i,r))return!0;t=a[a.length-1]}return!1}function uJ(e,t,n,i){for(;t<n-i;){for(let r=0;r<i;++r){const s=e[t+r];e[t+r]=e[n-i+r],e[n-i+r]=s}t+=i,n-=i}}function rN(e,t,n,i){let r=0,s=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function sN(e,t,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=rN(e,t,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=a}return!0}function fJ(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!sN(e,t,a,i,r))return!1;a.length&&(t=a[a.length-1])}return!0}function Wv(e,t,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=rN(e,t,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&uJ(e,t,a,i),t=a}return t}function NC(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s)t=Wv(e,t,n[s],i,r);return t}class Ro extends fl{constructor(t,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,t),this.ends_=i):this.setCoordinates(t,n)}appendLinearRing(t){this.flatCoordinates?ds(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ro(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<ll(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qw(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ex(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,r))}containsXY(t,n){return sx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)}getArea(){return Q$(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Wv(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,sh(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Ja(this.getExtent());this.flatInteriorPoint_=tN(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Dc(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new $C(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,n=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new $C(n.slice(s,l),t);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;sN(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Wv(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=Z$(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new Ro(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return iN(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=nx(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function Vv(e){if(ul(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],n=e[1],i=e[2],r=e[3],s=[t,n,t,r,i,r,i,n,t,n];return new Ro(s,"XY",[s.length])}const Ar={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class ox{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new ox({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const ax=ox;function oN(e,t,n,i,r,s,o){let a,l;const c=(n-t)/i;if(c===1)a=t;else if(c===2)a=t,l=r;else if(c!==0){let u=e[t],f=e[t+1],h=0;const d=[0];for(let p=t+i;p<n;p+=i){const _=e[p],y=e[p+1];h+=Math.sqrt((_-u)*(_-u)+(y-f)*(y-f)),d.push(h),u=_,f=y}const g=r*h,m=KK(d,g);m<0?(l=(g-d[-m-2])/(d[-m-1]-d[-m-2]),a=t+(-m-2)*i):a=t+m*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?e[a+u]:jn(e[a+u],e[a+i+u],l);return s}function Hv(e,t,n,i,r,s){if(n==t)return null;let o;if(r<e[t+i-1])return s?(o=e.slice(t,t+i),o[i-1]=r,o):null;if(e[n-1]<r)return s?(o=e.slice(n-i,n),o[i-1]=r,o):null;if(r==e[t+i-1])return e.slice(t,t+i);let a=t/i,l=n/i;for(;a<l;){const h=a+l>>1;r<e[(h+1)*i-1]?l=h:a=h+1}const c=e[a*i-1];if(r==c)return e.slice((a-1)*i,(a-1)*i+i);const u=e[(a+1)*i-1],f=(r-c)/(u-c);o=[];for(let h=0;h<i-1;++h)o.push(jn(e[(a-1)*i+h],e[a*i+h],f));return o.push(r),o}function hJ(e,t,n,i,r,s,o){if(o)return Hv(e,t,n[n.length-1],i,r,s);let a;if(r<e[i-1])return s?(a=e.slice(0,i),a[i-1]=r,a):null;if(e[e.length-1]<r)return s?(a=e.slice(e.length-i),a[i-1]=r,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(t!=u){if(r<e[t+i-1])return null;if(r<=e[u-1])return Hv(e,t,u,i,r,!1);t=u}}return null}function aN(e,t,n,i){let r=e[t],s=e[t+1],o=0;for(let a=t+i;a<n;a+=i){const l=e[a],c=e[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class tp extends fl{constructor(t,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendCoordinate(t){this.flatCoordinates?ds(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new tp(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<ll(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Jw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),tx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,r))}forEachSegment(t){return eN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,Hv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n))}getCoordinates(){return mo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,n){return oN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)}getLength(){return aN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const n=[];return n.length=ix(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new tp(n,"XY")}getType(){return"LineString"}intersectsExtent(t){return V0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=W0(this.flatCoordinates,0,t,this.stride),this.changed()}}const ep=tp;class lx{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new lx({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const cx=lx,Dt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function DC(e){return e[0]>0&&e[1]>0}function dJ(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]*t+.5|0,n[1]=e[1]*t+.5|0,n}function Kn(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}class ux{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Kn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new ux({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return At()}getImage(t){return At()}getHitDetectionImage(){return At()}getPixelRatio(t){return 1}getImageState(){return At()}getImageSize(){return At()}getOrigin(){return At()}getSize(){return At()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Kn(t)}listenImageChange(t){At()}load(){At()}unlistenImageChange(t){At()}}const lN=ux,gJ=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,mJ=/^([a-z]*)$|^hsla?\(.*\)$/i;function cN(e){return typeof e=="string"?e:uN(e)}function pJ(e){const t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);const n=getComputedStyle(t).color;return document.body.removeChild(t),n}return""}const _J=function(){const t={};let n=0;return function(i){let r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){let s=0;for(const o in t)s++&3||(delete t[o],--n)}r=yJ(i),t[i]=r,++n}return r}}();function np(e){return Array.isArray(e)?e:_J(e)}function yJ(e){let t,n,i,r,s;if(mJ.exec(e)&&(e=pJ(e)),gJ.exec(e)){const o=e.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(e.substr(1+0*a,a),16),n=parseInt(e.substr(1+1*a,a),16),i=parseInt(e.substr(1+2*a,a),16),l?r=parseInt(e.substr(1+3*a,a),16):r=255,a==1&&(t=(t<<4)+t,n=(n<<4)+n,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[t,n,i,r/255]}else if(e.startsWith("rgba("))s=e.slice(5,-1).split(",").map(Number),PC(s);else if(e.startsWith("rgb("))s=e.slice(4,-1).split(",").map(Number),s.push(1),PC(s);else throw new Error("Invalid color");return s}function PC(e){return e[0]=Ne(e[0]+.5|0,0,255),e[1]=Ne(e[1]+.5|0,0,255),e[2]=Ne(e[2]+.5|0,0,255),e[3]=Ne(e[3],0,1),e}function uN(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let n=e[1];n!=(n|0)&&(n=n+.5|0);let i=e[2];i!=(i|0)&&(i=i+.5|0);const r=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+n+","+i+","+r+")"}function br(e){return Array.isArray(e)?uN(e):e}function Cn(e,t,n,i){let r;return n&&n.length?r=n.shift():Bw?r=new OffscreenCanvas(e||300,t||300):r=document.createElement("canvas"),e&&(r.width=e),t&&(r.height=t),r.getContext("2d",i)}function H0(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function vJ(e){let t=e.offsetWidth;const n=getComputedStyle(e);return t+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),t}function bJ(e){let t=e.offsetHeight;const n=getComputedStyle(e);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),t}function ip(e,t){const n=t.parentNode;n&&n.replaceChild(e,t)}function rp(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function fN(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function wJ(e,t){const n=e.childNodes;for(let i=0;;++i){const r=n[i],s=t[i];if(!r&&!s)break;if(r!==s){if(!r){e.appendChild(s);continue}if(!s){e.removeChild(r),--i;continue}e.insertBefore(s,r)}}}const ig="ol-hidden",xJ="ol-selectable",hl="ol-unselectable",FC="ol-unsupported",Zh="ol-control",zC="ol-collapsed",EJ=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),WC=["style","variant","weight","size","lineHeight","family"],hN=function(e){const t=e.match(EJ);if(!t)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=WC.length;i<r;++i){const s=t[i+1];s!==void 0&&(n[WC[i]]=s)}return n.families=n.family.split(/,\s?/),n},dN="10px sans-serif",kn="#000",Pc="round",gs=[],ms=0,Fc="round",oh=10,ah="#000",lh="center",sp="middle",_a=[0,0,0,0],ch=1,Qr=new sr;let zl=null,Gv;const Bv={},TJ=function(){const t="32px ",n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(c,u,f){let h=!0;for(let d=0;d<i;++d){const g=n[d];if(o=op(c+" "+u+" "+t+g,r),f!=g){const m=op(c+" "+u+" "+t+f+","+g,r);h=h&&m!=o}}return!!h}function l(){let c=!0;const u=Qr.getKeys();for(let f=0,h=u.length;f<h;++f){const d=u[f];Qr.get(d)<100&&(a.apply(this,d.split(`
`))?(Yh(Bv),zl=null,Gv=void 0,Qr.set(d,100)):(Qr.set(d,Qr.get(d)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const u=hN(c);if(!u)return;const f=u.families;for(let h=0,d=f.length;h<d;++h){const g=f[h],m=u.style+`
`+u.weight+`
`+g;Qr.get(m)===void 0&&(Qr.set(m,100,!0),a(u.style,u.weight,g)||(Qr.set(m,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),SJ=function(){let e;return function(t){let n=Bv[t];if(n==null){if(Bw){const i=hN(t),r=gN(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),n=e.offsetHeight,document.body.removeChild(e);Bv[t]=n}return n}}();function gN(e,t){return zl||(zl=Cn(1,1)),e!=Gv&&(zl.font=e,Gv=zl.font),zl.measureText(t)}function op(e,t){return gN(e,t).width}function VC(e,t,n){if(t in n)return n[t];const i=t.split(`
`).reduce((r,s)=>Math.max(r,op(e,s)),0);return n[t]=i,i}function CJ(e,t){const n=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=t.length;c<=u;c+=2){const f=t[c];if(f===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const h=t[c+1]||e.font,d=op(h,f);n.push(d),o+=d;const g=SJ(h);i.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:n,heights:i,lineWidths:r}}function AJ(e,t,n,i,r,s,o,a,l,c,u){e.save(),n!==1&&(e.globalAlpha*=n),t&&e.transform.apply(e,t),i.contextInstructions?(e.translate(l,c),e.scale(u[0],u[1]),MJ(i,e)):u[0]<0||u[1]<0?(e.translate(l,c),e.scale(u[0],u[1]),e.drawImage(i,r,s,o,a,0,0,o,a)):e.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),e.restore()}function MJ(e,t){const n=e.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?t[n[i]].apply(t,n[i+1]):t[n[i]]=n[i+1]}class fx extends lN{constructor(t){const n=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:n,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),n=new fx({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const t=this.size_;if(!t)return null;const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-n[0]/i[0],t[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let n=this.canvas_[t];if(!n){const i=this.renderOptions_,r=Cn(i.size*t,i.size*t);this.draw_(i,r,t),n=r.canvas,this.canvas_[t]=n}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Dt.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const w=r;r=s,s=w}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,f=Math.sqrt(l*l+u*u),h=f/l;if(t==="miter"&&h<=i)return h*n;const d=n/2/h,g=n/2*(u/f),p=Math.sqrt((r+d)*(r+d)+g*g)-r;if(this.radius2_===void 0||t==="bevel")return p*2;const _=r*Math.sin(a),y=Math.sqrt(r*r-_*_),b=s-y,x=Math.sqrt(_*_+b*b)/_;if(x<=i){const w=x*n/2-s-r;return 2*Math.max(p,w)}return p*2}createRenderOptions(){let t=Pc,n=Fc,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=ah),o=br(o),a=this.stroke_.getWidth(),a===void 0&&(a=ch),r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),n=this.stroke_.getLineJoin(),n===void 0&&(n=Fc),t=this.stroke_.getLineCap(),t===void 0&&(t=Pc),i=this.stroke_.getMiterLimit(),i===void 0&&(i=oh));const l=this.calculateLineJoinSize_(n,a,i),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:t,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=kn),n.fillStyle=br(r),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineCap=t.lineCap,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=np(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){const r=Cn(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let n=this.points_;const i=this.radius_;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,c=a%2===0?i:r;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=kn,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}}const mN=fx;class hx extends mN{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),n=new hx({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(t){this.radius_=t,this.render()}}const pN=hx;let _N=class yN{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=HC,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new yN({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(n){return n.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=HC,this.geometry_=t}setZIndex(t){this.zIndex_=t}};function RJ(e){let t;if(typeof e=="function")t=e;else{let n;Array.isArray(e)?n=e:(Ut(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[e]),t=function(){return n}}return t}let wy=null;function IJ(e,t){if(!wy){const n=new ax({color:"rgba(255,255,255,0.4)"}),i=new cx({color:"#3399CC",width:1.25});wy=[new _N({image:new pN({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return wy}function HC(e){return e.getGeometry()}const Na=_N,LJ="#333";let OJ=class vN{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Kn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new ax({color:LJ}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new vN({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Kn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}};const kJ=OJ,re={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class $J extends sr{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const n=Object.assign({},t);typeof t.properties=="object"&&(delete n.properties,Object.assign(n,t.properties)),n[re.OPACITY]=t.opacity!==void 0?t.opacity:1,Ut(typeof n[re.OPACITY]=="number","Layer opacity must be a number"),n[re.VISIBLE]=t.visible!==void 0?t.visible:!0,n[re.Z_INDEX]=t.zIndex,n[re.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[re.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[re.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[re.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=Ne(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(t){return At()}getLayerStatesArray(t){return At()}getExtent(){return this.get(re.EXTENT)}getMaxResolution(){return this.get(re.MAX_RESOLUTION)}getMinResolution(){return this.get(re.MIN_RESOLUTION)}getMinZoom(){return this.get(re.MIN_ZOOM)}getMaxZoom(){return this.get(re.MAX_ZOOM)}getOpacity(){return this.get(re.OPACITY)}getSourceState(){return At()}getVisible(){return this.get(re.VISIBLE)}getZIndex(){return this.get(re.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(re.EXTENT,t)}setMaxResolution(t){this.set(re.MAX_RESOLUTION,t)}setMinResolution(t){this.set(re.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(re.MAX_ZOOM,t)}setMinZoom(t){this.set(re.MIN_ZOOM,t)}setOpacity(t){Ut(typeof t=="number","Layer opacity must be a number"),this.set(re.OPACITY,t)}setVisible(t){this.set(re.VISIBLE,t)}setZIndex(t){this.set(re.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const bN=$J,$e={ANIMATING:0,INTERACTING:1},Ni={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},NJ=42,dx=256;function GC(e,t,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!t)return i;const l=t?0:s[0]*r,c=t?0:s[1]*r,u=a?a[0]:0,f=a?a[1]:0;let h=e[0]+l/2+u,d=e[2]-l/2+u,g=e[1]+c/2+f,m=e[3]-c/2+f;h>d&&(h=(d+h)/2,d=h),g>m&&(g=(m+g)/2,m=g);let p=Ne(i[0],h,d),_=Ne(i[1],g,m);if(o&&n&&r){const y=30*r;p+=-y*Math.log(1+Math.max(0,h-i[0])/y)+y*Math.log(1+Math.max(0,i[0]-d)/y),_+=-y*Math.log(1+Math.max(0,g-i[1])/y)+y*Math.log(1+Math.max(0,i[1]-m)/y)}return[p,_]}}function DJ(e){return e}function gx(e,t,n,i){const r=oe(t)/n[0],s=ei(t)/n[1];return i?Math.min(e,Math.max(r,s)):Math.min(e,Math.min(r,s))}function mx(e,t,n){let i=Math.min(e,t);const r=50;return i*=Math.log(1+r*Math.max(0,e/t-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/e-1))/r+1),Ne(i,n/2,t*2)}function PJ(e,t,n,i){return t=t!==void 0?t:!0,function(r,s,o,a){if(r!==void 0){const l=e[0],c=e[e.length-1],u=n?gx(l,n,o,i):l;if(a)return t?mx(r,u,c):Ne(r,c,u);const f=Math.min(u,r),h=Math.floor(Hw(e,f,s));return e[h]>u&&h<e.length-1?e[h+1]:e[h]}}}function FJ(e,t,n,i,r,s){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,c){if(o!==void 0){const u=r?gx(t,r,l,s):t;if(c)return i?mx(o,u,n):Ne(o,n,u);const f=1e-9,h=Math.ceil(Math.log(t/u)/Math.log(e)-f),d=-a*(.5-f)+.5,g=Math.min(u,o),m=Math.floor(Math.log(t/g)/Math.log(e)+d),p=Math.max(h,m),_=t/Math.pow(e,p);return Ne(_,n,u)}}}function BC(e,t,n,i,r){return n=n!==void 0?n:!0,function(s,o,a,l){if(s!==void 0){const c=i?gx(e,i,a,r):e;return!n||!l?Ne(s,t,c):mx(s,c,t)}}}function px(e){if(e!==void 0)return 0}function UC(e){if(e!==void 0)return e}function zJ(e){const t=2*Math.PI/e;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/t+.5)*t,n}}function WJ(e){return e=e||Bg(5),function(t,n){if(n)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}function wN(e){return Math.pow(e,3)}function gu(e){return 1-wN(1-e)}function VJ(e){return 3*e*e-2*e*e*e}function HJ(e){return e}const xy=0;class GJ extends sr{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Kw(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&zZ(),t.center&&(t.center=Jr(t.center,this.projection_)),t.extent&&(t.extent=us(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const n=Object.assign({},t);for(const a in Ni)delete n[a];this.setProperties(n,!0);const i=UJ(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const r=BJ(t),s=i.constraint,o=YJ(t);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let n=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const r=t||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),a=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Jr(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Jr(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)}animateInternal(t){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===n){i&&rg(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<n;++r){const u=arguments[r],f={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||VJ,callback:i};if(u.center&&(f.sourceCenter=o,f.targetCenter=u.center.slice(),o=f.targetCenter),u.zoom!==void 0?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(u.zoom),a=f.targetResolution):u.resolution&&(f.sourceResolution=a,f.targetResolution=u.resolution,a=f.targetResolution),u.rotation!==void 0){f.sourceRotation=l;const h=ka(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=l+h,l=f.targetRotation}jJ(f)?f.complete=!0:s+=f.duration,c.push(f)}this.animations_.push(c),this.setHint($e.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[$e.ANIMATING]>0}getInteracting(){return this.hints_[$e.INTERACTING]>0}cancelAnimations(){this.setHint($e.ANIMATING,-this.hints_[$e.ANIMATING]);let t;for(let n=0,i=this.animations_.length;n<i;++n){const r=this.animations_[n];if(r[0].callback&&rg(r[0].callback,!1),!t)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=t-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const f=l.easing(u);if(l.sourceCenter){const h=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const p=h+f*(g-h),_=d+f*(m-d);this.targetCenter_=[p,_]}if(l.sourceResolution&&l.targetResolution){const h=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(h,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const h=f===1?ka(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint($e.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&rg(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,n){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-n[0],r[1]-n[1]],Xw(i,t-this.getRotation()),kZ(i,n)),i}calculateCenterZoom(t,n){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=n[0]-t*(n[0]-r[0])/s,a=n[1]-t*(n[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(t){const n=this.viewportSize_;if(t){const i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Fv(t,this.getProjection())}getCenterInternal(){return this.get(Ni.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const n=this.calculateExtentInternal(t);return X$(n,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();Ut(n,"The view center is not defined");const i=this.getResolution();Ut(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Ut(r!==void 0,"The view rotation is not defined"),$v(n,i,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Ni.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,n){return this.getResolutionForExtentInternal(us(t,this.getProjection()),n)}getResolutionForExtentInternal(t,n){n=n||this.getViewportSizeMinusPadding_();const i=oe(t)/n[0],r=ei(t)/n[1];return Math.max(i,r)}getResolutionForValueFunction(t){t=t||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(t);return function(s){return n/Math.pow(t,s*r)}}getRotation(){return this.get(Ni.ROTATION)}getValueForResolutionFunction(t){const n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/n;return function(o){return Math.log(i/o)/n/s}}getViewportSizeMinusPadding_(t){let n=this.getViewportSize_(t);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const t=this.getProjection(),n=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=Ey(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t}getZoomForResolution(t){let n=this.minZoom_||0,i,r;if(this.resolutions_){const s=Hw(this.resolutions_,t,1);n=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=Ne(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Ne(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,n){let i;if(Ut(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Ut(!ul(t),"Cannot fit empty extent provided as `geometry`");const r=us(t,this.getProjection());i=Vv(r)}else if(t.getType()==="Circle"){const r=us(t.getExtent(),this.getProjection());i=Vv(r),i.rotate(this.getRotation(),Ja(r))}else i=t;this.fitInternal(i,n)}rotatedExtentForGeometry(t){const n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let f=0,h=s.length;f<h;f+=o){const d=s[f]*i-s[f+1]*r,g=s[f]*r+s[f+1]*i;a=Math.min(a,d),l=Math.min(l,g),c=Math.max(c,d),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(t,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const r=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),f=Math.cos(c),h=Ja(a);h[0]+=(r[1]-r[3])/2*l,h[1]+=(r[0]-r[2])/2*l;const d=h[0]*f-h[1]*u,g=h[1]*f+h[0]*u,m=this.getConstrainedCenter([d,g],l),p=n.callback?n.callback:kc;n.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:n.duration,easing:n.easing},p):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),rg(p,!0))}centerOn(t,n,i){this.centerOnInternal(Jr(t,this.getProjection()),n,i)}centerOnInternal(t,n,i){this.setCenterInternal(Ey(t,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,n,i,r){let s;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),l=Ey(t,r,[a[0]/2+o[3],a[1]/2+o[0]],n,i);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const n=Fv(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])}adjustCenterInternal(t){const n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])}adjustResolution(t,n){n=n&&Jr(n,this.getProjection()),this.adjustResolutionInternal(t,n)}adjustResolutionInternal(t,n){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,i);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)}adjustRotation(t,n){n&&(n=Jr(n,this.getProjection())),this.adjustRotationInternal(t,n)}adjustRotationInternal(t,n){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Jr(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,n){const i=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(Ni.ROTATION)!==r&&this.set(Ni.ROTATION,r),this.get(Ni.RESOLUTION)!==o&&(this.set(Ni.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Ni.CENTER)||!Km(this.get(Ni.CENTER),a))&&this.set(Ni.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,n,i){t=t!==void 0?t:200;const r=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Km(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:t,easing:gu,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint($e.INTERACTING,1)}endInteraction(t,n,i){i=i&&Jr(i,this.getProjection()),this.endInteractionInternal(t,n,i)}endInteractionInternal(t,n,i){this.getInteracting()&&(this.setHint($e.INTERACTING,-1),this.resolveConstraints(t,n,i))}getConstrainedCenter(t,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)}getConstrainedZoom(t,n){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(t,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)}}function rg(e,t){setTimeout(function(){e(t)},0)}function BJ(e){if(e.extent!==void 0){const n=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return GC(e.extent,e.constrainOnlyCenter,n)}const t=Kw(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,GC(n,!1,!1)}return DJ}function UJ(e){let t,n,i,o=e.minZoom!==void 0?e.minZoom:xy,a=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,c=e.multiWorld!==void 0?e.multiWorld:!1,u=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,f=e.showFullExtent!==void 0?e.showFullExtent:!1,h=Kw(e.projection,"EPSG:3857"),d=h.getExtent();let g=e.constrainOnlyCenter,m=e.extent;if(!c&&!m&&h.isGlobal()&&(g=!1,m=d),e.resolutions!==void 0){const p=e.resolutions;n=p[o],i=p[a]!==void 0?p[a]:p[p.length-1],e.constrainResolution?t=PJ(p,u,!g&&m,f):t=BC(n,i,u,!g&&m,f)}else{const _=(d?Math.max(oe(d),ei(d)):360*Nc.degrees/h.getMetersPerUnit())/dx/Math.pow(2,xy),y=_/Math.pow(2,28-xy);n=e.maxResolution,n!==void 0?o=0:n=_/Math.pow(l,o),i=e.minResolution,i===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?i=n/Math.pow(l,a):i=_/Math.pow(l,a):i=y),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),e.constrainResolution?t=FJ(l,n,i,u,!g&&m,f):t=BC(n,i,u,!g&&m,f)}return{constraint:t,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function YJ(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const n=e.constrainRotation;return n===void 0||n===!0?WJ():n===!1?UC:typeof n=="number"?zJ(n):UC}return px}function jJ(e){return!(e.sourceCenter&&e.targetCenter&&!Km(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function Ey(e,t,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=e[0]*s-e[1]*o,l=e[1]*s+e[0]*o;a+=(t[0]/2-n[0])*i,l+=(n[1]-t[1]/2)*i,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const mr=GJ;class XJ extends bN{constructor(t){const n=Object.assign({},t);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(re.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(re.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(le(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Ht(t,Lt.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let n;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof mr?n={viewState:t.getState(),extent:t.calculateExtent()}:n=t,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;n.layerStatesArray?r=n.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return _x(r,n.viewState)&&(!s||bn(s,n.extent))}getAttributions(t){if(!this.isVisible(t))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const r=t instanceof mr?t.getViewStateAndExtent():t;let s=n(r);return Array.isArray(s)||(s=[s]),s}render(t,n){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,n)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(re.MAP,t)}getMapInternal(){return this.get(re.MAP)}setMap(t){this.mapPrecomposeKey_&&(le(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(le(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Ht(t,Ar.PRECOMPOSE,function(n){const r=n.frameState.layerStatesArray,s=this.getLayerState(!1);Ut(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=Ht(this,Lt.CHANGE,t.render,t),this.changed())}setSource(t){this.set(re.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function _x(e,t){if(!e.visible)return!1;const n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;const i=t.zoom;return i>e.minZoom&&i<=e.maxZoom}const G0=XJ;function qJ(e,t,n,i,r){xN(e,t,n||0,i||e.length-1,r||KJ)}function xN(e,t,n,i,r){for(;i>n;){if(i-n>600){var s=i-n+1,o=t-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),u=Math.max(n,Math.floor(t-o*l/s+c)),f=Math.min(i,Math.floor(t+(s-o)*l/s+c));xN(e,t,u,f,r)}var h=e[t],d=n,g=i;for(Bu(e,n,t),r(e[i],h)>0&&Bu(e,n,i);d<g;){for(Bu(e,d,g),d++,g--;r(e[d],h)<0;)d++;for(;r(e[g],h)>0;)g--}r(e[n],h)===0?Bu(e,n,g):(g++,Bu(e,g,i)),g<=t&&(n=g+1),t<=g&&(i=g-1)}}function Bu(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function KJ(e,t){return e<t?-1:e>t?1:0}let yx=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const i=[];if(!og(t,n))return i;const r=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?r(a):a;og(t,l)&&(n.leaf?i.push(a):Sy(t,l)?this._all(a,i):s.push(a))}n=s.pop()}return i}collides(t){let n=this.data;if(!og(t,n))return!1;const i=[];for(;n;){for(let r=0;r<n.children.length;r++){const s=n.children[r],o=n.leaf?this.toBBox(s):s;if(og(t,o)){if(n.leaf||Sy(t,o))return!0;i.push(s)}}n=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Wl([]),this}remove(t,n){if(!t)return this;let i=this.data;const r=this.toBBox(t),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const u=ZJ(t,i.children,n);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&Sy(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const i=[];for(;t;)t.leaf?n.push(...t.children):i.push(...t.children),t=i.pop();return n}_build(t,n,i,r){const s=i-n+1;let o=this._maxEntries,a;if(s<=o)return a=Wl(t.slice(n,i+1)),Ml(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Wl([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));YC(t,n,i,c,this.compareMinX);for(let u=n;u<=i;u+=c){const f=Math.min(u+c-1,i);YC(t,u,f,l,this.compareMinY);for(let h=u;h<=f;h+=l){const d=Math.min(h+l-1,f);a.children.push(this._build(t,h,d,r-1))}}return Ml(a,this.toBBox),a}_chooseSubtree(t,n,i,r){for(;r.push(n),!(n.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=Ty(c),f=tQ(t,c)-u;f<o?(o=f,s=u<s?u:s,a=c):f===o&&u<s&&(s=u,a=c)}n=a||n.children[0]}return n}_insert(t,n,i){const r=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(t),yf(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)}_split(t,n){const i=t[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=Wl(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Ml(i,this.toBBox),Ml(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,n){this.data=Wl([t,n]),this.data.height=t.height+1,this.data.leaf=!1,Ml(this.data,this.toBBox)}_chooseSplitIndex(t,n,i){let r,s=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=_f(t,0,a,this.toBBox),c=_f(t,a,i,this.toBBox),u=eQ(l,c),f=Ty(l)+Ty(c);u<s?(s=u,r=a,o=f<o?f:o):u===s&&f<o&&(o=f,r=a)}return r||i-n}_chooseSplitAxis(t,n,i){const r=t.leaf?this.compareMinX:JJ,s=t.leaf?this.compareMinY:QJ,o=this._allDistMargin(t,n,i,r),a=this._allDistMargin(t,n,i,s);o<a&&t.children.sort(r)}_allDistMargin(t,n,i,r){t.children.sort(r);const s=this.toBBox,o=_f(t,0,n,s),a=_f(t,i-n,i,s);let l=sg(o)+sg(a);for(let c=n;c<i-n;c++){const u=t.children[c];yf(o,t.leaf?s(u):u),l+=sg(o)}for(let c=i-n-1;c>=n;c--){const u=t.children[c];yf(a,t.leaf?s(u):u),l+=sg(a)}return l}_adjustParentBBoxes(t,n,i){for(let r=i;r>=0;r--)yf(n[r],t)}_condense(t){for(let n=t.length-1,i;n>=0;n--)t[n].children.length===0?n>0?(i=t[n-1].children,i.splice(i.indexOf(t[n]),1)):this.clear():Ml(t[n],this.toBBox)}};function ZJ(e,t,n){if(!n)return t.indexOf(e);for(let i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function Ml(e,t){_f(e,0,e.children.length,t,e)}function _f(e,t,n,i,r){r||(r=Wl(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=t;s<n;s++){const o=e.children[s];yf(r,e.leaf?i(o):o)}return r}function yf(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function JJ(e,t){return e.minX-t.minX}function QJ(e,t){return e.minY-t.minY}function Ty(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function sg(e){return e.maxX-e.minX+(e.maxY-e.minY)}function tQ(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function eQ(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function Sy(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function og(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Wl(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function YC(e,t,n,i,r){const s=[t,n];for(;s.length;){if(n=s.pop(),t=s.pop(),n-t<=i)continue;const o=t+Math.ceil((n-t)/i/2)*i;qJ(e,o,t,n,r),s.push(t,o,o,n)}}class nQ extends jh{constructor(t,n,i,r){super(),this.extent=t,this.pixelRatio_=i,this.resolution=n,this.state=typeof r=="function"?Dt.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(Lt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Dt.IDLE&&this.loader){this.state=Dt.LOADING,this.changed();const t=this.getResolution(),n=Array.isArray(t)?t[0]:t;tZ(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Dt.LOADED}).catch(i=>{this.state=Dt.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function iQ(e,t,n){const i=e;let r=!0,s=!1,o=!1;const a=[Xm(i,Lt.LOAD,function(){o=!0,s||t()})];return i.src&&N$?(s=!0,i.decode().then(function(){r&&t()}).catch(function(l){r&&(o?t():n())})):a.push(Xm(i,Lt.ERROR,n)),function(){r=!1,a.forEach(le)}}function rQ(e,t){return new Promise((n,i)=>{function r(){o(),n(e)}function s(){o(),i(new Error("Image load error"))}function o(){e.removeEventListener("load",r),e.removeEventListener("error",s)}e.addEventListener("load",r),e.addEventListener("error",s),t&&(e.src=t)})}function sQ(e,t){return t&&(e.src=t),N$?new Promise((n,i)=>e.decode().then(()=>n(e),i)):rQ(e)}const oQ=nQ;class aQ{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const n in this.cache_){const i=this.cache_[n];!(t++&3)&&!i.hasListener()&&(delete this.cache_[n],--this.cacheSize_)}}}get(t,n,i){const r=jC(t,n,i);return r in this.cache_?this.cache_[r]:null}set(t,n,i,r){const s=jC(t,n,i);this.cache_[s]=r,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function jC(e,t,n){const i=n?cN(n):"null";return t+":"+e+":"+i}const ap=new aQ;let Uu=null;class lQ extends jh{constructor(t,n,i,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?Dt.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=n,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Dt.LOADED){Uu||(Uu=Cn(1,1,void 0,{willReadFrequently:!0})),Uu.drawImage(this.image_,0,0);try{Uu.getImageData(0,0,1,1),this.tainted_=!1}catch{Uu=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Lt.CHANGE)}handleImageError_(){this.imageState_=Dt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Dt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],n=this.size_[1],i=Cn(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Dt.IDLE){this.image_||this.initializeImage_(),this.imageState_=Dt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&sQ(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Dt.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*t),i.height=Math.ceil(n.height*t);const r=i.getContext("2d");r.scale(t,t),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=cN(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[t]=i}}function cQ(e,t,n,i,r){let s=t===void 0?void 0:ap.get(t,n,r);return s||(s=new lQ(e,e instanceof HTMLImageElement?e.src||void 0:t,n,i,r),ap.set(t,n,r,s)),s}function XC(e,t,n,i){return n!==void 0&&i!==void 0?[n/e,i/t]:n!==void 0?n/e:i!==void 0?i/t:1}class vx extends lN{constructor(t){t=t||{};const n=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:n,rotation:i,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Ut(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Jt(o)),Ut(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Ut(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=Dt.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?Dt.LOADED:Dt.IDLE:l=Dt.LOADING:l=Dt.LOADED),this.color_=t.color!==void 0?np(t.color):null,this.iconImage_=cQ(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let c,u;if(t.size)[c,u]=t.size;else{const f=this.getImage(1);if(f.width&&f.height)c=f.width,u=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=t;const h=()=>{if(this.unlistenImageChange(h),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(XC(d[0],d[1],t.width,t.height))};this.listenImageChange(h);return}}c!==void 0&&this.setScale(XC(c,u,t.width,t.height))}}clone(){let t,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new vx({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]-n[0]/i[0],t[1]+n[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Dt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Dt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(Lt.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(Lt.CHANGE,t)}}const lp=vx;let mu=0;const nn=1<<mu++,zt=1<<mu++,zc=1<<mu++,bx=1<<mu++,Jh=1<<mu++,Di=Math.pow(2,mu)-1,EN={[nn]:"boolean",[zt]:"number",[zc]:"string",[bx]:"color",[Jh]:"number[]"},uQ=Object.keys(EN).map(Number).sort(Co);function cp(e){const t=[];for(const n of uQ)fQ(e,n)&&t.push(EN[n]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function fQ(e,t){return(e&t)===t}function TN(e,t){return!!(e&t)}class po{constructor(t,n){this.type=t,this.value=n}}class hQ{constructor(t,n,...i){this.type=t,this.operator=n,this.args=i}}function SN(){return{variables:new Set,properties:new Set}}function B0(e,t){switch(typeof e){case"boolean":return new po(nn,e);case"number":return new po(zt,e);case"string":return new po(zc,e)}if(!Array.isArray(e))throw new Error("Expression must be an array or a primitive value");if(e.length===0)throw new Error("Empty expression");if(typeof e[0]=="string")return _Q(e,t);for(const i of e)if(typeof i!="number")throw new Error("Expected an array of numbers");let n=Jh;return(e.length===3||e.length===4)&&(n|=bx),new po(n,e)}const st={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},dQ={[st.Number]:ne(ae(1,1/0,Di),zt),[st.String]:ne(ae(1,1/0,Di),zc),[st.Get]:ne(gQ,Di),[st.Var]:ne(mQ,Di),[st.Resolution]:ne(pQ,zt),[st.Any]:ne(ae(2,1/0,nn),nn),[st.All]:ne(ae(2,1/0,nn),nn),[st.Not]:ne(ae(1,1,nn),nn),[st.Equal]:ne(ae(2,2,Di),nn),[st.NotEqual]:ne(ae(2,2,Di),nn),[st.GreaterThan]:ne(ae(2,2,Di),nn),[st.GreaterThanOrEqualTo]:ne(ae(2,2,Di),nn),[st.LessThan]:ne(ae(2,2,Di),nn),[st.LessThanOrEqualTo]:ne(ae(2,2,Di),nn),[st.Multiply]:ne(ae(2,1/0,zt),zt),[st.Divide]:ne(ae(2,2,zt),zt),[st.Add]:ne(ae(2,1/0,zt),zt),[st.Subtract]:ne(ae(2,2,zt),zt),[st.Clamp]:ne(ae(3,3,zt),zt),[st.Mod]:ne(ae(2,2,zt),zt),[st.Pow]:ne(ae(2,2,zt),zt),[st.Abs]:ne(ae(1,1,zt),zt),[st.Floor]:ne(ae(1,1,zt),zt),[st.Ceil]:ne(ae(1,1,zt),zt),[st.Round]:ne(ae(1,1,zt),zt),[st.Sin]:ne(ae(1,1,zt),zt),[st.Cos]:ne(ae(1,1,zt),zt),[st.Atan]:ne(ae(1,2,zt),zt),[st.Sqrt]:ne(ae(1,1,zt),zt),[st.Match]:ne(ae(4,1/0,zc|zt),Di)};function gQ(e,t){if(e.length!==2)throw new Error("Expected 1 argument for get operation");const n=B0(e[1],t);if(!(n instanceof po))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.properties.add(n.value),[n]}function mQ(e,t){if(e.length!==2)throw new Error("Expected 1 argument for var operation");const n=B0(e[1],t);if(!(n instanceof po))throw new Error("Expected a literal argument for var operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.variables.add(n.value),[n]}function pQ(e,t){const n=e[0];if(e.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function ae(e,t,n){return function(i,r){const s=i[0],o=i.length-1;if(e===t){if(o!==e){const l=e===1?"":"s";throw new Error(`Expected ${e} argument${l} for operation ${s}, got ${o}`)}}else if(o<e||o>t)throw new Error(`Expected ${e} to ${t} arguments for operation ${s}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const c=B0(i[l+1],r);if(!TN(n,c.type)){const u=cp(n),f=cp(c.type);throw new Error(`Unexpected type for argument ${l} of ${s} operation : got ${u} but expected ${f}`)}a[l]=c}return a}}function ne(e,t){return function(n,i){const r=n[0],s=e(n,i);return new hQ(t,r,...s)}}function _Q(e,t){const n=e[0],i=dQ[n];if(!i)throw new Error(`Unknown operator: ${n}`);return i(e,t)}function CN(){return{variables:{},properties:{},resolution:NaN}}function Ho(e,t,n){const i=B0(e,n);if(!TN(t,i.type)){const r=cp(t),s=cp(i.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return Qa(i)}function Qa(e,t){if(e instanceof po)return function(){return e.value};const n=e.operator;switch(n){case st.Number:case st.String:return yQ(e);case st.Get:case st.Var:return vQ(e);case st.Resolution:return i=>i.resolution;case st.Any:case st.All:case st.Not:return wQ(e);case st.Equal:case st.NotEqual:case st.LessThan:case st.LessThanOrEqualTo:case st.GreaterThan:case st.GreaterThanOrEqualTo:return bQ(e);case st.Multiply:case st.Divide:case st.Add:case st.Subtract:case st.Clamp:case st.Mod:case st.Pow:case st.Abs:case st.Floor:case st.Ceil:case st.Round:case st.Sin:case st.Cos:case st.Atan:case st.Sqrt:return xQ(e);case st.Match:return EQ(e);default:throw new Error(`Unsupported operator ${n}`)}}function yQ(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Qa(e.args[s]);switch(n){case st.Number:case st.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function vQ(e,t){const n=e.args[0];if(!(n instanceof po))throw new Error("Expected literal name");const i=n.value;if(typeof i!="string")throw new Error("Expected string name");switch(e.operator){case st.Get:return r=>r.properties[i];case st.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function bQ(e,t){const n=e.operator,i=Qa(e.args[0]),r=Qa(e.args[1]);switch(n){case st.Equal:return s=>i(s)===r(s);case st.NotEqual:return s=>i(s)!==r(s);case st.LessThan:return s=>i(s)<r(s);case st.LessThanOrEqualTo:return s=>i(s)<=r(s);case st.GreaterThan:return s=>i(s)>r(s);case st.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function wQ(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Qa(e.args[s]);switch(n){case st.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case st.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case st.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function xQ(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Qa(e.args[s]);switch(n){case st.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case st.Divide:return s=>r[0](s)/r[1](s);case st.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case st.Subtract:return s=>r[0](s)-r[1](s);case st.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case st.Mod:return s=>r[0](s)%r[1](s);case st.Pow:return s=>Math.pow(r[0](s),r[1](s));case st.Abs:return s=>Math.abs(r[0](s));case st.Floor:return s=>Math.floor(r[0](s));case st.Ceil:return s=>Math.ceil(r[0](s));case st.Round:return s=>Math.round(r[0](s));case st.Sin:return s=>Math.sin(r[0](s));case st.Cos:return s=>Math.cos(r[0](s));case st.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case st.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function EQ(e,t){const n=e.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Qa(e.args[r]);return r=>{const s=i[0](r);for(let o=1;o<n;o+=2)if(s===i[o](r))return i[o+1](r);return i[n-1](r)}}function TQ(e){return!0}function SQ(e){const t=SN(),n=CQ(e,t),i=CN();return function(r,s){return i.properties=r.getPropertiesInternal(),i.resolution=s,n(i)}}function qC(e){const t=SN(),n=e.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Uv(e[o],t);const r=CN(),s=new Array(n);return function(o,a){r.properties=o.getPropertiesInternal(),r.resolution=a;for(let l=0;l<n;++l)s[l]=i[l](r);return s}}function CQ(e,t){const n=e.length,i=new Array(n);for(let r=0;r<n;++r){const s=e[r],o="filter"in s?Ho(s.filter,nn,t):TQ;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Uv(s.style[c],t)}else a=[Uv(s.style,t)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(r)&&!(e[a].else&&o)){o=!0;for(const c of i[a].styles){const u=c(r);u&&s.push(u)}}}return s}}function Uv(e,t){const n=uh(e,"",t),i=fh(e,"",t),r=AQ(e,t),s=MQ(e,t),o=$n(e,"z-index",t),a=new Na;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(i){const u=i(l);u&&(c=!1),a.setStroke(u)}if(r){const u=r(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function uh(e,t,n){const i=AN(e,t+"fill-color",n);if(!i)return null;const r=new ax;return function(s){const o=i(s);return o==="none"?null:(r.setColor(o),r)}}function fh(e,t,n){const i=$n(e,t+"stroke-width",n),r=AN(e,t+"stroke-color",n);if(!i&&!r)return null;const s=oo(e,t+"stroke-line-cap",n),o=oo(e,t+"stroke-line-join",n),a=MN(e,t+"stroke-line-dash",n),l=$n(e,t+"stroke-line-dash-offset",n),c=$n(e,t+"stroke-miter-limit",n),u=new cx;return function(f){if(r){const h=r(f);if(h==="none")return null;u.setColor(h)}if(i&&u.setWidth(i(f)),s){const h=s(f);if(h!=="butt"&&h!=="round"&&h!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(h)}if(o){const h=o(f);if(h!=="bevel"&&h!=="round"&&h!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(h)}return a&&u.setLineDash(a(f)),l&&u.setLineDashOffset(l(f)),c&&u.setMiterLimit(c(f)),u}}function AQ(e,t){const n="text-",i=oo(e,n+"value",t);if(!i)return null;const r=uh(e,n,t),s=uh(e,n+"background-",t),o=fh(e,n,t),a=fh(e,n+"background-",t),l=oo(e,n+"font",t),c=$n(e,n+"max-angle",t),u=$n(e,n+"offset-x",t),f=$n(e,n+"offset-y",t),h=hh(e,n+"overflow",t),d=oo(e,n+"placement",t),g=$n(e,n+"repeat",t),m=U0(e,n+"scale",t),p=hh(e,n+"rotate-with-view",t),_=$n(e,n+"rotation",t),y=oo(e,n+"align",t),b=oo(e,n+"justify",t),v=oo(e,n+"baseline",t),x=MN(e,n+"padding",t),w=new kJ({});return function(E){if(w.setText(i(E)),r&&w.setFill(r(E)),s&&w.setBackgroundFill(s(E)),o&&w.setStroke(o(E)),a&&w.setBackgroundStroke(a(E)),l&&w.setFont(l(E)),c&&w.setMaxAngle(c(E)),u&&w.setOffsetX(u(E)),f&&w.setOffsetY(f(E)),h&&w.setOverflow(h(E)),d){const T=d(E);if(T!=="point"&&T!=="line")throw new Error("Expected point or line for text-placement");w.setPlacement(T)}if(g&&w.setRepeat(g(E)),m&&w.setScale(m(E)),p&&w.setRotateWithView(p(E)),_&&w.setRotation(_(E)),y){const T=y(E);if(T!=="left"&&T!=="center"&&T!=="right"&&T!=="end"&&T!=="start")throw new Error("Expected left, right, center, start, or end for text-align");w.setTextAlign(T)}if(b){const T=b(E);if(T!=="left"&&T!=="right"&&T!=="center")throw new Error("Expected left, right, or center for text-justify");w.setJustify(T)}if(v){const T=v(E);if(T!=="bottom"&&T!=="top"&&T!=="middle"&&T!=="alphabetic"&&T!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");w.setTextBaseline(T)}return x&&w.setPadding(x(E)),w}}function MQ(e,t){return"icon-src"in e?RQ(e,t):"shape-points"in e?IQ(e,t):"circle-radius"in e?LQ(e,t):null}function RQ(e,t){const n="icon-",i=n+"src",r=RN(e[i],i),s=up(e,n+"anchor",t),o=U0(e,n+"scale",t),a=$n(e,n+"opacity",t),l=up(e,n+"displacement",t),c=$n(e,n+"rotation",t),u=hh(e,n+"rotate-with-view",t),f=KC(e,n+"anchor-origin"),h=ZC(e,n+"anchor-x-units"),d=ZC(e,n+"anchor-y-units"),g=NQ(e,n+"color"),m=kQ(e,n+"cross-origin"),p=$Q(e,n+"offset"),_=KC(e,n+"offset-origin"),y=ql(e,n+"width"),b=ql(e,n+"height"),v=OQ(e,n+"size"),x=wx(e,n+"declutter"),w=new lp({src:r,anchorOrigin:f,anchorXUnits:h,anchorYUnits:d,color:g,crossOrigin:m,offset:p,offsetOrigin:_,height:b,width:y,size:v,declutterMode:x});return function(E){return a&&w.setOpacity(a(E)),l&&w.setDisplacement(l(E)),c&&w.setRotation(c(E)),u&&w.setRotateWithView(u(E)),o&&w.setScale(o(E)),s&&w.setAnchor(s(E)),w}}function IQ(e,t){const n="shape-",i=n+"points",r=IN(e[i],i),s=uh(e,n,t),o=fh(e,n,t),a=U0(e,n+"scale",t),l=up(e,n+"displacement",t),c=$n(e,n+"rotation",t),u=hh(e,n+"rotate-with-view",t),f=ql(e,n+"radius"),h=ql(e,n+"radius1"),d=ql(e,n+"radius2"),g=ql(e,n+"angle"),m=wx(e,n+"declutter-mode"),p=new mN({points:r,radius:f,radius1:h,radius2:d,angle:g,declutterMode:m});return function(_){return s&&p.setFill(s(_)),o&&p.setStroke(o(_)),l&&p.setDisplacement(l(_)),c&&p.setRotation(c(_)),u&&p.setRotateWithView(u(_)),a&&p.setScale(a(_)),p}}function LQ(e,t){const n="circle-",i=uh(e,n,t),r=fh(e,n,t),s=$n(e,n+"radius",t),o=U0(e,n+"scale",t),a=up(e,n+"displacement",t),l=$n(e,n+"rotation",t),c=hh(e,n+"rotate-with-view",t),u=wx(e,n+"declutter-mode"),f=new pN({radius:5,declutterMode:u});return function(h){return s&&f.setRadius(s(h)),i&&f.setFill(i(h)),r&&f.setStroke(r(h)),a&&f.setDisplacement(a(h)),l&&f.setRotation(l(h)),c&&f.setRotateWithView(c(h)),o&&f.setScale(o(h)),f}}function $n(e,t,n){if(!(t in e))return;const i=Ho(e[t],zt,n);return function(r){return IN(i(r),t)}}function oo(e,t,n){if(!(t in e))return null;const i=Ho(e[t],zc,n);return function(r){return RN(i(r),t)}}function hh(e,t,n){if(!(t in e))return null;const i=Ho(e[t],nn,n);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function AN(e,t,n){if(!(t in e))return null;const i=Ho(e[t],bx|zc,n);return function(r){return LN(i(r),t)}}function MN(e,t,n){if(!(t in e))return null;const i=Ho(e[t],Jh,n);return function(r){return Qh(i(r),t)}}function up(e,t,n){if(!(t in e))return null;const i=Ho(e[t],Jh,n);return function(r){const s=Qh(i(r),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function U0(e,t,n){if(!(t in e))return null;const i=Ho(e[t],Jh|zt,n);return function(r){return DQ(i(r),t)}}function ql(e,t){const n=e[t];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}}function OQ(e,t){const n=e[t];if(n!==void 0){if(typeof n=="number")return Kn(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${t}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return n}}function kQ(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}}function KC(e,t){const n=e[t];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function ZC(e,t){const n=e[t];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return n}}function $Q(e,t){const n=e[t];if(n!==void 0)return Qh(n,t)}function wx(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function NQ(e,t){const n=e[t];if(n!==void 0)return LN(n,t)}function Qh(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const n=e.length;for(let i=0;i<n;++i)if(typeof e[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function RN(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function IN(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function LN(e,t){if(typeof e=="string")return e;const n=Qh(e,t),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return n}function DQ(e,t){if(typeof e=="number")return e;const n=Qh(e,t);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return n}const JC={RENDER_ORDER:"renderOrder"};class PQ extends G0{constructor(t){t=t||{};const n=Object.assign({},t);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(JC.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new yx(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(JC.RENDER_ORDER,t)}setStyle(t){this.style_=FQ(t),this.styleFunction_=t===null?void 0:RJ(this.style_),this.changed()}}function FQ(e){if(e===void 0)return IJ;if(!e)return null;if(typeof e=="function"||e instanceof Na)return e;if(!Array.isArray(e))return qC([e]);if(e.length===0)return[];const t=e.length,n=e[0];if(n instanceof Na){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!(o instanceof Na))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in n){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return SQ(r)}return qC(e)}const zQ=PQ,td={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ag=[td.FILL],_o=[td.STROKE],ya=[td.BEGIN_PATH],QC=[td.CLOSE_PATH],xt=td;class WQ{drawCustom(t,n,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,n){}drawFeature(t,n){}drawGeometryCollection(t,n){}drawLineString(t,n){}drawMultiLineString(t,n){}drawMultiPoint(t,n){}drawMultiPolygon(t,n){}drawPoint(t,n){}drawPolygon(t,n){}drawText(t,n){}setFillStrokeStyle(t,n){}setImageStyle(t,n){}setTextStyle(t,n){}}const ON=WQ;class VQ extends ON{constructor(t,n,i,r){super(),this.tolerance=t,this.maxExtent=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})}appendFlatPointCoordinates(t,n){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=t.length;a<l;a+=n)r[0]=t[a],r[1]=t[a+1],Xh(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(t,n,i,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=r);let u=t[n],f=t[n+1];const h=this.tmpCoordinate_;let d=!0,g,m,p;for(g=n+r;g<i;g+=r)h[0]=t[g],h[1]=t[g+1],p=Ov(c,h),p!==m?(d&&(a[l++]=u,a[l++]=f,d=!1),a[l++]=h[0],a[l++]=h[1]):p===Ye.INTERSECTING?(a[l++]=h[0],a[l++]=h[1],d=!1):d=!0,u=h[0],f=h[1],m=p;return(s&&d||g===n+r)&&(a[l++]=u,a[l++]=f),l}drawCustomCoordinates_(t,n,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(t,n,l,r,!1,!1);s.push(c),n=l}return n}drawCustom(t,n,i,r){this.beginGeometry(t,n);const s=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,c,u,f,h;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),f=[];const d=t.getEndss();h=0;for(let g=0,m=d.length;g<m;++g){const p=[];h=this.drawCustomCoordinates_(l,h,d[g],o,p),f.push(p)}this.instructions.push([xt.CUSTOM,a,f,t,i,zv]),this.hitDetectionInstructions.push([xt.CUSTOM,a,f,t,r||i,zv]);break;case"Polygon":case"MultiLineString":u=[],l=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(l,0,t.getEnds(),o,u),this.instructions.push([xt.CUSTOM,a,u,t,i,sh]),this.hitDetectionInstructions.push([xt.CUSTOM,a,u,t,r||i,sh]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([xt.CUSTOM,a,c,t,i,mo]),this.hitDetectionInstructions.push([xt.CUSTOM,a,c,t,r||i,mo]);break;case"MultiPoint":l=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([xt.CUSTOM,a,c,t,i,mo]),this.hitDetectionInstructions.push([xt.CUSTOM,a,c,t,r||i,mo]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([xt.CUSTOM,a,c,t,i]),this.hitDetectionInstructions.push([xt.CUSTOM,a,c,t,r||i]);break}this.endGeometry(n)}beginGeometry(t,n){this.beginGeometryInstruction1_=[xt.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[xt.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let n;const i=t.length;let r,s,o=-1;for(n=0;n<i;++n)r=t[n],s=r[0],s==xt.END_GEOMETRY?o=n:s==xt.BEGIN_GEOMETRY&&(r[2]=n,ZK(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(t,n){const i=this.state;if(t){const r=t.getColor();i.fillStyle=br(r||kn)}else i.fillStyle=void 0;if(n){const r=n.getColor();i.strokeStyle=br(r||ah);const s=n.getLineCap();i.lineCap=s!==void 0?s:Pc;const o=n.getLineDash();i.lineDash=o?o.slice():gs;const a=n.getLineDashOffset();i.lineDashOffset=a||ms;const l=n.getLineJoin();i.lineJoin=l!==void 0?l:Fc;const c=n.getWidth();i.lineWidth=c!==void 0?c:ch;const u=n.getMiterLimit();i.miterLimit=u!==void 0?u:oh,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const n=t.fillStyle,i=[xt.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[xt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,n){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,n){const i=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||s!=t.currentLineDash&&!Vo(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[xt.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=P$(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Yw(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const ed=VQ;class HQ extends ed{constructor(t,n,i,r){super(t,n,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([xt.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([xt.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([xt.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([xt.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,n){const i=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}}const GQ=HQ;class BQ extends ed{constructor(t,n,i,r){super(t,n,i,r)}drawFlatCoordinates_(t,n,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),a=[xt.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,gs,ms],ya);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(_o),this.endGeometry(n)}drawMultiLineString(t,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,gs,ms],ya);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,f=o.length;u<f;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(_o),this.endGeometry(n)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(_o),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(_o),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(ya)}}const UQ=BQ;class YQ extends ed{constructor(t,n,i,r){super(t,n,i,r)}drawFlatCoordinatess_(t,n,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(ya),this.hitDetectionInstructions.push(ya);for(let c=0;c<l;++c){const u=i[c],f=this.coordinates.length,h=this.appendFlatLineCoordinates(t,n,u,r,!0,!a),d=[xt.MOVE_TO_LINE_TO,f,h];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(QC),this.hitDetectionInstructions.push(QC)),n=u}return o&&(this.instructions.push(ag),this.hitDetectionInstructions.push(ag)),a&&(this.instructions.push(_o),this.hitDetectionInstructions.push(_o)),n}drawCircle(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_FILL_STYLE,kn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,gs,ms]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[xt.CIRCLE,l];this.instructions.push(ya,c),this.hitDetectionInstructions.push(ya,c),i.fillStyle!==void 0&&(this.instructions.push(ag),this.hitDetectionInstructions.push(ag)),i.strokeStyle!==void 0&&(this.instructions.push(_o),this.hitDetectionInstructions.push(_o)),this.endGeometry(n)}drawPolygon(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_FILL_STYLE,kn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,gs,ms]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(n)}drawMultiPolygon(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_FILL_STYLE,kn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([xt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,gs,ms]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,f=o.length;u<f;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const n=this.coordinates;for(let i=0,r=n.length;i<r;++i)n[i]=sa(n[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const tA=YQ;function jQ(e,t,n,i,r){const s=[];let o=n,a=0,l=t.slice(n,2);for(;a<e&&o+r<i;){const[c,u]=l.slice(-2),f=t[o+r],h=t[o+r+1],d=Math.sqrt((f-c)*(f-c)+(h-u)*(h-u));if(a+=d,a>=e){const g=(e-a+d)/d,m=jn(c,f,g),p=jn(u,h,g);l.push(m,p),s.push(l),l=[m,p],a==e&&(o+=r),a=0}else if(a<e)l.push(t[o+r],t[o+r+1]),o+=r;else{const g=d-a,m=jn(c,f,g/d),p=jn(u,h,g/d);l.push(m,p),s.push(l),l=[m,p],a=0,o+=r}}return a>0&&s.push(l),s}function XQ(e,t,n,i,r){let s=n,o=n,a=0,l=0,c=n,u,f,h,d,g,m,p,_,y,b;for(f=n;f<i;f+=r){const v=t[f],x=t[f+1];g!==void 0&&(y=v-g,b=x-m,d=Math.sqrt(y*y+b*b),p!==void 0&&(l+=h,u=Math.acos((p*y+_*b)/(h*d)),u>e&&(l>a&&(a=l,s=c,o=f),l=0,c=f-r)),h=d,p=y,_=b),g=v,m=x}return l+=d,l>a?[c,f]:[s,o]}const fp={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class qQ extends ed{constructor(t,n,i,r){super(t,n,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[kn]={fillStyle:kn},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,n){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=t.getType();let c=null,u=t.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!bn(this.getBufferedMaxExtent(),t.getExtent()))return;let f;if(c=t.getFlatCoordinates(),l=="LineString")f=[c.length];else if(l=="MultiLineString")f=t.getEnds();else if(l=="Polygon")f=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=t.getEndss();f=[];for(let p=0,_=m.length;p<_;++p)f.push(m[p][0])}this.beginGeometry(t,n);const h=s.repeat,d=h?void 0:s.textAlign;let g=0;for(let m=0,p=f.length;m<p;++m){let _;h?_=jQ(h*this.resolution,c,g,f[m],u):_=[c.slice(g,f[m])];for(let y=0,b=_.length;y<b;++y){const v=_[y];let x=0,w=v.length;if(d==null){const T=XQ(s.maxAngle,v,0,v.length,2);x=T[0],w=T[1]}for(let T=x;T<w;T+=u)o.push(v[T],v[T+1]);const E=o.length;g=f[m],this.drawChars_(a,E),a=E}}this.endGeometry(n)}else{let f=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),u=2;break;case"Polygon":c=t.getFlatInteriorPoint(),s.overflow||f.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const _=t.getFlatInteriorPoints();c=[];for(let y=0,b=_.length;y<b;y+=3)s.overflow||f.push(_[y+2]/this.resolution),c.push(_[y],_[y+1]);if(c.length===0)return;u=2;break}const h=this.appendFlatPointCoordinates(c,u);if(h===a)return;if(f&&(h-a)/2!==c.length/u){let _=a/2;f=f.filter((y,b)=>{const v=o[(_+b)*2]===c[b*u]&&o[(_+b)*2+1]===c[b*u+1];return v||--_,v})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);let d=s.padding;if(d!=_a&&(s.scale[0]<0||s.scale[1]<0)){let _=s.padding[0],y=s.padding[1],b=s.padding[2],v=s.padding[3];s.scale[0]<0&&(y=-y,v=-v),s.scale[1]<0&&(_=-_,b=-b),d=[_,y,b,v]}const g=this.pixelRatio;this.instructions.push([xt.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,d==_a?_a:d.map(function(_){return _*g}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const m=1/g,p=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=kn,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([xt.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,d,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?kn:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),s.backgroundFill&&(this.state.fillStyle=p,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||lh,justify:n.justify,textBaseline:n.textBaseline||sp,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,n){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=fp[r.textBaseline],u=this.textOffsetY_*l,f=this.text_,h=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([xt.DRAW_CHARS,t,n,c,r.overflow,a,r.maxAngle,l,u,s,h*l,f,o,1]),this.hitDetectionInstructions.push([xt.DRAW_CHARS,t,n,c,r.overflow,a&&kn,r.maxAngle,l,u,s,h*l,f,o,1/l])}setTextStyle(t,n){let i,r,s;if(!t)this.text_="";else{const o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=br(o.getColor()||kn)):(r=null,this.textFillState_=r);const a=t.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=a.getLineDash(),m=a.getLineDashOffset(),p=a.getWidth(),_=a.getMiterLimit();s.lineCap=a.getLineCap()||Pc,s.lineDash=g?g.slice():gs,s.lineDashOffset=m===void 0?ms:m,s.lineJoin=a.getLineJoin()||Fc,s.lineWidth=p===void 0?ch:p,s.miterLimit=_===void 0?oh:_,s.strokeStyle=br(a.getColor()||ah)}i=this.textState_;const l=t.getFont()||dN;TJ(l);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||sp,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||_a,i.scale=c===void 0?[1,1]:c;const u=t.getOffsetX(),f=t.getOffsetY(),h=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=h===void 0?!1:h,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Jt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+Jt(r.fillStyle):""}this.declutterImageWithText_=n}}const KQ={Circle:tA,Default:ed,Image:GQ,LineString:UQ,Polygon:tA,Text:qQ};class ZQ{constructor(t,n,i,r){this.tolerance_=t,this.maxExtent_=n,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const n in this.buildersByZIndex_){t[n]=t[n]||{};const i=this.buildersByZIndex_[n];for(const r in i){const s=i[r].finish();t[n][r]=s}}return t}getBuilder(t,n){const i=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[n];if(s===void 0){const o=KQ[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[n]=s}return s}}const eA=ZQ;class JQ extends O${constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return At()}getData(t){return null}prepareFrame(t){return At()}renderFrame(t,n){return At()}loadedTileCallback(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i}createLoadedTileFinder(t,n,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,s,o)}}forEachFeatureAtCoordinate(t,n,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const n=t.target;(n.getState()===Dt.LOADED||n.getState()===Dt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let n=t.getState();return n!=Dt.LOADED&&n!=Dt.ERROR&&t.addEventListener(Lt.CHANGE,this.boundHandleImageChange_),n==Dt.IDLE&&(t.load(),n=t.getState()),n==Dt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const QQ=JQ;class ttt extends Os{constructor(t,n,i,r){super(t),this.inversePixelTransform=n,this.frameState=i,this.context=r}}const kN=ttt,nA=[];let Vl=null;function ett(){Vl=Cn(1,1,void 0,{willReadFrequently:!0})}class ntt extends QQ{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=qi(),this.pixelTransform=qi(),this.inversePixelTransform=qi(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,n,i){Vl||ett(),Vl.clearRect(0,0,1,1);let r;try{Vl.drawImage(t,n,i,1,1,0,0,1,1),r=Vl.getImageData(0,0,1,1).data}catch{return Vl=null,null}return r}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,n,i){const r=this.getLayer().getClassName();let s,o;if(t&&t.className===r&&(!i||t&&t.style.backgroundColor&&Vo(np(t.style.backgroundColor),np(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Cn();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,n,i){const r=cl(i),s=F0(i),o=P0(i),a=D0(i);Ie(n.coordinateToPixelTransform,r),Ie(n.coordinateToPixelTransform,s),Ie(n.coordinateToPixelTransform,o),Ie(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ie(l,r),Ie(l,s),Ie(l,o),Ie(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,n,i){const r=this.getLayer();if(r.hasListener(t)){const s=new kN(t,this.inversePixelTransform,i,n);r.dispatchEvent(s)}}preRender(t,n){this.frameState=n,this.dispatchRenderEvent_(Ar.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(Ar.POSTRENDER,t,n)}getRenderTransform(t,n,i,r,s,o,a){const l=s/2,c=o/2,u=r/n,f=-u,h=-t[0]+a,d=-t[1];return nr(this.tempTransform,l,c,u,f,-i,h,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const xx=ntt;function itt(e,t,n,i,r,s,o,a,l,c,u,f){let h=e[t],d=e[t+1],g=0,m=0,p=0,_=0;function y(){g=h,m=d,t+=i,h=e[t],d=e[t+1],_+=p,p=Math.sqrt((h-g)*(h-g)+(d-m)*(d-m))}do y();while(t<n-i&&_+p<s);let b=p===0?0:(s-_)/p;const v=jn(g,h,b),x=jn(m,d,b),w=t-i,E=_,T=s+a*l(c,r,u);for(;t<n-i&&_+p<T;)y();b=p===0?0:(T-_)/p;const I=jn(g,h,b),S=jn(m,d,b);let A;if(f){const N=[v,x,I,S];q$(N,0,4,2,f,N,N),A=N[0]>N[2]}else A=v>I;const R=Math.PI,k=[],$=w+i===t;t=w,p=0,_=E,h=e[t],d=e[t+1];let L;if($){y(),L=Math.atan2(d-m,h-g),A&&(L+=L>0?-R:R);const N=(I+v)/2,D=(S+x)/2;return k[0]=[N,D,(T-s)/2,L,r],k}r=r.replace(/\n/g," ");for(let N=0,D=r.length;N<D;){y();let V=Math.atan2(d-m,h-g);if(A&&(V+=V>0?-R:R),L!==void 0){let nt=V-L;if(nt+=nt>R?-2*R:nt<-R?2*R:0,Math.abs(nt)>o)return null}L=V;const Y=N;let B=0;for(;N<D;++N){const nt=A?D-N-1:N,rt=a*l(c,r[nt],u);if(t+i<n&&_+p<s+B+rt/2)break;B+=rt}if(N===Y)continue;const q=A?r.substring(D-Y,D-N):r.substring(Y,N);b=p===0?0:(s+B/2-_)/p;const z=jn(g,h,b),Q=jn(m,d,b);k.push([z,Q,B/2,V,q]),s+=B}return k}const Rl=Ci(),Xs=[],jr=[],Xr=[],qs=[];function iA(e){return e[3].declutterBox}const rA=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Cy(e,t){return t==="start"?t=rA.test(e)?"right":"left":t==="end"&&(t=rA.test(e)?"left":"right"),fp[t]}function rtt(e,t,n){return n>0&&e.push(`
`,""),e.push(t,""),e}class stt{constructor(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=qi(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(t,n,i,r){const s=t+n+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],f=Array.isArray(t),h=l.justify?fp[l.justify]:Cy(Array.isArray(t)?t[0]:t,l.textAlign||lh),d=r&&o.lineWidth?o.lineWidth:0,g=f?t:t.split(`
`).reduce(rtt,[]),{width:m,height:p,widths:_,heights:y,lineWidths:b}=CJ(l,g),v=m+d,x=[],w=(v+2)*u[0],E=(p+d)*u[1],T={width:w<0?Math.floor(w):Math.ceil(w),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:x};(u[0]!=1||u[1]!=1)&&x.push("scale",u),r&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",d),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)),i&&x.push("fillStyle",a.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const I=.5-h;let S=h*v+I*d;const A=[],R=[];let k=0,$=0,L=0,N=0,D;for(let V=0,Y=g.length;V<Y;V+=2){const B=g[V];if(B===`
`){$+=k,k=0,S=h*v+I*d,++N;continue}const q=g[V+1]||l.font;q!==D&&(r&&A.push("font",q),i&&R.push("font",q),D=q),k=Math.max(k,y[L]);const z=[B,S+I*_[L]+h*(_[L]-b[N]),.5*(d+k)+$];S+=_[L],r&&A.push("strokeText",z),i&&R.push("fillText",z),++L}return Array.prototype.push.apply(x,A),Array.prototype.push.apply(x,R),this.labels_[s]=T,T}replayTextBackground_(t,n,i,r,s,o,a){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,n),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,n,i,r,s,o,a,l,c,u,f,h,d,g,m,p){a*=h[0],l*=h[1];let _=i-a,y=r-l;const b=s+c>t?t-c:s,v=o+u>n?n-u:o,x=g[3]+b*h[0]+g[1],w=g[0]+v*h[1]+g[2],E=_-g[3],T=y-g[0];(m||f!==0)&&(Xs[0]=E,qs[0]=E,Xs[1]=T,jr[1]=T,jr[0]=E+x,Xr[0]=jr[0],Xr[1]=T+w,qs[1]=Xr[1]);let I;return f!==0?(I=nr(qi(),i,r,1,1,f,-i,-r),Ie(I,Xs),Ie(I,jr),Ie(I,Xr),Ie(I,qs),Mo(Math.min(Xs[0],jr[0],Xr[0],qs[0]),Math.min(Xs[1],jr[1],Xr[1],qs[1]),Math.max(Xs[0],jr[0],Xr[0],qs[0]),Math.max(Xs[1],jr[1],Xr[1],qs[1]),Rl)):Mo(Math.min(E,E+x),Math.min(T,T+w),Math.max(E,E+x),Math.max(T,T+w),Rl),d&&(_=Math.round(_),y=Math.round(y)),{drawImageX:_,drawImageY:y,drawImageW:b,drawImageH:v,originX:c,originY:u,declutterBox:{minX:Rl[0],minY:Rl[1],maxX:Rl[2],maxY:Rl[3],value:p},canvasTransform:I,scale:h}}replayImageOrLabel_(t,n,i,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=t.canvas,f=a?a[2]*r.scale[0]/2:0;return c.minX-f<=u.width/n&&c.maxX+f>=0&&c.minY-f<=u.height/n&&c.maxY+f>=0&&(l&&this.replayTextBackground_(t,Xs,jr,Xr,qs,o,a),AJ(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){const n=Ie(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.lineDashOffset=n[7],t.setLineDash(n[6])}drawLabelWithPointPlacement_(t,n,i,r){const s=this.textStates[n],o=this.createLabel(t,n,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=Cy(Array.isArray(t)?t[0]:t,s.textAlign||lh),u=fp[s.textBaseline||sp],f=a&&a.lineWidth?a.lineWidth:0,h=o.width/l-2*s.scale[0],d=c*h+2*(.5-c)*f,g=u*o.height/l+2*(.5-u)*f;return{label:o,anchorX:d,anchorY:g}}execute_(t,n,i,r,s,o,a,l){let c;this.pixelCoordinates_&&Vo(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=$a(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),fZ(this.renderedTransform_,i));let u=0;const f=r.length;let h=0,d,g,m,p,_,y,b,v,x,w,E,T,I=0,S=0,A=null,R=null;const k=this.coordinateCache_,$=this.viewRotation_,L=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,N={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:$},D=this.instructions!=r||this.overlaps?0:200;let V,Y,B,q;for(;u<f;){const z=r[u];switch(z[0]){case xt.BEGIN_GEOMETRY:V=z[1],q=z[3],V.getGeometry()?a!==void 0&&!bn(a,q.getExtent())?u=z[2]+1:++u:u=z[2];break;case xt.BEGIN_PATH:I>D&&(this.fill_(t),I=0),S>D&&(t.stroke(),S=0),!I&&!S&&(t.beginPath(),p=NaN,_=NaN),++u;break;case xt.CIRCLE:h=z[1];const nt=c[h],rt=c[h+1],at=c[h+2],W=c[h+3],G=at-nt,F=W-rt,j=Math.sqrt(G*G+F*F);t.moveTo(nt+j,rt),t.arc(nt,rt,j,0,2*Math.PI,!0),++u;break;case xt.CLOSE_PATH:t.closePath(),++u;break;case xt.CUSTOM:h=z[1],d=z[2];const Z=z[3],C=z[4],O=z.length==6?z[5]:void 0;N.geometry=Z,N.feature=V,u in k||(k[u]=[]);const P=k[u];O?O(c,h,d,2,P):(P[0]=c[h],P[1]=c[h+1],P.length=2),C(P,N),++u;break;case xt.DRAW_IMAGE:h=z[1],d=z[2],v=z[3],g=z[4],m=z[5];let H=z[6];const U=z[7],X=z[8],lt=z[9],tt=z[10];let et=z[11];const K=z[12];let dt=z[13];const ut=z[14],gt=z[15];if(!v&&z.length>=20){x=z[19],w=z[20],E=z[21],T=z[22];const Un=this.drawLabelWithPointPlacement_(x,w,E,T);v=Un.label,z[3]=v;const yl=z[23];g=(Un.anchorX-yl)*this.pixelRatio,z[4]=g;const ui=z[24];m=(Un.anchorY-ui)*this.pixelRatio,z[5]=m,H=v.height,z[6]=H,dt=v.width,z[13]=dt}let mt;z.length>25&&(mt=z[25]);let Tt,Nt,Ct;z.length>17?(Tt=z[16],Nt=z[17],Ct=z[18]):(Tt=_a,Nt=!1,Ct=!1),tt&&L?et+=$:!tt&&!L&&(et-=$);let ee=0;for(;h<d;h+=2){if(mt&&mt[ee++]<dt/this.pixelRatio)continue;const Un=this.calculateImageOrLabelDimensions_(v.width,v.height,c[h],c[h+1],dt,H,g,m,X,lt,et,K,s,Tt,Nt||Ct,V),yl=[t,n,v,Un,U,Nt?A:null,Ct?R:null];if(l){if(ut==="none")continue;if(ut==="obstacle"){l.insert(Un.declutterBox);continue}else{let ui,Hr;if(gt){const Yn=d-h;if(!gt[Yn]){gt[Yn]=yl;continue}if(ui=gt[Yn],delete gt[Yn],Hr=iA(ui),l.collides(Hr))continue}if(l.collides(Un.declutterBox))continue;ui&&(l.insert(Hr),this.replayImageOrLabel_.apply(this,ui)),l.insert(Un.declutterBox)}}this.replayImageOrLabel_.apply(this,yl)}++u;break;case xt.DRAW_CHARS:const Ee=z[1],_e=z[2],Vs=z[3],ci=z[4];T=z[5];const fn=z[6],ye=z[7],hn=z[8];E=z[9];const _l=z[10];x=z[11],w=z[12];const h2=[z[13],z[13]],I_=this.textStates[w],Iu=I_.font,Lu=[I_.scale[0]*ye,I_.scale[1]*ye];let Ou;Iu in this.widths_?Ou=this.widths_[Iu]:(Ou={},this.widths_[Iu]=Ou);const d2=aN(c,Ee,_e,2),g2=Math.abs(Lu[0])*VC(Iu,x,Ou);if(ci||g2<=d2){const Un=this.textStates[w].textAlign,yl=(d2-g2)*Cy(x,Un),ui=itt(c,Ee,_e,2,x,yl,fn,Math.abs(Lu[0]),VC,Iu,Ou,L?0:this.viewRotation_);t:if(ui){const Hr=[];let Yn,Td,Sd,Mn,fi;if(E)for(Yn=0,Td=ui.length;Yn<Td;++Yn){fi=ui[Yn],Sd=fi[4],Mn=this.createLabel(Sd,w,"",E),g=fi[2]+(Lu[0]<0?-_l:_l),m=Vs*Mn.height+(.5-Vs)*2*_l*Lu[1]/Lu[0]-hn;const Gr=this.calculateImageOrLabelDimensions_(Mn.width,Mn.height,fi[0],fi[1],Mn.width,Mn.height,g,m,0,0,fi[3],h2,!1,_a,!1,V);if(l&&l.collides(Gr.declutterBox))break t;Hr.push([t,n,Mn,Gr,1,null,null])}if(T)for(Yn=0,Td=ui.length;Yn<Td;++Yn){fi=ui[Yn],Sd=fi[4],Mn=this.createLabel(Sd,w,T,""),g=fi[2],m=Vs*Mn.height-hn;const Gr=this.calculateImageOrLabelDimensions_(Mn.width,Mn.height,fi[0],fi[1],Mn.width,Mn.height,g,m,0,0,fi[3],h2,!1,_a,!1,V);if(l&&l.collides(Gr.declutterBox))break t;Hr.push([t,n,Mn,Gr,1,null,null])}l&&l.load(Hr.map(iA));for(let Gr=0,IF=Hr.length;Gr<IF;++Gr)this.replayImageOrLabel_.apply(this,Hr[Gr])}}++u;break;case xt.END_GEOMETRY:if(o!==void 0){V=z[1];const Un=o(V,q);if(Un)return Un}++u;break;case xt.FILL:D?I++:this.fill_(t),++u;break;case xt.MOVE_TO_LINE_TO:for(h=z[1],d=z[2],Y=c[h],B=c[h+1],y=Y+.5|0,b=B+.5|0,(y!==p||b!==_)&&(t.moveTo(Y,B),p=y,_=b),h+=2;h<d;h+=2)Y=c[h],B=c[h+1],y=Y+.5|0,b=B+.5|0,(h==d-2||y!==p||b!==_)&&(t.lineTo(Y,B),p=y,_=b);++u;break;case xt.SET_FILL_STYLE:A=z,this.alignFill_=z[2],I&&(this.fill_(t),I=0,S&&(t.stroke(),S=0)),t.fillStyle=z[1],++u;break;case xt.SET_STROKE_STYLE:R=z,S&&(t.stroke(),S=0),this.setStrokeStyle_(t,z),++u;break;case xt.STROKE:D?S++:t.stroke(),++u;break;default:++u;break}}I&&this.fill_(t),S&&t.stroke()}execute(t,n,i,r,s,o){this.viewRotation_=r,this.execute_(t,n,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,n,i,r,s){return this.viewRotation_=i,this.execute_(t,1,n,this.hitDetectionInstructions,!0,r,s)}}const ott=stt,Ay=["Polygon","Circle","LineString","Image","Text","Default"];class att{constructor(t,n,i,r,s,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=qi(),this.createExecutors_(s)}clip(t,n){const i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const n in t){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const r=t[n];for(const s in r){const o=r[s];i[s]=new ott(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let r=0,s=t.length;r<s;++r)if(t[r]in i)return!0}return!1}forEachFeatureAtCoordinate(t,n,i,r,s,o){r=Math.round(r);const a=r*2+1,l=nr(this.hitDetectionTransform_,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Cn(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let f;this.renderBuffer_!==void 0&&(f=Ci(),Rf(f,t),Yw(f,n*(this.renderBuffer_+r),f));const h=ltt(r);let d;function g(x,w){const E=u.getImageData(0,0,a,a).data;for(let T=0,I=h.length;T<I;T++)if(E[h[T]]>0){if(!o||d!=="Image"&&d!=="Text"||o.includes(x)){const S=(h[T]-3)/4,A=r-S%a,R=r-(S/a|0),k=s(x,w,A*A+R*R);if(k)return k}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(Co);let p,_,y,b,v;for(p=m.length-1;p>=0;--p){const x=m[p].toString();for(y=this.executorsByZIndex_[x],_=Ay.length-1;_>=0;--_)if(d=Ay[_],b=y[d],b!==void 0&&(v=b.executeHitDetection(u,l,i,g,f),v))return v}}getClipCoords(t){const n=this.maxExtent_;if(!n)return null;const i=n[0],r=n[1],s=n[2],o=n[3],a=[i,r,i,o,s,o,s,r];return $a(a,0,8,2,t,a),a}isEmpty(){return $c(this.executorsByZIndex_)}execute(t,n,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Co),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||Ay;let c,u,f,h,d,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(d=this.executorsByZIndex_[m],f=0,h=o.length;f<h;++f){const p=o[f];g=d[p],g!==void 0&&g.execute(t,n,i,r,s,a)}}this.maxExtent_&&t.restore()}}const My={};function ltt(e){if(My[e]!==void 0)return My[e];const t=e*2+1,n=e*e,i=new Array(n+1);for(let s=0;s<=e;++s)for(let o=0;o<=e;++o){const a=s*s+o*o;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((e+s)*t+(e+o))*4+3),s>0&&l.push(((e-s)*t+(e+o))*4+3),o>0&&(l.push(((e+s)*t+(e-o))*4+3),s>0&&l.push(((e-s)*t+(e-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return My[e]=r,r}const sA=att;class ctt extends ON{constructor(t,n,i,r,s,o,a){super(),this.context_=t,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.transformRotation_=r?z0(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=qi()}drawImages_(t,n,i,r){if(!this.image_)return;const s=$a(t,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,f=s.length;u<f;u+=2){const h=s[u]-this.imageAnchorX_,d=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=h+this.imageAnchorX_,m=d+this.imageAnchorY_;nr(a,g,m,1,1,c,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,n,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=$a(t,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=r){const l=s[n]+this.textOffsetX_,c=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(t,n,i,r,s){const o=this.context_,a=$a(t,n,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(t,n,i,r){for(let s=0,o=i.length;s<o;++s)n=this.moveToLineTo_(t,n,i[s],r,!0);return n}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!bn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=KZ(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,n){const i=n.getGeometryFunction()(t);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(t){const n=t.getGeometriesArray();for(let i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!bn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getExtent();if(bn(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=t.getFlatCoordinates();let s=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!bn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!bn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getOrientedFlatCoordinates();let r=0;const s=t.getEndss(),o=t.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(i,r,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(t){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),Vo(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset,n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const n=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:lh;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,n){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:br(i||kn)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=s||gs;this.strokeState_={lineCap:r!==void 0?r:Pc,lineDash:this.pixelRatio_===1?u:u.map(f=>f*this.pixelRatio_),lineDashOffset:(o||ms)*this.pixelRatio_,lineJoin:a!==void 0?a:Fc,lineWidth:(l!==void 0?l:ch)*this.pixelRatio_,miterLimit:c!==void 0?c:oh,strokeStyle:br(i||ah)}}}setImageStyle(t){let n;if(!t||!(n=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(t){if(!t)this.text_="";else{const n=t.getFill();if(!n)this.textFillState_=null;else{const d=n.getColor();this.textFillState_={fillStyle:br(d||kn)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const d=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),p=i.getLineDashOffset(),_=i.getLineJoin(),y=i.getWidth(),b=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:Pc,lineDash:m||gs,lineDashOffset:p||ms,lineJoin:_!==void 0?_:Fc,lineWidth:y!==void 0?y:ch,miterLimit:b!==void 0?b:oh,strokeStyle:br(d||ah)}}const r=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),u=t.getText(),f=t.getTextAlign(),h=t.getTextBaseline();this.textState_={font:r!==void 0?r:dN,textAlign:f!==void 0?f:lh,textBaseline:h!==void 0?h:sp},this.text_=u!==void 0?Array.isArray(u)?u.reduce((d,g,m)=>d+=m%2?" ":g,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const utt=ctt,pr=.5;function ftt(e,t,n,i,r,s,o){const a=e[0]*pr,l=e[1]*pr,c=Cn(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,f=new utt(c,pr,r,null,o),h=n.length,d=Math.floor((256*256*256-1)/h),g={};for(let p=1;p<=h;++p){const _=n[p-1],y=_.getStyleFunction()||i;if(!y)continue;let b=y(_,s);if(!b)continue;Array.isArray(b)||(b=[b]);const x=(p*d).toString(16).padStart(7,"#00000");for(let w=0,E=b.length;w<E;++w){const T=b[w],I=T.getGeometryFunction()(_);if(!I||!bn(r,I.getExtent()))continue;const S=T.clone(),A=S.getFill();A&&A.setColor(x);const R=S.getStroke();R&&(R.setColor(x),R.setLineDash(null)),S.setText(void 0);const k=T.getImage();if(k){const D=k.getImageSize();if(!D)continue;const V=Cn(D[0],D[1],void 0,{alpha:!1}),Y=V.canvas;V.fillStyle=x,V.fillRect(0,0,Y.width,Y.height),S.setImage(new lp({img:Y,anchor:k.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:k.getOrigin(),opacity:1,size:k.getSize(),scale:k.getScale(),rotation:k.getRotation(),rotateWithView:k.getRotateWithView()}))}const $=S.getZIndex()||0;let L=g[$];L||(L={},g[$]=L,L.Polygon=[],L.Circle=[],L.LineString=[],L.Point=[]);const N=I.getType();if(N==="GeometryCollection"){const D=I.getGeometriesArrayRecursive();for(let V=0,Y=D.length;V<Y;++V){const B=D[V];L[B.getType().replace("Multi","")].push(B,S)}}else L[N.replace("Multi","")].push(I,S)}}const m=Object.keys(g).map(Number).sort(Co);for(let p=0,_=m.length;p<_;++p){const y=g[m[p]];for(const b in y){const v=y[b];for(let x=0,w=v.length;x<w;x+=2){f.setStyle(v[x+1]);for(let E=0,T=t.length;E<T;++E)f.setTransform(t[E]),f.drawGeometry(v[x])}}}return c.getImageData(0,0,u.width,u.height)}function htt(e,t,n){const i=[];if(n){const r=Math.floor(Math.round(e[0])*pr),s=Math.floor(Math.round(e[1])*pr),o=(Ne(r,0,n.width-1)+Ne(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),f=Math.floor((256*256*256-1)/t.length);u&&u%f===0&&i.push(t[u/f-1])}return i}const dtt=.5,$N={Point:xtt,LineString:vtt,Polygon:Ttt,MultiPoint:Ett,MultiLineString:btt,MultiPolygon:wtt,GeometryCollection:ytt,Circle:ptt};function gtt(e,t){return parseInt(Jt(e),10)-parseInt(Jt(t),10)}function mtt(e,t){const n=Yv(e,t);return n*n}function Yv(e,t){return dtt*e/t}function ptt(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=e.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function oA(e,t,n,i,r,s,o){let a=!1;const l=n.getImage();if(l){const c=l.getImageState();c==Dt.LOADED||c==Dt.ERROR?l.unlistenImageChange(r):(c==Dt.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return _tt(e,t,n,i,s,o),a}function _tt(e,t,n,i,r,s){const o=n.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(i,r);if(n.getRenderer())NN(e,a,n,t);else{const c=$N[a.getType()];c(e,a,n,t,s)}}function NN(e,t,n,i){if(t.getType()=="GeometryCollection"){const s=t.getGeometries();for(let o=0,a=s.length;o<a;++o)NN(e,s[o],n,i);return}e.getBuilder(n.getZIndex(),"Default").drawCustom(t,i,n.getRenderer(),n.getHitDetectionRenderer())}function ytt(e,t,n,i,r){const s=t.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=$N[s[o].getType()];l(e,s[o],n,i,r)}}function vtt(e,t,n,i,r){const s=n.getStroke();if(s){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(r||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function btt(e,t,n,i,r){const s=n.getStroke();if(s){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(r||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function wtt(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function xtt(e,t,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=Dt.LOADED)return;let l=e;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const f=e.getBuilder(n.getZIndex(),"Image");f.setImageStyle(s,a),f.drawPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(t,i)}if(o&&o.getText()){let l=e;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function Ett(e,t,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=Dt.LOADED)return;let l=e;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const f=e.getBuilder(n.getZIndex(),"Image");f.setImageStyle(s,a),f.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(t,i)}if(o&&o.getText()){let l=e;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function Ttt(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}class Stt extends xx{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ci(),this.wrappedRenderedExtent_=Ci(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,n,i){const r=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),f=this.getLayer().getSource(),h=n.pixelRatio,d=n.viewHints,g=!(d[$e.ANIMATING]||d[$e.INTERACTING]),m=this.compositionContext_,p=Math.round(n.size[0]*h),_=Math.round(n.size[1]*h),y=f.getWrapX()&&l.canWrapX(),b=y?oe(u):null,v=y?Math.ceil((r[2]-u[2])/b)+1:1;let x=y?Math.floor((r[0]-u[0])/b):0;do{const w=this.getRenderTransform(o,a,c,h,p,_,x*b);t.execute(m,1,w,c,g,void 0,i)}while(++x<v)}setupCompositionContext_(){if(this.opacity_!==1){const t=Cn(this.context.canvas.width,this.context.canvas.height,nA);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,H0(this.compositionContext_),nA.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,n){const i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];hZ(this.pixelTransform,1/i,1/i),N0(this.inversePixelTransform,this.pixelTransform);const s=Uw(this.pixelTransform);this.useContainer(n,s,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let u=l&&!l.isEmpty()||c&&!c.isEmpty();if(!u&&!(this.getLayer().hasListener(Ar.PRERENDER)||this.getLayer().hasListener(Ar.POSTRENDER)))return null;const f=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);a.width!=f||a.height!=h?(a.width=f,a.height=h,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,f,h),this.preRender(o,t);const d=t.viewState;d.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let g=!1;if(u&&r.extent&&this.clipping){const m=us(r.extent);u=bn(m,t.extent),g=u&&!go(m,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,m)}return u&&this.renderWorlds(l,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(n=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Ie(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],f=i[0]*pr,h=i[1]*pr;u.push(this.getRenderTransform(r,s,o,pr,f,h,0).slice());const d=c.getSource(),g=a.getExtent();if(d.getWrapX()&&a.canWrapX()&&!go(g,l)){let m=l[0];const p=oe(g);let _=0,y;for(;m<g[0];)--_,y=p*_,u.push(this.getRenderTransform(r,s,o,pr,f,h,y).slice()),m+=p;for(_=0,m=l[2];m>g[2];)++_,y=p*_,u.push(this.getRenderTransform(r,s,o,pr,f,h,y).slice()),m-=p}this.hitDetectionImageData_=ftt(i,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}n(htt(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,n,i,r,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(d,g,m){const p=Jt(d),_=c[p];if(_){if(_!==!0&&m<_.distanceSq){if(m===0)return c[p]=!0,s.splice(s.lastIndexOf(_),1),r(d,l,g);_.geometry=g,_.distanceSq=m}}else{if(m===0)return c[p]=!0,r(d,l,g);s.push(c[p]={feature:d,layer:l,geometry:g,distanceSq:m,callback:r})}};let f;const h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some(d=>f=d.forEachFeatureAtCoordinate(t,o,a,i,u,d===this.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(g=>g.value):null)),f}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const r=t.viewHints[$e.ANIMATING],s=t.viewHints[$e.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,u=c.projection,f=c.resolution,h=t.pixelRatio,d=n.getRevision(),g=n.getRenderBuffer();let m=n.getRenderOrder();m===void 0&&(m=gtt);const p=c.center.slice(),_=Yw(l,g*f),y=_.slice(),b=[_.slice()],v=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!go(v,t.extent)){const L=oe(v),N=Math.max(oe(_)/2,L);_[0]=v[0]-N,_[2]=v[2]+N,B$(p,u);const D=H$(b[0],u);D[0]<v[0]&&D[2]<v[2]?b.push([D[0]+L,D[1],D[2]+L,D[3]]):D[0]>v[0]&&D[2]>v[2]&&b.push([D[0]-L,D[1],D[2]-L,D[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==d&&this.renderedRenderOrder_==m&&go(this.wrappedRenderedExtent_,_))return Vo(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=p,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new eA(Yv(f,h),_,f,h);let w;this.getLayer().getDeclutter()&&(w=new eA(Yv(f,h),_,f,h));let E;for(let L=0,N=b.length;L<N;++L)i.loadFeatures(b[L],f,u);const T=mtt(f,h);let I=!0;const S=L=>{let N;const D=L.getStyleFunction()||n.getStyleFunction();if(D&&(N=D(L,f)),N){const V=this.renderFeature(L,T,N,x,E,w);I=I&&!V}},A=X$(_),R=i.getFeaturesInExtent(A);m&&R.sort(m);for(let L=0,N=R.length;L<N;++L)S(R[L]);this.renderedFeatures_=R,this.ready=I;const k=x.finish(),$=new sA(_,f,h,i.getOverlaps(),k,n.getRenderBuffer());return w&&(this.declutterExecutorGroup=new sA(_,f,h,i.getOverlaps(),w.finish(),n.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=d,this.renderedRenderOrder_=m,this.renderedExtent_=y,this.wrappedRenderedExtent_=_,this.renderedCenter_=p,this.renderedProjection_=u,this.replayGroup_=$,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,n,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=oA(r,t,i[l],n,this.boundHandleStyleImageChange_,s,o)||a;else a=oA(r,t,i,n,this.boundHandleStyleImageChange_,s,o);return a}}const Ctt=Stt;class Att{constructor(t){this.rbush_=new yx(t),this.items_={}}insert(t,n){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.rbush_.insert(i),this.items_[Jt(n)]=i}load(t,n){const i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const o=t[r],a=n[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[Jt(a)]=l}this.rbush_.load(i)}remove(t){const n=Jt(t),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(t,n){const i=this.items_[Jt(n)],r=[i.minX,i.minY,i.maxX,i.maxY];rh(r,t)||(this.remove(n),this.insert(t,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(t){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(n).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,n){return this.forEach_(this.getInExtent(t),n)}forEach_(t,n){let i;for(let r=0,s=t.length;r<s;r++)if(i=n(t[r]),i)return i;return i}isEmpty(){return $c(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const n=this.rbush_.toJSON();return Mo(n.minX,n.minY,n.maxX,n.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const n in t.items_)this.items_[n]=t.items_[n]}}const aA=Att;class Mtt extends sr{constructor(t){super(),this.projection=Fe(t.projection),this.attributions_=lA(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,r){n.viewResolver=i,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=lA(t),this.changed()}setState(t){this.state_=t,this.changed()}}function lA(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}const DN=Mtt,Pi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Rtt(e,t){return[[-1/0,-1/0,1/0,1/0]]}let Itt=!1;function Ltt(e,t,n,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof e=="function"?e(n,i,r):e,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Itt,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?s(t.readFeatures(u,{extent:n,featureProjection:r}),t.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function cA(e,t){return function(n,i,r,s,o){const a=this;Ltt(e,t,n,i,r,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||kc)}}class Ks extends Os{constructor(t,n,i){super(t),this.feature=n,this.features=i}}class Ott extends DN{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=kc,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Ut(this.format_,"`format` must be set when `url` is set"),this.loader_=cA(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Rtt;const n=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=n?new aA:null,this.loadedExtentsRtree_=new aA,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),!n&&i===void 0&&(i=new vr(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const n=Jt(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);const i=t.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new Ks(Pi.ADDFEATURE,t))}setupChangeEvents_(t,n){this.featureChangeKeys_[t]=[Ht(n,Lt.CHANGE,this.handleFeatureChange_,this),Ht(n,Oc.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,n){let i=!0;const r=n.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=n),i&&(Ut(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=n),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const n=[],i=[],r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=Jt(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=Jt(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,r),this.hasListener(Pi.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new Ks(Pi.ADDFEATURE,i[s]))}bindFeaturesCollection_(t){let n=!1;this.addEventListener(Pi.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(Pi.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(On.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),t.addEventListener(On.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(le);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new Ks(Pi.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,n){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(t))return n(r)})}forEachFeatureInExtent(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(t,n){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const s=n(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),$c(this.nullGeometryFeatures_)||ds(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n}getFeaturesInExtent(t,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=bZ(t,n);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,n){const i=t[0],r=t[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||ih,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),f=a;if(a=u.closestPointXY(i,r,o,a),a<f){s=c;const h=Math.sqrt(a);l[0]=i-h,l[1]=r-h,l[2]=i+h,l[3]=r+h}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const n=this.idIndex_[t.toString()];return n!==void 0?n:null}getFeatureByUid(t){const n=this.uidIndex_[t];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const n=t.target,i=Jt(n),r=n.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new Ks(Pi.CHANGEFEATURE,n))}hasFeature(t){const n=t.getId();return n!==void 0?n in this.idIndex_:Jt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&$c(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,n,i){const r=this.loadedExtentsRtree_,s=this.strategy_(t,n,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return go(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ks(Pi.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ks(Pi.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ks(Pi.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const n=this.loadedExtentsRtree_;let i;n.forEachInExtent(t,function(r){if(rh(r.extent,t))return i=r,!0}),i&&n.remove(i)}removeFeature(t){if(!t)return;const n=Jt(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const n=Jt(t),i=this.featureChangeKeys_[n];if(!i)return;i.forEach(le),delete this.featureChangeKeys_[n];const r=t.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[n],this.dispatchEvent(new Ks(Pi.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let n=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],n=!0;break}return n}setLoader(t){this.loader_=t}setUrl(t){Ut(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(cA(t,this.format_))}}const ktt=Ott;class $tt extends oQ{constructor(t,n,i,r,s){const o=s!==void 0?Dt.IDLE:Dt.LOADED;super(t,n,i,o),this.loader_=s!==void 0?s:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=Dt.ERROR):this.state=Dt.LOADED,this.changed()}load(){this.state==Dt.IDLE&&(this.state=Dt.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const Ntt=$tt,yt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Dtt extends jh{constructor(t,n,i){super(),i=i||{},this.tileCoord=t,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Lt.CHANGE)}release(){this.state===yt.ERROR&&this.setState(yt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==yt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,n=this;do{if(t.getState()==yt.LOADED){t.interimTile=null;break}else t.getState()==yt.LOADING?n=t:t.getState()==yt.IDLE?n.interimTile=t.interimTile:n=t;t=n.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==yt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){At()}getAlpha(t,n){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;const r=n-i+1e3/60;return r>=this.transition_?1:wN(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const PN=Dtt;class Ptt extends PN{constructor(t,n,i,r,s,o){super(t,n,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=yt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=yt.ERROR,this.unlistenImage_(),this.image_=Ftt(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=yt.LOADED:this.state=yt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==yt.ERROR&&(this.state=yt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==yt.IDLE&&(this.state=yt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=iQ(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Ftt(){const e=Cn(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}const FN=Ptt;class ztt{constructor(t,n,i){this.decay_=t,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,n){this.points_.push(t,n,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<t)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const r=this.points_[n+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Wtt=ztt;class Vtt extends Vw{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,n){At()}calculateMatrices2D(t){const n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;nr(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),N0(r,i)}forEachFeatureAtCoordinate(t,n,i,r,s,o,a,l){let c;const u=n.viewState;function f(v,x,w,E){return s.call(o,x,v?w:null,E)}const h=u.projection,d=B$(t.slice(),h),g=[[0,0]];if(h.canWrapX()&&r){const v=h.getExtent(),x=oe(v);g.push([-x,0],[x,0])}const m=n.layerStatesArray,p=m.length,_=[],y=[];for(let v=0;v<g.length;v++)for(let x=p-1;x>=0;--x){const w=m[x],E=w.layer;if(E.hasRenderer()&&_x(w,u)&&a.call(l,E)){const T=E.getRenderer(),I=E.getSource();if(T&&I){const S=I.getWrapX()?d:t,A=f.bind(null,w.managed);y[0]=S[0]+g[v][0],y[1]=S[1]+g[v][1],c=T.forEachFeatureAtCoordinate(y,n,i,A,_)}if(c)return c}}if(_.length===0)return;const b=1/_.length;return _.forEach((v,x)=>v.distanceSq+=x*b),_.sort((v,x)=>v.distanceSq-x.distanceSq),_.some(v=>c=v.callback(v.feature,v.layer,v.geometry)),c}hasFeatureAtCoordinate(t,n,i,r,s,o){return this.forEachFeatureAtCoordinate(t,n,i,r,ih,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(t){At()}flushDeclutterItems(t){}scheduleExpireIconCache(t){ap.canExpireCache()&&t.postRenderFunctions.push(Htt)}}function Htt(e,t){ap.expire()}const Gtt=Vtt;class Btt extends Gtt{constructor(t){super(t),this.fontChangeListenerKey_=Ht(Qr,Oc.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=hl+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,n){const i=this.getMap();if(i.hasListener(t)){const r=new kN(t,void 0,n);i.dispatchEvent(r)}}disposeInternal(){le(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Ar.PRECOMPOSE,t);const n=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;const r=this.declutterLayers_;r.length=0;let s=null;for(let o=0,a=n.length;o<a;++o){const l=n[o];t.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!_x(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const f=c.render(t,s);f&&(f!==s&&(this.children_.push(f),s=f),"getDeclutter"in c&&r.push(c))}this.flushDeclutterItems(t),wJ(this.element_,this.children_),this.dispatchRenderEvent(Ar.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const n=this.declutterLayers_;for(let i=n.length-1;i>=0;--i)n[i].renderDeclutter(t);n.length=0}}const Utt=Btt;class ao extends Os{constructor(t,n){super(t),this.layer=n}}const Ry={LAYERS:"layers"};class Ex extends bN{constructor(t){t=t||{};const n=Object.assign({},t);delete n.layers;let i=t.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Ry.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new vr(i.slice(),{unique:!0}):Ut(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new vr(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(le),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Ht(t,On.ADD,this.handleLayersAdd_,this),Ht(t,On.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(le);Yh(this.listenerKeys_);const n=t.getArray();for(let i=0,r=n.length;i<r;i++){const s=n[i];this.registerLayerListeners_(s),this.dispatchEvent(new ao("addlayer",s))}this.changed()}registerLayerListeners_(t){const n=[Ht(t,Oc.PROPERTYCHANGE,this.handleLayerChange_,this),Ht(t,Lt.CHANGE,this.handleLayerChange_,this)];t instanceof Ex&&n.push(Ht(t,"addlayer",this.handleLayerGroupAdd_,this),Ht(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Jt(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new ao("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new ao("removelayer",t.layer))}handleLayersAdd_(t){const n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new ao("addlayer",n)),this.changed()}handleLayersRemove_(t){const n=t.element,i=Jt(n);this.listenerKeys_[i].forEach(le),delete this.listenerKeys_[i],this.dispatchEvent(new ao("removelayer",n)),this.changed()}getLayers(){return this.get(Ry.LAYERS)}setLayers(t){const n=this.getLayers();if(n){const i=n.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new ao("removelayer",i[r]))}this.set(Ry.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(n){n.getLayersArray(t)}),t}getLayerStatesArray(t){const n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const r=this.getLayerState();let s=r.zIndex;!t&&r.zIndex===void 0&&(s=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=uc(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}}const Y0=Ex;class Ytt extends Os{constructor(t,n,i){super(t),this.map=n,this.frameState=i!==void 0?i:null}}const Hl=Ytt;class jtt extends Hl{constructor(t,n,i,r,s,o){super(t,n,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const to=jtt,Ce={SINGLECLICK:"singleclick",CLICK:Lt.CLICK,DBLCLICK:Lt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},jv={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Xtt extends jh{constructor(t,n){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Ht(i,jv.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ht(i,jv.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Lt.TOUCHMOVE,this.boundHandleTouchMove_,D$?{passive:!1}:!1)}emulateClick_(t){let n=new to(Ce.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new to(Ce.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new to(Ce.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const n=t,i=n.pointerId;if(n.type==Ce.POINTERUP||n.type==Ce.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==Ce.POINTERDOWN||n.type==Ce.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const n=new to(Ce.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(le),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const n=new to(Ce.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ht(i,Ce.POINTERMOVE,this.handlePointerMove_,this),Ht(i,Ce.POINTERUP,this.handlePointerUp_,this),Ht(this.element_,Ce.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Ht(this.element_.getRootNode(),Ce.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const n=new to(Ce.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new to(Ce.POINTERMOVE,this.map_,t,n))}handleTouchMove_(t){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(le(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Lt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(le(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(le),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const qtt=Xtt,ns={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Be={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},hp=1/0;class Ktt{constructor(t,n){this.priorityFunction_=t,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Yh(this.queuedElements_)}dequeue(){const t=this.elements_,n=this.priorities_,i=t[0];t.length==1?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(t){Ut(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(t);return n!=hp?(this.elements_.push(t),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const n=this.elements_,i=this.priorities_,r=n.length,s=n[t],o=i[t],a=t;for(;t<r>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),u=c<r&&i[c]<i[l]?c:l;n[t]=n[u],i[t]=i[u],t=u}n[t]=s,i[t]=o,this.siftDown_(a,t)}siftDown_(t,n){const i=this.elements_,r=this.priorities_,s=i[n],o=r[n];for(;n>t;){const a=this.getParentIndex_(n);if(r[a]>o)i[n]=i[a],r[n]=r[a],n=a;else break}i[n]=s,r[n]=o}reprioritize(){const t=this.priorityFunction_,n=this.elements_,i=this.priorities_;let r=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=t(o),l==hp?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,n[r++]=o);n.length=r,i.length=r,this.heapify_()}}const Ztt=Ktt;class Jtt extends Ztt{constructor(t,n){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const n=super.enqueue(t);return n&&t[0].addEventListener(Lt.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const n=t.target,i=n.getState();if(i===yt.LOADED||i===yt.ERROR||i===yt.EMPTY){i!==yt.ERROR&&n.removeEventListener(Lt.CHANGE,this.boundHandleTileChange_);const r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,n){let i=0,r,s,o;for(;this.tilesLoading_<t&&i<n&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===yt.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}const Qtt=Jtt;function tet(e,t,n,i,r){if(!e||!(n in e.wantedTiles)||!e.wantedTiles[n][t.getKey()])return hp;const s=e.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class eet extends sr{constructor(t){super();const n=t.element;n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){rp(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&rp(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)le(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==kc&&this.listenerKeys.push(Ht(t,ns.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const pu=eet;class net extends pu{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:n+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"›",o=t.collapseClassName!==void 0?t.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Lt.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+hl+" "+Zh+(this.collapsed_&&this.collapsible_?" "+zC:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(t)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Vo(n,this.renderedAttributions_)){fN(this.ulElement_);for(let r=0,s=n.length;r<s;++r){const o=document.createElement("li");o.innerHTML=n[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(zC),this.collapsed_?ip(this.collapseLabel_,this.label_):ip(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const iet=net;class ret extends pu{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const n=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"⇧",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(Lt.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+hl+" "+Zh,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ig)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:gu}):n.setRotation(0))}render(t){const n=t.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(ig);!s&&i===0?this.element.classList.add(ig):s&&i!==0&&this.element.classList.remove(ig)}this.label_.style.transform=r}this.rotation_=i}}const set=ret;class oet extends pu{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const n=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:n+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:n+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(Lt.CLICK,this.handleClick_.bind(this,i),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=c,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(Lt.CLICK,this.handleClick_.bind(this,-i),!1);const h=n+" "+hl+" "+Zh,d=this.element;d.className=h,d.appendChild(u),d.appendChild(f),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,n){n.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:gu})):i.setZoom(s)}}}const aet=oet;function zN(e){e=e||{};const t=new vr;return(e.zoom!==void 0?e.zoom:!0)&&t.push(new aet(e.zoomOptions)),(e.rotate!==void 0?e.rotate:!0)&&t.push(new set(e.rotateOptions)),(e.attribution!==void 0?e.attribution:!0)&&t.push(new iet(e.attributionOptions)),t}const uA={ACTIVE:"active"};class cet extends sr{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(uA.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(uA.ACTIVE,t)}setMap(t){this.map_=t}}function uet(e,t,n){const i=e.getCenterInternal();if(i){const r=[i[0]+t[0],i[1]+t[1]];e.animateInternal({duration:n!==void 0?n:250,easing:HJ,center:e.getConstrainedCenter(r)})}}function Tx(e,t,n,i){const r=e.getZoom();if(r===void 0)return;const s=e.getConstrainedZoom(r+t),o=e.getResolutionForZoom(s);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:gu})}const nd=cet;class fet extends nd{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let n=!1;if(t.type==Ce.DBLCLICK){const i=t.originalEvent,r=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();Tx(a,o,s,this.duration_),i.preventDefault(),n=!0}return!n}}const het=fet;class det extends nd{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Ce.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Ce.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Ce.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,n=this.stopDown(i)}else t.type==Ce.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Sx(e){const t=e.length;let n=0,i=0;for(let r=0;r<t;r++)n+=e[r].clientX,i+=e[r].clientY;return{clientX:n/t,clientY:i/t}}const id=det;function Xv(e){const t=arguments;return function(n){let i=!0;for(let r=0,s=t.length;r<s&&(i=i&&t[r](n),!!i);++r);return i}}const get=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},met=function(e){const t=e.map.getTargetElement(),n=e.map.getOwnerDocument().activeElement;return t.contains(n)},WN=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?met(e):!0},pet=ih,VN=function(e){const t=e.originalEvent;return t.button==0&&!(cZ&&k$&&t.ctrlKey)},HN=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},_et=function(e){const t=e.originalEvent;return k$?t.metaKey:t.ctrlKey},yet=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},GN=function(e){const t=e.originalEvent,n=t.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!t.target.isContentEditable},Iy=function(e){const t=e.originalEvent;return Ut(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},vet=function(e){const t=e.originalEvent;return Ut(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class bet extends id{constructor(t){super({stopDown:k0}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=t.condition?t.condition:Xv(HN,vet);this.condition_=t.onFocusOnly?Xv(WN,n):n,this.noKinetic_=!1}handleDragEvent(t){const n=t.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,r=n.getEventPixel(Sx(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=t.map.getView();$Z(s,a.getResolution()),Xw(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:gu})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const wet=bet;class xet extends id{constructor(t){t=t||{},super({stopDown:k0}),this.condition_=t.condition?t.condition:get,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Iy(t))return;const n=t.map,i=n.getView();if(i.getConstraints().rotation===px)return;const r=n.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return Iy(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Iy(t)&&VN(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const Eet=xet;class Tet extends Vw{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,n=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,n=this.endPixel_,r=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Ro([r])}getGeometry(){return this.geometry_}}const Cet=Tet,lg={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Ly extends Os{constructor(t,n,i){super(t),this.coordinate=n,this.mapBrowserEvent=i}}class Aet extends id{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Cet(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:VN,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,n,i){const r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ly(lg.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new Ly(n?lg.BOXEND:lg.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ly(lg.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const Met=Aet;class Ret extends Met{constructor(t){t=t||{};const n=t.condition?t.condition:yet;super({condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:gu})}}const Iet=Ret,ia={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Let extends nd{constructor(t){super(),t=t||{},this.defaultCondition_=function(n){return HN(n)&&GN(n)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let n=!1;if(t.type==Lt.KEYDOWN){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==ia.DOWN||r==ia.LEFT||r==ia.RIGHT||r==ia.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==ia.DOWN?c=-a:r==ia.LEFT?l=-a:r==ia.RIGHT?l=a:c=a;const u=[l,c];Xw(u,o.getRotation()),uet(o,u,this.duration_),i.preventDefault(),n=!0}}return!n}}const Oet=Let;class ket extends nd{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(n){return!_et(n)&&GN(n)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let n=!1;if(t.type==Lt.KEYDOWN||t.type==Lt.KEYPRESS){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==="+"||r==="-")){const s=t.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();Tx(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}const $et=ket;class Net extends nd{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const n=t.condition?t.condition:pet;this.condition_=t.onFocusOnly?Xv(WN,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==Lt.WHEEL)return!0;const i=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==Lt.WHEEL&&(s=r.deltaY,aZ&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=$$),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const n=t.getView();n.getAnimating()&&n.cancelAnimations();let i=-Ne(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Tx(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const Det=Net;class Pet extends id{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=k0),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let n=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=t.map,a=o.getView();a.getConstraints().rotation!==px&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Sx(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const Fet=Pet;class zet extends id{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=k0),super(n),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let n=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Sx(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const Wet=zet;function Vet(e){e=e||{};const t=new vr,n=new Wtt(-.005,.05,100);return(e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0)&&t.push(new Eet),(e.doubleClickZoom!==void 0?e.doubleClickZoom:!0)&&t.push(new het({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan!==void 0?e.dragPan:!0)&&t.push(new wet({onFocusOnly:e.onFocusOnly,kinetic:n})),(e.pinchRotate!==void 0?e.pinchRotate:!0)&&t.push(new Fet),(e.pinchZoom!==void 0?e.pinchZoom:!0)&&t.push(new Wet({duration:e.zoomDuration})),(e.keyboard!==void 0?e.keyboard:!0)&&(t.push(new Oet),t.push(new $et({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0)&&t.push(new Det({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom!==void 0?e.shiftDragZoom:!0)&&t.push(new Iet({duration:e.zoomDuration})),t}function BN(e){if(e instanceof G0){e.setMapInternal(null);return}e instanceof Y0&&e.getLayers().forEach(BN)}function UN(e,t){if(e instanceof G0){e.setMapInternal(t);return}if(e instanceof Y0){const n=e.getLayers().getArray();for(let i=0,r=n.length;i<r;++i)UN(n[i],t)}}let Het=class extends sr{constructor(t){super(),t=t||{},this.on,this.once,this.un;const n=Get(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:$$,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=qi(),this.pixelToCoordinateTransform_=qi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||zN(),this.interactions=n.interactions||Vet({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Qtt(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Be.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Be.VIEW,this.handleViewChanged_),this.addChangeListener(Be.SIZE,this.handleSizeChanged_),this.addChangeListener(Be.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;t.view&&!(t.view instanceof mr)&&t.view.then(function(r){i.setView(new mr(r))}),this.controls.addEventListener(On.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(On.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(On.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(On.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(On.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(On.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){UN(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,n,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:ih,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(t,n){const i=[];return this.forEachFeatureAtPixel(t,function(r){i.push(r)},n),i}getAllLayers(){const t=[];function n(i){i.forEach(function(r){r instanceof Y0?n(r.getLayers()):t.push(r)})}return n(this.getLayers()),t}hasFeatureAtPixel(t,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.layerFilter!==void 0?n.layerFilter:ih,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(Be.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Fv(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const n=this.frameState_;return n?Ie(n.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Be.LAYERGROUP)}setLayers(t){const n=this.getLayerGroup();if(t instanceof vr){n.setLayers(t);return}const i=n.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const r=t[n];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const n=Jr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(t){const n=this.frameState_;return n?Ie(n.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Be.SIZE)}getView(){return this.get(Be.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,n,i,r){return tet(this.frameState_,t,n,i,r)}handleBrowserEvent(t,n){n=n||t.type;const i=new to(n,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const n=t.originalEvent,i=n.type;if(i===jv.POINTERDOWN||i===Lt.WHEEL||i===Lt.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=n.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,s=r;if(t){const o=t.viewHints;if(o[$e.ANIMATING]||o[$e.INTERACTING]){const a=Date.now()-t.time>8;r=a?0:8,s=a?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Ar.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ar.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Hl(ns.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Hl(ns.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)le(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Lt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Lt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,rp(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),n=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Utt(this)),this.mapBrowserEventHandler_=new qtt(this,this.moveTolerance_);for(const s in Ce)this.mapBrowserEventHandler_.addEventListener(Ce[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Lt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Lt.WHEEL,this.boundHandleBrowserEvent_,D$?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[Ht(i,Lt.KEYDOWN,this.handleBrowserEvent,this),Ht(i,Lt.KEYPRESS,this.handleBrowserEvent,this)];const r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(le(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(le(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Ht(t,Oc.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ht(t,Lt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(le),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new ao("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Ht(t,Oc.PROPERTYCHANGE,this.render,this),Ht(t,Lt.CHANGE,this.render,this),Ht(t,"addlayer",this.handleLayerAdd_,this),Ht(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){BN(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const n=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(n!==void 0&&DC(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:$v(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Jt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=$v(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!ul(this.previousExtent_)&&!rh(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Hl(ns.MOVESTART,this,r)),this.previousExtent_=qh(this.previousExtent_)),this.previousExtent_&&!s.viewHints[$e.ANIMATING]&&!s.viewHints[$e.INTERACTING]&&!rh(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Hl(ns.MOVEEND,this,s)),P$(s.extent,this.previousExtent_))),this.dispatchEvent(new Hl(ns.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(ns.LOADSTART)||this.hasListener(ns.LOADEND)||this.hasListener(Ar.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new ao("removelayer",n)),this.set(Be.LAYERGROUP,t)}setSize(t){this.set(Be.SIZE,t)}setTarget(t){this.set(Be.TARGET,t)}setView(t){if(!t||t instanceof mr){this.set(Be.VIEW,t);return}this.set(Be.VIEW,new mr);const n=this;t.then(function(i){n.setView(new mr(i))})}updateSize(){const t=this.getTargetElement();let n;if(t){const r=getComputedStyle(t),s=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(n=[s,o],!DC(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Y$("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!Vo(n,i))&&(this.setSize(n),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let n;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}}};function Get(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const n={},i=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new Y0({layers:e.layers});n[Be.LAYERGROUP]=i,n[Be.TARGET]=e.target,n[Be.VIEW]=e.view instanceof mr?e.view:new mr;let r;e.controls!==void 0&&(Array.isArray(e.controls)?r=new vr(e.controls.slice()):(Ut(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=e.controls));let s;e.interactions!==void 0&&(Array.isArray(e.interactions)?s=new vr(e.interactions.slice()):(Ut(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=e.interactions));let o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new vr(e.overlays.slice()):(Ut(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=e.overlays):o=new vr,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:n}}const Bet=Het,en={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Uet extends sr{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+xJ,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(en.ELEMENT,this.handleElementChanged),this.addChangeListener(en.MAP,this.handleMapChanged),this.addChangeListener(en.OFFSET,this.handleOffsetChanged),this.addChangeListener(en.POSITION,this.handlePositionChanged),this.addChangeListener(en.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(en.ELEMENT)}getId(){return this.id}getMap(){return this.get(en.MAP)||null}getOffset(){return this.get(en.OFFSET)}getPosition(){return this.get(en.POSITION)}getPositioning(){return this.get(en.POSITIONING)}handleElementChanged(){fN(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(rp(this.element),le(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Ht(t,ns.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(en.ELEMENT,t)}setMap(t){this.set(en.MAP,t)}setOffset(t){this.set(en.OFFSET,t)}setPosition(t){this.set(en.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(en.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),s=this.getRect(r,[vJ(r),bJ(r)]);t=t||{};const o=t.margin===void 0?20:t.margin;if(!go(i,s)){const a=s[0]-i[0],l=i[2]-s[2],c=s[1]-i[1],u=i[3]-s[3],f=[0,0];if(a<0?f[0]=a-o:l<0&&(f[0]=Math.abs(l)+o),c<0?f[1]=c-o:u<0&&(f[1]=Math.abs(u)+o),f[0]!==0||f[1]!==0){const h=n.getView().getCenterInternal(),d=n.getPixelFromCoordinateInternal(h);if(!d)return;const g=[d[0]+f[0],d[1]+f[1]],m=t.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(g),duration:m.duration,easing:m.easing})}}}getRect(t,n){const i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+n[0],s+n[1]]}setPositioning(t){this.set(en.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),n=this.getPosition();if(!t||!t.isRendered()||!n){this.setVisible(!1);return}const i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(t,n){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(t[0]+r[0])+"px",a=Math.round(t[1]+r[1])+"px";let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}}const fA=Uet;class Yet{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let n=this.oldest_;for(;n;)t(n.value_,n.key_,this),n=n.newer}get(t,n){const i=this.entries_[t];return Ut(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const n=this.entries_[t];return Ut(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.key_;return t}getValues(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,n){this.get(t),this.entries_[t].value_=n}set(t,n){Ut(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const jet=Yet;function hA(e,t,n,i){return i!==void 0?(i[0]=e,i[1]=t,i[2]=n,i):[e,t,n]}function j0(e,t,n){return e+"/"+t+"/"+n}function YN(e){return j0(e[0],e[1],e[2])}function Xet(e){return e.split("/").map(Number)}function qet(e){return(e[1]<<e[0])+e[2]}function Ket(e,t){const n=e[0],i=e[1],r=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;const s=t.getFullTileRange(n);return s?s.containsXY(i,r):!0}class Zet extends jet{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),i=Xet(t)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(YN(r.tileCoord)),r.release())})}}const jN=Zet;class XN{constructor(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Il(e,t,n,i,r){return r!==void 0?(r.minX=e,r.maxX=t,r.minY=n,r.maxY=i,r):new XN(e,t,n,i)}const qN=XN,dA=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],gA={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class Jet extends pu{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=t.keys!==void 0?t.keys:!1,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=t.className!==void 0?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=t.activeClassName!==void 0?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=t.inactiveClassName!==void 0?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const n=t.label!==void 0?t.label:"⤢";this.labelNode_=typeof n=="string"?document.createTextNode(n):n;const i=t.labelActive!==void 0?t.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const r=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(Lt.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${hl} ${Zh}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const n=t.getOwnerDocument();if(mA(n))if(pA(n))tnt(n);else{let i;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?Qet(i):KN(i)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const n=this.isInFullscreen_;this.isInFullscreen_=pA(t.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(ip(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(gA.ENTERFULLSCREEN)):(ip(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(gA.LEAVEFULLSCREEN)),t.updateSize())}setClassName_(t,n){n?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const n=this.getMap();n&&n.removeChangeListener(Be.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener(Be.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let i=0,r=t.length;i<r;++i)le(t[i]);t.length=0;const n=this.getMap();if(n){const i=n.getOwnerDocument();mA(i)?this.element.classList.remove(FC):this.element.classList.add(FC);for(let r=0,s=dA.length;r<s;++r)t.push(Ht(i,dA[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function mA(e){const t=e.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&e.fullscreenEnabled)}function pA(e){return!!(e.webkitIsFullScreen||e.fullscreenElement)}function KN(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function Qet(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():KN(e)}function tnt(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}const ent=Jet,Oy="units",nnt=[1,2,5],Yu=25.4/.28;class int extends pu{constructor(t){t=t||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:t.render,target:t.target}),this.on,this.once,this.un;const i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+hl,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Oy,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(Oy)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(Oy,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=t.center,i=t.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=Zm(i,t.resolution,n,s);const a=this.minWidth_*(this.dpi_||Yu)/Yu,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Yu)/Yu:void 0;let c=a*o,u="";if(r=="degrees"){const b=Nc.degrees;c*=b,c<b/60?(u="″",o*=3600):c<b?(u="′",o*=60):u="°"}else if(r=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(r=="nautical")o/=1852,u="NM";else if(r=="metric")c<.001?(u="μm",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(r=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let f=3*Math.floor(Math.log(a*o)/Math.log(10)),h,d,g,m,p,_;for(;;){g=Math.floor(f/3);const b=Math.pow(10,g);if(h=nnt[(f%3+3)%3]*b,d=Math.round(h/o),isNaN(d)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&d>=l){h=m,d=p,g=_;break}else if(d>=a)break;m=h,p=d,_=g,++f}const y=this.scaleBar_?this.createScaleBar(d,h,u):h.toFixed(g<0?-g:0)+" "+u;this.renderedHTML_!=y&&(this.innerElement_.innerHTML=y,this.renderedHTML_=y),this.renderedWidth_!=d&&(this.innerElement_.style.width=d+"px",this.renderedWidth_=d),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,n,i){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=t/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const f=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${f}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,t,!1,n,i):"")+"</div>")}return l.push(this.createStepText(o,t,!0,n,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+s+"</div>":"")+l.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,n,i,r,s){const a=(t===0?0:Math.round(r/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+s),l=t===0?-3:n/this.scaleBarSteps_*-1,c=t===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${t===0?"left":"center"};min-width: ${c}px;left: ${i?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const t=Zm(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||Yu,i=1e3/25.4;return t*i*n}render(t){const n=t.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const rnt=int;class snt extends pu{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const n=t.className!==void 0?t.className:"ol-zoom-extent",i=t.label!==void 0?t.label:"E",r=t.tipLabel!==void 0?t.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=r,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener(Lt.CLICK,this.handleClick_.bind(this),!1);const o=n+" "+hl+" "+Zh,a=this.element;a.className=o,a.appendChild(s)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const n=this.getMap().getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(Vv(i))}}const ky=snt;class dp extends K${constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(le),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,n=this.geometries_.length;t<n;++t)this.changeEventsKeys_.push(Ht(this.geometries_[t],Lt.CHANGE,this.changed,this))}clone(){const t=new dp(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,n,i,r){if(r<ll(this.getExtent(),t,n))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(t,n,i,r);return r}containsXY(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(t,n))return!0;return!1}computeExtent(t){qh(t);const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)z$(t,n[i].getExtent());return t}getGeometries(){return _A(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(t);n.push(l),l!==a&&(r=!0)}if(r){const s=new dp(null);return s.setGeometriesArray(n),s}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(t,n);this.changed()}scale(t,n,i){i||(i=Ja(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(t,n,i);this.changed()}setGeometries(t){this.setGeometriesArray(_A(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()}translate(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(t,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function _A(e){const t=[];for(let n=0,i=e.length;n<i;++n)t.push(e[n].clone());return t}const ont=dp;class gp extends fl{constructor(t,n,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,n);else if(n!==void 0&&i)this.setFlatCoordinates(n,t),this.ends_=i;else{let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout()),ds(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?ds(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new gp(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<ll(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qw(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ex(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,r))}getCoordinateAtM(t,n,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,i=i!==void 0?i:!1,hJ(this.flatCoordinates,0,this.ends_,this.stride,t,n,i))}getCoordinates(){return sh(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new ep(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,n=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new ep(t.slice(s,l),i);r.push(c),s=l}return r}getFlatMidpoints(){const t=[],n=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=oN(n,i,l,s,.5);ds(t,c),i=l}return t}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=eJ(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new gp(n,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return lJ(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=nx(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const ant=gp;class Cx extends fl{constructor(t,n){super(),n&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendPoint(t){this.flatCoordinates?ds(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new Cx(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){if(r<ll(this.getExtent(),t,n))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=Oa(t,n,s[a],s[a+1]);if(c<r){r=c;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return mo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new Dc(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,n=this.layout,i=this.stride,r=[];for(let s=0,o=t.length;s<o;s+=i){const a=new Dc(t.slice(s,s+i),n);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const n=this.flatCoordinates,i=this.stride;for(let r=0,s=n.length;r<s;r+=i){const o=n[r],a=n[r+1];if(jw(t,o,a))return!0}return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=W0(this.flatCoordinates,0,t,this.stride),this.changed()}}const ZN=Cx;function lnt(e,t,n,i){const r=[];let s=Ci();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=F$(e,t,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return r}class mp extends fl{constructor(t,n,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout());const f=o.length,h=u.getEnds();for(let d=0,g=h.length;d<g;++d)h[d]+=f;ds(o,u.getFlatCoordinates()),a.push(h)}n=r,t=o,i=a}n!==void 0&&i?(this.setFlatCoordinates(n,t),this.endss_=i):this.setCoordinates(t,n)}appendPolygon(t){let n;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;ds(this.flatCoordinates,t.getFlatCoordinates()),n=t.getEnds().slice();for(let r=0,s=n.length;r<s;++r)n[r]+=i}this.endss_.push(n),this.changed()}clone(){const t=this.endss_.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=this.endss_[r].slice();const i=new mp(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}closestPointXY(t,n,i,r){return r<ll(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ZZ(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),JZ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,i,r))}containsXY(t,n){return oJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)}getArea(){return rJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),NC(n,0,this.endss_,this.stride,t)):n=this.flatCoordinates,zv(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=lnt(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=aJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new ZN(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;fJ(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=NC(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=iJ(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new mp(n,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let n;if(t===0)n=0;else{const s=this.endss_[t-1];n=s[s.length-1]}const i=this.endss_[t].slice(),r=i[i.length-1];if(n!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=n;return new Ro(this.flatCoordinates.slice(n,r),this.layout,i)}getPolygons(){const t=this.layout,n=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(s!==0)for(let f=0,h=l.length;f<h;++f)l[f]-=s;const u=new Ro(n.slice(s,c),t,l);r.push(u),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return cJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=tJ(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const cnt=mp,cg={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class unt extends G0{constructor(t){t=t||{};const n=Object.assign({},t);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(cg.PRELOAD)}setPreload(t){this.set(cg.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(cg.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(cg.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const fnt=unt,hnt=.5,dnt=10,yA=.25;class gnt{constructor(t,n,i,r,s,o){this.sourceProj_=t,this.targetProj_=n;let a={};const l=Jm(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){const b=y[0]+"/"+y[1];return a[b]||(a[b]=l(y)),a[b]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&oe(r)>=oe(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?oe(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?oe(this.targetProj_.getExtent()):null;const c=cl(i),u=F0(i),f=P0(i),h=D0(i),d=this.transformInv_(c),g=this.transformInv_(u),m=this.transformInv_(f),p=this.transformInv_(h),_=dnt+(o?Math.max(0,Math.ceil(Math.log2(kv(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,f,h,d,g,m,p,_),this.wrapsXInSource_){let y=1/0;this.triangles_.forEach(function(b,v,x){y=Math.min(y,b.source[0][0],b.source[1][0],b.source[2][0])}),this.triangles_.forEach(b=>{if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-y>this.sourceWorldWidth_/2){const v=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];v[0][0]-y>this.sourceWorldWidth_/2&&(v[0][0]-=this.sourceWorldWidth_),v[1][0]-y>this.sourceWorldWidth_/2&&(v[1][0]-=this.sourceWorldWidth_),v[2][0]-y>this.sourceWorldWidth_/2&&(v[2][0]-=this.sourceWorldWidth_);const x=Math.min(v[0][0],v[1][0],v[2][0]);Math.max(v[0][0],v[1][0],v[2][0])-x<this.sourceWorldWidth_/2&&(b.source=v)}})}a={}}addTriangle_(t,n,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,n,i]})}addQuad_(t,n,i,r,s,o,a,l,c){const u=EC([s,o,a,l]),f=this.sourceWorldWidth_?oe(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&f>.5&&f<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const p=EC([t,n,i,r]);g=oe(p)/this.targetWorldWidth_>yA||g}!d&&this.sourceProj_.isGlobal()&&f&&(g=f>yA||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!bn(u,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!g){const p=[(t[0]+i[0])/2,(t[1]+i[1])/2],_=this.transformInv_(p);let y;d?y=(ka(s[0],h)+ka(a[0],h))/2-ka(_[0],h):y=(s[0]+a[0])/2-_[0];const b=(s[1]+a[1])/2-_[1];g=y*y+b*b>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const p=[(n[0]+i[0])/2,(n[1]+i[1])/2],_=this.transformInv_(p),y=[(r[0]+t[0])/2,(r[1]+t[1])/2],b=this.transformInv_(y);this.addQuad_(t,n,p,y,s,o,_,b,c-1),this.addQuad_(y,p,i,r,b,_,a,l,c-1)}else{const p=[(t[0]+n[0])/2,(t[1]+n[1])/2],_=this.transformInv_(p),y=[(i[0]+r[0])/2,(i[1]+r[1])/2],b=this.transformInv_(y);this.addQuad_(t,p,y,r,s,_,b,l,c-1),this.addQuad_(p,n,i,y,_,o,a,b,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(t,i,r,s,a,l),m&14||this.addTriangle_(t,i,n,s,a,o),m&&(m&13||this.addTriangle_(n,r,t,o,l,s),m&7||this.addTriangle_(n,r,i,o,l,a))}calculateSourceExtent(){const t=Ci();return this.triangles_.forEach(function(n,i,r){const s=n.source;Rf(t,s[0]),Rf(t,s[1]),Rf(t,s[2])}),t}getTriangles(){return this.triangles_}}const mnt=gnt;let $y;const hc=[];function vA(e,t,n,i,r){e.beginPath(),e.moveTo(0,0),e.lineTo(t,n),e.lineTo(i,r),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,i)+1,Math.max(n,r)),e.restore()}function Ny(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function pnt(){if($y===void 0){const e=Cn(6,6,hc);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",vA(e,4,5,4,0),vA(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;$y=Ny(t,0)||Ny(t,4)||Ny(t,8),H0(e),hc.push(e.canvas)}return $y}function bA(e,t,n,i){const r=GZ(n,t,e);let s=Zm(t,i,n);const o=t.getMetersPerUnit();o!==void 0&&(s*=o);const a=e.getMetersPerUnit();a!==void 0&&(s/=a);const l=e.getExtent();if(!l||Xh(l,r)){const c=Zm(e,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function _nt(e,t,n,i){const r=Ja(n);let s=bA(e,t,r,i);return(!isFinite(s)||s<=0)&&V$(n,function(o){return s=bA(e,t,o,i),isFinite(s)&&s>0}),s}function ynt(e,t,n,i,r,s,o,a,l,c,u,f){const h=Cn(Math.round(n*e),Math.round(n*t),hc);if(f||(h.imageSmoothingEnabled=!1),l.length===0)return h.canvas;h.scale(n,n);function d(v){return Math.round(v*n)/n}h.globalCompositeOperation="lighter";const g=Ci();l.forEach(function(v,x,w){z$(g,v.extent)});const m=oe(g),p=ei(g),_=Cn(Math.round(n*m/i),Math.round(n*p/i),hc);f||(_.imageSmoothingEnabled=!1);const y=n/i;l.forEach(function(v,x,w){const E=v.extent[0]-g[0],T=-(v.extent[3]-g[3]),I=oe(v.extent),S=ei(v.extent);v.image.width>0&&v.image.height>0&&_.drawImage(v.image,c,c,v.image.width-2*c,v.image.height-2*c,E*y,T*y,I*y,S*y)});const b=cl(o);return a.getTriangles().forEach(function(v,x,w){const E=v.source,T=v.target;let I=E[0][0],S=E[0][1],A=E[1][0],R=E[1][1],k=E[2][0],$=E[2][1];const L=d((T[0][0]-b[0])/s),N=d(-(T[0][1]-b[1])/s),D=d((T[1][0]-b[0])/s),V=d(-(T[1][1]-b[1])/s),Y=d((T[2][0]-b[0])/s),B=d(-(T[2][1]-b[1])/s),q=I,z=S;I=0,S=0,A-=q,R-=z,k-=q,$-=z;const Q=[[A,R,0,0,D-L],[k,$,0,0,Y-L],[0,0,A,R,V-N],[0,0,k,$,B-N]],nt=OZ(Q);if(nt){if(h.save(),h.beginPath(),pnt()||!f){h.moveTo(D,V);const rt=4,at=L-D,W=N-V;for(let G=0;G<rt;G++)h.lineTo(D+d((G+1)*at/rt),V+d(G*W/(rt-1))),G!=rt-1&&h.lineTo(D+d((G+1)*at/rt),V+d((G+1)*W/(rt-1)));h.lineTo(Y,B)}else h.moveTo(D,V),h.lineTo(L,N),h.lineTo(Y,B);h.clip(),h.transform(nt[0],nt[2],nt[1],nt[3],L,N),h.translate(g[0]-q,g[3]-z),h.scale(i/n,-i/n),h.drawImage(_.canvas,0,0),h.restore()}}),H0(_),hc.push(_.canvas),u&&(h.save(),h.globalCompositeOperation="source-over",h.strokeStyle="black",h.lineWidth=1,a.getTriangles().forEach(function(v,x,w){const E=v.target,T=(E[0][0]-b[0])/s,I=-(E[0][1]-b[1])/s,S=(E[1][0]-b[0])/s,A=-(E[1][1]-b[1])/s,R=(E[2][0]-b[0])/s,k=-(E[2][1]-b[1])/s;h.beginPath(),h.moveTo(S,A),h.lineTo(T,I),h.lineTo(R,k),h.closePath(),h.stroke()}),h.restore()),h.canvas}class vnt extends PN{constructor(t,n,i,r,s,o,a,l,c,u,f,h){super(s,yt.IDLE,{interpolate:!!h}),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const p=g?uc(d,g):d;if(kv(p)===0){this.state=yt.EMPTY;return}const _=t.getExtent();_&&(m?m=uc(m,_):m=_);const y=r.getResolution(this.wrappedTileCoord_[0]),b=_nt(t,i,p,y);if(!isFinite(b)||b<=0){this.state=yt.EMPTY;return}const v=u!==void 0?u:hnt;if(this.triangulation_=new mnt(t,i,p,m,b*v,y),this.triangulation_.getTriangles().length===0){this.state=yt.EMPTY;return}this.sourceZ_=n.getZForResolution(b);let x=this.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(x[1]=Ne(x[1],m[1],m[3]),x[3]=Ne(x[3],m[1],m[3])):x=uc(x,m)),!kv(x))this.state=yt.EMPTY;else{const w=n.getTileRangeForExtentAndZ(x,this.sourceZ_);for(let E=w.minX;E<=w.maxX;E++)for(let T=w.minY;T<=w.maxY;T++){const I=c(this.sourceZ_,E,T,a);I&&this.sourceTiles_.push(I)}this.sourceTiles_.length===0&&(this.state=yt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==yt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=yt.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ynt(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=yt.LOADED}this.changed()}load(){if(this.state==yt.IDLE){this.state=yt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const i=n.getState();if(i==yt.IDLE||i==yt.LOADING){t++;const r=Ht(n,Lt.CHANGE,function(s){const o=n.getState();(o==yt.LOADED||o==yt.ERROR||o==yt.EMPTY)&&(le(r),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,r){n.getState()==yt.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(le),this.sourcesListenerKeys_=null}release(){this.canvas_&&(H0(this.canvas_.getContext("2d")),hc.push(this.canvas_),this.canvas_=null),super.release()}}const qv=vnt;class bnt extends xx{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Ci(),this.tmpTileRange_=new qN(0,0,0,0)}isDrawableTile(t){const n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==yt.LOADED||i==yt.EMPTY||i==yt.ERROR&&!r}getTile(t,n,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(t,n,i,s,o);return c.getState()==yt.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Ie(n.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!Xh(s,r))return null;const o=n.pixelRatio,a=n.viewState.projection,l=n.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),f=c.getTilePixelRatio(n.pixelRatio);for(let h=u.getZForResolution(l.resolution);h>=u.getMinZoom();--h){const d=u.getTileCoordForCoordAndZ(r,h),g=c.getTile(h,d[1],d[2],o,a);if(!(g instanceof FN||g instanceof qv)||g instanceof qv&&g.getState()===yt.EMPTY)return null;if(g.getState()!==yt.LOADED)continue;const m=u.getOrigin(h),p=Kn(u.getTileSize(h)),_=u.getResolution(h),y=Math.floor(f*((r[0]-m[0])/_-d[1]*p[0])),b=Math.floor(f*((m[1]-r[1])/_-d[2]*p[1])),v=Math.round(f*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),y+v,b+v)}return null}loadedTileCallback(t,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,n,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,n){const i=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=t.pixelRatio,u=this.getLayer(),f=u.getSource(),h=f.getRevision(),d=f.getTileGridForProjection(s),g=d.getZForResolution(o,f.zDirection),m=d.getResolution(g);let p=t.extent;const _=t.viewState.resolution,y=f.getTilePixelRatio(c),b=Math.round(oe(p)/_*c),v=Math.round(ei(p)/_*c),x=i.extent&&us(i.extent);x&&(p=uc(p,us(i.extent)));const w=m*b/2/y,E=m*v/2/y,T=[a[0]-w,a[1]-E,a[0]+w,a[1]+E],I=d.getTileRangeForExtentAndZ(p,g),S={};S[g]={};const A=this.createLoadedTileFinder(f,s,S),R=this.tmpExtent,k=this.tmpTileRange_;this.newTiles_=!1;const $=l?Nv(r.center,_,l,t.size):void 0;for(let Q=I.minX;Q<=I.maxX;++Q)for(let nt=I.minY;nt<=I.maxY;++nt){if(l&&!d.tileCoordIntersectsViewport([g,Q,nt],$))continue;const rt=this.getTile(g,Q,nt,t);if(this.isDrawableTile(rt)){const G=Jt(this);if(rt.getState()==yt.LOADED){S[g][rt.tileCoord.toString()]=rt;let F=rt.inTransition(G);F&&i.opacity!==1&&(rt.endTransition(G),F=!1),!this.newTiles_&&(F||!this.renderedTiles.includes(rt))&&(this.newTiles_=!0)}if(rt.getAlpha(G,t.time)===1)continue}const at=d.getTileCoordChildTileRange(rt.tileCoord,k,R);let W=!1;at&&(W=A(g+1,at)),W||d.forEachTileCoordParentTileRange(rt.tileCoord,A,k,R)}const L=m/o*c/y;nr(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,l,-b/2,-v/2);const N=Uw(this.pixelTransform);this.useContainer(n,N,this.getBackground(t));const D=this.context,V=D.canvas;N0(this.inversePixelTransform,this.pixelTransform),nr(this.tempTransform,b/2,v/2,L,L,0,-b/2,-v/2),V.width!=b||V.height!=v?(V.width=b,V.height=v):this.containerReused||D.clearRect(0,0,b,v),x&&this.clipUnrotated(D,t,x),f.getInterpolate()||(D.imageSmoothingEnabled=!1),this.preRender(D,t),this.renderedTiles.length=0;let Y=Object.keys(S).map(Number);Y.sort(Co);let B,q,z;i.opacity===1&&(!this.containerReused||f.getOpaque(t.viewState.projection))?Y=Y.reverse():(B=[],q=[]);for(let Q=Y.length-1;Q>=0;--Q){const nt=Y[Q],rt=f.getTilePixelSize(nt,c,s),W=d.getResolution(nt)/m,G=rt[0]*W*L,F=rt[1]*W*L,j=d.getTileCoordForCoordAndZ(cl(T),nt),Z=d.getTileCoordExtent(j),C=Ie(this.tempTransform,[y*(Z[0]-T[0])/m,y*(T[3]-Z[3])/m]),O=y*f.getGutterForProjection(s),P=S[nt];for(const H in P){const U=P[H],X=U.tileCoord,lt=j[1]-X[1],tt=Math.round(C[0]-(lt-1)*G),et=j[2]-X[2],K=Math.round(C[1]-(et-1)*F),dt=Math.round(C[0]-lt*G),ut=Math.round(C[1]-et*F),gt=tt-dt,mt=K-ut,Tt=g===nt,Nt=Tt&&U.getAlpha(Jt(this),t.time)!==1;let Ct=!1;if(!Nt)if(B){z=[dt,ut,dt+gt,ut,dt+gt,ut+mt,dt,ut+mt];for(let ee=0,Ee=B.length;ee<Ee;++ee)if(g!==nt&&nt<q[ee]){const _e=B[ee];bn([dt,ut,dt+gt,ut+mt],[_e[0],_e[3],_e[4],_e[7]])&&(Ct||(D.save(),Ct=!0),D.beginPath(),D.moveTo(z[0],z[1]),D.lineTo(z[2],z[3]),D.lineTo(z[4],z[5]),D.lineTo(z[6],z[7]),D.moveTo(_e[6],_e[7]),D.lineTo(_e[4],_e[5]),D.lineTo(_e[2],_e[3]),D.lineTo(_e[0],_e[1]),D.clip())}B.push(z),q.push(nt)}else D.clearRect(dt,ut,gt,mt);this.drawTileImage(U,t,dt,ut,gt,mt,O,Tt),B&&!Nt?(Ct&&D.restore(),this.renderedTiles.unshift(U)):this.renderedTiles.push(U),this.updateUsedTiles(t.usedTiles,f,U)}}return this.renderedRevision=h,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!rh(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(t,f,d,c,s,p,g,u.getPreload()),this.scheduleExpireCache(t,f),this.postRender(D,t),i.extent&&D.restore(),D.imageSmoothingEnabled=!0,N!==V.style.transform&&(V.style.transform=N),this.container}drawTileImage(t,n,i,r,s,o,a,l){const c=this.getTileImage(t);if(!c)return;const u=Jt(this),f=n.layerStatesArray[n.layerIndex],h=f.opacity*(l?t.getAlpha(u,n.time):1),d=h!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),d&&this.context.restore(),h!==f.opacity?n.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,n){if(n.canExpireCache()){const i=(function(r,s,o){const a=Jt(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,n);t.postRenderFunctions.push(i)}}updateUsedTiles(t,n,i){const r=Jt(n);r in t||(t[r]={}),t[r][i.getKey()]=!0}manageTilePyramid(t,n,i,r,s,o,a,l,c){const u=Jt(n);u in t.wantedTiles||(t.wantedTiles[u]={});const f=t.wantedTiles[u],h=t.tileQueue,d=i.getMinZoom(),g=t.viewState.rotation,m=g?Nv(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let p=0,_,y,b,v,x,w;for(w=d;w<=a;++w)for(y=i.getTileRangeForExtentAndZ(o,w,y),b=i.getResolution(w),v=y.minX;v<=y.maxX;++v)for(x=y.minY;x<=y.maxY;++x)g&&!i.tileCoordIntersectsViewport([w,v,x],m)||(a-w<=l?(++p,_=n.getTile(w,v,x,r,s),_.getState()==yt.IDLE&&(f[_.getKey()]=!0,h.isKeyQueued(_.getKey())||h.enqueue([_,u,i.getTileCoordCenter(_.tileCoord),b])),c!==void 0&&c(_)):n.useTile(w,v,x,s));n.updateCacheSize(p,s)}}const wnt=bnt;class xnt extends fnt{constructor(t){super(t)}createRenderer(){return new wnt(this)}}const Ent=xnt;class Tnt extends xx{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,s=r.resolution,o=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(n.extent!==void 0&&(l=uc(l,us(n.extent,r.projection))),!a[$e.ANIMATING]&&!a[$e.INTERACTING]&&!ul(l))if(o){const c=r.projection,u=o.getImage(l,s,i,c);u&&(this.loadImage(u)?this.image_=u:u.getState()===Dt.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Ie(n.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!Xh(s,r))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=oe(o),c=Math.floor(a.width*((r[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=ei(o),f=Math.floor(a.height*((o[3]-r[1])/u));return f<0||f>=a.height?null:this.getImageData(a,c,f)}renderFrame(t,n){const i=this.image_,r=i.getExtent(),s=i.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=i.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],u=t.pixelRatio,f=t.viewState,h=f.center,d=f.resolution,g=u*o/(d*l),m=u*a/(d*l),p=t.extent,_=f.resolution,y=f.rotation,b=Math.round(oe(p)/_*u),v=Math.round(ei(p)/_*u);nr(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,y,-b/2,-v/2),N0(this.inversePixelTransform,this.pixelTransform);const x=Uw(this.pixelTransform);this.useContainer(n,x,this.getBackground(t));const w=this.context,E=w.canvas;E.width!=b||E.height!=v?(E.width=b,E.height=v):this.containerReused||w.clearRect(0,0,b,v);let T=!1,I=!0;if(c.extent){const $=us(c.extent,f.projection);I=bn($,t.extent),T=I&&!go($,t.extent),T&&this.clipUnrotated(w,t,$)}const S=i.getImage(),A=nr(this.tempTransform,b/2,v/2,g,m,0,l*(r[0]-h[0])/o,l*(h[1]-r[3])/a);this.renderedResolution=a*u/l;const R=S.width*A[0],k=S.height*A[3];if(this.getLayer().getSource().getInterpolate()||(w.imageSmoothingEnabled=!1),this.preRender(w,t),I&&R>=.5&&k>=.5){const $=A[4],L=A[5],N=c.opacity;let D;N!==1&&(D=w.globalAlpha,w.globalAlpha=N),w.drawImage(S,0,0,+S.width,+S.height,$,L,R,k),N!==1&&(w.globalAlpha=D)}return this.postRender(w,t),T&&w.restore(),w.imageSmoothingEnabled=!0,x!==E.style.transform&&(E.style.transform=x),this.container}}const Snt=Tnt;function Cnt(e){return Array.isArray(e)?Math.min(...e):e}class Ant extends Snt{constructor(t){super(t),this.vectorRenderer_=new Ctt(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=qi(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const n=Ie(this.coordinateToVectorPixelTransform_,Ie(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const n=t.pixelRatio,i=t.viewState,r=i.resolution,s=t.viewHints,o=this.vectorRenderer_;let a=t.extent;this.layerImageRatio_!==1&&(a=a.slice(0),yZ(a,this.layerImageRatio_));const l=oe(a)/r,c=ei(a)/r;if(!s[$e.ANIMATING]&&!s[$e.INTERACTING]&&!ul(a)){o.useContainer(null,null);const u=o.context,f=t.layerStatesArray[t.layerIndex],h=Object.assign({},f,{opacity:1}),d=Object.assign({},t,{declutterTree:new yx(9),extent:a,size:[l,c],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[h],layerIndex:0});let g=!0;const m=new Ntt(a,r,n,u.canvas,function(p){o.prepareFrame(d)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(d,null)&&(o.renderDeclutter(d),g=!1),p())});m.addEventListener(Lt.CHANGE,()=>{if(m.getState()!==Dt.LOADED)return;this.image_=g?null:m;const p=m.getPixelRatio(),_=Cnt(m.getResolution())*n/p;this.renderedResolution=_,this.coordinateToVectorPixelTransform_=nr(this.coordinateToVectorPixelTransform_,l/2,c/2,1/_,-1/_,0,-i.center[0],-i.center[1])}),m.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,n,i,r,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,n,i,r,s):super.forEachFeatureAtCoordinate(t,n,i,r,s)}}const Mnt=Ant;class Rnt extends zQ{constructor(t){t=t||{};const n=Object.assign({},t);delete n.imageRatio,super(n),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new Mnt(this)}}const Int=Rnt,Dy={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Ll=[0,0,0],Zs=5;class Lnt{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Ut(JK(this.resolutions_,function(r,s){return s-r},!0),"`resolutions` must be sorted in descending order");let n;if(!t.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!n)n=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Ut(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=cl(i)),Ut(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Ut(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:dx,Ut(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(r,s){const o=new qN(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,n,i){const r=this.getTileRangeForExtentAndZ(t,n);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([n,s,a])}forEachTileCoordParentTileRange(t,n,i,r){let s,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=Il(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),n(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,n,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,o=t[2]*2;return Il(s,s+1,o,o+1,n)}const r=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,n)}return null}getTileRangeForTileCoordAndZ(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const r=t[0],s=t[1],o=t[2];if(n===r)return Il(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-r),c=Math.floor(s*l),u=Math.floor(o*l);if(n<r)return Il(c,c,u,u,i);const f=Math.floor(l*(s+1))-1,h=Math.floor(l*(o+1))-1;return Il(c,f,u,h,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(t,n,i){this.getTileCoordForXYAndZ_(t[0],t[3],n,!1,Ll);const r=Ll[1],s=Ll[2];this.getTileCoordForXYAndZ_(t[2],t[1],n,!0,Ll);const o=Ll[1],a=Ll[2];return Il(r,o,s,a,i)}getTileCoordCenter(t){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Kn(this.getTileSize(t[0]),this.tmpSize_);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,n){const i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Kn(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*r,a=i[1]-(t[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return Mo(o,a,l,c,n)}getTileCoordForCoordAndResolution(t,n,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],n,!1,i)}getTileCoordForXYAndResolution_(t,n,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=Kn(this.getTileSize(o),this.tmpSize_);let u=a*(t-l[0])/i/c[0],f=a*(l[1]-n)/i/c[1];return r?(u=ng(u,Zs)-1,f=ng(f,Zs)-1):(u=eg(u,Zs),f=eg(f,Zs)),hA(o,u,f,s)}getTileCoordForXYAndZ_(t,n,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=Kn(this.getTileSize(i),this.tmpSize_);let c=(t-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return r?(c=ng(c,Zs)-1,u=ng(u,Zs)-1):(c=eg(c,Zs),u=eg(u,Zs)),hA(i,c,u,s)}getTileCoordForCoordAndZ(t,n,i){return this.getTileCoordForXYAndZ_(t[0],t[1],n,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,n){const i=Hw(this.resolutions_,t,n||0);return Ne(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,n){return nN(n,0,n.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const n=this.resolutions_.length,i=new Array(n);for(let r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}}const JN=Lnt;function QN(e){let t=e.getDefaultTileGrid();return t||(t=Nnt(e),e.setDefaultTileGrid(t)),t}function Ont(e,t,n){const i=t[0],r=e.getTileCoordCenter(t),s=Ax(n);if(!Xh(s,r)){const o=oe(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,e.getTileCoordForCoordAndZ(r,i)}return t}function knt(e,t,n,i){i=i!==void 0?i:"top-left";const r=tD(e,t,n);return new JN({extent:e,origin:pZ(e,i),resolutions:r,tileSize:n})}function $nt(e){const t=e||{},n=t.extent||Fe("EPSG:3857").getExtent(),i={extent:n,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:tD(n,t.maxZoom,t.tileSize,t.maxResolution)};return new JN(i)}function tD(e,t,n,i){t=t!==void 0?t:NJ,n=Kn(n!==void 0?n:dx);const r=ei(e),s=oe(e);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function Nnt(e,t,n,i){const r=Ax(e);return knt(r,t,n,i)}function Ax(e){e=Fe(e);let t=e.getExtent();if(!t){const n=180*Nc.degrees/e.getMetersPerUnit();t=Mo(-n,-n,n,n)}return t}class Dnt extends DN{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const n=[256,256];this.tileGrid&&Kn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new jN(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,n){const i=this.getTileCacheForProjection(t);i&&i.expireCache(n)}forEachLoadedTile(t,n,i,r){const s=this.getTileCacheForProjection(t);if(!s)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let f=i.minY;f<=i.maxY;++f)l=j0(n,u,f),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===yt.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const n=t?this.getTileGridForProjection(t):this.tileGrid;return n?n.getResolutions():null}getTile(t,n,i,r,s){return At()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:QN(t)}getTileCacheForProjection(t){const n=this.getProjection();return Ut(n===null||ua(n,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,n,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=Kn(r.getTileSize(t),this.tmpSize);return s==1?o:dJ(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=Ont(i,t,n)),Ket(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,n){const i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,n,i,r){}}class Pnt extends Os{constructor(t,n){super(t),this.tile=n}}const Fnt=Dnt;function znt(e,t){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return e.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],u=t.getFullTileRange(c);return Ut(u,"The {-y} placeholder requires a tile grid with extent"),(u.getHeight()-o[2]-1).toString()})}}function Wnt(e,t){const n=e.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=znt(e[r],t);return Vnt(i)}function Vnt(e){return e.length===1?e[0]:function(t,n,i){if(!t)return;const r=qet(t),s=ka(r,e.length);return e[s](t,n,i)}}function Hnt(e){const t=[];let n=/\{([a-z])-([a-z])\}/.exec(e);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)t.push(e.replace(n[0],String.fromCharCode(s)));return t}if(n=/\{(\d+)-(\d+)\}/.exec(e),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)t.push(e.replace(n[0],r.toString()));return t}return t.push(e),t}class Mx extends Fnt{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Mx.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const n=t.target,i=Jt(n),r=n.getState();let s;r==yt.LOADING?(this.tileLoadingKeys_[i]=!0,s=Dy.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==yt.ERROR?Dy.TILELOADERROR:r==yt.LOADED?Dy.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Pnt(s,n))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(t){const n=Hnt(t);this.urls=n,this.setUrls(n)}setUrls(t){this.urls=t;const n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Wnt(t,this.tileGrid),n):this.setKey(n)}tileUrlFunction(t,n,i){}useTile(t,n,i){const r=j0(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const Gnt=Mx;class Bnt extends Gnt{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Unt,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:FN,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,n){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?n:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!ua(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!ua(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||ua(n,t)))return this.tileGrid;const i=Jt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=QN(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const n=this.getProjection();if(!n||ua(n,t))return this.tileCache;const i=Jt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new jN(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,n,i,r,s,o){const a=[t,n,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?yt.IDLE:yt.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(Lt.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,n,i,r,s){const o=this.getProjection();if(!o||!s||ua(o,s))return this.getTileInternal(t,n,i,r,o||s);const a=this.getTileCacheForProjection(s),l=[t,n,i];let c;const u=YN(l);a.containsKey(u)&&(c=a.get(u));const f=this.getKey();if(c&&c.key==f)return c;const h=this.getTileGridForProjection(o),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),m=new qv(o,h,s,d,l,g,this.getTilePixelRatio(r),this.getGutter(),(p,_,y,b)=>this.getTileInternal(p,_,y,b,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=f,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(t,n,i,r,s){let o=null;const a=j0(t,n,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,n,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(t,n,i,r,s,l),c.getState()==yt.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(t,n){const i=Fe(t);if(i){const r=Jt(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function Unt(e,t){e.getImage().src=t}const Ynt=Bnt;class jnt extends Ynt{constructor(t){t=t||{};const n=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:$nt({extent:Ax(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Xnt=jnt,qnt='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Knt extends Xnt{constructor(t){t=t||{};let n;t.attributions!==void 0?n=t.attributions:n=[qnt];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",r=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}}const Znt=Knt,wA=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Py=1,ju=8;class pp{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,i]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const r=i>>4;if(r!==Py)throw new Error(`Got v${r} data when expected v${Py}.`);const s=wA[i&15];if(!s)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,2,1),[a]=new Uint32Array(t,4,1);return new pp(a,o,s,t)}constructor(t,n=64,i=Float64Array,r){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=i,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const s=wA.indexOf(this.ArrayType),o=t*2*this.ArrayType.BYTES_PER_ELEMENT,a=t*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-a%8)%8;if(s<0)throw new Error(`Unexpected typed array class: ${i}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,ju,t),this.coords=new this.ArrayType(this.data,ju+a+l,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(ju+o+a+l),this.ids=new this.IndexArrayType(this.data,ju,t),this.coords=new this.ArrayType(this.data,ju+a+l,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Py<<4)+s]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){const i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=t,this.coords[this._pos++]=n,i}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Kv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,i,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:o,nodeSize:a}=this,l=[0,s.length-1,0],c=[];for(;l.length;){const u=l.pop()||0,f=l.pop()||0,h=l.pop()||0;if(f-h<=a){for(let p=h;p<=f;p++){const _=o[2*p],y=o[2*p+1];_>=t&&_<=i&&y>=n&&y<=r&&c.push(s[p])}continue}const d=h+f>>1,g=o[2*d],m=o[2*d+1];g>=t&&g<=i&&m>=n&&m<=r&&c.push(s[d]),(u===0?t<=g:n<=m)&&(l.push(h),l.push(d-1),l.push(1-u)),(u===0?i>=g:r>=m)&&(l.push(d+1),l.push(f),l.push(1-u))}return c}within(t,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:s,nodeSize:o}=this,a=[0,r.length-1,0],l=[],c=i*i;for(;a.length;){const u=a.pop()||0,f=a.pop()||0,h=a.pop()||0;if(f-h<=o){for(let p=h;p<=f;p++)xA(s[2*p],s[2*p+1],t,n)<=c&&l.push(r[p]);continue}const d=h+f>>1,g=s[2*d],m=s[2*d+1];xA(g,m,t,n)<=c&&l.push(r[d]),(u===0?t-i<=g:n-i<=m)&&(a.push(h),a.push(d-1),a.push(1-u)),(u===0?t+i>=g:n+i>=m)&&(a.push(d+1),a.push(f),a.push(1-u))}return l}}function Kv(e,t,n,i,r,s){if(r-i<=n)return;const o=i+r>>1;eD(e,t,o,i,r,s),Kv(e,t,n,i,o-1,1-s),Kv(e,t,n,o+1,r,1-s)}function eD(e,t,n,i,r,s){for(;r>i;){if(r-i>600){const c=r-i+1,u=n-i+1,f=Math.log(c),h=.5*Math.exp(2*f/3),d=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1),g=Math.max(i,Math.floor(n-u*h/c+d)),m=Math.min(r,Math.floor(n+(c-u)*h/c+d));eD(e,t,n,g,m,s)}const o=t[2*n+s];let a=i,l=r;for(Xu(e,t,i,n),t[2*r+s]>o&&Xu(e,t,i,r);a<l;){for(Xu(e,t,a,l),a++,l--;t[2*a+s]<o;)a++;for(;t[2*l+s]>o;)l--}t[2*i+s]===o?Xu(e,t,i,l):(l++,Xu(e,t,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function Xu(e,t,n,i){Fy(e,n,i),Fy(t,2*n,2*i),Fy(t,2*n+1,2*i+1)}function Fy(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function xA(e,t,n,i){const r=e-n,s=t-i;return r*r+s*s}class Jnt{constructor(t=[],n=Qnt){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:i}=this,r=n[t];for(;t>0;){const s=t-1>>1,o=n[s];if(i(r,o)>=0)break;n[t]=o,t=s}n[t]=r}_down(t){const{data:n,compare:i}=this,r=this.length>>1,s=n[t];for(;t<r;){let o=(t<<1)+1,a=n[o];const l=o+1;if(l<this.length&&i(n[l],a)<0&&(o=l,a=n[l]),i(a,s)>=0)break;n[t]=a,t=o}n[t]=s}}function Qnt(e,t){return e<t?-1:e>t?1:0}const tit=6371,wr=Math.PI/180;function eit(e,t,n,i,r,s){let o=1;const a=[];i===void 0&&(i=1/0),r!==void 0&&(o=va(r/tit));const l=new Jnt([],nit);let c={left:0,right:e.ids.length-1,axis:0,dist:0,minLng:-180,minLat:-90,maxLng:180,maxLat:90};const u=Math.cos(n*wr);for(;c;){const f=c.right,h=c.left;if(f-h<=e.nodeSize)for(let d=h;d<=f;d++){const g=e.ids[d];(!s||s(g))&&l.push({item:g,dist:TA(t,n,e.coords[2*d],e.coords[2*d+1],u)})}else{const d=h+f>>1,g=e.coords[2*d],m=e.coords[2*d+1],p=e.ids[d];(!s||s(p))&&l.push({item:p,dist:TA(t,n,g,m,u)});const _=(c.axis+1)%2,y={left:h,right:d-1,axis:_,minLng:c.minLng,minLat:c.minLat,maxLng:c.axis===0?g:c.maxLng,maxLat:c.axis===1?m:c.maxLat,dist:0},b={left:d+1,right:f,axis:_,minLng:c.axis===0?g:c.minLng,minLat:c.axis===1?m:c.minLat,maxLng:c.maxLng,maxLat:c.maxLat,dist:0};y.dist=EA(t,n,u,y),b.dist=EA(t,n,u,b),l.push(y),l.push(b)}for(;l.length&&typeof l.peek().item<"u";){const d=l.pop();if(d.dist>o||(a.push(d.item),a.length===i))return a}c=l.pop()}return a}function EA(e,t,n,i){const r=i.minLng,s=i.maxLng,o=i.minLat,a=i.maxLat;if(e>=r&&e<=s)return t<o?va((t-o)*wr):t>a?va((t-a)*wr):0;const l=Math.min(va((e-r)*wr),va((e-s)*wr)),c=iit(t,l);return c>o&&c<a?Ug(l,n,t,c):Math.min(Ug(l,n,t,o),Ug(l,n,t,a))}function nit(e,t){return e.dist-t.dist}function va(e){const t=Math.sin(e/2);return t*t}function Ug(e,t,n,i){return t*Math.cos(i*wr)*e+va((n-i)*wr)}function TA(e,t,n,i,r){const s=va((e-n)*wr);return Ug(s,r,t,i)}function iit(e,t){const n=1-2*t;return n<=0?e>0?90:-90:Math.atan(Math.tan(e*wr)/n)/wr}const nD=document.createElement("i"),iD=document.createElement("i");nD.setAttribute("class","fa-solid fa-expand");iD.setAttribute("class","fa-solid fa-compress");const rit={props:{features:{type:Array,required:!0},sessions:{type:Array,required:!0},receivedRecord:Zt,hasPace:Boolean,hasCadence:Boolean,hasHeartRate:Boolean,hasPower:Boolean,hasTemperature:Boolean},data(){return{popupFreeze:new Boolean,popupRecord:new Zt,hoveredRecord:new Zt,popupActivityIndex:0,popupTimezoneOffsetHours:0,popupOverlay:new fA({}),startingPointStyle:new Na({image:new lp({crossOrigin:"anonymous",src:jK,scale:1})}),destinationPointStyle:new Na({image:new lp({crossOrigin:"anonymous",src:YK,scale:1})}),vec:new Int({source:new ktt({features:[]}),visible:!0,style:new Na({stroke:new cx({color:"#34495e",width:4})})}),map:new Bet({controls:zN(),layers:[new Ent({source:new Znt})],view:new mr({center:[0,0],zoom:1,enableRotation:!1,projection:"EPSG:4326"})}),zoomToExtent:new ky,pointer:new Gg,debug:!1,searchMethod:"standard",sessionTimestamp:"",kdIndexTimestamp:"",kdIndexToRecord:[],kdIndex:new pp(0),kdIndexing:!1}},watch:{searchMethod:{handler(e){e=="kdtree"&&!this.kdIndexed&&this.indexing_KDtree(this.sessions)}},features:{handler(e){this.$nextTick(()=>{this.map.setTarget(this.$refs.map),requestAnimationFrame(()=>this.updateMapSource(e))})}},sessions:{handler(){this.sessionTimestamp=It.now().toString(),this.searchMethod=="kdtree"&&!this.kdIndexed&&this.indexing_KDtree(this.sessions)}},zoomToExtent:{handler(e,t){this.map.removeControl(t),this.map.addControl(e)}},receivedRecord:{handler(e){if(this.popupRecord=e,JSON.stringify(e)==JSON.stringify(new Zt)){this.popupOverlay.setPosition(void 0);return}this.popupOverlay.setPosition([e.positionLong,e.positionLat])}},hoveredRecord:{handler(e){this.popupRecord=e,this.$emit("hoveredRecord",e)}}},expose:["showPopUpRecord"],methods:{toStringHDMS:NZ,toTimezoneDateString:Ww,formatPace:bc,updateMapSource(e){var o;this.popupOverlay.setPosition(void 0);const t=this.map.getView(),n=this.vec.getSource();if(e.length==0){n.clear();return}n.clear(),n.addFeatures(e),t.fit(n.getExtent(),{padding:[50,50,50,50]});const i=new Array;let r=-1;const s=new Map;for(let a=0;a<e.length;a++){const[,l]=e[a].getId().split("-").map(f=>parseInt(f)),c=(o=e[a])==null?void 0:o.getGeometry();if(r!=l){const f=new Gg(new Dc(c.getFirstCoordinate()));f.setStyle(this.startingPointStyle),f.setId(`startingPoint-${l}`),i.push(f)}r=l;const u=new Gg(new Dc(c.getLastCoordinate()));u.setStyle(this.destinationPointStyle),u.setId(`destinationPoint-${l}`),s.set(`destinationPoint-${l}`,u)}n.addFeatures(i),n.addFeatures(Array.from(s,([,a])=>a)),this.zoomToExtent=new ky({extent:t.getViewStateAndExtent().extent})},findNearestRecord(e,t){const n=this.debug;n&&console.time("Standard");const[,i,r,s]=e.split("-").map(l=>parseInt(l));this.popupActivityIndex=i;let o=new Zt,a=Number.MAX_VALUE;this.popupTimezoneOffsetHours=this.sessions[i].timezone;for(let l=r;l<=s;l++){const c=this.sessions[i].records[l];if(!c.positionLong||!c.positionLat)continue;const u=Math.abs(Math.sqrt(Math.pow(c.positionLong-t[0],2)+Math.pow(c.positionLat-t[1],2)));u<a&&(a=u,o=c)}return n&&console.timeEnd("Standard"),o},async indexing_KDtree(e){const t=this.debug;t&&console.time("KDtree Indexing"),this.kdIndexing=!0;let n=0;e.forEach(i=>{n+=i.records.length}),this.kdIndexToRecord=[],this.kdIndex=new pp(n),e.forEach((i,r)=>i.records.forEach((s,o)=>{s.positionLat!=null&&s.positionLong!=null?this.kdIndexToRecord[this.kdIndex.add(s.positionLong,s.positionLat)]=`${r}-${o}`:this.kdIndexToRecord[this.kdIndex.add(0,0)]=`${r}-${o}`})),this.kdIndex.finish(),this.kdIndexTimestamp=this.sessionTimestamp,this.kdIndexing=!1,t&&console.timeEnd("KDtree Indexing")},getClosestPoint_KDtree(e){const t=this.debug;t&&console.time("KDTree");const n=eit(this.kdIndex,e[0],e[1],1);if(n.length>0){const[i,r]=this.kdIndexToRecord[n[n.length-1]].split("-").map(s=>parseInt(s));return t&&console.timeEnd("KDTree"),this.sessions[i].records[r]}return t&&console.timeEnd("KDTree"),new Zt},lineStringFeatureListener(e){if(e.type=="singleclick"&&(this.popupFreeze=!this.popupFreeze&&this.popupOverlay.getPosition()!=null),this.popupFreeze||(this.hoveredRecord=new Zt,this.popupOverlay.setPosition(void 0)),this.popupFreeze==!0&&this.popupOverlay.getPosition()!=null)return;const t=this.map.getFeaturesAtPixel(e.pixel,{hitTolerance:10});let n=null;for(let i=0;i<t.length;i++)if(t[i].getGeometry()instanceof ep){n=t[i];break}n!=null&&(this.hoveredRecord=(()=>this.searchMethod=="kdtree"&&this.kdIndexed?this.getClosestPoint_KDtree(e.coordinate):this.findNearestRecord(n.getId(),e.coordinate))(),this.popupOverlay.setPosition([this.hoveredRecord.positionLong,this.hoveredRecord.positionLat]),this.popupFreeze=e.type=="singleclick")},showPopUpRecord(e){this.popupOverlay.setPosition(void 0),e&&(this.popupRecord=e,this.popupOverlay.setPosition([this.popupRecord.positionLong,this.popupRecord.positionLat]),this.popupFreeze=!0)},updateExtent(){this.$nextTick(()=>{const e=this.vec.getSource().getExtent();ul(e)||(this.map.getView().fit(e,{padding:[50,50,50,50]}),this.zoomToExtent=new ky({extent:this.map.getView().getViewStateAndExtent().extent}))})}},computed:{titleWidth(){this.popupRecord;let e=0;return document.querySelectorAll('.popup-content > div:not([style*="display: none"]) > span:nth-child(1)').forEach(n=>{const i=n.innerHTML.length*6;e=Math.max(e,i)}),e},kdIndexed(){return this.kdIndexTimestamp!=""&&this.kdIndexTimestamp==this.sessionTimestamp}},mounted(){this.popupOverlay=new fA({element:document.getElementById("popup")}),this.map.setTarget(this.$refs.map),this.map.addOverlay(this.popupOverlay),this.map.addLayer(this.vec),this.map.addControl(new ent({label:nD,labelActive:iD})),this.map.addControl(new rnt),this.map.on("change:size",this.updateExtent),this.map.on("pointermove",this.lineStringFeatureListener),this.map.on("singleclick",this.lineStringFeatureListener),this.updateMapSource(this.features)},unmounted(){this.map.un("change:size",this.updateExtent),this.map.un("pointermove",this.lineStringFeatureListener),this.map.un("singleclick",this.lineStringFeatureListener)}};const ai=e=>(Nr("data-v-401fc132"),e=e(),Dr(),e),sit={class:"map-container position-relative w-100 h-100"},oit={key:0},ait={key:1,class:"map",ref:"map"},lit={id:"popup",class:"ol-popup"},cit={class:"popup-content"},uit=ai(()=>M("span",null," km",-1)),fit=ai(()=>M("span",null," km/h",-1)),hit={key:0},dit=ai(()=>M("span",null," /km",-1)),git={key:1},mit=ai(()=>M("span",null," rpm",-1)),pit={key:2},_it=ai(()=>M("span",null," bpm",-1)),yit={key:3},vit=ai(()=>M("span",null," watts",-1)),bit={key:4},wit=ai(()=>M("span",null," °C",-1)),xit={style:{display:"grid"}},Eit={style:{"grid-column":"1"}},Tit=ai(()=>M("span",null," masl",-1)),Sit={style:{"grid-column":"2"}},Cit=ai(()=>M("span",null,"(Grade: ",-1)),Ait=ai(()=>M("span",null," %)",-1)),Mit={class:"options position-absolute d-inline-flex"},Rit={class:"form-control-sm"},Iit=["disabled"],Lit=ai(()=>M("option",{value:"standard",selected:""},"Standard",-1)),Oit=ai(()=>M("option",{value:"kdtree"},"KD Tree",-1)),kit=[Lit,Oit],$it={class:"form-control-sm form-check"},Nit=ai(()=>M("label",{class:"form-check-label",for:"flexCheckDefault"}," Debug ",-1));function Dit(e,t,n,i,r,s){var o,a;return ct(),ft("div",sit,[((o=n.features)==null?void 0:o.length)==0?(ct(),ft("div",oit,"No map data")):(ct(),ft("div",ait,null,512)),M("div",lit,[M("div",cit,[M("div",null,[M("span",{style:Ze({width:s.titleWidth+"px"})},"Time:",4),M("span",null,ot(r.popupRecord.timestamp?s.toTimezoneDateString(r.popupRecord.timestamp,r.popupTimezoneOffsetHours):"-"),1)]),M("div",null,[M("span",{style:Ze({width:s.titleWidth+"px"})},"Distance:",4),M("span",null,ot(r.popupRecord.distance?(r.popupRecord.distance/1e3).toFixed(2):"-"),1),uit]),M("div",null,[M("span",{style:Ze({width:s.titleWidth+"px"})},"Speed:",4),M("span",null,ot(r.popupRecord.speed?(r.popupRecord.speed*3600/1e3).toFixed(2):"-"),1),fit]),n.hasPace?(ct(),ft("div",hit,[M("span",{style:Ze({width:s.titleWidth+"px"})},"Pace:",4),M("span",null,ot(r.popupRecord.pace?s.formatPace(r.popupRecord.pace):"-"),1),dit])):Rt("",!0),n.hasCadence?(ct(),ft("div",git,[M("span",{style:Ze({width:s.titleWidth+"px"})},"Cadence:",4),M("span",null,ot(r.popupRecord.cadence?r.popupRecord.cadence:"-"),1),mit])):Rt("",!0),n.hasHeartRate?(ct(),ft("div",pit,[M("span",{style:Ze({width:s.titleWidth+"px"})},"Heart Rate:",4),M("span",null,ot(r.popupRecord.heartRate?r.popupRecord.heartRate:"-"),1),_it])):Rt("",!0),n.hasPower?(ct(),ft("div",yit,[M("span",{style:Ze({width:s.titleWidth+"px"})},"Power:",4),M("span",null,ot(r.popupRecord.power?r.popupRecord.power:"-"),1),vit])):Rt("",!0),n.hasTemperature?(ct(),ft("div",bit,[M("span",{style:Ze({width:s.titleWidth+"px"})},"Temperature:",4),M("span",null,ot(r.popupRecord.temperature?r.popupRecord.temperature:"-"),1),wit])):Rt("",!0),M("div",xit,[M("div",Eit,[M("span",{style:Ze({width:s.titleWidth+"px"})},"Altitude:",4),M("span",null,ot(r.popupRecord.altitude?(a=r.popupRecord.altitude)==null?void 0:a.toFixed(2):"-"),1),Tit]),M("div",Sit,[Cit,M("span",null,ot(r.popupRecord.grade?Math.round(r.popupRecord.grade):"0"),1),Ait])]),M("div",null,[M("span",{style:Ze({width:s.titleWidth+"px"})},"Location:",4),M("span",null,ot(r.popupRecord.positionLong&&r.popupRecord.positionLat?s.toStringHDMS([r.popupRecord.positionLong,r.popupRecord.positionLat]):"-"),1)])])]),M("div",Mit,[M("div",Rit,[Va(M("select",{class:"custom-select custom-select-sm","aria-label":"Hover Method","onUpdate:modelValue":t[0]||(t[0]=l=>r.searchMethod=l),disabled:r.kdIndexing},kit,8,Iit),[[dI,r.searchMethod]])]),M("div",$it,[Va(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=l=>r.debug=l),id:"flexCheckDefault"},null,512),[[i7,r.debug]]),Nit])])])}const rD=Ii(rit,[["render",Dit],["__scopeId","data-v-401fc132"]]),Pit={props:{id:{type:String,default:"fileInput"},isActivityFileReady:Boolean,isWebAssemblySupported:Boolean},mounted(){/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||this.$nextTick(()=>document.getElementById(this.id).accept=".fit, .gpx, .tcx")}};const Fit={class:"navigator"},zit={class:"navigator-input mx-auto"},Wit=["id","disabled"];function Vit(e,t,n,i,r,s){return ct(),ft("div",Fit,[M("div",zit,[M("input",{class:"form-control form-control-sm",type:"file",id:n.id,multiple:"",ref:"input",disabled:!n.isWebAssemblySupported},null,8,Wit)])])}const Zv=Ii(Pit,[["render",Vit]]),Hit={props:{sessions:{type:Array,required:!0}},methods:{secondsToDHMS:O0}};const ks=e=>(Nr("data-v-aed006f1"),e=e(),Dr(),e),Git={key:0,class:"col-12 h-100"},Bit=["data-bs-target","aria-controls"],Uit={class:"row text-start"},Yit={class:"col-auto d-inline-block",style:{height:"50px"}},jit={style:{"text-align":"left"},class:"mb-0"},Xit=ks(()=>M("i",{class:"fa-solid fa-caret-down"},null,-1)),qit=ks(()=>M("i",{class:"fa-solid fa-caret-right"},null,-1)),Kit={class:"px-1"},Zit={class:"col"},Jit=ks(()=>M("div",{class:"row overview-title"},"Distance",-1)),Qit={class:"row overview-value"},trt={class:"col"},ert=ks(()=>M("div",{class:"row overview-title"},"Moving Time",-1)),nrt={class:"row overview-value"},irt={class:"col"},rrt=ks(()=>M("div",{class:"row overview-title"},"Avg Cadence",-1)),srt={class:"row overview-value"},ort=["id"],art={class:"row m-0"},lrt=Jp('<div class="col ps-4 pe-0" data-v-aed006f1><div data-v-aed006f1> </div><div class="right-border" data-v-aed006f1><div class="detail-title" data-v-aed006f1>Speed</div><div class="detail-title" data-v-aed006f1>Cadence</div><div class="detail-title" data-v-aed006f1>Heart Rate</div><div class="detail-title" data-v-aed006f1>Power</div></div></div>',1),crt={class:"col fw-bold text-center px-0"},urt=ks(()=>M("div",{class:"fw-normal"},"Avg",-1)),frt={class:"right-border"},hrt={class:"detail-value"},drt={class:"detail-value"},grt={class:"detail-value"},mrt={class:"detail-value"},prt={class:"col fw-bold text-center px-0"},_rt=ks(()=>M("div",{class:"fw-normal"},"Max",-1)),yrt={class:"right-border"},vrt={class:"detail-value"},brt={class:"detail-value"},wrt={class:"detail-value"},xrt={class:"detail-value"},Ert=Jp('<div class="col m-0" data-v-aed006f1><div data-v-aed006f1> </div><div data-v-aed006f1><div class="ps-2 detail-unit" data-v-aed006f1>km/h</div><div class="ps-2 detail-unit" data-v-aed006f1>rpm</div><div class="ps-2 detail-unit" data-v-aed006f1>bpm</div><div class="ps-2 detail-unit" data-v-aed006f1>W</div></div></div>',1),Trt={class:"calories mt-1"},Srt={class:"row m-0 pt-1 pb-1"},Crt=ks(()=>M("div",{class:"col ps-4 m-0 text-start detail-title"},"Calories",-1)),Art={class:"col pe-4 m-0 text-end"},Mrt={class:"fw-bold pe-1"},Rrt=ks(()=>M("span",{class:"detail-unit"},"Cal",-1));function Irt(e,t,n,i,r,s){var o;return((o=n.sessions)==null?void 0:o.length)>0?(ct(),ft("div",Git,[(ct(!0),ft(Ln,null,qp(n.sessions,(a,l)=>(ct(),ft("div",{key:l},[M("div",{class:"tab row m-0 mt-2 pt-2",style:{cursor:"pointer"},"data-bs-toggle":"collapse","data-bs-target":"#sessions-"+l,"aria-expanded":"false","aria-controls":"sessions-"+l},[M("div",Uit,[M("div",Yit,[M("h6",jit,[Xit,qit,M("span",Kit,"Ses "+ot(l+1),1)]),M("span",null,ot(a.sport),1)]),M("div",Zit,[Jit,M("div",Qit,ot(a.totalDistance?(a.totalDistance/1e3).toFixed(2):"-")+" km ",1)]),M("div",trt,[ert,M("div",nrt,ot(a.totalMovingTime?s.secondsToDHMS(a.totalMovingTime):"-:-"),1)]),M("div",irt,[rrt,M("div",srt,ot(a.avgCadence?a.avgCadence:"-")+" rpm ",1)])])],8,Bit),M("div",{class:"collapse show text-start pb-3",id:"sessions-"+l},[M("div",art,[lrt,M("div",crt,[urt,M("div",frt,[M("div",hrt,ot(a.avgSpeed?(a.avgSpeed*3600/1e3).toFixed(2):"-"),1),M("div",drt,ot(a.avgCadence?a.avgCadence:"-"),1),M("div",grt,ot(a.avgHeartRate?a.avgHeartRate:"-"),1),M("div",mrt,ot(a.avgPower?a.avgPower:"-"),1)])]),M("div",prt,[_rt,M("div",yrt,[M("div",vrt,ot(a.maxSpeed?(a.maxSpeed*3600/1e3).toFixed(2):"-"),1),M("div",brt,ot(a.maxCadence?a.maxCadence:"-"),1),M("div",wrt,ot(a.maxHeartRate?a.maxHeartRate:"-"),1),M("div",xrt,ot(a.maxPower?a.maxPower:"-"),1)])]),Ert]),M("div",Trt,[M("div",Srt,[Crt,M("div",Art,[M("span",Mrt,ot(a.totalCalories?a.totalCalories.toLocaleString():"-"),1),Rrt])])])],8,ort)]))),128))])):Rt("",!0)}const Lrt=Ii(Hit,[["render",Irt],["__scopeId","data-v-aed006f1"]]);function mn(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(n+=r,t++)}return t==0?null:n/t}function pn(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(r>t&&(t=r),n++)}return n==0?null:t}function rn(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r!=null&&(t+=r,n++)}return n==0?null:t}const _p=-2,sD=-1,Ort={props:{isActivityFileReady:Boolean,sessions:{type:Array,required:!0},selectedSessions:{type:Array,required:!0}},data(){return{sessionSelected:_p}},watch:{sessions:{handler(e){this.updateSelectedSession(e)}},sessionSelected:{handler(e){this.$emit("sessionSelected",parseInt(e))}}},computed:{creatorName(){return this.selectedSessions.length>0?this.selectedSessions[0].creatorName:"Unknown"},timeCreated(){return this.selectedSessions.length>0?this.selectedSessions[0].timeCreated:""},timezone(){return this.selectedSessions.length>0?this.selectedSessions[0].timezone:0},summary(){const e=new zr;let t=new Set,n=0;for(let i=0;i<this.selectedSessions.length;i++){const r=this.selectedSessions[i];if(i>0){const s=this.selectedSessions[i-1],o=new Date(s.endTime).getTime(),a=new Date(r.startTime).getTime();n+=(a-o)/1e3}t.add(r.sport),e.totalMovingTime=rn(e.totalMovingTime,r.totalMovingTime),e.totalElapsedTime=rn(e.totalElapsedTime,r.totalElapsedTime),e.totalElapsedTime=e.totalElapsedTime+n,e.totalDistance=rn(e.totalDistance,r.totalDistance),e.totalAscent=rn(e.totalAscent,r.totalAscent),e.totalDescent=rn(e.totalDescent,r.totalDescent),e.totalCycles=rn(e.totalCycles,r.totalCycles),e.totalCalories=rn(e.totalCalories,r.totalCalories),e.avgSpeed=mn(e.avgSpeed,r.avgSpeed),e.maxSpeed=pn(e.maxSpeed,r.maxSpeed),e.avgHeartRate=mn(e.avgHeartRate,r.avgHeartRate),e.maxHeartRate=pn(e.maxHeartRate,r.maxHeartRate),e.avgCadence=mn(e.avgCadence,r.avgCadence),e.maxCadence=pn(e.maxCadence,r.maxCadence),e.avgPower=mn(e.avgPower,r.avgPower),e.maxPower=pn(e.maxPower,r.maxPower),e.avgTemperature=mn(e.avgTemperature,r.avgTemperature),e.maxTemperature=pn(e.maxTemperature,r.maxTemperature),e.avgAltitude=mn(e.avgAltitude,r.avgAltitude),e.maxAltitude=pn(e.maxAltitude,r.maxAltitude),e.avgPace=mn(e.avgPace,r.avgPace),e.avgElapsedPace=pn(e.avgElapsedPace,r.avgElapsedPace)}return e.sport=Array.from(t).join(", "),this.$emit("summary",e),e}},methods:{avg:mn,max:pn,sum:rn,secondsToDHMS:O0,formatPace:bc,toTimezoneDateString:Ww,GMTString:I$,formatCreatedDate(e,t){return R$(e,t).setLocale("en-US").toLocaleString({localeMatcher:"best fit",weekday:void 0,year:"numeric",month:"long",day:"numeric",hour:"2-digit",hour12:!0,minute:"2-digit",second:void 0})},updateSelectedSession(e){e.length==0?this.sessionSelected=_p:e.length==1?this.sessionSelected=0:this.sessionSelected=sD}},mounted(){this.updateSelectedSession(this.sessions)}};const $s=e=>(Nr("data-v-c480cda6"),e=e(),Dr(),e),krt={key:0,class:"summary mt-4"},$rt={class:"px-3 pt-3 pb-4"},Nrt={class:"time-created pb-2"},Drt=$s(()=>M("i",{class:"fa-solid fa-clock"},null,-1)),Prt={class:"row",style:{"font-size":"1em",color:"var(--bs-heading-color)"}},Frt={class:"col text-start fs-8"},zrt={key:0,value:"-2"},Wrt={key:1,value:"-1"},Vrt=["value"],Hrt={class:"col-auto text-end pt-1"},Grt=$s(()=>M("i",{class:"fa-solid fa-microchip pe-1"},null,-1)),Brt={class:"row pt-2 text-center"},Urt={class:"col px-0"},Yrt=$s(()=>M("div",{class:"summary-title"},"Moving Time",-1)),jrt={class:"summary-value fs-6"},Xrt={class:"col px-0"},qrt=$s(()=>M("div",{class:"summary-title"},"Distance",-1)),Krt={class:"summary-value fs-6 lr-border"},Zrt={class:"col px-0"},Jrt=$s(()=>M("div",{class:"summary-title"},"Elevation Gain",-1)),Qrt={class:"summary-value fs-6"},tst={class:"row pt-2 text-center"},est={class:"col px-0"},nst=$s(()=>M("div",{class:"summary-title"},"Elapsed",-1)),ist={class:"summary-value fs-6"},rst={class:"col px-0"},sst={key:0},ost=$s(()=>M("div",{class:"summary-title"},"Avg Pace",-1)),ast={class:"summary-value fs-6 lr-border"},lst={key:1},cst=$s(()=>M("div",{class:"summary-title"},"Avg Speed",-1)),ust={class:"summary-value fs-6 lr-border"},fst={class:"col px-0"},hst=$s(()=>M("div",{class:"summary-title"},"Calories",-1)),dst={class:"summary-value fs-6"};function gst(e,t,n,i,r,s){var o;return n.isActivityFileReady?(ct(),ft("div",krt,[M("div",$rt,[M("div",Nrt,[Drt,ie("  "+ot(s.formatCreatedDate(s.timeCreated,s.timezone))+"  | "+ot(s.timezone==0?"UTC":s.timezone>0?"+"+s.timezone:s.timezone),1)]),M("div",Prt,[M("div",Frt,[Va(M("select",{class:"form-select form-select-sm",name:"sessions",id:"sessions","onUpdate:modelValue":t[0]||(t[0]=a=>r.sessionSelected=a)},[n.sessions.length==0?(ct(),ft("option",zrt,"No Session")):Rt("",!0),n.sessions.length>1?(ct(),ft("option",Wrt,"Multi-Sessions")):Rt("",!0),(ct(!0),ft(Ln,null,qp(n.sessions,(a,l)=>(ct(),ft("option",{key:l,value:l},ot(n.sessions.length>1?"S"+(l+1):"Session")+": "+ot(a.sport),9,Vrt))),128))],512),[[dI,r.sessionSelected]])]),M("div",Hrt,[Grt,ie(ot(s.creatorName),1)])]),M("div",Brt,[M("div",Urt,[M("div",null,[Yrt,M("div",jrt,ot(s.summary.totalMovingTime?s.secondsToDHMS(s.summary.totalMovingTime):"-:-"),1)])]),M("div",Xrt,[M("div",null,[qrt,M("div",Krt,ot(s.summary.totalDistance?(s.summary.totalDistance/1e3).toFixed(2):"-")+" km ",1)])]),M("div",Zrt,[M("div",null,[Jrt,M("div",Qrt,ot(((o=s.summary.totalAscent)==null?void 0:o.toFixed(0))??"-")+" m",1)])])]),M("div",tst,[M("div",est,[M("div",null,[nst,M("div",ist,ot(s.summary.totalElapsedTime?s.secondsToDHMS(s.summary.totalElapsedTime):"-:-"),1)])]),M("div",rst,[s.summary.sport=="Running"?(ct(),ft("div",sst,[ost,M("div",ast,ot(s.summary.avgPace?s.formatPace(s.summary.avgPace):"-:-")+" /km ",1)])):(ct(),ft("div",lst,[cst,M("div",ust,ot(s.summary.avgSpeed?(s.summary.avgSpeed*3600/1e3).toFixed(2):"-")+" km/h ",1)]))]),M("div",fst,[M("div",null,[hst,M("div",dst,ot(s.summary.totalCalories?s.summary.totalCalories.toLocaleString():"-")+" Cal ",1)])])])])])):Rt("",!0)}const mst=Ii(Ort,[["render",gst],["__scopeId","data-v-c480cda6"]]);class pst{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,n){if(n){let i=n.dataProjection?Fe(n.dataProjection):this.readProjection(t);n.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Fe(i),i.setWorldExtent(n.extent)),n={dataProjection:i,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return At()}readFeature(t,n){return At()}readFeatures(t,n){return At()}readGeometry(t,n){return At()}readProjection(t){return At()}writeFeature(t,n){return At()}writeFeatures(t,n){return At()}writeGeometry(t,n){return At()}}function oD(e,t,n){const i=n?Fe(n.featureProjection):null,r=n?Fe(n.dataProjection):null;let s;if(i&&r&&!ua(i,r)?s=(t?e.clone():e).transform(t?i:r,t?r:i):s=e,t&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===e&&(s=e.clone()),s.applyTransform(a)}return s}class _st extends pst{constructor(){super()}getType(){return"json"}readFeature(t,n){return this.readFeatureFromObject(ug(t),this.getReadOptions(t,n))}readFeatures(t,n){return this.readFeaturesFromObject(ug(t),this.getReadOptions(t,n))}readFeatureFromObject(t,n){return At()}readFeaturesFromObject(t,n){return At()}readGeometry(t,n){return this.readGeometryFromObject(ug(t),this.getReadOptions(t,n))}readGeometryFromObject(t,n){return At()}readProjection(t){return this.readProjectionFromObject(ug(t))}readProjectionFromObject(t){return At()}writeFeature(t,n){return JSON.stringify(this.writeFeatureObject(t,n))}writeFeatureObject(t,n){return At()}writeFeatures(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))}writeFeaturesObject(t,n){return At()}writeGeometry(t,n){return JSON.stringify(this.writeGeometryObject(t,n))}writeGeometryObject(t,n){return At()}}function ug(e){if(typeof e=="string"){const t=JSON.parse(e);return t||null}return e!==null?e:null}const yst=_st;class vst extends yst{constructor(t){t=t||{},super(),this.dataProjection=Fe(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Fe(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,n){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const r=Jv(i.geometry,n),s=new Gg;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,n){const i=t;let r=null;if(i.type==="FeatureCollection"){const s=t;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a)r.push(this.readFeatureFromObject(o[a],n))}else r=[this.readFeatureFromObject(t,n)];return r}readGeometryFromObject(t,n){return Jv(t,n)}readProjectionFromObject(t){const n=t.crs;let i;if(n)if(n.type=="name")i=Fe(n.properties.name);else if(n.type==="EPSG")i=Fe("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,n){n=this.adaptOptions(n);const i={type:"Feature",geometry:null,properties:null},r=t.getId();if(r!==void 0&&(i.id=r),!t.hasProperties())return i;const s=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=Qv(o,n),delete s[t.getGeometryName()]),$c(s)||(i.properties=s),i}writeFeaturesObject(t,n){n=this.adaptOptions(n);const i=[];for(let r=0,s=t.length;r<s;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,n){return Qv(t,this.adaptOptions(n))}}function Jv(e,t){if(!e)return null;let n;switch(e.type){case"Point":{n=wst(e);break}case"LineString":{n=xst(e);break}case"Polygon":{n=Cst(e);break}case"MultiPoint":{n=Tst(e);break}case"MultiLineString":{n=Est(e);break}case"MultiPolygon":{n=Sst(e);break}case"GeometryCollection":{n=bst(e);break}default:throw new Error("Unsupported GeoJSON type: "+e.type)}return oD(n,!1,t)}function bst(e,t){const n=e.geometries.map(function(i){return Jv(i,t)});return new ont(n)}function wst(e){return new Dc(e.coordinates)}function xst(e){return new ep(e.coordinates)}function Est(e){return new ant(e.coordinates)}function Tst(e){return new ZN(e.coordinates)}function Sst(e){return new cnt(e.coordinates)}function Cst(e){return new Ro(e.coordinates)}function Qv(e,t){e=oD(e,!0,t);const n=e.getType();let i;switch(n){case"Point":{i=Ost(e);break}case"LineString":{i=Mst(e);break}case"Polygon":{i=kst(e,t);break}case"MultiPoint":{i=Ist(e);break}case"MultiLineString":{i=Rst(e);break}case"MultiPolygon":{i=Lst(e,t);break}case"GeometryCollection":{i=Ast(e,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return i}function Ast(e,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(i){return Qv(i,t)})}}function Mst(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function Rst(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function Ist(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function Lst(e,t){let n;return t&&(n=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(n)}}function Ost(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function kst(e,t){let n;return t&&(n=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(n)}}const aD=vst;function $st(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const dl=e=>(Nr("data-v-fcccdec2"),e=e(),Dr(),e),Nst={class:"activity container-fluid text-center flex-container"},Dst=dl(()=>M("div",{class:"pt-4 pb-2"},[M("h5",{class:"title"},"Open Activity"),M("div",{style:{"font-size":"0.9em"}}," Your data stays in your computer: 100% client-side power. ")],-1)),Pst=dl(()=>M("div",{style:{"font-size":"0.8em"},class:"pt-1"},"Supported files: *.fit, *.gpx, *.tcx",-1)),Fst={key:0,class:"mb-3"},zst={key:1},Wst=dl(()=>M("ul",{class:"nav nav-tabs ps-2",id:"menu",role:"tablist"},[M("li",{class:"nav-item",role:"presentation"},[M("button",{class:"nav-link flat-green active",id:"tab1-tab","data-bs-toggle":"tab","data-bs-target":"#tab1-body",type:"button",role:"tab","aria-controls":"tab1-body","aria-selected":"true"}," Analysis ")]),M("li",{class:"nav-item",role:"presentation"},[M("button",{class:"nav-link flat-green",id:"tab2-tab","data-bs-toggle":"tab","data-bs-target":"#tab2-body",type:"button",role:"tab","aria-controls":"tab2-body","aria-selected":"false"}," Sessions ")]),M("li",{class:"nav-item",role:"presentation"},[M("button",{class:"nav-link flat-green",id:"tab3-tab","data-bs-toggle":"tab","data-bs-target":"#tab3-body",type:"button",role:"tab","aria-controls":"tab3-body","aria-selected":"false"}," Laps ")]),M("li",{class:"nav-item",role:"presentation"},[M("button",{class:"nav-link flat-green",id:"tab4-tab","data-bs-toggle":"tab","data-bs-target":"#tab4-body",type:"button",role:"tab","aria-controls":"tab4-body","aria-selected":"false"}," Tools ")])],-1)),Vst={class:"tab-content"},Hst={class:"tab-pane fade show active",id:"tab1-body",role:"tabpanel","aria-labelledby":"tab1-tab"},Gst={key:0,class:"graph"},Bst={key:1,class:"graph"},Ust={key:2,class:"graph"},Yst={key:3,class:"graph"},jst={key:4,class:"graph"},Xst={key:5,class:"graph"},qst={class:"tab-pane fade",id:"tab2-body",role:"tabpanel","aria-labelledby":"tab2-tab"},Kst={key:0},Zst={class:"tab-pane fade",id:"tab3-body",role:"tabpanel","aria-labelledby":"tab2-tab"},Jst={key:0},Qst=dl(()=>M("div",{class:"tab-pane fade",id:"tab4-body",role:"tabpanel","aria-labelledby":"tab3-tab"},[M("div",{class:"pt-3"},"Coming Soon")],-1)),tot={class:"footer pt-3"},eot={class:"mx-1"},not=dl(()=>M("i",{class:"fa-solid fa-copyright fa-rotate-180"},null,-1)),iot=dl(()=>M("span",{class:"mx-1"},[M("a",{href:"http://github.com/openivity/openivity.github.io",target:"_blank"},[M("i",{class:"fa-brands fa-github"}),ie(" Code ")])],-1)),rot=dl(()=>M("div",{class:"mx-1 pt-1"},"Openivity's Open Source Project",-1)),sot={key:0,id:"right",class:"col-12 col-xxl-9 col-xl-8 col-lg-7 map-container"},oot={class:"row"},aot={class:"col-12 map pe-0"},lot={class:"col-12 elevation-section"},lD=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function";lD==!1&&alert("Sorry, it appears that your browser does not support WebAssembly :(");let cot=class{constructor(t){Mt(this,"err",null);Mt(this,"took");Mt(this,"activities");const n=t;this.err=n==null?void 0:n.err,this.took=n==null?void 0:n.took,this.activities=n==null?void 0:n.activities}};const uot={data(){return{loading:!1,decodeWorker:new Worker(new URL("/assets/activity-service-73d942de.js",self.location),{type:"module"}),decodeBeginTimestamp:0,activities:new Array,sessions:new Array,combinedRecords:new Array,combinedSessions:new Array,combinedLaps:new Array,combinedFeatures:new Array,combinedGraphRecords:new Array,featuresBySession:new Map,graphRecordsBySessions:new Map,sessionSelected:_p,selectedRecords:new Array,selectedSessions:new Array,selectedLaps:new Array,selectedFeatures:new Array,selectedGraphRecords:new Array,summary:new zr,hoveredRecord:new Zt}},computed:{isActivityFileReady:function(){return this.activities.length>0},hasPace(){for(let e=0;e<this.selectedSessions.length;e++)switch(this.selectedSessions[e].sport){case"Hiking":case"Walking":case"Running":return!0}return!1},hasAltitude(){for(let e=0;e<this.selectedRecords.length;e++)if(this.selectedRecords[e].altitude!=null)return!0;return!1},hasSpeed(){for(let e=0;e<this.selectedRecords.length;e++)if(this.selectedRecords[e].speed)return!0;return!1},hasCadence(){for(let e=0;e<this.selectedRecords.length;e++)if(this.selectedRecords[e].cadence)return!0;return!1},hasHeartRate(){for(let e=0;e<this.selectedRecords.length;e++)if(this.selectedRecords[e].heartRate)return!0;return!1},hasPower(){for(let e=0;e<this.selectedRecords.length;e++)if(this.selectedRecords[e].power)return!0;return!1},hasTemperature(){for(let e=0;e<this.selectedRecords.length;e++)if(this.selectedRecords[e].temperature!=null)return!0;return!1},creatorName(){return this.activities[0].creator.name},timeCreated(){return this.activities[0].creator.timeCreated}},methods:{getExtention(e){if(e=="")return"";const t=e.split(".");return t[t.length-1].toLocaleLowerCase()},getExtentionIdentifier(e){return e=="fit"?1:e=="gpx"?2:e=="tcx"?3:0},fileInputEventListener(e){var i;const t=e.target;if(!t.files)return;let n=new Array;for(let r=0;r<((i=t.files)==null?void 0:i.length);r++)n.push(new Promise((s,o)=>{const a=t.files[r];if(!a){o("no file selected");return}const l=this.getExtention(a.name),c=this.getExtentionIdentifier(l);if(c==0){o(`file '${a.name}' (type: ${l}) is not supported`);return}const u=new FileReader;u.onload=f=>{const h=f.target.result;s(new Uint8Array([c,...new Uint8Array(h)]))},u.onerror=o,u.readAsArrayBuffer(a)}));Promise.all(n).then(r=>{this.decodeBeginTimestamp=new Date().getTime(),this.loading=!0,this.decodeWorker.postMessage(r)}).catch(r=>{console.log(r),alert(r)})},decodeWorkerOnMessage(e){const t=new cot(e.data);if(t.err!=null){console.error(`Decode: ${t.err}`),alert(`Decode: ${t.err}`),this.loading=!1;return}const n=new Date().getTime()-this.decodeBeginTimestamp;console.group("Decoding"),console.debug("Decode took:		",t.took,"ms"),console.debug("Interop WASM to JS:	",n-t.took,"ms"),console.debug("Total elapsed:		",n,"ms"),console.groupEnd(),requestAnimationFrame(()=>{this.preprocessingResults(t.activities),this.scrollTop()})},preprocessingResults(e){this.activities=e,this.sessions=e.flatMap(l=>(l.sessions.forEach(c=>{c.creatorName=l.creator.name,c.timeCreated=l.creator.timeCreated,c.timezone=l.timezone}),l.sessions));let t=0;const n=[],i=[],r=[],s=[];this.sessions.forEach((l,c)=>{const u={...l};u.records.forEach(h=>{typeof h.distance=="number"&&(h.distance+=t)});for(let h=l.records.length-1;h>=0;h--)if(l.records[h].distance){t=l.records[h].distance;break}n.push(u),i.push(...u.laps),r.push(...u.records);const f=this.createFeatures(l,c);s.push(...f)}),this.combinedSessions=n,this.combinedLaps=i,this.combinedRecords=r,this.combinedFeatures=s,this.combinedGraphRecords=this.summarizeRecords(r,this.scale(t));const o=new Map,a=new Map;for(let l=0;l<this.sessions.length;l++){const c=this.sessions[l],u=this.createFeatures(c,0);o.set(l,u);let f=0;for(let d=c.records.length-1;d>=0;d--)if(c.records[d].distance){f=c.records[d].distance;break}const h=this.summarizeRecords(c.records,this.scale(f));a.set(l,h)}this.featuresBySession=o,this.graphRecordsBySessions=a,this.selectSession(this.sessionSelected),setTimeout(()=>this.loading=!1,200)},scale(e){return e*(.05/100)},createFeatures(e,t){const n=Math.round(e.records.length*.1),i=[];let r=0,s=0,o=0,a=[];for(let l=0;l<e.records.length;l++){const c=e.records[l];if(r==n||l==e.records.length-1){o=l;const u=new aD().readFeature({id:`lineString-${t}-${s}-${o}`,type:"Feature",geometry:{type:"LineString",coordinates:a}});i.push(u),s=l+1,a=[],r=0}c.positionLong==null||c.positionLat==null||(a.push([c.positionLong,c.positionLat]),r++)}return i},summarizeRecords(e,t){let n=[],i=[],r=[],s=[],o=[],a=[],l=[],c=[];const u=[];let f=0;for(let h=0;h<e.length;h++){if(e[h].distance-e[f].distance>t){let g=new Zt({timestamp:e[f].timestamp,distance:e[f].distance,positionLat:e[f].positionLat,positionLong:e[f].positionLong});n.length>0&&(g.altitude=n.reduce((m,p)=>m+p,0)/n.length),i.length>0&&(g.cadence=i.reduce((m,p)=>m+p,0)/i.length),l.length>0&&(g.grade=l.reduce((m,p)=>m+p,0)/l.length),r.length>0&&(g.heartRate=r.reduce((m,p)=>m+p,0)/r.length),o.length>0&&(g.power=o.reduce((m,p)=>m+p,0)/o.length),s.length>0&&(g.speed=s.reduce((m,p)=>m+p,0)/s.length),a.length>0&&(g.temperature=a.reduce((m,p)=>m+p,0)/a.length),c.length>0&&(g.pace=c.reduce((m,p)=>m+p,0)/c.length),u.push(g),n=[],i=[],r=[],s=[],o=[],a=[],l=[],c=[],f=h}e[h].altitude&&n.push(e[h].altitude),e[h].cadence&&i.push(e[h].cadence),e[h].heartRate&&r.push(e[h].heartRate),e[h].speed&&s.push(e[h].speed),e[h].power&&o.push(e[h].power),e[h].temperature&&a.push(e[h].temperature),e[h].grade&&l.push(e[h].grade),e[h].pace&&c.push(e[h].pace)}return u},selectSession(e){switch(e){case _p:this.selectedRecords=[],this.selectedSessions=[],this.selectedLaps=[],this.selectedFeatures=[],this.selectedGraphRecords=[];break;case sD:this.selectedRecords=this.combinedRecords,this.selectedSessions=this.combinedSessions,this.selectedLaps=this.combinedLaps,this.selectedFeatures=this.combinedFeatures,this.selectedGraphRecords=this.combinedGraphRecords;break;default:{if(e>this.sessions.length-1)return;this.selectedRecords=this.sessions[e].records,this.selectedSessions=[this.sessions[e]],this.selectedLaps=this.sessions[e].laps,this.selectedFeatures=this.featuresBySession.get(e)??[],this.selectedGraphRecords=this.graphRecordsBySessions.get(e)??[];break}}},scrollTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0},onReceiveSummary(e){this.summary=e},onHoveredRecord(e){this.hoveredRecord=new Zt(e)},onSessionSelected(e){this.sessionSelected=e,this.selectSession(e)}},mounted(){var e;(e=document.getElementById("fileInput"))==null||e.addEventListener("change",this.fileInputEventListener),this.decodeWorker.onmessage=this.decodeWorkerOnMessage,this.selectSession(this.sessionSelected)}},fot=oi({...uot,__name:"OpenActivity",setup(e){return(t,n)=>(ct(),ft("div",null,[Ot(t0,null,{default:Bb(()=>[t.loading?(ct(),jb(L$,{key:0})):Rt("",!0)]),_:1}),M("div",Nst,[M("div",{class:Fn(["row",t.isActivityFileReady?"":"align-items-center"])},[M("div",{id:"left",class:Fn(["sidebar","col-12","px-0",t.isActivityFileReady?"col-xxl-3 col-xl-4 col-lg-5 d-md-block float-sm-right":"col-md-12 landing"])},[M("div",null,[M("div",{class:Fn([t.isActivityFileReady?"default-border-top":""])},[Dst,Ot(Zv,{isActivityFileReady:t.isActivityFileReady,isWebAssemblySupported:Er(lD)},null,8,["isActivityFileReady","isWebAssemblySupported"]),Pst],2),t.isActivityFileReady?(ct(),ft("div",Fst,[Ot(mst,{sessions:t.sessions,"selected-sessions":t.selectedSessions,"is-activity-file-ready":t.isActivityFileReady,onSummary:t.onReceiveSummary,onSessionSelected:t.onSessionSelected},null,8,["sessions","selected-sessions","is-activity-file-ready","onSummary","onSessionSelected"])])):Rt("",!0),t.isActivityFileReady?(ct(),ft("div",zst,[Wst,M("div",Vst,[M("div",Hst,[t.hasPace?(ct(),ft("div",Gst,[Ot(Gq,{records:t.selectedRecords,"graph-records":t.selectedGraphRecords,summary:t.summary,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","graph-records","summary","received-record","onHoveredRecord"])])):Rt("",!0),t.hasSpeed?(ct(),ft("div",Bst,[Ot(qq,{records:t.selectedRecords,"graph-records":t.selectedGraphRecords,summary:t.summary,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","graph-records","summary","received-record","onHoveredRecord"])])):Rt("",!0),t.hasCadence?(ct(),ft("div",Ust,[Ot(Sj,{records:t.selectedRecords,"graph-records":t.selectedGraphRecords,summary:t.summary,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","graph-records","summary","received-record","onHoveredRecord"])])):Rt("",!0),t.hasHeartRate?(ct(),ft("div",Yst,[Ot(Wq,{records:t.selectedRecords,"graph-records":t.selectedGraphRecords,summary:t.summary,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","graph-records","summary","received-record","onHoveredRecord"])])):Rt("",!0),t.hasPower?(ct(),ft("div",jst,[Ot(Yq,{records:t.selectedRecords,"graph-records":t.selectedGraphRecords,summary:t.summary,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","graph-records","summary","received-record","onHoveredRecord"])])):Rt("",!0),t.hasTemperature?(ct(),ft("div",Xst,[Ot(Jq,{records:t.selectedRecords,"graph-records":t.selectedGraphRecords,summary:t.summary,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["records","graph-records","summary","received-record","onHoveredRecord"])])):Rt("",!0)]),M("div",qst,[t.selectedSessions.length>0?(ct(),ft("div",Kst,[Ot(Lrt,{sessions:t.selectedSessions},null,8,["sessions"])])):Rt("",!0)]),M("div",Zst,[t.selectedLaps.length>0?(ct(),ft("div",Jst,[Ot(HK,{laps:t.selectedLaps},null,8,["laps"])])):Rt("",!0)]),Qst])])):Rt("",!0),M("span",tot,[M("span",eot,[not,ie(" "+ot(new Date().getFullYear()),1)]),iot,rot])])],2),t.isActivityFileReady?(ct(),ft("div",sot,[M("div",oot,[M("div",aot,[Ot(rD,{sessions:t.selectedSessions,features:t.selectedFeatures,hasPace:t.hasPace,hasCadence:t.hasCadence,hasHeartRate:t.hasHeartRate,hasPower:t.hasPower,hasTemperature:t.hasTemperature,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord,ref:"theMap"},null,8,["sessions","features","hasPace","hasCadence","hasHeartRate","hasPower","hasTemperature","received-record","onHoveredRecord"])]),M("div",lot,[Ot(Pq,{name:"elev","has-altitude":t.hasAltitude,summary:t.summary,records:t.selectedRecords,"graph-records":t.selectedGraphRecords,"received-record":t.hoveredRecord,onHoveredRecord:t.onHoveredRecord},null,8,["has-altitude","summary","records","graph-records","received-record","onHoveredRecord"])])])])):Rt("",!0)],2)])]))}});const hot=Ii(fot,[["__scopeId","data-v-fcccdec2"]]),dot=oi({__name:"OpenActivityView",setup(e){return(t,n)=>(ct(),ft("main",null,[Ot(hot)]))}}),got={props:{activityFiles:Array,timezoneOffsetHour:Number},computed:{summary(){const e=new zr;for(let t=0;t<this.activityFiles.length;t++)for(let n=0;n<this.activityFiles[t].sessions.length;n++){const i=this.activityFiles[t].sessions[n];e.sport=i.sport,e.totalMovingTime=rn(e.totalMovingTime,i.totalMovingTime),e.totalElapsedTime=rn(e.totalElapsedTime,i.totalElapsedTime),e.totalDistance=rn(e.totalDistance,i.totalDistance),e.totalAscent=rn(e.totalAscent,i.totalAscent),e.totalDescent=rn(e.totalDescent,i.totalDescent),e.totalCycles=rn(e.totalCycles,i.totalCycles),e.totalCalories=rn(e.totalCalories,i.totalCalories),e.avgSpeed=mn(e.avgSpeed,i.avgSpeed),e.maxSpeed=pn(e.maxSpeed,i.maxSpeed),e.avgHeartRate=mn(e.avgHeartRate,i.avgHeartRate),e.maxHeartRate=pn(e.maxHeartRate,i.maxHeartRate),e.avgCadence=mn(e.avgCadence,i.avgCadence),e.maxCadence=pn(e.maxCadence,i.maxCadence),e.avgPower=mn(e.avgPower,i.avgPower),e.maxPower=pn(e.maxPower,i.maxPower),e.avgTemperature=mn(e.avgTemperature,i.avgTemperature),e.maxTemperature=pn(e.maxTemperature,i.maxTemperature),e.avgAltitude=mn(e.avgAltitude,i.avgAltitude),e.maxAltitude=pn(e.maxAltitude,i.maxAltitude)}return e}},methods:{toTimezoneDateString:Ww,GMTString:I$,secondsToDHMS:O0,avg:mn,max:pn,sum:rn}};const Ft=e=>(Nr("data-v-c7709d93"),e=e(),Dr(),e),mot={class:"navigator"},pot={class:"navigator-info"},_ot={key:0,class:"time-created"},yot={key:1,class:"manufacturer"},vot={class:"navigator-summary analysis"},bot={class:"summary"},wot={key:0,class:"section-title"},xot={class:"summary-grid"},Eot={key:0,class:"summary-item"},Tot=Ft(()=>M("div",{class:"summary-title"},"Sport",-1)),Sot={class:"summary-value"},Cot={key:1,class:"summary-item"},Aot=Ft(()=>M("div",{class:"summary-title"},"Sub Sport",-1)),Mot={class:"summary-value"},Rot={class:"summary-grid"},Iot={key:0,class:"summary-item"},Lot=Ft(()=>M("div",{class:"summary-title"},"Total Moving Time",-1)),Oot={class:"summary-value"},kot=Ft(()=>M("i",{class:"fa-solid fa-hourglass-half"},null,-1)),$ot={key:1,class:"summary-item"},Not=Ft(()=>M("div",{class:"summary-title"},"Total Elapsed Time",-1)),Dot={class:"summary-value"},Pot=Ft(()=>M("i",{class:"fa-solid fa-hourglass-end"},null,-1)),Fot={class:"summary-grid"},zot={key:0,class:"summary-item"},Wot=Ft(()=>M("div",{class:"summary-title"},"Total Distance",-1)),Vot={class:"summary-value"},Hot=Ft(()=>M("i",{class:"fa-solid fa-road"},null,-1)),Got={key:1,class:"summary-item"},Bot=Ft(()=>M("div",{class:"summary-title"},"Total Calories",-1)),Uot={class:"summary-value"},Yot=Ft(()=>M("i",{class:"fa-solid fa-droplet"},null,-1)),jot={class:"summary-grid"},Xot={key:0,class:"summary-item"},qot=Ft(()=>M("div",{class:"summary-title"},"Avg Speed",-1)),Kot={class:"summary-value"},Zot=Ft(()=>M("i",{class:"fa-solid fa-gauge"},null,-1)),Jot={key:1,class:"summary-item"},Qot=Ft(()=>M("div",{class:"summary-title"},"Max Speed",-1)),tat={class:"summary-value"},eat=Ft(()=>M("i",{class:"fa-solid fa-gauge-high"},null,-1)),nat={class:"summary-grid"},iat={key:0,class:"summary-item"},rat=Ft(()=>M("div",{class:"summary-title"},"Avg Heart Rate",-1)),sat={class:"summary-value"},oat=Ft(()=>M("i",{class:"fa-solid fa-heart-pulse"},null,-1)),aat={key:1,class:"summary-item"},lat=Ft(()=>M("div",{class:"summary-title"},"Max Heart Rate",-1)),cat={class:"summary-value"},uat=Ft(()=>M("i",{class:"fa-solid fa-heart-pulse"},null,-1)),fat={class:"summary-grid"},hat={key:0,class:"summary-item"},dat=Ft(()=>M("div",{class:"summary-title"},"Avg Cadence",-1)),gat={class:"summary-value"},mat=Ft(()=>M("i",{class:"fa-solid fa-rotate"},null,-1)),pat={key:1,class:"summary-item"},_at=Ft(()=>M("div",{class:"summary-title"},"Max Cadence",-1)),yat={class:"summary-value"},vat=Ft(()=>M("i",{class:"fa-solid fa-rotate"},null,-1)),bat={class:"summary-grid"},wat={key:0,class:"summary-item"},xat=Ft(()=>M("div",{class:"summary-title"},"Avg Power",-1)),Eat={class:"summary-value"},Tat=Ft(()=>M("i",{class:"fa-solid fa-bolt-lightning"},null,-1)),Sat={key:1,class:"summary-item"},Cat=Ft(()=>M("div",{class:"summary-title"},"Max Power",-1)),Aat={class:"summary-value"},Mat=Ft(()=>M("i",{class:"fa-solid fa-bolt-lightning"},null,-1)),Rat={class:"summary-grid"},Iat={key:0,class:"summary-item"},Lat=Ft(()=>M("div",{class:"summary-title"},"Avg Temperature",-1)),Oat={class:"summary-value"},kat=Ft(()=>M("i",{class:"fa-solid fa-temperature-low"},null,-1)),$at={key:1,class:"summary-item"},Nat=Ft(()=>M("div",{class:"summary-title"},"Max Temperature",-1)),Dat={class:"summary-value"},Pat=Ft(()=>M("i",{class:"fa-solid fa-temperature-high"},null,-1)),Fat={class:"summary-grid"},zat={key:0,class:"summary-item"},Wat=Ft(()=>M("div",{class:"summary-title"},"Total Ascent",-1)),Vat={class:"summary-value"},Hat=Ft(()=>M("i",{class:"fa-solid fa-arrow-trend-up"},null,-1)),Gat={key:1,class:"summary-item"},Bat=Ft(()=>M("div",{class:"summary-title"},"Total Descent",-1)),Uat={class:"summary-value"},Yat=Ft(()=>M("i",{class:"fa-solid fa-arrow-trend-down"},null,-1)),jat={class:"summary-grid"},Xat={key:0,class:"summary-item"},qat=Ft(()=>M("div",{class:"summary-title"},"Avg Altitude",-1)),Kat={class:"summary-value"},Zat=Ft(()=>M("i",{class:"fa-solid fa-mountain"},null,-1)),Jat={key:1,class:"summary-item"},Qat=Ft(()=>M("div",{class:"summary-title"},"Max Altitude",-1)),tlt={class:"summary-value"},elt=Ft(()=>M("i",{class:"fa-solid fa-mountain"},null,-1));function nlt(e,t,n,i,r,s){var o,a,l,c,u;return ct(),ft("div",mot,[M("div",pot,[n.activityFiles&&n.activityFiles.length!=0?(ct(),ft("div",_ot," Created on: "+ot(s.toTimezoneDateString((a=(o=n.activityFiles[0])==null?void 0:o.creator)==null?void 0:a.timeCreated,n.timezoneOffsetHour))+" "+ot(s.GMTString(n.timezoneOffsetHour)),1)):Rt("",!0),n.activityFiles&&n.activityFiles.length!=0?(ct(),ft("div",yot," Device: "+ot((c=(l=n.activityFiles[0])==null?void 0:l.creator)==null?void 0:c.name),1)):Rt("",!0)]),M("div",vot,[M("div",bot,[((u=n.activityFiles)==null?void 0:u.length)!=0?(ct(),ft("h4",wot,"Summary")):Rt("",!0),M("div",null,[M("div",xot,[s.summary.sport?(ct(),ft("div",Eot,[Tot,M("div",Sot,ot(s.summary.sport),1)])):Rt("",!0),s.summary.subSport?(ct(),ft("div",Cot,[Aot,M("div",Mot,ot(s.summary.subSport),1)])):Rt("",!0)]),M("div",Rot,[s.summary.totalMovingTime?(ct(),ft("div",Iot,[Lot,M("div",Oot,[kot,ie(" "+ot(s.secondsToDHMS(s.summary.totalMovingTime)),1)])])):Rt("",!0),s.summary.totalElapsedTime?(ct(),ft("div",$ot,[Not,M("div",Dot,[Pot,ie(" "+ot(s.secondsToDHMS(s.summary.totalElapsedTime)),1)])])):Rt("",!0)]),M("div",Fot,[s.summary.totalDistance?(ct(),ft("div",zot,[Wot,M("div",Vot,[Hot,ie(" "+ot((s.summary.totalDistance/1e3).toFixed(2))+" km ",1)])])):Rt("",!0),s.summary.totalCalories?(ct(),ft("div",Got,[Bot,M("div",Uot,[Yot,ie(" "+ot(s.summary.totalCalories.toLocaleString())+" Cal ",1)])])):Rt("",!0)]),M("div",jot,[s.summary.avgSpeed?(ct(),ft("div",Xot,[qot,M("div",Kot,[Zot,ie(" "+ot((s.summary.avgSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):Rt("",!0),s.summary.maxSpeed?(ct(),ft("div",Jot,[Qot,M("div",tat,[eat,ie(" "+ot((s.summary.maxSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):Rt("",!0)]),M("div",nat,[s.summary.avgHeartRate?(ct(),ft("div",iat,[rat,M("div",sat,[oat,ie(" "+ot(Math.round(s.summary.avgHeartRate))+" bpm ",1)])])):Rt("",!0),s.summary.maxHeartRate?(ct(),ft("div",aat,[lat,M("div",cat,[uat,ie(" "+ot(s.summary.maxHeartRate)+" bpm ",1)])])):Rt("",!0)]),M("div",fat,[s.summary.avgCadence?(ct(),ft("div",hat,[dat,M("div",gat,[mat,ie(" "+ot(Math.round(s.summary.avgCadence))+" rpm ",1)])])):Rt("",!0),s.summary.maxCadence?(ct(),ft("div",pat,[_at,M("div",yat,[vat,ie(" "+ot(s.summary.maxCadence)+" rpm ",1)])])):Rt("",!0)]),M("div",bat,[s.summary.avgPower?(ct(),ft("div",wat,[xat,M("div",Eat,[Tat,ie(" "+ot(Math.round(s.summary.avgPower)),1)])])):Rt("",!0),s.summary.maxPower?(ct(),ft("div",Sat,[Cat,M("div",Aat,[Mat,ie(" "+ot(s.summary.maxPower),1)])])):Rt("",!0)]),M("div",Rat,[s.summary.avgTemperature?(ct(),ft("div",Iat,[Lat,M("div",Oat,[kat,ie(" "+ot(Math.round(s.summary.avgTemperature))+" °C ",1)])])):Rt("",!0),s.summary.maxTemperature?(ct(),ft("div",$at,[Nat,M("div",Dat,[Pat,ie(" "+ot(s.summary.maxTemperature)+" °C ",1)])])):Rt("",!0)]),M("div",Fat,[s.summary.totalAscent?(ct(),ft("div",zat,[Wat,M("div",Vat,[Hat,ie(" "+ot(s.summary.totalAscent)+" m ",1)])])):Rt("",!0),s.summary.totalDescent?(ct(),ft("div",Gat,[Bat,M("div",Uat,[Yat,ie(" "+ot(s.summary.totalDescent)+" m ",1)])])):Rt("",!0)]),M("div",jat,[s.summary.avgAltitude?(ct(),ft("div",Xat,[qat,M("div",Kat,[Zat,ie(" "+ot(s.summary.avgAltitude.toFixed(2))+" m ",1)])])):Rt("",!0),s.summary.maxAltitude?(ct(),ft("div",Jat,[Qat,M("div",tlt,[elt,ie(" "+ot(s.summary.maxAltitude.toFixed(2))+" m ",1)])])):Rt("",!0)])])])])])}const SA=Ii(got,[["render",nlt],["__scopeId","data-v-c7709d93"]]);function CA(e,t){if(!e)return"0 m";t=t??0;const n=(t??0)<=0?1:10*t;return e<1e3?`${(Math.round(e*n)/n).toLocaleString()} m`:`${(Math.round(e/1e3*n)/n).toLocaleString()} km`}function xn(e){return e!=null&&!Number.isNaN(e)}function Ai(e,t){return+xn(t)-+xn(e)||xe(e,t)}function yp(e,t){return+xn(t)-+xn(e)||Ha(e,t)}function Rx(e){return e!=null&&`${e}`!=""}function vp(e){return isFinite(e)?e:NaN}function ps(e){return e>0&&isFinite(e)?e:NaN}function X0(e){return e<0&&isFinite(e)?e:NaN}function ilt(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${rlt(e.getUTCFullYear())}-${is(e.getUTCMonth()+1,2)}-${is(e.getUTCDate(),2)}${n||i||r||s?`T${is(n,2)}:${is(i,2)}${r||s?`:${is(r,2)}${s?`.${is(s,3)}`:""}`:""}Z`:""}`}function rlt(e){return e<0?`-${is(-e,6)}`:e>9999?`+${is(e,6)}`:is(e,4)}function is(e,t){return`${e}`.padStart(t,"0")}const slt=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function cD(e,t){return slt.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Kl=1e3,ba=Kl*60,wa=ba*60,Ss=wa*24,cr=Ss*7,Da=Ss*30,eo=Ss*365,zy=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Kl],["5 seconds",5*Kl],["15 seconds",15*Kl],["30 seconds",30*Kl],["minute",ba],["5 minutes",5*ba],["15 minutes",15*ba],["30 minutes",30*ba],["hour",wa],["3 hours",3*wa],["6 hours",6*wa],["12 hours",12*wa],["day",Ss],["2 days",2*Ss],["week",cr],["2 weeks",2*cr],["month",Da],["3 months",3*Da],["6 months",6*Da],["year",eo],["2 years",2*eo],["5 years",5*eo],["10 years",10*eo],["20 years",20*eo],["50 years",50*eo],["100 years",100*eo]],Ix=new Map([["second",Kl],["minute",ba],["hour",wa],["day",Ss],["monday",cr],["tuesday",cr],["wednesday",cr],["thursday",cr],["friday",cr],["saturday",cr],["sunday",cr],["week",cr],["month",Da],["year",eo]]),uD=new Map([["second",yr],["minute",y0],["hour",v0],["day",rl],["monday",Qf],["tuesday",CO],["wednesday",AO],["thursday",Ka],["friday",MO],["saturday",RO],["sunday",Mc],["week",Mc],["month",Dh],["year",Qi]]),fD=new Map([["second",yr],["minute",$h],["hour",Nh],["day",w0],["monday",th],["tuesday",IO],["wednesday",LO],["thursday",Za],["friday",OO],["saturday",kO],["sunday",Rc],["week",Rc],["month",Ph],["year",tr]]),rd=Symbol("intervalDuration"),q0=Symbol("intervalType");for(const[e,t]of uD)t[rd]=Ix.get(e),t[q0]="time";for(const[e,t]of fD)t[rd]=Ix.get(e),t[q0]="utc";const olt=[["year",tr,"utc"],["year",Qi,"time"],["month",Ph,"utc"],["month",Dh,"time"],["day",w0,"utc",6*Da],["day",rl,"time",6*Da],["hour",Nh,"utc",3*Ss],["minute",$h,"utc",6*wa],["second",yr,"utc",30*ba]];function hD(e,t,n){let i=`${e}`.toLowerCase();i.endsWith("s")&&(i=i.slice(0,-1));let r=1;const s=/^(?:(\d+)\s+)/.exec(i);switch(s&&(i=i.slice(s[0].length),r=+s[1]),i){case"quarter":i="month",r*=3;break;case"half":i="month",r*=6;break}let o=t.get(i);if(!o)throw new Error(`unknown interval: ${e}`);if(r>1){if(!o.every)throw new Error(`non-periodic interval: ${i}`);o=o.every(r),o[rd]=Ix.get(i)*r,o[q0]=n}return o}function dD(e){return hD(e,uD,"time")}function Lx(e){return hD(e,fD,"utc")}function AA(e,t){if(!(t>1))return;const n=e[rd];if(!zy.some(([,r])=>r===n)||n%Ss===0&&Ss<n&&n<Da)return;const[i]=zy[n0(([,r])=>Math.log(r)).center(zy,Math.log(n*t))];return(e[q0]==="time"?dD:Lx)(i)}function MA(e,t,n){const i=t==="time"?Cw:Fh;if(n==null)return i(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=alt(n);switch(e){case"millisecond":return Ol(i(".%L"),i(":%M:%S"),r);case"second":return Ol(i(":%S"),i("%-I:%M"),r);case"minute":return Ol(i("%-I:%M"),i("%p"),r);case"hour":return Ol(i("%-I %p"),i("%b %-d"),r);case"day":return Ol(i("%-d"),i("%b"),r);case"month":return Ol(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function alt(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function llt(e,t){const n=ze(z9(e,(i,r)=>Math.abs(r-i)));if(n<1e3)return MA("millisecond","utc",t);for(const[i,r,s,o]of olt){if(n>o||i==="hour"&&!n)break;if(e.every(a=>r.floor(a)>=a))return MA(i,s,t)}}function Ol(e,t,n){return(i,r,s)=>{const o=e(i,r),a=t(i,r),l=r-Hc(s);return r!==l&&s[l]!==void 0&&a===t(s[l],l)?o:n(o,a)}}const Wc=Object.getPrototypeOf(Uint8Array),clt=Object.prototype.toString,gD=Symbol("reindex");function Wt(e,t,n){const i=typeof t;return i==="string"?RA(e,mD(t),n):i==="function"?RA(e,t,n):i==="number"||t instanceof Date||i==="boolean"?de(e,ni(t),n):typeof(t==null?void 0:t.transform)=="function"?IA(t.transform(e),n):ult(IA(t,n),e==null?void 0:e[gD])}function ult(e,t){return t?Z0(e,t):e}function RA(e,t,n){return de(e,(n==null?void 0:n.prototype)instanceof Wc?flt(t):t,n)}function IA(e,t){return t===void 0?Hn(e):e instanceof t?e:t.prototype instanceof Wc&&!(e instanceof Wc)?t.from(e,$x):t.from(e)}function flt(e){return(t,n)=>$x(e(t,n))}const If=[null],mD=e=>t=>t[e],Bn={transform:Ns},St={transform:e=>e},Ox=()=>1,hlt=()=>!0,ln=e=>e==null?e:`${e}`,Gt=e=>e==null?e:+e,sd=e=>e?e[0]:void 0,dh=e=>e?e[1]:void 0,dlt=e=>e?e[2]:void 0,ni=e=>()=>e;function kx(e){const t=+`${e}`.slice(1)/100;return(n,i)=>To(n,t,i)}function Pn(e){return e instanceof Wc?e:de(e,$x,Float64Array)}function $x(e){return e==null?NaN:Number(e)}function glt(e){return de(e,pD)}function pD(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?cD(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Vn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:ad(e)?[void 0,e]:[e,void 0]}function Le(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function _D(e,t,n){if(e!=null)return li(e,t,n)}function li(e,t,n){const i=`${e}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${t}: ${e}`);return i}function Hn(e){return e==null||e instanceof Array||e instanceof Wc?e:Array.from(e)}function de(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function gh(e,t=Array){return e instanceof t?e.slice():t.from(e)}function yD({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function vD({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function K0(e){return yD(e)||vD(e)||e.interval!==void 0}function Li(e){return(e==null?void 0:e.toString)===clt}function Pa(e){return Li(e)&&(e.type!==void 0||e.domain!==void 0)}function fr(e){return Li(e)&&typeof e.transform!="function"}function Io(e){return fr(e)&&e.value===void 0&&e.channel===void 0}function bD(e,t,n,i=St){return t===void 0&&n===void 0?(t=0,n=e===void 0?i:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function or(e,t){return e===void 0&&t===void 0?[sd,dh]:[e,t]}function Go({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Vn(t)),e===void 0&&([e]=Vn(n)),e}function Ns(e){const t=e.length,n=new Uint32Array(t);for(let i=0;i<t;++i)n[i]=i;return n}function Z0(e,t){return de(t,n=>e[n],e.constructor)}function Nx(e){return e.length===1?(t,n)=>e(Z0(n,t)):e}function Fa(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function xa(e){return e!==null&&typeof e=="object"?e.valueOf():e}function wD(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function Zn(e){let t;return[{transform:()=>t,label:Ds(e)},n=>t=n]}function In(e){return e==null?[e]:Zn(e)}function Ds(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function bp(e,t){return{transform(n){const i=e.transform(n),r=t.transform(n);return An(i)||An(r)?de(i,(s,o)=>new Date((+i[o]+ +r[o])/2)):de(i,(s,o)=>(+i[o]+ +r[o])/2,Float64Array)},label:e.label}}function wp(e,t){const n=xD(t==null?void 0:t.interval,t==null?void 0:t.type);return n?de(e,n):e}function xD(e,t){const n=Dx(e,t);return n&&(i=>xn(i)?n.floor(i):i)}function Dx(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>_i(Math.ceil(i*n),r*n).map(s=>s/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>_i(Math.ceil(i/n),r/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?dD:Lx)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function _u(e,t){if(e=Dx(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function mlt(e,t){if(e=_u(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function plt(e){return Zl(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Zl(e){return typeof(e==null?void 0:e.range)=="function"}function od(e){return e===void 0||fr(e)?e:{value:e}}function _lt(e){return e==null?null:{transform:t=>Wt(t,e,Float64Array),label:Ds(e)}}function ylt(e){if(!Ps(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function Ps(e){return e&&typeof e[Symbol.iterator]=="function"}function ED(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function Te(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function An(e){for(const t of e)if(t!=null)return t instanceof Date}function vlt(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&cD(t)}function blt(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function Jl(e){for(const t of e)if(t!=null)return typeof t=="number"}function Wy(e,t){let n;for(const i of e)if(i!=null){if(!t(i))return!1;n=!0}return n}const wlt=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function ad(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||wlt.has(e))}function xlt(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Re(e){return e==null||Vc(e)}function Vc(e){return/^\s*none\s*$/i.test(e)}function Elt(e){return/^\s*round\s*$/i.test(e)}function TD(e,t){return _D(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function ld(e="middle"){return TD(e,"frameAnchor")}function Hc(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Ha(t,n)}function Tlt(e={},...t){let n=e;for(const i of t)for(const r in i)if(n[r]===void 0){const s=i[r];n===e?n={...n,[r]:s}:n[r]=s}return n}function Slt(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(t.has(r))throw new Error(`duplicate name: ${r}`);return t.add(r),[i,n]}))}function Px(e){return Ps(e)?Slt(e):e}const xr=Symbol("position"),Fs=Symbol("color"),cd=Symbol("radius"),ud=Symbol("length"),fd=Symbol("opacity"),J0=Symbol("symbol"),SD=Symbol("projection"),we=new Map([["x",xr],["y",xr],["fx",xr],["fy",xr],["r",cd],["color",Fs],["opacity",fd],["symbol",J0],["length",ud],["projection",SD]]);function Clt(e){return e===xr||e===SD}function Alt(e){return e===xr||e===cd||e===ud||e===fd}const CD=Math.sqrt(3),AD=2/CD,Mlt={draw(e,t){const n=Math.sqrt(t/Math.PI),i=n*AD,r=i/2;e.moveTo(0,i),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(0,-i),e.lineTo(-n,-r),e.lineTo(-n,r),e.closePath()}},Fx=new Map([["asterisk",sk],["circle",eh],["cross",ok],["diamond",lk],["diamond2",ck],["hexagon",Mlt],["plus",uk],["square",fk],["square2",hk],["star",gk],["times",yk],["triangle",mk],["triangle2",pk],["wye",_k]]);function zx(e){return e&&typeof e.draw=="function"}function Rlt(e){return zx(e)?!0:typeof e!="string"?!1:Fx.has(e.toLowerCase())}function Wx(e){if(e==null||zx(e))return e;const t=Fx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function Ilt(e){if(e==null||zx(e))return[void 0,e];if(typeof e=="string"){const t=Fx.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function Wr({filter:e,sort:t,reverse:n,transform:i,initializer:r,...s}={},o){if(i===void 0&&(e!=null&&(i=Vx(e)),t!=null&&!Io(t)&&(i=Vy(i,Gx(t))),n&&(i=Vy(i,Hx))),o!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||Io(t))&&{sort:t},transform:Vy(i,o)}}function Gn({filter:e,sort:t,reverse:n,initializer:i,...r}={},s){return i===void 0&&(e!=null&&(i=Vx(e)),t!=null&&!Io(t)&&(i=Hy(i,Gx(t))),n&&(i=Hy(i,Hx))),{...r,...(t===null||Io(t))&&{sort:t},initializer:Hy(i,s)}}function Vy(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r){return{data:n,facets:i}=e.call(this,n,i,r),t.call(this,Hn(n),i,r)}}function Hy(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r,...s){let o,a,l,c,u,f;return{data:a=n,facets:l=i,channels:o}=e.call(this,n,i,r,...s),{data:u=a,facets:f=l,channels:c}=t.call(this,a,l,{...r,...o},...s),{data:u,facets:f,channels:{...o,...c}}}}function Q0(e,t){return(e.initializer!=null?Gn:Wr)(e,t)}function Llt(e,t){return Q0(t,Vx(e))}function Vx(e){return(t,n)=>{const i=Wt(t,e);return{data:t,facets:n.map(r=>r.filter(s=>i[s]))}}}function Olt({sort:e,...t}={}){return{...Q0(t,Hx),sort:Io(e)?e:null}}function Hx(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function klt({seed:e,sort:t,...n}={}){return{...Q0(n,RD(e==null?Math.random:Ew(e))),sort:Io(t)?t:null}}function MD(e,{sort:t,...n}={}){return{...(fr(e)&&e.channel!==void 0?Gn:Q0)(n,Gx(e)),sort:Io(t)?t:null}}function Gx(e){return(typeof e=="function"&&e.length!==1?$lt:RD)(e)}function $lt(e){return(t,n)=>{const i=(r,s)=>e(t[r],t[s]);return{data:t,facets:n.map(r=>r.slice().sort(i))}}}function RD(e){let t,n;({channel:t,value:e,order:n}={...od(e)});const i=t==null?void 0:t.startsWith("-");if(i&&(t=t.slice(1)),n===void 0&&(n=i?yp:Ai),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Ai;break;case"descending":n=yp;break;default:throw new Error(`invalid order: ${n}`)}return(r,s,o)=>{let a;if(t===void 0)a=Wt(r,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:r,facets:s.map(c=>c.slice().sort(l))}}}function Bx(e,t){return t_(null,null,e,t)}function mh(e={y:"count"},t={}){const{x:n=St}=t;if(n==null)throw new Error("missing channel: x");return t_(n,null,e,t)}function ph(e={x:"count"},t={}){const{y:n=St}=t;if(n==null)throw new Error("missing channel: y");return t_(null,n,e,t)}function Ux(e={fill:"count"},t={}){let{x:n,y:i}=t;if([n,i]=or(n,i),n==null)throw new Error("missing channel: x");if(i==null)throw new Error("missing channel: y");return t_(n,i,e,t)}function t_(e,t,{data:n=Kx,filter:i,sort:r,reverse:s,...o}={},a={}){o=Yx(o,a),n=e_(n,St),r=r==null?void 0:jx("sort",r,a),i=i==null?void 0:Xx("filter",i,a);const[l,c]=In(e),[u,f]=In(t),{z:h,fill:d,stroke:g,x1:m,x2:p,y1:_,y2:y,...b}=a,[v,x]=In(h),[w]=Vn(d),[E]=Vn(g),[T,I]=In(w),[S,A]=In(E);return{..."z"in a&&{z:v||h},..."fill"in a&&{fill:T||d},..."stroke"in a&&{stroke:S||g},...Wr(b,(R,k,$)=>{const L=wp(Wt(R,e),$==null?void 0:$.x),N=wp(Wt(R,t),$==null?void 0:$.y),D=Wt(R,h),V=Wt(R,w),Y=Wt(R,E),B=qx(o,{z:D,fill:V,stroke:Y}),q=[],z=[],Q=L&&c([]),nt=N&&f([]),rt=D&&x([]),at=V&&I([]),W=Y&&A([]);let G=0;for(const F of o)F.initialize(R);r&&r.initialize(R),i&&i.initialize(R);for(const F of k){const j=[];for(const Z of o)Z.scope("facet",F);r&&r.scope("facet",F),i&&i.scope("facet",F);for(const[Z,C]of dc(F,B))for(const[O,P]of dc(C,N))for(const[H,U]of dc(P,L))if(!(i&&!i.reduce(U))){j.push(G++),z.push(n.reduceIndex(U,R)),L&&Q.push(H),N&&nt.push(O),D&&rt.push(B===D?Z:D[U[0]]),V&&at.push(B===V?Z:V[U[0]]),Y&&W.push(B===Y?Z:Y[U[0]]);for(const X of o)X.reduce(U);r&&r.reduce(U)}q.push(j)}return ID(q,r,s),{data:z,facets:q}}),...!yo(o,"x")&&(l?{x:l}:{x1:m,x2:p}),...!yo(o,"y")&&(u?{y:u}:{y1:_,y2:y}),...Object.fromEntries(o.map(({name:R,output:k})=>[R,k]))}}function yo(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function Yx(e,t,n=jx){const i=Object.entries(e);return t.title!=null&&e.title===void 0&&i.push(["title",zlt]),t.href!=null&&e.href===void 0&&i.push(["href",Zx]),i.filter(([,r])=>r!==void 0).map(([r,s])=>s===null?Nlt(r):n(r,s,t))}function jx(e,t,n,i=Xx){let r;Li(t)&&"reduce"in t&&(r=t.scale,t=t.reduce);const s=i(e,t,n),[o,a]=Zn(s.label);let l;return{name:e,output:r===void 0?o:{value:o,scale:r},initialize(c){s.initialize(c),l=a([])},scope(c,u){s.scope(c,u)},reduce(c,u){l.push(s.reduce(c,u))}}}function Nlt(e){return{name:e,initialize(){},scope(){},reduce(){}}}function Xx(e,t,n,i=e_){const r=wD(e,n),s=i(t,r);let o,a;return{label:Ds(s===xp?null:r,s.label),initialize(l){o=r===void 0?l:Wt(l,r),s.scope==="data"&&(a=s.reduceIndex(Ns(l),o))},scope(l,c){s.scope===l&&(a=s.reduceIndex(c,o))},reduce(l,c){return s.scope==null?s.reduceIndex(l,o,c):s.reduceIndex(l,o,a,c)}}}function dc(e,t){return t?Bf(Is(e,n=>t[n]),sd):[[,e]]}function e_(e,t,n=Dlt){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&Li(e))return Plt(e);if(typeof e=="function")return Flt(e);if(/^p\d{2}$/i.test(e))return ts(kx(e));switch(`${e}`.toLowerCase()){case"first":return Zx;case"last":return Wlt;case"identity":return Kx;case"count":return xp;case"distinct":return Vlt;case"sum":return t==null?xp:Hlt;case"proportion":return OA(t,"data");case"proportion-facet":return OA(t,"facet");case"deviation":return ts(Sh);case"min":return ts(qe);case"min-index":return ts(N9);case"max":return ts(ze);case"max-index":return ts($9);case"mean":return LA(s0);case"median":return LA(jf);case"variance":return ts(Qb);case"mode":return ts(FI)}return n(e)}function Dlt(e){throw new Error(`invalid reduce: ${e}`)}function qx(e,t){for(const n in t){const i=t[n];if(i!==void 0&&!e.some(r=>r.name===n))return i}}function ID(e,t,n){if(t){const i=t.output.transform(),r=(s,o)=>Ai(i[s],i[o]);e.forEach(s=>s.sort(r))}n&&e.forEach(i=>i.reverse())}function Plt(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function Flt(e){return{reduceIndex(t,n,i){return e(Z0(n,t),i)}}}function ts(e){return{reduceIndex(t,n){return e(t,i=>n[i])}}}function LA(e){return{reduceIndex(t,n){const i=e(t,r=>n[r]);return An(n)?new Date(i):i}}}const Kx={reduceIndex(e,t){return Z0(t,e)}},Zx={reduceIndex(e,t){return t[e[0]]}},zlt={reduceIndex(e,t){const i=Bf(oc(e,s=>s.length,s=>t[s]),dh),r=i.slice(-5).reverse();if(r.length<i.length){const s=i.slice(0,-4);r[5-1]=[`… ${s.length.toLocaleString("en-US")} more`,Lr(s,dh)]}return r.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},Wlt={reduceIndex(e,t){return t[e[e.length-1]]}},xp={label:"Frequency",reduceIndex(e){return e.length}},Vlt={label:"Distinct",reduceIndex(e,t){const n=new Ch;for(const i of e)n.add(t[i]);return n.size}},Hlt=ts(Lr);function OA(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:t,reduceIndex:(n,i,r=1)=>Lr(n,s=>i[s])/r}}function _h(e,{scale:t,type:n,value:i,filter:r,hint:s,label:o=Ds(i)},a){return s===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(s=i.hint),OD(a,{scale:t,type:n,value:Wt(e,i),label:o,filter:r,hint:s})}function LD(e,t){return Object.fromEntries(Object.entries(e).map(([n,i])=>[n,_h(t,i,n)]))}function Jx(e,t){const n=Object.fromEntries(Object.entries(e).map(([i,{scale:r,value:s}])=>{const o=r==null?null:t[r];return[i,o==null?s:de(s,o)]}));return n.channels=e,n}function OD(e,t){const{scale:n,value:i}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Wy(i,ad)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Wy(i,xlt)?null:"opacity";break;case"symbol":n!==!0&&Wy(i,Rlt)?(t.scale=null,t.value=de(i,Wx)):t.scale="symbol";break;default:t.scale=we.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!we.has(n))throw new Error(`unknown scale: ${n}`);return t}function Glt(e,t,n,i,r){const{order:s,reverse:o,reduce:a=!0,limit:l}=r;for(const c in r){if(!we.has(c))continue;let{value:u,order:f=s,reverse:h=o,reduce:d=a,limit:g=l}=od(r[c]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),f=f===void 0?m!==(u==="width"||u==="height")?$D:kD:Ylt(f),d==null||d===!1)continue;const p=c==="fx"||c==="fy"?Ult(t,i[c]):Blt(n,c);if(!p)throw new Error(`missing channel for scale: ${c}`);const _=p.value,[y=0,b=1/0]=Ps(g)?g:g<0?[g]:[0,g];if(u==null)p.domain=()=>{let v=Array.from(new Ch(_));return h&&(v=v.reverse()),(y!==0||b!==1/0)&&(v=v.slice(y,b)),v};else{const v=u==="data"?e:u==="height"?kA(n,"y1","y2"):u==="width"?kA(n,"x1","x2"):tb(n,u,u==="y"?"y2":u==="x"?"x2":void 0),x=e_(d===!0?"max":d,v);p.domain=()=>{let w=R9(Ns(_),E=>x.reduceIndex(E,v),E=>_[E]);return f&&w.sort(f),h&&w.reverse(),(y!==0||b!==1/0)&&(w=w.slice(y,b)),w.map(sd)}}}}function Blt(e,t){for(const n in e){const i=e[n];if(i.scale===t)return i}}function Ult(e,t){const n=e.original;if(n===e)return t;const i=t.value,r=t.value=[];for(let s=0;s<n.length;++s){const o=i[n[s][0]];for(const a of e[s])r[a]=o}return t}function kA(e,t,n){const i=tb(e,t),r=tb(e,n);return de(r,(s,o)=>Math.abs(s-i[o]),Float64Array)}function tb(e,t,n){let i=e[t];if(!i&&n!==void 0&&(i=e[n]),i)return i.value;throw new Error(`missing channel: ${t}`)}function Ylt(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return kD;case"descending":return $D}throw new Error(`invalid order: ${e}`)}function kD([e,t],[n,i]){return Ai(t,i)||Ai(e,n)}function $D([e,t],[n,i]){return yp(t,i)||Ai(e,n)}function eb(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function Qx(e){let t,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,s)=>r!==i[s]))&&(n=i,t=e(...i)),t)}const jlt=Qx(e=>new Intl.NumberFormat(e)),Xlt=Qx((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),qlt=Qx((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function Klt(e="en-US"){const t=jlt(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function Zlt(e="en-US",t="short"){const n=Xlt(e,t);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2e3,+i)))?n.format(i):void 0}function Jlt(e="en-US",t="short"){const n=qlt(e,t);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2001,0,+i)))?n.format(i):void 0}function ND(e){return ilt(e,"Invalid Date")}function Qlt(e="en-US"){const t=Klt(e);return n=>(n instanceof Date?ND:typeof n=="number"?t:ln)(n)}const tl=Qlt();let nb=0,ib;function tct(){const e=nb;return nb=0,ib=void 0,e}function _s(e){e!==ib&&(ib=e,console.warn(e),++nb)}const Qe=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let ect=0;function $A(){return`plot-clip-${++ect}`}function DD(e,{title:t,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:g,strokeDasharray:m,strokeDashoffset:p,opacity:_,mixBlendMode:y,imageFilter:b,paintOrder:v,pointerEvents:x,shapeRendering:w,channels:E},{ariaLabel:T,fill:I="currentColor",fillOpacity:S,stroke:A="none",strokeOpacity:R,strokeWidth:k,strokeLinecap:$,strokeLinejoin:L,strokeMiterlimit:N,paintOrder:D}){I===null&&(a=null,l=null),A===null&&(c=null,f=null),Re(I)?!Re(A)&&(!Re(a)||E!=null&&E.fill)&&(A="none"):Re(A)&&(!Re(c)||E!=null&&E.stroke)&&(I="none");const[V,Y]=Vn(a,I),[B,q]=Le(l,S),[z,Q]=Vn(c,A),[nt,rt]=Le(f,R),[at,W]=Le(_);Vc(Q)||(u===void 0&&(u=k),d===void 0&&(d=$),h===void 0&&(h=L),g===void 0&&!Elt(h)&&(g=N),!Vc(Y)&&v===void 0&&(v=D));const[G,F]=Le(u);return I!==null&&(e.fill=Ae(Y,"currentColor"),e.fillOpacity=qu(q,1)),A!==null&&(e.stroke=Ae(Q,"none"),e.strokeWidth=qu(F,1),e.strokeOpacity=qu(rt,1),e.strokeLinejoin=Ae(h,"miter"),e.strokeLinecap=Ae(d,"butt"),e.strokeMiterlimit=qu(g,4),e.strokeDasharray=Ae(m,"none"),e.strokeDashoffset=Ae(p,"0")),e.target=ln(o),e.ariaLabel=ln(T),e.ariaDescription=ln(r),e.ariaHidden=ln(s),e.opacity=qu(W,1),e.mixBlendMode=Ae(y,"normal"),e.imageFilter=Ae(b,"none"),e.paintOrder=Ae(v,"normal"),e.pointerEvents=Ae(x,"auto"),e.shapeRendering=Ae(w,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:V,scale:"auto",optional:!0},fillOpacity:{value:B,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:nt,scale:"auto",optional:!0},strokeWidth:{value:G,optional:!0},opacity:{value:at,scale:"auto",optional:!0}}}function nct(e,t){t&&e.filter(n=>Rx(t[n])).append("title").call(rct,t)}function ict(e,t){t&&e.filter(([n])=>Rx(t[n])).append("title").call(sct,t)}function rct(e,t){t&&e.text(n=>tl(t[n]))}function sct(e,t){t&&e.text(([n])=>tl(t[n]))}function He(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){i&&bt(e,"aria-label",h=>i[h]),s&&bt(e,"fill",h=>s[h]),o&&bt(e,"fill-opacity",h=>o[h]),a&&bt(e,"stroke",h=>a[h]),l&&bt(e,"stroke-opacity",h=>l[h]),c&&bt(e,"stroke-width",h=>c[h]),u&&bt(e,"opacity",h=>u[h]),f&&zD(e,h=>f[h],t),n||nct(e,r)}function Ep(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){i&&bt(e,"aria-label",([h])=>i[h]),s&&bt(e,"fill",([h])=>s[h]),o&&bt(e,"fill-opacity",([h])=>o[h]),a&&bt(e,"stroke",([h])=>a[h]),l&&bt(e,"stroke-opacity",([h])=>l[h]),c&&bt(e,"stroke-width",([h])=>c[h]),u&&bt(e,"opacity",([h])=>u[h]),f&&zD(e,([h])=>f[h],t),n||ict(e,r)}function oct({ariaLabel:e,title:t,fill:n,fillOpacity:i,stroke:r,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,i,r,s,o,a,l].filter(u=>u!==void 0)}function tE(e,t,n){const i=Is(e,r=>t[r]);return n===void 0&&i.size>1+e.length>>1&&_s("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*PD(e,t,n,i){const{z:r}=n,{z:s}=i,o=oct(i,n),a=[...t,...o];for(const l of s?tE(e,s,r):[e]){let c,u;t:for(const f of l){for(const h of a)if(!xn(h[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=o.map(h=>xa(h[f])),u=[f];continue}u.push(f);for(let h=0;h<o.length;++h)if(xa(o[h][f])!==c[h]){yield u,c=o.map(g=>xa(g[f])),u=[f];continue t}}u&&(yield u)}}function FD(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=li(e,"clip",["frame","sphere"])),e}function act(e,t,n,i){let r;const{clip:s=i.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:c,marginTop:u,marginBottom:f}=n,h=$A();r=`url(#${h})`,e=te("svg:g",i).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=i;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=$A();r=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",zo(o)({type:"Sphere"}));break}}bt(e,"aria-label",t.ariaLabel),bt(e,"aria-description",t.ariaDescription),bt(e,"aria-hidden",t.ariaHidden),bt(e,"clip-path",r)}function ve(e,t,n,i){act(e,t,n,i),bt(e,"fill",t.fill),bt(e,"fill-opacity",t.fillOpacity),bt(e,"stroke",t.stroke),bt(e,"stroke-width",t.strokeWidth),bt(e,"stroke-opacity",t.strokeOpacity),bt(e,"stroke-linejoin",t.strokeLinejoin),bt(e,"stroke-linecap",t.strokeLinecap),bt(e,"stroke-miterlimit",t.strokeMiterlimit),bt(e,"stroke-dasharray",t.strokeDasharray),bt(e,"stroke-dashoffset",t.strokeDashoffset),bt(e,"shape-rendering",t.shapeRendering),bt(e,"filter",t.imageFilter),bt(e,"paint-order",t.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=t;bt(e,"pointer-events",r)}function pe(e,t){lct(e,"mix-blend-mode",t.mixBlendMode),bt(e,"opacity",t.opacity)}function zD(e,t,n){e.each(function(i){const r=t(i);if(r!=null){const s=this.ownerDocument.createElementNS(Ba.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(Ba.xlink,"href",r),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function bt(e,t,n){n!=null&&e.attr(t,n)}function lct(e,t,n){n!=null&&e.style(t,n)}function fe(e,t,{x:n,y:i},r=Qe,s=Qe){r+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(s+=i.bandwidth()/2),(r||s)&&e.attr("transform",`translate(${r},${s})`)}function Ae(e,t){if((e=ln(e))!==t)return e}function qu(e,t){if((e=Gt(e))!==t)return e}const cct=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function eE(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!cct.test(e))throw new Error(`invalid class name: ${e}`);return e}function nE(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Vr({frameAnchor:e},{width:t,height:n,marginTop:i,marginRight:r,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-r:(o+t-r)/2,/^top/.test(e)?i:/^bottom/.test(e)?n-s:(i+n-s)/2]}function n_(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:FD(n)}}function te(e,{document:t}){return Ei(a0(e).call(t.documentElement))}const WD=Math.PI,qr=2*WD,NA=.618;function uct({projection:e,inset:t=0,insetTop:n=t,insetRight:i=t,insetBottom:r=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,c="frame";if(Li(e)){let x;if({type:e,domain:l,inset:x,insetTop:n=x!==void 0?x:n,insetRight:i=x!==void 0?x:i,insetBottom:r=x!==void 0?x:r,insetLeft:s=x!==void 0?x:s,clip:c=c,...a}=e,e==null)return}typeof e!="function"&&({type:e}=VD(e));const{width:u,height:f,marginLeft:h,marginRight:d,marginTop:g,marginBottom:m}=o,p=u-h-d-s-i,_=f-g-m-n-r;if(e=e==null?void 0:e({width:p,height:_,clip:c,...a}),e==null)return;c=fct(c,h,g,u-d,f-m);let y=h+s,b=g+n,v;if(l!=null){const[[x,w],[E,T]]=zo(e).bounds(l),I=Math.min(p/(E-x),_/(T-w));I>0?(y-=(I*(x+E)-p)/2,b-=(I*(w+T)-_)/2,v=Lm({point(S,A){this.stream.point(S*I+y,A*I+b)}})):_s("Warning: the projection could not be fit to the specified domain; using the default scale.")}return v??(v=y===0&&b===0?HD():Lm({point(x,w){this.stream.point(x+y,w+b)}})),{stream:x=>e.stream(v.stream(c(x)))}}function VD(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Fi(tB,.7463,.4673);case"albers":return fg(tO,.7463,.4673);case"azimuthal-equal-area":return Fi(eB,4,4);case"azimuthal-equidistant":return Fi(nB,qr,qr);case"conic-conformal":return fg(sB,qr,qr);case"conic-equal-area":return fg(Om,6.1702,2.9781);case"conic-equidistant":return fg(lB,7.312,3.6282);case"equal-earth":return Fi(uB,5.4133,2.6347);case"equirectangular":return Fi(oB,qr,WD);case"gnomonic":return Fi(fB,3.4641,3.4641);case"identity":return{type:HD};case"reflect-y":return{type:hct};case"mercator":return Fi(iB,qr,qr);case"orthographic":return Fi(hB,2,2);case"stereographic":return Fi(dB,2,2);case"transverse-mercator":return Fi(gB,qr,qr);default:throw new Error(`unknown projection type: ${e}`)}}function fct(e,t,n,i,r){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return FL(t,n,i,r);default:throw new Error(`unknown projection clip type: ${e}`)}}function Fi(e,t,n){return{type:({width:i,height:r,rotate:s,precision:o=.15,clip:a})=>{var c,u,f;const l=e();return o!=null&&((c=l.precision)==null||c.call(l,o)),s!=null&&((u=l.rotate)==null||u.call(l,s)),typeof a=="number"&&((f=l.clipAngle)==null||f.call(l,a)),l.scale(Math.min(i/t,r/n)),l.translate([i/2,r/2]),l},aspectRatio:n/t}}function fg(e,t,n){const{type:i,aspectRatio:r}=Fi(e,t,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:c}=s,u=i(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:r}}const HD=ni({stream:e=>e}),hct=ni(Lm({point(e,t){this.stream.point(e,-t)}}));function GD(e,t,n,i){const r=n[e],s=n[t],o=r.length,a=n[e]=new Float64Array(o).fill(NaN),l=n[t]=new Float64Array(o).fill(NaN);let c;const u=i.stream({point(f,h){a[c]=f,l[c]=h}});for(c=0;c<o;++c)u.point(r[c],s[c])}function dct({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(Li(e)&&(e=e.type),e!=null)}function gct(e){if(typeof(e==null?void 0:e.stream)=="function")return NA;if(Li(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=VD(e);if(t)return t}return NA}}function i_(e,t,{projection:n}){const{x:i,y:r}=e;let s={};return i&&(s.x=i),r&&(s.y=r),s=Jx(s,t),n&&(i==null?void 0:i.scale)==="x"&&(r==null?void 0:r.scale)==="y"&&GD("x","y",s,n),i&&(s.x=Pn(s.x)),r&&(s.y=Pn(s.y)),s}function mct(e){const t=[],n=[],i={scale:"x",value:t},r={scale:"y",value:n},s={point(o,a){t.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)lo(o,s);return[i,r]}const BD=new Map([["accent",xY],["category10",wY],["dark2",EY],["paired",TY],["pastel1",SY],["pastel2",CY],["set1",AY],["set2",MY],["set3",RY],["tableau10",IY]]);function pct(e){return e!=null&&BD.has(`${e}`.toLowerCase())}const DA=new Map([...BD,["brbg",Kr(UO,YO)],["prgn",Kr(jO,XO)],["piyg",Kr(qO,KO)],["puor",Kr(ZO,JO)],["rdbu",Kr(Ev,Pm)],["rdgy",Kr(QO,t3)],["rdylbu",Kr(Tv,Fm)],["rdylgn",Kr(e3,n3)],["spectral",Kr(i3,r3)],["burd",PA(Ev,Pm)],["buylrd",PA(Tv,Fm)],["blues",Ge(R3,I3)],["greens",Ge(L3,O3)],["greys",Ge(k3,$3)],["oranges",Ge(z3,W3)],["purples",Ge(N3,D3)],["reds",Ge(P3,F3)],["turbo",Zr(j3)],["viridis",Zr(X3)],["magma",Zr(q3)],["inferno",Zr(K3)],["plasma",Zr(Z3)],["cividis",Zr(V3)],["cubehelix",Zr(H3)],["warm",Zr(G3)],["cool",Zr(B3)],["bugn",Ge(s3,o3)],["bupu",Ge(a3,l3)],["gnbu",Ge(c3,u3)],["orrd",Ge(f3,h3)],["pubu",Ge(m3,p3)],["pubugn",Ge(d3,g3)],["purd",Ge(_3,y3)],["rdpu",Ge(v3,b3)],["ylgn",Ge(E3,T3)],["ylgnbu",Ge(w3,x3)],["ylorbr",Ge(S3,C3)],["ylorrd",Ge(A3,M3)],["rainbow",FA(U3)],["sinebow",FA(Y3)]]);function Ge(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Zi(t,n):e[n])}function Kr(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Zi(t,n):e[n])}function PA(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Zi(i=>t(1-i),n):e[n].slice().reverse())}function Zr(e){return({length:t})=>Zi(e,Math.max(2,Math.floor(t)))}function FA(e){return({length:t})=>Zi(e,Math.floor(t)+1).slice(0,-1)}function UD(e){const t=`${e}`.toLowerCase();if(!DA.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return DA.get(t)}function r_(e,t){const n=UD(e),i=typeof n=="function"?n({length:t}):n;return i.length!==t?i.slice(0,t):i}function _ct(e,t="greys"){const n=new Set,[i,r]=r_(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(r);else if(s===!1)n.add(i);else return;return[...n]}const zA=new Map([["brbg",YO],["prgn",XO],["piyg",KO],["puor",JO],["rdbu",Pm],["rdgy",t3],["rdylbu",Fm],["rdylgn",n3],["spectral",r3],["burd",e=>Pm(1-e)],["buylrd",e=>Fm(1-e)],["blues",I3],["greens",O3],["greys",$3],["purples",D3],["reds",F3],["oranges",W3],["turbo",j3],["viridis",X3],["magma",q3],["inferno",K3],["plasma",Z3],["cividis",V3],["cubehelix",H3],["warm",G3],["cool",B3],["bugn",o3],["bupu",l3],["gnbu",u3],["orrd",h3],["pubugn",g3],["pubu",p3],["purd",y3],["rdpu",b3],["ylgnbu",x3],["ylgn",T3],["ylorbr",C3],["ylorrd",M3],["rainbow",U3],["sinebow",Y3]]);function iE(e){const t=`${e}`.toLowerCase();if(!zA.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return zA.get(t)}const yct=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function vct(e){return e!=null&&yct.has(`${e}`.toLowerCase())}const YD=e=>t=>e(1-t),Gy=[0,1],WA=new Map([["number",sn],["rgb",ja],["hsl",oV],["hcl",cV],["lab",aV]]);function jD(e){const t=`${e}`.toLowerCase();if(!WA.has(t))throw new Error(`unknown interpolator: ${t}`);return WA.get(t)}function hd(e,t,n,{type:i,nice:r,clamp:s,zero:o,domain:a=qD(e,n),unknown:l,round:c,scheme:u,interval:f,range:h=we.get(e)===cd?Ict(n,a):we.get(e)===ud?Lct(n,a):we.get(e)===fd?Gy:void 0,interpolate:d=we.get(e)===Fs?u==null&&h!==void 0?ja:iE(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):c?u0:sn,reverse:g}){if(f=_u(f,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof d!="function"&&(d=jD(d)),g=!!g,h!==void 0){const m=(a=Hn(a)).length,p=(h=Hn(h)).length;if(m!==p){if(d.length===1)throw new Error("invalid piecewise interpolator");d=f0(d,h),h=void 0}}if(d.length===1?(g&&(d=YD(d),g=!1),h===void 0&&(h=Float64Array.from(a,(m,p)=>p/(a.length-1)),h.length===2&&(h=Gy)),t.interpolate((h===Gy?ni:sE)(d))):t.interpolate(d),o){const[m,p]=be(a);(m>0||p<0)&&(a=gh(a),Hc(a)!==Math.sign(m)?a[a.length-1]=0:a[0]=0)}return g&&(a=rm(a)),t.domain(a).unknown(l),r&&(t.nice(bct(r,i)),a=t.domain()),h!==void 0&&t.range(h),s&&t.clamp(s),{type:i,domain:a,range:h,scale:t,interpolate:d,interval:f}}function bct(e,t){return e===!0?void 0:typeof e=="number"?e:mlt(e,t)}function wct(e,t,n){return hd(e,_r(),t,n)}function xct(e,t,n){return XD(e,t,{...n,exponent:.5})}function XD(e,t,{exponent:n=1,...i}){return hd(e,EO().exponent(n),t,{...i,type:"pow"})}function Ect(e,t,{base:n=10,domain:i=Oct(t),...r}){return hd(e,vO().base(n),t,{...r,domain:i})}function Tct(e,t,{constant:n=1,...i}){return hd(e,wO().constant(n),t,i)}function Sct(e,t,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:s="rdylbu",domain:o=kct(t),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?Zi(l,r):we.get(e)===Fs?r_(s,r):void 0),o.length>0&&(o=TO(o,n===void 0?{length:r}:n).quantiles()),rE(e,t,{domain:o,range:n,reverse:c,unknown:a})}function Cct(e,t,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:s=qD(e,t),unknown:o,interpolate:a,reverse:l}){const[c,u]=be(s);let f;return n===void 0?(f=Eo(c,u,i),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),i=f.length+1,n=a!==void 0?Zi(a,i):we.get(e)===Fs?r_(r,i):void 0):(f=Zi(sn(c,u),i+1).slice(1,-1),c instanceof Date&&(f=f.map(h=>new Date(h)))),Hc(Hn(s))<0&&f.reverse(),rE(e,t,{domain:f,range:n,reverse:l,unknown:o})}function rE(e,t,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:s,range:o=s!==void 0?Zi(s,n.length+1):we.get(e)===Fs?r_(r,n.length+1):void 0,reverse:a}){n=Hn(n);const l=Hc(n);if(!isNaN(l)&&!Act(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=rm(o)),{type:"threshold",scale:SO(l<0?rm(n):n,o===void 0?[]:o).unknown(i),domain:n,range:o}}function Act(e,t){for(let n=1,i=e.length,r=e[0];n<i;++n){const s=Ha(r,r=e[n]);if(s!==0&&s!==t)return!1}return!0}function Mct(e){return{type:"identity",scale:Alt(we.get(e))?pO():t=>t}}function yh(e,t=vp){return e.length?[qe(e,({value:n})=>n===void 0?n:qe(n,t)),ze(e,({value:n})=>n===void 0?n:ze(n,t))]:[0,1]}function qD(e,t){const n=we.get(e);return(n===cd||n===fd||n===ud?Rct:yh)(t)}function Rct(e){return[0,e.length?ze(e,({value:t})=>t===void 0?t:ze(t,vp)):1]}function Ict(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const i=To(e,.5,({value:o})=>o===void 0?NaN:To(o,.25,ps)),r=t.map(o=>3*Math.sqrt(o/i)),s=30/ze(r);return s<1?r.map(o=>o*s):r}function Lct(e,t){const n=jf(e,({value:s})=>s===void 0?NaN:jf(s,Math.abs)),i=t.map(s=>12*s/n),r=60/ze(i);return r<1?i.map(s=>s*r):i}function Oct(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return yh(e,ps);if(n<0)return yh(e,X0)}return[1,10]}function kct(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const i of n)t.push(i);return t}function sE(e){return(t,n)=>i=>e(t+i*(n-t))}function s_(e,t,n,i,{type:r,nice:s,clamp:o,domain:a=yh(i),unknown:l,pivot:c=0,scheme:u,range:f,symmetric:h=!0,interpolate:d=we.get(e)===Fs?u==null&&f!==void 0?ja:iE(u!==void 0?u:"rdbu"):sn,reverse:g}){c=+c,a=Hn(a);let[m,p]=a;if(a.length>2&&_s(`Warning: the diverging ${e} scale domain contains extra elements.`),Ha(m,p)<0&&([m,p]=[p,m],g=!g),m=Math.min(m,c),p=Math.max(p,c),typeof d!="function"&&(d=jD(d)),f!==void 0&&(d=d.length===1?sE(d)(...f):f0(d,f)),g&&(d=YD(d)),h){const _=n.apply(c),y=_-n.apply(m),b=n.apply(p)-_;y<b?m=n.invert(_-b):y>b&&(p=n.invert(_+y))}return t.domain([m,c,p]).unknown(l).interpolator(d),o&&t.clamp(o),s&&t.nice(s),{type:r,domain:[m,p],pivot:c,interpolate:d,scale:t}}function $ct(e,t,n){return s_(e,VO(),Fct,t,n)}function Nct(e,t,n){return KD(e,t,{...n,exponent:.5})}function KD(e,t,{exponent:n=1,...i}){return s_(e,BO().exponent(n=+n),Vct(n),t,{...i,type:"diverging-pow"})}function Dct(e,t,{base:n=10,pivot:i=1,domain:r=yh(t,i<0?X0:ps),...s}){return s_(e,HO().base(n=+n),zct,t,{domain:r,pivot:i,...s})}function Pct(e,t,{constant:n=1,...i}){return s_(e,GO().constant(n=+n),Hct(n),t,i)}const Fct={apply(e){return e},invert(e){return e}},zct={apply:Math.log,invert:Math.exp},Wct={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function Vct(e){return e===.5?Wct:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function Hct(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function ZD(e,t,n,i){return hd(e,t,n,i)}function Gct(e,t,n){return ZD(e,yY(),t,n)}function Bct(e,t,n){return ZD(e,vY(),t,n)}const dd=Symbol("ordinal");function JD(e,t,n,{type:i,interval:r,domain:s,range:o,reverse:a,hint:l}){return r=_u(r,i),s===void 0&&(s=tP(n,r,e)),(i==="categorical"||i===dd)&&(i="ordinal"),a&&(s=rm(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:i,domain:s,range:o,scale:t,hint:l,interval:r}}function Uct(e,t,{type:n,interval:i,domain:r,range:s,scheme:o,unknown:a,...l}){i=_u(i,n),r===void 0&&(r=tP(t,i,e));let c;if(we.get(e)===J0)c=Xct(t),s=s===void 0?qct(c):de(s,Wx);else if(we.get(e)===Fs&&(s===void 0&&(n==="ordinal"||n===dd)&&(s=_ct(r,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=iE(o),f=s[0],h=s[1]-s[0];s=({length:d})=>Zi(g=>u(f+h*g),d)}else s=UD(o);if(a===bv)throw new Error(`implicit unknown on ${e} scale is not supported`);return JD(e,Tw().unknown(a),t,{...l,type:n,domain:r,range:s,hint:c})}function Yct(e,t,{align:n=.5,padding:i=.5,...r}){return QD(QB().align(n).padding(i),t,r,e)}function jct(e,t,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:s=e==="fx"||e==="fy"?0:i,...o}){return QD(p0().align(n).paddingInner(r).paddingOuter(s),t,o,e)}function QD(e,t,n,i){let{round:r}=n;return r!==void 0&&e.round(r=!!r),e=JD(i,e,t,n),e.round=r,e}function tP(e,t,n){const i=new Ch;for(const{value:r,domain:s}of e){if(s!==void 0)return s();if(r!==void 0)for(const o of r)i.add(o)}if(t!==void 0){const[r,s]=be(i).map(t.floor,t);return t.range(r,t.offset(s))}if(i.size>1e4&&we.get(n)===xr)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Bf(i,Ai)}function VA(e,t){let n;for(const{hint:i}of e){const r=i==null?void 0:i[t];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function Xct(e){return{fill:VA(e,"fill"),stroke:VA(e,"stroke")}}function qct(e){return Re(e.fill)?GY:HY}function rb(e,{label:t,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:c,zero:u,align:f,padding:h,projection:d,facet:{label:g=t}={},...m}={}){const p={};for(const[_,y]of e){const b=m[_],v=rP(_,y,{round:we.get(_)===xr?a:void 0,nice:l,clamp:c,zero:u,align:f,padding:h,projection:d,...b});if(v){let{label:x=_==="fx"||_==="fy"?g:t,percent:w,transform:E,inset:T,insetTop:I=T!==void 0?T:_==="y"?i:0,insetRight:S=T!==void 0?T:_==="x"?r:0,insetBottom:A=T!==void 0?T:_==="y"?s:0,insetLeft:R=T!==void 0?T:_==="x"?o:0}=b||{};if(E==null)E=void 0;else if(typeof E!="function")throw new Error("invalid scale transform; not a function");v.percent=!!w,v.label=x===void 0?Zct(y,v):x,v.transform=E,_==="x"||_==="fx"?(v.insetLeft=+R,v.insetRight=+S):(_==="y"||_==="fy")&&(v.insetTop=+I,v.insetBottom=+A),p[_]=v}}return p}function HA(e){const t={},n={scales:t};for(const[i,r]of Object.entries(e)){const{scale:s,type:o,interval:a,label:l}=r;t[i]=oP(r),n[i]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function Kct(e,t){const{x:n,y:i,fx:r,fy:s}=e,o=r||s?oE(t):t;r&&GA(r,o),s&&BA(s,o);const a=r||s?eP(e,t):t;n&&GA(n,a),i&&BA(i,a)}function Zct(e=[],t){let n;for(const{label:i}of e)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!gl(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function oE(e){const{marginTop:t,marginRight:n,marginBottom:i,marginLeft:r,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(i,c),marginLeft:Math.max(r,u),width:s,height:o}}function eP({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=oE(n);return{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+r:a,height:t?t.scale.bandwidth()+i+s:l,facet:{width:a,height:l}}}function GA(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:i}=e,{width:r,marginLeft:s=0,marginRight:o=0}=t,a=s+n,l=r-o-i;e.range=[a,Math.max(a,l)],gl(e)||(e.range=iP(e)),e.scale.range(e.range)}nP(e)}function BA(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:i}=e,{height:r,marginTop:s=0,marginBottom:o=0}=t,a=s+n,l=r-o-i;e.range=[Math.max(a,l),a],gl(e)?e.range.reverse():e.range=iP(e),e.scale.range(e.range)}nP(e)}function nP(e){e.round===void 0&&tut(e)&&Jct(e)<=30&&e.scale.round(!0)}function Jct({scale:e}){const t=e.domain().length,[n,i]=e.range(),r=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-r,a=Math.abs(i-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function iP(e){const t=e.scale.domain().length+sP(e);if(!(t>2))return e.range;const[n,i]=e.range;return Array.from({length:t},(r,s)=>n+s/(t-1)*(i-n))}function sb(e,t,n){return rP(e,n===void 0?void 0:[{hint:n}],{...t})}function rP(e,t=[],n={}){const i=Qct(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&gl({type:i})){const r=t.map(({value:s})=>s).filter(s=>s!==void 0);r.some(An)?_s(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${kl(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${kl(i)}".`):r.some(vlt)?_s(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${kl(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${kl(i)}".`):r.some(blt)&&_s(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${kl(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${kl(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=hg(t,n,Pn);break;case"identity":switch(we.get(e)){case xr:n=hg(t,n,Pn);break;case J0:n=hg(t,n,eut);break}break;case"utc":case"time":n=hg(t,n,glt);break}switch(i){case"diverging":return $ct(e,t,n);case"diverging-sqrt":return Nct(e,t,n);case"diverging-pow":return KD(e,t,n);case"diverging-log":return Dct(e,t,n);case"diverging-symlog":return Pct(e,t,n);case"categorical":case"ordinal":case dd:return Uct(e,t,n);case"cyclical":case"sequential":case"linear":return wct(e,t,n);case"sqrt":return xct(e,t,n);case"threshold":return rE(e,t,n);case"quantile":return Sct(e,t,n);case"quantize":return Cct(e,t,n);case"pow":return XD(e,t,n);case"log":return Ect(e,t,n);case"symlog":return Tct(e,t,n);case"utc":return Bct(e,t,n);case"time":return Gct(e,t,n);case"point":return Yct(e,t,n);case"band":return jct(e,t,n);case"identity":return Mct(e);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function kl(e){return typeof e=="symbol"?e.description:e}const UA={toString:()=>"projection"};function Qct(e,t,{type:n,domain:i,range:r,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=UA);for(const{type:c}of t)if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}if(n===UA)return;if(n!==void 0)return n;if(i===void 0&&!t.some(({value:c})=>c!==void 0))return;const l=we.get(e);if(l===cd)return"sqrt";if(l===fd||l===ud)return"linear";if(l===J0)return"ordinal";if((i||r||[]).length>2)return By(l);if(i!==void 0){if(Te(i))return By(l);if(An(i))return"utc"}else{const c=t.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(Te))return By(l);if(c.some(An))return"utc"}if(l===Fs){if(o!=null||vct(s))return"diverging";if(pct(s))return"categorical"}return"linear"}function By(e){switch(e){case xr:return"point";case Fs:return dd;default:return"ordinal"}}function gl({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===dd}function sP({type:e}){return e==="threshold"}function tut({type:e}){return e==="point"||e==="band"}function wi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let i=1,r=t.length;i<r;++i)if(e(t[i])-n)return!1;return!0}function hg(e,{domain:t,...n},i){for(const r of e)r.value!==void 0&&(r.value=i(r.value));return{domain:t===void 0?t:i(t),...n}}function eut(e){return de(e,Wx)}function nut(e={}){let t;for(const n in e)if(we.has(n)&&Pa(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=oP(sb(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function iut(e){return t=>{if(!we.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function oP({scale:e,type:t,domain:n,range:i,interpolate:r,interval:s,transform:o,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:gh(n),...i!==void 0&&{range:gh(i)},...o!==void 0&&{transform:o},...a&&{percent:a},...c!==void 0&&{unknown:c},...s!==void 0&&{interval:s},...r!==void 0&&{interpolate:r},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function rut(e,t,n={}){let i=.5-Qe,r=.5+Qe,s=.5+Qe,o=.5-Qe;for(const{marginTop:m,marginRight:p,marginBottom:_,marginLeft:y}of t)m>i&&(i=m),p>r&&(r=p),_>s&&(s=_),y>o&&(o=y);let{margin:a,marginTop:l=a!==void 0?a:i,marginRight:c=a!==void 0?a:r,marginBottom:u=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;l=+l,c=+c,u=+u,f=+f;let{width:h=640,height:d=sut(e,n,{width:h,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-i+u-s)}=n;h=+h,d=+d;const g={width:h,height:d,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:m,marginTop:p=m!==void 0?m:l,marginRight:_=m!==void 0?m:c,marginBottom:y=m!==void 0?m:u,marginLeft:b=m!==void 0?m:f}=n.facet??{};p=+p,_=+_,y=+y,b=+b,g.facet={marginTop:p,marginRight:_,marginBottom:y,marginLeft:b}}return g}function sut({x:e,y:t,fy:n,fx:i},{projection:r,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const f=n?n.scale.domain().length:1,h=gct(r);if(h){const g=i?i.scale.domain().length:1,m=(1.1*f-.1)/(1.1*g-.1)*h,p=Math.max(.1,Math.min(10,m));return Math.round((o-u-l)*p+a+c)}const d=t?gl(t)?t.scale.domain().length:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const g=YA("y",t)/(YA("x",e)*s),m=i?i.scale.bandwidth():1,p=n?n.scale.bandwidth():1,_=m*(o-u-l)-e.insetLeft-e.insetRight;return(g*_+t.insetTop+t.insetBottom)/p+a+c}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!i*30+60}function YA(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:i}=t;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const a=t.scale.exponent();r=l=>Math.pow(l,a);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=be(i);return Math.abs(r(o)-r(s))}function out(e,t){const{fx:n,fy:i}=rb(e,t),r=n==null?void 0:n.scale.domain(),s=i==null?void 0:i.scale.domain();return r&&s?A9(r,s).map(([o,a],l)=>({x:o,y:a,i:l})):r?r.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function aut(e,{x:t,y:n}){return t&&(t=ob(t)),n&&(n=ob(n)),e.filter(t&&n?i=>t.has(i.x)&&n.has(i.y):t?i=>t.has(i.x):i=>n.has(i.y)).sort(t&&n?(i,r)=>t.get(i.x)-t.get(r.x)||n.get(i.y)-n.get(r.y):t?(i,r)=>t.get(i.x)-t.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function aE(e,{fx:t,fy:n}){const i=Ns(e),r=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?oc(i,o=>(o.fx=r[o[0]],o.fy=s[o[0]],o),o=>r[o],o=>s[o]):t?oc(i,o=>(o.fx=r[o[0]],o),o=>r[o]):oc(i,o=>(o.fy=s[o[0]],o),o=>s[o])}function lut(e,t,{marginTop:n,marginLeft:i}){return e&&t?({x:r,y:s})=>`translate(${e(r)-i},${t(s)-n})`:e?({x:r})=>`translate(${e(r)-i},0)`:({y:r})=>`translate(0,${t(r)-n})`}function cut(e){const t=[],n=new Uint32Array(Lr(e,i=>i.length));for(const i of e){let r=0;for(const s of e)i!==s&&(n.set(s,r),r+=s.length);t.push(n.slice(0,r))}return t}const uut=new Map([["top",Uy],["right",Xy],["bottom",Yy],["left",jy],["top-left",dg(Uy,jy)],["top-right",dg(Uy,Xy)],["bottom-left",dg(Yy,jy)],["bottom-right",dg(Yy,Xy)],["top-empty",dut],["right-empty",put],["bottom-empty",gut],["left-empty",mut],["empty",_ut]]);function fut(e){if(e==null)return null;const t=uut.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const jA=new WeakMap;function ob(e){let t=jA.get(e);return t||jA.set(e,t=new Ga(de(e,(n,i)=>[n,i]))),t}function Bo(e,t){return ob(e).get(t)}function hut(e,t,n){return t=xa(t),n=xa(n),e.find(i=>Object.is(xa(i.x),t)&&Object.is(xa(i.y),n))}function o_(e,t,n){var i;return(i=hut(e,t,n))==null?void 0:i.empty}function Uy(e,{y:t},{y:n}){return t?Bo(t,n)===0:!0}function Yy(e,{y:t},{y:n}){return t?Bo(t,n)===t.length-1:!0}function jy(e,{x:t},{x:n}){return t?Bo(t,n)===0:!0}function Xy(e,{x:t},{x:n}){return t?Bo(t,n)===t.length-1:!0}function dut(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=Bo(t,i);if(s>0)return o_(e,n,t[s-1])}function gut(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=Bo(t,i);if(s<t.length-1)return o_(e,n,t[s+1])}function mut(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=Bo(t,n);if(s>0)return o_(e,t[s-1],i)}function put(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=Bo(t,n);if(s<t.length-1)return o_(e,t[s+1],i)}function _ut(e,t,{empty:n}){return n}function dg(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function qy(e,{channels:{fx:t,fy:n},groups:i}){return t&&n?e.map(({x:r,y:s})=>{var o;return((o=i.get(r))==null?void 0:o.get(s))??[]}):t?e.map(({x:r})=>i.get(r)??[]):e.map(({y:r})=>i.get(r)??[])}class he{constructor(t,n={},i={},r){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:c,dx:u=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:g=h,marginBottom:m=h,marginLeft:p=h,clip:_=r==null?void 0:r.clip,channels:y,tip:b,render:v}=i;if(this.data=t,this.sort=Io(c)?c:null,this.initializer=Gn(i).initializer,this.transform=this.initializer?i.transform:Wr(i).transform,s===null||s===!1?this.facet=null:(this.facet=li(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===If&&typeof a=="string"?[a]:a,this.fy=t===If&&typeof l=="string"?[l]:l),this.facetAnchor=fut(o),n=Px(n),y!==void 0&&(n={...yut(y),...n}),r!==void 0&&(n={...DD(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([x,w])=>{if(fr(w.value)){const{value:E,label:T=w.label,scale:I=w.scale}=w.value;w={...w,label:T,scale:I,value:E}}if(t===If&&typeof w.value=="string"){const{value:E}=w;w={...w,value:[E]}}return[x,w]}).filter(([x,{value:w,optional:E}])=>{if(w!=null)return!0;if(E)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+u,this.dy=+f,this.marginTop=+d,this.marginRight=+g,this.marginBottom=+m,this.marginLeft=+p,this.clip=FD(_),this.tip=vut(b),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:w}=n[x];if(!(w!=="x"&&w!=="y"))throw new Error("super-faceting cannot use x or y")}}v!=null&&(this.render=aP(v,this.render))}initialize(t,n,i){let r=Hn(this.data);t===void 0&&r!=null&&(t=[Ns(r)]);const s=t;this.transform!=null&&({facets:t,data:r}=this.transform(r,t,i),r=Hn(r)),t!==void 0&&(t.original=s);const o=LD(this.channels,r);return this.sort!=null&&Glt(r,t,o,n,this.sort),{data:r,facets:t,channels:o}}filter(t,n,i){for(const r in n){const{filter:s=xn}=n[r];if(s!==null){const o=i[r];t=t.filter(a=>s(o[a]))}}return t}project(t,n,i){for(const r in t)if(t[r].scale==="x"&&/^x|x$/.test(r)){const s=r.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&GD(r,s,n,i.projection)}}scale(t,n,i){const r=Jx(t,n);return i.projection&&this.project(t,r,i),r}}function ir(...e){return e.plot=he.prototype.plot,e}function aP(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,i,r,s,o,a){return e.call(this,n,i,r,s,o,(l,c,u,f,h)=>t.call(this,l,c,u,f,h,a))}}function yut(e){return Object.fromEntries(Object.entries(Px(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:od(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function vut(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?li(e,"tip",["x","y","xy"]):e}function yu(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:Li(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const XA=new WeakMap;function lE(e,t,{x:n,y:i,px:r,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o=+o,r!=null&&(n??(n=null),a={...a,px:{value:r,scale:"x"}}),s!=null&&(i??(i=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:i,channels:a,...c,render:aP(function(u,f,h,d,g,m){g={...g,pointerSticky:!1};const p=g.ownerSVGElement,{data:_}=g.getMarkState(this);let y=XA.get(p);y||XA.set(p,y={sticky:!1,roots:[],renders:[]});let b=y.renders.push(Q)-1;const{x:v,y:x,fx:w,fy:E}=f;let T=w?w(u.fx)-d.marginLeft:0,I=E?E(u.fy)-d.marginTop:0;v!=null&&v.bandwidth&&(T+=v.bandwidth()/2),x!=null&&x.bandwidth&&(I+=x.bandwidth()/2);const S=u.fi!=null;let A;if(S){let W=y.facetStates;W||(y.facetStates=W=new Map),A=W.get(this),A||W.set(this,A=new Map)}const[R,k]=Vr(this,d),{px:$,py:L}=h,N=$?W=>$[W]:lP(h,R),D=L?W=>L[W]:cP(h,k);let V,Y,B,q;function z(W,G){if(S)if(q&&(q=cancelAnimationFrame(q)),W==null)A.delete(u.fi);else{A.set(u.fi,G),q=requestAnimationFrame(()=>{q=null;for(const[F,j]of A)if(j<G||j===G&&F<u.fi){W=null;break}Q(W)});return}Q(W)}function Q(W){if(V===W&&B===y.sticky)return;V=W,B=g.pointerSticky=y.sticky;const G=V==null?[]:[V];S&&(G.fx=u.fx,G.fy=u.fy,G.fi=u.fi);const F=m(G,f,h,d,g);if(Y){if(S){const j=Y.parentNode,Z=Y.getAttribute("transform"),C=F.getAttribute("transform");Z?F.setAttribute("transform",Z):F.removeAttribute("transform"),C?j.setAttribute("transform",C):j.removeAttribute("transform"),F.removeAttribute("aria-label"),F.removeAttribute("aria-description"),F.removeAttribute("aria-hidden")}Y.replaceWith(F)}return y.roots[b]=Y=F,V==null&&(A==null?void 0:A.size)>1||g.dispatchValue(V==null?null:_[V]),F}function nt(W){if(y.sticky||W.pointerType==="mouse"&&W.buttons===1)return;let[G,F]=lw(W);G-=T,F-=I;const j=G<d.marginLeft||G>d.width-d.marginRight?1:e,Z=F<d.marginTop||F>d.height-d.marginBottom?1:t;let C=null,O=o*o;for(const P of u){const H=j*(N(P)-G),U=Z*(D(P)-F),X=H*H+U*U;X<=O&&(C=P,O=X)}if(C!=null&&(e!==1||t!==1)){const P=N(C)-G,H=D(C)-F;O=P*P+H*H}z(C,O)}function rt(W){W.pointerType==="mouse"&&V!=null&&(y.sticky&&y.roots.some(G=>G==null?void 0:G.contains(W.target))||(y.sticky?(y.sticky=!1,y.renders.forEach(G=>G(null))):(y.sticky=!0,Q(V)),W.stopImmediatePropagation()))}function at(W){W.pointerType==="mouse"&&(y.sticky||z(null))}return p.addEventListener("pointerenter",nt),p.addEventListener("pointermove",nt),p.addEventListener("pointerdown",rt),p.addEventListener("pointerleave",at),Q(null)},l)}}function cE(e){return lE(1,1,e)}function vh(e){return lE(1,.01,e)}function uE(e){return lE(.01,1,e)}function lP({x1:e,x2:t,x:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function cP({y1:e,y2:t,y:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function uP(e){return gl(e)&&e.interval===void 0?void 0:"tabular-nums"}function but(e,t){let{label:n=e.label,tickSize:i=6,width:r=240,height:s=44+i,marginTop:o=18,marginRight:a=0,marginBottom:l=16+i,marginLeft:c=0,style:u,ticks:f=(r-c-a)/64,tickFormat:h,fontVariant:d=uP(e),round:g=!0,opacity:m,className:p}=t;const _=n_(t);p=eE(p),m=Le(m)[1],h===null&&(h=()=>null);const y=te("svg",_).attr("class",`${p}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",s).attr("viewBox",`0 0 ${r} ${s}`).call(R=>R.append("style").text(`.${p}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${p}-ramp text {
  white-space: pre;
}`)).call(nE,u);let b=R=>R.selectAll(".tick line").attr("y1",o+l-s),v;const x=g?(R,k)=>R.rangeRound(k):(R,k)=>R.range(k),{type:w,domain:E,range:T,interpolate:I,scale:S,pivot:A}=e;if(I){const R=T===void 0?I:f0(I.length===1?sE(I):I,T);v=x(S.copy(),Zi(sn(c,r-a),Math.min(E.length+(A!==void 0),T===void 0?1/0:T.length)));const k=256,$=_.document.createElement("canvas");$.width=k,$.height=1;const L=$.getContext("2d");for(let N=0,D=k-1;N<k;++N)L.fillStyle=R(N/D),L.fillRect(N,0,1,1);y.append("image").attr("opacity",m).attr("x",c).attr("y",o).attr("width",r-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",$.toDataURL())}else if(w==="threshold"){const R=E,k=h===void 0?$=>$:typeof h=="string"?Fo(h):h;v=x(_r().domain([-1,T.length-1]),[c,r-a]),y.append("g").attr("fill-opacity",m).selectAll().data(T).enter().append("rect").attr("x",($,L)=>v(L-1)).attr("y",o).attr("width",($,L)=>v(L)-v(L-1)).attr("height",s-o-l).attr("fill",$=>$),f=de(R,($,L)=>L),h=$=>k(R[$],$)}else v=x(p0().domain(E),[c,r-a]),y.append("g").attr("fill-opacity",m).selectAll().data(E).enter().append("rect").attr("x",v).attr("y",o).attr("width",Math.max(0,v.bandwidth()-1)).attr("height",s-o-l).attr("fill",S),b=()=>{};return y.append("g").attr("transform",`translate(0,${s-l})`).call(sw(v).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(i).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ae(d,"normal")).call(b).call(R=>R.select(".domain").remove()),n!==void 0&&y.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),y.node()}const Tp=Math.PI/180;function vu(e,{marker:t,markerStart:n=t,markerMid:i=t,markerEnd:r=t}={}){e.markerStart=Ky(n),e.markerMid=Ky(i),e.markerEnd=Ky(r)}function Ky(e){if(e==null||e===!1)return null;if(e===!0)return KA;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return qA("auto");case"arrow-reverse":return qA("auto-start-reverse");case"dot":return wut;case"circle":case"circle-fill":return KA;case"circle-stroke":return xut}throw new Error(`invalid marker: ${e}`)}function qA(e){return(t,n)=>te("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function wut(e,t){return te("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function KA(e,t){return te("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function xut(e,t){return te("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let Eut=0;function gd(e,t,{stroke:n},i){return fP(e,t,n&&(r=>n[r]),i)}function Tut(e,t,{stroke:n},i){return fP(e,t,n&&(([r])=>n[r]),i)}function fP(e,{markerStart:t,markerMid:n,markerEnd:i,stroke:r},s=()=>r,o){const a=new Map;function l(c){return function(u){const f=s(u);let h=a.get(c);h||a.set(c,h=new Map);let d=h.get(f);if(!d){const g=this.parentNode.insertBefore(c(f,o),this),m=`plot-marker-${++Eut}`;g.setAttribute("id",m),h.set(f,d=`url(#${m})`)}return d}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),i&&e.attr("marker-end",l(i))}function md({inset:e,insetLeft:t,insetRight:n,...i}={}){return[t,n]=hP(e,t,n),{inset:e,insetLeft:t,insetRight:n,...i}}function pd({inset:e,insetTop:t,insetBottom:n,...i}={}){return[t,n]=hP(e,t,n),{inset:e,insetTop:t,insetBottom:n,...i}}function hP(e,t,n){return e===void 0&&t===void 0&&n===void 0?Qe?[1,0]:[.5,.5]:[t,n]}function dP(e,{interval:t}){return e={...od(e)},e.interval=Dx(e.interval===void 0?t:e.interval),e}function a_(e,t,n,i){const{[e]:r,[`${e}1`]:s,[`${e}2`]:o}=n,{value:a,interval:l}=dP(r,n);if(a==null||l==null&&!i)return n;const c=Ds(r);if(l==null){let d;const g={transform:m=>d||(d=Wt(m,a)),label:c};return{...n,[e]:void 0,[`${e}1`]:s===void 0?g:s,[`${e}2`]:o===void 0?g:o}}let u,f;function h(d){return f!==void 0&&d===u?f:f=de(Wt(u=d,a),g=>l.floor(g))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:h,label:c}:s,[`${e}2`]:o===void 0?{transform:d=>h(d).map(g=>l.offset(g)),label:c}:o})}function gP(e,t,n){const{[e]:i}=n,{value:r,interval:s}=dP(i,n);return r==null||s==null?n:t({...n,[e]:{label:Ds(i),transform:o=>{const a=de(Wt(o,r),c=>s.floor(c)),l=a.map(c=>s.offset(c));return a.map(An(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function mP(e={}){return a_("x",md,e,!0)}function pP(e={}){return a_("y",pd,e,!0)}function _P(e={}){return a_("x",md,e)}function yP(e={}){return a_("y",pd,e)}function vP(e={}){return gP("x",md,e)}function bP(e={}){return gP("y",pd,e)}const wP={ariaLabel:"rule",fill:null,stroke:"currentColor"};class xP extends he{constructor(t,n={}){const{x:i,y1:r,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(t,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},yu(n,"x"),wP),this.insetTop=Gt(a),this.insetBottom=Gt(l),vu(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y1:c,y2:u}=i,{width:f,height:h,marginTop:d,marginRight:g,marginLeft:m,marginBottom:p}=r,{insetTop:_,insetBottom:y}=this;return te("svg:g",s).call(ve,this,r,s).call(fe,this,{x:l&&o},Qe,0).call(b=>b.selectAll().data(t).enter().append("line").call(pe,this).attr("x1",l?v=>l[v]:(m+f-g)/2).attr("x2",l?v=>l[v]:(m+f-g)/2).attr("y1",c&&!wi(a)?v=>c[v]+_:d+_).attr("y2",u&&!wi(a)?a.bandwidth?v=>u[v]+a.bandwidth()-y:v=>u[v]-y:h-p-y).call(He,this,i).call(gd,this,i,s)).node()}}class EP extends he{constructor(t,n={}){const{x1:i,x2:r,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},yu(n,"y"),wP),this.insetRight=Gt(a),this.insetLeft=Gt(l),vu(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{y:l,x1:c,x2:u}=i,{width:f,height:h,marginTop:d,marginRight:g,marginLeft:m,marginBottom:p}=r,{insetLeft:_,insetRight:y}=this;return te("svg:g",s).call(ve,this,r,s).call(fe,this,{y:l&&a},0,Qe).call(b=>b.selectAll().data(t).enter().append("line").call(pe,this).attr("x1",c&&!wi(o)?v=>c[v]+_:m+_).attr("x2",u&&!wi(o)?o.bandwidth?v=>u[v]+o.bandwidth()-y:v=>u[v]-y:f-g-y).attr("y1",l?v=>l[v]:(d+h-p)/2).attr("y2",l?v=>l[v]:(d+h-p)/2).call(He,this,i).call(gd,this,i,s)).node()}}function Cs(e,t){let{x:n=St,y:i,y1:r,y2:s,...o}=yP(t);return[r,s]=TP(i,r,s),new xP(e,{...o,x:n,y1:r,y2:s})}function Lo(e,t){let{y:n=St,x:i,x1:r,x2:s,...o}=_P(t);return[r,s]=TP(i,r,s),new EP(e,{...o,y:n,x1:r,x2:s})}function TP(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function l_(e,...t){let n=t.length;for(let i=0,r=!0;i<n;++i)typeof t[i]!="function"&&(r&&(e=e.slice(),r=!1),e.splice(i,2,e[i]+t[i]+e[i+1]),t.splice(i,1),--i,--n);return i=>{let r=e[0];for(let s=0;s<n;++s)r+=t[s](i)+e[s+1];return r}}const Sut={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},SP="­";class c_ extends he{constructor(t,n={}){const{x:i,y:r,text:s=Ps(t)&&ED(t)?St:Bn,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:m,fontVariant:p,fontWeight:_,rotate:y}=n,[b,v]=Le(y,0),[x,w]=Rut(g);if(super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:_lt(b),optional:!0},text:{value:s,filter:Rx,optional:!0}},n,Sut),this.rotate=v,this.textAnchor=Ae(a,"middle"),this.lineAnchor=li(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=CP(f),this.monospace=!!h,this.fontFamily=ln(d),this.fontSize=w,this.fontStyle=ln(m),this.fontVariant=ln(p),this.fontWeight=ln(_),this.frameAnchor=ld(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=IP(this),this.clipLine=LP(this)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,rotate:u,text:f,title:h,fontSize:d}=i,{rotate:g}=this,[m,p]=Vr(this,r);return te("svg:g",s).call(ve,this,r,s).call(RP,this,f,r).call(fe,this,{x:l&&o,y:c&&a}).call(_=>_.selectAll().data(t).enter().append("text").call(pe,this).call(Cut,this,f,h).attr("transform",l_`translate(${l?y=>l[y]:m},${c?y=>c[y]:p})${u?y=>` rotate(${u[y]})`:g?` rotate(${g})`:""}`).call(bt,"font-size",d&&(y=>d[y])).call(He,this,i)).node()}}function CP(e){return e==null?null:li(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function Cut(e,t,n,i){if(!n)return;const{lineAnchor:r,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(c){const u=a(tl(n[c])??"").map(l),f=u.length,h=r==="top"?.71:r==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let g=0;g<f;++g){if(++d,!u[g])continue;const m=this.ownerDocument.createElementNS(Ba.svg,"tspan");m.setAttribute("x",0),g===d-1?m.setAttribute("y",`${(h+g)*s}em`):m.setAttribute("dy",`${d*s}em`),m.textContent=u[g],this.appendChild(m),d=0}}else h&&this.setAttribute("y",`${h*s}em`),this.textContent=u[0];if(o&&!i&&u[0]!==n[c]){const d=this.ownerDocument.createElementNS(Ba.svg,"title");d.textContent=n[c],this.appendChild(d)}})}function Gc(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=or(t,n)),new c_(e,{...i,x:t,y:n})}function AP(e,{x:t=St,...n}={}){return new c_(e,bP({...n,x:t}))}function MP(e,{y:t=St,...n}={}){return new c_(e,vP({...n,y:t}))}function RP(e,t,n){bt(e,"text-anchor",t.textAnchor),bt(e,"font-family",t.fontFamily),bt(e,"font-size",t.fontSize),bt(e,"font-style",t.fontStyle),bt(e,"font-variant",t.fontVariant===void 0?Aut(n):t.fontVariant),bt(e,"font-weight",t.fontWeight)}function Aut(e){return e&&(Jl(e)||An(e))?"tabular-nums":void 0}const Mut=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Rut(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),Mut.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function Iut(e,t,n){const i=[];let r,s=0;for(const[o,a,l]of Lut(e)){if(r===void 0&&(r=o),s>r&&n(e,r,a)>t&&(i.push(e.slice(r,s)+(e[s-1]===SP?"-":"")),r=o),l){i.push(e.slice(r,a)),r=void 0;continue}s=a}return i}function*Lut(e){let t=0,n=0;const i=e.length;for(;n<i;){let r=1;switch(e[n]){case SP:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++r;case`
`:yield[t,n,!0],n+=r,t=n;break;default:++n;break}}yield[t,n,!0]}const ZA={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function fE(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=bu(e,r))i+=ZA[e[r]]??(kP(e,r)?120:ZA.e);return i}function hE(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=bu(e,r))i+=kP(e,r)?200:100;return i}function IP({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const i=e?hE:fE,r=t*100;return s=>Iut(s,r,i)}function LP({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const i=e?hE:fE,r=t*100;switch(n){case"clip-start":return s=>QA(s,r,i,"");case"clip-end":return s=>JA(s,r,i,"");case"ellipsis-start":return s=>QA(s,r,i,gc);case"ellipsis-middle":return s=>Out(s,r,i,gc);case"ellipsis-end":return s=>JA(s,r,i,gc)}}const gc="…";function Bc(e,t,n,i){const r=[];let s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=bu(e,o);const c=n(e,o,a);if(s+c>t){for(s+=i;s>t&&o>0;)a=o,o=r.pop(),s-=n(e,o,a);return[o,t-s]}s+=c,r.push(o)}return[-1,0]}function JA(e,t,n,i){e=e.trim();const r=n(i),[s]=Bc(e,t,n,r);return s<0?e:e.slice(0,s).trimEnd()+i}function Out(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i)/2,[o,a]=Bc(e,t/2,n,s),[l]=Bc(e,r-t/2-a+s,n,-s);return l<0?i:e.slice(0,o).trimEnd()+i+e.slice(bu(e,l)).trimStart()}function QA(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i),[o]=Bc(e,r-t+s,n,-s);return o<0?i:i+e.slice(bu(e,o)).trimStart()}const ab=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,tM=/\p{Extended_Pictographic}/uy;function bu(e,t){return t+=kut(e,t)?2:1,Nut(e,t)&&(t=ab.lastIndex),$ut(e,t)?bu(e,t+1):t}function OP(e,t){return e.charCodeAt(t)<128}function kut(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const i=e.charCodeAt(t+1);return i>=56320&&i<57344}return!1}function $ut(e,t){return e.charCodeAt(t)===8205}function Nut(e,t){return OP(e,t)?!1:(ab.lastIndex=t,ab.test(e))}function kP(e,t){return OP(e,t)?!1:(tM.lastIndex=t,tM.test(e))}const $P={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},NP=3.5,Dut=NP*5,DP={draw(e,t,n){const i=t*n/Dut;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-i,i-t),e.lineTo(0,-t),e.lineTo(i,i-t)}},PP={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},Put=new Map([["arrow",DP],["spike",PP]]);function Fut(e){return e&&typeof e.draw=="function"}function zut(e){if(Fut(e))return e;const t=Put.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class u_ extends he{constructor(t,n={}){const{x:i,y:r,r:s=NP,length:o,rotate:a,shape:l=DP,anchor:c="middle",frameAnchor:u}=n,[f,h]=Le(o,12),[d,g]=Le(a,0);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,$P),this.r=+s,this.length=h,this.rotate=g,this.shape=zut(l),this.anchor=li(c,"anchor",["start","middle","end"]),this.frameAnchor=ld(u)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,length:u,rotate:f}=i,{length:h,rotate:d,anchor:g,shape:m,r:p}=this,[_,y]=Vr(this,r);return te("svg:g",s).call(ve,this,r,s).call(fe,this,{x:l&&o,y:c&&a}).call(b=>b.selectAll().data(t).enter().append("path").call(pe,this).attr("transform",l_`translate(${l?v=>l[v]:_},${c?v=>c[v]:y})${f?v=>` rotate(${f[v]})`:d?` rotate(${d})`:""}${g==="start"?"":g==="end"?u?v=>` translate(0,${u[v]})`:` translate(0,${h})`:u?v=>` translate(0,${u[v]/2})`:` translate(0,${h/2})`}`).attr("d",u?v=>{const x=os();return m.draw(x,u[v],p),x}:(()=>{const v=os();return m.draw(v,h,p),v})()).call(He,this,i)).node()}}function FP(e,t={}){let{x:n,y:i,...r}=t;return t.frameAnchor===void 0&&([n,i]=or(n,i)),new u_(e,{...r,x:n,y:i})}function zP(e,t={}){const{x:n=St,...i}=t;return new u_(e,{...i,x:n})}function WP(e,t={}){const{y:n=St,...i}=t;return new u_(e,{...i,y:n})}function Wut(e,t={}){const{shape:n=PP,stroke:i=$P.stroke,strokeWidth:r=1,fill:s=i,fillOpacity:o=.3,anchor:a="start",...l}=t;return FP(e,{...l,shape:n,stroke:i,strokeWidth:r,fill:s,fillOpacity:o,anchor:a})}function Uo(e,t){return arguments.length<2&&!Ps(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function f_({anchor:e}={},t){return e===void 0?t[0]:li(e,"anchor",t)}function VP(e){return f_(e,["left","right"])}function HP(e){return f_(e,["right","left"])}function GP(e){return f_(e,["bottom","top"])}function BP(e){return f_(e,["top","bottom"])}function dE(){const[e,t]=Uo(...arguments);return jP("y",VP(t),e,t)}function UP(){const[e,t]=Uo(...arguments);return jP("fy",HP(t),e,t)}function gE(){const[e,t]=Uo(...arguments);return XP("x",GP(t),e,t)}function YP(){const[e,t]=Uo(...arguments);return XP("fx",BP(t),e,t)}function jP(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:g=e==="y"?6:0,tickPadding:m,tickRotate:p,x:_,margin:y,marginTop:b=y===void 0?20:y,marginRight:v=y===void 0?t==="right"?40:0:y,marginBottom:x=y===void 0?20:y,marginLeft:w=y===void 0?t==="left"?40:0:y,label:E,labelAnchor:T,labelArrow:I,labelOffset:S,...A}){return g=Gt(g),m=Gt(m),p=Gt(p),T!==void 0&&(T=li(T,"labelAnchor",["center","top","bottom"])),I=o6(I),ir(g&&!Re(s)?Vut(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:p,x:_,...A}):null,Re(l)?null:Gut(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:p,x:_,marginTop:b,marginRight:v,marginBottom:x,marginLeft:w,...A}),!Re(l)&&E!==null?Gc([],n6({fill:l,fillOpacity:c,...A},function(R,k,$,L,N){const D=L[e],{marginTop:V,marginRight:Y,marginBottom:B,marginLeft:q}=e==="y"&&N.inset||N,z=T??(D.bandwidth?"center":"top"),Q=S??(t==="right"?Y:q)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-V:z==="bottom"?B-3:0,this.dx=t==="right"?Q:-Q,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[s6(e,D,{anchor:t,label:E,labelAnchor:z,labelArrow:I})]}}}})):null)}function XP(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:g=e==="x"?6:0,tickPadding:m,tickRotate:p,y:_,margin:y,marginTop:b=y===void 0?t==="top"?30:0:y,marginRight:v=y===void 0?20:y,marginBottom:x=y===void 0?t==="bottom"?30:0:y,marginLeft:w=y===void 0?20:y,label:E,labelAnchor:T,labelArrow:I,labelOffset:S,...A}){return g=Gt(g),m=Gt(m),p=Gt(p),T!==void 0&&(T=li(T,"labelAnchor",["center","left","right"])),I=o6(I),ir(g&&!Re(s)?Hut(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:p,y:_,...A}):null,Re(l)?null:But(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:p,y:_,marginTop:b,marginRight:v,marginBottom:x,marginLeft:w,...A}),!Re(l)&&E!==null?Gc([],n6({fill:l,fillOpacity:c,...A},function(R,k,$,L,N){const D=L[e],{marginTop:V,marginRight:Y,marginBottom:B,marginLeft:q}=e==="x"&&N.inset||N,z=T??(D.bandwidth?"center":"right"),Q=S??(t==="top"?V:B)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-Q:Q,this.dx=z==="right"?Y-3:z==="left"?3-q:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[s6(e,D,{anchor:t,label:E,labelAnchor:z,labelArrow:I})]}}}})):null)}function Vut(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:h=0,y:d=e==="y"?void 0:null,...g}){return wu(WP,e,t,`${e}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:d,...g,dx:t==="left"?+h-Qe+ +u:+h+Qe-f,anchor:"start",length:l,shape:t==="left"?Xut:qut})}function Hut(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:h=0,x:d=e==="x"?void 0:null,...g}){return wu(zP,e,t,`${e}-axis tick`,n,{strokeWidth:i,strokeLinejoin:s,strokeLinecap:r,facetAnchor:o,frameAnchor:a,x:d,...g,dy:t==="bottom"?+h-Qe-f:+h+Qe+ +u,anchor:"start",length:l,shape:t==="bottom"?Yut:jut})}function Gut(e,t,n,{facetAnchor:i=t+(e==="y"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*Tp):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:g=h,dx:m=0,y:p=e==="y"?void 0:null,..._}){return wu(MP,e,t,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,y:p,..._,dx:t==="left"?+m-s-a+ +d:+m+ +s+ +a-g},function(y,b,v,x,w){f===void 0&&(this.fontVariant=r6(y)),l===void 0&&(w.text=i6(y,b,v,x,t))})}function But(e,t,n,{facetAnchor:i=t+(e==="x"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*Tp):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:g=h,dy:m=0,x:p=e==="x"?void 0:null,..._}){return wu(AP,e,t,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,x:p,..._,dy:t==="bottom"?+m+ +s+ +a-g:+m-s-a+ +d},function(y,b,v,x,w){f===void 0&&(this.fontVariant=r6(y)),l===void 0&&(w.text=i6(y,b,v,x,t))})}function qP(){const[e,t]=Uo(...arguments);return QP("y",VP(t),e,t)}function KP(){const[e,t]=Uo(...arguments);return QP("fy",HP(t),e,t)}function ZP(){const[e,t]=Uo(...arguments);return t6("x",GP(t),e,t)}function JP(){const[e,t]=Uo(...arguments);return t6("fx",BP(t),e,t)}function QP(e,t,n,{y:i=e==="y"?void 0:null,x:r=null,x1:s=t==="left"?r:null,x2:o=t==="right"?r:null,...a}){return wu(Lo,e,t,`${e}-grid`,n,{y:i,x1:s,x2:o,...e6(a)})}function t6(e,t,n,{x:i=e==="x"?void 0:null,y:r=null,y1:s=t==="top"?r:null,y2:o=t==="bottom"?r:null,...a}){return wu(Cs,e,t,`${e}-grid`,n,{x:i,y1:s,y2:o,...e6(a)})}function e6({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:i=t,strokeWidth:r=1,...s}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...s}}function n6({fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},f){return[,e]=Vn(e),[,t]=Le(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:f}}function wu(e,t,n,i,r,s,o){let a;function l(f,h,d,g,m,p){const _=f==null&&(t==="fx"||t==="fy"),{[t]:y}=g;if(!y)throw new Error(`missing scale: ${t}`);const b=y.domain();let{interval:v,ticks:x,tickFormat:w,tickSpacing:E=t==="x"?80:35}=s;if(typeof x=="string"&&a6(y)&&(v=x,x=void 0),x===void 0&&(x=_u(v,y.type)??Uut(y,E)),f==null){if(Ps(x))f=Hn(x);else if(Zl(x))f=Zy(x,...be(b));else if(y.interval){let I=y.interval;if(y.ticks){const[S,A]=be(b),R=(A-S)/I[rd];I=AA(I,R/x)??I,f=Zy(I,S,A)}else{f=b;const S=f.length;I=AA(I,S/x)??I,I!==y.interval&&(f=Zy(I,...be(f)))}if(I===y.interval){const S=Math.round(f.length/x);S>1&&(f=f.filter((A,R)=>R%S===0))}}else y.ticks?f=y.ticks(x):f=b;if(!y.ticks&&f.length&&f!==b){const I=new Ch(b);f=f.filter(S=>I.has(S)),f.length||_s(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[Ns(f)]:a[t]={scale:t,value:St}}o==null||o.call(this,y,f,x,w,a);const T=Object.fromEntries(Object.entries(a).map(([I,S])=>[I,{...S,value:Wt(f,S.value)}]));return _&&(h=p.filterFacets(f,T)),{data:f,facets:h,channels:T}}const c=Gn(s).initializer,u=e(r,Gn({...s,initializer:l},c));return r==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function Uut(e,t){const[n,i]=be(e.range());return(i-n)/t}function i6(e,t,n,i,r){return{value:mE(e,t,n,i,r)}}function mE(e,t,n,i,r){return typeof i=="function"?i:i===void 0&&t&&An(t)?llt(t,r)??tl:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,i):i===void 0?tl:typeof i=="string"?(An(e.domain())?Fh:Fo)(i):ni(i)}function Zy(e,t,n){return e.range(t,e.offset(e.floor(n)))}const Yut={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},jut={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Xut={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},qut={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function r6(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function Kut(e){return Math.sign(Hc(e.domain()))*Math.sign(Hc(e.range()))}function s6(e,t,{anchor:n,label:i=t.label,labelAnchor:r,labelArrow:s}={}){if(!(i==null||i.inferred&&a6(t)&&/^(date|time|year)$/i.test(i))){if(i=String(i),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(i)),!s)return i;if(s===!0){const o=Kut(t);o&&(s=/x$/.test(e)||r==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function o6(e="auto"){return Re(e)?!1:typeof e=="boolean"?e:li(e,"labelArrow",["auto","up","right","down","left"])}function a6(e){return An(e.domain())}function eM(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function Zut(e,{opacity:t,...n}={}){if(!gl(e)&&!sP(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return l6(e,n,(i,r,s,o)=>i.append("svg").attr("width",s).attr("height",o).attr("fill",r.scale).attr("fill-opacity",Le(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Jut(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:Re(t)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[f,h]=Vn(t),[d,g]=Vn(i),m=eM(l,f),p=eM(l,d),_=o*o*Math.PI;return n=Le(n)[1],r=Le(r)[1],s=Le(s)[1],l6(e,a,(y,b,v,x)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",v).attr("height",x).attr("fill",f==="color"?w=>m.scale(w):h).attr("fill-opacity",n).attr("stroke",d==="color"?w=>p.scale(w):g).attr("stroke-opacity",r).attr("stroke-width",s).append("path").attr("d",w=>{const E=os();return e.scale(w).draw(E,_),E}))}function l6(e,t={},n){let{columns:i,tickFormat:r,fontVariant:s=uP(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:f,width:h}=t;const d=n_(t);u=eE(u),r=mE(e.scale,e.domain,void 0,r);const g=te("div",d).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,g.style("columns",i).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,l).call(p=>p.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,g.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,l).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),g.call(p=>p.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",c?`${+c}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",Ae(s,"normal")).call(nE,f).node()}const Sp=new Map([["symbol",Jut],["color",c6],["opacity",eft]]);function Qut(e={}){for(const[t,n]of Sp){const i=e[t];if(Pa(i)){const r=n_(e);let s;if(t==="symbol"){const{fill:o,stroke:a=o===void 0&&Pa(e.color)?"color":void 0}=e;s={fill:o,stroke:a}}return n(sb(t,i,s),pE(r,i,e),o=>Pa(e[o])?sb(o,e[o]):null)}}throw new Error("unknown legend type; no scale found")}function tft(e,t,n={}){return(i,r)=>{if(!Sp.has(i))throw new Error(`unknown legend type: ${i}`);if(i in e)return Sp.get(i)(e[i],pE(t,n[i],r),s=>e[s])}}function pE({className:e,...t},{label:n,ticks:i,tickFormat:r}={},s){return Tlt(s,{className:e,...t},{label:n,ticks:i,tickFormat:r})}function c6(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return Zut(e,n);case"ramp":return but(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function eft({type:e,interpolate:t,...n},{legend:i=!0,color:r=Or(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return c6({type:e,...n,interpolate:nft(r)},{legend:i,...s})}function nft(e){const{r:t,g:n,b:i}=Or(e)||Or(0,0,0);return r=>`rgba(${t},${n},${i},${r})`}function ift(e,t,n){const i=[];for(const[r,s]of Sp){const o=n[r];if(o!=null&&o.legend&&r in e){const a=s(e[r],pE(t,e[r],o),l=>e[l]);a!=null&&i.push(a)}}return i}const rft={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},sft={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class u6 extends he{constructor(t={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:s=i,insetBottom:o=i,insetLeft:a=i,rx:l,ry:c}=t;super(If,void 0,t,n==null?rft:sft),this.anchor=_D(n,"anchor",["top","right","bottom","left"]),this.insetTop=Gt(r),this.insetRight=Gt(s),this.insetBottom=Gt(o),this.insetLeft=Gt(a),this.rx=Gt(l),this.ry=Gt(c)}render(t,n,i,r,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:f}=r,{anchor:h,insetTop:d,insetRight:g,insetBottom:m,insetLeft:p,rx:_,ry:y}=this,b=c+p,v=u-a-g,x=o+d,w=f-l-m;return te(h?"svg:line":"svg:rect",s).datum(0).call(ve,this,r,s).call(pe,this).call(He,this,i).call(fe,this,{}).call(h==="left"?E=>E.attr("x1",b).attr("x2",b).attr("y1",x).attr("y2",w):h==="right"?E=>E.attr("x1",v).attr("x2",v).attr("y1",x).attr("y2",w):h==="top"?E=>E.attr("x1",b).attr("x2",v).attr("y1",x).attr("y2",x):h==="bottom"?E=>E.attr("x1",b).attr("x2",v).attr("y1",w).attr("y2",w):E=>E.attr("x",b).attr("y",x).attr("width",v-b).attr("height",w-x).attr("rx",_).attr("ry",y)).node()}}function _E(e){return new u6(e)}const Jy={ariaLabel:"tip",fill:"white",stroke:"currentColor"},oft=new Set(["geometry","href","src","ariaLabel","scales"]);class f6 extends he{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Ps(t)&&ED(t)&&(n={...n,title:St});const{x:i,y:r,x1:s,x2:o,y1:a,y2:l,anchor:c,monospace:u,fontFamily:f=u?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:d,fontVariant:g,fontWeight:m,lineHeight:p=1,lineWidth:_=20,frameAnchor:y,format:b,textAnchor:v="start",textOverflow:x,textPadding:w=8,title:E,pointerSize:T=12,pathFilter:I="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:i,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:r,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:E,optional:!0}},n,Jy),this.anchor=TD(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=ld(y),this.textAnchor=Ae(v,"middle"),this.textPadding=+w,this.pointerSize=+T,this.pathFilter=ln(I),this.lineHeight=+p,this.lineWidth=+_,this.textOverflow=CP(x),this.monospace=!!u,this.fontFamily=ln(f),this.fontSize=Gt(h),this.fontStyle=ln(d),this.fontVariant=ln(g),this.fontWeight=ln(m);for(const S in Jy)S in this.channels&&(this[S]=Jy[S]);this.splitLines=IP(this),this.clipLine=LP(this),this.format={...b}}render(t,n,i,r,s){const o=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:f,document:h}=s,{anchor:d,monospace:g,lineHeight:m,lineWidth:p}=this,{textPadding:_,pointerSize:y,pathFilter:b}=this,{marginTop:v,marginLeft:x}=r,{x1:w,y1:E,x2:T,y2:I,x:S=w??T,y:A=E??I}=i,R=c?c(t.fx)-x:0,k=u?u(t.fy)-v:0,[$,L]=Vr(this,r),N=lP(i,$),D=cP(i,L),V=g?hE:fE,Y=V(gc);let B,q;"title"in i?(B=i.channels,q=fft):(B=uft.call(this,i,n),q=hft);const z=te("svg:g",s).call(ve,this,r,s).call(RP,this).call(fe,this,{x:S&&a,y:A&&l}).call(rt=>rt.selectAll().data(t).enter().append("g").attr("transform",at=>`translate(${Math.round(N(at))},${Math.round(D(at))})`).call(pe,this).call(at=>at.append("path").attr("filter",b)).call(at=>at.append("text").each(function(W){const G=Ei(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const F=q.call(o,W,t,B,n,i);if(typeof F=="string")for(const j of o.splitLines(F))Q(G,{value:o.clipLine(j)});else{const j=new Set;for(const Z of F){const{label:C=""}=Z;C&&j.has(C)||(j.add(C),Q(G,Z))}}})));function Q(rt,{label:at,value:W,color:G,opacity:F}){at??(at=""),W??(W="");const j=G!=null||F!=null;let Z,C=p*100;const[O]=Bc(at,C,V,Y);if(O>=0)at=at.slice(0,O).trimEnd()+gc,Z=W.trim(),W="";else{(at||!W&&!j)&&(W=" "+W);const[H]=Bc(W,C-V(at),V,Y);H>=0&&(W=W.slice(0,H).trimEnd()+gc,Z=W.trim())}const P=rt.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");at&&P.append("tspan").attr("font-weight","bold").text(at),W&&P.append(()=>h.createTextNode(W)),j&&P.append("tspan").text(" ■").attr("fill",G).attr("fill-opacity",F).style("user-select","none"),Z&&P.append("title").text(Z)}function nt(){const{width:rt,height:at}=r.facet??r;z.selectChildren().each(function(W){let{x:G,width:F,height:j}=this.getBBox();F=Math.round(F),j=Math.round(j);let Z=d;if(Z===void 0){Z=o.previousAnchor;const P=N(W)+R,H=D(W)+k,U=P+F+_*2<rt,X=P-F-_*2>0,lt=H+j+y+_*2+7<at,tt=H-j-y-_*2>0,et=(/-left$/.test(Z)?U||!X:U&&!X)?"left":"right",K=(/^top-/.test(Z)?lt||!tt:lt&&!tt)?"top":"bottom";Z=o.previousAnchor=`${K}-${et}`}const C=this.firstChild,O=this.lastChild;if(C.setAttribute("d",cft(Z,y,_,F,j)),G)for(const P of O.childNodes)P.setAttribute("x",-G);O.setAttribute("y",`${+aft(Z,O.childNodes.length,m).toFixed(6)}em`),O.setAttribute("transform",`translate(${lft(Z,y,_,F,j)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(nt):typeof requestAnimationFrame<"u"&&requestAnimationFrame(nt)),z.node()}}function h6(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=or(t,n)),new f6(e,{...i,x:t,y:n})}function aft(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function lft(e,t,n,i,r){switch(e){case"middle":return[-i/2,r/2];case"top-left":return[n,t+n];case"top":return[-i/2,t/2+n];case"top-right":return[-i-n,t+n];case"right":return[-t/2-i-n,r/2];case"bottom-left":return[n,-t-n];case"bottom":return[-i/2,-t/2-n];case"bottom-right":return[-i-n,-t-n];case"left":return[n+t/2,r/2]}}function cft(e,t,n,i,r){const s=i+n*2,o=r+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function uft({channels:e},t){var r,s;const n={};let i=this.format;i=nM(i,e,"x"),i=nM(i,e,"y"),this.format=i;for(const o in i){const a=i[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=eb(e,o);l&&(n[o]=l)}}for(const o in e){if(o in n||o in i||oft.has(o))continue;const a=eb(e,o);a&&(n[o]=a)}this.facet&&(t.fx&&!("fx"in i)&&(n.fx=!0),t.fy&&!("fy"in i)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const l=((r=n[o])==null?void 0:r.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(An(l)?Fh:Fo)(a)}else if(a===void 0||a===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?mE(l,l.domain()):tl}}return n}function nM(e,t,n){if(!(n in e))return e;const i=`${n}1`,r=`${n}2`;if((i in e||!(i in t))&&(r in e||!(r in t)))return e;const s=Object.entries(e),o=e[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[i,o],[r,o]),Object.fromEntries(s)}function fft(e,t,{title:n}){return tl(n.value[e],e)}function*hft(e,t,n,i,r){for(const s in n){if(s==="fx"||s==="fy"){yield{label:Cp(i,n,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:rM(i,n,"x"),value:iM(this.format.x2,n.x1,o,e)};else if(s==="y2"&&"y1"in n)yield{label:rM(i,n,"y"),value:iM(this.format.y2,n.y1,o,e)};else{const a=o.value[e],l=o.scale;if(!xn(a)&&l==null)continue;yield{label:Cp(i,n,s),value:this.format[s](a,e),color:l==="color"?r[s][e]:null,opacity:l==="opacity"?r[s][e]:null}}}}function iM(e,t,n,i){var r;return(r=n.hint)!=null&&r.length?`${e(n.value[i]-t.value[i],i)}`:`${e(t.value[i],i)}–${e(n.value[i],i)}`}function rM(e,t,n){const i=Cp(e,t,`${n}1`,n),r=Cp(e,t,`${n}2`,n);return i===r?i:`${i}–${r}`}function Cp(e,t,n,i=n){const r=t[n],s=e[(r==null?void 0:r.scale)??n];return String((s==null?void 0:s.label)??(r==null?void 0:r.label)??i)}function d6(e={}){var Y;const{facet:t,style:n,title:i,subtitle:r,caption:s,ariaLabel:o,ariaDescription:a}=e,l=eE(e.className),c=e.marks===void 0?[]:oM(e.marks);c.push(...bft(c));const u=yft(t,e),f=new Map;for(const B of c){const q=aM(B,u,e);q&&f.set(B,q)}const h=new Map;u&&Ku(h,[u],e),Ku(h,f,e);const d=oM(wft(c,h,e));for(const B of d){const q=aM(B,u,e);q&&f.set(B,q)}c.unshift(...d);let g=out(h,e);if(g!==void 0){const B=u?qy(g,u):void 0;for(const z of c){if(z.facet===null||z.facet==="super")continue;const Q=f.get(z);Q!==void 0&&(Q.facetsIndex=z.fx!=null||z.fy!=null?qy(g,Q):B)}const q=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((Q,nt)=>{(Q==null?void 0:Q.length)>0&&q.add(nt)});g.forEach(0<q.size&&q.size<g.length?(z,Q)=>z.empty=!q.has(Q):z=>z.empty=!1);for(const z of c)if(z.facet==="exclude"){const Q=f.get(z);Q!==void 0&&(Q.facetsIndex=cut(Q.facetsIndex))}}for(const B of we.keys())Pa(e[B])&&B!=="fx"&&B!=="fy"&&h.set(B,[]);const m=new Map;for(const B of c){if(m.has(B))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:q,channels:z}=f.get(B)??{},{data:Q,facets:nt,channels:rt}=B.initialize(q,z,e);yE(rt,e),m.set(B,{data:Q,facets:nt,channels:rt})}const p=rb(Ku(h,m,e),e),_=rut(p,c,e);Kct(p,_);const y=HA(p),{fx:b,fy:v}=y,x=b||v?eP(p,_):_,w=b||v?Mft(y,_):_,E=n_(e),T=E.document,I=a0("svg").call(T.documentElement);let S=I;E.ownerSVGElement=I,E.className=l,E.projection=uct(e,x),E.filterFacets=(B,q)=>qy(g,{channels:q,groups:aE(B,q)}),E.getMarkState=B=>{const q=m.get(B),z=f.get(B);return{...q,channels:{...q.channels,...z==null?void 0:z.channels}}},E.dispatchValue=B=>{S.value!==B&&(S.value=B,S.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[B,q]of m)if(B.initializer!=null){const z=B.facet==="super"?w:x,Q=B.initializer(q.data,q.facets,q.channels,y,z,E);if(Q.data!==void 0&&(q.data=Q.data),Q.facets!==void 0&&(q.facets=Q.facets),Q.channels!==void 0){const{fx:nt,fy:rt,...at}=Q.channels;_ft(at),Object.assign(q.channels,at);for(const W of Object.values(at)){const{scale:G}=W;G!=null&&!Clt(we.get(G))&&(g6(W,e),A.add(G))}(nt!=null||rt!=null)&&f.set(B,!0)}}if(A.size){const B=new Map;Ku(B,m,e,nt=>A.has(nt)),Ku(h,m,e,nt=>A.has(nt));const q=Aft(rb(B,e),p),{scales:z,...Q}=HA(q);Object.assign(p,q),Object.assign(y,Q),Object.assign(y.scales,z)}let R,k;g!==void 0&&(R={x:b==null?void 0:b.domain(),y:v==null?void 0:v.domain()},g=aut(g,R),k=lut(b,v,_));for(const[B,q]of m)q.values=B.scale(q.channels,y,E);const{width:$,height:L}=_;Ei(I).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",$).attr("height",L).attr("viewBox",`0 0 ${$} ${L}`).attr("aria-label",o).attr("aria-description",a).call(B=>B.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(nE,n);for(const B of c){const{channels:q,values:z,facets:Q}=m.get(B);if(g===void 0||B.facet==="super"){let nt=null;if(Q&&(nt=Q[0],nt=B.filter(nt,q,z),nt.length===0))continue;const rt=B.render(nt,y,z,w,E);if(rt==null)continue;I.appendChild(rt)}else{let nt;for(const rt of g){if(!(((Y=B.facetAnchor)==null?void 0:Y.call(B,g,R,rt))??!rt.empty))continue;let at=null;if(Q){const G=f.has(B);if(at=Q[G?rt.i:0],at=B.filter(at,q,z),at.length===0)continue;!G&&at===Q[0]&&(at=Fa(at)),at.fx=rt.x,at.fy=rt.y,at.fi=rt.i}const W=B.render(at,y,z,x,E);if(W!=null){(nt??(nt=Ei(I).append("g"))).append(()=>W).datum(rt);for(const G of["aria-label","aria-description","aria-hidden","transform"])W.hasAttribute(G)&&(nt.attr(G,W.getAttribute(G)),W.removeAttribute(G))}}nt==null||nt.selectChildren().attr("transform",k)}}const N=ift(p,E,e),{figure:D=i!=null||r!=null||s!=null||N.length>0}=e;D&&(S=T.createElement("figure"),S.className=`${l}-figure`,S.style.maxWidth="initial",i!=null&&S.append(sM(T,i,"h2")),r!=null&&S.append(sM(T,r,"h3")),S.append(...N,I),s!=null&&S.append(dft(T,s))),S.scale=iut(y.scales),S.legend=tft(p,E,e);const V=tct();return V>0&&Ei(I).append("text").attr("x",$).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${V.toLocaleString("en-US")} warning${V===1?"":"s"}. Please check the console.`),S}function sM(e,t,n){if(t.ownerDocument)return t;const i=e.createElement(n);return i.append(t),i}function dft(e,t){const n=e.createElement("figcaption");return n.append(t),n}function gft({marks:e=[],...t}={}){return d6({...t,marks:[...e,this]})}he.prototype.plot=gft;function oM(e){return e.flat(1/0).filter(t=>t!=null).map(mft)}function mft(e){return typeof e.render=="function"?e:new pft(e)}class pft extends he{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function yE(e,t){for(const n in e)g6(e[n],t);return e}function g6(e,t){const{scale:n,transform:i=!0}=e;if(n==null||!i)return;const{type:r,percent:s,interval:o,transform:a=s?l=>l*100:xD(o,r)}=t[n]??{};a!=null&&(e.value=de(e.value,a),e.transform=!1)}function _ft(e){for(const t in e)OD(t,e[t])}function Ku(e,t,n,i=hlt){var r,s;for(const{channels:o}of t.values())for(const a in o){const l=o[a],{scale:c}=l;if(c!=null&&i(c))if(c==="projection"){if(!dct(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,f=((s=n.y)==null?void 0:s.domain)===void 0;if(u||f){const[h,d]=mct(l);u&&Qy(e,"x",h),f&&Qy(e,"y",d)}}}else Qy(e,c,l)}return e}function Qy(e,t,n){const i=e.get(t);i!==void 0?i.push(n):e.set(t,[n])}function yft(e,t){if(e==null)return;const{x:n,y:i}=e;if(n==null&&i==null)return;const r=Hn(e.data);if(r==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=_h(r,{value:n,scale:"fx"})),i!=null&&(s.fy=_h(r,{value:i,scale:"fy"})),yE(s,t);const o=aE(r,s);return{channels:s,groups:o,data:e.data}}function aM(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:i,fy:r}=e;if(i!=null||r!=null){const c=Hn(e.data??i??r);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const u={};return i!=null&&(u.fx=_h(c,{value:i,scale:"fx"})),r!=null&&(u.fy=_h(c,{value:r,scale:"fy"})),yE(u,n),{channels:u,groups:aE(c,u)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=Hn(e.data))==null?void 0:l.length)===a.length&&_s(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function vft(e,t={}){return Gn({...t,x:null,y:null},(n,i,r,s,o,a)=>a.getMarkState(e))}function bft(e){const t=[];for(const n of e){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r}=i;r=/^x$/i.test(r)?vh:/^y$/i.test(r)?uE:cE,i=r(vft(n,i)),i.title=null;const s=h6(n.data,i);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function wft(e,t,n){let{projection:i,x:r={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:f=l,grid:h}=u,x:{axis:d=l,grid:g=d===null?null:c}=r,y:{axis:m=l,grid:p=m===null?null:c}=s,fx:{axis:_=f,grid:y=_===null?null:h}=o,fy:{axis:b=f,grid:v=b===null?null:h}=a}=n;(i||!Pa(r)&&!lM("x",e))&&(d=g=null),(i||!Pa(s)&&!lM("y",e))&&(m=p=null),t.has("fx")||(_=y=null),t.has("fy")||(b=v=null),d===void 0&&(d=!pg(e,"x")),m===void 0&&(m=!pg(e,"y")),_===void 0&&(_=!pg(e,"fx")),b===void 0&&(b=!pg(e,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),_===!0&&(_=d==="top"||d===null?"bottom":"top"),b===!0&&(b=m==="right"||m===null?"left":"right");const x=[];return mg(x,v,KP,a),gg(x,b,UP,"right","left",u,a),mg(x,y,JP,o),gg(x,_,YP,"top","bottom",u,o),mg(x,p,qP,s),gg(x,m,dE,"left","right",n,s),mg(x,g,ZP,r),gg(x,d,gE,"bottom","top",n,r),x}function gg(e,t,n,i,r,s,o){if(!t)return;const a=xft(t);o=Eft(a?i:t,s,o);const{line:l}=o;(n===dE||n===gE)&&l&&!Vc(l)&&e.push(_E(Tft(o))),e.push(n(o)),a&&e.push(n({...o,anchor:r,label:null}))}function mg(e,t,n,i){!t||Vc(t)||e.push(n(Sft(t,i)))}function xft(e){return/^\s*both\s*$/i.test(e)}function Eft(e,t,{line:n=t.line,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:g=t.labelArrow,labelOffset:m}){return{anchor:e,line:n,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h,labelAnchor:d,labelArrow:g,labelOffset:m}}function Tft(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function Sft(e,{stroke:t=ad(e)?e:void 0,ticks:n=Cft(e)?e:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:s}}function Cft(e){switch(typeof e){case"number":return!0;case"string":return!ad(e)}return Ps(e)||typeof(e==null?void 0:e.range)=="function"}function pg(e,t){const n=`${t}-axis `;return e.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function lM(e,t){for(const n of t)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===e||r==="projection")return!0}return!1}function Aft(e,t){for(const n in e){const i=e[n],r=t[n];i.label===void 0&&r&&(i.label=r.label)}return e}function Mft({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=oE(n),c=e&&cM(e),u=t&&cM(t);return{marginTop:t?u[0]:i,marginRight:e?a-c[1]:r,marginBottom:t?l-u[1]:s,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function cM(e){const t=e.domain();let n=e(t[0]),i=e(t[t.length-1]);return i<n&&([n,i]=[i,n]),[n,i+e.bandwidth()]}const Rft=new Map([["basis",nh],["basis-closed",BY],["basis-open",UY],["bundle",YY],["bump-x",kY],["bump-y",$Y],["cardinal",jY],["cardinal-closed",XY],["cardinal-open",qY],["catmull-rom",KY],["catmull-rom-closed",ZY],["catmull-rom-open",JY],["linear",Wh],["linear-closed",QY],["monotone-x",tj],["monotone-y",ej],["natural",nj],["step",ij],["step-after",sj],["step-before",rj]]);function vE(e=Wh,t){if(typeof e=="function")return e;const n=Rft.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function m6(e=Uc,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Uc:vE(e,t)}function Uc(e){return Wh(e)}function fo(e={y:"count"},t={}){[e,t]=EE(e,t);const{x:n,y:i}=t;return xE(Ap(n,t,St),null,null,i,e,md(t))}function ho(e={x:"count"},t={}){[e,t]=EE(e,t);const{x:n,y:i}=t;return xE(null,Ap(i,t,St),n,null,e,pd(t))}function fa(e={fill:"count"},t={}){[e,t]=EE(e,t);const{x:n,y:i}=Ift(t);return xE(n,i,null,null,e,md(pd(t)))}function p6(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=Zx}=n,r={filter:null};return n[t]!=null&&(r[t]=i),n[`${t}1`]!=null&&(r[`${t}1`]=i),n[`${t}2`]!=null&&(r[`${t}2`]=i),e(r,n)}function bE(e={}){return p6(fo,"y",yu(e,"x"))}function wE(e={}){return p6(ho,"x",yu(e,"y"))}function xE(e,t,n,i,{data:r=Kx,filter:s=xp,sort:o,reverse:a,...l}={},c={}){e=uM(e),t=uM(t),l=Lft(l,c),r=b6(r,St),o=o==null?void 0:y6("sort",o,c),s=s==null?void 0:v6("filter",s,c),n!=null&&yo(l,"x","x1","x2")&&(n=null),i!=null&&yo(l,"y","y1","y2")&&(i=null);const[u,f]=In(e),[h,d]=In(e),[g,m]=In(t),[p,_]=In(t),[y,b]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[v,x]=In(y),{x:w,y:E,z:T,fill:I,stroke:S,x1:A,x2:R,y1:k,y2:$,domain:L,cumulative:N,thresholds:D,interval:V,...Y}=c,[B,q]=In(T),[z]=Vn(I),[Q]=Vn(S),[nt,rt]=In(z),[at,W]=In(Q);return{..."z"in c&&{z:B||T},..."fill"in c&&{fill:nt||I},..."stroke"in c&&{stroke:at||S},...Wr(Y,(G,F,j)=>{const Z=wp(Wt(G,y),j==null?void 0:j[b]),C=Wt(G,T),O=Wt(G,z),P=Wt(G,Q),H=qx(l,{z:C,fill:O,stroke:P}),U=[],X=[],lt=Z&&x([]),tt=C&&q([]),et=O&&rt([]),K=P&&W([]),dt=e&&f([]),ut=e&&d([]),gt=t&&m([]),mt=t&&_([]),Tt=$ft(e==null?void 0:e(G),t==null?void 0:t(G));let Nt=0;for(const Ct of l)Ct.initialize(G);o&&o.initialize(G),s&&s.initialize(G);for(const Ct of F){const ee=[];for(const Ee of l)Ee.scope("facet",Ct);o&&o.scope("facet",Ct),s&&s.scope("facet",Ct);for(const[Ee,_e]of dc(Ct,H))for(const[Vs,ci]of dc(_e,Z))for(const[fn,ye]of Tt(ci))if(!(s&&!s.reduce(fn,ye))){ee.push(Nt++),X.push(r.reduceIndex(fn,G,ye)),Z&&lt.push(Vs),C&&tt.push(H===C?Ee:C[(fn.length>0?fn:ci)[0]]),O&&et.push(H===O?Ee:O[(fn.length>0?fn:ci)[0]]),P&&K.push(H===P?Ee:P[(fn.length>0?fn:ci)[0]]),dt&&(dt.push(ye.x1),ut.push(ye.x2)),gt&&(gt.push(ye.y1),mt.push(ye.y2));for(const hn of l)hn.reduce(fn,ye);o&&o.reduce(fn)}U.push(ee)}return ID(U,o,a),{data:X,facets:U}}),...!yo(l,"x")&&(u?{x1:u,x2:h,x:bp(u,h)}:{x:w,x1:A,x2:R}),...!yo(l,"y")&&(g?{y1:g,y2:p,y:bp(g,p)}:{y:E,y1:k,y2:$}),...v&&{[b]:v},...Object.fromEntries(l.map(({name:G,output:F})=>[G,F]))}}function EE({cumulative:e,domain:t,thresholds:n,interval:i,...r},s){return[r,{cumulative:e,domain:t,thresholds:n,interval:i,...s}]}function Ap(e,{cumulative:t,domain:n,thresholds:i,interval:r},s){return e={...od(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=i),e.interval===void 0&&(e.interval=r),e.value===void 0&&(e.value=s),e.thresholds=_6(e.thresholds,e.interval),e}function Ift(e){let{x:t,y:n}=e;return t=Ap(t,e),n=Ap(n,e),[t.value,n.value]=or(t.value,n.value),{x:t,y:n}}function uM(e){if(e==null)return;const{value:t,cumulative:n,domain:i=be,thresholds:r}=e,s=o=>{let a=Wt(o,t),l;if(An(a)||kft(r)){a=de(a,pD,Float64Array);let[u,f]=typeof i=="function"?i(a):i,h=typeof r=="function"&&!Zl(r)?r(a,u,f):r;typeof h=="number"&&(h=NO(u,f,h)),Zl(h)&&(i===be&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f))),l=h}else{a=Pn(a);let[u,f]=typeof i=="function"?i(a):i,h=typeof r=="function"&&!Zl(r)?r(a,u,f):r;if(typeof h=="number")if(i===be){let d=Yf(u,f,h);if(isFinite(d))if(d>0){let g=Math.round(u/d),m=Math.round(f/d);g*d<=u||--g,m*d>f||++m;let p=m-g+1;h=new Float64Array(p);for(let _=0;_<p;++_)h[_]=(g+_)*d}else if(d<0){d=-d;let g=Math.round(u*d),m=Math.round(f*d);g/d<=u||--g,m/d>f||++m;let p=m-g+1;h=new Float64Array(p);for(let _=0;_<p;++_)h[_]=(g+_)/d}else h=[u];else h=[u]}else h=Eo(u,f,h);else Zl(h)&&(i===be&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f)));l=h}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?Dft:n>0?Nft:TE)(c,l,a),c};return s.label=Ds(t),s}function _6(e,t,n=fM){if(e===void 0)return t===void 0?n:_u(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return P9;case"scott":return DI;case"sturges":return iw;case"auto":return fM}return Lx(e)}return e}function Lft(e,t){return Yx(e,t,y6)}function y6(e,t,n){return jx(e,t,n,v6)}function v6(e,t,n){return Xx(e,t,n,b6)}function b6(e,t){return e_(e,t,Oft)}function Oft(e){switch(`${e}`.toLowerCase()){case"x":return Pft;case"x1":return zft;case"x2":return Wft;case"y":return Fft;case"y1":return Vft;case"y2":return Hft}throw new Error(`invalid bin reduce: ${e}`)}function fM(e,t,n){return Math.min(200,DI(e,t,n))}function kft(e){return plt(e)||Ps(e)&&An(e)}function $ft(e,t){return e&&t?function*(n){const i=e.bin(n);for(const[r,[s,o]]of e.entries()){const a=t.bin(i[r]);for(const[l,[c,u]]of t.entries())yield[a[l],{x1:s,y1:c,x2:o,y2:u}]}}:e?function*(n){const i=e.bin(n);for(const[r,[s,o]]of e.entries())yield[i[r],{x1:s,x2:o}]}:function*(n){const i=t.bin(n);for(const[r,[s,o]]of t.entries())yield[i[r],{y1:s,y2:o}]}}function TE(e,t,n){return t=Pn(t),i=>{var s;const r=e.map(()=>[]);for(const o of i)(s=r[i0(t,n[o])-1])==null||s.push(o);return r}}function Nft(e,t,n){const i=TE(e,t,n);return r=>{const s=i(r);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],c=s[o];for(const u of l)c.push(u)}return s}}function Dft(e,t,n){const i=TE(e,t,n);return r=>{const s=i(r);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const c of a)l.push(c)}return s}}function w6(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const Pft={reduceIndex(e,t,{x1:n,x2:i}){return w6(n,i)}},Fft={reduceIndex(e,t,{y1:n,y2:i}){return w6(n,i)}},zft={reduceIndex(e,t,{x1:n}){return n}},Wft={reduceIndex(e,t,{x2:n}){return n}},Vft={reduceIndex(e,t,{y1:n}){return n}},Hft={reduceIndex(e,t,{y2:n}){return n}};function SE(e={}){return yD(e)?e:{...e,x:St}}function CE(e={}){return vD(e)?e:{...e,y:St}}function Gft(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,i=new Uint8Array(n);let r=0;for(const a of t)for(const l of a)i[l]&&++r,i[l]=1;if(r===0)return{data:e,facets:t};e=gh(e);const s=e[gD]=new Uint32Array(n+r);t=t.map(a=>gh(a,Uint32Array));let o=n;i.fill(0);for(const a of t)for(let l=0,c=a.length;l<c;++l){const u=a[l];i[u]?(a[l]=o,e[o]=e[u],s[o]=u,++o):s[u]=u,i[u]=1}return{data:e,facets:t}}function x6(e={},t={}){arguments.length===1&&([e,t]=xu(e));const{y1:n,y:i=n,x:r,...s}=t,[o,a,l,c]=Eu(i,r,"y","x",e,s);return{...o,y1:n,y:a,x1:l,x2:c,x:bp(l,c)}}function Bft(e={},t={}){arguments.length===1&&([e,t]=xu(e));const{y1:n,y:i=n,x:r}=t,[s,o,a]=Eu(i,r,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function Uft(e={},t={}){arguments.length===1&&([e,t]=xu(e));const{y1:n,y:i=n,x:r}=t,[s,o,,a]=Eu(i,r,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function E6(e={},t={}){arguments.length===1&&([e,t]=xu(e));const{x1:n,x:i=n,y:r,...s}=t,[o,a,l,c]=Eu(i,r,"x","y",e,s);return{...o,x1:n,x:a,y1:l,y2:c,y:bp(l,c)}}function Yft(e={},t={}){arguments.length===1&&([e,t]=xu(e));const{x1:n,x:i=n,y:r}=t,[s,o,a]=Eu(i,r,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function jft(e={},t={}){arguments.length===1&&([e,t]=xu(e));const{x1:n,x:i=n,y:r}=t,[s,o,,a]=Eu(i,r,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function AE({x:e,x1:t,x2:n,...i}={}){return i=yu(i,"y"),t===void 0&&n===void 0?x6({x:e,...i}):([t,n]=bD(e,t,n),{...i,x1:t,x2:n})}function ME({y:e,y1:t,y2:n,...i}={}){return i=yu(i,"x"),t===void 0&&n===void 0?E6({y:e,...i}):([t,n]=bD(e,t,n),{...i,y1:t,y2:n})}function xu(e){const{offset:t,order:n,reverse:i,...r}=e;return[{offset:t,order:n,reverse:i},r]}const Xft={length:!0};function Eu(e,t=Ox,n,i,{offset:r,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${i}`);const l=Go(a),[c,u]=In(e),[f,h]=Zn(t),[d,g]=Zn(t);return f.hint=d.hint=Xft,r=qft(r),s=Jft(s,r,i),[Wr(a,(m,p,_)=>{({data:m,facets:p}=Gft(m,p));const y=e==null?void 0:u(wp(Wt(m,e),_==null?void 0:_[n])),b=Wt(m,t,Float64Array),v=Wt(m,l),x=s&&s(m,y,b,v),w=m.length,E=h(new Float64Array(w)),T=g(new Float64Array(w)),I=[];for(const S of p){const A=y?Array.from(Is(S,R=>y[R]).values()):[S];if(x)for(const R of A)R.sort(x);for(const R of A){let k=0,$=0;o&&R.reverse();for(const L of R){const N=b[L];N<0?k=T[L]=(E[L]=k)+N:N>0?$=T[L]=(E[L]=$)+N:T[L]=E[L]=$}}I.push(A)}return r&&r(I,E,T,v),{data:m,facets:p}}),c,f,d]}function qft(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Kft;case"center":case"silhouette":return Zft;case"wiggle":return S6}throw new Error(`unknown offset: ${e}`)}}function T6(e,t){let n=0,i=0;for(const r of e){const s=t[r];s<n&&(n=s),s>i&&(i=s)}return[n,i]}function Kft(e,t,n){for(const i of e)for(const r of i){const[s,o]=T6(r,n);for(const a of r){const l=1/(o-s||1);t[a]=l*(t[a]-s),n[a]=l*(n[a]-s)}}}function Zft(e,t,n){for(const i of e){for(const r of i){const[s,o]=T6(r,n);for(const a of r){const l=(o+s)/2;t[a]-=l,n[a]-=l}}C6(i,t,n)}A6(e,t,n)}function S6(e,t,n,i){for(const r of e){const s=new Ga;let o=0;for(const a of r){let l=-1;const c=a.map(d=>Math.abs(n[d]-t[d])),u=a.map(d=>{l=i?i[d]:++l;const g=n[d]-t[d],m=s.has(l)?g-s.get(l):0;return s.set(l,g),m}),f=[0,...M9(u)];for(const d of a)t[d]+=o,n[d]+=o;const h=Lr(c);h&&(o-=Lr(c,(d,g)=>(u[g]/2+f[g])*d)/h)}C6(r,t,n)}A6(e,t,n)}function C6(e,t,n){const i=qe(e,r=>qe(r,s=>t[s]));for(const r of e)for(const s of r)t[s]-=i,n[s]-=i}function A6(e,t,n){const i=e.length;if(i===1)return;const r=e.map(a=>a.flat()),s=r.map(a=>(qe(a,l=>t[l])+ze(a,l=>n[l]))/2),o=qe(s);for(let a=0;a<i;a++){const l=o-s[a];for(const c of r[a])t[c]+=l,n[c]+=l}}function Jft(e,t,n){if(e===void 0&&t===S6)return hM(Ai);if(e!=null){if(typeof e=="string"){const i=e.startsWith("-"),r=i?yp:Ai;switch((i?e.slice(1):e).toLowerCase()){case"value":case n:return Qft(r);case"z":return tht(r);case"sum":return eht(r);case"appearance":return nht(r);case"inside-out":return hM(r)}return dM(mD(e))}if(typeof e=="function")return(e.length===1?dM:iht)(e);if(Array.isArray(e))return rht(e);throw new Error(`invalid order: ${e}`)}}function Qft(e){return(t,n,i)=>(r,s)=>e(i[r],i[s])}function tht(e){return(t,n,i,r)=>(s,o)=>e(r[s],r[o])}function eht(e){return h_(e,(t,n,i,r)=>nw(Ns(t),s=>Lr(s,o=>i[o]),s=>r[s]))}function nht(e){return h_(e,(t,n,i,r)=>nw(Ns(t),s=>n[rw(s,o=>i[o])],s=>r[s]))}function hM(e){return h_(e,(t,n,i,r)=>{const s=Ns(t),o=nw(s,f=>n[rw(f,h=>i[h])],f=>r[f]),a=oc(s,f=>Lr(f,h=>i[h]),f=>r[f]),l=[],c=[];let u=0;for(const f of o)u<0?(u+=a.get(f),l.push(f)):(u-=a.get(f),c.push(f));return c.reverse().concat(l)})}function dM(e){return t=>{const n=Wt(t,e);return(i,r)=>Ai(n[i],n[r])}}function iht(e){return t=>(n,i)=>e(t[n],t[i])}function rht(e){return h_(Ai,()=>e)}function h_(e,t){return(n,i,r,s)=>{if(!s)throw new Error("missing channel: z");const o=new Ga(t(n,i,r,s).map((a,l)=>[a,l]));return(a,l)=>e(o.get(s[a]),o.get(s[l]))}}const sht={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class d_ extends he{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,z:a,curve:l,tension:c}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:Go(n),optional:!0}},n,sht),this.z=a,this.curve=vE(l,c)}filter(t){return t}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i;return te("svg:g",s).call(ve,this,r,s).call(fe,this,n,0,0).call(u=>u.selectAll().data(PD(t,[o,a,l,c],this,i)).enter().append("path").call(pe,this).call(Ep,this,i).attr("d",Ic().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>c[f]))).node()}}function oht(e,t){return t===void 0?el(e,{x:sd,y:dh}):new d_(e,t)}function bh(e,t){const{y:n=Bn,...i}=wE(t);return new d_(e,AE(SE({...i,y1:n,y2:void 0})))}function el(e,t){const{x:n=Bn,...i}=bE(t);return new d_(e,ME(CE({...i,x1:n,x2:void 0})))}const aht={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class M6 extends he{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,curve:a,tension:l}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,aht),this.curve=m6(a,l),vu(this,n)}project(t,n,i){this.curve!==Uc&&super.project(t,n,i)}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i,{curve:u}=this;return te("svg:g",s).call(ve,this,r,s).call(fe,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(pe,this).attr("d",u===Uc&&s.projection?lht(s.projection,o,a,l,c):h=>{const d=os(),g=u(d);return g.lineStart(),g.point(o[h],a[h]),g.point(l[h],c[h]),g.lineEnd(),d}).call(He,this,i).call(gd,this,i,s)).node()}}function lht(e,t,n,i,r){const s=zo(e);return t=Pn(t),n=Pn(n),i=Pn(i),r=Pn(r),o=>s({type:"LineString",coordinates:[[t[o],n[o]],[i[o],r[o]]]})}function R6(e,{x:t,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=Mp(t,n,i),[s,o]=Mp(r,s,o),new M6(e,{...a,x1:n,x2:i,y1:s,y2:o})}function Mp(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const cht={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class I6 extends he{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:h=u,sweep:d}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,cht),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+f,this.insetEnd=+h,this.sweep=uht(d)}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a,SW:u}=i,{strokeWidth:f,bend:h,headAngle:d,headLength:g,insetStart:m,insetEnd:p}=this,_=u?v=>u[v]:ni(f===void 0?1:f),y=d*Tp/2,b=g/1.5;return te("svg:g",s).call(ve,this,r,s).call(fe,this,n).call(v=>v.selectAll().data(t).enter().append("path").call(pe,this).attr("d",x=>{let w=o[x],E=a[x],T=l[x],I=c[x];const S=Math.hypot(T-w,I-E);if(S<=m+p)return null;let A=Math.atan2(I-E,T-w);const R=Math.min(b*_(x),S/3),k=this.sweep(w,E,T,I)*h*Tp,$=Math.hypot(S/Math.tan(k),S)/2;if(m||p)if($<1e5){const nt=Math.sign(k),[rt,at]=fht([w,E],[T,I],$,nt);if(m&&([w,E]=gM([rt,at,$],[w,E,m],-nt*Math.sign(m))),p){const[W,G]=gM([rt,at,$],[T,I,p],nt*Math.sign(p));A+=Math.atan2(G-at,W-rt)-Math.atan2(I-at,T-rt),T=W,I=G}}else{const nt=T-w,rt=I-E,at=Math.hypot(nt,rt);m&&(w+=nt/at*m,E+=rt/at*m),p&&(T-=nt/at*p,I-=rt/at*p)}const L=A+k,N=L+y,D=L-y,V=T-R*Math.cos(N),Y=I-R*Math.sin(N),B=T-R*Math.cos(D),q=I-R*Math.sin(D),z=$<1e5?`A${$},${$} 0,0,${k>0?1:0} `:"L",Q=R?`M${V},${Y}L${T},${I}L${B},${q}`:"";return`M${w},${E}${z}${T},${I}${Q}`}).call(He,this,i)).node()}}function uht(e=1){if(typeof e=="number")return ni(Math.sign(e));if(typeof e=="function")return(t,n,i,r)=>Math.sign(e(t,n,i,r));switch(li(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,i)=>xe(t,i);case"-x":return(t,n,i)=>Ha(t,i);case"+y":return(t,n,i,r)=>xe(n,r);case"-y":return(t,n,i,r)=>Ha(n,r)}}function fht([e,t],[n,i],r,s){const o=n-e,a=i-t,l=Math.hypot(o,a),c=s*Math.sqrt(r*r-l*l/4)/l;return[(e+n)/2-a*c,(t+i)/2+o*c]}function gM([e,t,n],[i,r,s],o){const a=i-e,l=r-t,c=Math.hypot(a,l),u=(a*a+l*l-s*s+n*n)/(2*c),f=o*Math.sqrt(n*n-u*u);return[e+(a*u+l*f)/c,t+(l*u-a*f)/c]}function hht(e,{x:t,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=Mp(t,n,i),[s,o]=Mp(r,s,o),new I6(e,{...a,x1:n,x2:i,y1:s,y2:o})}class RE extends he{constructor(t,n,i={},r){super(t,n,i,r);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:c=s,rx:u,ry:f}=i;this.insetTop=Gt(o),this.insetRight=Gt(a),this.insetBottom=Gt(l),this.insetLeft=Gt(c),this.rx=Ae(u,"auto"),this.ry=Ae(f,"auto")}render(t,n,i,r,s){const{rx:o,ry:a}=this;return te("svg:g",s).call(ve,this,r,s).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call(pe,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(bt,"rx",o).call(bt,"ry",a).call(He,this,i)).node()}_x(t,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?s=>n[s]+r:i+r}_y(t,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?s=>n[s]+r:i+r}_width({x:t},{x:n},{marginRight:i,marginLeft:r,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&t?t.bandwidth():s-i-r;return Math.max(0,l-o-a)}_height({y:t},{y:n},{marginTop:i,marginBottom:r,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&t?t.bandwidth():s-i-r;return Math.max(0,l-o-a)}}const L6={ariaLabel:"bar"};class O6 extends RE{constructor(t,n={}){const{x1:i,x2:r,y:s}=n;super(t,{x1:{value:i,scale:"x"},x2:{value:r,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,L6)}_transform(t,n,{x:i}){t.call(fe,n,{x:i},0,0)}_x({x:t},{x1:n,x2:i},{marginLeft:r}){const{insetLeft:s}=this;return wi(t)?r+s:o=>Math.min(n[o],i[o])+s}_width({x:t},{x1:n,x2:i},{marginRight:r,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return wi(t)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}class k6 extends RE{constructor(t,n={}){const{x:i,y1:r,y2:s}=n;super(t,{y1:{value:r,scale:"y"},y2:{value:s,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,L6)}_transform(t,n,{y:i}){t.call(fe,n,{y:i},0,0)}_y({y:t},{y1:n,y2:i},{marginTop:r}){const{insetTop:s}=this;return wi(t)?r+s:o=>Math.min(n[o],i[o])+s}_height({y:t},{y1:n,y2:i},{marginTop:r,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return wi(t)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}function Ea(e,t={}){return K0(t)||(t={...t,y:Bn,x2:St}),new O6(e,AE(_P(SE(t))))}function Ta(e,t={}){return K0(t)||(t={...t,x:Bn,y2:St}),new k6(e,ME(yP(CE(t))))}const dht={ariaLabel:"cell"};class g_ extends RE{constructor(t,{x:n,y:i,...r}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,dht)}_transform(t,n){t.call(fe,n,{},0,0)}}function Ql(e,{x:t,y:n,...i}={}){return[t,n]=or(t,n),new g_(e,{...i,x:t,y:n})}function ght(e,{x:t=Bn,fill:n,stroke:i,...r}={}){return n===void 0&&Vn(i)[0]===void 0&&(n=St),new g_(e,{...r,x:t,fill:n,stroke:i})}function mht(e,{y:t=Bn,fill:n,stroke:i,...r}={}){return n===void 0&&Vn(i)[0]===void 0&&(n=St),new g_(e,{...r,y:t,fill:n,stroke:i})}const pht={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function IE(e){return e.sort===void 0&&e.reverse===void 0?MD({channel:"-r"},e):e}class m_ extends he{constructor(t,n={}){const{x:i,y:r,r:s,rotate:o,symbol:a=eh,frameAnchor:l}=n,[c,u]=Le(o,0),[f,h]=Ilt(a),[d,g]=Le(s,f==null?3:4.5);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:d,scale:"r",filter:ps,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},IE(n),pht),this.r=g,this.rotate=u,this.symbol=h,this.frameAnchor=ld(l);const{channels:m}=this,{symbol:p}=m;if(p){const{fill:_,stroke:y}=m;p.hint={fill:_?_.value===p.value?"color":"currentColor":this.fill??"currentColor",stroke:y?y.value===p.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,r:u,rotate:f,symbol:h}=i,{r:d,rotate:g,symbol:m}=this,[p,_]=Vr(this,r),y=m===eh,b=u?void 0:d*d*Math.PI;return X0(d)&&(t=[]),te("svg:g",s).call(ve,this,r,s).call(fe,this,{x:l&&o,y:c&&a}).call(v=>v.selectAll().data(t).enter().append(y?"circle":"path").call(pe,this).call(y?x=>{x.attr("cx",l?w=>l[w]:p).attr("cy",c?w=>c[w]:_).attr("r",u?w=>u[w]:d)}:x=>{x.attr("transform",l_`translate(${l?w=>l[w]:p},${c?w=>c[w]:_})${f?w=>` rotate(${f[w]})`:g?` rotate(${g})`:""}`).attr("d",u&&h?w=>{const E=os();return h[w].draw(E,u[w]*u[w]*Math.PI),E}:u?w=>{const E=os();return m.draw(E,u[w]*u[w]*Math.PI),E}:h?w=>{const E=os();return h[w].draw(E,b),E}:(()=>{const w=os();return m.draw(w,b),w})())}).call(He,this,i)).node()}}function zs(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=or(t,n)),new m_(e,{...i,x:t,y:n})}function _ht(e,{x:t=St,...n}={}){return new m_(e,bP({...n,x:t}))}function yht(e,{y:t=St,...n}={}){return new m_(e,vP({...n,y:t}))}function vht(e,t){return zs(e,{...t,symbol:"circle"})}function bht(e,t){return zs(e,{...t,symbol:"hexagon"})}const wht={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class p_ extends he{constructor(t,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:Go(n),optional:!0}},n,wht),this.z=s,this.curve=m6(o,a),vu(this,n)}filter(t){return t}project(t,n,i){this.curve!==Uc&&super.project(t,n,i)}render(t,n,i,r,s){const{x:o,y:a}=i,{curve:l}=this;return te("svg:g",s).call(ve,this,r,s).call(fe,this,n).call(c=>c.selectAll().data(PD(t,[o,a],this,i)).enter().append("path").call(pe,this).call(Ep,this,i).call(Tut,this,i,s).attr("d",l===Uc&&s.projection?xht(s.projection,o,a):Rw().curve(l).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function xht(e,t,n){const i=zo(e);return t=Pn(t),n=Pn(n),r=>{let s=[];const o=[s];for(const a of r)a===-1?(s=[],o.push(s)):s.push([t[a],n[a]]);return i({type:"MultiLineString",coordinates:o})}}function LE(e,{x:t,y:n,...i}={}){return[t,n]=or(t,n),new p_(e,{...i,x:t,y:n})}function wh(e,{x:t=St,y:n=Bn,...i}={}){return new p_(e,wE({...i,x:t,y:n}))}function Yc(e,{x:t=Bn,y:n=St,...i}={}){return new p_(e,bE({...i,x:t,y:n}))}const Eht={ariaLabel:"rect"};class __ extends he{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:c=a,insetBottom:u=a,insetLeft:f=a,rx:h,ry:d}=n;super(t,{x1:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Eht),this.insetTop=Gt(l),this.insetRight=Gt(c),this.insetBottom=Gt(u),this.insetLeft=Gt(f),this.rx=Ae(h,"auto"),this.ry=Ae(d,"auto")}render(t,n,i,r,s){const{x:o,y:a}=n,{x1:l,y1:c,x2:u,y2:f}=i,{marginTop:h,marginRight:d,marginBottom:g,marginLeft:m,width:p,height:_}=r,{projection:y}=s,{insetTop:b,insetRight:v,insetBottom:x,insetLeft:w,rx:E,ry:T}=this;return te("svg:g",s).call(ve,this,r,s).call(fe,this,{x:l&&u&&o,y:c&&f&&a},0,0).call(I=>I.selectAll().data(t).enter().append("rect").call(pe,this).attr("x",l&&u&&(y||!wi(o))?S=>Math.min(l[S],u[S])+w:m+w).attr("y",c&&f&&(y||!wi(a))?S=>Math.min(c[S],f[S])+b:h+b).attr("width",l&&u&&(y||!wi(o))?S=>Math.max(0,Math.abs(u[S]-l[S])-w-v):p-d-m-v-w).attr("height",c&&f&&(y||!wi(a))?S=>Math.max(0,Math.abs(c[S]-f[S])-b-x):_-h-g-b-x).call(bt,"rx",E).call(bt,"ry",T).call(He,this,i)).node()}}function OE(e,t){return new __(e,mP(pP(t)))}function Rp(e,t={}){return K0(t)||(t={...t,y:Bn,x2:St,interval:1}),new __(e,AE(pP(SE(t))))}function Ip(e,t={}){return K0(t)||(t={...t,x:Bn,y2:St,interval:1}),new __(e,ME(mP(CE(t))))}function $6(e,t){t=Sht(t);const{x:n,y:i,color:r,size:s}=t,o=_g(e,n),a=_g(e,i),l=_g(e,r),c=_g(e,s);let{fx:u,fy:f,x:{value:h,reduce:d,zero:g,...m},y:{value:p,reduce:_,zero:y,...b},color:{value:v,color:x,reduce:w},size:{value:E,reduce:T},mark:I}=t;if(d===void 0&&(d=_==null&&h==null&&E==null&&p!=null?"count":null),_===void 0&&(_=d==null&&p==null&&E==null&&h!=null?"count":null),T===void 0&&E==null&&w==null&&d==null&&_==null&&(h==null||Te(o))&&(p==null||Te(a))&&(T="count"),g===void 0&&(g=yg(d)?!0:void 0),y===void 0&&(y=yg(_)?!0:void 0),h==null&&p==null)throw new Error("must specify x or y");if(d!=null&&p==null)throw new Error("reducing x requires y");if(_!=null&&h==null)throw new Error("reducing y requires x");I===void 0&&(I=E!=null||T!=null?"dot":yg(d)||yg(_)||w!=null?"bar":h!=null&&p!=null?Te(o)||Te(a)||d==null&&_==null&&!Zu(o)&&!Zu(a)?"dot":"line":h!=null||p!=null?"rule":null);let S,A,R;switch(I){case"dot":R=zs,A="stroke";break;case"line":R=o&&a||d!=null||_!=null?y||_!=null||o&&Zu(o)?Yc:g||d!=null||a&&Zu(a)?wh:LE:o?wh:Yc,A="stroke",pM(l)&&(S=null);break;case"area":R=!(y||_!=null)&&(g||d!=null||a&&Zu(a))?bh:el,A="fill",pM(l)&&(S=null);break;case"rule":R=o?Cs:Lo,A="stroke";break;case"bar":R=d!=null?Te(a)?mM(d)&&o&&Te(o)?Ql:Ea:Rp:_!=null?Te(o)?mM(_)&&a&&Te(a)?Ql:Ta:Ip:w!=null||T!=null?o&&Te(o)&&a&&Te(a)?Ql:o&&Te(o)?Ta:a&&Te(a)?Ea:OE:o&&Jl(o)&&!(a&&Jl(a))?Ea:a&&Jl(a)&&!(o&&Jl(o))?Ta:Ql,A="fill";break;default:throw new Error(`invalid mark: ${I}`)}let k={fx:u,fy:f,x:o??void 0,y:a??void 0,[A]:l??x,z:S,r:c??void 0,tip:!0},$,L={[A]:w??void 0,r:T??void 0};if(d!=null&&_!=null)throw new Error("cannot reduce both x and y");return _!=null?(L.y=_,$=Te(o)?mh:fo):d!=null?(L.x=d,$=Te(a)?ph:ho):(w!=null||T!=null)&&(o&&a?$=Te(o)&&Te(a)?Ux:Te(o)?ho:Te(a)?fo:fa:o?$=Te(o)?mh:fo:a&&($=Te(a)?ph:ho)),($===fa||$===fo)&&(k.x={value:o,...m}),($===fa||$===ho)&&(k.y={value:a,...b}),g===void 0&&(g=o&&!($===fa||$===fo)&&(R===Ea||R===bh||R===Rp||R===Lo)),y===void 0&&(y=a&&!($===fa||$===ho)&&(R===Ta||R===el||R===Ip||R===Cs)),{fx:u??null,fy:f??null,x:{value:h??null,reduce:d??null,zero:!!g,...m},y:{value:p??null,reduce:_??null,zero:!!y,...b},color:{value:v??null,reduce:w??null,...x!==void 0&&{color:x}},size:{value:E??null,reduce:T??null},mark:I,markImpl:_M[R],markOptions:k,transformImpl:_M[$],transformOptions:L,colorMode:A}}function Tht(e,t){const n=$6(e,t),{fx:i,fy:r,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:c}=n,u=lb[n.markImpl],f=lb[n.transformImpl],h=i!=null||r!=null?_E({strokeOpacity:.1}):null,d=[s?Cs([0]):null,o?Lo([0]):null],g=u(e,f?f(l,a):a);return c==="stroke"?ir(h,d,g):ir(h,g,d)}function Zu(e){let t,n;for(const i of e){if(i==null)continue;if(t===void 0){t=i;continue}const r=Math.sign(xe(t,i));if(r){if(n!==void 0&&r!==n)return!1;t=i,n=r}}return!0}function Sht({x:e,y:t,color:n,size:i,fx:r,fy:s,mark:o}={}){return fr(e)||(e=$l(e)),fr(t)||(t=$l(t)),fr(n)||(n=ad(n)?{color:n}:$l(n)),fr(i)||(i=$l(i)),fr(r)&&({value:r}=$l(r)),fr(s)&&({value:s}=$l(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:e,y:t,color:n,size:i,fx:r,fy:s,mark:o}}function _g(e,t){const n=Wt(e,t.value);return n&&(n.label=Ds(t.value)),n}function $l(e){return Cht(e)?{reduce:e}:{value:e}}function yg(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function mM(e){return/^(?:first|last|mode)$/i.test(e)}function Cht(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&Li(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function pM(e){return e?new Ch(e).size>e.length>>1:!1}const lb={dot:zs,line:LE,lineX:wh,lineY:Yc,areaX:bh,areaY:el,ruleX:Cs,ruleY:Lo,barX:Ea,barY:Ta,rect:OE,rectX:Rp,rectY:Ip,cell:Ql,bin:fa,binX:fo,binY:ho,group:Ux,groupX:mh,groupY:ph},_M=Object.fromEntries(Object.entries(lb).map(([e,t])=>[t,e]));function kE(e,t={}){let{x:n,x1:i,x2:r}=t;n===void 0&&i===void 0&&r===void 0&&(t={...t,x:n=St});const s={};return n!=null&&(s.x=e),i!=null&&(s.x1=e),r!=null&&(s.x2=e),As(s,t)}function $E(e,t={}){let{y:n,y1:i,y2:r}=t;n===void 0&&i===void 0&&r===void 0&&(t={...t,y:n=St});const s={};return n!=null&&(s.y=e),i!=null&&(s.y1=e),r!=null&&(s.y2=e),As(s,t)}function As(e={},t={}){const n=Go(t),i=Object.entries(e).map(([r,s])=>{const o=wD(r,t);if(o==null)throw new Error(`missing channel: ${r}`);const[a,l]=Zn(o);return{key:r,input:o,output:a,setOutput:l,map:Aht(s)}});return{...Wr(t,(r,s)=>{const o=Wt(r,n),a=i.map(({input:c})=>Wt(r,c)),l=i.map(({setOutput:c})=>c(new Array(r.length)));for(const c of s)for(const u of o?Is(c,f=>o[f]).values():[c])i.forEach(({map:f},h)=>f.mapIndex(u,a[h],l[h]));return{data:r,facets:s}}),...Object.fromEntries(i.map(({key:r,output:s})=>[r,s]))}}function Aht(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&Li(e))return Mht(e);if(typeof e=="function")return t1(Nx(e));switch(`${e}`.toLowerCase()){case"cumsum":return Iht;case"rank":return t1((t,n)=>zI(t,i=>n[i]));case"quantile":return t1((t,n)=>Rht(t,i=>n[i]))}throw new Error(`invalid map: ${e}`)}function Mht(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function Rht(e,t){const n=r0(e,t)-1;return zI(e,t).map(i=>i/n)}function t1(e){return{mapIndex(t,n,i){const r=e(t,n);if(r.length!==t.length)throw new Error("map function returned a mismatched length");for(let s=0,o=t.length;s<o;++s)i[t[s]]=r[s]}}}const Iht={mapIndex(e,t,n){let i=0;for(const r of e)n[r]=i+=t[r]}};function Lht(e={},t){return arguments.length===1&&(t=e),kE(y_(e),t)}function cb(e={},t){return arguments.length===1&&(t=e),$E(y_(e),t)}function y_(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:i,anchor:r,strict:s}=e;if(r===void 0&&i!==void 0&&(r=kht(i),_s(`Warning: the shift option is deprecated; please use anchor "${r}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return $ht(n)(t,Oht(r,t),s)}function Oht(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function kht(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function $ht(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return vg(kx(e));switch(e.toLowerCase()){case"deviation":return vg(Sh);case"max":return bg((t,n)=>ze(t,i=>n[i]));case"mean":return Nht;case"median":return vg(jf);case"min":return bg((t,n)=>qe(t,i=>n[i]));case"mode":return bg((t,n)=>FI(t,i=>n[i]));case"sum":return N6;case"variance":return vg(Qb);case"difference":return Fht;case"ratio":return zht;case"first":return Wht;case"last":return Vht}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return bg(Nx(e))}function vg(e){return(t,n,i)=>i?{mapIndex(r,s,o){const a=c=>s[c]==null?NaN:+s[c];let l=0;for(let c=0;c<t-1;++c)isNaN(a(c))&&++l;for(let c=0,u=r.length-t+1;c<u;++c)isNaN(a(c+t-1))&&++l,o[r[c+n]]=l===0?e(Fa(r,c,c+t),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(r,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[r[l+n]]=e(Fa(r,0,l+t),a);for(let l=0,c=r.length-n;l<c;++l)o[r[l+n]]=e(Fa(r,l,l+t),a)}}}function bg(e){return(t,n,i)=>i?{mapIndex(r,s,o){let a=0;for(let l=0;l<t-1;++l)a+=xn(s[r[l]]);for(let l=0,c=r.length-t+1;l<c;++l)a+=xn(s[r[l+t-1]]),a===t&&(o[r[l+n]]=e(Fa(r,l,l+t),s)),a-=xn(s[r[l]])}}:{mapIndex(r,s,o){for(let a=-n;a<0;++a)o[r[a+n]]=e(Fa(r,0,a+t),s);for(let a=0,l=r.length-n;a<l;++a)o[r[a+n]]=e(Fa(r,a,a+t),s)}}}function N6(e,t,n){return n?{mapIndex(i,r,s){let o=0,a=0;for(let l=0;l<e-1;++l){const c=r[i[l]];c===null||isNaN(c)?++o:a+=+c}for(let l=0,c=i.length-e+1;l<c;++l){const u=r[i[l]],f=r[i[l+e-1]];f===null||isNaN(f)?++o:a+=+f,s[i[l+t]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(i,r,s){let o=0;const a=i.length;for(let l=0,c=Math.min(a,e-t-1);l<c;++l)o+=+r[i[l]]||0;for(let l=-t,c=a-t;l<c;++l)o+=+r[i[l+e-1]]||0,s[i[l+t]]=o,o-=+r[i[l]]||0}}}function Nht(e,t,n){if(n){const i=N6(e,t,n);return{mapIndex(r,s,o){i.mapIndex(r,s,o);for(let a=0,l=r.length-e+1;a<l;++a)o[r[a+t]]/=e}}}else return{mapIndex(i,r,s){let o=0,a=0;const l=i.length;for(let c=0,u=Math.min(l,e-t-1);c<u;++c){let f=r[i[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let c=-t,u=l-t;c<u;++c){let f=r[i[c+e-1]],h=r[i[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[i[c+t]]=o/a,h!==null&&!isNaN(h=+h)&&(o-=h,--a)}}}}function Dht(e,t,n,i){for(let r=n+i;n<r;++n){const s=e[t[n]];if(xn(s))return s}}function Pht(e,t,n,i){for(let r=n+i-1;r>=n;--r){const s=e[t[r]];if(xn(s))return s}}function D6(e,t,n,i){for(let r=n+i;n<r;++n){let s=e[t[n]];if(s!==null&&!isNaN(s=+s))return s}}function P6(e,t,n,i){for(let r=n+i-1;r>=n;--r){let s=e[t[r]];if(s!==null&&!isNaN(s=+s))return s}}function Fht(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o){const l=r[i[o]],c=r[i[o+e-1]];s[i[o+t]]=l===null||c===null?NaN:c-l}}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=P6(r,i,o,e)-D6(r,i,o,e)}}}function zht(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o){const l=r[i[o]],c=r[i[o+e-1]];s[i[o+t]]=l===null||c===null?NaN:c/l}}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=P6(r,i,o,e)/D6(r,i,o,e)}}}function Wht(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o)s[i[o+t]]=r[i[o]]}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=Dht(r,i,o,e)}}}function Vht(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o)s[i[o+t]]=r[i[o+e-1]]}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=Pht(r,i,o,e)}}}const ys={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function Hht(e,{x:t=St,y:n,k:i=ys.k,color:r=ys.color,opacity:s=ys.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...f}={}){return ir(Re(o)?null:bh(e,As({x1:za({k:-i,...f}),x2:za({k:i,...f})},{x1:t,x2:t,y:n,fill:o,fillOpacity:a,...f})),Re(l)?null:wh(e,As({x:za(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function Ght(e,{x:t,y:n=St,k:i=ys.k,color:r=ys.color,opacity:s=ys.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...f}={}){return ir(Re(o)?null:el(e,As({y1:za({k:-i,...f}),y2:za({k:i,...f})},{x:t,y1:n,y2:n,fill:o,fillOpacity:a,...f})),Re(l)?null:Yc(e,As({y:za(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function za({n:e=ys.n,k:t=0,strict:n=ys.strict,anchor:i=ys.anchor}={}){return y_({k:e,reduce:r=>s0(r)+t*(Sh(r)||0),strict:n,anchor:i})}const Bht={ariaLabel:"tick",fill:null,stroke:"currentColor"};class F6 extends he{constructor(t,n,i){super(t,n,i,Bht),vu(this,i)}render(t,n,i,r,s){return te("svg:g",s).call(ve,this,r,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(pe,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(He,this,i).call(gd,this,i,s)).node()}}class z6 extends F6{constructor(t,n={}){const{x:i,y:r,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=Gt(o),this.insetBottom=Gt(a)}_transform(t,n,{x:i}){t.call(fe,n,{x:i},Qe,0)}_x1(t,{x:n}){return i=>n[i]}_x2(t,{x:n}){return i=>n[i]}_y1({y:t},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&t?s=>n[s]+r:i+r}_y2({y:t},{y:n},{height:i,marginBottom:r}){const{insetBottom:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:i-r-s}}class W6 extends F6{constructor(t,n={}){const{x:i,y:r,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(t,{y:{value:r,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n),this.insetRight=Gt(o),this.insetLeft=Gt(a)}_transform(t,n,{y:i}){t.call(fe,n,{y:i},0,Qe)}_x1({x:t},{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n&&t?s=>n[s]+r:i+r}_x2({x:t},{x:n},{width:i,marginRight:r}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:i-r-s}_y1(t,{y:n}){return i=>n[i]}_y2(t,{y:n}){return i=>n[i]}}function V6(e,{x:t=St,...n}={}){return new z6(e,{...n,x:t})}function H6(e,{y:t=St,...n}={}){return new W6(e,{...n,y:t})}function Uht(e,{x:t=St,y:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?ph:Bx;return ir(Lo(e,u({x1:NE,x2:DE},{x:t,y:n,stroke:s,strokeOpacity:o,...c})),Ea(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:i,fillOpacity:r,...c})),V6(e,u({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),zs(e,As({x:G6},{x:t,y:n,z:n,stroke:s,strokeOpacity:o,...c})))}function Yht(e,{y:t=St,x:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?mh:Bx;return ir(Cs(e,u({y1:NE,y2:DE},{x:n,y:t,stroke:s,strokeOpacity:o,...c})),Ta(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:i,fillOpacity:r,...c})),H6(e,u({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),zs(e,As({y:G6},{x:n,y:t,z:n,stroke:s,strokeOpacity:o,...c})))}function G6(e){const t=NE(e),n=DE(e);return e.map(i=>i<t||i>n?i:NaN)}function NE(e){const t=B6(e)*2.5-U6(e)*1.5;return qe(e,n=>n>=t?n:NaN)}function DE(e){const t=U6(e)*2.5-B6(e)*1.5;return ze(e,n=>n<=t?n:NaN)}function B6(e){return To(e,.25)}function U6(e){return To(e,.75)}const jht={ariaLabel:"raster",stroke:null,pixelSize:1};function Nl(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function yM(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class Y6 extends he{constructor(t,n,i={},r){let{width:s,height:o,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:f=a==null?s:void 0,y2:h=l==null?o:void 0,pixelSize:d=r.pixelSize,blur:g=0,interpolate:m}=i;if(s!=null&&(s=yM(s,"width")),o!=null&&(o=yM(o,"height")),c!=null&&(c=Nl(c,"x1")),u!=null&&(u=Nl(u,"y1")),f!=null&&(f=Nl(f,"x2")),h!=null&&(h=Nl(h,"y2")),a==null&&(c==null||f==null))throw new Error("missing x");if(l==null&&(u==null||h==null))throw new Error("missing y");t!=null&&s!=null&&o!=null&&(a===void 0&&c!=null&&f!=null&&(a=ndt(c,f,s)),l===void 0&&u!=null&&h!=null&&(l=idt(u,h,s,o))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:h==null?null:[h],scale:"y",optional:!0,filter:null},...n},i,r),this.width=s,this.height=o,this.pixelSize=Nl(d,"pixelSize"),this.blur=Nl(g,"blur"),this.interpolate=a==null||l==null?null:qht(m)}}class j6 extends Y6{constructor(t,n={}){const{imageRendering:i}=n;if(t==null){const{fill:r,fillOpacity:s}=n;Le(s)[0]!==void 0&&(n=ub("fillOpacity",n)),Vn(r)[0]!==void 0&&(n=ub("fill",n))}super(t,void 0,n,jht),this.imageRendering=Ae(i,"auto")}scale(t,{color:n,...i},r){return super.scale(t,i,r)}render(t,n,i,r,s){var L;const o=n[(L=i.channels.fill)==null?void 0:L.scale]??(N=>N),{x:a,y:l}=i,{document:c}=s,[u,f,h,d]=q6(i,r,s),g=h-u,m=d-f,{pixelSize:p,width:_=Math.round(Math.abs(g)/p),height:y=Math.round(Math.abs(m)/p)}=this,b=_*y;let{fill:v,fillOpacity:x}=i,w=0;if(this.interpolate){const N=_/g,D=y/m,V=de(a,B=>(B-u)*N,Float64Array),Y=de(l,B=>(B-f)*D,Float64Array);v&&(v=this.interpolate(t,_,y,V,Y,v)),x&&(x=this.interpolate(t,_,y,V,Y,x))}else this.data==null&&t&&(w=t.fi*b);const E=c.createElement("canvas");E.width=_,E.height=y;const T=E.getContext("2d"),I=T.createImageData(_,y),S=I.data;let{r:A,g:R,b:k}=Or(this.fill)??{r:0,g:0,b:0},$=(this.fillOpacity??1)*255;for(let N=0;N<b;++N){const D=N<<2;if(v){const V=o(v[N+w]);if(V==null){S[D+3]=0;continue}({r:A,g:R,b:k}=Or(V))}x&&($=x[N+w]*255),S[D+0]=A,S[D+1]=R,S[D+2]=k,S[D+3]=$}return this.blur>0&&b9(I,this.blur),T.putImageData(I,0,0),te("svg:g",s).call(ve,this,r,s).call(fe,this,n).call(N=>N.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(h-u)},${Math.sign(d-f)})`).attr("width",Math.abs(g)).attr("height",Math.abs(m)).attr("preserveAspectRatio","none").call(bt,"image-rendering",this.imageRendering).call(pe,this).attr("xlink:href",E.toDataURL())).node()}}function X6(e,t,n){arguments.length<3&&(n=t,t=null);let{x:i,y:r,[e]:s,...o}=n;return i===void 0&&r===void 0&&ylt(t)&&(i=sd,r=dh,s===void 0&&(s=dlt)),[t,{...o,x:i,y:r,[e]:s}]}function Xht(){const[e,t]=X6("fill",...arguments);return new j6(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:St})}function q6({x1:e,y1:t,x2:n,y2:i},r,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f}=r;return[e&&s==null?e[0]:f,t&&s==null?t[0]:l,n&&s==null?n[0]:o-c,i&&s==null?i[0]:a-u]}function K6({x1:e,y1:t,x2:n,y2:i},r,s,o){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),i&&(a.y2=i),q6(Jx(a,r),s,o)}function ub(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return Gn({...t,[e]:void 0},function(i,r,s,o,a,l){const{x:c,y:u}=o;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,h,d,g]=K6(s,o,a,l),m=d-f,p=g-h,{pixelSize:_}=this,{width:y=Math.round(Math.abs(m)/_),height:b=Math.round(Math.abs(p)/_)}=t,v=new Array(y*b*(r?r.length:1)),x=m/y,w=p/b;let E=0;for(const T of r??[void 0])for(let I=.5;I<b;++I)for(let S=.5;S<y;++S,++E)v[E]=n(c.invert(f+S*x),u.invert(h+I*w),T);return{data:v,facets:r,channels:{[e]:{value:v,scale:"auto"}}}})}function qht(e){if(typeof e=="function")return e;if(e==null)return fb;switch(`${e}`.toLowerCase()){case"none":return fb;case"nearest":return J6;case"barycentric":return Z6();case"random-walk":return Q6()}throw new Error(`invalid interpolate: ${e}`)}function fb(e,t,n,i,r,s){const o=new Array(t*n);for(const a of e)i[a]<0||i[a]>=t||r[a]<0||r[a]>=n||(o[Math.floor(r[a])*t+Math.floor(i[a])]=s[a]);return o}function Z6({random:e=Ew(42)}={}){return(t,n,i,r,s,o)=>{const{points:a,triangles:l,hull:c}=Po.from(t,d=>r[d],d=>s[d]),u=new o.constructor(n*i).fill(NaN),f=new Uint8Array(n*i),h=edt(o,e);for(let d=0;d<l.length;d+=3){const g=l[d],m=l[d+1],p=l[d+2],_=a[2*g],y=a[2*m],b=a[2*p],v=a[2*g+1],x=a[2*m+1],w=a[2*p+1],E=Math.min(_,y,b),T=Math.max(_,y,b),I=Math.min(v,x,w),S=Math.max(v,x,w),A=(x-w)*(_-b)+(v-w)*(b-y);if(!A)continue;const R=o[t[g]],k=o[t[m]],$=o[t[p]];for(let L=Math.floor(E);L<T;++L)for(let N=Math.floor(I);N<S;++N){if(L<0||L>=n||N<0||N>=i)continue;const D=L+.5,V=N+.5,Y=((x-w)*(D-b)+(V-w)*(b-y))/A;if(Y<0)continue;const B=((w-v)*(D-b)+(V-w)*(_-b))/A;if(B<0)continue;const q=1-Y-B;if(q<0)continue;const z=L+n*N;u[z]=h(R,Y,k,B,$,q,L,N),f[z]=1}}return Kht(u,f,r,s,o,n,i,c,t,h),u}}function Kht(e,t,n,i,r,s,o,a,l,c){n=Float64Array.from(a,d=>n[l[d]]),i=Float64Array.from(a,d=>i[l[d]]),r=Array.from(a,d=>r[l[d]]);const u=n.length,f=Array.from({length:u},(d,g)=>Jht(g,n,i));let h=0;for(let d=0;d<o;++d){const g=d+.5;for(let m=0;m<s;++m){const p=m+s*d;if(!t[p]){const _=m+.5;for(let y=0;y<u;++y){const b=(u+h+(y%2?(y+1)/2:-y/2))%u;if(f[b](_,g)){const v=Zht(n.at(b-1),i.at(b-1),n[b],i[b],_,g);e[p]=c(r.at(b-1),v,r[b],1-v,r[b],0,m,d),h=b;break}}}}}}function Zht(e,t,n,i,r,s){const o=n-e,a=i-t,l=o*(n-r)+a*(i-s),c=o*(r-e)+a*(s-t);return l>0&&c>0?l/(l+c):+(l>c)}function Ju(e,t,n,i){return e*i-n*t}function Jht(e,t,n){const i=t.length,r=t.at(e-2),s=n.at(e-2),o=t.at(e-1),a=n.at(e-1),l=t[e],c=n[e],u=t.at(e+1-i),f=n.at(e+1-i),h=o-l,d=a-c,g=r-o,m=s-a,p=l-u,_=c-f,y=Math.hypot(h,d),b=Math.hypot(g,m),v=Math.hypot(p,_);return(x,w)=>{const E=x-o,T=w-a,I=x-l,S=w-c;return Ju(E,T,I,S)>-1e-6&&Ju(E,T,h,d)*b-Ju(E,T,g,m)*y>-1e-6&&Ju(I,S,p,_)*y-Ju(I,S,h,d)*v<=0}}function J6(e,t,n,i,r,s){const o=new s.constructor(t*n),a=Po.from(e,u=>i[u],u=>r[u]);let l,c;for(let u=.5,f=0;u<n;++u){c=l;for(let h=.5;h<t;++h,++f)c=a.find(h,u,c),h===.5&&(l=c),o[f]=s[e[c]]}return o}function Q6({random:e=Ew(42),minDistance:t=.5,maxSteps:n=2}={}){return(i,r,s,o,a,l)=>{const c=new l.constructor(r*s),u=Po.from(i,g=>o[g],g=>a[g]);let f,h,d;for(let g=.5,m=0;g<s;++g){h=f;for(let p=.5;p<r;++p,++m){let _=p,y=g;d=h=u.find(_,y,h),p===.5&&(f=h);let b,v=0;for(;(b=Math.hypot(o[i[d]]-_,a[i[d]]-y))>t&&v<n;){const x=e(p,g,v)*2*Math.PI;_+=Math.cos(x)*b,y+=Math.sin(x)*b,d=u.find(_,y,d),++v}c[m]=l[i[d]]}}return c}}function Qht(e,t,n,i,r,s){return t*e+i*n+s*r}function tdt(e){return(t,n,i,r,s,o,a,l)=>{const c=e(a,l);return c<n?t:c<n+r?i:s}}function edt(e,t){return Jl(e)||An(e)?Qht:tdt(t)}function ndt(e,t,n){return{transform(i){const r=i.length,s=new Float64Array(r),o=(t-e)/n,a=e+o/2;for(let l=0;l<r;++l)s[l]=l%n*o+a;return s}}}function idt(e,t,n,i){return{transform(r){const s=r.length,o=new Float64Array(s),a=(t-e)/i,l=e+a/2;for(let c=0;c<s;++c)o[c]=Math.floor(c/n)%i*a+l;return o}}}const vM={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class t5 extends Y6{constructor(t,{smooth:n=!0,value:i,...r}={}){const s=DD({},r,vM);if(i===void 0){for(const a in s)if(s[a].value!=null){if(i!==void 0)throw new Error("ambiguous contour value");i=r[a],r[a]="value"}}if(i!=null){const a={transform:l=>l.map(c=>c.value),label:Ds(i)};for(const l in s)r[l]==="value"&&(r[l]=a)}if(t==null){if(i==null)throw new Error("missing contour value");r=ub("value",{value:i,...r}),i=null}else{let{interpolate:a}=r;i===void 0&&(i=St),a===void 0&&(r.interpolate="nearest")}super(t,{value:{value:i,optional:!0}},rdt(r),vM);const o={geometry:{value:St}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(t,{x:n,y:i,value:r,...s},o){return super.filter(t,s,o)}render(t,n,i,r,s){const{geometry:o}=i,a=zo();return te("svg:g",s).call(ve,this,r,s).call(fe,this,n).call(l=>{l.selectAll().data(t).enter().append("path").call(pe,this).attr("d",c=>a(o[c])).call(He,this,i)}).node()}}function rdt({thresholds:e,interval:t,...n}){return e=_6(e,t,iw),Gn(n,function(i,r,s,o,a,l){const[c,u,f,h]=K6(s,o,a,l),d=f-c,g=h-u,{pixelSize:m,width:p=Math.round(Math.abs(d)/m),height:_=Math.round(Math.abs(g)/m)}=this,y=p/d,b=_/g,v=s.value.value,x=[];if(this.interpolate){const{x:S,y:A}=i_(s,o,l),R=de(S,N=>(N-c)*y,Float64Array),k=de(A,N=>(N-u)*b,Float64Array),$=[s.x,s.y,s.value],L=[R,k,v];for(const N of r){const D=this.filter(N,$,L);x.push(this.interpolate(D,p,_,R,k,v))}}else if(r){const S=p*_,A=r.length;for(let R=0;R<A;++R)x.push(v.slice(R*S,R*S+S))}else x.push(v);if(this.blur>0)for(const S of x)MI({data:S,width:p,height:_},this.blur);const w=sdt(e,v,...adt(x));if(w===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:E}=J1().size([p,_]).smooth(this.smooth),T=[],I=[];for(const S of x)I.push(_i(T.length,T.push(...de(w,A=>E(S,A)))));for(const{coordinates:S}of T)for(const A of S)for(const R of A)for(const k of R)k[0]=k[0]/y+c,k[1]=k[1]/b+u;return{data:T,facets:I,channels:LD(this.contourChannels,T)}})}function sdt(e,t,n,i){if(typeof(e==null?void 0:e.range)=="function")return e.range(e.floor(n),i);if(typeof e=="function"&&(e=e(t,n,i)),typeof e!="number")return Hn(e);const r=Eo(...$I(n,i,e),e);for(;r[r.length-1]>=i;)r.pop();for(;r[1]<n;)r.shift();return r}function odt(){return new t5(...X6("value",...arguments))}function adt(e){return[qe(e,t=>qe(t,bM)),ze(e,t=>ze(t,bM))]}function bM(e){return isFinite(e)?e:NaN}function ldt(e,t){return PE(cE,e,t)}function cdt(e,t={}){return PE(vh,e,t)}function udt(e,t={}){return PE(uE,e,t)}function PE(e,t,n={}){const{x:i,y:r,maxRadius:s}=n,o=e({px:i,py:r,maxRadius:s}),a=[];i!=null&&a.push(Cs(t,wM("x",{...o,inset:-6},n))),r!=null&&a.push(Lo(t,wM("y",{...o,inset:-6},n))),i!=null&&a.push(Gc(t,xM("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),r!=null&&a.push(Gc(t,xM("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return ir(...a)}function e5(e,{channels:t,...n},{facet:i,facetAnchor:r,fx:s,fy:o,[e]:a,channels:l,transform:c,initializer:u}){return{...n,facet:i,facetAnchor:r,fx:s,fy:o,[e]:a,channels:{...t,...l},transform:c,initializer:fdt(e,u)}}function fdt(e,t){return t==null?t:function(n,i,{x:r,y:s,px:o,py:a,...l},...c){const{channels:{x:u,y:f,...h}={},...d}=t.call(this,n,i,{...l,x:o,y:a},...c);return{channels:{...h,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...d}}}function wM(e,t,n){const{color:i="currentColor",opacity:r=.2,ruleStroke:s=i,ruleStrokeOpacity:o=r,ruleStrokeWidth:a}=n;return{...e5(e,t,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function xM(e,t,n){const{color:i="currentColor",textFill:r=i,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...e5(e,t,hdt(e,n)),fill:r,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function hdt(e,t){return Gn(t,(n,i,r)=>{var s;return{channels:{text:{value:(s=eb(r,e))==null?void 0:s.value}}}})}const ddt={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},gdt={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},mdt={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},pdt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},_dt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class ydt extends he{constructor(t,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,ddt),this.curve=vE(o,a),vu(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,{curve:f}=this,[h,d]=Vr(this,r),g=l?y=>l[y]:ni(h),m=c?y=>c[y]:ni(d),p=this;function _(y){let b=-1;const v=[],x={};for(const $ in i)x[$]=[];const w=[],E=[],T=[],I=[];function S($,L){$=y[$],L=y[L],v.push(++b),w[b]=g($),T[b]=m($),E[b]=g(L),I[b]=m(L);for(const N in i)x[N].push(i[N][L])}const{halfedges:A,hull:R,triangles:k}=Po.from(y,g,m);for(let $=0;$<A.length;++$){const L=A[$];L>$&&S(k[$],k[L])}for(let $=0;$<R.length;++$)S(R[$],R[($+1)%R.length]);Ei(this).selectAll().data(v).enter().append("path").call(pe,p).attr("d",$=>{const L=os(),N=f(L);return N.lineStart(),N.point(w[$],T[$]),N.point(E[$],I[$]),N.lineEnd(),L}).call(He,p,x).call(gd,p,x,s)}return te("svg:g",s).call(ve,this,r,s).call(fe,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Is(t,b=>u[b]).values()).enter().append("g").each(_):y=>y.datum(t).each(_)).node()}}class FE extends he{constructor(t,n={},i,r=({z:s})=>s){const{x:s,y:o}=n;super(t,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:r(n),optional:!0}},n,i)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[f,h]=Vr(this,r),d=l?_=>l[_]:ni(f),g=c?_=>c[_]:ni(h),m=this;function p(_){const y=Po.from(_,d,g);Ei(this).append("path").datum(_[0]).call(pe,m).attr("d",m._render(y,r)).call(He,m,i)}return te("svg:g",s).call(ve,this,r,s).call(fe,this,{x:l&&o,y:c&&a}).call(u?_=>_.selectAll().data(Is(t,y=>u[y]).values()).enter().append("g").each(p):_=>_.datum(t).each(p)).node()}}class vdt extends FE{constructor(t,n={}){super(t,n,gdt),this.fill="none"}_render(t){return t.render()}}class bdt extends FE{constructor(t,n={}){super(t,n,mdt,Go)}_render(t){return t.renderHull()}}class wdt extends he{constructor(t,n={}){const{x:i,y:r,z:s}=n;super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,pdt)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[f,h]=Vr(this,r),d=l?_=>l[_]:ni(f),g=c?_=>c[_]:ni(h),m=this;function p(_){const y=Po.from(_,d,g),b=n5(y,r);Ei(this).selectAll().data(_).enter().append("path").call(pe,m).attr("d",(v,x)=>b.renderCell(x)).call(He,m,i)}return te("svg:g",s).call(ve,this,r,s).call(fe,this,{x:l&&o,y:c&&a}).call(u?_=>_.selectAll().data(Is(t,y=>u[y]).values()).enter().append("g").each(p):_=>_.datum(t).each(p)).node()}}class xdt extends FE{constructor(t,n){super(t,n,_dt),this.fill="none"}_render(t,n){return n5(t,n).render()}}function n5(e,t){const{width:n,height:i,marginTop:r,marginRight:s,marginBottom:o,marginLeft:a}=t;return e.voronoi([a,r,n-s,i-o])}function _d(e,t,{x:n,y:i,...r}={}){return[n,i]=or(n,i),new e(t,{...r,x:n,y:i})}function Edt(e,t){return _d(ydt,e,t)}function Tdt(e,t){return _d(vdt,e,t)}function Sdt(e,t){return _d(bdt,e,t)}function Cdt(e,t){return _d(wdt,e,t)}function Adt(e,t){return _d(xdt,e,t)}const Mdt={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class i5 extends he{constructor(t,{x:n,y:i,z:r,weight:s,fill:o,stroke:a,...l}={}){const c=EM(o)&&(o="currentColor",!0),u=EM(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:Go({z:r,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},Ldt({...l,fill:o,stroke:a},c,u),Mdt),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=r}filter(t){return t}render(t,n,i,r,s){const{contours:o}=i,a=zo();return te("svg:g",s).call(ve,this,r,s).call(fe,this,{}).call(l=>l.selectAll().data(t).enter().append("path").call(pe,this).call(He,this,i).attr("d",c=>a(o[c]))).node()}}function Rdt(e,{x:t,y:n,...i}={}){return[t,n]=or(t,n),new i5(e,{...i,x:t,y:n})}const Idt=new Set(["x","y","z","weight"]);function Ldt(e,t,n){let{bandwidth:r,thresholds:s}=e;return r=r===void 0?20:+r,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?Pn(s):+s,Gn(e,function(o,a,l,c,u,f){var k;const h=l.weight?Pn(l.weight.value):null,d=(k=l.z)==null?void 0:k.value,{z:g}=this,[m,p]=Vr(this,u),{width:_,height:y}=u,{x:b,y:v}=i_(l,c,f),x=Object.fromEntries(Object.entries(l).filter(([$])=>!Idt.has($)).map(([$,L])=>[$,{...L,value:[]}])),w=t&&[],E=n&&[],T=PH().x(b?$=>b[$]:m).y(v?$=>v[$]:p).weight(h?$=>h[$]:1).size([_,y]).bandwidth(r),I=[];for(const $ of a){const L=[];I.push(L);for(const N of d?tE($,d,g):[$]){const D=T.contours(N);L.push([N,D])}}let S=s;if(!(S instanceof Wc)){let $=0;for(const L of I)for(const[,N]of L){const D=N.max;D>$&&($=D)}S=Float64Array.from({length:s-1},(L,N)=>$*100*(N+1)/s)}const A=[],R=[];for(const $ of I){const L=[];A.push(L);for(const[N,D]of $)for(const V of S){L.push(R.length),R.push(D(V/100)),w&&w.push(V),E&&E.push(V);for(const Y in x)x[Y].value.push(l[Y].value[N[0]])}}return w&&w.push(0),E&&E.push(0),{data:o,facets:A,channels:{...x,...w&&{fill:{value:w,scale:"color"}},...E&&{stroke:{value:E,scale:"color"}},contours:{value:R}}}})}function EM(e){return/^density$/i.test(e)}const Odt={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class r5 extends he{constructor(t,n={}){const[i,r]=Le(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:i,scale:"r",filter:ps,optional:!0}},IE(n),Odt),this.r=r}render(t,n,i,r,s){const{geometry:o,r:a}=i,l=zo(s.projection??kdt(n)),{r:c}=this;return X0(c)?t=[]:c!==void 0&&l.pointRadius(c),te("svg:g",s).call(ve,this,r,s).call(fe,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(pe,this).attr("d",a?f=>l.pointRadius(a[f])(o[f]):f=>l(o[f])).call(He,this,i)}).node()}}function kdt({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),Lm({point(n,i){this.stream.point(e(n),t(i))}})}function zE(e,{geometry:t=St,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new r5(e,{geometry:t,...n})}function $dt({strokeWidth:e=1.5,...t}={}){return zE({type:"Sphere"},{strokeWidth:e,...t})}function Ndt({strokeOpacity:e=.1,...t}={}){return zE(OG(),{strokeOpacity:e,...t})}const Lf=.5,Of=0;function Ddt(e={fill:"count"},{binWidth:t,...n}={}){const{z:i}=n;return t=t===void 0?20:Gt(t),e=Yx(e,n),yo(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!yo(e,"r")&&(n.r=t/2),Gn(n,(r,s,o,a,l,c)=>{let{x:u,y:f,z:h,fill:d,stroke:g,symbol:m}=o;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=i_(o,a,c)),h=h?h.value:Wt(r,i),d=d==null?void 0:d.value,g=g==null?void 0:g.value,m=m==null?void 0:m.value;const p=qx(e,{z:h,fill:d,stroke:g,symbol:m}),_=h&&[],y=d&&[],b=g&&[],v=m&&[],x=[],w=[],E=[];let T=-1;for(const R of e)R.initialize(r);for(const R of s){const k=[];for(const $ of e)$.scope("facet",R);for(const[$,L]of dc(R,p))for(const N of Pdt(L,u,f,t)){k.push(++T),w.push(N.x),E.push(N.y),h&&_.push(p===h?$:h[N[0]]),d&&y.push(p===d?$:d[N[0]]),g&&b.push(p===g?$:g[N[0]]),m&&v.push(p===m?$:m[N[0]]);for(const D of e)D.reduce(N)}x.push(k)}const I=o.x.scale,S=o.y.scale,A={x:{value:w,source:a[I]?{value:de(w,a[I].invert),scale:I}:null},y:{value:E,source:a[S]?{value:de(E,a[S].invert),scale:S}:null},...h&&{z:{value:_}},...d&&{fill:{value:y,scale:"auto"}},...g&&{stroke:{value:b,scale:"auto"}},...m&&{symbol:{value:v,scale:"auto"}},...Object.fromEntries(e.map(({name:R,output:k})=>[R,{scale:"auto",label:k.label,radius:R==="r"?t/2:void 0,value:k.transform()}]))};return{data:r,facets:x,channels:A}})}function Pdt(e,t,n,i){const r=i*(1.5/CD),s=new Map;for(const o of e){let a=t[o],l=n[o];if(isNaN(a)||isNaN(l))continue;let c=Math.round(l=(l-Of)/r),u=Math.round(a=(a-Lf)/i-(c&1)/2),f=l-c;if(Math.abs(f)*3>1){let g=a-u,m=u+(a<u?-1:1)/2,p=c+(l<c?-1:1),_=a-m,y=l-p;g*g+f*f>_*_+y*y&&(u=m+(c&1?1:-1)/2,c=p)}const h=`${u},${c}`;let d=s.get(h);d===void 0&&(s.set(h,d=[]),d.x=(u+(c&1)/2)*i+Lf,d.y=c*r+Of),d.push(o)}return s.values()}const Fdt={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function zdt(e){return new s5(e)}class s5 extends he{constructor({binWidth:t=20,clip:n=!0,...i}={}){super(If,void 0,{clip:n,...i},Fdt),this.binWidth=Gt(t)}render(t,n,i,r,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:f,height:h}=r,d=u-Lf,g=f-l-Lf,m=a-Of,p=h-c-Of,_=o/2,y=_*AD,b=y/2,v=_*2,x=y*1.5,w=Math.floor(d/v),E=Math.ceil(g/v),T=Math.floor((m+b)/x),I=Math.ceil((p-b)/x)+1,S=`m0,${Js(-y)}l${Js(_)},${Js(b)}v${Js(y)}l${Js(-_)},${Js(b)}`;let A=S;for(let R=T;R<I;++R)for(let k=w;k<E;++k)A+=`M${Js(k*v+(R&1)*_)},${Js(R*x)}${S}`;return te("svg:g",s).datum(0).call(ve,this,r,s).call(fe,this,{},Qe+Lf,Qe+Of).call(R=>R.append("path").call(pe,this).call(He,this,i).attr("d",A)).node()}}function Js(e){return Math.round(e*1e3)/1e3}const Wdt={ariaLabel:"image",fill:null,stroke:null};function Vdt(e){return/^\.*\//.test(e)}function Hdt(e){return/^(blob|data|file|http|https):/i.test(e)}function Gdt(e){return typeof e=="string"&&(Vdt(e)||Hdt(e))?[void 0,e]:[e,void 0]}let o5=class extends he{constructor(t,n={}){let{x:i,y:r,r:s,width:o,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:h,imageRendering:d}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[g,m]=Gdt(c),[p,_]=Le(s),[y,b]=Le(o,_!==void 0?_*2:void 0),[v,x]=Le(a,_!==void 0?_*2:void 0),[w,E]=Le(l,0);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:p,scale:"r",filter:ps,optional:!0},width:{value:y,filter:ps,optional:!0},height:{value:v,filter:ps,optional:!0},rotate:{value:w,optional:!0},src:{value:g,optional:!0}},IE(n),Wdt),this.src=m,this.width=b,this.rotate=E,this.height=x,this.r=_,this.preserveAspectRatio=Ae(u,"xMidYMid"),this.crossOrigin=ln(f),this.frameAnchor=ld(h),this.imageRendering=Ae(d,"auto")}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,width:u,height:f,r:h,rotate:d,src:g}=i,{r:m,width:p,height:_,rotate:y}=this,[b,v]=Vr(this,r);return te("svg:g",s).call(ve,this,r,s).call(fe,this,{x:l&&o,y:c&&a}).call(x=>x.selectAll().data(t).enter().append("image").call(pe,this).attr("x",TM(l,u,h,b,p,m)).attr("y",TM(c,f,h,v,_,m)).attr("width",u?w=>u[w]:p!==void 0?p:h?w=>h[w]*2:m*2).attr("height",f?w=>f[w]:_!==void 0?_:h?w=>h[w]*2:m*2).attr("transform",d?w=>`rotate(${d[w]})`:y?`rotate(${y})`:null).attr("transform-origin",d||y?l_`${l?w=>l[w]:b}px ${c?w=>c[w]:v}px`:null).call(bt,"href",g?w=>g[w]:this.src).call(bt,"preserveAspectRatio",this.preserveAspectRatio).call(bt,"crossorigin",this.crossOrigin).call(bt,"image-rendering",this.imageRendering).call(bt,"clip-path",h?w=>`circle(${h[w]}px)`:m!==void 0?`circle(${m}px)`:null).call(He,this,i)).node()}};function TM(e,t,n,i,r,s){return t&&e?o=>e[o]-t[o]/2:t?o=>i-t[o]/2:e&&r!==void 0?o=>e[o]-r/2:r!==void 0?i-r/2:n&&e?o=>e[o]-n[o]:n?o=>i-n[o]:e?o=>e[o]-s:i-s}function Bdt(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=or(t,n)),new o5(e,{...i,x:t,y:n})}function Udt(e,t,n){var i=1e-8,r=t-1,s=n-1,o=0,a,l,c,u,f,h,d,g,m,p,_;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),d=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(d=-d),g=(d*d-3)/6,m=2/(1/(2*t-1)+1/(2*n-1)),p=d*Math.sqrt(g+m)/m-(1/(2*n-1)-1/(2*t-1))*(g+5/6-2/(3*m)),d=t/(t+n*Math.exp(2*p))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,p=u+f,e<u/p?d=Math.pow(t*p*e,1/t):d=1-Math.pow(n*p*(1-e),1/n)),_=-mc(t)-mc(n)+mc(t+n);o<10;o++){if(d===0||d===1)return d;if(h=Ydt(d,t,n)-e,u=Math.exp(r*Math.log(d)+s*Math.log(1-d)+_),f=h/u,d-=u=f/(1-.5*Math.min(1,f*(r/d-s/(1-d)))),d<=0&&(d=.5*(d+u)),d>=1&&(d=.5*(d+u+1)),Math.abs(u)<i*d&&o>0)break}return d}function Ydt(e,t,n){var i=e===0||e===1?0:Math.exp(mc(t+n)-mc(t)-mc(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?i*SM(e,t,n)/t:1-i*SM(1-e,n,t)/n}function SM(e,t,n){var i=1e-30,r=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,h,d;for(Math.abs(c)<i&&(c=i),c=1/c,d=c;r<=100&&(u=2*r,f=r*(n-r)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<i&&(c=i),l=1+f/l,Math.abs(l)<i&&(l=i),c=1/c,d*=c*l,f=-(t+r)*(s+r)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<i&&(c=i),l=1+f/l,Math.abs(l)<i&&(l=i),c=1/c,h=c*l,d*=h,!(Math.abs(h-1)<3e-7));r++);return d}function mc(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],i=1.000000000190015,r,s,o;for(o=(s=r=e)+5.5,o-=(r+.5)*Math.log(o);t<6;t++)i+=n[t]/++s;return Math.log(2.506628274631*i/r)-o}function jdt(e,t){var n=Udt(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const Xdt={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class a5 extends he{constructor(t,n={}){const{x:i,y:r,z:s,ci:o=.95,precision:a=4}=n;if(super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:Go(n),optional:!0}},n,Xdt),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,i,r,s){const{x:o,y:a,z:l}=i,{ci:c}=this;return te("svg:g",s).call(ve,this,r,s).call(fe,this,n).call(u=>u.selectAll().data(l?tE(t,l,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(pe,this).call(Ep,this,{...i,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,o,a)).call(c&&!Vc(this.fill)?h=>h.select(qdt).attr("stroke","none").call(pe,this).call(Ep,this,{...i,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,o,a)):()=>{}))).node()}}function qdt(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Ba.svg,"path"),this)}class Kdt extends a5{constructor(t,n){super(t,n)}_renderBand(t,n,i){const{ci:r,precision:s}=this,[o,a]=be(t,u=>i[u]),l=Lp(t,i,n),c=l5(t,i,n,(1-r)/2,l);return Ic().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(_i(o,a-s/2,s).concat(a))}_renderLine(t,n,i){const[r,s]=be(t,a=>i[a]),o=Lp(t,i,n);return`M${o(r)},${r}L${o(s)},${s}`}}class Zdt extends a5{constructor(t,n){super(t,n)}_renderBand(t,n,i){const{ci:r,precision:s}=this,[o,a]=be(t,u=>n[u]),l=Lp(t,n,i),c=l5(t,n,i,(1-r)/2,l);return Ic().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(_i(o,a-s/2,s).concat(a))}_renderLine(t,n,i){const[r,s]=be(t,a=>n[a]),o=Lp(t,n,i);return`M${r},${o(r)}L${s},${o(s)}`}}function Jdt(e,{y:t=Bn,x:n=St,stroke:i,fill:r=Re(i)?"currentColor":i,...s}={}){return new Kdt(e,wE({...s,x:n,y:t,fill:r,stroke:i}))}function Qdt(e,{x:t=Bn,y:n=St,stroke:i,fill:r=Re(i)?"currentColor":i,...s}={}){return new Zdt(e,bE({...s,x:t,y:n,fill:r,stroke:i}))}function Lp(e,t,n){let i=0,r=0,s=0,o=0;for(const u of e){const f=t[u],h=n[u];i+=f,r+=h,s+=f*h,o+=f*f}const a=e.length,l=(a*s-i*r)/(a*o-i*i),c=(r-l*i)/a;return u=>l*u+c}function l5(e,t,n,i,r){const s=Lr(e,u=>t[u])/e.length;let o=0,a=0;for(const u of e)o+=(t[u]-s)**2,a+=(n[u]-r(t[u]))**2;const l=Math.sqrt(a/(e.length-2)),c=jdt(i,e.length-2);return(u,f)=>{const h=r(u),d=l*Math.sqrt(1/e.length+(u-s)**2/o);return h+f*c*d}}function hb({path:e=St,delimiter:t,frameAnchor:n,treeLayout:i=Nm,treeSort:r,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=WE(o),r=u5(r),a!=null&&(a=gb(a)),n===void 0&&(n=o.frameAnchor);const c=f5(t),u=y5(l,gb),[f,h]=Zn(),[d,g]=Zn();return{x:f,y:d,frameAnchor:n,...Wr(l,(m,p)=>{const _=c(Wt(m,e)),y=h([]),b=g([]);let v=-1;const x=[],w=[],E=dO().path(I=>_[I]),T=i();T.nodeSize&&T.nodeSize([1,1]),T.separation&&s!==void 0&&T.separation(s??Ox);for(const I of u)I[Op]=I[p5]([]);for(const I of p){const S=[],A=E(I.filter(R=>_[R]!=null)).each(R=>R.data=m[R.data]);r!=null&&A.sort(r),T(A);for(const R of A.descendants())if(!(a!=null&&!a(R))){S.push(++v),x[v]=R.data,o.position(R,v,y,b);for(const k of u)k[Op][v]=k[_5](R)}w.push(S)}return{data:x,facets:w}}),...Object.fromEntries(u)}}function c5({path:e=St,delimiter:t,curve:n="bump-x",stroke:i="#555",strokeWidth:r=1.5,strokeOpacity:s=.5,treeLayout:o=Nm,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...f}={}){c=WE(c),a=u5(a),u!=null&&(u=AM(u)),f={curve:n,stroke:i,strokeWidth:r,strokeOpacity:s,...f};const h=f5(t),d=y5(f,AM),[g,m]=Zn(),[p,_]=Zn(),[y,b]=Zn(),[v,x]=Zn();return{x1:g,x2:p,y1:y,y2:v,...Wr(f,(w,E)=>{const T=h(Wt(w,e)),I=m([]),S=_([]),A=b([]),R=x([]);let k=-1;const $=[],L=[],N=dO().path(V=>T[V]),D=o();D.nodeSize&&D.nodeSize([1,1]),D.separation&&l!==void 0&&D.separation(l??Ox);for(const V of d)V[Op]=V[p5]([]);for(const V of E){const Y=[],B=N(V.filter(q=>T[q]!=null)).each(q=>q.data=w[q.data]);a!=null&&B.sort(a),D(B);for(const{source:q,target:z}of B.links())if(!(u!=null&&!u(z,q))){Y.push(++k),$[k]=z.data,c.position(q,k,I,A),c.position(z,k,S,R);for(const Q of d)Q[Op][k]=Q[_5](z,q)}L.push(Y)}return{data:$,facets:L}}),...Object.fromEntries(d)}}function WE(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return tgt;case"right":return egt}throw new Error(`invalid tree anchor: ${e}`)}const tgt={frameAnchor:"left",dx:6,position({x:e,y:t},n,i,r){i[n]=t,r[n]=-e}},egt={frameAnchor:"right",dx:-6,position({x:e,y:t},n,i,r){i[n]=-t,r[n]=-e}};function u5(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?CM(gb(e)):CM(ngt(e))}function CM(e){return(t,n)=>Ai(e(t),e(n))}function ngt(e){return t=>{var n;return(n=t.data)==null?void 0:n[e]}}function f5(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(i=>igt(i,t))}const db=92,h5=47;function igt(e,t){if(t===db)throw new Error("delimiter cannot be backslash");let n=!1;for(let i=0,r=e.length;i<r;++i){switch(e.charCodeAt(i)){case db:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,i-1)+e.slice(i),--i,--r):e=e.slice(0,i)+"/"+e.slice(i+1);break;case h5:n?(e=e.slice(0,i)+"\\\\"+e.slice(i),i+=2,r+=2):(e=e.slice(0,i)+"\\"+e.slice(i),++i,++r);break}n=!1}return e}function rgt(e){let t=!1;for(let n=0,i=e.length;n<i;++n){switch(e.charCodeAt(n)){case db:if(!t){t=!0;continue}case h5:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--i);break}t=!1}return e}function d5(e){return Li(e)&&typeof e.node=="function"}function sgt(e){return Li(e)&&typeof e.link=="function"}function gb(e){if(d5(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return pb;case"node:path":return mb;case"node:internal":return g5;case"node:external":return m5;case"node:depth":return _b;case"node:height":return yb}throw new Error(`invalid node value: ${e}`)}}function AM(e){if(d5(e))return e.node;if(sgt(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return wg(pb);case"parent:path":return wg(mb);case"parent:depth":return wg(_b);case"parent:height":return wg(yb);case"node:name":return pb;case"node:path":return mb;case"node:internal":return g5;case"node:external":return m5;case"node:depth":return _b;case"node:height":return yb}throw new Error(`invalid link value: ${e}`)}}function mb(e){return e.id}function pb(e){return ogt(e.id)}function _b(e){return e.depth}function yb(e){return e.height}function g5(e){return!!e.children}function m5(e){return!e.children}function wg(e){return(t,n)=>n==null?void 0:e(n)}function ogt(e){let t=e.length;for(;--t>0&&!agt(e,t););return rgt(e.slice(t+1))}function agt(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}const p5=2,_5=3,Op=4;function y5(e,t){const n=[];for(const i in e){const r=e[i],s=t(r);s!==void 0&&n.push([i,...Zn(r),s])}return n}function v5(e,{fill:t,stroke:n,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:h=u,dot:d=Re(f)&&Re(h),text:g="node:name",textStroke:m="white",title:p="node:path",dx:_,dy:y,textAnchor:b,treeLayout:v=Nm,textLayout:x=v===Nm||v===uO?"mirrored":"normal",tip:w,...E}={}){if(_===void 0&&(_=WE(E.treeAnchor).dx),b!==void 0)throw new Error("textAnchor is not a configurable tree option");x=li(x,"textLayout",["mirrored","normal"]);function T(I){return Gc(e,hb({treeLayout:v,text:g,fill:t===void 0?"currentColor":t,stroke:m,dx:_,dy:y,title:p,...I,...E}))}return ir(R6(e,c5({treeLayout:v,markerStart:f,markerEnd:h,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...E})),d?zs(e,hb({treeLayout:v,fill:t===void 0?"node:internal":t,title:p,tip:w,...E})):null,g!=null?x==="mirrored"?[T({textAnchor:"start",treeFilter:"node:external"}),T({textAnchor:"end",treeFilter:"node:internal",dx:-_})]:T():null)}function lgt(e,t){return v5(e,{...t,treeLayout:uO})}function cgt({geometry:e=St,...t}={}){return Gn({...t,x:null,y:null},(n,i,r,s,o,{projection:a})=>{const l=Wt(n,e),c=l.length,u=new Float64Array(c),f=new Float64Array(c),h=zo(a);for(let d=0;d<c;++d)[u[d],f[d]]=h.centroid(l[d]);return{data:n,facets:i,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function ugt({geometry:e=St,...t}={}){let n;return{...t,x:{transform:i=>Float64Array.from(n=Wt(Wt(i,e),bG),([r])=>r)},y:{transform:()=>Float64Array.from(n,([,i])=>i)}}}function fgt(e,t,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>=0?(s=o,r=o-1):i=o+1}return s}function hgt(e,t,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>0?(s=o,r=o-1):i=o+1}return s}function dgt(e,t,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<0?(s=o,i=o+1):r=o-1}return s}function ggt(e,t,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<=0?(s=o,i=o+1):r=o-1}return s}function mgt(e,t,n,i,r){for(;i<=r;){var s=i+r>>>1,o=e[s],a=n!==void 0?n(o,t):o-t;if(a===0)return s;a<=0?i=s+1:r=s-1}return-1}function Qu(e,t,n,i,r,s){return typeof n=="function"?s(e,t,n,i===void 0?0:i|0,r===void 0?e.length-1:r|0):s(e,t,void 0,n===void 0?0:n|0,i===void 0?e.length-1:i|0)}var pgt={ge:function(e,t,n,i,r){return Qu(e,t,n,i,r,fgt)},gt:function(e,t,n,i,r){return Qu(e,t,n,i,r,hgt)},lt:function(e,t,n,i,r){return Qu(e,t,n,i,r,dgt)},le:function(e,t,n,i,r){return Qu(e,t,n,i,r,ggt)},eq:function(e,t,n,i,r){return Qu(e,t,n,i,r,mgt)}},kp=pgt,tc=0,oa=1,Yg=2,_gt=vgt;function VE(e,t,n,i,r){this.mid=e,this.left=t,this.right=n,this.leftPoints=i,this.rightPoints=r,this.count=(t?t.count:0)+(n?n.count:0)+i.length}var yd=VE.prototype;function e1(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function b5(e,t){var n=jc(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function MM(e,t){var n=e.intervals([]);n.push(t),b5(e,n)}function RM(e,t){var n=e.intervals([]),i=n.indexOf(t);return i<0?tc:(n.splice(i,1),b5(e,n),oa)}yd.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};yd.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?MM(this,e):this.left.insert(e):this.left=jc([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?MM(this,e):this.right.insert(e):this.right=jc([e]);else{var n=kp.ge(this.leftPoints,e,HE),i=kp.ge(this.rightPoints,e,GE);this.leftPoints.splice(n,0,e),this.rightPoints.splice(i,0,e)}};yd.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return tc;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return RM(this,e);var i=this.left.remove(e);return i===Yg?(this.left=null,this.count-=1,oa):(i===oa&&(this.count-=1),i)}else if(e[0]>this.mid){if(!this.right)return tc;var r=this.left?this.left.count:0;if(4*r>3*(t-1))return RM(this,e);var i=this.right.remove(e);return i===Yg?(this.right=null,this.count-=1,oa):(i===oa&&(this.count-=1),i)}else{if(this.count===1)return this.leftPoints[0]===e?Yg:tc;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,i=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=i}e1(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?e1(this,this.left):e1(this,this.right);return oa}for(var a=kp.ge(this.leftPoints,e,HE);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var i=kp.ge(this.rightPoints,e,GE);i<this.rightPoints.length&&this.rightPoints[i][1]===e[1];++i)if(this.rightPoints[i]===e)return this.rightPoints.splice(i,1),oa}return tc}};function w5(e,t,n){for(var i=0;i<e.length&&e[i][0]<=t;++i){var r=n(e[i]);if(r)return r}}function x5(e,t,n){for(var i=e.length-1;i>=0&&e[i][1]>=t;--i){var r=n(e[i]);if(r)return r}}function E5(e,t){for(var n=0;n<e.length;++n){var i=t(e[n]);if(i)return i}}yd.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return w5(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return x5(this.rightPoints,e,t)}else return E5(this.leftPoints,t)};yd.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var i=this.left.queryInterval(e,t,n);if(i)return i}if(t>this.mid&&this.right){var i=this.right.queryInterval(e,t,n);if(i)return i}return t<this.mid?w5(this.leftPoints,t,n):e>this.mid?x5(this.rightPoints,e,n):E5(this.leftPoints,n)};function ygt(e,t){return e-t}function HE(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function GE(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function jc(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(ygt);for(var i=t[t.length>>1],r=[],s=[],o=[],n=0;n<e.length;++n){var a=e[n];a[1]<i?r.push(a):i<a[0]?s.push(a):o.push(a)}var l=o,c=o.slice();return l.sort(HE),c.sort(GE),new VE(i,jc(r),jc(s),l,c)}function vb(e){this.root=e}var Tu=vb.prototype;Tu.insert=function(e){this.root?this.root.insert(e):this.root=new VE(e[0],null,null,[e],[e])};Tu.remove=function(e){if(this.root){var t=this.root.remove(e);return t===Yg&&(this.root=null),t!==tc}return!1};Tu.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};Tu.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(Tu,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(Tu,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function vgt(e){return!e||e.length===0?new vb(null):new vb(jc(e))}const bgt=$st(_gt),wgt=({marginLeft:e})=>[1,e],xgt=({width:e,marginRight:t})=>[-1,e-t],Egt=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],Tgt=({marginTop:e})=>[1,e],Sgt=({height:e,marginBottom:t})=>[-1,e-t],Cgt=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function T5(e){return typeof e=="string"?{anchor:e}:e}function Agt(e={},t={}){arguments.length===1&&([e,t]=S5(e));let{anchor:n="left",padding:i=1,r=t.r}=T5(e);switch(`${n}`.toLowerCase()){case"left":n=wgt;break;case"right":n=xgt;break;case"middle":n=Egt;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return C5("x","y",n,Gt(i),r,t)}function Mgt(e={},t={}){arguments.length===1&&([e,t]=S5(e));let{anchor:n="bottom",padding:i=1,r=t.r}=T5(e);switch(`${n}`.toLowerCase()){case"top":n=Tgt;break;case"bottom":n=Sgt;break;case"middle":n=Cgt;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return C5("y","x",n,Gt(i),r,t)}function S5(e){const{anchor:t,padding:n,...i}=e,{r}=i;return[{anchor:t,padding:n,r},i]}function C5(e,t,n,i,r,s){if(r!=null&&typeof r!="number"){let{channels:o,sort:a,reverse:l}=s;o=Px(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:r,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return Gn(s,function(o,a,l,c,u,f){let{[t]:h,r:d}=l;if(!l[t])throw new Error(`missing channel: ${t}`);({[t]:h}=i_(l,c,f));const g=d?void 0:r!==void 0?Gt(r):this.r!==void 0?this.r:3;d&&(d=Wt(d.value,c[d.scale]||St,Float64Array));let[m,p]=n(u);const _=m?Igt:Rgt,y=new Float64Array(h.length),b=d?v=>d[v]:()=>g;for(let v of a){const x=bgt();v=v.filter(d?E=>vp(h[E])&&ps(d[E]):E=>vp(h[E]));const w=new Float64Array(2*v.length+2);for(const E of v){const T=b(E),I=m?T+i:0,S=h[E]-T,A=h[E]+T;let R=2;x.queryInterval(S-i,A+i,([,,$])=>{const L=y[$]-I,N=h[E]-h[$],D=i+(d?d[E]+d[$]:2*g),V=Math.sqrt(D*D-N*N);w[R++]=L-V,w[R++]=L+V});let k=w.slice(0,R);m&&(k=k.filter($=>$>=0));t:for(const $ of k.sort(_)){for(let L=0;L<R;L+=2)if(w[L]+1e-6<$&&$<w[L+1]-1e-6)continue t;y[E]=$+I;break}x.insert([S,A,E])}}m||(m=1);for(const v of a)for(const x of v)y[x]=y[x]*m+p;return{data:o,facets:a,channels:{[e]:{value:y,source:null},[t]:{value:h,source:l[t]},...d&&{r:{value:d,source:l.r}}}}})}function Rgt(e,t){return Math.abs(e)-Math.abs(t)}function Igt(e,t){return e-t}function Lgt(e,t){return arguments.length===1&&({basis:e,...t}=e),kE(BE(e),t)}function Ogt(e,t){return arguments.length===1&&({basis:e,...t}=e),$E(BE(e),t)}function BE(e){if(e===void 0)return IM;if(typeof e=="function")return v_(Nx(e));if(/^p\d{2}$/i.test(e))return Su(kx(e));switch(`${e}`.toLowerCase()){case"deviation":return Ngt;case"first":return IM;case"last":return $gt;case"max":return Dgt;case"mean":return Pgt;case"median":return Fgt;case"min":return zgt;case"sum":return Wgt;case"extent":return kgt}throw new Error(`invalid basis: ${e}`)}function v_(e){return{mapIndex(t,n,i){const r=+e(t,n);for(const s of t)i[s]=n[s]===null?NaN:n[s]/r}}}function Su(e){return v_((t,n)=>e(t,i=>n[i]))}const kgt={mapIndex(e,t,n){const[i,r]=be(e,o=>t[o]),s=r-i;for(const o of e)n[o]=t[o]===null?NaN:(t[o]-i)/s}},IM=v_((e,t)=>{for(let n=0;n<e.length;++n){const i=t[e[n]];if(xn(i))return i}}),$gt=v_((e,t)=>{for(let n=e.length-1;n>=0;--n){const i=t[e[n]];if(xn(i))return i}}),Ngt={mapIndex(e,t,n){const i=s0(e,s=>t[s]),r=Sh(e,s=>t[s]);for(const s of e)n[s]=t[s]===null?NaN:r?(t[s]-i)/r:0}},Dgt=Su(ze),Pgt=Su(s0),Fgt=Su(jf),zgt=Su(qe),Wgt=Su(Lr);function Vgt(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return A5(t);case"last":return M5(t)}if(typeof e=="function")return Oo(null,e,t);let n,i;for(n in e){if(i!==void 0)throw new Error("ambiguous selector; multiple inputs");i=Hgt(e[n])}if(i===void 0)throw new Error(`invalid selector: ${e}`);return Oo(n,i,t)}function Hgt(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return UE;case"max":return YE}throw new Error(`unknown selector: ${e}`)}function A5(e){return Oo(null,jgt,e)}function M5(e){return Oo(null,Xgt,e)}function Ggt(e){return Oo("x",UE,e)}function Bgt(e){return Oo("y",UE,e)}function Ugt(e){return Oo("x",YE,e)}function Ygt(e){return Oo("y",YE,e)}function*jgt(e){yield e[0]}function*Xgt(e){yield e[e.length-1]}function*UE(e,t){yield V9(e,n=>t[n])}function*YE(e,t){yield rw(e,n=>t[n])}function Oo(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const i=Go(n);return Wr(n,(r,s)=>{const o=Wt(r,i),a=Wt(r,e),l=[];for(const c of s){const u=[];for(const f of o?Is(c,h=>o[h]).values():[c])for(const h of t(f,a))u.push(h);l.push(u)}return{data:r,facets:l}})}const n1=Object.freeze(Object.defineProperty({__proto__:null,Area:d_,Arrow:I6,BarX:O6,BarY:k6,Cell:g_,Contour:t5,Density:i5,Dot:m_,Frame:u6,Geo:r5,Hexgrid:s5,Image:o5,Line:p_,Link:M6,Mark:he,Raster:j6,Rect:__,RuleX:xP,RuleY:EP,Text:c_,TickX:z6,TickY:W6,Tip:f6,Vector:u_,area:oht,areaX:bh,areaY:el,arrow:hht,auto:Tht,autoSpec:$6,axisFx:YP,axisFy:UP,axisX:gE,axisY:dE,barX:Ea,barY:Ta,bin:fa,binX:fo,binY:ho,bollinger:za,bollingerX:Hht,bollingerY:Ght,boxX:Uht,boxY:Yht,cell:Ql,cellX:ght,cellY:mht,centroid:cgt,circle:vht,cluster:lgt,column:Zn,contour:odt,crosshair:ldt,crosshairX:cdt,crosshairY:udt,delaunayLink:Edt,delaunayMesh:Tdt,density:Rdt,dodgeX:Agt,dodgeY:Mgt,dot:zs,dotX:_ht,dotY:yht,filter:Llt,formatIsoDate:ND,formatMonth:Zlt,formatWeekday:Jlt,frame:_E,geo:zE,geoCentroid:ugt,graticule:Ndt,gridFx:JP,gridFy:KP,gridX:ZP,gridY:qP,group:Ux,groupX:mh,groupY:ph,groupZ:Bx,hexagon:bht,hexbin:Ddt,hexgrid:zdt,hull:Sdt,identity:St,image:Bdt,indexOf:Bn,initializer:Gn,interpolateNearest:J6,interpolateNone:fb,interpolatorBarycentric:Z6,interpolatorRandomWalk:Q6,legend:Qut,line:LE,lineX:wh,lineY:Yc,linearRegressionX:Jdt,linearRegressionY:Qdt,link:R6,map:As,mapX:kE,mapY:$E,marks:ir,normalize:BE,normalizeX:Lgt,normalizeY:Ogt,plot:d6,pointer:cE,pointerX:vh,pointerY:uE,raster:Xht,rect:OE,rectX:Rp,rectY:Ip,reverse:Olt,ruleX:Cs,ruleY:Lo,scale:nut,select:Vgt,selectFirst:A5,selectLast:M5,selectMaxX:Ugt,selectMaxY:Ygt,selectMinX:Ggt,selectMinY:Bgt,shuffle:klt,sort:MD,sphere:$dt,spike:Wut,stackX:x6,stackX1:Bft,stackX2:Uft,stackY:E6,stackY1:Yft,stackY2:jft,text:Gc,textX:AP,textY:MP,tickX:V6,tickY:H6,tip:h6,transform:Wr,tree:v5,treeLink:c5,treeNode:hb,valueof:Wt,vector:FP,vectorX:zP,vectorY:WP,voronoi:Cdt,voronoiMesh:Adt,window:y_,windowX:Lht,windowY:cb},Symbol.toStringTag,{value:"Module"}));class qgt{constructor(){this.documentElement=new i1(this,"html")}createElementNS(t,n){return new i1(this,n)}createElement(t){return new i1(this,t)}createTextNode(t){return new Kgt(this,t)}querySelector(){return null}querySelectorAll(){return[]}}const Fp=class Fp{setProperty(){}removeProperty(){}};Mt(Fp,"empty",new Fp);let bb=Fp,i1=class{constructor(t,n){this.ownerDocument=t,this.tagName=n,this.attributes={},this.children=[],this.parentNode=null}setAttribute(t,n){this.attributes[t]=String(n)}setAttributeNS(t,n,i){this.setAttribute(n,i)}getAttribute(t){return this.attributes[t]}getAttributeNS(t){return this.getAttribute(t)}hasAttribute(t){return t in this.attributes}hasAttributeNS(t){return this.hasAttribute(t)}removeAttribute(t){delete this.attributes[t]}removeAttributeNS(t,n){this.removeAttribute(n)}addEventListener(){}removeEventListener(){}dispatchEvent(){}append(...t){for(const n of t)this.appendChild(n!=null&&n.ownerDocument?n:this.ownerDocument.createTextNode(n))}appendChild(t){return this.children.push(t),t.parentNode=this,t}insertBefore(t,n){if(n==null)this.children.push(t);else{const i=this.children.indexOf(n);if(i<0)throw new Error("insertBefore reference node not found");this.children.splice(i,0,t)}return t.parentNode=this,t}querySelector(){return null}querySelectorAll(){return[]}set textContent(t){this.children=[this.ownerDocument.createTextNode(t)]}set style(t){this.attributes.style=t}get style(){return bb.empty}toHyperScript(){return rs(this.tagName,this.attributes,this.children.map(t=>t.toHyperScript()))}};class Kgt{constructor(t,n){this.ownerDocument=t,this.nodeValue=String(n)}toHyperScript(){return this.nodeValue}}function R5(e){if(e.nodeType===3)return e.nodeValue;const t={};for(const i of e.getAttributeNames())t[i]=e.getAttribute(i);const n=[];for(let i=e.firstChild;i;i=i.nextSibling)n.push(R5(i));return rs(e.tagName,t,n)}const Zgt={props:{options:Object,mark:Object,defer:Boolean,method:{type:String,default:"plot"},onRender:Function},render(){const{method:e}=this,t={...e==="plot"&&{marks:this.mark==null?[]:[this.mark]},...this.options,className:"plot"};if(this.defer){const i=o=>{s();const a=()=>{r(o);const c=n1[e](t);o.append(c),this.onRender(c)},l=o.getBoundingClientRect();l.bottom>0&&l.top<window.innerHeight?a():(this._observer=new IntersectionObserver(([c])=>{c.isIntersecting&&a()},{rootMargin:"100px"}),this._observer.observe(o),typeof requestIdleCallback=="function"&&(this._idling=requestIdleCallback(a)))},r=o=>{for(;o.lastChild;)o.lastChild.remove();s()},s=()=>{this._observer!==void 0&&(this._observer.disconnect(),this._observer=void 0),this._idling!==void 0&&(cancelIdleCallback(this._idling),this._idling=void 0)};return this.options,Va(rs("span",e==="plot"?[rs("div",{style:{maxWidth:"100%"}})]:[]),[[{mounted:i,updated:i,unmounted:r}]])}if(typeof document<"u"){const i=n1[e](t),r=s=>{for(;s.lastChild;)s.lastChild.remove();s.append(i),this.onRender(i)};return Va(rs("span",[R5(i)]),[[{mounted:r,updated:r}]])}const n=n1[e]({...t,document:new qgt});return this.onRender(n),rs("span",[n.toHyperScript()])}},Jgt={components:{PlotFigure:Zgt},props:{activityFiles:Array,activityTimezoneOffset:Array},data(){return{x:e=>e.totalDistance,y:e=>e.altitude,firstData:Zt,hovered:Zt,cumulativeData:[],yMin:Number.MAX_VALUE,yMax:0,plotSizeWidth:0,plotSizeHeight:0}},watch:{activityFiles:{handler(e){let t=[],n=0;e==null||e.forEach((i,r)=>{i.sessions.forEach(s=>{s.records.map((o,a)=>{o.totalDistance=n+o.distance,typeof o.altitude=="number"&&o.altitude>this.yMax&&(this.yMax=o.altitude),typeof o.altitude=="number"&&o.altitude<this.yMin&&(this.yMin=o.altitude),o.activityIndex=r,o.recordIndex=a}),n=s.records[s.records.length-1].totalDistance,t=t.concat(s.records)})}),console.log("data",t.length),this.firstData=t[0],this.cumulativeData=t}}},computed:{hoveredResult:function(){if(!this.hovered||!this.firstData)return null;const e=It.fromISO(this.hovered.timestamp??"").diff(It.fromISO(this.firstData.timestamp??""));return{distance:CA(this.hovered.totalDistance??0,2),duration:vC(e,"seconds",{unitDisplay:"short"}),altitude:(this.hovered.altitude??0).toFixed(2),grade:Math.round(this.hovered.grade??0)}},options:function(){const e=(this.cumulativeData.length<50?50:this.cumulativeData.length)/50;return{width:this.plotSizeWidth<=0?void 0:this.plotSizeWidth,height:this.plotSizeHeight<=0?void 0:this.plotSizeHeight,x:{grid:!0,label:"Distance (km)",transform:t=>t/1e3},y:{grid:!0,label:"Altitude (m)",nice:!0},color:{type:"diverging",scheme:"RdYlGn",reverse:!0,pivot:0,symmetric:!0},marks:[el(this.cumulativeData,cb(e,{x:this.x,y:this.y,z:null,fill:"#2A303F",curve:"basis",y1:this.yMin})),Yc(this.cumulativeData,cb(e,{x:this.x,y:this.y,z:null,stroke:"grade",curve:"basis",strokeWidth:4,strokeOpacity:.5})),Cs(this.cumulativeData,vh({x:this.x,py:this.y,stroke:"#f15a22"})),zs(this.cumulativeData,vh({x:this.x,y:this.y,r:10,stroke:"#f15a22"}))]}}},methods:{distanceToHuman:CA,toHuman:vC,getOptions(){},plotRendered(e){this.onResize(),e.addEventListener("input",()=>{this.hovered=e.value,this.$emit("record",e.value)})},onResize(){if(!this.$el)return;let e=this.$el.offsetWidth,t=this.$el.offsetHeight-this.$el.querySelector(".graph-detail").offsetHeight-1;this.plotSizeWidth!=e&&(this.plotSizeWidth=e),this.plotSizeHeight!=t&&(this.plotSizeHeight=t),console.log(this.plotSizeWidth,this.plotSizeHeight)}},updated(){},mounted(){this.$nextTick(()=>{window.addEventListener("resize",this.onResize),this.onResize()})},unmounted(){window.removeEventListener("resize",this.onResize)}};const b_=e=>(Nr("data-v-37fc2713"),e=e(),Dr(),e),Qgt={style:{display:"flex","flex-direction":"column",height:"100%"}},tmt={class:"graph-detail"},emt={class:"detail"},nmt=b_(()=>M("span",null,[M("i",{class:"fa-solid fa-road"})],-1)),imt={class:"detail-value"},rmt={class:"detail"},smt=b_(()=>M("span",null,[M("i",{class:"fa-solid fa-hourglass-half"})],-1)),omt={class:"detail-value"},amt={class:"detail"},lmt=b_(()=>M("span",null,[M("i",{class:"fa-solid fa-mountain"})],-1)),cmt={class:"detail-value"},umt={class:"detail"},fmt=b_(()=>M("span",null,[M("i",{class:"fa-solid fa-angle-left"})],-1)),hmt={class:"detail-value"},dmt={class:"graph",style:{"flex-grow":"1"}};function gmt(e,t,n,i,r,s){const o=Q4("PlotFigure");return ct(),ft("div",Qgt,[M("div",tmt,[M("div",emt,[nmt,M("span",imt,ot(s.hoveredResult?s.hoveredResult.distance??"-":"-"),1)]),M("div",rmt,[smt,M("span",omt,ot(s.hoveredResult?s.hoveredResult.duration??"-":"-"),1)]),M("div",amt,[lmt,M("span",cmt,ot(s.hoveredResult?s.hoveredResult.altitude??"-":"-")+" masl",1)]),M("div",umt,[fmt,M("span",hmt,ot(s.hoveredResult?s.hoveredResult.grade??"-":"-")+"%",1)])]),M("div",dmt,[Ot(o,{options:s.options,defer:"",onRender:s.plotRendered},null,8,["options","onRender"])])])}const mmt=Ii(Jgt,[["render",gmt],["__scopeId","data-v-37fc2713"]]),w_=e=>(Nr("data-v-2dad33a0"),e=e(),Dr(),e),pmt={class:"offcanvas offcanvas-start",tabindex:"-1",id:"offcanvasSummary","aria-labelledby":"offcanvasSummaryLabel"},_mt=w_(()=>M("div",{class:"offcanvas-header"},[M("h5",{class:"offcanvas-title title",id:"offcanvasSummaryLabel"},"Open Activity"),M("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),ymt={class:"offcanvas-body"},vmt={class:"activity container-fluid text-center"},bmt=w_(()=>M("div",{class:"header pt-5 pb-1"},[M("h2",{class:"title"},"Open Activity")],-1)),wmt={class:"col-12 col-md-7 col-xl-9 map-container"},xmt={class:"row"},Emt={class:Fn(["col-12","map"])},Tmt=w_(()=>M("div",{class:Fn(["col-12","bottom-info-button"])},[M("nav",{class:"position-relative bottom-info-nav"},[M("div",{class:"nav nav-tabs",role:"tablist"},[M("button",{class:"nav-link d-md-none",type:"button",role:"tab","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasSummary","aria-controls":"offcanvasSummary","aria-label":"Toggle Summary"},[M("i",{class:"fa-solid fa-bar"}),ie(" Summary ")]),M("button",{class:"nav-link active",id:"nav-elevation-tab","data-bs-toggle":"tab","data-bs-target":"#nav-graph",type:"button",role:"tab","aria-controls":"nav-graph","aria-selected":"true"}," Elevation ")])])],-1)),Smt={class:Fn(["col-12","bottom-info"])},Cmt={class:"tab-content h-100"},Amt={class:Fn(["tab-pane fade show active h-100","graph"]),id:"nav-graph",role:"tabpanel","aria-labelledby":"nav-elevation-tab",tabindex:"0"},Mmt=w_(()=>M("div",{class:Fn(["tab-pane fade h-100","graph"]),id:"nav-hr",role:"tabpanel","aria-labelledby":"nav-hr-tab",tabindex:"0"},null,-1)),wb=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function";wb==!1&&alert("Sorry, it appears that your browser does not support WebAssembly :(");class Rmt{constructor(t){Mt(this,"err",null);Mt(this,"took");Mt(this,"activities");const n=t;this.err=n==null?void 0:n.err,this.took=n==null?void 0:n.took,this.activities=n==null?void 0:n.activities}}const Imt={data(){return{decodeWorker:new Worker(new URL("/assets/activity-service-73d942de.js",self.location),{type:"module"}),geojsons:new Array,activities:new Array,timezoneOffsetHour:0,timezoneOffsetHoursList:new Array,loading:!1,begin:0,selectedFeatures:new Array,selectedSessions:new Array}},computed:{isActivityFileReady:function(){return this.activities&&this.activities.length>0},combinedRecords:function(){var e;return(e=this.activities)==null?void 0:e.flatMap(t=>t.sessions.flatMap(n=>n.records))},hasCadence(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].cadence;if(typeof t=="number"&&t!=255&&t!=0)return!0}return!1},hasHeartRate(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].heartRate;if(typeof t=="number"&&t!=255&&t!=0)return!0}return!1},hasPower(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].power;if(typeof t=="number"&&t!=65535&&t!=0)return!0}return!1},hasTemperature(){for(let e=0;e<this.combinedRecords.length;e++){const t=this.combinedRecords[e].temperature;if(typeof t=="number"&&t!=127)return!0}return!1}},watch:{activityFiles:{async handler(e){const t=new Array;for(let n=0;n<e.length;n++)t.push(e[n].timezone);this.timezoneOffsetHoursList=t,this.timezoneOffsetHour=t[0],console.log("timezone offsets:",t)}}},methods:{getExtention(e){if(e=="")return"";const t=e.split(".");return t[t.length-1].toLocaleLowerCase()},getExtentionIdentifier(e){return e=="fit"?1:e=="gpx"?2:e=="tcx"?3:0},createFeatures(e){const t=[];return e.forEach(n=>{n.sessions.forEach((i,r)=>{const s=Math.round(i.records.length*.1);let o=0,a=0,l=0,c=[];for(let u=0;u<i.records.length;u++){const f=i.records[u];if(o==s||u==i.records.length-1){l=u;const h=new aD().readFeature({id:`lineString-${r}-${a}-${l}`,type:"Feature",geometry:{type:"LineString",coordinates:c}});t.push(h),a=u+1,c=[],o=0}f.positionLong==null||f.positionLat==null||(c.push([f.positionLong,f.positionLat]),o++)}})}),t},fileInputEventListener(e){var i;const t=e.target;if(!t.files)return;let n=new Array;for(let r=0;r<((i=t.files)==null?void 0:i.length);r++)n.push(new Promise((s,o)=>{const a=t.files[r];if(!a){o("no file selected");return}const l=this.getExtention(a.name),c=this.getExtentionIdentifier(l);if(c==0){o(`file '${a.name}' (type: ${l}) is not supported`);return}const u=new FileReader;u.onload=f=>{const h=f.target.result;s(new Uint8Array([c,...new Uint8Array(h)]))},u.onerror=o,u.readAsArrayBuffer(a)}));Promise.all(n).then(r=>{this.begin=new Date().getTime(),this.loading=!0,this.decodeWorker.postMessage(r)})},decodeWorkerOnMessage(e){const t=new Rmt(e.data);if(t.err!=null){console.error(`decode return with err: ${t.err}`),alert(`decode return with err: ${t.err}`),this.loading=!1;return}const n=new Date().getTime()-this.begin;console.group("Elapsed"),console.log("Decode took:		",t.took,"ms"),console.log("Interop wasm to js:	",n-t.took,"ms"),console.log("Total elapsed:		",n,"ms"),console.groupEnd(),this.activities=t.activities,this.selectedSessions=this.activities.flatMap(i=>i.sessions),this.selectedFeatures=this.createFeatures(this.activities),this.loading=!1},elevationOnRecord(e){this.$refs.theMap.showPopUpRecord(e)}},mounted(){var e,t;(e=document.getElementById("fileInput"))==null||e.addEventListener("change",this.fileInputEventListener),(t=document.getElementById("fileInputMobile"))==null||t.addEventListener("change",this.fileInputEventListener),this.decodeWorker.onmessage=this.decodeWorkerOnMessage}},Lmt=oi({...Imt,__name:"TheActivity",setup(e){return(t,n)=>(ct(),ft("div",null,[Ot(t0,null,{default:Bb(()=>[Va(Ot(L$,null,null,512),[[Q2,t.loading]])]),_:1}),M("div",pmt,[_mt,M("div",ymt,[Ot(Zv,{isWebAssemblySupported:Er(wb),id:"fileInputMobile"},null,8,["isWebAssemblySupported"]),Ot(SA,{activityFiles:t.activities,timezoneOffsetHour:t.timezoneOffsetHour},null,8,["activityFiles","timezoneOffsetHour"])])]),M("div",vmt,[M("div",{class:Fn(["row h-100",t.isActivityFileReady?"":"align-items-center"])},[M("div",{class:Fn(["navigator","col-12",t.isActivityFileReady?"col-xl-3 col-md-5 d-none d-md-block":"col-md-12"])},[bmt,Ot(Zv,{isWebAssemblySupported:Er(wb)},null,8,["isWebAssemblySupported"]),Ot(SA,{activityFiles:t.activities,timezoneOffsetHour:t.timezoneOffsetHour},null,8,["activityFiles","timezoneOffsetHour"])],2),Va(M("div",wmt,[M("div",xmt,[M("div",Emt,[Ot(rD,{sessions:t.selectedSessions,features:t.selectedFeatures,hasCadence:t.hasCadence,hasHeartRate:t.hasHeartRate,hasPower:t.hasPower,hasTemperature:t.hasTemperature,ref:"theMap"},null,8,["sessions","features","hasCadence","hasHeartRate","hasPower","hasTemperature"])]),Tmt,M("div",Smt,[M("div",Cmt,[M("div",Amt,[Ot(mmt,{activityFiles:t.activities,activityTimezoneOffset:t.timezoneOffsetHoursList,onRecord:t.elevationOnRecord},null,8,["activityFiles","activityTimezoneOffset","onRecord"])]),Mmt])])])],512),[[Q2,t.isActivityFileReady]])],2)])]))}});const Omt=Ii(Lmt,[["__scopeId","data-v-2dad33a0"]]),kmt=oi({__name:"ActivityView",setup(e){return(t,n)=>(ct(),ft("main",null,[Ot(Omt)]))}}),$mt=f9({history:M7("/"),routes:[{path:"/",name:"home",component:dot},{path:"/legacy",name:"legacy",component:kmt},{path:"/components/elevationgraphplot",name:"elevationgraphplot",component:()=>vT(()=>import("./ElevationGraph-a77f9287.js"),[])},{path:"/components/elevationgraphview",name:"elevationgraph",component:()=>vT(()=>import("./ElevationGraphView-f707563c.js"),[])}]});var En="top",ii="bottom",ri="right",Tn="left",x_="auto",Cu=[En,ii,ri,Tn],nl="start",Xc="end",I5="clippingParents",jE="viewport",Gl="popper",L5="reference",xb=Cu.reduce(function(e,t){return e.concat([t+"-"+nl,t+"-"+Xc])},[]),XE=[].concat(Cu,[x_]).reduce(function(e,t){return e.concat([t,t+"-"+nl,t+"-"+Xc])},[]),O5="beforeRead",k5="read",$5="afterRead",N5="beforeMain",D5="main",P5="afterMain",F5="beforeWrite",z5="write",W5="afterWrite",V5=[O5,k5,$5,N5,D5,P5,F5,z5,W5];function $r(e){return e?(e.nodeName||"").toLowerCase():null}function si(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function il(e){var t=si(e).Element;return e instanceof t||e instanceof Element}function Ti(e){var t=si(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function qE(e){if(typeof ShadowRoot>"u")return!1;var t=si(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Nmt(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},r=t.attributes[n]||{},s=t.elements[n];!Ti(s)||!$r(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Dmt(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!Ti(r)||!$r(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}const KE={name:"applyStyles",enabled:!0,phase:"write",fn:Nmt,effect:Dmt,requires:["computeStyles"]};function Mr(e){return e.split("-")[0]}var Wa=Math.max,$p=Math.min,qc=Math.round;function Eb(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function H5(){return!/^((?!chrome|android).)*safari/i.test(Eb())}function Kc(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),r=1,s=1;t&&Ti(e)&&(r=e.offsetWidth>0&&qc(i.width)/e.offsetWidth||1,s=e.offsetHeight>0&&qc(i.height)/e.offsetHeight||1);var o=il(e)?si(e):window,a=o.visualViewport,l=!H5()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,f=i.width/r,h=i.height/s;return{width:f,height:h,top:u,right:c+f,bottom:u+h,left:c,x:c,y:u}}function ZE(e){var t=Kc(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function G5(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&qE(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Ms(e){return si(e).getComputedStyle(e)}function Pmt(e){return["table","td","th"].indexOf($r(e))>=0}function Yo(e){return((il(e)?e.ownerDocument:e.document)||window.document).documentElement}function E_(e){return $r(e)==="html"?e:e.assignedSlot||e.parentNode||(qE(e)?e.host:null)||Yo(e)}function LM(e){return!Ti(e)||Ms(e).position==="fixed"?null:e.offsetParent}function Fmt(e){var t=/firefox/i.test(Eb()),n=/Trident/i.test(Eb());if(n&&Ti(e)){var i=Ms(e);if(i.position==="fixed")return null}var r=E_(e);for(qE(r)&&(r=r.host);Ti(r)&&["html","body"].indexOf($r(r))<0;){var s=Ms(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function vd(e){for(var t=si(e),n=LM(e);n&&Pmt(n)&&Ms(n).position==="static";)n=LM(n);return n&&($r(n)==="html"||$r(n)==="body"&&Ms(n).position==="static")?t:n||Fmt(e)||t}function JE(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function kf(e,t,n){return Wa(e,$p(t,n))}function zmt(e,t,n){var i=kf(e,t,n);return i>n?n:i}function B5(){return{top:0,right:0,bottom:0,left:0}}function U5(e){return Object.assign({},B5(),e)}function Y5(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var Wmt=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,U5(typeof t!="number"?t:Y5(t,Cu))};function Vmt(e){var t,n=e.state,i=e.name,r=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Mr(n.placement),l=JE(a),c=[Tn,ri].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var f=Wmt(r.padding,n),h=ZE(s),d=l==="y"?En:Tn,g=l==="y"?ii:ri,m=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],p=o[l]-n.rects.reference[l],_=vd(s),y=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,b=m/2-p/2,v=f[d],x=y-h[u]-f[g],w=y/2-h[u]/2+b,E=kf(v,w,x),T=l;n.modifiersData[i]=(t={},t[T]=E,t.centerOffset=E-w,t)}}function Hmt(e){var t=e.state,n=e.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||G5(t.elements.popper,r)&&(t.elements.arrow=r))}const j5={name:"arrow",enabled:!0,phase:"main",fn:Vmt,effect:Hmt,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Zc(e){return e.split("-")[1]}var Gmt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Bmt(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:qc(n*r)/r||0,y:qc(i*r)/r||0}}function OM(e){var t,n=e.popper,i=e.popperRect,r=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,f=e.isFixed,h=o.x,d=h===void 0?0:h,g=o.y,m=g===void 0?0:g,p=typeof u=="function"?u({x:d,y:m}):{x:d,y:m};d=p.x,m=p.y;var _=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),b=Tn,v=En,x=window;if(c){var w=vd(n),E="clientHeight",T="clientWidth";if(w===si(n)&&(w=Yo(n),Ms(w).position!=="static"&&a==="absolute"&&(E="scrollHeight",T="scrollWidth")),w=w,r===En||(r===Tn||r===ri)&&s===Xc){v=ii;var I=f&&w===x&&x.visualViewport?x.visualViewport.height:w[E];m-=I-i.height,m*=l?1:-1}if(r===Tn||(r===En||r===ii)&&s===Xc){b=ri;var S=f&&w===x&&x.visualViewport?x.visualViewport.width:w[T];d-=S-i.width,d*=l?1:-1}}var A=Object.assign({position:a},c&&Gmt),R=u===!0?Bmt({x:d,y:m},si(n)):{x:d,y:m};if(d=R.x,m=R.y,l){var k;return Object.assign({},A,(k={},k[v]=y?"0":"",k[b]=_?"0":"",k.transform=(x.devicePixelRatio||1)<=1?"translate("+d+"px, "+m+"px)":"translate3d("+d+"px, "+m+"px, 0)",k))}return Object.assign({},A,(t={},t[v]=y?m+"px":"",t[b]=_?d+"px":"",t.transform="",t))}function Umt(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Mr(t.placement),variation:Zc(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,OM(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,OM(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const QE={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Umt,data:{}};var xg={passive:!0};function Ymt(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=si(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,xg)}),a&&l.addEventListener("resize",n.update,xg),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,xg)}),a&&l.removeEventListener("resize",n.update,xg)}}const t2={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ymt,data:{}};var jmt={left:"right",right:"left",bottom:"top",top:"bottom"};function jg(e){return e.replace(/left|right|bottom|top/g,function(t){return jmt[t]})}var Xmt={start:"end",end:"start"};function kM(e){return e.replace(/start|end/g,function(t){return Xmt[t]})}function e2(e){var t=si(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function n2(e){return Kc(Yo(e)).left+e2(e).scrollLeft}function qmt(e,t){var n=si(e),i=Yo(e),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=H5();(c||!c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+n2(e),y:l}}function Kmt(e){var t,n=Yo(e),i=e2(e),r=(t=e.ownerDocument)==null?void 0:t.body,s=Wa(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Wa(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+n2(e),l=-i.scrollTop;return Ms(r||n).direction==="rtl"&&(a+=Wa(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function i2(e){var t=Ms(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function X5(e){return["html","body","#document"].indexOf($r(e))>=0?e.ownerDocument.body:Ti(e)&&i2(e)?e:X5(E_(e))}function $f(e,t){var n;t===void 0&&(t=[]);var i=X5(e),r=i===((n=e.ownerDocument)==null?void 0:n.body),s=si(i),o=r?[s].concat(s.visualViewport||[],i2(i)?i:[]):i,a=t.concat(o);return r?a:a.concat($f(E_(o)))}function Tb(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Zmt(e,t){var n=Kc(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function $M(e,t,n){return t===jE?Tb(qmt(e,n)):il(t)?Zmt(t,n):Tb(Kmt(Yo(e)))}function Jmt(e){var t=$f(E_(e)),n=["absolute","fixed"].indexOf(Ms(e).position)>=0,i=n&&Ti(e)?vd(e):e;return il(i)?t.filter(function(r){return il(r)&&G5(r,i)&&$r(r)!=="body"}):[]}function Qmt(e,t,n,i){var r=t==="clippingParents"?Jmt(e):[].concat(t),s=[].concat(r,[n]),o=s[0],a=s.reduce(function(l,c){var u=$M(e,c,i);return l.top=Wa(u.top,l.top),l.right=$p(u.right,l.right),l.bottom=$p(u.bottom,l.bottom),l.left=Wa(u.left,l.left),l},$M(e,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function q5(e){var t=e.reference,n=e.element,i=e.placement,r=i?Mr(i):null,s=i?Zc(i):null,o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(r){case En:l={x:o,y:t.y-n.height};break;case ii:l={x:o,y:t.y+t.height};break;case ri:l={x:t.x+t.width,y:a};break;case Tn:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=r?JE(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case nl:l[c]=l[c]-(t[u]/2-n[u]/2);break;case Xc:l[c]=l[c]+(t[u]/2-n[u]/2);break}}return l}function Jc(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=i===void 0?e.placement:i,s=n.strategy,o=s===void 0?e.strategy:s,a=n.boundary,l=a===void 0?I5:a,c=n.rootBoundary,u=c===void 0?jE:c,f=n.elementContext,h=f===void 0?Gl:f,d=n.altBoundary,g=d===void 0?!1:d,m=n.padding,p=m===void 0?0:m,_=U5(typeof p!="number"?p:Y5(p,Cu)),y=h===Gl?L5:Gl,b=e.rects.popper,v=e.elements[g?y:h],x=Qmt(il(v)?v:v.contextElement||Yo(e.elements.popper),l,u,o),w=Kc(e.elements.reference),E=q5({reference:w,element:b,strategy:"absolute",placement:r}),T=Tb(Object.assign({},b,E)),I=h===Gl?T:w,S={top:x.top-I.top+_.top,bottom:I.bottom-x.bottom+_.bottom,left:x.left-I.left+_.left,right:I.right-x.right+_.right},A=e.modifiersData.offset;if(h===Gl&&A){var R=A[r];Object.keys(S).forEach(function(k){var $=[ri,ii].indexOf(k)>=0?1:-1,L=[En,ii].indexOf(k)>=0?"y":"x";S[k]+=R[L]*$})}return S}function tpt(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?XE:l,u=Zc(i),f=u?a?xb:xb.filter(function(g){return Zc(g)===u}):Cu,h=f.filter(function(g){return c.indexOf(g)>=0});h.length===0&&(h=f);var d=h.reduce(function(g,m){return g[m]=Jc(e,{placement:m,boundary:r,rootBoundary:s,padding:o})[Mr(m)],g},{});return Object.keys(d).sort(function(g,m){return d[g]-d[m]})}function ept(e){if(Mr(e)===x_)return[];var t=jg(e);return[kM(e),t,kM(t)]}function npt(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,g=d===void 0?!0:d,m=n.allowedAutoPlacements,p=t.options.placement,_=Mr(p),y=_===p,b=l||(y||!g?[jg(p)]:ept(p)),v=[p].concat(b).reduce(function(nt,rt){return nt.concat(Mr(rt)===x_?tpt(t,{placement:rt,boundary:u,rootBoundary:f,padding:c,flipVariations:g,allowedAutoPlacements:m}):rt)},[]),x=t.rects.reference,w=t.rects.popper,E=new Map,T=!0,I=v[0],S=0;S<v.length;S++){var A=v[S],R=Mr(A),k=Zc(A)===nl,$=[En,ii].indexOf(R)>=0,L=$?"width":"height",N=Jc(t,{placement:A,boundary:u,rootBoundary:f,altBoundary:h,padding:c}),D=$?k?ri:Tn:k?ii:En;x[L]>w[L]&&(D=jg(D));var V=jg(D),Y=[];if(s&&Y.push(N[R]<=0),a&&Y.push(N[D]<=0,N[V]<=0),Y.every(function(nt){return nt})){I=A,T=!1;break}E.set(A,Y)}if(T)for(var B=g?3:1,q=function(rt){var at=v.find(function(W){var G=E.get(W);if(G)return G.slice(0,rt).every(function(F){return F})});if(at)return I=at,"break"},z=B;z>0;z--){var Q=q(z);if(Q==="break")break}t.placement!==I&&(t.modifiersData[i]._skip=!0,t.placement=I,t.reset=!0)}}const K5={name:"flip",enabled:!0,phase:"main",fn:npt,requiresIfExists:["offset"],data:{_skip:!1}};function NM(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function DM(e){return[En,ri,ii,Tn].some(function(t){return e[t]>=0})}function ipt(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,s=t.modifiersData.preventOverflow,o=Jc(t,{elementContext:"reference"}),a=Jc(t,{altBoundary:!0}),l=NM(o,i),c=NM(a,r,s),u=DM(l),f=DM(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const Z5={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ipt};function rpt(e,t,n){var i=Mr(e),r=[Tn,En].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[Tn,ri].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function spt(e){var t=e.state,n=e.options,i=e.name,r=n.offset,s=r===void 0?[0,0]:r,o=XE.reduce(function(u,f){return u[f]=rpt(f,t.rects,s),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=o}const J5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:spt};function opt(e){var t=e.state,n=e.name;t.modifiersData[n]=q5({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const r2={name:"popperOffsets",enabled:!0,phase:"read",fn:opt,data:{}};function apt(e){return e==="x"?"y":"x"}function lpt(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,h=n.tether,d=h===void 0?!0:h,g=n.tetherOffset,m=g===void 0?0:g,p=Jc(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),_=Mr(t.placement),y=Zc(t.placement),b=!y,v=JE(_),x=apt(v),w=t.modifiersData.popperOffsets,E=t.rects.reference,T=t.rects.popper,I=typeof m=="function"?m(Object.assign({},t.rects,{placement:t.placement})):m,S=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if(w){if(s){var k,$=v==="y"?En:Tn,L=v==="y"?ii:ri,N=v==="y"?"height":"width",D=w[v],V=D+p[$],Y=D-p[L],B=d?-T[N]/2:0,q=y===nl?E[N]:T[N],z=y===nl?-T[N]:-E[N],Q=t.elements.arrow,nt=d&&Q?ZE(Q):{width:0,height:0},rt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:B5(),at=rt[$],W=rt[L],G=kf(0,E[N],nt[N]),F=b?E[N]/2-B-G-at-S.mainAxis:q-G-at-S.mainAxis,j=b?-E[N]/2+B+G+W+S.mainAxis:z+G+W+S.mainAxis,Z=t.elements.arrow&&vd(t.elements.arrow),C=Z?v==="y"?Z.clientTop||0:Z.clientLeft||0:0,O=(k=A==null?void 0:A[v])!=null?k:0,P=D+F-O-C,H=D+j-O,U=kf(d?$p(V,P):V,D,d?Wa(Y,H):Y);w[v]=U,R[v]=U-D}if(a){var X,lt=v==="x"?En:Tn,tt=v==="x"?ii:ri,et=w[x],K=x==="y"?"height":"width",dt=et+p[lt],ut=et-p[tt],gt=[En,Tn].indexOf(_)!==-1,mt=(X=A==null?void 0:A[x])!=null?X:0,Tt=gt?dt:et-E[K]-T[K]-mt+S.altAxis,Nt=gt?et+E[K]+T[K]-mt-S.altAxis:ut,Ct=d&&gt?zmt(Tt,et,Nt):kf(d?Tt:dt,et,d?Nt:ut);w[x]=Ct,R[x]=Ct-et}t.modifiersData[i]=R}}const Q5={name:"preventOverflow",enabled:!0,phase:"main",fn:lpt,requiresIfExists:["offset"]};function cpt(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function upt(e){return e===si(e)||!Ti(e)?e2(e):cpt(e)}function fpt(e){var t=e.getBoundingClientRect(),n=qc(t.width)/e.offsetWidth||1,i=qc(t.height)/e.offsetHeight||1;return n!==1||i!==1}function hpt(e,t,n){n===void 0&&(n=!1);var i=Ti(t),r=Ti(t)&&fpt(t),s=Yo(t),o=Kc(e,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(($r(t)!=="body"||i2(s))&&(a=upt(t)),Ti(t)?(l=Kc(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=n2(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function dpt(e){var t=new Map,n=new Set,i=[];e.forEach(function(s){t.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&r(l)}}),i.push(s)}return e.forEach(function(s){n.has(s.name)||r(s)}),i}function gpt(e){var t=dpt(e);return V5.reduce(function(n,i){return n.concat(t.filter(function(r){return r.phase===i}))},[])}function mpt(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function ppt(e){var t=e.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var PM={placement:"bottom",modifiers:[],strategy:"absolute"};function FM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function T_(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,r=t.defaultOptions,s=r===void 0?PM:r;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},PM,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],h=!1,d={state:u,setOptions:function(_){var y=typeof _=="function"?_(u.options):_;m(),u.options=Object.assign({},s,u.options,y),u.scrollParents={reference:il(a)?$f(a):a.contextElement?$f(a.contextElement):[],popper:$f(l)};var b=gpt(ppt([].concat(i,u.options.modifiers)));return u.orderedModifiers=b.filter(function(v){return v.enabled}),g(),d.update()},forceUpdate:function(){if(!h){var _=u.elements,y=_.reference,b=_.popper;if(FM(y,b)){u.rects={reference:hpt(y,vd(b),u.options.strategy==="fixed"),popper:ZE(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(S){return u.modifiersData[S.name]=Object.assign({},S.data)});for(var v=0;v<u.orderedModifiers.length;v++){if(u.reset===!0){u.reset=!1,v=-1;continue}var x=u.orderedModifiers[v],w=x.fn,E=x.options,T=E===void 0?{}:E,I=x.name;typeof w=="function"&&(u=w({state:u,options:T,name:I,instance:d})||u)}}}},update:mpt(function(){return new Promise(function(p){d.forceUpdate(),p(u)})}),destroy:function(){m(),h=!0}};if(!FM(a,l))return d;d.setOptions(c).then(function(p){!h&&c.onFirstUpdate&&c.onFirstUpdate(p)});function g(){u.orderedModifiers.forEach(function(p){var _=p.name,y=p.options,b=y===void 0?{}:y,v=p.effect;if(typeof v=="function"){var x=v({state:u,name:_,instance:d,options:b}),w=function(){};f.push(x||w)}})}function m(){f.forEach(function(p){return p()}),f=[]}return d}}var _pt=T_(),ypt=[t2,r2,QE,KE],vpt=T_({defaultModifiers:ypt}),bpt=[t2,r2,QE,KE,J5,K5,Q5,j5,Z5],s2=T_({defaultModifiers:bpt});const tF=Object.freeze(Object.defineProperty({__proto__:null,afterMain:P5,afterRead:$5,afterWrite:W5,applyStyles:KE,arrow:j5,auto:x_,basePlacements:Cu,beforeMain:N5,beforeRead:O5,beforeWrite:F5,bottom:ii,clippingParents:I5,computeStyles:QE,createPopper:s2,createPopperBase:_pt,createPopperLite:vpt,detectOverflow:Jc,end:Xc,eventListeners:t2,flip:K5,hide:Z5,left:Tn,main:D5,modifierPhases:V5,offset:J5,placements:XE,popper:Gl,popperGenerator:T_,popperOffsets:r2,preventOverflow:Q5,read:k5,reference:L5,right:ri,start:nl,top:En,variationPlacements:xb,viewport:jE,write:z5},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Qs=new Map,r1={set(e,t,n){Qs.has(e)||Qs.set(e,new Map);const i=Qs.get(e);if(!i.has(t)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(t,n)},get(e,t){return Qs.has(e)&&Qs.get(e).get(t)||null},remove(e,t){if(!Qs.has(e))return;const n=Qs.get(e);n.delete(t),n.size===0&&Qs.delete(e)}},wpt=1e6,xpt=1e3,Sb="transitionend",eF=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),e),Ept=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),Tpt=e=>{do e+=Math.floor(Math.random()*wpt);while(document.getElementById(e));return e},Spt=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const i=Number.parseFloat(t),r=Number.parseFloat(n);return!i&&!r?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*xpt)},nF=e=>{e.dispatchEvent(new Event(Sb))},vs=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),ko=e=>vs(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(eF(e)):null,Au=e=>{if(!vs(e)||e.getClientRects().length===0)return!1;const t=getComputedStyle(e).getPropertyValue("visibility")==="visible",n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const i=e.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return t},$o=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",iF=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?iF(e.parentNode):null},Np=()=>{},bd=e=>{e.offsetHeight},rF=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,s1=[],Cpt=e=>{document.readyState==="loading"?(s1.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of s1)t()}),s1.push(e)):e()},Mi=()=>document.documentElement.dir==="rtl",Oi=e=>{Cpt(()=>{const t=rF();if(t){const n=e.NAME,i=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=i,e.jQueryInterface)}})},Nn=(e,t=[],n=e)=>typeof e=="function"?e(...t):n,sF=(e,t,n=!0)=>{if(!n){Nn(e);return}const i=5,r=Spt(t)+i;let s=!1;const o=({target:a})=>{a===t&&(s=!0,t.removeEventListener(Sb,o),Nn(e))};t.addEventListener(Sb,o),setTimeout(()=>{s||nF(t)},r)},o2=(e,t,n,i)=>{const r=e.length;let s=e.indexOf(t);return s===-1?!n&&i?e[r-1]:e[0]:(s+=n?1:-1,i&&(s=(s+r)%r),e[Math.max(0,Math.min(s,r-1))])},Apt=/[^.]*(?=\..*)\.|.*/,Mpt=/\..*/,Rpt=/::\d+$/,o1={};let zM=1;const oF={mouseenter:"mouseover",mouseleave:"mouseout"},Ipt=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function aF(e,t){return t&&`${t}::${zM++}`||e.uidEvent||zM++}function lF(e){const t=aF(e);return e.uidEvent=t,o1[t]=o1[t]||{},o1[t]}function Lpt(e,t){return function n(i){return a2(i,{delegateTarget:e}),n.oneOff&&J.off(e,i.type,t),t.apply(e,[i])}}function Opt(e,t,n){return function i(r){const s=e.querySelectorAll(t);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return a2(r,{delegateTarget:o}),i.oneOff&&J.off(e,r.type,t,n),n.apply(o,[r])}}function cF(e,t,n=null){return Object.values(e).find(i=>i.callable===t&&i.delegationSelector===n)}function uF(e,t,n){const i=typeof t=="string",r=i?n:t||n;let s=fF(e);return Ipt.has(s)||(s=e),[i,r,s]}function WM(e,t,n,i,r){if(typeof t!="string"||!e)return;let[s,o,a]=uF(t,n,i);t in oF&&(o=(g=>function(m){if(!m.relatedTarget||m.relatedTarget!==m.delegateTarget&&!m.delegateTarget.contains(m.relatedTarget))return g.call(this,m)})(o));const l=lF(e),c=l[a]||(l[a]={}),u=cF(c,o,s?n:null);if(u){u.oneOff=u.oneOff&&r;return}const f=aF(o,t.replace(Apt,"")),h=s?Opt(e,n,o):Lpt(e,o);h.delegationSelector=s?n:null,h.callable=o,h.oneOff=r,h.uidEvent=f,c[f]=h,e.addEventListener(a,h,s)}function Cb(e,t,n,i,r){const s=cF(t[n],i,r);s&&(e.removeEventListener(n,s,!!r),delete t[n][s.uidEvent])}function kpt(e,t,n,i){const r=t[n]||{};for(const[s,o]of Object.entries(r))s.includes(i)&&Cb(e,t,n,o.callable,o.delegationSelector)}function fF(e){return e=e.replace(Mpt,""),oF[e]||e}const J={on(e,t,n,i){WM(e,t,n,i,!1)},one(e,t,n,i){WM(e,t,n,i,!0)},off(e,t,n,i){if(typeof t!="string"||!e)return;const[r,s,o]=uF(t,n,i),a=o!==t,l=lF(e),c=l[o]||{},u=t.startsWith(".");if(typeof s<"u"){if(!Object.keys(c).length)return;Cb(e,l,o,s,r?n:null);return}if(u)for(const f of Object.keys(l))kpt(e,l,f,t.slice(1));for(const[f,h]of Object.entries(c)){const d=f.replace(Rpt,"");(!a||t.includes(d))&&Cb(e,l,o,h.callable,h.delegationSelector)}},trigger(e,t,n){if(typeof t!="string"||!e)return null;const i=rF(),r=fF(t),s=t!==r;let o=null,a=!0,l=!0,c=!1;s&&i&&(o=i.Event(t,n),i(e).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());const u=a2(new Event(t,{bubbles:a,cancelable:!0}),n);return c&&u.preventDefault(),l&&e.dispatchEvent(u),u.defaultPrevented&&o&&o.preventDefault(),u}};function a2(e,t={}){for(const[n,i]of Object.entries(t))try{e[n]=i}catch{Object.defineProperty(e,n,{configurable:!0,get(){return i}})}return e}function VM(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function a1(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const bs={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${a1(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${a1(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),t[r]=VM(e.dataset[i])}return t},getDataAttribute(e,t){return VM(e.getAttribute(`data-bs-${a1(t)}`))}};class wd{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const i=vs(n)?bs.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...vs(n)?bs.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[i,r]of Object.entries(n)){const s=t[i],o=vs(s)?"element":Ept(s);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}}}const $pt="5.3.2";class ar extends wd{constructor(t,n){super(),t=ko(t),t&&(this._element=t,this._config=this._getConfig(n),r1.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r1.remove(this._element,this.constructor.DATA_KEY),J.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,i=!0){sF(t,n,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return r1.get(ko(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return $pt}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const l1=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?eF(n.trim()):null}return t},_t={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(n=>n.matches(t))},parents(e,t){const n=[];let i=e.parentNode.closest(t);for(;i;)n.push(i),i=i.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(n=>!$o(n)&&Au(n))},getSelectorFromElement(e){const t=l1(e);return t&&_t.findOne(t)?t:null},getElementFromSelector(e){const t=l1(e);return t?_t.findOne(t):null},getMultipleElementsFromSelector(e){const t=l1(e);return t?_t.find(t):[]}},S_=(e,t="hide")=>{const n=`click.dismiss${e.EVENT_KEY}`,i=e.NAME;J.on(document,n,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),$o(this))return;const s=_t.getElementFromSelector(this)||this.closest(`.${i}`);e.getOrCreateInstance(s)[t]()})},Npt="alert",Dpt="bs.alert",hF=`.${Dpt}`,Ppt=`close${hF}`,Fpt=`closed${hF}`,zpt="fade",Wpt="show";class C_ extends ar{static get NAME(){return Npt}close(){if(J.trigger(this._element,Ppt).defaultPrevented)return;this._element.classList.remove(Wpt);const n=this._element.classList.contains(zpt);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),J.trigger(this._element,Fpt),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=C_.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}S_(C_,"close");Oi(C_);const Vpt="button",Hpt="bs.button",Gpt=`.${Hpt}`,Bpt=".data-api",Upt="active",HM='[data-bs-toggle="button"]',Ypt=`click${Gpt}${Bpt}`;class A_ extends ar{static get NAME(){return Vpt}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Upt))}static jQueryInterface(t){return this.each(function(){const n=A_.getOrCreateInstance(this);t==="toggle"&&n[t]()})}}J.on(document,Ypt,HM,e=>{e.preventDefault();const t=e.target.closest(HM);A_.getOrCreateInstance(t).toggle()});Oi(A_);const jpt="swipe",Mu=".bs.swipe",Xpt=`touchstart${Mu}`,qpt=`touchmove${Mu}`,Kpt=`touchend${Mu}`,Zpt=`pointerdown${Mu}`,Jpt=`pointerup${Mu}`,Qpt="touch",t0t="pen",e0t="pointer-event",n0t=40,i0t={endCallback:null,leftCallback:null,rightCallback:null},r0t={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Dp extends wd{constructor(t,n){super(),this._element=t,!(!t||!Dp.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return i0t}static get DefaultType(){return r0t}static get NAME(){return jpt}dispose(){J.off(this._element,Mu)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Nn(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=n0t)return;const n=t/this._deltaX;this._deltaX=0,n&&Nn(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(J.on(this._element,Zpt,t=>this._start(t)),J.on(this._element,Jpt,t=>this._end(t)),this._element.classList.add(e0t)):(J.on(this._element,Xpt,t=>this._start(t)),J.on(this._element,qpt,t=>this._move(t)),J.on(this._element,Kpt,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===t0t||t.pointerType===Qpt)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const s0t="carousel",o0t="bs.carousel",jo=`.${o0t}`,dF=".data-api",a0t="ArrowLeft",l0t="ArrowRight",c0t=500,tf="next",Dl="prev",Bl="left",Xg="right",u0t=`slide${jo}`,c1=`slid${jo}`,f0t=`keydown${jo}`,h0t=`mouseenter${jo}`,d0t=`mouseleave${jo}`,g0t=`dragstart${jo}`,m0t=`load${jo}${dF}`,p0t=`click${jo}${dF}`,gF="carousel",Eg="active",_0t="slide",y0t="carousel-item-end",v0t="carousel-item-start",b0t="carousel-item-next",w0t="carousel-item-prev",mF=".active",pF=".carousel-item",x0t=mF+pF,E0t=".carousel-item img",T0t=".carousel-indicators",S0t="[data-bs-slide], [data-bs-slide-to]",C0t='[data-bs-ride="carousel"]',A0t={[a0t]:Xg,[l0t]:Bl},M0t={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},R0t={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class xd extends ar{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=_t.findOne(T0t,this._element),this._addEventListeners(),this._config.ride===gF&&this.cycle()}static get Default(){return M0t}static get DefaultType(){return R0t}static get NAME(){return s0t}next(){this._slide(tf)}nextWhenVisible(){!document.hidden&&Au(this._element)&&this.next()}prev(){this._slide(Dl)}pause(){this._isSliding&&nF(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){J.one(this._element,c1,()=>this.cycle());return}this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){J.one(this._element,c1,()=>this.to(t));return}const i=this._getItemIndex(this._getActive());if(i===t)return;const r=t>i?tf:Dl;this._slide(r,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&J.on(this._element,f0t,t=>this._keydown(t)),this._config.pause==="hover"&&(J.on(this._element,h0t,()=>this.pause()),J.on(this._element,d0t,()=>this._maybeEnableCycle())),this._config.touch&&Dp.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of _t.find(E0t,this._element))J.on(i,g0t,r=>r.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Bl)),rightCallback:()=>this._slide(this._directionToOrder(Xg)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),c0t+this._config.interval))}};this._swipeHelper=new Dp(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=A0t[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=_t.findOne(mF,this._indicatorsElement);n.classList.remove(Eg),n.removeAttribute("aria-current");const i=_t.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(Eg),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const i=this._getActive(),r=t===tf,s=n||o2(this._getItems(),i,r,this._config.wrap);if(s===i)return;const o=this._getItemIndex(s),a=d=>J.trigger(this._element,d,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(a(u0t).defaultPrevented||!i||!s)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const u=r?v0t:y0t,f=r?b0t:w0t;s.classList.add(f),bd(s),i.classList.add(u),s.classList.add(u);const h=()=>{s.classList.remove(u,f),s.classList.add(Eg),i.classList.remove(Eg,f,u),this._isSliding=!1,a(c1)};this._queueCallback(h,i,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(_0t)}_getActive(){return _t.findOne(x0t,this._element)}_getItems(){return _t.find(pF,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Mi()?t===Bl?Dl:tf:t===Bl?tf:Dl}_orderToDirection(t){return Mi()?t===Dl?Bl:Xg:t===Dl?Xg:Bl}static jQueryInterface(t){return this.each(function(){const n=xd.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}J.on(document,p0t,S0t,function(e){const t=_t.getElementFromSelector(this);if(!t||!t.classList.contains(gF))return;e.preventDefault();const n=xd.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if(bs.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});J.on(window,m0t,()=>{const e=_t.find(C0t);for(const t of e)xd.getOrCreateInstance(t)});Oi(xd);const I0t="collapse",L0t="bs.collapse",Ed=`.${L0t}`,O0t=".data-api",k0t=`show${Ed}`,$0t=`shown${Ed}`,N0t=`hide${Ed}`,D0t=`hidden${Ed}`,P0t=`click${Ed}${O0t}`,u1="show",ec="collapse",Tg="collapsing",F0t="collapsed",z0t=`:scope .${ec} .${ec}`,W0t="collapse-horizontal",V0t="width",H0t="height",G0t=".collapse.show, .collapse.collapsing",Ab='[data-bs-toggle="collapse"]',B0t={parent:null,toggle:!0},U0t={parent:"(null|element)",toggle:"boolean"};class xh extends ar{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const i=_t.find(Ab);for(const r of i){const s=_t.getSelectorFromElement(r),o=_t.find(s).filter(a=>a===this._element);s!==null&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return B0t}static get DefaultType(){return U0t}static get NAME(){return I0t}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(G0t).filter(a=>a!==this._element).map(a=>xh.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||J.trigger(this._element,k0t).defaultPrevented)return;for(const a of t)a.hide();const i=this._getDimension();this._element.classList.remove(ec),this._element.classList.add(Tg),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Tg),this._element.classList.add(ec,u1),this._element.style[i]="",J.trigger(this._element,$0t)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||J.trigger(this._element,N0t).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,bd(this._element),this._element.classList.add(Tg),this._element.classList.remove(ec,u1);for(const r of this._triggerArray){const s=_t.getElementFromSelector(r);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Tg),this._element.classList.add(ec),J.trigger(this._element,D0t)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(t=this._element){return t.classList.contains(u1)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=ko(t.parent),t}_getDimension(){return this._element.classList.contains(W0t)?V0t:H0t}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Ab);for(const n of t){const i=_t.getElementFromSelector(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(t){const n=_t.find(z0t,this._config.parent);return _t.find(t,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const i of t)i.classList.toggle(F0t,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const i=xh.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}J.on(document,P0t,Ab,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(const t of _t.getMultipleElementsFromSelector(this))xh.getOrCreateInstance(t,{toggle:!1}).toggle()});Oi(xh);const GM="dropdown",Y0t="bs.dropdown",ml=`.${Y0t}`,l2=".data-api",j0t="Escape",BM="Tab",X0t="ArrowUp",UM="ArrowDown",q0t=2,K0t=`hide${ml}`,Z0t=`hidden${ml}`,J0t=`show${ml}`,Q0t=`shown${ml}`,_F=`click${ml}${l2}`,yF=`keydown${ml}${l2}`,t_t=`keyup${ml}${l2}`,Ul="show",e_t="dropup",n_t="dropend",i_t="dropstart",r_t="dropup-center",s_t="dropdown-center",Sa='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',o_t=`${Sa}.${Ul}`,qg=".dropdown-menu",a_t=".navbar",l_t=".navbar-nav",c_t=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",u_t=Mi()?"top-end":"top-start",f_t=Mi()?"top-start":"top-end",h_t=Mi()?"bottom-end":"bottom-start",d_t=Mi()?"bottom-start":"bottom-end",g_t=Mi()?"left-start":"right-start",m_t=Mi()?"right-start":"left-start",p_t="top",__t="bottom",y_t={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},v_t={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Rr extends ar{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=_t.next(this._element,qg)[0]||_t.prev(this._element,qg)[0]||_t.findOne(qg,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return y_t}static get DefaultType(){return v_t}static get NAME(){return GM}toggle(){return this._isShown()?this.hide():this.show()}show(){if($o(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!J.trigger(this._element,J0t,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(l_t))for(const i of[].concat(...document.body.children))J.on(i,"mouseover",Np);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ul),this._element.classList.add(Ul),J.trigger(this._element,Q0t,t)}}hide(){if($o(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!J.trigger(this._element,K0t,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))J.off(i,"mouseover",Np);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ul),this._element.classList.remove(Ul),this._element.setAttribute("aria-expanded","false"),bs.removeDataAttribute(this._menu,"popper"),J.trigger(this._element,Z0t,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!vs(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${GM.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof tF>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:vs(this._config.reference)?t=ko(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=s2(t,this._menu,n)}_isShown(){return this._menu.classList.contains(Ul)}_getPlacement(){const t=this._parent;if(t.classList.contains(n_t))return g_t;if(t.classList.contains(i_t))return m_t;if(t.classList.contains(r_t))return p_t;if(t.classList.contains(s_t))return __t;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(e_t)?n?f_t:u_t:n?d_t:h_t}_detectNavbar(){return this._element.closest(a_t)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(bs.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Nn(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:n}){const i=_t.find(c_t,this._menu).filter(r=>Au(r));i.length&&o2(i,n,t===UM,!i.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=Rr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===q0t||t.type==="keyup"&&t.key!==BM)return;const n=_t.find(o_t);for(const i of n){const r=Rr.getInstance(i);if(!r||r._config.autoClose===!1)continue;const s=t.composedPath(),o=s.includes(r._menu);if(s.includes(r._element)||r._config.autoClose==="inside"&&!o||r._config.autoClose==="outside"&&o||r._menu.contains(t.target)&&(t.type==="keyup"&&t.key===BM||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:r._element};t.type==="click"&&(a.clickEvent=t),r._completeHide(a)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),i=t.key===j0t,r=[X0t,UM].includes(t.key);if(!r&&!i||n&&!i)return;t.preventDefault();const s=this.matches(Sa)?this:_t.prev(this,Sa)[0]||_t.next(this,Sa)[0]||_t.findOne(Sa,t.delegateTarget.parentNode),o=Rr.getOrCreateInstance(s);if(r){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),s.focus())}}J.on(document,yF,Sa,Rr.dataApiKeydownHandler);J.on(document,yF,qg,Rr.dataApiKeydownHandler);J.on(document,_F,Rr.clearMenus);J.on(document,t_t,Rr.clearMenus);J.on(document,_F,Sa,function(e){e.preventDefault(),Rr.getOrCreateInstance(this).toggle()});Oi(Rr);const vF="backdrop",b_t="fade",YM="show",jM=`mousedown.bs.${vF}`,w_t={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},x_t={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class bF extends wd{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return w_t}static get DefaultType(){return x_t}static get NAME(){return vF}show(t){if(!this._config.isVisible){Nn(t);return}this._append();const n=this._getElement();this._config.isAnimated&&bd(n),n.classList.add(YM),this._emulateAnimation(()=>{Nn(t)})}hide(t){if(!this._config.isVisible){Nn(t);return}this._getElement().classList.remove(YM),this._emulateAnimation(()=>{this.dispose(),Nn(t)})}dispose(){this._isAppended&&(J.off(this._element,jM),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(b_t),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=ko(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),J.on(t,jM,()=>{Nn(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){sF(t,this._getElement(),this._config.isAnimated)}}const E_t="focustrap",T_t="bs.focustrap",Pp=`.${T_t}`,S_t=`focusin${Pp}`,C_t=`keydown.tab${Pp}`,A_t="Tab",M_t="forward",XM="backward",R_t={autofocus:!0,trapElement:null},I_t={autofocus:"boolean",trapElement:"element"};class wF extends wd{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return R_t}static get DefaultType(){return I_t}static get NAME(){return E_t}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),J.off(document,Pp),J.on(document,S_t,t=>this._handleFocusin(t)),J.on(document,C_t,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,J.off(document,Pp))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const i=_t.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===XM?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){t.key===A_t&&(this._lastTabNavDirection=t.shiftKey?XM:M_t)}}const qM=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",KM=".sticky-top",Sg="padding-right",ZM="margin-right";class Mb{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Sg,n=>n+t),this._setElementAttributes(qM,Sg,n=>n+t),this._setElementAttributes(KM,ZM,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Sg),this._resetElementAttributes(qM,Sg),this._resetElementAttributes(KM,ZM)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,i){const r=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,n);const a=window.getComputedStyle(o).getPropertyValue(n);o.style.setProperty(n,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,s)}_saveInitialAttribute(t,n){const i=t.style.getPropertyValue(n);i&&bs.setDataAttribute(t,n,i)}_resetElementAttributes(t,n){const i=r=>{const s=bs.getDataAttribute(r,n);if(s===null){r.style.removeProperty(n);return}bs.removeDataAttribute(r,n),r.style.setProperty(n,s)};this._applyManipulationCallback(t,i)}_applyManipulationCallback(t,n){if(vs(t)){n(t);return}for(const i of _t.find(t,this._element))n(i)}}const L_t="modal",O_t="bs.modal",Ri=`.${O_t}`,k_t=".data-api",$_t="Escape",N_t=`hide${Ri}`,D_t=`hidePrevented${Ri}`,xF=`hidden${Ri}`,EF=`show${Ri}`,P_t=`shown${Ri}`,F_t=`resize${Ri}`,z_t=`click.dismiss${Ri}`,W_t=`mousedown.dismiss${Ri}`,V_t=`keydown.dismiss${Ri}`,H_t=`click${Ri}${k_t}`,JM="modal-open",G_t="fade",QM="show",f1="modal-static",B_t=".modal.show",U_t=".modal-dialog",Y_t=".modal-body",j_t='[data-bs-toggle="modal"]',X_t={backdrop:!0,focus:!0,keyboard:!0},q_t={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Qc extends ar{constructor(t,n){super(t,n),this._dialog=_t.findOne(U_t,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Mb,this._addEventListeners()}static get Default(){return X_t}static get DefaultType(){return q_t}static get NAME(){return L_t}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||J.trigger(this._element,EF,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(JM),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||J.trigger(this._element,N_t).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(QM),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){J.off(window,Ri),J.off(this._dialog,Ri),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new bF({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new wF({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=_t.findOne(Y_t,this._dialog);n&&(n.scrollTop=0),bd(this._element),this._element.classList.add(QM);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,J.trigger(this._element,P_t,{relatedTarget:t})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){J.on(this._element,V_t,t=>{if(t.key===$_t){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),J.on(window,F_t,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),J.on(this._element,W_t,t=>{J.one(this._element,z_t,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(JM),this._resetAdjustments(),this._scrollBar.reset(),J.trigger(this._element,xF)})}_isAnimated(){return this._element.classList.contains(G_t)}_triggerBackdropTransition(){if(J.trigger(this._element,D_t).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(f1)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(f1),this._queueCallback(()=>{this._element.classList.remove(f1),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!t){const r=Mi()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&t){const r=Mi()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const i=Qc.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](n)}})}}J.on(document,H_t,j_t,function(e){const t=_t.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),J.one(t,EF,r=>{r.defaultPrevented||J.one(t,xF,()=>{Au(this)&&this.focus()})});const n=_t.findOne(B_t);n&&Qc.getInstance(n).hide(),Qc.getOrCreateInstance(t).toggle(this)});S_(Qc);Oi(Qc);const K_t="offcanvas",Z_t="bs.offcanvas",Ws=`.${Z_t}`,TF=".data-api",J_t=`load${Ws}${TF}`,Q_t="Escape",tR="show",eR="showing",nR="hiding",tyt="offcanvas-backdrop",SF=".offcanvas.show",eyt=`show${Ws}`,nyt=`shown${Ws}`,iyt=`hide${Ws}`,iR=`hidePrevented${Ws}`,CF=`hidden${Ws}`,ryt=`resize${Ws}`,syt=`click${Ws}${TF}`,oyt=`keydown.dismiss${Ws}`,ayt='[data-bs-toggle="offcanvas"]',lyt={backdrop:!0,keyboard:!0,scroll:!1},cyt={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class No extends ar{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return lyt}static get DefaultType(){return cyt}static get NAME(){return K_t}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||J.trigger(this._element,eyt,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Mb().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(eR);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(tR),this._element.classList.remove(eR),J.trigger(this._element,nyt,{relatedTarget:t})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||J.trigger(this._element,iyt).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(nR),this._backdrop.hide();const n=()=>{this._element.classList.remove(tR,nR),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Mb().reset(),J.trigger(this._element,CF)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){J.trigger(this._element,iR);return}this.hide()},n=!!this._config.backdrop;return new bF({className:tyt,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new wF({trapElement:this._element})}_addEventListeners(){J.on(this._element,oyt,t=>{if(t.key===Q_t){if(this._config.keyboard){this.hide();return}J.trigger(this._element,iR)}})}static jQueryInterface(t){return this.each(function(){const n=No.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}J.on(document,syt,ayt,function(e){const t=_t.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),$o(this))return;J.one(t,CF,()=>{Au(this)&&this.focus()});const n=_t.findOne(SF);n&&n!==t&&No.getInstance(n).hide(),No.getOrCreateInstance(t).toggle(this)});J.on(window,J_t,()=>{for(const e of _t.find(SF))No.getOrCreateInstance(e).show()});J.on(window,ryt,()=>{for(const e of _t.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&No.getOrCreateInstance(e).hide()});S_(No);Oi(No);const uyt=/^aria-[\w-]*$/i,AF={"*":["class","dir","id","lang","role",uyt],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},fyt=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),hyt=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,dyt=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?fyt.has(n)?!!hyt.test(e.nodeValue):!0:t.filter(i=>i instanceof RegExp).some(i=>i.test(n))};function gyt(e,t,n){if(!e.length)return e;if(n&&typeof n=="function")return n(e);const r=new window.DOMParser().parseFromString(e,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(const o of s){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(t["*"]||[],t[a]||[]);for(const u of l)dyt(u,c)||o.removeAttribute(u.nodeName)}return r.body.innerHTML}const myt="TemplateFactory",pyt={allowList:AF,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},_yt={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},yyt={entry:"(string|element|function|null)",selector:"(string|element)"};class vyt extends wd{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return pyt}static get DefaultType(){return _yt}static get NAME(){return myt}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,s]of Object.entries(this._config.content))this._setContent(t,s,r);const n=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,i]of Object.entries(t))super._typeCheckConfig({selector:n,entry:i},yyt)}_setContent(t,n,i){const r=_t.findOne(i,t);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if(vs(n)){this._putElementInTemplate(ko(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(t){return this._config.sanitize?gyt(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Nn(t,[this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}}const byt="tooltip",wyt=new Set(["sanitize","allowList","sanitizeFn"]),h1="fade",xyt="modal",Cg="show",Eyt=".tooltip-inner",rR=`.${xyt}`,sR="hide.bs.modal",ef="hover",d1="focus",Tyt="click",Syt="manual",Cyt="hide",Ayt="hidden",Myt="show",Ryt="shown",Iyt="inserted",Lyt="click",Oyt="focusin",kyt="focusout",$yt="mouseenter",Nyt="mouseleave",Dyt={AUTO:"auto",TOP:"top",RIGHT:Mi()?"left":"right",BOTTOM:"bottom",LEFT:Mi()?"right":"left"},Pyt={allowList:AF,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Fyt={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ru extends ar{constructor(t,n){if(typeof tF>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Pyt}static get DefaultType(){return Fyt}static get NAME(){return byt}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),J.off(this._element.closest(rR),sR,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=J.trigger(this._element,this.constructor.eventName(Myt)),i=(iF(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(r),J.trigger(this._element,this.constructor.eventName(Iyt))),this._popper=this._createPopper(r),r.classList.add(Cg),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))J.on(a,"mouseover",Np);const o=()=>{J.trigger(this._element,this.constructor.eventName(Ryt)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||J.trigger(this._element,this.constructor.eventName(Cyt)).defaultPrevented)return;if(this._getTipElement().classList.remove(Cg),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))J.off(r,"mouseover",Np);this._activeTrigger[Tyt]=!1,this._activeTrigger[d1]=!1,this._activeTrigger[ef]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),J.trigger(this._element,this.constructor.eventName(Ayt)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(h1,Cg),n.classList.add(`bs-${this.constructor.NAME}-auto`);const i=Tpt(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(h1),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new vyt({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Eyt]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(h1)}_isShown(){return this.tip&&this.tip.classList.contains(Cg)}_createPopper(t){const n=Nn(this._config.placement,[this,t,this._element]),i=Dyt[n.toUpperCase()];return s2(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Nn(t,[this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...Nn(this._config.popperConfig,[n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")J.on(this._element,this.constructor.eventName(Lyt),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(n!==Syt){const i=n===ef?this.constructor.eventName($yt):this.constructor.eventName(Oyt),r=n===ef?this.constructor.eventName(Nyt):this.constructor.eventName(kyt);J.on(this._element,i,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusin"?d1:ef]=!0,o._enter()}),J.on(this._element,r,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusout"?d1:ef]=o._element.contains(s.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},J.on(this._element.closest(rR),sR,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=bs.getDataAttributes(this._element);for(const i of Object.keys(n))wyt.has(i)&&delete n[i];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:ko(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,i]of Object.entries(this._config))this.constructor.Default[n]!==i&&(t[n]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=Ru.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Oi(Ru);const zyt="popover",Wyt=".popover-header",Vyt=".popover-body",Hyt={...Ru.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Gyt={...Ru.DefaultType,content:"(null|string|element|function)"};class c2 extends Ru{static get Default(){return Hyt}static get DefaultType(){return Gyt}static get NAME(){return zyt}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Wyt]:this._getTitle(),[Vyt]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=c2.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Oi(c2);const Byt="scrollspy",Uyt="bs.scrollspy",u2=`.${Uyt}`,Yyt=".data-api",jyt=`activate${u2}`,oR=`click${u2}`,Xyt=`load${u2}${Yyt}`,qyt="dropdown-item",Pl="active",Kyt='[data-bs-spy="scroll"]',g1="[href]",Zyt=".nav, .list-group",aR=".nav-link",Jyt=".nav-item",Qyt=".list-group-item",t1t=`${aR}, ${Jyt} > ${aR}, ${Qyt}`,e1t=".dropdown",n1t=".dropdown-toggle",i1t={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},r1t={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class M_ extends ar{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return i1t}static get DefaultType(){return r1t}static get NAME(){return Byt}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=ko(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(J.off(this._config.target,oR),J.on(this._config.target,oR,g1,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:r,behavior:"smooth"});return}i.scrollTop=r}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){const n=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(n(o))},r=(this._rootElement||document.documentElement).scrollTop,s=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&a){if(i(o),!r)return;continue}!s&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=_t.find(g1,this._config.target);for(const n of t){if(!n.hash||$o(n))continue;const i=_t.findOne(decodeURI(n.hash),this._element);Au(i)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Pl),this._activateParents(t),J.trigger(this._element,jyt,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(qyt)){_t.findOne(n1t,t.closest(e1t)).classList.add(Pl);return}for(const n of _t.parents(t,Zyt))for(const i of _t.prev(n,t1t))i.classList.add(Pl)}_clearActiveClass(t){t.classList.remove(Pl);const n=_t.find(`${g1}.${Pl}`,t);for(const i of n)i.classList.remove(Pl)}static jQueryInterface(t){return this.each(function(){const n=M_.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}J.on(window,Xyt,()=>{for(const e of _t.find(Kyt))M_.getOrCreateInstance(e)});Oi(M_);const s1t="tab",o1t="bs.tab",pl=`.${o1t}`,a1t=`hide${pl}`,l1t=`hidden${pl}`,c1t=`show${pl}`,u1t=`shown${pl}`,f1t=`click${pl}`,h1t=`keydown${pl}`,d1t=`load${pl}`,g1t="ArrowLeft",lR="ArrowRight",m1t="ArrowUp",cR="ArrowDown",m1="Home",uR="End",Ca="active",fR="fade",p1="show",p1t="dropdown",MF=".dropdown-toggle",_1t=".dropdown-menu",_1=`:not(${MF})`,y1t='.list-group, .nav, [role="tablist"]',v1t=".nav-item, .list-group-item",b1t=`.nav-link${_1}, .list-group-item${_1}, [role="tab"]${_1}`,RF='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',y1=`${b1t}, ${RF}`,w1t=`.${Ca}[data-bs-toggle="tab"], .${Ca}[data-bs-toggle="pill"], .${Ca}[data-bs-toggle="list"]`;class tu extends ar{constructor(t){super(t),this._parent=this._element.closest(y1t),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),J.on(this._element,h1t,n=>this._keydown(n)))}static get NAME(){return s1t}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),i=n?J.trigger(n,a1t,{relatedTarget:t}):null;J.trigger(t,c1t,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(Ca),this._activate(_t.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(p1);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),J.trigger(t,u1t,{relatedTarget:n})};this._queueCallback(i,t,t.classList.contains(fR))}_deactivate(t,n){if(!t)return;t.classList.remove(Ca),t.blur(),this._deactivate(_t.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(p1);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),J.trigger(t,l1t,{relatedTarget:n})};this._queueCallback(i,t,t.classList.contains(fR))}_keydown(t){if(![g1t,lR,m1t,cR,m1,uR].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(r=>!$o(r));let i;if([m1,uR].includes(t.key))i=n[t.key===m1?0:n.length-1];else{const r=[lR,cR].includes(t.key);i=o2(n,t.target,r,!0)}i&&(i.focus({preventScroll:!0}),tu.getOrCreateInstance(i).show())}_getChildren(){return _t.find(y1,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",n),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=_t.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const i=this._getOuterElement(t);if(!i.classList.contains(p1t))return;const r=(s,o)=>{const a=_t.findOne(s,i);a&&a.classList.toggle(o,n)};r(MF,Ca),r(_1t,p1),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,i){t.hasAttribute(n)||t.setAttribute(n,i)}_elemIsActive(t){return t.classList.contains(Ca)}_getInnerElement(t){return t.matches(y1)?t:_t.findOne(y1,t)}_getOuterElement(t){return t.closest(v1t)||t}static jQueryInterface(t){return this.each(function(){const n=tu.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}J.on(document,f1t,RF,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!$o(this)&&tu.getOrCreateInstance(this).show()});J.on(window,d1t,()=>{for(const e of _t.find(w1t))tu.getOrCreateInstance(e)});Oi(tu);const x1t="toast",E1t="bs.toast",Xo=`.${E1t}`,T1t=`mouseover${Xo}`,S1t=`mouseout${Xo}`,C1t=`focusin${Xo}`,A1t=`focusout${Xo}`,M1t=`hide${Xo}`,R1t=`hidden${Xo}`,I1t=`show${Xo}`,L1t=`shown${Xo}`,O1t="fade",hR="hide",Ag="show",Mg="showing",k1t={animation:"boolean",autohide:"boolean",delay:"number"},$1t={animation:!0,autohide:!0,delay:5e3};class R_ extends ar{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return $1t}static get DefaultType(){return k1t}static get NAME(){return x1t}show(){if(J.trigger(this._element,I1t).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(O1t);const n=()=>{this._element.classList.remove(Mg),J.trigger(this._element,L1t),this._maybeScheduleHide()};this._element.classList.remove(hR),bd(this._element),this._element.classList.add(Ag,Mg),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||J.trigger(this._element,M1t).defaultPrevented)return;const n=()=>{this._element.classList.add(hR),this._element.classList.remove(Mg,Ag),J.trigger(this._element,R1t)};this._element.classList.add(Mg),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ag),super.dispose()}isShown(){return this._element.classList.contains(Ag)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){J.on(this._element,T1t,t=>this._onInteraction(t,!0)),J.on(this._element,S1t,t=>this._onInteraction(t,!1)),J.on(this._element,C1t,t=>this._onInteraction(t,!0)),J.on(this._element,A1t,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=R_.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}S_(R_);Oi(R_);const f2=o7(d9);f2.use(u7());f2.use($mt);f2.mount("#app");export{mmt as E,Zt as R,Ot as a,M as b,ft as c,oi as d,Pq as e,ct as o};
