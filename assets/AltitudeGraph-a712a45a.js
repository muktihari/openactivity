var T2=Object.defineProperty;var C2=(t,n,e)=>n in t?T2(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var Eu=(t,n,e)=>(C2(t,typeof n!="symbol"?n+"":n,e),e);import{a as xt,t as Ph,n as N2,m as Xt,b as kt,c as L2,R as oa,r as Ih,d as Es,e as ks,C as Ts,f as ku,g as Tu,h as Cu,i as Yt,j as Cs,k as Rh,l as Et,o as Ne,p as Re,q as Nu,s as aa,u as Ns,v as Ls,w as z2,x as ca,y as P2,z as Ve,A as zs,B as sa,D as Bh,E as I2,F as cr,G as Fh,H as Dh,I as sr,J as Ps,K as R2,L as B2,M as Oh,N as F2,O as D2,P as O2,Q as q2,S as Y2,T as j2,U as Lu,V as qh,W as Yh,X as jh,Y as Xh,Z as Wh,$ as X2,a0 as W2,a1 as G2,a2 as V2,a3 as H2,a4 as U2,a5 as zu,a6 as Gh,a7 as Vh,a8 as Z2,a9 as K2,aa as Is,ab as fa,ac as Kr,ad as ie,ae as Hh,af as Uh,ag as di,ah as ua,ai as Q2,aj as J2,ak as tb,al as nb,am as Rn,an as Rs,ao as eb,ap as rb,aq as Bs,ar as ib,as as Pu,at as He,au as ob,av as ab,aw as cb,ax as Zh,ay as Kh,az as Qh,aA as sb,aB as fb,aC as ub}from"./main-91dba2f4.js";function lb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const Jh=td(nd),hb=td(db);function td(t){return function(n,e,r=e){if(!((e=+e)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:a}=n;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((a=Math.floor(a!==void 0?a:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!a||!e&&!r)return n;const c=e&&t(e),s=r&&t(r),f=i.slice();return c&&s?(De(c,f,i,o,a),De(c,i,f,o,a),De(c,f,i,o,a),Oe(s,i,f,o,a),Oe(s,f,i,o,a),Oe(s,i,f,o,a)):c?(De(c,i,f,o,a),De(c,f,i,o,a),De(c,i,f,o,a)):s&&(Oe(s,i,f,o,a),Oe(s,f,i,o,a),Oe(s,i,f,o,a)),n}}function De(t,n,e,r,i){for(let o=0,a=r*i;o<a;)t(n,e,o,o+=r,1)}function Oe(t,n,e,r,i){for(let o=0,a=r*i;o<r;++o)t(n,e,o,o+a,r)}function db(t){const n=nd(t);return(e,r,i,o,a)=>{i<<=2,o<<=2,a<<=2,n(e,r,i+0,o+0,a),n(e,r,i+1,o+1,a),n(e,r,i+2,o+2,a),n(e,r,i+3,o+3,a)}}function nd(t){const n=Math.floor(t);if(n===t)return pb(t);const e=t-n,r=2*t+1;return(i,o,a,c,s)=>{if(!((c-=s)>=a))return;let f=n*o[a];const u=s*n,h=u+s;for(let l=a,d=a+u;l<d;l+=s)f+=o[Math.min(c,l)];for(let l=a,d=c;l<=d;l+=s)f+=o[Math.min(c,l+u)],i[l]=(f+e*(o[Math.max(a,l-h)]+o[Math.min(c,l+h)]))/r,f-=o[Math.max(a,l-u)]}}function pb(t){const n=2*t+1;return(e,r,i,o,a)=>{if(!((o-=a)>=i))return;let c=t*r[i];const s=a*t;for(let f=i,u=i+s;f<u;f+=a)c+=r[Math.min(o,f)];for(let f=i,u=o;f<=u;f+=a)c+=r[Math.min(o,f+s)],e[f]=c/n,c-=r[Math.max(i,f-s)]}}function la(t,n){let e=0;if(n===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++e;else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(i=+i)>=i&&++e}return e}function gb(t){return t.length|0}function mb(t){return!(t>0)}function bb(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function yb(t){return n=>t(...n)}function wb(...t){const n=typeof t[t.length-1]=="function"&&yb(t.pop());t=t.map(bb);const e=t.map(gb),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||e.some(mb))return o;for(;;){o.push(i.map((c,s)=>t[s][c]));let a=r;for(;++i[a]===e[a];){if(a===0)return n?o.map(n):o;i[a--]=0}}}function _b(t,n){var e=0,r=0;return Float64Array.from(t,n===void 0?i=>e+=+i||0:i=>e+=+n(i,r++,t)||0)}function Fs(t,n){let e=0,r,i=0,o=0;if(n===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++e,o+=r*(a-i));else{let a=-1;for(let c of t)(c=n(c,++a,t))!=null&&(c=+c)>=c&&(r=c-i,i+=r/++e,o+=r*(c-i))}if(e>1)return o/(e-1)}function pi(t,n){const e=Fs(t,n);return e&&Math.sqrt(e)}class $n{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=e[i],a=n+o,c=Math.abs(n)<Math.abs(o)?n-(a-o):o-(a-n);c&&(e[r++]=c),n=a}return e[r]=n,this._n=r+1,this}valueOf(){const n=this._partials;let e=this._n,r,i,o,a=0;if(e>0){for(a=n[--e];e>0&&(r=a,i=n[--e],a=r+i,o=i-(a-r),!o););e>0&&(o<0&&n[e-1]<0||o>0&&n[e-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class Le extends Map{constructor(n,e=id){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(Nc(this,n))}has(n){return super.has(Nc(this,n))}set(n,e){return super.set(ed(this,n),e)}delete(n){return super.delete(rd(this,n))}}class gi extends Set{constructor(n,e=id){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const r of n)this.add(r)}has(n){return super.has(Nc(this,n))}add(n){return super.add(ed(this,n))}delete(n){return super.delete(rd(this,n))}}function Nc({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function ed({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function rd({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function id(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Lc(t){return t}function Xn(t,...n){return Ds(t,Lc,Lc,n)}function er(t,n,...e){return Ds(t,Lc,n,e)}function vb(t,n,...e){return Ds(t,Array.from,n,e)}function Ds(t,n,e,r){return function i(o,a){if(a>=r.length)return e(o);const c=new Le,s=r[a++];let f=-1;for(const u of o){const h=s(u,++f,o),l=c.get(h);l?l.push(u):c.set(h,[u])}for(const[u,h]of c)c.set(u,i(h,a));return n(c)}(t,0)}function xb(t,n){return Array.from(n,e=>t[e])}function Qr(t,...n){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[e]=n;if(e&&e.length!==2||n.length>1){const r=Uint32Array.from(t,(i,o)=>o);return n.length>1?(n=n.map(i=>t.map(i)),r.sort((i,o)=>{for(const a of n){const c=Jr(a[i],a[o]);if(c)return c}})):(e=t.map(e),r.sort((i,o)=>Jr(e[i],e[o]))),xb(t,r)}return t.sort(Os(e))}function Os(t=xt){if(t===xt)return Jr;if(typeof t!="function")throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||r===0?r:(t(e,e)===0)-(t(n,n)===0)}}function Jr(t,n){return(t==null||!(t>=t))-(n==null||!(n>=n))||(t<n?-1:t>n?1:0)}function qs(t,n,e){return(n.length!==2?Qr(er(t,n,e),([r,i],[o,a])=>xt(i,a)||xt(r,o)):Qr(Xn(t,e),([r,i],[o,a])=>n(i,a)||xt(r,o))).map(([r])=>r)}function od(t,n,e){let r;for(;;){const i=Ph(t,n,e);if(i===r||i===0||!isFinite(i))return[t,n];i>0?(t=Math.floor(t/i)*i,n=Math.ceil(n/i)*i):i<0&&(t=Math.ceil(t*i)/i,n=Math.floor(n*i)/i),r=i}}function Ys(t){return Math.max(1,Math.ceil(Math.log(la(t))/Math.LN2)+1)}function $b(t,n){let e,r=-1,i=-1;if(n===void 0)for(const o of t)++i,o!=null&&(e<o||e===void 0&&o>=o)&&(e=o,r=i);else for(let o of t)(o=n(o,++i,t))!=null&&(e<o||e===void 0&&o>=o)&&(e=o,r=i);return r}function Mb(t,n){let e,r=-1,i=-1;if(n===void 0)for(const o of t)++i,o!=null&&(e>o||e===void 0&&o>=o)&&(e=o,r=i);else for(let o of t)(o=n(o,++i,t))!=null&&(e>o||e===void 0&&o>=o)&&(e=o,r=i);return r}function ad(t,n,e=0,r=1/0,i){if(n=Math.floor(n),e=Math.floor(Math.max(0,e)),r=Math.floor(Math.min(t.length-1,r)),!(e<=n&&n<=r))return t;for(i=i===void 0?Jr:Os(i);r>e;){if(r-e>600){const s=r-e+1,f=n-e+1,u=Math.log(s),h=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*h*(s-h)/s)*(f-s/2<0?-1:1),d=Math.max(e,Math.floor(n-f*h/s+l)),p=Math.min(r,Math.floor(n+(s-f)*h/s+l));ad(t,n,d,p,i)}const o=t[n];let a=e,c=r;for(Nr(t,e,n),i(t[r],o)>0&&Nr(t,e,r);a<c;){for(Nr(t,a,c),++a,--c;i(t[a],o)<0;)++a;for(;i(t[c],o)>0;)--c}i(t[e],o)===0?Nr(t,e,c):(++c,Nr(t,c,r)),c<=n&&(e=c+1),n<=c&&(r=c-1)}return t}function Nr(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function js(t,n=xt){let e,r=!1;if(n.length===1){let i;for(const o of t){const a=n(o);(r?xt(a,i)>0:xt(a,a)===0)&&(e=o,i=a,r=!0)}}else for(const i of t)(r?n(i,e)>0:n(i,i)===0)&&(e=i,r=!0);return e}function oe(t,n,e){if(t=Float64Array.from(N2(t,e)),!(!(r=t.length)||isNaN(n=+n))){if(n<=0||r<2)return Xt(t);if(n>=1)return kt(t);var r,i=(r-1)*n,o=Math.floor(i),a=kt(ad(t,o).subarray(0,o+1)),c=Xt(t.subarray(o+1));return a+(c-a)*(i-o)}}function Sb(t,n,e=L2){if(!(!(r=t.length)||isNaN(n=+n))){if(n<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,o=Math.floor(i),a=+e(t[o],o,t),c=+e(t[o+1],o+1,t);return a+(c-a)*(i-o)}}function Ab(t,n,e){const r=la(t),i=oe(t,.75)-oe(t,.25);return r&&i?Math.ceil((e-n)/(2*i*Math.pow(r,-1/3))):1}function cd(t,n,e){const r=la(t),i=pi(t);return r&&i?Math.ceil((e-n)*Math.cbrt(r)/(3.49*i)):1}function ti(t,n){return oe(t,.5,n)}function*Eb(t){for(const n of t)yield*n}function sd(t){return Array.from(Eb(t))}function fd(t,n){const e=new Le;if(n===void 0)for(let o of t)o!=null&&o>=o&&e.set(o,(e.get(o)||0)+1);else{let o=-1;for(let a of t)(a=n(a,++o,t))!=null&&a>=a&&e.set(a,(e.get(a)||0)+1)}let r,i=0;for(const[o,a]of e)a>i&&(i=a,r=o);return r}function kb(t,n=Tb){const e=[];let r,i=!1;for(const o of t)i&&e.push(n(r,o)),r=o,i=!0;return e}function Tb(t,n){return[t,n]}function rn(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((n-t)/e))|0,o=new Array(i);++r<i;)o[r]=t+r*e;return o}function ud(t,n=xt){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let e=Array.from(t);const r=new Float64Array(e.length);n.length!==2&&(e=e.map(n),n=xt);const i=(c,s)=>n(e[c],e[s]);let o,a;return t=Uint32Array.from(e,(c,s)=>s),t.sort(n===xt?(c,s)=>Jr(e[c],e[s]):Os(i)),t.forEach((c,s)=>{const f=i(c,o===void 0?c:o);f>=0?((o===void 0||f>0)&&(o=c,a=s),r[c]=a):r[c]=NaN}),r}function Cb(t,n=xt){let e,r=!1;if(n.length===1){let i;for(const o of t){const a=n(o);(r?xt(a,i)<0:xt(a,a)===0)&&(e=o,i=a,r=!0)}}else for(const i of t)(r?n(i,e)<0:n(i,i)===0)&&(e=i,r=!0);return e}function Sn(t,n){let e=0;if(n===void 0)for(let r of t)(r=+r)&&(e+=r);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&(e+=i)}return e}function fo(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}const ld=Math.PI/180,hd=180/Math.PI,uo=18,dd=.96422,pd=1,gd=.82521,md=4/29,rr=6/29,bd=3*rr*rr,Nb=rr*rr*rr;function yd(t){if(t instanceof Mn)return new Mn(t.l,t.a,t.b,t.opacity);if(t instanceof Bn)return wd(t);t instanceof oa||(t=Ih(t));var n=Ka(t.r),e=Ka(t.g),r=Ka(t.b),i=Ha((.2225045*n+.7168786*e+.0606169*r)/pd),o,a;return n===e&&e===r?o=a=i:(o=Ha((.4360747*n+.3850649*e+.1430804*r)/dd),a=Ha((.0139322*n+.0971045*e+.7141733*r)/gd)),new Mn(116*i-16,500*(o-i),200*(i-a),t.opacity)}function zc(t,n,e,r){return arguments.length===1?yd(t):new Mn(t,n,e,r??1)}function Mn(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}Es(Mn,zc,ks(Ts,{brighter(t){return new Mn(this.l+uo*(t??1),this.a,this.b,this.opacity)},darker(t){return new Mn(this.l-uo*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return n=dd*Ua(n),t=pd*Ua(t),e=gd*Ua(e),new oa(Za(3.1338561*n-1.6168667*t-.4906146*e),Za(-.9787684*n+1.9161415*t+.033454*e),Za(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}}));function Ha(t){return t>Nb?Math.pow(t,1/3):t/bd+md}function Ua(t){return t>rr?t*t*t:bd*(t-md)}function Za(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ka(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Lb(t){if(t instanceof Bn)return new Bn(t.h,t.c,t.l,t.opacity);if(t instanceof Mn||(t=yd(t)),t.a===0&&t.b===0)return new Bn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*hd;return new Bn(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Pc(t,n,e,r){return arguments.length===1?Lb(t):new Bn(t,n,e,r??1)}function Bn(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function wd(t){if(isNaN(t.h))return new Mn(t.l,0,0,t.opacity);var n=t.h*ld;return new Mn(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}Es(Bn,Pc,ks(Ts,{brighter(t){return new Bn(this.h,this.c,this.l+uo*(t??1),this.opacity)},darker(t){return new Bn(this.h,this.c,this.l-uo*(t??1),this.opacity)},rgb(){return wd(this).rgb()}}));var _d=-.14861,Xs=1.78277,Ws=-.29227,ha=-.90649,ni=1.97294,Iu=ni*ha,Ru=ni*Xs,Bu=Xs*Ws-ha*_d;function zb(t){if(t instanceof Ae)return new Ae(t.h,t.s,t.l,t.opacity);t instanceof oa||(t=Ih(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(Bu*r+Iu*n-Ru*e)/(Bu+Iu-Ru),o=r-i,a=(ni*(e-i)-Ws*o)/ha,c=Math.sqrt(a*a+o*o)/(ni*i*(1-i)),s=c?Math.atan2(a,o)*hd-120:NaN;return new Ae(s<0?s+360:s,c,i,t.opacity)}function An(t,n,e,r){return arguments.length===1?zb(t):new Ae(t,n,e,r??1)}function Ae(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}Es(Ae,An,ks(Ts,{brighter(t){return t=t==null?ku:Math.pow(ku,t),new Ae(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Tu:Math.pow(Tu,t),new Ae(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*ld,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new oa(255*(n+e*(_d*r+Xs*i)),255*(n+e*(Ws*r+ha*i)),255*(n+e*(ni*r)),this.opacity)}}));function Pb(t){return function(n,e){var r=t((n=Cu(n)).h,(e=Cu(e)).h),i=Yt(n.s,e.s),o=Yt(n.l,e.l),a=Yt(n.opacity,e.opacity);return function(c){return n.h=r(c),n.s=i(c),n.l=o(c),n.opacity=a(c),n+""}}}const Ib=Pb(Cs);function Rb(t,n){var e=Yt((t=zc(t)).l,(n=zc(n)).l),r=Yt(t.a,n.a),i=Yt(t.b,n.b),o=Yt(t.opacity,n.opacity);return function(a){return t.l=e(a),t.a=r(a),t.b=i(a),t.opacity=o(a),t+""}}function Bb(t){return function(n,e){var r=t((n=Pc(n)).h,(e=Pc(e)).h),i=Yt(n.c,e.c),o=Yt(n.l,e.l),a=Yt(n.opacity,e.opacity);return function(c){return n.h=r(c),n.c=i(c),n.l=o(c),n.opacity=a(c),n+""}}}const Fb=Bb(Cs);function vd(t){return function n(e){e=+e;function r(i,o){var a=t((i=An(i)).h,(o=An(o)).h),c=Yt(i.s,o.s),s=Yt(i.l,o.l),f=Yt(i.opacity,o.opacity);return function(u){return i.h=a(u),i.s=c(u),i.l=s(Math.pow(u,e)),i.opacity=f(u),i+""}}return r.gamma=n,r}(1)}vd(Cs);var Gs=vd(Yt);function mi(t,n){n===void 0&&(n=t,t=Rh);for(var e=0,r=n.length-1,i=n[0],o=new Array(r<0?0:r);e<r;)o[e]=t(i,i=n[++e]);return function(a){var c=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[c](a-c)}}function hn(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e}var Db=Array.prototype,xd=Db.slice;function Ob(t,n){return t-n}function qb(t){for(var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r}const Qn=t=>()=>t;function Yb(t,n){for(var e=-1,r=n.length,i;++e<r;)if(i=jb(t,n[e]))return i;return 0}function jb(t,n){for(var e=n[0],r=n[1],i=-1,o=0,a=t.length,c=a-1;o<a;c=o++){var s=t[o],f=s[0],u=s[1],h=t[c],l=h[0],d=h[1];if(Xb(s,h,n))return 0;u>r!=d>r&&e<(l-f)*(r-u)/(d-u)+f&&(i=-i)}return i}function Xb(t,n,e){var r;return Wb(t,n,e)&&Gb(t[r=+(t[0]===n[0])],e[r],n[r])}function Wb(t,n,e){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])}function Gb(t,n,e){return t<=n&&n<=e||e<=n&&n<=t}function Vb(){}var Cn=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Ic(){var t=1,n=1,e=Ys,r=s;function i(f){var u=e(f);if(Array.isArray(u))u=u.slice().sort(Ob);else{const h=Et(f,Hb);for(u=Ne(...od(h[0],h[1],u),u);u[u.length-1]>=h[1];)u.pop();for(;u[1]<h[0];)u.shift()}return u.map(h=>o(f,h))}function o(f,u){const h=u==null?NaN:+u;if(isNaN(h))throw new Error(`invalid value: ${u}`);var l=[],d=[];return a(f,h,function(p){r(p,f,h),qb(p)>0?l.push([p]):d.push(p)}),d.forEach(function(p){for(var g=0,y=l.length,b;g<y;++g)if(Yb((b=l[g])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:l}}function a(f,u,h){var l=new Array,d=new Array,p,g,y,b,m,_;for(p=g=-1,b=be(f[0],u),Cn[b<<1].forEach(w);++p<t-1;)y=b,b=be(f[p+1],u),Cn[y|b<<1].forEach(w);for(Cn[b<<0].forEach(w);++g<n-1;){for(p=-1,b=be(f[g*t+t],u),m=be(f[g*t],u),Cn[b<<1|m<<2].forEach(w);++p<t-1;)y=b,b=be(f[g*t+t+p+1],u),_=m,m=be(f[g*t+p+1],u),Cn[y|b<<1|m<<2|_<<3].forEach(w);Cn[b|m<<3].forEach(w)}for(p=-1,m=f[g*t]>=u,Cn[m<<2].forEach(w);++p<t-1;)_=m,m=be(f[g*t+p+1],u),Cn[m<<2|_<<3].forEach(w);Cn[m<<3].forEach(w);function w(x){var v=[x[0][0]+p,x[0][1]+g],M=[x[1][0]+p,x[1][1]+g],S=c(v),k=c(M),$,E;($=d[S])?(E=l[k])?(delete d[$.end],delete l[E.start],$===E?($.ring.push(M),h($.ring)):l[$.start]=d[E.end]={start:$.start,end:E.end,ring:$.ring.concat(E.ring)}):(delete d[$.end],$.ring.push(M),d[$.end=k]=$):($=l[k])?(E=d[S])?(delete l[$.start],delete d[E.end],$===E?($.ring.push(M),h($.ring)):l[E.start]=d[$.end]={start:E.start,end:$.end,ring:E.ring.concat($.ring)}):(delete l[$.start],$.ring.unshift(v),l[$.start=S]=$):l[S]=d[k]={start:S,end:k,ring:[v,M]}}}function c(f){return f[0]*2+f[1]*(t+1)*4}function s(f,u,h){f.forEach(function(l){var d=l[0],p=l[1],g=d|0,y=p|0,b=Qa(u[y*t+g]);d>0&&d<t&&g===d&&(l[0]=Fu(d,Qa(u[y*t+g-1]),b,h)),p>0&&p<n&&y===p&&(l[1]=Fu(p,Qa(u[(y-1)*t+g]),b,h))})}return i.contour=o,i.size=function(f){if(!arguments.length)return[t,n];var u=Math.floor(f[0]),h=Math.floor(f[1]);if(!(u>=0&&h>=0))throw new Error("invalid size");return t=u,n=h,i},i.thresholds=function(f){return arguments.length?(e=typeof f=="function"?f:Array.isArray(f)?Qn(xd.call(f)):Qn(f),i):e},i.smooth=function(f){return arguments.length?(r=f?s:Vb,i):r===s},i}function Hb(t){return isFinite(t)?t:NaN}function be(t,n){return t==null?!1:+t>=n}function Qa(t){return t==null||isNaN(t=+t)?-1/0:t}function Fu(t,n,e,r){const i=r-n,o=e-n,a=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(a)?t:t+a-.5}function Ub(t){return t[0]}function Zb(t){return t[1]}function Kb(){return 1}function Qb(){var t=Ub,n=Zb,e=Kb,r=960,i=500,o=20,a=2,c=o*3,s=r+c*2>>a,f=i+c*2>>a,u=Qn(20);function h(m){var _=new Float32Array(s*f),w=Math.pow(2,-a),x=-1;for(const L of m){var v=(t(L,++x,m)+c)*w,M=(n(L,x,m)+c)*w,S=+e(L,x,m);if(S&&v>=0&&v<s&&M>=0&&M<f){var k=Math.floor(v),$=Math.floor(M),E=v-k-.5,T=M-$-.5;_[k+$*s]+=(1-E)*(1-T)*S,_[k+1+$*s]+=E*(1-T)*S,_[k+1+($+1)*s]+=E*T*S,_[k+($+1)*s]+=(1-E)*T*S}}return Jh({data:_,width:s,height:f},o*w),_}function l(m){var _=h(m),w=u(_),x=Math.pow(2,2*a);return Array.isArray(w)||(w=Ne(Number.MIN_VALUE,kt(_)/x,w)),Ic().size([s,f]).thresholds(w.map(v=>v*x))(_).map((v,M)=>(v.value=+w[M],d(v)))}l.contours=function(m){var _=h(m),w=Ic().size([s,f]),x=Math.pow(2,2*a),v=M=>{M=+M;var S=d(w.contour(_,M*x));return S.value=M,S};return Object.defineProperty(v,"max",{get:()=>kt(_)/x}),v};function d(m){return m.coordinates.forEach(p),m}function p(m){m.forEach(g)}function g(m){m.forEach(y)}function y(m){m[0]=m[0]*Math.pow(2,a)-c,m[1]=m[1]*Math.pow(2,a)-c}function b(){return c=o*3,s=r+c*2>>a,f=i+c*2>>a,l}return l.x=function(m){return arguments.length?(t=typeof m=="function"?m:Qn(+m),l):t},l.y=function(m){return arguments.length?(n=typeof m=="function"?m:Qn(+m),l):n},l.weight=function(m){return arguments.length?(e=typeof m=="function"?m:Qn(+m),l):e},l.size=function(m){if(!arguments.length)return[r,i];var _=+m[0],w=+m[1];if(!(_>=0&&w>=0))throw new Error("invalid size");return r=_,i=w,b()},l.cellSize=function(m){if(!arguments.length)return 1<<a;if(!((m=+m)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(m)/Math.LN2),b()},l.thresholds=function(m){return arguments.length?(u=typeof m=="function"?m:Array.isArray(m)?Qn(xd.call(m)):Qn(m),l):u},l.bandwidth=function(m){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((m=+m)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*m*m+1)-1)/2,b()},l}const Fn=11102230246251565e-32,Lt=134217729,Jb=(3+8*Fn)*Fn;function Ja(t,n,e,r,i){let o,a,c,s,f=n[0],u=r[0],h=0,l=0;u>f==u>-f?(o=f,f=n[++h]):(o=u,u=r[++l]);let d=0;if(h<t&&l<e)for(u>f==u>-f?(a=f+o,c=o-(a-f),f=n[++h]):(a=u+o,c=o-(a-u),u=r[++l]),o=a,c!==0&&(i[d++]=c);h<t&&l<e;)u>f==u>-f?(a=o+f,s=a-o,c=o-(a-s)+(f-s),f=n[++h]):(a=o+u,s=a-o,c=o-(a-s)+(u-s),u=r[++l]),o=a,c!==0&&(i[d++]=c);for(;h<t;)a=o+f,s=a-o,c=o-(a-s)+(f-s),f=n[++h],o=a,c!==0&&(i[d++]=c);for(;l<e;)a=o+u,s=a-o,c=o-(a-s)+(u-s),u=r[++l],o=a,c!==0&&(i[d++]=c);return(o!==0||d===0)&&(i[d++]=o),d}function ty(t,n){let e=n[0];for(let r=1;r<t;r++)e+=n[r];return e}function bi(t){return new Float64Array(t)}const ny=(3+16*Fn)*Fn,ey=(2+12*Fn)*Fn,ry=(9+64*Fn)*Fn*Fn,qe=bi(4),Du=bi(8),Ou=bi(12),qu=bi(16),Pt=bi(4);function iy(t,n,e,r,i,o,a){let c,s,f,u,h,l,d,p,g,y,b,m,_,w,x,v,M,S;const k=t-i,$=e-i,E=n-o,T=r-o;w=k*T,l=Lt*k,d=l-(l-k),p=k-d,l=Lt*T,g=l-(l-T),y=T-g,x=p*y-(w-d*g-p*g-d*y),v=E*$,l=Lt*E,d=l-(l-E),p=E-d,l=Lt*$,g=l-(l-$),y=$-g,M=p*y-(v-d*g-p*g-d*y),b=x-M,h=x-b,qe[0]=x-(b+h)+(h-M),m=w+b,h=m-w,_=w-(m-h)+(b-h),b=_-v,h=_-b,qe[1]=_-(b+h)+(h-v),S=m+b,h=S-m,qe[2]=m-(S-h)+(b-h),qe[3]=S;let L=ty(4,qe),C=ey*a;if(L>=C||-L>=C||(h=t-k,c=t-(k+h)+(h-i),h=e-$,f=e-($+h)+(h-i),h=n-E,s=n-(E+h)+(h-o),h=r-T,u=r-(T+h)+(h-o),c===0&&s===0&&f===0&&u===0)||(C=ry*a+Jb*Math.abs(L),L+=k*u+T*c-(E*f+$*s),L>=C||-L>=C))return L;w=c*T,l=Lt*c,d=l-(l-c),p=c-d,l=Lt*T,g=l-(l-T),y=T-g,x=p*y-(w-d*g-p*g-d*y),v=s*$,l=Lt*s,d=l-(l-s),p=s-d,l=Lt*$,g=l-(l-$),y=$-g,M=p*y-(v-d*g-p*g-d*y),b=x-M,h=x-b,Pt[0]=x-(b+h)+(h-M),m=w+b,h=m-w,_=w-(m-h)+(b-h),b=_-v,h=_-b,Pt[1]=_-(b+h)+(h-v),S=m+b,h=S-m,Pt[2]=m-(S-h)+(b-h),Pt[3]=S;const A=Ja(4,qe,4,Pt,Du);w=k*u,l=Lt*k,d=l-(l-k),p=k-d,l=Lt*u,g=l-(l-u),y=u-g,x=p*y-(w-d*g-p*g-d*y),v=E*f,l=Lt*E,d=l-(l-E),p=E-d,l=Lt*f,g=l-(l-f),y=f-g,M=p*y-(v-d*g-p*g-d*y),b=x-M,h=x-b,Pt[0]=x-(b+h)+(h-M),m=w+b,h=m-w,_=w-(m-h)+(b-h),b=_-v,h=_-b,Pt[1]=_-(b+h)+(h-v),S=m+b,h=S-m,Pt[2]=m-(S-h)+(b-h),Pt[3]=S;const N=Ja(A,Du,4,Pt,Ou);w=c*u,l=Lt*c,d=l-(l-c),p=c-d,l=Lt*u,g=l-(l-u),y=u-g,x=p*y-(w-d*g-p*g-d*y),v=s*f,l=Lt*s,d=l-(l-s),p=s-d,l=Lt*f,g=l-(l-f),y=f-g,M=p*y-(v-d*g-p*g-d*y),b=x-M,h=x-b,Pt[0]=x-(b+h)+(h-M),m=w+b,h=m-w,_=w-(m-h)+(b-h),b=_-v,h=_-b,Pt[1]=_-(b+h)+(h-v),S=m+b,h=S-m,Pt[2]=m-(S-h)+(b-h),Pt[3]=S;const z=Ja(N,Ou,4,Pt,qu);return qu[z-1]}function Di(t,n,e,r,i,o){const a=(n-o)*(e-i),c=(t-i)*(r-o),s=a-c,f=Math.abs(a+c);return Math.abs(s)>=ny*f?s:-iy(t,n,e,r,i,o,f)}const Yu=Math.pow(2,-52),Oi=new Uint32Array(512);class lo{static from(n,e=fy,r=uy){const i=n.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){const c=n[a];o[2*a]=e(c),o[2*a+1]=r(c)}return new lo(o)}constructor(n){const e=n.length>>1;if(e>0&&typeof n[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=n;const r=Math.max(2*e-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:n,_hullPrev:e,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=n.length>>1;let c=1/0,s=1/0,f=-1/0,u=-1/0;for(let $=0;$<a;$++){const E=n[2*$],T=n[2*$+1];E<c&&(c=E),T<s&&(s=T),E>f&&(f=E),T>u&&(u=T),this._ids[$]=$}const h=(c+f)/2,l=(s+u)/2;let d=1/0,p,g,y;for(let $=0;$<a;$++){const E=tc(h,l,n[2*$],n[2*$+1]);E<d&&(p=$,d=E)}const b=n[2*p],m=n[2*p+1];d=1/0;for(let $=0;$<a;$++){if($===p)continue;const E=tc(b,m,n[2*$],n[2*$+1]);E<d&&E>0&&(g=$,d=E)}let _=n[2*g],w=n[2*g+1],x=1/0;for(let $=0;$<a;$++){if($===p||$===g)continue;const E=cy(b,m,_,w,n[2*$],n[2*$+1]);E<x&&(y=$,x=E)}let v=n[2*y],M=n[2*y+1];if(x===1/0){for(let T=0;T<a;T++)this._dists[T]=n[2*T]-n[0]||n[2*T+1]-n[1];Ue(this._ids,this._dists,0,a-1);const $=new Uint32Array(a);let E=0;for(let T=0,L=-1/0;T<a;T++){const C=this._ids[T];this._dists[C]>L&&($[E++]=C,L=this._dists[C])}this.hull=$.subarray(0,E),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Di(b,m,_,w,v,M)<0){const $=g,E=_,T=w;g=y,_=v,w=M,y=$,v=E,M=T}const S=sy(b,m,_,w,v,M);this._cx=S.x,this._cy=S.y;for(let $=0;$<a;$++)this._dists[$]=tc(n[2*$],n[2*$+1],S.x,S.y);Ue(this._ids,this._dists,0,a-1),this._hullStart=p;let k=3;r[p]=e[y]=g,r[g]=e[p]=y,r[y]=e[g]=p,i[p]=0,i[g]=1,i[y]=2,o.fill(-1),o[this._hashKey(b,m)]=p,o[this._hashKey(_,w)]=g,o[this._hashKey(v,M)]=y,this.trianglesLen=0,this._addTriangle(p,g,y,-1,-1,-1);for(let $=0,E,T;$<this._ids.length;$++){const L=this._ids[$],C=n[2*L],A=n[2*L+1];if($>0&&Math.abs(C-E)<=Yu&&Math.abs(A-T)<=Yu||(E=C,T=A,L===p||L===g||L===y))continue;let N=0;for(let R=0,B=this._hashKey(C,A);R<this._hashSize&&(N=o[(B+R)%this._hashSize],!(N!==-1&&N!==r[N]));R++);N=e[N];let z=N,I;for(;I=r[z],Di(C,A,n[2*z],n[2*z+1],n[2*I],n[2*I+1])>=0;)if(z=I,z===N){z=-1;break}if(z===-1)continue;let F=this._addTriangle(z,L,r[z],-1,-1,i[z]);i[L]=this._legalize(F+2),i[z]=F,k++;let P=r[z];for(;I=r[P],Di(C,A,n[2*P],n[2*P+1],n[2*I],n[2*I+1])<0;)F=this._addTriangle(P,L,I,i[L],-1,i[P]),i[L]=this._legalize(F+2),r[P]=P,k--,P=I;if(z===N)for(;I=e[z],Di(C,A,n[2*I],n[2*I+1],n[2*z],n[2*z+1])<0;)F=this._addTriangle(I,L,z,-1,i[z],i[I]),this._legalize(F+2),i[I]=F,r[z]=z,k--,z=I;this._hullStart=e[L]=z,r[z]=e[P]=L,r[L]=P,o[this._hashKey(C,A)]=L,o[this._hashKey(n[2*z],n[2*z+1])]=z}this.hull=new Uint32Array(k);for(let $=0,E=this._hullStart;$<k;$++)this.hull[$]=E,E=r[E];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(n,e){return Math.floor(oy(n-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(n){const{_triangles:e,_halfedges:r,coords:i}=this;let o=0,a=0;for(;;){const c=r[n],s=n-n%3;if(a=s+(n+2)%3,c===-1){if(o===0)break;n=Oi[--o];continue}const f=c-c%3,u=s+(n+1)%3,h=f+(c+2)%3,l=e[a],d=e[n],p=e[u],g=e[h];if(ay(i[2*l],i[2*l+1],i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){e[n]=g,e[c]=l;const b=r[h];if(b===-1){let _=this._hullStart;do{if(this._hullTri[_]===h){this._hullTri[_]=n;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(n,b),this._link(c,r[a]),this._link(a,h);const m=f+(c+1)%3;o<Oi.length&&(Oi[o++]=m)}else{if(o===0)break;n=Oi[--o]}}return a}_link(n,e){this._halfedges[n]=e,e!==-1&&(this._halfedges[e]=n)}_addTriangle(n,e,r,i,o,a){const c=this.trianglesLen;return this._triangles[c]=n,this._triangles[c+1]=e,this._triangles[c+2]=r,this._link(c,i),this._link(c+1,o),this._link(c+2,a),this.trianglesLen+=3,c}}function oy(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}function tc(t,n,e,r){const i=t-e,o=n-r;return i*i+o*o}function ay(t,n,e,r,i,o,a,c){const s=t-a,f=n-c,u=e-a,h=r-c,l=i-a,d=o-c,p=s*s+f*f,g=u*u+h*h,y=l*l+d*d;return s*(h*y-g*d)-f*(u*y-g*l)+p*(u*d-h*l)<0}function cy(t,n,e,r,i,o){const a=e-t,c=r-n,s=i-t,f=o-n,u=a*a+c*c,h=s*s+f*f,l=.5/(a*f-c*s),d=(f*u-c*h)*l,p=(a*h-s*u)*l;return d*d+p*p}function sy(t,n,e,r,i,o){const a=e-t,c=r-n,s=i-t,f=o-n,u=a*a+c*c,h=s*s+f*f,l=.5/(a*f-c*s),d=t+(f*u-c*h)*l,p=n+(a*h-s*u)*l;return{x:d,y:p}}function Ue(t,n,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const o=t[i],a=n[o];let c=i-1;for(;c>=e&&n[t[c]]>a;)t[c+1]=t[c--];t[c+1]=o}else{const i=e+r>>1;let o=e+1,a=r;Lr(t,i,o),n[t[e]]>n[t[r]]&&Lr(t,e,r),n[t[o]]>n[t[r]]&&Lr(t,o,r),n[t[e]]>n[t[o]]&&Lr(t,e,o);const c=t[o],s=n[c];for(;;){do o++;while(n[t[o]]<s);do a--;while(n[t[a]]>s);if(a<o)break;Lr(t,o,a)}t[e+1]=t[a],t[a]=c,r-o+1>=a-e?(Ue(t,n,o,r),Ue(t,n,e,a-1)):(Ue(t,n,e,a-1),Ue(t,n,o,r))}}function Lr(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function fy(t){return t[0]}function uy(t){return t[1]}const ju=1e-6;class _e{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(n,e){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(n,e){this._+=`L${this._x1=+n},${this._y1=+e}`}arc(n,e,r){n=+n,e=+e,r=+r;const i=n+r,o=e;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>ju||Math.abs(this._y1-o)>ju)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${n-r},${e}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(n,e,r,i){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Rc{constructor(){this._=[]}moveTo(n,e){this._.push([n,e])}closePath(){this._.push(this._[0].slice())}lineTo(n,e){this._.push([n,e])}value(){return this._.length?this._:null}}let ly=class{constructor(n,[e,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(e=+e))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=n,this._circumcenters=new Float64Array(n.points.length*2),this.vectors=new Float64Array(n.points.length*2),this.xmax=i,this.xmin=e,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:n,hull:e,triangles:r},vectors:i}=this;let o,a;const c=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,y=0,b=r.length,m,_;g<b;g+=3,y+=2){const w=r[g]*2,x=r[g+1]*2,v=r[g+2]*2,M=n[w],S=n[w+1],k=n[x],$=n[x+1],E=n[v],T=n[v+1],L=k-M,C=$-S,A=E-M,N=T-S,z=(L*N-C*A)*2;if(Math.abs(z)<1e-9){if(o===void 0){o=a=0;for(const F of e)o+=n[F*2],a+=n[F*2+1];o/=e.length,a/=e.length}const I=1e9*Math.sign((o-M)*N-(a-S)*A);m=(M+E)/2-I*N,_=(S+T)/2+I*A}else{const I=1/z,F=L*L+C*C,P=A*A+N*N;m=M+(N*F-C*P)*I,_=S+(L*P-A*F)*I}c[y]=m,c[y+1]=_}let s=e[e.length-1],f,u=s*4,h,l=n[2*s],d,p=n[2*s+1];i.fill(0);for(let g=0;g<e.length;++g)s=e[g],f=u,h=l,d=p,u=s*4,l=n[2*s],p=n[2*s+1],i[f+2]=i[u]=d-p,i[f+3]=i[u+1]=l-h}render(n){const e=n==null?n=new _e:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:a,vectors:c}=this;if(o.length<=1)return null;for(let u=0,h=r.length;u<h;++u){const l=r[u];if(l<u)continue;const d=Math.floor(u/3)*2,p=Math.floor(l/3)*2,g=a[d],y=a[d+1],b=a[p],m=a[p+1];this._renderSegment(g,y,b,m,n)}let s,f=o[o.length-1];for(let u=0;u<o.length;++u){s=f,f=o[u];const h=Math.floor(i[f]/3)*2,l=a[h],d=a[h+1],p=s*4,g=this._project(l,d,c[p+2],c[p+3]);g&&this._renderSegment(l,d,g[0],g[1],n)}return e&&e.value()}renderBounds(n){const e=n==null?n=new _e:void 0;return n.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(n,e){const r=e==null?e=new _e:void 0,i=this._clip(n);if(i===null||!i.length)return;e.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&e.lineTo(i[a],i[a+1]);return e.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:n}}=this;for(let e=0,r=n.length/2;e<r;++e){const i=this.cellPolygon(e);i&&(i.index=e,yield i)}}cellPolygon(n){const e=new Rc;return this.renderCell(n,e),e.value()}_renderSegment(n,e,r,i,o){let a;const c=this._regioncode(n,e),s=this._regioncode(r,i);c===0&&s===0?(o.moveTo(n,e),o.lineTo(r,i)):(a=this._clipSegment(n,e,r,i,c,s))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(n,e,r){return e=+e,e!==e||(r=+r,r!==r)?!1:this.delaunay._step(n,e,r)===n}*neighbors(n){const e=this._clip(n);if(e)for(const r of this.delaunay.neighbors(n)){const i=this._clip(r);if(i){t:for(let o=0,a=e.length;o<a;o+=2)for(let c=0,s=i.length;c<s;c+=2)if(e[o]===i[c]&&e[o+1]===i[c+1]&&e[(o+2)%a]===i[(c+s-2)%s]&&e[(o+3)%a]===i[(c+s-1)%s]){yield r;break t}}}}_cell(n){const{circumcenters:e,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,a=r[n];if(a===-1)return null;const c=[];let s=a;do{const f=Math.floor(s/3);if(c.push(e[f*2],e[f*2+1]),s=s%3===2?s-2:s+1,o[s]!==n)break;s=i[s]}while(s!==a&&s!==-1);return c}_clip(n){if(n===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(n);if(e===null)return null;const{vectors:r}=this,i=n*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(n,e,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(n,e))}_clipFinite(n,e){const r=e.length;let i=null,o,a,c=e[r-2],s=e[r-1],f,u=this._regioncode(c,s),h,l=0;for(let d=0;d<r;d+=2)if(o=c,a=s,c=e[d],s=e[d+1],f=u,u=this._regioncode(c,s),f===0&&u===0)h=l,l=0,i?i.push(c,s):i=[c,s];else{let p,g,y,b,m;if(f===0){if((p=this._clipSegment(o,a,c,s,f,u))===null)continue;[g,y,b,m]=p}else{if((p=this._clipSegment(c,s,o,a,u,f))===null)continue;[b,m,g,y]=p,h=l,l=this._edgecode(g,y),h&&l&&this._edge(n,h,l,i,i.length),i?i.push(g,y):i=[g,y]}h=l,l=this._edgecode(b,m),h&&l&&this._edge(n,h,l,i,i.length),i?i.push(b,m):i=[b,m]}if(i)h=l,l=this._edgecode(i[0],i[1]),h&&l&&this._edge(n,h,l,i,i.length);else if(this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(n,e,r,i,o,a){const c=o<a;for(c&&([n,e,r,i,o,a]=[r,i,n,e,a,o]);;){if(o===0&&a===0)return c?[r,i,n,e]:[n,e,r,i];if(o&a)return null;let s,f,u=o||a;u&8?(s=n+(r-n)*(this.ymax-e)/(i-e),f=this.ymax):u&4?(s=n+(r-n)*(this.ymin-e)/(i-e),f=this.ymin):u&2?(f=e+(i-e)*(this.xmax-n)/(r-n),s=this.xmax):(f=e+(i-e)*(this.xmin-n)/(r-n),s=this.xmin),o?(n=s,e=f,o=this._regioncode(n,e)):(r=s,i=f,a=this._regioncode(r,i))}}_clipInfinite(n,e,r,i,o,a){let c=Array.from(e),s;if((s=this._project(c[0],c[1],r,i))&&c.unshift(s[0],s[1]),(s=this._project(c[c.length-2],c[c.length-1],o,a))&&c.push(s[0],s[1]),c=this._clipFinite(n,c))for(let f=0,u=c.length,h,l=this._edgecode(c[u-2],c[u-1]);f<u;f+=2)h=l,l=this._edgecode(c[f],c[f+1]),h&&l&&(f=this._edge(n,h,l,c,f),u=c.length);else this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(c=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return c}_edge(n,e,r,i,o){for(;e!==r;){let a,c;switch(e){case 5:e=4;continue;case 4:e=6,a=this.xmax,c=this.ymin;break;case 6:e=2;continue;case 2:e=10,a=this.xmax,c=this.ymax;break;case 10:e=8;continue;case 8:e=9,a=this.xmin,c=this.ymax;break;case 9:e=1;continue;case 1:e=5,a=this.xmin,c=this.ymin;break}(i[o]!==a||i[o+1]!==c)&&this.contains(n,a,c)&&(i.splice(o,0,a,c),o+=2)}return o}_project(n,e,r,i){let o=1/0,a,c,s;if(i<0){if(e<=this.ymin)return null;(a=(this.ymin-e)/i)<o&&(s=this.ymin,c=n+(o=a)*r)}else if(i>0){if(e>=this.ymax)return null;(a=(this.ymax-e)/i)<o&&(s=this.ymax,c=n+(o=a)*r)}if(r>0){if(n>=this.xmax)return null;(a=(this.xmax-n)/r)<o&&(c=this.xmax,s=e+(o=a)*i)}else if(r<0){if(n<=this.xmin)return null;(a=(this.xmin-n)/r)<o&&(c=this.xmin,s=e+(o=a)*i)}return[c,s]}_edgecode(n,e){return(n===this.xmin?1:n===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(n,e){return(n<this.xmin?1:n>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(n){if(n&&n.length>4){for(let e=0;e<n.length;e+=2){const r=(e+2)%n.length,i=(e+4)%n.length;(n[e]===n[r]&&n[r]===n[i]||n[e+1]===n[r+1]&&n[r+1]===n[i+1])&&(n.splice(r,2),e-=2)}n.length||(n=null)}return n}};const hy=2*Math.PI,Ye=Math.pow;function dy(t){return t[0]}function py(t){return t[1]}function gy(t){const{triangles:n,coords:e}=t;for(let r=0;r<n.length;r+=3){const i=2*n[r],o=2*n[r+1],a=2*n[r+2];if((e[a]-e[i])*(e[o+1]-e[i+1])-(e[o]-e[i])*(e[a+1]-e[i+1])>1e-10)return!1}return!0}function my(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}class ue{static from(n,e=dy,r=py,i){return new ue("length"in n?by(n,e,r,i):Float64Array.from(yy(n,e,r,i)))}constructor(n){this._delaunator=new lo(n),this.inedges=new Int32Array(n.length/2),this._hullIndex=new Int32Array(n.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const n=this._delaunator,e=this.points;if(n.hull&&n.hull.length>2&&gy(n)){this.collinear=Int32Array.from({length:e.length/2},(l,d)=>d).sort((l,d)=>e[2*l]-e[2*d]||e[2*l+1]-e[2*d+1]);const s=this.collinear[0],f=this.collinear[this.collinear.length-1],u=[e[2*s],e[2*s+1],e[2*f],e[2*f+1]],h=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let l=0,d=e.length/2;l<d;++l){const p=my(e[2*l],e[2*l+1],h);e[2*l]=p[0],e[2*l+1]=p[1]}this._delaunator=new lo(e)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),c=this._hullIndex.fill(-1);for(let s=0,f=r.length;s<f;++s){const u=o[s%3===2?s-2:s+1];(r[s]===-1||a[u]===-1)&&(a[u]=s)}for(let s=0,f=i.length;s<f;++s)c[i[s]]=s;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(n){return new ly(this,n)}*neighbors(n){const{inedges:e,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:c}=this;if(c){const h=c.indexOf(n);h>0&&(yield c[h-1]),h<c.length-1&&(yield c[h+1]);return}const s=e[n];if(s===-1)return;let f=s,u=-1;do{if(yield u=a[f],f=f%3===2?f-2:f+1,a[f]!==n)return;if(f=o[f],f===-1){const h=r[(i[n]+1)%r.length];h!==u&&(yield h);return}}while(f!==s)}find(n,e,r=0){if(n=+n,n!==n||(e=+e,e!==e))return-1;const i=r;let o;for(;(o=this._step(r,n,e))>=0&&o!==r&&o!==i;)r=o;return o}_step(n,e,r){const{inedges:i,hull:o,_hullIndex:a,halfedges:c,triangles:s,points:f}=this;if(i[n]===-1||!f.length)return(n+1)%(f.length>>1);let u=n,h=Ye(e-f[n*2],2)+Ye(r-f[n*2+1],2);const l=i[n];let d=l;do{let p=s[d];const g=Ye(e-f[p*2],2)+Ye(r-f[p*2+1],2);if(g<h&&(h=g,u=p),d=d%3===2?d-2:d+1,s[d]!==n)break;if(d=c[d],d===-1){if(d=o[(a[n]+1)%o.length],d!==p&&Ye(e-f[d*2],2)+Ye(r-f[d*2+1],2)<h)return d;break}}while(d!==l);return u}render(n){const e=n==null?n=new _e:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,c=i.length;a<c;++a){const s=i[a];if(s<a)continue;const f=o[a]*2,u=o[s]*2;n.moveTo(r[f],r[f+1]),n.lineTo(r[u],r[u+1])}return this.renderHull(n),e&&e.value()}renderPoints(n,e){e===void 0&&(!n||typeof n.moveTo!="function")&&(e=n,n=null),e=e==null?2:+e;const r=n==null?n=new _e:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){const c=i[o],s=i[o+1];n.moveTo(c+e,s),n.arc(c,s,e,0,hy)}return r&&r.value()}renderHull(n){const e=n==null?n=new _e:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;n.moveTo(i[o],i[o+1]);for(let c=1;c<a;++c){const s=2*r[c];n.lineTo(i[s],i[s+1])}return n.closePath(),e&&e.value()}hullPolygon(){const n=new Rc;return this.renderHull(n),n.value()}renderTriangle(n,e){const r=e==null?e=new _e:void 0,{points:i,triangles:o}=this,a=o[n*=3]*2,c=o[n+1]*2,s=o[n+2]*2;return e.moveTo(i[a],i[a+1]),e.lineTo(i[c],i[c+1]),e.lineTo(i[s],i[s+1]),e.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:n}=this;for(let e=0,r=n.length/3;e<r;++e)yield this.trianglePolygon(e)}trianglePolygon(n){const e=new Rc;return this.renderTriangle(n,e),e.value()}}function by(t,n,e,r){const i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){const c=t[a];o[a*2]=n.call(r,c,a,t),o[a*2+1]=e.call(r,c,a,t)}return o}function*yy(t,n,e,r){let i=0;for(const o of t)yield n.call(r,o,i,t),yield e.call(r,o,i,t),++i}var W=1e-6,ho=1e-12,Q=Math.PI,yt=Q/2,Xu=Q/4,Qt=Q*2,Ct=180/Q,nt=Q/180,rt=Math.abs,_r=Math.atan,dn=Math.atan2,G=Math.cos,qi=Math.ceil,$d=Math.exp,Bc=Math.hypot,po=Math.log,nc=Math.pow,Y=Math.sin,on=Math.sign||function(t){return t>0?1:t<0?-1:0},Dt=Math.sqrt,Vs=Math.tan;function Md(t){return t>1?0:t<-1?Q:Math.acos(t)}function Wt(t){return t>1?yt:t<-1?-yt:Math.asin(t)}function Zt(){}function go(t,n){t&&Gu.hasOwnProperty(t.type)&&Gu[t.type](t,n)}var Wu={Feature:function(t,n){go(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)go(e[r].geometry,n)}},Gu={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Fc(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Fc(e[r],n,0)},Polygon:function(t,n){Vu(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Vu(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)go(e[r],n)}};function Fc(t,n,e){var r=-1,i=t.length-e,o;for(n.lineStart();++r<i;)o=t[r],n.point(o[0],o[1],o[2]);n.lineEnd()}function Vu(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Fc(t[e],n,1);n.polygonEnd()}function Jn(t,n){t&&Wu.hasOwnProperty(t.type)?Wu[t.type](t,n):go(t,n)}function Dc(t){return[dn(t[1],t[0]),Wt(t[2])]}function fr(t){var n=t[0],e=t[1],r=G(e);return[r*G(n),r*Y(n),Y(e)]}function Yi(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function mo(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function ec(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function ji(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Oc(t){var n=Dt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var Fr,bo,yo,wo,_o,vo,xo,$o,qc,Yc,jc,Sd,Ad,It,Rt,Bt,ln={sphere:Zt,point:Hs,lineStart:Hu,lineEnd:Uu,polygonStart:function(){ln.lineStart=vy,ln.lineEnd=xy},polygonEnd:function(){ln.lineStart=Hu,ln.lineEnd=Uu}};function Hs(t,n){t*=nt,n*=nt;var e=G(n);yi(e*G(t),e*Y(t),Y(n))}function yi(t,n,e){++Fr,yo+=(t-yo)/Fr,wo+=(n-wo)/Fr,_o+=(e-_o)/Fr}function Hu(){ln.point=wy}function wy(t,n){t*=nt,n*=nt;var e=G(n);It=e*G(t),Rt=e*Y(t),Bt=Y(n),ln.point=_y,yi(It,Rt,Bt)}function _y(t,n){t*=nt,n*=nt;var e=G(n),r=e*G(t),i=e*Y(t),o=Y(n),a=dn(Dt((a=Rt*o-Bt*i)*a+(a=Bt*r-It*o)*a+(a=It*i-Rt*r)*a),It*r+Rt*i+Bt*o);bo+=a,vo+=a*(It+(It=r)),xo+=a*(Rt+(Rt=i)),$o+=a*(Bt+(Bt=o)),yi(It,Rt,Bt)}function Uu(){ln.point=Hs}function vy(){ln.point=$y}function xy(){Ed(Sd,Ad),ln.point=Hs}function $y(t,n){Sd=t,Ad=n,t*=nt,n*=nt,ln.point=Ed;var e=G(n);It=e*G(t),Rt=e*Y(t),Bt=Y(n),yi(It,Rt,Bt)}function Ed(t,n){t*=nt,n*=nt;var e=G(n),r=e*G(t),i=e*Y(t),o=Y(n),a=Rt*o-Bt*i,c=Bt*r-It*o,s=It*i-Rt*r,f=Bc(a,c,s),u=Wt(f),h=f&&-u/f;qc.add(h*a),Yc.add(h*c),jc.add(h*s),bo+=u,vo+=u*(It+(It=r)),xo+=u*(Rt+(Rt=i)),$o+=u*(Bt+(Bt=o)),yi(It,Rt,Bt)}function My(t){Fr=bo=yo=wo=_o=vo=xo=$o=0,qc=new $n,Yc=new $n,jc=new $n,Jn(t,ln);var n=+qc,e=+Yc,r=+jc,i=Bc(n,e,r);return i<ho&&(n=vo,e=xo,r=$o,bo<W&&(n=yo,e=wo,r=_o),i=Bc(n,e,r),i<ho)?[NaN,NaN]:[dn(e,n)*Ct,Wt(r/i)*Ct]}function Xc(t,n){function e(r,i){return r=t(r,i),n(r[0],r[1])}return t.invert&&n.invert&&(e.invert=function(r,i){return r=n.invert(r,i),r&&t.invert(r[0],r[1])}),e}function Wc(t,n){return rt(t)>Q&&(t-=Math.round(t/Qt)*Qt),[t,n]}Wc.invert=Wc;function kd(t,n,e){return(t%=Qt)?n||e?Xc(Ku(t),Qu(n,e)):Ku(t):n||e?Qu(n,e):Wc}function Zu(t){return function(n,e){return n+=t,rt(n)>Q&&(n-=Math.round(n/Qt)*Qt),[n,e]}}function Ku(t){var n=Zu(t);return n.invert=Zu(-t),n}function Qu(t,n){var e=G(t),r=Y(t),i=G(n),o=Y(n);function a(c,s){var f=G(s),u=G(c)*f,h=Y(c)*f,l=Y(s),d=l*e+u*r;return[dn(h*i-d*o,u*e-l*r),Wt(d*i+h*o)]}return a.invert=function(c,s){var f=G(s),u=G(c)*f,h=Y(c)*f,l=Y(s),d=l*i-h*o;return[dn(h*i+l*o,u*e+d*r),Wt(d*e-u*r)]},a}function Sy(t){t=kd(t[0]*nt,t[1]*nt,t.length>2?t[2]*nt:0);function n(e){return e=t(e[0]*nt,e[1]*nt),e[0]*=Ct,e[1]*=Ct,e}return n.invert=function(e){return e=t.invert(e[0]*nt,e[1]*nt),e[0]*=Ct,e[1]*=Ct,e},n}function Ay(t,n,e,r,i,o){if(e){var a=G(n),c=Y(n),s=r*e;i==null?(i=n+r*Qt,o=n-s/2):(i=Ju(a,i),o=Ju(a,o),(r>0?i<o:i>o)&&(i+=r*Qt));for(var f,u=i;r>0?u>o:u<o;u-=s)f=Dc([a,-c*G(u),-c*Y(u)]),t.point(f[0],f[1])}}function Ju(t,n){n=fr(n),n[0]-=t,Oc(n);var e=Md(-n[1]);return((-n[2]<0?-e:e)+Qt-W)%Qt}function Td(){var t=[],n;return{point:function(e,r,i){n.push([e,r,i])},lineStart:function(){t.push(n=[])},lineEnd:Zt,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function ao(t,n){return rt(t[0]-n[0])<W&&rt(t[1]-n[1])<W}function Xi(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Cd(t,n,e,r,i){var o=[],a=[],c,s;if(t.forEach(function(p){if(!((g=p.length-1)<=0)){var g,y=p[0],b=p[g],m;if(ao(y,b)){if(!y[2]&&!b[2]){for(i.lineStart(),c=0;c<g;++c)i.point((y=p[c])[0],y[1]);i.lineEnd();return}b[0]+=2*W}o.push(m=new Xi(y,p,null,!0)),a.push(m.o=new Xi(y,null,m,!1)),o.push(m=new Xi(b,p,null,!1)),a.push(m.o=new Xi(b,null,m,!0))}}),!!o.length){for(a.sort(n),tl(o),tl(a),c=0,s=a.length;c<s;++c)a[c].e=e=!e;for(var f=o[0],u,h;;){for(var l=f,d=!0;l.v;)if((l=l.n)===f)return;u=l.z,i.lineStart();do{if(l.v=l.o.v=!0,l.e){if(d)for(c=0,s=u.length;c<s;++c)i.point((h=u[c])[0],h[1]);else r(l.x,l.n.x,1,i);l=l.n}else{if(d)for(u=l.p.z,c=u.length-1;c>=0;--c)i.point((h=u[c])[0],h[1]);else r(l.x,l.p.x,-1,i);l=l.p}l=l.o,u=l.z,d=!d}while(!l.v);i.lineEnd()}}}function tl(t){if(n=t.length){for(var n,e=0,r=t[0],i;++e<n;)r.n=i=t[e],i.p=r,r=i;r.n=i=t[0],i.p=r}}function rc(t){return rt(t[0])<=Q?t[0]:on(t[0])*((rt(t[0])+Q)%Qt-Q)}function Ey(t,n){var e=rc(n),r=n[1],i=Y(r),o=[Y(e),-G(e),0],a=0,c=0,s=new $n;i===1?r=yt+W:i===-1&&(r=-yt-W);for(var f=0,u=t.length;f<u;++f)if(l=(h=t[f]).length)for(var h,l,d=h[l-1],p=rc(d),g=d[1]/2+Xu,y=Y(g),b=G(g),m=0;m<l;++m,p=w,y=v,b=M,d=_){var _=h[m],w=rc(_),x=_[1]/2+Xu,v=Y(x),M=G(x),S=w-p,k=S>=0?1:-1,$=k*S,E=$>Q,T=y*v;if(s.add(dn(T*k*Y($),b*M+T*G($))),a+=E?S+k*Qt:S,E^p>=e^w>=e){var L=mo(fr(d),fr(_));Oc(L);var C=mo(o,L);Oc(C);var A=(E^S>=0?-1:1)*Wt(C[2]);(r>A||r===A&&(L[0]||L[1]))&&(c+=E^S>=0?1:-1)}}return(a<-W||a<W&&s<-ho)^c&1}function Nd(t,n,e,r){return function(i){var o=n(i),a=Td(),c=n(a),s=!1,f,u,h,l={point:d,lineStart:g,lineEnd:y,polygonStart:function(){l.point=b,l.lineStart=m,l.lineEnd=_,u=[],f=[]},polygonEnd:function(){l.point=d,l.lineStart=g,l.lineEnd=y,u=sd(u);var w=Ey(f,r);u.length?(s||(i.polygonStart(),s=!0),Cd(u,Ty,w,e,i)):w&&(s||(i.polygonStart(),s=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),u=f=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(w,x){t(w,x)&&i.point(w,x)}function p(w,x){o.point(w,x)}function g(){l.point=p,o.lineStart()}function y(){l.point=d,o.lineEnd()}function b(w,x){h.push([w,x]),c.point(w,x)}function m(){c.lineStart(),h=[]}function _(){b(h[0][0],h[0][1]),c.lineEnd();var w=c.clean(),x=a.result(),v,M=x.length,S,k,$;if(h.pop(),f.push(h),h=null,!!M){if(w&1){if(k=x[0],(S=k.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),v=0;v<S;++v)i.point(($=k[v])[0],$[1]);i.lineEnd()}return}M>1&&w&2&&x.push(x.pop().concat(x.shift())),u.push(x.filter(ky))}}return l}}function ky(t){return t.length>1}function Ty(t,n){return((t=t.x)[0]<0?t[1]-yt-W:yt-t[1])-((n=n.x)[0]<0?n[1]-yt-W:yt-n[1])}const nl=Nd(function(){return!0},Cy,Ly,[-Q,-yt]);function Cy(t){var n=NaN,e=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,a){var c=o>0?Q:-Q,s=rt(o-n);rt(s-Q)<W?(t.point(n,e=(e+a)/2>0?yt:-yt),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(c,e),t.point(o,e),i=0):r!==c&&s>=Q&&(rt(n-r)<W&&(n-=r*W),rt(o-c)<W&&(o-=c*W),e=Ny(n,e,o,a),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(c,e),i=0),t.point(n=o,e=a),r=c},lineEnd:function(){t.lineEnd(),n=e=NaN},clean:function(){return 2-i}}}function Ny(t,n,e,r){var i,o,a=Y(t-e);return rt(a)>W?_r((Y(n)*(o=G(r))*Y(e)-Y(r)*(i=G(n))*Y(t))/(i*o*a)):(n+r)/2}function Ly(t,n,e,r){var i;if(t==null)i=e*yt,r.point(-Q,i),r.point(0,i),r.point(Q,i),r.point(Q,0),r.point(Q,-i),r.point(0,-i),r.point(-Q,-i),r.point(-Q,0),r.point(-Q,i);else if(rt(t[0]-n[0])>W){var o=t[0]<n[0]?Q:-Q;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function zy(t){var n=G(t),e=6*nt,r=n>0,i=rt(n)>W;function o(u,h,l,d){Ay(d,t,e,l,u,h)}function a(u,h){return G(u)*G(h)>n}function c(u){var h,l,d,p,g;return{lineStart:function(){p=d=!1,g=1},point:function(y,b){var m=[y,b],_,w=a(y,b),x=r?w?0:f(y,b):w?f(y+(y<0?Q:-Q),b):0;if(!h&&(p=d=w)&&u.lineStart(),w!==d&&(_=s(h,m),(!_||ao(h,_)||ao(m,_))&&(m[2]=1)),w!==d)g=0,w?(u.lineStart(),_=s(m,h),u.point(_[0],_[1])):(_=s(h,m),u.point(_[0],_[1],2),u.lineEnd()),h=_;else if(i&&h&&r^w){var v;!(x&l)&&(v=s(m,h,!0))&&(g=0,r?(u.lineStart(),u.point(v[0][0],v[0][1]),u.point(v[1][0],v[1][1]),u.lineEnd()):(u.point(v[1][0],v[1][1]),u.lineEnd(),u.lineStart(),u.point(v[0][0],v[0][1],3)))}w&&(!h||!ao(h,m))&&u.point(m[0],m[1]),h=m,d=w,l=x},lineEnd:function(){d&&u.lineEnd(),h=null},clean:function(){return g|(p&&d)<<1}}}function s(u,h,l){var d=fr(u),p=fr(h),g=[1,0,0],y=mo(d,p),b=Yi(y,y),m=y[0],_=b-m*m;if(!_)return!l&&u;var w=n*b/_,x=-n*m/_,v=mo(g,y),M=ji(g,w),S=ji(y,x);ec(M,S);var k=v,$=Yi(M,k),E=Yi(k,k),T=$*$-E*(Yi(M,M)-1);if(!(T<0)){var L=Dt(T),C=ji(k,(-$-L)/E);if(ec(C,M),C=Dc(C),!l)return C;var A=u[0],N=h[0],z=u[1],I=h[1],F;N<A&&(F=A,A=N,N=F);var P=N-A,R=rt(P-Q)<W,B=R||P<W;if(!R&&I<z&&(F=z,z=I,I=F),B?R?z+I>0^C[1]<(rt(C[0]-A)<W?z:I):z<=C[1]&&C[1]<=I:P>Q^(A<=C[0]&&C[0]<=N)){var D=ji(k,(-$+L)/E);return ec(D,M),[C,Dc(D)]}}}function f(u,h){var l=r?t:Q-t,d=0;return u<-l?d|=1:u>l&&(d|=2),h<-l?d|=4:h>l&&(d|=8),d}return Nd(a,c,o,r?[0,-t]:[-Q,t-Q])}function Py(t,n,e,r,i,o){var a=t[0],c=t[1],s=n[0],f=n[1],u=0,h=1,l=s-a,d=f-c,p;if(p=e-a,!(!l&&p>0)){if(p/=l,l<0){if(p<u)return;p<h&&(h=p)}else if(l>0){if(p>h)return;p>u&&(u=p)}if(p=i-a,!(!l&&p<0)){if(p/=l,l<0){if(p>h)return;p>u&&(u=p)}else if(l>0){if(p<u)return;p<h&&(h=p)}if(p=r-c,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>u&&(u=p)}if(p=o-c,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<h&&(h=p)}return u>0&&(t[0]=a+u*l,t[1]=c+u*d),h<1&&(n[0]=a+h*l,n[1]=c+h*d),!0}}}}}var Dr=1e9,Wi=-Dr;function Ld(t,n,e,r){function i(f,u){return t<=f&&f<=e&&n<=u&&u<=r}function o(f,u,h,l){var d=0,p=0;if(f==null||(d=a(f,h))!==(p=a(u,h))||s(f,u)<0^h>0)do l.point(d===0||d===3?t:e,d>1?r:n);while((d=(d+h+4)%4)!==p);else l.point(u[0],u[1])}function a(f,u){return rt(f[0]-t)<W?u>0?0:3:rt(f[0]-e)<W?u>0?2:1:rt(f[1]-n)<W?u>0?1:0:u>0?3:2}function c(f,u){return s(f.x,u.x)}function s(f,u){var h=a(f,1),l=a(u,1);return h!==l?h-l:h===0?u[1]-f[1]:h===1?f[0]-u[0]:h===2?f[1]-u[1]:u[0]-f[0]}return function(f){var u=f,h=Td(),l,d,p,g,y,b,m,_,w,x,v,M={point:S,lineStart:T,lineEnd:L,polygonStart:$,polygonEnd:E};function S(A,N){i(A,N)&&u.point(A,N)}function k(){for(var A=0,N=0,z=d.length;N<z;++N)for(var I=d[N],F=1,P=I.length,R=I[0],B,D,H=R[0],U=R[1];F<P;++F)B=H,D=U,R=I[F],H=R[0],U=R[1],D<=r?U>r&&(H-B)*(r-D)>(U-D)*(t-B)&&++A:U<=r&&(H-B)*(r-D)<(U-D)*(t-B)&&--A;return A}function $(){u=h,l=[],d=[],v=!0}function E(){var A=k(),N=v&&A,z=(l=sd(l)).length;(N||z)&&(f.polygonStart(),N&&(f.lineStart(),o(null,null,1,f),f.lineEnd()),z&&Cd(l,c,A,o,f),f.polygonEnd()),u=f,l=d=p=null}function T(){M.point=C,d&&d.push(p=[]),x=!0,w=!1,m=_=NaN}function L(){l&&(C(g,y),b&&w&&h.rejoin(),l.push(h.result())),M.point=S,w&&u.lineEnd()}function C(A,N){var z=i(A,N);if(d&&p.push([A,N]),x)g=A,y=N,b=z,x=!1,z&&(u.lineStart(),u.point(A,N));else if(z&&w)u.point(A,N);else{var I=[m=Math.max(Wi,Math.min(Dr,m)),_=Math.max(Wi,Math.min(Dr,_))],F=[A=Math.max(Wi,Math.min(Dr,A)),N=Math.max(Wi,Math.min(Dr,N))];Py(I,F,t,n,e,r)?(w||(u.lineStart(),u.point(I[0],I[1])),u.point(F[0],F[1]),z||u.lineEnd(),v=!1):z&&(u.lineStart(),u.point(A,N),v=!1)}m=A,_=N,w=z}return M}}function el(t,n,e){var r=rn(t,n-W,e).concat(n);return function(i){return r.map(function(o){return[i,o]})}}function rl(t,n,e){var r=rn(t,n-W,e).concat(n);return function(i){return r.map(function(o){return[o,i]})}}function Iy(){var t,n,e,r,i,o,a,c,s=10,f=s,u=90,h=360,l,d,p,g,y=2.5;function b(){return{type:"MultiLineString",coordinates:m()}}function m(){return rn(qi(r/u)*u,e,u).map(p).concat(rn(qi(c/h)*h,a,h).map(g)).concat(rn(qi(n/s)*s,t,s).filter(function(_){return rt(_%u)>W}).map(l)).concat(rn(qi(o/f)*f,i,f).filter(function(_){return rt(_%h)>W}).map(d))}return b.lines=function(){return m().map(function(_){return{type:"LineString",coordinates:_}})},b.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(a).slice(1),p(e).reverse().slice(1),g(c).reverse().slice(1))]}},b.extent=function(_){return arguments.length?b.extentMajor(_).extentMinor(_):b.extentMinor()},b.extentMajor=function(_){return arguments.length?(r=+_[0][0],e=+_[1][0],c=+_[0][1],a=+_[1][1],r>e&&(_=r,r=e,e=_),c>a&&(_=c,c=a,a=_),b.precision(y)):[[r,c],[e,a]]},b.extentMinor=function(_){return arguments.length?(n=+_[0][0],t=+_[1][0],o=+_[0][1],i=+_[1][1],n>t&&(_=n,n=t,t=_),o>i&&(_=o,o=i,i=_),b.precision(y)):[[n,o],[t,i]]},b.step=function(_){return arguments.length?b.stepMajor(_).stepMinor(_):b.stepMinor()},b.stepMajor=function(_){return arguments.length?(u=+_[0],h=+_[1],b):[u,h]},b.stepMinor=function(_){return arguments.length?(s=+_[0],f=+_[1],b):[s,f]},b.precision=function(_){return arguments.length?(y=+_,l=el(o,i,90),d=rl(n,t,y),p=el(c,a,90),g=rl(r,e,y),b):y},b.extentMajor([[-180,-90+W],[180,90-W]]).extentMinor([[-180,-80-W],[180,80+W]])}function Ry(){return Iy()()}const Gc=t=>t;var ic=new $n,Vc=new $n,zd,Pd,Hc,Uc,te={point:Zt,lineStart:Zt,lineEnd:Zt,polygonStart:function(){te.lineStart=By,te.lineEnd=Dy},polygonEnd:function(){te.lineStart=te.lineEnd=te.point=Zt,ic.add(rt(Vc)),Vc=new $n},result:function(){var t=ic/2;return ic=new $n,t}};function By(){te.point=Fy}function Fy(t,n){te.point=Id,zd=Hc=t,Pd=Uc=n}function Id(t,n){Vc.add(Uc*t-Hc*n),Hc=t,Uc=n}function Dy(){Id(zd,Pd)}const il=te;var ur=1/0,Mo=ur,ei=-ur,So=ei,Oy={point:qy,lineStart:Zt,lineEnd:Zt,polygonStart:Zt,polygonEnd:Zt,result:function(){var t=[[ur,Mo],[ei,So]];return ei=So=-(Mo=ur=1/0),t}};function qy(t,n){t<ur&&(ur=t),t>ei&&(ei=t),n<Mo&&(Mo=n),n>So&&(So=n)}const Ao=Oy;var Zc=0,Kc=0,Or=0,Eo=0,ko=0,Ze=0,Qc=0,Jc=0,qr=0,Rd,Bd,_n,vn,un={point:ze,lineStart:ol,lineEnd:al,polygonStart:function(){un.lineStart=Xy,un.lineEnd=Wy},polygonEnd:function(){un.point=ze,un.lineStart=ol,un.lineEnd=al},result:function(){var t=qr?[Qc/qr,Jc/qr]:Ze?[Eo/Ze,ko/Ze]:Or?[Zc/Or,Kc/Or]:[NaN,NaN];return Zc=Kc=Or=Eo=ko=Ze=Qc=Jc=qr=0,t}};function ze(t,n){Zc+=t,Kc+=n,++Or}function ol(){un.point=Yy}function Yy(t,n){un.point=jy,ze(_n=t,vn=n)}function jy(t,n){var e=t-_n,r=n-vn,i=Dt(e*e+r*r);Eo+=i*(_n+t)/2,ko+=i*(vn+n)/2,Ze+=i,ze(_n=t,vn=n)}function al(){un.point=ze}function Xy(){un.point=Gy}function Wy(){Fd(Rd,Bd)}function Gy(t,n){un.point=Fd,ze(Rd=_n=t,Bd=vn=n)}function Fd(t,n){var e=t-_n,r=n-vn,i=Dt(e*e+r*r);Eo+=i*(_n+t)/2,ko+=i*(vn+n)/2,Ze+=i,i=vn*t-_n*n,Qc+=i*(_n+t),Jc+=i*(vn+n),qr+=i*3,ze(_n=t,vn=n)}const cl=un;function Dd(t){this._context=t}Dd.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Qt);break}}},result:Zt};var ts=new $n,oc,Od,qd,Yr,jr,To={point:Zt,lineStart:function(){To.point=Vy},lineEnd:function(){oc&&Yd(Od,qd),To.point=Zt},polygonStart:function(){oc=!0},polygonEnd:function(){oc=null},result:function(){var t=+ts;return ts=new $n,t}};function Vy(t,n){To.point=Yd,Od=Yr=t,qd=jr=n}function Yd(t,n){Yr-=t,jr-=n,ts.add(Dt(Yr*Yr+jr*jr)),Yr=t,jr=n}const sl=To;let fl,Co,ul,ll;class hl{constructor(n){this._append=n==null?jd:Hy(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,e){switch(this._point){case 0:{this._append`M${n},${e}`,this._point=1;break}case 1:{this._append`L${n},${e}`;break}default:{if(this._append`M${n},${e}`,this._radius!==ul||this._append!==Co){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,ul=r,Co=this._append,ll=this._,this._=i}this._+=ll;break}}}result(){const n=this._;return this._="",n.length?n:null}}function jd(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function Hy(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return jd;if(n!==fl){const e=10**n;fl=n,Co=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*e)/e+i[o]}}return Co}function le(t,n){let e=3,r=4.5,i,o;function a(c){return c&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Jn(c,i(o))),o.result()}return a.area=function(c){return Jn(c,i(il)),il.result()},a.measure=function(c){return Jn(c,i(sl)),sl.result()},a.bounds=function(c){return Jn(c,i(Ao)),Ao.result()},a.centroid=function(c){return Jn(c,i(cl)),cl.result()},a.projection=function(c){return arguments.length?(i=c==null?(t=null,Gc):(t=c).stream,a):t},a.context=function(c){return arguments.length?(o=c==null?(n=null,new hl(e)):new Dd(n=c),typeof r!="function"&&o.pointRadius(r),a):n},a.pointRadius=function(c){return arguments.length?(r=typeof c=="function"?c:(o.pointRadius(+c),+c),a):r},a.digits=function(c){if(!arguments.length)return e;if(c==null)e=null;else{const s=Math.floor(c);if(!(s>=0))throw new RangeError(`invalid digits: ${c}`);e=s}return n===null&&(o=new hl(e)),a},a.projection(t).digits(e).context(n)}function No(t){return{stream:da(t)}}function da(t){return function(n){var e=new ns;for(var r in t)e[r]=t[r];return e.stream=n,e}}function ns(){}ns.prototype={constructor:ns,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Us(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Jn(e,t.stream(Ao)),n(Ao.result()),r!=null&&t.clipExtent(r),t}function Zs(t,n,e){return Us(t,function(r){var i=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),c=+n[0][0]+(i-a*(r[1][0]+r[0][0]))/2,s=+n[0][1]+(o-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([c,s])},e)}function Xd(t,n,e){return Zs(t,[[0,0],n],e)}function Wd(t,n,e){return Us(t,function(r){var i=+n,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,c=-o*r[0][1];t.scale(150*o).translate([a,c])},e)}function Gd(t,n,e){return Us(t,function(r){var i=+n,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],c=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,c])},e)}var dl=16,Uy=G(30*nt);function pl(t,n){return+n?Ky(t,n):Zy(t)}function Zy(t){return da({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function Ky(t,n){function e(r,i,o,a,c,s,f,u,h,l,d,p,g,y){var b=f-r,m=u-i,_=b*b+m*m;if(_>4*n&&g--){var w=a+l,x=c+d,v=s+p,M=Dt(w*w+x*x+v*v),S=Wt(v/=M),k=rt(rt(v)-1)<W||rt(o-h)<W?(o+h)/2:dn(x,w),$=t(k,S),E=$[0],T=$[1],L=E-r,C=T-i,A=m*L-b*C;(A*A/_>n||rt((b*L+m*C)/_-.5)>.3||a*l+c*d+s*p<Uy)&&(e(r,i,o,a,c,s,E,T,k,w/=M,x/=M,v,g,y),y.point(E,T),e(E,T,k,w,x,v,f,u,h,l,d,p,g,y))}}return function(r){var i,o,a,c,s,f,u,h,l,d,p,g,y={point:b,lineStart:m,lineEnd:w,polygonStart:function(){r.polygonStart(),y.lineStart=x},polygonEnd:function(){r.polygonEnd(),y.lineStart=m}};function b(S,k){S=t(S,k),r.point(S[0],S[1])}function m(){h=NaN,y.point=_,r.lineStart()}function _(S,k){var $=fr([S,k]),E=t(S,k);e(h,l,u,d,p,g,h=E[0],l=E[1],u=S,d=$[0],p=$[1],g=$[2],dl,r),r.point(h,l)}function w(){y.point=b,r.lineEnd()}function x(){m(),y.point=v,y.lineEnd=M}function v(S,k){_(i=S,k),o=h,a=l,c=d,s=p,f=g,y.point=_}function M(){e(h,l,u,d,p,g,o,a,i,c,s,f,dl,r),y.lineEnd=w,w()}return y}}var Qy=da({point:function(t,n){this.stream.point(t*nt,n*nt)}});function Jy(t){return da({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}function tw(t,n,e,r,i){function o(a,c){return a*=r,c*=i,[n+t*a,e-t*c]}return o.invert=function(a,c){return[(a-n)/t*r,(e-c)/t*i]},o}function gl(t,n,e,r,i,o){if(!o)return tw(t,n,e,r,i);var a=G(o),c=Y(o),s=a*t,f=c*t,u=a/t,h=c/t,l=(c*e-a*n)/t,d=(c*n+a*e)/t;function p(g,y){return g*=r,y*=i,[s*g-f*y+n,e-f*g-s*y]}return p.invert=function(g,y){return[r*(u*g-h*y+l),i*(d-h*g-u*y)]},p}function he(t){return Vd(function(){return t})()}function Vd(t){var n,e=150,r=480,i=250,o=0,a=0,c=0,s=0,f=0,u,h=0,l=1,d=1,p=null,g=nl,y=null,b,m,_,w=Gc,x=.5,v,M,S,k,$;function E(A){return S(A[0]*nt,A[1]*nt)}function T(A){return A=S.invert(A[0],A[1]),A&&[A[0]*Ct,A[1]*Ct]}E.stream=function(A){return k&&$===A?k:k=Qy(Jy(u)(g(v(w($=A)))))},E.preclip=function(A){return arguments.length?(g=A,p=void 0,C()):g},E.postclip=function(A){return arguments.length?(w=A,y=b=m=_=null,C()):w},E.clipAngle=function(A){return arguments.length?(g=+A?zy(p=A*nt):(p=null,nl),C()):p*Ct},E.clipExtent=function(A){return arguments.length?(w=A==null?(y=b=m=_=null,Gc):Ld(y=+A[0][0],b=+A[0][1],m=+A[1][0],_=+A[1][1]),C()):y==null?null:[[y,b],[m,_]]},E.scale=function(A){return arguments.length?(e=+A,L()):e},E.translate=function(A){return arguments.length?(r=+A[0],i=+A[1],L()):[r,i]},E.center=function(A){return arguments.length?(o=A[0]%360*nt,a=A[1]%360*nt,L()):[o*Ct,a*Ct]},E.rotate=function(A){return arguments.length?(c=A[0]%360*nt,s=A[1]%360*nt,f=A.length>2?A[2]%360*nt:0,L()):[c*Ct,s*Ct,f*Ct]},E.angle=function(A){return arguments.length?(h=A%360*nt,L()):h*Ct},E.reflectX=function(A){return arguments.length?(l=A?-1:1,L()):l<0},E.reflectY=function(A){return arguments.length?(d=A?-1:1,L()):d<0},E.precision=function(A){return arguments.length?(v=pl(M,x=A*A),C()):Dt(x)},E.fitExtent=function(A,N){return Zs(E,A,N)},E.fitSize=function(A,N){return Xd(E,A,N)},E.fitWidth=function(A,N){return Wd(E,A,N)},E.fitHeight=function(A,N){return Gd(E,A,N)};function L(){var A=gl(e,0,0,l,d,h).apply(null,n(o,a)),N=gl(e,r-A[0],i-A[1],l,d,h);return u=kd(c,s,f),M=Xc(n,N),S=Xc(u,M),v=pl(M,x),C()}function C(){return k=$=null,E}return function(){return n=t.apply(this,arguments),E.invert=n.invert&&T,L()}}function Ks(t){var n=0,e=Q/3,r=Vd(t),i=r(n,e);return i.parallels=function(o){return arguments.length?r(n=o[0]*nt,e=o[1]*nt):[n*Ct,e*Ct]},i}function nw(t){var n=G(t);function e(r,i){return[r*n,Y(i)/n]}return e.invert=function(r,i){return[r/n,Wt(i*n)]},e}function ew(t,n){var e=Y(t),r=(e+Y(n))/2;if(rt(r)<W)return nw(t);var i=1+e*(2*r-e),o=Dt(i)/r;function a(c,s){var f=Dt(i-2*r*Y(s))/r;return[f*Y(c*=r),o-f*G(c)]}return a.invert=function(c,s){var f=o-s,u=dn(c,rt(f))*on(f);return f*r<0&&(u-=Q*on(c)*on(f)),[u/r,Wt((i-(c*c+f*f)*r*r)/(2*r))]},a}function Lo(){return Ks(ew).scale(155.424).center([0,33.6442])}function Hd(){return Lo().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function rw(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}function iw(){var t,n,e=Hd(),r,i=Lo().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Lo().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,s,f={point:function(l,d){s=[l,d]}};function u(l){var d=l[0],p=l[1];return s=null,r.point(d,p),s||(o.point(d,p),s)||(c.point(d,p),s)}u.invert=function(l){var d=e.scale(),p=e.translate(),g=(l[0]-p[0])/d,y=(l[1]-p[1])/d;return(y>=.12&&y<.234&&g>=-.425&&g<-.214?i:y>=.166&&y<.234&&g>=-.214&&g<-.115?a:e).invert(l)},u.stream=function(l){return t&&n===l?t:t=rw([e.stream(n=l),i.stream(l),a.stream(l)])},u.precision=function(l){return arguments.length?(e.precision(l),i.precision(l),a.precision(l),h()):e.precision()},u.scale=function(l){return arguments.length?(e.scale(l),i.scale(l*.35),a.scale(l),u.translate(e.translate())):e.scale()},u.translate=function(l){if(!arguments.length)return e.translate();var d=e.scale(),p=+l[0],g=+l[1];return r=e.translate(l).clipExtent([[p-.455*d,g-.238*d],[p+.455*d,g+.238*d]]).stream(f),o=i.translate([p-.307*d,g+.201*d]).clipExtent([[p-.425*d+W,g+.12*d+W],[p-.214*d-W,g+.234*d-W]]).stream(f),c=a.translate([p-.205*d,g+.212*d]).clipExtent([[p-.214*d+W,g+.166*d+W],[p-.115*d-W,g+.234*d-W]]).stream(f),h()},u.fitExtent=function(l,d){return Zs(u,l,d)},u.fitSize=function(l,d){return Xd(u,l,d)},u.fitWidth=function(l,d){return Wd(u,l,d)},u.fitHeight=function(l,d){return Gd(u,l,d)};function h(){return t=n=null,u}return u.scale(1070)}function Ud(t){return function(n,e){var r=G(n),i=G(e),o=t(r*i);return o===1/0?[2,0]:[o*i*Y(n),o*Y(e)]}}function wi(t){return function(n,e){var r=Dt(n*n+e*e),i=t(r),o=Y(i),a=G(i);return[dn(n*o,r*a),Wt(r&&e*o/r)]}}var Zd=Ud(function(t){return Dt(2/(1+t))});Zd.invert=wi(function(t){return 2*Wt(t/2)});function ow(){return he(Zd).scale(124.75).clipAngle(180-.001)}var Kd=Ud(function(t){return(t=Md(t))&&t/Y(t)});Kd.invert=wi(function(t){return t});function aw(){return he(Kd).scale(79.4188).clipAngle(180-.001)}function pa(t,n){return[t,po(Vs((yt+n)/2))]}pa.invert=function(t,n){return[t,2*_r($d(n))-yt]};function cw(){return Qd(pa).scale(961/Qt)}function Qd(t){var n=he(t),e=n.center,r=n.scale,i=n.translate,o=n.clipExtent,a=null,c,s,f;n.scale=function(h){return arguments.length?(r(h),u()):r()},n.translate=function(h){return arguments.length?(i(h),u()):i()},n.center=function(h){return arguments.length?(e(h),u()):e()},n.clipExtent=function(h){return arguments.length?(h==null?a=c=s=f=null:(a=+h[0][0],c=+h[0][1],s=+h[1][0],f=+h[1][1]),u()):a==null?null:[[a,c],[s,f]]};function u(){var h=Q*r(),l=n(Sy(n.rotate()).invert([0,0]));return o(a==null?[[l[0]-h,l[1]-h],[l[0]+h,l[1]+h]]:t===pa?[[Math.max(l[0]-h,a),c],[Math.min(l[0]+h,s),f]]:[[a,Math.max(l[1]-h,c)],[s,Math.min(l[1]+h,f)]])}return u()}function Gi(t){return Vs((yt+t)/2)}function sw(t,n){var e=G(t),r=t===n?Y(t):po(e/G(n))/po(Gi(n)/Gi(t)),i=e*nc(Gi(t),r)/r;if(!r)return pa;function o(a,c){i>0?c<-yt+W&&(c=-yt+W):c>yt-W&&(c=yt-W);var s=i/nc(Gi(c),r);return[s*Y(r*a),i-s*G(r*a)]}return o.invert=function(a,c){var s=i-c,f=on(r)*Dt(a*a+s*s),u=dn(a,rt(s))*on(s);return s*r<0&&(u-=Q*on(a)*on(s)),[u/r,2*_r(nc(i/f,1/r))-yt]},o}function fw(){return Ks(sw).scale(109.5).parallels([30,30])}function zo(t,n){return[t,n]}zo.invert=zo;function uw(){return he(zo).scale(152.63)}function lw(t,n){var e=G(t),r=t===n?Y(t):(e-G(n))/(n-t),i=e/r+t;if(rt(r)<W)return zo;function o(a,c){var s=i-c,f=r*a;return[s*Y(f),i-s*G(f)]}return o.invert=function(a,c){var s=i-c,f=dn(a,rt(s))*on(s);return s*r<0&&(f-=Q*on(a)*on(s)),[f/r,i-on(r)*Dt(a*a+s*s)]},o}function hw(){return Ks(lw).scale(131.154).center([0,13.9389])}var Xr=1.340264,Wr=-.081106,Gr=893e-6,Vr=.003796,Po=Dt(3)/2,dw=12;function Jd(t,n){var e=Wt(Po*Y(n)),r=e*e,i=r*r*r;return[t*G(e)/(Po*(Xr+3*Wr*r+i*(7*Gr+9*Vr*r))),e*(Xr+Wr*r+i*(Gr+Vr*r))]}Jd.invert=function(t,n){for(var e=n,r=e*e,i=r*r*r,o=0,a,c,s;o<dw&&(c=e*(Xr+Wr*r+i*(Gr+Vr*r))-n,s=Xr+3*Wr*r+i*(7*Gr+9*Vr*r),e-=a=c/s,r=e*e,i=r*r*r,!(rt(a)<ho));++o);return[Po*t*(Xr+3*Wr*r+i*(7*Gr+9*Vr*r))/G(e),Wt(Y(e)/Po)]};function pw(){return he(Jd).scale(177.158)}function t0(t,n){var e=G(n),r=G(t)*e;return[e*Y(t)/r,Y(n)/r]}t0.invert=wi(_r);function gw(){return he(t0).scale(144.049).clipAngle(60)}function n0(t,n){return[G(n)*Y(t),Y(n)]}n0.invert=wi(Wt);function mw(){return he(n0).scale(249.5).clipAngle(90+W)}function e0(t,n){var e=G(n),r=1+G(t)*e;return[e*Y(t)/r,Y(n)/r]}e0.invert=wi(function(t){return 2*_r(t)});function bw(){return he(e0).scale(250).clipAngle(142)}function r0(t,n){return[po(Vs((yt+n)/2)),-t]}r0.invert=function(t,n){return[-n,2*_r($d(t))-yt]};function yw(){var t=Qd(r0),n=t.center,e=t.rotate;return t.center=function(r){return arguments.length?n([-r[1],r[0]]):(r=n(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?e([r[0],r[1],r.length>2?r[2]+90:90]):(r=e(),[r[0],r[1],r[2]-90])},e([0,0,90]).scale(159.155)}function ww(t,n){return t.parent===n.parent?1:2}function _w(t){return t.reduce(vw,0)/t.length}function vw(t,n){return t+n.x}function xw(t){return 1+t.reduce($w,0)}function $w(t,n){return Math.max(t,n.y)}function Mw(t){for(var n;n=t.children;)t=n[0];return t}function Sw(t){for(var n;n=t.children;)t=n[n.length-1];return t}function i0(){var t=ww,n=1,e=1,r=!1;function i(o){var a,c=0;o.eachAfter(function(l){var d=l.children;d?(l.x=_w(d),l.y=xw(d)):(l.x=a?c+=t(l,a):0,l.y=0,a=l)});var s=Mw(o),f=Sw(o),u=s.x-t(s,f)/2,h=f.x+t(f,s)/2;return o.eachAfter(r?function(l){l.x=(l.x-o.x)*n,l.y=(o.y-l.y)*e}:function(l){l.x=(l.x-u)/(h-u)*n,l.y=(1-(o.y?l.y/o.y:1))*e})}return i.separation=function(o){return arguments.length?(t=o,i):t},i.size=function(o){return arguments.length?(r=!1,n=+o[0],e=+o[1],i):r?null:[n,e]},i.nodeSize=function(o){return arguments.length?(r=!0,n=+o[0],e=+o[1],i):r?[n,e]:null},i}function Aw(t){var n=0,e=t.children,r=e&&e.length;if(!r)n=1;else for(;--r>=0;)n+=e[r].value;t.value=n}function Ew(){return this.eachAfter(Aw)}function kw(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this}function Tw(t,n){for(var e=this,r=[e],i,o,a=-1;e=r.pop();)if(t.call(n,e,++a,this),i=e.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function Cw(t,n){for(var e=this,r=[e],i=[],o,a,c,s=-1;e=r.pop();)if(i.push(e),o=e.children)for(a=0,c=o.length;a<c;++a)r.push(o[a]);for(;e=i.pop();)t.call(n,e,++s,this);return this}function Nw(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r}function Lw(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})}function zw(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function Pw(t){for(var n=this,e=Iw(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r}function Iw(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function Rw(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function Bw(){return Array.from(this)}function Fw(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function Dw(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n}function*Ow(){var t=this,n,e=[t],r,i,o;do for(n=e.reverse(),e=[];t=n.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)e.push(r[i]);while(e.length)}function o0(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=jw)):n===void 0&&(n=Yw);for(var e=new lr(t),r,i=[e],o,a,c,s;r=i.pop();)if((a=n(r.data))&&(s=(a=Array.from(a)).length))for(r.children=a,c=s-1;c>=0;--c)i.push(o=a[c]=new lr(a[c])),o.parent=r,o.depth=r.depth+1;return e.eachBefore(a0)}function qw(){return o0(this).eachBefore(Xw)}function Yw(t){return t.children}function jw(t){return Array.isArray(t)?t[1]:null}function Xw(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function a0(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function lr(t){this.data=t,this.depth=this.height=0,this.parent=null}lr.prototype=o0.prototype={constructor:lr,count:Ew,each:kw,eachAfter:Cw,eachBefore:Tw,find:Nw,sum:Lw,sort:zw,path:Pw,ancestors:Rw,descendants:Bw,leaves:Fw,links:Dw,copy:qw,[Symbol.iterator]:Ow};function ac(t){return t==null?null:Ww(t)}function Ww(t){if(typeof t!="function")throw new Error;return t}var Gw={depth:-1},ml={},cc={};function Vw(t){return t.id}function Hw(t){return t.parentId}function c0(){var t=Vw,n=Hw,e;function r(i){var o=Array.from(i),a=t,c=n,s,f,u,h,l,d,p,g,y=new Map;if(e!=null){const b=o.map((w,x)=>Uw(e(w,x,i))),m=b.map(bl),_=new Set(b).add("");for(const w of m)_.has(w)||(_.add(w),b.push(w),m.push(bl(w)),o.push(cc));a=(w,x)=>b[x],c=(w,x)=>m[x]}for(u=0,s=o.length;u<s;++u)f=o[u],d=o[u]=new lr(f),(p=a(f,u,i))!=null&&(p+="")&&(g=d.id=p,y.set(g,y.has(g)?ml:d)),(p=c(f,u,i))!=null&&(p+="")&&(d.parent=p);for(u=0;u<s;++u)if(d=o[u],p=d.parent){if(l=y.get(p),!l)throw new Error("missing: "+p);if(l===ml)throw new Error("ambiguous: "+p);l.children?l.children.push(d):l.children=[d],d.parent=l}else{if(h)throw new Error("multiple roots");h=d}if(!h)throw new Error("no root");if(e!=null){for(;h.data===cc&&h.children.length===1;)h=h.children[0],--s;for(let b=o.length-1;b>=0&&(d=o[b],d.data===cc);--b)d.data=null}if(h.parent=Gw,h.eachBefore(function(b){b.depth=b.parent.depth+1,--s}).eachBefore(a0),h.parent=null,s>0)throw new Error("cycle");return h}return r.id=function(i){return arguments.length?(t=ac(i),r):t},r.parentId=function(i){return arguments.length?(n=ac(i),r):n},r.path=function(i){return arguments.length?(e=ac(i),r):e},r}function Uw(t){t=`${t}`;let n=t.length;return es(t,n-1)&&!es(t,n-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function bl(t){let n=t.length;if(n<2)return"";for(;--n>1&&!es(t,n););return t.slice(0,n)}function es(t,n){if(t[n]==="/"){let e=0;for(;n>0&&t[--n]==="\\";)++e;if(!(e&1))return!0}return!1}function Zw(t,n){return t.parent===n.parent?1:2}function sc(t){var n=t.children;return n?n[0]:t.t}function fc(t){var n=t.children;return n?n[n.length-1]:t.t}function Kw(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Qw(t){for(var n=0,e=0,r=t.children,i=r.length,o;--i>=0;)o=r[i],o.z+=n,o.m+=n,n+=o.s+(e+=o.c)}function Jw(t,n,e){return t.a.parent===n.parent?t.a:e}function co(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}co.prototype=Object.create(lr.prototype);function t6(t){for(var n=new co(t,0),e,r=[n],i,o,a,c;e=r.pop();)if(o=e._.children)for(e.children=new Array(c=o.length),a=c-1;a>=0;--a)r.push(i=e.children[a]=new co(o[a],a)),i.parent=e;return(n.parent=new co(null,0)).children=[n],n}function Io(){var t=Zw,n=1,e=1,r=null;function i(f){var u=t6(f);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)f.eachBefore(s);else{var h=f,l=f,d=f;f.eachBefore(function(m){m.x<h.x&&(h=m),m.x>l.x&&(l=m),m.depth>d.depth&&(d=m)});var p=h===l?1:t(h,l)/2,g=p-h.x,y=n/(l.x+p+g),b=e/(d.depth||1);f.eachBefore(function(m){m.x=(m.x+g)*y,m.y=m.depth*b})}return f}function o(f){var u=f.children,h=f.parent.children,l=f.i?h[f.i-1]:null;if(u){Qw(f);var d=(u[0].z+u[u.length-1].z)/2;l?(f.z=l.z+t(f._,l._),f.m=f.z-d):f.z=d}else l&&(f.z=l.z+t(f._,l._));f.parent.A=c(f,l,f.parent.A||h[0])}function a(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function c(f,u,h){if(u){for(var l=f,d=f,p=u,g=l.parent.children[0],y=l.m,b=d.m,m=p.m,_=g.m,w;p=fc(p),l=sc(l),p&&l;)g=sc(g),d=fc(d),d.a=f,w=p.z+m-l.z-y+t(p._,l._),w>0&&(Kw(Jw(p,f,h),f,w),y+=w,b+=w),m+=p.m,y+=l.m,_+=g.m,b+=d.m;p&&!fc(d)&&(d.t=p,d.m+=m-b),l&&!sc(g)&&(g.t=l,g.m+=y-_,h=f)}return h}function s(f){f.x*=n,f.y=f.depth*e}return i.separation=function(f){return arguments.length?(t=f,i):t},i.size=function(f){return arguments.length?(r=!1,n=+f[0],e=+f[1],i):r?null:[n,e]},i.nodeSize=function(f){return arguments.length?(r=!0,n=+f[0],e=+f[1],i):r?[n,e]:null},i}const n6=1664525,e6=1013904223,yl=1/4294967296;function Qs(t=Math.random()){let n=(0<=t&&t<1?t/yl:Math.abs(t))|0;return()=>(n=n6*n+e6|0,yl*(n>>>0))}const rs=Symbol("implicit");function Js(){var t=new Le,n=[],e=[],r=rs;function i(o){let a=t.get(o);if(a===void 0){if(r!==rs)return r;t.set(o,a=n.push(o)-1)}return e[a%e.length]}return i.domain=function(o){if(!arguments.length)return n.slice();n=[],t=new Le;for(const a of o)t.has(a)||t.set(a,n.push(a)-1);return i},i.range=function(o){return arguments.length?(e=Array.from(o),i):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Js(n,e).unknown(r)},Re.apply(i,arguments),i}function ga(){var t=Js().unknown(void 0),n=t.domain,e=t.range,r=0,i=1,o,a,c=!1,s=0,f=0,u=.5;delete t.unknown;function h(){var l=n().length,d=i<r,p=d?i:r,g=d?r:i;o=(g-p)/Math.max(1,l-s+f*2),c&&(o=Math.floor(o)),p+=(g-p-o*(l-s))*u,a=o*(1-s),c&&(p=Math.round(p),a=Math.round(a));var y=rn(l).map(function(b){return p+o*b});return e(d?y.reverse():y)}return t.domain=function(l){return arguments.length?(n(l),h()):n()},t.range=function(l){return arguments.length?([r,i]=l,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(l){return[r,i]=l,r=+r,i=+i,c=!0,h()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(l){return arguments.length?(c=!!l,h()):c},t.padding=function(l){return arguments.length?(s=Math.min(1,f=+l),h()):s},t.paddingInner=function(l){return arguments.length?(s=Math.min(1,l),h()):s},t.paddingOuter=function(l){return arguments.length?(f=+l,h()):f},t.align=function(l){return arguments.length?(u=Math.max(0,Math.min(1,l)),h()):u},t.copy=function(){return ga(n(),[r,i]).round(c).paddingInner(s).paddingOuter(f).align(u)},Re.apply(h(),arguments)}function s0(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return s0(n())},t}function r6(){return s0(ga.apply(null,arguments).paddingInner(1))}function f0(t){var n;function e(r){return r==null||isNaN(r=+r)?n:r}return e.invert=e,e.domain=e.range=function(r){return arguments.length?(t=Array.from(r,Nu),e):t.slice()},e.unknown=function(r){return arguments.length?(n=r,e):n},e.copy=function(){return f0(t).unknown(n)},t=arguments.length?Array.from(t,Nu):[0,1],aa(e)}function wl(t){return Math.log(t)}function _l(t){return Math.exp(t)}function i6(t){return-Math.log(-t)}function o6(t){return-Math.exp(-t)}function a6(t){return isFinite(t)?+("1e"+t):t<0?0:t}function c6(t){return t===10?a6:t===Math.E?Math.exp:n=>Math.pow(t,n)}function s6(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}function vl(t){return(n,e)=>-t(-n,e)}function u0(t){const n=t(wl,_l),e=n.domain;let r=10,i,o;function a(){return i=s6(r),o=c6(r),e()[0]<0?(i=vl(i),o=vl(o),t(i6,o6)):t(wl,_l),n}return n.base=function(c){return arguments.length?(r=+c,a()):r},n.domain=function(c){return arguments.length?(e(c),a()):e()},n.ticks=c=>{const s=e();let f=s[0],u=s[s.length-1];const h=u<f;h&&([f,u]=[u,f]);let l=i(f),d=i(u),p,g;const y=c==null?10:+c;let b=[];if(!(r%1)&&d-l<y){if(l=Math.floor(l),d=Math.ceil(d),f>0){for(;l<=d;++l)for(p=1;p<r;++p)if(g=l<0?p/o(-l):p*o(l),!(g<f)){if(g>u)break;b.push(g)}}else for(;l<=d;++l)for(p=r-1;p>=1;--p)if(g=l>0?p/o(-l):p*o(l),!(g<f)){if(g>u)break;b.push(g)}b.length*2<y&&(b=Ne(f,u,y))}else b=Ne(l,d,Math.min(d-l,y)).map(o);return h?b.reverse():b},n.tickFormat=(c,s)=>{if(c==null&&(c=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=z2(s)).precision==null&&(s.trim=!0),s=ca(s)),c===1/0)return s;const f=Math.max(1,r*c/n.ticks().length);return u=>{let h=u/o(Math.round(i(u)));return h*r<r-.5&&(h*=r),h<=f?s(u):""}},n.nice=()=>e(P2(e(),{floor:c=>o(Math.floor(i(c))),ceil:c=>o(Math.ceil(i(c)))})),n}function l0(){const t=u0(Ns()).domain([1,10]);return t.copy=()=>Ls(t,l0()).base(t.base()),Re.apply(t,arguments),t}function xl(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function $l(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function h0(t){var n=1,e=t(xl(n),$l(n));return e.constant=function(r){return arguments.length?t(xl(n=+r),$l(n)):n},aa(e)}function d0(){var t=h0(Ns());return t.copy=function(){return Ls(t,d0()).constant(t.constant())},Re.apply(t,arguments)}function Ml(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function f6(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function u6(t){return t<0?-t*t:t*t}function p0(t){var n=t(Ve,Ve),e=1;function r(){return e===1?t(Ve,Ve):e===.5?t(f6,u6):t(Ml(e),Ml(1/e))}return n.exponent=function(i){return arguments.length?(e=+i,r()):e},aa(n)}function g0(){var t=p0(Ns());return t.copy=function(){return Ls(t,g0()).exponent(t.exponent())},Re.apply(t,arguments),t}function m0(){var t=[],n=[],e=[],r;function i(){var a=0,c=Math.max(1,n.length);for(e=new Array(c-1);++a<c;)e[a-1]=Sb(t,a/c);return o}function o(a){return a==null||isNaN(a=+a)?r:n[zs(e,a)]}return o.invertExtent=function(a){var c=n.indexOf(a);return c<0?[NaN,NaN]:[c>0?e[c-1]:t[0],c<e.length?e[c]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let c of a)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(xt),i()},o.range=function(a){return arguments.length?(n=Array.from(a),i()):n.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return e.slice()},o.copy=function(){return m0().domain(t).range(n).unknown(r)},Re.apply(o,arguments)}function b0(){var t=[.5],n=[0,1],e,r=1;function i(o){return o!=null&&o<=o?n[zs(t,o,0,r)]:e}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(o){return arguments.length?(n=Array.from(o),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(o){var a=n.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(e=o,i):e},i.copy=function(){return b0().domain(t).range(n).unknown(e)},Re.apply(i,arguments)}function ma(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ba(){var t=0,n=.5,e=1,r=1,i,o,a,c,s,f=Ve,u,h=!1,l;function d(g){return isNaN(g=+g)?l:(g=.5+((g=+u(g))-o)*(r*g<r*o?c:s),f(h?Math.max(0,Math.min(1,g)):g))}d.domain=function(g){return arguments.length?([t,n,e]=g,i=u(t=+t),o=u(n=+n),a=u(e=+e),c=i===o?0:.5/(o-i),s=o===a?0:.5/(a-o),r=o<i?-1:1,d):[t,n,e]},d.clamp=function(g){return arguments.length?(h=!!g,d):h},d.interpolator=function(g){return arguments.length?(f=g,d):f};function p(g){return function(y){var b,m,_;return arguments.length?([b,m,_]=y,f=mi(g,[b,m,_]),d):[f(0),f(.5),f(1)]}}return d.range=p(Rh),d.rangeRound=p(Bh),d.unknown=function(g){return arguments.length?(l=g,d):l},function(g){return u=g,i=g(t),o=g(n),a=g(e),c=i===o?0:.5/(o-i),s=o===a?0:.5/(a-o),r=o<i?-1:1,d}}function y0(){var t=aa(ba()(Ve));return t.copy=function(){return ma(t,y0())},sa.apply(t,arguments)}function w0(){var t=u0(ba()).domain([.1,1,10]);return t.copy=function(){return ma(t,w0()).base(t.base())},sa.apply(t,arguments)}function _0(){var t=h0(ba());return t.copy=function(){return ma(t,_0()).constant(t.constant())},sa.apply(t,arguments)}function v0(){var t=p0(ba());return t.copy=function(){return ma(t,v0()).exponent(t.exponent())},sa.apply(t,arguments)}function K(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(r*6,++r*6);return e}const l6=K("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),h6=K("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),d6=K("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),p6=K("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),g6=K("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),m6=K("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),b6=K("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),y6=K("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),w6=K("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),_6=K("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ct=t=>I2(t[t.length-1]);var x0=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(K);const $0=ct(x0);var M0=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(K);const S0=ct(M0);var A0=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(K);const E0=ct(A0);var k0=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(K);const T0=ct(k0);var is=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(K);const Ro=ct(is);var C0=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(K);const N0=ct(C0);var os=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(K);const Bo=ct(os);var L0=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(K);const z0=ct(L0);var P0=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(K);const I0=ct(P0);var R0=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(K);const B0=ct(R0);var F0=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(K);const D0=ct(F0);var O0=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(K);const q0=ct(O0);var Y0=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(K);const j0=ct(Y0);var X0=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(K);const W0=ct(X0);var G0=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(K);const V0=ct(G0);var H0=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(K);const U0=ct(H0);var Z0=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(K);const K0=ct(Z0);var Q0=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(K);const J0=ct(Q0);var t1=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(K);const n1=ct(t1);var e1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(K);const r1=ct(e1);var i1=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(K);const o1=ct(i1);var a1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(K);const c1=ct(a1);var s1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(K);const f1=ct(s1);var u1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(K);const l1=ct(u1);var h1=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(K);const d1=ct(h1);var p1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(K);const g1=ct(p1);var m1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(K);const b1=ct(m1);function y1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const w1=Gs(An(300,.5,0),An(-240,.5,1));var _1=Gs(An(-100,.75,.35),An(80,1.5,.8)),v1=Gs(An(260,.75,.35),An(80,1.5,.8)),Vi=An();function x1(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return Vi.h=360*t-100,Vi.s=1.5-1.5*n,Vi.l=.8-.9*n,Vi+""}var Hi=cr(),v6=Math.PI/3,x6=Math.PI*2/3;function $1(t){var n;return t=(.5-t)*Math.PI,Hi.r=255*(n=Math.sin(t))*n,Hi.g=255*(n=Math.sin(t+v6))*n,Hi.b=255*(n=Math.sin(t+x6))*n,Hi+""}function M1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function ya(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}const S1=ya(K("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var A1=ya(K("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),E1=ya(K("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),k1=ya(K("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const T1=Math.cos,tf=Math.min,Fo=Math.sin,$t=Math.sqrt,Sl=1e-12,Do=Math.PI,wa=2*Do;class C1{constructor(n,e){this._context=n,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,e){switch(n=+n,e=+e,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,e,n,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,n,this._y0,n,e);break}}this._x0=n,this._y0=e}}function $6(t){return new C1(t,!0)}function M6(t){return new C1(t,!1)}const S6=$t(3),N1={draw(t,n){const e=$t(n+tf(n/28,.75))*.59436,r=e/2,i=r*S6;t.moveTo(0,e),t.lineTo(0,-e),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},ri={draw(t,n){const e=$t(n/Do);t.moveTo(e,0),t.arc(0,0,e,0,wa)}},L1={draw(t,n){const e=$t(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},z1=$t(1/3),A6=z1*2,P1={draw(t,n){const e=$t(n/A6),r=e*z1;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},I1={draw(t,n){const e=$t(n)*.62625;t.moveTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.lineTo(-e,0),t.closePath()}},R1={draw(t,n){const e=$t(n-tf(n/7,2))*.87559;t.moveTo(-e,0),t.lineTo(e,0),t.moveTo(0,e),t.lineTo(0,-e)}},B1={draw(t,n){const e=$t(n),r=-e/2;t.rect(r,r,e,e)}},F1={draw(t,n){const e=$t(n)*.4431;t.moveTo(e,e),t.lineTo(e,-e),t.lineTo(-e,-e),t.lineTo(-e,e),t.closePath()}},E6=.8908130915292852,D1=Fo(Do/10)/Fo(7*Do/10),k6=Fo(wa/10)*D1,T6=-T1(wa/10)*D1,O1={draw(t,n){const e=$t(n*E6),r=k6*e,i=T6*e;t.moveTo(0,-e),t.lineTo(r,i);for(let o=1;o<5;++o){const a=wa*o/5,c=T1(a),s=Fo(a);t.lineTo(s*e,-c*e),t.lineTo(c*r-s*i,s*r+c*i)}t.closePath()}},uc=$t(3),q1={draw(t,n){const e=-$t(n/(uc*3));t.moveTo(0,e*2),t.lineTo(-uc*e,-e),t.lineTo(uc*e,-e),t.closePath()}},C6=$t(3),Y1={draw(t,n){const e=$t(n)*.6824,r=e/2,i=e*C6/2;t.moveTo(0,-e),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},nn=-.5,en=$t(3)/2,as=1/$t(12),N6=(as/2+1)*3,j1={draw(t,n){const e=$t(n/N6),r=e/2,i=e*as,o=r,a=e*as+e,c=-o,s=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(c,s),t.lineTo(nn*r-en*i,en*r+nn*i),t.lineTo(nn*o-en*a,en*o+nn*a),t.lineTo(nn*c-en*s,en*c+nn*s),t.lineTo(nn*r+en*i,nn*i-en*r),t.lineTo(nn*o+en*a,nn*a-en*o),t.lineTo(nn*c+en*s,nn*s-en*c),t.closePath()}},X1={draw(t,n){const e=$t(n-tf(n/6,1.7))*.6189;t.moveTo(-e,-e),t.lineTo(e,e),t.moveTo(-e,e),t.lineTo(e,-e)}},L6=[ri,L1,P1,B1,O1,q1,j1],z6=[ri,R1,X1,Y1,N1,F1,I1];function ae(){}function W1(t){this._context=t}W1.prototype={areaStart:ae,areaEnd:ae,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Fh(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function P6(t){return new W1(t)}function G1(t){this._context=t}G1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:Fh(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function I6(t){return new G1(t)}function V1(t,n){this._basis=new Dh(t),this._beta=n}V1.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r=t[0],i=n[0],o=t[e]-r,a=n[e]-i,c=-1,s;++c<=e;)s=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(r+s*o),this._beta*n[c]+(1-this._beta)*(i+s*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};const R6=function t(n){function e(r){return n===1?new Dh(r):new V1(r,n)}return e.beta=function(r){return t(+r)},e}(.85);function Oo(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function nf(t,n){this._context=t,this._k=(1-n)/6}nf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Oo(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Oo(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const B6=function t(n){function e(r){return new nf(r,n)}return e.tension=function(r){return t(+r)},e}(0);function ef(t,n){this._context=t,this._k=(1-n)/6}ef.prototype={areaStart:ae,areaEnd:ae,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Oo(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const F6=function t(n){function e(r){return new ef(r,n)}return e.tension=function(r){return t(+r)},e}(0);function rf(t,n){this._context=t,this._k=(1-n)/6}rf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Oo(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const D6=function t(n){function e(r){return new rf(r,n)}return e.tension=function(r){return t(+r)},e}(0);function of(t,n,e){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Sl){var c=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*c-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*c-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>Sl){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*f+t._x1*t._l23_2a-n*t._l12_2a)/u,a=(a*f+t._y1*t._l23_2a-e*t._l12_2a)/u}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function H1(t,n){this._context=t,this._alpha=n}H1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:of(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const O6=function t(n){function e(r){return n?new H1(r,n):new nf(r,0)}return e.alpha=function(r){return t(+r)},e}(.5);function U1(t,n){this._context=t,this._alpha=n}U1.prototype={areaStart:ae,areaEnd:ae,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:of(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const q6=function t(n){function e(r){return n?new U1(r,n):new ef(r,0)}return e.alpha=function(r){return t(+r)},e}(.5);function Z1(t,n){this._context=t,this._alpha=n}Z1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:of(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const Y6=function t(n){function e(r){return n?new Z1(r,n):new rf(r,0)}return e.alpha=function(r){return t(+r)},e}(.5);function K1(t){this._context=t}K1.prototype={areaStart:ae,areaEnd:ae,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function j6(t){return new K1(t)}function Al(t){return t<0?-1:1}function El(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),c=(o*i+a*r)/(r+i);return(Al(o)+Al(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(c))||0}function kl(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function lc(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,c=(o-r)/3;t._context.bezierCurveTo(r+c,i+c*n,o-c,a-c*e,o,a)}function qo(t){this._context=t}qo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lc(this,this._t0,kl(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,lc(this,kl(this,e=El(this,t,n)),e);break;default:lc(this,this._t0,e=El(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}};function Q1(t){this._context=new J1(t)}(Q1.prototype=Object.create(qo.prototype)).point=function(t,n){qo.prototype.point.call(this,n,t)};function J1(t){this._context=t}J1.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}};function X6(t){return new qo(t)}function W6(t){return new Q1(t)}function tp(t){this._context=t}tp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),e===2)this._context.lineTo(t[1],n[1]);else for(var r=Tl(t),i=Tl(n),o=0,a=1;a<e;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],n[a]);(this._line||this._line!==0&&e===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};function Tl(t){var n,e=t.length-1,r,i=new Array(e),o=new Array(e),a=new Array(e);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],n=1;n<e-1;++n)i[n]=1,o[n]=4,a[n]=4*t[n]+2*t[n+1];for(i[e-1]=2,o[e-1]=7,a[e-1]=8*t[e-1]+t[e],n=1;n<e;++n)r=i[n]/o[n-1],o[n]-=r,a[n]-=r*a[n-1];for(i[e-1]=a[e-1]/o[e-1],n=e-2;n>=0;--n)i[n]=(a[n]-i[n+1])/o[n];for(o[e-1]=(t[e]+i[e-1])/2,n=0;n<e-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function G6(t){return new tp(t)}function _a(t,n){this._context=t,this._t=n}_a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}break}}this._x=t,this._y=n}};function V6(t){return new _a(t,.5)}function H6(t){return new _a(t,0)}function U6(t){return new _a(t,1)}function Ft(t){return t!=null&&!Number.isNaN(t)}function cn(t,n){return+Ft(n)-+Ft(t)||xt(t,n)}function Yo(t,n){return+Ft(n)-+Ft(t)||sr(t,n)}function af(t){return t!=null&&`${t}`!=""}function jo(t){return isFinite(t)?t:NaN}function Dn(t){return t>0&&isFinite(t)?t:NaN}function va(t){return t<0&&isFinite(t)?t:NaN}function Z6(t,n){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof n=="function"?n(t):n;const e=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${K6(t.getUTCFullYear())}-${In(t.getUTCMonth()+1,2)}-${In(t.getUTCDate(),2)}${e||r||i||o?`T${In(e,2)}:${In(r,2)}${i||o?`:${In(i,2)}${o?`.${In(o,3)}`:""}`:""}Z`:""}`}function K6(t){return t<0?`-${In(-t,6)}`:t>9999?`+${In(t,6)}`:In(t,4)}function In(t,n){return`${t}`.padStart(n,"0")}const Q6=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function np(t,n){return Q6.test(t+="")?new Date(t):typeof n=="function"?n(t):n}const Ke=1e3,ve=Ke*60,xe=ve*60,Yn=xe*24,yn=Yn*7,Ee=Yn*30,Kn=Yn*365,hc=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ke],["5 seconds",5*Ke],["15 seconds",15*Ke],["30 seconds",30*Ke],["minute",ve],["5 minutes",5*ve],["15 minutes",15*ve],["30 minutes",30*ve],["hour",xe],["3 hours",3*xe],["6 hours",6*xe],["12 hours",12*xe],["day",Yn],["2 days",2*Yn],["week",yn],["2 weeks",2*yn],["month",Ee],["3 months",3*Ee],["6 months",6*Ee],["year",Kn],["2 years",2*Kn],["5 years",5*Kn],["10 years",10*Kn],["20 years",20*Kn],["50 years",50*Kn],["100 years",100*Kn]],cf=new Map([["second",Ke],["minute",ve],["hour",xe],["day",Yn],["monday",yn],["tuesday",yn],["wednesday",yn],["thursday",yn],["friday",yn],["saturday",yn],["sunday",yn],["week",yn],["month",Ee],["year",Kn]]),ep=new Map([["second",Ps],["minute",R2],["hour",B2],["day",Oh],["monday",F2],["tuesday",D2],["wednesday",O2],["thursday",q2],["friday",Y2],["saturday",j2],["sunday",Lu],["week",Lu],["month",qh],["year",Yh]]),rp=new Map([["second",Ps],["minute",jh],["hour",Xh],["day",Wh],["monday",X2],["tuesday",W2],["wednesday",G2],["thursday",V2],["friday",H2],["saturday",U2],["sunday",zu],["week",zu],["month",Gh],["year",Vh]]),_i=Symbol("intervalDuration"),xa=Symbol("intervalType");for(const[t,n]of ep)n[_i]=cf.get(t),n[xa]="time";for(const[t,n]of rp)n[_i]=cf.get(t),n[xa]="utc";const J6=[["year",Vh,"utc"],["year",Yh,"time"],["month",Gh,"utc"],["month",qh,"time"],["day",Wh,"utc",6*Ee],["day",Oh,"time",6*Ee],["hour",Xh,"utc",3*Yn],["minute",jh,"utc",6*xe],["second",Ps,"utc",30*ve]];function ip(t,n,e){let r=`${t}`.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1));let i=1;const o=/^(?:(\d+)\s+)/.exec(r);switch(o&&(r=r.slice(o[0].length),i=+o[1]),r){case"quarter":r="month",i*=3;break;case"half":r="month",i*=6;break}let a=n.get(r);if(!a)throw new Error(`unknown interval: ${t}`);if(i>1){if(!a.every)throw new Error(`non-periodic interval: ${r}`);a=a.every(i),a[_i]=cf.get(r)*i,a[xa]=e}return a}function op(t){return ip(t,ep,"time")}function sf(t){return ip(t,rp,"utc")}function Cl(t,n){if(!(n>1))return;const e=t[_i];if(!hc.some(([,i])=>i===e)||e%Yn===0&&Yn<e&&e<Ee)return;const[r]=hc[Z2(([,i])=>Math.log(i)).center(hc,Math.log(e*n))];return(t[xa]==="time"?op:sf)(r)}function Nl(t,n,e){const r=n==="time"?K2:Is;if(e==null)return r(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=t5(e);switch(t){case"millisecond":return je(r(".%L"),r(":%M:%S"),i);case"second":return je(r(":%S"),r("%-I:%M"),i);case"minute":return je(r("%-I:%M"),r("%p"),i);case"hour":return je(r("%-I %p"),r("%b %-d"),i);case"day":return je(r("%-d"),r("%b"),i);case"month":return je(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function t5(t){return t==="left"||t==="right"?(n,e)=>`
${n}
${e}`:t==="top"?(n,e)=>`${e}
${n}`:(n,e)=>`${n}
${e}`}function n5(t,n){const e=kt(kb(t,(r,i)=>Math.abs(i-r)));if(e<1e3)return Nl("millisecond","utc",n);for(const[r,i,o,a]of J6){if(e>a||r==="hour"&&!e)break;if(t.every(c=>i.floor(c)>=c))return Nl(r,o,n)}}function je(t,n,e){return(r,i,o)=>{const a=t(r,i),c=n(r,i),s=i-pr(o);return i!==s&&o[s]!==void 0&&c===n(o[s],s)?a:e(a,c)}}const hr=Object.getPrototypeOf(Uint8Array),e5=Object.prototype.toString,ap=Symbol("reindex");function J(t,n,e){const r=typeof n;return r==="string"?Ll(t,cp(n),e):r==="function"?Ll(t,n,e):r==="number"||n instanceof Date||r==="boolean"?ut(t,Jt(n),e):typeof(n==null?void 0:n.transform)=="function"?zl(n.transform(t),e):r5(zl(n,e),t==null?void 0:t[ap])}function r5(t,n){return n?Ma(t,n):t}function Ll(t,n,e){return ut(t,(e==null?void 0:e.prototype)instanceof hr?i5(n):n,e)}function zl(t,n){return n===void 0?Vt(t):t instanceof n?t:n.prototype instanceof hr&&!(t instanceof hr)?n.from(t,lf):n.from(t)}function i5(t){return(n,e)=>lf(t(n,e))}const Hr=[null],cp=t=>n=>n[t],Ut={transform:Wn},V={transform:t=>t},ff=()=>1,o5=()=>!0,zt=t=>t==null?t:`${t}`,tt=t=>t==null?t:+t,vi=t=>t?t[0]:void 0,ii=t=>t?t[1]:void 0,a5=t=>t?t[2]:void 0,Jt=t=>()=>t;function uf(t){const n=+`${t}`.slice(1)/100;return(e,r)=>oe(e,n,r)}function jt(t){return t instanceof hr?t:ut(t,lf,Float64Array)}function lf(t){return t==null?NaN:Number(t)}function c5(t){return ut(t,sp)}function sp(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?np(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function Gt(t,n){return t===void 0&&(t=n),t===null?[void 0,"none"]:$i(t)?[void 0,t]:[t,void 0]}function _t(t,n){return t===void 0&&(t=n),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function fp(t,n,e){if(t!=null)return tn(t,n,e)}function tn(t,n,e){const r=`${t}`.toLowerCase();if(!e.includes(r))throw new Error(`invalid ${n}: ${t}`);return r}function Vt(t){return t==null||t instanceof Array||t instanceof hr?t:Array.from(t)}function ut(t,n,e=Array){return t==null?t:t instanceof e?t.map(n):e.from(t,n)}function oi(t,n=Array){return t instanceof n?t.slice():n.from(t)}function up({x:t,x1:n,x2:e}){return t!==void 0||n!==void 0||e!==void 0}function lp({y:t,y1:n,y2:e}){return t!==void 0||n!==void 0||e!==void 0}function $a(t){return up(t)||lp(t)||t.interval!==void 0}function sn(t){return(t==null?void 0:t.toString)===e5}function ke(t){return sn(t)&&(t.type!==void 0||t.domain!==void 0)}function wn(t){return sn(t)&&typeof t.transform!="function"}function ce(t){return wn(t)&&t.value===void 0&&t.channel===void 0}function hp(t,n,e,r=V){return n===void 0&&e===void 0?(n=0,e=t===void 0?r:t):n===void 0?n=t===void 0?0:t:e===void 0&&(e=t===void 0?0:t),[n,e]}function gn(t,n){return t===void 0&&n===void 0?[vi,ii]:[t,n]}function de({z:t,fill:n,stroke:e}={}){return t===void 0&&([t]=Gt(n)),t===void 0&&([t]=Gt(e)),t}function Wn(t){const n=t.length,e=new Uint32Array(n);for(let r=0;r<n;++r)e[r]=r;return e}function Ma(t,n){return ut(n,e=>t[e],t.constructor)}function hf(t){return t.length===1?(n,e)=>t(Ma(e,n)):t}function Te(t,n,e){return t.subarray?t.subarray(n,e):t.slice(n,e)}function $e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function dp(t,n){if(n[t]!==void 0)return n[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return n[t]}function Kt(t){let n;return[{transform:()=>n,label:Gn(t)},e=>n=e]}function qt(t){return t==null?[t]:Kt(t)}function Gn(t,n){return typeof t=="string"?t:t&&t.label!==void 0?t.label:n}function Xo(t,n){return{transform(e){const r=t.transform(e),i=n.transform(e);return Ot(r)||Ot(i)?ut(r,(o,a)=>new Date((+r[a]+ +i[a])/2)):ut(r,(o,a)=>(+r[a]+ +i[a])/2,Float64Array)},label:t.label}}function Wo(t,n){const e=pp(n==null?void 0:n.interval,n==null?void 0:n.type);return e?ut(t,e):t}function pp(t,n){const e=df(t,n);return e&&(r=>Ft(r)?e.floor(r):r)}function df(t,n){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const e=Math.abs(t);return t<0?{floor:r=>Math.floor(r*e)/e,offset:r=>(r*e+1)/e,range:(r,i)=>rn(Math.ceil(r*e),i*e).map(o=>o/e)}:{floor:r=>Math.floor(r/e)*e,offset:r=>r+e,range:(r,i)=>rn(Math.ceil(r/e),i/e).map(o=>o*e)}}if(typeof t=="string")return(n==="time"?op:sf)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function vr(t,n){if(t=df(t,n),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function s5(t,n){if(t=vr(t,n),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function f5(t){return Qe(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function Qe(t){return typeof(t==null?void 0:t.range)=="function"}function xi(t){return t===void 0||wn(t)?t:{value:t}}function u5(t){return t==null?null:{transform:n=>J(n,t,Float64Array),label:Gn(t)}}function l5(t){if(!Vn(t))return!1;for(const n of t)if(n!=null)return typeof n=="object"&&"0"in n&&"1"in n}function Vn(t){return t&&typeof t[Symbol.iterator]=="function"}function gp(t){for(const n of t)if(n!=null)return typeof n!="object"||n instanceof Date}function mt(t){for(const n of t){if(n==null)continue;const e=typeof n;return e==="string"||e==="boolean"}}function Ot(t){for(const n of t)if(n!=null)return n instanceof Date}function h5(t){for(const n of t)if(n!=null)return typeof n=="string"&&isNaN(n)&&np(n)}function d5(t){for(const n of t)if(n!=null){if(typeof n!="string")return!1;if(n.trim())return!isNaN(n)}}function Je(t){for(const n of t)if(n!=null)return typeof n=="number"}function dc(t,n){let e;for(const r of t)if(r!=null){if(!n(r))return!1;e=!0}return e}const p5=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function $i(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||p5.has(t))}function g5(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function wt(t){return t==null||dr(t)}function dr(t){return/^\s*none\s*$/i.test(t)}function m5(t){return/^\s*round\s*$/i.test(t)}function mp(t,n){return fp(t,n,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Mi(t="middle"){return mp(t,"frameAnchor")}function pr(t){if(t==null)return;const n=t[0],e=t[t.length-1];return sr(n,e)}function b5(t={},...n){let e=t;for(const r of n)for(const i in r)if(e[i]===void 0){const o=r[i];e===t?e={...e,[i]:o}:e[i]=o}return e}function y5(t){console.warn("named iterables are deprecated; please use an object instead");const n=new Set;return Object.fromEntries(Array.from(t,e=>{const{name:r}=e;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(n.has(i))throw new Error(`duplicate name: ${i}`);return n.add(i),[r,e]}))}function pf(t){return Vn(t)?y5(t):t}const xn=Symbol("position"),Hn=Symbol("color"),Si=Symbol("radius"),Ai=Symbol("length"),Ei=Symbol("opacity"),Sa=Symbol("symbol"),bp=Symbol("projection"),gt=new Map([["x",xn],["y",xn],["fx",xn],["fy",xn],["r",Si],["color",Hn],["opacity",Ei],["symbol",Sa],["length",Ai],["projection",bp]]);function w5(t){return t===xn||t===bp}function _5(t){return t===xn||t===Si||t===Ai||t===Ei}const yp=Math.sqrt(3),wp=2/yp,v5={draw(t,n){const e=Math.sqrt(n/Math.PI),r=e*wp,i=r/2;t.moveTo(0,r),t.lineTo(e,i),t.lineTo(e,-i),t.lineTo(0,-r),t.lineTo(-e,-i),t.lineTo(-e,i),t.closePath()}},gf=new Map([["asterisk",N1],["circle",ri],["cross",L1],["diamond",P1],["diamond2",I1],["hexagon",v5],["plus",R1],["square",B1],["square2",F1],["star",O1],["times",X1],["triangle",q1],["triangle2",Y1],["wye",j1]]);function mf(t){return t&&typeof t.draw=="function"}function x5(t){return mf(t)?!0:typeof t!="string"?!1:gf.has(t.toLowerCase())}function bf(t){if(t==null||mf(t))return t;const n=gf.get(`${t}`.toLowerCase());if(n)return n;throw new Error(`invalid symbol: ${t}`)}function $5(t){if(t==null||mf(t))return[void 0,t];if(typeof t=="string"){const n=gf.get(`${t}`.toLowerCase());if(n)return[void 0,n]}return[t,void 0]}function kn({filter:t,sort:n,reverse:e,transform:r,initializer:i,...o}={},a){if(r===void 0&&(t!=null&&(r=yf(t)),n!=null&&!ce(n)&&(r=pc(r,_f(n))),e&&(r=pc(r,wf))),a!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(n===null||ce(n))&&{sort:n},transform:pc(r,a)}}function Ht({filter:t,sort:n,reverse:e,initializer:r,...i}={},o){return r===void 0&&(t!=null&&(r=yf(t)),n!=null&&!ce(n)&&(r=gc(r,_f(n))),e&&(r=gc(r,wf))),{...i,...(n===null||ce(n))&&{sort:n},initializer:gc(r,o)}}function pc(t,n){return t==null?n===null?void 0:n:n==null?t===null?void 0:t:function(e,r,i){return{data:e,facets:r}=t.call(this,e,r,i),n.call(this,Vt(e),r,i)}}function gc(t,n){return t==null?n===null?void 0:n:n==null?t===null?void 0:t:function(e,r,i,...o){let a,c,s,f,u,h;return{data:c=e,facets:s=r,channels:a}=t.call(this,e,r,i,...o),{data:u=c,facets:h=s,channels:f}=n.call(this,c,s,{...i,...a},...o),{data:u,facets:h,channels:{...a,...f}}}}function Aa(t,n){return(t.initializer!=null?Ht:kn)(t,n)}function M5(t,n){return Aa(n,yf(t))}function yf(t){return(n,e)=>{const r=J(n,t);return{data:n,facets:e.map(i=>i.filter(o=>r[o]))}}}function S5({sort:t,...n}={}){return{...Aa(n,wf),sort:ce(t)?t:null}}function wf(t,n){return{data:t,facets:n.map(e=>e.slice().reverse())}}function A5({seed:t,sort:n,...e}={}){return{...Aa(e,vp(t==null?Math.random:Qs(t))),sort:ce(n)?n:null}}function _p(t,{sort:n,...e}={}){return{...(wn(t)&&t.channel!==void 0?Ht:Aa)(e,_f(t)),sort:ce(n)?n:null}}function _f(t){return(typeof t=="function"&&t.length!==1?E5:vp)(t)}function E5(t){return(n,e)=>{const r=(i,o)=>t(n[i],n[o]);return{data:n,facets:e.map(i=>i.slice().sort(r))}}}function vp(t){let n,e;({channel:n,value:t,order:e}={...xi(t)});const r=n==null?void 0:n.startsWith("-");if(r&&(n=n.slice(1)),e===void 0&&(e=r?Yo:cn),typeof e!="function")switch(`${e}`.toLowerCase()){case"ascending":e=cn;break;case"descending":e=Yo;break;default:throw new Error(`invalid order: ${e}`)}return(i,o,a)=>{let c;if(n===void 0)c=J(i,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(c=a[n],!c)return{};c=c.value}const s=(f,u)=>e(c[f],c[u]);return{data:i,facets:o.map(f=>f.slice().sort(s))}}}function vf(t,n){return Ea(null,null,t,n)}function ai(t={y:"count"},n={}){const{x:e=V}=n;if(e==null)throw new Error("missing channel: x");return Ea(e,null,t,n)}function ci(t={x:"count"},n={}){const{y:e=V}=n;if(e==null)throw new Error("missing channel: y");return Ea(null,e,t,n)}function xf(t={fill:"count"},n={}){let{x:e,y:r}=n;if([e,r]=gn(e,r),e==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return Ea(e,r,t,n)}function Ea(t,n,{data:e=Ef,filter:r,sort:i,reverse:o,...a}={},c={}){a=$f(a,c),e=ka(e,V),i=i==null?void 0:Mf("sort",i,c),r=r==null?void 0:Sf("filter",r,c);const[s,f]=qt(t),[u,h]=qt(n),{z:l,fill:d,stroke:p,x1:g,x2:y,y1:b,y2:m,..._}=c,[w,x]=qt(l),[v]=Gt(d),[M]=Gt(p),[S,k]=qt(v),[$,E]=qt(M);return{..."z"in c&&{z:w||l},..."fill"in c&&{fill:S||d},..."stroke"in c&&{stroke:$||p},...kn(_,(T,L,C)=>{const A=Wo(J(T,t),C==null?void 0:C.x),N=Wo(J(T,n),C==null?void 0:C.y),z=J(T,l),I=J(T,v),F=J(T,M),P=Af(a,{z,fill:I,stroke:F}),R=[],B=[],D=A&&f([]),H=N&&h([]),U=z&&x([]),j=I&&k([]),O=F&&E([]);let q=0;for(const Z of a)Z.initialize(T);i&&i.initialize(T),r&&r.initialize(T);for(const Z of L){const at=[];for(const et of a)et.scope("facet",Z);i&&i.scope("facet",Z),r&&r.scope("facet",Z);for(const[et,lt]of ir(Z,P))for(const[vt,dt]of ir(lt,N))for(const[St,Tt]of ir(dt,A))if(!(r&&!r.reduce(Tt))){at.push(q++),B.push(e.reduceIndex(Tt,T)),A&&D.push(St),N&&H.push(vt),z&&U.push(P===z?et:z[Tt[0]]),I&&j.push(P===I?et:I[Tt[0]]),F&&O.push(P===F?et:F[Tt[0]]);for(const mn of a)mn.reduce(Tt);i&&i.reduce(Tt)}R.push(at)}return xp(R,i,o),{data:B,facets:R}}),...!re(a,"x")&&(s?{x:s}:{x1:g,x2:y}),...!re(a,"y")&&(u?{y:u}:{y1:b,y2:m}),...Object.fromEntries(a.map(({name:T,output:L})=>[T,L]))}}function re(t,...n){for(const{name:e}of t)if(n.includes(e))return!0;return!1}function $f(t,n,e=Mf){const r=Object.entries(t);return n.title!=null&&t.title===void 0&&r.push(["title",L5]),n.href!=null&&t.href===void 0&&r.push(["href",kf]),r.filter(([,i])=>i!==void 0).map(([i,o])=>o===null?k5(i):e(i,o,n))}function Mf(t,n,e,r=Sf){let i;sn(n)&&"reduce"in n&&(i=n.scale,n=n.reduce);const o=r(t,n,e),[a,c]=Kt(o.label);let s;return{name:t,output:i===void 0?a:{value:a,scale:i},initialize(f){o.initialize(f),s=c([])},scope(f,u){o.scope(f,u)},reduce(f,u){s.push(o.reduce(f,u))}}}function k5(t){return{name:t,initialize(){},scope(){},reduce(){}}}function Sf(t,n,e,r=ka){const i=dp(t,e),o=r(n,i);let a,c;return{label:Gn(o===Go?null:i,o.label),initialize(s){a=i===void 0?s:J(s,i),o.scope==="data"&&(c=o.reduceIndex(Wn(s),a))},scope(s,f){o.scope===s&&(c=o.reduceIndex(f,a))},reduce(s,f){return o.scope==null?o.reduceIndex(s,a,f):o.reduceIndex(s,a,c,f)}}}function ir(t,n){return n?Qr(Xn(t,e=>n[e]),vi):[[,t]]}function ka(t,n,e=T5){if(t==null)return e(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&sn(t))return C5(t);if(typeof t=="function")return N5(t);if(/^p\d{2}$/i.test(t))return Pn(uf(t));switch(`${t}`.toLowerCase()){case"first":return kf;case"last":return z5;case"identity":return Ef;case"count":return Go;case"distinct":return P5;case"sum":return n==null?Go:I5;case"proportion":return Il(n,"data");case"proportion-facet":return Il(n,"facet");case"deviation":return Pn(pi);case"min":return Pn(Xt);case"min-index":return Pn(Mb);case"max":return Pn(kt);case"max-index":return Pn($b);case"mean":return Pl(fa);case"median":return Pl(ti);case"variance":return Pn(Fs);case"mode":return Pn(fd)}return e(t)}function T5(t){throw new Error(`invalid reduce: ${t}`)}function Af(t,n){for(const e in n){const r=n[e];if(r!==void 0&&!t.some(i=>i.name===e))return r}}function xp(t,n,e){if(n){const r=n.output.transform(),i=(o,a)=>cn(r[o],r[a]);t.forEach(o=>o.sort(i))}e&&t.forEach(r=>r.reverse())}function C5(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function N5(t){return{reduceIndex(n,e,r){return t(Ma(e,n),r)}}}function Pn(t){return{reduceIndex(n,e){return t(n,r=>e[r])}}}function Pl(t){return{reduceIndex(n,e){const r=t(n,i=>e[i]);return Ot(e)?new Date(r):r}}}const Ef={reduceIndex(t,n){return Ma(n,t)}},kf={reduceIndex(t,n){return n[t[0]]}},L5={reduceIndex(t,n){const r=Qr(er(t,o=>o.length,o=>n[o]),ii),i=r.slice(-5).reverse();if(i.length<r.length){const o=r.slice(0,-4);i[5-1]=[`… ${o.length.toLocaleString("en-US")} more`,Sn(o,ii)]}return i.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},z5={reduceIndex(t,n){return n[t[t.length-1]]}},Go={label:"Frequency",reduceIndex(t){return t.length}},P5={label:"Distinct",reduceIndex(t,n){const e=new gi;for(const r of t)e.add(n[r]);return e.size}},I5=Pn(Sn);function Il(t,n){return t==null?{scope:n,label:"Frequency",reduceIndex:(e,r,i=1)=>e.length/i}:{scope:n,reduceIndex:(e,r,i=1)=>Sn(e,o=>r[o])/i}}function si(t,{scale:n,type:e,value:r,filter:i,hint:o,label:a=Gn(r)},c){return o===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(o=r.hint),Mp(c,{scale:n,type:e,value:J(t,r),label:a,filter:i,hint:o})}function $p(t,n){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,si(n,r,e)]))}function Tf(t,n){const e=Object.fromEntries(Object.entries(t).map(([r,{scale:i,value:o}])=>{const a=i==null?null:n[i];return[r,a==null?o:ut(o,a)]}));return e.channels=t,e}function Mp(t,n){const{scale:e,value:r}=n;if(e===!0||e==="auto")switch(t){case"fill":case"stroke":case"color":n.scale=e!==!0&&dc(r,$i)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":n.scale=e!==!0&&dc(r,g5)?null:"opacity";break;case"symbol":e!==!0&&dc(r,x5)?(n.scale=null,n.value=ut(r,bf)):n.scale="symbol";break;default:n.scale=gt.has(t)?t:null;break}else if(e===!1)n.scale=null;else if(e!=null&&!gt.has(e))throw new Error(`unknown scale: ${e}`);return n}function R5(t,n,e,r,i){const{order:o,reverse:a,reduce:c=!0,limit:s}=i;for(const f in i){if(!gt.has(f))continue;let{value:u,order:h=o,reverse:l=a,reduce:d=c,limit:p=s}=xi(i[f]);const g=u==null?void 0:u.startsWith("-");if(g&&(u=u.slice(1)),h=h===void 0?g!==(u==="width"||u==="height")?Ap:Sp:D5(h),d==null||d===!1)continue;const y=f==="fx"||f==="fy"?F5(n,r[f]):B5(e,f);if(!y)throw new Error(`missing channel for scale: ${f}`);const b=y.value,[m=0,_=1/0]=Vn(p)?p:p<0?[p]:[0,p];if(u==null)y.domain=()=>{let w=Array.from(new gi(b));return l&&(w=w.reverse()),(m!==0||_!==1/0)&&(w=w.slice(m,_)),w};else{const w=u==="data"?t:u==="height"?Rl(e,"y1","y2"):u==="width"?Rl(e,"x1","x2"):cs(e,u,u==="y"?"y2":u==="x"?"x2":void 0),x=ka(d===!0?"max":d,w);y.domain=()=>{let v=vb(Wn(b),M=>x.reduceIndex(M,w),M=>b[M]);return h&&v.sort(h),l&&v.reverse(),(m!==0||_!==1/0)&&(v=v.slice(m,_)),v.map(vi)}}}}function B5(t,n){for(const e in t){const r=t[e];if(r.scale===n)return r}}function F5(t,n){const e=t.original;if(e===t)return n;const r=n.value,i=n.value=[];for(let o=0;o<e.length;++o){const a=r[e[o][0]];for(const c of t[o])i[c]=a}return n}function Rl(t,n,e){const r=cs(t,n),i=cs(t,e);return ut(i,(o,a)=>Math.abs(o-r[a]),Float64Array)}function cs(t,n,e){let r=t[n];if(!r&&e!==void 0&&(r=t[e]),r)return r.value;throw new Error(`missing channel: ${n}`)}function D5(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return Sp;case"descending":return Ap}throw new Error(`invalid order: ${t}`)}function Sp([t,n],[e,r]){return cn(n,r)||cn(t,e)}function Ap([t,n],[e,r]){return Yo(n,r)||cn(t,e)}function ss(t,n){let e=t[n];if(e){for(;e.source;)e=e.source;return e.source===null?null:e}}function Cf(t){let n,e;return(...r)=>(((e==null?void 0:e.length)!==r.length||e.some((i,o)=>i!==r[o]))&&(e=r,n=t(...r)),n)}const O5=Cf(t=>new Intl.NumberFormat(t)),q5=Cf((t,n)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...n&&{month:n}})),Y5=Cf((t,n)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...n&&{weekday:n}}));function j5(t="en-US"){const n=O5(t);return e=>e!=null&&!isNaN(e)?n.format(e):void 0}function X5(t="en-US",n="short"){const e=q5(t,n);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2e3,+r)))?e.format(r):void 0}function W5(t="en-US",n="short"){const e=Y5(t,n);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2001,0,+r)))?e.format(r):void 0}function Ep(t){return Z6(t,"Invalid Date")}function G5(t="en-US"){const n=j5(t);return e=>(e instanceof Date?Ep:typeof e=="number"?n:zt)(e)}const Pe=G5();let fs=0,us;function V5(){const t=fs;return fs=0,us=void 0,t}function On(t){t!==us&&(us=t,console.warn(t),++fs)}const Nt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let H5=0;function Bl(){return`plot-clip-${++H5}`}function kp(t,{title:n,href:e,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:a,fill:c,fillOpacity:s,stroke:f,strokeWidth:u,strokeOpacity:h,strokeLinejoin:l,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:g,strokeDashoffset:y,opacity:b,mixBlendMode:m,imageFilter:_,paintOrder:w,pointerEvents:x,shapeRendering:v,channels:M},{ariaLabel:S,fill:k="currentColor",fillOpacity:$,stroke:E="none",strokeOpacity:T,strokeWidth:L,strokeLinecap:C,strokeLinejoin:A,strokeMiterlimit:N,paintOrder:z}){k===null&&(c=null,s=null),E===null&&(f=null,h=null),wt(k)?!wt(E)&&(!wt(c)||M!=null&&M.fill)&&(E="none"):wt(E)&&(!wt(f)||M!=null&&M.stroke)&&(k="none");const[I,F]=Gt(c,k),[P,R]=_t(s,$),[B,D]=Gt(f,E),[H,U]=_t(h,T),[j,O]=_t(b);dr(D)||(u===void 0&&(u=L),d===void 0&&(d=C),l===void 0&&(l=A),p===void 0&&!m5(l)&&(p=N),!dr(F)&&w===void 0&&(w=z));const[q,Z]=_t(u);return k!==null&&(t.fill=bt(F,"currentColor"),t.fillOpacity=zr(R,1)),E!==null&&(t.stroke=bt(D,"none"),t.strokeWidth=zr(Z,1),t.strokeOpacity=zr(U,1),t.strokeLinejoin=bt(l,"miter"),t.strokeLinecap=bt(d,"butt"),t.strokeMiterlimit=zr(p,4),t.strokeDasharray=bt(g,"none"),t.strokeDashoffset=bt(y,"0")),t.target=zt(a),t.ariaLabel=zt(S),t.ariaDescription=zt(i),t.ariaHidden=zt(o),t.opacity=zr(O,1),t.mixBlendMode=bt(m,"normal"),t.imageFilter=bt(_,"none"),t.paintOrder=bt(w,"normal"),t.pointerEvents=bt(x,"auto"),t.shapeRendering=bt(v,"auto"),{title:{value:n,optional:!0,filter:null},href:{value:e,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:I,scale:"auto",optional:!0},fillOpacity:{value:P,scale:"auto",optional:!0},stroke:{value:B,scale:"auto",optional:!0},strokeOpacity:{value:H,scale:"auto",optional:!0},strokeWidth:{value:q,optional:!0},opacity:{value:j,scale:"auto",optional:!0}}}function U5(t,n){n&&t.filter(e=>af(n[e])).append("title").call(K5,n)}function Z5(t,n){n&&t.filter(([e])=>af(n[e])).append("title").call(Q5,n)}function K5(t,n){n&&t.text(e=>Pe(n[e]))}function Q5(t,n){n&&t.text(([e])=>Pe(n[e]))}function Mt(t,{target:n,tip:e},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:c,strokeOpacity:s,strokeWidth:f,opacity:u,href:h}){r&&X(t,"aria-label",l=>r[l]),o&&X(t,"fill",l=>o[l]),a&&X(t,"fill-opacity",l=>a[l]),c&&X(t,"stroke",l=>c[l]),s&&X(t,"stroke-opacity",l=>s[l]),f&&X(t,"stroke-width",l=>f[l]),u&&X(t,"opacity",l=>u[l]),h&&Np(t,l=>h[l],n),e||U5(t,i)}function Vo(t,{target:n,tip:e},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:c,strokeOpacity:s,strokeWidth:f,opacity:u,href:h}){r&&X(t,"aria-label",([l])=>r[l]),o&&X(t,"fill",([l])=>o[l]),a&&X(t,"fill-opacity",([l])=>a[l]),c&&X(t,"stroke",([l])=>c[l]),s&&X(t,"stroke-opacity",([l])=>s[l]),f&&X(t,"stroke-width",([l])=>f[l]),u&&X(t,"opacity",([l])=>u[l]),h&&Np(t,([l])=>h[l],n),e||Z5(t,i)}function J5({ariaLabel:t,title:n,fill:e,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:a,opacity:c,href:s},{tip:f}){return[t,f?void 0:n,e,r,i,o,a,c,s].filter(u=>u!==void 0)}function Nf(t,n,e){const r=Xn(t,i=>n[i]);return e===void 0&&r.size>1+t.length>>1&&On("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Tp(t,n,e,r){const{z:i}=e,{z:o}=r,a=J5(r,e),c=[...n,...a];for(const s of o?Nf(t,o,i):[t]){let f,u;t:for(const h of s){for(const l of c)if(!Ft(l[h])){u&&u.push(-1);continue t}if(f===void 0){u&&(yield u),f=a.map(l=>$e(l[h])),u=[h];continue}u.push(h);for(let l=0;l<a.length;++l)if($e(a[l][h])!==f[l]){yield u,f=a.map(p=>$e(p[h])),u=[h];continue t}}u&&(yield u)}}function Cp(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=tn(t,"clip",["frame","sphere"])),t}function t3(t,n,e,r){let i;const{clip:o=r.clip}=n;switch(o){case"frame":{const{width:a,height:c,marginLeft:s,marginRight:f,marginTop:u,marginBottom:h}=e,l=Bl();i=`url(#${l})`,t=ot("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",l).append("rect").attr("x",s).attr("y",u).attr("width",a-f-s).attr("height",c-u-h)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=r;if(!a)throw new Error('the "sphere" clip option requires a projection');const c=Bl();i=`url(#${c})`,t.append("clipPath").attr("id",c).append("path").attr("d",le(a)({type:"Sphere"}));break}}X(t,"aria-label",n.ariaLabel),X(t,"aria-description",n.ariaDescription),X(t,"aria-hidden",n.ariaHidden),X(t,"clip-path",i)}function pt(t,n,e,r){t3(t,n,e,r),X(t,"fill",n.fill),X(t,"fill-opacity",n.fillOpacity),X(t,"stroke",n.stroke),X(t,"stroke-width",n.strokeWidth),X(t,"stroke-opacity",n.strokeOpacity),X(t,"stroke-linejoin",n.strokeLinejoin),X(t,"stroke-linecap",n.strokeLinecap),X(t,"stroke-miterlimit",n.strokeMiterlimit),X(t,"stroke-dasharray",n.strokeDasharray),X(t,"stroke-dashoffset",n.strokeDashoffset),X(t,"shape-rendering",n.shapeRendering),X(t,"filter",n.imageFilter),X(t,"paint-order",n.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=n;X(t,"pointer-events",i)}function ht(t,n){n3(t,"mix-blend-mode",n.mixBlendMode),X(t,"opacity",n.opacity)}function Np(t,n,e){t.each(function(r){const i=n(r);if(i!=null){const o=this.ownerDocument.createElementNS(Kr.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Kr.xlink,"href",i),e!=null&&o.setAttribute("target",e),this.parentNode.insertBefore(o,this).appendChild(this)}})}function X(t,n,e){e!=null&&t.attr(n,e)}function n3(t,n,e){e!=null&&t.style(n,e)}function st(t,n,{x:e,y:r},i=Nt,o=Nt){i+=n.dx,o+=n.dy,e!=null&&e.bandwidth&&(i+=e.bandwidth()/2),r!=null&&r.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&t.attr("transform",`translate(${i},${o})`)}function bt(t,n){if((t=zt(t))!==n)return t}function zr(t,n){if((t=tt(t))!==n)return t}const e3=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Lf(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!e3.test(t))throw new Error(`invalid class name: ${t}`);return t}function zf(t,n){if(typeof n=="string")t.property("style",n);else if(n!=null)for(const e of t)Object.assign(e.style,n)}function Tn({frameAnchor:t},{width:n,height:e,marginTop:r,marginRight:i,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?n-i:(a+n-i)/2,/^top/.test(t)?r:/^bottom/.test(t)?e-o:(r+e-o)/2]}function Ta(t={}){const{document:n=typeof window<"u"?window.document:void 0,clip:e}=t;return{document:n,clip:Cp(e)}}function ot(t,{document:n}){return ie(Hh(t).call(n.documentElement))}const Lp=Math.PI,Nn=2*Lp,Fl=.618;function r3({projection:t,inset:n=0,insetTop:e=n,insetRight:r=n,insetBottom:i=n,insetLeft:o=n}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let c,s,f="frame";if(sn(t)){let x;if({type:t,domain:s,inset:x,insetTop:e=x!==void 0?x:e,insetRight:r=x!==void 0?x:r,insetBottom:i=x!==void 0?x:i,insetLeft:o=x!==void 0?x:o,clip:f=f,...c}=t,t==null)return}typeof t!="function"&&({type:t}=zp(t));const{width:u,height:h,marginLeft:l,marginRight:d,marginTop:p,marginBottom:g}=a,y=u-l-d-o-r,b=h-p-g-e-i;if(t=t==null?void 0:t({width:y,height:b,clip:f,...c}),t==null)return;f=i3(f,l,p,u-d,h-g);let m=l+o,_=p+e,w;if(s!=null){const[[x,v],[M,S]]=le(t).bounds(s),k=Math.min(y/(M-x),b/(S-v));k>0?(m-=(k*(x+M)-y)/2,_-=(k*(v+S)-b)/2,w=No({point($,E){this.stream.point($*k+m,E*k+_)}})):On("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=m===0&&_===0?Pp():No({point(x,v){this.stream.point(x+m,v+_)}})),{stream:x=>t.stream(w.stream(f(x)))}}function zp(t){switch(`${t}`.toLowerCase()){case"albers-usa":return fn(iw,.7463,.4673);case"albers":return Ui(Hd,.7463,.4673);case"azimuthal-equal-area":return fn(ow,4,4);case"azimuthal-equidistant":return fn(aw,Nn,Nn);case"conic-conformal":return Ui(fw,Nn,Nn);case"conic-equal-area":return Ui(Lo,6.1702,2.9781);case"conic-equidistant":return Ui(hw,7.312,3.6282);case"equal-earth":return fn(pw,5.4133,2.6347);case"equirectangular":return fn(uw,Nn,Lp);case"gnomonic":return fn(gw,3.4641,3.4641);case"identity":return{type:Pp};case"reflect-y":return{type:o3};case"mercator":return fn(cw,Nn,Nn);case"orthographic":return fn(mw,2,2);case"stereographic":return fn(bw,2,2);case"transverse-mercator":return fn(yw,Nn,Nn);default:throw new Error(`unknown projection type: ${t}`)}}function i3(t,n,e,r,i){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return Ld(n,e,r,i);default:throw new Error(`unknown projection clip type: ${t}`)}}function fn(t,n,e){return{type:({width:r,height:i,rotate:o,precision:a=.15,clip:c})=>{var f,u,h;const s=t();return a!=null&&((f=s.precision)==null||f.call(s,a)),o!=null&&((u=s.rotate)==null||u.call(s,o)),typeof c=="number"&&((h=s.clipAngle)==null||h.call(s,c)),s.scale(Math.min(r/n,i/e)),s.translate([r/2,i/2]),s},aspectRatio:e/n}}function Ui(t,n,e){const{type:r,aspectRatio:i}=fn(t,n,e);return{type:o=>{const{parallels:a,domain:c,width:s,height:f}=o,u=r(o);return a!=null&&(u.parallels(a),c===void 0&&u.fitSize([s,f],{type:"Sphere"})),u},aspectRatio:i}}const Pp=Jt({stream:t=>t}),o3=Jt(No({point(t,n){this.stream.point(t,-n)}}));function Ip(t,n,e,r){const i=e[t],o=e[n],a=i.length,c=e[t]=new Float64Array(a).fill(NaN),s=e[n]=new Float64Array(a).fill(NaN);let f;const u=r.stream({point(h,l){c[f]=h,s[f]=l}});for(f=0;f<a;++f)u.point(i[f],o[f])}function a3({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(sn(t)&&(t=t.type),t!=null)}function c3(t){if(typeof(t==null?void 0:t.stream)=="function")return Fl;if(sn(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:n}=zp(t);if(n)return n}return Fl}}function Ca(t,n,{projection:e}){const{x:r,y:i}=t;let o={};return r&&(o.x=r),i&&(o.y=i),o=Tf(o,n),e&&(r==null?void 0:r.scale)==="x"&&(i==null?void 0:i.scale)==="y"&&Ip("x","y",o,e),r&&(o.x=jt(o.x)),i&&(o.y=jt(o.y)),o}function s3(t){const n=[],e=[],r={scale:"x",value:n},i={scale:"y",value:e},o={point(a,c){n.push(a),e.push(c)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)Jn(a,o);return[r,i]}const Rp=new Map([["accent",h6],["category10",l6],["dark2",d6],["paired",p6],["pastel1",g6],["pastel2",m6],["set1",b6],["set2",y6],["set3",w6],["tableau10",_6]]);function f3(t){return t!=null&&Rp.has(`${t}`.toLowerCase())}const Dl=new Map([...Rp,["brbg",Ln(x0,$0)],["prgn",Ln(M0,S0)],["piyg",Ln(A0,E0)],["puor",Ln(k0,T0)],["rdbu",Ln(is,Ro)],["rdgy",Ln(C0,N0)],["rdylbu",Ln(os,Bo)],["rdylgn",Ln(L0,z0)],["spectral",Ln(P0,I0)],["burd",Ol(is,Ro)],["buylrd",Ol(os,Bo)],["blues",At(a1,c1)],["greens",At(s1,f1)],["greys",At(u1,l1)],["oranges",At(m1,b1)],["purples",At(h1,d1)],["reds",At(p1,g1)],["turbo",zn(M1)],["viridis",zn(S1)],["magma",zn(A1)],["inferno",zn(E1)],["plasma",zn(k1)],["cividis",zn(y1)],["cubehelix",zn(w1)],["warm",zn(_1)],["cool",zn(v1)],["bugn",At(R0,B0)],["bupu",At(F0,D0)],["gnbu",At(O0,q0)],["orrd",At(Y0,j0)],["pubu",At(G0,V0)],["pubugn",At(X0,W0)],["purd",At(H0,U0)],["rdpu",At(Z0,K0)],["ylgn",At(t1,n1)],["ylgnbu",At(Q0,J0)],["ylorbr",At(e1,r1)],["ylorrd",At(i1,o1)],["rainbow",ql(x1)],["sinebow",ql($1)]]);function At(t,n){return({length:e})=>e===1?[t[3][1]]:e===2?[t[3][1],t[3][2]]:(e=Math.max(3,Math.floor(e)),e>9?hn(n,e):t[e])}function Ln(t,n){return({length:e})=>e===2?[t[3][0],t[3][2]]:(e=Math.max(3,Math.floor(e)),e>11?hn(n,e):t[e])}function Ol(t,n){return({length:e})=>e===2?[t[3][2],t[3][0]]:(e=Math.max(3,Math.floor(e)),e>11?hn(r=>n(1-r),e):t[e].slice().reverse())}function zn(t){return({length:n})=>hn(t,Math.max(2,Math.floor(n)))}function ql(t){return({length:n})=>hn(t,Math.floor(n)+1).slice(0,-1)}function Bp(t){const n=`${t}`.toLowerCase();if(!Dl.has(n))throw new Error(`unknown ordinal scheme: ${n}`);return Dl.get(n)}function Na(t,n){const e=Bp(t),r=typeof e=="function"?e({length:n}):e;return r.length!==n?r.slice(0,n):r}function u3(t,n="greys"){const e=new Set,[r,i]=Na(n,2);for(const o of t)if(o!=null)if(o===!0)e.add(i);else if(o===!1)e.add(r);else return;return[...e]}const Yl=new Map([["brbg",$0],["prgn",S0],["piyg",E0],["puor",T0],["rdbu",Ro],["rdgy",N0],["rdylbu",Bo],["rdylgn",z0],["spectral",I0],["burd",t=>Ro(1-t)],["buylrd",t=>Bo(1-t)],["blues",c1],["greens",f1],["greys",l1],["purples",d1],["reds",g1],["oranges",b1],["turbo",M1],["viridis",S1],["magma",A1],["inferno",E1],["plasma",k1],["cividis",y1],["cubehelix",w1],["warm",_1],["cool",v1],["bugn",B0],["bupu",D0],["gnbu",q0],["orrd",j0],["pubugn",W0],["pubu",V0],["purd",U0],["rdpu",K0],["ylgnbu",J0],["ylgn",n1],["ylorbr",r1],["ylorrd",o1],["rainbow",x1],["sinebow",$1]]);function Pf(t){const n=`${t}`.toLowerCase();if(!Yl.has(n))throw new Error(`unknown quantitative scheme: ${n}`);return Yl.get(n)}const l3=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function h3(t){return t!=null&&l3.has(`${t}`.toLowerCase())}const Fp=t=>n=>t(1-n),mc=[0,1],jl=new Map([["number",di],["rgb",ua],["hsl",Ib],["hcl",Fb],["lab",Rb]]);function Dp(t){const n=`${t}`.toLowerCase();if(!jl.has(n))throw new Error(`unknown interpolator: ${n}`);return jl.get(n)}function ki(t,n,e,{type:r,nice:i,clamp:o,zero:a,domain:c=qp(t,e),unknown:s,round:f,scheme:u,interval:h,range:l=gt.get(t)===Si?$3(e,c):gt.get(t)===Ai?M3(e,c):gt.get(t)===Ei?mc:void 0,interpolate:d=gt.get(t)===Hn?u==null&&l!==void 0?ua:Pf(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):f?Bh:di,reverse:p}){if(h=vr(h,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=Dp(d)),p=!!p,l!==void 0){const g=(c=Vt(c)).length,y=(l=Vt(l)).length;if(g!==y){if(d.length===1)throw new Error("invalid piecewise interpolator");d=mi(d,l),l=void 0}}if(d.length===1?(p&&(d=Fp(d),p=!1),l===void 0&&(l=Float64Array.from(c,(g,y)=>y/(c.length-1)),l.length===2&&(l=mc)),n.interpolate((l===mc?Jt:Rf)(d))):n.interpolate(d),a){const[g,y]=Et(c);(g>0||y<0)&&(c=oi(c),pr(c)!==Math.sign(g)?c[c.length-1]=0:c[0]=0)}return p&&(c=fo(c)),n.domain(c).unknown(s),i&&(n.nice(d3(i,r)),c=n.domain()),l!==void 0&&n.range(l),o&&n.clamp(o),{type:r,domain:c,range:l,scale:n,interpolate:d,interval:h}}function d3(t,n){return t===!0?void 0:typeof t=="number"?t:s5(t,n)}function p3(t,n,e){return ki(t,Uh(),n,e)}function g3(t,n,e){return Op(t,n,{...e,exponent:.5})}function Op(t,n,{exponent:e=1,...r}){return ki(t,g0().exponent(e),n,{...r,type:"pow"})}function m3(t,n,{base:e=10,domain:r=S3(n),...i}){return ki(t,l0().base(e),n,{...i,domain:r})}function b3(t,n,{constant:e=1,...r}){return ki(t,d0().constant(e),n,r)}function y3(t,n,{range:e,quantiles:r=e===void 0?5:(e=[...e]).length,n:i=r,scheme:o="rdylbu",domain:a=A3(n),unknown:c,interpolate:s,reverse:f}){return e===void 0&&(e=s!==void 0?hn(s,i):gt.get(t)===Hn?Na(o,i):void 0),a.length>0&&(a=m0(a,e===void 0?{length:i}:e).quantiles()),If(t,n,{domain:a,range:e,reverse:f,unknown:c})}function w3(t,n,{range:e,n:r=e===void 0?5:(e=[...e]).length,scheme:i="rdylbu",domain:o=qp(t,n),unknown:a,interpolate:c,reverse:s}){const[f,u]=Et(o);let h;return e===void 0?(h=Ne(f,u,r),h[0]<=f&&h.splice(0,1),h[h.length-1]>=u&&h.pop(),r=h.length+1,e=c!==void 0?hn(c,r):gt.get(t)===Hn?Na(i,r):void 0):(h=hn(di(f,u),r+1).slice(1,-1),f instanceof Date&&(h=h.map(l=>new Date(l)))),pr(Vt(o))<0&&h.reverse(),If(t,n,{domain:h,range:e,reverse:s,unknown:a})}function If(t,n,{domain:e=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:a=o!==void 0?hn(o,e.length+1):gt.get(t)===Hn?Na(i,e.length+1):void 0,reverse:c}){e=Vt(e);const s=pr(e);if(!isNaN(s)&&!_3(e,s))throw new Error(`the ${t} scale has a non-monotonic domain`);return c&&(a=fo(a)),{type:"threshold",scale:b0(s<0?fo(e):e,a===void 0?[]:a).unknown(r),domain:e,range:a}}function _3(t,n){for(let e=1,r=t.length,i=t[0];e<r;++e){const o=sr(i,i=t[e]);if(o!==0&&o!==n)return!1}return!0}function v3(t){return{type:"identity",scale:_5(gt.get(t))?f0():n=>n}}function fi(t,n=jo){return t.length?[Xt(t,({value:e})=>e===void 0?e:Xt(e,n)),kt(t,({value:e})=>e===void 0?e:kt(e,n))]:[0,1]}function qp(t,n){const e=gt.get(t);return(e===Si||e===Ei||e===Ai?x3:fi)(n)}function x3(t){return[0,t.length?kt(t,({value:n})=>n===void 0?n:kt(n,jo)):1]}function $3(t,n){const e=t.find(({radius:a})=>a!==void 0);if(e!==void 0)return[0,e.radius];const r=oe(t,.5,({value:a})=>a===void 0?NaN:oe(a,.25,Dn)),i=n.map(a=>3*Math.sqrt(a/r)),o=30/kt(i);return o<1?i.map(a=>a*o):i}function M3(t,n){const e=ti(t,({value:o})=>o===void 0?NaN:ti(o,Math.abs)),r=n.map(o=>12*o/e),i=60/kt(r);return i<1?r.map(o=>o*i):r}function S3(t){for(const{value:n}of t)if(n!==void 0)for(let e of n){if(e>0)return fi(t,Dn);if(e<0)return fi(t,va)}return[1,10]}function A3(t){const n=[];for(const{value:e}of t)if(e!==void 0)for(const r of e)n.push(r);return n}function Rf(t){return(n,e)=>r=>t(n+r*(e-n))}function La(t,n,e,r,{type:i,nice:o,clamp:a,domain:c=fi(r),unknown:s,pivot:f=0,scheme:u,range:h,symmetric:l=!0,interpolate:d=gt.get(t)===Hn?u==null&&h!==void 0?ua:Pf(u!==void 0?u:"rdbu"):di,reverse:p}){f=+f,c=Vt(c);let[g,y]=c;if(c.length>2&&On(`Warning: the diverging ${t} scale domain contains extra elements.`),sr(g,y)<0&&([g,y]=[y,g],p=!p),g=Math.min(g,f),y=Math.max(y,f),typeof d!="function"&&(d=Dp(d)),h!==void 0&&(d=d.length===1?Rf(d)(...h):mi(d,h)),p&&(d=Fp(d)),l){const b=e.apply(f),m=b-e.apply(g),_=e.apply(y)-b;m<_?g=e.invert(b-_):m>_&&(y=e.invert(b+m))}return n.domain([g,f,y]).unknown(s).interpolator(d),a&&n.clamp(a),o&&n.nice(o),{type:i,domain:[g,y],pivot:f,interpolate:d,scale:n}}function E3(t,n,e){return La(t,y0(),N3,n,e)}function k3(t,n,e){return Yp(t,n,{...e,exponent:.5})}function Yp(t,n,{exponent:e=1,...r}){return La(t,v0().exponent(e=+e),P3(e),n,{...r,type:"diverging-pow"})}function T3(t,n,{base:e=10,pivot:r=1,domain:i=fi(n,r<0?va:Dn),...o}){return La(t,w0().base(e=+e),L3,n,{domain:i,pivot:r,...o})}function C3(t,n,{constant:e=1,...r}){return La(t,_0().constant(e=+e),I3(e),n,r)}const N3={apply(t){return t},invert(t){return t}},L3={apply:Math.log,invert:Math.exp},z3={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function P3(t){return t===.5?z3:{apply(n){return Math.sign(n)*Math.pow(Math.abs(n),t)},invert(n){return Math.sign(n)*Math.pow(Math.abs(n),1/t)}}}function I3(t){return{apply(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))},invert(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}}function jp(t,n,e,r){return ki(t,n,e,r)}function R3(t,n,e){return jp(t,Q2(),n,e)}function B3(t,n,e){return jp(t,J2(),n,e)}const Ti=Symbol("ordinal");function Xp(t,n,e,{type:r,interval:i,domain:o,range:a,reverse:c,hint:s}){return i=vr(i,r),o===void 0&&(o=Gp(e,i,t)),(r==="categorical"||r===Ti)&&(r="ordinal"),c&&(o=fo(o)),o=n.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),n.range(a)),{type:r,domain:o,range:a,scale:n,hint:s,interval:i}}function F3(t,n,{type:e,interval:r,domain:i,range:o,scheme:a,unknown:c,...s}){r=vr(r,e),i===void 0&&(i=Gp(n,r,t));let f;if(gt.get(t)===Sa)f=q3(n),o=o===void 0?Y3(f):ut(o,bf);else if(gt.get(t)===Hn&&(o===void 0&&(e==="ordinal"||e===Ti)&&(o=u3(i,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=e==="ordinal"?"turbo":"tableau10"),a!==void 0))if(o!==void 0){const u=Pf(a),h=o[0],l=o[1]-o[0];o=({length:d})=>hn(p=>u(h+l*p),d)}else o=Bp(a);if(c===rs)throw new Error(`implicit unknown on ${t} scale is not supported`);return Xp(t,Js().unknown(c),n,{...s,type:e,domain:i,range:o,hint:f})}function D3(t,n,{align:e=.5,padding:r=.5,...i}){return Wp(r6().align(e).padding(r),n,i,t)}function O3(t,n,{align:e=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=t==="fx"||t==="fy"?0:r,...a}){return Wp(ga().align(e).paddingInner(i).paddingOuter(o),n,a,t)}function Wp(t,n,e,r){let{round:i}=e;return i!==void 0&&t.round(i=!!i),t=Xp(r,t,n,e),t.round=i,t}function Gp(t,n,e){const r=new gi;for(const{value:i,domain:o}of t){if(o!==void 0)return o();if(i!==void 0)for(const a of i)r.add(a)}if(n!==void 0){const[i,o]=Et(r).map(n.floor,n);return n.range(i,n.offset(o))}if(r.size>1e4&&gt.get(e)===xn)throw new Error(`implicit ordinal domain of ${e} scale has more than 10,000 values`);return Qr(r,cn)}function Xl(t,n){let e;for(const{hint:r}of t){const i=r==null?void 0:r[n];if(i!==void 0){if(e===void 0)e=i;else if(e!==i)return}}return e}function q3(t){return{fill:Xl(t,"fill"),stroke:Xl(t,"stroke")}}function Y3(t){return wt(t.fill)?z6:L6}function ls(t,{label:n,inset:e=0,insetTop:r=e,insetRight:i=e,insetBottom:o=e,insetLeft:a=e,round:c,nice:s,clamp:f,zero:u,align:h,padding:l,projection:d,facet:{label:p=n}={},...g}={}){const y={};for(const[b,m]of t){const _=g[b],w=Zp(b,m,{round:gt.get(b)===xn?c:void 0,nice:s,clamp:f,zero:u,align:h,padding:l,projection:d,..._});if(w){let{label:x=b==="fx"||b==="fy"?p:n,percent:v,transform:M,inset:S,insetTop:k=S!==void 0?S:b==="y"?r:0,insetRight:$=S!==void 0?S:b==="x"?i:0,insetBottom:E=S!==void 0?S:b==="y"?o:0,insetLeft:T=S!==void 0?S:b==="x"?a:0}=_||{};if(M==null)M=void 0;else if(typeof M!="function")throw new Error("invalid scale transform; not a function");w.percent=!!v,w.label=x===void 0?X3(m,w):x,w.transform=M,b==="x"||b==="fx"?(w.insetLeft=+T,w.insetRight=+$):(b==="y"||b==="fy")&&(w.insetTop=+k,w.insetBottom=+E),y[b]=w}}return y}function Wl(t){const n={},e={scales:n};for(const[r,i]of Object.entries(t)){const{scale:o,type:a,interval:c,label:s}=i;n[r]=Qp(i),e[r]=o,o.type=a,c!=null&&(o.interval=c),s!=null&&(o.label=s)}return e}function j3(t,n){const{x:e,y:r,fx:i,fy:o}=t,a=i||o?Bf(n):n;i&&Gl(i,a),o&&Vl(o,a);const c=i||o?Vp(t,n):n;e&&Gl(e,c),r&&Vl(r,c)}function X3(t=[],n){let e;for(const{label:r}of t)if(r!==void 0){if(e===void 0)e=r;else if(e!==r)return}if(e!==void 0)return!Be(n)&&n.percent&&(e=`${e} (%)`),{inferred:!0,toString:()=>e}}function Bf(t){const{marginTop:n,marginRight:e,marginBottom:r,marginLeft:i,width:o,height:a,facet:{marginTop:c,marginRight:s,marginBottom:f,marginLeft:u}}=t;return{marginTop:Math.max(n,c),marginRight:Math.max(e,s),marginBottom:Math.max(r,f),marginLeft:Math.max(i,u),width:o,height:a}}function Vp({fx:t,fy:n},e){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:c,height:s}=Bf(e);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+i:c,height:n?n.scale.bandwidth()+r+o:s,facet:{width:c,height:s}}}function Gl(t,n){if(t.range===void 0){const{insetLeft:e,insetRight:r}=t,{width:i,marginLeft:o=0,marginRight:a=0}=n,c=o+e,s=i-a-r;t.range=[c,Math.max(c,s)],Be(t)||(t.range=Up(t)),t.scale.range(t.range)}Hp(t)}function Vl(t,n){if(t.range===void 0){const{insetTop:e,insetBottom:r}=t,{height:i,marginTop:o=0,marginBottom:a=0}=n,c=o+e,s=i-a-r;t.range=[Math.max(c,s),c],Be(t)?t.range.reverse():t.range=Up(t),t.scale.range(t.range)}Hp(t)}function Hp(t){t.round===void 0&&V3(t)&&W3(t)<=30&&t.scale.round(!0)}function W3({scale:t}){const n=t.domain().length,[e,r]=t.range(),i=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=n-i,c=Math.abs(r-e)/Math.max(1,a+o*2);return(c-Math.floor(c))*a}function Up(t){const n=t.scale.domain().length+Kp(t);if(!(n>2))return t.range;const[e,r]=t.range;return Array.from({length:n},(i,o)=>e+o/(n-1)*(r-e))}function hs(t,n,e){return Zp(t,e===void 0?void 0:[{hint:e}],{...n})}function Zp(t,n=[],e={}){const r=G3(t,n,e);if(e.type===void 0&&e.domain===void 0&&e.range===void 0&&e.interval==null&&t!=="fx"&&t!=="fy"&&Be({type:r})){const i=n.map(({value:o})=>o).filter(o=>o!==void 0);i.some(Ot)?On(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Xe(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Xe(r)}".`):i.some(h5)?On(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Xe(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Xe(r)}".`):i.some(d5)&&On(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Xe(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Xe(r)}".`)}switch(e.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":e=Zi(n,e,jt);break;case"identity":switch(gt.get(t)){case xn:e=Zi(n,e,jt);break;case Sa:e=Zi(n,e,H3);break}break;case"utc":case"time":e=Zi(n,e,c5);break}switch(r){case"diverging":return E3(t,n,e);case"diverging-sqrt":return k3(t,n,e);case"diverging-pow":return Yp(t,n,e);case"diverging-log":return T3(t,n,e);case"diverging-symlog":return C3(t,n,e);case"categorical":case"ordinal":case Ti:return F3(t,n,e);case"cyclical":case"sequential":case"linear":return p3(t,n,e);case"sqrt":return g3(t,n,e);case"threshold":return If(t,n,e);case"quantile":return y3(t,n,e);case"quantize":return w3(t,n,e);case"pow":return Op(t,n,e);case"log":return m3(t,n,e);case"symlog":return b3(t,n,e);case"utc":return B3(t,n,e);case"time":return R3(t,n,e);case"point":return D3(t,n,e);case"band":return O3(t,n,e);case"identity":return v3(t);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Xe(t){return typeof t=="symbol"?t.description:t}const Hl={toString:()=>"projection"};function G3(t,n,{type:e,domain:r,range:i,scheme:o,pivot:a,projection:c}){if(t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&c!=null&&(e=Hl);for(const{type:f}of n)if(f!==void 0){if(e===void 0)e=f;else if(e!==f)throw new Error(`scale incompatible with channel: ${e} !== ${f}`)}if(e===Hl)return;if(e!==void 0)return e;if(r===void 0&&!n.some(({value:f})=>f!==void 0))return;const s=gt.get(t);if(s===Si)return"sqrt";if(s===Ei||s===Ai)return"linear";if(s===Sa)return"ordinal";if((r||i||[]).length>2)return bc(s);if(r!==void 0){if(mt(r))return bc(s);if(Ot(r))return"utc"}else{const f=n.map(({value:u})=>u).filter(u=>u!==void 0);if(f.some(mt))return bc(s);if(f.some(Ot))return"utc"}if(s===Hn){if(a!=null||h3(o))return"diverging";if(f3(o))return"categorical"}return"linear"}function bc(t){switch(t){case xn:return"point";case Hn:return Ti;default:return"ordinal"}}function Be({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===Ti}function Kp({type:t}){return t==="threshold"}function V3({type:t}){return t==="point"||t==="band"}function an(t){if(t===void 0)return!0;const n=t.domain(),e=t(n[0]);for(let r=1,i=n.length;r<i;++r)if(t(n[r])-e)return!1;return!0}function Zi(t,{domain:n,...e},r){for(const i of t)i.value!==void 0&&(i.value=r(i.value));return{domain:n===void 0?n:r(n),...e}}function H3(t){return ut(t,bf)}function U3(t={}){let n;for(const e in t)if(gt.has(e)&&ke(t[e])){if(n!==void 0)throw new Error("ambiguous scale definition; multiple scales found");n=Qp(hs(e,t[e]))}if(n===void 0)throw new Error("invalid scale definition; no scale found");return n}function Z3(t){return n=>{if(!gt.has(n=`${n}`))throw new Error(`unknown scale: ${n}`);return t[n]}}function Qp({scale:t,type:n,domain:e,range:r,interpolate:i,interval:o,transform:a,percent:c,pivot:s}){if(n==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const f=t.unknown?t.unknown():void 0;return{type:n,domain:oi(e),...r!==void 0&&{range:oi(r)},...a!==void 0&&{transform:a},...c&&{percent:c},...f!==void 0&&{unknown:f},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function K3(t,n,e={}){let r=.5-Nt,i=.5+Nt,o=.5+Nt,a=.5-Nt;for(const{marginTop:g,marginRight:y,marginBottom:b,marginLeft:m}of n)g>r&&(r=g),y>i&&(i=y),b>o&&(o=b),m>a&&(a=m);let{margin:c,marginTop:s=c!==void 0?c:r,marginRight:f=c!==void 0?c:i,marginBottom:u=c!==void 0?c:o,marginLeft:h=c!==void 0?c:a}=e;s=+s,f=+f,u=+u,h=+h;let{width:l=640,height:d=Q3(t,e,{width:l,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,s-r+u-o)}=e;l=+l,d=+d;const p={width:l,height:d,marginTop:s,marginRight:f,marginBottom:u,marginLeft:h};if(t.fx||t.fy){let{margin:g,marginTop:y=g!==void 0?g:s,marginRight:b=g!==void 0?g:f,marginBottom:m=g!==void 0?g:u,marginLeft:_=g!==void 0?g:h}=e.facet??{};y=+y,b=+b,m=+m,_=+_,p.facet={marginTop:y,marginRight:b,marginBottom:m,marginLeft:_}}return p}function Q3({x:t,y:n,fy:e,fx:r},{projection:i,aspectRatio:o},{width:a,marginTopDefault:c,marginRightDefault:s,marginBottomDefault:f,marginLeftDefault:u}){const h=e?e.scale.domain().length:1,l=c3(i);if(l){const p=r?r.scale.domain().length:1,g=(1.1*h-.1)/(1.1*p-.1)*l,y=Math.max(.1,Math.min(10,g));return Math.round((a-u-s)*y+c+f)}const d=n?Be(n)?n.scale.domain().length:Math.max(7,17/h):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const p=Ul("y",n)/(Ul("x",t)*o),g=r?r.scale.bandwidth():1,y=e?e.scale.bandwidth():1,b=g*(a-u-s)-t.insetLeft-t.insetRight;return(p*b+n.insetTop+n.insetBottom)/y+c+f}return!!(n||e)*Math.max(1,Math.min(60,d*h))*20+!!r*30+60}function Ul(t,n){if(!n)throw new Error(`aspectRatio requires ${t} scale`);const{type:e,domain:r}=n;let i;switch(e){case"linear":case"utc":case"time":i=Number;break;case"pow":{const c=n.scale.exponent();i=s=>Math.pow(s,c);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${e}`)}const[o,a]=Et(r);return Math.abs(i(a)-i(o))}function J3(t,n){const{fx:e,fy:r}=ls(t,n),i=e==null?void 0:e.scale.domain(),o=r==null?void 0:r.scale.domain();return i&&o?wb(i,o).map(([a,c],s)=>({x:a,y:c,i:s})):i?i.map((a,c)=>({x:a,i:c})):o?o.map((a,c)=>({y:a,i:c})):void 0}function t8(t,{x:n,y:e}){return n&&(n=ds(n)),e&&(e=ds(e)),t.filter(n&&e?r=>n.has(r.x)&&e.has(r.y):n?r=>n.has(r.x):r=>e.has(r.y)).sort(n&&e?(r,i)=>n.get(r.x)-n.get(i.x)||e.get(r.y)-e.get(i.y):n?(r,i)=>n.get(r.x)-n.get(i.x):(r,i)=>e.get(r.y)-e.get(i.y))}function Ff(t,{fx:n,fy:e}){const r=Wn(t),i=n==null?void 0:n.value,o=e==null?void 0:e.value;return n&&e?er(r,a=>(a.fx=i[a[0]],a.fy=o[a[0]],a),a=>i[a],a=>o[a]):n?er(r,a=>(a.fx=i[a[0]],a),a=>i[a]):er(r,a=>(a.fy=o[a[0]],a),a=>o[a])}function n8(t,n,{marginTop:e,marginLeft:r}){return t&&n?({x:i,y:o})=>`translate(${t(i)-r},${n(o)-e})`:t?({x:i})=>`translate(${t(i)-r},0)`:({y:i})=>`translate(0,${n(i)-e})`}function e8(t){const n=[],e=new Uint32Array(Sn(t,r=>r.length));for(const r of t){let i=0;for(const o of t)r!==o&&(e.set(o,i),i+=o.length);n.push(e.slice(0,i))}return n}const r8=new Map([["top",yc],["right",vc],["bottom",wc],["left",_c],["top-left",Ki(yc,_c)],["top-right",Ki(yc,vc)],["bottom-left",Ki(wc,_c)],["bottom-right",Ki(wc,vc)],["top-empty",a8],["right-empty",f8],["bottom-empty",c8],["left-empty",s8],["empty",u8]]);function i8(t){if(t==null)return null;const n=r8.get(`${t}`.toLowerCase());if(n)return n;throw new Error(`invalid facet anchor: ${t}`)}const Zl=new WeakMap;function ds(t){let n=Zl.get(t);return n||Zl.set(t,n=new Le(ut(t,(e,r)=>[e,r]))),n}function pe(t,n){return ds(t).get(n)}function o8(t,n,e){return n=$e(n),e=$e(e),t.find(r=>Object.is($e(r.x),n)&&Object.is($e(r.y),e))}function za(t,n,e){var r;return(r=o8(t,n,e))==null?void 0:r.empty}function yc(t,{y:n},{y:e}){return n?pe(n,e)===0:!0}function wc(t,{y:n},{y:e}){return n?pe(n,e)===n.length-1:!0}function _c(t,{x:n},{x:e}){return n?pe(n,e)===0:!0}function vc(t,{x:n},{x:e}){return n?pe(n,e)===n.length-1:!0}function a8(t,{y:n},{x:e,y:r,empty:i}){if(i)return!1;if(!n)return;const o=pe(n,r);if(o>0)return za(t,e,n[o-1])}function c8(t,{y:n},{x:e,y:r,empty:i}){if(i)return!1;if(!n)return;const o=pe(n,r);if(o<n.length-1)return za(t,e,n[o+1])}function s8(t,{x:n},{x:e,y:r,empty:i}){if(i)return!1;if(!n)return;const o=pe(n,e);if(o>0)return za(t,n[o-1],r)}function f8(t,{x:n},{x:e,y:r,empty:i}){if(i)return!1;if(!n)return;const o=pe(n,e);if(o<n.length-1)return za(t,n[o+1],r)}function u8(t,n,{empty:e}){return e}function Ki(t,n){return function(){return t.apply(null,arguments)&&n.apply(null,arguments)}}function xc(t,{channels:{fx:n,fy:e},groups:r}){return n&&e?t.map(({x:i,y:o})=>{var a;return((a=r.get(i))==null?void 0:a.get(o))??[]}):n?t.map(({x:i})=>r.get(i)??[]):t.map(({y:i})=>r.get(i)??[])}class ft{constructor(n,e={},r={},i){const{facet:o="auto",facetAnchor:a,fx:c,fy:s,sort:f,dx:u=0,dy:h=0,margin:l=0,marginTop:d=l,marginRight:p=l,marginBottom:g=l,marginLeft:y=l,clip:b=i==null?void 0:i.clip,channels:m,tip:_,render:w}=r;if(this.data=n,this.sort=ce(f)?f:null,this.initializer=Ht(r).initializer,this.transform=this.initializer?r.transform:kn(r).transform,o===null||o===!1?this.facet=null:(this.facet=tn(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=n===Hr&&typeof c=="string"?[c]:c,this.fy=n===Hr&&typeof s=="string"?[s]:s),this.facetAnchor=i8(a),e=pf(e),m!==void 0&&(e={...l8(m),...e}),i!==void 0&&(e={...kp(this,r,i),...e}),this.channels=Object.fromEntries(Object.entries(e).map(([x,v])=>{if(wn(v.value)){const{value:M,label:S=v.label,scale:k=v.scale}=v.value;v={...v,label:S,scale:k,value:M}}if(n===Hr&&typeof v.value=="string"){const{value:M}=v;v={...v,value:[M]}}return[x,v]}).filter(([x,{value:v,optional:M}])=>{if(v!=null)return!0;if(M)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+u,this.dy=+h,this.marginTop=+d,this.marginRight=+p,this.marginBottom=+g,this.marginLeft=+y,this.clip=Cp(b),this.tip=h8(_),this.facet==="super"){if(c||s)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:v}=e[x];if(!(v!=="x"&&v!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=Jp(w,this.render))}initialize(n,e,r){let i=Vt(this.data);n===void 0&&i!=null&&(n=[Wn(i)]);const o=n;this.transform!=null&&({facets:n,data:i}=this.transform(i,n,r),i=Vt(i)),n!==void 0&&(n.original=o);const a=$p(this.channels,i);return this.sort!=null&&R5(i,n,a,e,this.sort),{data:i,facets:n,channels:a}}filter(n,e,r){for(const i in e){const{filter:o=Ft}=e[i];if(o!==null){const a=r[i];n=n.filter(c=>o(a[c]))}}return n}project(n,e,r){for(const i in n)if(n[i].scale==="x"&&/^x|x$/.test(i)){const o=i.replace(/^x|x$/,"y");o in n&&n[o].scale==="y"&&Ip(i,o,e,r.projection)}}scale(n,e,r){const i=Tf(n,e);return r.projection&&this.project(n,i,r),i}}function pn(...t){return t.plot=ft.prototype.plot,t}function Jp(t,n){if(t==null)return n===null?void 0:n;if(n==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof n!="function")throw new TypeError(`invalid render transform: ${n}`);return function(e,r,i,o,a,c){return t.call(this,e,r,i,o,a,(s,f,u,h,l)=>n.call(this,s,f,u,h,l,c))}}function l8(t){return Object.fromEntries(Object.entries(pf(t)).map(([n,e])=>(e=typeof e=="string"?{value:e,label:n}:xi(e),e.filter===void 0&&e.scale==null&&(e={...e,filter:null}),[n,e])))}function h8(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?tn(t,"tip",["x","y","xy"]):t}function xr(t,n){return(t==null?void 0:t.tip)===!0?{...t,tip:n}:sn(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:n}}:t}const Kl=new WeakMap;function Df(t,n,{x:e,y:r,px:i,py:o,maxRadius:a=40,channels:c,render:s,...f}={}){return a=+a,i!=null&&(e??(e=null),c={...c,px:{value:i,scale:"x"}}),o!=null&&(r??(r=null),c={...c,py:{value:o,scale:"y"}}),{x:e,y:r,channels:c,...f,render:Jp(function(u,h,l,d,p,g){p={...p,pointerSticky:!1};const y=p.ownerSVGElement,{data:b}=p.getMarkState(this);let m=Kl.get(y);m||Kl.set(y,m={sticky:!1,roots:[],renders:[]});let _=m.renders.push(D)-1;const{x:w,y:x,fx:v,fy:M}=h;let S=v?v(u.fx)-d.marginLeft:0,k=M?M(u.fy)-d.marginTop:0;w!=null&&w.bandwidth&&(S+=w.bandwidth()/2),x!=null&&x.bandwidth&&(k+=x.bandwidth()/2);const $=u.fi!=null;let E;if($){let O=m.facetStates;O||(m.facetStates=O=new Map),E=O.get(this),E||O.set(this,E=new Map)}const[T,L]=Tn(this,d),{px:C,py:A}=l,N=C?O=>C[O]:tg(l,T),z=A?O=>A[O]:ng(l,L);let I,F,P,R;function B(O,q){if($)if(R&&(R=cancelAnimationFrame(R)),O==null)E.delete(u.fi);else{E.set(u.fi,q),R=requestAnimationFrame(()=>{R=null;for(const[Z,at]of E)if(at<q||at===q&&Z<u.fi){O=null;break}D(O)});return}D(O)}function D(O){if(I===O&&P===m.sticky)return;I=O,P=p.pointerSticky=m.sticky;const q=I==null?[]:[I];$&&(q.fx=u.fx,q.fy=u.fy,q.fi=u.fi);const Z=g(q,h,l,d,p);if(F){if($){const at=F.parentNode,et=F.getAttribute("transform"),lt=Z.getAttribute("transform");et?Z.setAttribute("transform",et):Z.removeAttribute("transform"),lt?at.setAttribute("transform",lt):at.removeAttribute("transform"),Z.removeAttribute("aria-label"),Z.removeAttribute("aria-description"),Z.removeAttribute("aria-hidden")}F.replaceWith(Z)}return m.roots[_]=F=Z,I==null&&(E==null?void 0:E.size)>1||p.dispatchValue(I==null?null:b[I]),Z}function H(O){if(m.sticky||O.pointerType==="mouse"&&O.buttons===1)return;let[q,Z]=tb(O);q-=S,Z-=k;const at=q<d.marginLeft||q>d.width-d.marginRight?1:t,et=Z<d.marginTop||Z>d.height-d.marginBottom?1:n;let lt=null,vt=a*a;for(const dt of u){const St=at*(N(dt)-q),Tt=et*(z(dt)-Z),mn=St*St+Tt*Tt;mn<=vt&&(lt=dt,vt=mn)}if(lt!=null&&(t!==1||n!==1)){const dt=N(lt)-q,St=z(lt)-Z;vt=dt*dt+St*St}B(lt,vt)}function U(O){O.pointerType==="mouse"&&I!=null&&(m.sticky&&m.roots.some(q=>q==null?void 0:q.contains(O.target))||(m.sticky?(m.sticky=!1,m.renders.forEach(q=>q(null))):(m.sticky=!0,D(I)),O.stopImmediatePropagation()))}function j(O){O.pointerType==="mouse"&&(m.sticky||B(null))}return y.addEventListener("pointerenter",H),y.addEventListener("pointermove",H),y.addEventListener("pointerdown",U),y.addEventListener("pointerleave",j),D(null)},s)}}function Of(t){return Df(1,1,t)}function ui(t){return Df(1,.01,t)}function qf(t){return Df(.01,1,t)}function tg({x1:t,x2:n,x:e=t},r){return t&&n?i=>(t[i]+n[i])/2:e?i=>e[i]:()=>r}function ng({y1:t,y2:n,y:e=t},r){return t&&n?i=>(t[i]+n[i])/2:e?i=>e[i]:()=>r}function eg(t){return Be(t)&&t.interval===void 0?void 0:"tabular-nums"}function d8(t,n){let{label:e=t.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:a=18,marginRight:c=0,marginBottom:s=16+r,marginLeft:f=0,style:u,ticks:h=(i-f-c)/64,tickFormat:l,fontVariant:d=eg(t),round:p=!0,opacity:g,className:y}=n;const b=Ta(n);y=Lf(y),g=_t(g)[1],l===null&&(l=()=>null);const m=ot("svg",b).attr("class",`${y}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(T=>T.append("style").text(`.${y}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${y}-ramp text {
  white-space: pre;
}`)).call(zf,u);let _=T=>T.selectAll(".tick line").attr("y1",a+s-o),w;const x=p?(T,L)=>T.rangeRound(L):(T,L)=>T.range(L),{type:v,domain:M,range:S,interpolate:k,scale:$,pivot:E}=t;if(k){const T=S===void 0?k:mi(k.length===1?Rf(k):k,S);w=x($.copy(),hn(di(f,i-c),Math.min(M.length+(E!==void 0),S===void 0?1/0:S.length)));const L=256,C=b.document.createElement("canvas");C.width=L,C.height=1;const A=C.getContext("2d");for(let N=0,z=L-1;N<L;++N)A.fillStyle=T(N/z),A.fillRect(N,0,1,1);m.append("image").attr("opacity",g).attr("x",f).attr("y",a).attr("width",i-f-c).attr("height",o-a-s).attr("preserveAspectRatio","none").attr("xlink:href",C.toDataURL())}else if(v==="threshold"){const T=M,L=l===void 0?C=>C:typeof l=="string"?ca(l):l;w=x(Uh().domain([-1,S.length-1]),[f,i-c]),m.append("g").attr("fill-opacity",g).selectAll().data(S).enter().append("rect").attr("x",(C,A)=>w(A-1)).attr("y",a).attr("width",(C,A)=>w(A)-w(A-1)).attr("height",o-a-s).attr("fill",C=>C),h=ut(T,(C,A)=>A),l=C=>L(T[C],C)}else w=x(ga().domain(M),[f,i-c]),m.append("g").attr("fill-opacity",g).selectAll().data(M).enter().append("rect").attr("x",w).attr("y",a).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",o-a-s).attr("fill",$),_=()=>{};return m.append("g").attr("transform",`translate(0,${o-s})`).call(nb(w).ticks(Array.isArray(h)?null:h,typeof l=="string"?l:void 0).tickFormat(typeof l=="function"?l:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",bt(d,"normal")).call(_).call(T=>T.select(".domain").remove()),e!==void 0&&m.append("text").attr("x",f).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(e),m.node()}const Ho=Math.PI/180;function $r(t,{marker:n,markerStart:e=n,markerMid:r=n,markerEnd:i=n}={}){t.markerStart=$c(e),t.markerMid=$c(r),t.markerEnd=$c(i)}function $c(t){if(t==null||t===!1)return null;if(t===!0)return Jl;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Ql("auto");case"arrow-reverse":return Ql("auto-start-reverse");case"dot":return p8;case"circle":case"circle-fill":return Jl;case"circle-stroke":return g8}throw new Error(`invalid marker: ${t}`)}function Ql(t){return(n,e)=>ot("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",n).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function p8(t,n){return ot("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(e=>e.append("circle").attr("r",2.5)).node()}function Jl(t,n){return ot("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call(e=>e.append("circle").attr("r",3)).node()}function g8(t,n){return ot("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call(e=>e.append("circle").attr("r",3)).node()}let m8=0;function Ci(t,n,{stroke:e},r){return rg(t,n,e&&(i=>e[i]),r)}function b8(t,n,{stroke:e},r){return rg(t,n,e&&(([i])=>e[i]),r)}function rg(t,{markerStart:n,markerMid:e,markerEnd:r,stroke:i},o=()=>i,a){const c=new Map;function s(f){return function(u){const h=o(u);let l=c.get(f);l||c.set(f,l=new Map);let d=l.get(h);if(!d){const p=this.parentNode.insertBefore(f(h,a),this),g=`plot-marker-${++m8}`;p.setAttribute("id",g),l.set(h,d=`url(#${g})`)}return d}}n&&t.attr("marker-start",s(n)),e&&t.attr("marker-mid",s(e)),r&&t.attr("marker-end",s(r))}function Ni({inset:t,insetLeft:n,insetRight:e,...r}={}){return[n,e]=ig(t,n,e),{inset:t,insetLeft:n,insetRight:e,...r}}function Li({inset:t,insetTop:n,insetBottom:e,...r}={}){return[n,e]=ig(t,n,e),{inset:t,insetTop:n,insetBottom:e,...r}}function ig(t,n,e){return t===void 0&&n===void 0&&e===void 0?Nt?[1,0]:[.5,.5]:[n,e]}function og(t,{interval:n}){return t={...xi(t)},t.interval=df(t.interval===void 0?n:t.interval),t}function Pa(t,n,e,r){const{[t]:i,[`${t}1`]:o,[`${t}2`]:a}=e,{value:c,interval:s}=og(i,e);if(c==null||s==null&&!r)return e;const f=Gn(i);if(s==null){let d;const p={transform:g=>d||(d=J(g,c)),label:f};return{...e,[t]:void 0,[`${t}1`]:o===void 0?p:o,[`${t}2`]:a===void 0?p:a}}let u,h;function l(d){return h!==void 0&&d===u?h:h=ut(J(u=d,c),p=>s.floor(p))}return n({...e,[t]:void 0,[`${t}1`]:o===void 0?{transform:l,label:f}:o,[`${t}2`]:a===void 0?{transform:d=>l(d).map(p=>s.offset(p)),label:f}:a})}function ag(t,n,e){const{[t]:r}=e,{value:i,interval:o}=og(r,e);return i==null||o==null?e:n({...e,[t]:{label:Gn(r),transform:a=>{const c=ut(J(a,i),f=>o.floor(f)),s=c.map(f=>o.offset(f));return c.map(Ot(c)?(f,u)=>f==null||isNaN(f=+f)||(u=s[u],u==null)||isNaN(u=+u)?void 0:new Date((f+u)/2):(f,u)=>f==null||(u=s[u],u==null)?NaN:(+f+ +u)/2)}}})}function cg(t={}){return Pa("x",Ni,t,!0)}function sg(t={}){return Pa("y",Li,t,!0)}function fg(t={}){return Pa("x",Ni,t)}function ug(t={}){return Pa("y",Li,t)}function lg(t={}){return ag("x",Ni,t)}function hg(t={}){return ag("y",Li,t)}const dg={ariaLabel:"rule",fill:null,stroke:"currentColor"};class pg extends ft{constructor(n,e={}){const{x:r,y1:i,y2:o,inset:a=0,insetTop:c=a,insetBottom:s=a}=e;super(n,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},xr(e,"x"),dg),this.insetTop=tt(c),this.insetBottom=tt(s),$r(this,e)}render(n,e,r,i,o){const{x:a,y:c}=e,{x:s,y1:f,y2:u}=r,{width:h,height:l,marginTop:d,marginRight:p,marginLeft:g,marginBottom:y}=i,{insetTop:b,insetBottom:m}=this;return ot("svg:g",o).call(pt,this,i,o).call(st,this,{x:s&&a},Nt,0).call(_=>_.selectAll().data(n).enter().append("line").call(ht,this).attr("x1",s?w=>s[w]:(g+h-p)/2).attr("x2",s?w=>s[w]:(g+h-p)/2).attr("y1",f&&!an(c)?w=>f[w]+b:d+b).attr("y2",u&&!an(c)?c.bandwidth?w=>u[w]+c.bandwidth()-m:w=>u[w]-m:l-y-m).call(Mt,this,r).call(Ci,this,r,o)).node()}}class gg extends ft{constructor(n,e={}){const{x1:r,x2:i,y:o,inset:a=0,insetRight:c=a,insetLeft:s=a}=e;super(n,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},xr(e,"y"),dg),this.insetRight=tt(c),this.insetLeft=tt(s),$r(this,e)}render(n,e,r,i,o){const{x:a,y:c}=e,{y:s,x1:f,x2:u}=r,{width:h,height:l,marginTop:d,marginRight:p,marginLeft:g,marginBottom:y}=i,{insetLeft:b,insetRight:m}=this;return ot("svg:g",o).call(pt,this,i,o).call(st,this,{y:s&&c},0,Nt).call(_=>_.selectAll().data(n).enter().append("line").call(ht,this).attr("x1",f&&!an(a)?w=>f[w]+b:g+b).attr("x2",u&&!an(a)?a.bandwidth?w=>u[w]+a.bandwidth()-m:w=>u[w]-m:h-p-m).attr("y1",s?w=>s[w]:(d+l-y)/2).attr("y2",s?w=>s[w]:(d+l-y)/2).call(Mt,this,r).call(Ci,this,r,o)).node()}}function jn(t,n){let{x:e=V,y:r,y1:i,y2:o,...a}=ug(n);return[i,o]=mg(r,i,o),new pg(t,{...a,x:e,y1:i,y2:o})}function se(t,n){let{y:e=V,x:r,x1:i,x2:o,...a}=fg(n);return[i,o]=mg(r,i,o),new gg(t,{...a,y:e,x1:i,x2:o})}function mg(t,n,e){if(t==null){if(n===void 0){if(e!==void 0)return[0,e]}else if(e===void 0)return[0,n]}else{if(n===void 0)return e===void 0?[0,t]:[t,e];if(e===void 0)return[t,n]}return[n,e]}function Ia(t,...n){let e=n.length;for(let r=0,i=!0;r<e;++r)typeof n[r]!="function"&&(i&&(t=t.slice(),i=!1),t.splice(r,2,t[r]+n[r]+t[r+1]),n.splice(r,1),--r,--e);return r=>{let i=t[0];for(let o=0;o<e;++o)i+=n[o](r)+t[o+1];return i}}const y8={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},bg="­";class Ra extends ft{constructor(n,e={}){const{x:r,y:i,text:o=Vn(n)&&gp(n)?V:Ut,frameAnchor:a,textAnchor:c=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:s=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:f=1,lineWidth:u=1/0,textOverflow:h,monospace:l,fontFamily:d=l?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:g,fontVariant:y,fontWeight:b,rotate:m}=e,[_,w]=_t(m,0),[x,v]=x8(p);if(super(n,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:u5(_),optional:!0},text:{value:o,filter:af,optional:!0}},e,y8),this.rotate=w,this.textAnchor=bt(c,"middle"),this.lineAnchor=tn(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+f,this.lineWidth=+u,this.textOverflow=yg(h),this.monospace=!!l,this.fontFamily=zt(d),this.fontSize=v,this.fontStyle=zt(g),this.fontVariant=zt(y),this.fontWeight=zt(b),this.frameAnchor=Mi(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=xg(this),this.clipLine=$g(this)}render(n,e,r,i,o){const{x:a,y:c}=e,{x:s,y:f,rotate:u,text:h,title:l,fontSize:d}=r,{rotate:p}=this,[g,y]=Tn(this,i);return ot("svg:g",o).call(pt,this,i,o).call(vg,this,h,i).call(st,this,{x:s&&a,y:f&&c}).call(b=>b.selectAll().data(n).enter().append("text").call(ht,this).call(w8,this,h,l).attr("transform",Ia`translate(${s?m=>s[m]:g},${f?m=>f[m]:y})${u?m=>` rotate(${u[m]})`:p?` rotate(${p})`:""}`).call(X,"font-size",d&&(m=>d[m])).call(Mt,this,r)).node()}}function yg(t){return t==null?null:tn(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function w8(t,n,e,r){if(!e)return;const{lineAnchor:i,lineHeight:o,textOverflow:a,splitLines:c,clipLine:s}=n;t.each(function(f){const u=c(Pe(e[f])??"").map(s),h=u.length,l=i==="top"?.71:i==="bottom"?1-h:(164-h*100)/200;if(h>1){let d=0;for(let p=0;p<h;++p){if(++d,!u[p])continue;const g=this.ownerDocument.createElementNS(Kr.svg,"tspan");g.setAttribute("x",0),p===d-1?g.setAttribute("y",`${(l+p)*o}em`):g.setAttribute("dy",`${d*o}em`),g.textContent=u[p],this.appendChild(g),d=0}}else l&&this.setAttribute("y",`${l*o}em`),this.textContent=u[0];if(a&&!r&&u[0]!==e[f]){const d=this.ownerDocument.createElementNS(Kr.svg,"title");d.textContent=e[f],this.appendChild(d)}})}function gr(t,{x:n,y:e,...r}={}){return r.frameAnchor===void 0&&([n,e]=gn(n,e)),new Ra(t,{...r,x:n,y:e})}function wg(t,{x:n=V,...e}={}){return new Ra(t,hg({...e,x:n}))}function _g(t,{y:n=V,...e}={}){return new Ra(t,lg({...e,y:n}))}function vg(t,n,e){X(t,"text-anchor",n.textAnchor),X(t,"font-family",n.fontFamily),X(t,"font-size",n.fontSize),X(t,"font-style",n.fontStyle),X(t,"font-variant",n.fontVariant===void 0?_8(e):n.fontVariant),X(t,"font-weight",n.fontWeight)}function _8(t){return t&&(Je(t)||Ot(t))?"tabular-nums":void 0}const v8=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function x8(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),v8.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function $8(t,n,e){const r=[];let i,o=0;for(const[a,c,s]of M8(t)){if(i===void 0&&(i=a),o>i&&e(t,i,c)>n&&(r.push(t.slice(i,o)+(t[o-1]===bg?"-":"")),i=a),s){r.push(t.slice(i,c)),i=void 0;continue}o=c}return r}function*M8(t){let n=0,e=0;const r=t.length;for(;e<r;){let i=1;switch(t[e]){case bg:case"-":++e,yield[n,e,!1],n=e;break;case" ":for(yield[n,e,!1];t[++e]===" ";);n=e;break;case"\r":t[e+1]===`
`&&++i;case`
`:yield[n,e,!0],e+=i,n=e;break;default:++e;break}}yield[n,e,!0]}const th={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Yf(t,n=0,e=t.length){let r=0;for(let i=n;i<e;i=Mr(t,i))r+=th[t[i]]??(Sg(t,i)?120:th.e);return r}function jf(t,n=0,e=t.length){let r=0;for(let i=n;i<e;i=Mr(t,i))r+=Sg(t,i)?200:100;return r}function xg({monospace:t,lineWidth:n,textOverflow:e}){if(e!=null||n==1/0)return o=>o.split(/\r\n?|\n/g);const r=t?jf:Yf,i=n*100;return o=>$8(o,i,r)}function $g({monospace:t,lineWidth:n,textOverflow:e}){if(e==null||n==1/0)return o=>o;const r=t?jf:Yf,i=n*100;switch(e){case"clip-start":return o=>eh(o,i,r,"");case"clip-end":return o=>nh(o,i,r,"");case"ellipsis-start":return o=>eh(o,i,r,or);case"ellipsis-middle":return o=>S8(o,i,r,or);case"ellipsis-end":return o=>nh(o,i,r,or)}}const or="…";function mr(t,n,e,r){const i=[];let o=0;for(let a=0,c=0,s=t.length;a<s;a=c){c=Mr(t,a);const f=e(t,a,c);if(o+f>n){for(o+=r;o>n&&a>0;)c=a,a=i.pop(),o-=e(t,a,c);return[a,n-o]}o+=f,i.push(a)}return[-1,0]}function nh(t,n,e,r){t=t.trim();const i=e(r),[o]=mr(t,n,e,i);return o<0?t:t.slice(0,o).trimEnd()+r}function S8(t,n,e,r){t=t.trim();const i=e(t);if(i<=n)return t;const o=e(r)/2,[a,c]=mr(t,n/2,e,o),[s]=mr(t,i-n/2-c+o,e,-o);return s<0?r:t.slice(0,a).trimEnd()+r+t.slice(Mr(t,s)).trimStart()}function eh(t,n,e,r){t=t.trim();const i=e(t);if(i<=n)return t;const o=e(r),[a]=mr(t,i-n+o,e,-o);return a<0?r:r+t.slice(Mr(t,a)).trimStart()}const ps=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,rh=/\p{Extended_Pictographic}/uy;function Mr(t,n){return n+=A8(t,n)?2:1,k8(t,n)&&(n=ps.lastIndex),E8(t,n)?Mr(t,n+1):n}function Mg(t,n){return t.charCodeAt(n)<128}function A8(t,n){const e=t.charCodeAt(n);if(e>=55296&&e<56320){const r=t.charCodeAt(n+1);return r>=56320&&r<57344}return!1}function E8(t,n){return t.charCodeAt(n)===8205}function k8(t,n){return Mg(t,n)?!1:(ps.lastIndex=n,ps.test(t))}function Sg(t,n){return Mg(t,n)?!1:(rh.lastIndex=n,rh.test(t))}const Ag={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},Eg=3.5,T8=Eg*5,kg={draw(t,n,e){const r=n*e/T8;t.moveTo(0,0),t.lineTo(0,-n),t.moveTo(-r,r-n),t.lineTo(0,-n),t.lineTo(r,r-n)}},Tg={draw(t,n,e){t.moveTo(-e,0),t.lineTo(0,-n),t.lineTo(e,0)}},C8=new Map([["arrow",kg],["spike",Tg]]);function N8(t){return t&&typeof t.draw=="function"}function L8(t){if(N8(t))return t;const n=C8.get(`${t}`.toLowerCase());if(n)return n;throw new Error(`invalid shape: ${t}`)}class Ba extends ft{constructor(n,e={}){const{x:r,y:i,r:o=Eg,length:a,rotate:c,shape:s=kg,anchor:f="middle",frameAnchor:u}=e,[h,l]=_t(a,12),[d,p]=_t(c,0);super(n,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},e,Ag),this.r=+o,this.length=l,this.rotate=p,this.shape=L8(s),this.anchor=tn(f,"anchor",["start","middle","end"]),this.frameAnchor=Mi(u)}render(n,e,r,i,o){const{x:a,y:c}=e,{x:s,y:f,length:u,rotate:h}=r,{length:l,rotate:d,anchor:p,shape:g,r:y}=this,[b,m]=Tn(this,i);return ot("svg:g",o).call(pt,this,i,o).call(st,this,{x:s&&a,y:f&&c}).call(_=>_.selectAll().data(n).enter().append("path").call(ht,this).attr("transform",Ia`translate(${s?w=>s[w]:b},${f?w=>f[w]:m})${h?w=>` rotate(${h[w]})`:d?` rotate(${d})`:""}${p==="start"?"":p==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${l})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${l/2})`}`).attr("d",u?w=>{const x=Rn();return g.draw(x,u[w],y),x}:(()=>{const w=Rn();return g.draw(w,l,y),w})()).call(Mt,this,r)).node()}}function Cg(t,n={}){let{x:e,y:r,...i}=n;return n.frameAnchor===void 0&&([e,r]=gn(e,r)),new Ba(t,{...i,x:e,y:r})}function Ng(t,n={}){const{x:e=V,...r}=n;return new Ba(t,{...r,x:e})}function Lg(t,n={}){const{y:e=V,...r}=n;return new Ba(t,{...r,y:e})}function z8(t,n={}){const{shape:e=Tg,stroke:r=Ag.stroke,strokeWidth:i=1,fill:o=r,fillOpacity:a=.3,anchor:c="start",...s}=n;return Cg(t,{...s,shape:e,stroke:r,strokeWidth:i,fill:o,fillOpacity:a,anchor:c})}function ge(t,n){return arguments.length<2&&!Vn(t)&&(n=t,t=null),n===void 0&&(n={}),[t,n]}function Fa({anchor:t}={},n){return t===void 0?n[0]:tn(t,"anchor",n)}function zg(t){return Fa(t,["left","right"])}function Pg(t){return Fa(t,["right","left"])}function Ig(t){return Fa(t,["bottom","top"])}function Rg(t){return Fa(t,["top","bottom"])}function Xf(){const[t,n]=ge(...arguments);return Dg("y",zg(n),t,n)}function Bg(){const[t,n]=ge(...arguments);return Dg("fy",Pg(n),t,n)}function Wf(){const[t,n]=ge(...arguments);return Og("x",Ig(n),t,n)}function Fg(){const[t,n]=ge(...arguments);return Og("fx",Rg(n),t,n)}function Dg(t,n,e,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:c=1,fill:s=r,fillOpacity:f=i,textAnchor:u,textStroke:h,textStrokeOpacity:l,textStrokeWidth:d,tickSize:p=t==="y"?6:0,tickPadding:g,tickRotate:y,x:b,margin:m,marginTop:_=m===void 0?20:m,marginRight:w=m===void 0?n==="right"?40:0:m,marginBottom:x=m===void 0?20:m,marginLeft:v=m===void 0?n==="left"?40:0:m,label:M,labelAnchor:S,labelArrow:k,labelOffset:$,...E}){return p=tt(p),g=tt(g),y=tt(y),S!==void 0&&(S=tn(S,"labelAnchor",["center","top","bottom"])),k=Qg(k),pn(p&&!wt(o)?P8(t,n,e,{stroke:o,strokeOpacity:a,strokeWidth:c,tickSize:p,tickPadding:g,tickRotate:y,x:b,...E}):null,wt(s)?null:R8(t,n,e,{fill:s,fillOpacity:f,stroke:h,strokeOpacity:l,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:y,x:b,marginTop:_,marginRight:w,marginBottom:x,marginLeft:v,...E}),!wt(s)&&M!==null?gr([],Hg({fill:s,fillOpacity:f,...E},function(T,L,C,A,N){const z=A[t],{marginTop:I,marginRight:F,marginBottom:P,marginLeft:R}=t==="y"&&N.inset||N,B=S??(z.bandwidth?"center":"top"),D=$??(n==="right"?F:R)-3;return B==="center"?(this.textAnchor=void 0,this.lineAnchor=n==="right"?"bottom":"top",this.frameAnchor=n,this.rotate=-90):(this.textAnchor=n==="right"?"end":"start",this.lineAnchor=B,this.frameAnchor=`${B}-${n}`,this.rotate=0),this.dy=B==="top"?3-I:B==="bottom"?P-3:0,this.dx=n==="right"?D:-D,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[Kg(t,z,{anchor:n,label:M,labelAnchor:B,labelArrow:k})]}}}})):null)}function Og(t,n,e,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:c=1,fill:s=r,fillOpacity:f=i,textAnchor:u,textStroke:h,textStrokeOpacity:l,textStrokeWidth:d,tickSize:p=t==="x"?6:0,tickPadding:g,tickRotate:y,y:b,margin:m,marginTop:_=m===void 0?n==="top"?30:0:m,marginRight:w=m===void 0?20:m,marginBottom:x=m===void 0?n==="bottom"?30:0:m,marginLeft:v=m===void 0?20:m,label:M,labelAnchor:S,labelArrow:k,labelOffset:$,...E}){return p=tt(p),g=tt(g),y=tt(y),S!==void 0&&(S=tn(S,"labelAnchor",["center","left","right"])),k=Qg(k),pn(p&&!wt(o)?I8(t,n,e,{stroke:o,strokeOpacity:a,strokeWidth:c,tickSize:p,tickPadding:g,tickRotate:y,y:b,...E}):null,wt(s)?null:B8(t,n,e,{fill:s,fillOpacity:f,stroke:h,strokeOpacity:l,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:y,y:b,marginTop:_,marginRight:w,marginBottom:x,marginLeft:v,...E}),!wt(s)&&M!==null?gr([],Hg({fill:s,fillOpacity:f,...E},function(T,L,C,A,N){const z=A[t],{marginTop:I,marginRight:F,marginBottom:P,marginLeft:R}=t==="x"&&N.inset||N,B=S??(z.bandwidth?"center":"right"),D=$??(n==="top"?I:P)-3;return B==="center"?(this.frameAnchor=n,this.textAnchor=void 0):(this.frameAnchor=`${n}-${B}`,this.textAnchor=B==="right"?"end":"start"),this.lineAnchor=n,this.dy=n==="top"?-D:D,this.dx=B==="right"?F-3:B==="left"?3-R:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[Kg(t,z,{anchor:n,label:M,labelAnchor:B,labelArrow:k})]}}}})):null)}function P8(t,n,e,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=n+(t==="y"?"-empty":""),frameAnchor:c=n,tickSize:s,inset:f=0,insetLeft:u=f,insetRight:h=f,dx:l=0,y:d=t==="y"?void 0:null,...p}){return Sr(Lg,t,n,`${t}-axis tick`,e,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:a,frameAnchor:c,y:d,...p,dx:n==="left"?+l-Nt+ +u:+l+Nt-h,anchor:"start",length:s,shape:n==="left"?q8:Y8})}function I8(t,n,e,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=n+(t==="x"?"-empty":""),frameAnchor:c=n,tickSize:s,inset:f=0,insetTop:u=f,insetBottom:h=f,dy:l=0,x:d=t==="x"?void 0:null,...p}){return Sr(Ng,t,n,`${t}-axis tick`,e,{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:a,frameAnchor:c,x:d,...p,dy:n==="bottom"?+l-Nt-h:+l+Nt+ +u,anchor:"start",length:s,shape:n==="bottom"?D8:O8})}function R8(t,n,e,{facetAnchor:r=n+(t==="y"?"-empty":""),frameAnchor:i=n,tickSize:o,tickRotate:a=0,tickPadding:c=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*Ho):0),text:s,textAnchor:f=Math.abs(a)>60?"middle":n==="left"?"end":"start",lineAnchor:u=a>60?"top":a<-60?"bottom":"middle",fontVariant:h,inset:l=0,insetLeft:d=l,insetRight:p=l,dx:g=0,y=t==="y"?void 0:null,...b}){return Sr(_g,t,n,`${t}-axis tick label`,e,{facetAnchor:r,frameAnchor:i,text:s,textAnchor:f,lineAnchor:u,fontVariant:h,rotate:a,y,...b,dx:n==="left"?+g-o-c+ +d:+g+ +o+ +c-p},function(m,_,w,x,v){h===void 0&&(this.fontVariant=Zg(m)),s===void 0&&(v.text=Ug(m,_,w,x,n))})}function B8(t,n,e,{facetAnchor:r=n+(t==="x"?"-empty":""),frameAnchor:i=n,tickSize:o,tickRotate:a=0,tickPadding:c=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*Ho):0),text:s,textAnchor:f=Math.abs(a)>=10?a<0^n==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(a)>=10?"middle":n==="bottom"?"top":"bottom",fontVariant:h,inset:l=0,insetTop:d=l,insetBottom:p=l,dy:g=0,x:y=t==="x"?void 0:null,...b}){return Sr(wg,t,n,`${t}-axis tick label`,e,{facetAnchor:r,frameAnchor:i,text:s===void 0?null:s,textAnchor:f,lineAnchor:u,fontVariant:h,rotate:a,x:y,...b,dy:n==="bottom"?+g+ +o+ +c-p:+g-o-c+ +d},function(m,_,w,x,v){h===void 0&&(this.fontVariant=Zg(m)),s===void 0&&(v.text=Ug(m,_,w,x,n))})}function qg(){const[t,n]=ge(...arguments);return Wg("y",zg(n),t,n)}function Yg(){const[t,n]=ge(...arguments);return Wg("fy",Pg(n),t,n)}function jg(){const[t,n]=ge(...arguments);return Gg("x",Ig(n),t,n)}function Xg(){const[t,n]=ge(...arguments);return Gg("fx",Rg(n),t,n)}function Wg(t,n,e,{y:r=t==="y"?void 0:null,x:i=null,x1:o=n==="left"?i:null,x2:a=n==="right"?i:null,...c}){return Sr(se,t,n,`${t}-grid`,e,{y:r,x1:o,x2:a,...Vg(c)})}function Gg(t,n,e,{x:r=t==="x"?void 0:null,y:i=null,y1:o=n==="top"?i:null,y2:a=n==="bottom"?i:null,...c}){return Sr(jn,t,n,`${t}-grid`,e,{x:r,y1:o,y2:a,...Vg(c)})}function Vg({color:t="currentColor",opacity:n=.1,stroke:e=t,strokeOpacity:r=n,strokeWidth:i=1,...o}){return{stroke:e,strokeOpacity:r,strokeWidth:i,...o}}function Hg({fill:t,fillOpacity:n,fontFamily:e,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:c,pointerEvents:s,shapeRendering:f,clip:u=!1},h){return[,t]=Gt(t),[,n]=_t(n),{facet:"super",x:null,y:null,fill:t,fillOpacity:n,fontFamily:e,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:c,pointerEvents:s,shapeRendering:f,clip:u,initializer:h}}function Sr(t,n,e,r,i,o,a){let c;function s(h,l,d,p,g,y){const b=h==null&&(n==="fx"||n==="fy"),{[n]:m}=p;if(!m)throw new Error(`missing scale: ${n}`);const _=m.domain();let{interval:w,ticks:x,tickFormat:v,tickSpacing:M=n==="x"?80:35}=o;if(typeof x=="string"&&Jg(m)&&(w=x,x=void 0),x===void 0&&(x=vr(w,m.type)??F8(m,M)),h==null){if(Vn(x))h=Vt(x);else if(Qe(x))h=Mc(x,...Et(_));else if(m.interval){let k=m.interval;if(m.ticks){const[$,E]=Et(_),T=(E-$)/k[_i];k=Cl(k,T/x)??k,h=Mc(k,$,E)}else{h=_;const $=h.length;k=Cl(k,$/x)??k,k!==m.interval&&(h=Mc(k,...Et(h)))}if(k===m.interval){const $=Math.round(h.length/x);$>1&&(h=h.filter((E,T)=>T%$===0))}}else m.ticks?h=m.ticks(x):h=_;if(!m.ticks&&h.length&&h!==_){const k=new gi(_);h=h.filter($=>k.has($)),h.length||On(`Warning: the ${n}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}n==="y"||n==="x"?l=[Wn(h)]:c[n]={scale:n,value:V}}a==null||a.call(this,m,h,x,v,c);const S=Object.fromEntries(Object.entries(c).map(([k,$])=>[k,{...$,value:J(h,$.value)}]));return b&&(l=y.filterFacets(h,S)),{data:h,facets:l,channels:S}}const f=Ht(o).initializer,u=t(i,Ht({...o,initializer:s},f));return i==null?(c=u.channels,u.channels={}):c={},u.ariaLabel=r,u.clip===void 0&&(u.clip=!1),u}function F8(t,n){const[e,r]=Et(t.range());return(r-e)/n}function Ug(t,n,e,r,i){return{value:Gf(t,n,e,r,i)}}function Gf(t,n,e,r,i){return typeof r=="function"?r:r===void 0&&n&&Ot(n)?n5(n,i)??Pe:t.tickFormat?t.tickFormat(typeof e=="number"?e:null,r):r===void 0?Pe:typeof r=="string"?(Ot(t.domain())?Is:ca)(r):Jt(r)}function Mc(t,n,e){return t.range(n,t.offset(t.floor(e)))}const D8={draw(t,n){t.moveTo(0,0),t.lineTo(0,n)}},O8={draw(t,n){t.moveTo(0,0),t.lineTo(0,-n)}},q8={draw(t,n){t.moveTo(0,0),t.lineTo(-n,0)}},Y8={draw(t,n){t.moveTo(0,0),t.lineTo(n,0)}};function Zg(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function j8(t){return Math.sign(pr(t.domain()))*Math.sign(pr(t.range()))}function Kg(t,n,{anchor:e,label:r=n.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&Jg(n)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!n.bandwidth||n.interval)&&!/[↑↓→←]/.test(r)),!o)return r;if(o===!0){const a=j8(n);a&&(o=/x$/.test(t)||i==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return e==="right"?`${r} ↑`:`↑ ${r}`;case"down":return e==="right"?`${r} ↓`:`↓ ${r}`}return r}}function Qg(t="auto"){return wt(t)?!1:typeof t=="boolean"?t:tn(t,"labelArrow",["auto","up","right","down","left"])}function Jg(t){return Ot(t.domain())}function ih(t,n){if(n==null)return n;const e=t(n);if(!e)throw new Error(`scale not found: ${n}`);return e}function X8(t,{opacity:n,...e}={}){if(!Be(t)&&!Kp(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return tm(t,e,(r,i,o,a)=>r.append("svg").attr("width",o).attr("height",a).attr("fill",i.scale).attr("fill-opacity",_t(n)[1]).append("rect").attr("width","100%").attr("height","100%"))}function W8(t,{fill:n=(f=>(f=t.hint)==null?void 0:f.fill)()!==void 0?t.hint.fill:"none",fillOpacity:e=1,stroke:r=(u=>(u=t.hint)==null?void 0:u.stroke)()!==void 0?t.hint.stroke:wt(n)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:a=4.5,...c}={},s){const[h,l]=Gt(n),[d,p]=Gt(r),g=ih(s,h),y=ih(s,d),b=a*a*Math.PI;return e=_t(e)[1],i=_t(i)[1],o=_t(o)[1],tm(t,c,(m,_,w,x)=>m.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",x).attr("fill",h==="color"?v=>g.scale(v):l).attr("fill-opacity",e).attr("stroke",d==="color"?v=>y.scale(v):p).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",v=>{const M=Rn();return t.scale(v).draw(M,b),M}))}function tm(t,n={},e){let{columns:r,tickFormat:i,fontVariant:o=eg(t),swatchSize:a=15,swatchWidth:c=a,swatchHeight:s=a,marginLeft:f=0,className:u,style:h,width:l}=n;const d=Ta(n);u=Lf(u),i=Gf(t.scale,t.domain,void 0,i);const p=ot("div",d).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`);let g;return r!=null?(g=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(e,t,c,s).call(y=>y.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(g=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(e,t,c,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(y=>y.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",f?`${+f}px`:null).style("width",l===void 0?null:`${+l}px`).style("font-variant",bt(o,"normal")).call(zf,h).node()}const Uo=new Map([["symbol",W8],["color",nm],["opacity",H8]]);function G8(t={}){for(const[n,e]of Uo){const r=t[n];if(ke(r)){const i=Ta(t);let o;if(n==="symbol"){const{fill:a,stroke:c=a===void 0&&ke(t.color)?"color":void 0}=t;o={fill:a,stroke:c}}return e(hs(n,r,o),Vf(i,r,t),a=>ke(t[a])?hs(a,t[a]):null)}}throw new Error("unknown legend type; no scale found")}function V8(t,n,e={}){return(r,i)=>{if(!Uo.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return Uo.get(r)(t[r],Vf(n,e[r],i),o=>t[o])}}function Vf({className:t,...n},{label:e,ticks:r,tickFormat:i}={},o){return b5(o,{className:t,...n},{label:e,ticks:r,tickFormat:i})}function nm(t,{legend:n=!0,...e}){if(n===!0&&(n=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${n}`.toLowerCase()){case"swatches":return X8(t,e);case"ramp":return d8(t,e);default:throw new Error(`unknown legend type: ${n}`)}}function H8({type:t,interpolate:n,...e},{legend:r=!0,color:i=cr(0,0,0),...o}){if(!n)throw new Error(`${t} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return nm({type:t,...e,interpolate:U8(i)},{legend:r,...o})}function U8(t){const{r:n,g:e,b:r}=cr(t)||cr(0,0,0);return i=>`rgba(${n},${e},${r},${i})`}function Z8(t,n,e){const r=[];for(const[i,o]of Uo){const a=e[i];if(a!=null&&a.legend&&i in t){const c=o(t[i],Vf(n,t[i],a),s=>t[s]);c!=null&&r.push(c)}}return r}const K8={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Q8={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class em extends ft{constructor(n={}){const{anchor:e=null,inset:r=0,insetTop:i=r,insetRight:o=r,insetBottom:a=r,insetLeft:c=r,rx:s,ry:f}=n;super(Hr,void 0,n,e==null?K8:Q8),this.anchor=fp(e,"anchor",["top","right","bottom","left"]),this.insetTop=tt(i),this.insetRight=tt(o),this.insetBottom=tt(a),this.insetLeft=tt(c),this.rx=tt(s),this.ry=tt(f)}render(n,e,r,i,o){const{marginTop:a,marginRight:c,marginBottom:s,marginLeft:f,width:u,height:h}=i,{anchor:l,insetTop:d,insetRight:p,insetBottom:g,insetLeft:y,rx:b,ry:m}=this,_=f+y,w=u-c-p,x=a+d,v=h-s-g;return ot(l?"svg:line":"svg:rect",o).datum(0).call(pt,this,i,o).call(ht,this).call(Mt,this,r).call(st,this,{}).call(l==="left"?M=>M.attr("x1",_).attr("x2",_).attr("y1",x).attr("y2",v):l==="right"?M=>M.attr("x1",w).attr("x2",w).attr("y1",x).attr("y2",v):l==="top"?M=>M.attr("x1",_).attr("x2",w).attr("y1",x).attr("y2",x):l==="bottom"?M=>M.attr("x1",_).attr("x2",w).attr("y1",v).attr("y2",v):M=>M.attr("x",_).attr("y",x).attr("width",w-_).attr("height",v-x).attr("rx",b).attr("ry",m)).node()}}function Hf(t){return new em(t)}const Sc={ariaLabel:"tip",fill:"white",stroke:"currentColor"},J8=new Set(["geometry","href","src","ariaLabel","scales"]);class rm extends ft{constructor(n,e={}){e.tip&&(e={...e,tip:!1}),e.title===void 0&&Vn(n)&&gp(n)&&(e={...e,title:V});const{x:r,y:i,x1:o,x2:a,y1:c,y2:s,anchor:f,monospace:u,fontFamily:h=u?"ui-monospace, monospace":void 0,fontSize:l,fontStyle:d,fontVariant:p,fontWeight:g,lineHeight:y=1,lineWidth:b=20,frameAnchor:m,format:_,textAnchor:w="start",textOverflow:x,textPadding:v=8,title:M,pointerSize:S=12,pathFilter:k="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=e;super(n,{x:{value:o!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:c!=null&&s!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:c,scale:"y",optional:s==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:s,scale:"y",optional:c==null},title:{value:M,optional:!0}},e,Sc),this.anchor=mp(f,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=Mi(m),this.textAnchor=bt(w,"middle"),this.textPadding=+v,this.pointerSize=+S,this.pathFilter=zt(k),this.lineHeight=+y,this.lineWidth=+b,this.textOverflow=yg(x),this.monospace=!!u,this.fontFamily=zt(h),this.fontSize=tt(l),this.fontStyle=zt(d),this.fontVariant=zt(p),this.fontWeight=zt(g);for(const $ in Sc)$ in this.channels&&(this[$]=Sc[$]);this.splitLines=xg(this),this.clipLine=$g(this),this.format={..._}}render(n,e,r,i,o){const a=this,{x:c,y:s,fx:f,fy:u}=e,{ownerSVGElement:h,document:l}=o,{anchor:d,monospace:p,lineHeight:g,lineWidth:y}=this,{textPadding:b,pointerSize:m,pathFilter:_}=this,{marginTop:w,marginLeft:x}=i,{x1:v,y1:M,x2:S,y2:k,x:$=v??S,y:E=M??k}=r,T=f?f(n.fx)-x:0,L=u?u(n.fy)-w:0,[C,A]=Tn(this,i),N=tg(r,C),z=ng(r,A),I=p?jf:Yf,F=I(or);let P,R;"title"in r?(P=r.channels,R=i4):(P=r4.call(this,r,e),R=o4);const B=ot("svg:g",o).call(pt,this,i,o).call(vg,this).call(st,this,{x:$&&c,y:E&&s}).call(U=>U.selectAll().data(n).enter().append("g").attr("transform",j=>`translate(${Math.round(N(j))},${Math.round(z(j))})`).call(ht,this).call(j=>j.append("path").attr("filter",_)).call(j=>j.append("text").each(function(O){const q=ie(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const Z=R.call(a,O,n,P,e,r);if(typeof Z=="string")for(const at of a.splitLines(Z))D(q,{value:a.clipLine(at)});else{const at=new Set;for(const et of Z){const{label:lt=""}=et;lt&&at.has(lt)||(at.add(lt),D(q,et))}}})));function D(U,{label:j,value:O,color:q,opacity:Z}){j??(j=""),O??(O="");const at=q!=null||Z!=null;let et,lt=y*100;const[vt]=mr(j,lt,I,F);if(vt>=0)j=j.slice(0,vt).trimEnd()+or,et=O.trim(),O="";else{(j||!O&&!at)&&(O=" "+O);const[St]=mr(O,lt-I(j),I,F);St>=0&&(O=O.slice(0,St).trimEnd()+or,et=O.trim())}const dt=U.append("tspan").attr("x",0).attr("dy",`${g}em`).text("​");j&&dt.append("tspan").attr("font-weight","bold").text(j),O&&dt.append(()=>l.createTextNode(O)),at&&dt.append("tspan").text(" ■").attr("fill",q).attr("fill-opacity",Z).style("user-select","none"),et&&dt.append("title").text(et)}function H(){const{width:U,height:j}=i.facet??i;B.selectChildren().each(function(O){let{x:q,width:Z,height:at}=this.getBBox();Z=Math.round(Z),at=Math.round(at);let et=d;if(et===void 0){et=a.previousAnchor;const dt=N(O)+T,St=z(O)+L,Tt=dt+Z+b*2<U,mn=dt-Z-b*2>0,Ri=St+at+m+b*2+7<j,Bi=St-at-m-b*2>0,Ga=(/-left$/.test(et)?Tt||!mn:Tt&&!mn)?"left":"right",Va=(/^top-/.test(et)?Ri||!Bi:Ri&&!Bi)?"top":"bottom";et=a.previousAnchor=`${Va}-${Ga}`}const lt=this.firstChild,vt=this.lastChild;if(lt.setAttribute("d",e4(et,m,b,Z,at)),q)for(const dt of vt.childNodes)dt.setAttribute("x",-q);vt.setAttribute("y",`${+t4(et,vt.childNodes.length,g).toFixed(6)}em`),vt.setAttribute("transform",`translate(${n4(et,m,b,Z,at)})`)}),B.attr("visibility",null)}return n.length&&(B.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(H):typeof requestAnimationFrame<"u"&&requestAnimationFrame(H)),B.node()}}function im(t,{x:n,y:e,...r}={}){return r.frameAnchor===void 0&&([n,e]=gn(n,e)),new rm(t,{...r,x:n,y:e})}function t4(t,n,e){return/^top(?:-|$)/.test(t)?.94-e:-.29-n*e}function n4(t,n,e,r,i){switch(t){case"middle":return[-r/2,i/2];case"top-left":return[e,n+e];case"top":return[-r/2,n/2+e];case"top-right":return[-r-e,n+e];case"right":return[-n/2-r-e,i/2];case"bottom-left":return[e,-n-e];case"bottom":return[-r/2,-n/2-e];case"bottom-right":return[-r-e,-n-e];case"left":return[e+n/2,i/2]}}function e4(t,n,e,r,i){const o=r+e*2,a=i+e*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${n},${n}h${o-n}v${a}h${-o}z`;case"top":return`M0,0l${n/2},${n/2}h${(o-n)/2}v${a}h${-o}v${-a}h${(o-n)/2}z`;case"top-right":return`M0,0l${-n},${n}h${n-o}v${a}h${o}z`;case"right":return`M0,0l${-n/2},${-n/2}v${n/2-a/2}h${-o}v${a}h${o}v${n/2-a/2}z`;case"bottom-left":return`M0,0l${n},${-n}h${o-n}v${-a}h${-o}z`;case"bottom":return`M0,0l${n/2},${-n/2}h${(o-n)/2}v${-a}h${-o}v${a}h${(o-n)/2}z`;case"bottom-right":return`M0,0l${-n},${-n}h${n-o}v${-a}h${o}z`;case"left":return`M0,0l${n/2},${-n/2}v${n/2-a/2}h${o}v${a}h${-o}v${n/2-a/2}z`}}function r4({channels:t},n){var i,o;const e={};let r=this.format;r=oh(r,t,"x"),r=oh(r,t,"y"),this.format=r;for(const a in r){const c=r[a];if(!(c===null||c===!1))if(a==="fx"||a==="fy")e[a]=!0;else{const s=ss(t,a);s&&(e[a]=s)}}for(const a in t){if(a in e||a in r||J8.has(a))continue;const c=ss(t,a);c&&(e[a]=c)}this.facet&&(n.fx&&!("fx"in r)&&(e.fx=!0),n.fy&&!("fy"in r)&&(e.fy=!0));for(const a in e){const c=this.format[a];if(typeof c=="string"){const s=((i=e[a])==null?void 0:i.value)??((o=n[a])==null?void 0:o.domain())??[];this.format[a]=(Ot(s)?Is:ca)(c)}else if(c===void 0||c===!0){const s=n[a];this.format[a]=s!=null&&s.bandwidth?Gf(s,s.domain()):Pe}}return e}function oh(t,n,e){if(!(e in t))return t;const r=`${e}1`,i=`${e}2`;if((r in t||!(r in n))&&(i in t||!(i in n)))return t;const o=Object.entries(t),a=t[e];return o.splice(o.findIndex(([c])=>c===e)+1,0,[r,a],[i,a]),Object.fromEntries(o)}function i4(t,n,{title:e}){return Pe(e.value[t],t)}function*o4(t,n,e,r,i){for(const o in e){if(o==="fx"||o==="fy"){yield{label:Zo(r,e,o),value:this.format[o](n[o],t)};continue}if(o==="x1"&&"x2"in e||o==="y1"&&"y2"in e)continue;const a=e[o];if(o==="x2"&&"x1"in e)yield{label:ch(r,e,"x"),value:ah(this.format.x2,e.x1,a,t)};else if(o==="y2"&&"y1"in e)yield{label:ch(r,e,"y"),value:ah(this.format.y2,e.y1,a,t)};else{const c=a.value[t],s=a.scale;if(!Ft(c)&&s==null)continue;yield{label:Zo(r,e,o),value:this.format[o](c,t),color:s==="color"?i[o][t]:null,opacity:s==="opacity"?i[o][t]:null}}}}function ah(t,n,e,r){var i;return(i=e.hint)!=null&&i.length?`${t(e.value[r]-n.value[r],r)}`:`${t(n.value[r],r)}–${t(e.value[r],r)}`}function ch(t,n,e){const r=Zo(t,n,`${e}1`,e),i=Zo(t,n,`${e}2`,e);return r===i?r:`${r}–${i}`}function Zo(t,n,e,r=e){const i=n[e],o=t[(i==null?void 0:i.scale)??e];return String((o==null?void 0:o.label)??(i==null?void 0:i.label)??r)}function om(t={}){var F;const{facet:n,style:e,title:r,subtitle:i,caption:o,ariaLabel:a,ariaDescription:c}=t,s=Lf(t.className),f=t.marks===void 0?[]:fh(t.marks);f.push(...d4(f));const u=l4(n,t),h=new Map;for(const P of f){const R=uh(P,u,t);R&&h.set(P,R)}const l=new Map;u&&Pr(l,[u],t),Pr(l,h,t);const d=fh(p4(f,l,t));for(const P of d){const R=uh(P,u,t);R&&h.set(P,R)}f.unshift(...d);let p=J3(l,t);if(p!==void 0){const P=u?xc(p,u):void 0;for(const B of f){if(B.facet===null||B.facet==="super")continue;const D=h.get(B);D!==void 0&&(D.facetsIndex=B.fx!=null||B.fy!=null?xc(p,D):P)}const R=new Set;for(const{facetsIndex:B}of h.values())B==null||B.forEach((D,H)=>{(D==null?void 0:D.length)>0&&R.add(H)});p.forEach(0<R.size&&R.size<p.length?(B,D)=>B.empty=!R.has(D):B=>B.empty=!1);for(const B of f)if(B.facet==="exclude"){const D=h.get(B);D!==void 0&&(D.facetsIndex=e8(D.facetsIndex))}}for(const P of gt.keys())ke(t[P])&&P!=="fx"&&P!=="fy"&&l.set(P,[]);const g=new Map;for(const P of f){if(g.has(P))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:R,channels:B}=h.get(P)??{},{data:D,facets:H,channels:U}=P.initialize(R,B,t);Uf(U,t),g.set(P,{data:D,facets:H,channels:U})}const y=ls(Pr(l,g,t),t),b=K3(y,f,t);j3(y,b);const m=Wl(y),{fx:_,fy:w}=m,x=_||w?Vp(y,b):b,v=_||w?v4(m,b):b,M=Ta(t),S=M.document,k=Hh("svg").call(S.documentElement);let $=k;M.ownerSVGElement=k,M.className=s,M.projection=r3(t,x),M.filterFacets=(P,R)=>xc(p,{channels:R,groups:Ff(P,R)}),M.getMarkState=P=>{const R=g.get(P),B=h.get(P);return{...R,channels:{...R.channels,...B==null?void 0:B.channels}}},M.dispatchValue=P=>{$.value!==P&&($.value=P,$.dispatchEvent(new Event("input",{bubbles:!0})))};const E=new Set;for(const[P,R]of g)if(P.initializer!=null){const B=P.facet==="super"?v:x,D=P.initializer(R.data,R.facets,R.channels,m,B,M);if(D.data!==void 0&&(R.data=D.data),D.facets!==void 0&&(R.facets=D.facets),D.channels!==void 0){const{fx:H,fy:U,...j}=D.channels;u4(j),Object.assign(R.channels,j);for(const O of Object.values(j)){const{scale:q}=O;q!=null&&!w5(gt.get(q))&&(am(O,t),E.add(q))}(H!=null||U!=null)&&h.set(P,!0)}}if(E.size){const P=new Map;Pr(P,g,t,H=>E.has(H)),Pr(l,g,t,H=>E.has(H));const R=_4(ls(P,t),y),{scales:B,...D}=Wl(R);Object.assign(y,R),Object.assign(m,D),Object.assign(m.scales,B)}let T,L;p!==void 0&&(T={x:_==null?void 0:_.domain(),y:w==null?void 0:w.domain()},p=t8(p,T),L=n8(_,w,b));for(const[P,R]of g)R.values=P.scale(R.channels,m,M);const{width:C,height:A}=b;ie(k).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",C).attr("height",A).attr("viewBox",`0 0 ${C} ${A}`).attr("aria-label",a).attr("aria-description",c).call(P=>P.append("style").text(`.${s} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${s} text,
.${s} tspan {
  white-space: pre;
}`)).call(zf,e);for(const P of f){const{channels:R,values:B,facets:D}=g.get(P);if(p===void 0||P.facet==="super"){let H=null;if(D&&(H=D[0],H=P.filter(H,R,B),H.length===0))continue;const U=P.render(H,m,B,v,M);if(U==null)continue;k.appendChild(U)}else{let H;for(const U of p){if(!(((F=P.facetAnchor)==null?void 0:F.call(P,p,T,U))??!U.empty))continue;let j=null;if(D){const q=h.has(P);if(j=D[q?U.i:0],j=P.filter(j,R,B),j.length===0)continue;!q&&j===D[0]&&(j=Te(j)),j.fx=U.x,j.fy=U.y,j.fi=U.i}const O=P.render(j,m,B,x,M);if(O!=null){(H??(H=ie(k).append("g"))).append(()=>O).datum(U);for(const q of["aria-label","aria-description","aria-hidden","transform"])O.hasAttribute(q)&&(H.attr(q,O.getAttribute(q)),O.removeAttribute(q))}}H==null||H.selectChildren().attr("transform",L)}}const N=Z8(y,M,t),{figure:z=r!=null||i!=null||o!=null||N.length>0}=t;z&&($=S.createElement("figure"),$.className=`${s}-figure`,$.style.maxWidth="initial",r!=null&&$.append(sh(S,r,"h2")),i!=null&&$.append(sh(S,i,"h3")),$.append(...N,k),o!=null&&$.append(a4(S,o))),$.scale=Z3(m.scales),$.legend=V8(y,M,t);const I=V5();return I>0&&ie(k).append("text").attr("x",C).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${I.toLocaleString("en-US")} warning${I===1?"":"s"}. Please check the console.`),$}function sh(t,n,e){if(n.ownerDocument)return n;const r=t.createElement(e);return r.append(n),r}function a4(t,n){const e=t.createElement("figcaption");return e.append(n),e}function c4({marks:t=[],...n}={}){return om({...n,marks:[...t,this]})}ft.prototype.plot=c4;function fh(t){return t.flat(1/0).filter(n=>n!=null).map(s4)}function s4(t){return typeof t.render=="function"?t:new f4(t)}class f4 extends ft{constructor(n){if(typeof n!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=n}render(){}}function Uf(t,n){for(const e in t)am(t[e],n);return t}function am(t,n){const{scale:e,transform:r=!0}=t;if(e==null||!r)return;const{type:i,percent:o,interval:a,transform:c=o?s=>s*100:pp(a,i)}=n[e]??{};c!=null&&(t.value=ut(t.value,c),t.transform=!1)}function u4(t){for(const n in t)Mp(n,t[n])}function Pr(t,n,e,r=o5){var i,o;for(const{channels:a}of n.values())for(const c in a){const s=a[c],{scale:f}=s;if(f!=null&&r(f))if(f==="projection"){if(!a3(e)){const u=((i=e.x)==null?void 0:i.domain)===void 0,h=((o=e.y)==null?void 0:o.domain)===void 0;if(u||h){const[l,d]=s3(s);u&&Ac(t,"x",l),h&&Ac(t,"y",d)}}}else Ac(t,f,s)}return t}function Ac(t,n,e){const r=t.get(n);r!==void 0?r.push(e):t.set(n,[e])}function l4(t,n){if(t==null)return;const{x:e,y:r}=t;if(e==null&&r==null)return;const i=Vt(t.data);if(i==null)throw new Error("missing facet data");const o={};e!=null&&(o.fx=si(i,{value:e,scale:"fx"})),r!=null&&(o.fy=si(i,{value:r,scale:"fy"})),Uf(o,n);const a=Ff(i,o);return{channels:o,groups:a,data:t.data}}function uh(t,n,e){var s;if(t.facet===null||t.facet==="super")return;const{fx:r,fy:i}=t;if(r!=null||i!=null){const f=Vt(t.data??r??i);if(f===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(f===null)return;const u={};return r!=null&&(u.fx=si(f,{value:r,scale:"fx"})),i!=null&&(u.fy=si(f,{value:i,scale:"fy"})),Uf(u,e),{channels:u,groups:Ff(f,u)}}if(n===void 0)return;const{channels:o,groups:a,data:c}=n;if(t.facet!=="auto"||t.data===c)return{channels:o,groups:a};c.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((s=Vt(t.data))==null?void 0:s.length)===c.length&&On(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function h4(t,n={}){return Ht({...n,x:null,y:null},(e,r,i,o,a,c)=>c.getMarkState(t))}function d4(t){const n=[];for(const e of t){let r=e.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i}=r;i=/^x$/i.test(i)?ui:/^y$/i.test(i)?qf:Of,r=i(h4(e,r)),r.title=null;const o=im(e.data,r);o.facet=e.facet,o.facetAnchor=e.facetAnchor,n.push(o)}}return n}function p4(t,n,e){let{projection:r,x:i={},y:o={},fx:a={},fy:c={},axis:s,grid:f,facet:u={},facet:{axis:h=s,grid:l}=u,x:{axis:d=s,grid:p=d===null?null:f}=i,y:{axis:g=s,grid:y=g===null?null:f}=o,fx:{axis:b=h,grid:m=b===null?null:l}=a,fy:{axis:_=h,grid:w=_===null?null:l}=c}=e;(r||!ke(i)&&!lh("x",t))&&(d=p=null),(r||!ke(o)&&!lh("y",t))&&(g=y=null),n.has("fx")||(b=m=null),n.has("fy")||(_=w=null),d===void 0&&(d=!to(t,"x")),g===void 0&&(g=!to(t,"y")),b===void 0&&(b=!to(t,"fx")),_===void 0&&(_=!to(t,"fy")),d===!0&&(d="bottom"),g===!0&&(g="left"),b===!0&&(b=d==="top"||d===null?"bottom":"top"),_===!0&&(_=g==="right"||g===null?"left":"right");const x=[];return Ji(x,w,Yg,c),Qi(x,_,Bg,"right","left",u,c),Ji(x,m,Xg,a),Qi(x,b,Fg,"top","bottom",u,a),Ji(x,y,qg,o),Qi(x,g,Xf,"left","right",e,o),Ji(x,p,jg,i),Qi(x,d,Wf,"bottom","top",e,i),x}function Qi(t,n,e,r,i,o,a){if(!n)return;const c=g4(n);a=m4(c?r:n,o,a);const{line:s}=a;(e===Xf||e===Wf)&&s&&!dr(s)&&t.push(Hf(b4(a))),t.push(e(a)),c&&t.push(e({...a,anchor:i,label:null}))}function Ji(t,n,e,r){!n||dr(n)||t.push(e(y4(n,r)))}function g4(t){return/^\s*both\s*$/i.test(t)}function m4(t,n,{line:e=n.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:c,tickRotate:s,fontVariant:f,ariaLabel:u,ariaDescription:h,label:l=n.label,labelAnchor:d,labelArrow:p=n.labelArrow,labelOffset:g}){return{anchor:t,line:e,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:c,tickRotate:s,fontVariant:f,ariaLabel:u,ariaDescription:h,label:l,labelAnchor:d,labelArrow:p,labelOffset:g}}function b4(t){const{anchor:n,line:e}=t;return{anchor:n,facetAnchor:n+"-empty",stroke:e===!0?void 0:e}}function y4(t,{stroke:n=$i(t)?t:void 0,ticks:e=w4(t)?t:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:n,ticks:e,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function w4(t){switch(typeof t){case"number":return!0;case"string":return!$i(t)}return Vn(t)||typeof(t==null?void 0:t.range)=="function"}function to(t,n){const e=`${n}-axis `;return t.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(e)})}function lh(t,n){for(const e of n)for(const r in e.channels){const{scale:i}=e.channels[r];if(i===t||i==="projection")return!0}return!1}function _4(t,n){for(const e in t){const r=t[e],i=n[e];r.label===void 0&&i&&(r.label=i.label)}return t}function v4({fx:t,fy:n},e){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:c,height:s}=Bf(e),f=t&&hh(t),u=n&&hh(n);return{marginTop:n?u[0]:r,marginRight:t?c-f[1]:i,marginBottom:n?s-u[1]:o,marginLeft:t?f[0]:a,inset:{marginTop:e.marginTop,marginRight:e.marginRight,marginBottom:e.marginBottom,marginLeft:e.marginLeft},width:c,height:s}}function hh(t){const n=t.domain();let e=t(n[0]),r=t(n[n.length-1]);return r<e&&([e,r]=[r,e]),[e,r+t.bandwidth()]}const x4=new Map([["basis",eb],["basis-closed",P6],["basis-open",I6],["bundle",R6],["bump-x",$6],["bump-y",M6],["cardinal",B6],["cardinal-closed",F6],["cardinal-open",D6],["catmull-rom",O6],["catmull-rom-closed",q6],["catmull-rom-open",Y6],["linear",Rs],["linear-closed",j6],["monotone-x",X6],["monotone-y",W6],["natural",G6],["step",V6],["step-after",U6],["step-before",H6]]);function Zf(t=Rs,n){if(typeof t=="function")return t;const e=x4.get(`${t}`.toLowerCase());if(!e)throw new Error(`unknown curve: ${t}`);if(n!==void 0){if("beta"in e)return e.beta(n);if("tension"in e)return e.tension(n);if("alpha"in e)return e.alpha(n)}return e}function cm(t=br,n){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?br:Zf(t,n)}function br(t){return Rs(t)}function ne(t={y:"count"},n={}){[t,n]=tu(t,n);const{x:e,y:r}=n;return Jf(Ko(e,n,V),null,null,r,t,Ni(n))}function ee(t={x:"count"},n={}){[t,n]=tu(t,n);const{x:e,y:r}=n;return Jf(null,Ko(r,n,V),e,null,t,Li(n))}function we(t={fill:"count"},n={}){[t,n]=tu(t,n);const{x:e,y:r}=$4(n);return Jf(e,r,null,null,t,Ni(Li(n)))}function sm(t,n,e={}){if((e==null?void 0:e.interval)==null)return e;const{reduce:r=kf}=e,i={filter:null};return e[n]!=null&&(i[n]=r),e[`${n}1`]!=null&&(i[`${n}1`]=r),e[`${n}2`]!=null&&(i[`${n}2`]=r),t(i,e)}function Kf(t={}){return sm(ne,"y",xr(t,"x"))}function Qf(t={}){return sm(ee,"x",xr(t,"y"))}function Jf(t,n,e,r,{data:i=Ef,filter:o=Go,sort:a,reverse:c,...s}={},f={}){t=dh(t),n=dh(n),s=M4(s,f),i=hm(i,V),a=a==null?void 0:um("sort",a,f),o=o==null?void 0:lm("filter",o,f),e!=null&&re(s,"x","x1","x2")&&(e=null),r!=null&&re(s,"y","y1","y2")&&(r=null);const[u,h]=qt(t),[l,d]=qt(t),[p,g]=qt(n),[y,b]=qt(n),[m,_]=e!=null?[e,"x"]:r!=null?[r,"y"]:[],[w,x]=qt(m),{x:v,y:M,z:S,fill:k,stroke:$,x1:E,x2:T,y1:L,y2:C,domain:A,cumulative:N,thresholds:z,interval:I,...F}=f,[P,R]=qt(S),[B]=Gt(k),[D]=Gt($),[H,U]=qt(B),[j,O]=qt(D);return{..."z"in f&&{z:P||S},..."fill"in f&&{fill:H||k},..."stroke"in f&&{stroke:j||$},...kn(F,(q,Z,at)=>{const et=Wo(J(q,m),at==null?void 0:at[_]),lt=J(q,S),vt=J(q,B),dt=J(q,D),St=Af(s,{z:lt,fill:vt,stroke:dt}),Tt=[],mn=[],Ri=et&&x([]),Bi=lt&&R([]),Ga=vt&&U([]),Va=dt&&O([]),Mu=t&&h([]),x2=t&&d([]),Su=n&&g([]),$2=n&&b([]),M2=E4(t==null?void 0:t(q),n==null?void 0:n(q));let S2=0;for(const Fe of s)Fe.initialize(q);a&&a.initialize(q),o&&o.initialize(q);for(const Fe of Z){const Au=[];for(const Cr of s)Cr.scope("facet",Fe);a&&a.scope("facet",Fe),o&&o.scope("facet",Fe);for(const[Cr,A2]of ir(Fe,St))for(const[E2,Fi]of ir(A2,et))for(const[bn,me]of M2(Fi))if(!(o&&!o.reduce(bn,me))){Au.push(S2++),mn.push(i.reduceIndex(bn,q,me)),et&&Ri.push(E2),lt&&Bi.push(St===lt?Cr:lt[(bn.length>0?bn:Fi)[0]]),vt&&Ga.push(St===vt?Cr:vt[(bn.length>0?bn:Fi)[0]]),dt&&Va.push(St===dt?Cr:dt[(bn.length>0?bn:Fi)[0]]),Mu&&(Mu.push(me.x1),x2.push(me.x2)),Su&&(Su.push(me.y1),$2.push(me.y2));for(const k2 of s)k2.reduce(bn,me);a&&a.reduce(bn)}Tt.push(Au)}return xp(Tt,a,c),{data:mn,facets:Tt}}),...!re(s,"x")&&(u?{x1:u,x2:l,x:Xo(u,l)}:{x:v,x1:E,x2:T}),...!re(s,"y")&&(p?{y1:p,y2:y,y:Xo(p,y)}:{y:M,y1:L,y2:C}),...w&&{[_]:w},...Object.fromEntries(s.map(({name:q,output:Z})=>[q,Z]))}}function tu({cumulative:t,domain:n,thresholds:e,interval:r,...i},o){return[i,{cumulative:t,domain:n,thresholds:e,interval:r,...o}]}function Ko(t,{cumulative:n,domain:e,thresholds:r,interval:i},o){return t={...xi(t)},t.domain===void 0&&(t.domain=e),t.cumulative===void 0&&(t.cumulative=n),t.thresholds===void 0&&(t.thresholds=r),t.interval===void 0&&(t.interval=i),t.value===void 0&&(t.value=o),t.thresholds=fm(t.thresholds,t.interval),t}function $4(t){let{x:n,y:e}=t;return n=Ko(n,t),e=Ko(e,t),[n.value,e.value]=gn(n.value,e.value),{x:n,y:e}}function dh(t){if(t==null)return;const{value:n,cumulative:e,domain:r=Et,thresholds:i}=t,o=a=>{let c=J(a,n),s;if(Ot(c)||A4(i)){c=ut(c,sp,Float64Array);let[u,h]=typeof r=="function"?r(c):r,l=typeof i=="function"&&!Qe(i)?i(c,u,h):i;typeof l=="number"&&(l=rb(u,h,l)),Qe(l)&&(r===Et&&(u=l.floor(u),h=l.offset(l.floor(h))),l=l.range(u,l.offset(h))),s=l}else{c=jt(c);let[u,h]=typeof r=="function"?r(c):r,l=typeof i=="function"&&!Qe(i)?i(c,u,h):i;if(typeof l=="number")if(r===Et){let d=Ph(u,h,l);if(isFinite(d))if(d>0){let p=Math.round(u/d),g=Math.round(h/d);p*d<=u||--p,g*d>h||++g;let y=g-p+1;l=new Float64Array(y);for(let b=0;b<y;++b)l[b]=(p+b)*d}else if(d<0){d=-d;let p=Math.round(u*d),g=Math.round(h*d);p/d<=u||--p,g/d>h||++g;let y=g-p+1;l=new Float64Array(y);for(let b=0;b<y;++b)l[b]=(p+b)/d}else l=[u];else l=[u]}else l=Ne(u,h,l);else Qe(l)&&(r===Et&&(u=l.floor(u),h=l.offset(l.floor(h))),l=l.range(u,l.offset(h)));s=l}const f=[];if(s.length===1)f.push([s[0],s[0]]);else for(let u=1;u<s.length;++u)f.push([s[u-1],s[u]]);return f.bin=(e<0?T4:e>0?k4:nu)(f,s,c),f};return o.label=Gn(n),o}function fm(t,n,e=ph){if(t===void 0)return n===void 0?e:vr(n);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return Ab;case"scott":return cd;case"sturges":return Ys;case"auto":return ph}return sf(t)}return t}function M4(t,n){return $f(t,n,um)}function um(t,n,e){return Mf(t,n,e,lm)}function lm(t,n,e){return Sf(t,n,e,hm)}function hm(t,n){return ka(t,n,S4)}function S4(t){switch(`${t}`.toLowerCase()){case"x":return C4;case"x1":return L4;case"x2":return z4;case"y":return N4;case"y1":return P4;case"y2":return I4}throw new Error(`invalid bin reduce: ${t}`)}function ph(t,n,e){return Math.min(200,cd(t,n,e))}function A4(t){return f5(t)||Vn(t)&&Ot(t)}function E4(t,n){return t&&n?function*(e){const r=t.bin(e);for(const[i,[o,a]]of t.entries()){const c=n.bin(r[i]);for(const[s,[f,u]]of n.entries())yield[c[s],{x1:o,y1:f,x2:a,y2:u}]}}:t?function*(e){const r=t.bin(e);for(const[i,[o,a]]of t.entries())yield[r[i],{x1:o,x2:a}]}:function*(e){const r=n.bin(e);for(const[i,[o,a]]of n.entries())yield[r[i],{y1:o,y2:a}]}}function nu(t,n,e){return n=jt(n),r=>{var o;const i=t.map(()=>[]);for(const a of r)(o=i[zs(n,e[a])-1])==null||o.push(a);return i}}function k4(t,n,e){const r=nu(t,n,e);return i=>{const o=r(i);for(let a=1,c=o.length;a<c;++a){const s=o[a-1],f=o[a];for(const u of s)f.push(u)}return o}}function T4(t,n,e){const r=nu(t,n,e);return i=>{const o=r(i);for(let a=o.length-2;a>=0;--a){const c=o[a+1],s=o[a];for(const f of c)s.push(f)}return o}}function dm(t,n){const e=(+t+ +n)/2;return t instanceof Date?new Date(e):e}const C4={reduceIndex(t,n,{x1:e,x2:r}){return dm(e,r)}},N4={reduceIndex(t,n,{y1:e,y2:r}){return dm(e,r)}},L4={reduceIndex(t,n,{x1:e}){return e}},z4={reduceIndex(t,n,{x2:e}){return e}},P4={reduceIndex(t,n,{y1:e}){return e}},I4={reduceIndex(t,n,{y2:e}){return e}};function eu(t={}){return up(t)?t:{...t,x:V}}function ru(t={}){return lp(t)?t:{...t,y:V}}function R4(t,n){if(n.length===1)return{data:t,facets:n};const e=t.length,r=new Uint8Array(e);let i=0;for(const c of n)for(const s of c)r[s]&&++i,r[s]=1;if(i===0)return{data:t,facets:n};t=oi(t);const o=t[ap]=new Uint32Array(e+i);n=n.map(c=>oi(c,Uint32Array));let a=e;r.fill(0);for(const c of n)for(let s=0,f=c.length;s<f;++s){const u=c[s];r[u]?(c[s]=a,t[a]=t[u],o[a]=u,++a):o[u]=u,r[u]=1}return{data:t,facets:n}}function pm(t={},n={}){arguments.length===1&&([t,n]=Ar(t));const{y1:e,y:r=e,x:i,...o}=n,[a,c,s,f]=Er(r,i,"y","x",t,o);return{...a,y1:e,y:c,x1:s,x2:f,x:Xo(s,f)}}function B4(t={},n={}){arguments.length===1&&([t,n]=Ar(t));const{y1:e,y:r=e,x:i}=n,[o,a,c]=Er(r,i,"y","x",t,n);return{...o,y1:e,y:a,x:c}}function F4(t={},n={}){arguments.length===1&&([t,n]=Ar(t));const{y1:e,y:r=e,x:i}=n,[o,a,,c]=Er(r,i,"y","x",t,n);return{...o,y1:e,y:a,x:c}}function gm(t={},n={}){arguments.length===1&&([t,n]=Ar(t));const{x1:e,x:r=e,y:i,...o}=n,[a,c,s,f]=Er(r,i,"x","y",t,o);return{...a,x1:e,x:c,y1:s,y2:f,y:Xo(s,f)}}function D4(t={},n={}){arguments.length===1&&([t,n]=Ar(t));const{x1:e,x:r=e,y:i}=n,[o,a,c]=Er(r,i,"x","y",t,n);return{...o,x1:e,x:a,y:c}}function O4(t={},n={}){arguments.length===1&&([t,n]=Ar(t));const{x1:e,x:r=e,y:i}=n,[o,a,,c]=Er(r,i,"x","y",t,n);return{...o,x1:e,x:a,y:c}}function iu({x:t,x1:n,x2:e,...r}={}){return r=xr(r,"y"),n===void 0&&e===void 0?pm({x:t,...r}):([n,e]=hp(t,n,e),{...r,x1:n,x2:e})}function ou({y:t,y1:n,y2:e,...r}={}){return r=xr(r,"x"),n===void 0&&e===void 0?gm({y:t,...r}):([n,e]=hp(t,n,e),{...r,y1:n,y2:e})}function Ar(t){const{offset:n,order:e,reverse:r,...i}=t;return[{offset:n,order:e,reverse:r},i]}const q4={length:!0};function Er(t,n=ff,e,r,{offset:i,order:o,reverse:a},c){if(n===null)throw new Error(`stack requires ${r}`);const s=de(c),[f,u]=qt(t),[h,l]=Kt(n),[d,p]=Kt(n);return h.hint=d.hint=q4,i=Y4(i),o=W4(o,i,r),[kn(c,(g,y,b)=>{({data:g,facets:y}=R4(g,y));const m=t==null?void 0:u(Wo(J(g,t),b==null?void 0:b[e])),_=J(g,n,Float64Array),w=J(g,s),x=o&&o(g,m,_,w),v=g.length,M=l(new Float64Array(v)),S=p(new Float64Array(v)),k=[];for(const $ of y){const E=m?Array.from(Xn($,T=>m[T]).values()):[$];if(x)for(const T of E)T.sort(x);for(const T of E){let L=0,C=0;a&&T.reverse();for(const A of T){const N=_[A];N<0?L=S[A]=(M[A]=L)+N:N>0?C=S[A]=(M[A]=C)+N:S[A]=M[A]=C}}k.push(E)}return i&&i(k,M,S,w),{data:g,facets:y}}),f,h,d]}function Y4(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return j4;case"center":case"silhouette":return X4;case"wiggle":return bm}throw new Error(`unknown offset: ${t}`)}}function mm(t,n){let e=0,r=0;for(const i of t){const o=n[i];o<e&&(e=o),o>r&&(r=o)}return[e,r]}function j4(t,n,e){for(const r of t)for(const i of r){const[o,a]=mm(i,e);for(const c of i){const s=1/(a-o||1);n[c]=s*(n[c]-o),e[c]=s*(e[c]-o)}}}function X4(t,n,e){for(const r of t){for(const i of r){const[o,a]=mm(i,e);for(const c of i){const s=(a+o)/2;n[c]-=s,e[c]-=s}}ym(r,n,e)}wm(t,n,e)}function bm(t,n,e,r){for(const i of t){const o=new Le;let a=0;for(const c of i){let s=-1;const f=c.map(d=>Math.abs(e[d]-n[d])),u=c.map(d=>{s=r?r[d]:++s;const p=e[d]-n[d],g=o.has(s)?p-o.get(s):0;return o.set(s,p),g}),h=[0,..._b(u)];for(const d of c)n[d]+=a,e[d]+=a;const l=Sn(f);l&&(a-=Sn(f,(d,p)=>(u[p]/2+h[p])*d)/l)}ym(i,n,e)}wm(t,n,e)}function ym(t,n,e){const r=Xt(t,i=>Xt(i,o=>n[o]));for(const i of t)for(const o of i)n[o]-=r,e[o]-=r}function wm(t,n,e){const r=t.length;if(r===1)return;const i=t.map(c=>c.flat()),o=i.map(c=>(Xt(c,s=>n[s])+kt(c,s=>e[s]))/2),a=Xt(o);for(let c=0;c<r;c++){const s=a-o[c];for(const f of i[c])n[f]+=s,e[f]+=s}}function W4(t,n,e){if(t===void 0&&n===bm)return gh(cn);if(t!=null){if(typeof t=="string"){const r=t.startsWith("-"),i=r?Yo:cn;switch((r?t.slice(1):t).toLowerCase()){case"value":case e:return G4(i);case"z":return V4(i);case"sum":return H4(i);case"appearance":return U4(i);case"inside-out":return gh(i)}return mh(cp(t))}if(typeof t=="function")return(t.length===1?mh:Z4)(t);if(Array.isArray(t))return K4(t);throw new Error(`invalid order: ${t}`)}}function G4(t){return(n,e,r)=>(i,o)=>t(r[i],r[o])}function V4(t){return(n,e,r,i)=>(o,a)=>t(i[o],i[a])}function H4(t){return Da(t,(n,e,r,i)=>qs(Wn(n),o=>Sn(o,a=>r[a]),o=>i[o]))}function U4(t){return Da(t,(n,e,r,i)=>qs(Wn(n),o=>e[js(o,a=>r[a])],o=>i[o]))}function gh(t){return Da(t,(n,e,r,i)=>{const o=Wn(n),a=qs(o,h=>e[js(h,l=>r[l])],h=>i[h]),c=er(o,h=>Sn(h,l=>r[l]),h=>i[h]),s=[],f=[];let u=0;for(const h of a)u<0?(u+=c.get(h),s.push(h)):(u-=c.get(h),f.push(h));return f.reverse().concat(s)})}function mh(t){return n=>{const e=J(n,t);return(r,i)=>cn(e[r],e[i])}}function Z4(t){return n=>(e,r)=>t(n[e],n[r])}function K4(t){return Da(cn,()=>t)}function Da(t,n){return(e,r,i,o)=>{if(!o)throw new Error("missing channel: z");const a=new Le(n(e,r,i,o).map((c,s)=>[c,s]));return(c,s)=>t(a.get(o[c]),a.get(o[s]))}}const Q4={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Oa extends ft{constructor(n,e={}){const{x1:r,y1:i,x2:o,y2:a,z:c,curve:s,tension:f}=e;super(n,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:de(e),optional:!0}},e,Q4),this.z=c,this.curve=Zf(s,f)}filter(n){return n}render(n,e,r,i,o){const{x1:a,y1:c,x2:s=a,y2:f=c}=r;return ot("svg:g",o).call(pt,this,i,o).call(st,this,e,0,0).call(u=>u.selectAll().data(Tp(n,[a,c,s,f],this,r)).enter().append("path").call(ht,this).call(Vo,this,r).attr("d",Bs().curve(this.curve).defined(h=>h>=0).x0(h=>a[h]).y0(h=>c[h]).x1(h=>s[h]).y1(h=>f[h]))).node()}}function J4(t,n){return n===void 0?Ie(t,{x:vi,y:ii}):new Oa(t,n)}function li(t,n){const{y:e=Ut,...r}=Qf(n);return new Oa(t,iu(eu({...r,y1:e,y2:void 0})))}function Ie(t,n){const{x:e=Ut,...r}=Kf(n);return new Oa(t,ou(ru({...r,x1:e,x2:void 0})))}const t_={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class _m extends ft{constructor(n,e={}){const{x1:r,y1:i,x2:o,y2:a,curve:c,tension:s}=e;super(n,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},e,t_),this.curve=cm(c,s),$r(this,e)}project(n,e,r){this.curve!==br&&super.project(n,e,r)}render(n,e,r,i,o){const{x1:a,y1:c,x2:s=a,y2:f=c}=r,{curve:u}=this;return ot("svg:g",o).call(pt,this,i,o).call(st,this,e).call(h=>h.selectAll().data(n).enter().append("path").call(ht,this).attr("d",u===br&&o.projection?n_(o.projection,a,c,s,f):l=>{const d=Rn(),p=u(d);return p.lineStart(),p.point(a[l],c[l]),p.point(s[l],f[l]),p.lineEnd(),d}).call(Mt,this,r).call(Ci,this,r,o)).node()}}function n_(t,n,e,r,i){const o=le(t);return n=jt(n),e=jt(e),r=jt(r),i=jt(i),a=>o({type:"LineString",coordinates:[[n[a],e[a]],[r[a],i[a]]]})}function vm(t,{x:n,x1:e,x2:r,y:i,y1:o,y2:a,...c}={}){return[e,r]=Qo(n,e,r),[o,a]=Qo(i,o,a),new _m(t,{...c,x1:e,x2:r,y1:o,y2:a})}function Qo(t,n,e){if(t===void 0){if(n===void 0){if(e!==void 0)return[e]}else if(e===void 0)return[n]}else{if(n===void 0)return e===void 0?[t]:[t,e];if(e===void 0)return[t,n]}return[n,e]}const e_={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class xm extends ft{constructor(n,e={}){const{x1:r,y1:i,x2:o,y2:a,bend:c=0,headAngle:s=60,headLength:f=8,inset:u=0,insetStart:h=u,insetEnd:l=u,sweep:d}=e;super(n,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},e,e_),this.bend=c===!0?22.5:Math.max(-90,Math.min(90,c)),this.headAngle=+s,this.headLength=+f,this.insetStart=+h,this.insetEnd=+l,this.sweep=r_(d)}render(n,e,r,i,o){const{x1:a,y1:c,x2:s=a,y2:f=c,SW:u}=r,{strokeWidth:h,bend:l,headAngle:d,headLength:p,insetStart:g,insetEnd:y}=this,b=u?w=>u[w]:Jt(h===void 0?1:h),m=d*Ho/2,_=p/1.5;return ot("svg:g",o).call(pt,this,i,o).call(st,this,e).call(w=>w.selectAll().data(n).enter().append("path").call(ht,this).attr("d",x=>{let v=a[x],M=c[x],S=s[x],k=f[x];const $=Math.hypot(S-v,k-M);if($<=g+y)return null;let E=Math.atan2(k-M,S-v);const T=Math.min(_*b(x),$/3),L=this.sweep(v,M,S,k)*l*Ho,C=Math.hypot($/Math.tan(L),$)/2;if(g||y)if(C<1e5){const H=Math.sign(L),[U,j]=i_([v,M],[S,k],C,H);if(g&&([v,M]=bh([U,j,C],[v,M,g],-H*Math.sign(g))),y){const[O,q]=bh([U,j,C],[S,k,y],H*Math.sign(y));E+=Math.atan2(q-j,O-U)-Math.atan2(k-j,S-U),S=O,k=q}}else{const H=S-v,U=k-M,j=Math.hypot(H,U);g&&(v+=H/j*g,M+=U/j*g),y&&(S-=H/j*y,k-=U/j*y)}const A=E+L,N=A+m,z=A-m,I=S-T*Math.cos(N),F=k-T*Math.sin(N),P=S-T*Math.cos(z),R=k-T*Math.sin(z),B=C<1e5?`A${C},${C} 0,0,${L>0?1:0} `:"L",D=T?`M${I},${F}L${S},${k}L${P},${R}`:"";return`M${v},${M}${B}${S},${k}${D}`}).call(Mt,this,r)).node()}}function r_(t=1){if(typeof t=="number")return Jt(Math.sign(t));if(typeof t=="function")return(n,e,r,i)=>Math.sign(t(n,e,r,i));switch(tn(t,"sweep",["+x","-x","+y","-y"])){case"+x":return(n,e,r)=>xt(n,r);case"-x":return(n,e,r)=>sr(n,r);case"+y":return(n,e,r,i)=>xt(e,i);case"-y":return(n,e,r,i)=>sr(e,i)}}function i_([t,n],[e,r],i,o){const a=e-t,c=r-n,s=Math.hypot(a,c),f=o*Math.sqrt(i*i-s*s/4)/s;return[(t+e)/2-c*f,(n+r)/2+a*f]}function bh([t,n,e],[r,i,o],a){const c=r-t,s=i-n,f=Math.hypot(c,s),u=(c*c+s*s-o*o+e*e)/(2*f),h=a*Math.sqrt(e*e-u*u);return[t+(c*u+s*h)/f,n+(s*u-c*h)/f]}function o_(t,{x:n,x1:e,x2:r,y:i,y1:o,y2:a,...c}={}){return[e,r]=Qo(n,e,r),[o,a]=Qo(i,o,a),new xm(t,{...c,x1:e,x2:r,y1:o,y2:a})}class au extends ft{constructor(n,e,r={},i){super(n,e,r,i);const{inset:o=0,insetTop:a=o,insetRight:c=o,insetBottom:s=o,insetLeft:f=o,rx:u,ry:h}=r;this.insetTop=tt(a),this.insetRight=tt(c),this.insetBottom=tt(s),this.insetLeft=tt(f),this.rx=bt(u,"auto"),this.ry=bt(h,"auto")}render(n,e,r,i,o){const{rx:a,ry:c}=this;return ot("svg:g",o).call(pt,this,i,o).call(this._transform,this,e).call(s=>s.selectAll().data(n).enter().append("rect").call(ht,this).attr("x",this._x(e,r,i)).attr("width",this._width(e,r,i)).attr("y",this._y(e,r,i)).attr("height",this._height(e,r,i)).call(X,"rx",a).call(X,"ry",c).call(Mt,this,r)).node()}_x(n,{x:e},{marginLeft:r}){const{insetLeft:i}=this;return e?o=>e[o]+i:r+i}_y(n,{y:e},{marginTop:r}){const{insetTop:i}=this;return e?o=>e[o]+i:r+i}_width({x:n},{x:e},{marginRight:r,marginLeft:i,width:o}){const{insetLeft:a,insetRight:c}=this,s=e&&n?n.bandwidth():o-r-i;return Math.max(0,s-a-c)}_height({y:n},{y:e},{marginTop:r,marginBottom:i,height:o}){const{insetTop:a,insetBottom:c}=this,s=e&&n?n.bandwidth():o-r-i;return Math.max(0,s-a-c)}}const $m={ariaLabel:"bar"};class Mm extends au{constructor(n,e={}){const{x1:r,x2:i,y:o}=e;super(n,{x1:{value:r,scale:"x"},x2:{value:i,scale:"x"},y:{value:o,scale:"y",type:"band",optional:!0}},e,$m)}_transform(n,e,{x:r}){n.call(st,e,{x:r},0,0)}_x({x:n},{x1:e,x2:r},{marginLeft:i}){const{insetLeft:o}=this;return an(n)?i+o:a=>Math.min(e[a],r[a])+o}_width({x:n},{x1:e,x2:r},{marginRight:i,marginLeft:o,width:a}){const{insetLeft:c,insetRight:s}=this;return an(n)?a-i-o-c-s:f=>Math.max(0,Math.abs(r[f]-e[f])-c-s)}}class Sm extends au{constructor(n,e={}){const{x:r,y1:i,y2:o}=e;super(n,{y1:{value:i,scale:"y"},y2:{value:o,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},e,$m)}_transform(n,e,{y:r}){n.call(st,e,{y:r},0,0)}_y({y:n},{y1:e,y2:r},{marginTop:i}){const{insetTop:o}=this;return an(n)?i+o:a=>Math.min(e[a],r[a])+o}_height({y:n},{y1:e,y2:r},{marginTop:i,marginBottom:o,height:a}){const{insetTop:c,insetBottom:s}=this;return an(n)?a-i-o-c-s:f=>Math.max(0,Math.abs(r[f]-e[f])-c-s)}}function Me(t,n={}){return $a(n)||(n={...n,y:Ut,x2:V}),new Mm(t,iu(fg(eu(n))))}function Se(t,n={}){return $a(n)||(n={...n,x:Ut,y2:V}),new Sm(t,ou(ug(ru(n))))}const a_={ariaLabel:"cell"};class qa extends au{constructor(n,{x:e,y:r,...i}={}){super(n,{x:{value:e,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,a_)}_transform(n,e){n.call(st,e,{},0,0)}}function tr(t,{x:n,y:e,...r}={}){return[n,e]=gn(n,e),new qa(t,{...r,x:n,y:e})}function c_(t,{x:n=Ut,fill:e,stroke:r,...i}={}){return e===void 0&&Gt(r)[0]===void 0&&(e=V),new qa(t,{...i,x:n,fill:e,stroke:r})}function s_(t,{y:n=Ut,fill:e,stroke:r,...i}={}){return e===void 0&&Gt(r)[0]===void 0&&(e=V),new qa(t,{...i,y:n,fill:e,stroke:r})}const f_={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function cu(t){return t.sort===void 0&&t.reverse===void 0?_p({channel:"-r"},t):t}class Ya extends ft{constructor(n,e={}){const{x:r,y:i,r:o,rotate:a,symbol:c=ri,frameAnchor:s}=e,[f,u]=_t(a,0),[h,l]=$5(c),[d,p]=_t(o,h==null?3:4.5);super(n,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:Dn,optional:!0},rotate:{value:f,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},cu(e),f_),this.r=p,this.rotate=u,this.symbol=l,this.frameAnchor=Mi(s);const{channels:g}=this,{symbol:y}=g;if(y){const{fill:b,stroke:m}=g;y.hint={fill:b?b.value===y.value?"color":"currentColor":this.fill??"currentColor",stroke:m?m.value===y.value?"color":"currentColor":this.stroke??"none"}}}render(n,e,r,i,o){const{x:a,y:c}=e,{x:s,y:f,r:u,rotate:h,symbol:l}=r,{r:d,rotate:p,symbol:g}=this,[y,b]=Tn(this,i),m=g===ri,_=u?void 0:d*d*Math.PI;return va(d)&&(n=[]),ot("svg:g",o).call(pt,this,i,o).call(st,this,{x:s&&a,y:f&&c}).call(w=>w.selectAll().data(n).enter().append(m?"circle":"path").call(ht,this).call(m?x=>{x.attr("cx",s?v=>s[v]:y).attr("cy",f?v=>f[v]:b).attr("r",u?v=>u[v]:d)}:x=>{x.attr("transform",Ia`translate(${s?v=>s[v]:y},${f?v=>f[v]:b})${h?v=>` rotate(${h[v]})`:p?` rotate(${p})`:""}`).attr("d",u&&l?v=>{const M=Rn();return l[v].draw(M,u[v]*u[v]*Math.PI),M}:u?v=>{const M=Rn();return g.draw(M,u[v]*u[v]*Math.PI),M}:l?v=>{const M=Rn();return l[v].draw(M,_),M}:(()=>{const v=Rn();return g.draw(v,_),v})())}).call(Mt,this,r)).node()}}function Un(t,{x:n,y:e,...r}={}){return r.frameAnchor===void 0&&([n,e]=gn(n,e)),new Ya(t,{...r,x:n,y:e})}function u_(t,{x:n=V,...e}={}){return new Ya(t,hg({...e,x:n}))}function l_(t,{y:n=V,...e}={}){return new Ya(t,lg({...e,y:n}))}function h_(t,n){return Un(t,{...n,symbol:"circle"})}function d_(t,n){return Un(t,{...n,symbol:"hexagon"})}const p_={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ja extends ft{constructor(n,e={}){const{x:r,y:i,z:o,curve:a,tension:c}=e;super(n,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:de(e),optional:!0}},e,p_),this.z=o,this.curve=cm(a,c),$r(this,e)}filter(n){return n}project(n,e,r){this.curve!==br&&super.project(n,e,r)}render(n,e,r,i,o){const{x:a,y:c}=r,{curve:s}=this;return ot("svg:g",o).call(pt,this,i,o).call(st,this,e).call(f=>f.selectAll().data(Tp(n,[a,c],this,r)).enter().append("path").call(ht,this).call(Vo,this,r).call(b8,this,r,o).attr("d",s===br&&o.projection?g_(o.projection,a,c):ib().curve(s).defined(u=>u>=0).x(u=>a[u]).y(u=>c[u]))).node()}}function g_(t,n,e){const r=le(t);return n=jt(n),e=jt(e),i=>{let o=[];const a=[o];for(const c of i)c===-1?(o=[],a.push(o)):o.push([n[c],e[c]]);return r({type:"MultiLineString",coordinates:a})}}function su(t,{x:n,y:e,...r}={}){return[n,e]=gn(n,e),new ja(t,{...r,x:n,y:e})}function hi(t,{x:n=V,y:e=Ut,...r}={}){return new ja(t,Qf({...r,x:n,y:e}))}function yr(t,{x:n=Ut,y:e=V,...r}={}){return new ja(t,Kf({...r,x:n,y:e}))}const m_={ariaLabel:"rect"};class Xa extends ft{constructor(n,e={}){const{x1:r,y1:i,x2:o,y2:a,inset:c=0,insetTop:s=c,insetRight:f=c,insetBottom:u=c,insetLeft:h=c,rx:l,ry:d}=e;super(n,{x1:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},e,m_),this.insetTop=tt(s),this.insetRight=tt(f),this.insetBottom=tt(u),this.insetLeft=tt(h),this.rx=bt(l,"auto"),this.ry=bt(d,"auto")}render(n,e,r,i,o){const{x:a,y:c}=e,{x1:s,y1:f,x2:u,y2:h}=r,{marginTop:l,marginRight:d,marginBottom:p,marginLeft:g,width:y,height:b}=i,{projection:m}=o,{insetTop:_,insetRight:w,insetBottom:x,insetLeft:v,rx:M,ry:S}=this;return ot("svg:g",o).call(pt,this,i,o).call(st,this,{x:s&&u&&a,y:f&&h&&c},0,0).call(k=>k.selectAll().data(n).enter().append("rect").call(ht,this).attr("x",s&&u&&(m||!an(a))?$=>Math.min(s[$],u[$])+v:g+v).attr("y",f&&h&&(m||!an(c))?$=>Math.min(f[$],h[$])+_:l+_).attr("width",s&&u&&(m||!an(a))?$=>Math.max(0,Math.abs(u[$]-s[$])-v-w):y-d-g-w-v).attr("height",f&&h&&(m||!an(c))?$=>Math.max(0,Math.abs(f[$]-h[$])-_-x):b-l-p-_-x).call(X,"rx",M).call(X,"ry",S).call(Mt,this,r)).node()}}function fu(t,n){return new Xa(t,cg(sg(n)))}function Jo(t,n={}){return $a(n)||(n={...n,y:Ut,x2:V,interval:1}),new Xa(t,iu(sg(eu(n))))}function ta(t,n={}){return $a(n)||(n={...n,x:Ut,y2:V,interval:1}),new Xa(t,ou(cg(ru(n))))}function Am(t,n){n=y_(n);const{x:e,y:r,color:i,size:o}=n,a=no(t,e),c=no(t,r),s=no(t,i),f=no(t,o);let{fx:u,fy:h,x:{value:l,reduce:d,zero:p,...g},y:{value:y,reduce:b,zero:m,..._},color:{value:w,color:x,reduce:v},size:{value:M,reduce:S},mark:k}=n;if(d===void 0&&(d=b==null&&l==null&&M==null&&y!=null?"count":null),b===void 0&&(b=d==null&&y==null&&M==null&&l!=null?"count":null),S===void 0&&M==null&&v==null&&d==null&&b==null&&(l==null||mt(a))&&(y==null||mt(c))&&(S="count"),p===void 0&&(p=eo(d)?!0:void 0),m===void 0&&(m=eo(b)?!0:void 0),l==null&&y==null)throw new Error("must specify x or y");if(d!=null&&y==null)throw new Error("reducing x requires y");if(b!=null&&l==null)throw new Error("reducing y requires x");k===void 0&&(k=M!=null||S!=null?"dot":eo(d)||eo(b)||v!=null?"bar":l!=null&&y!=null?mt(a)||mt(c)||d==null&&b==null&&!Ir(a)&&!Ir(c)?"dot":"line":l!=null||y!=null?"rule":null);let $,E,T;switch(k){case"dot":T=Un,E="stroke";break;case"line":T=a&&c||d!=null||b!=null?m||b!=null||a&&Ir(a)?yr:p||d!=null||c&&Ir(c)?hi:su:a?hi:yr,E="stroke",wh(s)&&($=null);break;case"area":T=!(m||b!=null)&&(p||d!=null||c&&Ir(c))?li:Ie,E="fill",wh(s)&&($=null);break;case"rule":T=a?jn:se,E="stroke";break;case"bar":T=d!=null?mt(c)?yh(d)&&a&&mt(a)?tr:Me:Jo:b!=null?mt(a)?yh(b)&&c&&mt(c)?tr:Se:ta:v!=null||S!=null?a&&mt(a)&&c&&mt(c)?tr:a&&mt(a)?Se:c&&mt(c)?Me:fu:a&&Je(a)&&!(c&&Je(c))?Me:c&&Je(c)&&!(a&&Je(a))?Se:tr,E="fill";break;default:throw new Error(`invalid mark: ${k}`)}let L={fx:u,fy:h,x:a??void 0,y:c??void 0,[E]:s??x,z:$,r:f??void 0,tip:!0},C,A={[E]:v??void 0,r:S??void 0};if(d!=null&&b!=null)throw new Error("cannot reduce both x and y");return b!=null?(A.y=b,C=mt(a)?ai:ne):d!=null?(A.x=d,C=mt(c)?ci:ee):(v!=null||S!=null)&&(a&&c?C=mt(a)&&mt(c)?xf:mt(a)?ee:mt(c)?ne:we:a?C=mt(a)?ai:ne:c&&(C=mt(c)?ci:ee)),(C===we||C===ne)&&(L.x={value:a,...g}),(C===we||C===ee)&&(L.y={value:c,..._}),p===void 0&&(p=a&&!(C===we||C===ne)&&(T===Me||T===li||T===Jo||T===se)),m===void 0&&(m=c&&!(C===we||C===ee)&&(T===Se||T===Ie||T===ta||T===jn)),{fx:u??null,fy:h??null,x:{value:l??null,reduce:d??null,zero:!!p,...g},y:{value:y??null,reduce:b??null,zero:!!m,..._},color:{value:w??null,reduce:v??null,...x!==void 0&&{color:x}},size:{value:M??null,reduce:S??null},mark:k,markImpl:_h[T],markOptions:L,transformImpl:_h[C],transformOptions:A,colorMode:E}}function b_(t,n){const e=Am(t,n),{fx:r,fy:i,x:{zero:o},y:{zero:a},markOptions:c,transformOptions:s,colorMode:f}=e,u=gs[e.markImpl],h=gs[e.transformImpl],l=r!=null||i!=null?Hf({strokeOpacity:.1}):null,d=[o?jn([0]):null,a?se([0]):null],p=u(t,h?h(s,c):c);return f==="stroke"?pn(l,d,p):pn(l,p,d)}function Ir(t){let n,e;for(const r of t){if(r==null)continue;if(n===void 0){n=r;continue}const i=Math.sign(xt(n,r));if(i){if(e!==void 0&&i!==e)return!1;n=r,e=i}}return!0}function y_({x:t,y:n,color:e,size:r,fx:i,fy:o,mark:a}={}){return wn(t)||(t=We(t)),wn(n)||(n=We(n)),wn(e)||(e=$i(e)?{color:e}:We(e)),wn(r)||(r=We(r)),wn(i)&&({value:i}=We(i)),wn(o)&&({value:o}=We(o)),a!=null&&(a=`${a}`.toLowerCase()),{x:t,y:n,color:e,size:r,fx:i,fy:o,mark:a}}function no(t,n){const e=J(t,n.value);return e&&(e.label=Gn(n.value)),e}function We(t){return w_(t)?{reduce:t}:{value:t}}function eo(t){return/^(?:distinct|count|sum|proportion)$/i.test(t)}function yh(t){return/^(?:first|last|mode)$/i.test(t)}function w_(t){if(t==null)return!1;if(typeof t.reduceIndex=="function"||typeof t.reduce=="function"&&sn(t)||/^p\d{2}$/i.test(t))return!0;switch(`${t}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function wh(t){return t?new gi(t).size>t.length>>1:!1}const gs={dot:Un,line:su,lineX:hi,lineY:yr,areaX:li,areaY:Ie,ruleX:jn,ruleY:se,barX:Me,barY:Se,rect:fu,rectX:Jo,rectY:ta,cell:tr,bin:we,binX:ne,binY:ee,group:xf,groupX:ai,groupY:ci},_h=Object.fromEntries(Object.entries(gs).map(([t,n])=>[n,t]));function uu(t,n={}){let{x:e,x1:r,x2:i}=n;e===void 0&&r===void 0&&i===void 0&&(n={...n,x:e=V});const o={};return e!=null&&(o.x=t),r!=null&&(o.x1=t),i!=null&&(o.x2=t),En(o,n)}function lu(t,n={}){let{y:e,y1:r,y2:i}=n;e===void 0&&r===void 0&&i===void 0&&(n={...n,y:e=V});const o={};return e!=null&&(o.y=t),r!=null&&(o.y1=t),i!=null&&(o.y2=t),En(o,n)}function En(t={},n={}){const e=de(n),r=Object.entries(t).map(([i,o])=>{const a=dp(i,n);if(a==null)throw new Error(`missing channel: ${i}`);const[c,s]=Kt(a);return{key:i,input:a,output:c,setOutput:s,map:__(o)}});return{...kn(n,(i,o)=>{const a=J(i,e),c=r.map(({input:f})=>J(i,f)),s=r.map(({setOutput:f})=>f(new Array(i.length)));for(const f of o)for(const u of a?Xn(f,h=>a[h]).values():[f])r.forEach(({map:h},l)=>h.mapIndex(u,c[l],s[l]));return{data:i,facets:o}}),...Object.fromEntries(r.map(({key:i,output:o})=>[i,o]))}}function __(t){if(t==null)throw new Error("missing map");if(typeof t.mapIndex=="function")return t;if(typeof t.map=="function"&&sn(t))return v_(t);if(typeof t=="function")return Ec(hf(t));switch(`${t}`.toLowerCase()){case"cumsum":return $_;case"rank":return Ec((n,e)=>ud(n,r=>e[r]));case"quantile":return Ec((n,e)=>x_(n,r=>e[r]))}throw new Error(`invalid map: ${t}`)}function v_(t){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:t.map.bind(t)}}function x_(t,n){const e=la(t,n)-1;return ud(t,n).map(r=>r/e)}function Ec(t){return{mapIndex(n,e,r){const i=t(n,e);if(i.length!==n.length)throw new Error("map function returned a mismatched length");for(let o=0,a=n.length;o<a;++o)r[n[o]]=i[o]}}}const $_={mapIndex(t,n,e){let r=0;for(const i of t)e[i]=r+=n[i]}};function M_(t={},n){return arguments.length===1&&(n=t),uu(zi(t),n)}function S_(t={},n){return arguments.length===1&&(n=t),lu(zi(t),n)}function zi(t={}){typeof t=="number"&&(t={k:t});let{k:n,reduce:e,shift:r,anchor:i,strict:o}=t;if(i===void 0&&r!==void 0&&(i=E_(r),On(`Warning: the shift option is deprecated; please use anchor "${i}" instead.`)),!((n=Math.floor(n))>0))throw new Error(`invalid k: ${n}`);return k_(e)(n,A_(i,n),o)}function A_(t="middle",n){switch(`${t}`.toLowerCase()){case"middle":return n-1>>1;case"start":return 0;case"end":return n-1}throw new Error(`invalid anchor: ${t}`)}function E_(t){switch(`${t}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${t}`)}function k_(t="mean"){if(typeof t=="string"){if(/^p\d{2}$/i.test(t))return ro(uf(t));switch(t.toLowerCase()){case"deviation":return ro(pi);case"max":return io((n,e)=>kt(n,r=>e[r]));case"mean":return T_;case"median":return ro(ti);case"min":return io((n,e)=>Xt(n,r=>e[r]));case"mode":return io((n,e)=>fd(n,r=>e[r]));case"sum":return Em;case"variance":return ro(Fs);case"difference":return L_;case"ratio":return z_;case"first":return P_;case"last":return I_}}if(typeof t!="function")throw new Error(`invalid reduce: ${t}`);return io(hf(t))}function ro(t){return(n,e,r)=>r?{mapIndex(i,o,a){const c=f=>o[f]==null?NaN:+o[f];let s=0;for(let f=0;f<n-1;++f)isNaN(c(f))&&++s;for(let f=0,u=i.length-n+1;f<u;++f)isNaN(c(f+n-1))&&++s,a[i[f+e]]=s===0?t(Te(i,f,f+n),c):NaN,isNaN(c(f))&&--s}}:{mapIndex(i,o,a){const c=s=>o[s]==null?NaN:+o[s];for(let s=-e;s<0;++s)a[i[s+e]]=t(Te(i,0,s+n),c);for(let s=0,f=i.length-e;s<f;++s)a[i[s+e]]=t(Te(i,s,s+n),c)}}}function io(t){return(n,e,r)=>r?{mapIndex(i,o,a){let c=0;for(let s=0;s<n-1;++s)c+=Ft(o[i[s]]);for(let s=0,f=i.length-n+1;s<f;++s)c+=Ft(o[i[s+n-1]]),c===n&&(a[i[s+e]]=t(Te(i,s,s+n),o)),c-=Ft(o[i[s]])}}:{mapIndex(i,o,a){for(let c=-e;c<0;++c)a[i[c+e]]=t(Te(i,0,c+n),o);for(let c=0,s=i.length-e;c<s;++c)a[i[c+e]]=t(Te(i,c,c+n),o)}}}function Em(t,n,e){return e?{mapIndex(r,i,o){let a=0,c=0;for(let s=0;s<t-1;++s){const f=i[r[s]];f===null||isNaN(f)?++a:c+=+f}for(let s=0,f=r.length-t+1;s<f;++s){const u=i[r[s]],h=i[r[s+t-1]];h===null||isNaN(h)?++a:c+=+h,o[r[s+n]]=a===0?c:NaN,u===null||isNaN(u)?--a:c-=+u}}}:{mapIndex(r,i,o){let a=0;const c=r.length;for(let s=0,f=Math.min(c,t-n-1);s<f;++s)a+=+i[r[s]]||0;for(let s=-n,f=c-n;s<f;++s)a+=+i[r[s+t-1]]||0,o[r[s+n]]=a,a-=+i[r[s]]||0}}}function T_(t,n,e){if(e){const r=Em(t,n,e);return{mapIndex(i,o,a){r.mapIndex(i,o,a);for(let c=0,s=i.length-t+1;c<s;++c)a[i[c+n]]/=t}}}else return{mapIndex(r,i,o){let a=0,c=0;const s=r.length;for(let f=0,u=Math.min(s,t-n-1);f<u;++f){let h=i[r[f]];h!==null&&!isNaN(h=+h)&&(a+=h,++c)}for(let f=-n,u=s-n;f<u;++f){let h=i[r[f+t-1]],l=i[r[f]];h!==null&&!isNaN(h=+h)&&(a+=h,++c),o[r[f+n]]=a/c,l!==null&&!isNaN(l=+l)&&(a-=l,--c)}}}}function C_(t,n,e,r){for(let i=e+r;e<i;++e){const o=t[n[e]];if(Ft(o))return o}}function N_(t,n,e,r){for(let i=e+r-1;i>=e;--i){const o=t[n[i]];if(Ft(o))return o}}function km(t,n,e,r){for(let i=e+r;e<i;++e){let o=t[n[e]];if(o!==null&&!isNaN(o=+o))return o}}function Tm(t,n,e,r){for(let i=e+r-1;i>=e;--i){let o=t[n[i]];if(o!==null&&!isNaN(o=+o))return o}}function L_(t,n,e){return e?{mapIndex(r,i,o){for(let a=0,c=r.length-t;a<c;++a){const s=i[r[a]],f=i[r[a+t-1]];o[r[a+n]]=s===null||f===null?NaN:f-s}}}:{mapIndex(r,i,o){for(let a=-n,c=r.length-t+n+1;a<c;++a)o[r[a+n]]=Tm(i,r,a,t)-km(i,r,a,t)}}}function z_(t,n,e){return e?{mapIndex(r,i,o){for(let a=0,c=r.length-t;a<c;++a){const s=i[r[a]],f=i[r[a+t-1]];o[r[a+n]]=s===null||f===null?NaN:f/s}}}:{mapIndex(r,i,o){for(let a=-n,c=r.length-t+n+1;a<c;++a)o[r[a+n]]=Tm(i,r,a,t)/km(i,r,a,t)}}}function P_(t,n,e){return e?{mapIndex(r,i,o){for(let a=0,c=r.length-t;a<c;++a)o[r[a+n]]=i[r[a]]}}:{mapIndex(r,i,o){for(let a=-n,c=r.length-t+n+1;a<c;++a)o[r[a+n]]=C_(i,r,a,t)}}}function I_(t,n,e){return e?{mapIndex(r,i,o){for(let a=0,c=r.length-t;a<c;++a)o[r[a+n]]=i[r[a+t-1]]}}:{mapIndex(r,i,o){for(let a=-n,c=r.length-t+n+1;a<c;++a)o[r[a+n]]=N_(i,r,a,t)}}}const qn={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function R_(t,{x:n=V,y:e,k:r=qn.k,color:i=qn.color,opacity:o=qn.opacity,fill:a=i,fillOpacity:c=o,stroke:s=i,strokeOpacity:f,strokeWidth:u,...h}={}){return pn(wt(a)?null:li(t,En({x1:Ce({k:-r,...h}),x2:Ce({k:r,...h})},{x1:n,x2:n,y:e,fill:a,fillOpacity:c,...h})),wt(s)?null:hi(t,En({x:Ce(h)},{x:n,y:e,stroke:s,strokeOpacity:f,strokeWidth:u,...h})))}function B_(t,{x:n,y:e=V,k:r=qn.k,color:i=qn.color,opacity:o=qn.opacity,fill:a=i,fillOpacity:c=o,stroke:s=i,strokeOpacity:f,strokeWidth:u,...h}={}){return pn(wt(a)?null:Ie(t,En({y1:Ce({k:-r,...h}),y2:Ce({k:r,...h})},{x:n,y1:e,y2:e,fill:a,fillOpacity:c,...h})),wt(s)?null:yr(t,En({y:Ce(h)},{x:n,y:e,stroke:s,strokeOpacity:f,strokeWidth:u,...h})))}function Ce({n:t=qn.n,k:n=0,strict:e=qn.strict,anchor:r=qn.anchor}={}){return zi({k:t,reduce:i=>fa(i)+n*(pi(i)||0),strict:e,anchor:r})}const F_={ariaLabel:"tick",fill:null,stroke:"currentColor"};class Cm extends ft{constructor(n,e,r){super(n,e,r,F_),$r(this,r)}render(n,e,r,i,o){return ot("svg:g",o).call(pt,this,i,o).call(this._transform,this,e).call(a=>a.selectAll().data(n).enter().append("line").call(ht,this).attr("x1",this._x1(e,r,i)).attr("x2",this._x2(e,r,i)).attr("y1",this._y1(e,r,i)).attr("y2",this._y2(e,r,i)).call(Mt,this,r).call(Ci,this,r,o)).node()}}class Nm extends Cm{constructor(n,e={}){const{x:r,y:i,inset:o=0,insetTop:a=o,insetBottom:c=o}=e;super(n,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},e),this.insetTop=tt(a),this.insetBottom=tt(c)}_transform(n,e,{x:r}){n.call(st,e,{x:r},Nt,0)}_x1(n,{x:e}){return r=>e[r]}_x2(n,{x:e}){return r=>e[r]}_y1({y:n},{y:e},{marginTop:r}){const{insetTop:i}=this;return e&&n?o=>e[o]+i:r+i}_y2({y:n},{y:e},{height:r,marginBottom:i}){const{insetBottom:o}=this;return e&&n?a=>e[a]+n.bandwidth()-o:r-i-o}}class Lm extends Cm{constructor(n,e={}){const{x:r,y:i,inset:o=0,insetRight:a=o,insetLeft:c=o}=e;super(n,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},e),this.insetRight=tt(a),this.insetLeft=tt(c)}_transform(n,e,{y:r}){n.call(st,e,{y:r},0,Nt)}_x1({x:n},{x:e},{marginLeft:r}){const{insetLeft:i}=this;return e&&n?o=>e[o]+i:r+i}_x2({x:n},{x:e},{width:r,marginRight:i}){const{insetRight:o}=this;return e&&n?a=>e[a]+n.bandwidth()-o:r-i-o}_y1(n,{y:e}){return r=>e[r]}_y2(n,{y:e}){return r=>e[r]}}function zm(t,{x:n=V,...e}={}){return new Nm(t,{...e,x:n})}function Pm(t,{y:n=V,...e}={}){return new Lm(t,{...e,y:n})}function D_(t,{x:n=V,y:e=null,fill:r="#ccc",fillOpacity:i,stroke:o="currentColor",strokeOpacity:a,strokeWidth:c=2,sort:s,...f}={}){const u=e!=null?ci:vf;return pn(se(t,u({x1:hu,x2:du},{x:n,y:e,stroke:o,strokeOpacity:a,...f})),Me(t,u({x1:"p25",x2:"p75"},{x:n,y:e,fill:r,fillOpacity:i,...f})),zm(t,u({x:"p50"},{x:n,y:e,stroke:o,strokeOpacity:a,strokeWidth:c,sort:s,...f})),Un(t,En({x:Im},{x:n,y:e,z:e,stroke:o,strokeOpacity:a,...f})))}function O_(t,{y:n=V,x:e=null,fill:r="#ccc",fillOpacity:i,stroke:o="currentColor",strokeOpacity:a,strokeWidth:c=2,sort:s,...f}={}){const u=e!=null?ai:vf;return pn(jn(t,u({y1:hu,y2:du},{x:e,y:n,stroke:o,strokeOpacity:a,...f})),Se(t,u({y1:"p25",y2:"p75"},{x:e,y:n,fill:r,fillOpacity:i,...f})),Pm(t,u({y:"p50"},{x:e,y:n,stroke:o,strokeOpacity:a,strokeWidth:c,sort:s,...f})),Un(t,En({y:Im},{x:e,y:n,z:e,stroke:o,strokeOpacity:a,...f})))}function Im(t){const n=hu(t),e=du(t);return t.map(r=>r<n||r>e?r:NaN)}function hu(t){const n=Rm(t)*2.5-Bm(t)*1.5;return Xt(t,e=>e>=n?e:NaN)}function du(t){const n=Bm(t)*2.5-Rm(t)*1.5;return kt(t,e=>e<=n?e:NaN)}function Rm(t){return oe(t,.25)}function Bm(t){return oe(t,.75)}const q_={ariaLabel:"raster",stroke:null,pixelSize:1};function Ge(t,n){const e=+t;if(isNaN(e))throw new Error(`invalid ${n}: ${t}`);return e}function vh(t,n){const e=Math.floor(t);if(isNaN(e))throw new Error(`invalid ${n}: ${t}`);return e}class Fm extends ft{constructor(n,e,r={},i){let{width:o,height:a,x:c,y:s,x1:f=c==null?0:void 0,y1:u=s==null?0:void 0,x2:h=c==null?o:void 0,y2:l=s==null?a:void 0,pixelSize:d=i.pixelSize,blur:p=0,interpolate:g}=r;if(o!=null&&(o=vh(o,"width")),a!=null&&(a=vh(a,"height")),f!=null&&(f=Ge(f,"x1")),u!=null&&(u=Ge(u,"y1")),h!=null&&(h=Ge(h,"x2")),l!=null&&(l=Ge(l,"y2")),c==null&&(f==null||h==null))throw new Error("missing x");if(s==null&&(u==null||l==null))throw new Error("missing y");n!=null&&o!=null&&a!=null&&(c===void 0&&f!=null&&h!=null&&(c=Z_(f,h,o)),s===void 0&&u!=null&&l!=null&&(s=K_(u,l,o,a))),super(n,{x:{value:c,scale:"x",optional:!0},y:{value:s,scale:"y",optional:!0},x1:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:h==null?null:[h],scale:"x",optional:!0,filter:null},y2:{value:l==null?null:[l],scale:"y",optional:!0,filter:null},...e},r,i),this.width=o,this.height=a,this.pixelSize=Ge(d,"pixelSize"),this.blur=Ge(p,"blur"),this.interpolate=c==null||s==null?null:j_(g)}}class Dm extends Fm{constructor(n,e={}){const{imageRendering:r}=e;if(n==null){const{fill:i,fillOpacity:o}=e;_t(o)[0]!==void 0&&(e=ms("fillOpacity",e)),Gt(i)[0]!==void 0&&(e=ms("fill",e))}super(n,void 0,e,q_),this.imageRendering=bt(r,"auto")}scale(n,{color:e,...r},i){return super.scale(n,r,i)}render(n,e,r,i,o){var A;const a=e[(A=r.channels.fill)==null?void 0:A.scale]??(N=>N),{x:c,y:s}=r,{document:f}=o,[u,h,l,d]=qm(r,i,o),p=l-u,g=d-h,{pixelSize:y,width:b=Math.round(Math.abs(p)/y),height:m=Math.round(Math.abs(g)/y)}=this,_=b*m;let{fill:w,fillOpacity:x}=r,v=0;if(this.interpolate){const N=b/p,z=m/g,I=ut(c,P=>(P-u)*N,Float64Array),F=ut(s,P=>(P-h)*z,Float64Array);w&&(w=this.interpolate(n,b,m,I,F,w)),x&&(x=this.interpolate(n,b,m,I,F,x))}else this.data==null&&n&&(v=n.fi*_);const M=f.createElement("canvas");M.width=b,M.height=m;const S=M.getContext("2d"),k=S.createImageData(b,m),$=k.data;let{r:E,g:T,b:L}=cr(this.fill)??{r:0,g:0,b:0},C=(this.fillOpacity??1)*255;for(let N=0;N<_;++N){const z=N<<2;if(w){const I=a(w[N+v]);if(I==null){$[z+3]=0;continue}({r:E,g:T,b:L}=cr(I))}x&&(C=x[N+v]*255),$[z+0]=E,$[z+1]=T,$[z+2]=L,$[z+3]=C}return this.blur>0&&hb(k,this.blur),S.putImageData(k,0,0),ot("svg:g",o).call(pt,this,i,o).call(st,this,e).call(N=>N.append("image").attr("transform",`translate(${u},${h}) scale(${Math.sign(l-u)},${Math.sign(d-h)})`).attr("width",Math.abs(p)).attr("height",Math.abs(g)).attr("preserveAspectRatio","none").call(X,"image-rendering",this.imageRendering).call(ht,this).attr("xlink:href",M.toDataURL())).node()}}function Om(t,n,e){arguments.length<3&&(e=n,n=null);let{x:r,y:i,[t]:o,...a}=e;return r===void 0&&i===void 0&&l5(n)&&(r=vi,i=ii,o===void 0&&(o=a5)),[n,{...a,x:r,y:i,[t]:o}]}function Y_(){const[t,n]=Om("fill",...arguments);return new Dm(t,t==null||n.fill!==void 0||n.fillOpacity!==void 0?n:{...n,fill:V})}function qm({x1:t,y1:n,x2:e,y2:r},i,{projection:o}){const{width:a,height:c,marginTop:s,marginRight:f,marginBottom:u,marginLeft:h}=i;return[t&&o==null?t[0]:h,n&&o==null?n[0]:s,e&&o==null?e[0]:a-f,r&&o==null?r[0]:c-u]}function Ym({x1:t,y1:n,x2:e,y2:r},i,o,a){const c={};return t&&(c.x1=t),n&&(c.y1=n),e&&(c.x2=e),r&&(c.y2=r),qm(Tf(c,i),o,a)}function ms(t,n={}){const{[t]:e}=n;if(typeof e!="function")throw new Error(`invalid ${t}: not a function`);return Ht({...n,[t]:void 0},function(r,i,o,a,c,s){const{x:f,y:u}=a;if(!f)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[h,l,d,p]=Ym(o,a,c,s),g=d-h,y=p-l,{pixelSize:b}=this,{width:m=Math.round(Math.abs(g)/b),height:_=Math.round(Math.abs(y)/b)}=n,w=new Array(m*_*(i?i.length:1)),x=g/m,v=y/_;let M=0;for(const S of i??[void 0])for(let k=.5;k<_;++k)for(let $=.5;$<m;++$,++M)w[M]=e(f.invert(h+$*x),u.invert(l+k*v),S);return{data:w,facets:i,channels:{[t]:{value:w,scale:"auto"}}}})}function j_(t){if(typeof t=="function")return t;if(t==null)return bs;switch(`${t}`.toLowerCase()){case"none":return bs;case"nearest":return Xm;case"barycentric":return jm();case"random-walk":return Wm()}throw new Error(`invalid interpolate: ${t}`)}function bs(t,n,e,r,i,o){const a=new Array(n*e);for(const c of t)r[c]<0||r[c]>=n||i[c]<0||i[c]>=e||(a[Math.floor(i[c])*n+Math.floor(r[c])]=o[c]);return a}function jm({random:t=Qs(42)}={}){return(n,e,r,i,o,a)=>{const{points:c,triangles:s,hull:f}=ue.from(n,d=>i[d],d=>o[d]),u=new a.constructor(e*r).fill(NaN),h=new Uint8Array(e*r),l=U_(a,t);for(let d=0;d<s.length;d+=3){const p=s[d],g=s[d+1],y=s[d+2],b=c[2*p],m=c[2*g],_=c[2*y],w=c[2*p+1],x=c[2*g+1],v=c[2*y+1],M=Math.min(b,m,_),S=Math.max(b,m,_),k=Math.min(w,x,v),$=Math.max(w,x,v),E=(x-v)*(b-_)+(w-v)*(_-m);if(!E)continue;const T=a[n[p]],L=a[n[g]],C=a[n[y]];for(let A=Math.floor(M);A<S;++A)for(let N=Math.floor(k);N<$;++N){if(A<0||A>=e||N<0||N>=r)continue;const z=A+.5,I=N+.5,F=((x-v)*(z-_)+(I-v)*(_-m))/E;if(F<0)continue;const P=((v-w)*(z-_)+(I-v)*(b-_))/E;if(P<0)continue;const R=1-F-P;if(R<0)continue;const B=A+e*N;u[B]=l(T,F,L,P,C,R,A,N),h[B]=1}}return X_(u,h,i,o,a,e,r,f,n,l),u}}function X_(t,n,e,r,i,o,a,c,s,f){e=Float64Array.from(c,d=>e[s[d]]),r=Float64Array.from(c,d=>r[s[d]]),i=Array.from(c,d=>i[s[d]]);const u=e.length,h=Array.from({length:u},(d,p)=>G_(p,e,r));let l=0;for(let d=0;d<a;++d){const p=d+.5;for(let g=0;g<o;++g){const y=g+o*d;if(!n[y]){const b=g+.5;for(let m=0;m<u;++m){const _=(u+l+(m%2?(m+1)/2:-m/2))%u;if(h[_](b,p)){const w=W_(e.at(_-1),r.at(_-1),e[_],r[_],b,p);t[y]=f(i.at(_-1),w,i[_],1-w,i[_],0,g,d),l=_;break}}}}}}function W_(t,n,e,r,i,o){const a=e-t,c=r-n,s=a*(e-i)+c*(r-o),f=a*(i-t)+c*(o-n);return s>0&&f>0?s/(s+f):+(s>f)}function Rr(t,n,e,r){return t*r-e*n}function G_(t,n,e){const r=n.length,i=n.at(t-2),o=e.at(t-2),a=n.at(t-1),c=e.at(t-1),s=n[t],f=e[t],u=n.at(t+1-r),h=e.at(t+1-r),l=a-s,d=c-f,p=i-a,g=o-c,y=s-u,b=f-h,m=Math.hypot(l,d),_=Math.hypot(p,g),w=Math.hypot(y,b);return(x,v)=>{const M=x-a,S=v-c,k=x-s,$=v-f;return Rr(M,S,k,$)>-1e-6&&Rr(M,S,l,d)*_-Rr(M,S,p,g)*m>-1e-6&&Rr(k,$,y,b)*m-Rr(k,$,l,d)*w<=0}}function Xm(t,n,e,r,i,o){const a=new o.constructor(n*e),c=ue.from(t,u=>r[u],u=>i[u]);let s,f;for(let u=.5,h=0;u<e;++u){f=s;for(let l=.5;l<n;++l,++h)f=c.find(l,u,f),l===.5&&(s=f),a[h]=o[t[f]]}return a}function Wm({random:t=Qs(42),minDistance:n=.5,maxSteps:e=2}={}){return(r,i,o,a,c,s)=>{const f=new s.constructor(i*o),u=ue.from(r,p=>a[p],p=>c[p]);let h,l,d;for(let p=.5,g=0;p<o;++p){l=h;for(let y=.5;y<i;++y,++g){let b=y,m=p;d=l=u.find(b,m,l),y===.5&&(h=l);let _,w=0;for(;(_=Math.hypot(a[r[d]]-b,c[r[d]]-m))>n&&w<e;){const x=t(y,p,w)*2*Math.PI;b+=Math.cos(x)*_,m+=Math.sin(x)*_,d=u.find(b,m,d),++w}f[g]=s[r[d]]}}return f}}function V_(t,n,e,r,i,o){return n*t+r*e+o*i}function H_(t){return(n,e,r,i,o,a,c,s)=>{const f=t(c,s);return f<e?n:f<e+i?r:o}}function U_(t,n){return Je(t)||Ot(t)?V_:H_(n)}function Z_(t,n,e){return{transform(r){const i=r.length,o=new Float64Array(i),a=(n-t)/e,c=t+a/2;for(let s=0;s<i;++s)o[s]=s%e*a+c;return o}}}function K_(t,n,e,r){return{transform(i){const o=i.length,a=new Float64Array(o),c=(n-t)/r,s=t+c/2;for(let f=0;f<o;++f)a[f]=Math.floor(f/e)%r*c+s;return a}}}const xh={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class Gm extends Fm{constructor(n,{smooth:e=!0,value:r,...i}={}){const o=kp({},i,xh);if(r===void 0){for(const c in o)if(o[c].value!=null){if(r!==void 0)throw new Error("ambiguous contour value");r=i[c],i[c]="value"}}if(r!=null){const c={transform:s=>s.map(f=>f.value),label:Gn(r)};for(const s in o)i[s]==="value"&&(i[s]=c)}if(n==null){if(r==null)throw new Error("missing contour value");i=ms("value",{value:r,...i}),r=null}else{let{interpolate:c}=i;r===void 0&&(r=V),c===void 0&&(i.interpolate="nearest")}super(n,{value:{value:r,optional:!0}},Q_(i),xh);const a={geometry:{value:V}};for(const c in this.channels){const s=this.channels[c],{scale:f}=s;f==="x"||f==="y"||c==="value"||(a[c]=s,delete this.channels[c])}this.contourChannels=a,this.smooth=!!e}filter(n,{x:e,y:r,value:i,...o},a){return super.filter(n,o,a)}render(n,e,r,i,o){const{geometry:a}=r,c=le();return ot("svg:g",o).call(pt,this,i,o).call(st,this,e).call(s=>{s.selectAll().data(n).enter().append("path").call(ht,this).attr("d",f=>c(a[f])).call(Mt,this,r)}).node()}}function Q_({thresholds:t,interval:n,...e}){return t=fm(t,n,Ys),Ht(e,function(r,i,o,a,c,s){const[f,u,h,l]=Ym(o,a,c,s),d=h-f,p=l-u,{pixelSize:g,width:y=Math.round(Math.abs(d)/g),height:b=Math.round(Math.abs(p)/g)}=this,m=y/d,_=b/p,w=o.value.value,x=[];if(this.interpolate){const{x:$,y:E}=Ca(o,a,s),T=ut($,N=>(N-f)*m,Float64Array),L=ut(E,N=>(N-u)*_,Float64Array),C=[o.x,o.y,o.value],A=[T,L,w];for(const N of i){const z=this.filter(N,C,A);x.push(this.interpolate(z,y,b,T,L,w))}}else if(i){const $=y*b,E=i.length;for(let T=0;T<E;++T)x.push(w.slice(T*$,T*$+$))}else x.push(w);if(this.blur>0)for(const $ of x)Jh({data:$,width:y,height:b},this.blur);const v=J_(t,w,...n7(x));if(v===null)throw new Error(`unsupported thresholds: ${t}`);const{contour:M}=Ic().size([y,b]).smooth(this.smooth),S=[],k=[];for(const $ of x)k.push(rn(S.length,S.push(...ut(v,E=>M($,E)))));for(const{coordinates:$}of S)for(const E of $)for(const T of E)for(const L of T)L[0]=L[0]/m+f,L[1]=L[1]/_+u;return{data:S,facets:k,channels:$p(this.contourChannels,S)}})}function J_(t,n,e,r){if(typeof(t==null?void 0:t.range)=="function")return t.range(t.floor(e),r);if(typeof t=="function"&&(t=t(n,e,r)),typeof t!="number")return Vt(t);const i=Ne(...od(e,r,t),t);for(;i[i.length-1]>=r;)i.pop();for(;i[1]<e;)i.shift();return i}function t7(){return new Gm(...Om("value",...arguments))}function n7(t){return[Xt(t,n=>Xt(n,$h)),kt(t,n=>kt(n,$h))]}function $h(t){return isFinite(t)?t:NaN}function e7(t,n){return pu(Of,t,n)}function r7(t,n={}){return pu(ui,t,n)}function i7(t,n={}){return pu(qf,t,n)}function pu(t,n,e={}){const{x:r,y:i,maxRadius:o}=e,a=t({px:r,py:i,maxRadius:o}),c=[];r!=null&&c.push(jn(n,Mh("x",{...a,inset:-6},e))),i!=null&&c.push(se(n,Mh("y",{...a,inset:-6},e))),r!=null&&c.push(gr(n,Sh("x",{...a,dy:9,frameAnchor:"bottom",lineAnchor:"top"},e))),i!=null&&c.push(gr(n,Sh("y",{...a,dx:-9,frameAnchor:"left",textAnchor:"end"},e)));for(const s of c)s.ariaLabel=`crosshair ${s.ariaLabel}`;return pn(...c)}function Vm(t,{channels:n,...e},{facet:r,facetAnchor:i,fx:o,fy:a,[t]:c,channels:s,transform:f,initializer:u}){return{...e,facet:r,facetAnchor:i,fx:o,fy:a,[t]:c,channels:{...n,...s},transform:f,initializer:o7(t,u)}}function o7(t,n){return n==null?n:function(e,r,{x:i,y:o,px:a,py:c,...s},...f){const{channels:{x:u,y:h,...l}={},...d}=n.call(this,e,r,{...s,x:a,y:c},...f);return{channels:{...l,...u&&{px:u,...t==="x"&&{x:u}},...h&&{py:h,...t==="y"&&{y:h}}},...d}}}function Mh(t,n,e){const{color:r="currentColor",opacity:i=.2,ruleStroke:o=r,ruleStrokeOpacity:a=i,ruleStrokeWidth:c}=e;return{...Vm(t,n,e),stroke:o,strokeOpacity:a,strokeWidth:c}}function Sh(t,n,e){const{color:r="currentColor",textFill:i=r,textFillOpacity:o,textStroke:a="white",textStrokeOpacity:c,textStrokeWidth:s=5}=e;return{...Vm(t,n,a7(t,e)),fill:i,fillOpacity:o,stroke:a,strokeOpacity:c,strokeWidth:s}}function a7(t,n){return Ht(n,(e,r,i)=>{var o;return{channels:{text:{value:(o=ss(i,t))==null?void 0:o.value}}}})}const c7={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},s7={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},f7={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},u7={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},l7={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class h7 extends ft{constructor(n,e={}){const{x:r,y:i,z:o,curve:a,tension:c}=e;super(n,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:o,optional:!0}},e,c7),this.curve=Zf(a,c),$r(this,e)}render(n,e,r,i,o){const{x:a,y:c}=e,{x:s,y:f,z:u}=r,{curve:h}=this,[l,d]=Tn(this,i),p=s?m=>s[m]:Jt(l),g=f?m=>f[m]:Jt(d),y=this;function b(m){let _=-1;const w=[],x={};for(const C in r)x[C]=[];const v=[],M=[],S=[],k=[];function $(C,A){C=m[C],A=m[A],w.push(++_),v[_]=p(C),S[_]=g(C),M[_]=p(A),k[_]=g(A);for(const N in r)x[N].push(r[N][A])}const{halfedges:E,hull:T,triangles:L}=ue.from(m,p,g);for(let C=0;C<E.length;++C){const A=E[C];A>C&&$(L[C],L[A])}for(let C=0;C<T.length;++C)$(T[C],T[(C+1)%T.length]);ie(this).selectAll().data(w).enter().append("path").call(ht,y).attr("d",C=>{const A=Rn(),N=h(A);return N.lineStart(),N.point(v[C],S[C]),N.point(M[C],k[C]),N.lineEnd(),A}).call(Mt,y,x).call(Ci,y,x,o)}return ot("svg:g",o).call(pt,this,i,o).call(st,this,{x:s&&a,y:f&&c}).call(u?m=>m.selectAll().data(Xn(n,_=>u[_]).values()).enter().append("g").each(b):m=>m.datum(n).each(b)).node()}}class gu extends ft{constructor(n,e={},r,i=({z:o})=>o){const{x:o,y:a}=e;super(n,{x:{value:o,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},z:{value:i(e),optional:!0}},e,r)}render(n,e,r,i,o){const{x:a,y:c}=e,{x:s,y:f,z:u}=r,[h,l]=Tn(this,i),d=s?b=>s[b]:Jt(h),p=f?b=>f[b]:Jt(l),g=this;function y(b){const m=ue.from(b,d,p);ie(this).append("path").datum(b[0]).call(ht,g).attr("d",g._render(m,i)).call(Mt,g,r)}return ot("svg:g",o).call(pt,this,i,o).call(st,this,{x:s&&a,y:f&&c}).call(u?b=>b.selectAll().data(Xn(n,m=>u[m]).values()).enter().append("g").each(y):b=>b.datum(n).each(y)).node()}}class d7 extends gu{constructor(n,e={}){super(n,e,s7),this.fill="none"}_render(n){return n.render()}}class p7 extends gu{constructor(n,e={}){super(n,e,f7,de)}_render(n){return n.renderHull()}}class g7 extends ft{constructor(n,e={}){const{x:r,y:i,z:o}=e;super(n,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:o,optional:!0}},e,u7)}render(n,e,r,i,o){const{x:a,y:c}=e,{x:s,y:f,z:u}=r,[h,l]=Tn(this,i),d=s?b=>s[b]:Jt(h),p=f?b=>f[b]:Jt(l),g=this;function y(b){const m=ue.from(b,d,p),_=Hm(m,i);ie(this).selectAll().data(b).enter().append("path").call(ht,g).attr("d",(w,x)=>_.renderCell(x)).call(Mt,g,r)}return ot("svg:g",o).call(pt,this,i,o).call(st,this,{x:s&&a,y:f&&c}).call(u?b=>b.selectAll().data(Xn(n,m=>u[m]).values()).enter().append("g").each(y):b=>b.datum(n).each(y)).node()}}class m7 extends gu{constructor(n,e){super(n,e,l7),this.fill="none"}_render(n,e){return Hm(n,e).render()}}function Hm(t,n){const{width:e,height:r,marginTop:i,marginRight:o,marginBottom:a,marginLeft:c}=n;return t.voronoi([c,i,e-o,r-a])}function Pi(t,n,{x:e,y:r,...i}={}){return[e,r]=gn(e,r),new t(n,{...i,x:e,y:r})}function b7(t,n){return Pi(h7,t,n)}function y7(t,n){return Pi(d7,t,n)}function w7(t,n){return Pi(p7,t,n)}function _7(t,n){return Pi(g7,t,n)}function v7(t,n){return Pi(m7,t,n)}const x7={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Um extends ft{constructor(n,{x:e,y:r,z:i,weight:o,fill:a,stroke:c,...s}={}){const f=Ah(a)&&(a="currentColor",!0),u=Ah(c)&&(c="currentColor",!0);super(n,{x:{value:e,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:de({z:i,fill:a,stroke:c}),optional:!0},weight:{value:o,optional:!0}},S7({...s,fill:a,stroke:c},f,u),x7),f&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=i}filter(n){return n}render(n,e,r,i,o){const{contours:a}=r,c=le();return ot("svg:g",o).call(pt,this,i,o).call(st,this,{}).call(s=>s.selectAll().data(n).enter().append("path").call(ht,this).call(Mt,this,r).attr("d",f=>c(a[f]))).node()}}function $7(t,{x:n,y:e,...r}={}){return[n,e]=gn(n,e),new Um(t,{...r,x:n,y:e})}const M7=new Set(["x","y","z","weight"]);function S7(t,n,e){let{bandwidth:i,thresholds:o}=t;return i=i===void 0?20:+i,o=o===void 0?20:typeof(o==null?void 0:o[Symbol.iterator])=="function"?jt(o):+o,Ht(t,function(a,c,s,f,u,h){var L;const l=s.weight?jt(s.weight.value):null,d=(L=s.z)==null?void 0:L.value,{z:p}=this,[g,y]=Tn(this,u),{width:b,height:m}=u,{x:_,y:w}=Ca(s,f,h),x=Object.fromEntries(Object.entries(s).filter(([C])=>!M7.has(C)).map(([C,A])=>[C,{...A,value:[]}])),v=n&&[],M=e&&[],S=Qb().x(_?C=>_[C]:g).y(w?C=>w[C]:y).weight(l?C=>l[C]:1).size([b,m]).bandwidth(i),k=[];for(const C of c){const A=[];k.push(A);for(const N of d?Nf(C,d,p):[C]){const z=S.contours(N);A.push([N,z])}}let $=o;if(!($ instanceof hr)){let C=0;for(const A of k)for(const[,N]of A){const z=N.max;z>C&&(C=z)}$=Float64Array.from({length:o-1},(A,N)=>C*100*(N+1)/o)}const E=[],T=[];for(const C of k){const A=[];E.push(A);for(const[N,z]of C)for(const I of $){A.push(T.length),T.push(z(I/100)),v&&v.push(I),M&&M.push(I);for(const F in x)x[F].value.push(s[F].value[N[0]])}}return v&&v.push(0),M&&M.push(0),{data:a,facets:E,channels:{...x,...v&&{fill:{value:v,scale:"color"}},...M&&{stroke:{value:M,scale:"color"}},contours:{value:T}}}})}function Ah(t){return/^density$/i.test(t)}const A7={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Zm extends ft{constructor(n,e={}){const[r,i]=_t(e.r,3);super(n,{geometry:{value:e.geometry,scale:"projection"},r:{value:r,scale:"r",filter:Dn,optional:!0}},cu(e),A7),this.r=i}render(n,e,r,i,o){const{geometry:a,r:c}=r,s=le(o.projection??E7(e)),{r:f}=this;return va(f)?n=[]:f!==void 0&&s.pointRadius(f),ot("svg:g",o).call(pt,this,i,o).call(st,this,e).call(u=>{u.selectAll().data(n).enter().append("path").call(ht,this).attr("d",c?h=>s.pointRadius(c[h])(a[h]):h=>s(a[h])).call(Mt,this,r)}).node()}}function E7({x:t,y:n}){if(t||n)return t??(t=e=>e),n??(n=e=>e),No({point(e,r){this.stream.point(t(e),n(r))}})}function mu(t,{geometry:n=V,...e}={}){switch(t==null?void 0:t.type){case"FeatureCollection":t=t.features;break;case"GeometryCollection":t=t.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":t=[t];break}return new Zm(t,{geometry:n,...e})}function k7({strokeWidth:t=1.5,...n}={}){return mu({type:"Sphere"},{strokeWidth:t,...n})}function T7({strokeOpacity:t=.1,...n}={}){return mu(Ry(),{strokeOpacity:t,...n})}const Ur=.5,Zr=0;function C7(t={fill:"count"},{binWidth:n,...e}={}){const{z:r}=e;return n=n===void 0?20:tt(n),t=$f(t,e),re(t,"fill")&&(e.channels={...e.channels,fill:{value:[]}}),e.symbol===void 0&&(e.symbol="hexagon"),e.r===void 0&&!re(t,"r")&&(e.r=n/2),Ht(e,(i,o,a,c,s,f)=>{let{x:u,y:h,z:l,fill:d,stroke:p,symbol:g}=a;if(u===void 0)throw new Error("missing channel: x");if(h===void 0)throw new Error("missing channel: y");({x:u,y:h}=Ca(a,c,f)),l=l?l.value:J(i,r),d=d==null?void 0:d.value,p=p==null?void 0:p.value,g=g==null?void 0:g.value;const y=Af(t,{z:l,fill:d,stroke:p,symbol:g}),b=l&&[],m=d&&[],_=p&&[],w=g&&[],x=[],v=[],M=[];let S=-1;for(const T of t)T.initialize(i);for(const T of o){const L=[];for(const C of t)C.scope("facet",T);for(const[C,A]of ir(T,y))for(const N of N7(A,u,h,n)){L.push(++S),v.push(N.x),M.push(N.y),l&&b.push(y===l?C:l[N[0]]),d&&m.push(y===d?C:d[N[0]]),p&&_.push(y===p?C:p[N[0]]),g&&w.push(y===g?C:g[N[0]]);for(const z of t)z.reduce(N)}x.push(L)}const k=a.x.scale,$=a.y.scale,E={x:{value:v,source:c[k]?{value:ut(v,c[k].invert),scale:k}:null},y:{value:M,source:c[$]?{value:ut(M,c[$].invert),scale:$}:null},...l&&{z:{value:b}},...d&&{fill:{value:m,scale:"auto"}},...p&&{stroke:{value:_,scale:"auto"}},...g&&{symbol:{value:w,scale:"auto"}},...Object.fromEntries(t.map(({name:T,output:L})=>[T,{scale:"auto",label:L.label,radius:T==="r"?n/2:void 0,value:L.transform()}]))};return{data:i,facets:x,channels:E}})}function N7(t,n,e,r){const i=r*(1.5/yp),o=new Map;for(const a of t){let c=n[a],s=e[a];if(isNaN(c)||isNaN(s))continue;let f=Math.round(s=(s-Zr)/i),u=Math.round(c=(c-Ur)/r-(f&1)/2),h=s-f;if(Math.abs(h)*3>1){let p=c-u,g=u+(c<u?-1:1)/2,y=f+(s<f?-1:1),b=c-g,m=s-y;p*p+h*h>b*b+m*m&&(u=g+(f&1?1:-1)/2,f=y)}const l=`${u},${f}`;let d=o.get(l);d===void 0&&(o.set(l,d=[]),d.x=(u+(f&1)/2)*r+Ur,d.y=f*i+Zr),d.push(a)}return o.values()}const L7={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function z7(t){return new Km(t)}class Km extends ft{constructor({binWidth:n=20,clip:e=!0,...r}={}){super(Hr,void 0,{clip:e,...r},L7),this.binWidth=tt(n)}render(n,e,r,i,o){const{binWidth:a}=this,{marginTop:c,marginRight:s,marginBottom:f,marginLeft:u,width:h,height:l}=i,d=u-Ur,p=h-s-Ur,g=c-Zr,y=l-f-Zr,b=a/2,m=b*wp,_=m/2,w=b*2,x=m*1.5,v=Math.floor(d/w),M=Math.ceil(p/w),S=Math.floor((g+_)/x),k=Math.ceil((y-_)/x)+1,$=`m0,${Zn(-m)}l${Zn(b)},${Zn(_)}v${Zn(m)}l${Zn(-b)},${Zn(_)}`;let E=$;for(let T=S;T<k;++T)for(let L=v;L<M;++L)E+=`M${Zn(L*w+(T&1)*b)},${Zn(T*x)}${$}`;return ot("svg:g",o).datum(0).call(pt,this,i,o).call(st,this,{},Nt+Ur,Nt+Zr).call(T=>T.append("path").call(ht,this).call(Mt,this,r).attr("d",E)).node()}}function Zn(t){return Math.round(t*1e3)/1e3}const P7={ariaLabel:"image",fill:null,stroke:null};function I7(t){return/^\.*\//.test(t)}function R7(t){return/^(blob|data|file|http|https):/i.test(t)}function B7(t){return typeof t=="string"&&(I7(t)||R7(t))?[void 0,t]:[t,void 0]}class Qm extends ft{constructor(n,e={}){let{x:r,y:i,r:o,width:a,height:c,rotate:s,src:f,preserveAspectRatio:u,crossOrigin:h,frameAnchor:l,imageRendering:d}=e;o==null&&(o=void 0),o===void 0&&a===void 0&&c===void 0?a=c=16:a===void 0&&c!==void 0?a=c:c===void 0&&a!==void 0&&(c=a);const[p,g]=B7(f),[y,b]=_t(o),[m,_]=_t(a,b!==void 0?b*2:void 0),[w,x]=_t(c,b!==void 0?b*2:void 0),[v,M]=_t(s,0);super(n,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:y,scale:"r",filter:Dn,optional:!0},width:{value:m,filter:Dn,optional:!0},height:{value:w,filter:Dn,optional:!0},rotate:{value:v,optional:!0},src:{value:p,optional:!0}},cu(e),P7),this.src=g,this.width=_,this.rotate=M,this.height=x,this.r=b,this.preserveAspectRatio=bt(u,"xMidYMid"),this.crossOrigin=zt(h),this.frameAnchor=Mi(l),this.imageRendering=bt(d,"auto")}render(n,e,r,i,o){const{x:a,y:c}=e,{x:s,y:f,width:u,height:h,r:l,rotate:d,src:p}=r,{r:g,width:y,height:b,rotate:m}=this,[_,w]=Tn(this,i);return ot("svg:g",o).call(pt,this,i,o).call(st,this,{x:s&&a,y:f&&c}).call(x=>x.selectAll().data(n).enter().append("image").call(ht,this).attr("x",Eh(s,u,l,_,y,g)).attr("y",Eh(f,h,l,w,b,g)).attr("width",u?v=>u[v]:y!==void 0?y:l?v=>l[v]*2:g*2).attr("height",h?v=>h[v]:b!==void 0?b:l?v=>l[v]*2:g*2).attr("transform",d?v=>`rotate(${d[v]})`:m?`rotate(${m})`:null).attr("transform-origin",d||m?Ia`${s?v=>s[v]:_}px ${f?v=>f[v]:w}px`:null).call(X,"href",p?v=>p[v]:this.src).call(X,"preserveAspectRatio",this.preserveAspectRatio).call(X,"crossorigin",this.crossOrigin).call(X,"image-rendering",this.imageRendering).call(X,"clip-path",l?v=>`circle(${l[v]}px)`:g!==void 0?`circle(${g}px)`:null).call(Mt,this,r)).node()}}function Eh(t,n,e,r,i,o){return n&&t?a=>t[a]-n[a]/2:n?a=>r-n[a]/2:t&&i!==void 0?a=>t[a]-i/2:i!==void 0?r-i/2:e&&t?a=>t[a]-e[a]:e?a=>r-e[a]:t?a=>t[a]-o:r-o}function F7(t,{x:n,y:e,...r}={}){return r.frameAnchor===void 0&&([n,e]=gn(n,e)),new Qm(t,{...r,x:n,y:e})}function D7(t,n,e){var r=1e-8,i=n-1,o=e-1,a=0,c,s,f,u,h,l,d,p,g,y,b;if(t<=0)return 0;if(t>=1)return 1;for(n>=1&&e>=1?(f=t<.5?t:1-t,u=Math.sqrt(-2*Math.log(f)),d=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,t<.5&&(d=-d),p=(d*d-3)/6,g=2/(1/(2*n-1)+1/(2*e-1)),y=d*Math.sqrt(p+g)/g-(1/(2*e-1)-1/(2*n-1))*(p+5/6-2/(3*g)),d=n/(n+e*Math.exp(2*y))):(c=Math.log(n/(n+e)),s=Math.log(e/(n+e)),u=Math.exp(n*c)/n,h=Math.exp(e*s)/e,y=u+h,t<u/y?d=Math.pow(n*y*t,1/n):d=1-Math.pow(e*y*(1-t),1/e)),b=-ar(n)-ar(e)+ar(n+e);a<10;a++){if(d===0||d===1)return d;if(l=O7(d,n,e)-t,u=Math.exp(i*Math.log(d)+o*Math.log(1-d)+b),h=l/u,d-=u=h/(1-.5*Math.min(1,h*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+u)),d>=1&&(d=.5*(d+u+1)),Math.abs(u)<r*d&&a>0)break}return d}function O7(t,n,e){var r=t===0||t===1?0:Math.exp(ar(n+e)-ar(n)-ar(e)+n*Math.log(t)+e*Math.log(1-t));return t<0||t>1?!1:t<(n+1)/(n+e+2)?r*kh(t,n,e)/n:1-r*kh(1-t,e,n)/e}function kh(t,n,e){var r=1e-30,i=1,o=n+e,a=n+1,c=n-1,s=1,f=1-o*t/a,u,h,l,d;for(Math.abs(f)<r&&(f=r),f=1/f,d=f;i<=100&&(u=2*i,h=i*(e-i)*t/((c+u)*(n+u)),f=1+h*f,Math.abs(f)<r&&(f=r),s=1+h/s,Math.abs(s)<r&&(s=r),f=1/f,d*=f*s,h=-(n+i)*(o+i)*t/((n+u)*(a+u)),f=1+h*f,Math.abs(f)<r&&(f=r),s=1+h/s,Math.abs(s)<r&&(s=r),f=1/f,l=f*s,d*=l,!(Math.abs(l-1)<3e-7));i++);return d}function ar(t){var n=0,e=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,o,a;for(a=(o=i=t)+5.5,a-=(i+.5)*Math.log(a);n<6;n++)r+=e[n]/++o;return Math.log(2.506628274631*r/i)-a}function q7(t,n){var e=D7(2*Math.min(t,1-t),.5*n,.5);return e=Math.sqrt(n*(1-e)/e),t>.5?e:-e}const Y7={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Jm extends ft{constructor(n,e={}){const{x:r,y:i,z:o,ci:a=.95,precision:c=4}=e;if(super(n,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:de(e),optional:!0}},e,Y7),this.z=o,this.ci=+a,this.precision=+c,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${a}`);if(!(this.precision>0))throw new Error(`invalid precision: ${c}`)}render(n,e,r,i,o){const{x:a,y:c,z:s}=r,{ci:f}=this;return ot("svg:g",o).call(pt,this,i,o).call(st,this,e).call(u=>u.selectAll().data(s?Nf(n,s,this.z):[n]).enter().call(h=>h.append("path").attr("fill","none").call(ht,this).call(Vo,this,{...r,fill:null,fillOpacity:null}).attr("d",l=>this._renderLine(l,a,c)).call(f&&!dr(this.fill)?l=>l.select(j7).attr("stroke","none").call(ht,this).call(Vo,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,a,c)):()=>{}))).node()}}function j7(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Kr.svg,"path"),this)}class X7 extends Jm{constructor(n,e){super(n,e)}_renderBand(n,e,r){const{ci:i,precision:o}=this,[a,c]=Et(n,u=>r[u]),s=na(n,r,e),f=t2(n,r,e,(1-i)/2,s);return Bs().y(u=>u).x0(u=>f(u,-1)).x1(u=>f(u,1))(rn(a,c-o/2,o).concat(c))}_renderLine(n,e,r){const[i,o]=Et(n,c=>r[c]),a=na(n,r,e);return`M${a(i)},${i}L${a(o)},${o}`}}class W7 extends Jm{constructor(n,e){super(n,e)}_renderBand(n,e,r){const{ci:i,precision:o}=this,[a,c]=Et(n,u=>e[u]),s=na(n,e,r),f=t2(n,e,r,(1-i)/2,s);return Bs().x(u=>u).y0(u=>f(u,-1)).y1(u=>f(u,1))(rn(a,c-o/2,o).concat(c))}_renderLine(n,e,r){const[i,o]=Et(n,c=>e[c]),a=na(n,e,r);return`M${i},${a(i)}L${o},${a(o)}`}}function G7(t,{y:n=Ut,x:e=V,stroke:r,fill:i=wt(r)?"currentColor":r,...o}={}){return new X7(t,Qf({...o,x:e,y:n,fill:i,stroke:r}))}function V7(t,{x:n=Ut,y:e=V,stroke:r,fill:i=wt(r)?"currentColor":r,...o}={}){return new W7(t,Kf({...o,x:n,y:e,fill:i,stroke:r}))}function na(t,n,e){let r=0,i=0,o=0,a=0;for(const u of t){const h=n[u],l=e[u];r+=h,i+=l,o+=h*l,a+=h*h}const c=t.length,s=(c*o-r*i)/(c*a-r*r),f=(i-s*r)/c;return u=>s*u+f}function t2(t,n,e,r,i){const o=Sn(t,u=>n[u])/t.length;let a=0,c=0;for(const u of t)a+=(n[u]-o)**2,c+=(e[u]-i(n[u]))**2;const s=Math.sqrt(c/(t.length-2)),f=q7(r,t.length-2);return(u,h)=>{const l=i(u),d=s*Math.sqrt(1/t.length+(u-o)**2/a);return l+h*f*d}}function ys({path:t=V,delimiter:n,frameAnchor:e,treeLayout:r=Io,treeSort:i,treeSeparation:o,treeAnchor:a,treeFilter:c,...s}={}){a=bu(a),i=e2(i),c!=null&&(c=_s(c)),e===void 0&&(e=a.frameAnchor);const f=r2(n),u=u2(s,_s),[h,l]=Kt(),[d,p]=Kt();return{x:h,y:d,frameAnchor:e,...kn(s,(g,y)=>{const b=f(J(g,t)),m=l([]),_=p([]);let w=-1;const x=[],v=[],M=c0().path(k=>b[k]),S=r();S.nodeSize&&S.nodeSize([1,1]),S.separation&&o!==void 0&&S.separation(o??ff);for(const k of u)k[ea]=k[s2]([]);for(const k of y){const $=[],E=M(k.filter(T=>b[T]!=null)).each(T=>T.data=g[T.data]);i!=null&&E.sort(i),S(E);for(const T of E.descendants())if(!(c!=null&&!c(T))){$.push(++w),x[w]=T.data,a.position(T,w,m,_);for(const L of u)L[ea][w]=L[f2](T)}v.push($)}return{data:x,facets:v}}),...Object.fromEntries(u)}}function n2({path:t=V,delimiter:n,curve:e="bump-x",stroke:r="#555",strokeWidth:i=1.5,strokeOpacity:o=.5,treeLayout:a=Io,treeSort:c,treeSeparation:s,treeAnchor:f,treeFilter:u,...h}={}){f=bu(f),c=e2(c),u!=null&&(u=Ch(u)),h={curve:e,stroke:r,strokeWidth:i,strokeOpacity:o,...h};const l=r2(n),d=u2(h,Ch),[p,g]=Kt(),[y,b]=Kt(),[m,_]=Kt(),[w,x]=Kt();return{x1:p,x2:y,y1:m,y2:w,...kn(h,(v,M)=>{const S=l(J(v,t)),k=g([]),$=b([]),E=_([]),T=x([]);let L=-1;const C=[],A=[],N=c0().path(I=>S[I]),z=a();z.nodeSize&&z.nodeSize([1,1]),z.separation&&s!==void 0&&z.separation(s??ff);for(const I of d)I[ea]=I[s2]([]);for(const I of M){const F=[],P=N(I.filter(R=>S[R]!=null)).each(R=>R.data=v[R.data]);c!=null&&P.sort(c),z(P);for(const{source:R,target:B}of P.links())if(!(u!=null&&!u(B,R))){F.push(++L),C[L]=B.data,f.position(R,L,k,E),f.position(B,L,$,T);for(const D of d)D[ea][L]=D[f2](B,R)}A.push(F)}return{data:C,facets:A}}),...Object.fromEntries(d)}}function bu(t="left"){switch(`${t}`.trim().toLowerCase()){case"left":return H7;case"right":return U7}throw new Error(`invalid tree anchor: ${t}`)}const H7={frameAnchor:"left",dx:6,position({x:t,y:n},e,r,i){r[e]=n,i[e]=-t}},U7={frameAnchor:"right",dx:-6,position({x:t,y:n},e,r,i){r[e]=-n,i[e]=-t}};function e2(t){return t==null||typeof t=="function"?t:`${t}`.trim().toLowerCase().startsWith("node:")?Th(_s(t)):Th(Z7(t))}function Th(t){return(n,e)=>cn(t(n),t(e))}function Z7(t){return n=>{var e;return(e=n.data)==null?void 0:e[t]}}function r2(t="/"){if(t=`${t}`,t==="/")return e=>e;if(t.length!==1)throw new Error("delimiter must be exactly one character");const n=t.charCodeAt(0);return e=>e.map(r=>K7(r,n))}const ws=92,i2=47;function K7(t,n){if(n===ws)throw new Error("delimiter cannot be backslash");let e=!1;for(let r=0,i=t.length;r<i;++r){switch(t.charCodeAt(r)){case ws:if(!e){e=!0;continue}break;case n:e?(t=t.slice(0,r-1)+t.slice(r),--r,--i):t=t.slice(0,r)+"/"+t.slice(r+1);break;case i2:e?(t=t.slice(0,r)+"\\\\"+t.slice(r),r+=2,i+=2):(t=t.slice(0,r)+"\\"+t.slice(r),++r,++i);break}e=!1}return t}function Q7(t){let n=!1;for(let e=0,r=t.length;e<r;++e){switch(t.charCodeAt(e)){case ws:if(!n){n=!0;continue}case i2:n&&(t=t.slice(0,e-1)+t.slice(e),--e,--r);break}n=!1}return t}function o2(t){return sn(t)&&typeof t.node=="function"}function J7(t){return sn(t)&&typeof t.link=="function"}function _s(t){if(o2(t))return t.node;if(t=`${t}`.trim().toLowerCase(),!!t.startsWith("node:")){switch(t){case"node:name":return xs;case"node:path":return vs;case"node:internal":return a2;case"node:external":return c2;case"node:depth":return $s;case"node:height":return Ms}throw new Error(`invalid node value: ${t}`)}}function Ch(t){if(o2(t))return t.node;if(J7(t))return t.link;if(t=`${t}`.trim().toLowerCase(),!(!t.startsWith("node:")&&!t.startsWith("parent:"))){switch(t){case"parent:name":return oo(xs);case"parent:path":return oo(vs);case"parent:depth":return oo($s);case"parent:height":return oo(Ms);case"node:name":return xs;case"node:path":return vs;case"node:internal":return a2;case"node:external":return c2;case"node:depth":return $s;case"node:height":return Ms}throw new Error(`invalid link value: ${t}`)}}function vs(t){return t.id}function xs(t){return tv(t.id)}function $s(t){return t.depth}function Ms(t){return t.height}function a2(t){return!!t.children}function c2(t){return!t.children}function oo(t){return(n,e)=>e==null?void 0:t(e)}function tv(t){let n=t.length;for(;--n>0&&!nv(t,n););return Q7(t.slice(n+1))}function nv(t,n){if(t[n]==="/"){let e=0;for(;n>0&&t[--n]==="\\";)++e;if(!(e&1))return!0}return!1}const s2=2,f2=3,ea=4;function u2(t,n){const e=[];for(const r in t){const i=t[r],o=n(i);o!==void 0&&e.push([r,...Kt(i),o])}return e}function l2(t,{fill:n,stroke:e,strokeWidth:r,strokeOpacity:i,strokeLinejoin:o,strokeLinecap:a,strokeMiterlimit:c,strokeDasharray:s,strokeDashoffset:f,marker:u,markerStart:h=u,markerEnd:l=u,dot:d=wt(h)&&wt(l),text:p="node:name",textStroke:g="white",title:y="node:path",dx:b,dy:m,textAnchor:_,treeLayout:w=Io,textLayout:x=w===Io||w===i0?"mirrored":"normal",tip:v,...M}={}){if(b===void 0&&(b=bu(M.treeAnchor).dx),_!==void 0)throw new Error("textAnchor is not a configurable tree option");x=tn(x,"textLayout",["mirrored","normal"]);function S(k){return gr(t,ys({treeLayout:w,text:p,fill:n===void 0?"currentColor":n,stroke:g,dx:b,dy:m,title:y,...k,...M}))}return pn(vm(t,n2({treeLayout:w,markerStart:h,markerEnd:l,stroke:e!==void 0?e:n===void 0?"node:internal":n,strokeWidth:r,strokeOpacity:i,strokeLinejoin:o,strokeLinecap:a,strokeMiterlimit:c,strokeDasharray:s,strokeDashoffset:f,...M})),d?Un(t,ys({treeLayout:w,fill:n===void 0?"node:internal":n,title:y,tip:v,...M})):null,p!=null?x==="mirrored"?[S({textAnchor:"start",treeFilter:"node:external"}),S({textAnchor:"end",treeFilter:"node:internal",dx:-b})]:S():null)}function ev(t,n){return l2(t,{...n,treeLayout:i0})}function rv({geometry:t=V,...n}={}){return Ht({...n,x:null,y:null},(e,r,i,o,a,{projection:c})=>{const s=J(e,t),f=s.length,u=new Float64Array(f),h=new Float64Array(f),l=le(c);for(let d=0;d<f;++d)[u[d],h[d]]=l.centroid(s[d]);return{data:e,facets:r,channels:{x:{value:u,scale:c==null?"x":null,source:null},y:{value:h,scale:c==null?"y":null,source:null}}}})}function iv({geometry:t=V,...n}={}){let e;return{...n,x:{transform:r=>Float64Array.from(e=J(J(r,t),My),([i])=>i)},y:{transform:()=>Float64Array.from(e,([,r])=>r)}}}function ov(t,n,e,r,i){for(var o=i+1;r<=i;){var a=r+i>>>1,c=t[a],s=e!==void 0?e(c,n):c-n;s>=0?(o=a,i=a-1):r=a+1}return o}function av(t,n,e,r,i){for(var o=i+1;r<=i;){var a=r+i>>>1,c=t[a],s=e!==void 0?e(c,n):c-n;s>0?(o=a,i=a-1):r=a+1}return o}function cv(t,n,e,r,i){for(var o=r-1;r<=i;){var a=r+i>>>1,c=t[a],s=e!==void 0?e(c,n):c-n;s<0?(o=a,r=a+1):i=a-1}return o}function sv(t,n,e,r,i){for(var o=r-1;r<=i;){var a=r+i>>>1,c=t[a],s=e!==void 0?e(c,n):c-n;s<=0?(o=a,r=a+1):i=a-1}return o}function fv(t,n,e,r,i){for(;r<=i;){var o=r+i>>>1,a=t[o],c=e!==void 0?e(a,n):a-n;if(c===0)return o;c<=0?r=o+1:i=o-1}return-1}function Br(t,n,e,r,i,o){return typeof e=="function"?o(t,n,e,r===void 0?0:r|0,i===void 0?t.length-1:i|0):o(t,n,void 0,e===void 0?0:e|0,r===void 0?t.length-1:r|0)}var uv={ge:function(t,n,e,r,i){return Br(t,n,e,r,i,ov)},gt:function(t,n,e,r,i){return Br(t,n,e,r,i,av)},lt:function(t,n,e,r,i){return Br(t,n,e,r,i,cv)},le:function(t,n,e,r,i){return Br(t,n,e,r,i,sv)},eq:function(t,n,e,r,i){return Br(t,n,e,r,i,fv)}},ra=uv,nr=0,ye=1,so=2,lv=dv;function yu(t,n,e,r,i){this.mid=t,this.left=n,this.right=e,this.leftPoints=r,this.rightPoints=i,this.count=(n?n.count:0)+(e?e.count:0)+r.length}var Ii=yu.prototype;function kc(t,n){t.mid=n.mid,t.left=n.left,t.right=n.right,t.leftPoints=n.leftPoints,t.rightPoints=n.rightPoints,t.count=n.count}function h2(t,n){var e=wr(n);t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function Nh(t,n){var e=t.intervals([]);e.push(n),h2(t,e)}function Lh(t,n){var e=t.intervals([]),r=e.indexOf(n);return r<0?nr:(e.splice(r,1),h2(t,e),ye)}Ii.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t};Ii.insert=function(t){var n=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(n+1)?Nh(this,t):this.left.insert(t):this.left=wr([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(n+1)?Nh(this,t):this.right.insert(t):this.right=wr([t]);else{var e=ra.ge(this.leftPoints,t,wu),r=ra.ge(this.rightPoints,t,_u);this.leftPoints.splice(e,0,t),this.rightPoints.splice(r,0,t)}};Ii.remove=function(t){var n=this.count-this.leftPoints;if(t[1]<this.mid){if(!this.left)return nr;var e=this.right?this.right.count:0;if(4*e>3*(n-1))return Lh(this,t);var r=this.left.remove(t);return r===so?(this.left=null,this.count-=1,ye):(r===ye&&(this.count-=1),r)}else if(t[0]>this.mid){if(!this.right)return nr;var i=this.left?this.left.count:0;if(4*i>3*(n-1))return Lh(this,t);var r=this.right.remove(t);return r===so?(this.right=null,this.count-=1,ye):(r===ye&&(this.count-=1),r)}else{if(this.count===1)return this.leftPoints[0]===t?so:nr;if(this.leftPoints.length===1&&this.leftPoints[0]===t){if(this.left&&this.right){for(var o=this,a=this.left;a.right;)o=a,a=a.right;if(o===this)a.right=this.right;else{var c=this.left,r=this.right;o.count-=a.count,o.right=a.left,a.left=c,a.right=r}kc(this,a),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?kc(this,this.left):kc(this,this.right);return ye}for(var c=ra.ge(this.leftPoints,t,wu);c<this.leftPoints.length&&this.leftPoints[c][0]===t[0];++c)if(this.leftPoints[c]===t){this.count-=1,this.leftPoints.splice(c,1);for(var r=ra.ge(this.rightPoints,t,_u);r<this.rightPoints.length&&this.rightPoints[r][1]===t[1];++r)if(this.rightPoints[r]===t)return this.rightPoints.splice(r,1),ye}return nr}};function d2(t,n,e){for(var r=0;r<t.length&&t[r][0]<=n;++r){var i=e(t[r]);if(i)return i}}function p2(t,n,e){for(var r=t.length-1;r>=0&&t[r][1]>=n;--r){var i=e(t[r]);if(i)return i}}function g2(t,n){for(var e=0;e<t.length;++e){var r=n(t[e]);if(r)return r}}Ii.queryPoint=function(t,n){if(t<this.mid){if(this.left){var e=this.left.queryPoint(t,n);if(e)return e}return d2(this.leftPoints,t,n)}else if(t>this.mid){if(this.right){var e=this.right.queryPoint(t,n);if(e)return e}return p2(this.rightPoints,t,n)}else return g2(this.leftPoints,n)};Ii.queryInterval=function(t,n,e){if(t<this.mid&&this.left){var r=this.left.queryInterval(t,n,e);if(r)return r}if(n>this.mid&&this.right){var r=this.right.queryInterval(t,n,e);if(r)return r}return n<this.mid?d2(this.leftPoints,n,e):t>this.mid?p2(this.rightPoints,t,e):g2(this.leftPoints,e)};function hv(t,n){return t-n}function wu(t,n){var e=t[0]-n[0];return e||t[1]-n[1]}function _u(t,n){var e=t[1]-n[1];return e||t[0]-n[0]}function wr(t){if(t.length===0)return null;for(var n=[],e=0;e<t.length;++e)n.push(t[e][0],t[e][1]);n.sort(hv);for(var r=n[n.length>>1],i=[],o=[],a=[],e=0;e<t.length;++e){var c=t[e];c[1]<r?i.push(c):r<c[0]?o.push(c):a.push(c)}var s=a,f=a.slice();return s.sort(wu),f.sort(_u),new yu(r,wr(i),wr(o),s,f)}function Ss(t){this.root=t}var kr=Ss.prototype;kr.insert=function(t){this.root?this.root.insert(t):this.root=new yu(t[0],null,null,[t],[t])};kr.remove=function(t){if(this.root){var n=this.root.remove(t);return n===so&&(this.root=null),n!==nr}return!1};kr.queryPoint=function(t,n){if(this.root)return this.root.queryPoint(t,n)};kr.queryInterval=function(t,n,e){if(t<=n&&this.root)return this.root.queryInterval(t,n,e)};Object.defineProperty(kr,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(kr,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function dv(t){return!t||t.length===0?new Ss(null):new Ss(wr(t))}const pv=lb(lv),gv=({marginLeft:t})=>[1,t],mv=({width:t,marginRight:n})=>[-1,t-n],bv=({width:t,marginLeft:n,marginRight:e})=>[0,(n+t-e)/2],yv=({marginTop:t})=>[1,t],wv=({height:t,marginBottom:n})=>[-1,t-n],_v=({height:t,marginTop:n,marginBottom:e})=>[0,(n+t-e)/2];function m2(t){return typeof t=="string"?{anchor:t}:t}function vv(t={},n={}){arguments.length===1&&([t,n]=b2(t));let{anchor:e="left",padding:r=1,r:i=n.r}=m2(t);switch(`${e}`.toLowerCase()){case"left":e=gv;break;case"right":e=mv;break;case"middle":e=bv;break;default:throw new Error(`unknown dodge anchor: ${e}`)}return y2("x","y",e,tt(r),i,n)}function xv(t={},n={}){arguments.length===1&&([t,n]=b2(t));let{anchor:e="bottom",padding:r=1,r:i=n.r}=m2(t);switch(`${e}`.toLowerCase()){case"top":e=yv;break;case"bottom":e=wv;break;case"middle":e=_v;break;default:throw new Error(`unknown dodge anchor: ${e}`)}return y2("y","x",e,tt(r),i,n)}function b2(t){const{anchor:n,padding:e,...r}=t,{r:i}=r;return[{anchor:n,padding:e,r:i},r]}function y2(t,n,e,r,i,o){if(i!=null&&typeof i!="number"){let{channels:a,sort:c,reverse:s}=o;a=pf(a),(a==null?void 0:a.r)===void 0&&(o={...o,channels:{...a,r:{value:i,scale:"r"}}}),c===void 0&&s===void 0&&(o.sort={channel:"-r"})}return Ht(o,function(a,c,s,f,u,h){let{[n]:l,r:d}=s;if(!s[n])throw new Error(`missing channel: ${n}`);({[n]:l}=Ca(s,f,h));const p=d?void 0:i!==void 0?tt(i):this.r!==void 0?this.r:3;d&&(d=J(d.value,f[d.scale]||V,Float64Array));let[g,y]=e(u);const b=g?Mv:$v,m=new Float64Array(l.length),_=d?w=>d[w]:()=>p;for(let w of c){const x=pv();w=w.filter(d?M=>jo(l[M])&&Dn(d[M]):M=>jo(l[M]));const v=new Float64Array(2*w.length+2);for(const M of w){const S=_(M),k=g?S+r:0,$=l[M]-S,E=l[M]+S;let T=2;x.queryInterval($-r,E+r,([,,C])=>{const A=m[C]-k,N=l[M]-l[C],z=r+(d?d[M]+d[C]:2*p),I=Math.sqrt(z*z-N*N);v[T++]=A-I,v[T++]=A+I});let L=v.slice(0,T);g&&(L=L.filter(C=>C>=0));t:for(const C of L.sort(b)){for(let A=0;A<T;A+=2)if(v[A]+1e-6<C&&C<v[A+1]-1e-6)continue t;m[M]=C+k;break}x.insert([$,E,M])}}g||(g=1);for(const w of c)for(const x of w)m[x]=m[x]*g+y;return{data:a,facets:c,channels:{[t]:{value:m,source:null},[n]:{value:l,source:s[n]},...d&&{r:{value:d,source:s.r}}}}})}function $v(t,n){return Math.abs(t)-Math.abs(n)}function Mv(t,n){return t-n}function Sv(t,n){return arguments.length===1&&({basis:t,...n}=t),uu(vu(t),n)}function Av(t,n){return arguments.length===1&&({basis:t,...n}=t),lu(vu(t),n)}function vu(t){if(t===void 0)return zh;if(typeof t=="function")return Wa(hf(t));if(/^p\d{2}$/i.test(t))return Tr(uf(t));switch(`${t}`.toLowerCase()){case"deviation":return Tv;case"first":return zh;case"last":return kv;case"max":return Cv;case"mean":return Nv;case"median":return Lv;case"min":return zv;case"sum":return Pv;case"extent":return Ev}throw new Error(`invalid basis: ${t}`)}function Wa(t){return{mapIndex(n,e,r){const i=+t(n,e);for(const o of n)r[o]=e[o]===null?NaN:e[o]/i}}}function Tr(t){return Wa((n,e)=>t(n,r=>e[r]))}const Ev={mapIndex(t,n,e){const[r,i]=Et(t,a=>n[a]),o=i-r;for(const a of t)e[a]=n[a]===null?NaN:(n[a]-r)/o}},zh=Wa((t,n)=>{for(let e=0;e<t.length;++e){const r=n[t[e]];if(Ft(r))return r}}),kv=Wa((t,n)=>{for(let e=t.length-1;e>=0;--e){const r=n[t[e]];if(Ft(r))return r}}),Tv={mapIndex(t,n,e){const r=fa(t,o=>n[o]),i=pi(t,o=>n[o]);for(const o of t)e[o]=n[o]===null?NaN:i?(n[o]-r)/i:0}},Cv=Tr(kt),Nv=Tr(fa),Lv=Tr(ti),zv=Tr(Xt),Pv=Tr(Sn);function Iv(t,n={}){if(typeof t=="string")switch(t.toLowerCase()){case"first":return w2(n);case"last":return _2(n)}if(typeof t=="function")return fe(null,t,n);let e,r;for(e in t){if(r!==void 0)throw new Error("ambiguous selector; multiple inputs");r=Rv(t[e])}if(r===void 0)throw new Error(`invalid selector: ${t}`);return fe(e,r,n)}function Rv(t){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"min":return xu;case"max":return $u}throw new Error(`unknown selector: ${t}`)}function w2(t){return fe(null,qv,t)}function _2(t){return fe(null,Yv,t)}function Bv(t){return fe("x",xu,t)}function Fv(t){return fe("y",xu,t)}function Dv(t){return fe("x",$u,t)}function Ov(t){return fe("y",$u,t)}function*qv(t){yield t[0]}function*Yv(t){yield t[t.length-1]}function*xu(t,n){yield Cb(t,e=>n[e])}function*$u(t,n){yield js(t,e=>n[e])}function fe(t,n,e){if(t!=null){if(e[t]==null)throw new Error(`missing channel: ${t}`);t=e[t]}const r=de(e);return kn(e,(i,o)=>{const a=J(i,r),c=J(i,t),s=[];for(const f of o){const u=[];for(const h of a?Xn(f,l=>a[l]).values():[f])for(const l of n(h,c))u.push(l);s.push(u)}return{data:i,facets:s}})}const Tc=Object.freeze(Object.defineProperty({__proto__:null,Area:Oa,Arrow:xm,BarX:Mm,BarY:Sm,Cell:qa,Contour:Gm,Density:Um,Dot:Ya,Frame:em,Geo:Zm,Hexgrid:Km,Image:Qm,Line:ja,Link:_m,Mark:ft,Raster:Dm,Rect:Xa,RuleX:pg,RuleY:gg,Text:Ra,TickX:Nm,TickY:Lm,Tip:rm,Vector:Ba,area:J4,areaX:li,areaY:Ie,arrow:o_,auto:b_,autoSpec:Am,axisFx:Fg,axisFy:Bg,axisX:Wf,axisY:Xf,barX:Me,barY:Se,bin:we,binX:ne,binY:ee,bollinger:Ce,bollingerX:R_,bollingerY:B_,boxX:D_,boxY:O_,cell:tr,cellX:c_,cellY:s_,centroid:rv,circle:h_,cluster:ev,column:Kt,contour:t7,crosshair:e7,crosshairX:r7,crosshairY:i7,delaunayLink:b7,delaunayMesh:y7,density:$7,dodgeX:vv,dodgeY:xv,dot:Un,dotX:u_,dotY:l_,filter:M5,formatIsoDate:Ep,formatMonth:X5,formatWeekday:W5,frame:Hf,geo:mu,geoCentroid:iv,graticule:T7,gridFx:Xg,gridFy:Yg,gridX:jg,gridY:qg,group:xf,groupX:ai,groupY:ci,groupZ:vf,hexagon:d_,hexbin:C7,hexgrid:z7,hull:w7,identity:V,image:F7,indexOf:Ut,initializer:Ht,interpolateNearest:Xm,interpolateNone:bs,interpolatorBarycentric:jm,interpolatorRandomWalk:Wm,legend:G8,line:su,lineX:hi,lineY:yr,linearRegressionX:G7,linearRegressionY:V7,link:vm,map:En,mapX:uu,mapY:lu,marks:pn,normalize:vu,normalizeX:Sv,normalizeY:Av,plot:om,pointer:Of,pointerX:ui,pointerY:qf,raster:Y_,rect:fu,rectX:Jo,rectY:ta,reverse:S5,ruleX:jn,ruleY:se,scale:U3,select:Iv,selectFirst:w2,selectLast:_2,selectMaxX:Dv,selectMaxY:Ov,selectMinX:Bv,selectMinY:Fv,shuffle:A5,sort:_p,sphere:k7,spike:z8,stackX:pm,stackX1:B4,stackX2:F4,stackY:gm,stackY1:D4,stackY2:O4,text:gr,textX:wg,textY:_g,tickX:zm,tickY:Pm,tip:im,transform:kn,tree:l2,treeLink:n2,treeNode:ys,valueof:J,vector:Cg,vectorX:Ng,vectorY:Lg,voronoi:_7,voronoiMesh:v7,window:zi,windowX:M_,windowY:S_},Symbol.toStringTag,{value:"Module"}));class jv{constructor(){this.documentElement=new Cc(this,"html")}createElementNS(n,e){return new Cc(this,e)}createElement(n){return new Cc(this,n)}createTextNode(n){return new Xv(this,n)}querySelector(){return null}querySelectorAll(){return[]}}const ia=class ia{setProperty(){}removeProperty(){}};Eu(ia,"empty",new ia);let As=ia;class Cc{constructor(n,e){this.ownerDocument=n,this.tagName=e,this.attributes={},this.children=[],this.parentNode=null}setAttribute(n,e){this.attributes[n]=String(e)}setAttributeNS(n,e,r){this.setAttribute(e,r)}getAttribute(n){return this.attributes[n]}getAttributeNS(n){return this.getAttribute(n)}hasAttribute(n){return n in this.attributes}hasAttributeNS(n){return this.hasAttribute(n)}removeAttribute(n){delete this.attributes[n]}removeAttributeNS(n,e){this.removeAttribute(e)}addEventListener(){}removeEventListener(){}dispatchEvent(){}append(...n){for(const e of n)this.appendChild(e!=null&&e.ownerDocument?e:this.ownerDocument.createTextNode(e))}appendChild(n){return this.children.push(n),n.parentNode=this,n}insertBefore(n,e){if(e==null)this.children.push(n);else{const r=this.children.indexOf(e);if(r<0)throw new Error("insertBefore reference node not found");this.children.splice(r,0,n)}return n.parentNode=this,n}querySelector(){return null}querySelectorAll(){return[]}set textContent(n){this.children=[this.ownerDocument.createTextNode(n)]}set style(n){this.attributes.style=n}get style(){return As.empty}toHyperScript(){return He(this.tagName,this.attributes,this.children.map(n=>n.toHyperScript()))}}class Xv{constructor(n,e){this.ownerDocument=n,this.nodeValue=String(e)}toHyperScript(){return this.nodeValue}}function v2(t){if(t.nodeType===3)return t.nodeValue;const n={};for(const r of t.getAttributeNames())n[r]=t.getAttribute(r);const e=[];for(let r=t.firstChild;r;r=r.nextSibling)e.push(v2(r));return He(t.tagName,n,e)}const Wv={props:{options:Object,mark:Object,defer:Boolean,method:{type:String,default:"plot"}},render(){const{method:t}=this,n={...t==="plot"&&{marks:this.mark==null?[]:[this.mark],width:688},...this.options,className:"plot"};if(this.defer){const e=a=>{i();function c(){r(a),a.append(Tc[t](n))}const s=a.getBoundingClientRect();s.bottom>0&&s.top<window.innerHeight?c():(this._observer=new IntersectionObserver(([f])=>{f.isIntersecting&&c()},{rootMargin:"100px"}),this._observer.observe(a),typeof requestIdleCallback=="function"&&(this._idling=requestIdleCallback(c)))},r=a=>{for(;a.lastChild;)a.lastChild.remove();i()},i=()=>{this._observer!==void 0&&(this._observer.disconnect(),this._observer=void 0),this._idling!==void 0&&(cancelIdleCallback(this._idling),this._idling=void 0)},{height:o=400}=this.options;return Pu(He("span",t==="plot"?[He("div",{style:{maxWidth:"100%",width:"688px",aspectRatio:`688 / ${o}`}})]:[]),[[{mounted:e,updated:e,unmounted:r}]])}if(typeof document<"u"){const e=Tc[t](n),r=i=>{for(;i.lastChild;)i.lastChild.remove();i.append(e)};return Pu(He("span",[v2(e)]),[[{mounted:r,updated:r}]])}return He("span",[Tc[t]({...n,document:new jv}).toHyperScript()])}},Gv={components:{PlotFigure:Wv},props:{activityFile:ob},data(){return{}},watch:{activityFile:{handler(){}}},computed:{options:function(){var n,e;console.log("options ",(n=this.activityFile)==null?void 0:n.records);const t=((e=this.activityFile)==null?void 0:e.records)||[];return{y:{grid:!0},color:{interpolate:mi(ua.gamma(2.2),["green","green","yellow","red","red"]),domain:[-1,1]},marks:[jn(t,ui({x:r=>new Date(r.timestamp),py:"altitude",stroke:"red"})),Un(t,ui({x:r=>new Date(r.timestamp),y:"altitude",stroke:"red"})),Ie(t,{x:r=>new Date(r.timestamp),y:"altitude",z:null}),yr(t,En({stroke:zi({k:2,reduce:"difference"})},{x:r=>new Date(r.timestamp),y:"altitude",z:null,stroke:"altitude",strokeWidth:5,strokeOpacity:.7,tip:"x"}))]}}},methods:{getOptions(){}},mounted(){console.log("mounted")}};const Vv=fb("div",null,"aaaaa",-1);function Hv(t,n,e,r,i,o){const a=cb("PlotFigure");return Zh(),Kh(sb,null,[Vv,Qh(a,{options:o.options},null,8,["options"])],64)}const Uv=ab(Gv,[["render",Hv]]),Jv=ub({__name:"AltitudeGraph",setup(t){return(n,e)=>(Zh(),Kh("main",null,[Qh(Uv)]))}});export{Jv as default};
