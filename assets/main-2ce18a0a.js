var kk=Object.defineProperty;var Pk=(e,t,n)=>t in e?kk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var gt=(e,t,n)=>(Pk(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function K_(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const ae={},Qa=[],Ti=()=>{},Fk=()=>!1,Nk=/^on[^a-z]/,zg=e=>Nk.test(e),J_=e=>e.startsWith("onUpdate:"),Ie=Object.assign,Q_=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Dk=Object.prototype.hasOwnProperty,zt=(e,t)=>Dk.call(e,t),bt=Array.isArray,tl=e=>Gg(e)==="[object Map]",EC=e=>Gg(e)==="[object Set]",St=e=>typeof e=="function",ke=e=>typeof e=="string",t1=e=>typeof e=="symbol",fe=e=>e!==null&&typeof e=="object",TC=e=>fe(e)&&St(e.then)&&St(e.catch),CC=Object.prototype.toString,Gg=e=>CC.call(e),$k=e=>Gg(e).slice(8,-1),SC=e=>Gg(e)==="[object Object]",e1=e=>ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Yh=K_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wg=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},zk=/-(\w)/g,nr=Wg(e=>e.replace(zk,(t,n)=>n?n.toUpperCase():"")),Gk=/\B([A-Z])/g,Ul=Wg(e=>e.replace(Gk,"-$1").toLowerCase()),Yg=Wg(e=>e.charAt(0).toUpperCase()+e.slice(1)),x0=Wg(e=>e?`on${Yg(e)}`:""),fu=(e,t)=>!Object.is(e,t),b0=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ed=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Wk=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Yk=e=>{const t=ke(e)?Number(e):NaN;return isNaN(t)?e:t};let _b;const jp=()=>_b||(_b=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ke(e){if(bt(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=ke(i)?Xk(i):Ke(i);if(r)for(const s in r)t[s]=r[s]}return t}else{if(ke(e))return e;if(fe(e))return e}}const Bk=/;(?![^(]*\))/g,Uk=/:([^]+)/,Vk=/\/\*[^]*?\*\//g;function Xk(e){const t={};return e.replace(Vk,"").split(Bk).forEach(n=>{if(n){const i=n.split(Uk);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Bg(e){let t="";if(ke(e))t=e;else if(bt(e))for(let n=0;n<e.length;n++){const i=Bg(e[n]);i&&(t+=i+" ")}else if(fe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Hk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jk=K_(Hk);function MC(e){return!!e||e===""}const Nt=e=>ke(e)?e:e==null?"":bt(e)||fe(e)&&(e.toString===CC||!St(e.toString))?JSON.stringify(e,RC,2):String(e),RC=(e,t)=>t&&t.__v_isRef?RC(e,t.value):tl(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:EC(t)?{[`Set(${t.size})`]:[...t.values()]}:fe(t)&&!bt(t)&&!SC(t)?String(t):t;let pi;class IC{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=pi,!t&&pi&&(this.index=(pi.scopes||(pi.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=pi;try{return pi=this,t()}finally{pi=n}}}on(){pi=this}off(){pi=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Zk(e){return new IC(e)}function qk(e,t=pi){t&&t.active&&t.effects.push(e)}function Kk(){return pi}const n1=e=>{const t=new Set(e);return t.w=0,t.n=0,t},AC=e=>(e.w&$s)>0,LC=e=>(e.n&$s)>0,Jk=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=$s},Qk=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];AC(r)&&!LC(r)?r.delete(e):t[n++]=r,r.w&=~$s,r.n&=~$s}t.length=n}},Zp=new WeakMap;let Fc=0,$s=1;const qp=30;let yi;const Do=Symbol(""),Kp=Symbol("");class i1{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,qk(this,i)}run(){if(!this.active)return this.fn();let t=yi,n=Fs;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=yi,yi=this,Fs=!0,$s=1<<++Fc,Fc<=qp?Jk(this):wb(this),this.fn()}finally{Fc<=qp&&Qk(this),$s=1<<--Fc,yi=this.parent,Fs=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){yi===this?this.deferStop=!0:this.active&&(wb(this),this.onStop&&this.onStop(),this.active=!1)}}function wb(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Fs=!0;const OC=[];function Vl(){OC.push(Fs),Fs=!1}function Xl(){const e=OC.pop();Fs=e===void 0?!0:e}function Cn(e,t,n){if(Fs&&yi){let i=Zp.get(e);i||Zp.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=n1()),kC(r)}}function kC(e,t){let n=!1;Fc<=qp?LC(e)||(e.n|=$s,n=!AC(e)):n=!e.has(yi),n&&(e.add(yi),yi.deps.push(e))}function Br(e,t,n,i,r,s){const o=Zp.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&bt(e)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":bt(e)?e1(n)&&a.push(o.get("length")):(a.push(o.get(Do)),tl(e)&&a.push(o.get(Kp)));break;case"delete":bt(e)||(a.push(o.get(Do)),tl(e)&&a.push(o.get(Kp)));break;case"set":tl(e)&&a.push(o.get(Do));break}if(a.length===1)a[0]&&Jp(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Jp(n1(l))}}function Jp(e,t){const n=bt(e)?e:[...e];for(const i of n)i.computed&&xb(i);for(const i of n)i.computed||xb(i)}function xb(e,t){(e!==yi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const t4=K_("__proto__,__v_isRef,__isVue"),PC=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(t1)),e4=r1(),n4=r1(!1,!0),i4=r1(!0),bb=r4();function r4(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=Wt(this);for(let s=0,o=this.length;s<o;s++)Cn(i,"get",s+"");const r=i[t](...n);return r===-1||r===!1?i[t](...n.map(Wt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Vl();const i=Wt(this)[t].apply(this,n);return Xl(),i}}),e}function s4(e){const t=Wt(this);return Cn(t,"has",e),t.hasOwnProperty(e)}function r1(e=!1,t=!1){return function(i,r,s){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&s===(e?t?b4:zC:t?$C:DC).get(i))return i;const o=bt(i);if(!e){if(o&&zt(bb,r))return Reflect.get(bb,r,s);if(r==="hasOwnProperty")return s4}const a=Reflect.get(i,r,s);return(t1(r)?PC.has(r):t4(r))||(e||Cn(i,"get",r),t)?a:nn(a)?o&&e1(r)?a:a.value:fe(a)?e?WC(a):Vg(a):a}}const o4=FC(),a4=FC(!0);function FC(e=!1){return function(n,i,r,s){let o=n[i];if(gl(o)&&nn(o)&&!nn(r))return!1;if(!e&&(!nd(r)&&!gl(r)&&(o=Wt(o),r=Wt(r)),!bt(n)&&nn(o)&&!nn(r)))return o.value=r,!0;const a=bt(n)&&e1(i)?Number(i)<n.length:zt(n,i),l=Reflect.set(n,i,r,s);return n===Wt(s)&&(a?fu(r,o)&&Br(n,"set",i,r):Br(n,"add",i,r)),l}}function l4(e,t){const n=zt(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Br(e,"delete",t,void 0),i}function c4(e,t){const n=Reflect.has(e,t);return(!t1(t)||!PC.has(t))&&Cn(e,"has",t),n}function u4(e){return Cn(e,"iterate",bt(e)?"length":Do),Reflect.ownKeys(e)}const NC={get:e4,set:o4,deleteProperty:l4,has:c4,ownKeys:u4},f4={get:i4,set(e,t){return!0},deleteProperty(e,t){return!0}},h4=Ie({},NC,{get:n4,set:a4}),s1=e=>e,Ug=e=>Reflect.getPrototypeOf(e);function Vf(e,t,n=!1,i=!1){e=e.__v_raw;const r=Wt(e),s=Wt(t);n||(t!==s&&Cn(r,"get",t),Cn(r,"get",s));const{has:o}=Ug(r),a=i?s1:n?c1:hu;if(o.call(r,t))return a(e.get(t));if(o.call(r,s))return a(e.get(s));e!==r&&e.get(t)}function Xf(e,t=!1){const n=this.__v_raw,i=Wt(n),r=Wt(e);return t||(e!==r&&Cn(i,"has",e),Cn(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function Hf(e,t=!1){return e=e.__v_raw,!t&&Cn(Wt(e),"iterate",Do),Reflect.get(e,"size",e)}function vb(e){e=Wt(e);const t=Wt(this);return Ug(t).has.call(t,e)||(t.add(e),Br(t,"add",e,e)),this}function Eb(e,t){t=Wt(t);const n=Wt(this),{has:i,get:r}=Ug(n);let s=i.call(n,e);s||(e=Wt(e),s=i.call(n,e));const o=r.call(n,e);return n.set(e,t),s?fu(t,o)&&Br(n,"set",e,t):Br(n,"add",e,t),this}function Tb(e){const t=Wt(this),{has:n,get:i}=Ug(t);let r=n.call(t,e);r||(e=Wt(e),r=n.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return r&&Br(t,"delete",e,void 0),s}function Cb(){const e=Wt(this),t=e.size!==0,n=e.clear();return t&&Br(e,"clear",void 0,void 0),n}function jf(e,t){return function(i,r){const s=this,o=s.__v_raw,a=Wt(o),l=t?s1:e?c1:hu;return!e&&Cn(a,"iterate",Do),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function Zf(e,t,n){return function(...i){const r=this.__v_raw,s=Wt(r),o=tl(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=r[e](...i),u=n?s1:t?c1:hu;return!t&&Cn(s,"iterate",l?Kp:Do),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function os(e){return function(...t){return e==="delete"?!1:this}}function d4(){const e={get(s){return Vf(this,s)},get size(){return Hf(this)},has:Xf,add:vb,set:Eb,delete:Tb,clear:Cb,forEach:jf(!1,!1)},t={get(s){return Vf(this,s,!1,!0)},get size(){return Hf(this)},has:Xf,add:vb,set:Eb,delete:Tb,clear:Cb,forEach:jf(!1,!0)},n={get(s){return Vf(this,s,!0)},get size(){return Hf(this,!0)},has(s){return Xf.call(this,s,!0)},add:os("add"),set:os("set"),delete:os("delete"),clear:os("clear"),forEach:jf(!0,!1)},i={get(s){return Vf(this,s,!0,!0)},get size(){return Hf(this,!0)},has(s){return Xf.call(this,s,!0)},add:os("add"),set:os("set"),delete:os("delete"),clear:os("clear"),forEach:jf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Zf(s,!1,!1),n[s]=Zf(s,!0,!1),t[s]=Zf(s,!1,!0),i[s]=Zf(s,!0,!0)}),[e,n,t,i]}const[g4,m4,p4,y4]=d4();function o1(e,t){const n=t?e?y4:p4:e?m4:g4;return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(zt(n,r)&&r in i?n:i,r,s)}const _4={get:o1(!1,!1)},w4={get:o1(!1,!0)},x4={get:o1(!0,!1)},DC=new WeakMap,$C=new WeakMap,zC=new WeakMap,b4=new WeakMap;function v4(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function E4(e){return e.__v_skip||!Object.isExtensible(e)?0:v4($k(e))}function Vg(e){return gl(e)?e:a1(e,!1,NC,_4,DC)}function GC(e){return a1(e,!1,h4,w4,$C)}function WC(e){return a1(e,!0,f4,x4,zC)}function a1(e,t,n,i,r){if(!fe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const o=E4(e);if(o===0)return e;const a=new Proxy(e,o===2?i:n);return r.set(e,a),a}function el(e){return gl(e)?el(e.__v_raw):!!(e&&e.__v_isReactive)}function gl(e){return!!(e&&e.__v_isReadonly)}function nd(e){return!!(e&&e.__v_isShallow)}function YC(e){return el(e)||gl(e)}function Wt(e){const t=e&&e.__v_raw;return t?Wt(t):e}function l1(e){return ed(e,"__v_skip",!0),e}const hu=e=>fe(e)?Vg(e):e,c1=e=>fe(e)?WC(e):e;function BC(e){Fs&&yi&&(e=Wt(e),kC(e.dep||(e.dep=n1())))}function UC(e,t){e=Wt(e);const n=e.dep;n&&Jp(n)}function nn(e){return!!(e&&e.__v_isRef===!0)}function qr(e){return VC(e,!1)}function T4(e){return VC(e,!0)}function VC(e,t){return nn(e)?e:new C4(e,t)}class C4{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Wt(t),this._value=n?t:hu(t)}get value(){return BC(this),this._value}set value(t){const n=this.__v_isShallow||nd(t)||gl(t);t=n?t:Wt(t),fu(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:hu(t),UC(this))}}function $o(e){return nn(e)?e.value:e}const S4={get:(e,t,n)=>$o(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return nn(r)&&!nn(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function XC(e){return el(e)?e:new Proxy(e,S4)}class M4{constructor(t,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new i1(t,()=>{this._dirty||(this._dirty=!0,UC(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=Wt(this);return BC(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function R4(e,t,n=!1){let i,r;const s=St(e);return s?(i=e,r=Ti):(i=e.get,r=e.set),new M4(i,r,s||!r,n)}function Ns(e,t,n,i){let r;try{r=i?e(...i):e()}catch(s){Xg(s,t,n)}return r}function oi(e,t,n,i){if(St(e)){const s=Ns(e,t,n,i);return s&&TC(s)&&s.catch(o=>{Xg(o,t,n)}),s}const r=[];for(let s=0;s<e.length;s++)r.push(oi(e[s],t,n,i));return r}function Xg(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=n;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Ns(l,null,10,[e,o,a]);return}}I4(e,n,r,i)}function I4(e,t,n,i=!0){console.error(e)}let du=!1,Qp=!1;const Qe=[];let Bi=0;const nl=[];let Tr=null,wo=0;const HC=Promise.resolve();let u1=null;function jC(e){const t=u1||HC;return e?t.then(this?e.bind(this):e):t}function A4(e){let t=Bi+1,n=Qe.length;for(;t<n;){const i=t+n>>>1;gu(Qe[i])<e?t=i+1:n=i}return t}function f1(e){(!Qe.length||!Qe.includes(e,du&&e.allowRecurse?Bi+1:Bi))&&(e.id==null?Qe.push(e):Qe.splice(A4(e.id),0,e),ZC())}function ZC(){!du&&!Qp&&(Qp=!0,u1=HC.then(KC))}function L4(e){const t=Qe.indexOf(e);t>Bi&&Qe.splice(t,1)}function O4(e){bt(e)?nl.push(...e):(!Tr||!Tr.includes(e,e.allowRecurse?wo+1:wo))&&nl.push(e),ZC()}function Sb(e,t=du?Bi+1:0){for(;t<Qe.length;t++){const n=Qe[t];n&&n.pre&&(Qe.splice(t,1),t--,n())}}function qC(e){if(nl.length){const t=[...new Set(nl)];if(nl.length=0,Tr){Tr.push(...t);return}for(Tr=t,Tr.sort((n,i)=>gu(n)-gu(i)),wo=0;wo<Tr.length;wo++)Tr[wo]();Tr=null,wo=0}}const gu=e=>e.id==null?1/0:e.id,k4=(e,t)=>{const n=gu(e)-gu(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function KC(e){Qp=!1,du=!0,Qe.sort(k4);const t=Ti;try{for(Bi=0;Bi<Qe.length;Bi++){const n=Qe[Bi];n&&n.active!==!1&&Ns(n,null,14)}}finally{Bi=0,Qe.length=0,qC(),du=!1,u1=null,(Qe.length||nl.length)&&KC()}}function P4(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||ae;let r=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:h}=i[u]||ae;h&&(r=n.map(d=>ke(d)?d.trim():d)),f&&(r=n.map(Wk))}let a,l=i[a=x0(t)]||i[a=x0(nr(t))];!l&&s&&(l=i[a=x0(Ul(t))]),l&&oi(l,e,6,r);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,oi(c,e,6,r)}}function JC(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!St(e)){const l=c=>{const u=JC(c,t,!0);u&&(a=!0,Ie(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(fe(e)&&i.set(e,null),null):(bt(s)?s.forEach(l=>o[l]=null):Ie(o,s),fe(e)&&i.set(e,o),o)}function Hg(e,t){return!e||!zg(t)?!1:(t=t.slice(2).replace(/Once$/,""),zt(e,t[0].toLowerCase()+t.slice(1))||zt(e,Ul(t))||zt(e,t))}let Fn=null,QC=null;function id(e){const t=Fn;return Fn=e,QC=e&&e.type.__scopeId||null,t}function tS(e,t=Fn,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&$b(-1);const s=id(t);let o;try{o=e(...r)}finally{id(s),i._d&&$b(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function v0(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:h,setupState:d,ctx:g,inheritAttrs:m}=e;let _,p;const y=id(e);try{if(n.shapeFlag&4){const w=r||i;_=Wi(u.call(w,w,f,s,d,h,g)),p=l}else{const w=t;_=Wi(w.length>1?w(s,{attrs:l,slots:a,emit:c}):w(s,null)),p=t.props?l:F4(l)}}catch(w){Jc.length=0,Xg(w,e,1),_=Le(Ci)}let x=_;if(p&&m!==!1){const w=Object.keys(p),{shapeFlag:v}=x;w.length&&v&7&&(o&&w.some(J_)&&(p=N4(p,o)),x=zs(x,p))}return n.dirs&&(x=zs(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),_=x,id(y),_}const F4=e=>{let t;for(const n in e)(n==="class"||n==="style"||zg(n))&&((t||(t={}))[n]=e[n]);return t},N4=(e,t)=>{const n={};for(const i in e)(!J_(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function D4(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?Mb(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==i[h]&&!Hg(c,h))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Mb(i,o,c):!0:!!o;return!1}function Mb(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!Hg(n,s))return!0}return!1}function $4({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const z4=e=>e.__isSuspense;function G4(e,t){t&&t.pendingBranch?bt(e)?t.effects.push(...e):t.effects.push(e):O4(e)}const qf={};function qc(e,t,n){return eS(e,t,n)}function eS(e,t,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=ae){var a;const l=Kk()===((a=We)==null?void 0:a.scope)?We:null;let c,u=!1,f=!1;if(nn(e)?(c=()=>e.value,u=nd(e)):el(e)?(c=()=>e,i=!0):bt(e)?(f=!0,u=e.some(w=>el(w)||nd(w)),c=()=>e.map(w=>{if(nn(w))return w.value;if(el(w))return To(w);if(St(w))return Ns(w,l,2)})):St(e)?t?c=()=>Ns(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return h&&h(),oi(e,l,3,[d])}:c=Ti,t&&i){const w=c;c=()=>To(w())}let h,d=w=>{h=y.onStop=()=>{Ns(w,l,4)}},g;if(pu)if(d=Ti,t?n&&oi(t,l,3,[c(),f?[]:void 0,d]):c(),r==="sync"){const w=NP();g=w.__watcherHandles||(w.__watcherHandles=[])}else return Ti;let m=f?new Array(e.length).fill(qf):qf;const _=()=>{if(y.active)if(t){const w=y.run();(i||u||(f?w.some((v,b)=>fu(v,m[b])):fu(w,m)))&&(h&&h(),oi(t,l,3,[w,m===qf?void 0:f&&m[0]===qf?[]:m,d]),m=w)}else y.run()};_.allowRecurse=!!t;let p;r==="sync"?p=_:r==="post"?p=()=>wn(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),p=()=>f1(_));const y=new i1(c,p);t?n?_():m=y.run():r==="post"?wn(y.run.bind(y),l&&l.suspense):y.run();const x=()=>{y.stop(),l&&l.scope&&Q_(l.scope.effects,y)};return g&&g.push(x),x}function W4(e,t,n){const i=this.proxy,r=ke(e)?e.includes(".")?nS(i,e):()=>i[e]:e.bind(i,i);let s;St(t)?s=t:(s=t.handler,n=t);const o=We;ml(this);const a=eS(r,s.bind(i),n);return o?ml(o):zo(),a}function nS(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function To(e,t){if(!fe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),nn(e))To(e.value,t);else if(bt(e))for(let n=0;n<e.length;n++)To(e[n],t);else if(EC(e)||tl(e))e.forEach(n=>{To(n,t)});else if(SC(e))for(const n in e)To(e[n],t);return e}function Mr(e,t){const n=Fn;if(n===null)return e;const i=Jg(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,a,l,c=ae]=t[s];o&&(St(o)&&(o={mounted:o,updated:o}),o.deep&&To(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function ro(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Vl(),oi(l,n,8,[e.el,a,e,t]),Xl())}}function Y4(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return h1(()=>{e.isMounted=!0}),aS(()=>{e.isUnmounting=!0}),e}const jn=[Function,Array],iS={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jn,onEnter:jn,onAfterEnter:jn,onEnterCancelled:jn,onBeforeLeave:jn,onLeave:jn,onAfterLeave:jn,onLeaveCancelled:jn,onBeforeAppear:jn,onAppear:jn,onAfterAppear:jn,onAppearCancelled:jn},B4={name:"BaseTransition",props:iS,setup(e,{slots:t}){const n=RP(),i=Y4();let r;return()=>{const s=t.default&&sS(t.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==Ci){o=m;break}}const a=Wt(e),{mode:l}=a;if(i.isLeaving)return E0(o);const c=Rb(o);if(!c)return E0(o);const u=ty(c,a,i,n);ey(c,u);const f=n.subTree,h=f&&Rb(f);let d=!1;const{getTransitionKey:g}=c.type;if(g){const m=g();r===void 0?r=m:m!==r&&(r=m,d=!0)}if(h&&h.type!==Ci&&(!xo(c,h)||d)){const m=ty(h,a,i,n);if(ey(h,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},E0(o);l==="in-out"&&c.type!==Ci&&(m.delayLeave=(_,p,y)=>{const x=rS(i,h);x[String(h.key)]=h,_._leaveCb=()=>{p(),_._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=y})}return o}}},U4=B4;function rS(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function ty(e,t,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:m,onAppear:_,onAfterAppear:p,onAppearCancelled:y}=t,x=String(e.key),w=rS(n,e),v=(C,I)=>{C&&oi(C,i,9,I)},b=(C,I)=>{const S=I[1];v(C,I),bt(C)?C.every(R=>R.length<=1)&&S():C.length<=1&&S()},E={mode:s,persisted:o,beforeEnter(C){let I=a;if(!n.isMounted)if(r)I=m||a;else return;C._leaveCb&&C._leaveCb(!0);const S=w[x];S&&xo(e,S)&&S.el._leaveCb&&S.el._leaveCb(),v(I,[C])},enter(C){let I=l,S=c,R=u;if(!n.isMounted)if(r)I=_||l,S=p||c,R=y||u;else return;let M=!1;const k=C._enterCb=O=>{M||(M=!0,O?v(R,[C]):v(S,[C]),E.delayedLeave&&E.delayedLeave(),C._enterCb=void 0)};I?b(I,[C,k]):k()},leave(C,I){const S=String(e.key);if(C._enterCb&&C._enterCb(!0),n.isUnmounting)return I();v(f,[C]);let R=!1;const M=C._leaveCb=k=>{R||(R=!0,I(),k?v(g,[C]):v(d,[C]),C._leaveCb=void 0,w[S]===e&&delete w[S])};w[S]=e,h?b(h,[C,M]):M()},clone(C){return ty(C,t,n,i)}};return E}function E0(e){if(jg(e))return e=zs(e),e.children=null,e}function Rb(e){return jg(e)?e.children?e.children[0]:void 0:e}function ey(e,t){e.shapeFlag&6&&e.component?ey(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function sS(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Jn?(o.patchFlag&128&&r++,i=i.concat(sS(o.children,t,a))):(t||o.type!==Ci)&&i.push(a!=null?zs(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function ju(e,t){return St(e)?(()=>Ie({name:e.name},t,{setup:e}))():e}const Bh=e=>!!e.type.__asyncLoader,jg=e=>e.type.__isKeepAlive;function V4(e,t){oS(e,"a",t)}function X4(e,t){oS(e,"da",t)}function oS(e,t,n=We){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Zg(t,i,n),n){let r=n.parent;for(;r&&r.parent;)jg(r.parent.vnode)&&H4(i,t,n,r),r=r.parent}}function H4(e,t,n,i){const r=Zg(t,e,i,!0);lS(()=>{Q_(i[t],r)},n)}function Zg(e,t,n=We,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Vl(),ml(n);const a=oi(t,n,e,o);return zo(),Xl(),a});return i?r.unshift(s):r.push(s),s}}const Kr=e=>(t,n=We)=>(!pu||e==="sp")&&Zg(e,(...i)=>t(...i),n),j4=Kr("bm"),h1=Kr("m"),Z4=Kr("bu"),q4=Kr("u"),aS=Kr("bum"),lS=Kr("um"),K4=Kr("sp"),J4=Kr("rtg"),Q4=Kr("rtc");function tP(e,t=We){Zg("ec",e,t)}const cS="components";function eP(e,t){return iP(cS,e,!0,t)||e}const nP=Symbol.for("v-ndc");function iP(e,t,n=!0,i=!1){const r=Fn||We;if(r){const s=r.type;if(e===cS){const a=kP(s,!1);if(a&&(a===t||a===nr(t)||a===Yg(nr(t))))return s}const o=Ib(r[e]||s[e],t)||Ib(r.appContext[e],t);return!o&&i?s:o}}function Ib(e,t){return e&&(e[t]||e[nr(t)]||e[Yg(nr(t))])}const ny=e=>e?xS(e)?Jg(e)||e.proxy:ny(e.parent):null,Kc=Ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ny(e.parent),$root:e=>ny(e.root),$emit:e=>e.emit,$options:e=>d1(e),$forceUpdate:e=>e.f||(e.f=()=>f1(e.update)),$nextTick:e=>e.n||(e.n=jC.bind(e.proxy)),$watch:e=>W4.bind(e)}),T0=(e,t)=>e!==ae&&!e.__isScriptSetup&&zt(e,t),rP={get({_:e},t){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(T0(i,t))return o[t]=1,i[t];if(r!==ae&&zt(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&zt(c,t))return o[t]=3,s[t];if(n!==ae&&zt(n,t))return o[t]=4,n[t];iy&&(o[t]=0)}}const u=Kc[t];let f,h;if(u)return t==="$attrs"&&Cn(e,"get",t),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==ae&&zt(n,t))return o[t]=4,n[t];if(h=l.config.globalProperties,zt(h,t))return h[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return T0(r,t)?(r[t]=n,!0):i!==ae&&zt(i,t)?(i[t]=n,!0):zt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!n[o]||e!==ae&&zt(e,o)||T0(t,o)||(a=s[0])&&zt(a,o)||zt(i,o)||zt(Kc,o)||zt(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:zt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ab(e){return bt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let iy=!0;function sP(e){const t=d1(e),n=e.proxy,i=e.ctx;iy=!1,t.beforeCreate&&Lb(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:m,deactivated:_,beforeDestroy:p,beforeUnmount:y,destroyed:x,unmounted:w,render:v,renderTracked:b,renderTriggered:E,errorCaptured:C,serverPrefetch:I,expose:S,inheritAttrs:R,components:M,directives:k,filters:O}=t;if(c&&oP(c,i,null),o)for(const N in o){const G=o[N];St(G)&&(i[N]=G.bind(n))}if(r){const N=r.call(n,n);fe(N)&&(e.data=Vg(N))}if(iy=!0,s)for(const N in s){const G=s[N],j=St(G)?G.bind(n,n):St(G.get)?G.get.bind(n,n):Ti,U=!St(G)&&St(G.set)?G.set.bind(n):Ti,Z=_i({get:j,set:U});Object.defineProperty(i,N,{enumerable:!0,configurable:!0,get:()=>Z.value,set:z=>Z.value=z})}if(a)for(const N in a)uS(a[N],i,n,N);if(l){const N=St(l)?l.call(n):l;Reflect.ownKeys(N).forEach(G=>{Uh(G,N[G])})}u&&Lb(u,e,"c");function P(N,G){bt(G)?G.forEach(j=>N(j.bind(n))):G&&N(G.bind(n))}if(P(j4,f),P(h1,h),P(Z4,d),P(q4,g),P(V4,m),P(X4,_),P(tP,C),P(Q4,b),P(J4,E),P(aS,y),P(lS,w),P(K4,I),bt(S))if(S.length){const N=e.exposed||(e.exposed={});S.forEach(G=>{Object.defineProperty(N,G,{get:()=>n[G],set:j=>n[G]=j})})}else e.exposed||(e.exposed={});v&&e.render===Ti&&(e.render=v),R!=null&&(e.inheritAttrs=R),M&&(e.components=M),k&&(e.directives=k)}function oP(e,t,n=Ti){bt(e)&&(e=ry(e));for(const i in e){const r=e[i];let s;fe(r)?"default"in r?s=Fr(r.from||i,r.default,!0):s=Fr(r.from||i):s=Fr(r),nn(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function Lb(e,t,n){oi(bt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function uS(e,t,n,i){const r=i.includes(".")?nS(n,i):()=>n[i];if(ke(e)){const s=t[e];St(s)&&qc(r,s)}else if(St(e))qc(r,e.bind(n));else if(fe(e))if(bt(e))e.forEach(s=>uS(s,t,n,i));else{const s=St(e.handler)?e.handler.bind(n):t[e.handler];St(s)&&qc(r,s,e)}}function d1(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!n&&!i?l=t:(l={},r.length&&r.forEach(c=>rd(l,c,o,!0)),rd(l,t,o)),fe(t)&&s.set(t,l),l}function rd(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&rd(e,s,n,!0),r&&r.forEach(o=>rd(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=aP[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const aP={data:Ob,props:kb,emits:kb,methods:Nc,computed:Nc,beforeCreate:ln,created:ln,beforeMount:ln,mounted:ln,beforeUpdate:ln,updated:ln,beforeDestroy:ln,beforeUnmount:ln,destroyed:ln,unmounted:ln,activated:ln,deactivated:ln,errorCaptured:ln,serverPrefetch:ln,components:Nc,directives:Nc,watch:cP,provide:Ob,inject:lP};function Ob(e,t){return t?e?function(){return Ie(St(e)?e.call(this,this):e,St(t)?t.call(this,this):t)}:t:e}function lP(e,t){return Nc(ry(e),ry(t))}function ry(e){if(bt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ln(e,t){return e?[...new Set([].concat(e,t))]:t}function Nc(e,t){return e?Ie(Object.create(null),e,t):t}function kb(e,t){return e?bt(e)&&bt(t)?[...new Set([...e,...t])]:Ie(Object.create(null),Ab(e),Ab(t??{})):t}function cP(e,t){if(!e)return t;if(!t)return e;const n=Ie(Object.create(null),e);for(const i in t)n[i]=ln(e[i],t[i]);return n}function fS(){return{app:null,config:{isNativeTag:Fk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uP=0;function fP(e,t){return function(i,r=null){St(i)||(i=Ie({},i)),r!=null&&!fe(r)&&(r=null);const s=fS(),o=new Set;let a=!1;const l=s.app={_uid:uP++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:DP,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&St(c.install)?(o.add(c),c.install(l,...u)):St(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,f){if(!a){const h=Le(i,r);return h.appContext=s,u&&t?t(h,c):e(h,c,f),a=!0,l._container=c,c.__vue_app__=l,Jg(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){sd=l;try{return c()}finally{sd=null}}};return l}}let sd=null;function Uh(e,t){if(We){let n=We.provides;const i=We.parent&&We.parent.provides;i===n&&(n=We.provides=Object.create(i)),n[e]=t}}function Fr(e,t,n=!1){const i=We||Fn;if(i||sd){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:sd._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&St(t)?t.call(i&&i.proxy):t}}function hP(e,t,n,i=!1){const r={},s={};ed(s,Kg,1),e.propsDefaults=Object.create(null),hS(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:GC(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function dP(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=Wt(r),[l]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Hg(e.emitsOptions,h))continue;const d=t[h];if(l)if(zt(s,h))d!==s[h]&&(s[h]=d,c=!0);else{const g=nr(h);r[g]=sy(l,a,g,d,e,!1)}else d!==s[h]&&(s[h]=d,c=!0)}}}else{hS(e,t,r,s)&&(c=!0);let u;for(const f in a)(!t||!zt(t,f)&&((u=Ul(f))===f||!zt(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=sy(l,a,f,void 0,e,!0)):delete r[f]);if(s!==a)for(const f in s)(!t||!zt(t,f))&&(delete s[f],c=!0)}c&&Br(e,"set","$attrs")}function hS(e,t,n,i){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Yh(l))continue;const c=t[l];let u;r&&zt(r,u=nr(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:Hg(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=Wt(n),c=a||ae;for(let u=0;u<s.length;u++){const f=s[u];n[f]=sy(r,l,f,c[f],e,!zt(c,f))}}return o}function sy(e,t,n,i,r,s){const o=e[n];if(o!=null){const a=zt(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&St(l)){const{propsDefaults:c}=r;n in c?i=c[n]:(ml(r),i=c[n]=l.call(null,t),zo())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===Ul(n))&&(i=!0))}return i}function dS(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let l=!1;if(!St(e)){const u=f=>{l=!0;const[h,d]=dS(f,t,!0);Ie(o,h),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return fe(e)&&i.set(e,Qa),Qa;if(bt(s))for(let u=0;u<s.length;u++){const f=nr(s[u]);Pb(f)&&(o[f]=ae)}else if(s)for(const u in s){const f=nr(u);if(Pb(f)){const h=s[u],d=o[f]=bt(h)||St(h)?{type:h}:Ie({},h);if(d){const g=Db(Boolean,d.type),m=Db(String,d.type);d[0]=g>-1,d[1]=m<0||g<m,(g>-1||zt(d,"default"))&&a.push(f)}}}const c=[o,a];return fe(e)&&i.set(e,c),c}function Pb(e){return e[0]!=="$"}function Fb(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Nb(e,t){return Fb(e)===Fb(t)}function Db(e,t){return bt(t)?t.findIndex(n=>Nb(n,e)):St(t)&&Nb(t,e)?0:-1}const gS=e=>e[0]==="_"||e==="$stable",g1=e=>bt(e)?e.map(Wi):[Wi(e)],gP=(e,t,n)=>{if(t._n)return t;const i=tS((...r)=>g1(t(...r)),n);return i._c=!1,i},mS=(e,t,n)=>{const i=e._ctx;for(const r in e){if(gS(r))continue;const s=e[r];if(St(s))t[r]=gP(r,s,i);else if(s!=null){const o=g1(s);t[r]=()=>o}}},pS=(e,t)=>{const n=g1(t);e.slots.default=()=>n},mP=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Wt(t),ed(t,"_",n)):mS(t,e.slots={})}else e.slots={},t&&pS(e,t);ed(e.slots,Kg,1)},pP=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=ae;if(i.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:(Ie(r,t),!n&&a===1&&delete r._):(s=!t.$stable,mS(t,r)),o=t}else t&&(pS(e,t),o={default:1});if(s)for(const a in r)!gS(a)&&!(a in o)&&delete r[a]};function oy(e,t,n,i,r=!1){if(bt(e)){e.forEach((h,d)=>oy(h,t&&(bt(t)?t[d]:t),n,i,r));return}if(Bh(i)&&!r)return;const s=i.shapeFlag&4?Jg(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=e,c=t&&t.r,u=a.refs===ae?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(ke(c)?(u[c]=null,zt(f,c)&&(f[c]=null)):nn(c)&&(c.value=null)),St(l))Ns(l,a,12,[o,u]);else{const h=ke(l),d=nn(l);if(h||d){const g=()=>{if(e.f){const m=h?zt(f,l)?f[l]:u[l]:l.value;r?bt(m)&&Q_(m,s):bt(m)?m.includes(s)||m.push(s):h?(u[l]=[s],zt(f,l)&&(f[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else h?(u[l]=o,zt(f,l)&&(f[l]=o)):d&&(l.value=o,e.k&&(u[e.k]=o))};o?(g.id=-1,wn(g,n)):g()}}}const wn=G4;function yP(e){return _P(e)}function _P(e,t){const n=jp();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=Ti,insertStaticContent:g}=e,m=(T,L,F,W=null,Y=null,H=null,rt=!1,J=null,tt=!!L.dynamicChildren)=>{if(T===L)return;T&&!xo(T,L)&&(W=$(T),z(T,Y,H,!0),T=null),L.patchFlag===-2&&(tt=!1,L.dynamicChildren=null);const{type:q,ref:ct,shapeFlag:at}=L;switch(q){case qg:_(T,L,F,W);break;case Ci:p(T,L,F,W);break;case C0:T==null&&y(L,F,W,rt);break;case Jn:M(T,L,F,W,Y,H,rt,J,tt);break;default:at&1?v(T,L,F,W,Y,H,rt,J,tt):at&6?k(T,L,F,W,Y,H,rt,J,tt):(at&64||at&128)&&q.process(T,L,F,W,Y,H,rt,J,tt,D)}ct!=null&&Y&&oy(ct,T&&T.ref,H,L||T,!L)},_=(T,L,F,W)=>{if(T==null)i(L.el=a(L.children),F,W);else{const Y=L.el=T.el;L.children!==T.children&&c(Y,L.children)}},p=(T,L,F,W)=>{T==null?i(L.el=l(L.children||""),F,W):L.el=T.el},y=(T,L,F,W)=>{[T.el,T.anchor]=g(T.children,L,F,W,T.el,T.anchor)},x=({el:T,anchor:L},F,W)=>{let Y;for(;T&&T!==L;)Y=h(T),i(T,F,W),T=Y;i(L,F,W)},w=({el:T,anchor:L})=>{let F;for(;T&&T!==L;)F=h(T),r(T),T=F;r(L)},v=(T,L,F,W,Y,H,rt,J,tt)=>{rt=rt||L.type==="svg",T==null?b(L,F,W,Y,H,rt,J,tt):I(T,L,Y,H,rt,J,tt)},b=(T,L,F,W,Y,H,rt,J)=>{let tt,q;const{type:ct,props:at,shapeFlag:ut,transition:ft,dirs:vt}=T;if(tt=T.el=o(T.type,H,at&&at.is,at),ut&8?u(tt,T.children):ut&16&&C(T.children,tt,null,W,Y,H&&ct!=="foreignObject",rt,J),vt&&ro(T,null,W,"created"),E(tt,T,T.scopeId,rt,W),at){for(const Tt in at)Tt!=="value"&&!Yh(Tt)&&s(tt,Tt,null,at[Tt],H,T.children,W,Y,ot);"value"in at&&s(tt,"value",null,at.value),(q=at.onVnodeBeforeMount)&&$i(q,W,T)}vt&&ro(T,null,W,"beforeMount");const Lt=(!Y||Y&&!Y.pendingBranch)&&ft&&!ft.persisted;Lt&&ft.beforeEnter(tt),i(tt,L,F),((q=at&&at.onVnodeMounted)||Lt||vt)&&wn(()=>{q&&$i(q,W,T),Lt&&ft.enter(tt),vt&&ro(T,null,W,"mounted")},Y)},E=(T,L,F,W,Y)=>{if(F&&d(T,F),W)for(let H=0;H<W.length;H++)d(T,W[H]);if(Y){let H=Y.subTree;if(L===H){const rt=Y.vnode;E(T,rt,rt.scopeId,rt.slotScopeIds,Y.parent)}}},C=(T,L,F,W,Y,H,rt,J,tt=0)=>{for(let q=tt;q<T.length;q++){const ct=T[q]=J?ws(T[q]):Wi(T[q]);m(null,ct,L,F,W,Y,H,rt,J)}},I=(T,L,F,W,Y,H,rt)=>{const J=L.el=T.el;let{patchFlag:tt,dynamicChildren:q,dirs:ct}=L;tt|=T.patchFlag&16;const at=T.props||ae,ut=L.props||ae;let ft;F&&so(F,!1),(ft=ut.onVnodeBeforeUpdate)&&$i(ft,F,L,T),ct&&ro(L,T,F,"beforeUpdate"),F&&so(F,!0);const vt=Y&&L.type!=="foreignObject";if(q?S(T.dynamicChildren,q,J,F,W,vt,H):rt||G(T,L,J,null,F,W,vt,H,!1),tt>0){if(tt&16)R(J,L,at,ut,F,W,Y);else if(tt&2&&at.class!==ut.class&&s(J,"class",null,ut.class,Y),tt&4&&s(J,"style",at.style,ut.style,Y),tt&8){const Lt=L.dynamicProps;for(let Tt=0;Tt<Lt.length;Tt++){const jt=Lt[Tt],pe=at[jt],ce=ut[jt];(ce!==pe||jt==="value")&&s(J,jt,pe,ce,Y,T.children,F,W,ot)}}tt&1&&T.children!==L.children&&u(J,L.children)}else!rt&&q==null&&R(J,L,at,ut,F,W,Y);((ft=ut.onVnodeUpdated)||ct)&&wn(()=>{ft&&$i(ft,F,L,T),ct&&ro(L,T,F,"updated")},W)},S=(T,L,F,W,Y,H,rt)=>{for(let J=0;J<L.length;J++){const tt=T[J],q=L[J],ct=tt.el&&(tt.type===Jn||!xo(tt,q)||tt.shapeFlag&70)?f(tt.el):F;m(tt,q,ct,null,W,Y,H,rt,!0)}},R=(T,L,F,W,Y,H,rt)=>{if(F!==W){if(F!==ae)for(const J in F)!Yh(J)&&!(J in W)&&s(T,J,F[J],null,rt,L.children,Y,H,ot);for(const J in W){if(Yh(J))continue;const tt=W[J],q=F[J];tt!==q&&J!=="value"&&s(T,J,q,tt,rt,L.children,Y,H,ot)}"value"in W&&s(T,"value",F.value,W.value)}},M=(T,L,F,W,Y,H,rt,J,tt)=>{const q=L.el=T?T.el:a(""),ct=L.anchor=T?T.anchor:a("");let{patchFlag:at,dynamicChildren:ut,slotScopeIds:ft}=L;ft&&(J=J?J.concat(ft):ft),T==null?(i(q,F,W),i(ct,F,W),C(L.children,F,ct,Y,H,rt,J,tt)):at>0&&at&64&&ut&&T.dynamicChildren?(S(T.dynamicChildren,ut,F,Y,H,rt,J),(L.key!=null||Y&&L===Y.subTree)&&yS(T,L,!0)):G(T,L,F,ct,Y,H,rt,J,tt)},k=(T,L,F,W,Y,H,rt,J,tt)=>{L.slotScopeIds=J,T==null?L.shapeFlag&512?Y.ctx.activate(L,F,W,rt,tt):O(L,F,W,Y,H,rt,tt):A(T,L,tt)},O=(T,L,F,W,Y,H,rt)=>{const J=T.component=MP(T,W,Y);if(jg(T)&&(J.ctx.renderer=D),IP(J),J.asyncDep){if(Y&&Y.registerDep(J,P),!T.el){const tt=J.subTree=Le(Ci);p(null,tt,L,F)}return}P(J,T,L,F,Y,H,rt)},A=(T,L,F)=>{const W=L.component=T.component;if(D4(T,L,F))if(W.asyncDep&&!W.asyncResolved){N(W,L,F);return}else W.next=L,L4(W.update),W.update();else L.el=T.el,W.vnode=L},P=(T,L,F,W,Y,H,rt)=>{const J=()=>{if(T.isMounted){let{next:ct,bu:at,u:ut,parent:ft,vnode:vt}=T,Lt=ct,Tt;so(T,!1),ct?(ct.el=vt.el,N(T,ct,rt)):ct=vt,at&&b0(at),(Tt=ct.props&&ct.props.onVnodeBeforeUpdate)&&$i(Tt,ft,ct,vt),so(T,!0);const jt=v0(T),pe=T.subTree;T.subTree=jt,m(pe,jt,f(pe.el),$(pe),T,Y,H),ct.el=jt.el,Lt===null&&$4(T,jt.el),ut&&wn(ut,Y),(Tt=ct.props&&ct.props.onVnodeUpdated)&&wn(()=>$i(Tt,ft,ct,vt),Y)}else{let ct;const{el:at,props:ut}=L,{bm:ft,m:vt,parent:Lt}=T,Tt=Bh(L);if(so(T,!1),ft&&b0(ft),!Tt&&(ct=ut&&ut.onVnodeBeforeMount)&&$i(ct,Lt,L),so(T,!0),at&&K){const jt=()=>{T.subTree=v0(T),K(at,T.subTree,T,Y,null)};Tt?L.type.__asyncLoader().then(()=>!T.isUnmounted&&jt()):jt()}else{const jt=T.subTree=v0(T);m(null,jt,F,W,T,Y,H),L.el=jt.el}if(vt&&wn(vt,Y),!Tt&&(ct=ut&&ut.onVnodeMounted)){const jt=L;wn(()=>$i(ct,Lt,jt),Y)}(L.shapeFlag&256||Lt&&Bh(Lt.vnode)&&Lt.vnode.shapeFlag&256)&&T.a&&wn(T.a,Y),T.isMounted=!0,L=F=W=null}},tt=T.effect=new i1(J,()=>f1(q),T.scope),q=T.update=()=>tt.run();q.id=T.uid,so(T,!0),q()},N=(T,L,F)=>{L.component=T;const W=T.vnode.props;T.vnode=L,T.next=null,dP(T,L.props,W,F),pP(T,L.children,F),Vl(),Sb(),Xl()},G=(T,L,F,W,Y,H,rt,J,tt=!1)=>{const q=T&&T.children,ct=T?T.shapeFlag:0,at=L.children,{patchFlag:ut,shapeFlag:ft}=L;if(ut>0){if(ut&128){U(q,at,F,W,Y,H,rt,J,tt);return}else if(ut&256){j(q,at,F,W,Y,H,rt,J,tt);return}}ft&8?(ct&16&&ot(q,Y,H),at!==q&&u(F,at)):ct&16?ft&16?U(q,at,F,W,Y,H,rt,J,tt):ot(q,Y,H,!0):(ct&8&&u(F,""),ft&16&&C(at,F,W,Y,H,rt,J,tt))},j=(T,L,F,W,Y,H,rt,J,tt)=>{T=T||Qa,L=L||Qa;const q=T.length,ct=L.length,at=Math.min(q,ct);let ut;for(ut=0;ut<at;ut++){const ft=L[ut]=tt?ws(L[ut]):Wi(L[ut]);m(T[ut],ft,F,null,Y,H,rt,J,tt)}q>ct?ot(T,Y,H,!0,!1,at):C(L,F,W,Y,H,rt,J,tt,at)},U=(T,L,F,W,Y,H,rt,J,tt)=>{let q=0;const ct=L.length;let at=T.length-1,ut=ct-1;for(;q<=at&&q<=ut;){const ft=T[q],vt=L[q]=tt?ws(L[q]):Wi(L[q]);if(xo(ft,vt))m(ft,vt,F,null,Y,H,rt,J,tt);else break;q++}for(;q<=at&&q<=ut;){const ft=T[at],vt=L[ut]=tt?ws(L[ut]):Wi(L[ut]);if(xo(ft,vt))m(ft,vt,F,null,Y,H,rt,J,tt);else break;at--,ut--}if(q>at){if(q<=ut){const ft=ut+1,vt=ft<ct?L[ft].el:W;for(;q<=ut;)m(null,L[q]=tt?ws(L[q]):Wi(L[q]),F,vt,Y,H,rt,J,tt),q++}}else if(q>ut)for(;q<=at;)z(T[q],Y,H,!0),q++;else{const ft=q,vt=q,Lt=new Map;for(q=vt;q<=ut;q++){const ue=L[q]=tt?ws(L[q]):Wi(L[q]);ue.key!=null&&Lt.set(ue.key,q)}let Tt,jt=0;const pe=ut-vt+1;let ce=!1,ss=0;const Vn=new Array(pe);for(q=0;q<pe;q++)Vn[q]=0;for(q=ft;q<=at;q++){const ue=T[q];if(jt>=pe){z(ue,Y,H,!0);continue}let on;if(ue.key!=null)on=Lt.get(ue.key);else for(Tt=vt;Tt<=ut;Tt++)if(Vn[Tt-vt]===0&&xo(ue,L[Tt])){on=Tt;break}on===void 0?z(ue,Y,H,!0):(Vn[on-vt]=q+1,on>=ss?ss=on:ce=!0,m(ue,L[on],F,null,Y,H,rt,J,tt),jt++)}const sn=ce?wP(Vn):Qa;for(Tt=sn.length-1,q=pe-1;q>=0;q--){const ue=vt+q,on=L[ue],xa=ue+1<ct?L[ue+1].el:W;Vn[q]===0?m(null,on,F,xa,Y,H,rt,J,tt):ce&&(Tt<0||q!==sn[Tt]?Z(on,F,xa,2):Tt--)}}},Z=(T,L,F,W,Y=null)=>{const{el:H,type:rt,transition:J,children:tt,shapeFlag:q}=T;if(q&6){Z(T.component.subTree,L,F,W);return}if(q&128){T.suspense.move(L,F,W);return}if(q&64){rt.move(T,L,F,D);return}if(rt===Jn){i(H,L,F);for(let at=0;at<tt.length;at++)Z(tt[at],L,F,W);i(T.anchor,L,F);return}if(rt===C0){x(T,L,F);return}if(W!==2&&q&1&&J)if(W===0)J.beforeEnter(H),i(H,L,F),wn(()=>J.enter(H),Y);else{const{leave:at,delayLeave:ut,afterLeave:ft}=J,vt=()=>i(H,L,F),Lt=()=>{at(H,()=>{vt(),ft&&ft()})};ut?ut(H,vt,Lt):Lt()}else i(H,L,F)},z=(T,L,F,W=!1,Y=!1)=>{const{type:H,props:rt,ref:J,children:tt,dynamicChildren:q,shapeFlag:ct,patchFlag:at,dirs:ut}=T;if(J!=null&&oy(J,null,F,T,!0),ct&256){L.ctx.deactivate(T);return}const ft=ct&1&&ut,vt=!Bh(T);let Lt;if(vt&&(Lt=rt&&rt.onVnodeBeforeUnmount)&&$i(Lt,L,T),ct&6)st(T.component,F,W);else{if(ct&128){T.suspense.unmount(F,W);return}ft&&ro(T,null,L,"beforeUnmount"),ct&64?T.type.remove(T,L,F,Y,D,W):q&&(H!==Jn||at>0&&at&64)?ot(q,L,F,!1,!0):(H===Jn&&at&384||!Y&&ct&16)&&ot(tt,L,F),W&&Q(T)}(vt&&(Lt=rt&&rt.onVnodeUnmounted)||ft)&&wn(()=>{Lt&&$i(Lt,L,T),ft&&ro(T,null,L,"unmounted")},F)},Q=T=>{const{type:L,el:F,anchor:W,transition:Y}=T;if(L===Jn){nt(F,W);return}if(L===C0){w(T);return}const H=()=>{r(F),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(T.shapeFlag&1&&Y&&!Y.persisted){const{leave:rt,delayLeave:J}=Y,tt=()=>rt(F,H);J?J(T.el,H,tt):tt()}else H()},nt=(T,L)=>{let F;for(;T!==L;)F=h(T),r(T),T=F;r(L)},st=(T,L,F)=>{const{bum:W,scope:Y,update:H,subTree:rt,um:J}=T;W&&b0(W),Y.stop(),H&&(H.active=!1,z(rt,T,L,F)),J&&wn(J,L),wn(()=>{T.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},ot=(T,L,F,W=!1,Y=!1,H=0)=>{for(let rt=H;rt<T.length;rt++)z(T[rt],L,F,W,Y)},$=T=>T.shapeFlag&6?$(T.component.subTree):T.shapeFlag&128?T.suspense.next():h(T.anchor||T.el),B=(T,L,F)=>{T==null?L._vnode&&z(L._vnode,null,null,!0):m(L._vnode||null,T,L,null,null,null,F),Sb(),qC(),L._vnode=T},D={p:m,um:z,m:Z,r:Q,mt:O,mc:C,pc:G,pbc:S,n:$,o:e};let V,K;return t&&([V,K]=t(D)),{render:B,hydrate:V,createApp:fP(B,V)}}function so({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function yS(e,t,n=!1){const i=e.children,r=t.children;if(bt(i)&&bt(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=ws(r[s]),a.el=o.el),n||yS(o,a)),a.type===qg&&(a.el=o.el)}}function wP(e){const t=e.slice(),n=[0];let i,r,s,o,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(r=n[n.length-1],e[r]<c){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<c?s=a+1:o=a;c<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const xP=e=>e.__isTeleport,Jn=Symbol.for("v-fgt"),qg=Symbol.for("v-txt"),Ci=Symbol.for("v-cmt"),C0=Symbol.for("v-stc"),Jc=[];let bi=null;function Ut(e=!1){Jc.push(bi=e?null:[])}function bP(){Jc.pop(),bi=Jc[Jc.length-1]||null}let mu=1;function $b(e){mu+=e}function _S(e){return e.dynamicChildren=mu>0?bi||Qa:null,bP(),mu>0&&bi&&bi.push(e),e}function Jt(e,t,n,i,r,s){return _S(X(e,t,n,i,r,s,!0))}function m1(e,t,n,i,r){return _S(Le(e,t,n,i,r,!0))}function ay(e){return e?e.__v_isVNode===!0:!1}function xo(e,t){return e.type===t.type&&e.key===t.key}const Kg="__vInternal",wS=({key:e})=>e??null,Vh=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ke(e)||nn(e)||St(e)?{i:Fn,r:e,k:t,f:!!n}:e:null);function X(e,t=null,n=null,i=0,r=null,s=e===Jn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&wS(t),ref:t&&Vh(t),scopeId:QC,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Fn};return a?(p1(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=ke(n)?8:16),mu>0&&!o&&bi&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&bi.push(l),l}const Le=vP;function vP(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===nP)&&(e=Ci),ay(e)){const a=zs(e,t,!0);return n&&p1(a,n),mu>0&&!s&&bi&&(a.shapeFlag&6?bi[bi.indexOf(e)]=a:bi.push(a)),a.patchFlag|=-2,a}if(PP(e)&&(e=e.__vccOpts),t){t=EP(t);let{class:a,style:l}=t;a&&!ke(a)&&(t.class=Bg(a)),fe(l)&&(YC(l)&&!bt(l)&&(l=Ie({},l)),t.style=Ke(l))}const o=ke(e)?1:z4(e)?128:xP(e)?64:fe(e)?4:St(e)?2:0;return X(e,t,n,i,r,o,s,!0)}function EP(e){return e?YC(e)||Kg in e?Ie({},e):e:null}function zs(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=e,a=t?TP(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&wS(a),ref:t&&t.ref?n&&r?bt(r)?r.concat(Vh(t)):[r,Vh(t)]:Vh(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Jn?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&zs(e.ssContent),ssFallback:e.ssFallback&&zs(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ae(e=" ",t=0){return Le(qg,null,e,t)}function de(e="",t=!1){return t?(Ut(),m1(Ci,null,e)):Le(Ci,null,e)}function Wi(e){return e==null||typeof e=="boolean"?Le(Ci):bt(e)?Le(Jn,null,e.slice()):typeof e=="object"?ws(e):Le(qg,null,String(e))}function ws(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:zs(e)}function p1(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(bt(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),p1(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(Kg in t)?t._ctx=Fn:r===3&&Fn&&(Fn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else St(t)?(t={default:t,_ctx:Fn},n=32):(t=String(t),i&64?(n=16,t=[Ae(t)]):n=8);e.children=t,e.shapeFlag|=n}function TP(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Bg([t.class,i.class]));else if(r==="style")t.style=Ke([t.style,i.style]);else if(zg(r)){const s=t[r],o=i[r];o&&s!==o&&!(bt(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function $i(e,t,n,i=null){oi(e,t,7,[n,i])}const CP=fS();let SP=0;function MP(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||CP,s={uid:SP++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new IC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dS(i,r),emitsOptions:JC(i,r),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:i.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=P4.bind(null,s),e.ce&&e.ce(s),s}let We=null;const RP=()=>We||Fn;let y1,va,zb="__VUE_INSTANCE_SETTERS__";(va=jp()[zb])||(va=jp()[zb]=[]),va.push(e=>We=e),y1=e=>{va.length>1?va.forEach(t=>t(e)):va[0](e)};const ml=e=>{y1(e),e.scope.on()},zo=()=>{We&&We.scope.off(),y1(null)};function xS(e){return e.vnode.shapeFlag&4}let pu=!1;function IP(e,t=!1){pu=t;const{props:n,children:i}=e.vnode,r=xS(e);hP(e,n,r,t),mP(e,i);const s=r?AP(e,t):void 0;return pu=!1,s}function AP(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=l1(new Proxy(e.ctx,rP));const{setup:i}=n;if(i){const r=e.setupContext=i.length>1?OP(e):null;ml(e),Vl();const s=Ns(i,e,0,[e.props,r]);if(Xl(),zo(),TC(s)){if(s.then(zo,zo),t)return s.then(o=>{Gb(e,o,t)}).catch(o=>{Xg(o,e,0)});e.asyncDep=s}else Gb(e,s,t)}else bS(e,t)}function Gb(e,t,n){St(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:fe(t)&&(e.setupState=XC(t)),bS(e,n)}let Wb;function bS(e,t,n){const i=e.type;if(!e.render){if(!t&&Wb&&!i.render){const r=i.template||d1(e).template;if(r){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Ie(Ie({isCustomElement:s,delimiters:a},o),l);i.render=Wb(r,c)}}e.render=i.render||Ti}ml(e),Vl(),sP(e),Xl(),zo()}function LP(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Cn(e,"get","$attrs"),t[n]}}))}function OP(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return LP(e)},slots:e.slots,emit:e.emit,expose:t}}function Jg(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(XC(l1(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Kc)return Kc[n](e)},has(t,n){return n in t||n in Kc}}))}function kP(e,t=!0){return St(e)?e.displayName||e.name:e.name||t&&e.__name}function PP(e){return St(e)&&"__vccOpts"in e}const _i=(e,t)=>R4(e,t,pu);function Rr(e,t,n){const i=arguments.length;return i===2?fe(t)&&!bt(t)?ay(t)?Le(e,null,[t]):Le(e,t):Le(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&ay(n)&&(n=[n]),Le(e,t,n))}const FP=Symbol.for("v-scx"),NP=()=>Fr(FP),DP="3.3.4",$P="http://www.w3.org/2000/svg",bo=typeof document<"u"?document:null,Yb=bo&&bo.createElement("template"),zP={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?bo.createElementNS($P,e):bo.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>bo.createTextNode(e),createComment:e=>bo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>bo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{Yb.innerHTML=i?`<svg>${e}</svg>`:e;const a=Yb.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function GP(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function WP(e,t,n){const i=e.style,r=ke(n);if(n&&!r){if(t&&!ke(t))for(const s in t)n[s]==null&&ly(i,s,"");for(const s in n)ly(i,s,n[s])}else{const s=i.display;r?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const Bb=/\s*!important$/;function ly(e,t,n){if(bt(n))n.forEach(i=>ly(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=YP(e,t);Bb.test(n)?e.setProperty(Ul(i),n.replace(Bb,""),"important"):e[i]=n}}const Ub=["Webkit","Moz","ms"],S0={};function YP(e,t){const n=S0[t];if(n)return n;let i=nr(t);if(i!=="filter"&&i in e)return S0[t]=i;i=Yg(i);for(let r=0;r<Ub.length;r++){const s=Ub[r]+i;if(s in e)return S0[t]=s}return t}const Vb="http://www.w3.org/1999/xlink";function BP(e,t,n,i,r){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Vb,t.slice(6,t.length)):e.setAttributeNS(Vb,t,n);else{const s=jk(t);n==null||s&&!MC(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function UP(e,t,n,i,r,s,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,r,s),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=MC(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function VP(e,t,n,i){e.addEventListener(t,n,i)}function XP(e,t,n,i){e.removeEventListener(t,n,i)}function HP(e,t,n,i,r=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[a,l]=jP(t);if(i){const c=s[t]=KP(i,r);VP(e,a,c,l)}else o&&(XP(e,a,o,l),s[t]=void 0)}}const Xb=/(?:Once|Passive|Capture)$/;function jP(e){let t;if(Xb.test(e)){t={};let i;for(;i=e.match(Xb);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ul(e.slice(2)),t]}let M0=0;const ZP=Promise.resolve(),qP=()=>M0||(ZP.then(()=>M0=0),M0=Date.now());function KP(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;oi(JP(i,n.value),t,5,[i])};return n.value=e,n.attached=qP(),n}function JP(e,t){if(bt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const Hb=/^on[a-z]/,QP=(e,t,n,i,r=!1,s,o,a,l)=>{t==="class"?GP(e,i,r):t==="style"?WP(e,n,i):zg(t)?J_(t)||HP(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):tF(e,t,i,r))?UP(e,t,i,s,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),BP(e,t,i,r))};function tF(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&Hb.test(t)&&St(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Hb.test(t)&&ke(n)?!1:t in e}const as="transition",pc="animation",_1=(e,{slots:t})=>Rr(U4,eF(e),t);_1.displayName="Transition";const vS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};_1.props=Ie({},iS,vS);const oo=(e,t=[])=>{bt(e)?e.forEach(n=>n(...t)):e&&e(...t)},jb=e=>e?bt(e)?e.some(t=>t.length>1):e.length>1:!1;function eF(e){const t={};for(const M in e)M in vS||(t[M]=e[M]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,g=nF(r),m=g&&g[0],_=g&&g[1],{onBeforeEnter:p,onEnter:y,onEnterCancelled:x,onLeave:w,onLeaveCancelled:v,onBeforeAppear:b=p,onAppear:E=y,onAppearCancelled:C=x}=t,I=(M,k,O)=>{ao(M,k?u:a),ao(M,k?c:o),O&&O()},S=(M,k)=>{M._isLeaving=!1,ao(M,f),ao(M,d),ao(M,h),k&&k()},R=M=>(k,O)=>{const A=M?E:y,P=()=>I(k,M,O);oo(A,[k,P]),Zb(()=>{ao(k,M?l:s),ls(k,M?u:a),jb(A)||qb(k,i,m,P)})};return Ie(t,{onBeforeEnter(M){oo(p,[M]),ls(M,s),ls(M,o)},onBeforeAppear(M){oo(b,[M]),ls(M,l),ls(M,c)},onEnter:R(!1),onAppear:R(!0),onLeave(M,k){M._isLeaving=!0;const O=()=>S(M,k);ls(M,f),sF(),ls(M,h),Zb(()=>{M._isLeaving&&(ao(M,f),ls(M,d),jb(w)||qb(M,i,_,O))}),oo(w,[M,O])},onEnterCancelled(M){I(M,!1),oo(x,[M])},onAppearCancelled(M){I(M,!0),oo(C,[M])},onLeaveCancelled(M){S(M),oo(v,[M])}})}function nF(e){if(e==null)return null;if(fe(e))return[R0(e.enter),R0(e.leave)];{const t=R0(e);return[t,t]}}function R0(e){return Yk(e)}function ls(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function ao(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Zb(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let iF=0;function qb(e,t,n,i){const r=e._endId=++iF,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=rF(e,t);if(!o)return i();const c=o+"end";let u=0;const f=()=>{e.removeEventListener(c,h),s()},h=d=>{d.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(c,h)}function rF(e,t){const n=window.getComputedStyle(e),i=g=>(n[g]||"").split(", "),r=i(`${as}Delay`),s=i(`${as}Duration`),o=Kb(r,s),a=i(`${pc}Delay`),l=i(`${pc}Duration`),c=Kb(a,l);let u=null,f=0,h=0;t===as?o>0&&(u=as,f=o,h=s.length):t===pc?c>0&&(u=pc,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?as:pc:null,h=u?u===as?s.length:l.length:0);const d=u===as&&/\b(transform|all)(,|$)/.test(i(`${as}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function Kb(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>Jb(n)+Jb(e[i])))}function Jb(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function sF(){return document.body.offsetHeight}const Co={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):yc(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),yc(e,!0),i.enter(e)):i.leave(e,()=>{yc(e,!1)}):yc(e,t))},beforeUnmount(e,{value:t}){yc(e,t)}};function yc(e,t){e.style.display=t?e._vod:"none"}const oF=Ie({patchProp:QP},zP);let Qb;function aF(){return Qb||(Qb=yP(oF))}const lF=(...e)=>{const t=aF().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=cF(i);if(!r)return;const s=t._component;!St(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function cF(e){return ke(e)?document.querySelector(e):e}var uF=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const fF=Symbol();var tv;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(tv||(tv={}));function hF(){const e=Zk(!0),t=e.run(()=>qr({}));let n=[],i=[];const r=l1({install(s){r._a=s,s.provide(fF,r),s.config.globalProperties.$pinia=r,i.forEach(o=>n.push(o)),i=[]},use(s){return!this._a&&!uF?i.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const za=typeof window<"u";function dF(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Kt=Object.assign;function I0(e,t){const n={};for(const i in t){const r=t[i];n[i]=Mi(r)?r.map(e):e(r)}return n}const Qc=()=>{},Mi=Array.isArray,gF=/\/$/,mF=e=>e.replace(gF,"");function A0(e,t,n="/"){let i,r={},s="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),r=e(s)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=wF(i??t,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function pF(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ev(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function yF(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&pl(t.matched[i],n.matched[r])&&ES(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function pl(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ES(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!_F(e[n],t[n]))return!1;return!0}function _F(e,t){return Mi(e)?nv(e,t):Mi(t)?nv(t,e):e===t}function nv(e,t){return Mi(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function wF(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var yu;(function(e){e.pop="pop",e.push="push"})(yu||(yu={}));var tu;(function(e){e.back="back",e.forward="forward",e.unknown=""})(tu||(tu={}));function xF(e){if(!e)if(za){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),mF(e)}const bF=/^[^#]+#/;function vF(e,t){return e.replace(bF,"#")+t}function EF(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Qg=()=>({left:window.pageXOffset,top:window.pageYOffset});function TF(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=EF(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function iv(e,t){return(history.state?history.state.position-t:-1)+e}const cy=new Map;function CF(e,t){cy.set(e,t)}function SF(e){const t=cy.get(e);return cy.delete(e),t}let MF=()=>location.protocol+"//"+location.host;function TS(e,t){const{pathname:n,search:i,hash:r}=t,s=e.indexOf("#");if(s>-1){let a=r.includes(e.slice(s))?e.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),ev(l,"")}return ev(n,e)+i+r}function RF(e,t,n,i){let r=[],s=[],o=null;const a=({state:h})=>{const d=TS(e,location),g=n.value,m=t.value;let _=0;if(h){if(n.value=d,t.value=h,o&&o===g){o=null;return}_=m?h.position-m.position:0}else i(d);r.forEach(p=>{p(n.value,g,{delta:_,type:yu.pop,direction:_?_>0?tu.forward:tu.back:tu.unknown})})};function l(){o=n.value}function c(h){r.push(h);const d=()=>{const g=r.indexOf(h);g>-1&&r.splice(g,1)};return s.push(d),d}function u(){const{history:h}=window;h.state&&h.replaceState(Kt({},h.state,{scroll:Qg()}),"")}function f(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function rv(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?Qg():null}}function IF(e){const{history:t,location:n}=window,i={value:TS(e,n)},r={value:t.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:MF()+e+l;try{t[u?"replaceState":"pushState"](c,"",h),r.value=c}catch(d){console.error(d),n[u?"replace":"assign"](h)}}function o(l,c){const u=Kt({},t.state,rv(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=Kt({},r.value,t.state,{forward:l,scroll:Qg()});s(u.current,u,!0);const f=Kt({},rv(i.value,l,null),{position:u.position+1},c);s(l,f,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function AF(e){e=xF(e);const t=IF(e),n=RF(e,t.state,t.location,t.replace);function i(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=Kt({location:"",base:e,go:i,createHref:vF.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function LF(e){return typeof e=="string"||e&&typeof e=="object"}function CS(e){return typeof e=="string"||typeof e=="symbol"}const cs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},SS=Symbol("");var sv;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(sv||(sv={}));function yl(e,t){return Kt(new Error,{type:e,[SS]:!0},t)}function hr(e,t){return e instanceof Error&&SS in e&&(t==null||!!(e.type&t))}const ov="[^/]+?",OF={sensitive:!1,strict:!1,start:!0,end:!0},kF=/[.+*?^${}()[\]/\\]/g;function PF(e,t){const n=Kt({},OF,t),i=[];let r=n.start?"^":"";const s=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const h=c[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(r+="/"),r+=h.value.replace(kF,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:m,optional:_,regexp:p}=h;s.push({name:g,repeatable:m,optional:_});const y=p||ov;if(y!==ov){d+=10;try{new RegExp(`(${y})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${y}): `+w.message)}}let x=m?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(x=_&&c.length<2?`(?:/${x})`:"/"+x),_&&(x+="?"),r+=x,d+=20,_&&(d+=-8),m&&(d+=-20),y===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const d=u[h]||"",g=s[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function l(c){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const d of h)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:_}=d,p=g in c?c[g]:"";if(Mi(p)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const y=Mi(p)?p.join("/"):p;if(!y)if(_)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=y}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function FF(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function NF(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const s=FF(i[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-i.length)===1){if(av(i))return 1;if(av(r))return-1}return r.length-i.length}function av(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const DF={type:0,value:""},$F=/[a-zA-Z0-9_]/;function zF(e){if(!e)return[[]];if(e==="/")return[[DF]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function f(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):h();break;case 4:h(),n=i;break;case 1:l==="("?n=2:$F.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}function GF(e,t,n){const i=PF(zF(e.path),n),r=Kt(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function WF(e,t){const n=[],i=new Map;t=uv({strict:!1,end:!0,sensitive:!1},t);function r(u){return i.get(u)}function s(u,f,h){const d=!h,g=YF(u);g.aliasOf=h&&h.record;const m=uv(t,u),_=[g];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const w of x)_.push(Kt({},g,{components:h?h.record.components:g.components,path:w,aliasOf:h?h.record:g}))}let p,y;for(const x of _){const{path:w}=x;if(f&&w[0]!=="/"){const v=f.record.path,b=v[v.length-1]==="/"?"":"/";x.path=f.record.path+(w&&b+w)}if(p=GF(x,f,m),h?h.alias.push(p):(y=y||p,y!==p&&y.alias.push(p),d&&u.name&&!cv(p)&&o(u.name)),g.children){const v=g.children;for(let b=0;b<v.length;b++)s(v[b],p,h&&h.children[b])}h=h||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&l(p)}return y?()=>{o(y)}:Qc}function o(u){if(CS(u)){const f=i.get(u);f&&(i.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let f=0;for(;f<n.length&&NF(u,n[f])>=0&&(u.record.path!==n[f].record.path||!MS(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!cv(u)&&i.set(u.record.name,u)}function c(u,f){let h,d={},g,m;if("name"in u&&u.name){if(h=i.get(u.name),!h)throw yl(1,{location:u});m=h.record.name,d=Kt(lv(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),u.params&&lv(u.params,h.keys.map(y=>y.name))),g=h.stringify(d)}else if("path"in u)g=u.path,h=n.find(y=>y.re.test(g)),h&&(d=h.parse(g),m=h.record.name);else{if(h=f.name?i.get(f.name):n.find(y=>y.re.test(f.path)),!h)throw yl(1,{location:u,currentLocation:f});m=h.record.name,d=Kt({},f.params,u.params),g=h.stringify(d)}const _=[];let p=h;for(;p;)_.unshift(p.record),p=p.parent;return{name:m,path:g,params:d,matched:_,meta:UF(_)}}return e.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function lv(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function YF(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:BF(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function BF(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function cv(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function UF(e){return e.reduce((t,n)=>Kt(t,n.meta),{})}function uv(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function MS(e,t){return t.children.some(n=>n===e||MS(e,n))}const RS=/#/g,VF=/&/g,XF=/\//g,HF=/=/g,jF=/\?/g,IS=/\+/g,ZF=/%5B/g,qF=/%5D/g,AS=/%5E/g,KF=/%60/g,LS=/%7B/g,JF=/%7C/g,OS=/%7D/g,QF=/%20/g;function w1(e){return encodeURI(""+e).replace(JF,"|").replace(ZF,"[").replace(qF,"]")}function tN(e){return w1(e).replace(LS,"{").replace(OS,"}").replace(AS,"^")}function uy(e){return w1(e).replace(IS,"%2B").replace(QF,"+").replace(RS,"%23").replace(VF,"%26").replace(KF,"`").replace(LS,"{").replace(OS,"}").replace(AS,"^")}function eN(e){return uy(e).replace(HF,"%3D")}function nN(e){return w1(e).replace(RS,"%23").replace(jF,"%3F")}function iN(e){return e==null?"":nN(e).replace(XF,"%2F")}function od(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function rN(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(IS," "),o=s.indexOf("="),a=od(o<0?s:s.slice(0,o)),l=o<0?null:od(s.slice(o+1));if(a in t){let c=t[a];Mi(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function fv(e){let t="";for(let n in e){const i=e[n];if(n=eN(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Mi(i)?i.map(s=>s&&uy(s)):[i&&uy(i)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function sN(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Mi(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const oN=Symbol(""),hv=Symbol(""),x1=Symbol(""),kS=Symbol(""),fy=Symbol("");function _c(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function xs(e,t,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=f=>{f===!1?a(yl(4,{from:n,to:t})):f instanceof Error?a(f):LF(f)?a(yl(2,{from:t,to:f})):(s&&i.enterCallbacks[r]===s&&typeof f=="function"&&s.push(f),o())},c=e.call(i&&i.instances[r],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(f=>a(f))})}function L0(e,t,n,i){const r=[];for(const s of e)for(const o in s.components){let a=s.components[o];if(!(t!=="beforeRouteEnter"&&!s.instances[o]))if(aN(a)){const c=(a.__vccOpts||a)[t];c&&r.push(xs(c,n,i,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=dF(c)?c.default:c;s.components[o]=u;const h=(u.__vccOpts||u)[t];return h&&xs(h,n,i,s,o)()}))}}return r}function aN(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function dv(e){const t=Fr(x1),n=Fr(kS),i=_i(()=>t.resolve($o(e.to))),r=_i(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(pl.bind(null,u));if(h>-1)return h;const d=gv(l[c-2]);return c>1&&gv(u)===d&&f[f.length-1].path!==d?f.findIndex(pl.bind(null,l[c-2])):h}),s=_i(()=>r.value>-1&&fN(n.params,i.value.params)),o=_i(()=>r.value>-1&&r.value===n.matched.length-1&&ES(n.params,i.value.params));function a(l={}){return uN(l)?t[$o(e.replace)?"replace":"push"]($o(e.to)).catch(Qc):Promise.resolve()}return{route:i,href:_i(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const lN=ju({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:dv,setup(e,{slots:t}){const n=Vg(dv(e)),{options:i}=Fr(x1),r=_i(()=>({[mv(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[mv(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:Rr("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),cN=lN;function uN(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function fN(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!Mi(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function gv(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const mv=(e,t,n)=>e??t??n,hN=ju({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=Fr(fy),r=_i(()=>e.route||i.value),s=Fr(hv,0),o=_i(()=>{let c=$o(s);const{matched:u}=r.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=_i(()=>r.value.matched[o.value]);Uh(hv,_i(()=>o.value+1)),Uh(oN,a),Uh(fy,r);const l=qr();return qc(()=>[l.value,a.value,e.name],([c,u,f],[h,d,g])=>{u&&(u.instances[f]=c,d&&d!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!pl(u,d)||!h)&&(u.enterCallbacks[f]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=r.value,u=e.name,f=a.value,h=f&&f.components[u];if(!h)return pv(n.default,{Component:h,route:c});const d=f.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,_=Rr(h,Kt({},g,t,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return pv(n.default,{Component:_,route:c})||_}}});function pv(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const PS=hN;function dN(e){const t=WF(e.routes,e),n=e.parseQuery||rN,i=e.stringifyQuery||fv,r=e.history,s=_c(),o=_c(),a=_c(),l=T4(cs);let c=cs;za&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=I0.bind(null,$=>""+$),f=I0.bind(null,iN),h=I0.bind(null,od);function d($,B){let D,V;return CS($)?(D=t.getRecordMatcher($),V=B):V=$,t.addRoute(V,D)}function g($){const B=t.getRecordMatcher($);B&&t.removeRoute(B)}function m(){return t.getRoutes().map($=>$.record)}function _($){return!!t.getRecordMatcher($)}function p($,B){if(B=Kt({},B||l.value),typeof $=="string"){const F=A0(n,$,B.path),W=t.resolve({path:F.path},B),Y=r.createHref(F.fullPath);return Kt(F,W,{params:h(W.params),hash:od(F.hash),redirectedFrom:void 0,href:Y})}let D;if("path"in $)D=Kt({},$,{path:A0(n,$.path,B.path).path});else{const F=Kt({},$.params);for(const W in F)F[W]==null&&delete F[W];D=Kt({},$,{params:f(F)}),B.params=f(B.params)}const V=t.resolve(D,B),K=$.hash||"";V.params=u(h(V.params));const T=pF(i,Kt({},$,{hash:tN(K),path:V.path})),L=r.createHref(T);return Kt({fullPath:T,hash:K,query:i===fv?sN($.query):$.query||{}},V,{redirectedFrom:void 0,href:L})}function y($){return typeof $=="string"?A0(n,$,l.value.path):Kt({},$)}function x($,B){if(c!==$)return yl(8,{from:B,to:$})}function w($){return E($)}function v($){return w(Kt(y($),{replace:!0}))}function b($){const B=$.matched[$.matched.length-1];if(B&&B.redirect){const{redirect:D}=B;let V=typeof D=="function"?D($):D;return typeof V=="string"&&(V=V.includes("?")||V.includes("#")?V=y(V):{path:V},V.params={}),Kt({query:$.query,hash:$.hash,params:"path"in V?{}:$.params},V)}}function E($,B){const D=c=p($),V=l.value,K=$.state,T=$.force,L=$.replace===!0,F=b(D);if(F)return E(Kt(y(F),{state:typeof F=="object"?Kt({},K,F.state):K,force:T,replace:L}),B||D);const W=D;W.redirectedFrom=B;let Y;return!T&&yF(i,V,D)&&(Y=yl(16,{to:W,from:V}),Z(V,V,!0,!1)),(Y?Promise.resolve(Y):S(W,V)).catch(H=>hr(H)?hr(H,2)?H:U(H):G(H,W,V)).then(H=>{if(H){if(hr(H,2))return E(Kt({replace:L},y(H.to),{state:typeof H.to=="object"?Kt({},K,H.to.state):K,force:T}),B||W)}else H=M(W,V,!0,L,K);return R(W,V,H),H})}function C($,B){const D=x($,B);return D?Promise.reject(D):Promise.resolve()}function I($){const B=nt.values().next().value;return B&&typeof B.runWithContext=="function"?B.runWithContext($):$()}function S($,B){let D;const[V,K,T]=gN($,B);D=L0(V.reverse(),"beforeRouteLeave",$,B);for(const F of V)F.leaveGuards.forEach(W=>{D.push(xs(W,$,B))});const L=C.bind(null,$,B);return D.push(L),ot(D).then(()=>{D=[];for(const F of s.list())D.push(xs(F,$,B));return D.push(L),ot(D)}).then(()=>{D=L0(K,"beforeRouteUpdate",$,B);for(const F of K)F.updateGuards.forEach(W=>{D.push(xs(W,$,B))});return D.push(L),ot(D)}).then(()=>{D=[];for(const F of T)if(F.beforeEnter)if(Mi(F.beforeEnter))for(const W of F.beforeEnter)D.push(xs(W,$,B));else D.push(xs(F.beforeEnter,$,B));return D.push(L),ot(D)}).then(()=>($.matched.forEach(F=>F.enterCallbacks={}),D=L0(T,"beforeRouteEnter",$,B),D.push(L),ot(D))).then(()=>{D=[];for(const F of o.list())D.push(xs(F,$,B));return D.push(L),ot(D)}).catch(F=>hr(F,8)?F:Promise.reject(F))}function R($,B,D){a.list().forEach(V=>I(()=>V($,B,D)))}function M($,B,D,V,K){const T=x($,B);if(T)return T;const L=B===cs,F=za?history.state:{};D&&(V||L?r.replace($.fullPath,Kt({scroll:L&&F&&F.scroll},K)):r.push($.fullPath,K)),l.value=$,Z($,B,D,L),U()}let k;function O(){k||(k=r.listen(($,B,D)=>{if(!st.listening)return;const V=p($),K=b(V);if(K){E(Kt(K,{replace:!0}),V).catch(Qc);return}c=V;const T=l.value;za&&CF(iv(T.fullPath,D.delta),Qg()),S(V,T).catch(L=>hr(L,12)?L:hr(L,2)?(E(L.to,V).then(F=>{hr(F,20)&&!D.delta&&D.type===yu.pop&&r.go(-1,!1)}).catch(Qc),Promise.reject()):(D.delta&&r.go(-D.delta,!1),G(L,V,T))).then(L=>{L=L||M(V,T,!1),L&&(D.delta&&!hr(L,8)?r.go(-D.delta,!1):D.type===yu.pop&&hr(L,20)&&r.go(-1,!1)),R(V,T,L)}).catch(Qc)}))}let A=_c(),P=_c(),N;function G($,B,D){U($);const V=P.list();return V.length?V.forEach(K=>K($,B,D)):console.error($),Promise.reject($)}function j(){return N&&l.value!==cs?Promise.resolve():new Promise(($,B)=>{A.add([$,B])})}function U($){return N||(N=!$,O(),A.list().forEach(([B,D])=>$?D($):B()),A.reset()),$}function Z($,B,D,V){const{scrollBehavior:K}=e;if(!za||!K)return Promise.resolve();const T=!D&&SF(iv($.fullPath,0))||(V||!D)&&history.state&&history.state.scroll||null;return jC().then(()=>K($,B,T)).then(L=>L&&TF(L)).catch(L=>G(L,$,B))}const z=$=>r.go($);let Q;const nt=new Set,st={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,hasRoute:_,getRoutes:m,resolve:p,options:e,push:w,replace:v,go:z,back:()=>z(-1),forward:()=>z(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:P.add,isReady:j,install($){const B=this;$.component("RouterLink",cN),$.component("RouterView",PS),$.config.globalProperties.$router=B,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>$o(l)}),za&&!Q&&l.value===cs&&(Q=!0,w(r.location).catch(K=>{}));const D={};for(const K in cs)Object.defineProperty(D,K,{get:()=>l.value[K],enumerable:!0});$.provide(x1,B),$.provide(kS,GC(D)),$.provide(fy,l);const V=$.unmount;nt.add($),$.unmount=function(){nt.delete($),nt.size<1&&(c=cs,k&&k(),k=null,l.value=cs,Q=!1,N=!1),V()}}};function ot($){return $.reduce((B,D)=>B.then(()=>I(D)),Promise.resolve())}return st}function gN(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(c=>pl(c,a))?i.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>pl(c,l))||r.push(l))}return[n,i,r]}const mN=ju({__name:"App",setup(e){return(t,n)=>(Ut(),m1($o(PS)))}}),pN="modulepreload",yN=function(e){return"/openactivity/"+e},yv={},_v=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=yN(s),s in yv)return;yv[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const f=r[u];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":pN,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};const _N="/openactivity/assets/destination-point-63b16bda.svg",wN="/openactivity/assets/starting-point-c9a465c9.svg";class xN{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Jr=xN,_l={PROPERTYCHANGE:"propertychange"};class bN{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const b1=bN;function vN(e,t,n){let i,r;n=n||Gs;let s=0,o=e.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+n(e[i],t),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function Gs(e,t){return e>t?1:e<t?-1:0}function v1(e,t,n){if(e[0]<=t)return 0;const i=e.length;if(t<=e[i-1])return i-1;if(typeof n=="function"){for(let r=1;r<i;++r){const s=e[r];if(s===t)return r;if(s<t)return n(t,e[r-1],s)>0?r-1:r}return i-1}if(n>0){for(let r=1;r<i;++r)if(e[r]<t)return r-1;return i-1}if(n<0){for(let r=1;r<i;++r)if(e[r]<=t)return r;return i-1}for(let r=1;r<i;++r){if(e[r]==t)return r;if(e[r]<t)return e[r-1]-t<t-e[r]?r-1:r}return i-1}function EN(e,t,n){for(;t<n;){const i=e[t];e[t]=e[n],e[n]=i,++t,--n}}function Nr(e,t){const n=Array.isArray(t)?t:[t],i=n.length;for(let r=0;r<i;r++)e[e.length]=n[r]}function Zs(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function TN(e,t,n){const i=t||Gs;return e.every(function(r,s){if(s===0)return!0;const o=i(e[s-1],r);return!(o>0||n&&o===0)})}function _u(){return!0}function tm(){return!1}function wl(){}function CN(e){let t=!1,n,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==r||!Zs(s,i))&&(t=!0,r=this,i=s,n=e.apply(this,arguments)),n}}function SN(e){function t(){let n;try{n=e()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return t()}function Zu(e){for(const t in e)delete e[t]}function xl(e){let t;for(t in e)return!1;return!t}class MN extends b1{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const i=this.listeners_||(this.listeners_={}),r=i[t]||(i[t]=[]);r.includes(n)||r.push(n)}dispatchEvent(t){const n=typeof t=="string",i=n?t:t.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=n?new Jr(t):t;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,wl);delete o[i]}return l}disposeInternal(){this.listeners_&&Zu(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){const i=this.listeners_&&this.listeners_[t];if(i){const r=i.indexOf(n);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[r]=wl,++this.pendingRemovals_[t]):(i.splice(r,1),i.length===0&&delete this.listeners_[t]))}}}const qu=MN,Et={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Pt(e,t,n,i,r){if(i&&i!==e&&(n=n.bind(i)),r){const o=n;n=function(){e.removeEventListener(t,n),o.apply(this,arguments)}}const s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function ad(e,t,n,i){return Pt(e,t,n,i,!0)}function ee(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Zu(e))}class em extends qu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Et.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const i=t.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Pt(this,t[s],n);return r}return Pt(this,t,n)}onceInternal(t,n){let i;if(Array.isArray(t)){const r=t.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=ad(this,t[s],n)}else i=ad(this,t,n);return n.ol_key=i,i}unInternal(t,n){const i=n.ol_key;if(i)RN(i);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)}}em.prototype.on;em.prototype.once;em.prototype.un;function RN(e){if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)ee(e[t]);else ee(e)}const FS=em;function xt(){throw new Error("Unimplemented abstract method.")}let IN=0;function Vt(e){return e.ol_uid||(e.ol_uid=String(++IN))}class wv extends Jr{constructor(t,n,i){super(t),this.key=n,this.oldValue=i}}class AN extends FS{constructor(t){super(),this.on,this.once,this.un,Vt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new wv(i,t,n)),i=_l.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new wv(i,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,i){const r=this.values_||(this.values_={});if(i)r[t]=n;else{const s=r[t];r[t]=n,s!==n&&this.notify(t,s)}}setProperties(t,n){for(const i in t)this.set(i,t[i],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],xl(this.values_)&&(this.values_=null),n||this.notify(t,i)}}}const Fi=AN,bn={ADD:"add",REMOVE:"remove"},xv={LENGTH:"length"};class Kf extends Jr{constructor(t,n,i){super(t),this.element=n,this.index=i}}class LN extends Fi{constructor(t,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let n=0,i=t.length;n<i;++n)this.push(t[n]);return this}forEach(t){const n=this.array_;for(let i=0,r=n.length;i<r;++i)t(n[i],i,n)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(xv.LENGTH)}insertAt(t,n){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new Kf(bn.ADD,n,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const n=this.getLength();return this.insertAt(n,t),this.getLength()}remove(t){const n=this.array_;for(let i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Kf(bn.REMOVE,n,t)),n}setAt(t,n){const i=this.getLength();if(t>=i){this.insertAt(t,n);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n,t);const r=this.array_[t];this.array_[t]=n,this.dispatchEvent(new Kf(bn.REMOVE,r,t)),this.dispatchEvent(new Kf(bn.ADD,n,t))}updateLength_(){this.set(xv.LENGTH,this.array_.length)}assertUnique_(t,n){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==n)throw new Error("Duplicate item added to a unique collection")}}const ji=LN,Ws=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",ON=Ws.includes("firefox"),kN=Ws.includes("safari")&&!Ws.includes("chrom");kN&&(Ws.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ws));const PN=Ws.includes("webkit")&&!Ws.includes("edge"),NS=Ws.includes("macintosh"),DS=typeof devicePixelRatio<"u"?devicePixelRatio:1,E1=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,$S=typeof Image<"u"&&Image.prototype.decode,zS=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}();function Dt(e,t){if(!e)throw new Error(t)}new Array(6);function Si(){return[1,0,0,1,0,0]}function FN(e,t,n,i,r,s,o){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=s,e[5]=o,e}function NN(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ee(e,t){const n=t[0],i=t[1];return t[0]=e[0]*n+e[2]*i+e[4],t[1]=e[1]*n+e[3]*i+e[5],t}function DN(e,t,n){return FN(e,t,0,0,n,0,0)}function Ri(e,t,n,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return e[0]=i*c,e[1]=r*l,e[2]=-i*l,e[3]=r*c,e[4]=o*i*c-a*i*l+t,e[5]=o*r*l+a*r*c+n,e}function nm(e,t){const n=$N(t);Dt(n!==0,"Transformation matrix cannot be inverted");const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return e[0]=o/n,e[1]=-r/n,e[2]=-s/n,e[3]=i/n,e[4]=(s*l-o*a)/n,e[5]=-(i*l-r*a)/n,e}function $N(e){return e[0]*e[3]-e[1]*e[2]}let bv;function T1(e){const t="matrix("+e.join(", ")+")";if(E1)return t;const n=bv||(bv=document.createElement("div"));return n.style.transform=t,n.style.transform}const Ge={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function vv(e){const t=ai();for(let n=0,i=e.length;n<i;++n)eu(t,e[n]);return t}function C1(e,t,n){return n?(n[0]=e[0]-t,n[1]=e[1]-t,n[2]=e[2]+t,n[3]=e[3]+t,n):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function GS(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function fa(e,t,n){let i,r;return t<e[0]?i=e[0]-t:e[2]<t?i=t-e[2]:i=0,n<e[1]?r=e[1]-n:e[3]<n?r=n-e[3]:r=0,i*i+r*r}function Ku(e,t){return S1(e,t[0],t[1])}function As(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function S1(e,t,n){return e[0]<=t&&t<=e[2]&&e[1]<=n&&n<=e[3]}function hy(e,t){const n=e[0],i=e[1],r=e[2],s=e[3],o=t[0],a=t[1];let l=Ge.UNKNOWN;return o<n?l=l|Ge.LEFT:o>r&&(l=l|Ge.RIGHT),a<i?l=l|Ge.BELOW:a>s&&(l=l|Ge.ABOVE),l===Ge.UNKNOWN&&(l=Ge.INTERSECTING),l}function ai(){return[1/0,1/0,-1/0,-1/0]}function Ys(e,t,n,i,r){return r?(r[0]=e,r[1]=t,r[2]=n,r[3]=i,r):[e,t,n,i]}function Ju(e){return Ys(1/0,1/0,-1/0,-1/0,e)}function zN(e,t){const n=e[0],i=e[1];return Ys(n,i,n,i,t)}function WS(e,t,n,i,r){const s=Ju(r);return BS(s,e,t,n,i)}function wu(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function YS(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function eu(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function BS(e,t,n,i,r){for(;n<i;n+=r)GN(e,t[n],t[n+1]);return e}function GN(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)}function US(e,t){let n;return n=t(im(e)),n||(n=t(rm(e)),n)||(n=t(sm(e)),n)||(n=t(ha(e)),n)?n:!1}function dy(e){let t=0;return Hl(e)||(t=Qt(e)*Gn(e)),t}function im(e){return[e[0],e[1]]}function rm(e){return[e[2],e[1]]}function Ko(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function WN(e,t){let n;if(t==="bottom-left")n=im(e);else if(t==="bottom-right")n=rm(e);else if(t==="top-left")n=ha(e);else if(t==="top-right")n=sm(e);else throw new Error("Invalid corner");return n}function gy(e,t,n,i,r){const[s,o,a,l,c,u,f,h]=my(e,t,n,i);return Ys(Math.min(s,a,c,f),Math.min(o,l,u,h),Math.max(s,a,c,f),Math.max(o,l,u,h),r)}function my(e,t,n,i){const r=t*i[0]/2,s=t*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,c=r*a,u=s*o,f=s*a,h=e[0],d=e[1];return[h-l+f,d-c-u,h-l-f,d-c+u,h+l-f,d+c+u,h+l+f,d+c-u,h-l+f,d-c-u]}function Gn(e){return e[3]-e[1]}function il(e,t,n){const i=n||ai();return hn(e,t)?(e[0]>t[0]?i[0]=e[0]:i[0]=t[0],e[1]>t[1]?i[1]=e[1]:i[1]=t[1],e[2]<t[2]?i[2]=e[2]:i[2]=t[2],e[3]<t[3]?i[3]=e[3]:i[3]=t[3]):Ju(i),i}function ha(e){return[e[0],e[3]]}function sm(e){return[e[2],e[3]]}function Qt(e){return e[2]-e[0]}function hn(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Hl(e){return e[2]<e[0]||e[3]<e[1]}function YN(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function BN(e,t){const n=(e[2]-e[0])/2*(t-1),i=(e[3]-e[1])/2*(t-1);e[0]-=n,e[2]+=n,e[1]-=i,e[3]+=i}function UN(e,t,n){let i=!1;const r=hy(e,t),s=hy(e,n);if(r===Ge.INTERSECTING||s===Ge.INTERSECTING)i=!0;else{const o=e[0],a=e[1],l=e[2],c=e[3],u=t[0],f=t[1],h=n[0],d=n[1],g=(d-f)/(h-u);let m,_;s&Ge.ABOVE&&!(r&Ge.ABOVE)&&(m=h-(d-c)/g,i=m>=o&&m<=l),!i&&s&Ge.RIGHT&&!(r&Ge.RIGHT)&&(_=d-(h-l)*g,i=_>=a&&_<=c),!i&&s&Ge.BELOW&&!(r&Ge.BELOW)&&(m=h-(d-a)/g,i=m>=o&&m<=l),!i&&s&Ge.LEFT&&!(r&Ge.LEFT)&&(_=d-(h-o)*g,i=_>=a&&_<=c)}return i}function VS(e,t){const n=t.getExtent(),i=Ko(e);if(t.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const r=Qt(n),o=Math.floor((i[0]-n[0])/r)*r;e[0]-=o,e[2]-=o}return e}function VN(e,t){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];VS(e,t);const i=Qt(n);if(Qt(e)>i)return[[n[0],e[1],n[2],e[3]]];if(e[0]<n[0])return[[e[0]+i,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-i,e[3]]]}return[e]}function Re(e,t,n){return Math.min(Math.max(e,t),n)}function XN(e,t,n,i,r,s){const o=r-n,a=s-i;if(o!==0||a!==0){const l=((e-n)*o+(t-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return Go(e,t,n,i)}function Go(e,t,n,i){const r=n-e,s=i-t;return r*r+s*s}function HN(e){const t=e.length;for(let i=0;i<t;i++){let r=i,s=Math.abs(e[i][i]);for(let a=i+1;a<t;a++){const l=Math.abs(e[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=e[r];e[r]=e[i],e[i]=o;for(let a=i+1;a<t;a++){const l=-e[a][i]/e[i][i];for(let c=i;c<t+1;c++)i==c?e[a][c]=0:e[a][c]+=l*e[i][c]}}const n=new Array(t);for(let i=t-1;i>=0;i--){n[i]=e[i][t]/e[i][i];for(let r=i-1;r>=0;r--)e[r][t]-=e[r][i]*n[i]}return n}function Xh(e){return e*Math.PI/180}function Wo(e,t){const n=e%t;return n*t<0?n+t:n}function Pn(e,t,n){return e+n*(t-e)}function om(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function Jf(e,t){return Math.floor(om(e,t))}function Qf(e,t){return Math.ceil(om(e,t))}const jN=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,ZN=/^([a-z]*)$|^hsla?\(.*\)$/i;function XS(e){return typeof e=="string"?e:HS(e)}function qN(e){const t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);const n=getComputedStyle(t).color;return document.body.removeChild(t),n}return""}const KN=function(){const t={};let n=0;return function(i){let r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){let s=0;for(const o in t)s++&3||(delete t[o],--n)}r=JN(i),t[i]=r,++n}return r}}();function ld(e){return Array.isArray(e)?e:KN(e)}function JN(e){let t,n,i,r,s;if(ZN.exec(e)&&(e=qN(e)),jN.exec(e)){const o=e.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(e.substr(1+0*a,a),16),n=parseInt(e.substr(1+1*a,a),16),i=parseInt(e.substr(1+2*a,a),16),l?r=parseInt(e.substr(1+3*a,a),16):r=255,a==1&&(t=(t<<4)+t,n=(n<<4)+n,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[t,n,i,r/255]}else if(e.startsWith("rgba("))s=e.slice(5,-1).split(",").map(Number),Ev(s);else if(e.startsWith("rgb("))s=e.slice(4,-1).split(",").map(Number),s.push(1),Ev(s);else throw new Error("Invalid color");return s}function Ev(e){return e[0]=Re(e[0]+.5|0,0,255),e[1]=Re(e[1]+.5|0,0,255),e[2]=Re(e[2]+.5|0,0,255),e[3]=Re(e[3],0,1),e}function HS(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let n=e[1];n!=(n|0)&&(n=n+.5|0);let i=e[2];i!=(i|0)&&(i=i+.5|0);const r=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+n+","+i+","+r+")"}class QN{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const n in this.cache_){const i=this.cache_[n];!(t++&3)&&!i.hasListener()&&(delete this.cache_[n],--this.cacheSize_)}}}get(t,n,i){const r=Tv(t,n,i);return r in this.cache_?this.cache_[r]:null}set(t,n,i,r){const s=Tv(t,n,i);this.cache_[s]=r,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Tv(e,t,n){const i=n?XS(n):"null";return t+":"+e+":"+i}const cd=new QN,qt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class tD extends Fi{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const n=Object.assign({},t);typeof t.properties=="object"&&(delete n.properties,Object.assign(n,t.properties)),n[qt.OPACITY]=t.opacity!==void 0?t.opacity:1,Dt(typeof n[qt.OPACITY]=="number","Layer opacity must be a number"),n[qt.VISIBLE]=t.visible!==void 0?t.visible:!0,n[qt.Z_INDEX]=t.zIndex,n[qt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[qt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[qt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[qt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=Re(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(t){return xt()}getLayerStatesArray(t){return xt()}getExtent(){return this.get(qt.EXTENT)}getMaxResolution(){return this.get(qt.MAX_RESOLUTION)}getMinResolution(){return this.get(qt.MIN_RESOLUTION)}getMinZoom(){return this.get(qt.MIN_ZOOM)}getMaxZoom(){return this.get(qt.MAX_ZOOM)}getOpacity(){return this.get(qt.OPACITY)}getSourceState(){return xt()}getVisible(){return this.get(qt.VISIBLE)}getZIndex(){return this.get(qt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(qt.EXTENT,t)}setMaxResolution(t){this.set(qt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(qt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(qt.MAX_ZOOM,t)}setMinZoom(t){this.set(qt.MIN_ZOOM,t)}setOpacity(t){Dt(typeof t=="number","Layer opacity must be a number"),this.set(qt.OPACITY,t)}setVisible(t){this.set(qt.VISIBLE,t)}setZIndex(t){this.set(qt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const jS=tD,Ji={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Me={ANIMATING:0,INTERACTING:1},ui={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},eD=42,M1=256,bl={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class nD{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||bl[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const ZS=nD,Qu=6378137,Ua=Math.PI*Qu,iD=[-Ua,-Ua,Ua,Ua],rD=[-180,-85,180,85],th=Qu*Math.log(Math.tan(Math.PI/2));class Ea extends ZS{constructor(t){super({code:t,units:"m",extent:iD,global:!0,worldExtent:rD,getPointResolution:function(n,i){return n/Math.cosh(i[1]/Qu)}})}}const Cv=[new Ea("EPSG:3857"),new Ea("EPSG:102100"),new Ea("EPSG:102113"),new Ea("EPSG:900913"),new Ea("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ea("http://www.opengis.net/gml/srs/epsg.xml#3857")];function sD(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let r=0;r<i;r+=n){t[r]=Ua*e[r]/180;let s=Qu*Math.log(Math.tan(Math.PI*(+e[r+1]+90)/360));s>th?s=th:s<-th&&(s=-th),t[r+1]=s}return t}function oD(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let r=0;r<i;r+=n)t[r]=180*e[r]/Ua,t[r+1]=360*Math.atan(Math.exp(e[r+1]/Qu))/Math.PI-90;return t}const aD=6378137,Sv=[-180,-90,180,90],lD=Math.PI*aD/180;class lo extends ZS{constructor(t,n){super({code:t,units:"degrees",extent:Sv,axisOrientation:n,global:!0,metersPerUnit:lD,worldExtent:Sv})}}const Mv=[new lo("CRS:84"),new lo("EPSG:4326","neu"),new lo("urn:ogc:def:crs:OGC:1.3:CRS84"),new lo("urn:ogc:def:crs:OGC:2:84"),new lo("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new lo("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new lo("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let py={};function cD(e){return py[e]||py[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function uD(e,t){py[e]=t}let rl={};function ud(e,t,n){const i=e.getCode(),r=t.getCode();i in rl||(rl[i]={}),rl[i][r]=n}function fD(e,t){let n;return e in rl&&t in rl[e]&&(n=rl[e][t]),n}function Rv(e,t,n){const i=n!==void 0?e.toFixed(n):""+e;let r=i.indexOf(".");return r=r===-1?i.length:r,r>t?i:new Array(1+t-r).join("0")+i}function hD(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function Iv(e,t,n){const i=Wo(t+180,360)-180,r=Math.abs(3600*i),s=n||0;let o=Math.floor(r/3600),a=Math.floor((r-o*3600)/60),l=om(r-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"°";return(a!==0||l!==0)&&(c+=" "+Rv(a,2)+"′"),l!==0&&(c+=" "+Rv(l,2,s)+"″"),i!==0&&(c+=" "+e.charAt(i<0?1:0)),c}function fd(e,t){let n=!0;for(let i=e.length-1;i>=0;--i)if(e[i]!=t[i]){n=!1;break}return n}function R1(e,t){const n=Math.cos(t),i=Math.sin(t),r=e[0]*n-e[1]*i,s=e[1]*n+e[0]*i;return e[0]=r,e[1]=s,e}function dD(e,t){return e[0]*=t,e[1]*=t,e}function gD(e,t){return e?Iv("NS",e[1],t)+" "+Iv("EW",e[0],t):""}function qS(e,t){if(t.canWrapX()){const n=Qt(t.getExtent()),i=mD(e,t,n);i&&(e[0]-=i*n)}return e}function mD(e,t,n){const i=t.getExtent();let r=0;return t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])&&(n=n||Qt(i),r=Math.floor((e[0]-i[0])/n)),r}const pD=63710088e-1;function Av(e,t,n){n=n||pD;const i=Xh(e[1]),r=Xh(t[1]),s=(r-i)/2,o=Xh(t[0]-e[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const KS={info:1,warn:2,error:3,none:4};let yD=KS.info;function JS(...e){yD>KS.warn||console.warn(...e)}let yy=!0;function _D(e){yy=!(e===void 0?!0:e)}function I1(e,t){if(t!==void 0){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];t=t}else t=e.slice();return t}function QS(e,t){if(t!==void 0&&e!==t){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function wD(e){uD(e.getCode(),e),ud(e,e,I1)}function xD(e){e.forEach(wD)}function Oe(e){return typeof e=="string"?cD(e):e||null}function hd(e,t,n,i){e=Oe(e);let r;const s=e.getPointResolutionFunc();if(s){if(r=s(t,n),i&&i!==e.getUnits()){const o=e.getMetersPerUnit();o&&(r=r*o/bl[i])}}else{const o=e.getUnits();if(o=="degrees"&&!i||i=="degrees")r=t;else{const a=L1(e,Oe("EPSG:4326"));if(a===QS&&o!=="degrees")r=t*e.getMetersPerUnit();else{let c=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];c=a(c,c,2);const u=Av(c.slice(0,2),c.slice(2,4)),f=Av(c.slice(4,6),c.slice(6,8));r=(u+f)/2}const l=i?bl[i]:e.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function Lv(e){xD(e),e.forEach(function(t){e.forEach(function(n){t!==n&&ud(t,n,I1)})})}function bD(e,t,n,i){e.forEach(function(r){t.forEach(function(s){ud(r,s,n),ud(s,r,i)})})}function A1(e,t){return e?typeof e=="string"?Oe(e):e:Oe(t)}function vo(e,t){if(e===t)return!0;const n=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||L1(e,t)===I1)&&n}function L1(e,t){const n=e.getCode(),i=t.getCode();let r=fD(n,i);return r||(r=QS),r}function dd(e,t){const n=Oe(e),i=Oe(t);return L1(n,i)}function vD(e,t,n){return dd(t,n)(e,void 0,e.length)}function _y(e,t){return e}function br(e,t){return yy&&!fd(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(yy=!1,JS("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function tM(e,t){return e}function Ir(e,t){return e}function ED(){Lv(Cv),Lv(Mv),bD(Mv,Cv,sD,oD)}ED();function Ov(e,t,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!t)return i;const l=t?0:s[0]*r,c=t?0:s[1]*r,u=a?a[0]:0,f=a?a[1]:0;let h=e[0]+l/2+u,d=e[2]-l/2+u,g=e[1]+c/2+f,m=e[3]-c/2+f;h>d&&(h=(d+h)/2,d=h),g>m&&(g=(m+g)/2,m=g);let _=Re(i[0],h,d),p=Re(i[1],g,m);if(o&&n&&r){const y=30*r;_+=-y*Math.log(1+Math.max(0,h-i[0])/y)+y*Math.log(1+Math.max(0,i[0]-d)/y),p+=-y*Math.log(1+Math.max(0,g-i[1])/y)+y*Math.log(1+Math.max(0,i[1]-m)/y)}return[_,p]}}function TD(e){return e}function O1(e,t,n,i){const r=Qt(t)/n[0],s=Gn(t)/n[1];return i?Math.min(e,Math.max(r,s)):Math.min(e,Math.min(r,s))}function k1(e,t,n){let i=Math.min(e,t);const r=50;return i*=Math.log(1+r*Math.max(0,e/t-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/e-1))/r+1),Re(i,n/2,t*2)}function CD(e,t,n,i){return t=t!==void 0?t:!0,function(r,s,o,a){if(r!==void 0){const l=e[0],c=e[e.length-1],u=n?O1(l,n,o,i):l;if(a)return t?k1(r,u,c):Re(r,c,u);const f=Math.min(u,r),h=Math.floor(v1(e,f,s));return e[h]>u&&h<e.length-1?e[h+1]:e[h]}}}function SD(e,t,n,i,r,s){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,c){if(o!==void 0){const u=r?O1(t,r,l,s):t;if(c)return i?k1(o,u,n):Re(o,n,u);const f=1e-9,h=Math.ceil(Math.log(t/u)/Math.log(e)-f),d=-a*(.5-f)+.5,g=Math.min(u,o),m=Math.floor(Math.log(t/g)/Math.log(e)+d),_=Math.max(h,m),p=t/Math.pow(e,_);return Re(p,n,u)}}}function kv(e,t,n,i,r){return n=n!==void 0?n:!0,function(s,o,a,l){if(s!==void 0){const c=i?O1(e,i,a,r):e;return!n||!l?Re(s,t,c):k1(s,c,t)}}}function P1(e){if(e!==void 0)return 0}function Pv(e){if(e!==void 0)return e}function MD(e){const t=2*Math.PI/e;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/t+.5)*t,n}}function RD(e){return e=e||Xh(5),function(t,n){if(n)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}function eM(e){return Math.pow(e,3)}function jl(e){return 1-eM(1-e)}function ID(e){return 3*e*e-2*e*e*e}function AD(e){return e}function Yo(e,t,n,i,r,s){s=s||[];let o=0;for(let a=t;a<n;a+=i){const l=e[a],c=e[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function nM(e,t,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let f=0;for(let h=t;h<n;h+=i){const d=e[h]-c,g=e[h+1]-u;o[f++]=c+d*a-g*l,o[f++]=u+d*l+g*a;for(let m=h+2;m<h+i;++m)o[f++]=e[m]}return o&&o.length!=f&&(o.length=f),o}function LD(e,t,n,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let f=t;f<n;f+=i){const h=e[f]-l,d=e[f+1]-c;a[u++]=l+r*h,a[u++]=c+s*d;for(let g=f+2;g<f+i;++g)a[u++]=e[g]}return a&&a.length!=u&&(a.length=u),a}function OD(e,t,n,i,r,s,o){o=o||[];let a=0;for(let l=t;l<n;l+=i){o[a++]=e[l]+r,o[a++]=e[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=e[c]}return o&&o.length!=a&&(o.length=a),o}const Fv=Si();class kD extends Fi{constructor(){super(),this.extent_=ai(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=CN(function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})}simplifyTransformed(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)}clone(){return xt()}closestPointXY(t,n,i,r){return xt()}containsXY(t,n){const i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n}getClosestPoint(t,n){return n=n||[NaN,NaN],this.closestPointXY(t[0],t[1],n,1/0),n}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return xt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Ju(n),this.extentRevision_=this.getRevision()}return YN(this.extent_,t)}rotate(t,n){xt()}scale(t,n,i){xt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return xt()}getType(){return xt()}applyTransform(t){xt()}intersectsExtent(t){return xt()}translate(t,n){xt()}transform(t,n){const i=Oe(t),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=Gn(c)/Gn(l);return Ri(Fv,c[0],c[3],u,-u,0,0,0),Yo(s,0,s.length,a,Fv,o),dd(i,n)(s,o,a)}:dd(i,n);return this.applyTransform(r),this}}const iM=kD;class PD extends iM{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return WS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return xt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,n){this.stride=Nv(t),this.layout=t,this.flatCoordinates=n}setCoordinates(t,n){xt()}setLayout(t,n,i){let r;if(t)r=Nv(t);else{for(let s=0;s<i;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,t=FD(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();nM(i,0,i.length,r,t,n,i),this.changed()}}scale(t,n,i){n===void 0&&(n=t),i||(i=Ko(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();LD(r,0,r.length,s,t,n,i,r),this.changed()}}translate(t,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();OD(i,0,i.length,r,t,n,i),this.changed()}}}function FD(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function Nv(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function ND(e,t,n){const i=e.getFlatCoordinates();if(!i)return null;const r=e.getStride();return Yo(i,0,i.length,r,t,n)}const da=PD;function Dv(e,t,n,i,r,s,o){const a=e[t],l=e[t+1],c=e[n]-a,u=e[n+1]-l;let f;if(c===0&&u===0)f=t;else{const h=((r-a)*c+(s-l)*u)/(c*c+u*u);if(h>1)f=n;else if(h>0){for(let d=0;d<i;++d)o[d]=Pn(e[t+d],e[n+d],h);o.length=i;return}else f=t}for(let h=0;h<i;++h)o[h]=e[f+h];o.length=i}function F1(e,t,n,i,r){let s=e[t],o=e[t+1];for(t+=i;t<n;t+=i){const a=e[t],l=e[t+1],c=Go(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function N1(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=F1(e,t,a,i,r),t=a}return r}function DD(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=N1(e,t,a,i,r),t=a[a.length-1]}return r}function D1(e,t,n,i,r,s,o,a,l,c,u){if(t==n)return c;let f,h;if(r===0){if(h=Go(o,a,e[t],e[t+1]),h<c){for(f=0;f<i;++f)l[f]=e[t+f];return l.length=i,h}return c}u=u||[NaN,NaN];let d=t+i;for(;d<n;)if(Dv(e,d-i,d,i,o,a,u),h=Go(o,a,u[0],u[1]),h<c){for(c=h,f=0;f<i;++f)l[f]=u[f];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(h)-Math.sqrt(c))/r|0,1);if(s&&(Dv(e,n-i,t,i,o,a,u),h=Go(o,a,u[0],u[1]),h<c)){for(c=h,f=0;f<i;++f)l[f]=u[f];l.length=i}return c}function $1(e,t,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let f=0,h=n.length;f<h;++f){const d=n[f];c=D1(e,t,d,i,r,s,o,a,l,c,u),t=d}return c}function $D(e,t,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let f=0,h=n.length;f<h;++f){const d=n[f];c=$1(e,t,d,i,r,s,o,a,l,c,u),t=d[d.length-1]}return c}function zD(e,t,n,i){for(let r=0,s=n.length;r<s;++r)e[t++]=n[r];return t}function am(e,t,n,i){for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0;a<i;++a)e[t++]=o[a]}return t}function z1(e,t,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=am(e,t,n[o],i);r[s++]=l,t=l}return r.length=s,r}function GD(e,t,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=z1(e,t,n[o],i,r[s]);l.length===0&&(l[0]=t),r[s++]=l,t=l[l.length-1]}return r.length=s,r}function G1(e,t,n,i,r,s,o){const a=(n-t)/i;if(a<3){for(;t<n;t+=i)s[o++]=e[t],s[o++]=e[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,n-i];let u=0;for(;c.length>0;){const f=c.pop(),h=c.pop();let d=0;const g=e[h],m=e[h+1],_=e[f],p=e[f+1];for(let y=h+i;y<f;y+=i){const x=e[y],w=e[y+1],v=XN(x,w,g,m,_,p);v>d&&(u=y,d=v)}d>r&&(l[(u-t)/i]=1,h+i<u&&c.push(h,u),u+i<f&&c.push(u,f))}for(let f=0;f<a;++f)l[f]&&(s[o++]=e[t+f*i],s[o++]=e[t+f*i+1]);return o}function WD(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=G1(e,t,u,i,r,s,o),a.push(o),t=u}return o}function po(e,t){return t*Math.round(e/t)}function YD(e,t,n,i,r,s,o){if(t==n)return o;let a=po(e[t],r),l=po(e[t+1],r);t+=i,s[o++]=a,s[o++]=l;let c,u;do if(c=po(e[t],r),u=po(e[t+1],r),t+=i,t==n)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;t<n;){const f=po(e[t],r),h=po(e[t+1],r);if(t+=i,f==c&&h==u)continue;const d=c-a,g=u-l,m=f-a,_=h-l;if(d*_==g*m&&(d<0&&m<d||d==m||d>0&&m>d)&&(g<0&&_<g||g==_||g>0&&_>g)){c=f,u=h;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=f,u=h}return s[o++]=c,s[o++]=u,o}function rM(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=YD(e,t,u,i,r,s,o),a.push(o),t=u}return o}function BD(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],f=[];o=rM(e,t,u,i,r,s,o,f),a.push(f),t=u[u.length-1]}return o}function Ls(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=t;o<n;o+=i)r[s++]=e.slice(o,o+i);return r.length=s,r}function xu(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=Ls(e,t,l,i,r[s]),t=l}return r.length=s,r}function wy(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=l.length===1&&l[0]===t?[]:xu(e,t,l,i,r[s]),t=l[l.length-1]}return r.length=s,r}function sM(e,t,n,i){let r=0,s=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];r+=o*a-s*l,s=a,o=l}return r/2}function oM(e,t,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=sM(e,t,a,i),t=a}return r}function UD(e,t,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=oM(e,t,a,i),t=a[a.length-1]}return r}class gd extends da{constructor(t,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}clone(){return new gd(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,n,i,r){return r<fa(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(F1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),D1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,r))}getArea(){return sM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ls(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const n=[];return n.length=G1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new gd(n,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=am(this.flatCoordinates,0,t,this.stride),this.changed()}}const $v=gd;let VD=class aM extends da{constructor(t,n){super(),this.setCoordinates(t,n)}clone(){const t=new aM(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){const s=this.flatCoordinates,o=Go(t,n,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return zN(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return S1(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=zD(this.flatCoordinates,0,t,this.stride),this.changed()}};const vl=VD;function XD(e,t,n,i,r){return!US(r,function(o){return!So(e,t,n,i,o[0],o[1])})}function So(e,t,n,i,r,s){let o=0,a=e[n-i],l=e[n-i+1];for(;t<n;t+=i){const c=e[t],u=e[t+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function W1(e,t,n,i,r,s){if(n.length===0||!So(e,t,n[0],i,r,s))return!1;for(let o=1,a=n.length;o<a;++o)if(So(e,n[o-1],n[o],i,r,s))return!1;return!0}function HD(e,t,n,i,r,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(W1(e,t,l,i,r,s))return!0;t=l[l.length-1]}return!1}function lM(e,t,n,i,r,s,o){let a,l,c,u,f,h,d;const g=r[s+1],m=[];for(let y=0,x=n.length;y<x;++y){const w=n[y];for(u=e[w-i],h=e[w-i+1],a=t;a<w;a+=i)f=e[a],d=e[a+1],(g<=h&&d<=g||h<=g&&g<=d)&&(c=(g-h)/(d-h)*(f-u)+u,m.push(c)),u=f,h=d}let _=NaN,p=-1/0;for(m.sort(Gs),u=m[0],a=1,l=m.length;a<l;++a){f=m[a];const y=Math.abs(f-u);y>p&&(c=(u+f)/2,W1(e,t,n,i,c,g)&&(_=c,p=y)),u=f}return isNaN(_)&&(_=r[s]),o?(o.push(_,g,p),o):[_,g,p]}function jD(e,t,n,i,r){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=lM(e,t,l,i,r,2*o,s),t=l[l.length-1]}return s}function cM(e,t,n,i,r){let s;for(t+=i;t<n;t+=i)if(s=r(e.slice(t-i,t),e.slice(t,t+i)),s)return s;return!1}function lm(e,t,n,i,r){const s=BS(ai(),e,t,n,i);return hn(r,s)?As(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:cM(e,t,n,i,function(o,a){return UN(r,o,a)}):!1}function ZD(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){if(lm(e,t,n[s],i,r))return!0;t=n[s]}return!1}function uM(e,t,n,i,r){return!!(lm(e,t,n,i,r)||So(e,t,n,i,r[0],r[1])||So(e,t,n,i,r[0],r[3])||So(e,t,n,i,r[2],r[1])||So(e,t,n,i,r[2],r[3]))}function fM(e,t,n,i,r){if(!uM(e,t,n[0],i,r))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(XD(e,n[s-1],n[s],i,r)&&!lm(e,n[s-1],n[s],i,r))return!1;return!0}function qD(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(fM(e,t,a,i,r))return!0;t=a[a.length-1]}return!1}function KD(e,t,n,i){for(;t<n-i;){for(let r=0;r<i;++r){const s=e[t+r];e[t+r]=e[n-i+r],e[n-i+r]=s}t+=i,n-=i}}function hM(e,t,n,i){let r=0,s=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function dM(e,t,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=hM(e,t,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=a}return!0}function JD(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!dM(e,t,a,i,r))return!1;a.length&&(t=a[a.length-1])}return!0}function xy(e,t,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=hM(e,t,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&KD(e,t,a,i),t=a}return t}function zv(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s)t=xy(e,t,n[s],i,r);return t}let gM=class by extends da{constructor(t,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,t),this.ends_=i):this.setCoordinates(t,n)}appendLinearRing(t){this.flatCoordinates?Nr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new by(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<fa(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(N1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,r))}containsXY(t,n){return W1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)}getArea(){return oM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),xy(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,xu(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Ko(this.getExtent());this.flatInteriorPoint_=lM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new vl(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new $v(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,n=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new $v(n.slice(s,l),t);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;dM(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=xy(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=rM(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new by(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return fM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=z1(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}};const md=gM;function vy(e){if(Hl(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],n=e[1],i=e[2],r=e[3],s=[t,n,t,r,i,r,i,n,t,n];return new gM(s,"XY",[s.length])}const O0=0;class QD extends Fi{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=A1(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&_D(),t.center&&(t.center=br(t.center,this.projection_)),t.extent&&(t.extent=Ir(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const n=Object.assign({},t);for(const a in ui)delete n[a];this.setProperties(n,!0);const i=e8(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const r=t8(t),s=i.constraint,o=n8(t);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let n=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const r=t||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),a=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=br(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=br(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)}animateInternal(t){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===n){i&&eh(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<n;++r){const u=arguments[r],f={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||ID,callback:i};if(u.center&&(f.sourceCenter=o,f.targetCenter=u.center.slice(),o=f.targetCenter),u.zoom!==void 0?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(u.zoom),a=f.targetResolution):u.resolution&&(f.sourceResolution=a,f.targetResolution=u.resolution,a=f.targetResolution),u.rotation!==void 0){f.sourceRotation=l;const h=Wo(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=l+h,l=f.targetRotation}i8(f)?f.complete=!0:s+=f.duration,c.push(f)}this.animations_.push(c),this.setHint(Me.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Me.ANIMATING]>0}getInteracting(){return this.hints_[Me.INTERACTING]>0}cancelAnimations(){this.setHint(Me.ANIMATING,-this.hints_[Me.ANIMATING]);let t;for(let n=0,i=this.animations_.length;n<i;++n){const r=this.animations_[n];if(r[0].callback&&eh(r[0].callback,!1),!t)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=t-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const f=l.easing(u);if(l.sourceCenter){const h=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const _=h+f*(g-h),p=d+f*(m-d);this.targetCenter_=[_,p]}if(l.sourceResolution&&l.targetResolution){const h=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(h,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const h=f===1?Wo(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Me.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&eh(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,n){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-n[0],r[1]-n[1]],R1(i,t-this.getRotation()),hD(i,n)),i}calculateCenterZoom(t,n){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=n[0]-t*(n[0]-r[0])/s,a=n[1]-t*(n[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(t){const n=this.viewportSize_;if(t){const i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&_y(t,this.getProjection())}getCenterInternal(){return this.get(ui.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const n=this.calculateExtentInternal(t);return tM(n,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();Dt(n,"The view center is not defined");const i=this.getResolution();Dt(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Dt(r!==void 0,"The view rotation is not defined"),gy(n,i,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(ui.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,n){return this.getResolutionForExtentInternal(Ir(t,this.getProjection()),n)}getResolutionForExtentInternal(t,n){n=n||this.getViewportSizeMinusPadding_();const i=Qt(t)/n[0],r=Gn(t)/n[1];return Math.max(i,r)}getResolutionForValueFunction(t){t=t||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(t);return function(s){return n/Math.pow(t,s*r)}}getRotation(){return this.get(ui.ROTATION)}getValueForResolutionFunction(t){const n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/n;return function(o){return Math.log(i/o)/n/s}}getViewportSizeMinusPadding_(t){let n=this.getViewportSize_(t);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const t=this.getProjection(),n=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=k0(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t}getZoomForResolution(t){let n=this.minZoom_||0,i,r;if(this.resolutions_){const s=v1(this.resolutions_,t,1);n=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=Re(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Re(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,n){let i;if(Dt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Dt(!Hl(t),"Cannot fit empty extent provided as `geometry`");const r=Ir(t,this.getProjection());i=vy(r)}else if(t.getType()==="Circle"){const r=Ir(t.getExtent(),this.getProjection());i=vy(r),i.rotate(this.getRotation(),Ko(r))}else i=t;this.fitInternal(i,n)}rotatedExtentForGeometry(t){const n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let f=0,h=s.length;f<h;f+=o){const d=s[f]*i-s[f+1]*r,g=s[f]*r+s[f+1]*i;a=Math.min(a,d),l=Math.min(l,g),c=Math.max(c,d),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(t,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const r=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),f=Math.cos(c),h=Ko(a);h[0]+=(r[1]-r[3])/2*l,h[1]+=(r[0]-r[2])/2*l;const d=h[0]*f-h[1]*u,g=h[1]*f+h[0]*u,m=this.getConstrainedCenter([d,g],l),_=n.callback?n.callback:wl;n.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:n.duration,easing:n.easing},_):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),eh(_,!0))}centerOn(t,n,i){this.centerOnInternal(br(t,this.getProjection()),n,i)}centerOnInternal(t,n,i){this.setCenterInternal(k0(t,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,n,i,r){let s;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),l=k0(t,r,[a[0]/2+o[3],a[1]/2+o[0]],n,i);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const n=_y(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])}adjustCenterInternal(t){const n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])}adjustResolution(t,n){n=n&&br(n,this.getProjection()),this.adjustResolutionInternal(t,n)}adjustResolutionInternal(t,n){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,i);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)}adjustRotation(t,n){n&&(n=br(n,this.getProjection())),this.adjustRotationInternal(t,n)}adjustRotationInternal(t,n){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&br(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,n){const i=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(ui.ROTATION)!==r&&this.set(ui.ROTATION,r),this.get(ui.RESOLUTION)!==o&&(this.set(ui.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ui.CENTER)||!fd(this.get(ui.CENTER),a))&&this.set(ui.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,n,i){t=t!==void 0?t:200;const r=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!fd(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:t,easing:jl,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Me.INTERACTING,1)}endInteraction(t,n,i){i=i&&br(i,this.getProjection()),this.endInteractionInternal(t,n,i)}endInteractionInternal(t,n,i){this.getInteracting()&&(this.setHint(Me.INTERACTING,-1),this.resolveConstraints(t,n,i))}getConstrainedCenter(t,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)}getConstrainedZoom(t,n){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(t,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)}}function eh(e,t){setTimeout(function(){e(t)},0)}function t8(e){if(e.extent!==void 0){const n=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return Ov(e.extent,e.constrainOnlyCenter,n)}const t=A1(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Ov(n,!1,!1)}return TD}function e8(e){let t,n,i,o=e.minZoom!==void 0?e.minZoom:O0,a=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,c=e.multiWorld!==void 0?e.multiWorld:!1,u=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,f=e.showFullExtent!==void 0?e.showFullExtent:!1,h=A1(e.projection,"EPSG:3857"),d=h.getExtent();let g=e.constrainOnlyCenter,m=e.extent;if(!c&&!m&&h.isGlobal()&&(g=!1,m=d),e.resolutions!==void 0){const _=e.resolutions;n=_[o],i=_[a]!==void 0?_[a]:_[_.length-1],e.constrainResolution?t=CD(_,u,!g&&m,f):t=kv(n,i,u,!g&&m,f)}else{const p=(d?Math.max(Qt(d),Gn(d)):360*bl.degrees/h.getMetersPerUnit())/M1/Math.pow(2,O0),y=p/Math.pow(2,28-O0);n=e.maxResolution,n!==void 0?o=0:n=p/Math.pow(l,o),i=e.minResolution,i===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?i=n/Math.pow(l,a):i=p/Math.pow(l,a):i=y),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),e.constrainResolution?t=SD(l,n,i,u,!g&&m,f):t=kv(n,i,u,!g&&m,f)}return{constraint:t,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function n8(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const n=e.constrainRotation;return n===void 0||n===!0?RD():n===!1?Pv:typeof n=="number"?MD(n):Pv}return P1}function i8(e){return!(e.sourceCenter&&e.targetCenter&&!fd(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function k0(e,t,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=e[0]*s-e[1]*o,l=e[1]*s+e[0]*o;a+=(t[0]/2-n[0])*i,l+=(n[1]-t[1]/2)*i,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const Ui=QD;class r8 extends jS{constructor(t){const n=Object.assign({},t);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(qt.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(qt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ee(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Pt(t,Et.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let n;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof Ui?n={viewState:t.getState(),extent:t.calculateExtent()}:n=t,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;n.layerStatesArray?r=n.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return Y1(r,n.viewState)&&(!s||hn(s,n.extent))}getAttributions(t){if(!this.isVisible(t))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const r=t instanceof Ui?t.getViewStateAndExtent():t;let s=n(r);return Array.isArray(s)||(s=[s]),s}render(t,n){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,n)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(qt.MAP,t)}getMapInternal(){return this.get(qt.MAP)}setMap(t){this.mapPrecomposeKey_&&(ee(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(ee(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Pt(t,Ji.PRECOMPOSE,function(n){const r=n.frameState.layerStatesArray,s=this.getLayerState(!1);Dt(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=Pt(this,Et.CHANGE,t.render,t),this.changed())}setSource(t){this.set(qt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Y1(e,t){if(!e.visible)return!1;const n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;const i=t.zoom;return i>e.minZoom&&i<=e.maxZoom}const cm=r8;class s8 extends b1{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,n){xt()}calculateMatrices2D(t){const n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Ri(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),nm(r,i)}forEachFeatureAtCoordinate(t,n,i,r,s,o,a,l){let c;const u=n.viewState;function f(w,v,b,E){return s.call(o,v,w?b:null,E)}const h=u.projection,d=qS(t.slice(),h),g=[[0,0]];if(h.canWrapX()&&r){const w=h.getExtent(),v=Qt(w);g.push([-v,0],[v,0])}const m=n.layerStatesArray,_=m.length,p=[],y=[];for(let w=0;w<g.length;w++)for(let v=_-1;v>=0;--v){const b=m[v],E=b.layer;if(E.hasRenderer()&&Y1(b,u)&&a.call(l,E)){const C=E.getRenderer(),I=E.getSource();if(C&&I){const S=I.getWrapX()?d:t,R=f.bind(null,b.managed);y[0]=S[0]+g[w][0],y[1]=S[1]+g[w][1],c=C.forEachFeatureAtCoordinate(y,n,i,R,p)}if(c)return c}}if(p.length===0)return;const x=1/p.length;return p.forEach((w,v)=>w.distanceSq+=v*x),p.sort((w,v)=>w.distanceSq-v.distanceSq),p.some(w=>c=w.callback(w.feature,w.layer,w.geometry)),c}hasFeatureAtCoordinate(t,n,i,r,s,o){return this.forEachFeatureAtCoordinate(t,n,i,r,_u,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(t){xt()}flushDeclutterItems(t){}scheduleExpireIconCache(t){cd.canExpireCache()&&t.postRenderFunctions.push(o8)}}function o8(e,t){cd.expire()}const a8=s8;class l8 extends Jr{constructor(t,n,i,r){super(t),this.inversePixelTransform=n,this.frameState=i,this.context=r}}const mM=l8,nh="ol-hidden",c8="ol-selectable",ga="ol-unselectable",Gv="ol-unsupported",tf="ol-control",Wv="ol-collapsed",u8=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Yv=["style","variant","weight","size","lineHeight","family"],pM=function(e){const t=e.match(u8);if(!t)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Yv.length;i<r;++i){const s=t[i+1];s!==void 0&&(n[Yv[i]]=s)}return n.families=n.family.split(/,\s?/),n};function mn(e,t,n,i){let r;return n&&n.length?r=n.shift():E1?r=new OffscreenCanvas(e||300,t||300):r=document.createElement("canvas"),e&&(r.width=e),t&&(r.height=t),r.getContext("2d",i)}function um(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function f8(e){let t=e.offsetWidth;const n=getComputedStyle(e);return t+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),t}function h8(e){let t=e.offsetHeight;const n=getComputedStyle(e);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),t}function pd(e,t){const n=t.parentNode;n&&n.replaceChild(e,t)}function yd(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function yM(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function d8(e,t){const n=e.childNodes;for(let i=0;;++i){const r=n[i],s=t[i];if(!r&&!s)break;if(r!==s){if(!r){e.appendChild(s);continue}if(!s){e.removeChild(r),--i;continue}e.insertBefore(s,r)}}}const _M="10px sans-serif",vn="#000",El="round",Dr=[],$r=0,Tl="round",bu=10,vu="#000",Eu="center",_d="middle",Mo=[0,0,0,0],Tu=1,vr=new Fi;let Ga=null,Ey;const Ty={},g8=function(){const t="32px ",n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(c,u,f){let h=!0;for(let d=0;d<i;++d){const g=n[d];if(o=wd(c+" "+u+" "+t+g,r),f!=g){const m=wd(c+" "+u+" "+t+f+","+g,r);h=h&&m!=o}}return!!h}function l(){let c=!0;const u=vr.getKeys();for(let f=0,h=u.length;f<h;++f){const d=u[f];vr.get(d)<100&&(a.apply(this,d.split(`
`))?(Zu(Ty),Ga=null,Ey=void 0,vr.set(d,100)):(vr.set(d,vr.get(d)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const u=pM(c);if(!u)return;const f=u.families;for(let h=0,d=f.length;h<d;++h){const g=f[h],m=u.style+`
`+u.weight+`
`+g;vr.get(m)===void 0&&(vr.set(m,100,!0),a(u.style,u.weight,g)||(vr.set(m,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),m8=function(){let e;return function(t){let n=Ty[t];if(n==null){if(E1){const i=pM(t),r=wM(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),n=e.offsetHeight,document.body.removeChild(e);Ty[t]=n}return n}}();function wM(e,t){return Ga||(Ga=mn(1,1)),e!=Ey&&(Ga.font=e,Ey=Ga.font),Ga.measureText(t)}function wd(e,t){return wM(e,t).width}function Bv(e,t,n){if(t in n)return n[t];const i=t.split(`
`).reduce((r,s)=>Math.max(r,wd(e,s)),0);return n[t]=i,i}function p8(e,t){const n=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=t.length;c<=u;c+=2){const f=t[c];if(f===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const h=t[c+1]||e.font,d=wd(h,f);n.push(d),o+=d;const g=m8(h);i.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:n,heights:i,lineWidths:r}}function y8(e,t,n,i,r,s,o,a,l,c,u){e.save(),n!==1&&(e.globalAlpha*=n),t&&e.transform.apply(e,t),i.contextInstructions?(e.translate(l,c),e.scale(u[0],u[1]),_8(i,e)):u[0]<0||u[1]<0?(e.translate(l,c),e.scale(u[0],u[1]),e.drawImage(i,r,s,o,a,0,0,o,a)):e.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),e.restore()}function _8(e,t){const n=e.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?t[n[i]].apply(t,n[i+1]):t[n[i]]=n[i+1]}class w8 extends a8{constructor(t){super(t),this.fontChangeListenerKey_=Pt(vr,_l.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=ga+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,n){const i=this.getMap();if(i.hasListener(t)){const r=new mM(t,void 0,n);i.dispatchEvent(r)}}disposeInternal(){ee(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Ji.PRECOMPOSE,t);const n=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;const r=this.declutterLayers_;r.length=0;let s=null;for(let o=0,a=n.length;o<a;++o){const l=n[o];t.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!Y1(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const f=c.render(t,s);f&&(f!==s&&(this.children_.push(f),s=f),"getDeclutter"in c&&r.push(c))}this.flushDeclutterItems(t),d8(this.element_,this.children_),this.dispatchRenderEvent(Ji.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const n=this.declutterLayers_;for(let i=n.length-1;i>=0;--i)n[i].renderDeclutter(t);n.length=0}}const x8=w8;class bs extends Jr{constructor(t,n){super(t),this.layer=n}}const P0={LAYERS:"layers"};class B1 extends jS{constructor(t){t=t||{};const n=Object.assign({},t);delete n.layers;let i=t.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(P0.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new ji(i.slice(),{unique:!0}):Dt(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new ji(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ee),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Pt(t,bn.ADD,this.handleLayersAdd_,this),Pt(t,bn.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(ee);Zu(this.listenerKeys_);const n=t.getArray();for(let i=0,r=n.length;i<r;i++){const s=n[i];this.registerLayerListeners_(s),this.dispatchEvent(new bs("addlayer",s))}this.changed()}registerLayerListeners_(t){const n=[Pt(t,_l.PROPERTYCHANGE,this.handleLayerChange_,this),Pt(t,Et.CHANGE,this.handleLayerChange_,this)];t instanceof B1&&n.push(Pt(t,"addlayer",this.handleLayerGroupAdd_,this),Pt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Vt(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new bs("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new bs("removelayer",t.layer))}handleLayersAdd_(t){const n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new bs("addlayer",n)),this.changed()}handleLayersRemove_(t){const n=t.element,i=Vt(n);this.listenerKeys_[i].forEach(ee),delete this.listenerKeys_[i],this.dispatchEvent(new bs("removelayer",n)),this.changed()}getLayers(){return this.get(P0.LAYERS)}setLayers(t){const n=this.getLayers();if(n){const i=n.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new bs("removelayer",i[r]))}this.set(P0.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(n){n.getLayersArray(t)}),t}getLayerStatesArray(t){const n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const r=this.getLayerState();let s=r.zIndex;!t&&r.zIndex===void 0&&(s=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=il(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}}const fm=B1;class b8 extends Jr{constructor(t,n,i){super(t),this.map=n,this.frameState=i!==void 0?i:null}}const Wa=b8;class v8 extends Wa{constructor(t,n,i,r,s,o){super(t,n,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ys=v8,we={SINGLECLICK:"singleclick",CLICK:Et.CLICK,DBLCLICK:Et.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Cy={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class E8 extends qu{constructor(t,n){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Pt(i,Cy.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Pt(i,Cy.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Et.TOUCHMOVE,this.boundHandleTouchMove_,zS?{passive:!1}:!1)}emulateClick_(t){let n=new ys(we.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new ys(we.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new ys(we.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const n=t,i=n.pointerId;if(n.type==we.POINTERUP||n.type==we.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==we.POINTERDOWN||n.type==we.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const n=new ys(we.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ee),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const n=new ys(we.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Pt(i,we.POINTERMOVE,this.handlePointerMove_,this),Pt(i,we.POINTERUP,this.handlePointerUp_,this),Pt(this.element_,we.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Pt(this.element_.getRootNode(),we.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const n=new ys(we.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new ys(we.POINTERMOVE,this.map_,t,n))}handleTouchMove_(t){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ee(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Et.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ee(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ee),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const T8=E8,Cr={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},$e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},xd=1/0;class C8{constructor(t,n){this.priorityFunction_=t,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Zu(this.queuedElements_)}dequeue(){const t=this.elements_,n=this.priorities_,i=t[0];t.length==1?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(t){Dt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(t);return n!=xd?(this.elements_.push(t),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const n=this.elements_,i=this.priorities_,r=n.length,s=n[t],o=i[t],a=t;for(;t<r>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),u=c<r&&i[c]<i[l]?c:l;n[t]=n[u],i[t]=i[u],t=u}n[t]=s,i[t]=o,this.siftDown_(a,t)}siftDown_(t,n){const i=this.elements_,r=this.priorities_,s=i[n],o=r[n];for(;n>t;){const a=this.getParentIndex_(n);if(r[a]>o)i[n]=i[a],r[n]=r[a],n=a;else break}i[n]=s,r[n]=o}reprioritize(){const t=this.priorityFunction_,n=this.elements_,i=this.priorities_;let r=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=t(o),l==xd?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,n[r++]=o);n.length=r,i.length=r,this.heapify_()}}const S8=C8,ht={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class M8 extends S8{constructor(t,n){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const n=super.enqueue(t);return n&&t[0].addEventListener(Et.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const n=t.target,i=n.getState();if(i===ht.LOADED||i===ht.ERROR||i===ht.EMPTY){i!==ht.ERROR&&n.removeEventListener(Et.CHANGE,this.boundHandleTileChange_);const r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,n){let i=0,r,s,o;for(;this.tilesLoading_<t&&i<n&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===ht.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}const R8=M8;function I8(e,t,n,i,r){if(!e||!(n in e.wantedTiles)||!e.wantedTiles[n][t.getKey()])return xd;const s=e.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class A8 extends Fi{constructor(t){super();const n=t.element;n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){yd(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&yd(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)ee(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==wl&&this.listenerKeys.push(Pt(t,Cr.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Zl=A8;class L8 extends Zl{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:n+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"›",o=t.collapseClassName!==void 0?t.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Et.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+ga+" "+tf+(this.collapsed_&&this.collapsible_?" "+Wv:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(t)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Zs(n,this.renderedAttributions_)){yM(this.ulElement_);for(let r=0,s=n.length;r<s;++r){const o=document.createElement("li");o.innerHTML=n[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Wv),this.collapsed_?pd(this.collapseLabel_,this.label_):pd(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const O8=L8;class k8 extends Zl{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const n=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"⇧",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(Et.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+ga+" "+tf,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(nh)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:jl}):n.setRotation(0))}render(t){const n=t.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(nh);!s&&i===0?this.element.classList.add(nh):s&&i!==0&&this.element.classList.remove(nh)}this.label_.style.transform=r}this.rotation_=i}}const P8=k8;class F8 extends Zl{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const n=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:n+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:n+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(Et.CLICK,this.handleClick_.bind(this,i),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=c,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(Et.CLICK,this.handleClick_.bind(this,-i),!1);const h=n+" "+ga+" "+tf,d=this.element;d.className=h,d.appendChild(u),d.appendChild(f),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,n){n.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:jl})):i.setZoom(s)}}}const N8=F8;function xM(e){e=e||{};const t=new ji;return(e.zoom!==void 0?e.zoom:!0)&&t.push(new N8(e.zoomOptions)),(e.rotate!==void 0?e.rotate:!0)&&t.push(new P8(e.rotateOptions)),(e.attribution!==void 0?e.attribution:!0)&&t.push(new O8(e.attributionOptions)),t}const Uv={ACTIVE:"active"};class D8 extends Fi{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Uv.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Uv.ACTIVE,t)}setMap(t){this.map_=t}}function $8(e,t,n){const i=e.getCenterInternal();if(i){const r=[i[0]+t[0],i[1]+t[1]];e.animateInternal({duration:n!==void 0?n:250,easing:AD,center:e.getConstrainedCenter(r)})}}function U1(e,t,n,i){const r=e.getZoom();if(r===void 0)return;const s=e.getConstrainedZoom(r+t),o=e.getResolutionForZoom(s);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:jl})}const ef=D8;class z8 extends ef{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let n=!1;if(t.type==we.DBLCLICK){const i=t.originalEvent,r=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();U1(a,o,s,this.duration_),i.preventDefault(),n=!0}return!n}}const G8=z8;class W8 extends ef{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==we.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==we.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==we.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,n=this.stopDown(i)}else t.type==we.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function V1(e){const t=e.length;let n=0,i=0;for(let r=0;r<t;r++)n+=e[r].clientX,i+=e[r].clientY;return{clientX:n/t,clientY:i/t}}const nf=W8;function Sy(e){const t=arguments;return function(n){let i=!0;for(let r=0,s=t.length;r<s&&(i=i&&t[r](n),!!i);++r);return i}}const Y8=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},B8=function(e){const t=e.map.getTargetElement(),n=e.map.getOwnerDocument().activeElement;return t.contains(n)},bM=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?B8(e):!0},U8=_u,vM=function(e){const t=e.originalEvent;return t.button==0&&!(PN&&NS&&t.ctrlKey)},EM=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},V8=function(e){const t=e.originalEvent;return NS?t.metaKey:t.ctrlKey},X8=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},TM=function(e){const t=e.originalEvent,n=t.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!t.target.isContentEditable},F0=function(e){const t=e.originalEvent;return Dt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},H8=function(e){const t=e.originalEvent;return Dt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class j8 extends nf{constructor(t){super({stopDown:tm}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=t.condition?t.condition:Sy(EM,H8);this.condition_=t.onFocusOnly?Sy(bM,n):n,this.noKinetic_=!1}handleDragEvent(t){const n=t.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,r=n.getEventPixel(V1(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=t.map.getView();dD(s,a.getResolution()),R1(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:jl})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const Z8=j8;class q8 extends nf{constructor(t){t=t||{},super({stopDown:tm}),this.condition_=t.condition?t.condition:Y8,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!F0(t))return;const n=t.map,i=n.getView();if(i.getConstraints().rotation===P1)return;const r=n.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return F0(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return F0(t)&&vM(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const K8=q8;class J8 extends b1{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,n=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,n=this.endPixel_,r=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new md([r])}getGeometry(){return this.geometry_}}const Q8=J8,ih={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class N0 extends Jr{constructor(t,n,i){super(t),this.coordinate=n,this.mapBrowserEvent=i}}class t$ extends nf{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Q8(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:vM,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,n,i){const r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new N0(ih.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new N0(n?ih.BOXEND:ih.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new N0(ih.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const e$=t$;class n$ extends e${constructor(t){t=t||{};const n=t.condition?t.condition:X8;super({condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:jl})}}const i$=n$,co={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class r$ extends ef{constructor(t){super(),t=t||{},this.defaultCondition_=function(n){return EM(n)&&TM(n)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let n=!1;if(t.type==Et.KEYDOWN){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==co.DOWN||r==co.LEFT||r==co.RIGHT||r==co.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==co.DOWN?c=-a:r==co.LEFT?l=-a:r==co.RIGHT?l=a:c=a;const u=[l,c];R1(u,o.getRotation()),$8(o,u,this.duration_),i.preventDefault(),n=!0}}return!n}}const s$=r$;class o$ extends ef{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(n){return!V8(n)&&TM(n)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let n=!1;if(t.type==Et.KEYDOWN||t.type==Et.KEYPRESS){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==="+"||r==="-")){const s=t.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();U1(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}const a$=o$;class l${constructor(t,n,i){this.decay_=t,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,n){this.points_.push(t,n,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<t)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const r=this.points_[n+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const c$=l$;class u$ extends ef{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const n=t.condition?t.condition:U8;this.condition_=t.onFocusOnly?Sy(bM,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==Et.WHEEL)return!0;const i=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==Et.WHEEL&&(s=r.deltaY,ON&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=DS),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const n=t.getView();n.getAnimating()&&n.cancelAnimations();let i=-Re(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),U1(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const f$=u$;class h$ extends nf{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=tm),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let n=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=t.map,a=o.getView();a.getConstraints().rotation!==P1&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(V1(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const d$=h$;class g$ extends nf{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=tm),super(n),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let n=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(V1(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const m$=g$;function p$(e){e=e||{};const t=new ji,n=new c$(-.005,.05,100);return(e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0)&&t.push(new K8),(e.doubleClickZoom!==void 0?e.doubleClickZoom:!0)&&t.push(new G8({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan!==void 0?e.dragPan:!0)&&t.push(new Z8({onFocusOnly:e.onFocusOnly,kinetic:n})),(e.pinchRotate!==void 0?e.pinchRotate:!0)&&t.push(new d$),(e.pinchZoom!==void 0?e.pinchZoom:!0)&&t.push(new m$({duration:e.zoomDuration})),(e.keyboard!==void 0?e.keyboard:!0)&&(t.push(new s$),t.push(new a$({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0)&&t.push(new f$({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom!==void 0?e.shiftDragZoom:!0)&&t.push(new i$({duration:e.zoomDuration})),t}function Vv(e){return e[0]>0&&e[1]>0}function y$(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]*t+.5|0,n[1]=e[1]*t+.5|0,n}function Nn(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}function CM(e){if(e instanceof cm){e.setMapInternal(null);return}e instanceof fm&&e.getLayers().forEach(CM)}function SM(e,t){if(e instanceof cm){e.setMapInternal(t);return}if(e instanceof fm){const n=e.getLayers().getArray();for(let i=0,r=n.length;i<r;++i)SM(n[i],t)}}let _$=class extends Fi{constructor(t){super(),t=t||{},this.on,this.once,this.un;const n=w$(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:DS,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Si(),this.pixelToCoordinateTransform_=Si(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||xM(),this.interactions=n.interactions||p$({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new R8(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener($e.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener($e.VIEW,this.handleViewChanged_),this.addChangeListener($e.SIZE,this.handleSizeChanged_),this.addChangeListener($e.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;t.view&&!(t.view instanceof Ui)&&t.view.then(function(r){i.setView(new Ui(r))}),this.controls.addEventListener(bn.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(bn.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(bn.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(bn.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(bn.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(bn.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){SM(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,n,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:_u,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(t,n){const i=[];return this.forEachFeatureAtPixel(t,function(r){i.push(r)},n),i}getAllLayers(){const t=[];function n(i){i.forEach(function(r){r instanceof fm?n(r.getLayers()):t.push(r)})}return n(this.getLayers()),t}hasFeatureAtPixel(t,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.layerFilter!==void 0?n.layerFilter:_u,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get($e.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return _y(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const n=this.frameState_;return n?Ee(n.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get($e.LAYERGROUP)}setLayers(t){const n=this.getLayerGroup();if(t instanceof ji){n.setLayers(t);return}const i=n.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const r=t[n];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const n=br(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(t){const n=this.frameState_;return n?Ee(n.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get($e.SIZE)}getView(){return this.get($e.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,n,i,r){return I8(this.frameState_,t,n,i,r)}handleBrowserEvent(t,n){n=n||t.type;const i=new ys(n,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const n=t.originalEvent,i=n.type;if(i===Cy.POINTERDOWN||i===Et.WHEEL||i===Et.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=n.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,s=r;if(t){const o=t.viewHints;if(o[Me.ANIMATING]||o[Me.INTERACTING]){const a=Date.now()-t.time>8;r=a?0:8,s=a?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Ji.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ji.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Wa(Cr.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Wa(Cr.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)ee(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Et.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Et.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,yd(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),n=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new x8(this)),this.mapBrowserEventHandler_=new T8(this,this.moveTolerance_);for(const s in we)this.mapBrowserEventHandler_.addEventListener(we[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Et.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Et.WHEEL,this.boundHandleBrowserEvent_,zS?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[Pt(i,Et.KEYDOWN,this.handleBrowserEvent,this),Pt(i,Et.KEYPRESS,this.handleBrowserEvent,this)];const r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ee(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ee(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Pt(t,_l.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Pt(t,Et.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ee),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new bs("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Pt(t,_l.PROPERTYCHANGE,this.render,this),Pt(t,Et.CHANGE,this.render,this),Pt(t,"addlayer",this.handleLayerAdd_,this),Pt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){CM(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const n=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(n!==void 0&&Vv(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:gy(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Vt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=gy(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Hl(this.previousExtent_)&&!wu(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Wa(Cr.MOVESTART,this,r)),this.previousExtent_=Ju(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Me.ANIMATING]&&!s.viewHints[Me.INTERACTING]&&!wu(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Wa(Cr.MOVEEND,this,s)),GS(s.extent,this.previousExtent_))),this.dispatchEvent(new Wa(Cr.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Cr.LOADSTART)||this.hasListener(Cr.LOADEND)||this.hasListener(Ji.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new bs("removelayer",n)),this.set($e.LAYERGROUP,t)}setSize(t){this.set($e.SIZE,t)}setTarget(t){this.set($e.TARGET,t)}setView(t){if(!t||t instanceof Ui){this.set($e.VIEW,t);return}this.set($e.VIEW,new Ui);const n=this;t.then(function(i){n.setView(new Ui(i))})}updateSize(){const t=this.getTargetElement();let n;if(t){const r=getComputedStyle(t),s=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(n=[s,o],!Vv(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&JS("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!Zs(n,i))&&(this.setSize(n),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let n;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}}};function w$(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const n={},i=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new fm({layers:e.layers});n[$e.LAYERGROUP]=i,n[$e.TARGET]=e.target,n[$e.VIEW]=e.view instanceof Ui?e.view:new Ui;let r;e.controls!==void 0&&(Array.isArray(e.controls)?r=new ji(e.controls.slice()):(Dt(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=e.controls));let s;e.interactions!==void 0&&(Array.isArray(e.interactions)?s=new ji(e.interactions.slice()):(Dt(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=e.interactions));let o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new ji(e.overlays.slice()):(Dt(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=e.overlays):o=new ji,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:n}}const x$=_$;class X1 extends Fi{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const n=t;this.setGeometry(n)}else{const n=t;this.setProperties(n)}}clone(){const t=new X1(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&t.setGeometry(n.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ee(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Pt(t,Et.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?b$(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function b$(e){if(typeof e=="function")return e;let t;return Array.isArray(e)?t=e:(Dt(typeof e.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}const My=X1;class v${constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,n){if(n){let i=n.dataProjection?Oe(n.dataProjection):this.readProjection(t);n.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Oe(i),i.setWorldExtent(n.extent)),n={dataProjection:i,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return xt()}readFeature(t,n){return xt()}readFeatures(t,n){return xt()}readGeometry(t,n){return xt()}readProjection(t){return xt()}writeFeature(t,n){return xt()}writeFeatures(t,n){return xt()}writeGeometry(t,n){return xt()}}function MM(e,t,n){const i=n?Oe(n.featureProjection):null,r=n?Oe(n.dataProjection):null;let s;if(i&&r&&!vo(i,r)?s=(t?e.clone():e).transform(t?i:r,t?r:i):s=e,t&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===e&&(s=e.clone()),s.applyTransform(a)}return s}class E$ extends v${constructor(){super()}getType(){return"json"}readFeature(t,n){return this.readFeatureFromObject(rh(t),this.getReadOptions(t,n))}readFeatures(t,n){return this.readFeaturesFromObject(rh(t),this.getReadOptions(t,n))}readFeatureFromObject(t,n){return xt()}readFeaturesFromObject(t,n){return xt()}readGeometry(t,n){return this.readGeometryFromObject(rh(t),this.getReadOptions(t,n))}readGeometryFromObject(t,n){return xt()}readProjection(t){return this.readProjectionFromObject(rh(t))}readProjectionFromObject(t){return xt()}writeFeature(t,n){return JSON.stringify(this.writeFeatureObject(t,n))}writeFeatureObject(t,n){return xt()}writeFeatures(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))}writeFeaturesObject(t,n){return xt()}writeGeometry(t,n){return JSON.stringify(this.writeGeometryObject(t,n))}writeGeometryObject(t,n){return xt()}}function rh(e){if(typeof e=="string"){const t=JSON.parse(e);return t||null}return e!==null?e:null}const T$=E$;function RM(e,t,n,i,r,s,o){let a,l;const c=(n-t)/i;if(c===1)a=t;else if(c===2)a=t,l=r;else if(c!==0){let u=e[t],f=e[t+1],h=0;const d=[0];for(let _=t+i;_<n;_+=i){const p=e[_],y=e[_+1];h+=Math.sqrt((p-u)*(p-u)+(y-f)*(y-f)),d.push(h),u=p,f=y}const g=r*h,m=vN(d,g);m<0?(l=(g-d[-m-2])/(d[-m-1]-d[-m-2]),a=t+(-m-2)*i):a=t+m*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?e[a+u]:Pn(e[a+u],e[a+i+u],l);return s}function Ry(e,t,n,i,r,s){if(n==t)return null;let o;if(r<e[t+i-1])return s?(o=e.slice(t,t+i),o[i-1]=r,o):null;if(e[n-1]<r)return s?(o=e.slice(n-i,n),o[i-1]=r,o):null;if(r==e[t+i-1])return e.slice(t,t+i);let a=t/i,l=n/i;for(;a<l;){const h=a+l>>1;r<e[(h+1)*i-1]?l=h:a=h+1}const c=e[a*i-1];if(r==c)return e.slice((a-1)*i,(a-1)*i+i);const u=e[(a+1)*i-1],f=(r-c)/(u-c);o=[];for(let h=0;h<i-1;++h)o.push(Pn(e[(a-1)*i+h],e[a*i+h],f));return o.push(r),o}function C$(e,t,n,i,r,s,o){if(o)return Ry(e,t,n[n.length-1],i,r,s);let a;if(r<e[i-1])return s?(a=e.slice(0,i),a[i-1]=r,a):null;if(e[e.length-1]<r)return s?(a=e.slice(e.length-i),a[i-1]=r,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(t!=u){if(r<e[t+i-1])return null;if(r<=e[u-1])return Ry(e,t,u,i,r,!1);t=u}}return null}function IM(e,t,n,i){let r=e[t],s=e[t+1],o=0;for(let a=t+i;a<n;a+=i){const l=e[a],c=e[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class bd extends da{constructor(t,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendCoordinate(t){this.flatCoordinates?Nr(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new bd(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<fa(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(F1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),D1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,r))}forEachSegment(t){return cM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,Ry(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n))}getCoordinates(){return Ls(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,n){return RM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)}getLength(){return IM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const n=[];return n.length=G1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new bd(n,"XY")}getType(){return"LineString"}intersectsExtent(t){return lm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=am(this.flatCoordinates,0,t,this.stride),this.changed()}}const vd=bd;class Ed extends da{constructor(t,n,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,n);else if(n!==void 0&&i)this.setFlatCoordinates(n,t),this.ends_=i;else{let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout()),Nr(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?Nr(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ed(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<fa(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(N1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,r))}getCoordinateAtM(t,n,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,i=i!==void 0?i:!1,C$(this.flatCoordinates,0,this.ends_,this.stride,t,n,i))}getCoordinates(){return xu(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new vd(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,n=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new vd(t.slice(s,l),i);r.push(c),s=l}return r}getFlatMidpoints(){const t=[],n=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=RM(n,i,l,s,.5);Nr(t,c),i=l}return t}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=WD(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new Ed(n,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return ZD(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=z1(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const S$=Ed;class H1 extends da{constructor(t,n){super(),n&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendPoint(t){this.flatCoordinates?Nr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new H1(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){if(r<fa(this.getExtent(),t,n))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=Go(t,n,s[a],s[a+1]);if(c<r){r=c;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return Ls(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new vl(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,n=this.layout,i=this.stride,r=[];for(let s=0,o=t.length;s<o;s+=i){const a=new vl(t.slice(s,s+i),n);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const n=this.flatCoordinates,i=this.stride;for(let r=0,s=n.length;r<s;r+=i){const o=n[r],a=n[r+1];if(S1(t,o,a))return!0}return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=am(this.flatCoordinates,0,t,this.stride),this.changed()}}const AM=H1;function M$(e,t,n,i){const r=[];let s=ai();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=WS(e,t,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return r}class Td extends da{constructor(t,n,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout());const f=o.length,h=u.getEnds();for(let d=0,g=h.length;d<g;++d)h[d]+=f;Nr(o,u.getFlatCoordinates()),a.push(h)}n=r,t=o,i=a}n!==void 0&&i?(this.setFlatCoordinates(n,t),this.endss_=i):this.setCoordinates(t,n)}appendPolygon(t){let n;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Nr(this.flatCoordinates,t.getFlatCoordinates()),n=t.getEnds().slice();for(let r=0,s=n.length;r<s;++r)n[r]+=i}this.endss_.push(n),this.changed()}clone(){const t=this.endss_.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=this.endss_[r].slice();const i=new Td(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}closestPointXY(t,n,i,r){return r<fa(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(DD(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$D(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,i,r))}containsXY(t,n){return HD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)}getArea(){return UD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),zv(n,0,this.endss_,this.stride,t)):n=this.flatCoordinates,wy(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=M$(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=jD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new AM(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;JD(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=zv(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=BD(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new Td(n,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let n;if(t===0)n=0;else{const s=this.endss_[t-1];n=s[s.length-1]}const i=this.endss_[t].slice(),r=i[i.length-1];if(n!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=n;return new md(this.flatCoordinates.slice(n,r),this.layout,i)}getPolygons(){const t=this.layout,n=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(s!==0)for(let f=0,h=l.length;f<h;++f)l[f]-=s;const u=new md(n.slice(s,c),t,l);r.push(u),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return qD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=GD(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const R$=Td;class Cd extends iM{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ee),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,n=this.geometries_.length;t<n;++t)this.changeEventsKeys_.push(Pt(this.geometries_[t],Et.CHANGE,this.changed,this))}clone(){const t=new Cd(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,n,i,r){if(r<fa(this.getExtent(),t,n))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(t,n,i,r);return r}containsXY(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(t,n))return!0;return!1}computeExtent(t){Ju(t);const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)YS(t,n[i].getExtent());return t}getGeometries(){return Xv(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(t);n.push(l),l!==a&&(r=!0)}if(r){const s=new Cd(null);return s.setGeometriesArray(n),s}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(t,n);this.changed()}scale(t,n,i){i||(i=Ko(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(t,n,i);this.changed()}setGeometries(t){this.setGeometriesArray(Xv(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()}translate(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(t,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Xv(e){const t=[];for(let n=0,i=e.length;n<i;++n)t.push(e[n].clone());return t}const I$=Cd;class A$ extends T${constructor(t){t=t||{},super(),this.dataProjection=Oe(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Oe(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,n){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const r=Iy(i.geometry,n),s=new My;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,n){const i=t;let r=null;if(i.type==="FeatureCollection"){const s=t;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a)r.push(this.readFeatureFromObject(o[a],n))}else r=[this.readFeatureFromObject(t,n)];return r}readGeometryFromObject(t,n){return Iy(t,n)}readProjectionFromObject(t){const n=t.crs;let i;if(n)if(n.type=="name")i=Oe(n.properties.name);else if(n.type==="EPSG")i=Oe("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,n){n=this.adaptOptions(n);const i={type:"Feature",geometry:null,properties:null},r=t.getId();if(r!==void 0&&(i.id=r),!t.hasProperties())return i;const s=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=Ay(o,n),delete s[t.getGeometryName()]),xl(s)||(i.properties=s),i}writeFeaturesObject(t,n){n=this.adaptOptions(n);const i=[];for(let r=0,s=t.length;r<s;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,n){return Ay(t,this.adaptOptions(n))}}function Iy(e,t){if(!e)return null;let n;switch(e.type){case"Point":{n=O$(e);break}case"LineString":{n=k$(e);break}case"Polygon":{n=D$(e);break}case"MultiPoint":{n=F$(e);break}case"MultiLineString":{n=P$(e);break}case"MultiPolygon":{n=N$(e);break}case"GeometryCollection":{n=L$(e);break}default:throw new Error("Unsupported GeoJSON type: "+e.type)}return MM(n,!1,t)}function L$(e,t){const n=e.geometries.map(function(i){return Iy(i,t)});return new I$(n)}function O$(e){return new vl(e.coordinates)}function k$(e){return new vd(e.coordinates)}function P$(e){return new S$(e.coordinates)}function F$(e){return new AM(e.coordinates)}function N$(e){return new R$(e.coordinates)}function D$(e){return new md(e.coordinates)}function Ay(e,t){e=MM(e,!0,t);const n=e.getType();let i;switch(n){case"Point":{i=B$(e);break}case"LineString":{i=z$(e);break}case"Polygon":{i=U$(e,t);break}case"MultiPoint":{i=W$(e);break}case"MultiLineString":{i=G$(e);break}case"MultiPolygon":{i=Y$(e,t);break}case"GeometryCollection":{i=$$(e,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return i}function $$(e,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(i){return Ay(i,t)})}}function z$(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function G$(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function W$(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function Y$(e,t){let n;return t&&(n=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(n)}}function B$(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function U$(e,t){let n;return t&&(n=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(n)}}const V$=A$;class j1{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new j1({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const Z1=j1,Rt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class q1{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Nn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new q1({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return xt()}getImage(t){return xt()}getHitDetectionImage(){return xt()}getPixelRatio(t){return 1}getImageState(){return xt()}getImageSize(){return xt()}getOrigin(){return xt()}getSize(){return xt()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Nn(t)}listenImageChange(t){xt()}load(){xt()}unlistenImageChange(t){xt()}}const LM=q1;class X$ extends qu{constructor(t,n,i,r){super(),this.extent=t,this.pixelRatio_=i,this.resolution=n,this.state=typeof r=="function"?Rt.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(Et.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Rt.IDLE&&this.loader){this.state=Rt.LOADING,this.changed();const t=this.getResolution(),n=Array.isArray(t)?t[0]:t;SN(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Rt.LOADED}).catch(i=>{this.state=Rt.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function H$(e,t,n){const i=e;let r=!0,s=!1,o=!1;const a=[ad(i,Et.LOAD,function(){o=!0,s||t()})];return i.src&&$S?(s=!0,i.decode().then(function(){r&&t()}).catch(function(l){r&&(o?t():n())})):a.push(ad(i,Et.ERROR,n)),function(){r=!1,a.forEach(ee)}}function j$(e,t){return new Promise((n,i)=>{function r(){o(),n(e)}function s(){o(),i(new Error("Image load error"))}function o(){e.removeEventListener("load",r),e.removeEventListener("error",s)}e.addEventListener("load",r),e.addEventListener("error",s),t&&(e.src=t)})}function Z$(e,t){return t&&(e.src=t),$S?new Promise((n,i)=>e.decode().then(()=>n(e),i)):j$(e)}const q$=X$;let wc=null;class K$ extends qu{constructor(t,n,i,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?Rt.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=n,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Rt.LOADED){wc||(wc=mn(1,1,void 0,{willReadFrequently:!0})),wc.drawImage(this.image_,0,0);try{wc.getImageData(0,0,1,1),this.tainted_=!1}catch{wc=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Et.CHANGE)}handleImageError_(){this.imageState_=Rt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Rt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],n=this.size_[1],i=mn(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Rt.IDLE){this.image_||this.initializeImage_(),this.imageState_=Rt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Z$(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Rt.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*t),i.height=Math.ceil(n.height*t);const r=i.getContext("2d");r.scale(t,t),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=XS(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[t]=i}}function J$(e,t,n,i,r){let s=t===void 0?void 0:cd.get(t,n,r);return s||(s=new K$(e,e instanceof HTMLImageElement?e.src||void 0:t,n,i,r),cd.set(t,n,r,s)),s}function Hv(e,t,n,i){return n!==void 0&&i!==void 0?[n/e,i/t]:n!==void 0?n/e:i!==void 0?i/t:1}class K1 extends LM{constructor(t){t=t||{};const n=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:n,rotation:i,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Dt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Vt(o)),Dt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Dt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=Rt.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?Rt.LOADED:Rt.IDLE:l=Rt.LOADING:l=Rt.LOADED),this.color_=t.color!==void 0?ld(t.color):null,this.iconImage_=J$(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let c,u;if(t.size)[c,u]=t.size;else{const f=this.getImage(1);if(f.width&&f.height)c=f.width,u=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=t;const h=()=>{if(this.unlistenImageChange(h),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(Hv(d[0],d[1],t.width,t.height))};this.listenImageChange(h);return}}c!==void 0&&this.setScale(Hv(c,u,t.width,t.height))}}clone(){let t,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new K1({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]-n[0]/i[0],t[1]+n[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Rt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Rt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(Et.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(Et.CHANGE,t)}}const Sd=K1;class J1{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new J1({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const Q1=J1;function Zi(e){return Array.isArray(e)?HS(e):e}class tw extends LM{constructor(t){const n=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:n,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),n=new tw({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const t=this.size_;if(!t)return null;const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-n[0]/i[0],t[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let n=this.canvas_[t];if(!n){const i=this.renderOptions_,r=mn(i.size*t,i.size*t);this.draw_(i,r,t),n=r.canvas,this.canvas_[t]=n}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Rt.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const b=r;r=s,s=b}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,f=Math.sqrt(l*l+u*u),h=f/l;if(t==="miter"&&h<=i)return h*n;const d=n/2/h,g=n/2*(u/f),_=Math.sqrt((r+d)*(r+d)+g*g)-r;if(this.radius2_===void 0||t==="bevel")return _*2;const p=r*Math.sin(a),y=Math.sqrt(r*r-p*p),x=s-y,v=Math.sqrt(p*p+x*x)/p;if(v<=i){const b=v*n/2-s-r;return 2*Math.max(_,b)}return _*2}createRenderOptions(){let t=El,n=Tl,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=vu),o=Zi(o),a=this.stroke_.getWidth(),a===void 0&&(a=Tu),r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),n=this.stroke_.getLineJoin(),n===void 0&&(n=Tl),t=this.stroke_.getLineCap(),t===void 0&&(t=El),i=this.stroke_.getMiterLimit(),i===void 0&&(i=bu));const l=this.calculateLineJoinSize_(n,a,i),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:t,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=vn),n.fillStyle=Zi(r),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineCap=t.lineCap,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=ld(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){const r=mn(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let n=this.points_;const i=this.radius_;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,c=a%2===0?i:r;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=vn,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}}const OM=tw;class ew extends OM{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),n=new ew({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(t){this.radius_=t,this.render()}}const kM=ew;let PM=class FM{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=jv,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new FM({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(n){return n.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=jv,this.geometry_=t}setZIndex(t){this.zIndex_=t}};function Q$(e){let t;if(typeof e=="function")t=e;else{let n;Array.isArray(e)?n=e:(Dt(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[e]),t=function(){return n}}return t}let D0=null;function t7(e,t){if(!D0){const n=new Z1({color:"rgba(255,255,255,0.4)"}),i=new Q1({color:"#3399CC",width:1.25});D0=[new PM({image:new kM({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return D0}function jv(e){return e.getGeometry()}const Bo=PM,e7="#333";let n7=class NM{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Nn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Z1({color:e7}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new NM({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Nn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}};const i7=n7;function r7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const sh={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class s7 extends cm{constructor(t){t=t||{};const n=Object.assign({},t);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(sh.PRELOAD)}setPreload(t){this.set(sh.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(sh.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(sh.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const o7=s7;class a7 extends FS{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return xt()}getData(t){return null}prepareFrame(t){return xt()}renderFrame(t,n){return xt()}loadedTileCallback(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i}createLoadedTileFinder(t,n,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,s,o)}}forEachFeatureAtCoordinate(t,n,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const n=t.target;(n.getState()===Rt.LOADED||n.getState()===Rt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let n=t.getState();return n!=Rt.LOADED&&n!=Rt.ERROR&&t.addEventListener(Et.CHANGE,this.boundHandleImageChange_),n==Rt.IDLE&&(t.load(),n=t.getState()),n==Rt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const l7=a7,Zv=[];let Ya=null;function c7(){Ya=mn(1,1,void 0,{willReadFrequently:!0})}class u7 extends l7{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Si(),this.pixelTransform=Si(),this.inversePixelTransform=Si(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,n,i){Ya||c7(),Ya.clearRect(0,0,1,1);let r;try{Ya.drawImage(t,n,i,1,1,0,0,1,1),r=Ya.getImageData(0,0,1,1).data}catch{return Ya=null,null}return r}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,n,i){const r=this.getLayer().getClassName();let s,o;if(t&&t.className===r&&(!i||t&&t.style.backgroundColor&&Zs(ld(t.style.backgroundColor),ld(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=mn();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,n,i){const r=ha(i),s=sm(i),o=rm(i),a=im(i);Ee(n.coordinateToPixelTransform,r),Ee(n.coordinateToPixelTransform,s),Ee(n.coordinateToPixelTransform,o),Ee(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ee(l,r),Ee(l,s),Ee(l,o),Ee(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,n,i){const r=this.getLayer();if(r.hasListener(t)){const s=new mM(t,this.inversePixelTransform,i,n);r.dispatchEvent(s)}}preRender(t,n){this.frameState=n,this.dispatchRenderEvent_(Ji.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(Ji.POSTRENDER,t,n)}getRenderTransform(t,n,i,r,s,o,a){const l=s/2,c=o/2,u=r/n,f=-u,h=-t[0]+a,d=-t[1];return Ri(this.tempTransform,l,c,u,f,-i,h,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const nw=u7;class f7 extends qu{constructor(t,n,i){super(),i=i||{},this.tileCoord=t,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Et.CHANGE)}release(){this.state===ht.ERROR&&this.setState(ht.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==ht.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,n=this;do{if(t.getState()==ht.LOADED){t.interimTile=null;break}else t.getState()==ht.LOADING?n=t:t.getState()==ht.IDLE?n.interimTile=t.interimTile:n=t;t=n.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==ht.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){xt()}getAlpha(t,n){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;const r=n-i+1e3/60;return r>=this.transition_?1:eM(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const DM=f7;class h7 extends DM{constructor(t,n,i,r,s,o){super(t,n,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=ht.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ht.ERROR,this.unlistenImage_(),this.image_=d7(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=ht.LOADED:this.state=ht.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ht.ERROR&&(this.state=ht.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ht.IDLE&&(this.state=ht.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=H$(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function d7(){const e=mn(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}const $M=h7,g7=.5,m7=10,qv=.25;class p7{constructor(t,n,i,r,s,o){this.sourceProj_=t,this.targetProj_=n;let a={};const l=dd(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){const x=y[0]+"/"+y[1];return a[x]||(a[x]=l(y)),a[x]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Qt(r)>=Qt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Qt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Qt(this.targetProj_.getExtent()):null;const c=ha(i),u=sm(i),f=rm(i),h=im(i),d=this.transformInv_(c),g=this.transformInv_(u),m=this.transformInv_(f),_=this.transformInv_(h),p=m7+(o?Math.max(0,Math.ceil(Math.log2(dy(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,f,h,d,g,m,_,p),this.wrapsXInSource_){let y=1/0;this.triangles_.forEach(function(x,w,v){y=Math.min(y,x.source[0][0],x.source[1][0],x.source[2][0])}),this.triangles_.forEach(x=>{if(Math.max(x.source[0][0],x.source[1][0],x.source[2][0])-y>this.sourceWorldWidth_/2){const w=[[x.source[0][0],x.source[0][1]],[x.source[1][0],x.source[1][1]],[x.source[2][0],x.source[2][1]]];w[0][0]-y>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-y>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-y>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);const v=Math.min(w[0][0],w[1][0],w[2][0]);Math.max(w[0][0],w[1][0],w[2][0])-v<this.sourceWorldWidth_/2&&(x.source=w)}})}a={}}addTriangle_(t,n,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,n,i]})}addQuad_(t,n,i,r,s,o,a,l,c){const u=vv([s,o,a,l]),f=this.sourceWorldWidth_?Qt(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&f>.5&&f<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const _=vv([t,n,i,r]);g=Qt(_)/this.targetWorldWidth_>qv||g}!d&&this.sourceProj_.isGlobal()&&f&&(g=f>qv||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!hn(u,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!g){const _=[(t[0]+i[0])/2,(t[1]+i[1])/2],p=this.transformInv_(_);let y;d?y=(Wo(s[0],h)+Wo(a[0],h))/2-Wo(p[0],h):y=(s[0]+a[0])/2-p[0];const x=(s[1]+a[1])/2-p[1];g=y*y+x*x>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const _=[(n[0]+i[0])/2,(n[1]+i[1])/2],p=this.transformInv_(_),y=[(r[0]+t[0])/2,(r[1]+t[1])/2],x=this.transformInv_(y);this.addQuad_(t,n,_,y,s,o,p,x,c-1),this.addQuad_(y,_,i,r,x,p,a,l,c-1)}else{const _=[(t[0]+n[0])/2,(t[1]+n[1])/2],p=this.transformInv_(_),y=[(i[0]+r[0])/2,(i[1]+r[1])/2],x=this.transformInv_(y);this.addQuad_(t,_,y,r,s,p,x,l,c-1),this.addQuad_(_,n,i,y,p,o,a,x,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(t,i,r,s,a,l),m&14||this.addTriangle_(t,i,n,s,a,o),m&&(m&13||this.addTriangle_(n,r,t,o,l,s),m&7||this.addTriangle_(n,r,i,o,l,a))}calculateSourceExtent(){const t=ai();return this.triangles_.forEach(function(n,i,r){const s=n.source;eu(t,s[0]),eu(t,s[1]),eu(t,s[2])}),t}getTriangles(){return this.triangles_}}const y7=p7;let $0;const sl=[];function Kv(e,t,n,i,r){e.beginPath(),e.moveTo(0,0),e.lineTo(t,n),e.lineTo(i,r),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,i)+1,Math.max(n,r)),e.restore()}function z0(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function _7(){if($0===void 0){const e=mn(6,6,sl);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Kv(e,4,5,4,0),Kv(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;$0=z0(t,0)||z0(t,4)||z0(t,8),um(e),sl.push(e.canvas)}return $0}function Jv(e,t,n,i){const r=vD(n,t,e);let s=hd(t,i,n);const o=t.getMetersPerUnit();o!==void 0&&(s*=o);const a=e.getMetersPerUnit();a!==void 0&&(s/=a);const l=e.getExtent();if(!l||Ku(l,r)){const c=hd(e,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function w7(e,t,n,i){const r=Ko(n);let s=Jv(e,t,r,i);return(!isFinite(s)||s<=0)&&US(n,function(o){return s=Jv(e,t,o,i),isFinite(s)&&s>0}),s}function x7(e,t,n,i,r,s,o,a,l,c,u,f){const h=mn(Math.round(n*e),Math.round(n*t),sl);if(f||(h.imageSmoothingEnabled=!1),l.length===0)return h.canvas;h.scale(n,n);function d(w){return Math.round(w*n)/n}h.globalCompositeOperation="lighter";const g=ai();l.forEach(function(w,v,b){YS(g,w.extent)});const m=Qt(g),_=Gn(g),p=mn(Math.round(n*m/i),Math.round(n*_/i),sl);f||(p.imageSmoothingEnabled=!1);const y=n/i;l.forEach(function(w,v,b){const E=w.extent[0]-g[0],C=-(w.extent[3]-g[3]),I=Qt(w.extent),S=Gn(w.extent);w.image.width>0&&w.image.height>0&&p.drawImage(w.image,c,c,w.image.width-2*c,w.image.height-2*c,E*y,C*y,I*y,S*y)});const x=ha(o);return a.getTriangles().forEach(function(w,v,b){const E=w.source,C=w.target;let I=E[0][0],S=E[0][1],R=E[1][0],M=E[1][1],k=E[2][0],O=E[2][1];const A=d((C[0][0]-x[0])/s),P=d(-(C[0][1]-x[1])/s),N=d((C[1][0]-x[0])/s),G=d(-(C[1][1]-x[1])/s),j=d((C[2][0]-x[0])/s),U=d(-(C[2][1]-x[1])/s),Z=I,z=S;I=0,S=0,R-=Z,M-=z,k-=Z,O-=z;const Q=[[R,M,0,0,N-A],[k,O,0,0,j-A],[0,0,R,M,G-P],[0,0,k,O,U-P]],nt=HN(Q);if(nt){if(h.save(),h.beginPath(),_7()||!f){h.moveTo(N,G);const st=4,ot=A-N,$=P-G;for(let B=0;B<st;B++)h.lineTo(N+d((B+1)*ot/st),G+d(B*$/(st-1))),B!=st-1&&h.lineTo(N+d((B+1)*ot/st),G+d((B+1)*$/(st-1)));h.lineTo(j,U)}else h.moveTo(N,G),h.lineTo(A,P),h.lineTo(j,U);h.clip(),h.transform(nt[0],nt[2],nt[1],nt[3],A,P),h.translate(g[0]-Z,g[3]-z),h.scale(i/n,-i/n),h.drawImage(p.canvas,0,0),h.restore()}}),um(p),sl.push(p.canvas),u&&(h.save(),h.globalCompositeOperation="source-over",h.strokeStyle="black",h.lineWidth=1,a.getTriangles().forEach(function(w,v,b){const E=w.target,C=(E[0][0]-x[0])/s,I=-(E[0][1]-x[1])/s,S=(E[1][0]-x[0])/s,R=-(E[1][1]-x[1])/s,M=(E[2][0]-x[0])/s,k=-(E[2][1]-x[1])/s;h.beginPath(),h.moveTo(S,R),h.lineTo(C,I),h.lineTo(M,k),h.closePath(),h.stroke()}),h.restore()),h.canvas}class b7 extends DM{constructor(t,n,i,r,s,o,a,l,c,u,f,h){super(s,ht.IDLE,{interpolate:!!h}),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const _=g?il(d,g):d;if(dy(_)===0){this.state=ht.EMPTY;return}const p=t.getExtent();p&&(m?m=il(m,p):m=p);const y=r.getResolution(this.wrappedTileCoord_[0]),x=w7(t,i,_,y);if(!isFinite(x)||x<=0){this.state=ht.EMPTY;return}const w=u!==void 0?u:g7;if(this.triangulation_=new y7(t,i,_,m,x*w,y),this.triangulation_.getTriangles().length===0){this.state=ht.EMPTY;return}this.sourceZ_=n.getZForResolution(x);let v=this.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(v[1]=Re(v[1],m[1],m[3]),v[3]=Re(v[3],m[1],m[3])):v=il(v,m)),!dy(v))this.state=ht.EMPTY;else{const b=n.getTileRangeForExtentAndZ(v,this.sourceZ_);for(let E=b.minX;E<=b.maxX;E++)for(let C=b.minY;C<=b.maxY;C++){const I=c(this.sourceZ_,E,C,a);I&&this.sourceTiles_.push(I)}this.sourceTiles_.length===0&&(this.state=ht.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==ht.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=ht.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=x7(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=ht.LOADED}this.changed()}load(){if(this.state==ht.IDLE){this.state=ht.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const i=n.getState();if(i==ht.IDLE||i==ht.LOADING){t++;const r=Pt(n,Et.CHANGE,function(s){const o=n.getState();(o==ht.LOADED||o==ht.ERROR||o==ht.EMPTY)&&(ee(r),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,r){n.getState()==ht.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ee),this.sourcesListenerKeys_=null}release(){this.canvas_&&(um(this.canvas_.getContext("2d")),sl.push(this.canvas_),this.canvas_=null),super.release()}}const Ly=b7;class zM{constructor(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Ta(e,t,n,i,r){return r!==void 0?(r.minX=e,r.maxX=t,r.minY=n,r.maxY=i,r):new zM(e,t,n,i)}const GM=zM;class v7 extends nw{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=ai(),this.tmpTileRange_=new GM(0,0,0,0)}isDrawableTile(t){const n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==ht.LOADED||i==ht.EMPTY||i==ht.ERROR&&!r}getTile(t,n,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(t,n,i,s,o);return c.getState()==ht.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Ee(n.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!Ku(s,r))return null;const o=n.pixelRatio,a=n.viewState.projection,l=n.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),f=c.getTilePixelRatio(n.pixelRatio);for(let h=u.getZForResolution(l.resolution);h>=u.getMinZoom();--h){const d=u.getTileCoordForCoordAndZ(r,h),g=c.getTile(h,d[1],d[2],o,a);if(!(g instanceof $M||g instanceof Ly)||g instanceof Ly&&g.getState()===ht.EMPTY)return null;if(g.getState()!==ht.LOADED)continue;const m=u.getOrigin(h),_=Nn(u.getTileSize(h)),p=u.getResolution(h),y=Math.floor(f*((r[0]-m[0])/p-d[1]*_[0])),x=Math.floor(f*((m[1]-r[1])/p-d[2]*_[1])),w=Math.round(f*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),y+w,x+w)}return null}loadedTileCallback(t,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,n,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,n){const i=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=t.pixelRatio,u=this.getLayer(),f=u.getSource(),h=f.getRevision(),d=f.getTileGridForProjection(s),g=d.getZForResolution(o,f.zDirection),m=d.getResolution(g);let _=t.extent;const p=t.viewState.resolution,y=f.getTilePixelRatio(c),x=Math.round(Qt(_)/p*c),w=Math.round(Gn(_)/p*c),v=i.extent&&Ir(i.extent);v&&(_=il(_,Ir(i.extent)));const b=m*x/2/y,E=m*w/2/y,C=[a[0]-b,a[1]-E,a[0]+b,a[1]+E],I=d.getTileRangeForExtentAndZ(_,g),S={};S[g]={};const R=this.createLoadedTileFinder(f,s,S),M=this.tmpExtent,k=this.tmpTileRange_;this.newTiles_=!1;const O=l?my(r.center,p,l,t.size):void 0;for(let Q=I.minX;Q<=I.maxX;++Q)for(let nt=I.minY;nt<=I.maxY;++nt){if(l&&!d.tileCoordIntersectsViewport([g,Q,nt],O))continue;const st=this.getTile(g,Q,nt,t);if(this.isDrawableTile(st)){const B=Vt(this);if(st.getState()==ht.LOADED){S[g][st.tileCoord.toString()]=st;let D=st.inTransition(B);D&&i.opacity!==1&&(st.endTransition(B),D=!1),!this.newTiles_&&(D||!this.renderedTiles.includes(st))&&(this.newTiles_=!0)}if(st.getAlpha(B,t.time)===1)continue}const ot=d.getTileCoordChildTileRange(st.tileCoord,k,M);let $=!1;ot&&($=R(g+1,ot)),$||d.forEachTileCoordParentTileRange(st.tileCoord,R,k,M)}const A=m/o*c/y;Ri(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,l,-x/2,-w/2);const P=T1(this.pixelTransform);this.useContainer(n,P,this.getBackground(t));const N=this.context,G=N.canvas;nm(this.inversePixelTransform,this.pixelTransform),Ri(this.tempTransform,x/2,w/2,A,A,0,-x/2,-w/2),G.width!=x||G.height!=w?(G.width=x,G.height=w):this.containerReused||N.clearRect(0,0,x,w),v&&this.clipUnrotated(N,t,v),f.getInterpolate()||(N.imageSmoothingEnabled=!1),this.preRender(N,t),this.renderedTiles.length=0;let j=Object.keys(S).map(Number);j.sort(Gs);let U,Z,z;i.opacity===1&&(!this.containerReused||f.getOpaque(t.viewState.projection))?j=j.reverse():(U=[],Z=[]);for(let Q=j.length-1;Q>=0;--Q){const nt=j[Q],st=f.getTilePixelSize(nt,c,s),$=d.getResolution(nt)/m,B=st[0]*$*A,D=st[1]*$*A,V=d.getTileCoordForCoordAndZ(ha(C),nt),K=d.getTileCoordExtent(V),T=Ee(this.tempTransform,[y*(K[0]-C[0])/m,y*(C[3]-K[3])/m]),L=y*f.getGutterForProjection(s),F=S[nt];for(const W in F){const Y=F[W],H=Y.tileCoord,rt=V[1]-H[1],J=Math.round(T[0]-(rt-1)*B),tt=V[2]-H[2],q=Math.round(T[1]-(tt-1)*D),ct=Math.round(T[0]-rt*B),at=Math.round(T[1]-tt*D),ut=J-ct,ft=q-at,vt=g===nt,Lt=vt&&Y.getAlpha(Vt(this),t.time)!==1;let Tt=!1;if(!Lt)if(U){z=[ct,at,ct+ut,at,ct+ut,at+ft,ct,at+ft];for(let jt=0,pe=U.length;jt<pe;++jt)if(g!==nt&&nt<Z[jt]){const ce=U[jt];hn([ct,at,ct+ut,at+ft],[ce[0],ce[3],ce[4],ce[7]])&&(Tt||(N.save(),Tt=!0),N.beginPath(),N.moveTo(z[0],z[1]),N.lineTo(z[2],z[3]),N.lineTo(z[4],z[5]),N.lineTo(z[6],z[7]),N.moveTo(ce[6],ce[7]),N.lineTo(ce[4],ce[5]),N.lineTo(ce[2],ce[3]),N.lineTo(ce[0],ce[1]),N.clip())}U.push(z),Z.push(nt)}else N.clearRect(ct,at,ut,ft);this.drawTileImage(Y,t,ct,at,ut,ft,L,vt),U&&!Lt?(Tt&&N.restore(),this.renderedTiles.unshift(Y)):this.renderedTiles.push(Y),this.updateUsedTiles(t.usedTiles,f,Y)}}return this.renderedRevision=h,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!wu(this.renderedExtent_,C),this.renderedExtent_=C,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(t,f,d,c,s,_,g,u.getPreload()),this.scheduleExpireCache(t,f),this.postRender(N,t),i.extent&&N.restore(),N.imageSmoothingEnabled=!0,P!==G.style.transform&&(G.style.transform=P),this.container}drawTileImage(t,n,i,r,s,o,a,l){const c=this.getTileImage(t);if(!c)return;const u=Vt(this),f=n.layerStatesArray[n.layerIndex],h=f.opacity*(l?t.getAlpha(u,n.time):1),d=h!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),d&&this.context.restore(),h!==f.opacity?n.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,n){if(n.canExpireCache()){const i=(function(r,s,o){const a=Vt(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,n);t.postRenderFunctions.push(i)}}updateUsedTiles(t,n,i){const r=Vt(n);r in t||(t[r]={}),t[r][i.getKey()]=!0}manageTilePyramid(t,n,i,r,s,o,a,l,c){const u=Vt(n);u in t.wantedTiles||(t.wantedTiles[u]={});const f=t.wantedTiles[u],h=t.tileQueue,d=i.getMinZoom(),g=t.viewState.rotation,m=g?my(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let _=0,p,y,x,w,v,b;for(b=d;b<=a;++b)for(y=i.getTileRangeForExtentAndZ(o,b,y),x=i.getResolution(b),w=y.minX;w<=y.maxX;++w)for(v=y.minY;v<=y.maxY;++v)g&&!i.tileCoordIntersectsViewport([b,w,v],m)||(a-b<=l?(++_,p=n.getTile(b,w,v,r,s),p.getState()==ht.IDLE&&(f[p.getKey()]=!0,h.isKeyQueued(p.getKey())||h.enqueue([p,u,i.getTileCoordCenter(p.tileCoord),x])),c!==void 0&&c(p)):n.useTile(b,w,v,s));n.updateCacheSize(_,s)}}const E7=v7;class T7 extends o7{constructor(t){super(t)}createRenderer(){return new E7(this)}}const C7=T7;function S7(e,t,n,i,r){WM(e,t,n||0,i||e.length-1,r||M7)}function WM(e,t,n,i,r){for(;i>n;){if(i-n>600){var s=i-n+1,o=t-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),u=Math.max(n,Math.floor(t-o*l/s+c)),f=Math.min(i,Math.floor(t+(s-o)*l/s+c));WM(e,t,u,f,r)}var h=e[t],d=n,g=i;for(xc(e,n,t),r(e[i],h)>0&&xc(e,n,i);d<g;){for(xc(e,d,g),d++,g--;r(e[d],h)<0;)d++;for(;r(e[g],h)>0;)g--}r(e[n],h)===0?xc(e,n,g):(g++,xc(e,g,i)),g<=t&&(n=g+1),t<=g&&(i=g-1)}}function xc(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function M7(e,t){return e<t?-1:e>t?1:0}let iw=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const i=[];if(!ah(t,n))return i;const r=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?r(a):a;ah(t,l)&&(n.leaf?i.push(a):W0(t,l)?this._all(a,i):s.push(a))}n=s.pop()}return i}collides(t){let n=this.data;if(!ah(t,n))return!1;const i=[];for(;n;){for(let r=0;r<n.children.length;r++){const s=n.children[r],o=n.leaf?this.toBBox(s):s;if(ah(t,o)){if(n.leaf||W0(t,o))return!0;i.push(s)}}n=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Ba([]),this}remove(t,n){if(!t)return this;let i=this.data;const r=this.toBBox(t),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const u=R7(t,i.children,n);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&W0(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const i=[];for(;t;)t.leaf?n.push(...t.children):i.push(...t.children),t=i.pop();return n}_build(t,n,i,r){const s=i-n+1;let o=this._maxEntries,a;if(s<=o)return a=Ba(t.slice(n,i+1)),Ca(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Ba([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));Qv(t,n,i,c,this.compareMinX);for(let u=n;u<=i;u+=c){const f=Math.min(u+c-1,i);Qv(t,u,f,l,this.compareMinY);for(let h=u;h<=f;h+=l){const d=Math.min(h+l-1,f);a.children.push(this._build(t,h,d,r-1))}}return Ca(a,this.toBBox),a}_chooseSubtree(t,n,i,r){for(;r.push(n),!(n.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=G0(c),f=L7(t,c)-u;f<o?(o=f,s=u<s?u:s,a=c):f===o&&u<s&&(s=u,a=c)}n=a||n.children[0]}return n}_insert(t,n,i){const r=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(t),$c(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)}_split(t,n){const i=t[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=Ba(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Ca(i,this.toBBox),Ca(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,n){this.data=Ba([t,n]),this.data.height=t.height+1,this.data.leaf=!1,Ca(this.data,this.toBBox)}_chooseSplitIndex(t,n,i){let r,s=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=Dc(t,0,a,this.toBBox),c=Dc(t,a,i,this.toBBox),u=O7(l,c),f=G0(l)+G0(c);u<s?(s=u,r=a,o=f<o?f:o):u===s&&f<o&&(o=f,r=a)}return r||i-n}_chooseSplitAxis(t,n,i){const r=t.leaf?this.compareMinX:I7,s=t.leaf?this.compareMinY:A7,o=this._allDistMargin(t,n,i,r),a=this._allDistMargin(t,n,i,s);o<a&&t.children.sort(r)}_allDistMargin(t,n,i,r){t.children.sort(r);const s=this.toBBox,o=Dc(t,0,n,s),a=Dc(t,i-n,i,s);let l=oh(o)+oh(a);for(let c=n;c<i-n;c++){const u=t.children[c];$c(o,t.leaf?s(u):u),l+=oh(o)}for(let c=i-n-1;c>=n;c--){const u=t.children[c];$c(a,t.leaf?s(u):u),l+=oh(a)}return l}_adjustParentBBoxes(t,n,i){for(let r=i;r>=0;r--)$c(n[r],t)}_condense(t){for(let n=t.length-1,i;n>=0;n--)t[n].children.length===0?n>0?(i=t[n-1].children,i.splice(i.indexOf(t[n]),1)):this.clear():Ca(t[n],this.toBBox)}};function R7(e,t,n){if(!n)return t.indexOf(e);for(let i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function Ca(e,t){Dc(e,0,e.children.length,t,e)}function Dc(e,t,n,i,r){r||(r=Ba(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=t;s<n;s++){const o=e.children[s];$c(r,e.leaf?i(o):o)}return r}function $c(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function I7(e,t){return e.minX-t.minX}function A7(e,t){return e.minY-t.minY}function G0(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function oh(e){return e.maxX-e.minX+(e.maxY-e.minY)}function L7(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function O7(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function W0(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function ah(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Ba(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Qv(e,t,n,i,r){const s=[t,n];for(;s.length;){if(n=s.pop(),t=s.pop(),n-t<=i)continue;const o=t+Math.ceil((n-t)/i/2)*i;S7(e,o,t,n,r),s.push(t,o,o,n)}}let ql=0;const qe=1<<ql++,At=1<<ql++,Cl=1<<ql++,rw=1<<ql++,rf=1<<ql++,fi=Math.pow(2,ql)-1,YM={[qe]:"boolean",[At]:"number",[Cl]:"string",[rw]:"color",[rf]:"number[]"},k7=Object.keys(YM).map(Number).sort(Gs);function Md(e){const t=[];for(const n of k7)P7(e,n)&&t.push(YM[n]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function P7(e,t){return(e&t)===t}function BM(e,t){return!!(e&t)}class Os{constructor(t,n){this.type=t,this.value=n}}class F7{constructor(t,n,...i){this.type=t,this.operator=n,this.args=i}}function UM(){return{variables:new Set,properties:new Set}}function hm(e,t){switch(typeof e){case"boolean":return new Os(qe,e);case"number":return new Os(At,e);case"string":return new Os(Cl,e)}if(!Array.isArray(e))throw new Error("Expression must be an array or a primitive value");if(e.length===0)throw new Error("Empty expression");if(typeof e[0]=="string")return G7(e,t);for(const i of e)if(typeof i!="number")throw new Error("Expected an array of numbers");let n=rf;return(e.length===3||e.length===4)&&(n|=rw),new Os(n,e)}const et={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},N7={[et.Number]:Zt(te(1,1/0,fi),At),[et.String]:Zt(te(1,1/0,fi),Cl),[et.Get]:Zt(D7,fi),[et.Var]:Zt($7,fi),[et.Resolution]:Zt(z7,At),[et.Any]:Zt(te(2,1/0,qe),qe),[et.All]:Zt(te(2,1/0,qe),qe),[et.Not]:Zt(te(1,1,qe),qe),[et.Equal]:Zt(te(2,2,fi),qe),[et.NotEqual]:Zt(te(2,2,fi),qe),[et.GreaterThan]:Zt(te(2,2,fi),qe),[et.GreaterThanOrEqualTo]:Zt(te(2,2,fi),qe),[et.LessThan]:Zt(te(2,2,fi),qe),[et.LessThanOrEqualTo]:Zt(te(2,2,fi),qe),[et.Multiply]:Zt(te(2,1/0,At),At),[et.Divide]:Zt(te(2,2,At),At),[et.Add]:Zt(te(2,1/0,At),At),[et.Subtract]:Zt(te(2,2,At),At),[et.Clamp]:Zt(te(3,3,At),At),[et.Mod]:Zt(te(2,2,At),At),[et.Pow]:Zt(te(2,2,At),At),[et.Abs]:Zt(te(1,1,At),At),[et.Floor]:Zt(te(1,1,At),At),[et.Ceil]:Zt(te(1,1,At),At),[et.Round]:Zt(te(1,1,At),At),[et.Sin]:Zt(te(1,1,At),At),[et.Cos]:Zt(te(1,1,At),At),[et.Atan]:Zt(te(1,2,At),At),[et.Sqrt]:Zt(te(1,1,At),At),[et.Match]:Zt(te(4,1/0,Cl|At),fi)};function D7(e,t){if(e.length!==2)throw new Error("Expected 1 argument for get operation");const n=hm(e[1],t);if(!(n instanceof Os))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.properties.add(n.value),[n]}function $7(e,t){if(e.length!==2)throw new Error("Expected 1 argument for var operation");const n=hm(e[1],t);if(!(n instanceof Os))throw new Error("Expected a literal argument for var operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.variables.add(n.value),[n]}function z7(e,t){const n=e[0];if(e.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function te(e,t,n){return function(i,r){const s=i[0],o=i.length-1;if(e===t){if(o!==e){const l=e===1?"":"s";throw new Error(`Expected ${e} argument${l} for operation ${s}, got ${o}`)}}else if(o<e||o>t)throw new Error(`Expected ${e} to ${t} arguments for operation ${s}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const c=hm(i[l+1],r);if(!BM(n,c.type)){const u=Md(n),f=Md(c.type);throw new Error(`Unexpected type for argument ${l} of ${s} operation : got ${u} but expected ${f}`)}a[l]=c}return a}}function Zt(e,t){return function(n,i){const r=n[0],s=e(n,i);return new F7(t,r,...s)}}function G7(e,t){const n=e[0],i=N7[n];if(!i)throw new Error(`Unknown operator: ${n}`);return i(e,t)}function VM(){return{variables:{},properties:{},resolution:NaN}}function qs(e,t,n){const i=hm(e,n);if(!BM(t,i.type)){const r=Md(t),s=Md(i.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return Jo(i)}function Jo(e,t){if(e instanceof Os)return function(){return e.value};const n=e.operator;switch(n){case et.Number:case et.String:return W7(e);case et.Get:case et.Var:return Y7(e);case et.Resolution:return i=>i.resolution;case et.Any:case et.All:case et.Not:return U7(e);case et.Equal:case et.NotEqual:case et.LessThan:case et.LessThanOrEqualTo:case et.GreaterThan:case et.GreaterThanOrEqualTo:return B7(e);case et.Multiply:case et.Divide:case et.Add:case et.Subtract:case et.Clamp:case et.Mod:case et.Pow:case et.Abs:case et.Floor:case et.Ceil:case et.Round:case et.Sin:case et.Cos:case et.Atan:case et.Sqrt:return V7(e);case et.Match:return X7(e);default:throw new Error(`Unsupported operator ${n}`)}}function W7(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Jo(e.args[s]);switch(n){case et.Number:case et.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function Y7(e,t){const n=e.args[0];if(!(n instanceof Os))throw new Error("Expected literal name");const i=n.value;if(typeof i!="string")throw new Error("Expected string name");switch(e.operator){case et.Get:return r=>r.properties[i];case et.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function B7(e,t){const n=e.operator,i=Jo(e.args[0]),r=Jo(e.args[1]);switch(n){case et.Equal:return s=>i(s)===r(s);case et.NotEqual:return s=>i(s)!==r(s);case et.LessThan:return s=>i(s)<r(s);case et.LessThanOrEqualTo:return s=>i(s)<=r(s);case et.GreaterThan:return s=>i(s)>r(s);case et.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function U7(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Jo(e.args[s]);switch(n){case et.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case et.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case et.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function V7(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Jo(e.args[s]);switch(n){case et.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case et.Divide:return s=>r[0](s)/r[1](s);case et.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case et.Subtract:return s=>r[0](s)-r[1](s);case et.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case et.Mod:return s=>r[0](s)%r[1](s);case et.Pow:return s=>Math.pow(r[0](s),r[1](s));case et.Abs:return s=>Math.abs(r[0](s));case et.Floor:return s=>Math.floor(r[0](s));case et.Ceil:return s=>Math.ceil(r[0](s));case et.Round:return s=>Math.round(r[0](s));case et.Sin:return s=>Math.sin(r[0](s));case et.Cos:return s=>Math.cos(r[0](s));case et.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case et.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function X7(e,t){const n=e.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Jo(e.args[r]);return r=>{const s=i[0](r);for(let o=1;o<n;o+=2)if(s===i[o](r))return i[o+1](r);return i[n-1](r)}}function H7(e){return!0}function j7(e){const t=UM(),n=Z7(e,t),i=VM();return function(r,s){return i.properties=r.getPropertiesInternal(),i.resolution=s,n(i)}}function t2(e){const t=UM(),n=e.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Oy(e[o],t);const r=VM(),s=new Array(n);return function(o,a){r.properties=o.getPropertiesInternal(),r.resolution=a;for(let l=0;l<n;++l)s[l]=i[l](r);return s}}function Z7(e,t){const n=e.length,i=new Array(n);for(let r=0;r<n;++r){const s=e[r],o="filter"in s?qs(s.filter,qe,t):H7;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Oy(s.style[c],t)}else a=[Oy(s.style,t)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(r)&&!(e[a].else&&o)){o=!0;for(const c of i[a].styles){const u=c(r);u&&s.push(u)}}}return s}}function Oy(e,t){const n=Cu(e,"",t),i=Su(e,"",t),r=q7(e,t),s=K7(e,t),o=En(e,"z-index",t),a=new Bo;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(i){const u=i(l);u&&(c=!1),a.setStroke(u)}if(r){const u=r(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function Cu(e,t,n){const i=XM(e,t+"fill-color",n);if(!i)return null;const r=new Z1;return function(s){const o=i(s);return o==="none"?null:(r.setColor(o),r)}}function Su(e,t,n){const i=En(e,t+"stroke-width",n),r=XM(e,t+"stroke-color",n);if(!i&&!r)return null;const s=vs(e,t+"stroke-line-cap",n),o=vs(e,t+"stroke-line-join",n),a=HM(e,t+"stroke-line-dash",n),l=En(e,t+"stroke-line-dash-offset",n),c=En(e,t+"stroke-miter-limit",n),u=new Q1;return function(f){if(r){const h=r(f);if(h==="none")return null;u.setColor(h)}if(i&&u.setWidth(i(f)),s){const h=s(f);if(h!=="butt"&&h!=="round"&&h!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(h)}if(o){const h=o(f);if(h!=="bevel"&&h!=="round"&&h!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(h)}return a&&u.setLineDash(a(f)),l&&u.setLineDashOffset(l(f)),c&&u.setMiterLimit(c(f)),u}}function q7(e,t){const n="text-",i=vs(e,n+"value",t);if(!i)return null;const r=Cu(e,n,t),s=Cu(e,n+"background-",t),o=Su(e,n,t),a=Su(e,n+"background-",t),l=vs(e,n+"font",t),c=En(e,n+"max-angle",t),u=En(e,n+"offset-x",t),f=En(e,n+"offset-y",t),h=Mu(e,n+"overflow",t),d=vs(e,n+"placement",t),g=En(e,n+"repeat",t),m=dm(e,n+"scale",t),_=Mu(e,n+"rotate-with-view",t),p=En(e,n+"rotation",t),y=vs(e,n+"align",t),x=vs(e,n+"justify",t),w=vs(e,n+"baseline",t),v=HM(e,n+"padding",t),b=new i7({});return function(E){if(b.setText(i(E)),r&&b.setFill(r(E)),s&&b.setBackgroundFill(s(E)),o&&b.setStroke(o(E)),a&&b.setBackgroundStroke(a(E)),l&&b.setFont(l(E)),c&&b.setMaxAngle(c(E)),u&&b.setOffsetX(u(E)),f&&b.setOffsetY(f(E)),h&&b.setOverflow(h(E)),d){const C=d(E);if(C!=="point"&&C!=="line")throw new Error("Expected point or line for text-placement");b.setPlacement(C)}if(g&&b.setRepeat(g(E)),m&&b.setScale(m(E)),_&&b.setRotateWithView(_(E)),p&&b.setRotation(p(E)),y){const C=y(E);if(C!=="left"&&C!=="center"&&C!=="right"&&C!=="end"&&C!=="start")throw new Error("Expected left, right, center, start, or end for text-align");b.setTextAlign(C)}if(x){const C=x(E);if(C!=="left"&&C!=="right"&&C!=="center")throw new Error("Expected left, right, or center for text-justify");b.setJustify(C)}if(w){const C=w(E);if(C!=="bottom"&&C!=="top"&&C!=="middle"&&C!=="alphabetic"&&C!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");b.setTextBaseline(C)}return v&&b.setPadding(v(E)),b}}function K7(e,t){return"icon-src"in e?J7(e,t):"shape-points"in e?Q7(e,t):"circle-radius"in e?t9(e,t):null}function J7(e,t){const n="icon-",i=n+"src",r=jM(e[i],i),s=Rd(e,n+"anchor",t),o=dm(e,n+"scale",t),a=En(e,n+"opacity",t),l=Rd(e,n+"displacement",t),c=En(e,n+"rotation",t),u=Mu(e,n+"rotate-with-view",t),f=e2(e,n+"anchor-origin"),h=n2(e,n+"anchor-x-units"),d=n2(e,n+"anchor-y-units"),g=r9(e,n+"color"),m=n9(e,n+"cross-origin"),_=i9(e,n+"offset"),p=e2(e,n+"offset-origin"),y=Va(e,n+"width"),x=Va(e,n+"height"),w=e9(e,n+"size"),v=sw(e,n+"declutter"),b=new Sd({src:r,anchorOrigin:f,anchorXUnits:h,anchorYUnits:d,color:g,crossOrigin:m,offset:_,offsetOrigin:p,height:x,width:y,size:w,declutterMode:v});return function(E){return a&&b.setOpacity(a(E)),l&&b.setDisplacement(l(E)),c&&b.setRotation(c(E)),u&&b.setRotateWithView(u(E)),o&&b.setScale(o(E)),s&&b.setAnchor(s(E)),b}}function Q7(e,t){const n="shape-",i=n+"points",r=ZM(e[i],i),s=Cu(e,n,t),o=Su(e,n,t),a=dm(e,n+"scale",t),l=Rd(e,n+"displacement",t),c=En(e,n+"rotation",t),u=Mu(e,n+"rotate-with-view",t),f=Va(e,n+"radius"),h=Va(e,n+"radius1"),d=Va(e,n+"radius2"),g=Va(e,n+"angle"),m=sw(e,n+"declutter-mode"),_=new OM({points:r,radius:f,radius1:h,radius2:d,angle:g,declutterMode:m});return function(p){return s&&_.setFill(s(p)),o&&_.setStroke(o(p)),l&&_.setDisplacement(l(p)),c&&_.setRotation(c(p)),u&&_.setRotateWithView(u(p)),a&&_.setScale(a(p)),_}}function t9(e,t){const n="circle-",i=Cu(e,n,t),r=Su(e,n,t),s=En(e,n+"radius",t),o=dm(e,n+"scale",t),a=Rd(e,n+"displacement",t),l=En(e,n+"rotation",t),c=Mu(e,n+"rotate-with-view",t),u=sw(e,n+"declutter-mode"),f=new kM({radius:5,declutterMode:u});return function(h){return s&&f.setRadius(s(h)),i&&f.setFill(i(h)),r&&f.setStroke(r(h)),a&&f.setDisplacement(a(h)),l&&f.setRotation(l(h)),c&&f.setRotateWithView(c(h)),o&&f.setScale(o(h)),f}}function En(e,t,n){if(!(t in e))return;const i=qs(e[t],At,n);return function(r){return ZM(i(r),t)}}function vs(e,t,n){if(!(t in e))return null;const i=qs(e[t],Cl,n);return function(r){return jM(i(r),t)}}function Mu(e,t,n){if(!(t in e))return null;const i=qs(e[t],qe,n);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function XM(e,t,n){if(!(t in e))return null;const i=qs(e[t],rw|Cl,n);return function(r){return qM(i(r),t)}}function HM(e,t,n){if(!(t in e))return null;const i=qs(e[t],rf,n);return function(r){return sf(i(r),t)}}function Rd(e,t,n){if(!(t in e))return null;const i=qs(e[t],rf,n);return function(r){const s=sf(i(r),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function dm(e,t,n){if(!(t in e))return null;const i=qs(e[t],rf|At,n);return function(r){return s9(i(r),t)}}function Va(e,t){const n=e[t];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}}function e9(e,t){const n=e[t];if(n!==void 0){if(typeof n=="number")return Nn(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${t}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return n}}function n9(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}}function e2(e,t){const n=e[t];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function n2(e,t){const n=e[t];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return n}}function i9(e,t){const n=e[t];if(n!==void 0)return sf(n,t)}function sw(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function r9(e,t){const n=e[t];if(n!==void 0)return qM(n,t)}function sf(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const n=e.length;for(let i=0;i<n;++i)if(typeof e[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function jM(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function ZM(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function qM(e,t){if(typeof e=="string")return e;const n=sf(e,t),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return n}function s9(e,t){if(typeof e=="number")return e;const n=sf(e,t);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return n}const i2={RENDER_ORDER:"renderOrder"};class o9 extends cm{constructor(t){t=t||{};const n=Object.assign({},t);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(i2.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new iw(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(i2.RENDER_ORDER,t)}setStyle(t){this.style_=a9(t),this.styleFunction_=t===null?void 0:Q$(this.style_),this.changed()}}function a9(e){if(e===void 0)return t7;if(!e)return null;if(typeof e=="function"||e instanceof Bo)return e;if(!Array.isArray(e))return t2([e]);if(e.length===0)return[];const t=e.length,n=e[0];if(n instanceof Bo){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!(o instanceof Bo))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in n){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return j7(r)}return t2(e)}const l9=o9;class c9 extends nw{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,s=r.resolution,o=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(n.extent!==void 0&&(l=il(l,Ir(n.extent,r.projection))),!a[Me.ANIMATING]&&!a[Me.INTERACTING]&&!Hl(l))if(o){const c=r.projection,u=o.getImage(l,s,i,c);u&&(this.loadImage(u)?this.image_=u:u.getState()===Rt.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Ee(n.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!Ku(s,r))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=Qt(o),c=Math.floor(a.width*((r[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=Gn(o),f=Math.floor(a.height*((o[3]-r[1])/u));return f<0||f>=a.height?null:this.getImageData(a,c,f)}renderFrame(t,n){const i=this.image_,r=i.getExtent(),s=i.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=i.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],u=t.pixelRatio,f=t.viewState,h=f.center,d=f.resolution,g=u*o/(d*l),m=u*a/(d*l),_=t.extent,p=f.resolution,y=f.rotation,x=Math.round(Qt(_)/p*u),w=Math.round(Gn(_)/p*u);Ri(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,y,-x/2,-w/2),nm(this.inversePixelTransform,this.pixelTransform);const v=T1(this.pixelTransform);this.useContainer(n,v,this.getBackground(t));const b=this.context,E=b.canvas;E.width!=x||E.height!=w?(E.width=x,E.height=w):this.containerReused||b.clearRect(0,0,x,w);let C=!1,I=!0;if(c.extent){const O=Ir(c.extent,f.projection);I=hn(O,t.extent),C=I&&!As(O,t.extent),C&&this.clipUnrotated(b,t,O)}const S=i.getImage(),R=Ri(this.tempTransform,x/2,w/2,g,m,0,l*(r[0]-h[0])/o,l*(h[1]-r[3])/a);this.renderedResolution=a*u/l;const M=S.width*R[0],k=S.height*R[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,t),I&&M>=.5&&k>=.5){const O=R[4],A=R[5],P=c.opacity;let N;P!==1&&(N=b.globalAlpha,b.globalAlpha=P),b.drawImage(S,0,0,+S.width,+S.height,O,A,M,k),P!==1&&(b.globalAlpha=N)}return this.postRender(b,t),C&&b.restore(),b.imageSmoothingEnabled=!0,v!==E.style.transform&&(E.style.transform=v),this.container}}const u9=c9,of={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},lh=[of.FILL],ks=[of.STROKE],Ro=[of.BEGIN_PATH],r2=[of.CLOSE_PATH],yt=of;class f9{drawCustom(t,n,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,n){}drawFeature(t,n){}drawGeometryCollection(t,n){}drawLineString(t,n){}drawMultiLineString(t,n){}drawMultiPoint(t,n){}drawMultiPolygon(t,n){}drawPoint(t,n){}drawPolygon(t,n){}drawText(t,n){}setFillStrokeStyle(t,n){}setImageStyle(t,n){}setTextStyle(t,n){}}const KM=f9;class h9 extends KM{constructor(t,n,i,r){super(),this.tolerance=t,this.maxExtent=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})}appendFlatPointCoordinates(t,n){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=t.length;a<l;a+=n)r[0]=t[a],r[1]=t[a+1],Ku(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(t,n,i,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=r);let u=t[n],f=t[n+1];const h=this.tmpCoordinate_;let d=!0,g,m,_;for(g=n+r;g<i;g+=r)h[0]=t[g],h[1]=t[g+1],_=hy(c,h),_!==m?(d&&(a[l++]=u,a[l++]=f,d=!1),a[l++]=h[0],a[l++]=h[1]):_===Ge.INTERSECTING?(a[l++]=h[0],a[l++]=h[1],d=!1):d=!0,u=h[0],f=h[1],m=_;return(s&&d||g===n+r)&&(a[l++]=u,a[l++]=f),l}drawCustomCoordinates_(t,n,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(t,n,l,r,!1,!1);s.push(c),n=l}return n}drawCustom(t,n,i,r){this.beginGeometry(t,n);const s=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,c,u,f,h;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),f=[];const d=t.getEndss();h=0;for(let g=0,m=d.length;g<m;++g){const _=[];h=this.drawCustomCoordinates_(l,h,d[g],o,_),f.push(_)}this.instructions.push([yt.CUSTOM,a,f,t,i,wy]),this.hitDetectionInstructions.push([yt.CUSTOM,a,f,t,r||i,wy]);break;case"Polygon":case"MultiLineString":u=[],l=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(l,0,t.getEnds(),o,u),this.instructions.push([yt.CUSTOM,a,u,t,i,xu]),this.hitDetectionInstructions.push([yt.CUSTOM,a,u,t,r||i,xu]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([yt.CUSTOM,a,c,t,i,Ls]),this.hitDetectionInstructions.push([yt.CUSTOM,a,c,t,r||i,Ls]);break;case"MultiPoint":l=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([yt.CUSTOM,a,c,t,i,Ls]),this.hitDetectionInstructions.push([yt.CUSTOM,a,c,t,r||i,Ls]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([yt.CUSTOM,a,c,t,i]),this.hitDetectionInstructions.push([yt.CUSTOM,a,c,t,r||i]);break}this.endGeometry(n)}beginGeometry(t,n){this.beginGeometryInstruction1_=[yt.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[yt.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let n;const i=t.length;let r,s,o=-1;for(n=0;n<i;++n)r=t[n],s=r[0],s==yt.END_GEOMETRY?o=n:s==yt.BEGIN_GEOMETRY&&(r[2]=n,EN(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(t,n){const i=this.state;if(t){const r=t.getColor();i.fillStyle=Zi(r||vn)}else i.fillStyle=void 0;if(n){const r=n.getColor();i.strokeStyle=Zi(r||vu);const s=n.getLineCap();i.lineCap=s!==void 0?s:El;const o=n.getLineDash();i.lineDash=o?o.slice():Dr;const a=n.getLineDashOffset();i.lineDashOffset=a||$r;const l=n.getLineJoin();i.lineJoin=l!==void 0?l:Tl;const c=n.getWidth();i.lineWidth=c!==void 0?c:Tu;const u=n.getMiterLimit();i.miterLimit=u!==void 0?u:bu,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const n=t.fillStyle,i=[yt.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[yt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,n){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,n){const i=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||s!=t.currentLineDash&&!Zs(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[yt.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=GS(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;C1(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const af=h9;class d9 extends af{constructor(t,n,i,r){super(t,n,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([yt.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([yt.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([yt.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([yt.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,n){const i=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}}const g9=d9;class m9 extends af{constructor(t,n,i,r){super(t,n,i,r)}drawFlatCoordinates_(t,n,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),a=[yt.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dr,$r],Ro);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(ks),this.endGeometry(n)}drawMultiLineString(t,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dr,$r],Ro);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,f=o.length;u<f;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(ks),this.endGeometry(n)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ks),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(ks),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Ro)}}const p9=m9;class y9 extends af{constructor(t,n,i,r){super(t,n,i,r)}drawFlatCoordinatess_(t,n,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(Ro),this.hitDetectionInstructions.push(Ro);for(let c=0;c<l;++c){const u=i[c],f=this.coordinates.length,h=this.appendFlatLineCoordinates(t,n,u,r,!0,!a),d=[yt.MOVE_TO_LINE_TO,f,h];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(r2),this.hitDetectionInstructions.push(r2)),n=u}return o&&(this.instructions.push(lh),this.hitDetectionInstructions.push(lh)),a&&(this.instructions.push(ks),this.hitDetectionInstructions.push(ks)),n}drawCircle(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_FILL_STYLE,vn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dr,$r]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[yt.CIRCLE,l];this.instructions.push(Ro,c),this.hitDetectionInstructions.push(Ro,c),i.fillStyle!==void 0&&(this.instructions.push(lh),this.hitDetectionInstructions.push(lh)),i.strokeStyle!==void 0&&(this.instructions.push(ks),this.hitDetectionInstructions.push(ks)),this.endGeometry(n)}drawPolygon(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_FILL_STYLE,vn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dr,$r]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(n)}drawMultiPolygon(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_FILL_STYLE,vn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dr,$r]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,f=o.length;u<f;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const n=this.coordinates;for(let i=0,r=n.length;i<r;++i)n[i]=po(n[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const s2=y9;function _9(e,t,n,i,r){const s=[];let o=n,a=0,l=t.slice(n,2);for(;a<e&&o+r<i;){const[c,u]=l.slice(-2),f=t[o+r],h=t[o+r+1],d=Math.sqrt((f-c)*(f-c)+(h-u)*(h-u));if(a+=d,a>=e){const g=(e-a+d)/d,m=Pn(c,f,g),_=Pn(u,h,g);l.push(m,_),s.push(l),l=[m,_],a==e&&(o+=r),a=0}else if(a<e)l.push(t[o+r],t[o+r+1]),o+=r;else{const g=d-a,m=Pn(c,f,g/d),_=Pn(u,h,g/d);l.push(m,_),s.push(l),l=[m,_],a=0,o+=r}}return a>0&&s.push(l),s}function w9(e,t,n,i,r){let s=n,o=n,a=0,l=0,c=n,u,f,h,d,g,m,_,p,y,x;for(f=n;f<i;f+=r){const w=t[f],v=t[f+1];g!==void 0&&(y=w-g,x=v-m,d=Math.sqrt(y*y+x*x),_!==void 0&&(l+=h,u=Math.acos((_*y+p*x)/(h*d)),u>e&&(l>a&&(a=l,s=c,o=f),l=0,c=f-r)),h=d,_=y,p=x),g=w,m=v}return l+=d,l>a?[c,f]:[s,o]}const Id={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class x9 extends af{constructor(t,n,i,r){super(t,n,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[vn]={fillStyle:vn},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,n){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=t.getType();let c=null,u=t.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!hn(this.getBufferedMaxExtent(),t.getExtent()))return;let f;if(c=t.getFlatCoordinates(),l=="LineString")f=[c.length];else if(l=="MultiLineString")f=t.getEnds();else if(l=="Polygon")f=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=t.getEndss();f=[];for(let _=0,p=m.length;_<p;++_)f.push(m[_][0])}this.beginGeometry(t,n);const h=s.repeat,d=h?void 0:s.textAlign;let g=0;for(let m=0,_=f.length;m<_;++m){let p;h?p=_9(h*this.resolution,c,g,f[m],u):p=[c.slice(g,f[m])];for(let y=0,x=p.length;y<x;++y){const w=p[y];let v=0,b=w.length;if(d==null){const C=w9(s.maxAngle,w,0,w.length,2);v=C[0],b=C[1]}for(let C=v;C<b;C+=u)o.push(w[C],w[C+1]);const E=o.length;g=f[m],this.drawChars_(a,E),a=E}}this.endGeometry(n)}else{let f=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),u=2;break;case"Polygon":c=t.getFlatInteriorPoint(),s.overflow||f.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const p=t.getFlatInteriorPoints();c=[];for(let y=0,x=p.length;y<x;y+=3)s.overflow||f.push(p[y+2]/this.resolution),c.push(p[y],p[y+1]);if(c.length===0)return;u=2;break}const h=this.appendFlatPointCoordinates(c,u);if(h===a)return;if(f&&(h-a)/2!==c.length/u){let p=a/2;f=f.filter((y,x)=>{const w=o[(p+x)*2]===c[x*u]&&o[(p+x)*2+1]===c[x*u+1];return w||--p,w})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);let d=s.padding;if(d!=Mo&&(s.scale[0]<0||s.scale[1]<0)){let p=s.padding[0],y=s.padding[1],x=s.padding[2],w=s.padding[3];s.scale[0]<0&&(y=-y,w=-w),s.scale[1]<0&&(p=-p,x=-x),d=[p,y,x,w]}const g=this.pixelRatio;this.instructions.push([yt.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,d==Mo?Mo:d.map(function(p){return p*g}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const m=1/g,_=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=vn,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([yt.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,d,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?vn:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),s.backgroundFill&&(this.state.fillStyle=_,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||Eu,justify:n.justify,textBaseline:n.textBaseline||_d,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,n){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Id[r.textBaseline],u=this.textOffsetY_*l,f=this.text_,h=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([yt.DRAW_CHARS,t,n,c,r.overflow,a,r.maxAngle,l,u,s,h*l,f,o,1]),this.hitDetectionInstructions.push([yt.DRAW_CHARS,t,n,c,r.overflow,a&&vn,r.maxAngle,l,u,s,h*l,f,o,1/l])}setTextStyle(t,n){let i,r,s;if(!t)this.text_="";else{const o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Zi(o.getColor()||vn)):(r=null,this.textFillState_=r);const a=t.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=a.getLineDash(),m=a.getLineDashOffset(),_=a.getWidth(),p=a.getMiterLimit();s.lineCap=a.getLineCap()||El,s.lineDash=g?g.slice():Dr,s.lineDashOffset=m===void 0?$r:m,s.lineJoin=a.getLineJoin()||Tl,s.lineWidth=_===void 0?Tu:_,s.miterLimit=p===void 0?bu:p,s.strokeStyle=Zi(a.getColor()||vu)}i=this.textState_;const l=t.getFont()||_M;g8(l);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||_d,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Mo,i.scale=c===void 0?[1,1]:c;const u=t.getOffsetX(),f=t.getOffsetY(),h=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=h===void 0?!1:h,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Vt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+Vt(r.fillStyle):""}this.declutterImageWithText_=n}}const b9={Circle:s2,Default:af,Image:g9,LineString:p9,Polygon:s2,Text:x9};class v9{constructor(t,n,i,r){this.tolerance_=t,this.maxExtent_=n,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const n in this.buildersByZIndex_){t[n]=t[n]||{};const i=this.buildersByZIndex_[n];for(const r in i){const s=i[r].finish();t[n][r]=s}}return t}getBuilder(t,n){const i=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[n];if(s===void 0){const o=b9[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[n]=s}return s}}const o2=v9;function E9(e,t,n,i,r,s,o,a,l,c,u,f){let h=e[t],d=e[t+1],g=0,m=0,_=0,p=0;function y(){g=h,m=d,t+=i,h=e[t],d=e[t+1],p+=_,_=Math.sqrt((h-g)*(h-g)+(d-m)*(d-m))}do y();while(t<n-i&&p+_<s);let x=_===0?0:(s-p)/_;const w=Pn(g,h,x),v=Pn(m,d,x),b=t-i,E=p,C=s+a*l(c,r,u);for(;t<n-i&&p+_<C;)y();x=_===0?0:(C-p)/_;const I=Pn(g,h,x),S=Pn(m,d,x);let R;if(f){const P=[w,v,I,S];nM(P,0,4,2,f,P,P),R=P[0]>P[2]}else R=w>I;const M=Math.PI,k=[],O=b+i===t;t=b,_=0,p=E,h=e[t],d=e[t+1];let A;if(O){y(),A=Math.atan2(d-m,h-g),R&&(A+=A>0?-M:M);const P=(I+w)/2,N=(S+v)/2;return k[0]=[P,N,(C-s)/2,A,r],k}r=r.replace(/\n/g," ");for(let P=0,N=r.length;P<N;){y();let G=Math.atan2(d-m,h-g);if(R&&(G+=G>0?-M:M),A!==void 0){let nt=G-A;if(nt+=nt>M?-2*M:nt<-M?2*M:0,Math.abs(nt)>o)return null}A=G;const j=P;let U=0;for(;P<N;++P){const nt=R?N-P-1:P,st=a*l(c,r[nt],u);if(t+i<n&&p+_<s+U+st/2)break;U+=st}if(P===j)continue;const Z=R?r.substring(N-j,N-P):r.substring(j,P);x=_===0?0:(s+U/2-p)/_;const z=Pn(g,h,x),Q=Pn(m,d,x);k.push([z,Q,U/2,G,Z]),s+=U}return k}const Sa=ai(),us=[],dr=[],gr=[],fs=[];function a2(e){return e[3].declutterBox}const l2=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Y0(e,t){return t==="start"?t=l2.test(e)?"right":"left":t==="end"&&(t=l2.test(e)?"left":"right"),Id[t]}function T9(e,t,n){return n>0&&e.push(`
`,""),e.push(t,""),e}class C9{constructor(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Si(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(t,n,i,r){const s=t+n+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],f=Array.isArray(t),h=l.justify?Id[l.justify]:Y0(Array.isArray(t)?t[0]:t,l.textAlign||Eu),d=r&&o.lineWidth?o.lineWidth:0,g=f?t:t.split(`
`).reduce(T9,[]),{width:m,height:_,widths:p,heights:y,lineWidths:x}=p8(l,g),w=m+d,v=[],b=(w+2)*u[0],E=(_+d)*u[1],C={width:b<0?Math.floor(b):Math.ceil(b),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:v};(u[0]!=1||u[1]!=1)&&v.push("scale",u),r&&(v.push("strokeStyle",o.strokeStyle),v.push("lineWidth",d),v.push("lineCap",o.lineCap),v.push("lineJoin",o.lineJoin),v.push("miterLimit",o.miterLimit),v.push("setLineDash",[o.lineDash]),v.push("lineDashOffset",o.lineDashOffset)),i&&v.push("fillStyle",a.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");const I=.5-h;let S=h*w+I*d;const R=[],M=[];let k=0,O=0,A=0,P=0,N;for(let G=0,j=g.length;G<j;G+=2){const U=g[G];if(U===`
`){O+=k,k=0,S=h*w+I*d,++P;continue}const Z=g[G+1]||l.font;Z!==N&&(r&&R.push("font",Z),i&&M.push("font",Z),N=Z),k=Math.max(k,y[A]);const z=[U,S+I*p[A]+h*(p[A]-x[P]),.5*(d+k)+O];S+=p[A],r&&R.push("strokeText",z),i&&M.push("fillText",z),++A}return Array.prototype.push.apply(v,R),Array.prototype.push.apply(v,M),this.labels_[s]=C,C}replayTextBackground_(t,n,i,r,s,o,a){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,n),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,n,i,r,s,o,a,l,c,u,f,h,d,g,m,_){a*=h[0],l*=h[1];let p=i-a,y=r-l;const x=s+c>t?t-c:s,w=o+u>n?n-u:o,v=g[3]+x*h[0]+g[1],b=g[0]+w*h[1]+g[2],E=p-g[3],C=y-g[0];(m||f!==0)&&(us[0]=E,fs[0]=E,us[1]=C,dr[1]=C,dr[0]=E+v,gr[0]=dr[0],gr[1]=C+b,fs[1]=gr[1]);let I;return f!==0?(I=Ri(Si(),i,r,1,1,f,-i,-r),Ee(I,us),Ee(I,dr),Ee(I,gr),Ee(I,fs),Ys(Math.min(us[0],dr[0],gr[0],fs[0]),Math.min(us[1],dr[1],gr[1],fs[1]),Math.max(us[0],dr[0],gr[0],fs[0]),Math.max(us[1],dr[1],gr[1],fs[1]),Sa)):Ys(Math.min(E,E+v),Math.min(C,C+b),Math.max(E,E+v),Math.max(C,C+b),Sa),d&&(p=Math.round(p),y=Math.round(y)),{drawImageX:p,drawImageY:y,drawImageW:x,drawImageH:w,originX:c,originY:u,declutterBox:{minX:Sa[0],minY:Sa[1],maxX:Sa[2],maxY:Sa[3],value:_},canvasTransform:I,scale:h}}replayImageOrLabel_(t,n,i,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=t.canvas,f=a?a[2]*r.scale[0]/2:0;return c.minX-f<=u.width/n&&c.maxX+f>=0&&c.minY-f<=u.height/n&&c.maxY+f>=0&&(l&&this.replayTextBackground_(t,us,dr,gr,fs,o,a),y8(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){const n=Ee(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.lineDashOffset=n[7],t.setLineDash(n[6])}drawLabelWithPointPlacement_(t,n,i,r){const s=this.textStates[n],o=this.createLabel(t,n,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=Y0(Array.isArray(t)?t[0]:t,s.textAlign||Eu),u=Id[s.textBaseline||_d],f=a&&a.lineWidth?a.lineWidth:0,h=o.width/l-2*s.scale[0],d=c*h+2*(.5-c)*f,g=u*o.height/l+2*(.5-u)*f;return{label:o,anchorX:d,anchorY:g}}execute_(t,n,i,r,s,o,a,l){let c;this.pixelCoordinates_&&Zs(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Yo(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),NN(this.renderedTransform_,i));let u=0;const f=r.length;let h=0,d,g,m,_,p,y,x,w,v,b,E,C,I=0,S=0,R=null,M=null;const k=this.coordinateCache_,O=this.viewRotation_,A=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,P={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:O},N=this.instructions!=r||this.overlaps?0:200;let G,j,U,Z;for(;u<f;){const z=r[u];switch(z[0]){case yt.BEGIN_GEOMETRY:G=z[1],Z=z[3],G.getGeometry()?a!==void 0&&!hn(a,Z.getExtent())?u=z[2]+1:++u:u=z[2];break;case yt.BEGIN_PATH:I>N&&(this.fill_(t),I=0),S>N&&(t.stroke(),S=0),!I&&!S&&(t.beginPath(),_=NaN,p=NaN),++u;break;case yt.CIRCLE:h=z[1];const nt=c[h],st=c[h+1],ot=c[h+2],$=c[h+3],B=ot-nt,D=$-st,V=Math.sqrt(B*B+D*D);t.moveTo(nt+V,st),t.arc(nt,st,V,0,2*Math.PI,!0),++u;break;case yt.CLOSE_PATH:t.closePath(),++u;break;case yt.CUSTOM:h=z[1],d=z[2];const K=z[3],T=z[4],L=z.length==6?z[5]:void 0;P.geometry=K,P.feature=G,u in k||(k[u]=[]);const F=k[u];L?L(c,h,d,2,F):(F[0]=c[h],F[1]=c[h+1],F.length=2),T(F,P),++u;break;case yt.DRAW_IMAGE:h=z[1],d=z[2],w=z[3],g=z[4],m=z[5];let W=z[6];const Y=z[7],H=z[8],rt=z[9],J=z[10];let tt=z[11];const q=z[12];let ct=z[13];const at=z[14],ut=z[15];if(!w&&z.length>=20){v=z[19],b=z[20],E=z[21],C=z[22];const On=this.drawLabelWithPointPlacement_(v,b,E,C);w=On.label,z[3]=w;const ba=z[23];g=(On.anchorX-ba)*this.pixelRatio,z[4]=g;const Xn=z[24];m=(On.anchorY-Xn)*this.pixelRatio,z[5]=m,W=w.height,z[6]=W,ct=w.width,z[13]=ct}let ft;z.length>25&&(ft=z[25]);let vt,Lt,Tt;z.length>17?(vt=z[16],Lt=z[17],Tt=z[18]):(vt=Mo,Lt=!1,Tt=!1),J&&A?tt+=O:!J&&!A&&(tt-=O);let jt=0;for(;h<d;h+=2){if(ft&&ft[jt++]<ct/this.pixelRatio)continue;const On=this.calculateImageOrLabelDimensions_(w.width,w.height,c[h],c[h+1],ct,W,g,m,H,rt,tt,q,s,vt,Lt||Tt,G),ba=[t,n,w,On,Y,Lt?R:null,Tt?M:null];if(l){if(at==="none")continue;if(at==="obstacle"){l.insert(On.declutterBox);continue}else{let Xn,ur;if(ut){const kn=d-h;if(!ut[kn]){ut[kn]=ba;continue}if(Xn=ut[kn],delete ut[kn],ur=a2(Xn),l.collides(ur))continue}if(l.collides(On.declutterBox))continue;Xn&&(l.insert(ur),this.replayImageOrLabel_.apply(this,Xn)),l.insert(On.declutterBox)}}this.replayImageOrLabel_.apply(this,ba)}++u;break;case yt.DRAW_CHARS:const pe=z[1],ce=z[2],ss=z[3],Vn=z[4];C=z[5];const sn=z[6],ue=z[7],on=z[8];E=z[9];const xa=z[10];v=z[11],b=z[12];const mb=[z[13],z[13]],w0=this.textStates[b],dc=w0.font,gc=[w0.scale[0]*ue,w0.scale[1]*ue];let mc;dc in this.widths_?mc=this.widths_[dc]:(mc={},this.widths_[dc]=mc);const pb=IM(c,pe,ce,2),yb=Math.abs(gc[0])*Bv(dc,v,mc);if(Vn||yb<=pb){const On=this.textStates[b].textAlign,ba=(pb-yb)*Y0(v,On),Xn=E9(c,pe,ce,2,v,ba,sn,Math.abs(gc[0]),Bv,dc,mc,A?0:this.viewRotation_);t:if(Xn){const ur=[];let kn,Bf,Uf,_n,Hn;if(E)for(kn=0,Bf=Xn.length;kn<Bf;++kn){Hn=Xn[kn],Uf=Hn[4],_n=this.createLabel(Uf,b,"",E),g=Hn[2]+(gc[0]<0?-xa:xa),m=ss*_n.height+(.5-ss)*2*xa*gc[1]/gc[0]-on;const fr=this.calculateImageOrLabelDimensions_(_n.width,_n.height,Hn[0],Hn[1],_n.width,_n.height,g,m,0,0,Hn[3],mb,!1,Mo,!1,G);if(l&&l.collides(fr.declutterBox))break t;ur.push([t,n,_n,fr,1,null,null])}if(C)for(kn=0,Bf=Xn.length;kn<Bf;++kn){Hn=Xn[kn],Uf=Hn[4],_n=this.createLabel(Uf,b,C,""),g=Hn[2],m=ss*_n.height-on;const fr=this.calculateImageOrLabelDimensions_(_n.width,_n.height,Hn[0],Hn[1],_n.width,_n.height,g,m,0,0,Hn[3],mb,!1,Mo,!1,G);if(l&&l.collides(fr.declutterBox))break t;ur.push([t,n,_n,fr,1,null,null])}l&&l.load(ur.map(a2));for(let fr=0,Ok=ur.length;fr<Ok;++fr)this.replayImageOrLabel_.apply(this,ur[fr])}}++u;break;case yt.END_GEOMETRY:if(o!==void 0){G=z[1];const On=o(G,Z);if(On)return On}++u;break;case yt.FILL:N?I++:this.fill_(t),++u;break;case yt.MOVE_TO_LINE_TO:for(h=z[1],d=z[2],j=c[h],U=c[h+1],y=j+.5|0,x=U+.5|0,(y!==_||x!==p)&&(t.moveTo(j,U),_=y,p=x),h+=2;h<d;h+=2)j=c[h],U=c[h+1],y=j+.5|0,x=U+.5|0,(h==d-2||y!==_||x!==p)&&(t.lineTo(j,U),_=y,p=x);++u;break;case yt.SET_FILL_STYLE:R=z,this.alignFill_=z[2],I&&(this.fill_(t),I=0,S&&(t.stroke(),S=0)),t.fillStyle=z[1],++u;break;case yt.SET_STROKE_STYLE:M=z,S&&(t.stroke(),S=0),this.setStrokeStyle_(t,z),++u;break;case yt.STROKE:N?S++:t.stroke(),++u;break;default:++u;break}}I&&this.fill_(t),S&&t.stroke()}execute(t,n,i,r,s,o){this.viewRotation_=r,this.execute_(t,n,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,n,i,r,s){return this.viewRotation_=i,this.execute_(t,1,n,this.hitDetectionInstructions,!0,r,s)}}const S9=C9,B0=["Polygon","Circle","LineString","Image","Text","Default"];class M9{constructor(t,n,i,r,s,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Si(),this.createExecutors_(s)}clip(t,n){const i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const n in t){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const r=t[n];for(const s in r){const o=r[s];i[s]=new S9(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let r=0,s=t.length;r<s;++r)if(t[r]in i)return!0}return!1}forEachFeatureAtCoordinate(t,n,i,r,s,o){r=Math.round(r);const a=r*2+1,l=Ri(this.hitDetectionTransform_,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=mn(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let f;this.renderBuffer_!==void 0&&(f=ai(),eu(f,t),C1(f,n*(this.renderBuffer_+r),f));const h=R9(r);let d;function g(v,b){const E=u.getImageData(0,0,a,a).data;for(let C=0,I=h.length;C<I;C++)if(E[h[C]]>0){if(!o||d!=="Image"&&d!=="Text"||o.includes(v)){const S=(h[C]-3)/4,R=r-S%a,M=r-(S/a|0),k=s(v,b,R*R+M*M);if(k)return k}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(Gs);let _,p,y,x,w;for(_=m.length-1;_>=0;--_){const v=m[_].toString();for(y=this.executorsByZIndex_[v],p=B0.length-1;p>=0;--p)if(d=B0[p],x=y[d],x!==void 0&&(w=x.executeHitDetection(u,l,i,g,f),w))return w}}getClipCoords(t){const n=this.maxExtent_;if(!n)return null;const i=n[0],r=n[1],s=n[2],o=n[3],a=[i,r,i,o,s,o,s,r];return Yo(a,0,8,2,t,a),a}isEmpty(){return xl(this.executorsByZIndex_)}execute(t,n,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Gs),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||B0;let c,u,f,h,d,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(d=this.executorsByZIndex_[m],f=0,h=o.length;f<h;++f){const _=o[f];g=d[_],g!==void 0&&g.execute(t,n,i,r,s,a)}}this.maxExtent_&&t.restore()}}const U0={};function R9(e){if(U0[e]!==void 0)return U0[e];const t=e*2+1,n=e*e,i=new Array(n+1);for(let s=0;s<=e;++s)for(let o=0;o<=e;++o){const a=s*s+o*o;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((e+s)*t+(e+o))*4+3),s>0&&l.push(((e-s)*t+(e+o))*4+3),o>0&&(l.push(((e+s)*t+(e-o))*4+3),s>0&&l.push(((e-s)*t+(e-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return U0[e]=r,r}const c2=M9;class I9 extends KM{constructor(t,n,i,r,s,o,a){super(),this.context_=t,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.transformRotation_=r?om(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Si()}drawImages_(t,n,i,r){if(!this.image_)return;const s=Yo(t,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,f=s.length;u<f;u+=2){const h=s[u]-this.imageAnchorX_,d=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=h+this.imageAnchorX_,m=d+this.imageAnchorY_;Ri(a,g,m,1,1,c,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,n,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Yo(t,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=r){const l=s[n]+this.textOffsetX_,c=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(t,n,i,r,s){const o=this.context_,a=Yo(t,n,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(t,n,i,r){for(let s=0,o=i.length;s<o;++s)n=this.moveToLineTo_(t,n,i[s],r,!0);return n}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!hn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=ND(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,n){const i=n.getGeometryFunction()(t);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(t){const n=t.getGeometriesArray();for(let i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!hn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getExtent();if(hn(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=t.getFlatCoordinates();let s=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!hn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!hn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getOrientedFlatCoordinates();let r=0;const s=t.getEndss(),o=t.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(i,r,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(t){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),Zs(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset,n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const n=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:Eu;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,n){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:Zi(i||vn)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=s||Dr;this.strokeState_={lineCap:r!==void 0?r:El,lineDash:this.pixelRatio_===1?u:u.map(f=>f*this.pixelRatio_),lineDashOffset:(o||$r)*this.pixelRatio_,lineJoin:a!==void 0?a:Tl,lineWidth:(l!==void 0?l:Tu)*this.pixelRatio_,miterLimit:c!==void 0?c:bu,strokeStyle:Zi(i||vu)}}}setImageStyle(t){let n;if(!t||!(n=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(t){if(!t)this.text_="";else{const n=t.getFill();if(!n)this.textFillState_=null;else{const d=n.getColor();this.textFillState_={fillStyle:Zi(d||vn)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const d=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),_=i.getLineDashOffset(),p=i.getLineJoin(),y=i.getWidth(),x=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:El,lineDash:m||Dr,lineDashOffset:_||$r,lineJoin:p!==void 0?p:Tl,lineWidth:y!==void 0?y:Tu,miterLimit:x!==void 0?x:bu,strokeStyle:Zi(d||vu)}}const r=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),u=t.getText(),f=t.getTextAlign(),h=t.getTextBaseline();this.textState_={font:r!==void 0?r:_M,textAlign:f!==void 0?f:Eu,textBaseline:h!==void 0?h:_d},this.text_=u!==void 0?Array.isArray(u)?u.reduce((d,g,m)=>d+=m%2?" ":g,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const A9=I9,Vi=.5;function L9(e,t,n,i,r,s,o){const a=e[0]*Vi,l=e[1]*Vi,c=mn(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,f=new A9(c,Vi,r,null,o),h=n.length,d=Math.floor((256*256*256-1)/h),g={};for(let _=1;_<=h;++_){const p=n[_-1],y=p.getStyleFunction()||i;if(!y)continue;let x=y(p,s);if(!x)continue;Array.isArray(x)||(x=[x]);const v=(_*d).toString(16).padStart(7,"#00000");for(let b=0,E=x.length;b<E;++b){const C=x[b],I=C.getGeometryFunction()(p);if(!I||!hn(r,I.getExtent()))continue;const S=C.clone(),R=S.getFill();R&&R.setColor(v);const M=S.getStroke();M&&(M.setColor(v),M.setLineDash(null)),S.setText(void 0);const k=C.getImage();if(k){const N=k.getImageSize();if(!N)continue;const G=mn(N[0],N[1],void 0,{alpha:!1}),j=G.canvas;G.fillStyle=v,G.fillRect(0,0,j.width,j.height),S.setImage(new Sd({img:j,anchor:k.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:k.getOrigin(),opacity:1,size:k.getSize(),scale:k.getScale(),rotation:k.getRotation(),rotateWithView:k.getRotateWithView()}))}const O=S.getZIndex()||0;let A=g[O];A||(A={},g[O]=A,A.Polygon=[],A.Circle=[],A.LineString=[],A.Point=[]);const P=I.getType();if(P==="GeometryCollection"){const N=I.getGeometriesArrayRecursive();for(let G=0,j=N.length;G<j;++G){const U=N[G];A[U.getType().replace("Multi","")].push(U,S)}}else A[P.replace("Multi","")].push(I,S)}}const m=Object.keys(g).map(Number).sort(Gs);for(let _=0,p=m.length;_<p;++_){const y=g[m[_]];for(const x in y){const w=y[x];for(let v=0,b=w.length;v<b;v+=2){f.setStyle(w[v+1]);for(let E=0,C=t.length;E<C;++E)f.setTransform(t[E]),f.drawGeometry(w[v])}}}return c.getImageData(0,0,u.width,u.height)}function O9(e,t,n){const i=[];if(n){const r=Math.floor(Math.round(e[0])*Vi),s=Math.floor(Math.round(e[1])*Vi),o=(Re(r,0,n.width-1)+Re(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),f=Math.floor((256*256*256-1)/t.length);u&&u%f===0&&i.push(t[u/f-1])}return i}const k9=.5,JM={Point:Y9,LineString:z9,Polygon:U9,MultiPoint:B9,MultiLineString:G9,MultiPolygon:W9,GeometryCollection:$9,Circle:N9};function P9(e,t){return parseInt(Vt(e),10)-parseInt(Vt(t),10)}function F9(e,t){const n=ky(e,t);return n*n}function ky(e,t){return k9*e/t}function N9(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=e.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function u2(e,t,n,i,r,s,o){let a=!1;const l=n.getImage();if(l){const c=l.getImageState();c==Rt.LOADED||c==Rt.ERROR?l.unlistenImageChange(r):(c==Rt.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return D9(e,t,n,i,s,o),a}function D9(e,t,n,i,r,s){const o=n.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(i,r);if(n.getRenderer())QM(e,a,n,t);else{const c=JM[a.getType()];c(e,a,n,t,s)}}function QM(e,t,n,i){if(t.getType()=="GeometryCollection"){const s=t.getGeometries();for(let o=0,a=s.length;o<a;++o)QM(e,s[o],n,i);return}e.getBuilder(n.getZIndex(),"Default").drawCustom(t,i,n.getRenderer(),n.getHitDetectionRenderer())}function $9(e,t,n,i,r){const s=t.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=JM[s[o].getType()];l(e,s[o],n,i,r)}}function z9(e,t,n,i,r){const s=n.getStroke();if(s){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(r||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function G9(e,t,n,i,r){const s=n.getStroke();if(s){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(r||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function W9(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function Y9(e,t,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=Rt.LOADED)return;let l=e;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const f=e.getBuilder(n.getZIndex(),"Image");f.setImageStyle(s,a),f.drawPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(t,i)}if(o&&o.getText()){let l=e;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function B9(e,t,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=Rt.LOADED)return;let l=e;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const f=e.getBuilder(n.getZIndex(),"Image");f.setImageStyle(s,a),f.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(t,i)}if(o&&o.getText()){let l=e;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function U9(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}class V9 extends nw{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ai(),this.wrappedRenderedExtent_=ai(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,n,i){const r=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),f=this.getLayer().getSource(),h=n.pixelRatio,d=n.viewHints,g=!(d[Me.ANIMATING]||d[Me.INTERACTING]),m=this.compositionContext_,_=Math.round(n.size[0]*h),p=Math.round(n.size[1]*h),y=f.getWrapX()&&l.canWrapX(),x=y?Qt(u):null,w=y?Math.ceil((r[2]-u[2])/x)+1:1;let v=y?Math.floor((r[0]-u[0])/x):0;do{const b=this.getRenderTransform(o,a,c,h,_,p,v*x);t.execute(m,1,b,c,g,void 0,i)}while(++v<w)}setupCompositionContext_(){if(this.opacity_!==1){const t=mn(this.context.canvas.width,this.context.canvas.height,Zv);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,um(this.compositionContext_),Zv.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,n){const i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];DN(this.pixelTransform,1/i,1/i),nm(this.inversePixelTransform,this.pixelTransform);const s=T1(this.pixelTransform);this.useContainer(n,s,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let u=l&&!l.isEmpty()||c&&!c.isEmpty();if(!u&&!(this.getLayer().hasListener(Ji.PRERENDER)||this.getLayer().hasListener(Ji.POSTRENDER)))return null;const f=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);a.width!=f||a.height!=h?(a.width=f,a.height=h,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,f,h),this.preRender(o,t);const d=t.viewState;d.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let g=!1;if(u&&r.extent&&this.clipping){const m=Ir(r.extent);u=hn(m,t.extent),g=u&&!As(m,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,m)}return u&&this.renderWorlds(l,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(n=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Ee(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],f=i[0]*Vi,h=i[1]*Vi;u.push(this.getRenderTransform(r,s,o,Vi,f,h,0).slice());const d=c.getSource(),g=a.getExtent();if(d.getWrapX()&&a.canWrapX()&&!As(g,l)){let m=l[0];const _=Qt(g);let p=0,y;for(;m<g[0];)--p,y=_*p,u.push(this.getRenderTransform(r,s,o,Vi,f,h,y).slice()),m+=_;for(p=0,m=l[2];m>g[2];)++p,y=_*p,u.push(this.getRenderTransform(r,s,o,Vi,f,h,y).slice()),m-=_}this.hitDetectionImageData_=L9(i,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}n(O9(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,n,i,r,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(d,g,m){const _=Vt(d),p=c[_];if(p){if(p!==!0&&m<p.distanceSq){if(m===0)return c[_]=!0,s.splice(s.lastIndexOf(p),1),r(d,l,g);p.geometry=g,p.distanceSq=m}}else{if(m===0)return c[_]=!0,r(d,l,g);s.push(c[_]={feature:d,layer:l,geometry:g,distanceSq:m,callback:r})}};let f;const h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some(d=>f=d.forEachFeatureAtCoordinate(t,o,a,i,u,d===this.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(g=>g.value):null)),f}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const r=t.viewHints[Me.ANIMATING],s=t.viewHints[Me.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,u=c.projection,f=c.resolution,h=t.pixelRatio,d=n.getRevision(),g=n.getRenderBuffer();let m=n.getRenderOrder();m===void 0&&(m=P9);const _=c.center.slice(),p=C1(l,g*f),y=p.slice(),x=[p.slice()],w=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!As(w,t.extent)){const A=Qt(w),P=Math.max(Qt(p)/2,A);p[0]=w[0]-P,p[2]=w[2]+P,qS(_,u);const N=VS(x[0],u);N[0]<w[0]&&N[2]<w[2]?x.push([N[0]+A,N[1],N[2]+A,N[3]]):N[0]>w[0]&&N[2]>w[2]&&x.push([N[0]-A,N[1],N[2]-A,N[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==d&&this.renderedRenderOrder_==m&&As(this.wrappedRenderedExtent_,p))return Zs(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const v=new o2(ky(f,h),p,f,h);let b;this.getLayer().getDeclutter()&&(b=new o2(ky(f,h),p,f,h));let E;for(let A=0,P=x.length;A<P;++A)i.loadFeatures(x[A],f,u);const C=F9(f,h);let I=!0;const S=A=>{let P;const N=A.getStyleFunction()||n.getStyleFunction();if(N&&(P=N(A,f)),P){const G=this.renderFeature(A,C,P,v,E,b);I=I&&!G}},R=tM(p),M=i.getFeaturesInExtent(R);m&&M.sort(m);for(let A=0,P=M.length;A<P;++A)S(M[A]);this.renderedFeatures_=M,this.ready=I;const k=v.finish(),O=new c2(p,f,h,i.getOverlaps(),k,n.getRenderBuffer());return b&&(this.declutterExecutorGroup=new c2(p,f,h,i.getOverlaps(),b.finish(),n.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=d,this.renderedRenderOrder_=m,this.renderedExtent_=y,this.wrappedRenderedExtent_=p,this.renderedCenter_=_,this.renderedProjection_=u,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,n,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=u2(r,t,i[l],n,this.boundHandleStyleImageChange_,s,o)||a;else a=u2(r,t,i,n,this.boundHandleStyleImageChange_,s,o);return a}}const X9=V9;class H9 extends q${constructor(t,n,i,r,s){const o=s!==void 0?Rt.IDLE:Rt.LOADED;super(t,n,i,o),this.loader_=s!==void 0?s:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=Rt.ERROR):this.state=Rt.LOADED,this.changed()}load(){this.state==Rt.IDLE&&(this.state=Rt.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const j9=H9;function Z9(e){return Array.isArray(e)?Math.min(...e):e}class q9 extends u9{constructor(t){super(t),this.vectorRenderer_=new X9(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=Si(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const n=Ee(this.coordinateToVectorPixelTransform_,Ee(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const n=t.pixelRatio,i=t.viewState,r=i.resolution,s=t.viewHints,o=this.vectorRenderer_;let a=t.extent;this.layerImageRatio_!==1&&(a=a.slice(0),BN(a,this.layerImageRatio_));const l=Qt(a)/r,c=Gn(a)/r;if(!s[Me.ANIMATING]&&!s[Me.INTERACTING]&&!Hl(a)){o.useContainer(null,null);const u=o.context,f=t.layerStatesArray[t.layerIndex],h=Object.assign({},f,{opacity:1}),d=Object.assign({},t,{declutterTree:new iw(9),extent:a,size:[l,c],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[h],layerIndex:0});let g=!0;const m=new j9(a,r,n,u.canvas,function(_){o.prepareFrame(d)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(d,null)&&(o.renderDeclutter(d),g=!1),_())});m.addEventListener(Et.CHANGE,()=>{if(m.getState()!==Rt.LOADED)return;this.image_=g?null:m;const _=m.getPixelRatio(),p=Z9(m.getResolution())*n/_;this.renderedResolution=p,this.coordinateToVectorPixelTransform_=Ri(this.coordinateToVectorPixelTransform_,l/2,c/2,1/p,-1/p,0,-i.center[0],-i.center[1])}),m.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,n,i,r,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,n,i,r,s):super.forEachFeatureAtCoordinate(t,n,i,r,s)}}const K9=q9;class J9 extends l9{constructor(t){t=t||{};const n=Object.assign({},t);delete n.imageRatio,super(n),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new K9(this)}}const Q9=J9;class tz{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let n=this.oldest_;for(;n;)t(n.value_,n.key_,this),n=n.newer}get(t,n){const i=this.entries_[t];return Dt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const n=this.entries_[t];return Dt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.key_;return t}getValues(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,n){this.get(t),this.entries_[t].value_=n}set(t,n){Dt(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const ez=tz;function f2(e,t,n,i){return i!==void 0?(i[0]=e,i[1]=t,i[2]=n,i):[e,t,n]}function gm(e,t,n){return e+"/"+t+"/"+n}function tR(e){return gm(e[0],e[1],e[2])}function nz(e){return e.split("/").map(Number)}function iz(e){return(e[1]<<e[0])+e[2]}function rz(e,t){const n=e[0],i=e[1],r=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;const s=t.getFullTileRange(n);return s?s.containsXY(i,r):!0}class sz extends ez{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),i=nz(t)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(tR(r.tileCoord)),r.release())})}}const eR=sz,V0={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class oz extends Fi{constructor(t){super(),this.projection=Oe(t.projection),this.attributions_=h2(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,r){n.viewResolver=i,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=h2(t),this.changed()}setState(t){this.state_=t,this.changed()}}function h2(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}const nR=oz,Ma=[0,0,0],hs=5;class az{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Dt(TN(this.resolutions_,function(r,s){return s-r},!0),"`resolutions` must be sorted in descending order");let n;if(!t.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!n)n=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Dt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ha(i)),Dt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Dt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:M1,Dt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(r,s){const o=new GM(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,n,i){const r=this.getTileRangeForExtentAndZ(t,n);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([n,s,a])}forEachTileCoordParentTileRange(t,n,i,r){let s,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=Ta(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),n(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,n,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,o=t[2]*2;return Ta(s,s+1,o,o+1,n)}const r=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,n)}return null}getTileRangeForTileCoordAndZ(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const r=t[0],s=t[1],o=t[2];if(n===r)return Ta(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-r),c=Math.floor(s*l),u=Math.floor(o*l);if(n<r)return Ta(c,c,u,u,i);const f=Math.floor(l*(s+1))-1,h=Math.floor(l*(o+1))-1;return Ta(c,f,u,h,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(t,n,i){this.getTileCoordForXYAndZ_(t[0],t[3],n,!1,Ma);const r=Ma[1],s=Ma[2];this.getTileCoordForXYAndZ_(t[2],t[1],n,!0,Ma);const o=Ma[1],a=Ma[2];return Ta(r,o,s,a,i)}getTileCoordCenter(t){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Nn(this.getTileSize(t[0]),this.tmpSize_);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,n){const i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Nn(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*r,a=i[1]-(t[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return Ys(o,a,l,c,n)}getTileCoordForCoordAndResolution(t,n,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],n,!1,i)}getTileCoordForXYAndResolution_(t,n,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=Nn(this.getTileSize(o),this.tmpSize_);let u=a*(t-l[0])/i/c[0],f=a*(l[1]-n)/i/c[1];return r?(u=Qf(u,hs)-1,f=Qf(f,hs)-1):(u=Jf(u,hs),f=Jf(f,hs)),f2(o,u,f,s)}getTileCoordForXYAndZ_(t,n,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=Nn(this.getTileSize(i),this.tmpSize_);let c=(t-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return r?(c=Qf(c,hs)-1,u=Qf(u,hs)-1):(c=Jf(c,hs),u=Jf(u,hs)),f2(i,c,u,s)}getTileCoordForCoordAndZ(t,n,i){return this.getTileCoordForXYAndZ_(t[0],t[1],n,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,n){const i=v1(this.resolutions_,t,n||0);return Re(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,n){return uM(n,0,n.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const n=this.resolutions_.length,i=new Array(n);for(let r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}}const iR=az;function rR(e){let t=e.getDefaultTileGrid();return t||(t=fz(e),e.setDefaultTileGrid(t)),t}function lz(e,t,n){const i=t[0],r=e.getTileCoordCenter(t),s=ow(n);if(!Ku(s,r)){const o=Qt(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,e.getTileCoordForCoordAndZ(r,i)}return t}function cz(e,t,n,i){i=i!==void 0?i:"top-left";const r=sR(e,t,n);return new iR({extent:e,origin:WN(e,i),resolutions:r,tileSize:n})}function uz(e){const t=e||{},n=t.extent||Oe("EPSG:3857").getExtent(),i={extent:n,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:sR(n,t.maxZoom,t.tileSize,t.maxResolution)};return new iR(i)}function sR(e,t,n,i){t=t!==void 0?t:eD,n=Nn(n!==void 0?n:M1);const r=Gn(e),s=Qt(e);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function fz(e,t,n,i){const r=ow(e);return cz(r,t,n,i)}function ow(e){e=Oe(e);let t=e.getExtent();if(!t){const n=180*bl.degrees/e.getMetersPerUnit();t=Ys(-n,-n,n,n)}return t}class hz extends nR{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const n=[256,256];this.tileGrid&&Nn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new eR(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,n){const i=this.getTileCacheForProjection(t);i&&i.expireCache(n)}forEachLoadedTile(t,n,i,r){const s=this.getTileCacheForProjection(t);if(!s)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let f=i.minY;f<=i.maxY;++f)l=gm(n,u,f),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===ht.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const n=t?this.getTileGridForProjection(t):this.tileGrid;return n?n.getResolutions():null}getTile(t,n,i,r,s){return xt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:rR(t)}getTileCacheForProjection(t){const n=this.getProjection();return Dt(n===null||vo(n,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,n,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=Nn(r.getTileSize(t),this.tmpSize);return s==1?o:y$(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=lz(i,t,n)),rz(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,n){const i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,n,i,r){}}class dz extends Jr{constructor(t,n){super(t),this.tile=n}}const gz=hz;function mz(e,t){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return e.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],u=t.getFullTileRange(c);return Dt(u,"The {-y} placeholder requires a tile grid with extent"),(u.getHeight()-o[2]-1).toString()})}}function pz(e,t){const n=e.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=mz(e[r],t);return yz(i)}function yz(e){return e.length===1?e[0]:function(t,n,i){if(!t)return;const r=iz(t),s=Wo(r,e.length);return e[s](t,n,i)}}function _z(e){const t=[];let n=/\{([a-z])-([a-z])\}/.exec(e);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)t.push(e.replace(n[0],String.fromCharCode(s)));return t}if(n=/\{(\d+)-(\d+)\}/.exec(e),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)t.push(e.replace(n[0],r.toString()));return t}return t.push(e),t}class aw extends gz{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===aw.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const n=t.target,i=Vt(n),r=n.getState();let s;r==ht.LOADING?(this.tileLoadingKeys_[i]=!0,s=V0.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==ht.ERROR?V0.TILELOADERROR:r==ht.LOADED?V0.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new dz(s,n))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(t){const n=_z(t);this.urls=n,this.setUrls(n)}setUrls(t){this.urls=t;const n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(pz(t,this.tileGrid),n):this.setKey(n)}tileUrlFunction(t,n,i){}useTile(t,n,i){const r=gm(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const wz=aw;class xz extends wz{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:bz,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:$M,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,n){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?n:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!vo(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!vo(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||vo(n,t)))return this.tileGrid;const i=Vt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=rR(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const n=this.getProjection();if(!n||vo(n,t))return this.tileCache;const i=Vt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new eR(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,n,i,r,s,o){const a=[t,n,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?ht.IDLE:ht.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(Et.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,n,i,r,s){const o=this.getProjection();if(!o||!s||vo(o,s))return this.getTileInternal(t,n,i,r,o||s);const a=this.getTileCacheForProjection(s),l=[t,n,i];let c;const u=tR(l);a.containsKey(u)&&(c=a.get(u));const f=this.getKey();if(c&&c.key==f)return c;const h=this.getTileGridForProjection(o),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),m=new Ly(o,h,s,d,l,g,this.getTilePixelRatio(r),this.getGutter(),(_,p,y,x)=>this.getTileInternal(_,p,y,x,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=f,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(t,n,i,r,s){let o=null;const a=gm(t,n,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,n,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(t,n,i,r,s,l),c.getState()==ht.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(t,n){const i=Oe(t);if(i){const r=Vt(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function bz(e,t){e.getImage().src=t}const vz=xz;class Ez extends vz{constructor(t){t=t||{};const n=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:uz({extent:ow(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Tz=Ez,Cz='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Sz extends Tz{constructor(t){t=t||{};let n;t.attributions!==void 0?n=t.attributions:n=[Cz];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",r=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}}const Mz=Sz;class Rz{constructor(t){this.rbush_=new iw(t),this.items_={}}insert(t,n){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.rbush_.insert(i),this.items_[Vt(n)]=i}load(t,n){const i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const o=t[r],a=n[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[Vt(a)]=l}this.rbush_.load(i)}remove(t){const n=Vt(t),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(t,n){const i=this.items_[Vt(n)],r=[i.minX,i.minY,i.maxX,i.maxY];wu(r,t)||(this.remove(n),this.insert(t,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(t){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(n).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,n){return this.forEach_(this.getInExtent(t),n)}forEach_(t,n){let i;for(let r=0,s=t.length;r<s;r++)if(i=n(t[r]),i)return i;return i}isEmpty(){return xl(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const n=this.rbush_.toJSON();return Ys(n.minX,n.minY,n.maxX,n.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const n in t.items_)this.items_[n]=t.items_[n]}}const d2=Rz,hi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Iz(e,t){return[[-1/0,-1/0,1/0,1/0]]}let Az=!1;function Lz(e,t,n,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof e=="function"?e(n,i,r):e,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Az,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?s(t.readFeatures(u,{extent:n,featureProjection:r}),t.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function g2(e,t){return function(n,i,r,s,o){const a=this;Lz(e,t,n,i,r,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||wl)}}class ds extends Jr{constructor(t,n,i){super(t),this.feature=n,this.features=i}}class Oz extends nR{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=wl,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Dt(this.format_,"`format` must be set when `url` is set"),this.loader_=g2(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Iz;const n=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=n?new d2:null,this.loadedExtentsRtree_=new d2,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),!n&&i===void 0&&(i=new ji(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const n=Vt(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);const i=t.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new ds(hi.ADDFEATURE,t))}setupChangeEvents_(t,n){this.featureChangeKeys_[t]=[Pt(n,Et.CHANGE,this.handleFeatureChange_,this),Pt(n,_l.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,n){let i=!0;const r=n.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=n),i&&(Dt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=n),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const n=[],i=[],r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=Vt(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=Vt(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,r),this.hasListener(hi.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new ds(hi.ADDFEATURE,i[s]))}bindFeaturesCollection_(t){let n=!1;this.addEventListener(hi.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(hi.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(bn.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),t.addEventListener(bn.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(ee);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new ds(hi.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,n){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(t))return n(r)})}forEachFeatureInExtent(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(t,n){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const s=n(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),xl(this.nullGeometryFeatures_)||Nr(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n}getFeaturesInExtent(t,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=VN(t,n);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,n){const i=t[0],r=t[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||_u,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),f=a;if(a=u.closestPointXY(i,r,o,a),a<f){s=c;const h=Math.sqrt(a);l[0]=i-h,l[1]=r-h,l[2]=i+h,l[3]=r+h}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const n=this.idIndex_[t.toString()];return n!==void 0?n:null}getFeatureByUid(t){const n=this.uidIndex_[t];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const n=t.target,i=Vt(n),r=n.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new ds(hi.CHANGEFEATURE,n))}hasFeature(t){const n=t.getId();return n!==void 0?n in this.idIndex_:Vt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&xl(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,n,i){const r=this.loadedExtentsRtree_,s=this.strategy_(t,n,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return As(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ds(hi.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new ds(hi.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ds(hi.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const n=this.loadedExtentsRtree_;let i;n.forEachInExtent(t,function(r){if(wu(r.extent,t))return i=r,!0}),i&&n.remove(i)}removeFeature(t){if(!t)return;const n=Vt(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const n=Vt(t),i=this.featureChangeKeys_[n];if(!i)return;i.forEach(ee),delete this.featureChangeKeys_[n];const r=t.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[n],this.dispatchEvent(new ds(hi.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let n=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],n=!0;break}return n}setLoader(t){this.loader_=t}setUrl(t){Dt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(g2(t,this.format_))}}const kz=Oz,m2=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],p2={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class Pz extends Zl{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=t.keys!==void 0?t.keys:!1,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=t.className!==void 0?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=t.activeClassName!==void 0?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=t.inactiveClassName!==void 0?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const n=t.label!==void 0?t.label:"⤢";this.labelNode_=typeof n=="string"?document.createTextNode(n):n;const i=t.labelActive!==void 0?t.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const r=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(Et.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${ga} ${tf}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const n=t.getOwnerDocument();if(y2(n))if(_2(n))Nz(n);else{let i;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?Fz(i):oR(i)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const n=this.isInFullscreen_;this.isInFullscreen_=_2(t.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(pd(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(p2.ENTERFULLSCREEN)):(pd(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(p2.LEAVEFULLSCREEN)),t.updateSize())}setClassName_(t,n){n?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const n=this.getMap();n&&n.removeChangeListener($e.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener($e.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let i=0,r=t.length;i<r;++i)ee(t[i]);t.length=0;const n=this.getMap();if(n){const i=n.getOwnerDocument();y2(i)?this.element.classList.remove(Gv):this.element.classList.add(Gv);for(let r=0,s=m2.length;r<s;++r)t.push(Pt(i,m2[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function y2(e){const t=e.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&e.fullscreenEnabled)}function _2(e){return!!(e.webkitIsFullScreen||e.fullscreenElement)}function oR(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function Fz(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():oR(e)}function Nz(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}const Dz=Pz,je={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class $z extends Fi{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+c8,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(je.ELEMENT,this.handleElementChanged),this.addChangeListener(je.MAP,this.handleMapChanged),this.addChangeListener(je.OFFSET,this.handleOffsetChanged),this.addChangeListener(je.POSITION,this.handlePositionChanged),this.addChangeListener(je.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(je.ELEMENT)}getId(){return this.id}getMap(){return this.get(je.MAP)||null}getOffset(){return this.get(je.OFFSET)}getPosition(){return this.get(je.POSITION)}getPositioning(){return this.get(je.POSITIONING)}handleElementChanged(){yM(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(yd(this.element),ee(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Pt(t,Cr.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(je.ELEMENT,t)}setMap(t){this.set(je.MAP,t)}setOffset(t){this.set(je.OFFSET,t)}setPosition(t){this.set(je.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(je.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),s=this.getRect(r,[f8(r),h8(r)]);t=t||{};const o=t.margin===void 0?20:t.margin;if(!As(i,s)){const a=s[0]-i[0],l=i[2]-s[2],c=s[1]-i[1],u=i[3]-s[3],f=[0,0];if(a<0?f[0]=a-o:l<0&&(f[0]=Math.abs(l)+o),c<0?f[1]=c-o:u<0&&(f[1]=Math.abs(u)+o),f[0]!==0||f[1]!==0){const h=n.getView().getCenterInternal(),d=n.getPixelFromCoordinateInternal(h);if(!d)return;const g=[d[0]+f[0],d[1]+f[1]],m=t.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(g),duration:m.duration,easing:m.easing})}}}getRect(t,n){const i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+n[0],s+n[1]]}setPositioning(t){this.set(je.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),n=this.getPosition();if(!t||!t.isRendered()||!n){this.setVisible(!1);return}const i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(t,n){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(t[0]+r[0])+"px",a=Math.round(t[1]+r[1])+"px";let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}}const w2=$z,X0="units",zz=[1,2,5],bc=25.4/.28;class Gz extends Zl{constructor(t){t=t||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:t.render,target:t.target}),this.on,this.once,this.un;const i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+ga,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(X0,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(X0)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(X0,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=t.center,i=t.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=hd(i,t.resolution,n,s);const a=this.minWidth_*(this.dpi_||bc)/bc,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||bc)/bc:void 0;let c=a*o,u="";if(r=="degrees"){const x=bl.degrees;c*=x,c<x/60?(u="″",o*=3600):c<x?(u="′",o*=60):u="°"}else if(r=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(r=="nautical")o/=1852,u="NM";else if(r=="metric")c<.001?(u="μm",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(r=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let f=3*Math.floor(Math.log(a*o)/Math.log(10)),h,d,g,m,_,p;for(;;){g=Math.floor(f/3);const x=Math.pow(10,g);if(h=zz[(f%3+3)%3]*x,d=Math.round(h/o),isNaN(d)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&d>=l){h=m,d=_,g=p;break}else if(d>=a)break;m=h,_=d,p=g,++f}const y=this.scaleBar_?this.createScaleBar(d,h,u):h.toFixed(g<0?-g:0)+" "+u;this.renderedHTML_!=y&&(this.innerElement_.innerHTML=y,this.renderedHTML_=y),this.renderedWidth_!=d&&(this.innerElement_.style.width=d+"px",this.renderedWidth_=d),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,n,i){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=t/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const f=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${f}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,t,!1,n,i):"")+"</div>")}return l.push(this.createStepText(o,t,!0,n,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+s+"</div>":"")+l.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,n,i,r,s){const a=(t===0?0:Math.round(r/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+s),l=t===0?-3:n/this.scaleBarSteps_*-1,c=t===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${t===0?"left":"center"};min-width: ${c}px;left: ${i?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const t=hd(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||bc,i=1e3/25.4;return t*i*n}render(t){const n=t.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const Wz=Gz;class Yz extends Zl{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const n=t.className!==void 0?t.className:"ol-zoom-extent",i=t.label!==void 0?t.label:"E",r=t.tipLabel!==void 0?t.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=r,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener(Et.CLICK,this.handleClick_.bind(this),!1);const o=n+" "+ga+" "+tf,a=this.element;a.className=o,a.appendChild(s)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const n=this.getMap().getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(vy(i))}}const H0=Yz;class Bz{constructor(t){gt(this,"fileId",new Uz);gt(this,"activity",new Vz);gt(this,"sessions",new Array);gt(this,"records",new Array);const n=t;this.fileId=n==null?void 0:n.fileId,this.activity=n==null?void 0:n.activity,this.sessions=n==null?void 0:n.sessions,this.records=n==null?void 0:n.records}}class Uz{constructor(){gt(this,"manufacturer",null);gt(this,"product",null);gt(this,"timeCreated",null)}}class Vz{constructor(){gt(this,"timestamp",null);gt(this,"localDateTime",null)}}class Py{constructor(t){gt(this,"timestamp",null);gt(this,"positionLat",null);gt(this,"positionLong",null);gt(this,"distance",null);gt(this,"speed",null);gt(this,"altitude",null);gt(this,"cadence",null);gt(this,"heartRate",null);gt(this,"power",null);gt(this,"temperature",null);gt(this,"grade",0);const n=t;this.positionLat=n==null?void 0:n.positionLat,this.positionLong=n==null?void 0:n.positionLong,this.altitude=n==null?void 0:n.altitude,this.cadence=n==null?void 0:n.cadence,this.distance=n==null?void 0:n.distance,this.heartRate=n==null?void 0:n.heartRate,this.speed=n==null?void 0:n.speed,this.timestamp=n==null?void 0:n.timestamp,this.power=n==null?void 0:n.power,this.temperature=n==null?void 0:n.temperature,this.grade=n==null?void 0:n.grade}}class ma extends Error{}class Xz extends ma{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Hz extends ma{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class jz extends ma{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class zc extends ma{}class aR extends ma{constructor(t){super(`Invalid unit ${t}`)}}class Qn extends ma{}class gs extends ma{constructor(){super("Zone is an abstract class")}}const lt="numeric",Ii="short",zn="long",Ad={year:lt,month:lt,day:lt},lR={year:lt,month:Ii,day:lt},Zz={year:lt,month:Ii,day:lt,weekday:Ii},cR={year:lt,month:zn,day:lt},uR={year:lt,month:zn,day:lt,weekday:zn},fR={hour:lt,minute:lt},hR={hour:lt,minute:lt,second:lt},dR={hour:lt,minute:lt,second:lt,timeZoneName:Ii},gR={hour:lt,minute:lt,second:lt,timeZoneName:zn},mR={hour:lt,minute:lt,hourCycle:"h23"},pR={hour:lt,minute:lt,second:lt,hourCycle:"h23"},yR={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:Ii},_R={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:zn},wR={year:lt,month:lt,day:lt,hour:lt,minute:lt},xR={year:lt,month:lt,day:lt,hour:lt,minute:lt,second:lt},bR={year:lt,month:Ii,day:lt,hour:lt,minute:lt},vR={year:lt,month:Ii,day:lt,hour:lt,minute:lt,second:lt},qz={year:lt,month:Ii,day:lt,weekday:Ii,hour:lt,minute:lt},ER={year:lt,month:zn,day:lt,hour:lt,minute:lt,timeZoneName:Ii},TR={year:lt,month:zn,day:lt,hour:lt,minute:lt,second:lt,timeZoneName:Ii},CR={year:lt,month:zn,day:lt,weekday:zn,hour:lt,minute:lt,timeZoneName:zn},SR={year:lt,month:zn,day:lt,weekday:zn,hour:lt,minute:lt,second:lt,timeZoneName:zn};class lf{get type(){throw new gs}get name(){throw new gs}get ianaName(){return this.name}get isUniversal(){throw new gs}offsetName(t,n){throw new gs}formatOffset(t,n){throw new gs}offset(t){throw new gs}equals(t){throw new gs}get isValid(){throw new gs}}let j0=null;class mm extends lf{static get instance(){return j0===null&&(j0=new mm),j0}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return RR(t,n,i)}formatOffset(t,n){return iu(this.offset(t),n)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Hh={};function Kz(e){return Hh[e]||(Hh[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Hh[e]}const Jz={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Qz(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,r,s,o,a,l,c,u]=i;return[o,r,s,a,l,c,u]}function tG(e,t){const n=e.formatToParts(t),i=[];for(let r=0;r<n.length;r++){const{type:s,value:o}=n[r],a=Jz[s];s==="era"?i[a]=o:kt(a)||(i[a]=parseInt(o,10))}return i}let ch={};class Ur extends lf{static create(t){return ch[t]||(ch[t]=new Ur(t)),ch[t]}static resetCache(){ch={},Hh={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Ur.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return RR(t,n,i,this.name)}formatOffset(t,n){return iu(this.offset(t),n)}offset(t){const n=new Date(t);if(isNaN(n))return NaN;const i=Kz(this.name);let[r,s,o,a,l,c,u]=i.formatToParts?tG(i,n):Qz(i,n);a==="BC"&&(r=-Math.abs(r)+1);const h=ym({year:r,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let d=+n;const g=d%1e3;return d-=g>=0?g:1e3+g,(h-d)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let x2={};function eG(e,t={}){const n=JSON.stringify([e,t]);let i=x2[n];return i||(i=new Intl.ListFormat(e,t),x2[n]=i),i}let Fy={};function Ny(e,t={}){const n=JSON.stringify([e,t]);let i=Fy[n];return i||(i=new Intl.DateTimeFormat(e,t),Fy[n]=i),i}let Dy={};function nG(e,t={}){const n=JSON.stringify([e,t]);let i=Dy[n];return i||(i=new Intl.NumberFormat(e,t),Dy[n]=i),i}let $y={};function iG(e,t={}){const{base:n,...i}=t,r=JSON.stringify([e,i]);let s=$y[r];return s||(s=new Intl.RelativeTimeFormat(e,t),$y[r]=s),s}let Gc=null;function rG(){return Gc||(Gc=new Intl.DateTimeFormat().resolvedOptions().locale,Gc)}function sG(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(n===-1)return[e];{let i,r;try{i=Ny(e).resolvedOptions(),r=e}catch{const l=e.substring(0,n);i=Ny(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:o}=i;return[r,s,o]}}function oG(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}function aG(e){const t=[];for(let n=1;n<=12;n++){const i=Ct.utc(2009,n,1);t.push(e(i))}return t}function lG(e){const t=[];for(let n=1;n<=7;n++){const i=Ct.utc(2016,11,13+n);t.push(e(i))}return t}function uh(e,t,n,i){const r=e.listingMode();return r==="error"?null:r==="en"?n(t):i(t)}function cG(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class uG{constructor(t,n,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:r,floor:s,...o}=i;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=nG(t,a)}}format(t){if(this.inf){const n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{const n=this.floor?Math.floor(t):cw(t,3);return Se(n,this.padTo)}}}class fG{constructor(t,n,i){this.opts=i,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Ur.create(a).valid?(r=a,this.dt=t):(r="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,r=t.zone.name):(r="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=Ny(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(n=>{if(n.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:i}}else return n}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class hG{constructor(t,n,i){this.opts={style:"long",...i},!n&&MR()&&(this.rtf=iG(t,i))}format(t,n){return this.rtf?this.rtf.format(t,n):IG(n,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,n){return this.rtf?this.rtf.formatToParts(t,n):[]}}class oe{static fromOpts(t){return oe.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,n,i,r=!1){const s=t||Ce.defaultLocale,o=s||(r?"en-US":rG()),a=n||Ce.defaultNumberingSystem,l=i||Ce.defaultOutputCalendar;return new oe(o,a,l,s)}static resetCache(){Gc=null,Fy={},Dy={},$y={}}static fromObject({locale:t,numberingSystem:n,outputCalendar:i}={}){return oe.create(t,n,i)}constructor(t,n,i,r){const[s,o,a]=sG(t);this.locale=s,this.numberingSystem=n||o||null,this.outputCalendar=i||a||null,this.intl=oG(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=cG(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:oe.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,n=!1){return uh(this,t,LR,()=>{const i=n?{month:t,day:"numeric"}:{month:t},r=n?"format":"standalone";return this.monthsCache[r][t]||(this.monthsCache[r][t]=aG(s=>this.extract(s,i,"month"))),this.monthsCache[r][t]})}weekdays(t,n=!1){return uh(this,t,PR,()=>{const i=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},r=n?"format":"standalone";return this.weekdaysCache[r][t]||(this.weekdaysCache[r][t]=lG(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[r][t]})}meridiems(){return uh(this,void 0,()=>FR,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ct.utc(2016,11,13,9),Ct.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(t){return uh(this,t,NR,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ct.utc(-40,1,1),Ct.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[t]})}extract(t,n,i){const r=this.dtFormatter(t,n),s=r.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new uG(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,n={}){return new fG(t,this.intl,n)}relFormatter(t={}){return new hG(this.intl,this.isEnglish(),t)}listFormatter(t={}){return eG(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Z0=null;class dn extends lf{static get utcInstance(){return Z0===null&&(Z0=new dn(0)),Z0}static instance(t){return t===0?dn.utcInstance:new dn(t)}static parseSpecifier(t){if(t){const n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new dn(_m(n[1],n[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${iu(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${iu(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,n){return iu(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class dG extends lf{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Cs(e,t){if(kt(e)||e===null)return t;if(e instanceof lf)return e;if(gG(e)){const n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?mm.instance:n==="utc"||n==="gmt"?dn.utcInstance:dn.parseSpecifier(n)||Ur.create(e)}else return Uo(e)?dn.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new dG(e)}let b2=()=>Date.now(),v2="system",E2=null,T2=null,C2=null,S2=60,M2;class Ce{static get now(){return b2}static set now(t){b2=t}static set defaultZone(t){v2=t}static get defaultZone(){return Cs(v2,mm.instance)}static get defaultLocale(){return E2}static set defaultLocale(t){E2=t}static get defaultNumberingSystem(){return T2}static set defaultNumberingSystem(t){T2=t}static get defaultOutputCalendar(){return C2}static set defaultOutputCalendar(t){C2=t}static get twoDigitCutoffYear(){return S2}static set twoDigitCutoffYear(t){S2=t%100}static get throwOnInvalid(){return M2}static set throwOnInvalid(t){M2=t}static resetCaches(){oe.resetCache(),Ur.resetCache()}}function kt(e){return typeof e>"u"}function Uo(e){return typeof e=="number"}function pm(e){return typeof e=="number"&&e%1===0}function gG(e){return typeof e=="string"}function mG(e){return Object.prototype.toString.call(e)==="[object Date]"}function MR(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function pG(e){return Array.isArray(e)?e:[e]}function R2(e,t,n){if(e.length!==0)return e.reduce((i,r)=>{const s=[t(r),r];return i&&n(i[0],s[0])===i[0]?i:s},null)[1]}function yG(e,t){return t.reduce((n,i)=>(n[i]=e[i],n),{})}function Sl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ar(e,t,n){return pm(e)&&e>=t&&e<=n}function _G(e,t){return e-t*Math.floor(e/t)}function Se(e,t=2){const n=e<0;let i;return n?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function Es(e){if(!(kt(e)||e===null||e===""))return parseInt(e,10)}function uo(e){if(!(kt(e)||e===null||e===""))return parseFloat(e)}function lw(e){if(!(kt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function cw(e,t,n=!1){const i=10**t;return(n?Math.trunc:Math.round)(e*i)/i}function cf(e){return e%4===0&&(e%100!==0||e%400===0)}function nu(e){return cf(e)?366:365}function Ld(e,t){const n=_G(t-1,12)+1,i=e+(t-n)/12;return n===2?cf(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function ym(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Od(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,n=e-1,i=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return t===4||i===3?53:52}function zy(e){return e>99?e:e>Ce.twoDigitCutoffYear?1900+e:2e3+e}function RR(e,t,n,i=null){const r=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function _m(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0,r=n<0||Object.is(n,-0)?-i:i;return n*60+r}function IR(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Qn(`Invalid unit value ${e}`);return t}function kd(e,t){const n={};for(const i in e)if(Sl(e,i)){const r=e[i];if(r==null)continue;n[t(i)]=IR(r)}return n}function iu(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),r=e>=0?"+":"-";switch(t){case"short":return`${r}${Se(n,2)}:${Se(i,2)}`;case"narrow":return`${r}${n}${i>0?`:${i}`:""}`;case"techie":return`${r}${Se(n,2)}${Se(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function wm(e){return yG(e,["hour","minute","second","millisecond"])}const wG=["January","February","March","April","May","June","July","August","September","October","November","December"],AR=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],xG=["J","F","M","A","M","J","J","A","S","O","N","D"];function LR(e){switch(e){case"narrow":return[...xG];case"short":return[...AR];case"long":return[...wG];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const OR=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],kR=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],bG=["M","T","W","T","F","S","S"];function PR(e){switch(e){case"narrow":return[...bG];case"short":return[...kR];case"long":return[...OR];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const FR=["AM","PM"],vG=["Before Christ","Anno Domini"],EG=["BC","AD"],TG=["B","A"];function NR(e){switch(e){case"narrow":return[...TG];case"short":return[...EG];case"long":return[...vG];default:return null}}function CG(e){return FR[e.hour<12?0:1]}function SG(e,t){return PR(t)[e.weekday-1]}function MG(e,t){return LR(t)[e.month-1]}function RG(e,t){return NR(t)[e.year<0?0:1]}function IG(e,t,n="always",i=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&s){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${r[e][0]}`;case-1:return f?"yesterday":`last ${r[e][0]}`;case 0:return f?"today":`this ${r[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=r[e],u=i?l?c[1]:c[2]||c[1]:l?r[e][0]:e;return o?`${a} ${u} ago`:`in ${a} ${u}`}function I2(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const AG={D:Ad,DD:lR,DDD:cR,DDDD:uR,t:fR,tt:hR,ttt:dR,tttt:gR,T:mR,TT:pR,TTT:yR,TTTT:_R,f:wR,ff:bR,fff:ER,ffff:CR,F:xR,FF:vR,FFF:TR,FFFF:SR};class tn{static create(t,n={}){return new tn(t,n)}static parseFormat(t){let n=null,i="",r=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),n=null,i="",r=!r):r||a===n?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,n=a)}return i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return AG[t]}constructor(t,n){this.opts=n,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...n}).format()}dtFormatter(t,n={}){return this.loc.dtFormatter(t,{...this.opts,...n})}formatDateTime(t,n){return this.dtFormatter(t,n).format()}formatDateTimeParts(t,n){return this.dtFormatter(t,n).formatToParts()}formatInterval(t,n){return this.dtFormatter(t.start,n).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,n){return this.dtFormatter(t,n).resolvedOptions()}num(t,n=0){if(this.opts.forceSimple)return Se(t,n);const i={...this.opts};return n>0&&(i.padTo=n),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,n){const i=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(d,g)=>this.loc.extract(t,d,g),o=d=>t.isOffsetFixed&&t.offset===0&&d.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,d.format):"",a=()=>i?CG(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(d,g)=>i?MG(t,d):s(g?{month:d}:{month:d,day:"numeric"},"month"),c=(d,g)=>i?SG(t,d):s(g?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),u=d=>{const g=tn.macroTokenToFormatOpts(d);return g?this.formatWithSystemDefault(t,g):d},f=d=>i?RG(t,d):s({era:d},"era"),h=d=>{switch(d){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(t.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(t.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(t.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(d)}};return I2(tn.parseFormat(n),h)}formatDurationFromString(t,n){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>c=>{const u=i(c);return u?this.num(l.get(u),c.length):c},s=tn.parseFormat(n),o=s.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return I2(s,r(a))}}class vi{constructor(t,n){this.reason=t,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const DR=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Kl(...e){const t=e.reduce((n,i)=>n+i.source,"");return RegExp(`^${t}$`)}function Jl(...e){return t=>e.reduce(([n,i,r],s)=>{const[o,a,l]=s(t,r);return[{...n,...o},a||i,l]},[{},null,1]).slice(0,2)}function Ql(e,...t){if(e==null)return[null,null];for(const[n,i]of t){const r=n.exec(e);if(r)return i(r)}return[null,null]}function $R(...e){return(t,n)=>{const i={};let r;for(r=0;r<e.length;r++)i[e[r]]=Es(t[n+r]);return[i,null,n+r]}}const zR=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,LG=`(?:${zR.source}?(?:\\[(${DR.source})\\])?)?`,uw=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,GR=RegExp(`${uw.source}${LG}`),fw=RegExp(`(?:T${GR.source})?`),OG=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,kG=/(\d{4})-?W(\d\d)(?:-?(\d))?/,PG=/(\d{4})-?(\d{3})/,FG=$R("weekYear","weekNumber","weekDay"),NG=$R("year","ordinal"),DG=/(\d{4})-(\d\d)-(\d\d)/,WR=RegExp(`${uw.source} ?(?:${zR.source}|(${DR.source}))?`),$G=RegExp(`(?: ${WR.source})?`);function ol(e,t,n){const i=e[t];return kt(i)?n:Es(i)}function zG(e,t){return[{year:ol(e,t),month:ol(e,t+1,1),day:ol(e,t+2,1)},null,t+3]}function tc(e,t){return[{hours:ol(e,t,0),minutes:ol(e,t+1,0),seconds:ol(e,t+2,0),milliseconds:lw(e[t+3])},null,t+4]}function uf(e,t){const n=!e[t]&&!e[t+1],i=_m(e[t+1],e[t+2]),r=n?null:dn.instance(i);return[{},r,t+3]}function ff(e,t){const n=e[t]?Ur.create(e[t]):null;return[{},n,t+1]}const GG=RegExp(`^T?${uw.source}$`),WG=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function YG(e){const[t,n,i,r,s,o,a,l,c]=e,u=t[0]==="-",f=l&&l[0]==="-",h=(d,g=!1)=>d!==void 0&&(g||d&&u)?-d:d;return[{years:h(uo(n)),months:h(uo(i)),weeks:h(uo(r)),days:h(uo(s)),hours:h(uo(o)),minutes:h(uo(a)),seconds:h(uo(l),l==="-0"),milliseconds:h(lw(c),f)}]}const BG={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function hw(e,t,n,i,r,s,o){const a={year:t.length===2?zy(Es(t)):Es(t),month:AR.indexOf(n)+1,day:Es(i),hour:Es(r),minute:Es(s)};return o&&(a.second=Es(o)),e&&(a.weekday=e.length>3?OR.indexOf(e)+1:kR.indexOf(e)+1),a}const UG=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function VG(e){const[,t,n,i,r,s,o,a,l,c,u,f]=e,h=hw(t,r,i,n,s,o,a);let d;return l?d=BG[l]:c?d=0:d=_m(u,f),[h,new dn(d)]}function XG(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const HG=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,jG=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ZG=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function A2(e){const[,t,n,i,r,s,o,a]=e;return[hw(t,r,i,n,s,o,a),dn.utcInstance]}function qG(e){const[,t,n,i,r,s,o,a]=e;return[hw(t,a,n,i,r,s,o),dn.utcInstance]}const KG=Kl(OG,fw),JG=Kl(kG,fw),QG=Kl(PG,fw),tW=Kl(GR),YR=Jl(zG,tc,uf,ff),eW=Jl(FG,tc,uf,ff),nW=Jl(NG,tc,uf,ff),iW=Jl(tc,uf,ff);function rW(e){return Ql(e,[KG,YR],[JG,eW],[QG,nW],[tW,iW])}function sW(e){return Ql(XG(e),[UG,VG])}function oW(e){return Ql(e,[HG,A2],[jG,A2],[ZG,qG])}function aW(e){return Ql(e,[WG,YG])}const lW=Jl(tc);function cW(e){return Ql(e,[GG,lW])}const uW=Kl(DG,$G),fW=Kl(WR),hW=Jl(tc,uf,ff);function dW(e){return Ql(e,[uW,YR],[fW,hW])}const L2="Invalid Duration",BR={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},gW={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...BR},Zn=146097/400,Ra=146097/4800,mW={years:{quarters:4,months:12,weeks:Zn/7,days:Zn,hours:Zn*24,minutes:Zn*24*60,seconds:Zn*24*60*60,milliseconds:Zn*24*60*60*1e3},quarters:{months:3,weeks:Zn/28,days:Zn/4,hours:Zn*24/4,minutes:Zn*24*60/4,seconds:Zn*24*60*60/4,milliseconds:Zn*24*60*60*1e3/4},months:{weeks:Ra/7,days:Ra,hours:Ra*24,minutes:Ra*24*60,seconds:Ra*24*60*60,milliseconds:Ra*24*60*60*1e3},...BR},Io=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],pW=Io.slice(0).reverse();function ms(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new $t(i)}function UR(e,t){let n=t.milliseconds??0;for(const i of pW.slice(1))t[i]&&(n+=t[i]*e[i].milliseconds);return n}function O2(e,t){const n=UR(e,t)<0?-1:1;Io.reduceRight((i,r)=>{if(kt(t[r]))return i;if(i){const s=t[i]*n,o=e[r][i],a=Math.floor(s/o);t[r]+=a*n,t[i]-=a*o*n}return r},null),Io.reduce((i,r)=>{if(kt(t[r]))return i;if(i){const s=t[i]%1;t[i]-=s,t[r]+=s*e[i][r]}return r},null)}function yW(e){const t={};for(const[n,i]of Object.entries(e))i!==0&&(t[n]=i);return t}class $t{constructor(t){const n=t.conversionAccuracy==="longterm"||!1;let i=n?mW:gW;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||oe.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,n){return $t.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(t==null||typeof t!="object")throw new Qn(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new $t({values:kd(t,$t.normalizeUnit),loc:oe.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(Uo(t))return $t.fromMillis(t);if($t.isDuration(t))return t;if(typeof t=="object")return $t.fromObject(t);throw new Qn(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){const[i]=aW(t);return i?$t.fromObject(i,n):$t.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){const[i]=cW(t);return i?$t.fromObject(i,n):$t.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new Qn("need to specify a reason the Duration is invalid");const i=t instanceof vi?t:new vi(t,n);if(Ce.throwOnInvalid)throw new jz(i);return new $t({invalid:i})}static normalizeUnit(t){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!n)throw new aR(t);return n}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,n={}){const i={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?tn.create(this.loc,i).formatDurationFromString(this,t):L2}toHuman(t={}){if(!this.isValid)return L2;const n=Io.map(i=>{const r=this.values[i];return kt(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(r)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=cw(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Ct.fromMillis(n,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?UR(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const n=$t.fromDurationLike(t),i={};for(const r of Io)(Sl(n.values,r)||Sl(this.values,r))&&(i[r]=n.get(r)+this.get(r));return ms(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const n=$t.fromDurationLike(t);return this.plus(n.negate())}mapUnits(t){if(!this.isValid)return this;const n={};for(const i of Object.keys(this.values))n[i]=IR(t(this.values[i],i));return ms(this,{values:n},!0)}get(t){return this[$t.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const n={...this.values,...kd(t,$t.normalizeUnit)};return ms(this,{values:n})}reconfigure({locale:t,numberingSystem:n,conversionAccuracy:i,matrix:r}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:n}),matrix:r,conversionAccuracy:i};return ms(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return O2(this.matrix,t),ms(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=yW(this.normalize().shiftToAll().toObject());return ms(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>$t.normalizeUnit(o));const n={},i={},r=this.toObject();let s;for(const o of Io)if(t.indexOf(o)>=0){s=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;Uo(r[o])&&(a+=r[o]);const l=Math.trunc(a);n[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else Uo(r[o])&&(i[o]=r[o]);for(const o in i)i[o]!==0&&(n[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return O2(this.matrix,n),ms(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=this.values[n]===0?0:-this.values[n];return ms(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function n(i,r){return i===void 0||i===0?r===void 0||r===0:i===r}for(const i of Io)if(!n(this.values[i],t.values[i]))return!1;return!0}}const Ia="Invalid Interval";function _W(e,t){return!e||!e.isValid?_e.invalid("missing or invalid start"):!t||!t.isValid?_e.invalid("missing or invalid end"):t<e?_e.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class _e{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new Qn("need to specify a reason the Interval is invalid");const i=t instanceof vi?t:new vi(t,n);if(Ce.throwOnInvalid)throw new Hz(i);return new _e({invalid:i})}static fromDateTimes(t,n){const i=Ec(t),r=Ec(n),s=_W(i,r);return s??new _e({start:i,end:r})}static after(t,n){const i=$t.fromDurationLike(n),r=Ec(t);return _e.fromDateTimes(r,r.plus(i))}static before(t,n){const i=$t.fromDurationLike(n),r=Ec(t);return _e.fromDateTimes(r.minus(i),r)}static fromISO(t,n){const[i,r]=(t||"").split("/",2);if(i&&r){let s,o;try{s=Ct.fromISO(i,n),o=s.isValid}catch{o=!1}let a,l;try{a=Ct.fromISO(r,n),l=a.isValid}catch{l=!1}if(o&&l)return _e.fromDateTimes(s,a);if(o){const c=$t.fromISO(r,n);if(c.isValid)return _e.after(s,c)}else if(l){const c=$t.fromISO(i,n);if(c.isValid)return _e.before(a,c)}}return _e.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const n=this.start.startOf(t),i=this.end.startOf(t);return Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:n}={}){return this.isValid?_e.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];const n=t.map(Ec).filter(o=>this.contains(o)).sort(),i=[];let{s:r}=this,s=0;for(;r<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;i.push(_e.fromDateTimes(r,a)),r=a,s+=1}return i}splitBy(t){const n=$t.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:i}=this,r=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(n.mapUnits(l=>l*r));s=+a>+this.e?this.e:a,o.push(_e.fromDateTimes(i,s)),i=s,r+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const n=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return n>=i?null:_e.fromDateTimes(n,i)}union(t){if(!this.isValid)return this;const n=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return _e.fromDateTimes(n,i)}static merge(t){const[n,i]=t.sort((r,s)=>r.s-s.s).reduce(([r,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[r,s.union(o)]:[r.concat([s]),o]:[r,o],[[],null]);return i&&n.push(i),n}static xor(t){let n=null,i=0;const r=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?n=l.time:(n&&+n!=+l.time&&r.push(_e.fromDateTimes(n,l.time)),n=null);return _e.merge(r)}difference(...t){return _e.xor([this].concat(t)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Ia}toLocaleString(t=Ad,n={}){return this.isValid?tn.create(this.s.loc.clone(n),t).formatInterval(this):Ia}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Ia}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ia}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Ia}toFormat(t,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${n}${this.e.toFormat(t)}`:Ia}toDuration(t,n){return this.isValid?this.e.diff(this.s,t,n):$t.invalid(this.invalidReason)}mapEndpoints(t){return _e.fromDateTimes(t(this.s),t(this.e))}}class fh{static hasDST(t=Ce.defaultZone){const n=Ct.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(t){return Ur.isValidZone(t)}static normalizeZone(t){return Cs(t,Ce.defaultZone)}static months(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||oe.create(n,i,s)).months(t)}static monthsFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||oe.create(n,i,s)).months(t,!0)}static weekdays(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||oe.create(n,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||oe.create(n,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return oe.create(t).meridiems()}static eras(t="short",{locale:n=null}={}){return oe.create(n,null,"gregory").eras(t)}static features(){return{relative:MR()}}}function k2(e,t){const n=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor($t.fromMillis(i).as("days"))}function wW(e,t,n){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=k2(l,c);return(u-u%7)/7}],["days",k2]],r={},s=e;let o,a;for(const[l,c]of i)n.indexOf(l)>=0&&(o=l,r[l]=c(e,t),a=s.plus(r),a>t?(r[l]--,e=s.plus(r),e>t&&(a=e,r[l]--,e=s.plus(r))):e=a);return[e,r,a,o]}function xW(e,t,n,i){let[r,s,o,a]=wW(e,t,n);const l=t-r,c=n.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<t&&(o=r.plus({[a]:1})),o!==r&&(s[a]=(s[a]||0)+l/(o-r)));const u=$t.fromObject(s,i);return c.length>0?$t.fromMillis(l,i).shiftTo(...c).plus(u):u}const dw={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},P2={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},bW=dw.hanidec.replace(/[\[|\]]/g,"").split("");function vW(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(e[n].search(dw.hanidec)!==-1)t+=bW.indexOf(e[n]);else for(const r in P2){const[s,o]=P2[r];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}function di({numberingSystem:e},t=""){return new RegExp(`${dw[e||"latn"]}${t}`)}const EW="missing Intl.DateTimeFormat.formatToParts support";function Bt(e,t=n=>n){return{regex:e,deser:([n])=>t(vW(n))}}const TW=String.fromCharCode(160),VR=`[ ${TW}]`,XR=new RegExp(VR,"g");function CW(e){return e.replace(/\./g,"\\.?").replace(XR,VR)}function F2(e){return e.replace(/\./g,"").replace(XR," ").toLowerCase()}function gi(e,t){return e===null?null:{regex:RegExp(e.map(CW).join("|")),deser:([n])=>e.findIndex(i=>F2(n)===F2(i))+t}}function N2(e,t){return{regex:e,deser:([,n,i])=>_m(n,i),groups:t}}function hh(e){return{regex:e,deser:([t])=>t}}function SW(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function MW(e,t){const n=di(t),i=di(t,"{2}"),r=di(t,"{3}"),s=di(t,"{4}"),o=di(t,"{6}"),a=di(t,"{1,2}"),l=di(t,"{1,3}"),c=di(t,"{1,6}"),u=di(t,"{1,9}"),f=di(t,"{2,4}"),h=di(t,"{4,6}"),d=_=>({regex:RegExp(SW(_.val)),deser:([p])=>p,literal:!0}),m=(_=>{if(e.literal)return d(_);switch(_.val){case"G":return gi(t.eras("short"),0);case"GG":return gi(t.eras("long"),0);case"y":return Bt(c);case"yy":return Bt(f,zy);case"yyyy":return Bt(s);case"yyyyy":return Bt(h);case"yyyyyy":return Bt(o);case"M":return Bt(a);case"MM":return Bt(i);case"MMM":return gi(t.months("short",!0),1);case"MMMM":return gi(t.months("long",!0),1);case"L":return Bt(a);case"LL":return Bt(i);case"LLL":return gi(t.months("short",!1),1);case"LLLL":return gi(t.months("long",!1),1);case"d":return Bt(a);case"dd":return Bt(i);case"o":return Bt(l);case"ooo":return Bt(r);case"HH":return Bt(i);case"H":return Bt(a);case"hh":return Bt(i);case"h":return Bt(a);case"mm":return Bt(i);case"m":return Bt(a);case"q":return Bt(a);case"qq":return Bt(i);case"s":return Bt(a);case"ss":return Bt(i);case"S":return Bt(l);case"SSS":return Bt(r);case"u":return hh(u);case"uu":return hh(a);case"uuu":return Bt(n);case"a":return gi(t.meridiems(),0);case"kkkk":return Bt(s);case"kk":return Bt(f,zy);case"W":return Bt(a);case"WW":return Bt(i);case"E":case"c":return Bt(n);case"EEE":return gi(t.weekdays("short",!1),1);case"EEEE":return gi(t.weekdays("long",!1),1);case"ccc":return gi(t.weekdays("short",!0),1);case"cccc":return gi(t.weekdays("long",!0),1);case"Z":case"ZZ":return N2(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return N2(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return hh(/[a-z_+-/]{1,256}?/i);case" ":return hh(/[^\S\n\r]/);default:return d(_)}})(e)||{invalidReason:EW};return m.token=e,m}const RW={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function IW(e,t,n){const{type:i,value:r}=e;if(i==="literal"){const l=/^\s+$/.test(r);return{literal:!l,val:l?" ":r}}const s=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=RW[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function AW(e){return[`^${e.map(n=>n.regex).reduce((n,i)=>`${n}(${i.source})`,"")}$`,e]}function LW(e,t,n){const i=e.match(t);if(i){const r={};let s=1;for(const o in n)if(Sl(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(r[a.token.val[0]]=a.deser(i.slice(s,s+l))),s+=l}return[i,r]}else return[i,{}]}function OW(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,i;return kt(e.z)||(n=Ur.create(e.z)),kt(e.Z)||(n||(n=new dn(e.Z)),i=e.Z),kt(e.q)||(e.M=(e.q-1)*3+1),kt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),kt(e.u)||(e.S=lw(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),n,i]}let q0=null;function kW(){return q0||(q0=Ct.fromMillis(1555555555555)),q0}function PW(e,t){if(e.literal)return e;const n=tn.macroTokenToFormatOpts(e.val),i=ZR(n,t);return i==null||i.includes(void 0)?e:i}function HR(e,t){return Array.prototype.concat(...e.map(n=>PW(n,t)))}function jR(e,t,n){const i=HR(tn.parseFormat(n),e),r=i.map(o=>MW(o,e)),s=r.find(o=>o.invalidReason);if(s)return{input:t,tokens:i,invalidReason:s.invalidReason};{const[o,a]=AW(r),l=RegExp(o,"i"),[c,u]=LW(t,l,a),[f,h,d]=u?OW(u):[null,null,void 0];if(Sl(u,"a")&&Sl(u,"H"))throw new zc("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:c,matches:u,result:f,zone:h,specificOffset:d}}}function FW(e,t,n){const{result:i,zone:r,specificOffset:s,invalidReason:o}=jR(e,t,n);return[i,r,s,o]}function ZR(e,t){if(!e)return null;const i=tn.create(t,e).dtFormatter(kW()),r=i.formatToParts(),s=i.resolvedOptions();return r.map(o=>IW(o,e,s))}const qR=[0,31,59,90,120,151,181,212,243,273,304,334],KR=[0,31,60,91,121,152,182,213,244,274,305,335];function ti(e,t){return new vi("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function JR(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const r=i.getUTCDay();return r===0?7:r}function QR(e,t,n){return n+(cf(e)?KR:qR)[t-1]}function tI(e,t){const n=cf(e)?KR:qR,i=n.findIndex(s=>s<t),r=t-n[i];return{month:i+1,day:r}}function Gy(e){const{year:t,month:n,day:i}=e,r=QR(t,n,i),s=JR(t,n,i);let o=Math.floor((r-s+10)/7),a;return o<1?(a=t-1,o=Od(a)):o>Od(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:s,...wm(e)}}function D2(e){const{weekYear:t,weekNumber:n,weekday:i}=e,r=JR(t,1,4),s=nu(t);let o=n*7+i-r-3,a;o<1?(a=t-1,o+=nu(a)):o>s?(a=t+1,o-=nu(t)):a=t;const{month:l,day:c}=tI(a,o);return{year:a,month:l,day:c,...wm(e)}}function K0(e){const{year:t,month:n,day:i}=e,r=QR(t,n,i);return{year:t,ordinal:r,...wm(e)}}function $2(e){const{year:t,ordinal:n}=e,{month:i,day:r}=tI(t,n);return{year:t,month:i,day:r,...wm(e)}}function NW(e){const t=pm(e.weekYear),n=Ar(e.weekNumber,1,Od(e.weekYear)),i=Ar(e.weekday,1,7);return t?n?i?!1:ti("weekday",e.weekday):ti("week",e.week):ti("weekYear",e.weekYear)}function DW(e){const t=pm(e.year),n=Ar(e.ordinal,1,nu(e.year));return t?n?!1:ti("ordinal",e.ordinal):ti("year",e.year)}function eI(e){const t=pm(e.year),n=Ar(e.month,1,12),i=Ar(e.day,1,Ld(e.year,e.month));return t?n?i?!1:ti("day",e.day):ti("month",e.month):ti("year",e.year)}function nI(e){const{hour:t,minute:n,second:i,millisecond:r}=e,s=Ar(t,0,23)||t===24&&n===0&&i===0&&r===0,o=Ar(n,0,59),a=Ar(i,0,59),l=Ar(r,0,999);return s?o?a?l?!1:ti("millisecond",r):ti("second",i):ti("minute",n):ti("hour",t)}const J0="Invalid DateTime",z2=864e13;function dh(e){return new vi("unsupported zone",`the zone "${e.name}" is not supported`)}function Q0(e){return e.weekData===null&&(e.weekData=Gy(e.c)),e.weekData}function fo(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Ct({...n,...t,old:n})}function iI(e,t,n){let i=e-t*60*1e3;const r=n.offset(i);if(t===r)return[i,t];i-=(r-t)*60*1e3;const s=n.offset(i);return r===s?[i,r]:[e-Math.min(r,s)*60*1e3,Math.max(r,s)]}function gh(e,t){e+=t*60*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function jh(e,t,n){return iI(ym(e),t,n)}function G2(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),r=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:r,day:Math.min(e.c.day,Ld(i,r))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=$t.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=ym(s);let[l,c]=iI(a,n,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function vc(e,t,n,i,r,s){const{setZone:o,zone:a}=n;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=Ct.fromObject(e,{...n,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return Ct.invalid(new vi("unparsable",`the input "${r}" can't be parsed as ${i}`))}function mh(e,t,n=!0){return e.isValid?tn.create(oe.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function tp(e,t){const n=e.c.year>9999||e.c.year<0;let i="";return n&&e.c.year>=0&&(i+="+"),i+=Se(e.c.year,n?6:4),t?(i+="-",i+=Se(e.c.month),i+="-",i+=Se(e.c.day)):(i+=Se(e.c.month),i+=Se(e.c.day)),i}function W2(e,t,n,i,r,s){let o=Se(e.c.hour);return t?(o+=":",o+=Se(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=":")):o+=Se(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=Se(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=Se(e.c.millisecond,3))),r&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=Se(Math.trunc(-e.o/60)),o+=":",o+=Se(Math.trunc(-e.o%60))):(o+="+",o+=Se(Math.trunc(e.o/60)),o+=":",o+=Se(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const rI={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},$W={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},zW={ordinal:1,hour:0,minute:0,second:0,millisecond:0},sI=["year","month","day","hour","minute","second","millisecond"],GW=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],WW=["year","ordinal","hour","minute","second","millisecond"];function Y2(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new aR(e);return t}function B2(e,t){const n=Cs(t.zone,Ce.defaultZone),i=oe.fromObject(t),r=Ce.now();let s,o;if(kt(e.year))s=r;else{for(const c of sI)kt(e[c])&&(e[c]=rI[c]);const a=eI(e)||nI(e);if(a)return Ct.invalid(a);const l=n.offset(r);[s,o]=jh(e,l,n)}return new Ct({ts:s,zone:n,loc:i,o})}function U2(e,t,n){const i=kt(n.round)?!0:n.round,r=(o,a)=>(o=cw(o,i||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(o,a)),s=o=>n.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(n.unit)return r(s(n.unit),n.unit);for(const o of n.units){const a=s(o);if(Math.abs(a)>=1)return r(a,o)}return r(e>t?-0:0,n.units[n.units.length-1])}function V2(e){let t={},n;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}class Ct{constructor(t){const n=t.zone||Ce.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new vi("invalid input"):null)||(n.isValid?null:dh(n));this.ts=kt(t.ts)?Ce.now():t.ts;let r=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(n))[r,s]=[t.old.c,t.old.o];else{const a=n.offset(this.ts);r=gh(this.ts,a),i=Number.isNaN(r.year)?new vi("invalid input"):null,r=i?null:r,s=i?null:a}this._zone=n,this.loc=t.loc||oe.create(),this.invalid=i,this.weekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new Ct({})}static local(){const[t,n]=V2(arguments),[i,r,s,o,a,l,c]=n;return B2({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,n]=V2(arguments),[i,r,s,o,a,l,c]=n;return t.zone=dn.utcInstance,B2({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,n={}){const i=mG(t)?t.valueOf():NaN;if(Number.isNaN(i))return Ct.invalid("invalid input");const r=Cs(n.zone,Ce.defaultZone);return r.isValid?new Ct({ts:i,zone:r,loc:oe.fromObject(n)}):Ct.invalid(dh(r))}static fromMillis(t,n={}){if(Uo(t))return t<-z2||t>z2?Ct.invalid("Timestamp out of range"):new Ct({ts:t,zone:Cs(n.zone,Ce.defaultZone),loc:oe.fromObject(n)});throw new Qn(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(Uo(t))return new Ct({ts:t*1e3,zone:Cs(n.zone,Ce.defaultZone),loc:oe.fromObject(n)});throw new Qn("fromSeconds requires a numerical input")}static fromObject(t,n={}){t=t||{};const i=Cs(n.zone,Ce.defaultZone);if(!i.isValid)return Ct.invalid(dh(i));const r=Ce.now(),s=kt(n.specificOffset)?i.offset(r):n.specificOffset,o=kd(t,Y2),a=!kt(o.ordinal),l=!kt(o.year),c=!kt(o.month)||!kt(o.day),u=l||c,f=o.weekYear||o.weekNumber,h=oe.fromObject(n);if((u||a)&&f)throw new zc("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new zc("Can't mix ordinal dates with month/day");const d=f||o.weekday&&!u;let g,m,_=gh(r,s);d?(g=GW,m=$W,_=Gy(_)):a?(g=WW,m=zW,_=K0(_)):(g=sI,m=rI);let p=!1;for(const C of g){const I=o[C];kt(I)?p?o[C]=m[C]:o[C]=_[C]:p=!0}const y=d?NW(o):a?DW(o):eI(o),x=y||nI(o);if(x)return Ct.invalid(x);const w=d?D2(o):a?$2(o):o,[v,b]=jh(w,s,i),E=new Ct({ts:v,zone:i,o:b,loc:h});return o.weekday&&u&&t.weekday!==E.weekday?Ct.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${E.toISO()}`):E}static fromISO(t,n={}){const[i,r]=rW(t);return vc(i,r,n,"ISO 8601",t)}static fromRFC2822(t,n={}){const[i,r]=sW(t);return vc(i,r,n,"RFC 2822",t)}static fromHTTP(t,n={}){const[i,r]=oW(t);return vc(i,r,n,"HTTP",n)}static fromFormat(t,n,i={}){if(kt(t)||kt(n))throw new Qn("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=i,o=oe.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=FW(o,t,n);return u?Ct.invalid(u):vc(a,l,i,`format ${n}`,t,c)}static fromString(t,n,i={}){return Ct.fromFormat(t,n,i)}static fromSQL(t,n={}){const[i,r]=dW(t);return vc(i,r,n,"SQL",t)}static invalid(t,n=null){if(!t)throw new Qn("need to specify a reason the DateTime is invalid");const i=t instanceof vi?t:new vi(t,n);if(Ce.throwOnInvalid)throw new Xz(i);return new Ct({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,n={}){const i=ZR(t,oe.fromObject(n));return i?i.map(r=>r?r.val:null).join(""):null}static expandFormat(t,n={}){return HR(tn.parseFormat(t),oe.fromObject(n)).map(r=>r.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Q0(this).weekYear:NaN}get weekNumber(){return this.isValid?Q0(this).weekNumber:NaN}get weekday(){return this.isValid?Q0(this).weekday:NaN}get ordinal(){return this.isValid?K0(this.c).ordinal:NaN}get monthShort(){return this.isValid?fh.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?fh.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?fh.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?fh.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,n=6e4,i=ym(this.c),r=this.zone.offset(i-t),s=this.zone.offset(i+t),o=this.zone.offset(i-r*n),a=this.zone.offset(i-s*n);if(o===a)return[this];const l=i-o*n,c=i-a*n,u=gh(l,o),f=gh(c,a);return u.hour===f.hour&&u.minute===f.minute&&u.second===f.second&&u.millisecond===f.millisecond?[fo(this,{ts:l}),fo(this,{ts:c})]:[this]}get isInLeapYear(){return cf(this.year)}get daysInMonth(){return Ld(this.year,this.month)}get daysInYear(){return this.isValid?nu(this.year):NaN}get weeksInWeekYear(){return this.isValid?Od(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:n,numberingSystem:i,calendar:r}=tn.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:n,numberingSystem:i,outputCalendar:r}}toUTC(t=0,n={}){return this.setZone(dn.instance(t),n)}toLocal(){return this.setZone(Ce.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:i=!1}={}){if(t=Cs(t,Ce.defaultZone),t.equals(this.zone))return this;if(t.isValid){let r=this.ts;if(n||i){const s=t.offset(this.ts),o=this.toObject();[r]=jh(o,s,t)}return fo(this,{ts:r,zone:t})}else return Ct.invalid(dh(t))}reconfigure({locale:t,numberingSystem:n,outputCalendar:i}={}){const r=this.loc.clone({locale:t,numberingSystem:n,outputCalendar:i});return fo(this,{loc:r})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const n=kd(t,Y2),i=!kt(n.weekYear)||!kt(n.weekNumber)||!kt(n.weekday),r=!kt(n.ordinal),s=!kt(n.year),o=!kt(n.month)||!kt(n.day),a=s||o,l=n.weekYear||n.weekNumber;if((a||r)&&l)throw new zc("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&r)throw new zc("Can't mix ordinal dates with month/day");let c;i?c=D2({...Gy(this.c),...n}):kt(n.ordinal)?(c={...this.toObject(),...n},kt(n.day)&&(c.day=Math.min(Ld(c.year,c.month),c.day))):c=$2({...K0(this.c),...n});const[u,f]=jh(c,this.o,this.zone);return fo(this,{ts:u,o:f})}plus(t){if(!this.isValid)return this;const n=$t.fromDurationLike(t);return fo(this,G2(this,n))}minus(t){if(!this.isValid)return this;const n=$t.fromDurationLike(t).negate();return fo(this,G2(this,n))}startOf(t){if(!this.isValid)return this;const n={},i=$t.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks"&&(n.weekday=1),i==="quarters"){const r=Math.ceil(this.month/3);n.month=(r-1)*3+1}return this.set(n)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,n={}){return this.isValid?tn.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):J0}toLocaleString(t=Ad,n={}){return this.isValid?tn.create(this.loc.clone(n),t).formatDateTime(this):J0}toLocaleParts(t={}){return this.isValid?tn.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:n=!1,suppressMilliseconds:i=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=tp(this,o);return a+="T",a+=W2(this,o,n,i,r,s),a}toISODate({format:t="extended"}={}){return this.isValid?tp(this,t==="extended"):null}toISOWeekDate(){return mh(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:n=!1,includeOffset:i=!0,includePrefix:r=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+W2(this,o==="extended",n,t,i,s):null}toRFC2822(){return mh(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return mh(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?tp(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:n=!1,includeOffsetSpace:i=!0}={}){let r="HH:mm:ss.SSS";return(n||t)&&(i&&(r+=" "),n?r+="z":t&&(r+="ZZ")),mh(this,r,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():J0}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const n={...this.c};return t.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,n="milliseconds",i={}){if(!this.isValid||!t.isValid)return $t.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=pG(n).map($t.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=xW(a,l,s,r);return o?c.negate():c}diffNow(t="milliseconds",n={}){return this.diff(Ct.now(),t,n)}until(t){return this.isValid?_e.fromDateTimes(this,t):this}hasSame(t,n){if(!this.isValid)return!1;const i=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(n)<=i&&i<=r.endOf(n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const n=t.base||Ct.fromObject({},{zone:this.zone}),i=t.padding?this<n?-t.padding:t.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(r=t.unit,s=void 0),U2(n,this.plus(i),{...t,numeric:"always",units:r,unit:s})}toRelativeCalendar(t={}){return this.isValid?U2(t.base||Ct.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ct.isDateTime))throw new Qn("min requires all arguments be DateTimes");return R2(t,n=>n.valueOf(),Math.min)}static max(...t){if(!t.every(Ct.isDateTime))throw new Qn("max requires all arguments be DateTimes");return R2(t,n=>n.valueOf(),Math.max)}static fromFormatExplain(t,n,i={}){const{locale:r=null,numberingSystem:s=null}=i,o=oe.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return jR(o,t,n)}static fromStringExplain(t,n,i={}){return Ct.fromFormatExplain(t,n,i)}static get DATE_SHORT(){return Ad}static get DATE_MED(){return lR}static get DATE_MED_WITH_WEEKDAY(){return Zz}static get DATE_FULL(){return cR}static get DATE_HUGE(){return uR}static get TIME_SIMPLE(){return fR}static get TIME_WITH_SECONDS(){return hR}static get TIME_WITH_SHORT_OFFSET(){return dR}static get TIME_WITH_LONG_OFFSET(){return gR}static get TIME_24_SIMPLE(){return mR}static get TIME_24_WITH_SECONDS(){return pR}static get TIME_24_WITH_SHORT_OFFSET(){return yR}static get TIME_24_WITH_LONG_OFFSET(){return _R}static get DATETIME_SHORT(){return wR}static get DATETIME_SHORT_WITH_SECONDS(){return xR}static get DATETIME_MED(){return bR}static get DATETIME_MED_WITH_SECONDS(){return vR}static get DATETIME_MED_WITH_WEEKDAY(){return qz}static get DATETIME_FULL(){return ER}static get DATETIME_FULL_WITH_SECONDS(){return TR}static get DATETIME_HUGE(){return CR}static get DATETIME_HUGE_WITH_SECONDS(){return SR}}function Ec(e){if(Ct.isDateTime(e))return e;if(e&&e.valueOf&&Uo(e.valueOf()))return Ct.fromJSDate(e);if(e&&typeof e=="object")return Ct.fromObject(e);throw new Qn(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function oI(e,t){if(!e)return"";let n=Ct.fromISO(e);return t&&(n=n.setZone(`UTC+${t}`)),n.toLocaleString({weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})}function YW(e){if(!e)return"UTC";let t="GMT";return e>0&&(t+="+"),t+e.toString()}function BW(e){const t=Math.floor(e/86400);e-=t*(60*60*24);const n=Math.floor(e/(60*60));e-=n*(60*60);const i=Math.floor(e/60);return e-=i*60,t>0?`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`:`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`}const aI=document.createElement("i"),lI=document.createElement("i");aI.setAttribute("class","fa-solid fa-expand");lI.setAttribute("class","fa-solid fa-compress");const UW={props:{geojsons:Array,activityFiles:Array,timezoneOffsetHoursList:Array},data(){return{popupFreeze:new Boolean,popupRecord:new Py,popupActivityIndex:0,popupTimezoneOffsetHours:new Number(0),popupOverlay:new w2({}),vec:new Q9({source:new kz({features:[]}),visible:!0,style:new Bo({stroke:new Q1({color:[60,99,130,1],width:3})})}),map:new x$({controls:xM(),layers:[new C7({source:new Mz})],view:new Ui({enableRotation:!1,projection:"EPSG:4326"})}),zoomToExtent:new H0}},watch:{geojsons:{handler(e){this.updateMapSource(e)}},zoomToExtent:{handler(e,t){this.map.removeControl(t),this.map.addControl(e)}}},methods:{toStringHDMS:gD,toTimezoneDateString:oI,updateMapSource(e){var o,a;this.popupOverlay.setPosition(void 0);const t=this.map.getView(),n=this.vec.getSource(),i=new Array;for(let l=0;l<e.length;l++){const c=new V$().readFeature(e[l]);c.setId("lineString-"+l),i.push(c)}n.clear(),n.addFeatures(i),t.fit(n.getExtent(),{padding:[50,50,50,50]});const r=new Array,s=new Array;for(let l=0;l<i.length;l++){const c=new My(new vl(((o=i[l])==null?void 0:o.getGeometry()).getFirstCoordinate()));c.setStyle(new Bo({image:new Sd({crossOrigin:"anonymous",src:wN,scale:.8})})),c.setId("startingPoint-"+l),r.push(c);const u=new My(new vl(((a=i[l])==null?void 0:a.getGeometry()).getLastCoordinate()));u.setStyle(new Bo({image:new Sd({crossOrigin:"anonymous",src:_N,scale:.8})})),u.setId("destinationPoint-"+l),s.push(u)}n.addFeatures(r),n.addFeatures(s),this.zoomToExtent=new H0({extent:t.getViewStateAndExtent().extent})},findNearestRecord(e,t){var s;const n=Number(e.split("-")[1]);this.popupActivityIndex=n;let i=new Py,r=Number.MAX_VALUE;return this.popupTimezoneOffsetHours=this.timezoneOffsetHoursList[n],(s=this.activityFiles[n].records)==null||s.forEach(o=>{if(!o.positionLong||!o.positionLat)return;const a=Math.abs(Math.sqrt(Math.pow(o.positionLong-t[0],2)+Math.pow(o.positionLat-t[1],2)));a<r&&(r=a,i=o)}),i},lineStringFeatureListener(e,t){e=="singleclick"&&(this.popupFreeze=!this.popupFreeze&&this.popupOverlay.getPosition()!=null),this.popupFreeze||this.popupOverlay.setPosition(void 0),!(this.popupFreeze==!0&&this.popupOverlay.getPosition()!=null)&&this.map.forEachFeatureAtPixel(t.pixel,n=>{n.getGeometry()instanceof vd&&(this.popupRecord=this.findNearestRecord(n.getId(),t.coordinate),this.popupOverlay.setPosition([this.popupRecord.positionLong,this.popupRecord.positionLat]),this.popupFreeze=e=="singleclick")},{hitTolerance:10})},updateExtent(){this.map.getView().fit(this.vec.getSource().getExtent(),{padding:[50,50,50,50]}),this.zoomToExtent=new H0({extent:this.map.getView().getViewStateAndExtent().extent})}},computed:{titleWidth(){this.popupRecord;let e=0;return document.querySelectorAll('.popup-content > div:not([style*="display: none"]) > span:nth-child(1)').forEach(n=>{const i=n.innerHTML.length*6;e=Math.max(e,i)}),e},hasHeartRate(){var t;if(((t=this.activityFiles)==null?void 0:t.length)==0)return!1;const e=this.activityFiles[this.popupActivityIndex].records;for(let n=0;n<e.length;n++)if(e[n].heartRate)return!0;return!1},hasCadence(){var t;if(((t=this.activityFiles)==null?void 0:t.length)==0)return!1;const e=this.activityFiles[this.popupActivityIndex].records;for(let n=0;n<e.length;n++)if(e[n].cadence)return!0;return!1},hasPower(){var t;if(((t=this.activityFiles)==null?void 0:t.length)==0)return!1;const e=this.activityFiles[this.popupActivityIndex].records;for(let n=0;n<e.length;n++)if(e[n].power)return!0;return!1},hasTemperature(){var t;if(((t=this.activityFiles)==null?void 0:t.length)==0)return!1;const e=this.activityFiles[this.popupActivityIndex].records;for(let n=0;n<e.length;n++)if(e[n].temperature)return!0;return!1}},mounted(){this.popupOverlay=new w2({element:document.getElementById("popup")}),this.map.addOverlay(this.popupOverlay),this.map.addLayer(this.vec),this.map.setTarget("map"),this.map.addControl(new Dz({label:aI,labelActive:lI})),this.map.addControl(new Wz),this.map.once("precompose",()=>this.updateExtent()),this.map.on("change:size",()=>this.updateExtent()),this.map.on("pointermove",e=>this.lineStringFeatureListener(e.type,e)),this.map.on("singleclick",e=>this.lineStringFeatureListener(e.type,e))}};const xm=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},VW=X("div",{id:"map",style:{width:"100%",height:"100%"}},null,-1),XW={id:"popup",class:"ol-popup"},HW={class:"popup-content"},jW=X("span",null," km",-1),ZW=X("span",null," km/h",-1),qW=X("span",null," rpm",-1),KW=X("span",null," bpm",-1),JW=X("span",null," watts",-1),QW=X("span",null," °C",-1),tY={style:{display:"grid"}},eY={style:{"grid-column":"1"}},nY=X("span",null," masl",-1),iY={style:{"grid-column":"2"}},rY=X("span",null,"(Grade: ",-1),sY=X("span",null," %)",-1);function oY(e,t,n,i,r,s){var o;return Ut(),Jt(Jn,null,[VW,X("div",XW,[X("div",HW,[X("div",null,[X("span",{style:Ke({width:s.titleWidth+"px"})},"Time:",4),X("span",null,Nt(r.popupRecord.timestamp?s.toTimezoneDateString(r.popupRecord.timestamp,r.popupTimezoneOffsetHours):"-"),1)]),X("div",null,[X("span",{style:Ke({width:s.titleWidth+"px"})},"Distance:",4),X("span",null,Nt(r.popupRecord.distance?(r.popupRecord.distance/1e3).toFixed(2):"-"),1),jW]),X("div",null,[X("span",{style:Ke({width:s.titleWidth+"px"})},"Speed:",4),X("span",null,Nt(r.popupRecord.speed?(r.popupRecord.speed*3600/1e3).toFixed(2):"-"),1),ZW]),Mr(X("div",null,[X("span",{style:Ke({width:s.titleWidth+"px"})},"Cadence:",4),X("span",null,Nt(r.popupRecord.cadence?r.popupRecord.cadence:"-"),1),qW],512),[[Co,s.hasCadence]]),Mr(X("div",null,[X("span",{style:Ke({width:s.titleWidth+"px"})},"Heart Rate:",4),X("span",null,Nt(r.popupRecord.heartRate?r.popupRecord.heartRate:"-"),1),KW],512),[[Co,s.hasHeartRate]]),Mr(X("div",null,[X("span",{style:Ke({width:s.titleWidth+"px"})},"Power:",4),X("span",null,Nt(r.popupRecord.power?r.popupRecord.power:"-"),1),JW],512),[[Co,s.hasPower]]),Mr(X("div",null,[X("span",{style:Ke({width:s.titleWidth+"px"})},"Temperature:",4),X("span",null,Nt(r.popupRecord.temperature?r.popupRecord.temperature:"-"),1),QW],512),[[Co,s.hasTemperature]]),X("div",tY,[X("div",eY,[X("span",{style:Ke({width:s.titleWidth+"px"})},"Altitude:",4),X("span",null,Nt(r.popupRecord.altitude?(o=r.popupRecord.altitude)==null?void 0:o.toFixed(2):"-"),1),nY]),X("div",iY,[rY,X("span",null,Nt(r.popupRecord.grade?Math.round(r.popupRecord.grade):"0"),1),sY])]),X("div",null,[X("span",{style:Ke({width:s.titleWidth+"px"})},"Location:",4),X("span",null,Nt(r.popupRecord.positionLong&&r.popupRecord.positionLat?s.toStringHDMS([r.popupRecord.positionLong,r.popupRecord.positionLat]):"-"),1)])])])],64)}const aY=xm(UW,[["render",oY]]);function me(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Qo(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bm(e){let t,n,i;e.length!==2?(t=me,n=(a,l)=>me(e(a),l),i=(a,l)=>e(a)-l):(t=e===me||e===Qo?e:lY,n=e,i=e);function r(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=r(a,l,c,u-1);return f>c&&i(a[f-1],l)>-i(a[f],l)?f-1:f}return{left:r,center:o,right:s}}function lY(){return 0}function cI(e){return e===null?NaN:+e}function*cY(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const uY=bm(me),fY=uY.right;bm(cI).center;const vm=fY,uI=fI(hI),hY=fI(dY);function fI(e){return function(t,n,i=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((i=+i)>=0))throw new RangeError("invalid ry");let{data:r,width:s,height:o}=t;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:r.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!i)return t;const a=n&&e(n),l=i&&e(i),c=r.slice();return a&&l?(Aa(a,c,r,s,o),Aa(a,r,c,s,o),Aa(a,c,r,s,o),La(l,r,c,s,o),La(l,c,r,s,o),La(l,r,c,s,o)):a?(Aa(a,r,c,s,o),Aa(a,c,r,s,o),Aa(a,r,c,s,o)):l&&(La(l,r,c,s,o),La(l,c,r,s,o),La(l,r,c,s,o)),t}}function Aa(e,t,n,i,r){for(let s=0,o=i*r;s<o;)e(t,n,s,s+=i,1)}function La(e,t,n,i,r){for(let s=0,o=i*r;s<i;++s)e(t,n,s,s+o,i)}function dY(e){const t=hI(e);return(n,i,r,s,o)=>{r<<=2,s<<=2,o<<=2,t(n,i,r+0,s+0,o),t(n,i,r+1,s+1,o),t(n,i,r+2,s+2,o),t(n,i,r+3,s+3,o)}}function hI(e){const t=Math.floor(e);if(t===e)return gY(e);const n=e-t,i=2*e+1;return(r,s,o,a,l)=>{if(!((a-=l)>=o))return;let c=t*s[o];const u=l*t,f=u+l;for(let h=o,d=o+u;h<d;h+=l)c+=s[Math.min(a,h)];for(let h=o,d=a;h<=d;h+=l)c+=s[Math.min(a,h+u)],r[h]=(c+n*(s[Math.max(o,h-f)]+s[Math.min(a,h+f)]))/i,c-=s[Math.max(o,h-u)]}}function gY(e){const t=2*e+1;return(n,i,r,s,o)=>{if(!((s-=o)>=r))return;let a=e*i[r];const l=o*e;for(let c=r,u=r+l;c<u;c+=o)a+=i[Math.min(s,c)];for(let c=r,u=s;c<=u;c+=o)a+=i[Math.min(s,c+l)],n[c]=a/t,a-=i[Math.max(r,c-l)]}}function Em(e,t){let n=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(r=+r)>=r&&++n}return n}function mY(e){return e.length|0}function pY(e){return!(e>0)}function yY(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function _Y(e){return t=>e(...t)}function wY(...e){const t=typeof e[e.length-1]=="function"&&_Y(e.pop());e=e.map(yY);const n=e.map(mY),i=e.length-1,r=new Array(i+1).fill(0),s=[];if(i<0||n.some(pY))return s;for(;;){s.push(r.map((a,l)=>e[l][a]));let o=i;for(;++r[o]===n[o];){if(o===0)return t?s.map(t):s;r[o--]=0}}}function xY(e,t){var n=0,i=0;return Float64Array.from(e,t===void 0?r=>n+=+r||0:r=>n+=+t(r,i++,e)||0)}function gw(e,t){let n=0,i,r=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r))}if(n>1)return s/(n-1)}function hf(e,t){const n=gw(e,t);return n&&Math.sqrt(n)}function Ye(e,t){let n,i;if(t===void 0)for(const r of e)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class Qi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[i++]=a),t=o}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=t[--n];n>0&&(i=o,r=t[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}class ta extends Map{constructor(t,n=mI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(Wy(this,t))}has(t){return super.has(Wy(this,t))}set(t,n){return super.set(dI(this,t),n)}delete(t){return super.delete(gI(this,t))}}class df extends Set{constructor(t,n=mI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(Wy(this,t))}add(t){return super.add(dI(this,t))}delete(t){return super.delete(gI(this,t))}}function Wy({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function dI({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function gI({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function mI(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Yy(e){return e}function Qr(e,...t){return mw(e,Yy,Yy,t)}function al(e,t,...n){return mw(e,Yy,t,n)}function bY(e,t,...n){return mw(e,Array.from,t,n)}function mw(e,t,n,i){return function r(s,o){if(o>=i.length)return n(s);const a=new ta,l=i[o++];let c=-1;for(const u of s){const f=l(u,++c,s),h=a.get(f);h?h.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,r(f,o));return t(a)}(e,0)}function vY(e,t){return Array.from(t,n=>e[n])}function Ru(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const i=Uint32Array.from(e,(r,s)=>s);return t.length>1?(t=t.map(r=>e.map(r)),i.sort((r,s)=>{for(const o of t){const a=Iu(o[r],o[s]);if(a)return a}})):(n=e.map(n),i.sort((r,s)=>Iu(n[r],n[s]))),vY(e,i)}return e.sort(pw(n))}function pw(e=me){if(e===me)return Iu;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function Iu(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function yw(e,t,n){return(t.length!==2?Ru(al(e,t,n),([i,r],[s,o])=>me(r,o)||me(i,s)):Ru(Qr(e,n),([i,r],[s,o])=>t(r,o)||me(i,s))).map(([i])=>i)}const EY=Math.sqrt(50),TY=Math.sqrt(10),CY=Math.sqrt(2);function Pd(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=EY?10:s>=TY?5:s>=CY?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Pd(e,t,n*2):[a,l,c]}function Bs(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,s,o]=i?Pd(t,e,n):Pd(e,t,n);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function Au(e,t,n){return t=+t,e=+e,n=+n,Pd(e,t,n)[2]}function By(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?Au(t,e,n):Au(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function pI(e,t,n){let i;for(;;){const r=Au(e,t,n);if(r===i||r===0||!isFinite(r))return[e,t];r>0?(e=Math.floor(e/r)*r,t=Math.ceil(t/r)*r):r<0&&(e=Math.ceil(e*r)/r,t=Math.floor(t*r)/r),i=r}}function _w(e){return Math.max(1,Math.ceil(Math.log(Em(e))/Math.LN2)+1)}function Ue(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function SY(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);return i}function Sn(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function MY(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);return i}function yI(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?Iu:pw(r);i>n;){if(i-n>600){const l=i-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(t-c*f/l+h)),g=Math.min(i,Math.floor(t+(l-c)*f/l+h));yI(e,t,d,g,r)}const s=e[t];let o=n,a=i;for(Tc(e,n,t),r(e[i],s)>0&&Tc(e,n,i);o<a;){for(Tc(e,o,a),++o,--a;r(e[o],s)<0;)++o;for(;r(e[a],s)>0;)--a}r(e[n],s)===0?Tc(e,n,a):(++a,Tc(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function Tc(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function ww(e,t=me){let n,i=!1;if(t.length===1){let r;for(const s of e){const o=t(s);(i?me(o,r)>0:me(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of e)(i?t(r,n)>0:t(r,r)===0)&&(n=r,i=!0);return n}function Us(e,t,n){if(e=Float64Array.from(cY(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Sn(e);if(t>=1)return Ue(e);var i,r=(i-1)*t,s=Math.floor(r),o=Ue(yI(e,s).subarray(0,s+1)),a=Sn(e.subarray(s+1));return o+(a-o)*(r-s)}}function RY(e,t,n=cI){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(r-s)}}function IY(e,t,n){const i=Em(e),r=Us(e,.75)-Us(e,.25);return i&&r?Math.ceil((n-t)/(2*r*Math.pow(i,-1/3))):1}function _I(e,t,n){const i=Em(e),r=hf(e);return i&&r?Math.ceil((n-t)*Math.cbrt(i)/(3.49*r)):1}function Tm(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function Lu(e,t){return Us(e,.5,t)}function*AY(e){for(const t of e)yield*t}function wI(e){return Array.from(AY(e))}function xI(e,t){const n=new ta;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let i,r=0;for(const[s,o]of n)o>r&&(r=o,i=s);return i}function LY(e,t=OY){const n=[];let i,r=!1;for(const s of e)r&&n.push(t(i,s)),i=s,r=!0;return n}function OY(e,t){return[e,t]}function ei(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(r);++i<r;)s[i]=e+i*n;return s}function bI(e,t=me){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const i=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=me);const r=(a,l)=>t(n[a],n[l]);let s,o;return e=Uint32Array.from(n,(a,l)=>l),e.sort(t===me?(a,l)=>Iu(n[a],n[l]):pw(r)),e.forEach((a,l)=>{const c=r(a,s===void 0?a:s);c>=0?((s===void 0||c>0)&&(s=a,o=l),i[a]=o):i[a]=NaN}),i}function kY(e,t=me){let n,i=!1;if(t.length===1){let r;for(const s of e){const o=t(s);(i?me(o,r)<0:me(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of e)(i?t(r,n)<0:t(r,r)===0)&&(n=r,i=!0);return n}function ir(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function Fd(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function PY(e){return e}var ep=1,np=2,Uy=3,ph=4,X2=1e-6;function FY(e){return"translate("+e+",0)"}function NY(e){return"translate(0,"+e+")"}function DY(e){return t=>+e(t)}function $Y(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function zY(){return!this.__axis}function GY(e,t){var n=[],i=null,r=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===ep||e===ph?-1:1,u=e===ph||e===np?"x":"y",f=e===ep||e===Uy?FY:NY;function h(d){var g=i??(t.ticks?t.ticks.apply(t,n):t.domain()),m=r??(t.tickFormat?t.tickFormat.apply(t,n):PY),_=Math.max(s,0)+a,p=t.range(),y=+p[0]+l,x=+p[p.length-1]+l,w=(t.bandwidth?$Y:DY)(t.copy(),l),v=d.selection?d.selection():d,b=v.selectAll(".domain").data([null]),E=v.selectAll(".tick").data(g,t).order(),C=E.exit(),I=E.enter().append("g").attr("class","tick"),S=E.select("line"),R=E.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(I),S=S.merge(I.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),R=R.merge(I.append("text").attr("fill","currentColor").attr(u,c*_).attr("dy",e===ep?"0em":e===Uy?"0.71em":"0.32em")),d!==v&&(b=b.transition(d),E=E.transition(d),S=S.transition(d),R=R.transition(d),C=C.transition(d).attr("opacity",X2).attr("transform",function(M){return isFinite(M=w(M))?f(M+l):this.getAttribute("transform")}),I.attr("opacity",X2).attr("transform",function(M){var k=this.parentNode.__axis;return f((k&&isFinite(k=k(M))?k:w(M))+l)})),C.remove(),b.attr("d",e===ph||e===np?o?"M"+c*o+","+y+"H"+l+"V"+x+"H"+c*o:"M"+l+","+y+"V"+x:o?"M"+y+","+c*o+"V"+l+"H"+x+"V"+c*o:"M"+y+","+l+"H"+x),E.attr("opacity",1).attr("transform",function(M){return f(w(M)+l)}),S.attr(u+"2",c*s),R.attr(u,c*_).text(m),v.filter(zY).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===np?"start":e===ph?"end":"middle"),v.each(function(){this.__axis=w})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),h):i&&i.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(s=o=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(a=+d,h):a},h.offset=function(d){return arguments.length?(l=+d,h):l},h}function WY(e){return GY(Uy,e)}var YY={value:()=>{}};function vI(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Zh(n)}function Zh(e){this._=e}function BY(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Zh.prototype=vI.prototype={constructor:Zh,on:function(e,t){var n=this._,i=BY(e+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(e=i[s]).type)&&(r=UY(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=i[s]).type)n[r]=H2(n[r],e.name,t);else if(t==null)for(r in n)n[r]=H2(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zh(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function UY(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function H2(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=YY,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Vy="http://www.w3.org/1999/xhtml";const ea={svg:"http://www.w3.org/2000/svg",xhtml:Vy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cm(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ea.hasOwnProperty(t)?{space:ea[t],local:e}:e}function VY(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Vy&&t.documentElement.namespaceURI===Vy?t.createElement(e):t.createElementNS(n,e)}}function XY(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Sm(e){var t=Cm(e);return(t.local?XY:VY)(t)}function HY(){}function xw(e){return e==null?HY:function(){return this.querySelector(e)}}function jY(e){typeof e!="function"&&(e=xw(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Wn(i,this._parents)}function ZY(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function qY(){return[]}function EI(e){return e==null?qY:function(){return this.querySelectorAll(e)}}function KY(e){return function(){return ZY(e.apply(this,arguments))}}function JY(e){typeof e=="function"?e=KY(e):e=EI(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(e.call(l,l.__data__,c,o)),r.push(l));return new Wn(i,r)}function TI(e){return function(){return this.matches(e)}}function CI(e){return function(t){return t.matches(e)}}var QY=Array.prototype.find;function tB(e){return function(){return QY.call(this.children,e)}}function eB(){return this.firstElementChild}function nB(e){return this.select(e==null?eB:tB(typeof e=="function"?e:CI(e)))}var iB=Array.prototype.filter;function rB(){return Array.from(this.children)}function sB(e){return function(){return iB.call(this.children,e)}}function oB(e){return this.selectAll(e==null?rB:sB(typeof e=="function"?e:CI(e)))}function aB(e){typeof e!="function"&&(e=TI(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Wn(i,this._parents)}function SI(e){return new Array(e.length)}function lB(){return new Wn(this._enter||this._groups.map(SI),this._parents)}function Nd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Nd.prototype={constructor:Nd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cB(e){return function(){return e}}function uB(e,t,n,i,r,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],i[o]=a):n[o]=new Nd(e,s[o]);for(;o<l;++o)(a=t[o])&&(r[o]=a)}function fB(e,t,n,i,r,s,o){var a,l,c=new Map,u=t.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(l=t[a])&&(h[a]=d=o.call(l,l.__data__,a,t)+"",c.has(d)?r[a]=l:c.set(d,l));for(a=0;a<f;++a)d=o.call(e,s[a],a,s)+"",(l=c.get(d))?(i[a]=l,l.__data__=s[a],c.delete(d)):n[a]=new Nd(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(h[a])===l&&(r[a]=l)}function hB(e){return e.__data__}function dB(e,t){if(!arguments.length)return Array.from(this,hB);var n=t?fB:uB,i=this._parents,r=this._groups;typeof e!="function"&&(e=cB(e));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],f=r[c],h=f.length,d=gB(e.call(u,u&&u.__data__,c,i)),g=d.length,m=a[c]=new Array(g),_=o[c]=new Array(g),p=l[c]=new Array(h);n(u,f,m,_,p,d,t);for(var y=0,x=0,w,v;y<g;++y)if(w=m[y]){for(y>=x&&(x=y+1);!(v=_[x])&&++x<g;);w._next=v||null}}return o=new Wn(o,i),o._enter=a,o._exit=l,o}function gB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mB(){return new Wn(this._exit||this._groups.map(SI),this._parents)}function pB(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function yB(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=i[l],f=c.length,h=a[l]=new Array(f),d,g=0;g<f;++g)(d=c[g]||u[g])&&(h[g]=d);for(;l<r;++l)a[l]=n[l];return new Wn(a,this._parents)}function _B(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function wB(e){e||(e=xB);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],a=o.length,l=r[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Wn(r,this._parents).order()}function xB(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function bB(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vB(){return Array.from(this)}function EB(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function TB(){let e=0;for(const t of this)++e;return e}function CB(){return!this.node()}function SB(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,o=r.length,a;s<o;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function MB(e){return function(){this.removeAttribute(e)}}function RB(e){return function(){this.removeAttributeNS(e.space,e.local)}}function IB(e,t){return function(){this.setAttribute(e,t)}}function AB(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function LB(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function OB(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function kB(e,t){var n=Cm(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?RB:MB:typeof t=="function"?n.local?OB:LB:n.local?AB:IB)(n,t))}function MI(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function PB(e){return function(){this.style.removeProperty(e)}}function FB(e,t,n){return function(){this.style.setProperty(e,t,n)}}function NB(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function DB(e,t,n){return arguments.length>1?this.each((t==null?PB:typeof t=="function"?NB:FB)(e,t,n??"")):Ml(this.node(),e)}function Ml(e,t){return e.style.getPropertyValue(t)||MI(e).getComputedStyle(e,null).getPropertyValue(t)}function $B(e){return function(){delete this[e]}}function zB(e,t){return function(){this[e]=t}}function GB(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function WB(e,t){return arguments.length>1?this.each((t==null?$B:typeof t=="function"?GB:zB)(e,t)):this.node()[e]}function RI(e){return e.trim().split(/^|\s+/)}function bw(e){return e.classList||new II(e)}function II(e){this._node=e,this._names=RI(e.getAttribute("class")||"")}II.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function AI(e,t){for(var n=bw(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function LI(e,t){for(var n=bw(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function YB(e){return function(){AI(this,e)}}function BB(e){return function(){LI(this,e)}}function UB(e,t){return function(){(t.apply(this,arguments)?AI:LI)(this,e)}}function VB(e,t){var n=RI(e+"");if(arguments.length<2){for(var i=bw(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?UB:t?YB:BB)(n,t))}function XB(){this.textContent=""}function HB(e){return function(){this.textContent=e}}function jB(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ZB(e){return arguments.length?this.each(e==null?XB:(typeof e=="function"?jB:HB)(e)):this.node().textContent}function qB(){this.innerHTML=""}function KB(e){return function(){this.innerHTML=e}}function JB(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function QB(e){return arguments.length?this.each(e==null?qB:(typeof e=="function"?JB:KB)(e)):this.node().innerHTML}function tU(){this.nextSibling&&this.parentNode.appendChild(this)}function eU(){return this.each(tU)}function nU(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function iU(){return this.each(nU)}function rU(e){var t=typeof e=="function"?e:Sm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sU(){return null}function oU(e,t){var n=typeof e=="function"?e:Sm(e),i=t==null?sU:typeof t=="function"?t:xw(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function aU(){var e=this.parentNode;e&&e.removeChild(this)}function lU(){return this.each(aU)}function cU(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uU(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fU(e){return this.select(e?uU:cU)}function hU(e){return arguments.length?this.property("__data__",e):this.node().__data__}function dU(e){return function(t){e.call(this,t,this.__data__)}}function gU(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function mU(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function pU(e,t,n){return function(){var i=this.__on,r,s=dU(t);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function yU(e,t,n){var i=gU(e+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?pU:mU,r=0;r<s;++r)this.each(a(i[r],t,n));return this}function OI(e,t,n){var i=MI(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function _U(e,t){return function(){return OI(this,e,t)}}function wU(e,t){return function(){return OI(this,e,t.apply(this,arguments))}}function xU(e,t){return this.each((typeof t=="function"?wU:_U)(e,t))}function*bU(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var kI=[null];function Wn(e,t){this._groups=e,this._parents=t}function gf(){return new Wn([[document.documentElement]],kI)}function vU(){return this}Wn.prototype=gf.prototype={constructor:Wn,select:jY,selectAll:JY,selectChild:nB,selectChildren:oB,filter:aB,data:dB,enter:lB,exit:mB,join:pB,merge:yB,selection:vU,order:_B,sort:wB,call:bB,nodes:vB,node:EB,size:TB,empty:CB,each:SB,attr:kB,style:DB,property:WB,classed:VB,text:ZB,html:QB,raise:eU,lower:iU,append:rU,insert:oU,remove:lU,clone:fU,datum:hU,on:yU,dispatch:xU,[Symbol.iterator]:bU};function Ds(e){return typeof e=="string"?new Wn([[document.querySelector(e)]],[document.documentElement]):new Wn([[e]],kI)}function EU(e){let t;for(;t=e.sourceEvent;)e=t;return e}function TU(e,t){if(e=EU(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}function ec(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function mf(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Ks(){}var na=.7,Rl=1/na,ll="\\s*([+-]?\\d+)\\s*",Ou="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CU=/^#([0-9a-f]{3,8})$/,SU=new RegExp(`^rgb\\(${ll},${ll},${ll}\\)$`),MU=new RegExp(`^rgb\\(${tr},${tr},${tr}\\)$`),RU=new RegExp(`^rgba\\(${ll},${ll},${ll},${Ou}\\)$`),IU=new RegExp(`^rgba\\(${tr},${tr},${tr},${Ou}\\)$`),AU=new RegExp(`^hsl\\(${Ou},${tr},${tr}\\)$`),LU=new RegExp(`^hsla\\(${Ou},${tr},${tr},${Ou}\\)$`),j2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ec(Ks,ia,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Z2,formatHex:Z2,formatHex8:OU,formatHsl:kU,formatRgb:q2,toString:q2});function Z2(){return this.rgb().formatHex()}function OU(){return this.rgb().formatHex8()}function kU(){return PI(this).formatHsl()}function q2(){return this.rgb().formatRgb()}function ia(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=CU.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?K2(t):n===3?new Be(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=SU.exec(e))?new Be(t[1],t[2],t[3],1):(t=MU.exec(e))?new Be(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=RU.exec(e))?yh(t[1],t[2],t[3],t[4]):(t=IU.exec(e))?yh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=AU.exec(e))?tE(t[1],t[2]/100,t[3]/100,1):(t=LU.exec(e))?tE(t[1],t[2]/100,t[3]/100,t[4]):j2.hasOwnProperty(e)?K2(j2[e]):e==="transparent"?new Be(NaN,NaN,NaN,0):null}function K2(e){return new Be(e>>16&255,e>>8&255,e&255,1)}function yh(e,t,n,i){return i<=0&&(e=t=n=NaN),new Be(e,t,n,i)}function vw(e){return e instanceof Ks||(e=ia(e)),e?(e=e.rgb(),new Be(e.r,e.g,e.b,e.opacity)):new Be}function rr(e,t,n,i){return arguments.length===1?vw(e):new Be(e,t,n,i??1)}function Be(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}ec(Be,rr,mf(Ks,{brighter(e){return e=e==null?Rl:Math.pow(Rl,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?na:Math.pow(na,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Be(Vo(this.r),Vo(this.g),Vo(this.b),Dd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:J2,formatHex:J2,formatHex8:PU,formatRgb:Q2,toString:Q2}));function J2(){return`#${Ao(this.r)}${Ao(this.g)}${Ao(this.b)}`}function PU(){return`#${Ao(this.r)}${Ao(this.g)}${Ao(this.b)}${Ao((isNaN(this.opacity)?1:this.opacity)*255)}`}function Q2(){const e=Dd(this.opacity);return`${e===1?"rgb(":"rgba("}${Vo(this.r)}, ${Vo(this.g)}, ${Vo(this.b)}${e===1?")":`, ${e})`}`}function Dd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ao(e){return e=Vo(e),(e<16?"0":"")+e.toString(16)}function tE(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new wi(e,t,n,i)}function PI(e){if(e instanceof wi)return new wi(e.h,e.s,e.l,e.opacity);if(e instanceof Ks||(e=ia(e)),!e)return new wi;if(e instanceof wi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(t===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new wi(o,a,l,e.opacity)}function Xy(e,t,n,i){return arguments.length===1?PI(e):new wi(e,t,n,i??1)}function wi(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}ec(wi,Xy,mf(Ks,{brighter(e){return e=e==null?Rl:Math.pow(Rl,e),new wi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?na:Math.pow(na,e),new wi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Be(ip(e>=240?e-240:e+120,r,i),ip(e,r,i),ip(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new wi(eE(this.h),_h(this.s),_h(this.l),Dd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Dd(this.opacity);return`${e===1?"hsl(":"hsla("}${eE(this.h)}, ${_h(this.s)*100}%, ${_h(this.l)*100}%${e===1?")":`, ${e})`}`}}));function eE(e){return e=(e||0)%360,e<0?e+360:e}function _h(e){return Math.max(0,Math.min(1,e||0))}function ip(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const FI=Math.PI/180,NI=180/Math.PI,$d=18,DI=.96422,$I=1,zI=.82521,GI=4/29,cl=6/29,WI=3*cl*cl,FU=cl*cl*cl;function YI(e){if(e instanceof er)return new er(e.l,e.a,e.b,e.opacity);if(e instanceof Lr)return BI(e);e instanceof Be||(e=vw(e));var t=ap(e.r),n=ap(e.g),i=ap(e.b),r=rp((.2225045*t+.7168786*n+.0606169*i)/$I),s,o;return t===n&&n===i?s=o=r:(s=rp((.4360747*t+.3850649*n+.1430804*i)/DI),o=rp((.0139322*t+.0971045*n+.7141733*i)/zI)),new er(116*r-16,500*(s-r),200*(r-o),e.opacity)}function Hy(e,t,n,i){return arguments.length===1?YI(e):new er(e,t,n,i??1)}function er(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}ec(er,Hy,mf(Ks,{brighter(e){return new er(this.l+$d*(e??1),this.a,this.b,this.opacity)},darker(e){return new er(this.l-$d*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=DI*sp(t),e=$I*sp(e),n=zI*sp(n),new Be(op(3.1338561*t-1.6168667*e-.4906146*n),op(-.9787684*t+1.9161415*e+.033454*n),op(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function rp(e){return e>FU?Math.pow(e,1/3):e/WI+GI}function sp(e){return e>cl?e*e*e:WI*(e-GI)}function op(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ap(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function NU(e){if(e instanceof Lr)return new Lr(e.h,e.c,e.l,e.opacity);if(e instanceof er||(e=YI(e)),e.a===0&&e.b===0)return new Lr(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*NI;return new Lr(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function jy(e,t,n,i){return arguments.length===1?NU(e):new Lr(e,t,n,i??1)}function Lr(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function BI(e){if(isNaN(e.h))return new er(e.l,0,0,e.opacity);var t=e.h*FI;return new er(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}ec(Lr,jy,mf(Ks,{brighter(e){return new Lr(this.h,this.c,this.l+$d*(e??1),this.opacity)},darker(e){return new Lr(this.h,this.c,this.l-$d*(e??1),this.opacity)},rgb(){return BI(this).rgb()}}));var UI=-.14861,Ew=1.78277,Tw=-.29227,Mm=-.90649,ku=1.97294,nE=ku*Mm,iE=ku*Ew,rE=Ew*Tw-Mm*UI;function DU(e){if(e instanceof Xo)return new Xo(e.h,e.s,e.l,e.opacity);e instanceof Be||(e=vw(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(rE*i+nE*t-iE*n)/(rE+nE-iE),s=i-r,o=(ku*(n-r)-Tw*s)/Mm,a=Math.sqrt(o*o+s*s)/(ku*r*(1-r)),l=a?Math.atan2(o,s)*NI-120:NaN;return new Xo(l<0?l+360:l,a,r,e.opacity)}function sr(e,t,n,i){return arguments.length===1?DU(e):new Xo(e,t,n,i??1)}function Xo(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}ec(Xo,sr,mf(Ks,{brighter(e){return e=e==null?Rl:Math.pow(Rl,e),new Xo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?na:Math.pow(na,e),new Xo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*FI,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Be(255*(t+n*(UI*i+Ew*r)),255*(t+n*(Tw*i+Mm*r)),255*(t+n*(ku*i)),this.opacity)}}));function $U(e,t,n,i,r){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*i+o*r)/6}function zU(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],o=i>0?e[i-1]:2*r-s,a=i<t-1?e[i+2]:2*s-r;return $U((n-i/t)*t,o,r,s,a)}}const Rm=e=>()=>e;function VI(e,t){return function(n){return e+n*t}}function GU(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Cw(e,t){var n=t-e;return n?VI(e,n>180||n<-180?n-360*Math.round(n/360):n):Rm(isNaN(e)?t:e)}function WU(e){return(e=+e)==1?rn:function(t,n){return n-t?GU(t,n,e):Rm(isNaN(t)?n:t)}}function rn(e,t){var n=t-e;return n?VI(e,n):Rm(isNaN(e)?t:e)}const ra=function e(t){var n=WU(t);function i(r,s){var o=n((r=rr(r)).r,(s=rr(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),c=rn(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function YU(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=rr(t[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=e(i),r=e(r),s=e(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var BU=YU(zU);function UU(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function VU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function XU(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=pf(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function HU(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Je(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function jU(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=pf(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Zy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lp=new RegExp(Zy.source,"g");function ZU(e){return function(){return e}}function qU(e){return function(t){return e(t)+""}}function XI(e,t){var n=Zy.lastIndex=lp.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(i=Zy.exec(e))&&(r=lp.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Je(i,r)})),n=lp.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?qU(l[0].x):ZU(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function pf(e,t){var n=typeof t,i;return t==null||n==="boolean"?Rm(t):(n==="number"?Je:n==="string"?(i=ia(t))?(t=i,ra):XI:t instanceof ia?ra:t instanceof Date?HU:VU(t)?UU:Array.isArray(t)?XU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?jU:Je)(e,t)}function Sw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var sE=180/Math.PI,qy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function HI(e,t,n,i,r,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*sE,skewX:Math.atan(l)*sE,scaleX:o,scaleY:a}}var wh;function KU(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qy:HI(t.a,t.b,t.c,t.d,t.e,t.f)}function JU(e){return e==null||(wh||(wh=document.createElementNS("http://www.w3.org/2000/svg","g")),wh.setAttribute("transform",e),!(e=wh.transform.baseVal.consolidate()))?qy:(e=e.matrix,HI(e.a,e.b,e.c,e.d,e.e,e.f))}function jI(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,g){if(c!==f||u!==h){var m=d.push("translate(",null,t,null,n);g.push({i:m-4,x:Je(c,f)},{i:m-2,x:Je(u,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:Je(c,u)})):u&&f.push(r(f)+"rotate("+u+i)}function a(c,u,f,h){c!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:Je(c,u)}):u&&f.push(r(f)+"skewX("+u+i)}function l(c,u,f,h,d,g){if(c!==f||u!==h){var m=d.push(r(d)+"scale(",null,",",null,")");g.push({i:m-4,x:Je(c,f)},{i:m-2,x:Je(u,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var g=-1,m=h.length,_;++g<m;)f[(_=h[g]).i]=_.x(d);return f.join("")}}}var QU=jI(KU,"px, ","px)","deg)"),tV=jI(JU,", ",")",")");function eV(e){return function(t,n){var i=e((t=Xy(t)).h,(n=Xy(n)).h),r=rn(t.s,n.s),s=rn(t.l,n.l),o=rn(t.opacity,n.opacity);return function(a){return t.h=i(a),t.s=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const nV=eV(Cw);function iV(e,t){var n=rn((e=Hy(e)).l,(t=Hy(t)).l),i=rn(e.a,t.a),r=rn(e.b,t.b),s=rn(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=r(o),e.opacity=s(o),e+""}}function rV(e){return function(t,n){var i=e((t=jy(t)).h,(n=jy(n)).h),r=rn(t.c,n.c),s=rn(t.l,n.l),o=rn(t.opacity,n.opacity);return function(a){return t.h=i(a),t.c=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const sV=rV(Cw);function ZI(e){return function t(n){n=+n;function i(r,s){var o=e((r=sr(r)).h,(s=sr(s)).h),a=rn(r.s,s.s),l=rn(r.l,s.l),c=rn(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,n)),r.opacity=c(u),r+""}}return i.gamma=t,i}(1)}ZI(Cw);var Mw=ZI(rn);function Im(e,t){t===void 0&&(t=e,e=pf);for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[a](o-a)}}function Ai(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}var Il=0,Wc=0,Cc=0,qI=1e3,zd,Yc,Gd=0,sa=0,Am=0,Pu=typeof performance=="object"&&performance.now?performance:Date,KI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rw(){return sa||(KI(oV),sa=Pu.now()+Am)}function oV(){sa=0}function Wd(){this._call=this._time=this._next=null}Wd.prototype=JI.prototype={constructor:Wd,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Rw():+n)+(t==null?0:+t),!this._next&&Yc!==this&&(Yc?Yc._next=this:zd=this,Yc=this),this._call=e,this._time=n,Ky()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ky())}};function JI(e,t,n){var i=new Wd;return i.restart(e,t,n),i}function aV(){Rw(),++Il;for(var e=zd,t;e;)(t=sa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Il}function oE(){sa=(Gd=Pu.now())+Am,Il=Wc=0;try{aV()}finally{Il=0,cV(),sa=0}}function lV(){var e=Pu.now(),t=e-Gd;t>qI&&(Am-=t,Gd=e)}function cV(){for(var e,t=zd,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:zd=n);Yc=e,Ky(i)}function Ky(e){if(!Il){Wc&&(Wc=clearTimeout(Wc));var t=e-sa;t>24?(e<1/0&&(Wc=setTimeout(oE,e-Pu.now()-Am)),Cc&&(Cc=clearInterval(Cc))):(Cc||(Gd=Pu.now(),Cc=setInterval(lV,qI)),Il=1,KI(oE))}}function aE(e,t,n){var i=new Wd;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var uV=vI("start","end","cancel","interrupt"),fV=[],QI=0,lE=1,Jy=2,qh=3,cE=4,Qy=5,Kh=6;function Lm(e,t,n,i,r,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;hV(e,n,{name:t,index:i,group:r,on:uV,tween:fV,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:QI})}function Iw(e,t){var n=Ni(e,t);if(n.state>QI)throw new Error("too late; already scheduled");return n}function or(e,t){var n=Ni(e,t);if(n.state>qh)throw new Error("too late; already running");return n}function Ni(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function hV(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=JI(s,0,n.time);function s(c){n.state=lE,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,h,d;if(n.state!==lE)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===qh)return aE(o);d.state===cE?(d.state=Kh,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=Kh,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if(aE(function(){n.state===qh&&(n.state=cE,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Jy,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Jy){for(n.state=qh,r=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=d);r.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Qy,1),f=-1,h=r.length;++f<h;)r[f].call(e,u);n.state===Qy&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Kh,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function dV(e,t){var n=e.__transition,i,r,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){s=!1;continue}r=i.state>Jy&&i.state<Qy,i.state=Kh,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}s&&delete e.__transition}}function gV(e){return this.each(function(){dV(this,e)})}function mV(e,t){var n,i;return function(){var r=or(this,e),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function pV(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=or(this,e),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function yV(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Ni(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?mV:pV)(n,e,t))}function Aw(e,t,n){var i=e._id;return e.each(function(){var r=or(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ni(r,i).value[t]}}function tA(e,t){var n;return(typeof t=="number"?Je:t instanceof ia?ra:(n=ia(t))?(t=n,ra):XI)(e,t)}function _V(e){return function(){this.removeAttribute(e)}}function wV(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xV(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttribute(e);return o===r?null:o===i?s:s=t(i=o,n)}}function bV(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?s:s=t(i=o,n)}}function vV(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function EV(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function TV(e,t){var n=Cm(e),i=n==="transform"?tV:tA;return this.attrTween(e,typeof t=="function"?(n.local?EV:vV)(n,i,Aw(this,"attr."+e,t)):t==null?(n.local?wV:_V)(n):(n.local?bV:xV)(n,i,t))}function CV(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function SV(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function MV(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&SV(e,s)),n}return r._value=t,r}function RV(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&CV(e,s)),n}return r._value=t,r}function IV(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Cm(e);return this.tween(n,(i.local?MV:RV)(i,t))}function AV(e,t){return function(){Iw(this,e).delay=+t.apply(this,arguments)}}function LV(e,t){return t=+t,function(){Iw(this,e).delay=t}}function OV(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?AV:LV)(t,e)):Ni(this.node(),t).delay}function kV(e,t){return function(){or(this,e).duration=+t.apply(this,arguments)}}function PV(e,t){return t=+t,function(){or(this,e).duration=t}}function FV(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kV:PV)(t,e)):Ni(this.node(),t).duration}function NV(e,t){if(typeof t!="function")throw new Error;return function(){or(this,e).ease=t}}function DV(e){var t=this._id;return arguments.length?this.each(NV(t,e)):Ni(this.node(),t).ease}function $V(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;or(this,e).ease=n}}function zV(e){if(typeof e!="function")throw new Error;return this.each($V(this._id,e))}function GV(e){typeof e!="function"&&(e=TI(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Vr(i,this._parents,this._name,this._id)}function WV(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=t[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<i;++a)o[a]=t[a];return new Vr(o,this._parents,this._name,this._id)}function YV(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function BV(e,t,n){var i,r,s=YV(t)?Iw:or;return function(){var o=s(this,e),a=o.on;a!==i&&(r=(i=a).copy()).on(t,n),o.on=r}}function UV(e,t){var n=this._id;return arguments.length<2?Ni(this.node(),n).on.on(e):this.each(BV(n,e,t))}function VV(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function XV(){return this.on("end.remove",VV(this._id))}function HV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xw(e));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,Lm(c[h],t,n,h,c,Ni(u,n)));return new Vr(s,this._parents,t,n)}function jV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=EI(e));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),d,g=Ni(u,n),m=0,_=h.length;m<_;++m)(d=h[m])&&Lm(d,t,n,m,h,g);s.push(h),o.push(u)}return new Vr(s,o,t,n)}var ZV=gf.prototype.constructor;function qV(){return new ZV(this._groups,this._parents)}function KV(e,t){var n,i,r;return function(){var s=Ml(this,e),o=(this.style.removeProperty(e),Ml(this,e));return s===o?null:s===n&&o===i?r:r=t(n=s,i=o)}}function eA(e){return function(){this.style.removeProperty(e)}}function JV(e,t,n){var i,r=n+"",s;return function(){var o=Ml(this,e);return o===r?null:o===i?s:s=t(i=o,n)}}function QV(e,t,n){var i,r,s;return function(){var o=Ml(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ml(this,e))),o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a))}}function tX(e,t){var n,i,r,s="style."+t,o="end."+s,a;return function(){var l=or(this,e),c=l.on,u=l.value[s]==null?a||(a=eA(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(o,r=u),l.on=i}}function eX(e,t,n){var i=(e+="")=="transform"?QU:tA;return t==null?this.styleTween(e,KV(e,i)).on("end.style."+e,eA(e)):typeof t=="function"?this.styleTween(e,QV(e,i,Aw(this,"style."+e,t))).each(tX(this._id,e)):this.styleTween(e,JV(e,i,t),n).on("end.style."+e,null)}function nX(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function iX(e,t,n){var i,r;function s(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&nX(e,o,n)),i}return s._value=t,s}function rX(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,iX(e,t,n??""))}function sX(e){return function(){this.textContent=e}}function oX(e){return function(){var t=e(this);this.textContent=t??""}}function aX(e){return this.tween("text",typeof e=="function"?oX(Aw(this,"text",e)):sX(e==null?"":e+""))}function lX(e){return function(t){this.textContent=e.call(this,t)}}function cX(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&lX(r)),t}return i._value=e,i}function uX(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,cX(e))}function fX(){for(var e=this._name,t=this._id,n=nA(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Ni(l,t);Lm(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Vr(i,this._parents,e,n)}function hX(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};n.each(function(){var c=or(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&s()})}var dX=0;function Vr(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function nA(){return++dX}var mr=gf.prototype;Vr.prototype={constructor:Vr,select:HV,selectAll:jV,selectChild:mr.selectChild,selectChildren:mr.selectChildren,filter:GV,merge:WV,selection:qV,transition:fX,call:mr.call,nodes:mr.nodes,node:mr.node,size:mr.size,empty:mr.empty,each:mr.each,on:UV,attr:TV,attrTween:IV,style:eX,styleTween:rX,text:aX,textTween:uX,remove:XV,tween:yV,delay:OV,duration:FV,ease:DV,easeVarying:zV,end:hX,[Symbol.iterator]:mr[Symbol.iterator]};function gX(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var mX={time:null,delay:0,duration:250,ease:gX};function pX(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function yX(e){var t,n;e instanceof Vr?(t=e._id,e=e._name):(t=nA(),(n=mX).time=Rw(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Lm(l,e,t,c,o,n||pX(l,t));return new Vr(i,this._parents,e,t)}gf.prototype.interrupt=gV;gf.prototype.transition=yX;const t_=Math.PI,e_=2*t_,yo=1e-6,_X=e_-yo;function iA(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function wX(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return iA;const n=10**t;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let rA=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?iA:wX(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,s,o){this._append`C${+t},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,i,r,s){if(t=+t,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-t,c=r-n,u=o-t,f=a-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>yo)if(!(Math.abs(f*l-c*u)>yo)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let d=i-o,g=r-a,m=l*l+c*c,_=d*d+g*g,p=Math.sqrt(m),y=Math.sqrt(h),x=s*Math.tan((t_-Math.acos((m+h-_)/(2*p*y)))/2),w=x/y,v=x/p;Math.abs(w-1)>yo&&this._append`L${t+w*u},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*d>u*g)},${this._x1=t+v*l},${this._y1=n+v*c}`}}arc(t,n,i,r,s,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=t+a,u=n+l,f=1^o,h=o?r-s:s-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>yo||Math.abs(this._y1-u)>yo)&&this._append`L${c},${u}`,i&&(h<0&&(h=h%e_+e_),h>_X?this._append`A${i},${i},0,1,${f},${t-a},${n-l}A${i},${i},0,1,${f},${this._x1=c},${this._y1=u}`:h>yo&&this._append`A${i},${i},0,${+(h>=t_)},${f},${this._x1=t+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Or(e=3){return new rA(+e)}var xX=Array.prototype,sA=xX.slice;function bX(e,t){return e-t}function vX(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}const Ts=e=>()=>e;function EX(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=TX(e,t[n]))return r;return 0}function TX(e,t){for(var n=t[0],i=t[1],r=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],c=l[0],u=l[1],f=e[a],h=f[0],d=f[1];if(CX(l,f,t))return 0;u>i!=d>i&&n<(h-c)*(i-u)/(d-u)+c&&(r=-r)}return r}function CX(e,t,n){var i;return SX(e,t,n)&&MX(e[i=+(e[0]===t[0])],n[i],t[i])}function SX(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function MX(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function RX(){}var pr=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function n_(){var e=1,t=1,n=_w,i=l;function r(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(bX);else{const f=Ye(c,IX);for(u=Bs(...pI(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(c,f))}function s(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var h=[],d=[];return o(c,f,function(g){i(g,c,f),vX(g)>0?h.push([g]):d.push(g)}),d.forEach(function(g){for(var m=0,_=h.length,p;m<_;++m)if(EX((p=h[m])[0],g)!==-1){p.push(g);return}}),{type:"MultiPolygon",value:u,coordinates:h}}function o(c,u,f){var h=new Array,d=new Array,g,m,_,p,y,x;for(g=m=-1,p=ho(c[0],u),pr[p<<1].forEach(w);++g<e-1;)_=p,p=ho(c[g+1],u),pr[_|p<<1].forEach(w);for(pr[p<<0].forEach(w);++m<t-1;){for(g=-1,p=ho(c[m*e+e],u),y=ho(c[m*e],u),pr[p<<1|y<<2].forEach(w);++g<e-1;)_=p,p=ho(c[m*e+e+g+1],u),x=y,y=ho(c[m*e+g+1],u),pr[_|p<<1|y<<2|x<<3].forEach(w);pr[p|y<<3].forEach(w)}for(g=-1,y=c[m*e]>=u,pr[y<<2].forEach(w);++g<e-1;)x=y,y=ho(c[m*e+g+1],u),pr[y<<2|x<<3].forEach(w);pr[y<<3].forEach(w);function w(v){var b=[v[0][0]+g,v[0][1]+m],E=[v[1][0]+g,v[1][1]+m],C=a(b),I=a(E),S,R;(S=d[C])?(R=h[I])?(delete d[S.end],delete h[R.start],S===R?(S.ring.push(E),f(S.ring)):h[S.start]=d[R.end]={start:S.start,end:R.end,ring:S.ring.concat(R.ring)}):(delete d[S.end],S.ring.push(E),d[S.end=I]=S):(S=h[I])?(R=d[C])?(delete h[S.start],delete d[R.end],S===R?(S.ring.push(E),f(S.ring)):h[R.start]=d[S.end]={start:R.start,end:S.end,ring:R.ring.concat(S.ring)}):(delete h[S.start],S.ring.unshift(b),h[S.start=C]=S):h[C]=d[I]={start:C,end:I,ring:[b,E]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function l(c,u,f){c.forEach(function(h){var d=h[0],g=h[1],m=d|0,_=g|0,p=cp(u[_*e+m]);d>0&&d<e&&m===d&&(h[0]=uE(d,cp(u[_*e+m-1]),p,f)),g>0&&g<t&&_===g&&(h[1]=uE(g,cp(u[(_-1)*e+m]),p,f))})}return r.contour=s,r.size=function(c){if(!arguments.length)return[e,t];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,r},r.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?Ts(sA.call(c)):Ts(c),r):n},r.smooth=function(c){return arguments.length?(i=c?l:RX,r):i===l},r}function IX(e){return isFinite(e)?e:NaN}function ho(e,t){return e==null?!1:+e>=t}function cp(e){return e==null||isNaN(e=+e)?-1/0:e}function uE(e,t,n,i){const r=i-t,s=n-t,o=isFinite(r)||isFinite(s)?r/s:Math.sign(r)/Math.sign(s);return isNaN(o)?e:e+o-.5}function AX(e){return e[0]}function LX(e){return e[1]}function OX(){return 1}function kX(){var e=AX,t=LX,n=OX,i=960,r=500,s=20,o=2,a=s*3,l=i+a*2>>o,c=r+a*2>>o,u=Ts(20);function f(y){var x=new Float32Array(l*c),w=Math.pow(2,-o),v=-1;for(const k of y){var b=(e(k,++v,y)+a)*w,E=(t(k,v,y)+a)*w,C=+n(k,v,y);if(C&&b>=0&&b<l&&E>=0&&E<c){var I=Math.floor(b),S=Math.floor(E),R=b-I-.5,M=E-S-.5;x[I+S*l]+=(1-R)*(1-M)*C,x[I+1+S*l]+=R*(1-M)*C,x[I+1+(S+1)*l]+=R*M*C,x[I+(S+1)*l]+=(1-R)*M*C}}return uI({data:x,width:l,height:c},s*w),x}function h(y){var x=f(y),w=u(x),v=Math.pow(2,2*o);return Array.isArray(w)||(w=Bs(Number.MIN_VALUE,Ue(x)/v,w)),n_().size([l,c]).thresholds(w.map(b=>b*v))(x).map((b,E)=>(b.value=+w[E],d(b)))}h.contours=function(y){var x=f(y),w=n_().size([l,c]),v=Math.pow(2,2*o),b=E=>{E=+E;var C=d(w.contour(x,E*v));return C.value=E,C};return Object.defineProperty(b,"max",{get:()=>Ue(x)/v}),b};function d(y){return y.coordinates.forEach(g),y}function g(y){y.forEach(m)}function m(y){y.forEach(_)}function _(y){y[0]=y[0]*Math.pow(2,o)-a,y[1]=y[1]*Math.pow(2,o)-a}function p(){return a=s*3,l=i+a*2>>o,c=r+a*2>>o,h}return h.x=function(y){return arguments.length?(e=typeof y=="function"?y:Ts(+y),h):e},h.y=function(y){return arguments.length?(t=typeof y=="function"?y:Ts(+y),h):t},h.weight=function(y){return arguments.length?(n=typeof y=="function"?y:Ts(+y),h):n},h.size=function(y){if(!arguments.length)return[i,r];var x=+y[0],w=+y[1];if(!(x>=0&&w>=0))throw new Error("invalid size");return i=x,r=w,p()},h.cellSize=function(y){if(!arguments.length)return 1<<o;if(!((y=+y)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(y)/Math.LN2),p()},h.thresholds=function(y){return arguments.length?(u=typeof y=="function"?y:Array.isArray(y)?Ts(sA.call(y)):Ts(y),h):u},h.bandwidth=function(y){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((y=+y)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*y*y+1)-1)/2,p()},h}const zr=11102230246251565e-32,Ze=134217729,PX=(3+8*zr)*zr;function up(e,t,n,i,r){let s,o,a,l,c=t[0],u=i[0],f=0,h=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=i[++h]);let d=0;if(f<e&&h<n)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=t[++f]):(o=u+s,a=s-(o-u),u=i[++h]),s=o,a!==0&&(r[d++]=a);f<e&&h<n;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++h]),s=o,a!==0&&(r[d++]=a);for(;f<e;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f],s=o,a!==0&&(r[d++]=a);for(;h<n;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++h],s=o,a!==0&&(r[d++]=a);return(s!==0||d===0)&&(r[d++]=s),d}function FX(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function yf(e){return new Float64Array(e)}const NX=(3+16*zr)*zr,DX=(2+12*zr)*zr,$X=(9+64*zr)*zr*zr,Oa=yf(4),fE=yf(8),hE=yf(12),dE=yf(16),an=yf(4);function zX(e,t,n,i,r,s,o){let a,l,c,u,f,h,d,g,m,_,p,y,x,w,v,b,E,C;const I=e-r,S=n-r,R=t-s,M=i-s;w=I*M,h=Ze*I,d=h-(h-I),g=I-d,h=Ze*M,m=h-(h-M),_=M-m,v=g*_-(w-d*m-g*m-d*_),b=R*S,h=Ze*R,d=h-(h-R),g=R-d,h=Ze*S,m=h-(h-S),_=S-m,E=g*_-(b-d*m-g*m-d*_),p=v-E,f=v-p,Oa[0]=v-(p+f)+(f-E),y=w+p,f=y-w,x=w-(y-f)+(p-f),p=x-b,f=x-p,Oa[1]=x-(p+f)+(f-b),C=y+p,f=C-y,Oa[2]=y-(C-f)+(p-f),Oa[3]=C;let k=FX(4,Oa),O=DX*o;if(k>=O||-k>=O||(f=e-I,a=e-(I+f)+(f-r),f=n-S,c=n-(S+f)+(f-r),f=t-R,l=t-(R+f)+(f-s),f=i-M,u=i-(M+f)+(f-s),a===0&&l===0&&c===0&&u===0)||(O=$X*o+PX*Math.abs(k),k+=I*u+M*a-(R*c+S*l),k>=O||-k>=O))return k;w=a*M,h=Ze*a,d=h-(h-a),g=a-d,h=Ze*M,m=h-(h-M),_=M-m,v=g*_-(w-d*m-g*m-d*_),b=l*S,h=Ze*l,d=h-(h-l),g=l-d,h=Ze*S,m=h-(h-S),_=S-m,E=g*_-(b-d*m-g*m-d*_),p=v-E,f=v-p,an[0]=v-(p+f)+(f-E),y=w+p,f=y-w,x=w-(y-f)+(p-f),p=x-b,f=x-p,an[1]=x-(p+f)+(f-b),C=y+p,f=C-y,an[2]=y-(C-f)+(p-f),an[3]=C;const A=up(4,Oa,4,an,fE);w=I*u,h=Ze*I,d=h-(h-I),g=I-d,h=Ze*u,m=h-(h-u),_=u-m,v=g*_-(w-d*m-g*m-d*_),b=R*c,h=Ze*R,d=h-(h-R),g=R-d,h=Ze*c,m=h-(h-c),_=c-m,E=g*_-(b-d*m-g*m-d*_),p=v-E,f=v-p,an[0]=v-(p+f)+(f-E),y=w+p,f=y-w,x=w-(y-f)+(p-f),p=x-b,f=x-p,an[1]=x-(p+f)+(f-b),C=y+p,f=C-y,an[2]=y-(C-f)+(p-f),an[3]=C;const P=up(A,fE,4,an,hE);w=a*u,h=Ze*a,d=h-(h-a),g=a-d,h=Ze*u,m=h-(h-u),_=u-m,v=g*_-(w-d*m-g*m-d*_),b=l*c,h=Ze*l,d=h-(h-l),g=l-d,h=Ze*c,m=h-(h-c),_=c-m,E=g*_-(b-d*m-g*m-d*_),p=v-E,f=v-p,an[0]=v-(p+f)+(f-E),y=w+p,f=y-w,x=w-(y-f)+(p-f),p=x-b,f=x-p,an[1]=x-(p+f)+(f-b),C=y+p,f=C-y,an[2]=y-(C-f)+(p-f),an[3]=C;const N=up(P,hE,4,an,dE);return dE[N-1]}function xh(e,t,n,i,r,s){const o=(t-s)*(n-r),a=(e-r)*(i-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=NX*c?l:-zX(e,t,n,i,r,s,c)}const gE=Math.pow(2,-52),bh=new Uint32Array(512);class Yd{static from(t,n=UX,i=VX){const r=t.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=i(a)}return new Yd(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let S=0;S<o;S++){const R=t[2*S],M=t[2*S+1];R<a&&(a=R),M<l&&(l=M),R>c&&(c=R),M>u&&(u=M),this._ids[S]=S}const f=(a+c)/2,h=(l+u)/2;let d=1/0,g,m,_;for(let S=0;S<o;S++){const R=fp(f,h,t[2*S],t[2*S+1]);R<d&&(g=S,d=R)}const p=t[2*g],y=t[2*g+1];d=1/0;for(let S=0;S<o;S++){if(S===g)continue;const R=fp(p,y,t[2*S],t[2*S+1]);R<d&&R>0&&(m=S,d=R)}let x=t[2*m],w=t[2*m+1],v=1/0;for(let S=0;S<o;S++){if(S===g||S===m)continue;const R=YX(p,y,x,w,t[2*S],t[2*S+1]);R<v&&(_=S,v=R)}let b=t[2*_],E=t[2*_+1];if(v===1/0){for(let M=0;M<o;M++)this._dists[M]=t[2*M]-t[0]||t[2*M+1]-t[1];Xa(this._ids,this._dists,0,o-1);const S=new Uint32Array(o);let R=0;for(let M=0,k=-1/0;M<o;M++){const O=this._ids[M];this._dists[O]>k&&(S[R++]=O,k=this._dists[O])}this.hull=S.subarray(0,R),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(xh(p,y,x,w,b,E)<0){const S=m,R=x,M=w;m=_,x=b,w=E,_=S,b=R,E=M}const C=BX(p,y,x,w,b,E);this._cx=C.x,this._cy=C.y;for(let S=0;S<o;S++)this._dists[S]=fp(t[2*S],t[2*S+1],C.x,C.y);Xa(this._ids,this._dists,0,o-1),this._hullStart=g;let I=3;i[g]=n[_]=m,i[m]=n[g]=_,i[_]=n[m]=g,r[g]=0,r[m]=1,r[_]=2,s.fill(-1),s[this._hashKey(p,y)]=g,s[this._hashKey(x,w)]=m,s[this._hashKey(b,E)]=_,this.trianglesLen=0,this._addTriangle(g,m,_,-1,-1,-1);for(let S=0,R,M;S<this._ids.length;S++){const k=this._ids[S],O=t[2*k],A=t[2*k+1];if(S>0&&Math.abs(O-R)<=gE&&Math.abs(A-M)<=gE||(R=O,M=A,k===g||k===m||k===_))continue;let P=0;for(let Z=0,z=this._hashKey(O,A);Z<this._hashSize&&(P=s[(z+Z)%this._hashSize],!(P!==-1&&P!==i[P]));Z++);P=n[P];let N=P,G;for(;G=i[N],xh(O,A,t[2*N],t[2*N+1],t[2*G],t[2*G+1])>=0;)if(N=G,N===P){N=-1;break}if(N===-1)continue;let j=this._addTriangle(N,k,i[N],-1,-1,r[N]);r[k]=this._legalize(j+2),r[N]=j,I++;let U=i[N];for(;G=i[U],xh(O,A,t[2*U],t[2*U+1],t[2*G],t[2*G+1])<0;)j=this._addTriangle(U,k,G,r[k],-1,r[U]),r[k]=this._legalize(j+2),i[U]=U,I--,U=G;if(N===P)for(;G=n[N],xh(O,A,t[2*G],t[2*G+1],t[2*N],t[2*N+1])<0;)j=this._addTriangle(G,k,N,-1,r[N],r[G]),this._legalize(j+2),r[G]=j,i[N]=N,I--,N=G;this._hullStart=n[k]=N,i[N]=n[U]=k,i[k]=U,s[this._hashKey(O,A)]=k,s[this._hashKey(t[2*N],t[2*N+1])]=N}this.hull=new Uint32Array(I);for(let S=0,R=this._hullStart;S<I;S++)this.hull[S]=R,R=i[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(GX(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let s=0,o=0;for(;;){const a=i[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=bh[--s];continue}const c=a-a%3,u=l+(t+1)%3,f=c+(a+2)%3,h=n[o],d=n[t],g=n[u],m=n[f];if(WX(r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*g],r[2*g+1],r[2*m],r[2*m+1])){n[t]=m,n[a]=h;const p=i[f];if(p===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,p),this._link(a,i[o]),this._link(o,f);const y=c+(a+1)%3;s<bh.length&&(bh[s++]=y)}else{if(s===0)break;t=bh[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function GX(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function fp(e,t,n,i){const r=e-n,s=t-i;return r*r+s*s}function WX(e,t,n,i,r,s,o,a){const l=e-o,c=t-a,u=n-o,f=i-a,h=r-o,d=s-a,g=l*l+c*c,m=u*u+f*f,_=h*h+d*d;return l*(f*_-m*d)-c*(u*_-m*h)+g*(u*d-f*h)<0}function YX(e,t,n,i,r,s){const o=n-e,a=i-t,l=r-e,c=s-t,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),d=(c*u-a*f)*h,g=(o*f-l*u)*h;return d*d+g*g}function BX(e,t,n,i,r,s){const o=n-e,a=i-t,l=r-e,c=s-t,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),d=e+(c*u-a*f)*h,g=t+(o*f-l*u)*h;return{x:d,y:g}}function Xa(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const s=e[r],o=t[s];let a=r-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const r=n+i>>1;let s=n+1,o=i;Sc(e,r,s),t[e[n]]>t[e[i]]&&Sc(e,n,i),t[e[s]]>t[e[i]]&&Sc(e,s,i),t[e[n]]>t[e[s]]&&Sc(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;Sc(e,s,o)}e[n+1]=e[o],e[o]=a,i-s+1>=o-n?(Xa(e,t,s,i),Xa(e,t,n,o-1)):(Xa(e,t,n,o-1),Xa(e,t,s,i))}}function Sc(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function UX(e){return e[0]}function VX(e){return e[1]}const mE=1e-6;class Lo{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,s=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>mE||Math.abs(this._y1-s)>mE)&&(this._+="L"+r+","+s),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class i_{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let XX=class{constructor(t,[n,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let m=0,_=0,p=i.length,y,x;m<p;m+=3,_+=2){const w=i[m]*2,v=i[m+1]*2,b=i[m+2]*2,E=t[w],C=t[w+1],I=t[v],S=t[v+1],R=t[b],M=t[b+1],k=I-E,O=S-C,A=R-E,P=M-C,N=(k*P-O*A)*2;if(Math.abs(N)<1e-9){if(s===void 0){s=o=0;for(const j of n)s+=t[j*2],o+=t[j*2+1];s/=n.length,o/=n.length}const G=1e9*Math.sign((s-E)*P-(o-C)*A);y=(E+R)/2-G*P,x=(C+M)/2+G*A}else{const G=1/N,j=k*k+O*O,U=A*A+P*P;y=E+(P*j-O*U)*G,x=C+(k*U-A*j)*G}a[_]=y,a[_+1]=x}let l=n[n.length-1],c,u=l*4,f,h=t[2*l],d,g=t[2*l+1];r.fill(0);for(let m=0;m<n.length;++m)l=n[m],c=u,f=h,d=g,u=l*4,h=t[2*l],g=t[2*l+1],r[c+2]=r[u]=d-g,r[c+3]=r[u+1]=h-f}render(t){const n=t==null?t=new Lo:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=i.length;u<f;++u){const h=i[u];if(h<u)continue;const d=Math.floor(u/3)*2,g=Math.floor(h/3)*2,m=o[d],_=o[d+1],p=o[g],y=o[g+1];this._renderSegment(m,_,p,y,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(r[c]/3)*2,h=o[f],d=o[f+1],g=l*4,m=this._project(h,d,a[g+2],a[g+3]);m&&this._renderSegment(h,d,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Lo:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Lo:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new i_;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,s){let o;const a=this._regioncode(t,n),l=this._regioncode(i,r);a===0&&l===0?(s.moveTo(t,n),s.lineTo(i,r)):(o=this._clipSegment(t,n,i,r,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[s]===r[a]&&n[s+1]===r[a+1]&&n[(s+2)%o]===r[(a+l-2)%l]&&n[(s+3)%o]===r[(a+l-1)%l]){yield i;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,o=i[t];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=r[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,s,o,a=n[i-2],l=n[i-1],c,u=this._regioncode(a,l),f,h=0;for(let d=0;d<i;d+=2)if(s=a,o=l,a=n[d],l=n[d+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=h,h=0,r?r.push(a,l):r=[a,l];else{let g,m,_,p,y;if(c===0){if((g=this._clipSegment(s,o,a,l,c,u))===null)continue;[m,_,p,y]=g}else{if((g=this._clipSegment(a,l,s,o,u,c))===null)continue;[p,y,m,_]=g,f=h,h=this._edgecode(m,_),f&&h&&this._edge(t,f,h,r,r.length),r?r.push(m,_):r=[m,_]}f=h,h=this._edgecode(p,y),f&&h&&this._edge(t,f,h,r,r.length),r?r.push(p,y):r=[p,y]}if(r)f=h,h=this._edgecode(r[0],r[1]),f&&h&&this._edge(t,f,h,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,s,o){const a=s<o;for(a&&([t,n,i,r,s,o]=[i,r,t,n,o,s]);;){if(s===0&&o===0)return a?[i,r,t,n]:[t,n,i,r];if(s&o)return null;let l,c,u=s||o;u&8?(l=t+(i-t)*(this.ymax-n)/(r-n),c=this.ymax):u&4?(l=t+(i-t)*(this.ymin-n)/(r-n),c=this.ymin):u&2?(c=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(c=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(i=l,r=c,o=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,u=a.length,f,h=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=h,h=this._edgecode(a[c],a[c+1]),f&&h&&(c=this._edge(t,f,h,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,i,r,s){for(;n!==i;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(t,o,a)&&(r.splice(s,0,o,a),s+=2)}return s}_project(t,n,i,r){let s=1/0,o,a,l;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<s&&(l=this.ymin,a=t+(s=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<s&&(l=this.ymax,a=t+(s=o)*i)}if(i>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/i)<s&&(a=this.xmax,l=n+(s=o)*r)}else if(i<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/i)<s&&(a=this.xmin,l=n+(s=o)*r)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const HX=2*Math.PI,ka=Math.pow;function jX(e){return e[0]}function ZX(e){return e[1]}function qX(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],s=2*t[i+1],o=2*t[i+2];if((n[o]-n[r])*(n[s+1]-n[r+1])-(n[s]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function KX(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Js{static from(t,n=jX,i=ZX,r){return new Js("length"in t?JX(t,n,i,r):Float64Array.from(QX(t,n,i,r)))}constructor(t){this._delaunator=new Yd(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&qX(t)){this.collinear=Int32Array.from({length:n.length/2},(h,d)=>d).sort((h,d)=>n[2*h]-n[2*d]||n[2*h+1]-n[2*d+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let h=0,d=n.length/2;h<d;++h){const g=KX(n[2*h],n[2*h+1],f);n[2*h]=g[0],n[2*h+1]=g[1]}this._delaunator=new Yd(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=i.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(i[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=r.length;l<c;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new XX(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==t)return;if(c=s[c],c===-1){const f=i[(r[t]+1)%i.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let s;for(;(s=this._step(i,t,n))>=0&&s!==i&&s!==r;)i=s;return s}_step(t,n,i){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(r[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=ka(n-c[t*2],2)+ka(i-c[t*2+1],2);const h=r[t];let d=h;do{let g=l[d];const m=ka(n-c[g*2],2)+ka(i-c[g*2+1],2);if(m<f&&(f=m,u=g),d=d%3===2?d-2:d+1,l[d]!==t)break;if(d=a[d],d===-1){if(d=s[(o[t]+1)%s.length],d!==g&&ka(n-c[d*2],2)+ka(i-c[d*2+1],2)<f)return d;break}}while(d!==h);return u}render(t){const n=t==null?t=new Lo:void 0,{points:i,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;t.moveTo(i[c],i[c+1]),t.lineTo(i[u],i[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Lo:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],l=r[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,HX)}return i&&i.value()}renderHull(t){const n=t==null?t=new Lo:void 0,{hull:i,points:r}=this,s=i[0]*2,o=i.length;t.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const l=2*i[a];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new i_;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Lo:void 0,{points:r,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new i_;return this.renderTriangle(t,n),n.value()}}function JX(e,t,n,i){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=e[o];s[o*2]=t.call(i,a,o,e),s[o*2+1]=n.call(i,a,o,e)}return s}function*QX(e,t,n,i){let r=0;for(const s of e)yield t.call(i,s,r,e),yield n.call(i,s,r,e),++r}function tH(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Bd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Al(e){return e=Bd(Math.abs(e)),e?e[1]:NaN}function eH(e,t){return function(n,i){for(var r=n.length,s=[],o=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function nH(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var iH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fu(e){if(!(t=iH.exec(e)))throw new Error("invalid format: "+e);var t;return new Lw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fu.prototype=Lw.prototype;function Lw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Lw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rH(e){t:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break t;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var oA;function sH(e,t){var n=Bd(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(oA=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Bd(e,Math.max(0,t+s-1))[0]}function pE(e,t){var n=Bd(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const yE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:tH,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pE(e*100,t),r:pE,s:sH,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _E(e){return e}var wE=Array.prototype.map,xE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function oH(e){var t=e.grouping===void 0||e.thousands===void 0?_E:eH(wE.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?_E:nH(wE.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=Fu(f);var h=f.fill,d=f.align,g=f.sign,m=f.symbol,_=f.zero,p=f.width,y=f.comma,x=f.precision,w=f.trim,v=f.type;v==="n"?(y=!0,v="g"):yE[v]||(x===void 0&&(x=12),w=!0,v="g"),(_||h==="0"&&d==="=")&&(_=!0,h="0",d="=");var b=m==="$"?n:m==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",E=m==="$"?i:/[%p]/.test(v)?o:"",C=yE[v],I=/[defgprs%]/.test(v);x=x===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function S(R){var M=b,k=E,O,A,P;if(v==="c")k=C(R)+k,R="";else{R=+R;var N=R<0||1/R<0;if(R=isNaN(R)?l:C(Math.abs(R),x),w&&(R=rH(R)),N&&+R==0&&g!=="+"&&(N=!1),M=(N?g==="("?g:a:g==="-"||g==="("?"":g)+M,k=(v==="s"?xE[8+oA/3]:"")+k+(N&&g==="("?")":""),I){for(O=-1,A=R.length;++O<A;)if(P=R.charCodeAt(O),48>P||P>57){k=(P===46?r+R.slice(O+1):R.slice(O))+k,R=R.slice(0,O);break}}}y&&!_&&(R=t(R,1/0));var G=M.length+R.length+k.length,j=G<p?new Array(p-G+1).join(h):"";switch(y&&_&&(R=t(j+R,j.length?p-k.length:1/0),j=""),d){case"<":R=M+R+k+j;break;case"=":R=M+j+R+k;break;case"^":R=j.slice(0,G=j.length>>1)+M+R+k+j.slice(G);break;default:R=j+M+R+k;break}return s(R)}return S.toString=function(){return f+""},S}function u(f,h){var d=c((f=Fu(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Al(h)/3)))*3,m=Math.pow(10,-g),_=xE[8+g/3];return function(p){return d(m*p)+_}}return{format:c,formatPrefix:u}}var vh,nc,aA;aH({thousands:",",grouping:[3],currency:["$",""]});function aH(e){return vh=oH(e),nc=vh.format,aA=vh.formatPrefix,vh}function lH(e){return Math.max(0,-Al(Math.abs(e)))}function cH(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Al(t)/3)))*3-Al(Math.abs(e)))}function uH(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Al(t)-Al(e))+1}var pt=1e-6,Ud=1e-12,It=Math.PI,be=It/2,bE=It/4,Yn=It*2,Xe=180/It,Gt=It/180,Xt=Math.abs,ic=Math.atan,Li=Math.atan2,_t=Math.cos,Eh=Math.ceil,lA=Math.exp,r_=Math.hypot,Vd=Math.log,hp=Math.pow,dt=Math.sin,ni=Math.sign||function(e){return e>0?1:e<0?-1:0},pn=Math.sqrt,Ow=Math.tan;function cA(e){return e>1?0:e<-1?It:Math.acos(e)}function Mn(e){return e>1?be:e<-1?-be:Math.asin(e)}function Dn(){}function Xd(e,t){e&&EE.hasOwnProperty(e.type)&&EE[e.type](e,t)}var vE={Feature:function(e,t){Xd(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Xd(n[i].geometry,t)}},EE={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){s_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)s_(n[i],t,0)},Polygon:function(e,t){TE(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)TE(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Xd(n[i],t)}};function s_(e,t,n){var i=-1,r=e.length-n,s;for(t.lineStart();++i<r;)s=e[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function TE(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)s_(e[n],t,1);t.polygonEnd()}function Ss(e,t){e&&vE.hasOwnProperty(e.type)?vE[e.type](e,t):Xd(e,t)}function o_(e){return[Li(e[1],e[0]),Mn(e[2])]}function Ll(e){var t=e[0],n=e[1],i=_t(n);return[i*_t(t),i*dt(t),dt(n)]}function Th(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Hd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function dp(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ch(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function a_(e){var t=pn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Bc,jd,Zd,qd,Kd,Jd,Qd,tg,l_,c_,u_,uA,fA,cn,un,fn,Ei={sphere:Dn,point:kw,lineStart:CE,lineEnd:SE,polygonStart:function(){Ei.lineStart=dH,Ei.lineEnd=gH},polygonEnd:function(){Ei.lineStart=CE,Ei.lineEnd=SE}};function kw(e,t){e*=Gt,t*=Gt;var n=_t(t);_f(n*_t(e),n*dt(e),dt(t))}function _f(e,t,n){++Bc,Zd+=(e-Zd)/Bc,qd+=(t-qd)/Bc,Kd+=(n-Kd)/Bc}function CE(){Ei.point=fH}function fH(e,t){e*=Gt,t*=Gt;var n=_t(t);cn=n*_t(e),un=n*dt(e),fn=dt(t),Ei.point=hH,_f(cn,un,fn)}function hH(e,t){e*=Gt,t*=Gt;var n=_t(t),i=n*_t(e),r=n*dt(e),s=dt(t),o=Li(pn((o=un*s-fn*r)*o+(o=fn*i-cn*s)*o+(o=cn*r-un*i)*o),cn*i+un*r+fn*s);jd+=o,Jd+=o*(cn+(cn=i)),Qd+=o*(un+(un=r)),tg+=o*(fn+(fn=s)),_f(cn,un,fn)}function SE(){Ei.point=kw}function dH(){Ei.point=mH}function gH(){hA(uA,fA),Ei.point=kw}function mH(e,t){uA=e,fA=t,e*=Gt,t*=Gt,Ei.point=hA;var n=_t(t);cn=n*_t(e),un=n*dt(e),fn=dt(t),_f(cn,un,fn)}function hA(e,t){e*=Gt,t*=Gt;var n=_t(t),i=n*_t(e),r=n*dt(e),s=dt(t),o=un*s-fn*r,a=fn*i-cn*s,l=cn*r-un*i,c=r_(o,a,l),u=Mn(c),f=c&&-u/c;l_.add(f*o),c_.add(f*a),u_.add(f*l),jd+=u,Jd+=u*(cn+(cn=i)),Qd+=u*(un+(un=r)),tg+=u*(fn+(fn=s)),_f(cn,un,fn)}function pH(e){Bc=jd=Zd=qd=Kd=Jd=Qd=tg=0,l_=new Qi,c_=new Qi,u_=new Qi,Ss(e,Ei);var t=+l_,n=+c_,i=+u_,r=r_(t,n,i);return r<Ud&&(t=Jd,n=Qd,i=tg,jd<pt&&(t=Zd,n=qd,i=Kd),r=r_(t,n,i),r<Ud)?[NaN,NaN]:[Li(n,t)*Xe,Mn(i/r)*Xe]}function f_(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function h_(e,t){return Xt(e)>It&&(e-=Math.round(e/Yn)*Yn),[e,t]}h_.invert=h_;function dA(e,t,n){return(e%=Yn)?t||n?f_(RE(e),IE(t,n)):RE(e):t||n?IE(t,n):h_}function ME(e){return function(t,n){return t+=e,Xt(t)>It&&(t-=Math.round(t/Yn)*Yn),[t,n]}}function RE(e){var t=ME(e);return t.invert=ME(-e),t}function IE(e,t){var n=_t(e),i=dt(e),r=_t(t),s=dt(t);function o(a,l){var c=_t(l),u=_t(a)*c,f=dt(a)*c,h=dt(l),d=h*n+u*i;return[Li(f*r-d*s,u*n-h*i),Mn(d*r+f*s)]}return o.invert=function(a,l){var c=_t(l),u=_t(a)*c,f=dt(a)*c,h=dt(l),d=h*r-f*s;return[Li(f*r+h*s,u*n+d*i),Mn(d*n-u*i)]},o}function yH(e){e=dA(e[0]*Gt,e[1]*Gt,e.length>2?e[2]*Gt:0);function t(n){return n=e(n[0]*Gt,n[1]*Gt),n[0]*=Xe,n[1]*=Xe,n}return t.invert=function(n){return n=e.invert(n[0]*Gt,n[1]*Gt),n[0]*=Xe,n[1]*=Xe,n},t}function _H(e,t,n,i,r,s){if(n){var o=_t(t),a=dt(t),l=i*n;r==null?(r=t+i*Yn,s=t-l/2):(r=AE(o,r),s=AE(o,s),(i>0?r<s:r>s)&&(r+=i*Yn));for(var c,u=r;i>0?u>s:u<s;u-=l)c=o_([o,-a*_t(u),-a*dt(u)]),e.point(c[0],c[1])}}function AE(e,t){t=Ll(t),t[0]-=e,a_(t);var n=cA(-t[1]);return((-t[2]<0?-n:n)+Yn-pt)%Yn}function gA(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Dn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Jh(e,t){return Xt(e[0]-t[0])<pt&&Xt(e[1]-t[1])<pt}function Sh(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function mA(e,t,n,i,r){var s=[],o=[],a,l;if(e.forEach(function(g){if(!((m=g.length-1)<=0)){var m,_=g[0],p=g[m],y;if(Jh(_,p)){if(!_[2]&&!p[2]){for(r.lineStart(),a=0;a<m;++a)r.point((_=g[a])[0],_[1]);r.lineEnd();return}p[0]+=2*pt}s.push(y=new Sh(_,g,null,!0)),o.push(y.o=new Sh(_,null,y,!1)),s.push(y=new Sh(p,g,null,!1)),o.push(y.o=new Sh(p,null,y,!0))}}),!!s.length){for(o.sort(t),LE(s),LE(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,l=u.length;a<l;++a)r.point((f=u[a])[0],f[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(d)for(u=h.p.z,a=u.length-1;a>=0;--a)r.point((f=u[a])[0],f[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);r.lineEnd()}}}function LE(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function gp(e){return Xt(e[0])<=It?e[0]:ni(e[0])*((Xt(e[0])+It)%Yn-It)}function wH(e,t){var n=gp(t),i=t[1],r=dt(i),s=[dt(n),-_t(n),0],o=0,a=0,l=new Qi;r===1?i=be+pt:r===-1&&(i=-be-pt);for(var c=0,u=e.length;c<u;++c)if(h=(f=e[c]).length)for(var f,h,d=f[h-1],g=gp(d),m=d[1]/2+bE,_=dt(m),p=_t(m),y=0;y<h;++y,g=w,_=b,p=E,d=x){var x=f[y],w=gp(x),v=x[1]/2+bE,b=dt(v),E=_t(v),C=w-g,I=C>=0?1:-1,S=I*C,R=S>It,M=_*b;if(l.add(Li(M*I*dt(S),p*E+M*_t(S))),o+=R?C+I*Yn:C,R^g>=n^w>=n){var k=Hd(Ll(d),Ll(x));a_(k);var O=Hd(s,k);a_(O);var A=(R^C>=0?-1:1)*Mn(O[2]);(i>A||i===A&&(k[0]||k[1]))&&(a+=R^C>=0?1:-1)}}return(o<-pt||o<pt&&l<-Ud)^a&1}function pA(e,t,n,i){return function(r){var s=t(r),o=gA(),a=t(o),l=!1,c,u,f,h={point:d,lineStart:m,lineEnd:_,polygonStart:function(){h.point=p,h.lineStart=y,h.lineEnd=x,u=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=_,u=wI(u);var w=wH(c,i);u.length?(l||(r.polygonStart(),l=!0),mA(u,bH,w,n,r)):w&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(w,v){e(w,v)&&r.point(w,v)}function g(w,v){s.point(w,v)}function m(){h.point=g,s.lineStart()}function _(){h.point=d,s.lineEnd()}function p(w,v){f.push([w,v]),a.point(w,v)}function y(){a.lineStart(),f=[]}function x(){p(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),v=o.result(),b,E=v.length,C,I,S;if(f.pop(),c.push(f),f=null,!!E){if(w&1){if(I=v[0],(C=I.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),b=0;b<C;++b)r.point((S=I[b])[0],S[1]);r.lineEnd()}return}E>1&&w&2&&v.push(v.pop().concat(v.shift())),u.push(v.filter(xH))}}return h}}function xH(e){return e.length>1}function bH(e,t){return((e=e.x)[0]<0?e[1]-be-pt:be-e[1])-((t=t.x)[0]<0?t[1]-be-pt:be-t[1])}const OE=pA(function(){return!0},vH,TH,[-It,-be]);function vH(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(s,o){var a=s>0?It:-It,l=Xt(s-t);Xt(l-It)<pt?(e.point(t,n=(n+o)/2>0?be:-be),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),r=0):i!==a&&l>=It&&(Xt(t-i)<pt&&(t-=i*pt),Xt(s-a)<pt&&(s-=a*pt),n=EH(t,n,s,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),r=0),e.point(t=s,n=o),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function EH(e,t,n,i){var r,s,o=dt(e-n);return Xt(o)>pt?ic((dt(t)*(s=_t(i))*dt(n)-dt(i)*(r=_t(t))*dt(e))/(r*s*o)):(t+i)/2}function TH(e,t,n,i){var r;if(e==null)r=n*be,i.point(-It,r),i.point(0,r),i.point(It,r),i.point(It,0),i.point(It,-r),i.point(0,-r),i.point(-It,-r),i.point(-It,0),i.point(-It,r);else if(Xt(e[0]-t[0])>pt){var s=e[0]<t[0]?It:-It;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function CH(e){var t=_t(e),n=6*Gt,i=t>0,r=Xt(t)>pt;function s(u,f,h,d){_H(d,e,n,h,u,f)}function o(u,f){return _t(u)*_t(f)>t}function a(u){var f,h,d,g,m;return{lineStart:function(){g=d=!1,m=1},point:function(_,p){var y=[_,p],x,w=o(_,p),v=i?w?0:c(_,p):w?c(_+(_<0?It:-It),p):0;if(!f&&(g=d=w)&&u.lineStart(),w!==d&&(x=l(f,y),(!x||Jh(f,x)||Jh(y,x))&&(y[2]=1)),w!==d)m=0,w?(u.lineStart(),x=l(y,f),u.point(x[0],x[1])):(x=l(f,y),u.point(x[0],x[1],2),u.lineEnd()),f=x;else if(r&&f&&i^w){var b;!(v&h)&&(b=l(y,f,!0))&&(m=0,i?(u.lineStart(),u.point(b[0][0],b[0][1]),u.point(b[1][0],b[1][1]),u.lineEnd()):(u.point(b[1][0],b[1][1]),u.lineEnd(),u.lineStart(),u.point(b[0][0],b[0][1],3)))}w&&(!f||!Jh(f,y))&&u.point(y[0],y[1]),f=y,d=w,h=v},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return m|(g&&d)<<1}}}function l(u,f,h){var d=Ll(u),g=Ll(f),m=[1,0,0],_=Hd(d,g),p=Th(_,_),y=_[0],x=p-y*y;if(!x)return!h&&u;var w=t*p/x,v=-t*y/x,b=Hd(m,_),E=Ch(m,w),C=Ch(_,v);dp(E,C);var I=b,S=Th(E,I),R=Th(I,I),M=S*S-R*(Th(E,E)-1);if(!(M<0)){var k=pn(M),O=Ch(I,(-S-k)/R);if(dp(O,E),O=o_(O),!h)return O;var A=u[0],P=f[0],N=u[1],G=f[1],j;P<A&&(j=A,A=P,P=j);var U=P-A,Z=Xt(U-It)<pt,z=Z||U<pt;if(!Z&&G<N&&(j=N,N=G,G=j),z?Z?N+G>0^O[1]<(Xt(O[0]-A)<pt?N:G):N<=O[1]&&O[1]<=G:U>It^(A<=O[0]&&O[0]<=P)){var Q=Ch(I,(-S+k)/R);return dp(Q,E),[O,o_(Q)]}}}function c(u,f){var h=i?e:It-e,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return pA(o,a,s,i?[0,-e]:[-It,e-It])}function SH(e,t,n,i,r,s){var o=e[0],a=e[1],l=t[0],c=t[1],u=0,f=1,h=l-o,d=c-a,g;if(g=n-o,!(!h&&g>0)){if(g/=h,h<0){if(g<u)return;g<f&&(f=g)}else if(h>0){if(g>f)return;g>u&&(u=g)}if(g=r-o,!(!h&&g<0)){if(g/=h,h<0){if(g>f)return;g>u&&(u=g)}else if(h>0){if(g<u)return;g<f&&(f=g)}if(g=i-a,!(!d&&g>0)){if(g/=d,d<0){if(g<u)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>u&&(u=g)}if(g=s-a,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>u&&(u=g)}else if(d>0){if(g<u)return;g<f&&(f=g)}return u>0&&(e[0]=o+u*h,e[1]=a+u*d),f<1&&(t[0]=o+f*h,t[1]=a+f*d),!0}}}}}var Uc=1e9,Mh=-Uc;function yA(e,t,n,i){function r(c,u){return e<=c&&c<=n&&t<=u&&u<=i}function s(c,u,f,h){var d=0,g=0;if(c==null||(d=o(c,f))!==(g=o(u,f))||l(c,u)<0^f>0)do h.point(d===0||d===3?e:n,d>1?i:t);while((d=(d+f+4)%4)!==g);else h.point(u[0],u[1])}function o(c,u){return Xt(c[0]-e)<pt?u>0?0:3:Xt(c[0]-n)<pt?u>0?2:1:Xt(c[1]-t)<pt?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),h=o(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=gA(),h,d,g,m,_,p,y,x,w,v,b,E={point:C,lineStart:M,lineEnd:k,polygonStart:S,polygonEnd:R};function C(A,P){r(A,P)&&u.point(A,P)}function I(){for(var A=0,P=0,N=d.length;P<N;++P)for(var G=d[P],j=1,U=G.length,Z=G[0],z,Q,nt=Z[0],st=Z[1];j<U;++j)z=nt,Q=st,Z=G[j],nt=Z[0],st=Z[1],Q<=i?st>i&&(nt-z)*(i-Q)>(st-Q)*(e-z)&&++A:st<=i&&(nt-z)*(i-Q)<(st-Q)*(e-z)&&--A;return A}function S(){u=f,h=[],d=[],b=!0}function R(){var A=I(),P=b&&A,N=(h=wI(h)).length;(P||N)&&(c.polygonStart(),P&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),N&&mA(h,a,A,s,c),c.polygonEnd()),u=c,h=d=g=null}function M(){E.point=O,d&&d.push(g=[]),v=!0,w=!1,y=x=NaN}function k(){h&&(O(m,_),p&&w&&f.rejoin(),h.push(f.result())),E.point=C,w&&u.lineEnd()}function O(A,P){var N=r(A,P);if(d&&g.push([A,P]),v)m=A,_=P,p=N,v=!1,N&&(u.lineStart(),u.point(A,P));else if(N&&w)u.point(A,P);else{var G=[y=Math.max(Mh,Math.min(Uc,y)),x=Math.max(Mh,Math.min(Uc,x))],j=[A=Math.max(Mh,Math.min(Uc,A)),P=Math.max(Mh,Math.min(Uc,P))];SH(G,j,e,t,n,i)?(w||(u.lineStart(),u.point(G[0],G[1])),u.point(j[0],j[1]),N||u.lineEnd(),b=!1):N&&(u.lineStart(),u.point(A,P),b=!1)}y=A,x=P,w=N}return E}}function kE(e,t,n){var i=ei(e,t-pt,n).concat(t);return function(r){return i.map(function(s){return[r,s]})}}function PE(e,t,n){var i=ei(e,t-pt,n).concat(t);return function(r){return i.map(function(s){return[s,r]})}}function MH(){var e,t,n,i,r,s,o,a,l=10,c=l,u=90,f=360,h,d,g,m,_=2.5;function p(){return{type:"MultiLineString",coordinates:y()}}function y(){return ei(Eh(i/u)*u,n,u).map(g).concat(ei(Eh(a/f)*f,o,f).map(m)).concat(ei(Eh(t/l)*l,e,l).filter(function(x){return Xt(x%u)>pt}).map(h)).concat(ei(Eh(s/c)*c,r,c).filter(function(x){return Xt(x%f)>pt}).map(d))}return p.lines=function(){return y().map(function(x){return{type:"LineString",coordinates:x}})},p.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(m(o).slice(1),g(n).reverse().slice(1),m(a).reverse().slice(1))]}},p.extent=function(x){return arguments.length?p.extentMajor(x).extentMinor(x):p.extentMinor()},p.extentMajor=function(x){return arguments.length?(i=+x[0][0],n=+x[1][0],a=+x[0][1],o=+x[1][1],i>n&&(x=i,i=n,n=x),a>o&&(x=a,a=o,o=x),p.precision(_)):[[i,a],[n,o]]},p.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],s=+x[0][1],r=+x[1][1],t>e&&(x=t,t=e,e=x),s>r&&(x=s,s=r,r=x),p.precision(_)):[[t,s],[e,r]]},p.step=function(x){return arguments.length?p.stepMajor(x).stepMinor(x):p.stepMinor()},p.stepMajor=function(x){return arguments.length?(u=+x[0],f=+x[1],p):[u,f]},p.stepMinor=function(x){return arguments.length?(l=+x[0],c=+x[1],p):[l,c]},p.precision=function(x){return arguments.length?(_=+x,h=kE(s,r,90),d=PE(t,e,_),g=kE(a,o,90),m=PE(i,n,_),p):_},p.extentMajor([[-180,-90+pt],[180,90-pt]]).extentMinor([[-180,-80-pt],[180,80+pt]])}function RH(){return MH()()}const d_=e=>e;var mp=new Qi,g_=new Qi,_A,wA,m_,p_,Ms={point:Dn,lineStart:Dn,lineEnd:Dn,polygonStart:function(){Ms.lineStart=IH,Ms.lineEnd=LH},polygonEnd:function(){Ms.lineStart=Ms.lineEnd=Ms.point=Dn,mp.add(Xt(g_)),g_=new Qi},result:function(){var e=mp/2;return mp=new Qi,e}};function IH(){Ms.point=AH}function AH(e,t){Ms.point=xA,_A=m_=e,wA=p_=t}function xA(e,t){g_.add(p_*e-m_*t),m_=e,p_=t}function LH(){xA(_A,wA)}const FE=Ms;var Ol=1/0,eg=Ol,Nu=-Ol,ng=Nu,OH={point:kH,lineStart:Dn,lineEnd:Dn,polygonStart:Dn,polygonEnd:Dn,result:function(){var e=[[Ol,eg],[Nu,ng]];return Nu=ng=-(eg=Ol=1/0),e}};function kH(e,t){e<Ol&&(Ol=e),e>Nu&&(Nu=e),t<eg&&(eg=t),t>ng&&(ng=t)}const ig=OH;var y_=0,__=0,Vc=0,rg=0,sg=0,Ha=0,w_=0,x_=0,Xc=0,bA,vA,Xi,Hi,xi={point:oa,lineStart:NE,lineEnd:DE,polygonStart:function(){xi.lineStart=NH,xi.lineEnd=DH},polygonEnd:function(){xi.point=oa,xi.lineStart=NE,xi.lineEnd=DE},result:function(){var e=Xc?[w_/Xc,x_/Xc]:Ha?[rg/Ha,sg/Ha]:Vc?[y_/Vc,__/Vc]:[NaN,NaN];return y_=__=Vc=rg=sg=Ha=w_=x_=Xc=0,e}};function oa(e,t){y_+=e,__+=t,++Vc}function NE(){xi.point=PH}function PH(e,t){xi.point=FH,oa(Xi=e,Hi=t)}function FH(e,t){var n=e-Xi,i=t-Hi,r=pn(n*n+i*i);rg+=r*(Xi+e)/2,sg+=r*(Hi+t)/2,Ha+=r,oa(Xi=e,Hi=t)}function DE(){xi.point=oa}function NH(){xi.point=$H}function DH(){EA(bA,vA)}function $H(e,t){xi.point=EA,oa(bA=Xi=e,vA=Hi=t)}function EA(e,t){var n=e-Xi,i=t-Hi,r=pn(n*n+i*i);rg+=r*(Xi+e)/2,sg+=r*(Hi+t)/2,Ha+=r,r=Hi*e-Xi*t,w_+=r*(Xi+e),x_+=r*(Hi+t),Xc+=r*3,oa(Xi=e,Hi=t)}const $E=xi;function TA(e){this._context=e}TA.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Yn);break}}},result:Dn};var b_=new Qi,pp,CA,SA,Hc,jc,og={point:Dn,lineStart:function(){og.point=zH},lineEnd:function(){pp&&MA(CA,SA),og.point=Dn},polygonStart:function(){pp=!0},polygonEnd:function(){pp=null},result:function(){var e=+b_;return b_=new Qi,e}};function zH(e,t){og.point=MA,CA=Hc=e,SA=jc=t}function MA(e,t){Hc-=e,jc-=t,b_.add(pn(Hc*Hc+jc*jc)),Hc=e,jc=t}const zE=og;let GE,ag,WE,YE;class BE{constructor(t){this._append=t==null?RA:GH(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==WE||this._append!==ag){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,WE=i,ag=this._append,YE=this._,this._=r}this._+=YE;break}}}result(){const t=this._;return this._="",t.length?t:null}}function RA(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function GH(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return RA;if(t!==GE){const n=10**t;GE=t,ag=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return ag}function Qs(e,t){let n=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),Ss(a,r(s))),s.result()}return o.area=function(a){return Ss(a,r(FE)),FE.result()},o.measure=function(a){return Ss(a,r(zE)),zE.result()},o.bounds=function(a){return Ss(a,r(ig)),ig.result()},o.centroid=function(a){return Ss(a,r($E)),$E.result()},o.projection=function(a){return arguments.length?(r=a==null?(e=null,d_):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new BE(n)):new TA(t=a),typeof i!="function"&&s.pointRadius(i),o):t},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new BE(n)),o},o.projection(e).digits(n).context(t)}function lg(e){return{stream:Om(e)}}function Om(e){return function(t){var n=new v_;for(var i in e)n[i]=e[i];return n.stream=t,n}}function v_(){}v_.prototype={constructor:v_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Pw(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Ss(n,e.stream(ig)),t(ig.result()),i!=null&&e.clipExtent(i),e}function Fw(e,t,n){return Pw(e,function(i){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(s-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function IA(e,t,n){return Fw(e,[[0,0],t],n)}function AA(e,t,n){return Pw(e,function(i){var r=+t,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];e.scale(150*s).translate([o,a])},n)}function LA(e,t,n){return Pw(e,function(i){var r=+t,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var UE=16,WH=_t(30*Gt);function VE(e,t){return+t?BH(e,t):YH(e)}function YH(e){return Om({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function BH(e,t){function n(i,r,s,o,a,l,c,u,f,h,d,g,m,_){var p=c-i,y=u-r,x=p*p+y*y;if(x>4*t&&m--){var w=o+h,v=a+d,b=l+g,E=pn(w*w+v*v+b*b),C=Mn(b/=E),I=Xt(Xt(b)-1)<pt||Xt(s-f)<pt?(s+f)/2:Li(v,w),S=e(I,C),R=S[0],M=S[1],k=R-i,O=M-r,A=y*k-p*O;(A*A/x>t||Xt((p*k+y*O)/x-.5)>.3||o*h+a*d+l*g<WH)&&(n(i,r,s,o,a,l,R,M,I,w/=E,v/=E,b,m,_),_.point(R,M),n(R,M,I,w,v,b,c,u,f,h,d,g,m,_))}}return function(i){var r,s,o,a,l,c,u,f,h,d,g,m,_={point:p,lineStart:y,lineEnd:w,polygonStart:function(){i.polygonStart(),_.lineStart=v},polygonEnd:function(){i.polygonEnd(),_.lineStart=y}};function p(C,I){C=e(C,I),i.point(C[0],C[1])}function y(){f=NaN,_.point=x,i.lineStart()}function x(C,I){var S=Ll([C,I]),R=e(C,I);n(f,h,u,d,g,m,f=R[0],h=R[1],u=C,d=S[0],g=S[1],m=S[2],UE,i),i.point(f,h)}function w(){_.point=p,i.lineEnd()}function v(){y(),_.point=b,_.lineEnd=E}function b(C,I){x(r=C,I),s=f,o=h,a=d,l=g,c=m,_.point=x}function E(){n(f,h,u,d,g,m,s,o,r,a,l,c,UE,i),_.lineEnd=w,w()}return _}}var UH=Om({point:function(e,t){this.stream.point(e*Gt,t*Gt)}});function VH(e){return Om({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function XH(e,t,n,i,r){function s(o,a){return o*=i,a*=r,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*i,(n-a)/e*r]},s}function XE(e,t,n,i,r,s){if(!s)return XH(e,t,n,i,r);var o=_t(s),a=dt(s),l=o*e,c=a*e,u=o/e,f=a/e,h=(a*n-o*t)/e,d=(a*t+o*n)/e;function g(m,_){return m*=i,_*=r,[l*m-c*_+t,n-c*m-l*_]}return g.invert=function(m,_){return[i*(u*m-f*_+h),r*(d-f*m-u*_)]},g}function to(e){return OA(function(){return e})()}function OA(e){var t,n=150,i=480,r=250,s=0,o=0,a=0,l=0,c=0,u,f=0,h=1,d=1,g=null,m=OE,_=null,p,y,x,w=d_,v=.5,b,E,C,I,S;function R(A){return C(A[0]*Gt,A[1]*Gt)}function M(A){return A=C.invert(A[0],A[1]),A&&[A[0]*Xe,A[1]*Xe]}R.stream=function(A){return I&&S===A?I:I=UH(VH(u)(m(b(w(S=A)))))},R.preclip=function(A){return arguments.length?(m=A,g=void 0,O()):m},R.postclip=function(A){return arguments.length?(w=A,_=p=y=x=null,O()):w},R.clipAngle=function(A){return arguments.length?(m=+A?CH(g=A*Gt):(g=null,OE),O()):g*Xe},R.clipExtent=function(A){return arguments.length?(w=A==null?(_=p=y=x=null,d_):yA(_=+A[0][0],p=+A[0][1],y=+A[1][0],x=+A[1][1]),O()):_==null?null:[[_,p],[y,x]]},R.scale=function(A){return arguments.length?(n=+A,k()):n},R.translate=function(A){return arguments.length?(i=+A[0],r=+A[1],k()):[i,r]},R.center=function(A){return arguments.length?(s=A[0]%360*Gt,o=A[1]%360*Gt,k()):[s*Xe,o*Xe]},R.rotate=function(A){return arguments.length?(a=A[0]%360*Gt,l=A[1]%360*Gt,c=A.length>2?A[2]%360*Gt:0,k()):[a*Xe,l*Xe,c*Xe]},R.angle=function(A){return arguments.length?(f=A%360*Gt,k()):f*Xe},R.reflectX=function(A){return arguments.length?(h=A?-1:1,k()):h<0},R.reflectY=function(A){return arguments.length?(d=A?-1:1,k()):d<0},R.precision=function(A){return arguments.length?(b=VE(E,v=A*A),O()):pn(v)},R.fitExtent=function(A,P){return Fw(R,A,P)},R.fitSize=function(A,P){return IA(R,A,P)},R.fitWidth=function(A,P){return AA(R,A,P)},R.fitHeight=function(A,P){return LA(R,A,P)};function k(){var A=XE(n,0,0,h,d,f).apply(null,t(s,o)),P=XE(n,i-A[0],r-A[1],h,d,f);return u=dA(a,l,c),E=f_(t,P),C=f_(u,E),b=VE(E,v),O()}function O(){return I=S=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&M,k()}}function Nw(e){var t=0,n=It/3,i=OA(e),r=i(t,n);return r.parallels=function(s){return arguments.length?i(t=s[0]*Gt,n=s[1]*Gt):[t*Xe,n*Xe]},r}function HH(e){var t=_t(e);function n(i,r){return[i*t,dt(r)/t]}return n.invert=function(i,r){return[i/t,Mn(r*t)]},n}function jH(e,t){var n=dt(e),i=(n+dt(t))/2;if(Xt(i)<pt)return HH(e);var r=1+n*(2*i-n),s=pn(r)/i;function o(a,l){var c=pn(r-2*i*dt(l))/i;return[c*dt(a*=i),s-c*_t(a)]}return o.invert=function(a,l){var c=s-l,u=Li(a,Xt(c))*ni(c);return c*i<0&&(u-=It*ni(a)*ni(c)),[u/i,Mn((r-(a*a+c*c)*i*i)/(2*i))]},o}function cg(){return Nw(jH).scale(155.424).center([0,33.6442])}function kA(){return cg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ZH(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function qH(){var e,t,n=kA(),i,r=cg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=cg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(h,d){l=[h,d]}};function u(h){var d=h[0],g=h[1];return l=null,i.point(d,g),l||(s.point(d,g),l)||(a.point(d,g),l)}u.invert=function(h){var d=n.scale(),g=n.translate(),m=(h[0]-g[0])/d,_=(h[1]-g[1])/d;return(_>=.12&&_<.234&&m>=-.425&&m<-.214?r:_>=.166&&_<.234&&m>=-.214&&m<-.115?o:n).invert(h)},u.stream=function(h){return e&&t===h?e:e=ZH([n.stream(t=h),r.stream(h),o.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),o.precision(h),f()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),o.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),g=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[g-.455*d,m-.238*d],[g+.455*d,m+.238*d]]).stream(c),s=r.translate([g-.307*d,m+.201*d]).clipExtent([[g-.425*d+pt,m+.12*d+pt],[g-.214*d-pt,m+.234*d-pt]]).stream(c),a=o.translate([g-.205*d,m+.212*d]).clipExtent([[g-.214*d+pt,m+.166*d+pt],[g-.115*d-pt,m+.234*d-pt]]).stream(c),f()},u.fitExtent=function(h,d){return Fw(u,h,d)},u.fitSize=function(h,d){return IA(u,h,d)},u.fitWidth=function(h,d){return AA(u,h,d)},u.fitHeight=function(h,d){return LA(u,h,d)};function f(){return e=t=null,u}return u.scale(1070)}function PA(e){return function(t,n){var i=_t(t),r=_t(n),s=e(i*r);return s===1/0?[2,0]:[s*r*dt(t),s*dt(n)]}}function wf(e){return function(t,n){var i=pn(t*t+n*n),r=e(i),s=dt(r),o=_t(r);return[Li(t*s,i*o),Mn(i&&n*s/i)]}}var FA=PA(function(e){return pn(2/(1+e))});FA.invert=wf(function(e){return 2*Mn(e/2)});function KH(){return to(FA).scale(124.75).clipAngle(180-.001)}var NA=PA(function(e){return(e=cA(e))&&e/dt(e)});NA.invert=wf(function(e){return e});function JH(){return to(NA).scale(79.4188).clipAngle(180-.001)}function km(e,t){return[e,Vd(Ow((be+t)/2))]}km.invert=function(e,t){return[e,2*ic(lA(t))-be]};function QH(){return DA(km).scale(961/Yn)}function DA(e){var t=to(e),n=t.center,i=t.scale,r=t.translate,s=t.clipExtent,o=null,a,l,c;t.scale=function(f){return arguments.length?(i(f),u()):i()},t.translate=function(f){return arguments.length?(r(f),u()):r()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=l=c=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var f=It*i(),h=t(yH(t.rotate()).invert([0,0]));return s(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===km?[[Math.max(h[0]-f,o),a],[Math.min(h[0]+f,l),c]]:[[o,Math.max(h[1]-f,a)],[l,Math.min(h[1]+f,c)]])}return u()}function Rh(e){return Ow((be+e)/2)}function tj(e,t){var n=_t(e),i=e===t?dt(e):Vd(n/_t(t))/Vd(Rh(t)/Rh(e)),r=n*hp(Rh(e),i)/i;if(!i)return km;function s(o,a){r>0?a<-be+pt&&(a=-be+pt):a>be-pt&&(a=be-pt);var l=r/hp(Rh(a),i);return[l*dt(i*o),r-l*_t(i*o)]}return s.invert=function(o,a){var l=r-a,c=ni(i)*pn(o*o+l*l),u=Li(o,Xt(l))*ni(l);return l*i<0&&(u-=It*ni(o)*ni(l)),[u/i,2*ic(hp(r/c,1/i))-be]},s}function ej(){return Nw(tj).scale(109.5).parallels([30,30])}function ug(e,t){return[e,t]}ug.invert=ug;function nj(){return to(ug).scale(152.63)}function ij(e,t){var n=_t(e),i=e===t?dt(e):(n-_t(t))/(t-e),r=n/i+e;if(Xt(i)<pt)return ug;function s(o,a){var l=r-a,c=i*o;return[l*dt(c),r-l*_t(c)]}return s.invert=function(o,a){var l=r-a,c=Li(o,Xt(l))*ni(l);return l*i<0&&(c-=It*ni(o)*ni(l)),[c/i,r-ni(i)*pn(o*o+l*l)]},s}function rj(){return Nw(ij).scale(131.154).center([0,13.9389])}var ru=1.340264,su=-.081106,ou=893e-6,au=.003796,fg=pn(3)/2,sj=12;function $A(e,t){var n=Mn(fg*dt(t)),i=n*n,r=i*i*i;return[e*_t(n)/(fg*(ru+3*su*i+r*(7*ou+9*au*i))),n*(ru+su*i+r*(ou+au*i))]}$A.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,s=0,o,a,l;s<sj&&(a=n*(ru+su*i+r*(ou+au*i))-t,l=ru+3*su*i+r*(7*ou+9*au*i),n-=o=a/l,i=n*n,r=i*i*i,!(Xt(o)<Ud));++s);return[fg*e*(ru+3*su*i+r*(7*ou+9*au*i))/_t(n),Mn(dt(n)/fg)]};function oj(){return to($A).scale(177.158)}function zA(e,t){var n=_t(t),i=_t(e)*n;return[n*dt(e)/i,dt(t)/i]}zA.invert=wf(ic);function aj(){return to(zA).scale(144.049).clipAngle(60)}function GA(e,t){return[_t(t)*dt(e),dt(t)]}GA.invert=wf(Mn);function lj(){return to(GA).scale(249.5).clipAngle(90+pt)}function WA(e,t){var n=_t(t),i=1+_t(e)*n;return[n*dt(e)/i,dt(t)/i]}WA.invert=wf(function(e){return 2*ic(e)});function cj(){return to(WA).scale(250).clipAngle(142)}function YA(e,t){return[Vd(Ow((be+t)/2)),-e]}YA.invert=function(e,t){return[-t,2*ic(lA(e))-be]};function uj(){var e=DA(YA),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function fj(e,t){return e.parent===t.parent?1:2}function hj(e){return e.reduce(dj,0)/e.length}function dj(e,t){return e+t.x}function gj(e){return 1+e.reduce(mj,0)}function mj(e,t){return Math.max(e,t.y)}function pj(e){for(var t;t=e.children;)e=t[0];return e}function yj(e){for(var t;t=e.children;)e=t[t.length-1];return e}function BA(){var e=fj,t=1,n=1,i=!1;function r(s){var o,a=0;s.eachAfter(function(h){var d=h.children;d?(h.x=hj(d),h.y=gj(d)):(h.x=o?a+=e(h,o):0,h.y=0,o=h)});var l=pj(s),c=yj(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(i?function(h){h.x=(h.x-s.x)*t,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*t,h.y=(1-(s.y?h.y/s.y:1))*n})}return r.separation=function(s){return arguments.length?(e=s,r):e},r.size=function(s){return arguments.length?(i=!1,t=+s[0],n=+s[1],r):i?null:[t,n]},r.nodeSize=function(s){return arguments.length?(i=!0,t=+s[0],n=+s[1],r):i?[t,n]:null},r}function _j(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function wj(){return this.eachAfter(_j)}function xj(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function bj(e,t){for(var n=this,i=[n],r,s,o=-1;n=i.pop();)if(e.call(t,n,++o,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function vj(e,t){for(var n=this,i=[n],r=[],s,o,a,l=-1;n=i.pop();)if(r.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function Ej(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Tj(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Cj(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Sj(e){for(var t=this,n=Mj(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Mj(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Rj(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Ij(){return Array.from(this)}function Aj(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Lj(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Oj(){var e=this,t,n=[e],i,r,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function UA(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Fj)):t===void 0&&(t=Pj);for(var n=new kl(e),i,r=[n],s,o,a,l;i=r.pop();)if((o=t(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,a=l-1;a>=0;--a)r.push(s=o[a]=new kl(o[a])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(VA)}function kj(){return UA(this).eachBefore(Nj)}function Pj(e){return e.children}function Fj(e){return Array.isArray(e)?e[1]:null}function Nj(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function VA(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function kl(e){this.data=e,this.depth=this.height=0,this.parent=null}kl.prototype=UA.prototype={constructor:kl,count:wj,each:xj,eachAfter:vj,eachBefore:bj,find:Ej,sum:Tj,sort:Cj,path:Sj,ancestors:Rj,descendants:Ij,leaves:Aj,links:Lj,copy:kj,[Symbol.iterator]:Oj};function yp(e){return e==null?null:Dj(e)}function Dj(e){if(typeof e!="function")throw new Error;return e}var $j={depth:-1},HE={},_p={};function zj(e){return e.id}function Gj(e){return e.parentId}function XA(){var e=zj,t=Gj,n;function i(r){var s=Array.from(r),o=e,a=t,l,c,u,f,h,d,g,m,_=new Map;if(n!=null){const p=s.map((w,v)=>Wj(n(w,v,r))),y=p.map(jE),x=new Set(p).add("");for(const w of y)x.has(w)||(x.add(w),p.push(w),y.push(jE(w)),s.push(_p));o=(w,v)=>p[v],a=(w,v)=>y[v]}for(u=0,l=s.length;u<l;++u)c=s[u],d=s[u]=new kl(c),(g=o(c,u,r))!=null&&(g+="")&&(m=d.id=g,_.set(m,_.has(m)?HE:d)),(g=a(c,u,r))!=null&&(g+="")&&(d.parent=g);for(u=0;u<l;++u)if(d=s[u],g=d.parent){if(h=_.get(g),!h)throw new Error("missing: "+g);if(h===HE)throw new Error("ambiguous: "+g);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(n!=null){for(;f.data===_p&&f.children.length===1;)f=f.children[0],--l;for(let p=s.length-1;p>=0&&(d=s[p],d.data===_p);--p)d.data=null}if(f.parent=$j,f.eachBefore(function(p){p.depth=p.parent.depth+1,--l}).eachBefore(VA),f.parent=null,l>0)throw new Error("cycle");return f}return i.id=function(r){return arguments.length?(e=yp(r),i):e},i.parentId=function(r){return arguments.length?(t=yp(r),i):t},i.path=function(r){return arguments.length?(n=yp(r),i):n},i}function Wj(e){e=`${e}`;let t=e.length;return E_(e,t-1)&&!E_(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function jE(e){let t=e.length;if(t<2)return"";for(;--t>1&&!E_(e,t););return e.slice(0,t)}function E_(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Yj(e,t){return e.parent===t.parent?1:2}function wp(e){var t=e.children;return t?t[0]:e.t}function xp(e){var t=e.children;return t?t[t.length-1]:e.t}function Bj(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Uj(e){for(var t=0,n=0,i=e.children,r=i.length,s;--r>=0;)s=i[r],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Vj(e,t,n){return e.a.parent===t.parent?e.a:n}function Qh(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Qh.prototype=Object.create(kl.prototype);function Xj(e){for(var t=new Qh(e,0),n,i=[t],r,s,o,a;n=i.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=n.children[o]=new Qh(s[o],o)),r.parent=n;return(t.parent=new Qh(null,0)).children=[t],t}function hg(){var e=Yj,t=1,n=1,i=null;function r(c){var u=Xj(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),i)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(y){y.x<f.x&&(f=y),y.x>h.x&&(h=y),y.depth>d.depth&&(d=y)});var g=f===h?1:e(f,h)/2,m=g-f.x,_=t/(h.x+g+m),p=n/(d.depth||1);c.eachBefore(function(y){y.x=(y.x+m)*_,y.y=y.depth*p})}return c}function s(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){Uj(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+e(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+e(c._,h._));c.parent.A=a(c,h,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var h=c,d=c,g=u,m=h.parent.children[0],_=h.m,p=d.m,y=g.m,x=m.m,w;g=xp(g),h=wp(h),g&&h;)m=wp(m),d=xp(d),d.a=c,w=g.z+y-h.z-_+e(g._,h._),w>0&&(Bj(Vj(g,c,f),c,w),_+=w,p+=w),y+=g.m,_+=h.m,x+=m.m,p+=d.m;g&&!xp(d)&&(d.t=g,d.m+=y-p),h&&!wp(m)&&(m.t=h,m.m+=_-x,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return r.separation=function(c){return arguments.length?(e=c,r):e},r.size=function(c){return arguments.length?(i=!1,t=+c[0],n=+c[1],r):i?null:[t,n]},r.nodeSize=function(c){return arguments.length?(i=!0,t=+c[0],n=+c[1],r):i?[t,n]:null},r}const Hj=1664525,jj=1013904223,ZE=1/4294967296;function Dw(e=Math.random()){let t=(0<=e&&e<1?e/ZE:Math.abs(e))|0;return()=>(t=Hj*t+jj|0,ZE*(t>>>0))}function ar(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Pm(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const T_=Symbol("implicit");function $w(){var e=new ta,t=[],n=[],i=T_;function r(s){let o=e.get(s);if(o===void 0){if(i!==T_)return i;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ta;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return $w(t,n).unknown(i)},ar.apply(r,arguments),r}function Fm(){var e=$w().unknown(void 0),t=e.domain,n=e.range,i=0,r=1,s,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var h=t().length,d=r<i,g=d?r:i,m=d?i:r;s=(m-g)/Math.max(1,h-l+c*2),a&&(s=Math.floor(s)),g+=(m-g-s*(h-l))*u,o=s*(1-l),a&&(g=Math.round(g),o=Math.round(o));var _=ei(h).map(function(p){return g+s*p});return n(d?_.reverse():_)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,f()):[i,r]},e.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(a=!!h,f()):a},e.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return Fm(t(),[i,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},ar.apply(f(),arguments)}function HA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return HA(t())},e}function Zj(){return HA(Fm.apply(null,arguments).paddingInner(1))}function qj(e){return function(){return e}}function C_(e){return+e}var qE=[0,1];function ii(e){return e}function S_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:qj(isNaN(t)?NaN:.5)}function Kj(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Jj(e,t,n){var i=e[0],r=e[1],s=t[0],o=t[1];return r<i?(i=S_(r,i),s=n(o,s)):(i=S_(i,r),s=n(s,o)),function(a){return s(i(a))}}function Qj(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=S_(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=vm(e,a,1,i)-1;return s[l](r[l](a))}}function xf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Nm(){var e=qE,t=qE,n=pf,i,r,s,o=ii,a,l,c;function u(){var h=Math.min(e.length,t.length);return o!==ii&&(o=Kj(e[0],e[h-1])),a=h>2?Qj:Jj,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(e.map(i),t,n)))(i(o(h)))}return f.invert=function(h){return o(r((c||(c=a(t,e.map(i),Je)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,C_),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=Sw,u()},f.clamp=function(h){return arguments.length?(o=h?!0:ii,u()):o!==ii},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return i=h,r=d,u()}}function jA(){return Nm()(ii,ii)}function tZ(e,t,n,i){var r=By(e,t,n),s;switch(i=Fu(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=cH(r,o))&&(i.precision=s),aA(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=uH(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=lH(r))&&(i.precision=s-(i.type==="%")*2);break}}return nc(i)}function bf(e){var t=e.domain;return e.ticks=function(n){var i=t();return Bs(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return tZ(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,o=i[r],a=i[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);u-- >0;){if(c=Au(o,a,n),c===l)return i[r]=o,i[s]=a,t(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function zw(){var e=jA();return e.copy=function(){return xf(e,zw())},ar.apply(e,arguments),bf(e)}function ZA(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,C_),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return ZA(e).unknown(t)},e=arguments.length?Array.from(e,C_):[0,1],bf(n)}function qA(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],s=e[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),e[n]=t.floor(r),e[i]=t.ceil(s),e}function KE(e){return Math.log(e)}function JE(e){return Math.exp(e)}function eZ(e){return-Math.log(-e)}function nZ(e){return-Math.exp(-e)}function iZ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function rZ(e){return e===10?iZ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function sZ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function QE(e){return(t,n)=>-e(-t,n)}function KA(e){const t=e(KE,JE),n=t.domain;let i=10,r,s;function o(){return r=sZ(i),s=rZ(i),n()[0]<0?(r=QE(r),s=QE(s),e(eZ,nZ)):e(KE,JE),t}return t.base=function(a){return arguments.length?(i=+a,o()):i},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=r(c),d=r(u),g,m;const _=a==null?10:+a;let p=[];if(!(i%1)&&d-h<_){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(g=1;g<i;++g)if(m=h<0?g/s(-h):g*s(h),!(m<c)){if(m>u)break;p.push(m)}}else for(;h<=d;++h)for(g=i-1;g>=1;--g)if(m=h>0?g/s(-h):g*s(h),!(m<c)){if(m>u)break;p.push(m)}p.length*2<_&&(p=Bs(c,u,_))}else p=Bs(h,d,Math.min(d-h,_)).map(s);return f?p.reverse():p},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Fu(l)).precision==null&&(l.trim=!0),l=nc(l)),a===1/0)return l;const c=Math.max(1,i*a/t.ticks().length);return u=>{let f=u/s(Math.round(r(u)));return f*i<i-.5&&(f*=i),f<=c?l(u):""}},t.nice=()=>n(qA(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),t}function JA(){const e=KA(Nm()).domain([1,10]);return e.copy=()=>xf(e,JA()).base(e.base()),ar.apply(e,arguments),e}function tT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function eT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function QA(e){var t=1,n=e(tT(t),eT(t));return n.constant=function(i){return arguments.length?e(tT(t=+i),eT(t)):t},bf(n)}function t3(){var e=QA(Nm());return e.copy=function(){return xf(e,t3()).constant(e.constant())},ar.apply(e,arguments)}function nT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oZ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function aZ(e){return e<0?-e*e:e*e}function e3(e){var t=e(ii,ii),n=1;function i(){return n===1?e(ii,ii):n===.5?e(oZ,aZ):e(nT(n),nT(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},bf(t)}function n3(){var e=e3(Nm());return e.copy=function(){return xf(e,n3()).exponent(e.exponent())},ar.apply(e,arguments),e}function i3(){var e=[],t=[],n=[],i;function r(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=RY(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?i:t[vm(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(me),r()},s.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return i3().domain(e).range(t).unknown(i)},ar.apply(s,arguments)}function r3(){var e=[.5],t=[0,1],n,i=1;function r(s){return s!=null&&s<=s?t[vm(e,s,0,i)]:n}return r.domain=function(s){return arguments.length?(e=Array.from(s),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(s){return arguments.length?(t=Array.from(s),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return r3().domain(e).range(t).unknown(n)},ar.apply(r,arguments)}const bp=new Date,vp=new Date;function Pe(e,t,n,i){function r(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(e(s=new Date(+s)),s),r.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),e(s);while(c<s&&s<o);return l},r.filter=s=>Pe(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(r.count=(s,o)=>(bp.setTime(+s),vp.setTime(+o),e(bp),e(vp),Math.floor(n(bp,vp))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const dg=Pe(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);dg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Pe(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):dg);dg.range;const kr=1e3,ri=kr*60,Pr=ri*60,Xr=Pr*24,Gw=Xr*7,iT=Xr*30,Ep=Xr*365,qi=Pe(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*kr)},(e,t)=>(t-e)/kr,e=>e.getUTCSeconds());qi.range;const Dm=Pe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kr)},(e,t)=>{e.setTime(+e+t*ri)},(e,t)=>(t-e)/ri,e=>e.getMinutes());Dm.range;const vf=Pe(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ri)},(e,t)=>(t-e)/ri,e=>e.getUTCMinutes());vf.range;const $m=Pe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kr-e.getMinutes()*ri)},(e,t)=>{e.setTime(+e+t*Pr)},(e,t)=>(t-e)/Pr,e=>e.getHours());$m.range;const Ef=Pe(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Pr)},(e,t)=>(t-e)/Pr,e=>e.getUTCHours());Ef.range;const pa=Pe(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ri)/Xr,e=>e.getDate()-1);pa.range;const zm=Pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xr,e=>e.getUTCDate()-1);zm.range;const Gm=Pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xr,e=>Math.floor(e/Xr));Gm.range;function ya(e){return Pe(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ri)/Gw)}const Pl=ya(0),Du=ya(1),s3=ya(2),o3=ya(3),aa=ya(4),a3=ya(5),l3=ya(6);Pl.range;Du.range;s3.range;o3.range;aa.range;a3.range;l3.range;function _a(e){return Pe(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Gw)}const Fl=_a(0),$u=_a(1),c3=_a(2),u3=_a(3),la=_a(4),f3=_a(5),h3=_a(6);Fl.range;$u.range;c3.range;u3.range;la.range;f3.range;h3.range;const Tf=Pe(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Tf.range;const Cf=Pe(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Cf.range;const Oi=Pe(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Oi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pe(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Oi.range;const ki=Pe(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ki.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pe(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ki.range;function d3(e,t,n,i,r,s){const o=[[qi,1,kr],[qi,5,5*kr],[qi,15,15*kr],[qi,30,30*kr],[s,1,ri],[s,5,5*ri],[s,15,15*ri],[s,30,30*ri],[r,1,Pr],[r,3,3*Pr],[r,6,6*Pr],[r,12,12*Pr],[i,1,Xr],[i,2,2*Xr],[n,1,Gw],[t,1,iT],[t,3,3*iT],[e,1,Ep]];function a(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),g=d?d.range(c,+u+1):[];return h?g.reverse():g}function l(c,u,f){const h=Math.abs(u-c)/f,d=bm(([,,_])=>_).right(o,h);if(d===o.length)return e.every(By(c/Ep,u/Ep,f));if(d===0)return dg.every(Math.max(By(c,u,f),1));const[g,m]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return g.every(m)}return[a,l]}const[lZ,g3]=d3(ki,Cf,Fl,Gm,Ef,vf),[cZ,uZ]=d3(Oi,Tf,Pl,pa,$m,Dm);function Tp(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Cp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Mc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function fZ(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Rc(r),u=Ic(r),f=Rc(s),h=Ic(s),d=Rc(o),g=Ic(o),m=Rc(a),_=Ic(a),p=Rc(l),y=Ic(l),x={a:N,A:G,b:j,B:U,c:null,d:cT,e:cT,f:PZ,g:UZ,G:XZ,H:LZ,I:OZ,j:kZ,L:m3,m:FZ,M:NZ,p:Z,q:z,Q:hT,s:dT,S:DZ,u:$Z,U:zZ,V:GZ,w:WZ,W:YZ,x:null,X:null,y:BZ,Y:VZ,Z:HZ,"%":fT},w={a:Q,A:nt,b:st,B:ot,c:null,d:uT,e:uT,f:KZ,g:aq,G:cq,H:jZ,I:ZZ,j:qZ,L:y3,m:JZ,M:QZ,p:$,q:B,Q:hT,s:dT,S:tq,u:eq,U:nq,V:iq,w:rq,W:sq,x:null,X:null,y:oq,Y:lq,Z:uq,"%":fT},v={a:S,A:R,b:M,B:k,c:O,d:aT,e:aT,f:MZ,g:oT,G:sT,H:lT,I:lT,j:EZ,L:SZ,m:vZ,M:TZ,p:I,q:bZ,Q:IZ,s:AZ,S:CZ,u:pZ,U:yZ,V:_Z,w:mZ,W:wZ,x:A,X:P,y:oT,Y:sT,Z:xZ,"%":RZ};x.x=b(n,x),x.X=b(i,x),x.c=b(t,x),w.x=b(n,w),w.X=b(i,w),w.c=b(t,w);function b(D,V){return function(K){var T=[],L=-1,F=0,W=D.length,Y,H,rt;for(K instanceof Date||(K=new Date(+K));++L<W;)D.charCodeAt(L)===37&&(T.push(D.slice(F,L)),(H=rT[Y=D.charAt(++L)])!=null?Y=D.charAt(++L):H=Y==="e"?" ":"0",(rt=V[Y])&&(Y=rt(K,H)),T.push(Y),F=L+1);return T.push(D.slice(F,L)),T.join("")}}function E(D,V){return function(K){var T=Mc(1900,void 0,1),L=C(T,D,K+="",0),F,W;if(L!=K.length)return null;if("Q"in T)return new Date(T.Q);if("s"in T)return new Date(T.s*1e3+("L"in T?T.L:0));if(V&&!("Z"in T)&&(T.Z=0),"p"in T&&(T.H=T.H%12+T.p*12),T.m===void 0&&(T.m="q"in T?T.q:0),"V"in T){if(T.V<1||T.V>53)return null;"w"in T||(T.w=1),"Z"in T?(F=Cp(Mc(T.y,0,1)),W=F.getUTCDay(),F=W>4||W===0?$u.ceil(F):$u(F),F=zm.offset(F,(T.V-1)*7),T.y=F.getUTCFullYear(),T.m=F.getUTCMonth(),T.d=F.getUTCDate()+(T.w+6)%7):(F=Tp(Mc(T.y,0,1)),W=F.getDay(),F=W>4||W===0?Du.ceil(F):Du(F),F=pa.offset(F,(T.V-1)*7),T.y=F.getFullYear(),T.m=F.getMonth(),T.d=F.getDate()+(T.w+6)%7)}else("W"in T||"U"in T)&&("w"in T||(T.w="u"in T?T.u%7:"W"in T?1:0),W="Z"in T?Cp(Mc(T.y,0,1)).getUTCDay():Tp(Mc(T.y,0,1)).getDay(),T.m=0,T.d="W"in T?(T.w+6)%7+T.W*7-(W+5)%7:T.w+T.U*7-(W+6)%7);return"Z"in T?(T.H+=T.Z/100|0,T.M+=T.Z%100,Cp(T)):Tp(T)}}function C(D,V,K,T){for(var L=0,F=V.length,W=K.length,Y,H;L<F;){if(T>=W)return-1;if(Y=V.charCodeAt(L++),Y===37){if(Y=V.charAt(L++),H=v[Y in rT?V.charAt(L++):Y],!H||(T=H(D,K,T))<0)return-1}else if(Y!=K.charCodeAt(T++))return-1}return T}function I(D,V,K){var T=c.exec(V.slice(K));return T?(D.p=u.get(T[0].toLowerCase()),K+T[0].length):-1}function S(D,V,K){var T=d.exec(V.slice(K));return T?(D.w=g.get(T[0].toLowerCase()),K+T[0].length):-1}function R(D,V,K){var T=f.exec(V.slice(K));return T?(D.w=h.get(T[0].toLowerCase()),K+T[0].length):-1}function M(D,V,K){var T=p.exec(V.slice(K));return T?(D.m=y.get(T[0].toLowerCase()),K+T[0].length):-1}function k(D,V,K){var T=m.exec(V.slice(K));return T?(D.m=_.get(T[0].toLowerCase()),K+T[0].length):-1}function O(D,V,K){return C(D,t,V,K)}function A(D,V,K){return C(D,n,V,K)}function P(D,V,K){return C(D,i,V,K)}function N(D){return o[D.getDay()]}function G(D){return s[D.getDay()]}function j(D){return l[D.getMonth()]}function U(D){return a[D.getMonth()]}function Z(D){return r[+(D.getHours()>=12)]}function z(D){return 1+~~(D.getMonth()/3)}function Q(D){return o[D.getUTCDay()]}function nt(D){return s[D.getUTCDay()]}function st(D){return l[D.getUTCMonth()]}function ot(D){return a[D.getUTCMonth()]}function $(D){return r[+(D.getUTCHours()>=12)]}function B(D){return 1+~~(D.getUTCMonth()/3)}return{format:function(D){var V=b(D+="",x);return V.toString=function(){return D},V},parse:function(D){var V=E(D+="",!1);return V.toString=function(){return D},V},utcFormat:function(D){var V=b(D+="",w);return V.toString=function(){return D},V},utcParse:function(D){var V=E(D+="",!0);return V.toString=function(){return D},V}}}var rT={"-":"",_:" ",0:"0"},Ve=/^\s*\d+/,hZ=/^%/,dZ=/[\\^$*+?|[\]().{}]/g;function Yt(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function gZ(e){return e.replace(dZ,"\\$&")}function Rc(e){return new RegExp("^(?:"+e.map(gZ).join("|")+")","i")}function Ic(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function mZ(e,t,n){var i=Ve.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function pZ(e,t,n){var i=Ve.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function yZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function _Z(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function wZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function sT(e,t,n){var i=Ve.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function oT(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function xZ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function bZ(e,t,n){var i=Ve.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function vZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function aT(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function EZ(e,t,n){var i=Ve.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function lT(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function TZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function CZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function SZ(e,t,n){var i=Ve.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function MZ(e,t,n){var i=Ve.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function RZ(e,t,n){var i=hZ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function IZ(e,t,n){var i=Ve.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function AZ(e,t,n){var i=Ve.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function cT(e,t){return Yt(e.getDate(),t,2)}function LZ(e,t){return Yt(e.getHours(),t,2)}function OZ(e,t){return Yt(e.getHours()%12||12,t,2)}function kZ(e,t){return Yt(1+pa.count(Oi(e),e),t,3)}function m3(e,t){return Yt(e.getMilliseconds(),t,3)}function PZ(e,t){return m3(e,t)+"000"}function FZ(e,t){return Yt(e.getMonth()+1,t,2)}function NZ(e,t){return Yt(e.getMinutes(),t,2)}function DZ(e,t){return Yt(e.getSeconds(),t,2)}function $Z(e){var t=e.getDay();return t===0?7:t}function zZ(e,t){return Yt(Pl.count(Oi(e)-1,e),t,2)}function p3(e){var t=e.getDay();return t>=4||t===0?aa(e):aa.ceil(e)}function GZ(e,t){return e=p3(e),Yt(aa.count(Oi(e),e)+(Oi(e).getDay()===4),t,2)}function WZ(e){return e.getDay()}function YZ(e,t){return Yt(Du.count(Oi(e)-1,e),t,2)}function BZ(e,t){return Yt(e.getFullYear()%100,t,2)}function UZ(e,t){return e=p3(e),Yt(e.getFullYear()%100,t,2)}function VZ(e,t){return Yt(e.getFullYear()%1e4,t,4)}function XZ(e,t){var n=e.getDay();return e=n>=4||n===0?aa(e):aa.ceil(e),Yt(e.getFullYear()%1e4,t,4)}function HZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Yt(t/60|0,"0",2)+Yt(t%60,"0",2)}function uT(e,t){return Yt(e.getUTCDate(),t,2)}function jZ(e,t){return Yt(e.getUTCHours(),t,2)}function ZZ(e,t){return Yt(e.getUTCHours()%12||12,t,2)}function qZ(e,t){return Yt(1+zm.count(ki(e),e),t,3)}function y3(e,t){return Yt(e.getUTCMilliseconds(),t,3)}function KZ(e,t){return y3(e,t)+"000"}function JZ(e,t){return Yt(e.getUTCMonth()+1,t,2)}function QZ(e,t){return Yt(e.getUTCMinutes(),t,2)}function tq(e,t){return Yt(e.getUTCSeconds(),t,2)}function eq(e){var t=e.getUTCDay();return t===0?7:t}function nq(e,t){return Yt(Fl.count(ki(e)-1,e),t,2)}function _3(e){var t=e.getUTCDay();return t>=4||t===0?la(e):la.ceil(e)}function iq(e,t){return e=_3(e),Yt(la.count(ki(e),e)+(ki(e).getUTCDay()===4),t,2)}function rq(e){return e.getUTCDay()}function sq(e,t){return Yt($u.count(ki(e)-1,e),t,2)}function oq(e,t){return Yt(e.getUTCFullYear()%100,t,2)}function aq(e,t){return e=_3(e),Yt(e.getUTCFullYear()%100,t,2)}function lq(e,t){return Yt(e.getUTCFullYear()%1e4,t,4)}function cq(e,t){var n=e.getUTCDay();return e=n>=4||n===0?la(e):la.ceil(e),Yt(e.getUTCFullYear()%1e4,t,4)}function uq(){return"+0000"}function fT(){return"%"}function hT(e){return+e}function dT(e){return Math.floor(+e/1e3)}var Pa,Ww,Sf;fq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fq(e){return Pa=fZ(e),Ww=Pa.format,Pa.parse,Sf=Pa.utcFormat,Pa.utcParse,Pa}function hq(e){return new Date(e)}function dq(e){return e instanceof Date?+e:+new Date(+e)}function Yw(e,t,n,i,r,s,o,a,l,c){var u=jA(),f=u.invert,h=u.domain,d=c(".%L"),g=c(":%S"),m=c("%I:%M"),_=c("%I %p"),p=c("%a %d"),y=c("%b %d"),x=c("%B"),w=c("%Y");function v(b){return(l(b)<b?d:a(b)<b?g:o(b)<b?m:s(b)<b?_:i(b)<b?r(b)<b?p:y:n(b)<b?x:w)(b)}return u.invert=function(b){return new Date(f(b))},u.domain=function(b){return arguments.length?h(Array.from(b,dq)):h().map(hq)},u.ticks=function(b){var E=h();return e(E[0],E[E.length-1],b??10)},u.tickFormat=function(b,E){return E==null?v:c(E)},u.nice=function(b){var E=h();return(!b||typeof b.range!="function")&&(b=t(E[0],E[E.length-1],b??10)),b?h(qA(E,b)):u},u.copy=function(){return xf(u,Yw(e,t,n,i,r,s,o,a,l,c))},u}function gq(){return ar.apply(Yw(cZ,uZ,Oi,Tf,Pl,pa,$m,Dm,qi,Ww).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function mq(){return ar.apply(Yw(lZ,g3,ki,Cf,Fl,zm,Ef,vf,qi,Sf).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Wm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ym(){var e=0,t=.5,n=1,i=1,r,s,o,a,l,c=ii,u,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-s)*(i*m<i*s?a:l),c(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t,n]=m,r=u(e=+e),s=u(t=+t),o=u(n=+n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d):[e,t,n]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(c=m,d):c};function g(m){return function(_){var p,y,x;return arguments.length?([p,y,x]=_,c=Im(m,[p,y,x]),d):[c(0),c(.5),c(1)]}}return d.range=g(pf),d.rangeRound=g(Sw),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return u=m,r=m(e),s=m(t),o=m(n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d}}function w3(){var e=bf(Ym()(ii));return e.copy=function(){return Wm(e,w3())},Pm.apply(e,arguments)}function x3(){var e=KA(Ym()).domain([.1,1,10]);return e.copy=function(){return Wm(e,x3()).base(e.base())},Pm.apply(e,arguments)}function b3(){var e=QA(Ym());return e.copy=function(){return Wm(e,b3()).constant(e.constant())},Pm.apply(e,arguments)}function v3(){var e=e3(Ym());return e.copy=function(){return Wm(e,v3()).exponent(e.exponent())},Pm.apply(e,arguments)}function Mt(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const pq=Mt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),yq=Mt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),_q=Mt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),wq=Mt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),xq=Mt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),bq=Mt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),vq=Mt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Eq=Mt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Tq=Mt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Cq=Mt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ne=e=>BU(e[e.length-1]);var E3=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Mt);const T3=ne(E3);var C3=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Mt);const S3=ne(C3);var M3=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Mt);const R3=ne(M3);var I3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Mt);const A3=ne(I3);var M_=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Mt);const gg=ne(M_);var L3=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Mt);const O3=ne(L3);var R_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Mt);const mg=ne(R_);var k3=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Mt);const P3=ne(k3);var F3=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Mt);const N3=ne(F3);var D3=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Mt);const $3=ne(D3);var z3=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Mt);const G3=ne(z3);var W3=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Mt);const Y3=ne(W3);var B3=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Mt);const U3=ne(B3);var V3=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Mt);const X3=ne(V3);var H3=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Mt);const j3=ne(H3);var Z3=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Mt);const q3=ne(Z3);var K3=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Mt);const J3=ne(K3);var Q3=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Mt);const t6=ne(Q3);var e6=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Mt);const n6=ne(e6);var i6=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Mt);const r6=ne(i6);var s6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Mt);const o6=ne(s6);var a6=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Mt);const l6=ne(a6);var c6=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Mt);const u6=ne(c6);var f6=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Mt);const h6=ne(f6);var d6=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Mt);const g6=ne(d6);var m6=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Mt);const p6=ne(m6);var y6=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Mt);const _6=ne(y6);function w6(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const x6=Mw(sr(300,.5,0),sr(-240,.5,1));var b6=Mw(sr(-100,.75,.35),sr(80,1.5,.8)),v6=Mw(sr(260,.75,.35),sr(80,1.5,.8)),Ih=sr();function E6(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Ih.h=360*e-100,Ih.s=1.5-1.5*t,Ih.l=.8-.9*t,Ih+""}var Ah=rr(),Sq=Math.PI/3,Mq=Math.PI*2/3;function T6(e){var t;return e=(.5-e)*Math.PI,Ah.r=255*(t=Math.sin(e))*t,Ah.g=255*(t=Math.sin(e+Sq))*t,Ah.b=255*(t=Math.sin(e+Mq))*t,Ah+""}function C6(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Bm(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const S6=Bm(Mt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var M6=Bm(Mt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),R6=Bm(Mt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),I6=Bm(Mt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ze(e){return function(){return e}}const A6=Math.cos,Bw=Math.min,pg=Math.sin,Fe=Math.sqrt,gT=1e-12,yg=Math.PI,Um=2*yg;function L6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new rA(t)}function O6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function k6(e){this._context=e}k6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Mf(e){return new k6(e)}function P6(e){return e[0]}function F6(e){return e[1]}function N6(e,t){var n=ze(!0),i=null,r=Mf,s=null,o=L6(a);e=typeof e=="function"?e:e===void 0?P6:ze(e),t=typeof t=="function"?t:t===void 0?F6:ze(t);function a(l){var c,u=(l=O6(l)).length,f,h=!1,d;for(i==null&&(s=r(d=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,c,l),+t(f,c,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:ze(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:ze(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ze(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),a):i},a}function Uw(e,t,n){var i=null,r=ze(!0),s=null,o=Mf,a=null,l=L6(c);e=typeof e=="function"?e:e===void 0?P6:ze(+e),t=typeof t=="function"?t:ze(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?F6:ze(+n);function c(f){var h,d,g,m=(f=O6(f)).length,_,p=!1,y,x=new Array(m),w=new Array(m);for(s==null&&(a=o(y=l())),h=0;h<=m;++h){if(!(h<m&&r(_=f[h],h,f))===p)if(p=!p)d=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=h-1;g>=d;--g)a.point(x[g],w[g]);a.lineEnd(),a.areaEnd()}p&&(x[h]=+e(_,h,f),w[h]=+t(_,h,f),a.point(i?+i(_,h,f):x[h],n?+n(_,h,f):w[h]))}if(y)return a=null,y+""||null}function u(){return N6().defined(r).curve(o).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:ze(+f),i=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ze(+f),c):e},c.x1=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:ze(+f),c):i},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:ze(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ze(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ze(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(i).y(t)},c.defined=function(f){return arguments.length?(r=typeof f=="function"?f:ze(!!f),c):r},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class D6{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Rq(e){return new D6(e,!0)}function Iq(e){return new D6(e,!1)}const Aq=Fe(3),$6={draw(e,t){const n=Fe(t+Bw(t/28,.75))*.59436,i=n/2,r=i*Aq;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-r,-i),e.lineTo(r,i),e.moveTo(-r,i),e.lineTo(r,-i)}},zu={draw(e,t){const n=Fe(t/yg);e.moveTo(n,0),e.arc(0,0,n,0,Um)}},z6={draw(e,t){const n=Fe(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},G6=Fe(1/3),Lq=G6*2,W6={draw(e,t){const n=Fe(t/Lq),i=n*G6;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},Y6={draw(e,t){const n=Fe(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},B6={draw(e,t){const n=Fe(t-Bw(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},U6={draw(e,t){const n=Fe(t),i=-n/2;e.rect(i,i,n,n)}},V6={draw(e,t){const n=Fe(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},Oq=.8908130915292852,X6=pg(yg/10)/pg(7*yg/10),kq=pg(Um/10)*X6,Pq=-A6(Um/10)*X6,H6={draw(e,t){const n=Fe(t*Oq),i=kq*n,r=Pq*n;e.moveTo(0,-n),e.lineTo(i,r);for(let s=1;s<5;++s){const o=Um*s/5,a=A6(o),l=pg(o);e.lineTo(l*n,-a*n),e.lineTo(a*i-l*r,l*i+a*r)}e.closePath()}},Sp=Fe(3),j6={draw(e,t){const n=-Fe(t/(Sp*3));e.moveTo(0,n*2),e.lineTo(-Sp*n,-n),e.lineTo(Sp*n,-n),e.closePath()}},Fq=Fe(3),Z6={draw(e,t){const n=Fe(t)*.6824,i=n/2,r=n*Fq/2;e.moveTo(0,-n),e.lineTo(r,i),e.lineTo(-r,i),e.closePath()}},qn=-.5,Kn=Fe(3)/2,I_=1/Fe(12),Nq=(I_/2+1)*3,q6={draw(e,t){const n=Fe(t/Nq),i=n/2,r=n*I_,s=i,o=n*I_+n,a=-s,l=o;e.moveTo(i,r),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(qn*i-Kn*r,Kn*i+qn*r),e.lineTo(qn*s-Kn*o,Kn*s+qn*o),e.lineTo(qn*a-Kn*l,Kn*a+qn*l),e.lineTo(qn*i+Kn*r,qn*r-Kn*i),e.lineTo(qn*s+Kn*o,qn*o-Kn*s),e.lineTo(qn*a+Kn*l,qn*l-Kn*a),e.closePath()}},K6={draw(e,t){const n=Fe(t-Bw(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},Dq=[zu,z6,W6,U6,H6,j6,q6],$q=[zu,B6,K6,Z6,$6,V6,Y6];function Vs(){}function _g(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Vm(e){this._context=e}Vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_g(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_g(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zq(e){return new Vm(e)}function J6(e){this._context=e}J6.prototype={areaStart:Vs,areaEnd:Vs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:_g(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Gq(e){return new J6(e)}function Q6(e){this._context=e}Q6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:_g(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wq(e){return new Q6(e)}function tL(e,t){this._basis=new Vm(e),this._beta=t}tL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],s=e[n]-i,o=t[n]-r,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(i+l*s),this._beta*t[a]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Yq=function e(t){function n(i){return t===1?new Vm(i):new tL(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function wg(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Vw(e,t){this._context=e,this._k=(1-t)/6}Vw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:wg(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:wg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bq=function e(t){function n(i){return new Vw(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Xw(e,t){this._context=e,this._k=(1-t)/6}Xw.prototype={areaStart:Vs,areaEnd:Vs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:wg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Uq=function e(t){function n(i){return new Xw(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Hw(e,t){this._context=e,this._k=(1-t)/6}Hw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vq=function e(t){function n(i){return new Hw(i,t)}return n.tension=function(i){return e(+i)},n}(0);function jw(e,t,n){var i=e._x1,r=e._y1,s=e._x2,o=e._y2;if(e._l01_a>gT){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>gT){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(i,r,s,o,e._x2,e._y2)}function eL(e,t){this._context=e,this._alpha=t}eL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:jw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xq=function e(t){function n(i){return t?new eL(i,t):new Vw(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function nL(e,t){this._context=e,this._alpha=t}nL.prototype={areaStart:Vs,areaEnd:Vs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:jw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hq=function e(t){function n(i){return t?new nL(i,t):new Xw(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function iL(e,t){this._context=e,this._alpha=t}iL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jq=function e(t){function n(i){return t?new iL(i,t):new Hw(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function rL(e){this._context=e}rL.prototype={areaStart:Vs,areaEnd:Vs,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Zq(e){return new rL(e)}function mT(e){return e<0?-1:1}function pT(e,t,n){var i=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(i||r<0&&-0),o=(n-e._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(mT(s)+mT(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function yT(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Mp(e,t,n){var i=e._x0,r=e._y0,s=e._x1,o=e._y1,a=(s-i)/3;e._context.bezierCurveTo(i+a,r+a*t,s-a,o-a*n,s,o)}function xg(e){this._context=e}xg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Mp(this,this._t0,yT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Mp(this,yT(this,n=pT(this,e,t)),n);break;default:Mp(this,this._t0,n=pT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function sL(e){this._context=new oL(e)}(sL.prototype=Object.create(xg.prototype)).point=function(e,t){xg.prototype.point.call(this,t,e)};function oL(e){this._context=e}oL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,s){this._context.bezierCurveTo(t,e,i,n,s,r)}};function qq(e){return new xg(e)}function Kq(e){return new sL(e)}function aL(e){this._context=e}aL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=_T(e),r=_T(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function _T(e){var t,n=e.length-1,i,r=new Array(n),s=new Array(n),o=new Array(n);for(r[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/s[t-1],s[t]-=i,o[t]-=i*o[t-1];for(r[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)r[t]=(o[t]-r[t+1])/s[t];for(s[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function Jq(e){return new aL(e)}function Xm(e,t){this._context=e,this._t=t}Xm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Qq(e){return new Xm(e,.5)}function tK(e){return new Xm(e,0)}function eK(e){return new Xm(e,1)}function Zc(e,t,n){this.k=e,this.x=t,this.y=n}Zc.prototype={constructor:Zc,scale:function(e){return e===1?this:new Zc(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Zc(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Zc.prototype;function gn(e){return e!=null&&!Number.isNaN(e)}function li(e,t){return+gn(t)-+gn(e)||me(e,t)}function bg(e,t){return+gn(t)-+gn(e)||Qo(e,t)}function Zw(e){return e!=null&&`${e}`!=""}function vg(e){return isFinite(e)?e:NaN}function Gr(e){return e>0&&isFinite(e)?e:NaN}function Hm(e){return e<0&&isFinite(e)?e:NaN}function nK(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${iK(e.getUTCFullYear())}-${Sr(e.getUTCMonth()+1,2)}-${Sr(e.getUTCDate(),2)}${n||i||r||s?`T${Sr(n,2)}:${Sr(i,2)}${r||s?`:${Sr(r,2)}${s?`.${Sr(s,3)}`:""}`:""}Z`:""}`}function iK(e){return e<0?`-${Sr(-e,6)}`:e>9999?`+${Sr(e,6)}`:Sr(e,4)}function Sr(e,t){return`${e}`.padStart(t,"0")}const rK=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function lL(e,t){return rK.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const ja=1e3,Oo=ja*60,ko=Oo*60,Hr=ko*24,zi=Hr*7,Ho=Hr*30,_s=Hr*365,Rp=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",ja],["5 seconds",5*ja],["15 seconds",15*ja],["30 seconds",30*ja],["minute",Oo],["5 minutes",5*Oo],["15 minutes",15*Oo],["30 minutes",30*Oo],["hour",ko],["3 hours",3*ko],["6 hours",6*ko],["12 hours",12*ko],["day",Hr],["2 days",2*Hr],["week",zi],["2 weeks",2*zi],["month",Ho],["3 months",3*Ho],["6 months",6*Ho],["year",_s],["2 years",2*_s],["5 years",5*_s],["10 years",10*_s],["20 years",20*_s],["50 years",50*_s],["100 years",100*_s]],qw=new Map([["second",ja],["minute",Oo],["hour",ko],["day",Hr],["monday",zi],["tuesday",zi],["wednesday",zi],["thursday",zi],["friday",zi],["saturday",zi],["sunday",zi],["week",zi],["month",Ho],["year",_s]]),cL=new Map([["second",qi],["minute",Dm],["hour",$m],["day",pa],["monday",Du],["tuesday",s3],["wednesday",o3],["thursday",aa],["friday",a3],["saturday",l3],["sunday",Pl],["week",Pl],["month",Tf],["year",Oi]]),uL=new Map([["second",qi],["minute",vf],["hour",Ef],["day",Gm],["monday",$u],["tuesday",c3],["wednesday",u3],["thursday",la],["friday",f3],["saturday",h3],["sunday",Fl],["week",Fl],["month",Cf],["year",ki]]),Rf=Symbol("intervalDuration"),jm=Symbol("intervalType");for(const[e,t]of cL)t[Rf]=qw.get(e),t[jm]="time";for(const[e,t]of uL)t[Rf]=qw.get(e),t[jm]="utc";const sK=[["year",ki,"utc"],["year",Oi,"time"],["month",Cf,"utc"],["month",Tf,"time"],["day",Gm,"utc",6*Ho],["day",pa,"time",6*Ho],["hour",Ef,"utc",3*Hr],["minute",vf,"utc",6*ko],["second",qi,"utc",30*Oo]];function fL(e,t,n){let i=`${e}`.toLowerCase();i.endsWith("s")&&(i=i.slice(0,-1));let r=1;const s=/^(?:(\d+)\s+)/.exec(i);switch(s&&(i=i.slice(s[0].length),r=+s[1]),i){case"quarter":i="month",r*=3;break;case"half":i="month",r*=6;break}let o=t.get(i);if(!o)throw new Error(`unknown interval: ${e}`);if(r>1){if(!o.every)throw new Error(`non-periodic interval: ${i}`);o=o.every(r),o[Rf]=qw.get(i)*r,o[jm]=n}return o}function hL(e){return fL(e,cL,"time")}function Kw(e){return fL(e,uL,"utc")}function wT(e,t){if(!(t>1))return;const n=e[Rf];if(!Rp.some(([,r])=>r===n)||n%Hr===0&&Hr<n&&n<Ho)return;const[i]=Rp[bm(([,r])=>Math.log(r)).center(Rp,Math.log(n*t))];return(e[jm]==="time"?hL:Kw)(i)}function xT(e,t,n){const i=t==="time"?Ww:Sf;if(n==null)return i(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=oK(n);switch(e){case"millisecond":return Fa(i(".%L"),i(":%M:%S"),r);case"second":return Fa(i(":%S"),i("%-I:%M"),r);case"minute":return Fa(i("%-I:%M"),i("%p"),r);case"hour":return Fa(i("%-I %p"),i("%b %-d"),r);case"day":return Fa(i("%-d"),i("%b"),r);case"month":return Fa(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function oK(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function aK(e,t){const n=Ue(LY(e,(i,r)=>Math.abs(r-i)));if(n<1e3)return xT("millisecond","utc",t);for(const[i,r,s,o]of sK){if(n>o||i==="hour"&&!n)break;if(e.every(a=>r.floor(a)>=a))return xT(i,s,t)}}function Fa(e,t,n){return(i,r,s)=>{const o=e(i,r),a=t(i,r),l=r-$l(s);return r!==l&&s[l]!==void 0&&a===t(s[l],l)?o:n(o,a)}}const Nl=Object.getPrototypeOf(Uint8Array),lK=Object.prototype.toString,dL=Symbol("reindex");function Ot(e,t,n){const i=typeof t;return i==="string"?bT(e,gL(t),n):i==="function"?bT(e,t,n):i==="number"||t instanceof Date||i==="boolean"?se(e,Bn(t),n):typeof(t==null?void 0:t.transform)=="function"?vT(t.transform(e),n):cK(vT(t,n),e==null?void 0:e[dL])}function cK(e,t){return t?qm(e,t):e}function bT(e,t,n){return se(e,(n==null?void 0:n.prototype)instanceof Nl?uK(t):t,n)}function vT(e,t){return t===void 0?In(e):e instanceof t?e:t.prototype instanceof Nl&&!(e instanceof Nl)?t.from(e,tx):t.from(e)}function uK(e){return(t,n)=>tx(e(t,n))}const lu=[null],gL=e=>t=>t[e],Ln={transform:ts},wt={transform:e=>e},Jw=()=>1,fK=()=>!0,en=e=>e==null?e:`${e}`,Ft=e=>e==null?e:+e,If=e=>e?e[0]:void 0,Gu=e=>e?e[1]:void 0,hK=e=>e?e[2]:void 0,Bn=e=>()=>e;function Qw(e){const t=+`${e}`.slice(1)/100;return(n,i)=>Us(n,t,i)}function Tn(e){return e instanceof Nl?e:se(e,tx,Float64Array)}function tx(e){return e==null?NaN:Number(e)}function dK(e){return se(e,mL)}function mL(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?lL(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Rn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:Lf(e)?[void 0,e]:[e,void 0]}function Te(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function pL(e,t,n){if(e!=null)return Un(e,t,n)}function Un(e,t,n){const i=`${e}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${t}: ${e}`);return i}function In(e){return e==null||e instanceof Array||e instanceof Nl?e:Array.from(e)}function se(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Wu(e,t=Array){return e instanceof t?e.slice():t.from(e)}function yL({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function _L({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function Zm(e){return yL(e)||_L(e)||e.interval!==void 0}function ci(e){return(e==null?void 0:e.toString)===lK}function jo(e){return ci(e)&&(e.type!==void 0||e.domain!==void 0)}function Yi(e){return ci(e)&&typeof e.transform!="function"}function Xs(e){return Yi(e)&&e.value===void 0&&e.channel===void 0}function wL(e,t,n,i=wt){return t===void 0&&n===void 0?(t=0,n=e===void 0?i:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Di(e,t){return e===void 0&&t===void 0?[If,Gu]:[e,t]}function eo({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Rn(t)),e===void 0&&([e]=Rn(n)),e}function ts(e){const t=e.length,n=new Uint32Array(t);for(let i=0;i<t;++i)n[i]=i;return n}function qm(e,t){return se(t,n=>e[n],e.constructor)}function ex(e){return e.length===1?(t,n)=>e(qm(n,t)):e}function Zo(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Po(e){return e!==null&&typeof e=="object"?e.valueOf():e}function xL(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function $n(e){let t;return[{transform:()=>t,label:es(e)},n=>t=n]}function xn(e){return e==null?[e]:$n(e)}function es(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function Eg(e,t){return{transform(n){const i=e.transform(n),r=t.transform(n);return yn(i)||yn(r)?se(i,(s,o)=>new Date((+i[o]+ +r[o])/2)):se(i,(s,o)=>(+i[o]+ +r[o])/2,Float64Array)},label:e.label}}function Tg(e,t){const n=bL(t==null?void 0:t.interval,t==null?void 0:t.type);return n?se(e,n):e}function bL(e,t){const n=nx(e,t);return n&&(i=>gn(i)?n.floor(i):i)}function nx(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>ei(Math.ceil(i*n),r*n).map(s=>s/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>ei(Math.ceil(i/n),r/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?hL:Kw)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function rc(e,t){if(e=nx(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function gK(e,t){if(e=rc(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function mK(e){return Za(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Za(e){return typeof(e==null?void 0:e.range)=="function"}function Af(e){return e===void 0||Yi(e)?e:{value:e}}function pK(e){return e==null?null:{transform:t=>Ot(t,e,Float64Array),label:es(e)}}function yK(e){if(!ns(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function ns(e){return e&&typeof e[Symbol.iterator]=="function"}function vL(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function ye(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function yn(e){for(const t of e)if(t!=null)return t instanceof Date}function _K(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&lL(t)}function wK(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function qa(e){for(const t of e)if(t!=null)return typeof t=="number"}function Ip(e,t){let n;for(const i of e)if(i!=null){if(!t(i))return!1;n=!0}return n}const xK=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Lf(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||xK.has(e))}function bK(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function ve(e){return e==null||Dl(e)}function Dl(e){return/^\s*none\s*$/i.test(e)}function vK(e){return/^\s*round\s*$/i.test(e)}function EL(e,t){return pL(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Of(e="middle"){return EL(e,"frameAnchor")}function $l(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Qo(t,n)}function EK(e={},...t){let n=e;for(const i of t)for(const r in i)if(n[r]===void 0){const s=i[r];n===e?n={...n,[r]:s}:n[r]=s}return n}function TK(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(t.has(r))throw new Error(`duplicate name: ${r}`);return t.add(r),[i,n]}))}function ix(e){return ns(e)?TK(e):e}const Ki=Symbol("position"),is=Symbol("color"),kf=Symbol("radius"),Pf=Symbol("length"),Ff=Symbol("opacity"),Km=Symbol("symbol"),TL=Symbol("projection"),ge=new Map([["x",Ki],["y",Ki],["fx",Ki],["fy",Ki],["r",kf],["color",is],["opacity",Ff],["symbol",Km],["length",Pf],["projection",TL]]);function CK(e){return e===Ki||e===TL}function SK(e){return e===Ki||e===kf||e===Pf||e===Ff}const CL=Math.sqrt(3),SL=2/CL,MK={draw(e,t){const n=Math.sqrt(t/Math.PI),i=n*SL,r=i/2;e.moveTo(0,i),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(0,-i),e.lineTo(-n,-r),e.lineTo(-n,r),e.closePath()}},rx=new Map([["asterisk",$6],["circle",zu],["cross",z6],["diamond",W6],["diamond2",Y6],["hexagon",MK],["plus",B6],["square",U6],["square2",V6],["star",H6],["times",K6],["triangle",j6],["triangle2",Z6],["wye",q6]]);function sx(e){return e&&typeof e.draw=="function"}function RK(e){return sx(e)?!0:typeof e!="string"?!1:rx.has(e.toLowerCase())}function ox(e){if(e==null||sx(e))return e;const t=rx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function IK(e){if(e==null||sx(e))return[void 0,e];if(typeof e=="string"){const t=rx.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function lr({filter:e,sort:t,reverse:n,transform:i,initializer:r,...s}={},o){if(i===void 0&&(e!=null&&(i=ax(e)),t!=null&&!Xs(t)&&(i=Ap(i,cx(t))),n&&(i=Ap(i,lx))),o!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||Xs(t))&&{sort:t},transform:Ap(i,o)}}function An({filter:e,sort:t,reverse:n,initializer:i,...r}={},s){return i===void 0&&(e!=null&&(i=ax(e)),t!=null&&!Xs(t)&&(i=Lp(i,cx(t))),n&&(i=Lp(i,lx))),{...r,...(t===null||Xs(t))&&{sort:t},initializer:Lp(i,s)}}function Ap(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r){return{data:n,facets:i}=e.call(this,n,i,r),t.call(this,In(n),i,r)}}function Lp(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r,...s){let o,a,l,c,u,f;return{data:a=n,facets:l=i,channels:o}=e.call(this,n,i,r,...s),{data:u=a,facets:f=l,channels:c}=t.call(this,a,l,{...r,...o},...s),{data:u,facets:f,channels:{...o,...c}}}}function Jm(e,t){return(e.initializer!=null?An:lr)(e,t)}function AK(e,t){return Jm(t,ax(e))}function ax(e){return(t,n)=>{const i=Ot(t,e);return{data:t,facets:n.map(r=>r.filter(s=>i[s]))}}}function LK({sort:e,...t}={}){return{...Jm(t,lx),sort:Xs(e)?e:null}}function lx(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function OK({seed:e,sort:t,...n}={}){return{...Jm(n,RL(e==null?Math.random:Dw(e))),sort:Xs(t)?t:null}}function ML(e,{sort:t,...n}={}){return{...(Yi(e)&&e.channel!==void 0?An:Jm)(n,cx(e)),sort:Xs(t)?t:null}}function cx(e){return(typeof e=="function"&&e.length!==1?kK:RL)(e)}function kK(e){return(t,n)=>{const i=(r,s)=>e(t[r],t[s]);return{data:t,facets:n.map(r=>r.slice().sort(i))}}}function RL(e){let t,n;({channel:t,value:e,order:n}={...Af(e)});const i=t==null?void 0:t.startsWith("-");if(i&&(t=t.slice(1)),n===void 0&&(n=i?bg:li),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=li;break;case"descending":n=bg;break;default:throw new Error(`invalid order: ${n}`)}return(r,s,o)=>{let a;if(t===void 0)a=Ot(r,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:r,facets:s.map(c=>c.slice().sort(l))}}}function ux(e,t){return Qm(null,null,e,t)}function Yu(e={y:"count"},t={}){const{x:n=wt}=t;if(n==null)throw new Error("missing channel: x");return Qm(n,null,e,t)}function Bu(e={x:"count"},t={}){const{y:n=wt}=t;if(n==null)throw new Error("missing channel: y");return Qm(null,n,e,t)}function fx(e={fill:"count"},t={}){let{x:n,y:i}=t;if([n,i]=Di(n,i),n==null)throw new Error("missing channel: x");if(i==null)throw new Error("missing channel: y");return Qm(n,i,e,t)}function Qm(e,t,{data:n=px,filter:i,sort:r,reverse:s,...o}={},a={}){o=hx(o,a),n=t0(n,wt),r=r==null?void 0:dx("sort",r,a),i=i==null?void 0:gx("filter",i,a);const[l,c]=xn(e),[u,f]=xn(t),{z:h,fill:d,stroke:g,x1:m,x2:_,y1:p,y2:y,...x}=a,[w,v]=xn(h),[b]=Rn(d),[E]=Rn(g),[C,I]=xn(b),[S,R]=xn(E);return{..."z"in a&&{z:w||h},..."fill"in a&&{fill:C||d},..."stroke"in a&&{stroke:S||g},...lr(x,(M,k,O)=>{const A=Tg(Ot(M,e),O==null?void 0:O.x),P=Tg(Ot(M,t),O==null?void 0:O.y),N=Ot(M,h),G=Ot(M,b),j=Ot(M,E),U=mx(o,{z:N,fill:G,stroke:j}),Z=[],z=[],Q=A&&c([]),nt=P&&f([]),st=N&&v([]),ot=G&&I([]),$=j&&R([]);let B=0;for(const D of o)D.initialize(M);r&&r.initialize(M),i&&i.initialize(M);for(const D of k){const V=[];for(const K of o)K.scope("facet",D);r&&r.scope("facet",D),i&&i.scope("facet",D);for(const[K,T]of ul(D,U))for(const[L,F]of ul(T,P))for(const[W,Y]of ul(F,A))if(!(i&&!i.reduce(Y))){V.push(B++),z.push(n.reduceIndex(Y,M)),A&&Q.push(W),P&&nt.push(L),N&&st.push(U===N?K:N[Y[0]]),G&&ot.push(U===G?K:G[Y[0]]),j&&$.push(U===j?K:j[Y[0]]);for(const H of o)H.reduce(Y);r&&r.reduce(Y)}Z.push(V)}return IL(Z,r,s),{data:z,facets:Z}}),...!Ps(o,"x")&&(l?{x:l}:{x1:m,x2:_}),...!Ps(o,"y")&&(u?{y:u}:{y1:p,y2:y}),...Object.fromEntries(o.map(({name:M,output:k})=>[M,k]))}}function Ps(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function hx(e,t,n=dx){const i=Object.entries(e);return t.title!=null&&e.title===void 0&&i.push(["title",$K]),t.href!=null&&e.href===void 0&&i.push(["href",yx]),i.filter(([,r])=>r!==void 0).map(([r,s])=>s===null?PK(r):n(r,s,t))}function dx(e,t,n,i=gx){let r;ci(t)&&"reduce"in t&&(r=t.scale,t=t.reduce);const s=i(e,t,n),[o,a]=$n(s.label);let l;return{name:e,output:r===void 0?o:{value:o,scale:r},initialize(c){s.initialize(c),l=a([])},scope(c,u){s.scope(c,u)},reduce(c,u){l.push(s.reduce(c,u))}}}function PK(e){return{name:e,initialize(){},scope(){},reduce(){}}}function gx(e,t,n,i=t0){const r=xL(e,n),s=i(t,r);let o,a;return{label:es(s===Cg?null:r,s.label),initialize(l){o=r===void 0?l:Ot(l,r),s.scope==="data"&&(a=s.reduceIndex(ts(l),o))},scope(l,c){s.scope===l&&(a=s.reduceIndex(c,o))},reduce(l,c){return s.scope==null?s.reduceIndex(l,o,c):s.reduceIndex(l,o,a,c)}}}function ul(e,t){return t?Ru(Qr(e,n=>t[n]),If):[[,e]]}function t0(e,t,n=FK){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&ci(e))return NK(e);if(typeof e=="function")return DK(e);if(/^p\d{2}$/i.test(e))return Er(Qw(e));switch(`${e}`.toLowerCase()){case"first":return yx;case"last":return zK;case"identity":return px;case"count":return Cg;case"distinct":return GK;case"sum":return t==null?Cg:WK;case"proportion":return TT(t,"data");case"proportion-facet":return TT(t,"facet");case"deviation":return Er(hf);case"min":return Er(Sn);case"min-index":return Er(MY);case"max":return Er(Ue);case"max-index":return Er(SY);case"mean":return ET(Tm);case"median":return ET(Lu);case"variance":return Er(gw);case"mode":return Er(xI)}return n(e)}function FK(e){throw new Error(`invalid reduce: ${e}`)}function mx(e,t){for(const n in t){const i=t[n];if(i!==void 0&&!e.some(r=>r.name===n))return i}}function IL(e,t,n){if(t){const i=t.output.transform(),r=(s,o)=>li(i[s],i[o]);e.forEach(s=>s.sort(r))}n&&e.forEach(i=>i.reverse())}function NK(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function DK(e){return{reduceIndex(t,n,i){return e(qm(n,t),i)}}}function Er(e){return{reduceIndex(t,n){return e(t,i=>n[i])}}}function ET(e){return{reduceIndex(t,n){const i=e(t,r=>n[r]);return yn(n)?new Date(i):i}}}const px={reduceIndex(e,t){return qm(t,e)}},yx={reduceIndex(e,t){return t[e[0]]}},$K={reduceIndex(e,t){const i=Ru(al(e,s=>s.length,s=>t[s]),Gu),r=i.slice(-5).reverse();if(r.length<i.length){const s=i.slice(0,-4);r[5-1]=[`… ${s.length.toLocaleString("en-US")} more`,ir(s,Gu)]}return r.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},zK={reduceIndex(e,t){return t[e[e.length-1]]}},Cg={label:"Frequency",reduceIndex(e){return e.length}},GK={label:"Distinct",reduceIndex(e,t){const n=new df;for(const i of e)n.add(t[i]);return n.size}},WK=Er(ir);function TT(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:t,reduceIndex:(n,i,r=1)=>ir(n,s=>i[s])/r}}function Uu(e,{scale:t,type:n,value:i,filter:r,hint:s,label:o=es(i)},a){return s===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(s=i.hint),LL(a,{scale:t,type:n,value:Ot(e,i),label:o,filter:r,hint:s})}function AL(e,t){return Object.fromEntries(Object.entries(e).map(([n,i])=>[n,Uu(t,i,n)]))}function _x(e,t){const n=Object.fromEntries(Object.entries(e).map(([i,{scale:r,value:s}])=>{const o=r==null?null:t[r];return[i,o==null?s:se(s,o)]}));return n.channels=e,n}function LL(e,t){const{scale:n,value:i}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Ip(i,Lf)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Ip(i,bK)?null:"opacity";break;case"symbol":n!==!0&&Ip(i,RK)?(t.scale=null,t.value=se(i,ox)):t.scale="symbol";break;default:t.scale=ge.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!ge.has(n))throw new Error(`unknown scale: ${n}`);return t}function YK(e,t,n,i,r){const{order:s,reverse:o,reduce:a=!0,limit:l}=r;for(const c in r){if(!ge.has(c))continue;let{value:u,order:f=s,reverse:h=o,reduce:d=a,limit:g=l}=Af(r[c]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),f=f===void 0?m!==(u==="width"||u==="height")?kL:OL:VK(f),d==null||d===!1)continue;const _=c==="fx"||c==="fy"?UK(t,i[c]):BK(n,c);if(!_)throw new Error(`missing channel for scale: ${c}`);const p=_.value,[y=0,x=1/0]=ns(g)?g:g<0?[g]:[0,g];if(u==null)_.domain=()=>{let w=Array.from(new df(p));return h&&(w=w.reverse()),(y!==0||x!==1/0)&&(w=w.slice(y,x)),w};else{const w=u==="data"?e:u==="height"?CT(n,"y1","y2"):u==="width"?CT(n,"x1","x2"):A_(n,u,u==="y"?"y2":u==="x"?"x2":void 0),v=t0(d===!0?"max":d,w);_.domain=()=>{let b=bY(ts(p),E=>v.reduceIndex(E,w),E=>p[E]);return f&&b.sort(f),h&&b.reverse(),(y!==0||x!==1/0)&&(b=b.slice(y,x)),b.map(If)}}}}function BK(e,t){for(const n in e){const i=e[n];if(i.scale===t)return i}}function UK(e,t){const n=e.original;if(n===e)return t;const i=t.value,r=t.value=[];for(let s=0;s<n.length;++s){const o=i[n[s][0]];for(const a of e[s])r[a]=o}return t}function CT(e,t,n){const i=A_(e,t),r=A_(e,n);return se(r,(s,o)=>Math.abs(s-i[o]),Float64Array)}function A_(e,t,n){let i=e[t];if(!i&&n!==void 0&&(i=e[n]),i)return i.value;throw new Error(`missing channel: ${t}`)}function VK(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return OL;case"descending":return kL}throw new Error(`invalid order: ${e}`)}function OL([e,t],[n,i]){return li(t,i)||li(e,n)}function kL([e,t],[n,i]){return bg(t,i)||li(e,n)}function L_(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function wx(e){let t,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,s)=>r!==i[s]))&&(n=i,t=e(...i)),t)}const XK=wx(e=>new Intl.NumberFormat(e)),HK=wx((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),jK=wx((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function ZK(e="en-US"){const t=XK(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function qK(e="en-US",t="short"){const n=HK(e,t);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2e3,+i)))?n.format(i):void 0}function KK(e="en-US",t="short"){const n=jK(e,t);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2001,0,+i)))?n.format(i):void 0}function PL(e){return nK(e,"Invalid Date")}function JK(e="en-US"){const t=ZK(e);return n=>(n instanceof Date?PL:typeof n=="number"?t:en)(n)}const ca=JK();let O_=0,k_;function QK(){const e=O_;return O_=0,k_=void 0,e}function Wr(e){e!==k_&&(k_=e,console.warn(e),++O_)}const He=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let tJ=0;function ST(){return`plot-clip-${++tJ}`}function FL(e,{title:t,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:g,strokeDasharray:m,strokeDashoffset:_,opacity:p,mixBlendMode:y,imageFilter:x,paintOrder:w,pointerEvents:v,shapeRendering:b,channels:E},{ariaLabel:C,fill:I="currentColor",fillOpacity:S,stroke:R="none",strokeOpacity:M,strokeWidth:k,strokeLinecap:O,strokeLinejoin:A,strokeMiterlimit:P,paintOrder:N}){I===null&&(a=null,l=null),R===null&&(c=null,f=null),ve(I)?!ve(R)&&(!ve(a)||E!=null&&E.fill)&&(R="none"):ve(R)&&(!ve(c)||E!=null&&E.stroke)&&(I="none");const[G,j]=Rn(a,I),[U,Z]=Te(l,S),[z,Q]=Rn(c,R),[nt,st]=Te(f,M),[ot,$]=Te(p);Dl(Q)||(u===void 0&&(u=k),d===void 0&&(d=O),h===void 0&&(h=A),g===void 0&&!vK(h)&&(g=P),!Dl(j)&&w===void 0&&(w=N));const[B,D]=Te(u);return I!==null&&(e.fill=xe(j,"currentColor"),e.fillOpacity=Ac(Z,1)),R!==null&&(e.stroke=xe(Q,"none"),e.strokeWidth=Ac(D,1),e.strokeOpacity=Ac(st,1),e.strokeLinejoin=xe(h,"miter"),e.strokeLinecap=xe(d,"butt"),e.strokeMiterlimit=Ac(g,4),e.strokeDasharray=xe(m,"none"),e.strokeDashoffset=xe(_,"0")),e.target=en(o),e.ariaLabel=en(C),e.ariaDescription=en(r),e.ariaHidden=en(s),e.opacity=Ac($,1),e.mixBlendMode=xe(y,"normal"),e.imageFilter=xe(x,"none"),e.paintOrder=xe(w,"normal"),e.pointerEvents=xe(v,"auto"),e.shapeRendering=xe(b,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:G,scale:"auto",optional:!0},fillOpacity:{value:U,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:nt,scale:"auto",optional:!0},strokeWidth:{value:B,optional:!0},opacity:{value:ot,scale:"auto",optional:!0}}}function eJ(e,t){t&&e.filter(n=>Zw(t[n])).append("title").call(iJ,t)}function nJ(e,t){t&&e.filter(([n])=>Zw(t[n])).append("title").call(rJ,t)}function iJ(e,t){t&&e.text(n=>ca(t[n]))}function rJ(e,t){t&&e.text(([n])=>ca(t[n]))}function Ne(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){i&&mt(e,"aria-label",h=>i[h]),s&&mt(e,"fill",h=>s[h]),o&&mt(e,"fill-opacity",h=>o[h]),a&&mt(e,"stroke",h=>a[h]),l&&mt(e,"stroke-opacity",h=>l[h]),c&&mt(e,"stroke-width",h=>c[h]),u&&mt(e,"opacity",h=>u[h]),f&&$L(e,h=>f[h],t),n||eJ(e,r)}function Sg(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){i&&mt(e,"aria-label",([h])=>i[h]),s&&mt(e,"fill",([h])=>s[h]),o&&mt(e,"fill-opacity",([h])=>o[h]),a&&mt(e,"stroke",([h])=>a[h]),l&&mt(e,"stroke-opacity",([h])=>l[h]),c&&mt(e,"stroke-width",([h])=>c[h]),u&&mt(e,"opacity",([h])=>u[h]),f&&$L(e,([h])=>f[h],t),n||nJ(e,r)}function sJ({ariaLabel:e,title:t,fill:n,fillOpacity:i,stroke:r,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,i,r,s,o,a,l].filter(u=>u!==void 0)}function xx(e,t,n){const i=Qr(e,r=>t[r]);return n===void 0&&i.size>1+e.length>>1&&Wr("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*NL(e,t,n,i){const{z:r}=n,{z:s}=i,o=sJ(i,n),a=[...t,...o];for(const l of s?xx(e,s,r):[e]){let c,u;t:for(const f of l){for(const h of a)if(!gn(h[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=o.map(h=>Po(h[f])),u=[f];continue}u.push(f);for(let h=0;h<o.length;++h)if(Po(o[h][f])!==c[h]){yield u,c=o.map(g=>Po(g[f])),u=[f];continue t}}u&&(yield u)}}function DL(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Un(e,"clip",["frame","sphere"])),e}function oJ(e,t,n,i){let r;const{clip:s=i.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:c,marginTop:u,marginBottom:f}=n,h=ST();r=`url(#${h})`,e=Ht("svg:g",i).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=i;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=ST();r=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",Qs(o)({type:"Sphere"}));break}}mt(e,"aria-label",t.ariaLabel),mt(e,"aria-description",t.ariaDescription),mt(e,"aria-hidden",t.ariaHidden),mt(e,"clip-path",r)}function he(e,t,n,i){oJ(e,t,n,i),mt(e,"fill",t.fill),mt(e,"fill-opacity",t.fillOpacity),mt(e,"stroke",t.stroke),mt(e,"stroke-width",t.strokeWidth),mt(e,"stroke-opacity",t.strokeOpacity),mt(e,"stroke-linejoin",t.strokeLinejoin),mt(e,"stroke-linecap",t.strokeLinecap),mt(e,"stroke-miterlimit",t.strokeMiterlimit),mt(e,"stroke-dasharray",t.strokeDasharray),mt(e,"stroke-dashoffset",t.strokeDashoffset),mt(e,"shape-rendering",t.shapeRendering),mt(e,"filter",t.imageFilter),mt(e,"paint-order",t.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=t;mt(e,"pointer-events",r)}function le(e,t){aJ(e,"mix-blend-mode",t.mixBlendMode),mt(e,"opacity",t.opacity)}function $L(e,t,n){e.each(function(i){const r=t(i);if(r!=null){const s=this.ownerDocument.createElementNS(ea.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(ea.xlink,"href",r),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function mt(e,t,n){n!=null&&e.attr(t,n)}function aJ(e,t,n){n!=null&&e.style(t,n)}function ie(e,t,{x:n,y:i},r=He,s=He){r+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(s+=i.bandwidth()/2),(r||s)&&e.attr("transform",`translate(${r},${s})`)}function xe(e,t){if((e=en(e))!==t)return e}function Ac(e,t){if((e=Ft(e))!==t)return e}const lJ=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function bx(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!lJ.test(e))throw new Error(`invalid class name: ${e}`);return e}function vx(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function cr({frameAnchor:e},{width:t,height:n,marginTop:i,marginRight:r,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-r:(o+t-r)/2,/^top/.test(e)?i:/^bottom/.test(e)?n-s:(i+n-s)/2]}function e0(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:DL(n)}}function Ht(e,{document:t}){return Ds(Sm(e).call(t.documentElement))}const zL=Math.PI,yr=2*zL,MT=.618;function cJ({projection:e,inset:t=0,insetTop:n=t,insetRight:i=t,insetBottom:r=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,c="frame";if(ci(e)){let v;if({type:e,domain:l,inset:v,insetTop:n=v!==void 0?v:n,insetRight:i=v!==void 0?v:i,insetBottom:r=v!==void 0?v:r,insetLeft:s=v!==void 0?v:s,clip:c=c,...a}=e,e==null)return}typeof e!="function"&&({type:e}=GL(e));const{width:u,height:f,marginLeft:h,marginRight:d,marginTop:g,marginBottom:m}=o,_=u-h-d-s-i,p=f-g-m-n-r;if(e=e==null?void 0:e({width:_,height:p,clip:c,...a}),e==null)return;c=uJ(c,h,g,u-d,f-m);let y=h+s,x=g+n,w;if(l!=null){const[[v,b],[E,C]]=Qs(e).bounds(l),I=Math.min(_/(E-v),p/(C-b));I>0?(y-=(I*(v+E)-_)/2,x-=(I*(b+C)-p)/2,w=lg({point(S,R){this.stream.point(S*I+y,R*I+x)}})):Wr("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=y===0&&x===0?WL():lg({point(v,b){this.stream.point(v+y,b+x)}})),{stream:v=>e.stream(w.stream(c(v)))}}function GL(e){switch(`${e}`.toLowerCase()){case"albers-usa":return mi(qH,.7463,.4673);case"albers":return Lh(kA,.7463,.4673);case"azimuthal-equal-area":return mi(KH,4,4);case"azimuthal-equidistant":return mi(JH,yr,yr);case"conic-conformal":return Lh(ej,yr,yr);case"conic-equal-area":return Lh(cg,6.1702,2.9781);case"conic-equidistant":return Lh(rj,7.312,3.6282);case"equal-earth":return mi(oj,5.4133,2.6347);case"equirectangular":return mi(nj,yr,zL);case"gnomonic":return mi(aj,3.4641,3.4641);case"identity":return{type:WL};case"reflect-y":return{type:fJ};case"mercator":return mi(QH,yr,yr);case"orthographic":return mi(lj,2,2);case"stereographic":return mi(cj,2,2);case"transverse-mercator":return mi(uj,yr,yr);default:throw new Error(`unknown projection type: ${e}`)}}function uJ(e,t,n,i,r){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return yA(t,n,i,r);default:throw new Error(`unknown projection clip type: ${e}`)}}function mi(e,t,n){return{type:({width:i,height:r,rotate:s,precision:o=.15,clip:a})=>{var c,u,f;const l=e();return o!=null&&((c=l.precision)==null||c.call(l,o)),s!=null&&((u=l.rotate)==null||u.call(l,s)),typeof a=="number"&&((f=l.clipAngle)==null||f.call(l,a)),l.scale(Math.min(i/t,r/n)),l.translate([i/2,r/2]),l},aspectRatio:n/t}}function Lh(e,t,n){const{type:i,aspectRatio:r}=mi(e,t,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:c}=s,u=i(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:r}}const WL=Bn({stream:e=>e}),fJ=Bn(lg({point(e,t){this.stream.point(e,-t)}}));function YL(e,t,n,i){const r=n[e],s=n[t],o=r.length,a=n[e]=new Float64Array(o).fill(NaN),l=n[t]=new Float64Array(o).fill(NaN);let c;const u=i.stream({point(f,h){a[c]=f,l[c]=h}});for(c=0;c<o;++c)u.point(r[c],s[c])}function hJ({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(ci(e)&&(e=e.type),e!=null)}function dJ(e){if(typeof(e==null?void 0:e.stream)=="function")return MT;if(ci(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=GL(e);if(t)return t}return MT}}function n0(e,t,{projection:n}){const{x:i,y:r}=e;let s={};return i&&(s.x=i),r&&(s.y=r),s=_x(s,t),n&&(i==null?void 0:i.scale)==="x"&&(r==null?void 0:r.scale)==="y"&&YL("x","y",s,n),i&&(s.x=Tn(s.x)),r&&(s.y=Tn(s.y)),s}function gJ(e){const t=[],n=[],i={scale:"x",value:t},r={scale:"y",value:n},s={point(o,a){t.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)Ss(o,s);return[i,r]}const BL=new Map([["accent",yq],["category10",pq],["dark2",_q],["paired",wq],["pastel1",xq],["pastel2",bq],["set1",vq],["set2",Eq],["set3",Tq],["tableau10",Cq]]);function mJ(e){return e!=null&&BL.has(`${e}`.toLowerCase())}const RT=new Map([...BL,["brbg",_r(E3,T3)],["prgn",_r(C3,S3)],["piyg",_r(M3,R3)],["puor",_r(I3,A3)],["rdbu",_r(M_,gg)],["rdgy",_r(L3,O3)],["rdylbu",_r(R_,mg)],["rdylgn",_r(k3,P3)],["spectral",_r(F3,N3)],["burd",IT(M_,gg)],["buylrd",IT(R_,mg)],["blues",De(a6,l6)],["greens",De(c6,u6)],["greys",De(f6,h6)],["oranges",De(y6,_6)],["purples",De(d6,g6)],["reds",De(m6,p6)],["turbo",wr(C6)],["viridis",wr(S6)],["magma",wr(M6)],["inferno",wr(R6)],["plasma",wr(I6)],["cividis",wr(w6)],["cubehelix",wr(x6)],["warm",wr(b6)],["cool",wr(v6)],["bugn",De(D3,$3)],["bupu",De(z3,G3)],["gnbu",De(W3,Y3)],["orrd",De(B3,U3)],["pubu",De(H3,j3)],["pubugn",De(V3,X3)],["purd",De(Z3,q3)],["rdpu",De(K3,J3)],["ylgn",De(e6,n6)],["ylgnbu",De(Q3,t6)],["ylorbr",De(i6,r6)],["ylorrd",De(s6,o6)],["rainbow",AT(E6)],["sinebow",AT(T6)]]);function De(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ai(t,n):e[n])}function _r(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ai(t,n):e[n])}function IT(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ai(i=>t(1-i),n):e[n].slice().reverse())}function wr(e){return({length:t})=>Ai(e,Math.max(2,Math.floor(t)))}function AT(e){return({length:t})=>Ai(e,Math.floor(t)+1).slice(0,-1)}function UL(e){const t=`${e}`.toLowerCase();if(!RT.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return RT.get(t)}function i0(e,t){const n=UL(e),i=typeof n=="function"?n({length:t}):n;return i.length!==t?i.slice(0,t):i}function pJ(e,t="greys"){const n=new Set,[i,r]=i0(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(r);else if(s===!1)n.add(i);else return;return[...n]}const LT=new Map([["brbg",T3],["prgn",S3],["piyg",R3],["puor",A3],["rdbu",gg],["rdgy",O3],["rdylbu",mg],["rdylgn",P3],["spectral",N3],["burd",e=>gg(1-e)],["buylrd",e=>mg(1-e)],["blues",l6],["greens",u6],["greys",h6],["purples",g6],["reds",p6],["oranges",_6],["turbo",C6],["viridis",S6],["magma",M6],["inferno",R6],["plasma",I6],["cividis",w6],["cubehelix",x6],["warm",b6],["cool",v6],["bugn",$3],["bupu",G3],["gnbu",Y3],["orrd",U3],["pubugn",X3],["pubu",j3],["purd",q3],["rdpu",J3],["ylgnbu",t6],["ylgn",n6],["ylorbr",r6],["ylorrd",o6],["rainbow",E6],["sinebow",T6]]);function Ex(e){const t=`${e}`.toLowerCase();if(!LT.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return LT.get(t)}const yJ=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function _J(e){return e!=null&&yJ.has(`${e}`.toLowerCase())}const VL=e=>t=>e(1-t),Op=[0,1],OT=new Map([["number",Je],["rgb",ra],["hsl",nV],["hcl",sV],["lab",iV]]);function XL(e){const t=`${e}`.toLowerCase();if(!OT.has(t))throw new Error(`unknown interpolator: ${t}`);return OT.get(t)}function Nf(e,t,n,{type:i,nice:r,clamp:s,zero:o,domain:a=jL(e,n),unknown:l,round:c,scheme:u,interval:f,range:h=ge.get(e)===kf?IJ(n,a):ge.get(e)===Pf?AJ(n,a):ge.get(e)===Ff?Op:void 0,interpolate:d=ge.get(e)===is?u==null&&h!==void 0?ra:Ex(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):c?Sw:Je,reverse:g}){if(f=rc(f,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof d!="function"&&(d=XL(d)),g=!!g,h!==void 0){const m=(a=In(a)).length,_=(h=In(h)).length;if(m!==_){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Im(d,h),h=void 0}}if(d.length===1?(g&&(d=VL(d),g=!1),h===void 0&&(h=Float64Array.from(a,(m,_)=>_/(a.length-1)),h.length===2&&(h=Op)),t.interpolate((h===Op?Bn:Cx)(d))):t.interpolate(d),o){const[m,_]=Ye(a);(m>0||_<0)&&(a=Wu(a),$l(a)!==Math.sign(m)?a[a.length-1]=0:a[0]=0)}return g&&(a=Fd(a)),t.domain(a).unknown(l),r&&(t.nice(wJ(r,i)),a=t.domain()),h!==void 0&&t.range(h),s&&t.clamp(s),{type:i,domain:a,range:h,scale:t,interpolate:d,interval:f}}function wJ(e,t){return e===!0?void 0:typeof e=="number"?e:gK(e,t)}function xJ(e,t,n){return Nf(e,zw(),t,n)}function bJ(e,t,n){return HL(e,t,{...n,exponent:.5})}function HL(e,t,{exponent:n=1,...i}){return Nf(e,n3().exponent(n),t,{...i,type:"pow"})}function vJ(e,t,{base:n=10,domain:i=LJ(t),...r}){return Nf(e,JA().base(n),t,{...r,domain:i})}function EJ(e,t,{constant:n=1,...i}){return Nf(e,t3().constant(n),t,i)}function TJ(e,t,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:s="rdylbu",domain:o=OJ(t),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?Ai(l,r):ge.get(e)===is?i0(s,r):void 0),o.length>0&&(o=i3(o,n===void 0?{length:r}:n).quantiles()),Tx(e,t,{domain:o,range:n,reverse:c,unknown:a})}function CJ(e,t,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:s=jL(e,t),unknown:o,interpolate:a,reverse:l}){const[c,u]=Ye(s);let f;return n===void 0?(f=Bs(c,u,i),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),i=f.length+1,n=a!==void 0?Ai(a,i):ge.get(e)===is?i0(r,i):void 0):(f=Ai(Je(c,u),i+1).slice(1,-1),c instanceof Date&&(f=f.map(h=>new Date(h)))),$l(In(s))<0&&f.reverse(),Tx(e,t,{domain:f,range:n,reverse:l,unknown:o})}function Tx(e,t,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:s,range:o=s!==void 0?Ai(s,n.length+1):ge.get(e)===is?i0(r,n.length+1):void 0,reverse:a}){n=In(n);const l=$l(n);if(!isNaN(l)&&!SJ(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=Fd(o)),{type:"threshold",scale:r3(l<0?Fd(n):n,o===void 0?[]:o).unknown(i),domain:n,range:o}}function SJ(e,t){for(let n=1,i=e.length,r=e[0];n<i;++n){const s=Qo(r,r=e[n]);if(s!==0&&s!==t)return!1}return!0}function MJ(e){return{type:"identity",scale:SK(ge.get(e))?ZA():t=>t}}function Vu(e,t=vg){return e.length?[Sn(e,({value:n})=>n===void 0?n:Sn(n,t)),Ue(e,({value:n})=>n===void 0?n:Ue(n,t))]:[0,1]}function jL(e,t){const n=ge.get(e);return(n===kf||n===Ff||n===Pf?RJ:Vu)(t)}function RJ(e){return[0,e.length?Ue(e,({value:t})=>t===void 0?t:Ue(t,vg)):1]}function IJ(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const i=Us(e,.5,({value:o})=>o===void 0?NaN:Us(o,.25,Gr)),r=t.map(o=>3*Math.sqrt(o/i)),s=30/Ue(r);return s<1?r.map(o=>o*s):r}function AJ(e,t){const n=Lu(e,({value:s})=>s===void 0?NaN:Lu(s,Math.abs)),i=t.map(s=>12*s/n),r=60/Ue(i);return r<1?i.map(s=>s*r):i}function LJ(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return Vu(e,Gr);if(n<0)return Vu(e,Hm)}return[1,10]}function OJ(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const i of n)t.push(i);return t}function Cx(e){return(t,n)=>i=>e(t+i*(n-t))}function r0(e,t,n,i,{type:r,nice:s,clamp:o,domain:a=Vu(i),unknown:l,pivot:c=0,scheme:u,range:f,symmetric:h=!0,interpolate:d=ge.get(e)===is?u==null&&f!==void 0?ra:Ex(u!==void 0?u:"rdbu"):Je,reverse:g}){c=+c,a=In(a);let[m,_]=a;if(a.length>2&&Wr(`Warning: the diverging ${e} scale domain contains extra elements.`),Qo(m,_)<0&&([m,_]=[_,m],g=!g),m=Math.min(m,c),_=Math.max(_,c),typeof d!="function"&&(d=XL(d)),f!==void 0&&(d=d.length===1?Cx(d)(...f):Im(d,f)),g&&(d=VL(d)),h){const p=n.apply(c),y=p-n.apply(m),x=n.apply(_)-p;y<x?m=n.invert(p-x):y>x&&(_=n.invert(p+y))}return t.domain([m,c,_]).unknown(l).interpolator(d),o&&t.clamp(o),s&&t.nice(s),{type:r,domain:[m,_],pivot:c,interpolate:d,scale:t}}function kJ(e,t,n){return r0(e,w3(),DJ,t,n)}function PJ(e,t,n){return ZL(e,t,{...n,exponent:.5})}function ZL(e,t,{exponent:n=1,...i}){return r0(e,v3().exponent(n=+n),GJ(n),t,{...i,type:"diverging-pow"})}function FJ(e,t,{base:n=10,pivot:i=1,domain:r=Vu(t,i<0?Hm:Gr),...s}){return r0(e,x3().base(n=+n),$J,t,{domain:r,pivot:i,...s})}function NJ(e,t,{constant:n=1,...i}){return r0(e,b3().constant(n=+n),WJ(n),t,i)}const DJ={apply(e){return e},invert(e){return e}},$J={apply:Math.log,invert:Math.exp},zJ={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function GJ(e){return e===.5?zJ:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function WJ(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function qL(e,t,n,i){return Nf(e,t,n,i)}function YJ(e,t,n){return qL(e,gq(),t,n)}function BJ(e,t,n){return qL(e,mq(),t,n)}const Df=Symbol("ordinal");function KL(e,t,n,{type:i,interval:r,domain:s,range:o,reverse:a,hint:l}){return r=rc(r,i),s===void 0&&(s=QL(n,r,e)),(i==="categorical"||i===Df)&&(i="ordinal"),a&&(s=Fd(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:i,domain:s,range:o,scale:t,hint:l,interval:r}}function UJ(e,t,{type:n,interval:i,domain:r,range:s,scheme:o,unknown:a,...l}){i=rc(i,n),r===void 0&&(r=QL(t,i,e));let c;if(ge.get(e)===Km)c=HJ(t),s=s===void 0?jJ(c):se(s,ox);else if(ge.get(e)===is&&(s===void 0&&(n==="ordinal"||n===Df)&&(s=pJ(r,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=Ex(o),f=s[0],h=s[1]-s[0];s=({length:d})=>Ai(g=>u(f+h*g),d)}else s=UL(o);if(a===T_)throw new Error(`implicit unknown on ${e} scale is not supported`);return KL(e,$w().unknown(a),t,{...l,type:n,domain:r,range:s,hint:c})}function VJ(e,t,{align:n=.5,padding:i=.5,...r}){return JL(Zj().align(n).padding(i),t,r,e)}function XJ(e,t,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:s=e==="fx"||e==="fy"?0:i,...o}){return JL(Fm().align(n).paddingInner(r).paddingOuter(s),t,o,e)}function JL(e,t,n,i){let{round:r}=n;return r!==void 0&&e.round(r=!!r),e=KL(i,e,t,n),e.round=r,e}function QL(e,t,n){const i=new df;for(const{value:r,domain:s}of e){if(s!==void 0)return s();if(r!==void 0)for(const o of r)i.add(o)}if(t!==void 0){const[r,s]=Ye(i).map(t.floor,t);return t.range(r,t.offset(s))}if(i.size>1e4&&ge.get(n)===Ki)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Ru(i,li)}function kT(e,t){let n;for(const{hint:i}of e){const r=i==null?void 0:i[t];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function HJ(e){return{fill:kT(e,"fill"),stroke:kT(e,"stroke")}}function jJ(e){return ve(e.fill)?$q:Dq}function P_(e,{label:t,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:c,zero:u,align:f,padding:h,projection:d,facet:{label:g=t}={},...m}={}){const _={};for(const[p,y]of e){const x=m[p],w=iO(p,y,{round:ge.get(p)===Ki?a:void 0,nice:l,clamp:c,zero:u,align:f,padding:h,projection:d,...x});if(w){let{label:v=p==="fx"||p==="fy"?g:t,percent:b,transform:E,inset:C,insetTop:I=C!==void 0?C:p==="y"?i:0,insetRight:S=C!==void 0?C:p==="x"?r:0,insetBottom:R=C!==void 0?C:p==="y"?s:0,insetLeft:M=C!==void 0?C:p==="x"?o:0}=x||{};if(E==null)E=void 0;else if(typeof E!="function")throw new Error("invalid scale transform; not a function");w.percent=!!b,w.label=v===void 0?qJ(y,w):v,w.transform=E,p==="x"||p==="fx"?(w.insetLeft=+M,w.insetRight=+S):(p==="y"||p==="fy")&&(w.insetTop=+I,w.insetBottom=+R),_[p]=w}}return _}function PT(e){const t={},n={scales:t};for(const[i,r]of Object.entries(e)){const{scale:s,type:o,interval:a,label:l}=r;t[i]=sO(r),n[i]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function ZJ(e,t){const{x:n,y:i,fx:r,fy:s}=e,o=r||s?Sx(t):t;r&&FT(r,o),s&&NT(s,o);const a=r||s?tO(e,t):t;n&&FT(n,a),i&&NT(i,a)}function qJ(e=[],t){let n;for(const{label:i}of e)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!wa(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Sx(e){const{marginTop:t,marginRight:n,marginBottom:i,marginLeft:r,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(i,c),marginLeft:Math.max(r,u),width:s,height:o}}function tO({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=Sx(n);return{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+r:a,height:t?t.scale.bandwidth()+i+s:l,facet:{width:a,height:l}}}function FT(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:i}=e,{width:r,marginLeft:s=0,marginRight:o=0}=t,a=s+n,l=r-o-i;e.range=[a,Math.max(a,l)],wa(e)||(e.range=nO(e)),e.scale.range(e.range)}eO(e)}function NT(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:i}=e,{height:r,marginTop:s=0,marginBottom:o=0}=t,a=s+n,l=r-o-i;e.range=[Math.max(a,l),a],wa(e)?e.range.reverse():e.range=nO(e),e.scale.range(e.range)}eO(e)}function eO(e){e.round===void 0&&QJ(e)&&KJ(e)<=30&&e.scale.round(!0)}function KJ({scale:e}){const t=e.domain().length,[n,i]=e.range(),r=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-r,a=Math.abs(i-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function nO(e){const t=e.scale.domain().length+rO(e);if(!(t>2))return e.range;const[n,i]=e.range;return Array.from({length:t},(r,s)=>n+s/(t-1)*(i-n))}function F_(e,t,n){return iO(e,n===void 0?void 0:[{hint:n}],{...t})}function iO(e,t=[],n={}){const i=JJ(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&wa({type:i})){const r=t.map(({value:s})=>s).filter(s=>s!==void 0);r.some(yn)?Wr(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Na(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Na(i)}".`):r.some(_K)?Wr(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Na(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Na(i)}".`):r.some(wK)&&Wr(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Na(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Na(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Oh(t,n,Tn);break;case"identity":switch(ge.get(e)){case Ki:n=Oh(t,n,Tn);break;case Km:n=Oh(t,n,tQ);break}break;case"utc":case"time":n=Oh(t,n,dK);break}switch(i){case"diverging":return kJ(e,t,n);case"diverging-sqrt":return PJ(e,t,n);case"diverging-pow":return ZL(e,t,n);case"diverging-log":return FJ(e,t,n);case"diverging-symlog":return NJ(e,t,n);case"categorical":case"ordinal":case Df:return UJ(e,t,n);case"cyclical":case"sequential":case"linear":return xJ(e,t,n);case"sqrt":return bJ(e,t,n);case"threshold":return Tx(e,t,n);case"quantile":return TJ(e,t,n);case"quantize":return CJ(e,t,n);case"pow":return HL(e,t,n);case"log":return vJ(e,t,n);case"symlog":return EJ(e,t,n);case"utc":return BJ(e,t,n);case"time":return YJ(e,t,n);case"point":return VJ(e,t,n);case"band":return XJ(e,t,n);case"identity":return MJ(e);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Na(e){return typeof e=="symbol"?e.description:e}const DT={toString:()=>"projection"};function JJ(e,t,{type:n,domain:i,range:r,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=DT);for(const{type:c}of t)if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}if(n===DT)return;if(n!==void 0)return n;if(i===void 0&&!t.some(({value:c})=>c!==void 0))return;const l=ge.get(e);if(l===kf)return"sqrt";if(l===Ff||l===Pf)return"linear";if(l===Km)return"ordinal";if((i||r||[]).length>2)return kp(l);if(i!==void 0){if(ye(i))return kp(l);if(yn(i))return"utc"}else{const c=t.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(ye))return kp(l);if(c.some(yn))return"utc"}if(l===is){if(o!=null||_J(s))return"diverging";if(mJ(s))return"categorical"}return"linear"}function kp(e){switch(e){case Ki:return"point";case is:return Df;default:return"ordinal"}}function wa({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Df}function rO({type:e}){return e==="threshold"}function QJ({type:e}){return e==="point"||e==="band"}function si(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let i=1,r=t.length;i<r;++i)if(e(t[i])-n)return!1;return!0}function Oh(e,{domain:t,...n},i){for(const r of e)r.value!==void 0&&(r.value=i(r.value));return{domain:t===void 0?t:i(t),...n}}function tQ(e){return se(e,ox)}function eQ(e={}){let t;for(const n in e)if(ge.has(n)&&jo(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=sO(F_(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function nQ(e){return t=>{if(!ge.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function sO({scale:e,type:t,domain:n,range:i,interpolate:r,interval:s,transform:o,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:Wu(n),...i!==void 0&&{range:Wu(i)},...o!==void 0&&{transform:o},...a&&{percent:a},...c!==void 0&&{unknown:c},...s!==void 0&&{interval:s},...r!==void 0&&{interpolate:r},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function iQ(e,t,n={}){let i=.5-He,r=.5+He,s=.5+He,o=.5-He;for(const{marginTop:m,marginRight:_,marginBottom:p,marginLeft:y}of t)m>i&&(i=m),_>r&&(r=_),p>s&&(s=p),y>o&&(o=y);let{margin:a,marginTop:l=a!==void 0?a:i,marginRight:c=a!==void 0?a:r,marginBottom:u=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;l=+l,c=+c,u=+u,f=+f;let{width:h=640,height:d=rQ(e,n,{width:h,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-i+u-s)}=n;h=+h,d=+d;const g={width:h,height:d,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:m,marginTop:_=m!==void 0?m:l,marginRight:p=m!==void 0?m:c,marginBottom:y=m!==void 0?m:u,marginLeft:x=m!==void 0?m:f}=n.facet??{};_=+_,p=+p,y=+y,x=+x,g.facet={marginTop:_,marginRight:p,marginBottom:y,marginLeft:x}}return g}function rQ({x:e,y:t,fy:n,fx:i},{projection:r,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const f=n?n.scale.domain().length:1,h=dJ(r);if(h){const g=i?i.scale.domain().length:1,m=(1.1*f-.1)/(1.1*g-.1)*h,_=Math.max(.1,Math.min(10,m));return Math.round((o-u-l)*_+a+c)}const d=t?wa(t)?t.scale.domain().length:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const g=$T("y",t)/($T("x",e)*s),m=i?i.scale.bandwidth():1,_=n?n.scale.bandwidth():1,p=m*(o-u-l)-e.insetLeft-e.insetRight;return(g*p+t.insetTop+t.insetBottom)/_+a+c}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!i*30+60}function $T(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:i}=t;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const a=t.scale.exponent();r=l=>Math.pow(l,a);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=Ye(i);return Math.abs(r(o)-r(s))}function sQ(e,t){const{fx:n,fy:i}=P_(e,t),r=n==null?void 0:n.scale.domain(),s=i==null?void 0:i.scale.domain();return r&&s?wY(r,s).map(([o,a],l)=>({x:o,y:a,i:l})):r?r.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function oQ(e,{x:t,y:n}){return t&&(t=N_(t)),n&&(n=N_(n)),e.filter(t&&n?i=>t.has(i.x)&&n.has(i.y):t?i=>t.has(i.x):i=>n.has(i.y)).sort(t&&n?(i,r)=>t.get(i.x)-t.get(r.x)||n.get(i.y)-n.get(r.y):t?(i,r)=>t.get(i.x)-t.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Mx(e,{fx:t,fy:n}){const i=ts(e),r=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?al(i,o=>(o.fx=r[o[0]],o.fy=s[o[0]],o),o=>r[o],o=>s[o]):t?al(i,o=>(o.fx=r[o[0]],o),o=>r[o]):al(i,o=>(o.fy=s[o[0]],o),o=>s[o])}function aQ(e,t,{marginTop:n,marginLeft:i}){return e&&t?({x:r,y:s})=>`translate(${e(r)-i},${t(s)-n})`:e?({x:r})=>`translate(${e(r)-i},0)`:({y:r})=>`translate(0,${t(r)-n})`}function lQ(e){const t=[],n=new Uint32Array(ir(e,i=>i.length));for(const i of e){let r=0;for(const s of e)i!==s&&(n.set(s,r),r+=s.length);t.push(n.slice(0,r))}return t}const cQ=new Map([["top",Pp],["right",Dp],["bottom",Fp],["left",Np],["top-left",kh(Pp,Np)],["top-right",kh(Pp,Dp)],["bottom-left",kh(Fp,Np)],["bottom-right",kh(Fp,Dp)],["top-empty",hQ],["right-empty",mQ],["bottom-empty",dQ],["left-empty",gQ],["empty",pQ]]);function uQ(e){if(e==null)return null;const t=cQ.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const zT=new WeakMap;function N_(e){let t=zT.get(e);return t||zT.set(e,t=new ta(se(e,(n,i)=>[n,i]))),t}function no(e,t){return N_(e).get(t)}function fQ(e,t,n){return t=Po(t),n=Po(n),e.find(i=>Object.is(Po(i.x),t)&&Object.is(Po(i.y),n))}function s0(e,t,n){var i;return(i=fQ(e,t,n))==null?void 0:i.empty}function Pp(e,{y:t},{y:n}){return t?no(t,n)===0:!0}function Fp(e,{y:t},{y:n}){return t?no(t,n)===t.length-1:!0}function Np(e,{x:t},{x:n}){return t?no(t,n)===0:!0}function Dp(e,{x:t},{x:n}){return t?no(t,n)===t.length-1:!0}function hQ(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=no(t,i);if(s>0)return s0(e,n,t[s-1])}function dQ(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=no(t,i);if(s<t.length-1)return s0(e,n,t[s+1])}function gQ(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=no(t,n);if(s>0)return s0(e,t[s-1],i)}function mQ(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=no(t,n);if(s<t.length-1)return s0(e,t[s+1],i)}function pQ(e,t,{empty:n}){return n}function kh(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function $p(e,{channels:{fx:t,fy:n},groups:i}){return t&&n?e.map(({x:r,y:s})=>{var o;return((o=i.get(r))==null?void 0:o.get(s))??[]}):t?e.map(({x:r})=>i.get(r)??[]):e.map(({y:r})=>i.get(r)??[])}class re{constructor(t,n={},i={},r){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:c,dx:u=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:g=h,marginBottom:m=h,marginLeft:_=h,clip:p=r==null?void 0:r.clip,channels:y,tip:x,render:w}=i;if(this.data=t,this.sort=Xs(c)?c:null,this.initializer=An(i).initializer,this.transform=this.initializer?i.transform:lr(i).transform,s===null||s===!1?this.facet=null:(this.facet=Un(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===lu&&typeof a=="string"?[a]:a,this.fy=t===lu&&typeof l=="string"?[l]:l),this.facetAnchor=uQ(o),n=ix(n),y!==void 0&&(n={...yQ(y),...n}),r!==void 0&&(n={...FL(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([v,b])=>{if(Yi(b.value)){const{value:E,label:C=b.label,scale:I=b.scale}=b.value;b={...b,label:C,scale:I,value:E}}if(t===lu&&typeof b.value=="string"){const{value:E}=b;b={...b,value:[E]}}return[v,b]}).filter(([v,{value:b,optional:E}])=>{if(b!=null)return!0;if(E)return!1;throw new Error(`missing channel value: ${v}`)})),this.dx=+u,this.dy=+f,this.marginTop=+d,this.marginRight=+g,this.marginBottom=+m,this.marginLeft=+_,this.clip=DL(p),this.tip=_Q(x),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const v in this.channels){const{scale:b}=n[v];if(!(b!=="x"&&b!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=oO(w,this.render))}initialize(t,n,i){let r=In(this.data);t===void 0&&r!=null&&(t=[ts(r)]);const s=t;this.transform!=null&&({facets:t,data:r}=this.transform(r,t,i),r=In(r)),t!==void 0&&(t.original=s);const o=AL(this.channels,r);return this.sort!=null&&YK(r,t,o,n,this.sort),{data:r,facets:t,channels:o}}filter(t,n,i){for(const r in n){const{filter:s=gn}=n[r];if(s!==null){const o=i[r];t=t.filter(a=>s(o[a]))}}return t}project(t,n,i){for(const r in t)if(t[r].scale==="x"&&/^x|x$/.test(r)){const s=r.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&YL(r,s,n,i.projection)}}scale(t,n,i){const r=_x(t,n);return i.projection&&this.project(t,r,i),r}}function Pi(...e){return e.plot=re.prototype.plot,e}function oO(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,i,r,s,o,a){return e.call(this,n,i,r,s,o,(l,c,u,f,h)=>t.call(this,l,c,u,f,h,a))}}function yQ(e){return Object.fromEntries(Object.entries(ix(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Af(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function _Q(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Un(e,"tip",["x","y","xy"]):e}function sc(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:ci(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const GT=new WeakMap;function Rx(e,t,{x:n,y:i,px:r,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o=+o,r!=null&&(n??(n=null),a={...a,px:{value:r,scale:"x"}}),s!=null&&(i??(i=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:i,channels:a,...c,render:oO(function(u,f,h,d,g,m){g={...g,pointerSticky:!1};const _=g.ownerSVGElement,{data:p}=g.getMarkState(this);let y=GT.get(_);y||GT.set(_,y={sticky:!1,roots:[],renders:[]});let x=y.renders.push(Q)-1;const{x:w,y:v,fx:b,fy:E}=f;let C=b?b(u.fx)-d.marginLeft:0,I=E?E(u.fy)-d.marginTop:0;w!=null&&w.bandwidth&&(C+=w.bandwidth()/2),v!=null&&v.bandwidth&&(I+=v.bandwidth()/2);const S=u.fi!=null;let R;if(S){let $=y.facetStates;$||(y.facetStates=$=new Map),R=$.get(this),R||$.set(this,R=new Map)}const[M,k]=cr(this,d),{px:O,py:A}=h,P=O?$=>O[$]:aO(h,M),N=A?$=>A[$]:lO(h,k);let G,j,U,Z;function z($,B){if(S)if(Z&&(Z=cancelAnimationFrame(Z)),$==null)R.delete(u.fi);else{R.set(u.fi,B),Z=requestAnimationFrame(()=>{Z=null;for(const[D,V]of R)if(V<B||V===B&&D<u.fi){$=null;break}Q($)});return}Q($)}function Q($){if(G===$&&U===y.sticky)return;G=$,U=g.pointerSticky=y.sticky;const B=G==null?[]:[G];S&&(B.fx=u.fx,B.fy=u.fy,B.fi=u.fi);const D=m(B,f,h,d,g);if(j){if(S){const V=j.parentNode,K=j.getAttribute("transform"),T=D.getAttribute("transform");K?D.setAttribute("transform",K):D.removeAttribute("transform"),T?V.setAttribute("transform",T):V.removeAttribute("transform"),D.removeAttribute("aria-label"),D.removeAttribute("aria-description"),D.removeAttribute("aria-hidden")}j.replaceWith(D)}return y.roots[x]=j=D,G==null&&(R==null?void 0:R.size)>1||g.dispatchValue(G==null?null:p[G]),D}function nt($){if(y.sticky||$.pointerType==="mouse"&&$.buttons===1)return;let[B,D]=TU($);B-=C,D-=I;const V=B<d.marginLeft||B>d.width-d.marginRight?1:e,K=D<d.marginTop||D>d.height-d.marginBottom?1:t;let T=null,L=o*o;for(const F of u){const W=V*(P(F)-B),Y=K*(N(F)-D),H=W*W+Y*Y;H<=L&&(T=F,L=H)}if(T!=null&&(e!==1||t!==1)){const F=P(T)-B,W=N(T)-D;L=F*F+W*W}z(T,L)}function st($){$.pointerType==="mouse"&&G!=null&&(y.sticky&&y.roots.some(B=>B==null?void 0:B.contains($.target))||(y.sticky?(y.sticky=!1,y.renders.forEach(B=>B(null))):(y.sticky=!0,Q(G)),$.stopImmediatePropagation()))}function ot($){$.pointerType==="mouse"&&(y.sticky||z(null))}return _.addEventListener("pointerenter",nt),_.addEventListener("pointermove",nt),_.addEventListener("pointerdown",st),_.addEventListener("pointerleave",ot),Q(null)},l)}}function Ix(e){return Rx(1,1,e)}function fl(e){return Rx(1,.01,e)}function Ax(e){return Rx(.01,1,e)}function aO({x1:e,x2:t,x:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function lO({y1:e,y2:t,y:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function cO(e){return wa(e)&&e.interval===void 0?void 0:"tabular-nums"}function wQ(e,t){let{label:n=e.label,tickSize:i=6,width:r=240,height:s=44+i,marginTop:o=18,marginRight:a=0,marginBottom:l=16+i,marginLeft:c=0,style:u,ticks:f=(r-c-a)/64,tickFormat:h,fontVariant:d=cO(e),round:g=!0,opacity:m,className:_}=t;const p=e0(t);_=bx(_),m=Te(m)[1],h===null&&(h=()=>null);const y=Ht("svg",p).attr("class",`${_}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",s).attr("viewBox",`0 0 ${r} ${s}`).call(M=>M.append("style").text(`.${_}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${_}-ramp text {
  white-space: pre;
}`)).call(vx,u);let x=M=>M.selectAll(".tick line").attr("y1",o+l-s),w;const v=g?(M,k)=>M.rangeRound(k):(M,k)=>M.range(k),{type:b,domain:E,range:C,interpolate:I,scale:S,pivot:R}=e;if(I){const M=C===void 0?I:Im(I.length===1?Cx(I):I,C);w=v(S.copy(),Ai(Je(c,r-a),Math.min(E.length+(R!==void 0),C===void 0?1/0:C.length)));const k=256,O=p.document.createElement("canvas");O.width=k,O.height=1;const A=O.getContext("2d");for(let P=0,N=k-1;P<k;++P)A.fillStyle=M(P/N),A.fillRect(P,0,1,1);y.append("image").attr("opacity",m).attr("x",c).attr("y",o).attr("width",r-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",O.toDataURL())}else if(b==="threshold"){const M=E,k=h===void 0?O=>O:typeof h=="string"?nc(h):h;w=v(zw().domain([-1,C.length-1]),[c,r-a]),y.append("g").attr("fill-opacity",m).selectAll().data(C).enter().append("rect").attr("x",(O,A)=>w(A-1)).attr("y",o).attr("width",(O,A)=>w(A)-w(A-1)).attr("height",s-o-l).attr("fill",O=>O),f=se(M,(O,A)=>A),h=O=>k(M[O],O)}else w=v(Fm().domain(E),[c,r-a]),y.append("g").attr("fill-opacity",m).selectAll().data(E).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",s-o-l).attr("fill",S),x=()=>{};return y.append("g").attr("transform",`translate(0,${s-l})`).call(WY(w).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(i).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",xe(d,"normal")).call(x).call(M=>M.select(".domain").remove()),n!==void 0&&y.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),y.node()}const Mg=Math.PI/180;function oc(e,{marker:t,markerStart:n=t,markerMid:i=t,markerEnd:r=t}={}){e.markerStart=zp(n),e.markerMid=zp(i),e.markerEnd=zp(r)}function zp(e){if(e==null||e===!1)return null;if(e===!0)return YT;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return WT("auto");case"arrow-reverse":return WT("auto-start-reverse");case"dot":return xQ;case"circle":case"circle-fill":return YT;case"circle-stroke":return bQ}throw new Error(`invalid marker: ${e}`)}function WT(e){return(t,n)=>Ht("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function xQ(e,t){return Ht("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function YT(e,t){return Ht("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function bQ(e,t){return Ht("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let vQ=0;function $f(e,t,{stroke:n},i){return uO(e,t,n&&(r=>n[r]),i)}function EQ(e,t,{stroke:n},i){return uO(e,t,n&&(([r])=>n[r]),i)}function uO(e,{markerStart:t,markerMid:n,markerEnd:i,stroke:r},s=()=>r,o){const a=new Map;function l(c){return function(u){const f=s(u);let h=a.get(c);h||a.set(c,h=new Map);let d=h.get(f);if(!d){const g=this.parentNode.insertBefore(c(f,o),this),m=`plot-marker-${++vQ}`;g.setAttribute("id",m),h.set(f,d=`url(#${m})`)}return d}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),i&&e.attr("marker-end",l(i))}function zf({inset:e,insetLeft:t,insetRight:n,...i}={}){return[t,n]=fO(e,t,n),{inset:e,insetLeft:t,insetRight:n,...i}}function Gf({inset:e,insetTop:t,insetBottom:n,...i}={}){return[t,n]=fO(e,t,n),{inset:e,insetTop:t,insetBottom:n,...i}}function fO(e,t,n){return e===void 0&&t===void 0&&n===void 0?He?[1,0]:[.5,.5]:[t,n]}function hO(e,{interval:t}){return e={...Af(e)},e.interval=nx(e.interval===void 0?t:e.interval),e}function o0(e,t,n,i){const{[e]:r,[`${e}1`]:s,[`${e}2`]:o}=n,{value:a,interval:l}=hO(r,n);if(a==null||l==null&&!i)return n;const c=es(r);if(l==null){let d;const g={transform:m=>d||(d=Ot(m,a)),label:c};return{...n,[e]:void 0,[`${e}1`]:s===void 0?g:s,[`${e}2`]:o===void 0?g:o}}let u,f;function h(d){return f!==void 0&&d===u?f:f=se(Ot(u=d,a),g=>l.floor(g))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:h,label:c}:s,[`${e}2`]:o===void 0?{transform:d=>h(d).map(g=>l.offset(g)),label:c}:o})}function dO(e,t,n){const{[e]:i}=n,{value:r,interval:s}=hO(i,n);return r==null||s==null?n:t({...n,[e]:{label:es(i),transform:o=>{const a=se(Ot(o,r),c=>s.floor(c)),l=a.map(c=>s.offset(c));return a.map(yn(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function gO(e={}){return o0("x",zf,e,!0)}function mO(e={}){return o0("y",Gf,e,!0)}function pO(e={}){return o0("x",zf,e)}function yO(e={}){return o0("y",Gf,e)}function _O(e={}){return dO("x",zf,e)}function wO(e={}){return dO("y",Gf,e)}const xO={ariaLabel:"rule",fill:null,stroke:"currentColor"};class bO extends re{constructor(t,n={}){const{x:i,y1:r,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(t,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},sc(n,"x"),xO),this.insetTop=Ft(a),this.insetBottom=Ft(l),oc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y1:c,y2:u}=i,{width:f,height:h,marginTop:d,marginRight:g,marginLeft:m,marginBottom:_}=r,{insetTop:p,insetBottom:y}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o},He,0).call(x=>x.selectAll().data(t).enter().append("line").call(le,this).attr("x1",l?w=>l[w]:(m+f-g)/2).attr("x2",l?w=>l[w]:(m+f-g)/2).attr("y1",c&&!si(a)?w=>c[w]+p:d+p).attr("y2",u&&!si(a)?a.bandwidth?w=>u[w]+a.bandwidth()-y:w=>u[w]-y:h-_-y).call(Ne,this,i).call($f,this,i,s)).node()}}class vO extends re{constructor(t,n={}){const{x1:i,x2:r,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},sc(n,"y"),xO),this.insetRight=Ft(a),this.insetLeft=Ft(l),oc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{y:l,x1:c,x2:u}=i,{width:f,height:h,marginTop:d,marginRight:g,marginLeft:m,marginBottom:_}=r,{insetLeft:p,insetRight:y}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{y:l&&a},0,He).call(x=>x.selectAll().data(t).enter().append("line").call(le,this).attr("x1",c&&!si(o)?w=>c[w]+p:m+p).attr("x2",u&&!si(o)?o.bandwidth?w=>u[w]+o.bandwidth()-y:w=>u[w]-y:f-g-y).attr("y1",l?w=>l[w]:(d+h-_)/2).attr("y2",l?w=>l[w]:(d+h-_)/2).call(Ne,this,i).call($f,this,i,s)).node()}}function jr(e,t){let{x:n=wt,y:i,y1:r,y2:s,...o}=yO(t);return[r,s]=EO(i,r,s),new bO(e,{...o,x:n,y1:r,y2:s})}function Hs(e,t){let{y:n=wt,x:i,x1:r,x2:s,...o}=pO(t);return[r,s]=EO(i,r,s),new vO(e,{...o,y:n,x1:r,x2:s})}function EO(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function a0(e,...t){let n=t.length;for(let i=0,r=!0;i<n;++i)typeof t[i]!="function"&&(r&&(e=e.slice(),r=!1),e.splice(i,2,e[i]+t[i]+e[i+1]),t.splice(i,1),--i,--n);return i=>{let r=e[0];for(let s=0;s<n;++s)r+=t[s](i)+e[s+1];return r}}const TQ={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},TO="­";class l0 extends re{constructor(t,n={}){const{x:i,y:r,text:s=ns(t)&&vL(t)?wt:Ln,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:m,fontVariant:_,fontWeight:p,rotate:y}=n,[x,w]=Te(y,0),[v,b]=RQ(g);if(super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:v,optional:!0},rotate:{value:pK(x),optional:!0},text:{value:s,filter:Zw,optional:!0}},n,TQ),this.rotate=w,this.textAnchor=xe(a,"middle"),this.lineAnchor=Un(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=CO(f),this.monospace=!!h,this.fontFamily=en(d),this.fontSize=b,this.fontStyle=en(m),this.fontVariant=en(_),this.fontWeight=en(p),this.frameAnchor=Of(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=IO(this),this.clipLine=AO(this)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,rotate:u,text:f,title:h,fontSize:d}=i,{rotate:g}=this,[m,_]=cr(this,r);return Ht("svg:g",s).call(he,this,r,s).call(RO,this,f,r).call(ie,this,{x:l&&o,y:c&&a}).call(p=>p.selectAll().data(t).enter().append("text").call(le,this).call(CQ,this,f,h).attr("transform",a0`translate(${l?y=>l[y]:m},${c?y=>c[y]:_})${u?y=>` rotate(${u[y]})`:g?` rotate(${g})`:""}`).call(mt,"font-size",d&&(y=>d[y])).call(Ne,this,i)).node()}}function CO(e){return e==null?null:Un(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function CQ(e,t,n,i){if(!n)return;const{lineAnchor:r,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(c){const u=a(ca(n[c])??"").map(l),f=u.length,h=r==="top"?.71:r==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let g=0;g<f;++g){if(++d,!u[g])continue;const m=this.ownerDocument.createElementNS(ea.svg,"tspan");m.setAttribute("x",0),g===d-1?m.setAttribute("y",`${(h+g)*s}em`):m.setAttribute("dy",`${d*s}em`),m.textContent=u[g],this.appendChild(m),d=0}}else h&&this.setAttribute("y",`${h*s}em`),this.textContent=u[0];if(o&&!i&&u[0]!==n[c]){const d=this.ownerDocument.createElementNS(ea.svg,"title");d.textContent=n[c],this.appendChild(d)}})}function zl(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Di(t,n)),new l0(e,{...i,x:t,y:n})}function SO(e,{x:t=wt,...n}={}){return new l0(e,wO({...n,x:t}))}function MO(e,{y:t=wt,...n}={}){return new l0(e,_O({...n,y:t}))}function RO(e,t,n){mt(e,"text-anchor",t.textAnchor),mt(e,"font-family",t.fontFamily),mt(e,"font-size",t.fontSize),mt(e,"font-style",t.fontStyle),mt(e,"font-variant",t.fontVariant===void 0?SQ(n):t.fontVariant),mt(e,"font-weight",t.fontWeight)}function SQ(e){return e&&(qa(e)||yn(e))?"tabular-nums":void 0}const MQ=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function RQ(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),MQ.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function IQ(e,t,n){const i=[];let r,s=0;for(const[o,a,l]of AQ(e)){if(r===void 0&&(r=o),s>r&&n(e,r,a)>t&&(i.push(e.slice(r,s)+(e[s-1]===TO?"-":"")),r=o),l){i.push(e.slice(r,a)),r=void 0;continue}s=a}return i}function*AQ(e){let t=0,n=0;const i=e.length;for(;n<i;){let r=1;switch(e[n]){case TO:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++r;case`
`:yield[t,n,!0],n+=r,t=n;break;default:++n;break}}yield[t,n,!0]}const BT={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Lx(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=ac(e,r))i+=BT[e[r]]??(OO(e,r)?120:BT.e);return i}function Ox(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=ac(e,r))i+=OO(e,r)?200:100;return i}function IO({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const i=e?Ox:Lx,r=t*100;return s=>IQ(s,r,i)}function AO({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const i=e?Ox:Lx,r=t*100;switch(n){case"clip-start":return s=>VT(s,r,i,"");case"clip-end":return s=>UT(s,r,i,"");case"ellipsis-start":return s=>VT(s,r,i,hl);case"ellipsis-middle":return s=>LQ(s,r,i,hl);case"ellipsis-end":return s=>UT(s,r,i,hl)}}const hl="…";function Gl(e,t,n,i){const r=[];let s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=ac(e,o);const c=n(e,o,a);if(s+c>t){for(s+=i;s>t&&o>0;)a=o,o=r.pop(),s-=n(e,o,a);return[o,t-s]}s+=c,r.push(o)}return[-1,0]}function UT(e,t,n,i){e=e.trim();const r=n(i),[s]=Gl(e,t,n,r);return s<0?e:e.slice(0,s).trimEnd()+i}function LQ(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i)/2,[o,a]=Gl(e,t/2,n,s),[l]=Gl(e,r-t/2-a+s,n,-s);return l<0?i:e.slice(0,o).trimEnd()+i+e.slice(ac(e,l)).trimStart()}function VT(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i),[o]=Gl(e,r-t+s,n,-s);return o<0?i:i+e.slice(ac(e,o)).trimStart()}const D_=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,XT=/\p{Extended_Pictographic}/uy;function ac(e,t){return t+=OQ(e,t)?2:1,PQ(e,t)&&(t=D_.lastIndex),kQ(e,t)?ac(e,t+1):t}function LO(e,t){return e.charCodeAt(t)<128}function OQ(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const i=e.charCodeAt(t+1);return i>=56320&&i<57344}return!1}function kQ(e,t){return e.charCodeAt(t)===8205}function PQ(e,t){return LO(e,t)?!1:(D_.lastIndex=t,D_.test(e))}function OO(e,t){return LO(e,t)?!1:(XT.lastIndex=t,XT.test(e))}const kO={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},PO=3.5,FQ=PO*5,FO={draw(e,t,n){const i=t*n/FQ;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-i,i-t),e.lineTo(0,-t),e.lineTo(i,i-t)}},NO={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},NQ=new Map([["arrow",FO],["spike",NO]]);function DQ(e){return e&&typeof e.draw=="function"}function $Q(e){if(DQ(e))return e;const t=NQ.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class c0 extends re{constructor(t,n={}){const{x:i,y:r,r:s=PO,length:o,rotate:a,shape:l=FO,anchor:c="middle",frameAnchor:u}=n,[f,h]=Te(o,12),[d,g]=Te(a,0);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,kO),this.r=+s,this.length=h,this.rotate=g,this.shape=$Q(l),this.anchor=Un(c,"anchor",["start","middle","end"]),this.frameAnchor=Of(u)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,length:u,rotate:f}=i,{length:h,rotate:d,anchor:g,shape:m,r:_}=this,[p,y]=cr(this,r);return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(x=>x.selectAll().data(t).enter().append("path").call(le,this).attr("transform",a0`translate(${l?w=>l[w]:p},${c?w=>c[w]:y})${f?w=>` rotate(${f[w]})`:d?` rotate(${d})`:""}${g==="start"?"":g==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${h})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${h/2})`}`).attr("d",u?w=>{const v=Or();return m.draw(v,u[w],_),v}:(()=>{const w=Or();return m.draw(w,h,_),w})()).call(Ne,this,i)).node()}}function DO(e,t={}){let{x:n,y:i,...r}=t;return t.frameAnchor===void 0&&([n,i]=Di(n,i)),new c0(e,{...r,x:n,y:i})}function $O(e,t={}){const{x:n=wt,...i}=t;return new c0(e,{...i,x:n})}function zO(e,t={}){const{y:n=wt,...i}=t;return new c0(e,{...i,y:n})}function zQ(e,t={}){const{shape:n=NO,stroke:i=kO.stroke,strokeWidth:r=1,fill:s=i,fillOpacity:o=.3,anchor:a="start",...l}=t;return DO(e,{...l,shape:n,stroke:i,strokeWidth:r,fill:s,fillOpacity:o,anchor:a})}function io(e,t){return arguments.length<2&&!ns(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function u0({anchor:e}={},t){return e===void 0?t[0]:Un(e,"anchor",t)}function GO(e){return u0(e,["left","right"])}function WO(e){return u0(e,["right","left"])}function YO(e){return u0(e,["bottom","top"])}function BO(e){return u0(e,["top","bottom"])}function kx(){const[e,t]=io(...arguments);return XO("y",GO(t),e,t)}function UO(){const[e,t]=io(...arguments);return XO("fy",WO(t),e,t)}function Px(){const[e,t]=io(...arguments);return HO("x",YO(t),e,t)}function VO(){const[e,t]=io(...arguments);return HO("fx",BO(t),e,t)}function XO(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:g=e==="y"?6:0,tickPadding:m,tickRotate:_,x:p,margin:y,marginTop:x=y===void 0?20:y,marginRight:w=y===void 0?t==="right"?40:0:y,marginBottom:v=y===void 0?20:y,marginLeft:b=y===void 0?t==="left"?40:0:y,label:E,labelAnchor:C,labelArrow:I,labelOffset:S,...R}){return g=Ft(g),m=Ft(m),_=Ft(_),C!==void 0&&(C=Un(C,"labelAnchor",["center","top","bottom"])),I=s5(I),Pi(g&&!ve(s)?GQ(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:_,x:p,...R}):null,ve(l)?null:YQ(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:_,x:p,marginTop:x,marginRight:w,marginBottom:v,marginLeft:b,...R}),!ve(l)&&E!==null?zl([],e5({fill:l,fillOpacity:c,...R},function(M,k,O,A,P){const N=A[e],{marginTop:G,marginRight:j,marginBottom:U,marginLeft:Z}=e==="y"&&P.inset||P,z=C??(N.bandwidth?"center":"top"),Q=S??(t==="right"?j:Z)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-G:z==="bottom"?U-3:0,this.dx=t==="right"?Q:-Q,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[r5(e,N,{anchor:t,label:E,labelAnchor:z,labelArrow:I})]}}}})):null)}function HO(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:g=e==="x"?6:0,tickPadding:m,tickRotate:_,y:p,margin:y,marginTop:x=y===void 0?t==="top"?30:0:y,marginRight:w=y===void 0?20:y,marginBottom:v=y===void 0?t==="bottom"?30:0:y,marginLeft:b=y===void 0?20:y,label:E,labelAnchor:C,labelArrow:I,labelOffset:S,...R}){return g=Ft(g),m=Ft(m),_=Ft(_),C!==void 0&&(C=Un(C,"labelAnchor",["center","left","right"])),I=s5(I),Pi(g&&!ve(s)?WQ(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:_,y:p,...R}):null,ve(l)?null:BQ(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:_,y:p,marginTop:x,marginRight:w,marginBottom:v,marginLeft:b,...R}),!ve(l)&&E!==null?zl([],e5({fill:l,fillOpacity:c,...R},function(M,k,O,A,P){const N=A[e],{marginTop:G,marginRight:j,marginBottom:U,marginLeft:Z}=e==="x"&&P.inset||P,z=C??(N.bandwidth?"center":"right"),Q=S??(t==="top"?G:U)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-Q:Q,this.dx=z==="right"?j-3:z==="left"?3-Z:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[r5(e,N,{anchor:t,label:E,labelAnchor:z,labelArrow:I})]}}}})):null)}function GQ(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:h=0,y:d=e==="y"?void 0:null,...g}){return lc(zO,e,t,`${e}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:d,...g,dx:t==="left"?+h-He+ +u:+h+He-f,anchor:"start",length:l,shape:t==="left"?HQ:jQ})}function WQ(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:h=0,x:d=e==="x"?void 0:null,...g}){return lc($O,e,t,`${e}-axis tick`,n,{strokeWidth:i,strokeLinejoin:s,strokeLinecap:r,facetAnchor:o,frameAnchor:a,x:d,...g,dy:t==="bottom"?+h-He-f:+h+He+ +u,anchor:"start",length:l,shape:t==="bottom"?VQ:XQ})}function YQ(e,t,n,{facetAnchor:i=t+(e==="y"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*Mg):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:g=h,dx:m=0,y:_=e==="y"?void 0:null,...p}){return lc(MO,e,t,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,y:_,...p,dx:t==="left"?+m-s-a+ +d:+m+ +s+ +a-g},function(y,x,w,v,b){f===void 0&&(this.fontVariant=i5(y)),l===void 0&&(b.text=n5(y,x,w,v,t))})}function BQ(e,t,n,{facetAnchor:i=t+(e==="x"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*Mg):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:g=h,dy:m=0,x:_=e==="x"?void 0:null,...p}){return lc(SO,e,t,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,x:_,...p,dy:t==="bottom"?+m+ +s+ +a-g:+m-s-a+ +d},function(y,x,w,v,b){f===void 0&&(this.fontVariant=i5(y)),l===void 0&&(b.text=n5(y,x,w,v,t))})}function jO(){const[e,t]=io(...arguments);return JO("y",GO(t),e,t)}function ZO(){const[e,t]=io(...arguments);return JO("fy",WO(t),e,t)}function qO(){const[e,t]=io(...arguments);return QO("x",YO(t),e,t)}function KO(){const[e,t]=io(...arguments);return QO("fx",BO(t),e,t)}function JO(e,t,n,{y:i=e==="y"?void 0:null,x:r=null,x1:s=t==="left"?r:null,x2:o=t==="right"?r:null,...a}){return lc(Hs,e,t,`${e}-grid`,n,{y:i,x1:s,x2:o,...t5(a)})}function QO(e,t,n,{x:i=e==="x"?void 0:null,y:r=null,y1:s=t==="top"?r:null,y2:o=t==="bottom"?r:null,...a}){return lc(jr,e,t,`${e}-grid`,n,{x:i,y1:s,y2:o,...t5(a)})}function t5({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:i=t,strokeWidth:r=1,...s}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...s}}function e5({fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},f){return[,e]=Rn(e),[,t]=Te(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:f}}function lc(e,t,n,i,r,s,o){let a;function l(f,h,d,g,m,_){const p=f==null&&(t==="fx"||t==="fy"),{[t]:y}=g;if(!y)throw new Error(`missing scale: ${t}`);const x=y.domain();let{interval:w,ticks:v,tickFormat:b,tickSpacing:E=t==="x"?80:35}=s;if(typeof v=="string"&&o5(y)&&(w=v,v=void 0),v===void 0&&(v=rc(w,y.type)??UQ(y,E)),f==null){if(ns(v))f=In(v);else if(Za(v))f=Gp(v,...Ye(x));else if(y.interval){let I=y.interval;if(y.ticks){const[S,R]=Ye(x),M=(R-S)/I[Rf];I=wT(I,M/v)??I,f=Gp(I,S,R)}else{f=x;const S=f.length;I=wT(I,S/v)??I,I!==y.interval&&(f=Gp(I,...Ye(f)))}if(I===y.interval){const S=Math.round(f.length/v);S>1&&(f=f.filter((R,M)=>M%S===0))}}else y.ticks?f=y.ticks(v):f=x;if(!y.ticks&&f.length&&f!==x){const I=new df(x);f=f.filter(S=>I.has(S)),f.length||Wr(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[ts(f)]:a[t]={scale:t,value:wt}}o==null||o.call(this,y,f,v,b,a);const C=Object.fromEntries(Object.entries(a).map(([I,S])=>[I,{...S,value:Ot(f,S.value)}]));return p&&(h=_.filterFacets(f,C)),{data:f,facets:h,channels:C}}const c=An(s).initializer,u=e(r,An({...s,initializer:l},c));return r==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function UQ(e,t){const[n,i]=Ye(e.range());return(i-n)/t}function n5(e,t,n,i,r){return{value:Fx(e,t,n,i,r)}}function Fx(e,t,n,i,r){return typeof i=="function"?i:i===void 0&&t&&yn(t)?aK(t,r)??ca:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,i):i===void 0?ca:typeof i=="string"?(yn(e.domain())?Sf:nc)(i):Bn(i)}function Gp(e,t,n){return e.range(t,e.offset(e.floor(n)))}const VQ={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},XQ={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},HQ={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},jQ={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function i5(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function ZQ(e){return Math.sign($l(e.domain()))*Math.sign($l(e.range()))}function r5(e,t,{anchor:n,label:i=t.label,labelAnchor:r,labelArrow:s}={}){if(!(i==null||i.inferred&&o5(t)&&/^(date|time|year)$/i.test(i))){if(i=String(i),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(i)),!s)return i;if(s===!0){const o=ZQ(t);o&&(s=/x$/.test(e)||r==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function s5(e="auto"){return ve(e)?!1:typeof e=="boolean"?e:Un(e,"labelArrow",["auto","up","right","down","left"])}function o5(e){return yn(e.domain())}function HT(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function qQ(e,{opacity:t,...n}={}){if(!wa(e)&&!rO(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return a5(e,n,(i,r,s,o)=>i.append("svg").attr("width",s).attr("height",o).attr("fill",r.scale).attr("fill-opacity",Te(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function KQ(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:ve(t)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[f,h]=Rn(t),[d,g]=Rn(i),m=HT(l,f),_=HT(l,d),p=o*o*Math.PI;return n=Te(n)[1],r=Te(r)[1],s=Te(s)[1],a5(e,a,(y,x,w,v)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",v).attr("fill",f==="color"?b=>m.scale(b):h).attr("fill-opacity",n).attr("stroke",d==="color"?b=>_.scale(b):g).attr("stroke-opacity",r).attr("stroke-width",s).append("path").attr("d",b=>{const E=Or();return e.scale(b).draw(E,p),E}))}function a5(e,t={},n){let{columns:i,tickFormat:r,fontVariant:s=cO(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:f,width:h}=t;const d=e0(t);u=bx(u),r=Fx(e.scale,e.domain,void 0,r);const g=Ht("div",d).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,g.style("columns",i).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,l).call(_=>_.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,g.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,l).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),g.call(_=>_.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",c?`${+c}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",xe(s,"normal")).call(vx,f).node()}const Rg=new Map([["symbol",KQ],["color",l5],["opacity",ttt]]);function JQ(e={}){for(const[t,n]of Rg){const i=e[t];if(jo(i)){const r=e0(e);let s;if(t==="symbol"){const{fill:o,stroke:a=o===void 0&&jo(e.color)?"color":void 0}=e;s={fill:o,stroke:a}}return n(F_(t,i,s),Nx(r,i,e),o=>jo(e[o])?F_(o,e[o]):null)}}throw new Error("unknown legend type; no scale found")}function QQ(e,t,n={}){return(i,r)=>{if(!Rg.has(i))throw new Error(`unknown legend type: ${i}`);if(i in e)return Rg.get(i)(e[i],Nx(t,n[i],r),s=>e[s])}}function Nx({className:e,...t},{label:n,ticks:i,tickFormat:r}={},s){return EK(s,{className:e,...t},{label:n,ticks:i,tickFormat:r})}function l5(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return qQ(e,n);case"ramp":return wQ(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function ttt({type:e,interpolate:t,...n},{legend:i=!0,color:r=rr(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return l5({type:e,...n,interpolate:ett(r)},{legend:i,...s})}function ett(e){const{r:t,g:n,b:i}=rr(e)||rr(0,0,0);return r=>`rgba(${t},${n},${i},${r})`}function ntt(e,t,n){const i=[];for(const[r,s]of Rg){const o=n[r];if(o!=null&&o.legend&&r in e){const a=s(e[r],Nx(t,e[r],o),l=>e[l]);a!=null&&i.push(a)}}return i}const itt={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},rtt={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class c5 extends re{constructor(t={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:s=i,insetBottom:o=i,insetLeft:a=i,rx:l,ry:c}=t;super(lu,void 0,t,n==null?itt:rtt),this.anchor=pL(n,"anchor",["top","right","bottom","left"]),this.insetTop=Ft(r),this.insetRight=Ft(s),this.insetBottom=Ft(o),this.insetLeft=Ft(a),this.rx=Ft(l),this.ry=Ft(c)}render(t,n,i,r,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:f}=r,{anchor:h,insetTop:d,insetRight:g,insetBottom:m,insetLeft:_,rx:p,ry:y}=this,x=c+_,w=u-a-g,v=o+d,b=f-l-m;return Ht(h?"svg:line":"svg:rect",s).datum(0).call(he,this,r,s).call(le,this).call(Ne,this,i).call(ie,this,{}).call(h==="left"?E=>E.attr("x1",x).attr("x2",x).attr("y1",v).attr("y2",b):h==="right"?E=>E.attr("x1",w).attr("x2",w).attr("y1",v).attr("y2",b):h==="top"?E=>E.attr("x1",x).attr("x2",w).attr("y1",v).attr("y2",v):h==="bottom"?E=>E.attr("x1",x).attr("x2",w).attr("y1",b).attr("y2",b):E=>E.attr("x",x).attr("y",v).attr("width",w-x).attr("height",b-v).attr("rx",p).attr("ry",y)).node()}}function Dx(e){return new c5(e)}const Wp={ariaLabel:"tip",fill:"white",stroke:"currentColor"},stt=new Set(["geometry","href","src","ariaLabel","scales"]);class u5 extends re{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ns(t)&&vL(t)&&(n={...n,title:wt});const{x:i,y:r,x1:s,x2:o,y1:a,y2:l,anchor:c,monospace:u,fontFamily:f=u?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:d,fontVariant:g,fontWeight:m,lineHeight:_=1,lineWidth:p=20,frameAnchor:y,format:x,textAnchor:w="start",textOverflow:v,textPadding:b=8,title:E,pointerSize:C=12,pathFilter:I="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:i,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:r,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:E,optional:!0}},n,Wp),this.anchor=EL(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=Of(y),this.textAnchor=xe(w,"middle"),this.textPadding=+b,this.pointerSize=+C,this.pathFilter=en(I),this.lineHeight=+_,this.lineWidth=+p,this.textOverflow=CO(v),this.monospace=!!u,this.fontFamily=en(f),this.fontSize=Ft(h),this.fontStyle=en(d),this.fontVariant=en(g),this.fontWeight=en(m);for(const S in Wp)S in this.channels&&(this[S]=Wp[S]);this.splitLines=IO(this),this.clipLine=AO(this),this.format={...x}}render(t,n,i,r,s){const o=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:f,document:h}=s,{anchor:d,monospace:g,lineHeight:m,lineWidth:_}=this,{textPadding:p,pointerSize:y,pathFilter:x}=this,{marginTop:w,marginLeft:v}=r,{x1:b,y1:E,x2:C,y2:I,x:S=b??C,y:R=E??I}=i,M=c?c(t.fx)-v:0,k=u?u(t.fy)-w:0,[O,A]=cr(this,r),P=aO(i,O),N=lO(i,A),G=g?Ox:Lx,j=G(hl);let U,Z;"title"in i?(U=i.channels,Z=utt):(U=ctt.call(this,i,n),Z=ftt);const z=Ht("svg:g",s).call(he,this,r,s).call(RO,this).call(ie,this,{x:S&&a,y:R&&l}).call(st=>st.selectAll().data(t).enter().append("g").attr("transform",ot=>`translate(${Math.round(P(ot))},${Math.round(N(ot))})`).call(le,this).call(ot=>ot.append("path").attr("filter",x)).call(ot=>ot.append("text").each(function($){const B=Ds(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const D=Z.call(o,$,t,U,n,i);if(typeof D=="string")for(const V of o.splitLines(D))Q(B,{value:o.clipLine(V)});else{const V=new Set;for(const K of D){const{label:T=""}=K;T&&V.has(T)||(V.add(T),Q(B,K))}}})));function Q(st,{label:ot,value:$,color:B,opacity:D}){ot??(ot=""),$??($="");const V=B!=null||D!=null;let K,T=_*100;const[L]=Gl(ot,T,G,j);if(L>=0)ot=ot.slice(0,L).trimEnd()+hl,K=$.trim(),$="";else{(ot||!$&&!V)&&($=" "+$);const[W]=Gl($,T-G(ot),G,j);W>=0&&($=$.slice(0,W).trimEnd()+hl,K=$.trim())}const F=st.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");ot&&F.append("tspan").attr("font-weight","bold").text(ot),$&&F.append(()=>h.createTextNode($)),V&&F.append("tspan").text(" ■").attr("fill",B).attr("fill-opacity",D).style("user-select","none"),K&&F.append("title").text(K)}function nt(){const{width:st,height:ot}=r.facet??r;z.selectChildren().each(function($){let{x:B,width:D,height:V}=this.getBBox();D=Math.round(D),V=Math.round(V);let K=d;if(K===void 0){K=o.previousAnchor;const F=P($)+M,W=N($)+k,Y=F+D+p*2<st,H=F-D-p*2>0,rt=W+V+y+p*2+7<ot,J=W-V-y-p*2>0,tt=(/-left$/.test(K)?Y||!H:Y&&!H)?"left":"right",q=(/^top-/.test(K)?rt||!J:rt&&!J)?"top":"bottom";K=o.previousAnchor=`${q}-${tt}`}const T=this.firstChild,L=this.lastChild;if(T.setAttribute("d",ltt(K,y,p,D,V)),B)for(const F of L.childNodes)F.setAttribute("x",-B);L.setAttribute("y",`${+ott(K,L.childNodes.length,m).toFixed(6)}em`),L.setAttribute("transform",`translate(${att(K,y,p,D,V)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(nt):typeof requestAnimationFrame<"u"&&requestAnimationFrame(nt)),z.node()}}function $x(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Di(t,n)),new u5(e,{...i,x:t,y:n})}function ott(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function att(e,t,n,i,r){switch(e){case"middle":return[-i/2,r/2];case"top-left":return[n,t+n];case"top":return[-i/2,t/2+n];case"top-right":return[-i-n,t+n];case"right":return[-t/2-i-n,r/2];case"bottom-left":return[n,-t-n];case"bottom":return[-i/2,-t/2-n];case"bottom-right":return[-i-n,-t-n];case"left":return[n+t/2,r/2]}}function ltt(e,t,n,i,r){const s=i+n*2,o=r+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function ctt({channels:e},t){var r,s;const n={};let i=this.format;i=jT(i,e,"x"),i=jT(i,e,"y"),this.format=i;for(const o in i){const a=i[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=L_(e,o);l&&(n[o]=l)}}for(const o in e){if(o in n||o in i||stt.has(o))continue;const a=L_(e,o);a&&(n[o]=a)}this.facet&&(t.fx&&!("fx"in i)&&(n.fx=!0),t.fy&&!("fy"in i)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const l=((r=n[o])==null?void 0:r.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(yn(l)?Sf:nc)(a)}else if(a===void 0||a===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?Fx(l,l.domain()):ca}}return n}function jT(e,t,n){if(!(n in e))return e;const i=`${n}1`,r=`${n}2`;if((i in e||!(i in t))&&(r in e||!(r in t)))return e;const s=Object.entries(e),o=e[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[i,o],[r,o]),Object.fromEntries(s)}function utt(e,t,{title:n}){return ca(n.value[e],e)}function*ftt(e,t,n,i,r){for(const s in n){if(s==="fx"||s==="fy"){yield{label:Ig(i,n,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:qT(i,n,"x"),value:ZT(this.format.x2,n.x1,o,e)};else if(s==="y2"&&"y1"in n)yield{label:qT(i,n,"y"),value:ZT(this.format.y2,n.y1,o,e)};else{const a=o.value[e],l=o.scale;if(!gn(a)&&l==null)continue;yield{label:Ig(i,n,s),value:this.format[s](a,e),color:l==="color"?r[s][e]:null,opacity:l==="opacity"?r[s][e]:null}}}}function ZT(e,t,n,i){var r;return(r=n.hint)!=null&&r.length?`${e(n.value[i]-t.value[i],i)}`:`${e(t.value[i],i)}–${e(n.value[i],i)}`}function qT(e,t,n){const i=Ig(e,t,`${n}1`,n),r=Ig(e,t,`${n}2`,n);return i===r?i:`${i}–${r}`}function Ig(e,t,n,i=n){const r=t[n],s=e[(r==null?void 0:r.scale)??n];return String((s==null?void 0:s.label)??(r==null?void 0:r.label)??i)}function f5(e={}){var j;const{facet:t,style:n,title:i,subtitle:r,caption:s,ariaLabel:o,ariaDescription:a}=e,l=bx(e.className),c=e.marks===void 0?[]:JT(e.marks);c.push(...wtt(c));const u=ytt(t,e),f=new Map;for(const U of c){const Z=QT(U,u,e);Z&&f.set(U,Z)}const h=new Map;u&&Lc(h,[u],e),Lc(h,f,e);const d=JT(xtt(c,h,e));for(const U of d){const Z=QT(U,u,e);Z&&f.set(U,Z)}c.unshift(...d);let g=sQ(h,e);if(g!==void 0){const U=u?$p(g,u):void 0;for(const z of c){if(z.facet===null||z.facet==="super")continue;const Q=f.get(z);Q!==void 0&&(Q.facetsIndex=z.fx!=null||z.fy!=null?$p(g,Q):U)}const Z=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((Q,nt)=>{(Q==null?void 0:Q.length)>0&&Z.add(nt)});g.forEach(0<Z.size&&Z.size<g.length?(z,Q)=>z.empty=!Z.has(Q):z=>z.empty=!1);for(const z of c)if(z.facet==="exclude"){const Q=f.get(z);Q!==void 0&&(Q.facetsIndex=lQ(Q.facetsIndex))}}for(const U of ge.keys())jo(e[U])&&U!=="fx"&&U!=="fy"&&h.set(U,[]);const m=new Map;for(const U of c){if(m.has(U))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:Z,channels:z}=f.get(U)??{},{data:Q,facets:nt,channels:st}=U.initialize(Z,z,e);zx(st,e),m.set(U,{data:Q,facets:nt,channels:st})}const _=P_(Lc(h,m,e),e),p=iQ(_,c,e);ZJ(_,p);const y=PT(_),{fx:x,fy:w}=y,v=x||w?tO(_,p):p,b=x||w?Mtt(y,p):p,E=e0(e),C=E.document,I=Sm("svg").call(C.documentElement);let S=I;E.ownerSVGElement=I,E.className=l,E.projection=cJ(e,v),E.filterFacets=(U,Z)=>$p(g,{channels:Z,groups:Mx(U,Z)}),E.getMarkState=U=>{const Z=m.get(U),z=f.get(U);return{...Z,channels:{...Z.channels,...z==null?void 0:z.channels}}},E.dispatchValue=U=>{S.value!==U&&(S.value=U,S.dispatchEvent(new Event("input",{bubbles:!0})))};const R=new Set;for(const[U,Z]of m)if(U.initializer!=null){const z=U.facet==="super"?b:v,Q=U.initializer(Z.data,Z.facets,Z.channels,y,z,E);if(Q.data!==void 0&&(Z.data=Q.data),Q.facets!==void 0&&(Z.facets=Q.facets),Q.channels!==void 0){const{fx:nt,fy:st,...ot}=Q.channels;ptt(ot),Object.assign(Z.channels,ot);for(const $ of Object.values(ot)){const{scale:B}=$;B!=null&&!CK(ge.get(B))&&(h5($,e),R.add(B))}(nt!=null||st!=null)&&f.set(U,!0)}}if(R.size){const U=new Map;Lc(U,m,e,nt=>R.has(nt)),Lc(h,m,e,nt=>R.has(nt));const Z=Stt(P_(U,e),_),{scales:z,...Q}=PT(Z);Object.assign(_,Z),Object.assign(y,Q),Object.assign(y.scales,z)}let M,k;g!==void 0&&(M={x:x==null?void 0:x.domain(),y:w==null?void 0:w.domain()},g=oQ(g,M),k=aQ(x,w,p));for(const[U,Z]of m)Z.values=U.scale(Z.channels,y,E);const{width:O,height:A}=p;Ds(I).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",O).attr("height",A).attr("viewBox",`0 0 ${O} ${A}`).attr("aria-label",o).attr("aria-description",a).call(U=>U.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(vx,n);for(const U of c){const{channels:Z,values:z,facets:Q}=m.get(U);if(g===void 0||U.facet==="super"){let nt=null;if(Q&&(nt=Q[0],nt=U.filter(nt,Z,z),nt.length===0))continue;const st=U.render(nt,y,z,b,E);if(st==null)continue;I.appendChild(st)}else{let nt;for(const st of g){if(!(((j=U.facetAnchor)==null?void 0:j.call(U,g,M,st))??!st.empty))continue;let ot=null;if(Q){const B=f.has(U);if(ot=Q[B?st.i:0],ot=U.filter(ot,Z,z),ot.length===0)continue;!B&&ot===Q[0]&&(ot=Zo(ot)),ot.fx=st.x,ot.fy=st.y,ot.fi=st.i}const $=U.render(ot,y,z,v,E);if($!=null){(nt??(nt=Ds(I).append("g"))).append(()=>$).datum(st);for(const B of["aria-label","aria-description","aria-hidden","transform"])$.hasAttribute(B)&&(nt.attr(B,$.getAttribute(B)),$.removeAttribute(B))}}nt==null||nt.selectChildren().attr("transform",k)}}const P=ntt(_,E,e),{figure:N=i!=null||r!=null||s!=null||P.length>0}=e;N&&(S=C.createElement("figure"),S.className=`${l}-figure`,S.style.maxWidth="initial",i!=null&&S.append(KT(C,i,"h2")),r!=null&&S.append(KT(C,r,"h3")),S.append(...P,I),s!=null&&S.append(htt(C,s))),S.scale=nQ(y.scales),S.legend=QQ(_,E,e);const G=QK();return G>0&&Ds(I).append("text").attr("x",O).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${G.toLocaleString("en-US")} warning${G===1?"":"s"}. Please check the console.`),S}function KT(e,t,n){if(t.ownerDocument)return t;const i=e.createElement(n);return i.append(t),i}function htt(e,t){const n=e.createElement("figcaption");return n.append(t),n}function dtt({marks:e=[],...t}={}){return f5({...t,marks:[...e,this]})}re.prototype.plot=dtt;function JT(e){return e.flat(1/0).filter(t=>t!=null).map(gtt)}function gtt(e){return typeof e.render=="function"?e:new mtt(e)}class mtt extends re{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function zx(e,t){for(const n in e)h5(e[n],t);return e}function h5(e,t){const{scale:n,transform:i=!0}=e;if(n==null||!i)return;const{type:r,percent:s,interval:o,transform:a=s?l=>l*100:bL(o,r)}=t[n]??{};a!=null&&(e.value=se(e.value,a),e.transform=!1)}function ptt(e){for(const t in e)LL(t,e[t])}function Lc(e,t,n,i=fK){var r,s;for(const{channels:o}of t.values())for(const a in o){const l=o[a],{scale:c}=l;if(c!=null&&i(c))if(c==="projection"){if(!hJ(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,f=((s=n.y)==null?void 0:s.domain)===void 0;if(u||f){const[h,d]=gJ(l);u&&Yp(e,"x",h),f&&Yp(e,"y",d)}}}else Yp(e,c,l)}return e}function Yp(e,t,n){const i=e.get(t);i!==void 0?i.push(n):e.set(t,[n])}function ytt(e,t){if(e==null)return;const{x:n,y:i}=e;if(n==null&&i==null)return;const r=In(e.data);if(r==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Uu(r,{value:n,scale:"fx"})),i!=null&&(s.fy=Uu(r,{value:i,scale:"fy"})),zx(s,t);const o=Mx(r,s);return{channels:s,groups:o,data:e.data}}function QT(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:i,fy:r}=e;if(i!=null||r!=null){const c=In(e.data??i??r);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const u={};return i!=null&&(u.fx=Uu(c,{value:i,scale:"fx"})),r!=null&&(u.fy=Uu(c,{value:r,scale:"fy"})),zx(u,n),{channels:u,groups:Mx(c,u)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=In(e.data))==null?void 0:l.length)===a.length&&Wr(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function _tt(e,t={}){return An({...t,x:null,y:null},(n,i,r,s,o,a)=>a.getMarkState(e))}function wtt(e){const t=[];for(const n of e){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r}=i;r=/^x$/i.test(r)?fl:/^y$/i.test(r)?Ax:Ix,i=r(_tt(n,i)),i.title=null;const s=$x(n.data,i);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function xtt(e,t,n){let{projection:i,x:r={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:f=l,grid:h}=u,x:{axis:d=l,grid:g=d===null?null:c}=r,y:{axis:m=l,grid:_=m===null?null:c}=s,fx:{axis:p=f,grid:y=p===null?null:h}=o,fy:{axis:x=f,grid:w=x===null?null:h}=a}=n;(i||!jo(r)&&!tC("x",e))&&(d=g=null),(i||!jo(s)&&!tC("y",e))&&(m=_=null),t.has("fx")||(p=y=null),t.has("fy")||(x=w=null),d===void 0&&(d=!Nh(e,"x")),m===void 0&&(m=!Nh(e,"y")),p===void 0&&(p=!Nh(e,"fx")),x===void 0&&(x=!Nh(e,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),p===!0&&(p=d==="top"||d===null?"bottom":"top"),x===!0&&(x=m==="right"||m===null?"left":"right");const v=[];return Fh(v,w,ZO,a),Ph(v,x,UO,"right","left",u,a),Fh(v,y,KO,o),Ph(v,p,VO,"top","bottom",u,o),Fh(v,_,jO,s),Ph(v,m,kx,"left","right",n,s),Fh(v,g,qO,r),Ph(v,d,Px,"bottom","top",n,r),v}function Ph(e,t,n,i,r,s,o){if(!t)return;const a=btt(t);o=vtt(a?i:t,s,o);const{line:l}=o;(n===kx||n===Px)&&l&&!Dl(l)&&e.push(Dx(Ett(o))),e.push(n(o)),a&&e.push(n({...o,anchor:r,label:null}))}function Fh(e,t,n,i){!t||Dl(t)||e.push(n(Ttt(t,i)))}function btt(e){return/^\s*both\s*$/i.test(e)}function vtt(e,t,{line:n=t.line,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:g=t.labelArrow,labelOffset:m}){return{anchor:e,line:n,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h,labelAnchor:d,labelArrow:g,labelOffset:m}}function Ett(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function Ttt(e,{stroke:t=Lf(e)?e:void 0,ticks:n=Ctt(e)?e:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:s}}function Ctt(e){switch(typeof e){case"number":return!0;case"string":return!Lf(e)}return ns(e)||typeof(e==null?void 0:e.range)=="function"}function Nh(e,t){const n=`${t}-axis `;return e.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function tC(e,t){for(const n of t)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===e||r==="projection")return!0}return!1}function Stt(e,t){for(const n in e){const i=e[n],r=t[n];i.label===void 0&&r&&(i.label=r.label)}return e}function Mtt({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=Sx(n),c=e&&eC(e),u=t&&eC(t);return{marginTop:t?u[0]:i,marginRight:e?a-c[1]:r,marginBottom:t?l-u[1]:s,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function eC(e){const t=e.domain();let n=e(t[0]),i=e(t[t.length-1]);return i<n&&([n,i]=[i,n]),[n,i+e.bandwidth()]}const Rtt=new Map([["basis",zq],["basis-closed",Gq],["basis-open",Wq],["bundle",Yq],["bump-x",Rq],["bump-y",Iq],["cardinal",Bq],["cardinal-closed",Uq],["cardinal-open",Vq],["catmull-rom",Xq],["catmull-rom-closed",Hq],["catmull-rom-open",jq],["linear",Mf],["linear-closed",Zq],["monotone-x",qq],["monotone-y",Kq],["natural",Jq],["step",Qq],["step-after",eK],["step-before",tK]]);function Gx(e=Mf,t){if(typeof e=="function")return e;const n=Rtt.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function d5(e=Wl,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Wl:Gx(e,t)}function Wl(e){return Mf(e)}function Rs(e={y:"count"},t={}){[e,t]=Ux(e,t);const{x:n,y:i}=t;return Bx(Ag(n,t,wt),null,null,i,e,zf(t))}function Is(e={x:"count"},t={}){[e,t]=Ux(e,t);const{x:n,y:i}=t;return Bx(null,Ag(i,t,wt),n,null,e,Gf(t))}function Eo(e={fill:"count"},t={}){[e,t]=Ux(e,t);const{x:n,y:i}=Itt(t);return Bx(n,i,null,null,e,zf(Gf(t)))}function g5(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=yx}=n,r={filter:null};return n[t]!=null&&(r[t]=i),n[`${t}1`]!=null&&(r[`${t}1`]=i),n[`${t}2`]!=null&&(r[`${t}2`]=i),e(r,n)}function Wx(e={}){return g5(Rs,"y",sc(e,"x"))}function Yx(e={}){return g5(Is,"x",sc(e,"y"))}function Bx(e,t,n,i,{data:r=px,filter:s=Cg,sort:o,reverse:a,...l}={},c={}){e=nC(e),t=nC(t),l=Att(l,c),r=_5(r,wt),o=o==null?void 0:p5("sort",o,c),s=s==null?void 0:y5("filter",s,c),n!=null&&Ps(l,"x","x1","x2")&&(n=null),i!=null&&Ps(l,"y","y1","y2")&&(i=null);const[u,f]=xn(e),[h,d]=xn(e),[g,m]=xn(t),[_,p]=xn(t),[y,x]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[w,v]=xn(y),{x:b,y:E,z:C,fill:I,stroke:S,x1:R,x2:M,y1:k,y2:O,domain:A,cumulative:P,thresholds:N,interval:G,...j}=c,[U,Z]=xn(C),[z]=Rn(I),[Q]=Rn(S),[nt,st]=xn(z),[ot,$]=xn(Q);return{..."z"in c&&{z:U||C},..."fill"in c&&{fill:nt||I},..."stroke"in c&&{stroke:ot||S},...lr(j,(B,D,V)=>{const K=Tg(Ot(B,y),V==null?void 0:V[x]),T=Ot(B,C),L=Ot(B,z),F=Ot(B,Q),W=mx(l,{z:T,fill:L,stroke:F}),Y=[],H=[],rt=K&&v([]),J=T&&Z([]),tt=L&&st([]),q=F&&$([]),ct=e&&f([]),at=e&&d([]),ut=t&&m([]),ft=t&&p([]),vt=ktt(e==null?void 0:e(B),t==null?void 0:t(B));let Lt=0;for(const Tt of l)Tt.initialize(B);o&&o.initialize(B),s&&s.initialize(B);for(const Tt of D){const jt=[];for(const pe of l)pe.scope("facet",Tt);o&&o.scope("facet",Tt),s&&s.scope("facet",Tt);for(const[pe,ce]of ul(Tt,W))for(const[ss,Vn]of ul(ce,K))for(const[sn,ue]of vt(Vn))if(!(s&&!s.reduce(sn,ue))){jt.push(Lt++),H.push(r.reduceIndex(sn,B,ue)),K&&rt.push(ss),T&&J.push(W===T?pe:T[(sn.length>0?sn:Vn)[0]]),L&&tt.push(W===L?pe:L[(sn.length>0?sn:Vn)[0]]),F&&q.push(W===F?pe:F[(sn.length>0?sn:Vn)[0]]),ct&&(ct.push(ue.x1),at.push(ue.x2)),ut&&(ut.push(ue.y1),ft.push(ue.y2));for(const on of l)on.reduce(sn,ue);o&&o.reduce(sn)}Y.push(jt)}return IL(Y,o,a),{data:H,facets:Y}}),...!Ps(l,"x")&&(u?{x1:u,x2:h,x:Eg(u,h)}:{x:b,x1:R,x2:M}),...!Ps(l,"y")&&(g?{y1:g,y2:_,y:Eg(g,_)}:{y:E,y1:k,y2:O}),...w&&{[x]:w},...Object.fromEntries(l.map(({name:B,output:D})=>[B,D]))}}function Ux({cumulative:e,domain:t,thresholds:n,interval:i,...r},s){return[r,{cumulative:e,domain:t,thresholds:n,interval:i,...s}]}function Ag(e,{cumulative:t,domain:n,thresholds:i,interval:r},s){return e={...Af(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=i),e.interval===void 0&&(e.interval=r),e.value===void 0&&(e.value=s),e.thresholds=m5(e.thresholds,e.interval),e}function Itt(e){let{x:t,y:n}=e;return t=Ag(t,e),n=Ag(n,e),[t.value,n.value]=Di(t.value,n.value),{x:t,y:n}}function nC(e){if(e==null)return;const{value:t,cumulative:n,domain:i=Ye,thresholds:r}=e,s=o=>{let a=Ot(o,t),l;if(yn(a)||Ott(r)){a=se(a,mL,Float64Array);let[u,f]=typeof i=="function"?i(a):i,h=typeof r=="function"&&!Za(r)?r(a,u,f):r;typeof h=="number"&&(h=g3(u,f,h)),Za(h)&&(i===Ye&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f))),l=h}else{a=Tn(a);let[u,f]=typeof i=="function"?i(a):i,h=typeof r=="function"&&!Za(r)?r(a,u,f):r;if(typeof h=="number")if(i===Ye){let d=Au(u,f,h);if(isFinite(d))if(d>0){let g=Math.round(u/d),m=Math.round(f/d);g*d<=u||--g,m*d>f||++m;let _=m-g+1;h=new Float64Array(_);for(let p=0;p<_;++p)h[p]=(g+p)*d}else if(d<0){d=-d;let g=Math.round(u*d),m=Math.round(f*d);g/d<=u||--g,m/d>f||++m;let _=m-g+1;h=new Float64Array(_);for(let p=0;p<_;++p)h[p]=(g+p)/d}else h=[u];else h=[u]}else h=Bs(u,f,h);else Za(h)&&(i===Ye&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f)));l=h}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?Ftt:n>0?Ptt:Vx)(c,l,a),c};return s.label=es(t),s}function m5(e,t,n=iC){if(e===void 0)return t===void 0?n:rc(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return IY;case"scott":return _I;case"sturges":return _w;case"auto":return iC}return Kw(e)}return e}function Att(e,t){return hx(e,t,p5)}function p5(e,t,n){return dx(e,t,n,y5)}function y5(e,t,n){return gx(e,t,n,_5)}function _5(e,t){return t0(e,t,Ltt)}function Ltt(e){switch(`${e}`.toLowerCase()){case"x":return Ntt;case"x1":return $tt;case"x2":return ztt;case"y":return Dtt;case"y1":return Gtt;case"y2":return Wtt}throw new Error(`invalid bin reduce: ${e}`)}function iC(e,t,n){return Math.min(200,_I(e,t,n))}function Ott(e){return mK(e)||ns(e)&&yn(e)}function ktt(e,t){return e&&t?function*(n){const i=e.bin(n);for(const[r,[s,o]]of e.entries()){const a=t.bin(i[r]);for(const[l,[c,u]]of t.entries())yield[a[l],{x1:s,y1:c,x2:o,y2:u}]}}:e?function*(n){const i=e.bin(n);for(const[r,[s,o]]of e.entries())yield[i[r],{x1:s,x2:o}]}:function*(n){const i=t.bin(n);for(const[r,[s,o]]of t.entries())yield[i[r],{y1:s,y2:o}]}}function Vx(e,t,n){return t=Tn(t),i=>{var s;const r=e.map(()=>[]);for(const o of i)(s=r[vm(t,n[o])-1])==null||s.push(o);return r}}function Ptt(e,t,n){const i=Vx(e,t,n);return r=>{const s=i(r);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],c=s[o];for(const u of l)c.push(u)}return s}}function Ftt(e,t,n){const i=Vx(e,t,n);return r=>{const s=i(r);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const c of a)l.push(c)}return s}}function w5(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const Ntt={reduceIndex(e,t,{x1:n,x2:i}){return w5(n,i)}},Dtt={reduceIndex(e,t,{y1:n,y2:i}){return w5(n,i)}},$tt={reduceIndex(e,t,{x1:n}){return n}},ztt={reduceIndex(e,t,{x2:n}){return n}},Gtt={reduceIndex(e,t,{y1:n}){return n}},Wtt={reduceIndex(e,t,{y2:n}){return n}};function Xx(e={}){return yL(e)?e:{...e,x:wt}}function Hx(e={}){return _L(e)?e:{...e,y:wt}}function Ytt(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,i=new Uint8Array(n);let r=0;for(const a of t)for(const l of a)i[l]&&++r,i[l]=1;if(r===0)return{data:e,facets:t};e=Wu(e);const s=e[dL]=new Uint32Array(n+r);t=t.map(a=>Wu(a,Uint32Array));let o=n;i.fill(0);for(const a of t)for(let l=0,c=a.length;l<c;++l){const u=a[l];i[u]?(a[l]=o,e[o]=e[u],s[o]=u,++o):s[u]=u,i[u]=1}return{data:e,facets:t}}function x5(e={},t={}){arguments.length===1&&([e,t]=cc(e));const{y1:n,y:i=n,x:r,...s}=t,[o,a,l,c]=uc(i,r,"y","x",e,s);return{...o,y1:n,y:a,x1:l,x2:c,x:Eg(l,c)}}function Btt(e={},t={}){arguments.length===1&&([e,t]=cc(e));const{y1:n,y:i=n,x:r}=t,[s,o,a]=uc(i,r,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function Utt(e={},t={}){arguments.length===1&&([e,t]=cc(e));const{y1:n,y:i=n,x:r}=t,[s,o,,a]=uc(i,r,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function b5(e={},t={}){arguments.length===1&&([e,t]=cc(e));const{x1:n,x:i=n,y:r,...s}=t,[o,a,l,c]=uc(i,r,"x","y",e,s);return{...o,x1:n,x:a,y1:l,y2:c,y:Eg(l,c)}}function Vtt(e={},t={}){arguments.length===1&&([e,t]=cc(e));const{x1:n,x:i=n,y:r}=t,[s,o,a]=uc(i,r,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function Xtt(e={},t={}){arguments.length===1&&([e,t]=cc(e));const{x1:n,x:i=n,y:r}=t,[s,o,,a]=uc(i,r,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function jx({x:e,x1:t,x2:n,...i}={}){return i=sc(i,"y"),t===void 0&&n===void 0?x5({x:e,...i}):([t,n]=wL(e,t,n),{...i,x1:t,x2:n})}function Zx({y:e,y1:t,y2:n,...i}={}){return i=sc(i,"x"),t===void 0&&n===void 0?b5({y:e,...i}):([t,n]=wL(e,t,n),{...i,y1:t,y2:n})}function cc(e){const{offset:t,order:n,reverse:i,...r}=e;return[{offset:t,order:n,reverse:i},r]}const Htt={length:!0};function uc(e,t=Jw,n,i,{offset:r,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${i}`);const l=eo(a),[c,u]=xn(e),[f,h]=$n(t),[d,g]=$n(t);return f.hint=d.hint=Htt,r=jtt(r),s=Ktt(s,r,i),[lr(a,(m,_,p)=>{({data:m,facets:_}=Ytt(m,_));const y=e==null?void 0:u(Tg(Ot(m,e),p==null?void 0:p[n])),x=Ot(m,t,Float64Array),w=Ot(m,l),v=s&&s(m,y,x,w),b=m.length,E=h(new Float64Array(b)),C=g(new Float64Array(b)),I=[];for(const S of _){const R=y?Array.from(Qr(S,M=>y[M]).values()):[S];if(v)for(const M of R)M.sort(v);for(const M of R){let k=0,O=0;o&&M.reverse();for(const A of M){const P=x[A];P<0?k=C[A]=(E[A]=k)+P:P>0?O=C[A]=(E[A]=O)+P:C[A]=E[A]=O}}I.push(R)}return r&&r(I,E,C,w),{data:m,facets:_}}),c,f,d]}function jtt(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Ztt;case"center":case"silhouette":return qtt;case"wiggle":return E5}throw new Error(`unknown offset: ${e}`)}}function v5(e,t){let n=0,i=0;for(const r of e){const s=t[r];s<n&&(n=s),s>i&&(i=s)}return[n,i]}function Ztt(e,t,n){for(const i of e)for(const r of i){const[s,o]=v5(r,n);for(const a of r){const l=1/(o-s||1);t[a]=l*(t[a]-s),n[a]=l*(n[a]-s)}}}function qtt(e,t,n){for(const i of e){for(const r of i){const[s,o]=v5(r,n);for(const a of r){const l=(o+s)/2;t[a]-=l,n[a]-=l}}T5(i,t,n)}C5(e,t,n)}function E5(e,t,n,i){for(const r of e){const s=new ta;let o=0;for(const a of r){let l=-1;const c=a.map(d=>Math.abs(n[d]-t[d])),u=a.map(d=>{l=i?i[d]:++l;const g=n[d]-t[d],m=s.has(l)?g-s.get(l):0;return s.set(l,g),m}),f=[0,...xY(u)];for(const d of a)t[d]+=o,n[d]+=o;const h=ir(c);h&&(o-=ir(c,(d,g)=>(u[g]/2+f[g])*d)/h)}T5(r,t,n)}C5(e,t,n)}function T5(e,t,n){const i=Sn(e,r=>Sn(r,s=>t[s]));for(const r of e)for(const s of r)t[s]-=i,n[s]-=i}function C5(e,t,n){const i=e.length;if(i===1)return;const r=e.map(a=>a.flat()),s=r.map(a=>(Sn(a,l=>t[l])+Ue(a,l=>n[l]))/2),o=Sn(s);for(let a=0;a<i;a++){const l=o-s[a];for(const c of r[a])t[c]+=l,n[c]+=l}}function Ktt(e,t,n){if(e===void 0&&t===E5)return rC(li);if(e!=null){if(typeof e=="string"){const i=e.startsWith("-"),r=i?bg:li;switch((i?e.slice(1):e).toLowerCase()){case"value":case n:return Jtt(r);case"z":return Qtt(r);case"sum":return tet(r);case"appearance":return eet(r);case"inside-out":return rC(r)}return sC(gL(e))}if(typeof e=="function")return(e.length===1?sC:net)(e);if(Array.isArray(e))return iet(e);throw new Error(`invalid order: ${e}`)}}function Jtt(e){return(t,n,i)=>(r,s)=>e(i[r],i[s])}function Qtt(e){return(t,n,i,r)=>(s,o)=>e(r[s],r[o])}function tet(e){return f0(e,(t,n,i,r)=>yw(ts(t),s=>ir(s,o=>i[o]),s=>r[s]))}function eet(e){return f0(e,(t,n,i,r)=>yw(ts(t),s=>n[ww(s,o=>i[o])],s=>r[s]))}function rC(e){return f0(e,(t,n,i,r)=>{const s=ts(t),o=yw(s,f=>n[ww(f,h=>i[h])],f=>r[f]),a=al(s,f=>ir(f,h=>i[h]),f=>r[f]),l=[],c=[];let u=0;for(const f of o)u<0?(u+=a.get(f),l.push(f)):(u-=a.get(f),c.push(f));return c.reverse().concat(l)})}function sC(e){return t=>{const n=Ot(t,e);return(i,r)=>li(n[i],n[r])}}function net(e){return t=>(n,i)=>e(t[n],t[i])}function iet(e){return f0(li,()=>e)}function f0(e,t){return(n,i,r,s)=>{if(!s)throw new Error("missing channel: z");const o=new ta(t(n,i,r,s).map((a,l)=>[a,l]));return(a,l)=>e(o.get(s[a]),o.get(s[l]))}}const ret={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class h0 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,z:a,curve:l,tension:c}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:eo(n),optional:!0}},n,ret),this.z=a,this.curve=Gx(l,c)}filter(t){return t}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n,0,0).call(u=>u.selectAll().data(NL(t,[o,a,l,c],this,i)).enter().append("path").call(le,this).call(Sg,this,i).attr("d",Uw().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>c[f]))).node()}}function set(e,t){return t===void 0?ua(e,{x:If,y:Gu}):new h0(e,t)}function Xu(e,t){const{y:n=Ln,...i}=Yx(t);return new h0(e,jx(Xx({...i,y1:n,y2:void 0})))}function ua(e,t){const{x:n=Ln,...i}=Wx(t);return new h0(e,Zx(Hx({...i,x1:n,x2:void 0})))}const oet={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class S5 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,curve:a,tension:l}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,oet),this.curve=d5(a,l),oc(this,n)}project(t,n,i){this.curve!==Wl&&super.project(t,n,i)}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i,{curve:u}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(le,this).attr("d",u===Wl&&s.projection?aet(s.projection,o,a,l,c):h=>{const d=Or(),g=u(d);return g.lineStart(),g.point(o[h],a[h]),g.point(l[h],c[h]),g.lineEnd(),d}).call(Ne,this,i).call($f,this,i,s)).node()}}function aet(e,t,n,i,r){const s=Qs(e);return t=Tn(t),n=Tn(n),i=Tn(i),r=Tn(r),o=>s({type:"LineString",coordinates:[[t[o],n[o]],[i[o],r[o]]]})}function M5(e,{x:t,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=Lg(t,n,i),[s,o]=Lg(r,s,o),new S5(e,{...a,x1:n,x2:i,y1:s,y2:o})}function Lg(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const cet={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class R5 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:h=u,sweep:d}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,cet),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+f,this.insetEnd=+h,this.sweep=uet(d)}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a,SW:u}=i,{strokeWidth:f,bend:h,headAngle:d,headLength:g,insetStart:m,insetEnd:_}=this,p=u?w=>u[w]:Bn(f===void 0?1:f),y=d*Mg/2,x=g/1.5;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(w=>w.selectAll().data(t).enter().append("path").call(le,this).attr("d",v=>{let b=o[v],E=a[v],C=l[v],I=c[v];const S=Math.hypot(C-b,I-E);if(S<=m+_)return null;let R=Math.atan2(I-E,C-b);const M=Math.min(x*p(v),S/3),k=this.sweep(b,E,C,I)*h*Mg,O=Math.hypot(S/Math.tan(k),S)/2;if(m||_)if(O<1e5){const nt=Math.sign(k),[st,ot]=fet([b,E],[C,I],O,nt);if(m&&([b,E]=oC([st,ot,O],[b,E,m],-nt*Math.sign(m))),_){const[$,B]=oC([st,ot,O],[C,I,_],nt*Math.sign(_));R+=Math.atan2(B-ot,$-st)-Math.atan2(I-ot,C-st),C=$,I=B}}else{const nt=C-b,st=I-E,ot=Math.hypot(nt,st);m&&(b+=nt/ot*m,E+=st/ot*m),_&&(C-=nt/ot*_,I-=st/ot*_)}const A=R+k,P=A+y,N=A-y,G=C-M*Math.cos(P),j=I-M*Math.sin(P),U=C-M*Math.cos(N),Z=I-M*Math.sin(N),z=O<1e5?`A${O},${O} 0,0,${k>0?1:0} `:"L",Q=M?`M${G},${j}L${C},${I}L${U},${Z}`:"";return`M${b},${E}${z}${C},${I}${Q}`}).call(Ne,this,i)).node()}}function uet(e=1){if(typeof e=="number")return Bn(Math.sign(e));if(typeof e=="function")return(t,n,i,r)=>Math.sign(e(t,n,i,r));switch(Un(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,i)=>me(t,i);case"-x":return(t,n,i)=>Qo(t,i);case"+y":return(t,n,i,r)=>me(n,r);case"-y":return(t,n,i,r)=>Qo(n,r)}}function fet([e,t],[n,i],r,s){const o=n-e,a=i-t,l=Math.hypot(o,a),c=s*Math.sqrt(r*r-l*l/4)/l;return[(e+n)/2-a*c,(t+i)/2+o*c]}function oC([e,t,n],[i,r,s],o){const a=i-e,l=r-t,c=Math.hypot(a,l),u=(a*a+l*l-s*s+n*n)/(2*c),f=o*Math.sqrt(n*n-u*u);return[e+(a*u+l*f)/c,t+(l*u-a*f)/c]}function het(e,{x:t,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=Lg(t,n,i),[s,o]=Lg(r,s,o),new R5(e,{...a,x1:n,x2:i,y1:s,y2:o})}class qx extends re{constructor(t,n,i={},r){super(t,n,i,r);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:c=s,rx:u,ry:f}=i;this.insetTop=Ft(o),this.insetRight=Ft(a),this.insetBottom=Ft(l),this.insetLeft=Ft(c),this.rx=xe(u,"auto"),this.ry=xe(f,"auto")}render(t,n,i,r,s){const{rx:o,ry:a}=this;return Ht("svg:g",s).call(he,this,r,s).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call(le,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(mt,"rx",o).call(mt,"ry",a).call(Ne,this,i)).node()}_x(t,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?s=>n[s]+r:i+r}_y(t,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?s=>n[s]+r:i+r}_width({x:t},{x:n},{marginRight:i,marginLeft:r,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&t?t.bandwidth():s-i-r;return Math.max(0,l-o-a)}_height({y:t},{y:n},{marginTop:i,marginBottom:r,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&t?t.bandwidth():s-i-r;return Math.max(0,l-o-a)}}const I5={ariaLabel:"bar"};class A5 extends qx{constructor(t,n={}){const{x1:i,x2:r,y:s}=n;super(t,{x1:{value:i,scale:"x"},x2:{value:r,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,I5)}_transform(t,n,{x:i}){t.call(ie,n,{x:i},0,0)}_x({x:t},{x1:n,x2:i},{marginLeft:r}){const{insetLeft:s}=this;return si(t)?r+s:o=>Math.min(n[o],i[o])+s}_width({x:t},{x1:n,x2:i},{marginRight:r,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return si(t)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}class L5 extends qx{constructor(t,n={}){const{x:i,y1:r,y2:s}=n;super(t,{y1:{value:r,scale:"y"},y2:{value:s,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,I5)}_transform(t,n,{y:i}){t.call(ie,n,{y:i},0,0)}_y({y:t},{y1:n,y2:i},{marginTop:r}){const{insetTop:s}=this;return si(t)?r+s:o=>Math.min(n[o],i[o])+s}_height({y:t},{y1:n,y2:i},{marginTop:r,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return si(t)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}function Fo(e,t={}){return Zm(t)||(t={...t,y:Ln,x2:wt}),new A5(e,jx(pO(Xx(t))))}function No(e,t={}){return Zm(t)||(t={...t,x:Ln,y2:wt}),new L5(e,Zx(yO(Hx(t))))}const det={ariaLabel:"cell"};class d0 extends qx{constructor(t,{x:n,y:i,...r}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,det)}_transform(t,n){t.call(ie,n,{},0,0)}}function Ka(e,{x:t,y:n,...i}={}){return[t,n]=Di(t,n),new d0(e,{...i,x:t,y:n})}function get(e,{x:t=Ln,fill:n,stroke:i,...r}={}){return n===void 0&&Rn(i)[0]===void 0&&(n=wt),new d0(e,{...r,x:t,fill:n,stroke:i})}function met(e,{y:t=Ln,fill:n,stroke:i,...r}={}){return n===void 0&&Rn(i)[0]===void 0&&(n=wt),new d0(e,{...r,y:t,fill:n,stroke:i})}const pet={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function Kx(e){return e.sort===void 0&&e.reverse===void 0?ML({channel:"-r"},e):e}class g0 extends re{constructor(t,n={}){const{x:i,y:r,r:s,rotate:o,symbol:a=zu,frameAnchor:l}=n,[c,u]=Te(o,0),[f,h]=IK(a),[d,g]=Te(s,f==null?3:4.5);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:d,scale:"r",filter:Gr,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},Kx(n),pet),this.r=g,this.rotate=u,this.symbol=h,this.frameAnchor=Of(l);const{channels:m}=this,{symbol:_}=m;if(_){const{fill:p,stroke:y}=m;_.hint={fill:p?p.value===_.value?"color":"currentColor":this.fill??"currentColor",stroke:y?y.value===_.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,r:u,rotate:f,symbol:h}=i,{r:d,rotate:g,symbol:m}=this,[_,p]=cr(this,r),y=m===zu,x=u?void 0:d*d*Math.PI;return Hm(d)&&(t=[]),Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(w=>w.selectAll().data(t).enter().append(y?"circle":"path").call(le,this).call(y?v=>{v.attr("cx",l?b=>l[b]:_).attr("cy",c?b=>c[b]:p).attr("r",u?b=>u[b]:d)}:v=>{v.attr("transform",a0`translate(${l?b=>l[b]:_},${c?b=>c[b]:p})${f?b=>` rotate(${f[b]})`:g?` rotate(${g})`:""}`).attr("d",u&&h?b=>{const E=Or();return h[b].draw(E,u[b]*u[b]*Math.PI),E}:u?b=>{const E=Or();return m.draw(E,u[b]*u[b]*Math.PI),E}:h?b=>{const E=Or();return h[b].draw(E,x),E}:(()=>{const b=Or();return m.draw(b,x),b})())}).call(Ne,this,i)).node()}}function rs(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Di(t,n)),new g0(e,{...i,x:t,y:n})}function yet(e,{x:t=wt,...n}={}){return new g0(e,wO({...n,x:t}))}function _et(e,{y:t=wt,...n}={}){return new g0(e,_O({...n,y:t}))}function wet(e,t){return rs(e,{...t,symbol:"circle"})}function xet(e,t){return rs(e,{...t,symbol:"hexagon"})}const bet={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class m0 extends re{constructor(t,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:eo(n),optional:!0}},n,bet),this.z=s,this.curve=d5(o,a),oc(this,n)}filter(t){return t}project(t,n,i){this.curve!==Wl&&super.project(t,n,i)}render(t,n,i,r,s){const{x:o,y:a}=i,{curve:l}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(c=>c.selectAll().data(NL(t,[o,a],this,i)).enter().append("path").call(le,this).call(Sg,this,i).call(EQ,this,i,s).attr("d",l===Wl&&s.projection?vet(s.projection,o,a):N6().curve(l).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function vet(e,t,n){const i=Qs(e);return t=Tn(t),n=Tn(n),r=>{let s=[];const o=[s];for(const a of r)a===-1?(s=[],o.push(s)):s.push([t[a],n[a]]);return i({type:"MultiLineString",coordinates:o})}}function Jx(e,{x:t,y:n,...i}={}){return[t,n]=Di(t,n),new m0(e,{...i,x:t,y:n})}function Hu(e,{x:t=wt,y:n=Ln,...i}={}){return new m0(e,Yx({...i,x:t,y:n}))}function Yl(e,{x:t=Ln,y:n=wt,...i}={}){return new m0(e,Wx({...i,x:t,y:n}))}const Eet={ariaLabel:"rect"};class p0 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:c=a,insetBottom:u=a,insetLeft:f=a,rx:h,ry:d}=n;super(t,{x1:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Eet),this.insetTop=Ft(l),this.insetRight=Ft(c),this.insetBottom=Ft(u),this.insetLeft=Ft(f),this.rx=xe(h,"auto"),this.ry=xe(d,"auto")}render(t,n,i,r,s){const{x:o,y:a}=n,{x1:l,y1:c,x2:u,y2:f}=i,{marginTop:h,marginRight:d,marginBottom:g,marginLeft:m,width:_,height:p}=r,{projection:y}=s,{insetTop:x,insetRight:w,insetBottom:v,insetLeft:b,rx:E,ry:C}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&u&&o,y:c&&f&&a},0,0).call(I=>I.selectAll().data(t).enter().append("rect").call(le,this).attr("x",l&&u&&(y||!si(o))?S=>Math.min(l[S],u[S])+b:m+b).attr("y",c&&f&&(y||!si(a))?S=>Math.min(c[S],f[S])+x:h+x).attr("width",l&&u&&(y||!si(o))?S=>Math.max(0,Math.abs(u[S]-l[S])-b-w):_-d-m-w-b).attr("height",c&&f&&(y||!si(a))?S=>Math.max(0,Math.abs(c[S]-f[S])-x-v):p-h-g-x-v).call(mt,"rx",E).call(mt,"ry",C).call(Ne,this,i)).node()}}function Qx(e,t){return new p0(e,gO(mO(t)))}function Og(e,t={}){return Zm(t)||(t={...t,y:Ln,x2:wt,interval:1}),new p0(e,jx(mO(Xx(t))))}function kg(e,t={}){return Zm(t)||(t={...t,x:Ln,y2:wt,interval:1}),new p0(e,Zx(gO(Hx(t))))}function O5(e,t){t=Cet(t);const{x:n,y:i,color:r,size:s}=t,o=Dh(e,n),a=Dh(e,i),l=Dh(e,r),c=Dh(e,s);let{fx:u,fy:f,x:{value:h,reduce:d,zero:g,...m},y:{value:_,reduce:p,zero:y,...x},color:{value:w,color:v,reduce:b},size:{value:E,reduce:C},mark:I}=t;if(d===void 0&&(d=p==null&&h==null&&E==null&&_!=null?"count":null),p===void 0&&(p=d==null&&_==null&&E==null&&h!=null?"count":null),C===void 0&&E==null&&b==null&&d==null&&p==null&&(h==null||ye(o))&&(_==null||ye(a))&&(C="count"),g===void 0&&(g=$h(d)?!0:void 0),y===void 0&&(y=$h(p)?!0:void 0),h==null&&_==null)throw new Error("must specify x or y");if(d!=null&&_==null)throw new Error("reducing x requires y");if(p!=null&&h==null)throw new Error("reducing y requires x");I===void 0&&(I=E!=null||C!=null?"dot":$h(d)||$h(p)||b!=null?"bar":h!=null&&_!=null?ye(o)||ye(a)||d==null&&p==null&&!Oc(o)&&!Oc(a)?"dot":"line":h!=null||_!=null?"rule":null);let S,R,M;switch(I){case"dot":M=rs,R="stroke";break;case"line":M=o&&a||d!=null||p!=null?y||p!=null||o&&Oc(o)?Yl:g||d!=null||a&&Oc(a)?Hu:Jx:o?Hu:Yl,R="stroke",lC(l)&&(S=null);break;case"area":M=!(y||p!=null)&&(g||d!=null||a&&Oc(a))?Xu:ua,R="fill",lC(l)&&(S=null);break;case"rule":M=o?jr:Hs,R="stroke";break;case"bar":M=d!=null?ye(a)?aC(d)&&o&&ye(o)?Ka:Fo:Og:p!=null?ye(o)?aC(p)&&a&&ye(a)?Ka:No:kg:b!=null||C!=null?o&&ye(o)&&a&&ye(a)?Ka:o&&ye(o)?No:a&&ye(a)?Fo:Qx:o&&qa(o)&&!(a&&qa(a))?Fo:a&&qa(a)&&!(o&&qa(o))?No:Ka,R="fill";break;default:throw new Error(`invalid mark: ${I}`)}let k={fx:u,fy:f,x:o??void 0,y:a??void 0,[R]:l??v,z:S,r:c??void 0,tip:!0},O,A={[R]:b??void 0,r:C??void 0};if(d!=null&&p!=null)throw new Error("cannot reduce both x and y");return p!=null?(A.y=p,O=ye(o)?Yu:Rs):d!=null?(A.x=d,O=ye(a)?Bu:Is):(b!=null||C!=null)&&(o&&a?O=ye(o)&&ye(a)?fx:ye(o)?Is:ye(a)?Rs:Eo:o?O=ye(o)?Yu:Rs:a&&(O=ye(a)?Bu:Is)),(O===Eo||O===Rs)&&(k.x={value:o,...m}),(O===Eo||O===Is)&&(k.y={value:a,...x}),g===void 0&&(g=o&&!(O===Eo||O===Rs)&&(M===Fo||M===Xu||M===Og||M===Hs)),y===void 0&&(y=a&&!(O===Eo||O===Is)&&(M===No||M===ua||M===kg||M===jr)),{fx:u??null,fy:f??null,x:{value:h??null,reduce:d??null,zero:!!g,...m},y:{value:_??null,reduce:p??null,zero:!!y,...x},color:{value:w??null,reduce:b??null,...v!==void 0&&{color:v}},size:{value:E??null,reduce:C??null},mark:I,markImpl:cC[M],markOptions:k,transformImpl:cC[O],transformOptions:A,colorMode:R}}function Tet(e,t){const n=O5(e,t),{fx:i,fy:r,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:c}=n,u=$_[n.markImpl],f=$_[n.transformImpl],h=i!=null||r!=null?Dx({strokeOpacity:.1}):null,d=[s?jr([0]):null,o?Hs([0]):null],g=u(e,f?f(l,a):a);return c==="stroke"?Pi(h,d,g):Pi(h,g,d)}function Oc(e){let t,n;for(const i of e){if(i==null)continue;if(t===void 0){t=i;continue}const r=Math.sign(me(t,i));if(r){if(n!==void 0&&r!==n)return!1;t=i,n=r}}return!0}function Cet({x:e,y:t,color:n,size:i,fx:r,fy:s,mark:o}={}){return Yi(e)||(e=Da(e)),Yi(t)||(t=Da(t)),Yi(n)||(n=Lf(n)?{color:n}:Da(n)),Yi(i)||(i=Da(i)),Yi(r)&&({value:r}=Da(r)),Yi(s)&&({value:s}=Da(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:e,y:t,color:n,size:i,fx:r,fy:s,mark:o}}function Dh(e,t){const n=Ot(e,t.value);return n&&(n.label=es(t.value)),n}function Da(e){return Met(e)?{reduce:e}:{value:e}}function $h(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function aC(e){return/^(?:first|last|mode)$/i.test(e)}function Met(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&ci(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function lC(e){return e?new df(e).size>e.length>>1:!1}const $_={dot:rs,line:Jx,lineX:Hu,lineY:Yl,areaX:Xu,areaY:ua,ruleX:jr,ruleY:Hs,barX:Fo,barY:No,rect:Qx,rectX:Og,rectY:kg,cell:Ka,bin:Eo,binX:Rs,binY:Is,group:fx,groupX:Yu,groupY:Bu},cC=Object.fromEntries(Object.entries($_).map(([e,t])=>[t,e]));function tb(e,t={}){let{x:n,x1:i,x2:r}=t;n===void 0&&i===void 0&&r===void 0&&(t={...t,x:n=wt});const s={};return n!=null&&(s.x=e),i!=null&&(s.x1=e),r!=null&&(s.x2=e),Zr(s,t)}function eb(e,t={}){let{y:n,y1:i,y2:r}=t;n===void 0&&i===void 0&&r===void 0&&(t={...t,y:n=wt});const s={};return n!=null&&(s.y=e),i!=null&&(s.y1=e),r!=null&&(s.y2=e),Zr(s,t)}function Zr(e={},t={}){const n=eo(t),i=Object.entries(e).map(([r,s])=>{const o=xL(r,t);if(o==null)throw new Error(`missing channel: ${r}`);const[a,l]=$n(o);return{key:r,input:o,output:a,setOutput:l,map:Ret(s)}});return{...lr(t,(r,s)=>{const o=Ot(r,n),a=i.map(({input:c})=>Ot(r,c)),l=i.map(({setOutput:c})=>c(new Array(r.length)));for(const c of s)for(const u of o?Qr(c,f=>o[f]).values():[c])i.forEach(({map:f},h)=>f.mapIndex(u,a[h],l[h]));return{data:r,facets:s}}),...Object.fromEntries(i.map(({key:r,output:s})=>[r,s]))}}function Ret(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&ci(e))return Iet(e);if(typeof e=="function")return Bp(ex(e));switch(`${e}`.toLowerCase()){case"cumsum":return Let;case"rank":return Bp((t,n)=>bI(t,i=>n[i]));case"quantile":return Bp((t,n)=>Aet(t,i=>n[i]))}throw new Error(`invalid map: ${e}`)}function Iet(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function Aet(e,t){const n=Em(e,t)-1;return bI(e,t).map(i=>i/n)}function Bp(e){return{mapIndex(t,n,i){const r=e(t,n);if(r.length!==t.length)throw new Error("map function returned a mismatched length");for(let s=0,o=t.length;s<o;++s)i[t[s]]=r[s]}}}const Let={mapIndex(e,t,n){let i=0;for(const r of e)n[r]=i+=t[r]}};function Oet(e={},t){return arguments.length===1&&(t=e),tb(y0(e),t)}function z_(e={},t){return arguments.length===1&&(t=e),eb(y0(e),t)}function y0(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:i,anchor:r,strict:s}=e;if(r===void 0&&i!==void 0&&(r=Pet(i),Wr(`Warning: the shift option is deprecated; please use anchor "${r}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return Fet(n)(t,ket(r,t),s)}function ket(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function Pet(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function Fet(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return zh(Qw(e));switch(e.toLowerCase()){case"deviation":return zh(hf);case"max":return Gh((t,n)=>Ue(t,i=>n[i]));case"mean":return Net;case"median":return zh(Lu);case"min":return Gh((t,n)=>Sn(t,i=>n[i]));case"mode":return Gh((t,n)=>xI(t,i=>n[i]));case"sum":return k5;case"variance":return zh(gw);case"difference":return zet;case"ratio":return Get;case"first":return Wet;case"last":return Yet}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return Gh(ex(e))}function zh(e){return(t,n,i)=>i?{mapIndex(r,s,o){const a=c=>s[c]==null?NaN:+s[c];let l=0;for(let c=0;c<t-1;++c)isNaN(a(c))&&++l;for(let c=0,u=r.length-t+1;c<u;++c)isNaN(a(c+t-1))&&++l,o[r[c+n]]=l===0?e(Zo(r,c,c+t),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(r,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[r[l+n]]=e(Zo(r,0,l+t),a);for(let l=0,c=r.length-n;l<c;++l)o[r[l+n]]=e(Zo(r,l,l+t),a)}}}function Gh(e){return(t,n,i)=>i?{mapIndex(r,s,o){let a=0;for(let l=0;l<t-1;++l)a+=gn(s[r[l]]);for(let l=0,c=r.length-t+1;l<c;++l)a+=gn(s[r[l+t-1]]),a===t&&(o[r[l+n]]=e(Zo(r,l,l+t),s)),a-=gn(s[r[l]])}}:{mapIndex(r,s,o){for(let a=-n;a<0;++a)o[r[a+n]]=e(Zo(r,0,a+t),s);for(let a=0,l=r.length-n;a<l;++a)o[r[a+n]]=e(Zo(r,a,a+t),s)}}}function k5(e,t,n){return n?{mapIndex(i,r,s){let o=0,a=0;for(let l=0;l<e-1;++l){const c=r[i[l]];c===null||isNaN(c)?++o:a+=+c}for(let l=0,c=i.length-e+1;l<c;++l){const u=r[i[l]],f=r[i[l+e-1]];f===null||isNaN(f)?++o:a+=+f,s[i[l+t]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(i,r,s){let o=0;const a=i.length;for(let l=0,c=Math.min(a,e-t-1);l<c;++l)o+=+r[i[l]]||0;for(let l=-t,c=a-t;l<c;++l)o+=+r[i[l+e-1]]||0,s[i[l+t]]=o,o-=+r[i[l]]||0}}}function Net(e,t,n){if(n){const i=k5(e,t,n);return{mapIndex(r,s,o){i.mapIndex(r,s,o);for(let a=0,l=r.length-e+1;a<l;++a)o[r[a+t]]/=e}}}else return{mapIndex(i,r,s){let o=0,a=0;const l=i.length;for(let c=0,u=Math.min(l,e-t-1);c<u;++c){let f=r[i[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let c=-t,u=l-t;c<u;++c){let f=r[i[c+e-1]],h=r[i[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[i[c+t]]=o/a,h!==null&&!isNaN(h=+h)&&(o-=h,--a)}}}}function Det(e,t,n,i){for(let r=n+i;n<r;++n){const s=e[t[n]];if(gn(s))return s}}function $et(e,t,n,i){for(let r=n+i-1;r>=n;--r){const s=e[t[r]];if(gn(s))return s}}function P5(e,t,n,i){for(let r=n+i;n<r;++n){let s=e[t[n]];if(s!==null&&!isNaN(s=+s))return s}}function F5(e,t,n,i){for(let r=n+i-1;r>=n;--r){let s=e[t[r]];if(s!==null&&!isNaN(s=+s))return s}}function zet(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o){const l=r[i[o]],c=r[i[o+e-1]];s[i[o+t]]=l===null||c===null?NaN:c-l}}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=F5(r,i,o,e)-P5(r,i,o,e)}}}function Get(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o){const l=r[i[o]],c=r[i[o+e-1]];s[i[o+t]]=l===null||c===null?NaN:c/l}}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=F5(r,i,o,e)/P5(r,i,o,e)}}}function Wet(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o)s[i[o+t]]=r[i[o]]}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=Det(r,i,o,e)}}}function Yet(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o)s[i[o+t]]=r[i[o+e-1]]}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=$et(r,i,o,e)}}}const Yr={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function Bet(e,{x:t=wt,y:n,k:i=Yr.k,color:r=Yr.color,opacity:s=Yr.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...f}={}){return Pi(ve(o)?null:Xu(e,Zr({x1:qo({k:-i,...f}),x2:qo({k:i,...f})},{x1:t,x2:t,y:n,fill:o,fillOpacity:a,...f})),ve(l)?null:Hu(e,Zr({x:qo(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function Uet(e,{x:t,y:n=wt,k:i=Yr.k,color:r=Yr.color,opacity:s=Yr.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...f}={}){return Pi(ve(o)?null:ua(e,Zr({y1:qo({k:-i,...f}),y2:qo({k:i,...f})},{x:t,y1:n,y2:n,fill:o,fillOpacity:a,...f})),ve(l)?null:Yl(e,Zr({y:qo(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function qo({n:e=Yr.n,k:t=0,strict:n=Yr.strict,anchor:i=Yr.anchor}={}){return y0({k:e,reduce:r=>Tm(r)+t*(hf(r)||0),strict:n,anchor:i})}const Vet={ariaLabel:"tick",fill:null,stroke:"currentColor"};class N5 extends re{constructor(t,n,i){super(t,n,i,Vet),oc(this,i)}render(t,n,i,r,s){return Ht("svg:g",s).call(he,this,r,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(le,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(Ne,this,i).call($f,this,i,s)).node()}}class D5 extends N5{constructor(t,n={}){const{x:i,y:r,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=Ft(o),this.insetBottom=Ft(a)}_transform(t,n,{x:i}){t.call(ie,n,{x:i},He,0)}_x1(t,{x:n}){return i=>n[i]}_x2(t,{x:n}){return i=>n[i]}_y1({y:t},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&t?s=>n[s]+r:i+r}_y2({y:t},{y:n},{height:i,marginBottom:r}){const{insetBottom:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:i-r-s}}class $5 extends N5{constructor(t,n={}){const{x:i,y:r,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(t,{y:{value:r,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n),this.insetRight=Ft(o),this.insetLeft=Ft(a)}_transform(t,n,{y:i}){t.call(ie,n,{y:i},0,He)}_x1({x:t},{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n&&t?s=>n[s]+r:i+r}_x2({x:t},{x:n},{width:i,marginRight:r}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:i-r-s}_y1(t,{y:n}){return i=>n[i]}_y2(t,{y:n}){return i=>n[i]}}function z5(e,{x:t=wt,...n}={}){return new D5(e,{...n,x:t})}function G5(e,{y:t=wt,...n}={}){return new $5(e,{...n,y:t})}function Xet(e,{x:t=wt,y:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Bu:ux;return Pi(Hs(e,u({x1:nb,x2:ib},{x:t,y:n,stroke:s,strokeOpacity:o,...c})),Fo(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:i,fillOpacity:r,...c})),z5(e,u({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),rs(e,Zr({x:W5},{x:t,y:n,z:n,stroke:s,strokeOpacity:o,...c})))}function Het(e,{y:t=wt,x:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Yu:ux;return Pi(jr(e,u({y1:nb,y2:ib},{x:n,y:t,stroke:s,strokeOpacity:o,...c})),No(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:i,fillOpacity:r,...c})),G5(e,u({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),rs(e,Zr({y:W5},{x:n,y:t,z:n,stroke:s,strokeOpacity:o,...c})))}function W5(e){const t=nb(e),n=ib(e);return e.map(i=>i<t||i>n?i:NaN)}function nb(e){const t=Y5(e)*2.5-B5(e)*1.5;return Sn(e,n=>n>=t?n:NaN)}function ib(e){const t=B5(e)*2.5-Y5(e)*1.5;return Ue(e,n=>n<=t?n:NaN)}function Y5(e){return Us(e,.25)}function B5(e){return Us(e,.75)}const jet={ariaLabel:"raster",stroke:null,pixelSize:1};function $a(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function uC(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class U5 extends re{constructor(t,n,i={},r){let{width:s,height:o,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:f=a==null?s:void 0,y2:h=l==null?o:void 0,pixelSize:d=r.pixelSize,blur:g=0,interpolate:m}=i;if(s!=null&&(s=uC(s,"width")),o!=null&&(o=uC(o,"height")),c!=null&&(c=$a(c,"x1")),u!=null&&(u=$a(u,"y1")),f!=null&&(f=$a(f,"x2")),h!=null&&(h=$a(h,"y2")),a==null&&(c==null||f==null))throw new Error("missing x");if(l==null&&(u==null||h==null))throw new Error("missing y");t!=null&&s!=null&&o!=null&&(a===void 0&&c!=null&&f!=null&&(a=int(c,f,s)),l===void 0&&u!=null&&h!=null&&(l=rnt(u,h,s,o))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:h==null?null:[h],scale:"y",optional:!0,filter:null},...n},i,r),this.width=s,this.height=o,this.pixelSize=$a(d,"pixelSize"),this.blur=$a(g,"blur"),this.interpolate=a==null||l==null?null:qet(m)}}class V5 extends U5{constructor(t,n={}){const{imageRendering:i}=n;if(t==null){const{fill:r,fillOpacity:s}=n;Te(s)[0]!==void 0&&(n=G_("fillOpacity",n)),Rn(r)[0]!==void 0&&(n=G_("fill",n))}super(t,void 0,n,jet),this.imageRendering=xe(i,"auto")}scale(t,{color:n,...i},r){return super.scale(t,i,r)}render(t,n,i,r,s){var A;const o=n[(A=i.channels.fill)==null?void 0:A.scale]??(P=>P),{x:a,y:l}=i,{document:c}=s,[u,f,h,d]=H5(i,r,s),g=h-u,m=d-f,{pixelSize:_,width:p=Math.round(Math.abs(g)/_),height:y=Math.round(Math.abs(m)/_)}=this,x=p*y;let{fill:w,fillOpacity:v}=i,b=0;if(this.interpolate){const P=p/g,N=y/m,G=se(a,U=>(U-u)*P,Float64Array),j=se(l,U=>(U-f)*N,Float64Array);w&&(w=this.interpolate(t,p,y,G,j,w)),v&&(v=this.interpolate(t,p,y,G,j,v))}else this.data==null&&t&&(b=t.fi*x);const E=c.createElement("canvas");E.width=p,E.height=y;const C=E.getContext("2d"),I=C.createImageData(p,y),S=I.data;let{r:R,g:M,b:k}=rr(this.fill)??{r:0,g:0,b:0},O=(this.fillOpacity??1)*255;for(let P=0;P<x;++P){const N=P<<2;if(w){const G=o(w[P+b]);if(G==null){S[N+3]=0;continue}({r:R,g:M,b:k}=rr(G))}v&&(O=v[P+b]*255),S[N+0]=R,S[N+1]=M,S[N+2]=k,S[N+3]=O}return this.blur>0&&hY(I,this.blur),C.putImageData(I,0,0),Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(P=>P.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(h-u)},${Math.sign(d-f)})`).attr("width",Math.abs(g)).attr("height",Math.abs(m)).attr("preserveAspectRatio","none").call(mt,"image-rendering",this.imageRendering).call(le,this).attr("xlink:href",E.toDataURL())).node()}}function X5(e,t,n){arguments.length<3&&(n=t,t=null);let{x:i,y:r,[e]:s,...o}=n;return i===void 0&&r===void 0&&yK(t)&&(i=If,r=Gu,s===void 0&&(s=hK)),[t,{...o,x:i,y:r,[e]:s}]}function Zet(){const[e,t]=X5("fill",...arguments);return new V5(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:wt})}function H5({x1:e,y1:t,x2:n,y2:i},r,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f}=r;return[e&&s==null?e[0]:f,t&&s==null?t[0]:l,n&&s==null?n[0]:o-c,i&&s==null?i[0]:a-u]}function j5({x1:e,y1:t,x2:n,y2:i},r,s,o){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),i&&(a.y2=i),H5(_x(a,r),s,o)}function G_(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return An({...t,[e]:void 0},function(i,r,s,o,a,l){const{x:c,y:u}=o;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,h,d,g]=j5(s,o,a,l),m=d-f,_=g-h,{pixelSize:p}=this,{width:y=Math.round(Math.abs(m)/p),height:x=Math.round(Math.abs(_)/p)}=t,w=new Array(y*x*(r?r.length:1)),v=m/y,b=_/x;let E=0;for(const C of r??[void 0])for(let I=.5;I<x;++I)for(let S=.5;S<y;++S,++E)w[E]=n(c.invert(f+S*v),u.invert(h+I*b),C);return{data:w,facets:r,channels:{[e]:{value:w,scale:"auto"}}}})}function qet(e){if(typeof e=="function")return e;if(e==null)return W_;switch(`${e}`.toLowerCase()){case"none":return W_;case"nearest":return q5;case"barycentric":return Z5();case"random-walk":return K5()}throw new Error(`invalid interpolate: ${e}`)}function W_(e,t,n,i,r,s){const o=new Array(t*n);for(const a of e)i[a]<0||i[a]>=t||r[a]<0||r[a]>=n||(o[Math.floor(r[a])*t+Math.floor(i[a])]=s[a]);return o}function Z5({random:e=Dw(42)}={}){return(t,n,i,r,s,o)=>{const{points:a,triangles:l,hull:c}=Js.from(t,d=>r[d],d=>s[d]),u=new o.constructor(n*i).fill(NaN),f=new Uint8Array(n*i),h=nnt(o,e);for(let d=0;d<l.length;d+=3){const g=l[d],m=l[d+1],_=l[d+2],p=a[2*g],y=a[2*m],x=a[2*_],w=a[2*g+1],v=a[2*m+1],b=a[2*_+1],E=Math.min(p,y,x),C=Math.max(p,y,x),I=Math.min(w,v,b),S=Math.max(w,v,b),R=(v-b)*(p-x)+(w-b)*(x-y);if(!R)continue;const M=o[t[g]],k=o[t[m]],O=o[t[_]];for(let A=Math.floor(E);A<C;++A)for(let P=Math.floor(I);P<S;++P){if(A<0||A>=n||P<0||P>=i)continue;const N=A+.5,G=P+.5,j=((v-b)*(N-x)+(G-b)*(x-y))/R;if(j<0)continue;const U=((b-w)*(N-x)+(G-b)*(p-x))/R;if(U<0)continue;const Z=1-j-U;if(Z<0)continue;const z=A+n*P;u[z]=h(M,j,k,U,O,Z,A,P),f[z]=1}}return Ket(u,f,r,s,o,n,i,c,t,h),u}}function Ket(e,t,n,i,r,s,o,a,l,c){n=Float64Array.from(a,d=>n[l[d]]),i=Float64Array.from(a,d=>i[l[d]]),r=Array.from(a,d=>r[l[d]]);const u=n.length,f=Array.from({length:u},(d,g)=>Qet(g,n,i));let h=0;for(let d=0;d<o;++d){const g=d+.5;for(let m=0;m<s;++m){const _=m+s*d;if(!t[_]){const p=m+.5;for(let y=0;y<u;++y){const x=(u+h+(y%2?(y+1)/2:-y/2))%u;if(f[x](p,g)){const w=Jet(n.at(x-1),i.at(x-1),n[x],i[x],p,g);e[_]=c(r.at(x-1),w,r[x],1-w,r[x],0,m,d),h=x;break}}}}}}function Jet(e,t,n,i,r,s){const o=n-e,a=i-t,l=o*(n-r)+a*(i-s),c=o*(r-e)+a*(s-t);return l>0&&c>0?l/(l+c):+(l>c)}function kc(e,t,n,i){return e*i-n*t}function Qet(e,t,n){const i=t.length,r=t.at(e-2),s=n.at(e-2),o=t.at(e-1),a=n.at(e-1),l=t[e],c=n[e],u=t.at(e+1-i),f=n.at(e+1-i),h=o-l,d=a-c,g=r-o,m=s-a,_=l-u,p=c-f,y=Math.hypot(h,d),x=Math.hypot(g,m),w=Math.hypot(_,p);return(v,b)=>{const E=v-o,C=b-a,I=v-l,S=b-c;return kc(E,C,I,S)>-1e-6&&kc(E,C,h,d)*x-kc(E,C,g,m)*y>-1e-6&&kc(I,S,_,p)*y-kc(I,S,h,d)*w<=0}}function q5(e,t,n,i,r,s){const o=new s.constructor(t*n),a=Js.from(e,u=>i[u],u=>r[u]);let l,c;for(let u=.5,f=0;u<n;++u){c=l;for(let h=.5;h<t;++h,++f)c=a.find(h,u,c),h===.5&&(l=c),o[f]=s[e[c]]}return o}function K5({random:e=Dw(42),minDistance:t=.5,maxSteps:n=2}={}){return(i,r,s,o,a,l)=>{const c=new l.constructor(r*s),u=Js.from(i,g=>o[g],g=>a[g]);let f,h,d;for(let g=.5,m=0;g<s;++g){h=f;for(let _=.5;_<r;++_,++m){let p=_,y=g;d=h=u.find(p,y,h),_===.5&&(f=h);let x,w=0;for(;(x=Math.hypot(o[i[d]]-p,a[i[d]]-y))>t&&w<n;){const v=e(_,g,w)*2*Math.PI;p+=Math.cos(v)*x,y+=Math.sin(v)*x,d=u.find(p,y,d),++w}c[m]=l[i[d]]}}return c}}function tnt(e,t,n,i,r,s){return t*e+i*n+s*r}function ent(e){return(t,n,i,r,s,o,a,l)=>{const c=e(a,l);return c<n?t:c<n+r?i:s}}function nnt(e,t){return qa(e)||yn(e)?tnt:ent(t)}function int(e,t,n){return{transform(i){const r=i.length,s=new Float64Array(r),o=(t-e)/n,a=e+o/2;for(let l=0;l<r;++l)s[l]=l%n*o+a;return s}}}function rnt(e,t,n,i){return{transform(r){const s=r.length,o=new Float64Array(s),a=(t-e)/i,l=e+a/2;for(let c=0;c<s;++c)o[c]=Math.floor(c/n)%i*a+l;return o}}}const fC={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class J5 extends U5{constructor(t,{smooth:n=!0,value:i,...r}={}){const s=FL({},r,fC);if(i===void 0){for(const a in s)if(s[a].value!=null){if(i!==void 0)throw new Error("ambiguous contour value");i=r[a],r[a]="value"}}if(i!=null){const a={transform:l=>l.map(c=>c.value),label:es(i)};for(const l in s)r[l]==="value"&&(r[l]=a)}if(t==null){if(i==null)throw new Error("missing contour value");r=G_("value",{value:i,...r}),i=null}else{let{interpolate:a}=r;i===void 0&&(i=wt),a===void 0&&(r.interpolate="nearest")}super(t,{value:{value:i,optional:!0}},snt(r),fC);const o={geometry:{value:wt}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(t,{x:n,y:i,value:r,...s},o){return super.filter(t,s,o)}render(t,n,i,r,s){const{geometry:o}=i,a=Qs();return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(l=>{l.selectAll().data(t).enter().append("path").call(le,this).attr("d",c=>a(o[c])).call(Ne,this,i)}).node()}}function snt({thresholds:e,interval:t,...n}){return e=m5(e,t,_w),An(n,function(i,r,s,o,a,l){const[c,u,f,h]=j5(s,o,a,l),d=f-c,g=h-u,{pixelSize:m,width:_=Math.round(Math.abs(d)/m),height:p=Math.round(Math.abs(g)/m)}=this,y=_/d,x=p/g,w=s.value.value,v=[];if(this.interpolate){const{x:S,y:R}=n0(s,o,l),M=se(S,P=>(P-c)*y,Float64Array),k=se(R,P=>(P-u)*x,Float64Array),O=[s.x,s.y,s.value],A=[M,k,w];for(const P of r){const N=this.filter(P,O,A);v.push(this.interpolate(N,_,p,M,k,w))}}else if(r){const S=_*p,R=r.length;for(let M=0;M<R;++M)v.push(w.slice(M*S,M*S+S))}else v.push(w);if(this.blur>0)for(const S of v)uI({data:S,width:_,height:p},this.blur);const b=ont(e,w,...lnt(v));if(b===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:E}=n_().size([_,p]).smooth(this.smooth),C=[],I=[];for(const S of v)I.push(ei(C.length,C.push(...se(b,R=>E(S,R)))));for(const{coordinates:S}of C)for(const R of S)for(const M of R)for(const k of M)k[0]=k[0]/y+c,k[1]=k[1]/x+u;return{data:C,facets:I,channels:AL(this.contourChannels,C)}})}function ont(e,t,n,i){if(typeof(e==null?void 0:e.range)=="function")return e.range(e.floor(n),i);if(typeof e=="function"&&(e=e(t,n,i)),typeof e!="number")return In(e);const r=Bs(...pI(n,i,e),e);for(;r[r.length-1]>=i;)r.pop();for(;r[1]<n;)r.shift();return r}function ant(){return new J5(...X5("value",...arguments))}function lnt(e){return[Sn(e,t=>Sn(t,hC)),Ue(e,t=>Ue(t,hC))]}function hC(e){return isFinite(e)?e:NaN}function cnt(e,t){return rb(Ix,e,t)}function unt(e,t={}){return rb(fl,e,t)}function fnt(e,t={}){return rb(Ax,e,t)}function rb(e,t,n={}){const{x:i,y:r,maxRadius:s}=n,o=e({px:i,py:r,maxRadius:s}),a=[];i!=null&&a.push(jr(t,dC("x",{...o,inset:-6},n))),r!=null&&a.push(Hs(t,dC("y",{...o,inset:-6},n))),i!=null&&a.push(zl(t,gC("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),r!=null&&a.push(zl(t,gC("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return Pi(...a)}function Q5(e,{channels:t,...n},{facet:i,facetAnchor:r,fx:s,fy:o,[e]:a,channels:l,transform:c,initializer:u}){return{...n,facet:i,facetAnchor:r,fx:s,fy:o,[e]:a,channels:{...t,...l},transform:c,initializer:hnt(e,u)}}function hnt(e,t){return t==null?t:function(n,i,{x:r,y:s,px:o,py:a,...l},...c){const{channels:{x:u,y:f,...h}={},...d}=t.call(this,n,i,{...l,x:o,y:a},...c);return{channels:{...h,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...d}}}function dC(e,t,n){const{color:i="currentColor",opacity:r=.2,ruleStroke:s=i,ruleStrokeOpacity:o=r,ruleStrokeWidth:a}=n;return{...Q5(e,t,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function gC(e,t,n){const{color:i="currentColor",textFill:r=i,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...Q5(e,t,dnt(e,n)),fill:r,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function dnt(e,t){return An(t,(n,i,r)=>{var s;return{channels:{text:{value:(s=L_(r,e))==null?void 0:s.value}}}})}const gnt={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},mnt={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},pnt={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},ynt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},_nt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class wnt extends re{constructor(t,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,gnt),this.curve=Gx(o,a),oc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,{curve:f}=this,[h,d]=cr(this,r),g=l?y=>l[y]:Bn(h),m=c?y=>c[y]:Bn(d),_=this;function p(y){let x=-1;const w=[],v={};for(const O in i)v[O]=[];const b=[],E=[],C=[],I=[];function S(O,A){O=y[O],A=y[A],w.push(++x),b[x]=g(O),C[x]=m(O),E[x]=g(A),I[x]=m(A);for(const P in i)v[P].push(i[P][A])}const{halfedges:R,hull:M,triangles:k}=Js.from(y,g,m);for(let O=0;O<R.length;++O){const A=R[O];A>O&&S(k[O],k[A])}for(let O=0;O<M.length;++O)S(M[O],M[(O+1)%M.length]);Ds(this).selectAll().data(w).enter().append("path").call(le,_).attr("d",O=>{const A=Or(),P=f(A);return P.lineStart(),P.point(b[O],C[O]),P.point(E[O],I[O]),P.lineEnd(),A}).call(Ne,_,v).call($f,_,v,s)}return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Qr(t,x=>u[x]).values()).enter().append("g").each(p):y=>y.datum(t).each(p)).node()}}class sb extends re{constructor(t,n={},i,r=({z:s})=>s){const{x:s,y:o}=n;super(t,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:r(n),optional:!0}},n,i)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[f,h]=cr(this,r),d=l?p=>l[p]:Bn(f),g=c?p=>c[p]:Bn(h),m=this;function _(p){const y=Js.from(p,d,g);Ds(this).append("path").datum(p[0]).call(le,m).attr("d",m._render(y,r)).call(Ne,m,i)}return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(u?p=>p.selectAll().data(Qr(t,y=>u[y]).values()).enter().append("g").each(_):p=>p.datum(t).each(_)).node()}}class xnt extends sb{constructor(t,n={}){super(t,n,mnt),this.fill="none"}_render(t){return t.render()}}class bnt extends sb{constructor(t,n={}){super(t,n,pnt,eo)}_render(t){return t.renderHull()}}class vnt extends re{constructor(t,n={}){const{x:i,y:r,z:s}=n;super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,ynt)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[f,h]=cr(this,r),d=l?p=>l[p]:Bn(f),g=c?p=>c[p]:Bn(h),m=this;function _(p){const y=Js.from(p,d,g),x=tk(y,r);Ds(this).selectAll().data(p).enter().append("path").call(le,m).attr("d",(w,v)=>x.renderCell(v)).call(Ne,m,i)}return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(u?p=>p.selectAll().data(Qr(t,y=>u[y]).values()).enter().append("g").each(_):p=>p.datum(t).each(_)).node()}}class Ent extends sb{constructor(t,n){super(t,n,_nt),this.fill="none"}_render(t,n){return tk(t,n).render()}}function tk(e,t){const{width:n,height:i,marginTop:r,marginRight:s,marginBottom:o,marginLeft:a}=t;return e.voronoi([a,r,n-s,i-o])}function Wf(e,t,{x:n,y:i,...r}={}){return[n,i]=Di(n,i),new e(t,{...r,x:n,y:i})}function Tnt(e,t){return Wf(wnt,e,t)}function Cnt(e,t){return Wf(xnt,e,t)}function Snt(e,t){return Wf(bnt,e,t)}function Mnt(e,t){return Wf(vnt,e,t)}function Rnt(e,t){return Wf(Ent,e,t)}const Int={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class ek extends re{constructor(t,{x:n,y:i,z:r,weight:s,fill:o,stroke:a,...l}={}){const c=mC(o)&&(o="currentColor",!0),u=mC(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:eo({z:r,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},Ont({...l,fill:o,stroke:a},c,u),Int),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=r}filter(t){return t}render(t,n,i,r,s){const{contours:o}=i,a=Qs();return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{}).call(l=>l.selectAll().data(t).enter().append("path").call(le,this).call(Ne,this,i).attr("d",c=>a(o[c]))).node()}}function Ant(e,{x:t,y:n,...i}={}){return[t,n]=Di(t,n),new ek(e,{...i,x:t,y:n})}const Lnt=new Set(["x","y","z","weight"]);function Ont(e,t,n){let{bandwidth:r,thresholds:s}=e;return r=r===void 0?20:+r,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?Tn(s):+s,An(e,function(o,a,l,c,u,f){var k;const h=l.weight?Tn(l.weight.value):null,d=(k=l.z)==null?void 0:k.value,{z:g}=this,[m,_]=cr(this,u),{width:p,height:y}=u,{x,y:w}=n0(l,c,f),v=Object.fromEntries(Object.entries(l).filter(([O])=>!Lnt.has(O)).map(([O,A])=>[O,{...A,value:[]}])),b=t&&[],E=n&&[],C=kX().x(x?O=>x[O]:m).y(w?O=>w[O]:_).weight(h?O=>h[O]:1).size([p,y]).bandwidth(r),I=[];for(const O of a){const A=[];I.push(A);for(const P of d?xx(O,d,g):[O]){const N=C.contours(P);A.push([P,N])}}let S=s;if(!(S instanceof Nl)){let O=0;for(const A of I)for(const[,P]of A){const N=P.max;N>O&&(O=N)}S=Float64Array.from({length:s-1},(A,P)=>O*100*(P+1)/s)}const R=[],M=[];for(const O of I){const A=[];R.push(A);for(const[P,N]of O)for(const G of S){A.push(M.length),M.push(N(G/100)),b&&b.push(G),E&&E.push(G);for(const j in v)v[j].value.push(l[j].value[P[0]])}}return b&&b.push(0),E&&E.push(0),{data:o,facets:R,channels:{...v,...b&&{fill:{value:b,scale:"color"}},...E&&{stroke:{value:E,scale:"color"}},contours:{value:M}}}})}function mC(e){return/^density$/i.test(e)}const knt={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class nk extends re{constructor(t,n={}){const[i,r]=Te(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:i,scale:"r",filter:Gr,optional:!0}},Kx(n),knt),this.r=r}render(t,n,i,r,s){const{geometry:o,r:a}=i,l=Qs(s.projection??Pnt(n)),{r:c}=this;return Hm(c)?t=[]:c!==void 0&&l.pointRadius(c),Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(le,this).attr("d",a?f=>l.pointRadius(a[f])(o[f]):f=>l(o[f])).call(Ne,this,i)}).node()}}function Pnt({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),lg({point(n,i){this.stream.point(e(n),t(i))}})}function ob(e,{geometry:t=wt,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new nk(e,{geometry:t,...n})}function Fnt({strokeWidth:e=1.5,...t}={}){return ob({type:"Sphere"},{strokeWidth:e,...t})}function Nnt({strokeOpacity:e=.1,...t}={}){return ob(RH(),{strokeOpacity:e,...t})}const cu=.5,uu=0;function Dnt(e={fill:"count"},{binWidth:t,...n}={}){const{z:i}=n;return t=t===void 0?20:Ft(t),e=hx(e,n),Ps(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!Ps(e,"r")&&(n.r=t/2),An(n,(r,s,o,a,l,c)=>{let{x:u,y:f,z:h,fill:d,stroke:g,symbol:m}=o;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=n0(o,a,c)),h=h?h.value:Ot(r,i),d=d==null?void 0:d.value,g=g==null?void 0:g.value,m=m==null?void 0:m.value;const _=mx(e,{z:h,fill:d,stroke:g,symbol:m}),p=h&&[],y=d&&[],x=g&&[],w=m&&[],v=[],b=[],E=[];let C=-1;for(const M of e)M.initialize(r);for(const M of s){const k=[];for(const O of e)O.scope("facet",M);for(const[O,A]of ul(M,_))for(const P of $nt(A,u,f,t)){k.push(++C),b.push(P.x),E.push(P.y),h&&p.push(_===h?O:h[P[0]]),d&&y.push(_===d?O:d[P[0]]),g&&x.push(_===g?O:g[P[0]]),m&&w.push(_===m?O:m[P[0]]);for(const N of e)N.reduce(P)}v.push(k)}const I=o.x.scale,S=o.y.scale,R={x:{value:b,source:a[I]?{value:se(b,a[I].invert),scale:I}:null},y:{value:E,source:a[S]?{value:se(E,a[S].invert),scale:S}:null},...h&&{z:{value:p}},...d&&{fill:{value:y,scale:"auto"}},...g&&{stroke:{value:x,scale:"auto"}},...m&&{symbol:{value:w,scale:"auto"}},...Object.fromEntries(e.map(({name:M,output:k})=>[M,{scale:"auto",label:k.label,radius:M==="r"?t/2:void 0,value:k.transform()}]))};return{data:r,facets:v,channels:R}})}function $nt(e,t,n,i){const r=i*(1.5/CL),s=new Map;for(const o of e){let a=t[o],l=n[o];if(isNaN(a)||isNaN(l))continue;let c=Math.round(l=(l-uu)/r),u=Math.round(a=(a-cu)/i-(c&1)/2),f=l-c;if(Math.abs(f)*3>1){let g=a-u,m=u+(a<u?-1:1)/2,_=c+(l<c?-1:1),p=a-m,y=l-_;g*g+f*f>p*p+y*y&&(u=m+(c&1?1:-1)/2,c=_)}const h=`${u},${c}`;let d=s.get(h);d===void 0&&(s.set(h,d=[]),d.x=(u+(c&1)/2)*i+cu,d.y=c*r+uu),d.push(o)}return s.values()}const znt={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function Gnt(e){return new ik(e)}class ik extends re{constructor({binWidth:t=20,clip:n=!0,...i}={}){super(lu,void 0,{clip:n,...i},znt),this.binWidth=Ft(t)}render(t,n,i,r,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:f,height:h}=r,d=u-cu,g=f-l-cu,m=a-uu,_=h-c-uu,p=o/2,y=p*SL,x=y/2,w=p*2,v=y*1.5,b=Math.floor(d/w),E=Math.ceil(g/w),C=Math.floor((m+x)/v),I=Math.ceil((_-x)/v)+1,S=`m0,${ps(-y)}l${ps(p)},${ps(x)}v${ps(y)}l${ps(-p)},${ps(x)}`;let R=S;for(let M=C;M<I;++M)for(let k=b;k<E;++k)R+=`M${ps(k*w+(M&1)*p)},${ps(M*v)}${S}`;return Ht("svg:g",s).datum(0).call(he,this,r,s).call(ie,this,{},He+cu,He+uu).call(M=>M.append("path").call(le,this).call(Ne,this,i).attr("d",R)).node()}}function ps(e){return Math.round(e*1e3)/1e3}const Wnt={ariaLabel:"image",fill:null,stroke:null};function Ynt(e){return/^\.*\//.test(e)}function Bnt(e){return/^(blob|data|file|http|https):/i.test(e)}function Unt(e){return typeof e=="string"&&(Ynt(e)||Bnt(e))?[void 0,e]:[e,void 0]}let rk=class extends re{constructor(t,n={}){let{x:i,y:r,r:s,width:o,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:h,imageRendering:d}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[g,m]=Unt(c),[_,p]=Te(s),[y,x]=Te(o,p!==void 0?p*2:void 0),[w,v]=Te(a,p!==void 0?p*2:void 0),[b,E]=Te(l,0);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:_,scale:"r",filter:Gr,optional:!0},width:{value:y,filter:Gr,optional:!0},height:{value:w,filter:Gr,optional:!0},rotate:{value:b,optional:!0},src:{value:g,optional:!0}},Kx(n),Wnt),this.src=m,this.width=x,this.rotate=E,this.height=v,this.r=p,this.preserveAspectRatio=xe(u,"xMidYMid"),this.crossOrigin=en(f),this.frameAnchor=Of(h),this.imageRendering=xe(d,"auto")}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,width:u,height:f,r:h,rotate:d,src:g}=i,{r:m,width:_,height:p,rotate:y}=this,[x,w]=cr(this,r);return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(v=>v.selectAll().data(t).enter().append("image").call(le,this).attr("x",pC(l,u,h,x,_,m)).attr("y",pC(c,f,h,w,p,m)).attr("width",u?b=>u[b]:_!==void 0?_:h?b=>h[b]*2:m*2).attr("height",f?b=>f[b]:p!==void 0?p:h?b=>h[b]*2:m*2).attr("transform",d?b=>`rotate(${d[b]})`:y?`rotate(${y})`:null).attr("transform-origin",d||y?a0`${l?b=>l[b]:x}px ${c?b=>c[b]:w}px`:null).call(mt,"href",g?b=>g[b]:this.src).call(mt,"preserveAspectRatio",this.preserveAspectRatio).call(mt,"crossorigin",this.crossOrigin).call(mt,"image-rendering",this.imageRendering).call(mt,"clip-path",h?b=>`circle(${h[b]}px)`:m!==void 0?`circle(${m}px)`:null).call(Ne,this,i)).node()}};function pC(e,t,n,i,r,s){return t&&e?o=>e[o]-t[o]/2:t?o=>i-t[o]/2:e&&r!==void 0?o=>e[o]-r/2:r!==void 0?i-r/2:n&&e?o=>e[o]-n[o]:n?o=>i-n[o]:e?o=>e[o]-s:i-s}function Vnt(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Di(t,n)),new rk(e,{...i,x:t,y:n})}function Xnt(e,t,n){var i=1e-8,r=t-1,s=n-1,o=0,a,l,c,u,f,h,d,g,m,_,p;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),d=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(d=-d),g=(d*d-3)/6,m=2/(1/(2*t-1)+1/(2*n-1)),_=d*Math.sqrt(g+m)/m-(1/(2*n-1)-1/(2*t-1))*(g+5/6-2/(3*m)),d=t/(t+n*Math.exp(2*_))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,_=u+f,e<u/_?d=Math.pow(t*_*e,1/t):d=1-Math.pow(n*_*(1-e),1/n)),p=-dl(t)-dl(n)+dl(t+n);o<10;o++){if(d===0||d===1)return d;if(h=Hnt(d,t,n)-e,u=Math.exp(r*Math.log(d)+s*Math.log(1-d)+p),f=h/u,d-=u=f/(1-.5*Math.min(1,f*(r/d-s/(1-d)))),d<=0&&(d=.5*(d+u)),d>=1&&(d=.5*(d+u+1)),Math.abs(u)<i*d&&o>0)break}return d}function Hnt(e,t,n){var i=e===0||e===1?0:Math.exp(dl(t+n)-dl(t)-dl(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?i*yC(e,t,n)/t:1-i*yC(1-e,n,t)/n}function yC(e,t,n){var i=1e-30,r=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,h,d;for(Math.abs(c)<i&&(c=i),c=1/c,d=c;r<=100&&(u=2*r,f=r*(n-r)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<i&&(c=i),l=1+f/l,Math.abs(l)<i&&(l=i),c=1/c,d*=c*l,f=-(t+r)*(s+r)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<i&&(c=i),l=1+f/l,Math.abs(l)<i&&(l=i),c=1/c,h=c*l,d*=h,!(Math.abs(h-1)<3e-7));r++);return d}function dl(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],i=1.000000000190015,r,s,o;for(o=(s=r=e)+5.5,o-=(r+.5)*Math.log(o);t<6;t++)i+=n[t]/++s;return Math.log(2.506628274631*i/r)-o}function jnt(e,t){var n=Xnt(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const Znt={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class sk extends re{constructor(t,n={}){const{x:i,y:r,z:s,ci:o=.95,precision:a=4}=n;if(super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:eo(n),optional:!0}},n,Znt),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,i,r,s){const{x:o,y:a,z:l}=i,{ci:c}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(u=>u.selectAll().data(l?xx(t,l,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(le,this).call(Sg,this,{...i,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,o,a)).call(c&&!Dl(this.fill)?h=>h.select(qnt).attr("stroke","none").call(le,this).call(Sg,this,{...i,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,o,a)):()=>{}))).node()}}function qnt(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(ea.svg,"path"),this)}class Knt extends sk{constructor(t,n){super(t,n)}_renderBand(t,n,i){const{ci:r,precision:s}=this,[o,a]=Ye(t,u=>i[u]),l=Pg(t,i,n),c=ok(t,i,n,(1-r)/2,l);return Uw().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(ei(o,a-s/2,s).concat(a))}_renderLine(t,n,i){const[r,s]=Ye(t,a=>i[a]),o=Pg(t,i,n);return`M${o(r)},${r}L${o(s)},${s}`}}class Jnt extends sk{constructor(t,n){super(t,n)}_renderBand(t,n,i){const{ci:r,precision:s}=this,[o,a]=Ye(t,u=>n[u]),l=Pg(t,n,i),c=ok(t,n,i,(1-r)/2,l);return Uw().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(ei(o,a-s/2,s).concat(a))}_renderLine(t,n,i){const[r,s]=Ye(t,a=>n[a]),o=Pg(t,n,i);return`M${r},${o(r)}L${s},${o(s)}`}}function Qnt(e,{y:t=Ln,x:n=wt,stroke:i,fill:r=ve(i)?"currentColor":i,...s}={}){return new Knt(e,Yx({...s,x:n,y:t,fill:r,stroke:i}))}function tit(e,{x:t=Ln,y:n=wt,stroke:i,fill:r=ve(i)?"currentColor":i,...s}={}){return new Jnt(e,Wx({...s,x:t,y:n,fill:r,stroke:i}))}function Pg(e,t,n){let i=0,r=0,s=0,o=0;for(const u of e){const f=t[u],h=n[u];i+=f,r+=h,s+=f*h,o+=f*f}const a=e.length,l=(a*s-i*r)/(a*o-i*i),c=(r-l*i)/a;return u=>l*u+c}function ok(e,t,n,i,r){const s=ir(e,u=>t[u])/e.length;let o=0,a=0;for(const u of e)o+=(t[u]-s)**2,a+=(n[u]-r(t[u]))**2;const l=Math.sqrt(a/(e.length-2)),c=jnt(i,e.length-2);return(u,f)=>{const h=r(u),d=l*Math.sqrt(1/e.length+(u-s)**2/o);return h+f*c*d}}function Y_({path:e=wt,delimiter:t,frameAnchor:n,treeLayout:i=hg,treeSort:r,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=ab(o),r=lk(r),a!=null&&(a=U_(a)),n===void 0&&(n=o.frameAnchor);const c=ck(t),u=pk(l,U_),[f,h]=$n(),[d,g]=$n();return{x:f,y:d,frameAnchor:n,...lr(l,(m,_)=>{const p=c(Ot(m,e)),y=h([]),x=g([]);let w=-1;const v=[],b=[],E=XA().path(I=>p[I]),C=i();C.nodeSize&&C.nodeSize([1,1]),C.separation&&s!==void 0&&C.separation(s??Jw);for(const I of u)I[Fg]=I[gk]([]);for(const I of _){const S=[],R=E(I.filter(M=>p[M]!=null)).each(M=>M.data=m[M.data]);r!=null&&R.sort(r),C(R);for(const M of R.descendants())if(!(a!=null&&!a(M))){S.push(++w),v[w]=M.data,o.position(M,w,y,x);for(const k of u)k[Fg][w]=k[mk](M)}b.push(S)}return{data:v,facets:b}}),...Object.fromEntries(u)}}function ak({path:e=wt,delimiter:t,curve:n="bump-x",stroke:i="#555",strokeWidth:r=1.5,strokeOpacity:s=.5,treeLayout:o=hg,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...f}={}){c=ab(c),a=lk(a),u!=null&&(u=wC(u)),f={curve:n,stroke:i,strokeWidth:r,strokeOpacity:s,...f};const h=ck(t),d=pk(f,wC),[g,m]=$n(),[_,p]=$n(),[y,x]=$n(),[w,v]=$n();return{x1:g,x2:_,y1:y,y2:w,...lr(f,(b,E)=>{const C=h(Ot(b,e)),I=m([]),S=p([]),R=x([]),M=v([]);let k=-1;const O=[],A=[],P=XA().path(G=>C[G]),N=o();N.nodeSize&&N.nodeSize([1,1]),N.separation&&l!==void 0&&N.separation(l??Jw);for(const G of d)G[Fg]=G[gk]([]);for(const G of E){const j=[],U=P(G.filter(Z=>C[Z]!=null)).each(Z=>Z.data=b[Z.data]);a!=null&&U.sort(a),N(U);for(const{source:Z,target:z}of U.links())if(!(u!=null&&!u(z,Z))){j.push(++k),O[k]=z.data,c.position(Z,k,I,R),c.position(z,k,S,M);for(const Q of d)Q[Fg][k]=Q[mk](z,Z)}A.push(j)}return{data:O,facets:A}}),...Object.fromEntries(d)}}function ab(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return eit;case"right":return nit}throw new Error(`invalid tree anchor: ${e}`)}const eit={frameAnchor:"left",dx:6,position({x:e,y:t},n,i,r){i[n]=t,r[n]=-e}},nit={frameAnchor:"right",dx:-6,position({x:e,y:t},n,i,r){i[n]=-t,r[n]=-e}};function lk(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?_C(U_(e)):_C(iit(e))}function _C(e){return(t,n)=>li(e(t),e(n))}function iit(e){return t=>{var n;return(n=t.data)==null?void 0:n[e]}}function ck(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(i=>rit(i,t))}const B_=92,uk=47;function rit(e,t){if(t===B_)throw new Error("delimiter cannot be backslash");let n=!1;for(let i=0,r=e.length;i<r;++i){switch(e.charCodeAt(i)){case B_:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,i-1)+e.slice(i),--i,--r):e=e.slice(0,i)+"/"+e.slice(i+1);break;case uk:n?(e=e.slice(0,i)+"\\\\"+e.slice(i),i+=2,r+=2):(e=e.slice(0,i)+"\\"+e.slice(i),++i,++r);break}n=!1}return e}function sit(e){let t=!1;for(let n=0,i=e.length;n<i;++n){switch(e.charCodeAt(n)){case B_:if(!t){t=!0;continue}case uk:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--i);break}t=!1}return e}function fk(e){return ci(e)&&typeof e.node=="function"}function oit(e){return ci(e)&&typeof e.link=="function"}function U_(e){if(fk(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return X_;case"node:path":return V_;case"node:internal":return hk;case"node:external":return dk;case"node:depth":return H_;case"node:height":return j_}throw new Error(`invalid node value: ${e}`)}}function wC(e){if(fk(e))return e.node;if(oit(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return Wh(X_);case"parent:path":return Wh(V_);case"parent:depth":return Wh(H_);case"parent:height":return Wh(j_);case"node:name":return X_;case"node:path":return V_;case"node:internal":return hk;case"node:external":return dk;case"node:depth":return H_;case"node:height":return j_}throw new Error(`invalid link value: ${e}`)}}function V_(e){return e.id}function X_(e){return ait(e.id)}function H_(e){return e.depth}function j_(e){return e.height}function hk(e){return!!e.children}function dk(e){return!e.children}function Wh(e){return(t,n)=>n==null?void 0:e(n)}function ait(e){let t=e.length;for(;--t>0&&!lit(e,t););return sit(e.slice(t+1))}function lit(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}const gk=2,mk=3,Fg=4;function pk(e,t){const n=[];for(const i in e){const r=e[i],s=t(r);s!==void 0&&n.push([i,...$n(r),s])}return n}function yk(e,{fill:t,stroke:n,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:h=u,dot:d=ve(f)&&ve(h),text:g="node:name",textStroke:m="white",title:_="node:path",dx:p,dy:y,textAnchor:x,treeLayout:w=hg,textLayout:v=w===hg||w===BA?"mirrored":"normal",tip:b,...E}={}){if(p===void 0&&(p=ab(E.treeAnchor).dx),x!==void 0)throw new Error("textAnchor is not a configurable tree option");v=Un(v,"textLayout",["mirrored","normal"]);function C(I){return zl(e,Y_({treeLayout:w,text:g,fill:t===void 0?"currentColor":t,stroke:m,dx:p,dy:y,title:_,...I,...E}))}return Pi(M5(e,ak({treeLayout:w,markerStart:f,markerEnd:h,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...E})),d?rs(e,Y_({treeLayout:w,fill:t===void 0?"node:internal":t,title:_,tip:b,...E})):null,g!=null?v==="mirrored"?[C({textAnchor:"start",treeFilter:"node:external"}),C({textAnchor:"end",treeFilter:"node:internal",dx:-p})]:C():null)}function cit(e,t){return yk(e,{...t,treeLayout:BA})}function uit({geometry:e=wt,...t}={}){return An({...t,x:null,y:null},(n,i,r,s,o,{projection:a})=>{const l=Ot(n,e),c=l.length,u=new Float64Array(c),f=new Float64Array(c),h=Qs(a);for(let d=0;d<c;++d)[u[d],f[d]]=h.centroid(l[d]);return{data:n,facets:i,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function fit({geometry:e=wt,...t}={}){let n;return{...t,x:{transform:i=>Float64Array.from(n=Ot(Ot(i,e),pH),([r])=>r)},y:{transform:()=>Float64Array.from(n,([,i])=>i)}}}function hit(e,t,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>=0?(s=o,r=o-1):i=o+1}return s}function dit(e,t,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>0?(s=o,r=o-1):i=o+1}return s}function git(e,t,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<0?(s=o,i=o+1):r=o-1}return s}function mit(e,t,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<=0?(s=o,i=o+1):r=o-1}return s}function pit(e,t,n,i,r){for(;i<=r;){var s=i+r>>>1,o=e[s],a=n!==void 0?n(o,t):o-t;if(a===0)return s;a<=0?i=s+1:r=s-1}return-1}function Pc(e,t,n,i,r,s){return typeof n=="function"?s(e,t,n,i===void 0?0:i|0,r===void 0?e.length-1:r|0):s(e,t,void 0,n===void 0?0:n|0,i===void 0?e.length-1:i|0)}var yit={ge:function(e,t,n,i,r){return Pc(e,t,n,i,r,hit)},gt:function(e,t,n,i,r){return Pc(e,t,n,i,r,dit)},lt:function(e,t,n,i,r){return Pc(e,t,n,i,r,git)},le:function(e,t,n,i,r){return Pc(e,t,n,i,r,mit)},eq:function(e,t,n,i,r){return Pc(e,t,n,i,r,pit)}},Ng=yit,Ja=0,_o=1,td=2,_it=xit;function lb(e,t,n,i,r){this.mid=e,this.left=t,this.right=n,this.leftPoints=i,this.rightPoints=r,this.count=(t?t.count:0)+(n?n.count:0)+i.length}var Yf=lb.prototype;function Up(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function _k(e,t){var n=Bl(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function xC(e,t){var n=e.intervals([]);n.push(t),_k(e,n)}function bC(e,t){var n=e.intervals([]),i=n.indexOf(t);return i<0?Ja:(n.splice(i,1),_k(e,n),_o)}Yf.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};Yf.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?xC(this,e):this.left.insert(e):this.left=Bl([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?xC(this,e):this.right.insert(e):this.right=Bl([e]);else{var n=Ng.ge(this.leftPoints,e,cb),i=Ng.ge(this.rightPoints,e,ub);this.leftPoints.splice(n,0,e),this.rightPoints.splice(i,0,e)}};Yf.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return Ja;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return bC(this,e);var i=this.left.remove(e);return i===td?(this.left=null,this.count-=1,_o):(i===_o&&(this.count-=1),i)}else if(e[0]>this.mid){if(!this.right)return Ja;var r=this.left?this.left.count:0;if(4*r>3*(t-1))return bC(this,e);var i=this.right.remove(e);return i===td?(this.right=null,this.count-=1,_o):(i===_o&&(this.count-=1),i)}else{if(this.count===1)return this.leftPoints[0]===e?td:Ja;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,i=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=i}Up(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?Up(this,this.left):Up(this,this.right);return _o}for(var a=Ng.ge(this.leftPoints,e,cb);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var i=Ng.ge(this.rightPoints,e,ub);i<this.rightPoints.length&&this.rightPoints[i][1]===e[1];++i)if(this.rightPoints[i]===e)return this.rightPoints.splice(i,1),_o}return Ja}};function wk(e,t,n){for(var i=0;i<e.length&&e[i][0]<=t;++i){var r=n(e[i]);if(r)return r}}function xk(e,t,n){for(var i=e.length-1;i>=0&&e[i][1]>=t;--i){var r=n(e[i]);if(r)return r}}function bk(e,t){for(var n=0;n<e.length;++n){var i=t(e[n]);if(i)return i}}Yf.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return wk(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return xk(this.rightPoints,e,t)}else return bk(this.leftPoints,t)};Yf.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var i=this.left.queryInterval(e,t,n);if(i)return i}if(t>this.mid&&this.right){var i=this.right.queryInterval(e,t,n);if(i)return i}return t<this.mid?wk(this.leftPoints,t,n):e>this.mid?xk(this.rightPoints,e,n):bk(this.leftPoints,n)};function wit(e,t){return e-t}function cb(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function ub(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function Bl(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(wit);for(var i=t[t.length>>1],r=[],s=[],o=[],n=0;n<e.length;++n){var a=e[n];a[1]<i?r.push(a):i<a[0]?s.push(a):o.push(a)}var l=o,c=o.slice();return l.sort(cb),c.sort(ub),new lb(i,Bl(r),Bl(s),l,c)}function Z_(e){this.root=e}var fc=Z_.prototype;fc.insert=function(e){this.root?this.root.insert(e):this.root=new lb(e[0],null,null,[e],[e])};fc.remove=function(e){if(this.root){var t=this.root.remove(e);return t===td&&(this.root=null),t!==Ja}return!1};fc.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};fc.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(fc,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(fc,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function xit(e){return!e||e.length===0?new Z_(null):new Z_(Bl(e))}const bit=r7(_it),vit=({marginLeft:e})=>[1,e],Eit=({width:e,marginRight:t})=>[-1,e-t],Tit=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],Cit=({marginTop:e})=>[1,e],Sit=({height:e,marginBottom:t})=>[-1,e-t],Mit=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function vk(e){return typeof e=="string"?{anchor:e}:e}function Rit(e={},t={}){arguments.length===1&&([e,t]=Ek(e));let{anchor:n="left",padding:i=1,r=t.r}=vk(e);switch(`${n}`.toLowerCase()){case"left":n=vit;break;case"right":n=Eit;break;case"middle":n=Tit;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return Tk("x","y",n,Ft(i),r,t)}function Iit(e={},t={}){arguments.length===1&&([e,t]=Ek(e));let{anchor:n="bottom",padding:i=1,r=t.r}=vk(e);switch(`${n}`.toLowerCase()){case"top":n=Cit;break;case"bottom":n=Sit;break;case"middle":n=Mit;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return Tk("y","x",n,Ft(i),r,t)}function Ek(e){const{anchor:t,padding:n,...i}=e,{r}=i;return[{anchor:t,padding:n,r},i]}function Tk(e,t,n,i,r,s){if(r!=null&&typeof r!="number"){let{channels:o,sort:a,reverse:l}=s;o=ix(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:r,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return An(s,function(o,a,l,c,u,f){let{[t]:h,r:d}=l;if(!l[t])throw new Error(`missing channel: ${t}`);({[t]:h}=n0(l,c,f));const g=d?void 0:r!==void 0?Ft(r):this.r!==void 0?this.r:3;d&&(d=Ot(d.value,c[d.scale]||wt,Float64Array));let[m,_]=n(u);const p=m?Lit:Ait,y=new Float64Array(h.length),x=d?w=>d[w]:()=>g;for(let w of a){const v=bit();w=w.filter(d?E=>vg(h[E])&&Gr(d[E]):E=>vg(h[E]));const b=new Float64Array(2*w.length+2);for(const E of w){const C=x(E),I=m?C+i:0,S=h[E]-C,R=h[E]+C;let M=2;v.queryInterval(S-i,R+i,([,,O])=>{const A=y[O]-I,P=h[E]-h[O],N=i+(d?d[E]+d[O]:2*g),G=Math.sqrt(N*N-P*P);b[M++]=A-G,b[M++]=A+G});let k=b.slice(0,M);m&&(k=k.filter(O=>O>=0));t:for(const O of k.sort(p)){for(let A=0;A<M;A+=2)if(b[A]+1e-6<O&&O<b[A+1]-1e-6)continue t;y[E]=O+I;break}v.insert([S,R,E])}}m||(m=1);for(const w of a)for(const v of w)y[v]=y[v]*m+_;return{data:o,facets:a,channels:{[e]:{value:y,source:null},[t]:{value:h,source:l[t]},...d&&{r:{value:d,source:l.r}}}}})}function Ait(e,t){return Math.abs(e)-Math.abs(t)}function Lit(e,t){return e-t}function Oit(e,t){return arguments.length===1&&({basis:e,...t}=e),tb(fb(e),t)}function kit(e,t){return arguments.length===1&&({basis:e,...t}=e),eb(fb(e),t)}function fb(e){if(e===void 0)return vC;if(typeof e=="function")return _0(ex(e));if(/^p\d{2}$/i.test(e))return hc(Qw(e));switch(`${e}`.toLowerCase()){case"deviation":return Nit;case"first":return vC;case"last":return Fit;case"max":return Dit;case"mean":return $it;case"median":return zit;case"min":return Git;case"sum":return Wit;case"extent":return Pit}throw new Error(`invalid basis: ${e}`)}function _0(e){return{mapIndex(t,n,i){const r=+e(t,n);for(const s of t)i[s]=n[s]===null?NaN:n[s]/r}}}function hc(e){return _0((t,n)=>e(t,i=>n[i]))}const Pit={mapIndex(e,t,n){const[i,r]=Ye(e,o=>t[o]),s=r-i;for(const o of e)n[o]=t[o]===null?NaN:(t[o]-i)/s}},vC=_0((e,t)=>{for(let n=0;n<e.length;++n){const i=t[e[n]];if(gn(i))return i}}),Fit=_0((e,t)=>{for(let n=e.length-1;n>=0;--n){const i=t[e[n]];if(gn(i))return i}}),Nit={mapIndex(e,t,n){const i=Tm(e,s=>t[s]),r=hf(e,s=>t[s]);for(const s of e)n[s]=t[s]===null?NaN:r?(t[s]-i)/r:0}},Dit=hc(Ue),$it=hc(Tm),zit=hc(Lu),Git=hc(Sn),Wit=hc(ir);function Yit(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return Ck(t);case"last":return Sk(t)}if(typeof e=="function")return js(null,e,t);let n,i;for(n in e){if(i!==void 0)throw new Error("ambiguous selector; multiple inputs");i=Bit(e[n])}if(i===void 0)throw new Error(`invalid selector: ${e}`);return js(n,i,t)}function Bit(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return hb;case"max":return db}throw new Error(`unknown selector: ${e}`)}function Ck(e){return js(null,jit,e)}function Sk(e){return js(null,Zit,e)}function Uit(e){return js("x",hb,e)}function Vit(e){return js("y",hb,e)}function Xit(e){return js("x",db,e)}function Hit(e){return js("y",db,e)}function*jit(e){yield e[0]}function*Zit(e){yield e[e.length-1]}function*hb(e,t){yield kY(e,n=>t[n])}function*db(e,t){yield ww(e,n=>t[n])}function js(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const i=eo(n);return lr(n,(r,s)=>{const o=Ot(r,i),a=Ot(r,e),l=[];for(const c of s){const u=[];for(const f of o?Qr(c,h=>o[h]).values():[c])for(const h of t(f,a))u.push(h);l.push(u)}return{data:r,facets:l}})}const Vp=Object.freeze(Object.defineProperty({__proto__:null,Area:h0,Arrow:R5,BarX:A5,BarY:L5,Cell:d0,Contour:J5,Density:ek,Dot:g0,Frame:c5,Geo:nk,Hexgrid:ik,Image:rk,Line:m0,Link:S5,Mark:re,Raster:V5,Rect:p0,RuleX:bO,RuleY:vO,Text:l0,TickX:D5,TickY:$5,Tip:u5,Vector:c0,area:set,areaX:Xu,areaY:ua,arrow:het,auto:Tet,autoSpec:O5,axisFx:VO,axisFy:UO,axisX:Px,axisY:kx,barX:Fo,barY:No,bin:Eo,binX:Rs,binY:Is,bollinger:qo,bollingerX:Bet,bollingerY:Uet,boxX:Xet,boxY:Het,cell:Ka,cellX:get,cellY:met,centroid:uit,circle:wet,cluster:cit,column:$n,contour:ant,crosshair:cnt,crosshairX:unt,crosshairY:fnt,delaunayLink:Tnt,delaunayMesh:Cnt,density:Ant,dodgeX:Rit,dodgeY:Iit,dot:rs,dotX:yet,dotY:_et,filter:AK,formatIsoDate:PL,formatMonth:qK,formatWeekday:KK,frame:Dx,geo:ob,geoCentroid:fit,graticule:Nnt,gridFx:KO,gridFy:ZO,gridX:qO,gridY:jO,group:fx,groupX:Yu,groupY:Bu,groupZ:ux,hexagon:xet,hexbin:Dnt,hexgrid:Gnt,hull:Snt,identity:wt,image:Vnt,indexOf:Ln,initializer:An,interpolateNearest:q5,interpolateNone:W_,interpolatorBarycentric:Z5,interpolatorRandomWalk:K5,legend:JQ,line:Jx,lineX:Hu,lineY:Yl,linearRegressionX:Qnt,linearRegressionY:tit,link:M5,map:Zr,mapX:tb,mapY:eb,marks:Pi,normalize:fb,normalizeX:Oit,normalizeY:kit,plot:f5,pointer:Ix,pointerX:fl,pointerY:Ax,raster:Zet,rect:Qx,rectX:Og,rectY:kg,reverse:LK,ruleX:jr,ruleY:Hs,scale:eQ,select:Yit,selectFirst:Ck,selectLast:Sk,selectMaxX:Xit,selectMaxY:Hit,selectMinX:Uit,selectMinY:Vit,shuffle:OK,sort:ML,sphere:Fnt,spike:zQ,stackX:x5,stackX1:Btt,stackX2:Utt,stackY:b5,stackY1:Vtt,stackY2:Xtt,text:zl,textX:SO,textY:MO,tickX:z5,tickY:G5,tip:$x,transform:lr,tree:yk,treeLink:ak,treeNode:Y_,valueof:Ot,vector:DO,vectorX:$O,vectorY:zO,voronoi:Mnt,voronoiMesh:Rnt,window:y0,windowX:Oet,windowY:z_},Symbol.toStringTag,{value:"Module"}));class qit{constructor(){this.documentElement=new Xp(this,"html")}createElementNS(t,n){return new Xp(this,n)}createElement(t){return new Xp(this,t)}createTextNode(t){return new Kit(this,t)}querySelector(){return null}querySelectorAll(){return[]}}const $g=class $g{setProperty(){}removeProperty(){}};gt($g,"empty",new $g);let q_=$g,Xp=class{constructor(t,n){this.ownerDocument=t,this.tagName=n,this.attributes={},this.children=[],this.parentNode=null}setAttribute(t,n){this.attributes[t]=String(n)}setAttributeNS(t,n,i){this.setAttribute(n,i)}getAttribute(t){return this.attributes[t]}getAttributeNS(t){return this.getAttribute(t)}hasAttribute(t){return t in this.attributes}hasAttributeNS(t){return this.hasAttribute(t)}removeAttribute(t){delete this.attributes[t]}removeAttributeNS(t,n){this.removeAttribute(n)}addEventListener(){}removeEventListener(){}dispatchEvent(){}append(...t){for(const n of t)this.appendChild(n!=null&&n.ownerDocument?n:this.ownerDocument.createTextNode(n))}appendChild(t){return this.children.push(t),t.parentNode=this,t}insertBefore(t,n){if(n==null)this.children.push(t);else{const i=this.children.indexOf(n);if(i<0)throw new Error("insertBefore reference node not found");this.children.splice(i,0,t)}return t.parentNode=this,t}querySelector(){return null}querySelectorAll(){return[]}set textContent(t){this.children=[this.ownerDocument.createTextNode(t)]}set style(t){this.attributes.style=t}get style(){return q_.empty}toHyperScript(){return Rr(this.tagName,this.attributes,this.children.map(t=>t.toHyperScript()))}};class Kit{constructor(t,n){this.ownerDocument=t,this.nodeValue=String(n)}toHyperScript(){return this.nodeValue}}function Mk(e){if(e.nodeType===3)return e.nodeValue;const t={};for(const i of e.getAttributeNames())t[i]=e.getAttribute(i);const n=[];for(let i=e.firstChild;i;i=i.nextSibling)n.push(Mk(i));return Rr(e.tagName,t,n)}const Jit={props:{options:Object,mark:Object,defer:Boolean,method:{type:String,default:"plot"},onRender:Function},render(){const{method:e}=this,t={...e==="plot"&&{marks:this.mark==null?[]:[this.mark],width:688},...this.options,className:"plot"};if(this.defer){const i=a=>{s();const l=()=>{r(a);const u=Vp[e](t);a.append(u),this.onRender(u)},c=a.getBoundingClientRect();c.bottom>0&&c.top<window.innerHeight?l():(this._observer=new IntersectionObserver(([u])=>{u.isIntersecting&&l()},{rootMargin:"100px"}),this._observer.observe(a),typeof requestIdleCallback=="function"&&(this._idling=requestIdleCallback(l)))},r=a=>{for(;a.lastChild;)a.lastChild.remove();s()},s=()=>{this._observer!==void 0&&(this._observer.disconnect(),this._observer=void 0),this._idling!==void 0&&(cancelIdleCallback(this._idling),this._idling=void 0)},{height:o=400}=this.options;return Mr(Rr("span",e==="plot"?[Rr("div",{style:{maxWidth:"100%",width:"688px",aspectRatio:`688 / ${o}`}})]:[]),[[{mounted:i,updated:i,unmounted:r}]])}if(typeof document<"u"){const i=Vp[e](t),r=s=>{for(;s.lastChild;)s.lastChild.remove();s.append(i),this.onRender(i)};return Mr(Rr("span",[Mk(i)]),[[{mounted:r,updated:r}]])}const n=Vp[e]({...t,document:new qit});return this.onRender(n),Rr("span",[n.toHyperScript()])}},Qit={components:{PlotFigure:Jit},props:{activityFiles:Array},data(){return{x:e=>e.totalDistance,y:e=>e.altitude,hovered:new Py}},watch:{activityFile:{handler(){}}},computed:{options:function(){var s;let e=[],t=0,n=0,i=0;(s=this.activityFiles)==null||s.forEach(o=>{o.records.length>0&&(o.records.map(a=>{a.totalDistance=t+a.distance,a.altitude>n&&(n=a.altitude),a.altitude<i&&(i=a.altitude)}),t=o.records[o.records.length-1].totalDistance,e=e.concat(o.records))});const r=(e.length<50?50:e.length)/50;return{x:{grid:!0,label:"Distance (km)",transform:o=>o/1e3},y:{grid:!0,label:"Altitude (m)",nice:!0,domain:[i,n]},color:{type:"diverging",scheme:"RdYlGn",reverse:!0,pivot:0,symmetric:!0},marks:[ua(e,z_(r,{x:this.x,y:this.y,z:null,fill:"#2A303F",curve:"basis"})),Yl(e,z_(r,{x:this.x,y:this.y,z:null,stroke:"grade",curve:"basis",strokeWidth:4,strokeOpacity:.5})),jr(e,fl({x:this.x,py:this.y,stroke:"#f15a22"})),rs(e,fl({x:this.x,y:this.y,r:10,stroke:"#f15a22"})),$x(e,fl({x:this.x,y:this.y,fill:"#2A303F",fontSize:16,fontWeight:"bolder",channels:{grade:{label:"Grade",value:"grade"},altitude:{label:"Altitude",value:"altitude"},speed:{label:"Speed",value:"speed"}},format:{y:!1,x:!1}}))]}}},methods:{getOptions(){},plotRendered(e){e.addEventListener("input",()=>{this.$emit("input",e.value)})}},updated(){},mounted(){}};function trt(e,t,n,i,r,s){const o=eP("PlotFigure");return Ut(),m1(o,{options:s.options,defer:"",onRender:s.plotRendered},null,8,["options","onRender"])}const ert=xm(Qit,[["render",trt]]);class nrt{constructor(){gt(this,"sport",null);gt(this,"subSport",null);gt(this,"totalMovingTime",null);gt(this,"totalElapsedTime",null);gt(this,"totalTimerTime",null);gt(this,"totalDistance",null);gt(this,"totalAscent",null);gt(this,"totalDescent",null);gt(this,"totalCycles",null);gt(this,"totalCalories",null);gt(this,"avgSpeed",null);gt(this,"maxSpeed",null);gt(this,"avgHeartRate",null);gt(this,"maxHeartRate",null);gt(this,"avgCadence",null);gt(this,"maxCadence",null);gt(this,"avgPower",null);gt(this,"maxPower",null);gt(this,"avgTemperature",null);gt(this,"maxTemperature",null);gt(this,"avgAltitude",null);gt(this,"maxAltitude",null)}}function go(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(n+=r,t++)}return t==0?null:n/t}function mo(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(r>t&&(t=r),n++)}return n==0?null:t}function xr(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(t+=r,n++)}return n==0?null:t}const irt={props:{activityFiles:Array,timezoneOffsetHours:Number,isWebAssemblySupported:Boolean},computed:{summary(){const e=new nrt;for(let t=0;t<this.activityFiles.length;t++)for(let n=0;n<this.activityFiles[t].sessions.length;n++){const i=this.activityFiles[t].sessions[n];e.sport=i.sport,e.subSport=i.subSport,e.totalMovingTime=xr(e.totalMovingTime,i.totalMovingTime),e.totalElapsedTime=xr(e.totalElapsedTime,i.totalElapsedTime),e.totalTimerTime=xr(e.totalTimerTime,i.totalTimerTime),e.totalDistance=xr(e.totalDistance,i.totalDistance),e.totalAscent=xr(e.totalAscent,i.totalAscent),e.totalDescent=xr(e.totalDescent,i.totalDescent),e.totalCycles=xr(e.totalCycles,i.totalCycles),e.totalCalories=xr(e.totalCalories,i.totalCalories),e.avgSpeed=go(e.avgSpeed,i.avgSpeed),e.maxSpeed=mo(e.maxSpeed,i.maxSpeed),e.avgHeartRate=go(e.avgHeartRate,i.avgHeartRate),e.maxHeartRate=mo(e.maxHeartRate,i.maxHeartRate),e.avgCadence=go(e.avgCadence,i.avgCadence),e.maxCadence=mo(e.maxCadence,i.maxCadence),e.avgPower=go(e.avgPower,i.avgPower),e.maxPower=mo(e.maxPower,i.maxPower),e.avgTemperature=go(e.avgTemperature,i.avgTemperature),e.maxTemperature=mo(e.maxTemperature,i.maxTemperature),e.avgAltitude=go(e.avgAltitude,i.avgAltitude),e.maxAltitude=mo(e.maxAltitude,i.maxAltitude)}return e}},methods:{toTimezoneDateString:oI,GMTString:YW,secondsToDHMS:BW,avg:go,max:mo,sum:xr}};const rrt={style:{"text-align":"center"}},srt=["disabled"],ort={key:0,class:"time-created"},art={key:1,class:"manufacturer"},lrt={class:"analysis"},crt={class:"summary"},urt={key:0,class:"section-title"},frt={class:"summary-grid"},hrt={key:0,class:"summary-item"},drt=X("div",{class:"summary-title"},"Sport",-1),grt={class:"summary-value"},mrt={key:1,class:"summary-item"},prt=X("div",{class:"summary-title"},"Sub Sport",-1),yrt={class:"summary-value"},_rt={class:"summary-grid"},wrt={key:0,class:"summary-item"},xrt=X("div",{class:"summary-title"},"Total Moving Time",-1),brt={class:"summary-value"},vrt=X("i",{class:"fa-solid fa-hourglass-half"},null,-1),Ert={key:1,class:"summary-item"},Trt=X("div",{class:"summary-title"},"Total Elapsed Time",-1),Crt={class:"summary-value"},Srt=X("i",{class:"fa-solid fa-hourglass-end"},null,-1),Mrt={class:"summary-grid"},Rrt={key:0,class:"summary-item"},Irt=X("div",{class:"summary-title"},"Total Distance",-1),Art={class:"summary-value"},Lrt=X("i",{class:"fa-solid fa-road"},null,-1),Ort={key:1,class:"summary-item"},krt=X("div",{class:"summary-title"},"Total Calories",-1),Prt={class:"summary-value"},Frt=X("i",{class:"fa-solid fa-droplet"},null,-1),Nrt={class:"summary-grid"},Drt={key:0,class:"summary-item"},$rt=X("div",{class:"summary-title"},"Avg Speed",-1),zrt={class:"summary-value"},Grt=X("i",{class:"fa-solid fa-gauge"},null,-1),Wrt={key:1,class:"summary-item"},Yrt=X("div",{class:"summary-title"},"Max Speed",-1),Brt={class:"summary-value"},Urt=X("i",{class:"fa-solid fa-gauge-high"},null,-1),Vrt={class:"summary-grid"},Xrt={key:0,class:"summary-item"},Hrt=X("div",{class:"summary-title"},"Avg Heart Rate",-1),jrt={class:"summary-value"},Zrt=X("i",{class:"fa-solid fa-heart-pulse"},null,-1),qrt={key:1,class:"summary-item"},Krt=X("div",{class:"summary-title"},"Max Heart Rate",-1),Jrt={class:"summary-value"},Qrt=X("i",{class:"fa-solid fa-heart-pulse"},null,-1),tst={class:"summary-grid"},est={key:0,class:"summary-item"},nst=X("div",{class:"summary-title"},"Avg Cadence",-1),ist={class:"summary-value"},rst=X("i",{class:"fa-solid fa-rotate"},null,-1),sst={key:1,class:"summary-item"},ost=X("div",{class:"summary-title"},"Max Cadence",-1),ast={class:"summary-value"},lst=X("i",{class:"fa-solid fa-rotate"},null,-1),cst={class:"summary-grid"},ust={key:0,class:"summary-item"},fst=X("div",{class:"summary-title"},"Avg Power",-1),hst={class:"summary-value"},dst=X("i",{class:"fa-solid fa-bolt-lightning"},null,-1),gst={key:1,class:"summary-item"},mst=X("div",{class:"summary-title"},"Max Power",-1),pst={class:"summary-value"},yst=X("i",{class:"fa-solid fa-bolt-lightning"},null,-1),_st={class:"summary-grid"},wst={key:0,class:"summary-item"},xst=X("div",{class:"summary-title"},"Avg Temperature",-1),bst={class:"summary-value"},vst=X("i",{class:"fa-solid fa-temperature-low"},null,-1),Est={key:1,class:"summary-item"},Tst=X("div",{class:"summary-title"},"Max Temperature",-1),Cst={class:"summary-value"},Sst=X("i",{class:"fa-solid fa-temperature-high"},null,-1),Mst={class:"summary-grid"},Rst={key:0,class:"summary-item"},Ist=X("div",{class:"summary-title"},"Total Ascent",-1),Ast={class:"summary-value"},Lst=X("i",{class:"fa-solid fa-arrow-trend-up"},null,-1),Ost={key:1,class:"summary-item"},kst=X("div",{class:"summary-title"},"Total Descent",-1),Pst={class:"summary-value"},Fst=X("i",{class:"fa-solid fa-arrow-trend-down"},null,-1),Nst={class:"summary-grid"},Dst={key:0,class:"summary-item"},$st=X("div",{class:"summary-title"},"Avg Altitude",-1),zst={class:"summary-value"},Gst=X("i",{class:"fa-solid fa-mountain"},null,-1),Wst={key:1,class:"summary-item"},Yst=X("div",{class:"summary-title"},"Max Altitude",-1),Bst={class:"summary-value"},Ust=X("i",{class:"fa-solid fa-mountain"},null,-1);function Vst(e,t,n,i,r,s){var o,a,l,c,u,f,h;return Ut(),Jt(Jn,null,[X("div",rrt,[X("input",{class:"input",type:"file",id:"fileInput",accept:".fit",multiple:"",disabled:!n.isWebAssemblySupported},null,8,srt)]),n.activityFiles&&n.activityFiles.length!=0?(Ut(),Jt("div",ort," Created on: "+Nt(s.toTimezoneDateString((a=(o=n.activityFiles[0])==null?void 0:o.fileId)==null?void 0:a.timeCreated,n.timezoneOffsetHours))+" "+Nt(s.GMTString(n.timezoneOffsetHours)),1)):de("",!0),n.activityFiles&&n.activityFiles.length!=0?(Ut(),Jt("div",art," Device: "+Nt((c=(l=n.activityFiles[0])==null?void 0:l.fileId)==null?void 0:c.manufacturer)+" ("+Nt((f=(u=n.activityFiles[0])==null?void 0:u.fileId)==null?void 0:f.product)+") ",1)):de("",!0),X("div",lrt,[X("div",crt,[((h=n.activityFiles)==null?void 0:h.length)!=0?(Ut(),Jt("h4",urt,"Summary")):de("",!0),X("div",null,[X("div",frt,[s.summary.sport?(Ut(),Jt("div",hrt,[drt,X("div",grt,Nt(s.summary.sport),1)])):de("",!0),s.summary.subSport?(Ut(),Jt("div",mrt,[prt,X("div",yrt,Nt(s.summary.subSport),1)])):de("",!0)]),X("div",_rt,[s.summary.totalMovingTime?(Ut(),Jt("div",wrt,[xrt,X("div",brt,[vrt,Ae(" "+Nt(s.secondsToDHMS(s.summary.totalMovingTime)),1)])])):de("",!0),s.summary.totalElapsedTime?(Ut(),Jt("div",Ert,[Trt,X("div",Crt,[Srt,Ae(" "+Nt(s.secondsToDHMS(s.summary.totalElapsedTime)),1)])])):de("",!0)]),X("div",Mrt,[s.summary.totalDistance?(Ut(),Jt("div",Rrt,[Irt,X("div",Art,[Lrt,Ae(" "+Nt((s.summary.totalDistance/1e3).toFixed(2))+" km ",1)])])):de("",!0),s.summary.totalCalories?(Ut(),Jt("div",Ort,[krt,X("div",Prt,[Frt,Ae(" "+Nt(s.summary.totalCalories.toLocaleString())+" Cal ",1)])])):de("",!0)]),X("div",Nrt,[s.summary.avgSpeed?(Ut(),Jt("div",Drt,[$rt,X("div",zrt,[Grt,Ae(" "+Nt((s.summary.avgSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):de("",!0),s.summary.maxSpeed?(Ut(),Jt("div",Wrt,[Yrt,X("div",Brt,[Urt,Ae(" "+Nt((s.summary.maxSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):de("",!0)]),X("div",Vrt,[s.summary.avgHeartRate?(Ut(),Jt("div",Xrt,[Hrt,X("div",jrt,[Zrt,Ae(" "+Nt(Math.round(s.summary.avgHeartRate))+" bpm ",1)])])):de("",!0),s.summary.maxHeartRate?(Ut(),Jt("div",qrt,[Krt,X("div",Jrt,[Qrt,Ae(" "+Nt(s.summary.maxHeartRate)+" bpm ",1)])])):de("",!0)]),X("div",tst,[s.summary.avgCadence?(Ut(),Jt("div",est,[nst,X("div",ist,[rst,Ae(" "+Nt(Math.round(s.summary.avgCadence))+" rpm ",1)])])):de("",!0),s.summary.maxCadence?(Ut(),Jt("div",sst,[ost,X("div",ast,[lst,Ae(" "+Nt(s.summary.maxCadence)+" rpm ",1)])])):de("",!0)]),X("div",cst,[s.summary.avgPower?(Ut(),Jt("div",ust,[fst,X("div",hst,[dst,Ae(" "+Nt(Math.round(s.summary.avgPower)),1)])])):de("",!0),s.summary.maxPower?(Ut(),Jt("div",gst,[mst,X("div",pst,[yst,Ae(" "+Nt(s.summary.maxPower),1)])])):de("",!0)]),X("div",_st,[s.summary.avgTemperature?(Ut(),Jt("div",wst,[xst,X("div",bst,[vst,Ae(" "+Nt(Math.round(s.summary.avgTemperature))+" °C ",1)])])):de("",!0),s.summary.maxTemperature?(Ut(),Jt("div",Est,[Tst,X("div",Cst,[Sst,Ae(" "+Nt(s.summary.maxTemperature)+" °C ",1)])])):de("",!0)]),X("div",Mst,[s.summary.totalAscent?(Ut(),Jt("div",Rst,[Ist,X("div",Ast,[Lst,Ae(" "+Nt(s.summary.totalAscent)+" m ",1)])])):de("",!0),s.summary.totalDescent?(Ut(),Jt("div",Ost,[kst,X("div",Pst,[Fst,Ae(" "+Nt(s.summary.totalDescent)+" m ",1)])])):de("",!0)]),X("div",Nst,[s.summary.avgAltitude?(Ut(),Jt("div",Dst,[$st,X("div",zst,[Gst,Ae(" "+Nt(s.summary.avgAltitude.toFixed(2))+" m ",1)])])):de("",!0),s.summary.maxAltitude?(Ut(),Jt("div",Wst,[Yst,X("div",Bst,[Ust,Ae(" "+Nt(s.summary.maxAltitude.toFixed(2))+" m ",1)])])):de("",!0)])])])])],64)}const Xst=xm(irt,[["render",Vst]]),Hst={props:{size:{default:"70px"},color:{default:"#41b883"}},computed:{diamondStyle(){let e=parseInt(this.size);return{width:e/4+"px",height:e/4+"px","--bg-color":this.color}},styles(){let e=parseInt(this.size);return{width:this.size,height:e/4+"px"}}}};const jst={class:"spinner-container"};function Zst(e,t,n,i,r,s){return Ut(),Jt("div",jst,[X("span",{style:Ke(s.styles),class:"spinner spinner--rotate-diamond"},[X("div",{style:Ke(s.diamondStyle),class:"diamond"},null,4),X("div",{style:Ke(s.diamondStyle),class:"diamond"},null,4),X("div",{style:Ke(s.diamondStyle),class:"diamond"},null,4)],4)])}const qst=xm(Hst,[["render",Zst],["__scopeId","data-v-ad6abded"]]);class Hp{constructor(t,n){gt(this,"X",0);gt(this,"Y",0);this.X=t,this.Y=n}}class Kst{constructor(){gt(this,"a",0);gt(this,"b",0)}train(t){let n=0,i=0,r=0,s=0;t.forEach(a=>{n+=a.X,i+=a.Y,r+=a.X*a.Y,s+=a.X*a.X});const o=t.length;this.b=(o*r-n*i)/(o*s-n*n),this.a=(i-this.b*n)/o}predictY(t){return this.a+t*this.b}}const Jst={class:"container"},Qst=X("div",{class:"header"},[X("h2",{class:"title"},"Open Activity")],-1),tot={class:"graph"},eot={class:"map"},Rk=new Worker(new URL("/openactivity/assets/fitsvc-decode-ee5433a7.js",self.location),{type:"module"}),Ik=qr(new Array),Gi=qr(new Array),not=qr(0),Ak=qr(new Array),Dg=qr(!1),Lk=qr(0);qc(Gi,async e=>{var n,i;const t=new Array;for(let r=0;r<e.length;r++){if(!((n=e[r].activity)!=null&&n.timestamp)||!((i=e[r].activity)!=null&&i.localDateTime))return;const s=new Date(e[r].activity.localDateTime),o=new Date(e[r].activity.timestamp),a=s.getTime()-o.getTime(),l=Math.floor(a/1e3/3600);t.push(l)}Ak.value=t,console.log("timezone offsets:",t)});class iot{constructor(t){gt(this,"feature");gt(this,"activityFile");gt(this,"err");const n=t;this.feature=n==null?void 0:n.feature,this.activityFile=new Bz(n==null?void 0:n.activityFile),this.err=n==null?void 0:n.err}}Rk.onmessage=e=>{const t=e.data;if(t.err!=""){console.error(`decode return with err: ${t.err}`),alert(`decode return with err: ${t.err}`),Dg.value=!1;return}const n=new Array;for(let a=0;a<t.decodeResults.length;a++)n[a]=new iot(t.decodeResults[a]);const i=new Date().getTime()-Lk.value;console.group("Elapsed"),console.log("Decode took:		",t.took,"ms"),console.log("Interop wasm to js:	",i-t.took,"ms"),console.log("Total elapsed:		",i,"ms"),console.groupEnd();const r=new Array;for(let a=0;a<n.length;a++)r.push(n[a].feature);Ik.value=r;const s=new Array,o=100;for(let a=0;a<n.length;a++)rot(n[a].activityFile,o),s.push(n[a].activityFile);Gi.value=s,Dg.value=!1};function rot(e,t){const n=e.records.length;for(let i=0;i<n;i++){const r=new Array;let s=0,o=i;for(r.push(new Hp(e.records[i].distance,e.records[i].altitude));s<t&&o>0;)s+=e.records[o].distance-e.records[o-1].distance,r.push(new Hp(e.records[o].distance,e.records[o].altitude)),o--;r.length==1&&i-1>0&&r.push(new Hp(e.records[i-1].distance,e.records[i-1].altitude));const a=e.records[i].altitude,l=new Kst;l.train(r);const c=l.predictY(r[r.length-1].X),u=a-c,f=Math.sqrt(Math.pow(s,2)-Math.pow(u,2)),h=u/f*100;e.records[i].grade=h}}const sot=ju({__name:"TheActivity",setup(e){const t=qr(!1);return h1(()=>{var n;if(t.value=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function",t.value==!1){alert("Sorry, it appears that your browser does not support WebAssembly :(");return}(n=document.getElementById("fileInput"))==null||n.addEventListener("change",i=>{var o;const r=i.target;if(!r.files)return;let s=new Array;for(let a=0;a<((o=r.files)==null?void 0:o.length);a++)s.push(new Promise((l,c)=>{const u=r.files[a];if(!u)return;const f=new FileReader;f.onload=h=>{const d=h.target.result;l(new Uint8Array(d))},f.onerror=c,f.readAsArrayBuffer(u)}));Promise.all(s).then(a=>{Lk.value=new Date().getTime(),Dg.value=!0,Rk.postMessage(a)})})}),(n,i)=>(Ut(),Jt("div",Jst,[Le(_1,null,{default:tS(()=>[Mr(Le(qst,null,null,512),[[Co,Dg.value]])]),_:1}),X("div",{class:Bg([Gi.value.length>0?"navigator-left":"navigator-center","navigator"])},[Qst,Le(Xst,{activityFiles:Gi.value,timezoneOffsetHours:not.value,isWebAssemblySupported:t.value},null,8,["activityFiles","timezoneOffsetHours","isWebAssemblySupported"]),Mr(X("div",tot,[Le(ert,{activityFiles:Gi.value},null,8,["activityFiles"])],512),[[Co,Gi.value&&Gi.value.length>0]])],2),Mr(X("div",eot,[Le(aY,{geojsons:Ik.value,"activity-files":Gi.value,timezoneOffsetHoursList:Ak.value},null,8,["geojsons","activity-files","timezoneOffsetHoursList"])],512),[[Co,Gi.value&&Gi.value.length>0]])]))}});const oot=ju({__name:"ActivityView",setup(e){return(t,n)=>(Ut(),Jt("main",null,[Le(sot)]))}}),aot=dN({history:AF("/openactivity/"),routes:[{path:"/",name:"home",component:oot},{path:"/activity",name:"activity",component:()=>_v(()=>import("./ActivityView-4d6f873a.js"),[])},{path:"/elevationgraph",name:"elevationgraph",component:()=>_v(()=>import("./ElevationGraph-68bbe9a4.js"),[])}]}),gb=lF(mN);gb.use(hF());gb.use(aot);gb.mount("#app");export{ert as E,oot as _,Le as a,Jt as c,ju as d,Ut as o};
