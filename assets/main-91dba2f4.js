var sv=Object.defineProperty;var rv=(e,t,n)=>t in e?sv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var gt=(e,t,n)=>(rv(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function xh(e,t){const n=Object.create(null),i=e.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const Vt={},Vs=[],ln=()=>{},ov=()=>!1,av=/^on[^a-z]/,Ol=e=>av.test(e),vh=e=>e.startsWith("onUpdate:"),ee=Object.assign,wh=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},lv=Object.prototype.hasOwnProperty,Rt=(e,t)=>lv.call(e,t),lt=Array.isArray,Ys=e=>Ll(e)==="[object Map]",x_=e=>Ll(e)==="[object Set]",ft=e=>typeof e=="function",re=e=>typeof e=="string",Eh=e=>typeof e=="symbol",Yt=e=>e!==null&&typeof e=="object",v_=e=>Yt(e)&&ft(e.then)&&ft(e.catch),w_=Object.prototype.toString,Ll=e=>w_.call(e),cv=e=>Ll(e).slice(8,-1),E_=e=>Ll(e)==="[object Object]",Ch=e=>re(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ia=xh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fl=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},uv=/-(\w)/g,Sn=Fl(e=>e.replace(uv,(t,n)=>n?n.toUpperCase():"")),hv=/\B([A-Z])/g,pr=Fl(e=>e.replace(hv,"-$1").toLowerCase()),Pl=Fl(e=>e.charAt(0).toUpperCase()+e.slice(1)),Cc=Fl(e=>e?`on${Pl(e)}`:""),ao=(e,t)=>!Object.is(e,t),Tc=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ga=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},fv=e=>{const t=parseFloat(e);return isNaN(t)?e:t},dv=e=>{const t=re(e)?Number(e):NaN;return isNaN(t)?e:t};let ad;const mu=()=>ad||(ad=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ji(e){if(lt(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],s=re(i)?pv(i):ji(i);if(s)for(const r in s)t[r]=s[r]}return t}else{if(re(e))return e;if(Yt(e))return e}}const gv=/;(?![^(]*\))/g,mv=/:([^]+)/,_v=/\/\*[^]*?\*\//g;function pv(e){const t={};return e.replace(_v,"").split(gv).forEach(n=>{if(n){const i=n.split(mv);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Dl(e){let t="";if(re(e))t=e;else if(lt(e))for(let n=0;n<e.length;n++){const i=Dl(e[n]);i&&(t+=i+" ")}else if(Yt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const yv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xv=xh(yv);function C_(e){return!!e||e===""}const Ct=e=>re(e)?e:e==null?"":lt(e)||Yt(e)&&(e.toString===w_||!ft(e.toString))?JSON.stringify(e,T_,2):String(e),T_=(e,t)=>t&&t.__v_isRef?T_(e,t.value):Ys(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,s])=>(n[`${i} =>`]=s,n),{})}:x_(t)?{[`Set(${t.size})`]:[...t.values()]}:Yt(t)&&!lt(t)&&!E_(t)?String(t):t;let tn;class S_{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=tn,!t&&tn&&(this.index=(tn.scopes||(tn.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=tn;try{return tn=this,t()}finally{tn=n}}}on(){tn=this}off(){tn=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function vv(e){return new S_(e)}function wv(e,t=tn){t&&t.active&&t.effects.push(e)}function Ev(){return tn}const Th=e=>{const t=new Set(e);return t.w=0,t.n=0,t},R_=e=>(e.w&Si)>0,I_=e=>(e.n&Si)>0,Cv=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Si},Tv=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const s=t[i];R_(s)&&!I_(s)?s.delete(e):t[n++]=s,s.w&=~Si,s.n&=~Si}t.length=n}},_u=new WeakMap;let Vr=0,Si=1;const pu=30;let nn;const is=Symbol(""),yu=Symbol("");class Sh{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,wv(this,i)}run(){if(!this.active)return this.fn();let t=nn,n=Ci;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=nn,nn=this,Ci=!0,Si=1<<++Vr,Vr<=pu?Cv(this):ld(this),this.fn()}finally{Vr<=pu&&Tv(this),Si=1<<--Vr,nn=this.parent,Ci=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){nn===this?this.deferStop=!0:this.active&&(ld(this),this.onStop&&this.onStop(),this.active=!1)}}function ld(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Ci=!0;const b_=[];function yr(){b_.push(Ci),Ci=!1}function xr(){const e=b_.pop();Ci=e===void 0?!0:e}function Me(e,t,n){if(Ci&&nn){let i=_u.get(e);i||_u.set(e,i=new Map);let s=i.get(n);s||i.set(n,s=Th()),M_(s)}}function M_(e,t){let n=!1;Vr<=pu?I_(e)||(e.n|=Si,n=!R_(e)):n=!e.has(nn),n&&(e.add(nn),nn.deps.push(e))}function Xn(e,t,n,i,s,r){const o=_u.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&lt(e)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":lt(e)?Ch(n)&&a.push(o.get("length")):(a.push(o.get(is)),Ys(e)&&a.push(o.get(yu)));break;case"delete":lt(e)||(a.push(o.get(is)),Ys(e)&&a.push(o.get(yu)));break;case"set":Ys(e)&&a.push(o.get(is));break}if(a.length===1)a[0]&&xu(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);xu(Th(l))}}function xu(e,t){const n=lt(e)?e:[...e];for(const i of n)i.computed&&cd(i);for(const i of n)i.computed||cd(i)}function cd(e,t){(e!==nn||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Sv=xh("__proto__,__v_isRef,__isVue"),A_=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Eh)),Rv=Rh(),Iv=Rh(!1,!0),bv=Rh(!0),ud=Mv();function Mv(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=It(this);for(let r=0,o=this.length;r<o;r++)Me(i,"get",r+"");const s=i[t](...n);return s===-1||s===!1?i[t](...n.map(It)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){yr();const i=It(this)[t].apply(this,n);return xr(),i}}),e}function Av(e){const t=It(this);return Me(t,"has",e),t.hasOwnProperty(e)}function Rh(e=!1,t=!1){return function(i,s,r){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&r===(e?t?Bv:D_:t?P_:F_).get(i))return i;const o=lt(i);if(!e){if(o&&Rt(ud,s))return Reflect.get(ud,s,r);if(s==="hasOwnProperty")return Av}const a=Reflect.get(i,s,r);return(Eh(s)?A_.has(s):Sv(s))||(e||Me(i,"get",s),t)?a:ye(a)?o&&Ch(s)?a:a.value:Yt(a)?e?N_(a):Nl(a):a}}const Ov=O_(),Lv=O_(!0);function O_(e=!1){return function(n,i,s,r){let o=n[i];if(Js(o)&&ye(o)&&!ye(s))return!1;if(!e&&(!za(s)&&!Js(s)&&(o=It(o),s=It(s)),!lt(n)&&ye(o)&&!ye(s)))return o.value=s,!0;const a=lt(n)&&Ch(i)?Number(i)<n.length:Rt(n,i),l=Reflect.set(n,i,s,r);return n===It(r)&&(a?ao(s,o)&&Xn(n,"set",i,s):Xn(n,"add",i,s)),l}}function Fv(e,t){const n=Rt(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Xn(e,"delete",t,void 0),i}function Pv(e,t){const n=Reflect.has(e,t);return(!Eh(t)||!A_.has(t))&&Me(e,"has",t),n}function Dv(e){return Me(e,"iterate",lt(e)?"length":is),Reflect.ownKeys(e)}const L_={get:Rv,set:Ov,deleteProperty:Fv,has:Pv,ownKeys:Dv},kv={get:bv,set(e,t){return!0},deleteProperty(e,t){return!0}},Nv=ee({},L_,{get:Iv,set:Lv}),Ih=e=>e,kl=e=>Reflect.getPrototypeOf(e);function Jo(e,t,n=!1,i=!1){e=e.__v_raw;const s=It(e),r=It(t);n||(t!==r&&Me(s,"get",t),Me(s,"get",r));const{has:o}=kl(s),a=i?Ih:n?Oh:lo;if(o.call(s,t))return a(e.get(t));if(o.call(s,r))return a(e.get(r));e!==s&&e.get(t)}function Qo(e,t=!1){const n=this.__v_raw,i=It(n),s=It(e);return t||(e!==s&&Me(i,"has",e),Me(i,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function ta(e,t=!1){return e=e.__v_raw,!t&&Me(It(e),"iterate",is),Reflect.get(e,"size",e)}function hd(e){e=It(e);const t=It(this);return kl(t).has.call(t,e)||(t.add(e),Xn(t,"add",e,e)),this}function fd(e,t){t=It(t);const n=It(this),{has:i,get:s}=kl(n);let r=i.call(n,e);r||(e=It(e),r=i.call(n,e));const o=s.call(n,e);return n.set(e,t),r?ao(t,o)&&Xn(n,"set",e,t):Xn(n,"add",e,t),this}function dd(e){const t=It(this),{has:n,get:i}=kl(t);let s=n.call(t,e);s||(e=It(e),s=n.call(t,e)),i&&i.call(t,e);const r=t.delete(e);return s&&Xn(t,"delete",e,void 0),r}function gd(){const e=It(this),t=e.size!==0,n=e.clear();return t&&Xn(e,"clear",void 0,void 0),n}function ea(e,t){return function(i,s){const r=this,o=r.__v_raw,a=It(o),l=t?Ih:e?Oh:lo;return!e&&Me(a,"iterate",is),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function na(e,t,n){return function(...i){const s=this.__v_raw,r=It(s),o=Ys(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...i),u=n?Ih:t?Oh:lo;return!t&&Me(r,"iterate",l?yu:is),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function ni(e){return function(...t){return e==="delete"?!1:this}}function Gv(){const e={get(r){return Jo(this,r)},get size(){return ta(this)},has:Qo,add:hd,set:fd,delete:dd,clear:gd,forEach:ea(!1,!1)},t={get(r){return Jo(this,r,!1,!0)},get size(){return ta(this)},has:Qo,add:hd,set:fd,delete:dd,clear:gd,forEach:ea(!1,!0)},n={get(r){return Jo(this,r,!0)},get size(){return ta(this,!0)},has(r){return Qo.call(this,r,!0)},add:ni("add"),set:ni("set"),delete:ni("delete"),clear:ni("clear"),forEach:ea(!0,!1)},i={get(r){return Jo(this,r,!0,!0)},get size(){return ta(this,!0)},has(r){return Qo.call(this,r,!0)},add:ni("add"),set:ni("set"),delete:ni("delete"),clear:ni("clear"),forEach:ea(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=na(r,!1,!1),n[r]=na(r,!0,!1),t[r]=na(r,!1,!0),i[r]=na(r,!0,!0)}),[e,n,t,i]}const[zv,Wv,Uv,$v]=Gv();function bh(e,t){const n=t?e?$v:Uv:e?Wv:zv;return(i,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(Rt(n,s)&&s in i?n:i,s,r)}const Vv={get:bh(!1,!1)},Yv={get:bh(!1,!0)},Hv={get:bh(!0,!1)},F_=new WeakMap,P_=new WeakMap,D_=new WeakMap,Bv=new WeakMap;function Xv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zv(e){return e.__v_skip||!Object.isExtensible(e)?0:Xv(cv(e))}function Nl(e){return Js(e)?e:Mh(e,!1,L_,Vv,F_)}function k_(e){return Mh(e,!1,Nv,Yv,P_)}function N_(e){return Mh(e,!0,kv,Hv,D_)}function Mh(e,t,n,i,s){if(!Yt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const o=Zv(e);if(o===0)return e;const a=new Proxy(e,o===2?i:n);return s.set(e,a),a}function Hs(e){return Js(e)?Hs(e.__v_raw):!!(e&&e.__v_isReactive)}function Js(e){return!!(e&&e.__v_isReadonly)}function za(e){return!!(e&&e.__v_isShallow)}function G_(e){return Hs(e)||Js(e)}function It(e){const t=e&&e.__v_raw;return t?It(t):e}function Ah(e){return Ga(e,"__v_skip",!0),e}const lo=e=>Yt(e)?Nl(e):e,Oh=e=>Yt(e)?N_(e):e;function z_(e){Ci&&nn&&(e=It(e),M_(e.dep||(e.dep=Th())))}function W_(e,t){e=It(e);const n=e.dep;n&&xu(n)}function ye(e){return!!(e&&e.__v_isRef===!0)}function Qn(e){return U_(e,!1)}function jv(e){return U_(e,!0)}function U_(e,t){return ye(e)?e:new Kv(e,t)}class Kv{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:It(t),this._value=n?t:lo(t)}get value(){return z_(this),this._value}set value(t){const n=this.__v_isShallow||za(t)||Js(t);t=n?t:It(t),ao(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:lo(t),W_(this))}}function ss(e){return ye(e)?e.value:e}const qv={get:(e,t,n)=>ss(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const s=e[t];return ye(s)&&!ye(n)?(s.value=n,!0):Reflect.set(e,t,n,i)}};function $_(e){return Hs(e)?e:new Proxy(e,qv)}class Jv{constructor(t,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Sh(t,()=>{this._dirty||(this._dirty=!0,W_(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const t=It(this);return z_(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Qv(e,t,n=!1){let i,s;const r=ft(e);return r?(i=e,s=ln):(i=e.get,s=e.set),new Jv(i,s,r||!s,n)}function Ti(e,t,n,i){let s;try{s=i?e(...i):e()}catch(r){Gl(r,t,n)}return s}function Xe(e,t,n,i){if(ft(e)){const r=Ti(e,t,n,i);return r&&v_(r)&&r.catch(o=>{Gl(o,t,n)}),r}const s=[];for(let r=0;r<e.length;r++)s.push(Xe(e[r],t,n,i));return s}function Gl(e,t,n,i=!0){const s=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,a=n;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){Ti(l,null,10,[e,o,a]);return}}t1(e,n,s,i)}function t1(e,t,n,i=!0){console.error(e)}let co=!1,vu=!1;const _e=[];let yn=0;const Bs=[];let kn=null,Hi=0;const V_=Promise.resolve();let Lh=null;function Y_(e){const t=Lh||V_;return e?t.then(this?e.bind(this):e):t}function e1(e){let t=yn+1,n=_e.length;for(;t<n;){const i=t+n>>>1;uo(_e[i])<e?t=i+1:n=i}return t}function Fh(e){(!_e.length||!_e.includes(e,co&&e.allowRecurse?yn+1:yn))&&(e.id==null?_e.push(e):_e.splice(e1(e.id),0,e),H_())}function H_(){!co&&!vu&&(vu=!0,Lh=V_.then(X_))}function n1(e){const t=_e.indexOf(e);t>yn&&_e.splice(t,1)}function i1(e){lt(e)?Bs.push(...e):(!kn||!kn.includes(e,e.allowRecurse?Hi+1:Hi))&&Bs.push(e),H_()}function md(e,t=co?yn+1:0){for(;t<_e.length;t++){const n=_e[t];n&&n.pre&&(_e.splice(t,1),t--,n())}}function B_(e){if(Bs.length){const t=[...new Set(Bs)];if(Bs.length=0,kn){kn.push(...t);return}for(kn=t,kn.sort((n,i)=>uo(n)-uo(i)),Hi=0;Hi<kn.length;Hi++)kn[Hi]();kn=null,Hi=0}}const uo=e=>e.id==null?1/0:e.id,s1=(e,t)=>{const n=uo(e)-uo(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function X_(e){vu=!1,co=!0,_e.sort(s1);const t=ln;try{for(yn=0;yn<_e.length;yn++){const n=_e[yn];n&&n.active!==!1&&Ti(n,null,14)}}finally{yn=0,_e.length=0,B_(),co=!1,Lh=null,(_e.length||Bs.length)&&X_()}}function r1(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Vt;let s=n;const r=t.startsWith("update:"),o=r&&t.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=i[u]||Vt;f&&(s=n.map(d=>re(d)?d.trim():d)),h&&(s=n.map(fv))}let a,l=i[a=Cc(t)]||i[a=Cc(Sn(t))];!l&&r&&(l=i[a=Cc(pr(t))]),l&&Xe(l,e,6,s);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Xe(c,e,6,s)}}function Z_(e,t,n=!1){const i=t.emitsCache,s=i.get(e);if(s!==void 0)return s;const r=e.emits;let o={},a=!1;if(!ft(e)){const l=c=>{const u=Z_(c,t,!0);u&&(a=!0,ee(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Yt(e)&&i.set(e,null),null):(lt(r)?r.forEach(l=>o[l]=null):ee(o,r),Yt(e)&&i.set(e,o),o)}function zl(e,t){return!e||!Ol(t)?!1:(t=t.slice(2).replace(/Once$/,""),Rt(e,t[0].toLowerCase()+t.slice(1))||Rt(e,pr(t))||Rt(e,t))}let Pe=null,j_=null;function Wa(e){const t=Pe;return Pe=e,j_=e&&e.type.__scopeId||null,t}function K_(e,t=Pe,n){if(!t||e._n)return e;const i=(...s)=>{i._d&&Id(-1);const r=Wa(t);let o;try{o=e(...s)}finally{Wa(r),i._d&&Id(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Sc(e){const{type:t,vnode:n,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:f,setupState:d,ctx:g,inheritAttrs:m}=e;let p,y;const x=Wa(e);try{if(n.shapeFlag&4){const v=s||i;p=pn(u.call(v,v,h,r,d,f,g)),y=l}else{const v=t;p=pn(v.length>1?v(r,{attrs:l,slots:a,emit:c}):v(r,null)),y=t.props?l:o1(l)}}catch(v){eo.length=0,Gl(v,e,1),p=ie(cn)}let E=p;if(y&&m!==!1){const v=Object.keys(y),{shapeFlag:S}=E;v.length&&S&7&&(o&&v.some(vh)&&(y=a1(y,o)),E=Ri(E,y))}return n.dirs&&(E=Ri(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),p=E,Wa(x),p}const o1=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ol(n))&&((t||(t={}))[n]=e[n]);return t},a1=(e,t)=>{const n={};for(const i in e)(!vh(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function l1(e,t,n){const{props:i,children:s,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?_d(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==i[f]&&!zl(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?_d(i,o,c):!0:!!o;return!1}function _d(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==e[r]&&!zl(n,r))return!0}return!1}function c1({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const u1=e=>e.__isSuspense;function h1(e,t){t&&t.pendingBranch?lt(e)?t.effects.push(...e):t.effects.push(e):i1(e)}const ia={};function Qr(e,t,n){return q_(e,t,n)}function q_(e,t,{immediate:n,deep:i,flush:s,onTrack:r,onTrigger:o}=Vt){var a;const l=Ev()===((a=ue)==null?void 0:a.scope)?ue:null;let c,u=!1,h=!1;if(ye(e)?(c=()=>e.value,u=za(e)):Hs(e)?(c=()=>e,i=!0):lt(e)?(h=!0,u=e.some(v=>Hs(v)||za(v)),c=()=>e.map(v=>{if(ye(v))return v.value;if(Hs(v))return Ki(v);if(ft(v))return Ti(v,l,2)})):ft(e)?t?c=()=>Ti(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return f&&f(),Xe(e,l,3,[d])}:c=ln,t&&i){const v=c;c=()=>Ki(v())}let f,d=v=>{f=x.onStop=()=>{Ti(v,l,4)}},g;if(fo)if(d=ln,t?n&&Xe(t,l,3,[c(),h?[]:void 0,d]):c(),s==="sync"){const v=ow();g=v.__watcherHandles||(v.__watcherHandles=[])}else return ln;let m=h?new Array(e.length).fill(ia):ia;const p=()=>{if(x.active)if(t){const v=x.run();(i||u||(h?v.some((S,T)=>ao(S,m[T])):ao(v,m)))&&(f&&f(),Xe(t,l,3,[v,m===ia?void 0:h&&m[0]===ia?[]:m,d]),m=v)}else x.run()};p.allowRecurse=!!t;let y;s==="sync"?y=p:s==="post"?y=()=>Te(p,l&&l.suspense):(p.pre=!0,l&&(p.id=l.uid),y=()=>Fh(p));const x=new Sh(c,y);t?n?p():m=x.run():s==="post"?Te(x.run.bind(x),l&&l.suspense):x.run();const E=()=>{x.stop(),l&&l.scope&&wh(l.scope.effects,x)};return g&&g.push(E),E}function f1(e,t,n){const i=this.proxy,s=re(e)?e.includes(".")?J_(i,e):()=>i[e]:e.bind(i,i);let r;ft(t)?r=t:(r=t.handler,n=t);const o=ue;Qs(this);const a=q_(s,r.bind(i),n);return o?Qs(o):rs(),a}function J_(e,t){const n=t.split(".");return()=>{let i=e;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function Ki(e,t){if(!Yt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ye(e))Ki(e.value,t);else if(lt(e))for(let n=0;n<e.length;n++)Ki(e[n],t);else if(x_(e)||Ys(e))e.forEach(n=>{Ki(n,t)});else if(E_(e))for(const n in e)Ki(e[n],t);return e}function Rc(e,t){const n=Pe;if(n===null)return e;const i=Yl(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,a,l,c=Vt]=t[r];o&&(ft(o)&&(o={mounted:o,updated:o}),o.deep&&Ki(a),s.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Fi(e,t,n,i){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(yr(),Xe(l,n,8,[e.el,a,e,t]),xr())}}function d1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ph(()=>{e.isMounted=!0}),ip(()=>{e.isUnmounting=!0}),e}const Ue=[Function,Array],Q_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ue,onEnter:Ue,onAfterEnter:Ue,onEnterCancelled:Ue,onBeforeLeave:Ue,onLeave:Ue,onAfterLeave:Ue,onLeaveCancelled:Ue,onBeforeAppear:Ue,onAppear:Ue,onAfterAppear:Ue,onAppearCancelled:Ue},g1={name:"BaseTransition",props:Q_,setup(e,{slots:t}){const n=J1(),i=d1();let s;return()=>{const r=t.default&&ep(t.default(),!0);if(!r||!r.length)return;let o=r[0];if(r.length>1){for(const m of r)if(m.type!==cn){o=m;break}}const a=It(e),{mode:l}=a;if(i.isLeaving)return Ic(o);const c=pd(o);if(!c)return Ic(o);const u=wu(c,a,i,n);Eu(c,u);const h=n.subTree,f=h&&pd(h);let d=!1;const{getTransitionKey:g}=c.type;if(g){const m=g();s===void 0?s=m:m!==s&&(s=m,d=!0)}if(f&&f.type!==cn&&(!Bi(c,f)||d)){const m=wu(f,a,i,n);if(Eu(f,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},Ic(o);l==="in-out"&&c.type!==cn&&(m.delayLeave=(p,y,x)=>{const E=tp(i,f);E[String(f.key)]=f,p._leaveCb=()=>{y(),p._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=x})}return o}}},m1=g1;function tp(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function wu(e,t,n,i){const{appear:s,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:m,onAppear:p,onAfterAppear:y,onAppearCancelled:x}=t,E=String(e.key),v=tp(n,e),S=(R,U)=>{R&&Xe(R,i,9,U)},T=(R,U)=>{const A=U[1];S(R,U),lt(R)?R.every(D=>D.length<=1)&&A():R.length<=1&&A()},b={mode:r,persisted:o,beforeEnter(R){let U=a;if(!n.isMounted)if(s)U=m||a;else return;R._leaveCb&&R._leaveCb(!0);const A=v[E];A&&Bi(e,A)&&A.el._leaveCb&&A.el._leaveCb(),S(U,[R])},enter(R){let U=l,A=c,D=u;if(!n.isMounted)if(s)U=p||l,A=y||c,D=x||u;else return;let F=!1;const $=R._enterCb=it=>{F||(F=!0,it?S(D,[R]):S(A,[R]),b.delayedLeave&&b.delayedLeave(),R._enterCb=void 0)};U?T(U,[R,$]):$()},leave(R,U){const A=String(e.key);if(R._enterCb&&R._enterCb(!0),n.isUnmounting)return U();S(h,[R]);let D=!1;const F=R._leaveCb=$=>{D||(D=!0,U(),$?S(g,[R]):S(d,[R]),R._leaveCb=void 0,v[A]===e&&delete v[A])};v[A]=e,f?T(f,[R,F]):F()},clone(R){return wu(R,t,n,i)}};return b}function Ic(e){if(Wl(e))return e=Ri(e),e.children=null,e}function pd(e){return Wl(e)?e.children?e.children[0]:void 0:e}function Eu(e,t){e.shapeFlag&6&&e.component?Eu(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ep(e,t=!1,n){let i=[],s=0;for(let r=0;r<e.length;r++){let o=e[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===Ve?(o.patchFlag&128&&s++,i=i.concat(ep(o.children,t,a))):(t||o.type!==cn)&&i.push(a!=null?Ri(o,{key:a}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function Mo(e,t){return ft(e)?(()=>ee({name:e.name},t,{setup:e}))():e}const ba=e=>!!e.type.__asyncLoader,Wl=e=>e.type.__isKeepAlive;function _1(e,t){np(e,"a",t)}function p1(e,t){np(e,"da",t)}function np(e,t,n=ue){const i=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ul(t,i,n),n){let s=n.parent;for(;s&&s.parent;)Wl(s.parent.vnode)&&y1(i,t,n,s),s=s.parent}}function y1(e,t,n,i){const s=Ul(t,e,i,!0);sp(()=>{wh(i[t],s)},n)}function Ul(e,t,n=ue,i=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;yr(),Qs(n);const a=Xe(t,n,e,o);return rs(),xr(),a});return i?s.unshift(r):s.push(r),r}}const ti=e=>(t,n=ue)=>(!fo||e==="sp")&&Ul(e,(...i)=>t(...i),n),x1=ti("bm"),Ph=ti("m"),v1=ti("bu"),w1=ti("u"),ip=ti("bum"),sp=ti("um"),E1=ti("sp"),C1=ti("rtg"),T1=ti("rtc");function S1(e,t=ue){Ul("ec",e,t)}const rp="components";function vG(e,t){return I1(rp,e,!0,t)||e}const R1=Symbol.for("v-ndc");function I1(e,t,n=!0,i=!1){const s=Pe||ue;if(s){const r=s.type;if(e===rp){const a=iw(r,!1);if(a&&(a===t||a===Sn(t)||a===Pl(Sn(t))))return r}const o=yd(s[e]||r[e],t)||yd(s.appContext[e],t);return!o&&i?r:o}}function yd(e,t){return e&&(e[t]||e[Sn(t)]||e[Pl(Sn(t))])}const Cu=e=>e?pp(e)?Yl(e)||e.proxy:Cu(e.parent):null,to=ee(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Cu(e.parent),$root:e=>Cu(e.root),$emit:e=>e.emit,$options:e=>Dh(e),$forceUpdate:e=>e.f||(e.f=()=>Fh(e.update)),$nextTick:e=>e.n||(e.n=Y_.bind(e.proxy)),$watch:e=>f1.bind(e)}),bc=(e,t)=>e!==Vt&&!e.__isScriptSetup&&Rt(e,t),b1={get({_:e},t){const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(bc(i,t))return o[t]=1,i[t];if(s!==Vt&&Rt(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&Rt(c,t))return o[t]=3,r[t];if(n!==Vt&&Rt(n,t))return o[t]=4,n[t];Tu&&(o[t]=0)}}const u=to[t];let h,f;if(u)return t==="$attrs"&&Me(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==Vt&&Rt(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,Rt(f,t))return f[t]},set({_:e},t,n){const{data:i,setupState:s,ctx:r}=e;return bc(s,t)?(s[t]=n,!0):i!==Vt&&Rt(i,t)?(i[t]=n,!0):Rt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!n[o]||e!==Vt&&Rt(e,o)||bc(t,o)||(a=r[0])&&Rt(a,o)||Rt(i,o)||Rt(to,o)||Rt(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Rt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function xd(e){return lt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Tu=!0;function M1(e){const t=Dh(e),n=e.proxy,i=e.ctx;Tu=!1,t.beforeCreate&&vd(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:g,activated:m,deactivated:p,beforeDestroy:y,beforeUnmount:x,destroyed:E,unmounted:v,render:S,renderTracked:T,renderTriggered:b,errorCaptured:R,serverPrefetch:U,expose:A,inheritAttrs:D,components:F,directives:$,filters:it}=t;if(c&&A1(c,i,null),o)for(const N in o){const j=o[N];ft(j)&&(i[N]=j.bind(n))}if(s){const N=s.call(n,n);Yt(N)&&(e.data=Nl(N))}if(Tu=!0,r)for(const N in r){const j=r[N],rt=ft(j)?j.bind(n,n):ft(j.get)?j.get.bind(n,n):ln,dt=!ft(j)&&ft(j.set)?j.set.bind(n):ln,Mt=sn({get:rt,set:dt});Object.defineProperty(i,N,{enumerable:!0,configurable:!0,get:()=>Mt.value,set:G=>Mt.value=G})}if(a)for(const N in a)op(a[N],i,n,N);if(l){const N=ft(l)?l.call(n):l;Reflect.ownKeys(N).forEach(j=>{Ma(j,N[j])})}u&&vd(u,e,"c");function H(N,j){lt(j)?j.forEach(rt=>N(rt.bind(n))):j&&N(j.bind(n))}if(H(x1,h),H(Ph,f),H(v1,d),H(w1,g),H(_1,m),H(p1,p),H(S1,R),H(T1,T),H(C1,b),H(ip,x),H(sp,v),H(E1,U),lt(A))if(A.length){const N=e.exposed||(e.exposed={});A.forEach(j=>{Object.defineProperty(N,j,{get:()=>n[j],set:rt=>n[j]=rt})})}else e.exposed||(e.exposed={});S&&e.render===ln&&(e.render=S),D!=null&&(e.inheritAttrs=D),F&&(e.components=F),$&&(e.directives=$)}function A1(e,t,n=ln){lt(e)&&(e=Su(e));for(const i in e){const s=e[i];let r;Yt(s)?"default"in s?r=Vn(s.from||i,s.default,!0):r=Vn(s.from||i):r=Vn(s),ye(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function vd(e,t,n){Xe(lt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function op(e,t,n,i){const s=i.includes(".")?J_(n,i):()=>n[i];if(re(e)){const r=t[e];ft(r)&&Qr(s,r)}else if(ft(e))Qr(s,e.bind(n));else if(Yt(e))if(lt(e))e.forEach(r=>op(r,t,n,i));else{const r=ft(e.handler)?e.handler.bind(n):t[e.handler];ft(r)&&Qr(s,r,e)}}function Dh(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!n&&!i?l=t:(l={},s.length&&s.forEach(c=>Ua(l,c,o,!0)),Ua(l,t,o)),Yt(t)&&r.set(t,l),l}function Ua(e,t,n,i=!1){const{mixins:s,extends:r}=t;r&&Ua(e,r,n,!0),s&&s.forEach(o=>Ua(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=O1[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const O1={data:wd,props:Ed,emits:Ed,methods:Yr,computed:Yr,beforeCreate:xe,created:xe,beforeMount:xe,mounted:xe,beforeUpdate:xe,updated:xe,beforeDestroy:xe,beforeUnmount:xe,destroyed:xe,unmounted:xe,activated:xe,deactivated:xe,errorCaptured:xe,serverPrefetch:xe,components:Yr,directives:Yr,watch:F1,provide:wd,inject:L1};function wd(e,t){return t?e?function(){return ee(ft(e)?e.call(this,this):e,ft(t)?t.call(this,this):t)}:t:e}function L1(e,t){return Yr(Su(e),Su(t))}function Su(e){if(lt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function xe(e,t){return e?[...new Set([].concat(e,t))]:t}function Yr(e,t){return e?ee(Object.create(null),e,t):t}function Ed(e,t){return e?lt(e)&&lt(t)?[...new Set([...e,...t])]:ee(Object.create(null),xd(e),xd(t??{})):t}function F1(e,t){if(!e)return t;if(!t)return e;const n=ee(Object.create(null),e);for(const i in t)n[i]=xe(e[i],t[i]);return n}function ap(){return{app:null,config:{isNativeTag:ov,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let P1=0;function D1(e,t){return function(i,s=null){ft(i)||(i=ee({},i)),s!=null&&!Yt(s)&&(s=null);const r=ap(),o=new Set;let a=!1;const l=r.app={_uid:P1++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:aw,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&ft(c.install)?(o.add(c),c.install(l,...u)):ft(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,h){if(!a){const f=ie(i,s);return f.appContext=r,u&&t?t(f,c):e(f,c,h),a=!0,l._container=c,c.__vue_app__=l,Yl(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){$a=l;try{return c()}finally{$a=null}}};return l}}let $a=null;function Ma(e,t){if(ue){let n=ue.provides;const i=ue.parent&&ue.parent.provides;i===n&&(n=ue.provides=Object.create(i)),n[e]=t}}function Vn(e,t,n=!1){const i=ue||Pe;if(i||$a){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:$a._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ft(t)?t.call(i&&i.proxy):t}}function k1(e,t,n,i=!1){const s={},r={};Ga(r,Vl,1),e.propsDefaults=Object.create(null),lp(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=i?s:k_(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function N1(e,t,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,a=It(s),[l]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(zl(e.emitsOptions,f))continue;const d=t[f];if(l)if(Rt(r,f))d!==r[f]&&(r[f]=d,c=!0);else{const g=Sn(f);s[g]=Ru(l,a,g,d,e,!1)}else d!==r[f]&&(r[f]=d,c=!0)}}}else{lp(e,t,s,r)&&(c=!0);let u;for(const h in a)(!t||!Rt(t,h)&&((u=pr(h))===h||!Rt(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Ru(l,a,h,void 0,e,!0)):delete s[h]);if(r!==a)for(const h in r)(!t||!Rt(t,h))&&(delete r[h],c=!0)}c&&Xn(e,"set","$attrs")}function lp(e,t,n,i){const[s,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Ia(l))continue;const c=t[l];let u;s&&Rt(s,u=Sn(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:zl(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=It(n),c=a||Vt;for(let u=0;u<r.length;u++){const h=r[u];n[h]=Ru(s,l,h,c[h],e,!Rt(c,h))}}return o}function Ru(e,t,n,i,s,r){const o=e[n];if(o!=null){const a=Rt(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ft(l)){const{propsDefaults:c}=s;n in c?i=c[n]:(Qs(s),i=c[n]=l.call(null,t),rs())}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===pr(n))&&(i=!0))}return i}function cp(e,t,n=!1){const i=t.propsCache,s=i.get(e);if(s)return s;const r=e.props,o={},a=[];let l=!1;if(!ft(e)){const u=h=>{l=!0;const[f,d]=cp(h,t,!0);ee(o,f),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return Yt(e)&&i.set(e,Vs),Vs;if(lt(r))for(let u=0;u<r.length;u++){const h=Sn(r[u]);Cd(h)&&(o[h]=Vt)}else if(r)for(const u in r){const h=Sn(u);if(Cd(h)){const f=r[u],d=o[h]=lt(f)||ft(f)?{type:f}:ee({},f);if(d){const g=Rd(Boolean,d.type),m=Rd(String,d.type);d[0]=g>-1,d[1]=m<0||g<m,(g>-1||Rt(d,"default"))&&a.push(h)}}}const c=[o,a];return Yt(e)&&i.set(e,c),c}function Cd(e){return e[0]!=="$"}function Td(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Sd(e,t){return Td(e)===Td(t)}function Rd(e,t){return lt(t)?t.findIndex(n=>Sd(n,e)):ft(t)&&Sd(t,e)?0:-1}const up=e=>e[0]==="_"||e==="$stable",kh=e=>lt(e)?e.map(pn):[pn(e)],G1=(e,t,n)=>{if(t._n)return t;const i=K_((...s)=>kh(t(...s)),n);return i._c=!1,i},hp=(e,t,n)=>{const i=e._ctx;for(const s in e){if(up(s))continue;const r=e[s];if(ft(r))t[s]=G1(s,r,i);else if(r!=null){const o=kh(r);t[s]=()=>o}}},fp=(e,t)=>{const n=kh(t);e.slots.default=()=>n},z1=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=It(t),Ga(t,"_",n)):hp(t,e.slots={})}else e.slots={},t&&fp(e,t);Ga(e.slots,Vl,1)},W1=(e,t,n)=>{const{vnode:i,slots:s}=e;let r=!0,o=Vt;if(i.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:(ee(s,t),!n&&a===1&&delete s._):(r=!t.$stable,hp(t,s)),o=t}else t&&(fp(e,t),o={default:1});if(r)for(const a in s)!up(a)&&!(a in o)&&delete s[a]};function Iu(e,t,n,i,s=!1){if(lt(e)){e.forEach((f,d)=>Iu(f,t&&(lt(t)?t[d]:t),n,i,s));return}if(ba(i)&&!s)return;const r=i.shapeFlag&4?Yl(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Vt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(re(c)?(u[c]=null,Rt(h,c)&&(h[c]=null)):ye(c)&&(c.value=null)),ft(l))Ti(l,a,12,[o,u]);else{const f=re(l),d=ye(l);if(f||d){const g=()=>{if(e.f){const m=f?Rt(h,l)?h[l]:u[l]:l.value;s?lt(m)&&wh(m,r):lt(m)?m.includes(r)||m.push(r):f?(u[l]=[r],Rt(h,l)&&(h[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else f?(u[l]=o,Rt(h,l)&&(h[l]=o)):d&&(l.value=o,e.k&&(u[e.k]=o))};o?(g.id=-1,Te(g,n)):g()}}}const Te=h1;function U1(e){return $1(e)}function $1(e,t){const n=mu();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=ln,insertStaticContent:g}=e,m=(_,w,C,M=null,O=null,k=null,K=!1,V=null,Z=!!w.dynamicChildren)=>{if(_===w)return;_&&!Bi(_,w)&&(M=P(_),G(_,O,k,!0),_=null),w.patchFlag===-2&&(Z=!1,w.dynamicChildren=null);const{type:W,ref:tt,shapeFlag:J}=w;switch(W){case $l:p(_,w,C,M);break;case cn:y(_,w,C,M);break;case Mc:_==null&&x(w,C,M,K);break;case Ve:F(_,w,C,M,O,k,K,V,Z);break;default:J&1?S(_,w,C,M,O,k,K,V,Z):J&6?$(_,w,C,M,O,k,K,V,Z):(J&64||J&128)&&W.process(_,w,C,M,O,k,K,V,Z,I)}tt!=null&&O&&Iu(tt,_&&_.ref,k,w||_,!w)},p=(_,w,C,M)=>{if(_==null)i(w.el=a(w.children),C,M);else{const O=w.el=_.el;w.children!==_.children&&c(O,w.children)}},y=(_,w,C,M)=>{_==null?i(w.el=l(w.children||""),C,M):w.el=_.el},x=(_,w,C,M)=>{[_.el,_.anchor]=g(_.children,w,C,M,_.el,_.anchor)},E=({el:_,anchor:w},C,M)=>{let O;for(;_&&_!==w;)O=f(_),i(_,C,M),_=O;i(w,C,M)},v=({el:_,anchor:w})=>{let C;for(;_&&_!==w;)C=f(_),s(_),_=C;s(w)},S=(_,w,C,M,O,k,K,V,Z)=>{K=K||w.type==="svg",_==null?T(w,C,M,O,k,K,V,Z):U(_,w,O,k,K,V,Z)},T=(_,w,C,M,O,k,K,V)=>{let Z,W;const{type:tt,props:J,shapeFlag:et,transition:nt,dirs:ut}=_;if(Z=_.el=o(_.type,k,J&&J.is,J),et&8?u(Z,_.children):et&16&&R(_.children,Z,null,M,O,k&&tt!=="foreignObject",K,V),ut&&Fi(_,null,M,"created"),b(Z,_,_.scopeId,K,M),J){for(const pt in J)pt!=="value"&&!Ia(pt)&&r(Z,pt,null,J[pt],k,_.children,M,O,Gt);"value"in J&&r(Z,"value",null,J.value),(W=J.onVnodeBeforeMount)&&_n(W,M,_)}ut&&Fi(_,null,M,"beforeMount");const Et=(!O||O&&!O.pendingBranch)&&nt&&!nt.persisted;Et&&nt.beforeEnter(Z),i(Z,w,C),((W=J&&J.onVnodeMounted)||Et||ut)&&Te(()=>{W&&_n(W,M,_),Et&&nt.enter(Z),ut&&Fi(_,null,M,"mounted")},O)},b=(_,w,C,M,O)=>{if(C&&d(_,C),M)for(let k=0;k<M.length;k++)d(_,M[k]);if(O){let k=O.subTree;if(w===k){const K=O.vnode;b(_,K,K.scopeId,K.slotScopeIds,O.parent)}}},R=(_,w,C,M,O,k,K,V,Z=0)=>{for(let W=Z;W<_.length;W++){const tt=_[W]=V?di(_[W]):pn(_[W]);m(null,tt,w,C,M,O,k,K,V)}},U=(_,w,C,M,O,k,K)=>{const V=w.el=_.el;let{patchFlag:Z,dynamicChildren:W,dirs:tt}=w;Z|=_.patchFlag&16;const J=_.props||Vt,et=w.props||Vt;let nt;C&&Pi(C,!1),(nt=et.onVnodeBeforeUpdate)&&_n(nt,C,w,_),tt&&Fi(w,_,C,"beforeUpdate"),C&&Pi(C,!0);const ut=O&&w.type!=="foreignObject";if(W?A(_.dynamicChildren,W,V,C,M,ut,k):K||j(_,w,V,null,C,M,ut,k,!1),Z>0){if(Z&16)D(V,w,J,et,C,M,O);else if(Z&2&&J.class!==et.class&&r(V,"class",null,et.class,O),Z&4&&r(V,"style",J.style,et.style,O),Z&8){const Et=w.dynamicProps;for(let pt=0;pt<Et.length;pt++){const zt=Et[pt],fe=J[zt],Xt=et[zt];(Xt!==fe||zt==="value")&&r(V,zt,fe,Xt,O,_.children,C,M,Gt)}}Z&1&&_.children!==w.children&&u(V,w.children)}else!K&&W==null&&D(V,w,J,et,C,M,O);((nt=et.onVnodeUpdated)||tt)&&Te(()=>{nt&&_n(nt,C,w,_),tt&&Fi(w,_,C,"updated")},M)},A=(_,w,C,M,O,k,K)=>{for(let V=0;V<w.length;V++){const Z=_[V],W=w[V],tt=Z.el&&(Z.type===Ve||!Bi(Z,W)||Z.shapeFlag&70)?h(Z.el):C;m(Z,W,tt,null,M,O,k,K,!0)}},D=(_,w,C,M,O,k,K)=>{if(C!==M){if(C!==Vt)for(const V in C)!Ia(V)&&!(V in M)&&r(_,V,C[V],null,K,w.children,O,k,Gt);for(const V in M){if(Ia(V))continue;const Z=M[V],W=C[V];Z!==W&&V!=="value"&&r(_,V,W,Z,K,w.children,O,k,Gt)}"value"in M&&r(_,"value",C.value,M.value)}},F=(_,w,C,M,O,k,K,V,Z)=>{const W=w.el=_?_.el:a(""),tt=w.anchor=_?_.anchor:a("");let{patchFlag:J,dynamicChildren:et,slotScopeIds:nt}=w;nt&&(V=V?V.concat(nt):nt),_==null?(i(W,C,M),i(tt,C,M),R(w.children,C,tt,O,k,K,V,Z)):J>0&&J&64&&et&&_.dynamicChildren?(A(_.dynamicChildren,et,C,O,k,K,V),(w.key!=null||O&&w===O.subTree)&&dp(_,w,!0)):j(_,w,C,tt,O,k,K,V,Z)},$=(_,w,C,M,O,k,K,V,Z)=>{w.slotScopeIds=V,_==null?w.shapeFlag&512?O.ctx.activate(w,C,M,K,Z):it(w,C,M,O,k,K,Z):X(_,w,Z)},it=(_,w,C,M,O,k,K)=>{const V=_.component=q1(_,M,O);if(Wl(_)&&(V.ctx.renderer=I),Q1(V),V.asyncDep){if(O&&O.registerDep(V,H),!_.el){const Z=V.subTree=ie(cn);y(null,Z,w,C)}return}H(V,_,w,C,O,k,K)},X=(_,w,C)=>{const M=w.component=_.component;if(l1(_,w,C))if(M.asyncDep&&!M.asyncResolved){N(M,w,C);return}else M.next=w,n1(M.update),M.update();else w.el=_.el,M.vnode=w},H=(_,w,C,M,O,k,K)=>{const V=()=>{if(_.isMounted){let{next:tt,bu:J,u:et,parent:nt,vnode:ut}=_,Et=tt,pt;Pi(_,!1),tt?(tt.el=ut.el,N(_,tt,K)):tt=ut,J&&Tc(J),(pt=tt.props&&tt.props.onVnodeBeforeUpdate)&&_n(pt,nt,tt,ut),Pi(_,!0);const zt=Sc(_),fe=_.subTree;_.subTree=zt,m(fe,zt,h(fe.el),P(fe),_,O,k),tt.el=zt.el,Et===null&&c1(_,zt.el),et&&Te(et,O),(pt=tt.props&&tt.props.onVnodeUpdated)&&Te(()=>_n(pt,nt,tt,ut),O)}else{let tt;const{el:J,props:et}=w,{bm:nt,m:ut,parent:Et}=_,pt=ba(w);if(Pi(_,!1),nt&&Tc(nt),!pt&&(tt=et&&et.onVnodeBeforeMount)&&_n(tt,Et,w),Pi(_,!0),J&&Q){const zt=()=>{_.subTree=Sc(_),Q(J,_.subTree,_,O,null)};pt?w.type.__asyncLoader().then(()=>!_.isUnmounted&&zt()):zt()}else{const zt=_.subTree=Sc(_);m(null,zt,C,M,_,O,k),w.el=zt.el}if(ut&&Te(ut,O),!pt&&(tt=et&&et.onVnodeMounted)){const zt=w;Te(()=>_n(tt,Et,zt),O)}(w.shapeFlag&256||Et&&ba(Et.vnode)&&Et.vnode.shapeFlag&256)&&_.a&&Te(_.a,O),_.isMounted=!0,w=C=M=null}},Z=_.effect=new Sh(V,()=>Fh(W),_.scope),W=_.update=()=>Z.run();W.id=_.uid,Pi(_,!0),W()},N=(_,w,C)=>{w.component=_;const M=_.vnode.props;_.vnode=w,_.next=null,N1(_,w.props,M,C),W1(_,w.children,C),yr(),md(),xr()},j=(_,w,C,M,O,k,K,V,Z=!1)=>{const W=_&&_.children,tt=_?_.shapeFlag:0,J=w.children,{patchFlag:et,shapeFlag:nt}=w;if(et>0){if(et&128){dt(W,J,C,M,O,k,K,V,Z);return}else if(et&256){rt(W,J,C,M,O,k,K,V,Z);return}}nt&8?(tt&16&&Gt(W,O,k),J!==W&&u(C,J)):tt&16?nt&16?dt(W,J,C,M,O,k,K,V,Z):Gt(W,O,k,!0):(tt&8&&u(C,""),nt&16&&R(J,C,M,O,k,K,V,Z))},rt=(_,w,C,M,O,k,K,V,Z)=>{_=_||Vs,w=w||Vs;const W=_.length,tt=w.length,J=Math.min(W,tt);let et;for(et=0;et<J;et++){const nt=w[et]=Z?di(w[et]):pn(w[et]);m(_[et],nt,C,null,O,k,K,V,Z)}W>tt?Gt(_,O,k,!0,!1,J):R(w,C,M,O,k,K,V,Z,J)},dt=(_,w,C,M,O,k,K,V,Z)=>{let W=0;const tt=w.length;let J=_.length-1,et=tt-1;for(;W<=J&&W<=et;){const nt=_[W],ut=w[W]=Z?di(w[W]):pn(w[W]);if(Bi(nt,ut))m(nt,ut,C,null,O,k,K,V,Z);else break;W++}for(;W<=J&&W<=et;){const nt=_[J],ut=w[et]=Z?di(w[et]):pn(w[et]);if(Bi(nt,ut))m(nt,ut,C,null,O,k,K,V,Z);else break;J--,et--}if(W>J){if(W<=et){const nt=et+1,ut=nt<tt?w[nt].el:M;for(;W<=et;)m(null,w[W]=Z?di(w[W]):pn(w[W]),C,ut,O,k,K,V,Z),W++}}else if(W>et)for(;W<=J;)G(_[W],O,k,!0),W++;else{const nt=W,ut=W,Et=new Map;for(W=ut;W<=et;W++){const de=w[W]=Z?di(w[W]):pn(w[W]);de.key!=null&&Et.set(de.key,W)}let pt,zt=0;const fe=et-ut+1;let Xt=!1,Cs=0;const Li=new Array(fe);for(W=0;W<fe;W++)Li[W]=0;for(W=nt;W<=J;W++){const de=_[W];if(zt>=fe){G(de,O,k,!0);continue}let Ae;if(de.key!=null)Ae=Et.get(de.key);else for(pt=ut;pt<=et;pt++)if(Li[pt-ut]===0&&Bi(de,w[pt])){Ae=pt;break}Ae===void 0?G(de,O,k,!0):(Li[Ae-ut]=W+1,Ae>=Cs?Cs=Ae:Xt=!0,m(de,w[Ae],C,null,O,k,K,V,Z),zt++)}const jo=Xt?V1(Li):Vs;for(pt=jo.length-1,W=fe-1;W>=0;W--){const de=ut+W,Ae=w[de],Ts=de+1<tt?w[de+1].el:M;Li[W]===0?m(null,Ae,C,Ts,O,k,K,V,Z):Xt&&(pt<0||W!==jo[pt]?Mt(Ae,C,Ts,2):pt--)}}},Mt=(_,w,C,M,O=null)=>{const{el:k,type:K,transition:V,children:Z,shapeFlag:W}=_;if(W&6){Mt(_.component.subTree,w,C,M);return}if(W&128){_.suspense.move(w,C,M);return}if(W&64){K.move(_,w,C,I);return}if(K===Ve){i(k,w,C);for(let J=0;J<Z.length;J++)Mt(Z[J],w,C,M);i(_.anchor,w,C);return}if(K===Mc){E(_,w,C);return}if(M!==2&&W&1&&V)if(M===0)V.beforeEnter(k),i(k,w,C),Te(()=>V.enter(k),O);else{const{leave:J,delayLeave:et,afterLeave:nt}=V,ut=()=>i(k,w,C),Et=()=>{J(k,()=>{ut(),nt&&nt()})};et?et(k,ut,Et):Et()}else i(k,w,C)},G=(_,w,C,M=!1,O=!1)=>{const{type:k,props:K,ref:V,children:Z,dynamicChildren:W,shapeFlag:tt,patchFlag:J,dirs:et}=_;if(V!=null&&Iu(V,null,C,_,!0),tt&256){w.ctx.deactivate(_);return}const nt=tt&1&&et,ut=!ba(_);let Et;if(ut&&(Et=K&&K.onVnodeBeforeUnmount)&&_n(Et,w,_),tt&6)wt(_.component,C,M);else{if(tt&128){_.suspense.unmount(C,M);return}nt&&Fi(_,null,w,"beforeUnmount"),tt&64?_.type.remove(_,w,C,O,I,M):W&&(k!==Ve||J>0&&J&64)?Gt(W,w,C,!1,!0):(k===Ve&&J&384||!O&&tt&16)&&Gt(Z,w,C),M&&Bt(_)}(ut&&(Et=K&&K.onVnodeUnmounted)||nt)&&Te(()=>{Et&&_n(Et,w,_),nt&&Fi(_,null,w,"unmounted")},C)},Bt=_=>{const{type:w,el:C,anchor:M,transition:O}=_;if(w===Ve){mt(C,M);return}if(w===Mc){v(_);return}const k=()=>{s(C),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(_.shapeFlag&1&&O&&!O.persisted){const{leave:K,delayLeave:V}=O,Z=()=>K(C,k);V?V(_.el,k,Z):Z()}else k()},mt=(_,w)=>{let C;for(;_!==w;)C=f(_),s(_),_=C;s(w)},wt=(_,w,C)=>{const{bum:M,scope:O,update:k,subTree:K,um:V}=_;M&&Tc(M),O.stop(),k&&(k.active=!1,G(K,_,w,C)),V&&Te(V,w),Te(()=>{_.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},Gt=(_,w,C,M=!1,O=!1,k=0)=>{for(let K=k;K<_.length;K++)G(_[K],w,C,M,O)},P=_=>_.shapeFlag&6?P(_.component.subTree):_.shapeFlag&128?_.suspense.next():f(_.anchor||_.el),B=(_,w,C)=>{_==null?w._vnode&&G(w._vnode,null,null,!0):m(w._vnode||null,_,w,null,null,null,C),md(),B_(),w._vnode=_},I={p:m,um:G,m:Mt,r:Bt,mt:it,mc:R,pc:j,pbc:A,n:P,o:e};let z,Q;return t&&([z,Q]=t(I)),{render:B,hydrate:z,createApp:D1(B,z)}}function Pi({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function dp(e,t,n=!1){const i=e.children,s=t.children;if(lt(i)&&lt(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=di(s[r]),a.el=o.el),n||dp(o,a)),a.type===$l&&(a.el=o.el)}}function V1(e){const t=e.slice(),n=[0];let i,s,r,o,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(s=n[n.length-1],e[s]<c){t[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}const Y1=e=>e.__isTeleport,Ve=Symbol.for("v-fgt"),$l=Symbol.for("v-txt"),cn=Symbol.for("v-cmt"),Mc=Symbol.for("v-stc"),eo=[];let on=null;function Ot(e=!1){eo.push(on=e?null:[])}function H1(){eo.pop(),on=eo[eo.length-1]||null}let ho=1;function Id(e){ho+=e}function gp(e){return e.dynamicChildren=ho>0?on||Vs:null,H1(),ho>0&&on&&on.push(e),e}function Pt(e,t,n,i,s,r){return gp(L(e,t,n,i,s,r,!0))}function mp(e,t,n,i,s){return gp(ie(e,t,n,i,s,!0))}function bu(e){return e?e.__v_isVNode===!0:!1}function Bi(e,t){return e.type===t.type&&e.key===t.key}const Vl="__vInternal",_p=({key:e})=>e??null,Aa=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?re(e)||ye(e)||ft(e)?{i:Pe,r:e,k:t,f:!!n}:e:null);function L(e,t=null,n=null,i=0,s=null,r=e===Ve?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&_p(t),ref:t&&Aa(t),scopeId:j_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Pe};return a?(Nh(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=re(n)?8:16),ho>0&&!o&&on&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&on.push(l),l}const ie=B1;function B1(e,t=null,n=null,i=0,s=null,r=!1){if((!e||e===R1)&&(e=cn),bu(e)){const a=Ri(e,t,!0);return n&&Nh(a,n),ho>0&&!r&&on&&(a.shapeFlag&6?on[on.indexOf(e)]=a:on.push(a)),a.patchFlag|=-2,a}if(sw(e)&&(e=e.__vccOpts),t){t=X1(t);let{class:a,style:l}=t;a&&!re(a)&&(t.class=Dl(a)),Yt(l)&&(G_(l)&&!lt(l)&&(l=ee({},l)),t.style=ji(l))}const o=re(e)?1:u1(e)?128:Y1(e)?64:Yt(e)?4:ft(e)?2:0;return L(e,t,n,i,s,o,r,!0)}function X1(e){return e?G_(e)||Vl in e?ee({},e):e:null}function Ri(e,t,n=!1){const{props:i,ref:s,patchFlag:r,children:o}=e,a=t?Z1(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&_p(a),ref:t&&t.ref?n&&s?lt(s)?s.concat(Aa(t)):[s,Aa(t)]:Aa(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ve?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ri(e.ssContent),ssFallback:e.ssFallback&&Ri(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function ne(e=" ",t=0){return ie($l,null,e,t)}function Ht(e="",t=!1){return t?(Ot(),mp(cn,null,e)):ie(cn,null,e)}function pn(e){return e==null||typeof e=="boolean"?ie(cn):lt(e)?ie(Ve,null,e.slice()):typeof e=="object"?di(e):ie($l,null,String(e))}function di(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ri(e)}function Nh(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(lt(t))n=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Nh(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(Vl in t)?t._ctx=Pe:s===3&&Pe&&(Pe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ft(t)?(t={default:t,_ctx:Pe},n=32):(t=String(t),i&64?(n=16,t=[ne(t)]):n=8);e.children=t,e.shapeFlag|=n}function Z1(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=Dl([t.class,i.class]));else if(s==="style")t.style=ji([t.style,i.style]);else if(Ol(s)){const r=t[s],o=i[s];o&&r!==o&&!(lt(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=i[s])}return t}function _n(e,t,n,i=null){Xe(e,t,7,[n,i])}const j1=ap();let K1=0;function q1(e,t,n){const i=e.type,s=(t?t.appContext:e.appContext)||j1,r={uid:K1++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new S_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cp(i,s),emitsOptions:Z_(i,s),emit:null,emitted:null,propsDefaults:Vt,inheritAttrs:i.inheritAttrs,ctx:Vt,data:Vt,props:Vt,attrs:Vt,slots:Vt,refs:Vt,setupState:Vt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=r1.bind(null,r),e.ce&&e.ce(r),r}let ue=null;const J1=()=>ue||Pe;let Gh,Rs,bd="__VUE_INSTANCE_SETTERS__";(Rs=mu()[bd])||(Rs=mu()[bd]=[]),Rs.push(e=>ue=e),Gh=e=>{Rs.length>1?Rs.forEach(t=>t(e)):Rs[0](e)};const Qs=e=>{Gh(e),e.scope.on()},rs=()=>{ue&&ue.scope.off(),Gh(null)};function pp(e){return e.vnode.shapeFlag&4}let fo=!1;function Q1(e,t=!1){fo=t;const{props:n,children:i}=e.vnode,s=pp(e);k1(e,n,s,t),z1(e,i);const r=s?tw(e,t):void 0;return fo=!1,r}function tw(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Ah(new Proxy(e.ctx,b1));const{setup:i}=n;if(i){const s=e.setupContext=i.length>1?nw(e):null;Qs(e),yr();const r=Ti(i,e,0,[e.props,s]);if(xr(),rs(),v_(r)){if(r.then(rs,rs),t)return r.then(o=>{Md(e,o,t)}).catch(o=>{Gl(o,e,0)});e.asyncDep=r}else Md(e,r,t)}else yp(e,t)}function Md(e,t,n){ft(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Yt(t)&&(e.setupState=$_(t)),yp(e,n)}let Ad;function yp(e,t,n){const i=e.type;if(!e.render){if(!t&&Ad&&!i.render){const s=i.template||Dh(e).template;if(s){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,c=ee(ee({isCustomElement:r,delimiters:a},o),l);i.render=Ad(s,c)}}e.render=i.render||ln}Qs(e),yr(),M1(e),xr(),rs()}function ew(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Me(e,"get","$attrs"),t[n]}}))}function nw(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return ew(e)},slots:e.slots,emit:e.emit,expose:t}}function Yl(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy($_(Ah(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in to)return to[n](e)},has(t,n){return n in t||n in to}}))}function iw(e,t=!0){return ft(e)?e.displayName||e.name:e.name||t&&e.__name}function sw(e){return ft(e)&&"__vccOpts"in e}const sn=(e,t)=>Qv(e,t,fo);function zh(e,t,n){const i=arguments.length;return i===2?Yt(t)&&!lt(t)?bu(t)?ie(e,null,[t]):ie(e,t):ie(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&bu(n)&&(n=[n]),ie(e,t,n))}const rw=Symbol.for("v-scx"),ow=()=>Vn(rw),aw="3.3.4",lw="http://www.w3.org/2000/svg",Xi=typeof document<"u"?document:null,Od=Xi&&Xi.createElement("template"),cw={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const s=t?Xi.createElementNS(lw,e):Xi.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:e=>Xi.createTextNode(e),createComment:e=>Xi.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Xi.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,s,r){const o=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{Od.innerHTML=i?`<svg>${e}</svg>`:e;const a=Od.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function uw(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function hw(e,t,n){const i=e.style,s=re(n);if(n&&!s){if(t&&!re(t))for(const r in t)n[r]==null&&Mu(i,r,"");for(const r in n)Mu(i,r,n[r])}else{const r=i.display;s?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=r)}}const Ld=/\s*!important$/;function Mu(e,t,n){if(lt(n))n.forEach(i=>Mu(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=fw(e,t);Ld.test(n)?e.setProperty(pr(i),n.replace(Ld,""),"important"):e[i]=n}}const Fd=["Webkit","Moz","ms"],Ac={};function fw(e,t){const n=Ac[t];if(n)return n;let i=Sn(t);if(i!=="filter"&&i in e)return Ac[t]=i;i=Pl(i);for(let s=0;s<Fd.length;s++){const r=Fd[s]+i;if(r in e)return Ac[t]=r}return t}const Pd="http://www.w3.org/1999/xlink";function dw(e,t,n,i,s){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Pd,t.slice(6,t.length)):e.setAttributeNS(Pd,t,n);else{const r=xv(t);n==null||r&&!C_(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function gw(e,t,n,i,s,r,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,s,r),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=C_(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function mw(e,t,n,i){e.addEventListener(t,n,i)}function _w(e,t,n,i){e.removeEventListener(t,n,i)}function pw(e,t,n,i,s=null){const r=e._vei||(e._vei={}),o=r[t];if(i&&o)o.value=i;else{const[a,l]=yw(t);if(i){const c=r[t]=ww(i,s);mw(e,a,c,l)}else o&&(_w(e,a,o,l),r[t]=void 0)}}const Dd=/(?:Once|Passive|Capture)$/;function yw(e){let t;if(Dd.test(e)){t={};let i;for(;i=e.match(Dd);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):pr(e.slice(2)),t]}let Oc=0;const xw=Promise.resolve(),vw=()=>Oc||(xw.then(()=>Oc=0),Oc=Date.now());function ww(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Xe(Ew(i,n.value),t,5,[i])};return n.value=e,n.attached=vw(),n}function Ew(e,t){if(lt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const kd=/^on[a-z]/,Cw=(e,t,n,i,s=!1,r,o,a,l)=>{t==="class"?uw(e,i,s):t==="style"?hw(e,n,i):Ol(t)?vh(t)||pw(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Tw(e,t,i,s))?gw(e,t,i,r,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),dw(e,t,i,s))};function Tw(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&kd.test(t)&&ft(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||kd.test(t)&&re(n)?!1:t in e}const ii="transition",Or="animation",Wh=(e,{slots:t})=>zh(m1,Sw(e),t);Wh.displayName="Transition";const xp={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Wh.props=ee({},Q_,xp);const Di=(e,t=[])=>{lt(e)?e.forEach(n=>n(...t)):e&&e(...t)},Nd=e=>e?lt(e)?e.some(t=>t.length>1):e.length>1:!1;function Sw(e){const t={};for(const F in e)F in xp||(t[F]=e[F]);if(e.css===!1)return t;const{name:n="v",type:i,duration:s,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,g=Rw(s),m=g&&g[0],p=g&&g[1],{onBeforeEnter:y,onEnter:x,onEnterCancelled:E,onLeave:v,onLeaveCancelled:S,onBeforeAppear:T=y,onAppear:b=x,onAppearCancelled:R=E}=t,U=(F,$,it)=>{ki(F,$?u:a),ki(F,$?c:o),it&&it()},A=(F,$)=>{F._isLeaving=!1,ki(F,h),ki(F,d),ki(F,f),$&&$()},D=F=>($,it)=>{const X=F?b:x,H=()=>U($,F,it);Di(X,[$,H]),Gd(()=>{ki($,F?l:r),si($,F?u:a),Nd(X)||zd($,i,m,H)})};return ee(t,{onBeforeEnter(F){Di(y,[F]),si(F,r),si(F,o)},onBeforeAppear(F){Di(T,[F]),si(F,l),si(F,c)},onEnter:D(!1),onAppear:D(!0),onLeave(F,$){F._isLeaving=!0;const it=()=>A(F,$);si(F,h),Mw(),si(F,f),Gd(()=>{F._isLeaving&&(ki(F,h),si(F,d),Nd(v)||zd(F,i,p,it))}),Di(v,[F,it])},onEnterCancelled(F){U(F,!1),Di(E,[F])},onAppearCancelled(F){U(F,!0),Di(R,[F])},onLeaveCancelled(F){A(F),Di(S,[F])}})}function Rw(e){if(e==null)return null;if(Yt(e))return[Lc(e.enter),Lc(e.leave)];{const t=Lc(e);return[t,t]}}function Lc(e){return dv(e)}function si(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function ki(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Gd(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Iw=0;function zd(e,t,n,i){const s=e._endId=++Iw,r=()=>{s===e._endId&&i()};if(n)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=bw(e,t);if(!o)return i();const c=o+"end";let u=0;const h=()=>{e.removeEventListener(c,f),r()},f=d=>{d.target===e&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),e.addEventListener(c,f)}function bw(e,t){const n=window.getComputedStyle(e),i=g=>(n[g]||"").split(", "),s=i(`${ii}Delay`),r=i(`${ii}Duration`),o=Wd(s,r),a=i(`${Or}Delay`),l=i(`${Or}Duration`),c=Wd(a,l);let u=null,h=0,f=0;t===ii?o>0&&(u=ii,h=o,f=r.length):t===Or?c>0&&(u=Or,h=c,f=l.length):(h=Math.max(o,c),u=h>0?o>c?ii:Or:null,f=u?u===ii?r.length:l.length:0);const d=u===ii&&/\b(transform|all)(,|$)/.test(i(`${ii}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:d}}function Wd(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>Ud(n)+Ud(e[i])))}function Ud(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Mw(){return document.body.offsetHeight}const Fc={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Lr(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Lr(e,!0),i.enter(e)):i.leave(e,()=>{Lr(e,!1)}):Lr(e,t))},beforeUnmount(e,{value:t}){Lr(e,t)}};function Lr(e,t){e.style.display=t?e._vod:"none"}const Aw=ee({patchProp:Cw},cw);let $d;function Ow(){return $d||($d=U1(Aw))}const Lw=(...e)=>{const t=Ow().createApp(...e),{mount:n}=t;return t.mount=i=>{const s=Fw(i);if(!s)return;const r=t._component;!ft(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Fw(e){return re(e)?document.querySelector(e):e}var Pw=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const Dw=Symbol();var Vd;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Vd||(Vd={}));function kw(){const e=vv(!0),t=e.run(()=>Qn({}));let n=[],i=[];const s=Ah({install(r){s._a=r,r.provide(Dw,s),r.config.globalProperties.$pinia=s,i.forEach(o=>n.push(o)),i=[]},use(r){return!this._a&&!Pw?i.push(r):n.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ds=typeof window<"u";function Nw(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const kt=Object.assign;function Pc(e,t){const n={};for(const i in t){const s=t[i];n[i]=hn(s)?s.map(e):e(s)}return n}const no=()=>{},hn=Array.isArray,Gw=/\/$/,zw=e=>e.replace(Gw,"");function Dc(e,t,n="/"){let i,s={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),s=e(r)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=Vw(i??t,n),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:o}}function Ww(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Yd(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Uw(e,t,n){const i=t.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&tr(t.matched[i],n.matched[s])&&vp(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function tr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function vp(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!$w(e[n],t[n]))return!1;return!0}function $w(e,t){return hn(e)?Hd(e,t):hn(t)?Hd(t,e):e===t}function Hd(e,t){return hn(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function Vw(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var go;(function(e){e.pop="pop",e.push="push"})(go||(go={}));var io;(function(e){e.back="back",e.forward="forward",e.unknown=""})(io||(io={}));function Yw(e){if(!e)if(Ds){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),zw(e)}const Hw=/^[^#]+#/;function Bw(e,t){return e.replace(Hw,"#")+t}function Xw(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Hl=()=>({left:window.pageXOffset,top:window.pageYOffset});function Zw(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=Xw(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Bd(e,t){return(history.state?history.state.position-t:-1)+e}const Au=new Map;function jw(e,t){Au.set(e,t)}function Kw(e){const t=Au.get(e);return Au.delete(e),t}let qw=()=>location.protocol+"//"+location.host;function wp(e,t){const{pathname:n,search:i,hash:s}=t,r=e.indexOf("#");if(r>-1){let a=s.includes(e.slice(r))?e.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Yd(l,"")}return Yd(n,e)+i+s}function Jw(e,t,n,i){let s=[],r=[],o=null;const a=({state:f})=>{const d=wp(e,location),g=n.value,m=t.value;let p=0;if(f){if(n.value=d,t.value=f,o&&o===g){o=null;return}p=m?f.position-m.position:0}else i(d);s.forEach(y=>{y(n.value,g,{delta:p,type:go.pop,direction:p?p>0?io.forward:io.back:io.unknown})})};function l(){o=n.value}function c(f){s.push(f);const d=()=>{const g=s.indexOf(f);g>-1&&s.splice(g,1)};return r.push(d),d}function u(){const{history:f}=window;f.state&&f.replaceState(kt({},f.state,{scroll:Hl()}),"")}function h(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Xd(e,t,n,i=!1,s=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:s?Hl():null}}function Qw(e){const{history:t,location:n}=window,i={value:wp(e,n)},s={value:t.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+l:qw()+e+l;try{t[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(d){console.error(d),n[u?"replace":"assign"](f)}}function o(l,c){const u=kt({},t.state,Xd(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,u,!0),i.value=l}function a(l,c){const u=kt({},s.value,t.state,{forward:l,scroll:Hl()});r(u.current,u,!0);const h=kt({},Xd(i.value,l,null),{position:u.position+1},c);r(l,h,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function tE(e){e=Yw(e);const t=Qw(e),n=Jw(e,t.state,t.location,t.replace);function i(r,o=!0){o||n.pauseListeners(),history.go(r)}const s=kt({location:"",base:e,go:i,createHref:Bw.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function eE(e){return typeof e=="string"||e&&typeof e=="object"}function Ep(e){return typeof e=="string"||typeof e=="symbol"}const ri={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Cp=Symbol("");var Zd;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Zd||(Zd={}));function er(e,t){return kt(new Error,{type:e,[Cp]:!0},t)}function Mn(e,t){return e instanceof Error&&Cp in e&&(t==null||!!(e.type&t))}const jd="[^/]+?",nE={sensitive:!1,strict:!1,start:!0,end:!0},iE=/[.+*?^${}()[\]/\\]/g;function sE(e,t){const n=kt({},nE,t),i=[];let s=n.start?"^":"";const r=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const f=c[h];let d=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(iE,"\\$&"),d+=40;else if(f.type===1){const{value:g,repeatable:m,optional:p,regexp:y}=f;r.push({name:g,repeatable:m,optional:p});const x=y||jd;if(x!==jd){d+=10;try{new RegExp(`(${x})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${g}" (${x}): `+v.message)}}let E=m?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;h||(E=p&&c.length<2?`(?:/${E})`:"/"+E),p&&(E+="?"),s+=E,d+=20,p&&(d+=-8),m&&(d+=-20),x===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const d=u[f]||"",g=r[f-1];h[g.name]=d&&g.repeatable?d.split("/"):d}return h}function l(c){let u="",h=!1;for(const f of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const d of f)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:p}=d,y=g in c?c[g]:"";if(hn(y)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const x=hn(y)?y.join("/"):y;if(!x)if(p)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=x}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function rE(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function oE(e,t){let n=0;const i=e.score,s=t.score;for(;n<i.length&&n<s.length;){const r=rE(i[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-i.length)===1){if(Kd(i))return 1;if(Kd(s))return-1}return s.length-i.length}function Kd(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const aE={type:0,value:""},lE=/[a-zA-Z0-9_]/;function cE(e){if(!e)return[[]];if(e==="/")return[[aE]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,i=n;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):f();break;case 4:f(),n=i;break;case 1:l==="("?n=2:lE.test(l)?f():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function uE(e,t,n){const i=sE(cE(e.path),n),s=kt(i,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function hE(e,t){const n=[],i=new Map;t=Qd({strict:!1,end:!0,sensitive:!1},t);function s(u){return i.get(u)}function r(u,h,f){const d=!f,g=fE(u);g.aliasOf=f&&f.record;const m=Qd(t,u),p=[g];if("alias"in u){const E=typeof u.alias=="string"?[u.alias]:u.alias;for(const v of E)p.push(kt({},g,{components:f?f.record.components:g.components,path:v,aliasOf:f?f.record:g}))}let y,x;for(const E of p){const{path:v}=E;if(h&&v[0]!=="/"){const S=h.record.path,T=S[S.length-1]==="/"?"":"/";E.path=h.record.path+(v&&T+v)}if(y=uE(E,h,m),f?f.alias.push(y):(x=x||y,x!==y&&x.alias.push(y),d&&u.name&&!Jd(y)&&o(u.name)),g.children){const S=g.children;for(let T=0;T<S.length;T++)r(S[T],y,f&&f.children[T])}f=f||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return x?()=>{o(x)}:no}function o(u){if(Ep(u)){const h=i.get(u);h&&(i.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&oE(u,n[h])>=0&&(u.record.path!==n[h].record.path||!Tp(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Jd(u)&&i.set(u.record.name,u)}function c(u,h){let f,d={},g,m;if("name"in u&&u.name){if(f=i.get(u.name),!f)throw er(1,{location:u});m=f.record.name,d=kt(qd(h.params,f.keys.filter(x=>!x.optional).map(x=>x.name)),u.params&&qd(u.params,f.keys.map(x=>x.name))),g=f.stringify(d)}else if("path"in u)g=u.path,f=n.find(x=>x.re.test(g)),f&&(d=f.parse(g),m=f.record.name);else{if(f=h.name?i.get(h.name):n.find(x=>x.re.test(h.path)),!f)throw er(1,{location:u,currentLocation:h});m=f.record.name,d=kt({},h.params,u.params),g=f.stringify(d)}const p=[];let y=f;for(;y;)p.unshift(y.record),y=y.parent;return{name:m,path:g,params:d,matched:p,meta:gE(p)}}return e.forEach(u=>r(u)),{addRoute:r,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function qd(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function fE(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:dE(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function dE(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function Jd(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function gE(e){return e.reduce((t,n)=>kt(t,n.meta),{})}function Qd(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function Tp(e,t){return t.children.some(n=>n===e||Tp(e,n))}const Sp=/#/g,mE=/&/g,_E=/\//g,pE=/=/g,yE=/\?/g,Rp=/\+/g,xE=/%5B/g,vE=/%5D/g,Ip=/%5E/g,wE=/%60/g,bp=/%7B/g,EE=/%7C/g,Mp=/%7D/g,CE=/%20/g;function Uh(e){return encodeURI(""+e).replace(EE,"|").replace(xE,"[").replace(vE,"]")}function TE(e){return Uh(e).replace(bp,"{").replace(Mp,"}").replace(Ip,"^")}function Ou(e){return Uh(e).replace(Rp,"%2B").replace(CE,"+").replace(Sp,"%23").replace(mE,"%26").replace(wE,"`").replace(bp,"{").replace(Mp,"}").replace(Ip,"^")}function SE(e){return Ou(e).replace(pE,"%3D")}function RE(e){return Uh(e).replace(Sp,"%23").replace(yE,"%3F")}function IE(e){return e==null?"":RE(e).replace(_E,"%2F")}function Va(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function bE(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(Rp," "),o=r.indexOf("="),a=Va(o<0?r:r.slice(0,o)),l=o<0?null:Va(r.slice(o+1));if(a in t){let c=t[a];hn(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function tg(e){let t="";for(let n in e){const i=e[n];if(n=SE(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(hn(i)?i.map(r=>r&&Ou(r)):[i&&Ou(i)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function ME(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=hn(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return t}const AE=Symbol(""),eg=Symbol(""),$h=Symbol(""),Ap=Symbol(""),Lu=Symbol("");function Fr(){let e=[];function t(i){return e.push(i),()=>{const s=e.indexOf(i);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function gi(e,t,n,i,s){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(er(4,{from:n,to:t})):h instanceof Error?a(h):eE(h)?a(er(2,{from:t,to:h})):(r&&i.enterCallbacks[s]===r&&typeof h=="function"&&r.push(h),o())},c=e.call(i&&i.instances[s],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function kc(e,t,n,i){const s=[];for(const r of e)for(const o in r.components){let a=r.components[o];if(!(t!=="beforeRouteEnter"&&!r.instances[o]))if(OE(a)){const c=(a.__vccOpts||a)[t];c&&s.push(gi(c,n,i,r,o))}else{let l=a();s.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const u=Nw(c)?c.default:c;r.components[o]=u;const f=(u.__vccOpts||u)[t];return f&&gi(f,n,i,r,o)()}))}}return s}function OE(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function ng(e){const t=Vn($h),n=Vn(Ap),i=sn(()=>t.resolve(ss(e.to))),s=sn(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(tr.bind(null,u));if(f>-1)return f;const d=ig(l[c-2]);return c>1&&ig(u)===d&&h[h.length-1].path!==d?h.findIndex(tr.bind(null,l[c-2])):f}),r=sn(()=>s.value>-1&&DE(n.params,i.value.params)),o=sn(()=>s.value>-1&&s.value===n.matched.length-1&&vp(n.params,i.value.params));function a(l={}){return PE(l)?t[ss(e.replace)?"replace":"push"](ss(e.to)).catch(no):Promise.resolve()}return{route:i,href:sn(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}const LE=Mo({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ng,setup(e,{slots:t}){const n=Nl(ng(e)),{options:i}=Vn($h),s=sn(()=>({[sg(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[sg(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:zh("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),FE=LE;function PE(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function DE(e,t){for(const n in t){const i=t[n],s=e[n];if(typeof i=="string"){if(i!==s)return!1}else if(!hn(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function ig(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const sg=(e,t,n)=>e??t??n,kE=Mo({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=Vn(Lu),s=sn(()=>e.route||i.value),r=Vn(eg,0),o=sn(()=>{let c=ss(r);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=sn(()=>s.value.matched[o.value]);Ma(eg,sn(()=>o.value+1)),Ma(AE,a),Ma(Lu,s);const l=Qn();return Qr(()=>[l.value,a.value,e.name],([c,u,h],[f,d,g])=>{u&&(u.instances[h]=c,d&&d!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!tr(u,d)||!f)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=s.value,u=e.name,h=a.value,f=h&&h.components[u];if(!f)return rg(n.default,{Component:f,route:c});const d=h.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,p=zh(f,kt({},g,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return rg(n.default,{Component:p,route:c})||p}}});function rg(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Op=kE;function NE(e){const t=hE(e.routes,e),n=e.parseQuery||bE,i=e.stringifyQuery||tg,s=e.history,r=Fr(),o=Fr(),a=Fr(),l=jv(ri);let c=ri;Ds&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Pc.bind(null,P=>""+P),h=Pc.bind(null,IE),f=Pc.bind(null,Va);function d(P,B){let I,z;return Ep(P)?(I=t.getRecordMatcher(P),z=B):z=P,t.addRoute(z,I)}function g(P){const B=t.getRecordMatcher(P);B&&t.removeRoute(B)}function m(){return t.getRoutes().map(P=>P.record)}function p(P){return!!t.getRecordMatcher(P)}function y(P,B){if(B=kt({},B||l.value),typeof P=="string"){const C=Dc(n,P,B.path),M=t.resolve({path:C.path},B),O=s.createHref(C.fullPath);return kt(C,M,{params:f(M.params),hash:Va(C.hash),redirectedFrom:void 0,href:O})}let I;if("path"in P)I=kt({},P,{path:Dc(n,P.path,B.path).path});else{const C=kt({},P.params);for(const M in C)C[M]==null&&delete C[M];I=kt({},P,{params:h(C)}),B.params=h(B.params)}const z=t.resolve(I,B),Q=P.hash||"";z.params=u(f(z.params));const _=Ww(i,kt({},P,{hash:TE(Q),path:z.path})),w=s.createHref(_);return kt({fullPath:_,hash:Q,query:i===tg?ME(P.query):P.query||{}},z,{redirectedFrom:void 0,href:w})}function x(P){return typeof P=="string"?Dc(n,P,l.value.path):kt({},P)}function E(P,B){if(c!==P)return er(8,{from:B,to:P})}function v(P){return b(P)}function S(P){return v(kt(x(P),{replace:!0}))}function T(P){const B=P.matched[P.matched.length-1];if(B&&B.redirect){const{redirect:I}=B;let z=typeof I=="function"?I(P):I;return typeof z=="string"&&(z=z.includes("?")||z.includes("#")?z=x(z):{path:z},z.params={}),kt({query:P.query,hash:P.hash,params:"path"in z?{}:P.params},z)}}function b(P,B){const I=c=y(P),z=l.value,Q=P.state,_=P.force,w=P.replace===!0,C=T(I);if(C)return b(kt(x(C),{state:typeof C=="object"?kt({},Q,C.state):Q,force:_,replace:w}),B||I);const M=I;M.redirectedFrom=B;let O;return!_&&Uw(i,z,I)&&(O=er(16,{to:M,from:z}),Mt(z,z,!0,!1)),(O?Promise.resolve(O):A(M,z)).catch(k=>Mn(k)?Mn(k,2)?k:dt(k):j(k,M,z)).then(k=>{if(k){if(Mn(k,2))return b(kt({replace:w},x(k.to),{state:typeof k.to=="object"?kt({},Q,k.to.state):Q,force:_}),B||M)}else k=F(M,z,!0,w,Q);return D(M,z,k),k})}function R(P,B){const I=E(P,B);return I?Promise.reject(I):Promise.resolve()}function U(P){const B=mt.values().next().value;return B&&typeof B.runWithContext=="function"?B.runWithContext(P):P()}function A(P,B){let I;const[z,Q,_]=GE(P,B);I=kc(z.reverse(),"beforeRouteLeave",P,B);for(const C of z)C.leaveGuards.forEach(M=>{I.push(gi(M,P,B))});const w=R.bind(null,P,B);return I.push(w),Gt(I).then(()=>{I=[];for(const C of r.list())I.push(gi(C,P,B));return I.push(w),Gt(I)}).then(()=>{I=kc(Q,"beforeRouteUpdate",P,B);for(const C of Q)C.updateGuards.forEach(M=>{I.push(gi(M,P,B))});return I.push(w),Gt(I)}).then(()=>{I=[];for(const C of _)if(C.beforeEnter)if(hn(C.beforeEnter))for(const M of C.beforeEnter)I.push(gi(M,P,B));else I.push(gi(C.beforeEnter,P,B));return I.push(w),Gt(I)}).then(()=>(P.matched.forEach(C=>C.enterCallbacks={}),I=kc(_,"beforeRouteEnter",P,B),I.push(w),Gt(I))).then(()=>{I=[];for(const C of o.list())I.push(gi(C,P,B));return I.push(w),Gt(I)}).catch(C=>Mn(C,8)?C:Promise.reject(C))}function D(P,B,I){a.list().forEach(z=>U(()=>z(P,B,I)))}function F(P,B,I,z,Q){const _=E(P,B);if(_)return _;const w=B===ri,C=Ds?history.state:{};I&&(z||w?s.replace(P.fullPath,kt({scroll:w&&C&&C.scroll},Q)):s.push(P.fullPath,Q)),l.value=P,Mt(P,B,I,w),dt()}let $;function it(){$||($=s.listen((P,B,I)=>{if(!wt.listening)return;const z=y(P),Q=T(z);if(Q){b(kt(Q,{replace:!0}),z).catch(no);return}c=z;const _=l.value;Ds&&jw(Bd(_.fullPath,I.delta),Hl()),A(z,_).catch(w=>Mn(w,12)?w:Mn(w,2)?(b(w.to,z).then(C=>{Mn(C,20)&&!I.delta&&I.type===go.pop&&s.go(-1,!1)}).catch(no),Promise.reject()):(I.delta&&s.go(-I.delta,!1),j(w,z,_))).then(w=>{w=w||F(z,_,!1),w&&(I.delta&&!Mn(w,8)?s.go(-I.delta,!1):I.type===go.pop&&Mn(w,20)&&s.go(-1,!1)),D(z,_,w)}).catch(no)}))}let X=Fr(),H=Fr(),N;function j(P,B,I){dt(P);const z=H.list();return z.length?z.forEach(Q=>Q(P,B,I)):console.error(P),Promise.reject(P)}function rt(){return N&&l.value!==ri?Promise.resolve():new Promise((P,B)=>{X.add([P,B])})}function dt(P){return N||(N=!P,it(),X.list().forEach(([B,I])=>P?I(P):B()),X.reset()),P}function Mt(P,B,I,z){const{scrollBehavior:Q}=e;if(!Ds||!Q)return Promise.resolve();const _=!I&&Kw(Bd(P.fullPath,0))||(z||!I)&&history.state&&history.state.scroll||null;return Y_().then(()=>Q(P,B,_)).then(w=>w&&Zw(w)).catch(w=>j(w,P,B))}const G=P=>s.go(P);let Bt;const mt=new Set,wt={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,hasRoute:p,getRoutes:m,resolve:y,options:e,push:v,replace:S,go:G,back:()=>G(-1),forward:()=>G(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:H.add,isReady:rt,install(P){const B=this;P.component("RouterLink",FE),P.component("RouterView",Op),P.config.globalProperties.$router=B,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>ss(l)}),Ds&&!Bt&&l.value===ri&&(Bt=!0,v(s.location).catch(Q=>{}));const I={};for(const Q in ri)Object.defineProperty(I,Q,{get:()=>l.value[Q],enumerable:!0});P.provide($h,B),P.provide(Ap,k_(I)),P.provide(Lu,l);const z=P.unmount;mt.add(P),P.unmount=function(){mt.delete(P),mt.size<1&&(c=ri,$&&$(),$=null,l.value=ri,Bt=!1,N=!1),z()}}};function Gt(P){return P.reduce((B,I)=>B.then(()=>U(I)),Promise.resolve())}return wt}function GE(e,t){const n=[],i=[],s=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(c=>tr(c,a))?i.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>tr(c,l))||s.push(l))}return[n,i,s]}const zE=Mo({__name:"App",setup(e){return(t,n)=>(Ot(),mp(ss(Op)))}}),WE="modulepreload",UE=function(e){return"/openactivity/"+e},og={},ag=function(t,n,i){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=UE(r),r in og)return;og[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===r&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":WE,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};const $E="/openactivity/assets/destination-point-63b16bda.svg",VE="/openactivity/assets/starting-point-c9a465c9.svg";class YE{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ei=YE,nr={PROPERTYCHANGE:"propertychange"};class HE{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Vh=HE;function BE(e,t,n){let i,s;n=n||Ii;let r=0,o=e.length,a=!1;for(;r<o;)i=r+(o-r>>1),s=+n(e[i],t),s<0?r=i+1:(o=i,a=!s);return a?r:~r}function Ii(e,t){return e>t?1:e<t?-1:0}function Yh(e,t,n){if(e[0]<=t)return 0;const i=e.length;if(t<=e[i-1])return i-1;if(typeof n=="function"){for(let s=1;s<i;++s){const r=e[s];if(r===t)return s;if(r<t)return n(t,e[s-1],r)>0?s-1:s}return i-1}if(n>0){for(let s=1;s<i;++s)if(e[s]<t)return s-1;return i-1}if(n<0){for(let s=1;s<i;++s)if(e[s]<=t)return s;return i-1}for(let s=1;s<i;++s){if(e[s]==t)return s;if(e[s]<t)return e[s-1]-t<t-e[s]?s-1:s}return i-1}function XE(e,t,n){for(;t<n;){const i=e[t];e[t]=e[n],e[n]=i,++t,--n}}function Yn(e,t){const n=Array.isArray(t)?t:[t],i=n.length;for(let s=0;s<i;s++)e[e.length]=n[s]}function Ai(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function ZE(e,t,n){const i=t||Ii;return e.every(function(s,r){if(r===0)return!0;const o=i(e[r-1],s);return!(o>0||n&&o===0)})}function mo(){return!0}function Bl(){return!1}function ir(){}function jE(e){let t=!1,n,i,s;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==s||!Ai(r,i))&&(t=!0,s=this,i=r,n=e.apply(this,arguments)),n}}function KE(e){function t(){let n;try{n=e()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return t()}function Ao(e){for(const t in e)delete e[t]}function sr(e){let t;for(t in e)return!1;return!t}class qE extends Vh{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const i=this.listeners_||(this.listeners_={}),s=i[t]||(i[t]=[]);s.includes(n)||s.push(n)}dispatchEvent(t){const n=typeof t=="string",i=n?t:t.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const r=n?new ei(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=s.length;c<u;++c)if("handleEvent"in s[c]?l=s[c].handleEvent(r):l=s[c].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,ir);delete o[i]}return l}disposeInternal(){this.listeners_&&Ao(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){const i=this.listeners_&&this.listeners_[t];if(i){const s=i.indexOf(n);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[s]=ir,++this.pendingRemovals_[t]):(i.splice(s,1),i.length===0&&delete this.listeners_[t]))}}}const Oo=qE,ct={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function vt(e,t,n,i,s){if(i&&i!==e&&(n=n.bind(i)),s){const o=n;n=function(){e.removeEventListener(t,n),o.apply(this,arguments)}}const r={target:e,type:t,listener:n};return e.addEventListener(t,n),r}function Ya(e,t,n,i){return vt(e,t,n,i,!0)}function Ut(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Ao(e))}class Xl extends Oo{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ct.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const i=t.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=vt(this,t[r],n);return s}return vt(this,t,n)}onceInternal(t,n){let i;if(Array.isArray(t)){const s=t.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=Ya(this,t[r],n)}else i=Ya(this,t,n);return n.ol_key=i,i}unInternal(t,n){const i=n.ol_key;if(i)JE(i);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],n);else this.removeEventListener(t,n)}}Xl.prototype.on;Xl.prototype.once;Xl.prototype.un;function JE(e){if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)Ut(e[t]);else Ut(e)}const Lp=Xl;function at(){throw new Error("Unimplemented abstract method.")}let QE=0;function Lt(e){return e.ol_uid||(e.ol_uid=String(++QE))}class lg extends ei{constructor(t,n,i){super(t),this.key=n,this.oldValue=i}}class tC extends Lp{constructor(t){super(),this.on,this.once,this.un,Lt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new lg(i,t,n)),i=nr.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new lg(i,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,i){const s=this.values_||(this.values_={});if(i)s[t]=n;else{const r=s[t];s[t]=n,r!==n&&this.notify(t,r)}}setProperties(t,n){for(const i in t)this.set(i,t[i],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],sr(this.values_)&&(this.values_=null),n||this.notify(t,i)}}}const gn=tC,Se={ADD:"add",REMOVE:"remove"},cg={LENGTH:"length"};class sa extends ei{constructor(t,n,i){super(t),this.element=n,this.index=i}}class eC extends gn{constructor(t,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let n=0,i=t.length;n<i;++n)this.push(t[n]);return this}forEach(t){const n=this.array_;for(let i=0,s=n.length;i<s;++i)t(n[i],i,n)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(cg.LENGTH)}insertAt(t,n){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new sa(Se.ADD,n,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const n=this.getLength();return this.insertAt(n,t),this.getLength()}remove(t){const n=this.array_;for(let i=0,s=n.length;i<s;++i)if(n[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new sa(Se.REMOVE,n,t)),n}setAt(t,n){const i=this.getLength();if(t>=i){this.insertAt(t,n);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n,t);const s=this.array_[t];this.array_[t]=n,this.dispatchEvent(new sa(Se.REMOVE,s,t)),this.dispatchEvent(new sa(Se.ADD,n,t))}updateLength_(){this.set(cg.LENGTH,this.array_.length)}assertUnique_(t,n){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===t&&i!==n)throw new Error("Duplicate item added to a unique collection")}}const wn=eC,bi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",nC=bi.includes("firefox"),iC=bi.includes("safari")&&!bi.includes("chrom");iC&&(bi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(bi));const sC=bi.includes("webkit")&&!bi.includes("edge"),Fp=bi.includes("macintosh"),Pp=typeof devicePixelRatio<"u"?devicePixelRatio:1,Hh=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Dp=typeof Image<"u"&&Image.prototype.decode,kp=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}();function Tt(e,t){if(!e)throw new Error(t)}new Array(6);function un(){return[1,0,0,1,0,0]}function rC(e,t,n,i,s,r,o){return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e[4]=r,e[5]=o,e}function oC(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Kt(e,t){const n=t[0],i=t[1];return t[0]=e[0]*n+e[2]*i+e[4],t[1]=e[1]*n+e[3]*i+e[5],t}function aC(e,t,n){return rC(e,t,0,0,n,0,0)}function fn(e,t,n,i,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return e[0]=i*c,e[1]=s*l,e[2]=-i*l,e[3]=s*c,e[4]=o*i*c-a*i*l+t,e[5]=o*s*l+a*s*c+n,e}function Zl(e,t){const n=lC(t);Tt(n!==0,"Transformation matrix cannot be inverted");const i=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5];return e[0]=o/n,e[1]=-s/n,e[2]=-r/n,e[3]=i/n,e[4]=(r*l-o*a)/n,e[5]=-(i*l-s*a)/n,e}function lC(e){return e[0]*e[3]-e[1]*e[2]}let ug;function Bh(e){const t="matrix("+e.join(", ")+")";if(Hh)return t;const n=ug||(ug=document.createElement("div"));return n.style.transform=t,n.style.transform}const ce={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function hg(e){const t=Ze();for(let n=0,i=e.length;n<i;++n)so(t,e[n]);return t}function Xh(e,t,n){return n?(n[0]=e[0]-t,n[1]=e[1]-t,n[2]=e[2]+t,n[3]=e[3]+t,n):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function Np(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function _s(e,t,n){let i,s;return t<e[0]?i=e[0]-t:e[2]<t?i=t-e[2]:i=0,n<e[1]?s=e[1]-n:e[3]<n?s=n-e[3]:s=0,i*i+s*s}function Lo(e,t){return Zh(e,t[0],t[1])}function xi(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function Zh(e,t,n){return e[0]<=t&&t<=e[2]&&e[1]<=n&&n<=e[3]}function Fu(e,t){const n=e[0],i=e[1],s=e[2],r=e[3],o=t[0],a=t[1];let l=ce.UNKNOWN;return o<n?l=l|ce.LEFT:o>s&&(l=l|ce.RIGHT),a<i?l=l|ce.BELOW:a>r&&(l=l|ce.ABOVE),l===ce.UNKNOWN&&(l=ce.INTERSECTING),l}function Ze(){return[1/0,1/0,-1/0,-1/0]}function Mi(e,t,n,i,s){return s?(s[0]=e,s[1]=t,s[2]=n,s[3]=i,s):[e,t,n,i]}function Fo(e){return Mi(1/0,1/0,-1/0,-1/0,e)}function cC(e,t){const n=e[0],i=e[1];return Mi(n,i,n,i,t)}function Gp(e,t,n,i,s){const r=Fo(s);return Wp(r,e,t,n,i)}function _o(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function zp(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function so(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Wp(e,t,n,i,s){for(;n<i;n+=s)uC(e,t[n],t[n+1]);return e}function uC(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)}function Up(e,t){let n;return n=t(jl(e)),n||(n=t(Kl(e)),n)||(n=t(ql(e)),n)||(n=t(ps(e)),n)?n:!1}function Pu(e){let t=0;return vr(e)||(t=Nt(e)*Ne(e)),t}function jl(e){return[e[0],e[1]]}function Kl(e){return[e[2],e[1]]}function fs(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function hC(e,t){let n;if(t==="bottom-left")n=jl(e);else if(t==="bottom-right")n=Kl(e);else if(t==="top-left")n=ps(e);else if(t==="top-right")n=ql(e);else throw new Error("Invalid corner");return n}function Du(e,t,n,i,s){const[r,o,a,l,c,u,h,f]=ku(e,t,n,i);return Mi(Math.min(r,a,c,h),Math.min(o,l,u,f),Math.max(r,a,c,h),Math.max(o,l,u,f),s)}function ku(e,t,n,i){const s=t*i[0]/2,r=t*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=s*o,c=s*a,u=r*o,h=r*a,f=e[0],d=e[1];return[f-l+h,d-c-u,f-l-h,d-c+u,f+l-h,d+c+u,f+l+h,d+c-u,f-l+h,d-c-u]}function Ne(e){return e[3]-e[1]}function Xs(e,t,n){const i=n||Ze();return ve(e,t)?(e[0]>t[0]?i[0]=e[0]:i[0]=t[0],e[1]>t[1]?i[1]=e[1]:i[1]=t[1],e[2]<t[2]?i[2]=e[2]:i[2]=t[2],e[3]<t[3]?i[3]=e[3]:i[3]=t[3]):Fo(i),i}function ps(e){return[e[0],e[3]]}function ql(e){return[e[2],e[3]]}function Nt(e){return e[2]-e[0]}function ve(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function vr(e){return e[2]<e[0]||e[3]<e[1]}function fC(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function dC(e,t){const n=(e[2]-e[0])/2*(t-1),i=(e[3]-e[1])/2*(t-1);e[0]-=n,e[2]+=n,e[1]-=i,e[3]+=i}function gC(e,t,n){let i=!1;const s=Fu(e,t),r=Fu(e,n);if(s===ce.INTERSECTING||r===ce.INTERSECTING)i=!0;else{const o=e[0],a=e[1],l=e[2],c=e[3],u=t[0],h=t[1],f=n[0],d=n[1],g=(d-h)/(f-u);let m,p;r&ce.ABOVE&&!(s&ce.ABOVE)&&(m=f-(d-c)/g,i=m>=o&&m<=l),!i&&r&ce.RIGHT&&!(s&ce.RIGHT)&&(p=d-(f-l)*g,i=p>=a&&p<=c),!i&&r&ce.BELOW&&!(s&ce.BELOW)&&(m=f-(d-a)/g,i=m>=o&&m<=l),!i&&r&ce.LEFT&&!(s&ce.LEFT)&&(p=d-(f-o)*g,i=p>=a&&p<=c)}return i}function $p(e,t){const n=t.getExtent(),i=fs(e);if(t.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const s=Nt(n),o=Math.floor((i[0]-n[0])/s)*s;e[0]-=o,e[2]-=o}return e}function mC(e,t){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];$p(e,t);const i=Nt(n);if(Nt(e)>i)return[[n[0],e[1],n[2],e[3]]];if(e[0]<n[0])return[[e[0]+i,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-i,e[3]]]}return[e]}function te(e,t,n){return Math.min(Math.max(e,t),n)}function _C(e,t,n,i,s,r){const o=s-n,a=r-i;if(o!==0||a!==0){const l=((e-n)*o+(t-i)*a)/(o*o+a*a);l>1?(n=s,i=r):l>0&&(n+=o*l,i+=a*l)}return os(e,t,n,i)}function os(e,t,n,i){const s=n-e,r=i-t;return s*s+r*r}function pC(e){const t=e.length;for(let i=0;i<t;i++){let s=i,r=Math.abs(e[i][i]);for(let a=i+1;a<t;a++){const l=Math.abs(e[a][i]);l>r&&(r=l,s=a)}if(r===0)return null;const o=e[s];e[s]=e[i],e[i]=o;for(let a=i+1;a<t;a++){const l=-e[a][i]/e[i][i];for(let c=i;c<t+1;c++)i==c?e[a][c]=0:e[a][c]+=l*e[i][c]}}const n=new Array(t);for(let i=t-1;i>=0;i--){n[i]=e[i][t]/e[i][i];for(let s=i-1;s>=0;s--)e[s][t]-=e[s][i]*n[i]}return n}function Oa(e){return e*Math.PI/180}function as(e,t){const n=e%t;return n*t<0?n+t:n}function Fe(e,t,n){return e+n*(t-e)}function Jl(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function ra(e,t){return Math.floor(Jl(e,t))}function oa(e,t){return Math.ceil(Jl(e,t))}const yC=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,xC=/^([a-z]*)$|^hsla?\(.*\)$/i;function Vp(e){return typeof e=="string"?e:Yp(e)}function vC(e){const t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);const n=getComputedStyle(t).color;return document.body.removeChild(t),n}return""}const wC=function(){const t={};let n=0;return function(i){let s;if(t.hasOwnProperty(i))s=t[i];else{if(n>=1024){let r=0;for(const o in t)r++&3||(delete t[o],--n)}s=EC(i),t[i]=s,++n}return s}}();function Ha(e){return Array.isArray(e)?e:wC(e)}function EC(e){let t,n,i,s,r;if(xC.exec(e)&&(e=vC(e)),yC.exec(e)){const o=e.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(e.substr(1+0*a,a),16),n=parseInt(e.substr(1+1*a,a),16),i=parseInt(e.substr(1+2*a,a),16),l?s=parseInt(e.substr(1+3*a,a),16):s=255,a==1&&(t=(t<<4)+t,n=(n<<4)+n,i=(i<<4)+i,l&&(s=(s<<4)+s)),r=[t,n,i,s/255]}else if(e.startsWith("rgba("))r=e.slice(5,-1).split(",").map(Number),fg(r);else if(e.startsWith("rgb("))r=e.slice(4,-1).split(",").map(Number),r.push(1),fg(r);else throw new Error("Invalid color");return r}function fg(e){return e[0]=te(e[0]+.5|0,0,255),e[1]=te(e[1]+.5|0,0,255),e[2]=te(e[2]+.5|0,0,255),e[3]=te(e[3],0,1),e}function Yp(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let n=e[1];n!=(n|0)&&(n=n+.5|0);let i=e[2];i!=(i|0)&&(i=i+.5|0);const s=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+n+","+i+","+s+")"}class CC{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const n in this.cache_){const i=this.cache_[n];!(t++&3)&&!i.hasListener()&&(delete this.cache_[n],--this.cacheSize_)}}}get(t,n,i){const s=dg(t,n,i);return s in this.cache_?this.cache_[s]:null}set(t,n,i,s){const r=dg(t,n,i);this.cache_[r]=s,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function dg(e,t,n){const i=n?Vp(n):"null";return t+":"+e+":"+i}const Ba=new CC,Dt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class TC extends gn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const n=Object.assign({},t);typeof t.properties=="object"&&(delete n.properties,Object.assign(n,t.properties)),n[Dt.OPACITY]=t.opacity!==void 0?t.opacity:1,Tt(typeof n[Dt.OPACITY]=="number","Layer opacity must be a number"),n[Dt.VISIBLE]=t.visible!==void 0?t.visible:!0,n[Dt.Z_INDEX]=t.zIndex,n[Dt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[Dt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[Dt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[Dt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=te(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(t){return at()}getLayerStatesArray(t){return at()}getExtent(){return this.get(Dt.EXTENT)}getMaxResolution(){return this.get(Dt.MAX_RESOLUTION)}getMinResolution(){return this.get(Dt.MIN_RESOLUTION)}getMinZoom(){return this.get(Dt.MIN_ZOOM)}getMaxZoom(){return this.get(Dt.MAX_ZOOM)}getOpacity(){return this.get(Dt.OPACITY)}getSourceState(){return at()}getVisible(){return this.get(Dt.VISIBLE)}getZIndex(){return this.get(Dt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Dt.EXTENT,t)}setMaxResolution(t){this.set(Dt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Dt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Dt.MAX_ZOOM,t)}setMinZoom(t){this.set(Dt.MIN_ZOOM,t)}setOpacity(t){Tt(typeof t=="number","Layer opacity must be a number"),this.set(Dt.OPACITY,t)}setVisible(t){this.set(Dt.VISIBLE,t)}setZIndex(t){this.set(Dt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Hp=TC,Cn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Qt={ANIMATING:0,INTERACTING:1},je={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},SC=42,jh=256,rr={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class RC{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||rr[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Bp=RC,Po=6378137,Ws=Math.PI*Po,IC=[-Ws,-Ws,Ws,Ws],bC=[-180,-85,180,85],aa=Po*Math.log(Math.tan(Math.PI/2));class Is extends Bp{constructor(t){super({code:t,units:"m",extent:IC,global:!0,worldExtent:bC,getPointResolution:function(n,i){return n/Math.cosh(i[1]/Po)}})}}const gg=[new Is("EPSG:3857"),new Is("EPSG:102100"),new Is("EPSG:102113"),new Is("EPSG:900913"),new Is("http://www.opengis.net/def/crs/EPSG/0/3857"),new Is("http://www.opengis.net/gml/srs/epsg.xml#3857")];function MC(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let s=0;s<i;s+=n){t[s]=Ws*e[s]/180;let r=Po*Math.log(Math.tan(Math.PI*(+e[s+1]+90)/360));r>aa?r=aa:r<-aa&&(r=-aa),t[s+1]=r}return t}function AC(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let s=0;s<i;s+=n)t[s]=180*e[s]/Ws,t[s+1]=360*Math.atan(Math.exp(e[s+1]/Po))/Math.PI-90;return t}const OC=6378137,mg=[-180,-90,180,90],LC=Math.PI*OC/180;class Ni extends Bp{constructor(t,n){super({code:t,units:"degrees",extent:mg,axisOrientation:n,global:!0,metersPerUnit:LC,worldExtent:mg})}}const _g=[new Ni("CRS:84"),new Ni("EPSG:4326","neu"),new Ni("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ni("urn:ogc:def:crs:OGC:2:84"),new Ni("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ni("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ni("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Nu={};function FC(e){return Nu[e]||Nu[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function PC(e,t){Nu[e]=t}let Zs={};function Xa(e,t,n){const i=e.getCode(),s=t.getCode();i in Zs||(Zs[i]={}),Zs[i][s]=n}function DC(e,t){let n;return e in Zs&&t in Zs[e]&&(n=Zs[e][t]),n}function pg(e,t,n){const i=n!==void 0?e.toFixed(n):""+e;let s=i.indexOf(".");return s=s===-1?i.length:s,s>t?i:new Array(1+t-s).join("0")+i}function kC(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function yg(e,t,n){const i=as(t+180,360)-180,s=Math.abs(3600*i),r=n||0;let o=Math.floor(s/3600),a=Math.floor((s-o*3600)/60),l=Jl(s-o*3600-a*60,r);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"°";return(a!==0||l!==0)&&(c+=" "+pg(a,2)+"′"),l!==0&&(c+=" "+pg(l,2,r)+"″"),i!==0&&(c+=" "+e.charAt(i<0?1:0)),c}function Za(e,t){let n=!0;for(let i=e.length-1;i>=0;--i)if(e[i]!=t[i]){n=!1;break}return n}function Kh(e,t){const n=Math.cos(t),i=Math.sin(t),s=e[0]*n-e[1]*i,r=e[1]*n+e[0]*i;return e[0]=s,e[1]=r,e}function NC(e,t){return e[0]*=t,e[1]*=t,e}function Xp(e,t){return e?yg("NS",e[1],t)+" "+yg("EW",e[0],t):""}function Zp(e,t){if(t.canWrapX()){const n=Nt(t.getExtent()),i=GC(e,t,n);i&&(e[0]-=i*n)}return e}function GC(e,t,n){const i=t.getExtent();let s=0;return t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])&&(n=n||Nt(i),s=Math.floor((e[0]-i[0])/n)),s}const zC=63710088e-1;function xg(e,t,n){n=n||zC;const i=Oa(e[1]),s=Oa(t[1]),r=(s-i)/2,o=Oa(t[0]-e[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const jp={info:1,warn:2,error:3,none:4};let WC=jp.info;function Kp(...e){WC>jp.warn||console.warn(...e)}let Gu=!0;function UC(e){Gu=!(e===void 0?!0:e)}function qh(e,t){if(t!==void 0){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];t=t}else t=e.slice();return t}function qp(e,t){if(t!==void 0&&e!==t){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function $C(e){PC(e.getCode(),e),Xa(e,e,qh)}function VC(e){e.forEach($C)}function se(e){return typeof e=="string"?FC(e):e||null}function ja(e,t,n,i){e=se(e);let s;const r=e.getPointResolutionFunc();if(r){if(s=r(t,n),i&&i!==e.getUnits()){const o=e.getMetersPerUnit();o&&(s=s*o/rr[i])}}else{const o=e.getUnits();if(o=="degrees"&&!i||i=="degrees")s=t;else{const a=Qh(e,se("EPSG:4326"));if(a===qp&&o!=="degrees")s=t*e.getMetersPerUnit();else{let c=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];c=a(c,c,2);const u=xg(c.slice(0,2),c.slice(2,4)),h=xg(c.slice(4,6),c.slice(6,8));s=(u+h)/2}const l=i?rr[i]:e.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function vg(e){VC(e),e.forEach(function(t){e.forEach(function(n){t!==n&&Xa(t,n,qh)})})}function YC(e,t,n,i){e.forEach(function(s){t.forEach(function(r){Xa(s,r,n),Xa(r,s,i)})})}function Jh(e,t){return e?typeof e=="string"?se(e):e:se(t)}function Zi(e,t){if(e===t)return!0;const n=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||Qh(e,t)===qh)&&n}function Qh(e,t){const n=e.getCode(),i=t.getCode();let s=DC(n,i);return s||(s=qp),s}function Ka(e,t){const n=se(e),i=se(t);return Qh(n,i)}function HC(e,t,n){return Ka(t,n)(e,void 0,e.length)}function zu(e,t){return e}function Pn(e,t){return Gu&&!Za(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(Gu=!1,Kp("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function Jp(e,t){return e}function zn(e,t){return e}function BC(){vg(gg),vg(_g),YC(_g,gg,MC,AC)}BC();function wg(e,t,n){return function(i,s,r,o,a){if(!i)return;if(!s&&!t)return i;const l=t?0:r[0]*s,c=t?0:r[1]*s,u=a?a[0]:0,h=a?a[1]:0;let f=e[0]+l/2+u,d=e[2]-l/2+u,g=e[1]+c/2+h,m=e[3]-c/2+h;f>d&&(f=(d+f)/2,d=f),g>m&&(g=(m+g)/2,m=g);let p=te(i[0],f,d),y=te(i[1],g,m);if(o&&n&&s){const x=30*s;p+=-x*Math.log(1+Math.max(0,f-i[0])/x)+x*Math.log(1+Math.max(0,i[0]-d)/x),y+=-x*Math.log(1+Math.max(0,g-i[1])/x)+x*Math.log(1+Math.max(0,i[1]-m)/x)}return[p,y]}}function XC(e){return e}function tf(e,t,n,i){const s=Nt(t)/n[0],r=Ne(t)/n[1];return i?Math.min(e,Math.max(s,r)):Math.min(e,Math.min(s,r))}function ef(e,t,n){let i=Math.min(e,t);const s=50;return i*=Math.log(1+s*Math.max(0,e/t-1))/s+1,n&&(i=Math.max(i,n),i/=Math.log(1+s*Math.max(0,n/e-1))/s+1),te(i,n/2,t*2)}function ZC(e,t,n,i){return t=t!==void 0?t:!0,function(s,r,o,a){if(s!==void 0){const l=e[0],c=e[e.length-1],u=n?tf(l,n,o,i):l;if(a)return t?ef(s,u,c):te(s,c,u);const h=Math.min(u,s),f=Math.floor(Yh(e,h,r));return e[f]>u&&f<e.length-1?e[f+1]:e[f]}}}function jC(e,t,n,i,s,r){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,c){if(o!==void 0){const u=s?tf(t,s,l,r):t;if(c)return i?ef(o,u,n):te(o,n,u);const h=1e-9,f=Math.ceil(Math.log(t/u)/Math.log(e)-h),d=-a*(.5-h)+.5,g=Math.min(u,o),m=Math.floor(Math.log(t/g)/Math.log(e)+d),p=Math.max(f,m),y=t/Math.pow(e,p);return te(y,n,u)}}}function Eg(e,t,n,i,s){return n=n!==void 0?n:!0,function(r,o,a,l){if(r!==void 0){const c=i?tf(e,i,a,s):e;return!n||!l?te(r,t,c):ef(r,c,t)}}}function nf(e){if(e!==void 0)return 0}function Cg(e){if(e!==void 0)return e}function KC(e){const t=2*Math.PI/e;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/t+.5)*t,n}}function qC(e){return e=e||Oa(5),function(t,n){if(n)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}function Qp(e){return Math.pow(e,3)}function wr(e){return 1-Qp(1-e)}function JC(e){return 3*e*e-2*e*e*e}function QC(e){return e}function ls(e,t,n,i,s,r){r=r||[];let o=0;for(let a=t;a<n;a+=i){const l=e[a],c=e[a+1];r[o++]=s[0]*l+s[2]*c+s[4],r[o++]=s[1]*l+s[3]*c+s[5]}return r&&r.length!=o&&(r.length=o),r}function ty(e,t,n,i,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],u=r[1];let h=0;for(let f=t;f<n;f+=i){const d=e[f]-c,g=e[f+1]-u;o[h++]=c+d*a-g*l,o[h++]=u+d*l+g*a;for(let m=f+2;m<f+i;++m)o[h++]=e[m]}return o&&o.length!=h&&(o.length=h),o}function tT(e,t,n,i,s,r,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=t;h<n;h+=i){const f=e[h]-l,d=e[h+1]-c;a[u++]=l+s*f,a[u++]=c+r*d;for(let g=h+2;g<h+i;++g)a[u++]=e[g]}return a&&a.length!=u&&(a.length=u),a}function eT(e,t,n,i,s,r,o){o=o||[];let a=0;for(let l=t;l<n;l+=i){o[a++]=e[l]+s,o[a++]=e[l+1]+r;for(let c=l+2;c<l+i;++c)o[a++]=e[c]}return o&&o.length!=a&&(o.length=a),o}const Tg=un();class nT extends gn{constructor(){super(),this.extent_=Ze(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=jE(function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(n)})}simplifyTransformed(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)}clone(){return at()}closestPointXY(t,n,i,s){return at()}containsXY(t,n){const i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n}getClosestPoint(t,n){return n=n||[NaN,NaN],this.closestPointXY(t[0],t[1],n,1/0),n}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return at()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Fo(n),this.extentRevision_=this.getRevision()}return fC(this.extent_,t)}rotate(t,n){at()}scale(t,n,i){at()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return at()}getType(){return at()}applyTransform(t){at()}intersectsExtent(t){return at()}translate(t,n){at()}transform(t,n){const i=se(t),s=i.getUnits()=="tile-pixels"?function(r,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=Ne(c)/Ne(l);return fn(Tg,c[0],c[3],u,-u,0,0,0),ls(r,0,r.length,a,Tg,o),Ka(i,n)(r,o,a)}:Ka(i,n);return this.applyTransform(s),this}}const ey=nT;class iT extends ey{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return Gp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return at()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,n){this.stride=Sg(t),this.layout=t,this.flatCoordinates=n}setCoordinates(t,n){at()}setLayout(t,n,i){let s;if(t)s=Sg(t);else{for(let r=0;r<i;++r){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}s=n.length,t=sT(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,n){const i=this.getFlatCoordinates();if(i){const s=this.getStride();ty(i,0,i.length,s,t,n,i),this.changed()}}scale(t,n,i){n===void 0&&(n=t),i||(i=fs(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();tT(s,0,s.length,r,t,n,i,s),this.changed()}}translate(t,n){const i=this.getFlatCoordinates();if(i){const s=this.getStride();eT(i,0,i.length,s,t,n,i),this.changed()}}}function sT(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function Sg(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function rT(e,t,n){const i=e.getFlatCoordinates();if(!i)return null;const s=e.getStride();return ls(i,0,i.length,s,t,n)}const ys=iT;function Rg(e,t,n,i,s,r,o){const a=e[t],l=e[t+1],c=e[n]-a,u=e[n+1]-l;let h;if(c===0&&u===0)h=t;else{const f=((s-a)*c+(r-l)*u)/(c*c+u*u);if(f>1)h=n;else if(f>0){for(let d=0;d<i;++d)o[d]=Fe(e[t+d],e[n+d],f);o.length=i;return}else h=t}for(let f=0;f<i;++f)o[f]=e[h+f];o.length=i}function sf(e,t,n,i,s){let r=e[t],o=e[t+1];for(t+=i;t<n;t+=i){const a=e[t],l=e[t+1],c=os(r,o,a,l);c>s&&(s=c),r=a,o=l}return s}function rf(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];s=sf(e,t,a,i,s),t=a}return s}function oT(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];s=rf(e,t,a,i,s),t=a[a.length-1]}return s}function of(e,t,n,i,s,r,o,a,l,c,u){if(t==n)return c;let h,f;if(s===0){if(f=os(o,a,e[t],e[t+1]),f<c){for(h=0;h<i;++h)l[h]=e[t+h];return l.length=i,f}return c}u=u||[NaN,NaN];let d=t+i;for(;d<n;)if(Rg(e,d-i,d,i,o,a,u),f=os(o,a,u[0],u[1]),f<c){for(c=f,h=0;h<i;++h)l[h]=u[h];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(f)-Math.sqrt(c))/s|0,1);if(r&&(Rg(e,n-i,t,i,o,a,u),f=os(o,a,u[0],u[1]),f<c)){for(c=f,h=0;h<i;++h)l[h]=u[h];l.length=i}return c}function af(e,t,n,i,s,r,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const d=n[h];c=of(e,t,d,i,s,r,o,a,l,c,u),t=d}return c}function aT(e,t,n,i,s,r,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const d=n[h];c=af(e,t,d,i,s,r,o,a,l,c,u),t=d[d.length-1]}return c}function lT(e,t,n,i){for(let s=0,r=n.length;s<r;++s)e[t++]=n[s];return t}function Ql(e,t,n,i){for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0;a<i;++a)e[t++]=o[a]}return t}function lf(e,t,n,i,s){s=s||[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=Ql(e,t,n[o],i);s[r++]=l,t=l}return s.length=r,s}function cT(e,t,n,i,s){s=s||[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=lf(e,t,n[o],i,s[r]);l.length===0&&(l[0]=t),s[r++]=l,t=l[l.length-1]}return s.length=r,s}function cf(e,t,n,i,s,r,o){const a=(n-t)/i;if(a<3){for(;t<n;t+=i)r[o++]=e[t],r[o++]=e[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,n-i];let u=0;for(;c.length>0;){const h=c.pop(),f=c.pop();let d=0;const g=e[f],m=e[f+1],p=e[h],y=e[h+1];for(let x=f+i;x<h;x+=i){const E=e[x],v=e[x+1],S=_C(E,v,g,m,p,y);S>d&&(u=x,d=S)}d>s&&(l[(u-t)/i]=1,f+i<u&&c.push(f,u),u+i<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(r[o++]=e[t+h*i],r[o++]=e[t+h*i+1]);return o}function uT(e,t,n,i,s,r,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=cf(e,t,u,i,s,r,o),a.push(o),t=u}return o}function Vi(e,t){return t*Math.round(e/t)}function hT(e,t,n,i,s,r,o){if(t==n)return o;let a=Vi(e[t],s),l=Vi(e[t+1],s);t+=i,r[o++]=a,r[o++]=l;let c,u;do if(c=Vi(e[t],s),u=Vi(e[t+1],s),t+=i,t==n)return r[o++]=c,r[o++]=u,o;while(c==a&&u==l);for(;t<n;){const h=Vi(e[t],s),f=Vi(e[t+1],s);if(t+=i,h==c&&f==u)continue;const d=c-a,g=u-l,m=h-a,p=f-l;if(d*p==g*m&&(d<0&&m<d||d==m||d>0&&m>d)&&(g<0&&p<g||g==p||g>0&&p>g)){c=h,u=f;continue}r[o++]=c,r[o++]=u,a=c,l=u,c=h,u=f}return r[o++]=c,r[o++]=u,o}function ny(e,t,n,i,s,r,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=hT(e,t,u,i,s,r,o),a.push(o),t=u}return o}function fT(e,t,n,i,s,r,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],h=[];o=ny(e,t,u,i,s,r,o,h),a.push(h),t=u[u.length-1]}return o}function vi(e,t,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=t;o<n;o+=i)s[r++]=e.slice(o,o+i);return s.length=r,s}function po(e,t,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];s[r++]=vi(e,t,l,i,s[r]),t=l}return s.length=r,s}function Wu(e,t,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];s[r++]=l.length===1&&l[0]===t?[]:po(e,t,l,i,s[r]),t=l[l.length-1]}return s.length=r,s}function iy(e,t,n,i){let s=0,r=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];s+=o*a-r*l,r=a,o=l}return s/2}function sy(e,t,n,i){let s=0;for(let r=0,o=n.length;r<o;++r){const a=n[r];s+=iy(e,t,a,i),t=a}return s}function dT(e,t,n,i){let s=0;for(let r=0,o=n.length;r<o;++r){const a=n[r];s+=sy(e,t,a,i),t=a[a.length-1]}return s}class qa extends ys{constructor(t,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}clone(){return new qa(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,n,i,s){return s<_s(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),of(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,s))}getArea(){return iy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const n=[];return n.length=cf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new qa(n,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ql(this.flatCoordinates,0,t,this.stride),this.changed()}}const Ig=qa;class uf extends ys{constructor(t,n){super(),this.setCoordinates(t,n)}clone(){const t=new uf(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,s){const r=this.flatCoordinates,o=os(t,n,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)i[l]=r[l];return i.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return cC(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Zh(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lT(this.flatCoordinates,0,t,this.stride),this.changed()}}const or=uf;function gT(e,t,n,i,s){return!Up(s,function(o){return!qi(e,t,n,i,o[0],o[1])})}function qi(e,t,n,i,s,r){let o=0,a=e[n-i],l=e[n-i+1];for(;t<n;t+=i){const c=e[t],u=e[t+1];l<=r?u>r&&(c-a)*(r-l)-(s-a)*(u-l)>0&&o++:u<=r&&(c-a)*(r-l)-(s-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function hf(e,t,n,i,s,r){if(n.length===0||!qi(e,t,n[0],i,s,r))return!1;for(let o=1,a=n.length;o<a;++o)if(qi(e,n[o-1],n[o],i,s,r))return!1;return!0}function mT(e,t,n,i,s,r){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(hf(e,t,l,i,s,r))return!0;t=l[l.length-1]}return!1}function ry(e,t,n,i,s,r,o){let a,l,c,u,h,f,d;const g=s[r+1],m=[];for(let x=0,E=n.length;x<E;++x){const v=n[x];for(u=e[v-i],f=e[v-i+1],a=t;a<v;a+=i)h=e[a],d=e[a+1],(g<=f&&d<=g||f<=g&&g<=d)&&(c=(g-f)/(d-f)*(h-u)+u,m.push(c)),u=h,f=d}let p=NaN,y=-1/0;for(m.sort(Ii),u=m[0],a=1,l=m.length;a<l;++a){h=m[a];const x=Math.abs(h-u);x>y&&(c=(u+h)/2,hf(e,t,n,i,c,g)&&(p=c,y=x)),u=h}return isNaN(p)&&(p=s[r]),o?(o.push(p,g,y),o):[p,g,y]}function _T(e,t,n,i,s){let r=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];r=ry(e,t,l,i,s,2*o,r),t=l[l.length-1]}return r}function oy(e,t,n,i,s){let r;for(t+=i;t<n;t+=i)if(r=s(e.slice(t-i,t),e.slice(t,t+i)),r)return r;return!1}function tc(e,t,n,i,s){const r=Wp(Ze(),e,t,n,i);return ve(s,r)?xi(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:oy(e,t,n,i,function(o,a){return gC(s,o,a)}):!1}function pT(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r){if(tc(e,t,n[r],i,s))return!0;t=n[r]}return!1}function ay(e,t,n,i,s){return!!(tc(e,t,n,i,s)||qi(e,t,n,i,s[0],s[1])||qi(e,t,n,i,s[0],s[3])||qi(e,t,n,i,s[2],s[1])||qi(e,t,n,i,s[2],s[3]))}function ly(e,t,n,i,s){if(!ay(e,t,n[0],i,s))return!1;if(n.length===1)return!0;for(let r=1,o=n.length;r<o;++r)if(gT(e,n[r-1],n[r],i,s)&&!tc(e,n[r-1],n[r],i,s))return!1;return!0}function yT(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];if(ly(e,t,a,i,s))return!0;t=a[a.length-1]}return!1}function xT(e,t,n,i){for(;t<n-i;){for(let s=0;s<i;++s){const r=e[t+s];e[t+s]=e[n-i+s],e[n-i+s]=r}t+=i,n-=i}}function cy(e,t,n,i){let s=0,r=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function uy(e,t,n,i,s){s=s!==void 0?s:!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],l=cy(e,t,a,i);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=a}return!0}function vT(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];if(!uy(e,t,a,i,s))return!1;a.length&&(t=a[a.length-1])}return!0}function Uu(e,t,n,i,s){s=s!==void 0?s:!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],l=cy(e,t,a,i);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&xT(e,t,a,i),t=a}return t}function bg(e,t,n,i,s){for(let r=0,o=n.length;r<o;++r)t=Uu(e,t,n[r],i,s);return t}class yo extends ys{constructor(t,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,t),this.ends_=i):this.setCoordinates(t,n)}appendLinearRing(t){this.flatCoordinates?Yn(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new yo(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,s){return s<_s(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(rf(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),af(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,s))}containsXY(t,n){return hf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)}getArea(){return sy(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Uu(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,po(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=fs(this.getExtent());this.flatInteriorPoint_=ry(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new or(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Ig(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,n=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new Ig(n.slice(r,l),t);s.push(c),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;uy(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Uu(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=ny(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new yo(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return ly(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=lf(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const Ja=yo;function $u(e){if(vr(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],n=e[1],i=e[2],s=e[3],r=[t,n,t,s,i,s,i,n,t,n];return new yo(r,"XY",[r.length])}const Nc=0;class wT extends gn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Jh(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&UC(),t.center&&(t.center=Pn(t.center,this.projection_)),t.extent&&(t.extent=zn(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const n=Object.assign({},t);for(const a in je)delete n[a];this.setProperties(n,!0);const i=CT(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const s=ET(t),r=i.constraint,o=TT(t);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let n=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const s=t||[0,0,0,0];n=n||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-n[3]+n[1]-s[1]),a=r/2*(s[0]-n[0]+n[2]-s[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=Pn(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=Pn(s.anchor,this.getProjection())),n[i]=s}this.animateInternal.apply(this,n)}animateInternal(t){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let s=0;for(;s<n&&!this.isDef();++s){const u=arguments[s];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(s===n){i&&la(i,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;s<n;++s){const u=arguments[s],h={start:r,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||JC,callback:i};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const f=as(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+f,l=h.targetRotation}ST(h)?h.complete=!0:r+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(Qt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Qt.ANIMATING]>0}getInteracting(){return this.hints_[Qt.INTERACTING]>0}cancelAnimations(){this.setHint(Qt.ANIMATING,-this.hints_[Qt.ANIMATING]);let t;for(let n=0,i=this.animations_.length;n<i;++n){const s=this.animations_[n];if(s[0].callback&&la(s[0].callback,!1),!t)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const c=t-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):r=!1;const h=l.easing(u);if(l.sourceCenter){const f=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const p=f+h*(g-f),y=d+h*(m-d);this.targetCenter_=[p,y]}if(l.sourceResolution&&l.targetResolution){const f=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(f,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=h===1?as(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(r){this.animations_[i]=null,this.setHint(Qt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&la(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,n){let i;const s=this.getCenterInternal();return s!==void 0&&(i=[s[0]-n[0],s[1]-n[1]],Kh(i,t-this.getRotation()),kC(i,n)),i}calculateCenterZoom(t,n){let i;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=n[0]-t*(n[0]-s[0])/r,a=n[1]-t*(n[1]-s[1])/r;i=[o,a]}return i}getViewportSize_(t){const n=this.viewportSize_;if(t){const i=n[0],s=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(s*Math.cos(t))]}return n}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&zu(t,this.getProjection())}getCenterInternal(){return this.get(je.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const n=this.calculateExtentInternal(t);return Jp(n,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();Tt(n,"The view center is not defined");const i=this.getResolution();Tt(i!==void 0,"The view resolution is not defined");const s=this.getRotation();return Tt(s!==void 0,"The view rotation is not defined"),Du(n,i,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(je.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,n){return this.getResolutionForExtentInternal(zn(t,this.getProjection()),n)}getResolutionForExtentInternal(t,n){n=n||this.getViewportSizeMinusPadding_();const i=Nt(t)/n[0],s=Ne(t)/n[1];return Math.max(i,s)}getResolutionForValueFunction(t){t=t||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(n/i)/Math.log(t);return function(r){return n/Math.pow(t,r*s)}}getRotation(){return this.get(je.ROTATION)}getValueForResolutionFunction(t){const n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(i/s)/n;return function(o){return Math.log(i/o)/n/r}}getViewportSizeMinusPadding_(t){let n=this.getViewportSize_(t);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const t=this.getProjection(),n=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=Gc(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],n,i)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t}getZoomForResolution(t){let n=this.minZoom_||0,i,s;if(this.resolutions_){const r=Yh(this.resolutions_,t,1);n=r,i=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=i/this.resolutions_[r+1]}else i=this.maxResolution_,s=this.zoomFactor_;return n+Math.log(i/t)/Math.log(s)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=te(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,te(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,n){let i;if(Tt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Tt(!vr(t),"Cannot fit empty extent provided as `geometry`");const s=zn(t,this.getProjection());i=$u(s)}else if(t.getType()==="Circle"){const s=zn(t.getExtent(),this.getProjection());i=$u(s),i.rotate(this.getRotation(),fs(s))}else i=t;this.fitInternal(i,n)}rotatedExtentForGeometry(t){const n=this.getRotation(),i=Math.cos(n),s=Math.sin(-n),r=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,f=r.length;h<f;h+=o){const d=r[h]*i-r[h+1]*s,g=r[h]*s+r[h+1]*i;a=Math.min(a,d),l=Math.min(l,g),c=Math.max(c,d),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(t,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const s=n.padding!==void 0?n.padding:[0,0,0,0],r=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),f=fs(a);f[0]+=(s[1]-s[3])/2*l,f[1]+=(s[0]-s[2])/2*l;const d=f[0]*h-f[1]*u,g=f[1]*h+f[0]*u,m=this.getConstrainedCenter([d,g],l),p=n.callback?n.callback:ir;n.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:n.duration,easing:n.easing},p):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),la(p,!0))}centerOn(t,n,i){this.centerOnInternal(Pn(t,this.getProjection()),n,i)}centerOnInternal(t,n,i){this.setCenterInternal(Gc(t,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,n,i,s){let r;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),l=Gc(t,s,[a[0]/2+o[3],a[1]/2+o[0]],n,i);r=[t[0]-l[0],t[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const n=zu(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])}adjustCenterInternal(t){const n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])}adjustResolution(t,n){n=n&&Pn(n,this.getProjection()),this.adjustResolutionInternal(t,n)}adjustResolutionInternal(t,n){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,i);n&&(this.targetCenter_=this.calculateCenterZoom(r,n)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)}adjustRotation(t,n){n&&(n=Pn(n,this.getProjection())),this.adjustRotationInternal(t,n)}adjustRotationInternal(t,n){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(s,n)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Pn(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,n){const i=this.getAnimating()||this.getInteracting()||n,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(je.ROTATION)!==s&&this.set(je.ROTATION,s),this.get(je.RESOLUTION)!==o&&(this.set(je.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(je.CENTER)||!Za(this.get(je.CENTER),a))&&this.set(je.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,n,i){t=t!==void 0?t:200;const s=n||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!Za(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:t,easing:wr,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Qt.INTERACTING,1)}endInteraction(t,n,i){i=i&&Pn(i,this.getProjection()),this.endInteractionInternal(t,n,i)}endInteractionInternal(t,n,i){this.getInteracting()&&(this.setHint(Qt.INTERACTING,-1),this.resolveConstraints(t,n,i))}getConstrainedCenter(t,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)}getConstrainedZoom(t,n){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(t,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)}}function la(e,t){setTimeout(function(){e(t)},0)}function ET(e){if(e.extent!==void 0){const n=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return wg(e.extent,e.constrainOnlyCenter,n)}const t=Jh(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,wg(n,!1,!1)}return XC}function CT(e){let t,n,i,o=e.minZoom!==void 0?e.minZoom:Nc,a=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,c=e.multiWorld!==void 0?e.multiWorld:!1,u=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,h=e.showFullExtent!==void 0?e.showFullExtent:!1,f=Jh(e.projection,"EPSG:3857"),d=f.getExtent();let g=e.constrainOnlyCenter,m=e.extent;if(!c&&!m&&f.isGlobal()&&(g=!1,m=d),e.resolutions!==void 0){const p=e.resolutions;n=p[o],i=p[a]!==void 0?p[a]:p[p.length-1],e.constrainResolution?t=ZC(p,u,!g&&m,h):t=Eg(n,i,u,!g&&m,h)}else{const y=(d?Math.max(Nt(d),Ne(d)):360*rr.degrees/f.getMetersPerUnit())/jh/Math.pow(2,Nc),x=y/Math.pow(2,28-Nc);n=e.maxResolution,n!==void 0?o=0:n=y/Math.pow(l,o),i=e.minResolution,i===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?i=n/Math.pow(l,a):i=y/Math.pow(l,a):i=x),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),e.constrainResolution?t=jC(l,n,i,u,!g&&m,h):t=Eg(n,i,u,!g&&m,h)}return{constraint:t,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function TT(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const n=e.constrainRotation;return n===void 0||n===!0?qC():n===!1?Cg:typeof n=="number"?KC(n):Cg}return nf}function ST(e){return!(e.sourceCenter&&e.targetCenter&&!Za(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function Gc(e,t,n,i,s){const r=Math.cos(-s);let o=Math.sin(-s),a=e[0]*r-e[1]*o,l=e[1]*r+e[0]*o;a+=(t[0]/2-n[0])*i,l+=(n[1]-t[1]/2)*i,o=-o;const c=a*r-l*o,u=l*r+a*o;return[c,u]}const xn=wT;class RT extends Hp{constructor(t){const n=Object.assign({},t);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Dt.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Dt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ut(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=vt(t,ct.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let n;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof xn?n={viewState:t.getState(),extent:t.calculateExtent()}:n=t,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let s;n.layerStatesArray?s=n.layerStatesArray.find(o=>o.layer===this):s=this.getLayerState();const r=this.getExtent();return ff(s,n.viewState)&&(!r||ve(r,n.extent))}getAttributions(t){if(!this.isVisible(t))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const s=t instanceof xn?t.getViewStateAndExtent():t;let r=n(s);return Array.isArray(r)||(r=[r]),r}render(t,n){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,n)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(Dt.MAP,t)}getMapInternal(){return this.get(Dt.MAP)}setMap(t){this.mapPrecomposeKey_&&(Ut(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Ut(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=vt(t,Cn.PRECOMPOSE,function(n){const s=n.frameState.layerStatesArray,r=this.getLayerState(!1);Tt(!s.some(function(o){return o.layer===r.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),s.push(r)},this),this.mapRenderKey_=vt(this,ct.CHANGE,t.render,t),this.changed())}setSource(t){this.set(Dt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function ff(e,t){if(!e.visible)return!1;const n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;const i=t.zoom;return i>e.minZoom&&i<=e.maxZoom}const ec=RT;class IT extends Vh{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,n){at()}calculateMatrices2D(t){const n=t.viewState,i=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;fn(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),Zl(s,i)}forEachFeatureAtCoordinate(t,n,i,s,r,o,a,l){let c;const u=n.viewState;function h(v,S,T,b){return r.call(o,S,v?T:null,b)}const f=u.projection,d=Zp(t.slice(),f),g=[[0,0]];if(f.canWrapX()&&s){const v=f.getExtent(),S=Nt(v);g.push([-S,0],[S,0])}const m=n.layerStatesArray,p=m.length,y=[],x=[];for(let v=0;v<g.length;v++)for(let S=p-1;S>=0;--S){const T=m[S],b=T.layer;if(b.hasRenderer()&&ff(T,u)&&a.call(l,b)){const R=b.getRenderer(),U=b.getSource();if(R&&U){const A=U.getWrapX()?d:t,D=h.bind(null,T.managed);x[0]=A[0]+g[v][0],x[1]=A[1]+g[v][1],c=R.forEachFeatureAtCoordinate(x,n,i,D,y)}if(c)return c}}if(y.length===0)return;const E=1/y.length;return y.forEach((v,S)=>v.distanceSq+=S*E),y.sort((v,S)=>v.distanceSq-S.distanceSq),y.some(v=>c=v.callback(v.feature,v.layer,v.geometry)),c}hasFeatureAtCoordinate(t,n,i,s,r,o){return this.forEachFeatureAtCoordinate(t,n,i,s,mo,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(t){at()}flushDeclutterItems(t){}scheduleExpireIconCache(t){Ba.canExpireCache()&&t.postRenderFunctions.push(bT)}}function bT(e,t){Ba.expire()}const MT=IT;class AT extends ei{constructor(t,n,i,s){super(t),this.inversePixelTransform=n,this.frameState=i,this.context=s}}const hy=AT,ca="ol-hidden",OT="ol-selectable",xs="ol-unselectable",Mg="ol-unsupported",Do="ol-control",Ag="ol-collapsed",LT=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Og=["style","variant","weight","size","lineHeight","family"],fy=function(e){const t=e.match(LT);if(!t)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=Og.length;i<s;++i){const r=t[i+1];r!==void 0&&(n[Og[i]]=r)}return n.families=n.family.split(/,\s?/),n};function Ee(e,t,n,i){let s;return n&&n.length?s=n.shift():Hh?s=new OffscreenCanvas(e||300,t||300):s=document.createElement("canvas"),e&&(s.width=e),t&&(s.height=t),s.getContext("2d",i)}function nc(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function FT(e){let t=e.offsetWidth;const n=getComputedStyle(e);return t+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),t}function PT(e){let t=e.offsetHeight;const n=getComputedStyle(e);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),t}function Qa(e,t){const n=t.parentNode;n&&n.replaceChild(e,t)}function tl(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function dy(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function DT(e,t){const n=e.childNodes;for(let i=0;;++i){const s=n[i],r=t[i];if(!s&&!r)break;if(s!==r){if(!s){e.appendChild(r);continue}if(!r){e.removeChild(s),--i;continue}e.insertBefore(r,s)}}}const gy="10px sans-serif",Re="#000",ar="round",Hn=[],Bn=0,lr="round",xo=10,vo="#000",wo="center",el="middle",Ji=[0,0,0,0],Eo=1,Dn=new gn;let ks=null,Vu;const Yu={},kT=function(){const t="32px ",n=["monospace","serif"],i=n.length,s="wmytzilWMYTZIL@#/&?$%10";let r,o;function a(c,u,h){let f=!0;for(let d=0;d<i;++d){const g=n[d];if(o=nl(c+" "+u+" "+t+g,s),h!=g){const m=nl(c+" "+u+" "+t+h+","+g,s);f=f&&m!=o}}return!!f}function l(){let c=!0;const u=Dn.getKeys();for(let h=0,f=u.length;h<f;++h){const d=u[h];Dn.get(d)<100&&(a.apply(this,d.split(`
`))?(Ao(Yu),ks=null,Vu=void 0,Dn.set(d,100)):(Dn.set(d,Dn.get(d)+1,!0),c=!1))}c&&(clearInterval(r),r=void 0)}return function(c){const u=fy(c);if(!u)return;const h=u.families;for(let f=0,d=h.length;f<d;++f){const g=h[f],m=u.style+`
`+u.weight+`
`+g;Dn.get(m)===void 0&&(Dn.set(m,100,!0),a(u.style,u.weight,g)||(Dn.set(m,0,!0),r===void 0&&(r=setInterval(l,32))))}}}(),NT=function(){let e;return function(t){let n=Yu[t];if(n==null){if(Hh){const i=fy(t),s=my(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),n=e.offsetHeight,document.body.removeChild(e);Yu[t]=n}return n}}();function my(e,t){return ks||(ks=Ee(1,1)),e!=Vu&&(ks.font=e,Vu=ks.font),ks.measureText(t)}function nl(e,t){return my(e,t).width}function Lg(e,t,n){if(t in n)return n[t];const i=t.split(`
`).reduce((s,r)=>Math.max(s,nl(e,r)),0);return n[t]=i,i}function GT(e,t){const n=[],i=[],s=[];let r=0,o=0,a=0,l=0;for(let c=0,u=t.length;c<=u;c+=2){const h=t[c];if(h===`
`||c===u){r=Math.max(r,o),s.push(o),o=0,a+=l;continue}const f=t[c+1]||e.font,d=nl(f,h);n.push(d),o+=d;const g=NT(f);i.push(g),l=Math.max(l,g)}return{width:r,height:a,widths:n,heights:i,lineWidths:s}}function zT(e,t,n,i,s,r,o,a,l,c,u){e.save(),n!==1&&(e.globalAlpha*=n),t&&e.transform.apply(e,t),i.contextInstructions?(e.translate(l,c),e.scale(u[0],u[1]),WT(i,e)):u[0]<0||u[1]<0?(e.translate(l,c),e.scale(u[0],u[1]),e.drawImage(i,s,r,o,a,0,0,o,a)):e.drawImage(i,s,r,o,a,l,c,o*u[0],a*u[1]),e.restore()}function WT(e,t){const n=e.contextInstructions;for(let i=0,s=n.length;i<s;i+=2)Array.isArray(n[i+1])?t[n[i]].apply(t,n[i+1]):t[n[i]]=n[i+1]}class UT extends MT{constructor(t){super(t),this.fontChangeListenerKey_=vt(Dn,nr.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=xs+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,n){const i=this.getMap();if(i.hasListener(t)){const s=new hy(t,void 0,n);i.dispatchEvent(s)}}disposeInternal(){Ut(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Cn.PRECOMPOSE,t);const n=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;const s=this.declutterLayers_;s.length=0;let r=null;for(let o=0,a=n.length;o<a;++o){const l=n[o];t.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!ff(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const h=c.render(t,r);h&&(h!==r&&(this.children_.push(h),r=h),"getDeclutter"in c&&s.push(c))}this.flushDeclutterItems(t),DT(this.element_,this.children_),this.dispatchRenderEvent(Cn.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const n=this.declutterLayers_;for(let i=n.length-1;i>=0;--i)n[i].renderDeclutter(t);n.length=0}}const $T=UT;class mi extends ei{constructor(t,n){super(t),this.layer=n}}const zc={LAYERS:"layers"};class df extends Hp{constructor(t){t=t||{};const n=Object.assign({},t);delete n.layers;let i=t.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(zc.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new wn(i.slice(),{unique:!0}):Tt(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new wn(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ut),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(vt(t,Se.ADD,this.handleLayersAdd_,this),vt(t,Se.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ut);Ao(this.listenerKeys_);const n=t.getArray();for(let i=0,s=n.length;i<s;i++){const r=n[i];this.registerLayerListeners_(r),this.dispatchEvent(new mi("addlayer",r))}this.changed()}registerLayerListeners_(t){const n=[vt(t,nr.PROPERTYCHANGE,this.handleLayerChange_,this),vt(t,ct.CHANGE,this.handleLayerChange_,this)];t instanceof df&&n.push(vt(t,"addlayer",this.handleLayerGroupAdd_,this),vt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Lt(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new mi("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new mi("removelayer",t.layer))}handleLayersAdd_(t){const n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new mi("addlayer",n)),this.changed()}handleLayersRemove_(t){const n=t.element,i=Lt(n);this.listenerKeys_[i].forEach(Ut),delete this.listenerKeys_[i],this.dispatchEvent(new mi("removelayer",n)),this.changed()}getLayers(){return this.get(zc.LAYERS)}setLayers(t){const n=this.getLayers();if(n){const i=n.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new mi("removelayer",i[s]))}this.set(zc.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(n){n.getLayersArray(t)}),t}getLayerStatesArray(t){const n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const s=this.getLayerState();let r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=Xs(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return n}getSourceState(){return"ready"}}const ic=df;class VT extends ei{constructor(t,n,i){super(t),this.map=n,this.frameState=i!==void 0?i:null}}const Ns=VT;class YT extends Ns{constructor(t,n,i,s,r,o){super(t,n,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const fi=YT,jt={SINGLECLICK:"singleclick",CLICK:ct.CLICK,DBLCLICK:ct.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Hu={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class HT extends Oo{constructor(t,n){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=vt(i,Hu.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=vt(i,Hu.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ct.TOUCHMOVE,this.boundHandleTouchMove_,kp?{passive:!1}:!1)}emulateClick_(t){let n=new fi(jt.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new fi(jt.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new fi(jt.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const n=t,i=n.pointerId;if(n.type==jt.POINTERUP||n.type==jt.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==n.target){delete this.trackedTouches_[s];break}}else(n.type==jt.POINTERDOWN||n.type==jt.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const n=new fi(jt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ut),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const n=new fi(jt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(vt(i,jt.POINTERMOVE,this.handlePointerMove_,this),vt(i,jt.POINTERUP,this.handlePointerUp_,this),vt(this.element_,jt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(vt(this.element_.getRootNode(),jt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const n=new fi(jt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new fi(jt.POINTERMOVE,this.map_,t,n))}handleTouchMove_(t){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ut(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ct.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ut(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ut),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const BT=HT,Nn={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ae={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},il=1/0;class XT{constructor(t,n){this.priorityFunction_=t,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ao(this.queuedElements_)}dequeue(){const t=this.elements_,n=this.priorities_,i=t[0];t.length==1?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(t){Tt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(t);return n!=il?(this.elements_.push(t),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const n=this.elements_,i=this.priorities_,s=n.length,r=n[t],o=i[t],a=t;for(;t<s>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),u=c<s&&i[c]<i[l]?c:l;n[t]=n[u],i[t]=i[u],t=u}n[t]=r,i[t]=o,this.siftDown_(a,t)}siftDown_(t,n){const i=this.elements_,s=this.priorities_,r=i[n],o=s[n];for(;n>t;){const a=this.getParentIndex_(n);if(s[a]>o)i[n]=i[a],s[n]=s[a],n=a;else break}i[n]=r,s[n]=o}reprioritize(){const t=this.priorityFunction_,n=this.elements_,i=this.priorities_;let s=0;const r=n.length;let o,a,l;for(a=0;a<r;++a)o=n[a],l=t(o),l==il?delete this.queuedElements_[this.keyFunction_(o)]:(i[s]=l,n[s++]=o);n.length=s,i.length=s,this.heapify_()}}const ZT=XT,st={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class jT extends ZT{constructor(t,n){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const n=super.enqueue(t);return n&&t[0].addEventListener(ct.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const n=t.target,i=n.getState();if(i===st.LOADED||i===st.ERROR||i===st.EMPTY){i!==st.ERROR&&n.removeEventListener(ct.CHANGE,this.boundHandleTileChange_);const s=n.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,n){let i=0,s,r,o;for(;this.tilesLoading_<t&&i<n&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===st.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}const KT=jT;function qT(e,t,n,i,s){if(!e||!(n in e.wantedTiles)||!e.wantedTiles[n][t.getKey()])return il;const r=e.viewState.center,o=i[0]-r[0],a=i[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class JT extends gn{constructor(t){super();const n=t.element;n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){tl(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&tl(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)Ut(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==ir&&this.listenerKeys.push(vt(t,Nn.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Er=JT;class QT extends Er{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:n+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"›",o=t.collapseClassName!==void 0?t.collapseClassName:n+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(ct.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+xs+" "+Do+(this.collapsed_&&this.collapsible_?" "+Ag:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(t)))),i=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Ai(n,this.renderedAttributions_)){dy(this.ulElement_);for(let s=0,r=n.length;s<r;++s){const o=document.createElement("li");o.innerHTML=n[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Ag),this.collapsed_?Qa(this.collapseLabel_,this.label_):Qa(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const tS=QT;class eS extends Er{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const n=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"⇧",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(ct.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+xs+" "+Do,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ca)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:wr}):n.setRotation(0))}render(t){const n=t.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(ca);!r&&i===0?this.element.classList.add(ca):r&&i!==0&&this.element.classList.remove(ca)}this.label_.style.transform=s}this.rotation_=i}}const nS=eS;class iS extends Er{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const n=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:n+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:n+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(ct.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(ct.CLICK,this.handleClick_.bind(this,-i),!1);const f=n+" "+xs+" "+Do,d=this.element;d.className=f,d.appendChild(u),d.appendChild(h),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,n){n.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(s!==void 0){const r=i.getConstrainedZoom(s+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:wr})):i.setZoom(r)}}}const sS=iS;function _y(e){e=e||{};const t=new wn;return(e.zoom!==void 0?e.zoom:!0)&&t.push(new sS(e.zoomOptions)),(e.rotate!==void 0?e.rotate:!0)&&t.push(new nS(e.rotateOptions)),(e.attribution!==void 0?e.attribution:!0)&&t.push(new tS(e.attributionOptions)),t}const Fg={ACTIVE:"active"};class rS extends gn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Fg.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Fg.ACTIVE,t)}setMap(t){this.map_=t}}function oS(e,t,n){const i=e.getCenterInternal();if(i){const s=[i[0]+t[0],i[1]+t[1]];e.animateInternal({duration:n!==void 0?n:250,easing:QC,center:e.getConstrainedCenter(s)})}}function gf(e,t,n,i){const s=e.getZoom();if(s===void 0)return;const r=e.getConstrainedZoom(s+t),o=e.getResolutionForZoom(r);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:wr})}const ko=rS;class aS extends ko{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let n=!1;if(t.type==jt.DBLCLICK){const i=t.originalEvent,s=t.map,r=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=s.getView();gf(a,o,r,this.duration_),i.preventDefault(),n=!0}return!n}}const lS=aS;class cS extends ko{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==jt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==jt.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==jt.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,n=this.stopDown(i)}else t.type==jt.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function mf(e){const t=e.length;let n=0,i=0;for(let s=0;s<t;s++)n+=e[s].clientX,i+=e[s].clientY;return{clientX:n/t,clientY:i/t}}const No=cS;function Bu(e){const t=arguments;return function(n){let i=!0;for(let s=0,r=t.length;s<r&&(i=i&&t[s](n),!!i);++s);return i}}const uS=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},hS=function(e){const t=e.map.getTargetElement(),n=e.map.getOwnerDocument().activeElement;return t.contains(n)},py=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?hS(e):!0},fS=mo,yy=function(e){const t=e.originalEvent;return t.button==0&&!(sC&&Fp&&t.ctrlKey)},xy=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},dS=function(e){const t=e.originalEvent;return Fp?t.metaKey:t.ctrlKey},gS=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},vy=function(e){const t=e.originalEvent,n=t.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!t.target.isContentEditable},Wc=function(e){const t=e.originalEvent;return Tt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},mS=function(e){const t=e.originalEvent;return Tt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class _S extends No{constructor(t){super({stopDown:Bl}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=t.condition?t.condition:Bu(xy,mS);this.condition_=t.onFocusOnly?Bu(py,n):n,this.noKinetic_=!1}handleDragEvent(t){const n=t.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,s=n.getEventPixel(mf(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=t.map.getView();NC(r,a.getResolution()),Kh(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:wr})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const pS=_S;class yS extends No{constructor(t){t=t||{},super({stopDown:Bl}),this.condition_=t.condition?t.condition:uS,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Wc(t))return;const n=t.map,i=n.getView();if(i.getConstraints().rotation===nf)return;const s=n.getSize(),r=t.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return Wc(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Wc(t)&&yy(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const xS=yS;class vS extends Vh{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,n=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(t[0],n[0])+i,s.top=Math.min(t[1],n[1])+i,s.width=Math.abs(n[0]-t[0])+i,s.height=Math.abs(n[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,n=this.endPixel_,s=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Ja([s])}getGeometry(){return this.geometry_}}const wS=vS,ua={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Uc extends ei{constructor(t,n,i){super(t),this.coordinate=n,this.mapBrowserEvent=i}}class ES extends No{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new wS(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:yy,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,n,i){const s=i[0]-n[0],r=i[1]-n[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Uc(ua.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new Uc(n?ua.BOXEND:ua.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Uc(ua.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const CS=ES;class TS extends CS{constructor(t){t=t||{};const n=t.condition?t.condition:gS;super({condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(s),o=i.getResolutionForExtentInternal(r),a=i.getResolution()/o;s=s.clone(),s.scale(a*a)}i.fitInternal(s,{duration:this.duration_,easing:wr})}}const SS=TS,Gi={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class RS extends ko{constructor(t){super(),t=t||{},this.defaultCondition_=function(n){return xy(n)&&vy(n)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let n=!1;if(t.type==ct.KEYDOWN){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==Gi.DOWN||s==Gi.LEFT||s==Gi.RIGHT||s==Gi.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;s==Gi.DOWN?c=-a:s==Gi.LEFT?l=-a:s==Gi.RIGHT?l=a:c=a;const u=[l,c];Kh(u,o.getRotation()),oS(o,u,this.duration_),i.preventDefault(),n=!0}}return!n}}const IS=RS;class bS extends ko{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(n){return!dS(n)&&vy(n)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let n=!1;if(t.type==ct.KEYDOWN||t.type==ct.KEYPRESS){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==="+"||s==="-")){const r=t.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();gf(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}const MS=bS;class AS{constructor(t,n,i){this.decay_=t,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,n){this.points_.push(t,n,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<t)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const s=this.points_[n+2]-this.points_[i+2];if(s<1e3/60)return!1;const r=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const OS=AS;class LS extends ko{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const n=t.condition?t.condition:fS;this.condition_=t.onFocusOnly?Bu(py,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==ct.WHEEL)return!0;const i=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let r;if(t.type==ct.WHEEL&&(r=s.deltaY,nC&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=Pp),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const n=t.getView();n.getAnimating()&&n.cancelAnimations();let i=-te(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),gf(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const FS=LS;class PS extends No{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=Bl),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let n=0;const i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=r;const o=t.map,a=o.getView();a.getConstraints().rotation!==nf&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(mf(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const DS=PS;class kS extends No{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=Bl),super(n),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let n=1;const i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,o=i.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(mf(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const NS=kS;function GS(e){e=e||{};const t=new wn,n=new OS(-.005,.05,100);return(e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0)&&t.push(new xS),(e.doubleClickZoom!==void 0?e.doubleClickZoom:!0)&&t.push(new lS({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan!==void 0?e.dragPan:!0)&&t.push(new pS({onFocusOnly:e.onFocusOnly,kinetic:n})),(e.pinchRotate!==void 0?e.pinchRotate:!0)&&t.push(new DS),(e.pinchZoom!==void 0?e.pinchZoom:!0)&&t.push(new NS({duration:e.zoomDuration})),(e.keyboard!==void 0?e.keyboard:!0)&&(t.push(new IS),t.push(new MS({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0)&&t.push(new FS({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom!==void 0?e.shiftDragZoom:!0)&&t.push(new SS({duration:e.zoomDuration})),t}function Pg(e){return e[0]>0&&e[1]>0}function zS(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]*t+.5|0,n[1]=e[1]*t+.5|0,n}function De(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}function wy(e){if(e instanceof ec){e.setMapInternal(null);return}e instanceof ic&&e.getLayers().forEach(wy)}function Ey(e,t){if(e instanceof ec){e.setMapInternal(t);return}if(e instanceof ic){const n=e.getLayers().getArray();for(let i=0,s=n.length;i<s;++i)Ey(n[i],t)}}let WS=class extends gn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const n=US(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:Pp,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=un(),this.pixelToCoordinateTransform_=un(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||_y(),this.interactions=n.interactions||GS({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new KT(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ae.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ae.VIEW,this.handleViewChanged_),this.addChangeListener(ae.SIZE,this.handleSizeChanged_),this.addChangeListener(ae.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;t.view&&!(t.view instanceof xn)&&t.view.then(function(s){i.setView(new xn(s))}),this.controls.addEventListener(Se.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(Se.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(Se.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(Se.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(Se.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(Se.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Ey(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,n,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const r=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:mo,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,n,null,o,null)}getFeaturesAtPixel(t,n){const i=[];return this.forEachFeatureAtPixel(t,function(s){i.push(s)},n),i}getAllLayers(){const t=[];function n(i){i.forEach(function(s){s instanceof ic?n(s.getLayers()):t.push(s)})}return n(this.getLayers()),t}hasFeatureAtPixel(t,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const s=n.layerFilter!==void 0?n.layerFilter:mo,r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=i.width/s[0],o=i.height/s[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-i.left)/r,(a.clientY-i.top)/o]}getTarget(){return this.get(ae.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return zu(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const n=this.frameState_;return n?Kt(n.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ae.LAYERGROUP)}setLayers(t){const n=this.getLayerGroup();if(t instanceof wn){n.setLayers(t);return}const i=n.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const s=t[n];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const n=Pn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(t){const n=this.frameState_;return n?Kt(n.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ae.SIZE)}getView(){return this.get(ae.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,n,i,s){return qT(this.frameState_,t,n,i,s)}handleBrowserEvent(t,n){n=n||t.type;const i=new fi(n,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const n=t.originalEvent,i=n.type;if(i===Hu.POINTERDOWN||i===ct.WHEEL||i===ct.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=n.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){const o=t.viewHints;if(o[Qt.ANIMATING]||o[Qt.INTERACTING]){const a=Date.now()-t.time>8;s=a?0:8,r=a?0:2}}n.getTilesLoading()<s&&(n.reprioritize(),n.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Cn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Cn.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Ns(Nn.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Ns(Nn.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)Ut(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ct.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ct.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,tl(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),n=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new $T(this)),this.mapBrowserEventHandler_=new BT(this,this.moveTolerance_);for(const r in jt)this.mapBrowserEventHandler_.addEventListener(jt[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ct.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ct.WHEEL,this.boundHandleBrowserEvent_,kp?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[vt(i,ct.KEYDOWN,this.handleBrowserEvent,this),vt(i,ct.KEYPRESS,this.handleBrowserEvent,this)];const s=n.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ut(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ut(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=vt(t,nr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=vt(t,ct.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ut),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new mi("addlayer",t)),this.layerGroupPropertyListenerKeys_=[vt(t,nr.PROPERTYCHANGE,this.render,this),vt(t,ct.CHANGE,this.render,this),vt(t,"addlayer",this.handleLayerAdd_,this),vt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const s=t[n].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){wy(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const n=this.getSize(),i=this.getView(),s=this.frameState_;let r=null;if(n!==void 0&&Pg(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Du(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Lt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=Du(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!vr(this.previousExtent_)&&!_o(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Ns(Nn.MOVESTART,this,s)),this.previousExtent_=Fo(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Qt.ANIMATING]&&!r.viewHints[Qt.INTERACTING]&&!_o(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Ns(Nn.MOVEEND,this,r)),Np(r.extent,this.previousExtent_))),this.dispatchEvent(new Ns(Nn.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(Nn.LOADSTART)||this.hasListener(Nn.LOADEND)||this.hasListener(Cn.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new mi("removelayer",n)),this.set(ae.LAYERGROUP,t)}setSize(t){this.set(ae.SIZE,t)}setTarget(t){this.set(ae.TARGET,t)}setView(t){if(!t||t instanceof xn){this.set(ae.VIEW,t);return}this.set(ae.VIEW,new xn);const n=this;t.then(function(i){n.setView(new xn(i))})}updateSize(){const t=this.getTargetElement();let n;if(t){const s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(n=[r,o],!Pg(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Kp("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!Ai(n,i))&&(this.setSize(n),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let n;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}}};function US(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const n={},i=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new ic({layers:e.layers});n[ae.LAYERGROUP]=i,n[ae.TARGET]=e.target,n[ae.VIEW]=e.view instanceof xn?e.view:new xn;let s;e.controls!==void 0&&(Array.isArray(e.controls)?s=new wn(e.controls.slice()):(Tt(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=e.controls));let r;e.interactions!==void 0&&(Array.isArray(e.interactions)?r=new wn(e.interactions.slice()):(Tt(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),r=e.interactions));let o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new wn(e.overlays.slice()):(Tt(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=e.overlays):o=new wn,{controls:s,interactions:r,keyboardEventTarget:t,overlays:o,values:n}}const $S=WS;class _f extends gn{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const n=t;this.setGeometry(n)}else{const n=t;this.setProperties(n)}}clone(){const t=new _f(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&t.setGeometry(n.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ut(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=vt(t,ct.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?VS(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function VS(e){if(typeof e=="function")return e;let t;return Array.isArray(e)?t=e:(Tt(typeof e.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}const Xu=_f;class YS{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,n){if(n){let i=n.dataProjection?se(n.dataProjection):this.readProjection(t);n.extent&&i&&i.getUnits()==="tile-pixels"&&(i=se(i),i.setWorldExtent(n.extent)),n={dataProjection:i,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return at()}readFeature(t,n){return at()}readFeatures(t,n){return at()}readGeometry(t,n){return at()}readProjection(t){return at()}writeFeature(t,n){return at()}writeFeatures(t,n){return at()}writeGeometry(t,n){return at()}}function Cy(e,t,n){const i=n?se(n.featureProjection):null,s=n?se(n.dataProjection):null;let r;if(i&&s&&!Zi(i,s)?r=(t?e.clone():e).transform(t?i:s,t?s:i):r=e,t&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};r===e&&(r=e.clone()),r.applyTransform(a)}return r}class HS extends YS{constructor(){super()}getType(){return"json"}readFeature(t,n){return this.readFeatureFromObject(ha(t),this.getReadOptions(t,n))}readFeatures(t,n){return this.readFeaturesFromObject(ha(t),this.getReadOptions(t,n))}readFeatureFromObject(t,n){return at()}readFeaturesFromObject(t,n){return at()}readGeometry(t,n){return this.readGeometryFromObject(ha(t),this.getReadOptions(t,n))}readGeometryFromObject(t,n){return at()}readProjection(t){return this.readProjectionFromObject(ha(t))}readProjectionFromObject(t){return at()}writeFeature(t,n){return JSON.stringify(this.writeFeatureObject(t,n))}writeFeatureObject(t,n){return at()}writeFeatures(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))}writeFeaturesObject(t,n){return at()}writeGeometry(t,n){return JSON.stringify(this.writeGeometryObject(t,n))}writeGeometryObject(t,n){return at()}}function ha(e){if(typeof e=="string"){const t=JSON.parse(e);return t||null}return e!==null?e:null}const BS=HS;function Ty(e,t,n,i,s,r,o){let a,l;const c=(n-t)/i;if(c===1)a=t;else if(c===2)a=t,l=s;else if(c!==0){let u=e[t],h=e[t+1],f=0;const d=[0];for(let p=t+i;p<n;p+=i){const y=e[p],x=e[p+1];f+=Math.sqrt((y-u)*(y-u)+(x-h)*(x-h)),d.push(f),u=y,h=x}const g=s*f,m=BE(d,g);m<0?(l=(g-d[-m-2])/(d[-m-1]-d[-m-2]),a=t+(-m-2)*i):a=t+m*i}o=o>1?o:2,r=r||new Array(o);for(let u=0;u<o;++u)r[u]=a===void 0?NaN:l===void 0?e[a+u]:Fe(e[a+u],e[a+i+u],l);return r}function Zu(e,t,n,i,s,r){if(n==t)return null;let o;if(s<e[t+i-1])return r?(o=e.slice(t,t+i),o[i-1]=s,o):null;if(e[n-1]<s)return r?(o=e.slice(n-i,n),o[i-1]=s,o):null;if(s==e[t+i-1])return e.slice(t,t+i);let a=t/i,l=n/i;for(;a<l;){const f=a+l>>1;s<e[(f+1)*i-1]?l=f:a=f+1}const c=e[a*i-1];if(s==c)return e.slice((a-1)*i,(a-1)*i+i);const u=e[(a+1)*i-1],h=(s-c)/(u-c);o=[];for(let f=0;f<i-1;++f)o.push(Fe(e[(a-1)*i+f],e[a*i+f],h));return o.push(s),o}function XS(e,t,n,i,s,r,o){if(o)return Zu(e,t,n[n.length-1],i,s,r);let a;if(s<e[i-1])return r?(a=e.slice(0,i),a[i-1]=s,a):null;if(e[e.length-1]<s)return r?(a=e.slice(e.length-i),a[i-1]=s,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(t!=u){if(s<e[t+i-1])return null;if(s<=e[u-1])return Zu(e,t,u,i,s,!1);t=u}}return null}function Sy(e,t,n,i){let s=e[t],r=e[t+1],o=0;for(let a=t+i;a<n;a+=i){const l=e[a],c=e[a+1];o+=Math.sqrt((l-s)*(l-s)+(c-r)*(c-r)),s=l,r=c}return o}class sl extends ys{constructor(t,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendCoordinate(t){this.flatCoordinates?Yn(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new sl(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,s){return s<_s(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),of(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,s))}forEachSegment(t){return oy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,Zu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n))}getCoordinates(){return vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,n){return Ty(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)}getLength(){return Sy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const n=[];return n.length=cf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new sl(n,"XY")}getType(){return"LineString"}intersectsExtent(t){return tc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ql(this.flatCoordinates,0,t,this.stride),this.changed()}}const rl=sl;class ol extends ys{constructor(t,n,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,n);else if(n!==void 0&&i)this.setFlatCoordinates(n,t),this.ends_=i;else{let s=this.getLayout();const r=t,o=[],a=[];for(let l=0,c=r.length;l<c;++l){const u=r[l];l===0&&(s=u.getLayout()),Yn(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?Yn(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ol(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,s){return s<_s(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(rf(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),af(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,s))}getCoordinateAtM(t,n,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,i=i!==void 0?i:!1,XS(this.flatCoordinates,0,this.ends_,this.stride,t,n,i))}getCoordinates(){return po(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new rl(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,n=this.ends_,i=this.layout,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new rl(t.slice(r,l),i);s.push(c),r=l}return s}getFlatMidpoints(){const t=[],n=this.flatCoordinates;let i=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],c=Ty(n,i,l,r,.5);Yn(t,c),i=l}return t}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=uT(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new ol(n,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return pT(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=lf(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const ZS=ol;class pf extends ys{constructor(t,n){super(),n&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendPoint(t){this.flatCoordinates?Yn(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new pf(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,s){if(s<_s(this.getExtent(),t,n))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){const c=os(t,n,r[a],r[a+1]);if(c<s){s=c;for(let u=0;u<o;++u)i[u]=r[a+u];i.length=o}}return s}getCoordinates(){return vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new or(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,n=this.layout,i=this.stride,s=[];for(let r=0,o=t.length;r<o;r+=i){const a=new or(t.slice(r,r+i),n);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const n=this.flatCoordinates,i=this.stride;for(let s=0,r=n.length;s<r;s+=i){const o=n[s],a=n[s+1];if(Zh(t,o,a))return!0}return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ql(this.flatCoordinates,0,t,this.stride),this.changed()}}const Ry=pf;function jS(e,t,n,i){const s=[];let r=Ze();for(let o=0,a=n.length;o<a;++o){const l=n[o];r=Gp(e,t,l[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=l[l.length-1]}return s}class al extends ys{constructor(t,n,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let s=this.getLayout();const r=t,o=[],a=[];for(let l=0,c=r.length;l<c;++l){const u=r[l];l===0&&(s=u.getLayout());const h=o.length,f=u.getEnds();for(let d=0,g=f.length;d<g;++d)f[d]+=h;Yn(o,u.getFlatCoordinates()),a.push(f)}n=s,t=o,i=a}n!==void 0&&i?(this.setFlatCoordinates(n,t),this.endss_=i):this.setCoordinates(t,n)}appendPolygon(t){let n;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Yn(this.flatCoordinates,t.getFlatCoordinates()),n=t.getEnds().slice();for(let s=0,r=n.length;s<r;++s)n[s]+=i}this.endss_.push(n),this.changed()}clone(){const t=this.endss_.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=this.endss_[s].slice();const i=new al(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}closestPointXY(t,n,i,s){return s<_s(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(oT(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),aT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,i,s))}containsXY(t,n){return mT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)}getArea(){return dT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),bg(n,0,this.endss_,this.stride,t)):n=this.flatCoordinates,Wu(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=jS(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=_T(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Ry(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;vT(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=bg(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=fT(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new al(n,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let n;if(t===0)n=0;else{const r=this.endss_[t-1];n=r[r.length-1]}const i=this.endss_[t].slice(),s=i[i.length-1];if(n!==0)for(let r=0,o=i.length;r<o;++r)i[r]-=n;return new Ja(this.flatCoordinates.slice(n,s),this.layout,i)}getPolygons(){const t=this.layout,n=this.flatCoordinates,i=this.endss_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(r!==0)for(let h=0,f=l.length;h<f;++h)l[h]-=r;const u=new Ja(n.slice(r,c),t,l);s.push(u),r=c}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return yT(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=cT(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const s=i[i.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const KS=al;class ll extends ey{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ut),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,n=this.geometries_.length;t<n;++t)this.changeEventsKeys_.push(vt(this.geometries_[t],ct.CHANGE,this.changed,this))}clone(){const t=new ll(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,n,i,s){if(s<_s(this.getExtent(),t,n))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(t,n,i,s);return s}containsXY(t,n){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)if(i[s].containsXY(t,n))return!0;return!1}computeExtent(t){Fo(t);const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)zp(t,n[i].getExtent());return t}getGeometries(){return Dg(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],i=this.geometries_;let s=!1;for(let r=0,o=i.length;r<o;++r){const a=i[r],l=a.getSimplifiedGeometry(t);n.push(l),l!==a&&(s=!0)}if(s){const r=new ll(null);return r.setGeometriesArray(n),r}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)if(n[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,n){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].rotate(t,n);this.changed()}scale(t,n,i){i||(i=fs(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(t,n,i);this.changed()}setGeometries(t){this.setGeometriesArray(Dg(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)n[i].applyTransform(t);this.changed()}translate(t,n){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].translate(t,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Dg(e){const t=[];for(let n=0,i=e.length;n<i;++n)t.push(e[n].clone());return t}const qS=ll;class JS extends BS{constructor(t){t=t||{},super(),this.dataProjection=se(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=se(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,n){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const s=ju(i.geometry,n),r=new Xu;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(s),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r}readFeaturesFromObject(t,n){const i=t;let s=null;if(i.type==="FeatureCollection"){const r=t;s=[];const o=r.features;for(let a=0,l=o.length;a<l;++a)s.push(this.readFeatureFromObject(o[a],n))}else s=[this.readFeatureFromObject(t,n)];return s}readGeometryFromObject(t,n){return ju(t,n)}readProjectionFromObject(t){const n=t.crs;let i;if(n)if(n.type=="name")i=se(n.properties.name);else if(n.type==="EPSG")i=se("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,n){n=this.adaptOptions(n);const i={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(i.id=s),!t.hasProperties())return i;const r=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=Ku(o,n),delete r[t.getGeometryName()]),sr(r)||(i.properties=r),i}writeFeaturesObject(t,n){n=this.adaptOptions(n);const i=[];for(let s=0,r=t.length;s<r;++s)i.push(this.writeFeatureObject(t[s],n));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,n){return Ku(t,this.adaptOptions(n))}}function ju(e,t){if(!e)return null;let n;switch(e.type){case"Point":{n=tR(e);break}case"LineString":{n=eR(e);break}case"Polygon":{n=rR(e);break}case"MultiPoint":{n=iR(e);break}case"MultiLineString":{n=nR(e);break}case"MultiPolygon":{n=sR(e);break}case"GeometryCollection":{n=QS(e);break}default:throw new Error("Unsupported GeoJSON type: "+e.type)}return Cy(n,!1,t)}function QS(e,t){const n=e.geometries.map(function(i){return ju(i,t)});return new qS(n)}function tR(e){return new or(e.coordinates)}function eR(e){return new rl(e.coordinates)}function nR(e){return new ZS(e.coordinates)}function iR(e){return new Ry(e.coordinates)}function sR(e){return new KS(e.coordinates)}function rR(e){return new Ja(e.coordinates)}function Ku(e,t){e=Cy(e,!0,t);const n=e.getType();let i;switch(n){case"Point":{i=hR(e);break}case"LineString":{i=aR(e);break}case"Polygon":{i=fR(e,t);break}case"MultiPoint":{i=cR(e);break}case"MultiLineString":{i=lR(e);break}case"MultiPolygon":{i=uR(e,t);break}case"GeometryCollection":{i=oR(e,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return i}function oR(e,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(i){return Ku(i,t)})}}function aR(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function lR(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function cR(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function uR(e,t){let n;return t&&(n=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(n)}}function hR(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function fR(e,t){let n;return t&&(n=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(n)}}const dR=JS;class yf{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new yf({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const xf=yf,_t={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class vf{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=De(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new vf({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return at()}getImage(t){return at()}getHitDetectionImage(){return at()}getPixelRatio(t){return 1}getImageState(){return at()}getImageSize(){return at()}getOrigin(){return at()}getSize(){return at()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=De(t)}listenImageChange(t){at()}load(){at()}unlistenImageChange(t){at()}}const Iy=vf;class gR extends Oo{constructor(t,n,i,s){super(),this.extent=t,this.pixelRatio_=i,this.resolution=n,this.state=typeof s=="function"?_t.IDLE:s,this.image_=null,this.loader=typeof s=="function"?s:null}changed(){this.dispatchEvent(ct.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==_t.IDLE&&this.loader){this.state=_t.LOADING,this.changed();const t=this.getResolution(),n=Array.isArray(t)?t[0]:t;KE(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=_t.LOADED}).catch(i=>{this.state=_t.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function mR(e,t,n){const i=e;let s=!0,r=!1,o=!1;const a=[Ya(i,ct.LOAD,function(){o=!0,r||t()})];return i.src&&Dp?(r=!0,i.decode().then(function(){s&&t()}).catch(function(l){s&&(o?t():n())})):a.push(Ya(i,ct.ERROR,n)),function(){s=!1,a.forEach(Ut)}}function _R(e,t){return new Promise((n,i)=>{function s(){o(),n(e)}function r(){o(),i(new Error("Image load error"))}function o(){e.removeEventListener("load",s),e.removeEventListener("error",r)}e.addEventListener("load",s),e.addEventListener("error",r),t&&(e.src=t)})}function pR(e,t){return t&&(e.src=t),Dp?new Promise((n,i)=>e.decode().then(()=>n(e),i)):_R(e)}const yR=gR;let Pr=null;class xR extends Oo{constructor(t,n,i,s,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=s===void 0?_t.IDLE:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=n,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===_t.LOADED){Pr||(Pr=Ee(1,1,void 0,{willReadFrequently:!0})),Pr.drawImage(this.image_,0,0);try{Pr.getImageData(0,0,1,1),this.tainted_=!1}catch{Pr=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ct.CHANGE)}handleImageError_(){this.imageState_=_t.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=_t.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],n=this.size_[1],i=Ee(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===_t.IDLE){this.image_||this.initializeImage_(),this.imageState_=_t.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&pR(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==_t.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*t),i.height=Math.ceil(n.height*t);const s=i.getContext("2d");s.scale(t,t),s.drawImage(n,0,0),s.globalCompositeOperation="multiply",s.fillStyle=Vp(this.color_),s.fillRect(0,0,i.width/t,i.height/t),s.globalCompositeOperation="destination-in",s.drawImage(n,0,0),this.canvas_[t]=i}}function vR(e,t,n,i,s){let r=t===void 0?void 0:Ba.get(t,n,s);return r||(r=new xR(e,e instanceof HTMLImageElement?e.src||void 0:t,n,i,s),Ba.set(t,n,s,r)),r}function kg(e,t,n,i){return n!==void 0&&i!==void 0?[n/e,i/t]:n!==void 0?n/e:i!==void 0?i/t:1}class wf extends Iy{constructor(t){t=t||{};const n=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:n,rotation:i,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Tt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Lt(o)),Tt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Tt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=_t.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?_t.LOADED:_t.IDLE:l=_t.LOADING:l=_t.LOADED),this.color_=t.color!==void 0?Ha(t.color):null,this.iconImage_=vR(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let c,u;if(t.size)[c,u]=t.size;else{const h=this.getImage(1);if(h.width&&h.height)c=h.width,u=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=t;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(kg(d[0],d[1],t.width,t.height))};this.listenImageChange(f);return}}c!==void 0&&this.setScale(kg(c,u,t.width,t.height))}}clone(){let t,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new wf({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]-n[0]/i[0],t[1]+n[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==_t.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==_t.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(ct.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(ct.CHANGE,t)}}const cl=wf;class Ef{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Ef({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const Cf=Ef;function En(e){return Array.isArray(e)?Yp(e):e}class Tf extends Iy{constructor(t){const n=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:n,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),n=new Tf({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const t=this.size_;if(!t)return null;const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-n[0]/i[0],t[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let n=this.canvas_[t];if(!n){const i=this.renderOptions_,s=Ee(i.size*t,i.size*t);this.draw_(i,s,t),n=s.canvas,this.canvas_[t]=n}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return _t.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const T=s;s=r,r=T}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),c=Math.sqrt(r*r-l*l),u=s-c,h=Math.sqrt(l*l+u*u),f=h/l;if(t==="miter"&&f<=i)return f*n;const d=n/2/f,g=n/2*(u/h),p=Math.sqrt((s+d)*(s+d)+g*g)-s;if(this.radius2_===void 0||t==="bevel")return p*2;const y=s*Math.sin(a),x=Math.sqrt(s*s-y*y),E=r-x,S=Math.sqrt(y*y+E*E)/y;if(S<=i){const T=S*n/2-r-s;return 2*Math.max(p,T)}return p*2}createRenderOptions(){let t=ar,n=lr,i=0,s=null,r=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=vo),o=En(o),a=this.stroke_.getWidth(),a===void 0&&(a=Eo),s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),n=this.stroke_.getLineJoin(),n===void 0&&(n=lr),t=this.stroke_.getLineCap(),t===void 0&&(t=ar),i=this.stroke_.getMiterLimit(),i===void 0&&(i=xo));const l=this.calculateLineJoinSize_(n,a,i),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:t,lineDash:s,lineDashOffset:r,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){let s=this.fill_.getColor();s===null&&(s=Re),n.fillStyle=En(s),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineCap=t.lineCap,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=Ha(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){const s=Ee(t.size,t.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(t,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let n=this.points_;const i=this.radius_;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{const s=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=r+a*o,c=a%2===0?i:s;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=Re,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}}const by=Tf;class Sf extends by{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),n=new Sf({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(t){this.radius_=t,this.render()}}const My=Sf;class sc{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Ng,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new sc({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(n){return n.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Ng,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function wR(e){let t;if(typeof e=="function")t=e;else{let n;Array.isArray(e)?n=e:(Tt(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[e]),t=function(){return n}}return t}let $c=null;function ER(e,t){if(!$c){const n=new xf({color:"rgba(255,255,255,0.4)"}),i=new Cf({color:"#3399CC",width:1.25});$c=[new sc({image:new My({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return $c}function Ng(e){return e.getGeometry()}const cs=sc,CR="#333";class Rf{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=De(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new xf({color:CR}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new Rf({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=De(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const TR=Rf,fa={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class SR extends ec{constructor(t){t=t||{};const n=Object.assign({},t);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(fa.PRELOAD)}setPreload(t){this.set(fa.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(fa.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(fa.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const RR=SR;class IR extends Lp{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return at()}getData(t){return null}prepareFrame(t){return at()}renderFrame(t,n){return at()}loadedTileCallback(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i}createLoadedTileFinder(t,n,i){return(s,r)=>{const o=this.loadedTileCallback.bind(this,i,s);return t.forEachLoadedTile(n,s,r,o)}}forEachFeatureAtCoordinate(t,n,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const n=t.target;(n.getState()===_t.LOADED||n.getState()===_t.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let n=t.getState();return n!=_t.LOADED&&n!=_t.ERROR&&t.addEventListener(ct.CHANGE,this.boundHandleImageChange_),n==_t.IDLE&&(t.load(),n=t.getState()),n==_t.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const bR=IR,Gg=[];let Gs=null;function MR(){Gs=Ee(1,1,void 0,{willReadFrequently:!0})}class AR extends bR{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=un(),this.pixelTransform=un(),this.inversePixelTransform=un(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,n,i){Gs||MR(),Gs.clearRect(0,0,1,1);let s;try{Gs.drawImage(t,n,i,1,1,0,0,1,1),s=Gs.getImageData(0,0,1,1).data}catch{return Gs=null,null}return s}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,n,i){const s=this.getLayer().getClassName();let r,o;if(t&&t.className===s&&(!i||t&&t.style.backgroundColor&&Ai(Ha(t.style.backgroundColor),Ha(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=Ee();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,n,i){const s=ps(i),r=ql(i),o=Kl(i),a=jl(i);Kt(n.coordinateToPixelTransform,s),Kt(n.coordinateToPixelTransform,r),Kt(n.coordinateToPixelTransform,o),Kt(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Kt(l,s),Kt(l,r),Kt(l,o),Kt(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,n,i){const s=this.getLayer();if(s.hasListener(t)){const r=new hy(t,this.inversePixelTransform,i,n);s.dispatchEvent(r)}}preRender(t,n){this.frameState=n,this.dispatchRenderEvent_(Cn.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(Cn.POSTRENDER,t,n)}getRenderTransform(t,n,i,s,r,o,a){const l=r/2,c=o/2,u=s/n,h=-u,f=-t[0]+a,d=-t[1];return fn(this.tempTransform,l,c,u,h,-i,f,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const If=AR;class OR extends Oo{constructor(t,n,i){super(),i=i||{},this.tileCoord=t,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(ct.CHANGE)}release(){this.state===st.ERROR&&this.setState(st.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==st.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,n=this;do{if(t.getState()==st.LOADED){t.interimTile=null;break}else t.getState()==st.LOADING?n=t:t.getState()==st.IDLE?n.interimTile=t.interimTile:n=t;t=n.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==st.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){at()}getAlpha(t,n){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;const s=n-i+1e3/60;return s>=this.transition_?1:Qp(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const Ay=OR;class LR extends Ay{constructor(t,n,i,s,r,o){super(t,n,o),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=st.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=st.ERROR,this.unlistenImage_(),this.image_=FR(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=st.LOADED:this.state=st.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==st.ERROR&&(this.state=st.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==st.IDLE&&(this.state=st.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=mR(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function FR(){const e=Ee(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}const Oy=LR,PR=.5,DR=10,zg=.25;class kR{constructor(t,n,i,s,r,o){this.sourceProj_=t,this.targetProj_=n;let a={};const l=Ka(this.targetProj_,this.sourceProj_);this.transformInv_=function(x){const E=x[0]+"/"+x[1];return a[E]||(a[E]=l(x)),a[E]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Nt(s)>=Nt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Nt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Nt(this.targetProj_.getExtent()):null;const c=ps(i),u=ql(i),h=Kl(i),f=jl(i),d=this.transformInv_(c),g=this.transformInv_(u),m=this.transformInv_(h),p=this.transformInv_(f),y=DR+(o?Math.max(0,Math.ceil(Math.log2(Pu(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,h,f,d,g,m,p,y),this.wrapsXInSource_){let x=1/0;this.triangles_.forEach(function(E,v,S){x=Math.min(x,E.source[0][0],E.source[1][0],E.source[2][0])}),this.triangles_.forEach(E=>{if(Math.max(E.source[0][0],E.source[1][0],E.source[2][0])-x>this.sourceWorldWidth_/2){const v=[[E.source[0][0],E.source[0][1]],[E.source[1][0],E.source[1][1]],[E.source[2][0],E.source[2][1]]];v[0][0]-x>this.sourceWorldWidth_/2&&(v[0][0]-=this.sourceWorldWidth_),v[1][0]-x>this.sourceWorldWidth_/2&&(v[1][0]-=this.sourceWorldWidth_),v[2][0]-x>this.sourceWorldWidth_/2&&(v[2][0]-=this.sourceWorldWidth_);const S=Math.min(v[0][0],v[1][0],v[2][0]);Math.max(v[0][0],v[1][0],v[2][0])-S<this.sourceWorldWidth_/2&&(E.source=v)}})}a={}}addTriangle_(t,n,i,s,r,o){this.triangles_.push({source:[s,r,o],target:[t,n,i]})}addQuad_(t,n,i,s,r,o,a,l,c){const u=hg([r,o,a,l]),h=this.sourceWorldWidth_?Nt(u)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&h>.5&&h<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const p=hg([t,n,i,s]);g=Nt(p)/this.targetWorldWidth_>zg||g}!d&&this.sourceProj_.isGlobal()&&h&&(g=h>zg||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!ve(u,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(m=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!g){const p=[(t[0]+i[0])/2,(t[1]+i[1])/2],y=this.transformInv_(p);let x;d?x=(as(r[0],f)+as(a[0],f))/2-as(y[0],f):x=(r[0]+a[0])/2-y[0];const E=(r[1]+a[1])/2-y[1];g=x*x+E*E>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const p=[(n[0]+i[0])/2,(n[1]+i[1])/2],y=this.transformInv_(p),x=[(s[0]+t[0])/2,(s[1]+t[1])/2],E=this.transformInv_(x);this.addQuad_(t,n,p,x,r,o,y,E,c-1),this.addQuad_(x,p,i,s,E,y,a,l,c-1)}else{const p=[(t[0]+n[0])/2,(t[1]+n[1])/2],y=this.transformInv_(p),x=[(i[0]+s[0])/2,(i[1]+s[1])/2],E=this.transformInv_(x);this.addQuad_(t,p,x,s,r,y,E,l,c-1),this.addQuad_(p,n,i,x,y,o,a,E,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(t,i,s,r,a,l),m&14||this.addTriangle_(t,i,n,r,a,o),m&&(m&13||this.addTriangle_(n,s,t,o,l,r),m&7||this.addTriangle_(n,s,i,o,l,a))}calculateSourceExtent(){const t=Ze();return this.triangles_.forEach(function(n,i,s){const r=n.source;so(t,r[0]),so(t,r[1]),so(t,r[2])}),t}getTriangles(){return this.triangles_}}const NR=kR;let Vc;const js=[];function Wg(e,t,n,i,s){e.beginPath(),e.moveTo(0,0),e.lineTo(t,n),e.lineTo(i,s),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,i)+1,Math.max(n,s)),e.restore()}function Yc(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function GR(){if(Vc===void 0){const e=Ee(6,6,js);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Wg(e,4,5,4,0),Wg(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;Vc=Yc(t,0)||Yc(t,4)||Yc(t,8),nc(e),js.push(e.canvas)}return Vc}function Ug(e,t,n,i){const s=HC(n,t,e);let r=ja(t,i,n);const o=t.getMetersPerUnit();o!==void 0&&(r*=o);const a=e.getMetersPerUnit();a!==void 0&&(r/=a);const l=e.getExtent();if(!l||Lo(l,s)){const c=ja(e,r,s)/r;isFinite(c)&&c>0&&(r/=c)}return r}function zR(e,t,n,i){const s=fs(n);let r=Ug(e,t,s,i);return(!isFinite(r)||r<=0)&&Up(n,function(o){return r=Ug(e,t,o,i),isFinite(r)&&r>0}),r}function WR(e,t,n,i,s,r,o,a,l,c,u,h){const f=Ee(Math.round(n*e),Math.round(n*t),js);if(h||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(n,n);function d(v){return Math.round(v*n)/n}f.globalCompositeOperation="lighter";const g=Ze();l.forEach(function(v,S,T){zp(g,v.extent)});const m=Nt(g),p=Ne(g),y=Ee(Math.round(n*m/i),Math.round(n*p/i),js);h||(y.imageSmoothingEnabled=!1);const x=n/i;l.forEach(function(v,S,T){const b=v.extent[0]-g[0],R=-(v.extent[3]-g[3]),U=Nt(v.extent),A=Ne(v.extent);v.image.width>0&&v.image.height>0&&y.drawImage(v.image,c,c,v.image.width-2*c,v.image.height-2*c,b*x,R*x,U*x,A*x)});const E=ps(o);return a.getTriangles().forEach(function(v,S,T){const b=v.source,R=v.target;let U=b[0][0],A=b[0][1],D=b[1][0],F=b[1][1],$=b[2][0],it=b[2][1];const X=d((R[0][0]-E[0])/r),H=d(-(R[0][1]-E[1])/r),N=d((R[1][0]-E[0])/r),j=d(-(R[1][1]-E[1])/r),rt=d((R[2][0]-E[0])/r),dt=d(-(R[2][1]-E[1])/r),Mt=U,G=A;U=0,A=0,D-=Mt,F-=G,$-=Mt,it-=G;const Bt=[[D,F,0,0,N-X],[$,it,0,0,rt-X],[0,0,D,F,j-H],[0,0,$,it,dt-H]],mt=pC(Bt);if(mt){if(f.save(),f.beginPath(),GR()||!h){f.moveTo(N,j);const wt=4,Gt=X-N,P=H-j;for(let B=0;B<wt;B++)f.lineTo(N+d((B+1)*Gt/wt),j+d(B*P/(wt-1))),B!=wt-1&&f.lineTo(N+d((B+1)*Gt/wt),j+d((B+1)*P/(wt-1)));f.lineTo(rt,dt)}else f.moveTo(N,j),f.lineTo(X,H),f.lineTo(rt,dt);f.clip(),f.transform(mt[0],mt[2],mt[1],mt[3],X,H),f.translate(g[0]-Mt,g[3]-G),f.scale(i/n,-i/n),f.drawImage(y.canvas,0,0),f.restore()}}),nc(y),js.push(y.canvas),u&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach(function(v,S,T){const b=v.target,R=(b[0][0]-E[0])/r,U=-(b[0][1]-E[1])/r,A=(b[1][0]-E[0])/r,D=-(b[1][1]-E[1])/r,F=(b[2][0]-E[0])/r,$=-(b[2][1]-E[1])/r;f.beginPath(),f.moveTo(A,D),f.lineTo(R,U),f.lineTo(F,$),f.closePath(),f.stroke()}),f.restore()),f.canvas}class UR extends Ay{constructor(t,n,i,s,r,o,a,l,c,u,h,f){super(r,st.IDLE,{interpolate:!!f}),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const p=g?Xs(d,g):d;if(Pu(p)===0){this.state=st.EMPTY;return}const y=t.getExtent();y&&(m?m=Xs(m,y):m=y);const x=s.getResolution(this.wrappedTileCoord_[0]),E=zR(t,i,p,x);if(!isFinite(E)||E<=0){this.state=st.EMPTY;return}const v=u!==void 0?u:PR;if(this.triangulation_=new NR(t,i,p,m,E*v,x),this.triangulation_.getTriangles().length===0){this.state=st.EMPTY;return}this.sourceZ_=n.getZForResolution(E);let S=this.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(S[1]=te(S[1],m[1],m[3]),S[3]=te(S[3],m[1],m[3])):S=Xs(S,m)),!Pu(S))this.state=st.EMPTY;else{const T=n.getTileRangeForExtentAndZ(S,this.sourceZ_);for(let b=T.minX;b<=T.maxX;b++)for(let R=T.minY;R<=T.maxY;R++){const U=c(this.sourceZ_,b,R,a);U&&this.sourceTiles_.push(U)}this.sourceTiles_.length===0&&(this.state=st.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==st.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=st.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),s=typeof i=="number"?i:i[0],r=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=WR(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=st.LOADED}this.changed()}load(){if(this.state==st.IDLE){this.state=st.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const i=n.getState();if(i==st.IDLE||i==st.LOADING){t++;const s=vt(n,ct.CHANGE,function(r){const o=n.getState();(o==st.LOADED||o==st.ERROR||o==st.EMPTY)&&(Ut(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,s){n.getState()==st.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ut),this.sourcesListenerKeys_=null}release(){this.canvas_&&(nc(this.canvas_.getContext("2d")),js.push(this.canvas_),this.canvas_=null),super.release()}}const qu=UR;class Ly{constructor(t,n,i,s){this.minX=t,this.maxX=n,this.minY=i,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function bs(e,t,n,i,s){return s!==void 0?(s.minX=e,s.maxX=t,s.minY=n,s.maxY=i,s):new Ly(e,t,n,i)}const Fy=Ly;class $R extends If{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Ze(),this.tmpTileRange_=new Fy(0,0,0,0)}isDrawableTile(t){const n=this.getLayer(),i=t.getState(),s=n.getUseInterimTilesOnError();return i==st.LOADED||i==st.EMPTY||i==st.ERROR&&!s}getTile(t,n,i,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(t,n,i,r,o);return c.getState()==st.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),s=Kt(n.pixelToCoordinateTransform,t.slice()),r=i.getExtent();if(r&&!Lo(r,s))return null;const o=n.pixelRatio,a=n.viewState.projection,l=n.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),h=c.getTilePixelRatio(n.pixelRatio);for(let f=u.getZForResolution(l.resolution);f>=u.getMinZoom();--f){const d=u.getTileCoordForCoordAndZ(s,f),g=c.getTile(f,d[1],d[2],o,a);if(!(g instanceof Oy||g instanceof qu)||g instanceof qu&&g.getState()===st.EMPTY)return null;if(g.getState()!==st.LOADED)continue;const m=u.getOrigin(f),p=De(u.getTileSize(f)),y=u.getResolution(f),x=Math.floor(h*((s[0]-m[0])/y-d[1]*p[0])),E=Math.floor(h*((m[1]-s[1])/y-d[2]*p[1])),v=Math.round(h*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),x+v,E+v)}return null}loadedTileCallback(t,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,n,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,n){const i=t.layerStatesArray[t.layerIndex],s=t.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,c=t.pixelRatio,u=this.getLayer(),h=u.getSource(),f=h.getRevision(),d=h.getTileGridForProjection(r),g=d.getZForResolution(o,h.zDirection),m=d.getResolution(g);let p=t.extent;const y=t.viewState.resolution,x=h.getTilePixelRatio(c),E=Math.round(Nt(p)/y*c),v=Math.round(Ne(p)/y*c),S=i.extent&&zn(i.extent);S&&(p=Xs(p,zn(i.extent)));const T=m*E/2/x,b=m*v/2/x,R=[a[0]-T,a[1]-b,a[0]+T,a[1]+b],U=d.getTileRangeForExtentAndZ(p,g),A={};A[g]={};const D=this.createLoadedTileFinder(h,r,A),F=this.tmpExtent,$=this.tmpTileRange_;this.newTiles_=!1;const it=l?ku(s.center,y,l,t.size):void 0;for(let Bt=U.minX;Bt<=U.maxX;++Bt)for(let mt=U.minY;mt<=U.maxY;++mt){if(l&&!d.tileCoordIntersectsViewport([g,Bt,mt],it))continue;const wt=this.getTile(g,Bt,mt,t);if(this.isDrawableTile(wt)){const B=Lt(this);if(wt.getState()==st.LOADED){A[g][wt.tileCoord.toString()]=wt;let I=wt.inTransition(B);I&&i.opacity!==1&&(wt.endTransition(B),I=!1),!this.newTiles_&&(I||!this.renderedTiles.includes(wt))&&(this.newTiles_=!0)}if(wt.getAlpha(B,t.time)===1)continue}const Gt=d.getTileCoordChildTileRange(wt.tileCoord,$,F);let P=!1;Gt&&(P=D(g+1,Gt)),P||d.forEachTileCoordParentTileRange(wt.tileCoord,D,$,F)}const X=m/o*c/x;fn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,l,-E/2,-v/2);const H=Bh(this.pixelTransform);this.useContainer(n,H,this.getBackground(t));const N=this.context,j=N.canvas;Zl(this.inversePixelTransform,this.pixelTransform),fn(this.tempTransform,E/2,v/2,X,X,0,-E/2,-v/2),j.width!=E||j.height!=v?(j.width=E,j.height=v):this.containerReused||N.clearRect(0,0,E,v),S&&this.clipUnrotated(N,t,S),h.getInterpolate()||(N.imageSmoothingEnabled=!1),this.preRender(N,t),this.renderedTiles.length=0;let rt=Object.keys(A).map(Number);rt.sort(Ii);let dt,Mt,G;i.opacity===1&&(!this.containerReused||h.getOpaque(t.viewState.projection))?rt=rt.reverse():(dt=[],Mt=[]);for(let Bt=rt.length-1;Bt>=0;--Bt){const mt=rt[Bt],wt=h.getTilePixelSize(mt,c,r),P=d.getResolution(mt)/m,B=wt[0]*P*X,I=wt[1]*P*X,z=d.getTileCoordForCoordAndZ(ps(R),mt),Q=d.getTileCoordExtent(z),_=Kt(this.tempTransform,[x*(Q[0]-R[0])/m,x*(R[3]-Q[3])/m]),w=x*h.getGutterForProjection(r),C=A[mt];for(const M in C){const O=C[M],k=O.tileCoord,K=z[1]-k[1],V=Math.round(_[0]-(K-1)*B),Z=z[2]-k[2],W=Math.round(_[1]-(Z-1)*I),tt=Math.round(_[0]-K*B),J=Math.round(_[1]-Z*I),et=V-tt,nt=W-J,ut=g===mt,Et=ut&&O.getAlpha(Lt(this),t.time)!==1;let pt=!1;if(!Et)if(dt){G=[tt,J,tt+et,J,tt+et,J+nt,tt,J+nt];for(let zt=0,fe=dt.length;zt<fe;++zt)if(g!==mt&&mt<Mt[zt]){const Xt=dt[zt];ve([tt,J,tt+et,J+nt],[Xt[0],Xt[3],Xt[4],Xt[7]])&&(pt||(N.save(),pt=!0),N.beginPath(),N.moveTo(G[0],G[1]),N.lineTo(G[2],G[3]),N.lineTo(G[4],G[5]),N.lineTo(G[6],G[7]),N.moveTo(Xt[6],Xt[7]),N.lineTo(Xt[4],Xt[5]),N.lineTo(Xt[2],Xt[3]),N.lineTo(Xt[0],Xt[1]),N.clip())}dt.push(G),Mt.push(mt)}else N.clearRect(tt,J,et,nt);this.drawTileImage(O,t,tt,J,et,nt,w,ut),dt&&!Et?(pt&&N.restore(),this.renderedTiles.unshift(O)):this.renderedTiles.push(O),this.updateUsedTiles(t.usedTiles,h,O)}}return this.renderedRevision=f,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!_o(this.renderedExtent_,R),this.renderedExtent_=R,this.renderedPixelRatio=c,this.renderedProjection=r,this.manageTilePyramid(t,h,d,c,r,p,g,u.getPreload()),this.scheduleExpireCache(t,h),this.postRender(N,t),i.extent&&N.restore(),N.imageSmoothingEnabled=!0,H!==j.style.transform&&(j.style.transform=H),this.container}drawTileImage(t,n,i,s,r,o,a,l){const c=this.getTileImage(t);if(!c)return;const u=Lt(this),h=n.layerStatesArray[n.layerIndex],f=h.opacity*(l?t.getAlpha(u,n.time):1),d=f!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,s,r,o),d&&this.context.restore(),f!==h.opacity?n.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,n){if(n.canExpireCache()){const i=(function(s,r,o){const a=Lt(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,n);t.postRenderFunctions.push(i)}}updateUsedTiles(t,n,i){const s=Lt(n);s in t||(t[s]={}),t[s][i.getKey()]=!0}manageTilePyramid(t,n,i,s,r,o,a,l,c){const u=Lt(n);u in t.wantedTiles||(t.wantedTiles[u]={});const h=t.wantedTiles[u],f=t.tileQueue,d=i.getMinZoom(),g=t.viewState.rotation,m=g?ku(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let p=0,y,x,E,v,S,T;for(T=d;T<=a;++T)for(x=i.getTileRangeForExtentAndZ(o,T,x),E=i.getResolution(T),v=x.minX;v<=x.maxX;++v)for(S=x.minY;S<=x.maxY;++S)g&&!i.tileCoordIntersectsViewport([T,v,S],m)||(a-T<=l?(++p,y=n.getTile(T,v,S,s,r),y.getState()==st.IDLE&&(h[y.getKey()]=!0,f.isKeyQueued(y.getKey())||f.enqueue([y,u,i.getTileCoordCenter(y.tileCoord),E])),c!==void 0&&c(y)):n.useTile(T,v,S,r));n.updateCacheSize(p,r)}}const VR=$R;class YR extends RR{constructor(t){super(t)}createRenderer(){return new VR(this)}}const HR=YR;function BR(e,t,n,i,s){Py(e,t,n||0,i||e.length-1,s||XR)}function Py(e,t,n,i,s){for(;i>n;){if(i-n>600){var r=i-n+1,o=t-n+1,a=Math.log(r),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(r-l)/r)*(o-r/2<0?-1:1),u=Math.max(n,Math.floor(t-o*l/r+c)),h=Math.min(i,Math.floor(t+(r-o)*l/r+c));Py(e,t,u,h,s)}var f=e[t],d=n,g=i;for(Dr(e,n,t),s(e[i],f)>0&&Dr(e,n,i);d<g;){for(Dr(e,d,g),d++,g--;s(e[d],f)<0;)d++;for(;s(e[g],f)>0;)g--}s(e[n],f)===0?Dr(e,n,g):(g++,Dr(e,g,i)),g<=t&&(n=g+1),t<=g&&(i=g-1)}}function Dr(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function XR(e,t){return e<t?-1:e>t?1:0}let bf=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const i=[];if(!ga(t,n))return i;const s=this.toBBox,r=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?s(a):a;ga(t,l)&&(n.leaf?i.push(a):Bc(t,l)?this._all(a,i):r.push(a))}n=r.pop()}return i}collides(t){let n=this.data;if(!ga(t,n))return!1;const i=[];for(;n;){for(let s=0;s<n.children.length;s++){const r=n.children[s],o=n.leaf?this.toBBox(r):r;if(ga(t,o)){if(n.leaf||Bc(t,o))return!0;i.push(r)}}n=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=zs([]),this}remove(t,n){if(!t)return this;let i=this.data;const s=this.toBBox(t),r=[],o=[];let a,l,c;for(;i||r.length;){if(i||(i=r.pop(),l=r[r.length-1],a=o.pop(),c=!0),i.leaf){const u=ZR(t,i.children,n);if(u!==-1)return i.children.splice(u,1),r.push(i),this._condense(r),this}!c&&!i.leaf&&Bc(i,s)?(r.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const i=[];for(;t;)t.leaf?n.push(...t.children):i.push(...t.children),t=i.pop();return n}_build(t,n,i,s){const r=i-n+1;let o=this._maxEntries,a;if(r<=o)return a=zs(t.slice(n,i+1)),Ms(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=zs([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),c=l*Math.ceil(Math.sqrt(o));$g(t,n,i,c,this.compareMinX);for(let u=n;u<=i;u+=c){const h=Math.min(u+c-1,i);$g(t,u,h,l,this.compareMinY);for(let f=u;f<=h;f+=l){const d=Math.min(f+l-1,h);a.children.push(this._build(t,f,d,s-1))}}return Ms(a,this.toBBox),a}_chooseSubtree(t,n,i,s){for(;s.push(n),!(n.leaf||s.length-1===i);){let r=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=Hc(c),h=qR(t,c)-u;h<o?(o=h,r=u<r?u:r,a=c):h===o&&u<r&&(r=u,a=c)}n=a||n.children[0]}return n}_insert(t,n,i){const s=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(s,this.data,n,r);for(o.children.push(t),Br(o,s);n>=0&&r[n].children.length>this._maxEntries;)this._split(r,n),n--;this._adjustParentBBoxes(s,r,n)}_split(t,n){const i=t[n],s=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,s);const o=this._chooseSplitIndex(i,r,s),a=zs(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Ms(i,this.toBBox),Ms(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,n){this.data=zs([t,n]),this.data.height=t.height+1,this.data.leaf=!1,Ms(this.data,this.toBBox)}_chooseSplitIndex(t,n,i){let s,r=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=Hr(t,0,a,this.toBBox),c=Hr(t,a,i,this.toBBox),u=JR(l,c),h=Hc(l)+Hc(c);u<r?(r=u,s=a,o=h<o?h:o):u===r&&h<o&&(o=h,s=a)}return s||i-n}_chooseSplitAxis(t,n,i){const s=t.leaf?this.compareMinX:jR,r=t.leaf?this.compareMinY:KR,o=this._allDistMargin(t,n,i,s),a=this._allDistMargin(t,n,i,r);o<a&&t.children.sort(s)}_allDistMargin(t,n,i,s){t.children.sort(s);const r=this.toBBox,o=Hr(t,0,n,r),a=Hr(t,i-n,i,r);let l=da(o)+da(a);for(let c=n;c<i-n;c++){const u=t.children[c];Br(o,t.leaf?r(u):u),l+=da(o)}for(let c=i-n-1;c>=n;c--){const u=t.children[c];Br(a,t.leaf?r(u):u),l+=da(a)}return l}_adjustParentBBoxes(t,n,i){for(let s=i;s>=0;s--)Br(n[s],t)}_condense(t){for(let n=t.length-1,i;n>=0;n--)t[n].children.length===0?n>0?(i=t[n-1].children,i.splice(i.indexOf(t[n]),1)):this.clear():Ms(t[n],this.toBBox)}};function ZR(e,t,n){if(!n)return t.indexOf(e);for(let i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function Ms(e,t){Hr(e,0,e.children.length,t,e)}function Hr(e,t,n,i,s){s||(s=zs(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=t;r<n;r++){const o=e.children[r];Br(s,e.leaf?i(o):o)}return s}function Br(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function jR(e,t){return e.minX-t.minX}function KR(e,t){return e.minY-t.minY}function Hc(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function da(e){return e.maxX-e.minX+(e.maxY-e.minY)}function qR(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function JR(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,s-n)*Math.max(0,r-i)}function Bc(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function ga(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function zs(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function $g(e,t,n,i,s){const r=[t,n];for(;r.length;){if(n=r.pop(),t=r.pop(),n-t<=i)continue;const o=t+Math.ceil((n-t)/i/2)*i;BR(e,o,t,n,s),r.push(t,o,o,n)}}let Cr=0;const me=1<<Cr++,yt=1<<Cr++,cr=1<<Cr++,Mf=1<<Cr++,Go=1<<Cr++,Ke=Math.pow(2,Cr)-1,Dy={[me]:"boolean",[yt]:"number",[cr]:"string",[Mf]:"color",[Go]:"number[]"},QR=Object.keys(Dy).map(Number).sort(Ii);function ul(e){const t=[];for(const n of QR)tI(e,n)&&t.push(Dy[n]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function tI(e,t){return(e&t)===t}function ky(e,t){return!!(e&t)}class wi{constructor(t,n){this.type=t,this.value=n}}class eI{constructor(t,n,...i){this.type=t,this.operator=n,this.args=i}}function Ny(){return{variables:new Set,properties:new Set}}function rc(e,t){switch(typeof e){case"boolean":return new wi(me,e);case"number":return new wi(yt,e);case"string":return new wi(cr,e)}if(!Array.isArray(e))throw new Error("Expression must be an array or a primitive value");if(e.length===0)throw new Error("Empty expression");if(typeof e[0]=="string")return oI(e,t);for(const i of e)if(typeof i!="number")throw new Error("Expected an array of numbers");let n=Go;return(e.length===3||e.length===4)&&(n|=Mf),new wi(n,e)}const Y={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},nI={[Y.Number]:Ft(Wt(1,1/0,Ke),yt),[Y.String]:Ft(Wt(1,1/0,Ke),cr),[Y.Get]:Ft(iI,Ke),[Y.Var]:Ft(sI,Ke),[Y.Resolution]:Ft(rI,yt),[Y.Any]:Ft(Wt(2,1/0,me),me),[Y.All]:Ft(Wt(2,1/0,me),me),[Y.Not]:Ft(Wt(1,1,me),me),[Y.Equal]:Ft(Wt(2,2,Ke),me),[Y.NotEqual]:Ft(Wt(2,2,Ke),me),[Y.GreaterThan]:Ft(Wt(2,2,Ke),me),[Y.GreaterThanOrEqualTo]:Ft(Wt(2,2,Ke),me),[Y.LessThan]:Ft(Wt(2,2,Ke),me),[Y.LessThanOrEqualTo]:Ft(Wt(2,2,Ke),me),[Y.Multiply]:Ft(Wt(2,1/0,yt),yt),[Y.Divide]:Ft(Wt(2,2,yt),yt),[Y.Add]:Ft(Wt(2,1/0,yt),yt),[Y.Subtract]:Ft(Wt(2,2,yt),yt),[Y.Clamp]:Ft(Wt(3,3,yt),yt),[Y.Mod]:Ft(Wt(2,2,yt),yt),[Y.Pow]:Ft(Wt(2,2,yt),yt),[Y.Abs]:Ft(Wt(1,1,yt),yt),[Y.Floor]:Ft(Wt(1,1,yt),yt),[Y.Ceil]:Ft(Wt(1,1,yt),yt),[Y.Round]:Ft(Wt(1,1,yt),yt),[Y.Sin]:Ft(Wt(1,1,yt),yt),[Y.Cos]:Ft(Wt(1,1,yt),yt),[Y.Atan]:Ft(Wt(1,2,yt),yt),[Y.Sqrt]:Ft(Wt(1,1,yt),yt),[Y.Match]:Ft(Wt(4,1/0,cr|yt),Ke)};function iI(e,t){if(e.length!==2)throw new Error("Expected 1 argument for get operation");const n=rc(e[1],t);if(!(n instanceof wi))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.properties.add(n.value),[n]}function sI(e,t){if(e.length!==2)throw new Error("Expected 1 argument for var operation");const n=rc(e[1],t);if(!(n instanceof wi))throw new Error("Expected a literal argument for var operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.variables.add(n.value),[n]}function rI(e,t){const n=e[0];if(e.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function Wt(e,t,n){return function(i,s){const r=i[0],o=i.length-1;if(e===t){if(o!==e){const l=e===1?"":"s";throw new Error(`Expected ${e} argument${l} for operation ${r}, got ${o}`)}}else if(o<e||o>t)throw new Error(`Expected ${e} to ${t} arguments for operation ${r}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const c=rc(i[l+1],s);if(!ky(n,c.type)){const u=ul(n),h=ul(c.type);throw new Error(`Unexpected type for argument ${l} of ${r} operation : got ${u} but expected ${h}`)}a[l]=c}return a}}function Ft(e,t){return function(n,i){const s=n[0],r=e(n,i);return new eI(t,s,...r)}}function oI(e,t){const n=e[0],i=nI[n];if(!i)throw new Error(`Unknown operator: ${n}`);return i(e,t)}function Gy(){return{variables:{},properties:{},resolution:NaN}}function Oi(e,t,n){const i=rc(e,n);if(!ky(t,i.type)){const s=ul(t),r=ul(i.type);throw new Error(`Expected expression to be of type ${s}, got ${r}`)}return ds(i)}function ds(e,t){if(e instanceof wi)return function(){return e.value};const n=e.operator;switch(n){case Y.Number:case Y.String:return aI(e);case Y.Get:case Y.Var:return lI(e);case Y.Resolution:return i=>i.resolution;case Y.Any:case Y.All:case Y.Not:return uI(e);case Y.Equal:case Y.NotEqual:case Y.LessThan:case Y.LessThanOrEqualTo:case Y.GreaterThan:case Y.GreaterThanOrEqualTo:return cI(e);case Y.Multiply:case Y.Divide:case Y.Add:case Y.Subtract:case Y.Clamp:case Y.Mod:case Y.Pow:case Y.Abs:case Y.Floor:case Y.Ceil:case Y.Round:case Y.Sin:case Y.Cos:case Y.Atan:case Y.Sqrt:return hI(e);case Y.Match:return fI(e);default:throw new Error(`Unsupported operator ${n}`)}}function aI(e,t){const n=e.operator,i=e.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=ds(e.args[r]);switch(n){case Y.Number:case Y.String:return r=>{for(let o=0;o<i;++o){const a=s[o](r);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function lI(e,t){const n=e.args[0];if(!(n instanceof wi))throw new Error("Expected literal name");const i=n.value;if(typeof i!="string")throw new Error("Expected string name");switch(e.operator){case Y.Get:return s=>s.properties[i];case Y.Var:return s=>s.variables[i];default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function cI(e,t){const n=e.operator,i=ds(e.args[0]),s=ds(e.args[1]);switch(n){case Y.Equal:return r=>i(r)===s(r);case Y.NotEqual:return r=>i(r)!==s(r);case Y.LessThan:return r=>i(r)<s(r);case Y.LessThanOrEqualTo:return r=>i(r)<=s(r);case Y.GreaterThan:return r=>i(r)>s(r);case Y.GreaterThanOrEqualTo:return r=>i(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${n}`)}}function uI(e,t){const n=e.operator,i=e.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=ds(e.args[r]);switch(n){case Y.Any:return r=>{for(let o=0;o<i;++o)if(s[o](r))return!0;return!1};case Y.All:return r=>{for(let o=0;o<i;++o)if(!s[o](r))return!1;return!0};case Y.Not:return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${n}`)}}function hI(e,t){const n=e.operator,i=e.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=ds(e.args[r]);switch(n){case Y.Multiply:return r=>{let o=1;for(let a=0;a<i;++a)o*=s[a](r);return o};case Y.Divide:return r=>s[0](r)/s[1](r);case Y.Add:return r=>{let o=0;for(let a=0;a<i;++a)o+=s[a](r);return o};case Y.Subtract:return r=>s[0](r)-s[1](r);case Y.Clamp:return r=>{const o=s[0](r),a=s[1](r);if(o<a)return a;const l=s[2](r);return o>l?l:o};case Y.Mod:return r=>s[0](r)%s[1](r);case Y.Pow:return r=>Math.pow(s[0](r),s[1](r));case Y.Abs:return r=>Math.abs(s[0](r));case Y.Floor:return r=>Math.floor(s[0](r));case Y.Ceil:return r=>Math.ceil(s[0](r));case Y.Round:return r=>Math.round(s[0](r));case Y.Sin:return r=>Math.sin(s[0](r));case Y.Cos:return r=>Math.cos(s[0](r));case Y.Atan:return i===2?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case Y.Sqrt:return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${n}`)}}function fI(e,t){const n=e.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=ds(e.args[s]);return s=>{const r=i[0](s);for(let o=1;o<n;o+=2)if(r===i[o](s))return i[o+1](s);return i[n-1](s)}}function dI(e){return!0}function gI(e){const t=Ny(),n=mI(e,t),i=Gy();return function(s,r){return i.properties=s.getPropertiesInternal(),i.resolution=r,n(i)}}function Vg(e){const t=Ny(),n=e.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Ju(e[o],t);const s=Gy(),r=new Array(n);return function(o,a){s.properties=o.getPropertiesInternal(),s.resolution=a;for(let l=0;l<n;++l)r[l]=i[l](s);return r}}function mI(e,t){const n=e.length,i=new Array(n);for(let s=0;s<n;++s){const r=e[s],o="filter"in r?Oi(r.filter,me,t):dI;let a;if(Array.isArray(r.style)){const l=r.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Ju(r.style[c],t)}else a=[Ju(r.style,t)];i[s]={filter:o,styles:a}}return function(s){const r=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(s)&&!(e[a].else&&o)){o=!0;for(const c of i[a].styles){const u=c(s);u&&r.push(u)}}}return r}}function Ju(e,t){const n=Co(e,"",t),i=To(e,"",t),s=_I(e,t),r=pI(e,t),o=Ie(e,"z-index",t),a=new cs;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(i){const u=i(l);u&&(c=!1),a.setStroke(u)}if(s){const u=s(l);u&&(c=!1),a.setText(u)}if(r){const u=r(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function Co(e,t,n){const i=zy(e,t+"fill-color",n);if(!i)return null;const s=new xf;return function(r){const o=i(r);return o==="none"?null:(s.setColor(o),s)}}function To(e,t,n){const i=Ie(e,t+"stroke-width",n),s=zy(e,t+"stroke-color",n);if(!i&&!s)return null;const r=_i(e,t+"stroke-line-cap",n),o=_i(e,t+"stroke-line-join",n),a=Wy(e,t+"stroke-line-dash",n),l=Ie(e,t+"stroke-line-dash-offset",n),c=Ie(e,t+"stroke-miter-limit",n),u=new Cf;return function(h){if(s){const f=s(h);if(f==="none")return null;u.setColor(f)}if(i&&u.setWidth(i(h)),r){const f=r(h);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(f)}if(o){const f=o(h);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(f)}return a&&u.setLineDash(a(h)),l&&u.setLineDashOffset(l(h)),c&&u.setMiterLimit(c(h)),u}}function _I(e,t){const n="text-",i=_i(e,n+"value",t);if(!i)return null;const s=Co(e,n,t),r=Co(e,n+"background-",t),o=To(e,n,t),a=To(e,n+"background-",t),l=_i(e,n+"font",t),c=Ie(e,n+"max-angle",t),u=Ie(e,n+"offset-x",t),h=Ie(e,n+"offset-y",t),f=So(e,n+"overflow",t),d=_i(e,n+"placement",t),g=Ie(e,n+"repeat",t),m=oc(e,n+"scale",t),p=So(e,n+"rotate-with-view",t),y=Ie(e,n+"rotation",t),x=_i(e,n+"align",t),E=_i(e,n+"justify",t),v=_i(e,n+"baseline",t),S=Wy(e,n+"padding",t),T=new TR({});return function(b){if(T.setText(i(b)),s&&T.setFill(s(b)),r&&T.setBackgroundFill(r(b)),o&&T.setStroke(o(b)),a&&T.setBackgroundStroke(a(b)),l&&T.setFont(l(b)),c&&T.setMaxAngle(c(b)),u&&T.setOffsetX(u(b)),h&&T.setOffsetY(h(b)),f&&T.setOverflow(f(b)),d){const R=d(b);if(R!=="point"&&R!=="line")throw new Error("Expected point or line for text-placement");T.setPlacement(R)}if(g&&T.setRepeat(g(b)),m&&T.setScale(m(b)),p&&T.setRotateWithView(p(b)),y&&T.setRotation(y(b)),x){const R=x(b);if(R!=="left"&&R!=="center"&&R!=="right"&&R!=="end"&&R!=="start")throw new Error("Expected left, right, center, start, or end for text-align");T.setTextAlign(R)}if(E){const R=E(b);if(R!=="left"&&R!=="right"&&R!=="center")throw new Error("Expected left, right, or center for text-justify");T.setJustify(R)}if(v){const R=v(b);if(R!=="bottom"&&R!=="top"&&R!=="middle"&&R!=="alphabetic"&&R!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");T.setTextBaseline(R)}return S&&T.setPadding(S(b)),T}}function pI(e,t){return"icon-src"in e?yI(e,t):"shape-points"in e?xI(e,t):"circle-radius"in e?vI(e,t):null}function yI(e,t){const n="icon-",i=n+"src",s=Uy(e[i],i),r=hl(e,n+"anchor",t),o=oc(e,n+"scale",t),a=Ie(e,n+"opacity",t),l=hl(e,n+"displacement",t),c=Ie(e,n+"rotation",t),u=So(e,n+"rotate-with-view",t),h=Yg(e,n+"anchor-origin"),f=Hg(e,n+"anchor-x-units"),d=Hg(e,n+"anchor-y-units"),g=TI(e,n+"color"),m=EI(e,n+"cross-origin"),p=CI(e,n+"offset"),y=Yg(e,n+"offset-origin"),x=Us(e,n+"width"),E=Us(e,n+"height"),v=wI(e,n+"size"),S=Af(e,n+"declutter"),T=new cl({src:s,anchorOrigin:h,anchorXUnits:f,anchorYUnits:d,color:g,crossOrigin:m,offset:p,offsetOrigin:y,height:E,width:x,size:v,declutterMode:S});return function(b){return a&&T.setOpacity(a(b)),l&&T.setDisplacement(l(b)),c&&T.setRotation(c(b)),u&&T.setRotateWithView(u(b)),o&&T.setScale(o(b)),r&&T.setAnchor(r(b)),T}}function xI(e,t){const n="shape-",i=n+"points",s=$y(e[i],i),r=Co(e,n,t),o=To(e,n,t),a=oc(e,n+"scale",t),l=hl(e,n+"displacement",t),c=Ie(e,n+"rotation",t),u=So(e,n+"rotate-with-view",t),h=Us(e,n+"radius"),f=Us(e,n+"radius1"),d=Us(e,n+"radius2"),g=Us(e,n+"angle"),m=Af(e,n+"declutter-mode"),p=new by({points:s,radius:h,radius1:f,radius2:d,angle:g,declutterMode:m});return function(y){return r&&p.setFill(r(y)),o&&p.setStroke(o(y)),l&&p.setDisplacement(l(y)),c&&p.setRotation(c(y)),u&&p.setRotateWithView(u(y)),a&&p.setScale(a(y)),p}}function vI(e,t){const n="circle-",i=Co(e,n,t),s=To(e,n,t),r=Ie(e,n+"radius",t),o=oc(e,n+"scale",t),a=hl(e,n+"displacement",t),l=Ie(e,n+"rotation",t),c=So(e,n+"rotate-with-view",t),u=Af(e,n+"declutter-mode"),h=new My({radius:5,declutterMode:u});return function(f){return r&&h.setRadius(r(f)),i&&h.setFill(i(f)),s&&h.setStroke(s(f)),a&&h.setDisplacement(a(f)),l&&h.setRotation(l(f)),c&&h.setRotateWithView(c(f)),o&&h.setScale(o(f)),h}}function Ie(e,t,n){if(!(t in e))return;const i=Oi(e[t],yt,n);return function(s){return $y(i(s),t)}}function _i(e,t,n){if(!(t in e))return null;const i=Oi(e[t],cr,n);return function(s){return Uy(i(s),t)}}function So(e,t,n){if(!(t in e))return null;const i=Oi(e[t],me,n);return function(s){const r=i(s);if(typeof r!="boolean")throw new Error(`Expected a boolean for ${t}`);return r}}function zy(e,t,n){if(!(t in e))return null;const i=Oi(e[t],Mf|cr,n);return function(s){return Vy(i(s),t)}}function Wy(e,t,n){if(!(t in e))return null;const i=Oi(e[t],Go,n);return function(s){return zo(i(s),t)}}function hl(e,t,n){if(!(t in e))return null;const i=Oi(e[t],Go,n);return function(s){const r=zo(i(s),t);if(r.length!==2)throw new Error(`Expected two numbers for ${t}`);return r}}function oc(e,t,n){if(!(t in e))return null;const i=Oi(e[t],Go|yt,n);return function(s){return SI(i(s),t)}}function Us(e,t){const n=e[t];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}}function wI(e,t){const n=e[t];if(n!==void 0){if(typeof n=="number")return De(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${t}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return n}}function EI(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}}function Yg(e,t){const n=e[t];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function Hg(e,t){const n=e[t];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return n}}function CI(e,t){const n=e[t];if(n!==void 0)return zo(n,t)}function Af(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function TI(e,t){const n=e[t];if(n!==void 0)return Vy(n,t)}function zo(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const n=e.length;for(let i=0;i<n;++i)if(typeof e[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function Uy(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function $y(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function Vy(e,t){if(typeof e=="string")return e;const n=zo(e,t),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return n}function SI(e,t){if(typeof e=="number")return e;const n=zo(e,t);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return n}const Bg={RENDER_ORDER:"renderOrder"};class RI extends ec{constructor(t){t=t||{};const n=Object.assign({},t);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Bg.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new bf(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(Bg.RENDER_ORDER,t)}setStyle(t){this.style_=II(t),this.styleFunction_=t===null?void 0:wR(this.style_),this.changed()}}function II(e){if(e===void 0)return ER;if(!e)return null;if(typeof e=="function"||e instanceof cs)return e;if(!Array.isArray(e))return Vg([e]);if(e.length===0)return[];const t=e.length,n=e[0];if(n instanceof cs){const s=new Array(t);for(let r=0;r<t;++r){const o=e[r];if(!(o instanceof cs))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in n){const s=new Array(t);for(let r=0;r<t;++r){const o=e[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return gI(s)}return Vg(e)}const bI=RI;class MI extends If{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,s=t.viewState,r=s.resolution,o=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(n.extent!==void 0&&(l=Xs(l,zn(n.extent,s.projection))),!a[Qt.ANIMATING]&&!a[Qt.INTERACTING]&&!vr(l))if(o){const c=s.projection,u=o.getImage(l,r,i,c);u&&(this.loadImage(u)?this.image_=u:u.getState()===_t.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),s=Kt(n.pixelToCoordinateTransform,t.slice()),r=i.getExtent();if(r&&!Lo(r,s))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=Nt(o),c=Math.floor(a.width*((s[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=Ne(o),h=Math.floor(a.height*((o[3]-s[1])/u));return h<0||h>=a.height?null:this.getImageData(a,c,h)}renderFrame(t,n){const i=this.image_,s=i.getExtent(),r=i.getResolution(),[o,a]=Array.isArray(r)?r:[r,r],l=i.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],u=t.pixelRatio,h=t.viewState,f=h.center,d=h.resolution,g=u*o/(d*l),m=u*a/(d*l),p=t.extent,y=h.resolution,x=h.rotation,E=Math.round(Nt(p)/y*u),v=Math.round(Ne(p)/y*u);fn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,x,-E/2,-v/2),Zl(this.inversePixelTransform,this.pixelTransform);const S=Bh(this.pixelTransform);this.useContainer(n,S,this.getBackground(t));const T=this.context,b=T.canvas;b.width!=E||b.height!=v?(b.width=E,b.height=v):this.containerReused||T.clearRect(0,0,E,v);let R=!1,U=!0;if(c.extent){const it=zn(c.extent,h.projection);U=ve(it,t.extent),R=U&&!xi(it,t.extent),R&&this.clipUnrotated(T,t,it)}const A=i.getImage(),D=fn(this.tempTransform,E/2,v/2,g,m,0,l*(s[0]-f[0])/o,l*(f[1]-s[3])/a);this.renderedResolution=a*u/l;const F=A.width*D[0],$=A.height*D[3];if(this.getLayer().getSource().getInterpolate()||(T.imageSmoothingEnabled=!1),this.preRender(T,t),U&&F>=.5&&$>=.5){const it=D[4],X=D[5],H=c.opacity;let N;H!==1&&(N=T.globalAlpha,T.globalAlpha=H),T.drawImage(A,0,0,+A.width,+A.height,it,X,F,$),H!==1&&(T.globalAlpha=N)}return this.postRender(T,t),R&&T.restore(),T.imageSmoothingEnabled=!0,S!==b.style.transform&&(b.style.transform=S),this.container}}const AI=MI,Wo={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ma=[Wo.FILL],Ei=[Wo.STROKE],Qi=[Wo.BEGIN_PATH],Xg=[Wo.CLOSE_PATH],ot=Wo;class OI{drawCustom(t,n,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,n){}drawFeature(t,n){}drawGeometryCollection(t,n){}drawLineString(t,n){}drawMultiLineString(t,n){}drawMultiPoint(t,n){}drawMultiPolygon(t,n){}drawPoint(t,n){}drawPolygon(t,n){}drawText(t,n){}setFillStrokeStyle(t,n){}setImageStyle(t,n){}setTextStyle(t,n){}}const Yy=OI;class LI extends Yy{constructor(t,n,i,s){super(),this.tolerance=t,this.maxExtent=n,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})}appendFlatPointCoordinates(t,n){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=t.length;a<l;a+=n)s[0]=t[a],s[1]=t[a+1],Lo(i,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(t,n,i,s,r,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=s);let u=t[n],h=t[n+1];const f=this.tmpCoordinate_;let d=!0,g,m,p;for(g=n+s;g<i;g+=s)f[0]=t[g],f[1]=t[g+1],p=Fu(c,f),p!==m?(d&&(a[l++]=u,a[l++]=h,d=!1),a[l++]=f[0],a[l++]=f[1]):p===ce.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],d=!1):d=!0,u=f[0],h=f[1],m=p;return(r&&d||g===n+s)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(t,n,i,s,r){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(t,n,l,s,!1,!1);r.push(c),n=l}return n}drawCustom(t,n,i,s){this.beginGeometry(t,n);const r=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,c,u,h,f;switch(r){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),h=[];const d=t.getEndss();f=0;for(let g=0,m=d.length;g<m;++g){const p=[];f=this.drawCustomCoordinates_(l,f,d[g],o,p),h.push(p)}this.instructions.push([ot.CUSTOM,a,h,t,i,Wu]),this.hitDetectionInstructions.push([ot.CUSTOM,a,h,t,s||i,Wu]);break;case"Polygon":case"MultiLineString":u=[],l=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(l,0,t.getEnds(),o,u),this.instructions.push([ot.CUSTOM,a,u,t,i,po]),this.hitDetectionInstructions.push([ot.CUSTOM,a,u,t,s||i,po]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([ot.CUSTOM,a,c,t,i,vi]),this.hitDetectionInstructions.push([ot.CUSTOM,a,c,t,s||i,vi]);break;case"MultiPoint":l=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([ot.CUSTOM,a,c,t,i,vi]),this.hitDetectionInstructions.push([ot.CUSTOM,a,c,t,s||i,vi]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([ot.CUSTOM,a,c,t,i]),this.hitDetectionInstructions.push([ot.CUSTOM,a,c,t,s||i]);break}this.endGeometry(n)}beginGeometry(t,n){this.beginGeometryInstruction1_=[ot.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ot.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let n;const i=t.length;let s,r,o=-1;for(n=0;n<i;++n)s=t[n],r=s[0],r==ot.END_GEOMETRY?o=n:r==ot.BEGIN_GEOMETRY&&(s[2]=n,XE(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(t,n){const i=this.state;if(t){const s=t.getColor();i.fillStyle=En(s||Re)}else i.fillStyle=void 0;if(n){const s=n.getColor();i.strokeStyle=En(s||vo);const r=n.getLineCap();i.lineCap=r!==void 0?r:ar;const o=n.getLineDash();i.lineDash=o?o.slice():Hn;const a=n.getLineDashOffset();i.lineDashOffset=a||Bn;const l=n.getLineJoin();i.lineJoin=l!==void 0?l:lr;const c=n.getWidth();i.lineWidth=c!==void 0?c:Eo;const u=n.getMiterLimit();i.miterLimit=u!==void 0?u:xo,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const n=t.fillStyle,i=[ot.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[ot.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,n){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,n){const i=t.strokeStyle,s=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||r!=t.currentLineDash&&!Ai(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[ot.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Np(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Xh(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Uo=LI;class FI extends Uo{constructor(t,n,i,s){super(t,n,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([ot.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ot.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([ot.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ot.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,n){const i=t.getAnchor(),s=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}}const PI=FI;class DI extends Uo{constructor(t,n,i,s){super(t,n,i,s)}drawFlatCoordinates_(t,n,i,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,s,!1,!1),a=[ot.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,n){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Hn,Bn],Qi);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Ei),this.endGeometry(n)}drawMultiLineString(t,n){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Hn,Bn],Qi);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(Ei),this.endGeometry(n)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Ei),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Ei),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Qi)}}const kI=DI;class NI extends Uo{constructor(t,n,i,s){super(t,n,i,s)}drawFlatCoordinatess_(t,n,i,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,l=i.length;this.instructions.push(Qi),this.hitDetectionInstructions.push(Qi);for(let c=0;c<l;++c){const u=i[c],h=this.coordinates.length,f=this.appendFlatLineCoordinates(t,n,u,s,!0,!a),d=[ot.MOVE_TO_LINE_TO,h,f];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(Xg),this.hitDetectionInstructions.push(Xg)),n=u}return o&&(this.instructions.push(ma),this.hitDetectionInstructions.push(ma)),a&&(this.instructions.push(Ei),this.hitDetectionInstructions.push(Ei)),n}drawCircle(t,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ot.SET_FILL_STYLE,Re]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Hn,Bn]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[ot.CIRCLE,l];this.instructions.push(Qi,c),this.hitDetectionInstructions.push(Qi,c),i.fillStyle!==void 0&&(this.instructions.push(ma),this.hitDetectionInstructions.push(ma)),i.strokeStyle!==void 0&&(this.instructions.push(Ei),this.hitDetectionInstructions.push(Ei)),this.endGeometry(n)}drawPolygon(t,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ot.SET_FILL_STYLE,Re]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Hn,Bn]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(n)}drawMultiPolygon(t,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ot.SET_FILL_STYLE,Re]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ot.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Hn,Bn]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const n=this.coordinates;for(let i=0,s=n.length;i<s;++i)n[i]=Vi(n[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const Zg=NI;function GI(e,t,n,i,s){const r=[];let o=n,a=0,l=t.slice(n,2);for(;a<e&&o+s<i;){const[c,u]=l.slice(-2),h=t[o+s],f=t[o+s+1],d=Math.sqrt((h-c)*(h-c)+(f-u)*(f-u));if(a+=d,a>=e){const g=(e-a+d)/d,m=Fe(c,h,g),p=Fe(u,f,g);l.push(m,p),r.push(l),l=[m,p],a==e&&(o+=s),a=0}else if(a<e)l.push(t[o+s],t[o+s+1]),o+=s;else{const g=d-a,m=Fe(c,h,g/d),p=Fe(u,f,g/d);l.push(m,p),r.push(l),l=[m,p],a=0,o+=s}}return a>0&&r.push(l),r}function zI(e,t,n,i,s){let r=n,o=n,a=0,l=0,c=n,u,h,f,d,g,m,p,y,x,E;for(h=n;h<i;h+=s){const v=t[h],S=t[h+1];g!==void 0&&(x=v-g,E=S-m,d=Math.sqrt(x*x+E*E),p!==void 0&&(l+=f,u=Math.acos((p*x+y*E)/(f*d)),u>e&&(l>a&&(a=l,r=c,o=h),l=0,c=h-s)),f=d,p=x,y=E),g=v,m=S}return l+=d,l>a?[c,h]:[r,o]}const fl={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class WI extends Uo{constructor(t,n,i,s){super(t,n,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Re]={fillStyle:Re},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,n){const i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!s)return;const o=this.coordinates;let a=o.length;const l=t.getType();let c=null,u=t.getStride();if(r.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!ve(this.getBufferedMaxExtent(),t.getExtent()))return;let h;if(c=t.getFlatCoordinates(),l=="LineString")h=[c.length];else if(l=="MultiLineString")h=t.getEnds();else if(l=="Polygon")h=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=t.getEndss();h=[];for(let p=0,y=m.length;p<y;++p)h.push(m[p][0])}this.beginGeometry(t,n);const f=r.repeat,d=f?void 0:r.textAlign;let g=0;for(let m=0,p=h.length;m<p;++m){let y;f?y=GI(f*this.resolution,c,g,h[m],u):y=[c.slice(g,h[m])];for(let x=0,E=y.length;x<E;++x){const v=y[x];let S=0,T=v.length;if(d==null){const R=zI(r.maxAngle,v,0,v.length,2);S=R[0],T=R[1]}for(let R=S;R<T;R+=u)o.push(v[R],v[R+1]);const b=o.length;g=h[m],this.drawChars_(a,b),a=b}}this.endGeometry(n)}else{let h=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),u=2;break;case"Polygon":c=t.getFlatInteriorPoint(),r.overflow||h.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const y=t.getFlatInteriorPoints();c=[];for(let x=0,E=y.length;x<E;x+=3)r.overflow||h.push(y[x+2]/this.resolution),c.push(y[x],y[x+1]);if(c.length===0)return;u=2;break}const f=this.appendFlatPointCoordinates(c,u);if(f===a)return;if(h&&(f-a)/2!==c.length/u){let y=a/2;h=h.filter((x,E)=>{const v=o[(y+E)*2]===c[E*u]&&o[(y+E)*2+1]===c[E*u+1];return v||--y,v})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&this.updateFillStyle(this.state,this.createFill),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);let d=r.padding;if(d!=Ji&&(r.scale[0]<0||r.scale[1]<0)){let y=r.padding[0],x=r.padding[1],E=r.padding[2],v=r.padding[3];r.scale[0]<0&&(x=-x,v=-v),r.scale[1]<0&&(y=-y,E=-E),d=[y,x,E,v]}const g=this.pixelRatio;this.instructions.push([ot.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,d==Ji?Ji:d.map(function(y){return y*g}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const m=1/g,p=this.state.fillStyle;r.backgroundFill&&(this.state.fillStyle=Re,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([ot.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,d,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Re:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),r.backgroundFill&&(this.state.fillStyle=p,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:n.font,textAlign:n.textAlign||wo,justify:n.justify,textBaseline:n.textBaseline||el,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,n){const i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=fl[s.textBaseline],u=this.textOffsetY_*l,h=this.text_,f=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([ot.DRAW_CHARS,t,n,c,s.overflow,a,s.maxAngle,l,u,r,f*l,h,o,1]),this.hitDetectionInstructions.push([ot.DRAW_CHARS,t,n,c,s.overflow,a&&Re,s.maxAngle,l,u,r,f*l,h,o,1/l])}setTextStyle(t,n){let i,s,r;if(!t)this.text_="";else{const o=t.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=En(o.getColor()||Re)):(s=null,this.textFillState_=s);const a=t.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const g=a.getLineDash(),m=a.getLineDashOffset(),p=a.getWidth(),y=a.getMiterLimit();r.lineCap=a.getLineCap()||ar,r.lineDash=g?g.slice():Hn,r.lineDashOffset=m===void 0?Bn:m,r.lineJoin=a.getLineJoin()||lr,r.lineWidth=p===void 0?Eo:p,r.miterLimit=y===void 0?xo:y,r.strokeStyle=En(a.getColor()||vo)}i=this.textState_;const l=t.getFont()||gy;kT(l);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||el,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Ji,i.scale=c===void 0?[1,1]:c;const u=t.getOffsetX(),h=t.getOffsetY(),f=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=f===void 0?!1:f,this.textRotation_=d===void 0?0:d,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:Lt(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+Lt(s.fillStyle):""}this.declutterImageWithText_=n}}const UI={Circle:Zg,Default:Uo,Image:PI,LineString:kI,Polygon:Zg,Text:WI};class $I{constructor(t,n,i,s){this.tolerance_=t,this.maxExtent_=n,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const n in this.buildersByZIndex_){t[n]=t[n]||{};const i=this.buildersByZIndex_[n];for(const s in i){const r=i[s].finish();t[n][s]=r}}return t}getBuilder(t,n){const i=t!==void 0?t.toString():"0";let s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let r=s[n];if(r===void 0){const o=UI[n];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[n]=r}return r}}const jg=$I;function VI(e,t,n,i,s,r,o,a,l,c,u,h){let f=e[t],d=e[t+1],g=0,m=0,p=0,y=0;function x(){g=f,m=d,t+=i,f=e[t],d=e[t+1],y+=p,p=Math.sqrt((f-g)*(f-g)+(d-m)*(d-m))}do x();while(t<n-i&&y+p<r);let E=p===0?0:(r-y)/p;const v=Fe(g,f,E),S=Fe(m,d,E),T=t-i,b=y,R=r+a*l(c,s,u);for(;t<n-i&&y+p<R;)x();E=p===0?0:(R-y)/p;const U=Fe(g,f,E),A=Fe(m,d,E);let D;if(h){const H=[v,S,U,A];ty(H,0,4,2,h,H,H),D=H[0]>H[2]}else D=v>U;const F=Math.PI,$=[],it=T+i===t;t=T,p=0,y=b,f=e[t],d=e[t+1];let X;if(it){x(),X=Math.atan2(d-m,f-g),D&&(X+=X>0?-F:F);const H=(U+v)/2,N=(A+S)/2;return $[0]=[H,N,(R-r)/2,X,s],$}s=s.replace(/\n/g," ");for(let H=0,N=s.length;H<N;){x();let j=Math.atan2(d-m,f-g);if(D&&(j+=j>0?-F:F),X!==void 0){let mt=j-X;if(mt+=mt>F?-2*F:mt<-F?2*F:0,Math.abs(mt)>o)return null}X=j;const rt=H;let dt=0;for(;H<N;++H){const mt=D?N-H-1:H,wt=a*l(c,s[mt],u);if(t+i<n&&y+p<r+dt+wt/2)break;dt+=wt}if(H===rt)continue;const Mt=D?s.substring(N-rt,N-H):s.substring(rt,H);E=p===0?0:(r+dt/2-y)/p;const G=Fe(g,f,E),Bt=Fe(m,d,E);$.push([G,Bt,dt/2,j,Mt]),r+=dt}return $}const As=Ze(),oi=[],An=[],On=[],ai=[];function Kg(e){return e[3].declutterBox}const qg=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Xc(e,t){return t==="start"?t=qg.test(e)?"right":"left":t==="end"&&(t=qg.test(e)?"left":"right"),fl[t]}function YI(e,t,n){return n>0&&e.push(`
`,""),e.push(t,""),e}class HI{constructor(t,n,i,s){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=un(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,n,i,s){const r=t+n+i+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=Array.isArray(t),f=l.justify?fl[l.justify]:Xc(Array.isArray(t)?t[0]:t,l.textAlign||wo),d=s&&o.lineWidth?o.lineWidth:0,g=h?t:t.split(`
`).reduce(YI,[]),{width:m,height:p,widths:y,heights:x,lineWidths:E}=GT(l,g),v=m+d,S=[],T=(v+2)*u[0],b=(p+d)*u[1],R={width:T<0?Math.floor(T):Math.ceil(T),height:b<0?Math.floor(b):Math.ceil(b),contextInstructions:S};(u[0]!=1||u[1]!=1)&&S.push("scale",u),s&&(S.push("strokeStyle",o.strokeStyle),S.push("lineWidth",d),S.push("lineCap",o.lineCap),S.push("lineJoin",o.lineJoin),S.push("miterLimit",o.miterLimit),S.push("setLineDash",[o.lineDash]),S.push("lineDashOffset",o.lineDashOffset)),i&&S.push("fillStyle",a.fillStyle),S.push("textBaseline","middle"),S.push("textAlign","center");const U=.5-f;let A=f*v+U*d;const D=[],F=[];let $=0,it=0,X=0,H=0,N;for(let j=0,rt=g.length;j<rt;j+=2){const dt=g[j];if(dt===`
`){it+=$,$=0,A=f*v+U*d,++H;continue}const Mt=g[j+1]||l.font;Mt!==N&&(s&&D.push("font",Mt),i&&F.push("font",Mt),N=Mt),$=Math.max($,x[X]);const G=[dt,A+U*y[X]+f*(y[X]-E[H]),.5*(d+$)+it];A+=y[X],s&&D.push("strokeText",G),i&&F.push("fillText",G),++X}return Array.prototype.push.apply(S,D),Array.prototype.push.apply(S,F),this.labels_[r]=R,R}replayTextBackground_(t,n,i,s,r,o,a){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,r),t.lineTo.apply(t,n),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,n,i,s,r,o,a,l,c,u,h,f,d,g,m,p){a*=f[0],l*=f[1];let y=i-a,x=s-l;const E=r+c>t?t-c:r,v=o+u>n?n-u:o,S=g[3]+E*f[0]+g[1],T=g[0]+v*f[1]+g[2],b=y-g[3],R=x-g[0];(m||h!==0)&&(oi[0]=b,ai[0]=b,oi[1]=R,An[1]=R,An[0]=b+S,On[0]=An[0],On[1]=R+T,ai[1]=On[1]);let U;return h!==0?(U=fn(un(),i,s,1,1,h,-i,-s),Kt(U,oi),Kt(U,An),Kt(U,On),Kt(U,ai),Mi(Math.min(oi[0],An[0],On[0],ai[0]),Math.min(oi[1],An[1],On[1],ai[1]),Math.max(oi[0],An[0],On[0],ai[0]),Math.max(oi[1],An[1],On[1],ai[1]),As)):Mi(Math.min(b,b+S),Math.min(R,R+T),Math.max(b,b+S),Math.max(R,R+T),As),d&&(y=Math.round(y),x=Math.round(x)),{drawImageX:y,drawImageY:x,drawImageW:E,drawImageH:v,originX:c,originY:u,declutterBox:{minX:As[0],minY:As[1],maxX:As[2],maxY:As[3],value:p},canvasTransform:U,scale:f}}replayImageOrLabel_(t,n,i,s,r,o,a){const l=!!(o||a),c=s.declutterBox,u=t.canvas,h=a?a[2]*s.scale[0]/2:0;return c.minX-h<=u.width/n&&c.maxX+h>=0&&c.minY-h<=u.height/n&&c.maxY+h>=0&&(l&&this.replayTextBackground_(t,oi,An,On,ai,o,a),zT(t,s.canvasTransform,r,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){if(this.alignFill_){const n=Kt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.lineDashOffset=n[7],t.setLineDash(n[6])}drawLabelWithPointPlacement_(t,n,i,s){const r=this.textStates[n],o=this.createLabel(t,n,s,i),a=this.strokeStates[i],l=this.pixelRatio,c=Xc(Array.isArray(t)?t[0]:t,r.textAlign||wo),u=fl[r.textBaseline||el],h=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*r.scale[0],d=c*f+2*(.5-c)*h,g=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:d,anchorY:g}}execute_(t,n,i,s,r,o,a,l){let c;this.pixelCoordinates_&&Ai(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=ls(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),oC(this.renderedTransform_,i));let u=0;const h=s.length;let f=0,d,g,m,p,y,x,E,v,S,T,b,R,U=0,A=0,D=null,F=null;const $=this.coordinateCache_,it=this.viewRotation_,X=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,H={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:it},N=this.instructions!=s||this.overlaps?0:200;let j,rt,dt,Mt;for(;u<h;){const G=s[u];switch(G[0]){case ot.BEGIN_GEOMETRY:j=G[1],Mt=G[3],j.getGeometry()?a!==void 0&&!ve(a,Mt.getExtent())?u=G[2]+1:++u:u=G[2];break;case ot.BEGIN_PATH:U>N&&(this.fill_(t),U=0),A>N&&(t.stroke(),A=0),!U&&!A&&(t.beginPath(),p=NaN,y=NaN),++u;break;case ot.CIRCLE:f=G[1];const mt=c[f],wt=c[f+1],Gt=c[f+2],P=c[f+3],B=Gt-mt,I=P-wt,z=Math.sqrt(B*B+I*I);t.moveTo(mt+z,wt),t.arc(mt,wt,z,0,2*Math.PI,!0),++u;break;case ot.CLOSE_PATH:t.closePath(),++u;break;case ot.CUSTOM:f=G[1],d=G[2];const Q=G[3],_=G[4],w=G.length==6?G[5]:void 0;H.geometry=Q,H.feature=j,u in $||($[u]=[]);const C=$[u];w?w(c,f,d,2,C):(C[0]=c[f],C[1]=c[f+1],C.length=2),_(C,H),++u;break;case ot.DRAW_IMAGE:f=G[1],d=G[2],v=G[3],g=G[4],m=G[5];let M=G[6];const O=G[7],k=G[8],K=G[9],V=G[10];let Z=G[11];const W=G[12];let tt=G[13];const J=G[14],et=G[15];if(!v&&G.length>=20){S=G[19],T=G[20],b=G[21],R=G[22];const Oe=this.drawLabelWithPointPlacement_(S,T,b,R);v=Oe.label,G[3]=v;const Ss=G[23];g=(Oe.anchorX-Ss)*this.pixelRatio,G[4]=g;const ze=G[24];m=(Oe.anchorY-ze)*this.pixelRatio,G[5]=m,M=v.height,G[6]=M,tt=v.width,G[13]=tt}let nt;G.length>25&&(nt=G[25]);let ut,Et,pt;G.length>17?(ut=G[16],Et=G[17],pt=G[18]):(ut=Ji,Et=!1,pt=!1),V&&X?Z+=it:!V&&!X&&(Z-=it);let zt=0;for(;f<d;f+=2){if(nt&&nt[zt++]<tt/this.pixelRatio)continue;const Oe=this.calculateImageOrLabelDimensions_(v.width,v.height,c[f],c[f+1],tt,M,g,m,k,K,Z,W,r,ut,Et||pt,j),Ss=[t,n,v,Oe,O,Et?D:null,pt?F:null];if(l){if(J==="none")continue;if(J==="obstacle"){l.insert(Oe.declutterBox);continue}else{let ze,In;if(et){const Le=d-f;if(!et[Le]){et[Le]=Ss;continue}if(ze=et[Le],delete et[Le],In=Kg(ze),l.collides(In))continue}if(l.collides(Oe.declutterBox))continue;ze&&(l.insert(In),this.replayImageOrLabel_.apply(this,ze)),l.insert(Oe.declutterBox)}}this.replayImageOrLabel_.apply(this,Ss)}++u;break;case ot.DRAW_CHARS:const fe=G[1],Xt=G[2],Cs=G[3],Li=G[4];R=G[5];const jo=G[6],de=G[7],Ae=G[8];b=G[9];const Ts=G[10];S=G[11],T=G[12];const sd=[G[13],G[13]],Ec=this.textStates[T],br=Ec.font,Mr=[Ec.scale[0]*de,Ec.scale[1]*de];let Ar;br in this.widths_?Ar=this.widths_[br]:(Ar={},this.widths_[br]=Ar);const rd=Sy(c,fe,Xt,2),od=Math.abs(Mr[0])*Lg(br,S,Ar);if(Li||od<=rd){const Oe=this.textStates[T].textAlign,Ss=(rd-od)*Xc(S,Oe),ze=VI(c,fe,Xt,2,S,Ss,jo,Math.abs(Mr[0]),Lg,br,Ar,X?0:this.viewRotation_);t:if(ze){const In=[];let Le,Ko,qo,Ce,We;if(b)for(Le=0,Ko=ze.length;Le<Ko;++Le){We=ze[Le],qo=We[4],Ce=this.createLabel(qo,T,"",b),g=We[2]+(Mr[0]<0?-Ts:Ts),m=Cs*Ce.height+(.5-Cs)*2*Ts*Mr[1]/Mr[0]-Ae;const bn=this.calculateImageOrLabelDimensions_(Ce.width,Ce.height,We[0],We[1],Ce.width,Ce.height,g,m,0,0,We[3],sd,!1,Ji,!1,j);if(l&&l.collides(bn.declutterBox))break t;In.push([t,n,Ce,bn,1,null,null])}if(R)for(Le=0,Ko=ze.length;Le<Ko;++Le){We=ze[Le],qo=We[4],Ce=this.createLabel(qo,T,R,""),g=We[2],m=Cs*Ce.height-Ae;const bn=this.calculateImageOrLabelDimensions_(Ce.width,Ce.height,We[0],We[1],Ce.width,Ce.height,g,m,0,0,We[3],sd,!1,Ji,!1,j);if(l&&l.collides(bn.declutterBox))break t;In.push([t,n,Ce,bn,1,null,null])}l&&l.load(In.map(Kg));for(let bn=0,iv=In.length;bn<iv;++bn)this.replayImageOrLabel_.apply(this,In[bn])}}++u;break;case ot.END_GEOMETRY:if(o!==void 0){j=G[1];const Oe=o(j,Mt);if(Oe)return Oe}++u;break;case ot.FILL:N?U++:this.fill_(t),++u;break;case ot.MOVE_TO_LINE_TO:for(f=G[1],d=G[2],rt=c[f],dt=c[f+1],x=rt+.5|0,E=dt+.5|0,(x!==p||E!==y)&&(t.moveTo(rt,dt),p=x,y=E),f+=2;f<d;f+=2)rt=c[f],dt=c[f+1],x=rt+.5|0,E=dt+.5|0,(f==d-2||x!==p||E!==y)&&(t.lineTo(rt,dt),p=x,y=E);++u;break;case ot.SET_FILL_STYLE:D=G,this.alignFill_=G[2],U&&(this.fill_(t),U=0,A&&(t.stroke(),A=0)),t.fillStyle=G[1],++u;break;case ot.SET_STROKE_STYLE:F=G,A&&(t.stroke(),A=0),this.setStrokeStyle_(t,G),++u;break;case ot.STROKE:N?A++:t.stroke(),++u;break;default:++u;break}}U&&this.fill_(t),A&&t.stroke()}execute(t,n,i,s,r,o){this.viewRotation_=s,this.execute_(t,n,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,n,i,s,r){return this.viewRotation_=i,this.execute_(t,1,n,this.hitDetectionInstructions,!0,s,r)}}const BI=HI,Zc=["Polygon","Circle","LineString","Image","Text","Default"];class XI{constructor(t,n,i,s,r,o){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=un(),this.createExecutors_(r)}clip(t,n){const i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const n in t){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const s=t[n];for(const r in s){const o=s[r];i[r]=new BI(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let s=0,r=t.length;s<r;++s)if(t[s]in i)return!0}return!1}forEachFeatureAtCoordinate(t,n,i,s,r,o){s=Math.round(s);const a=s*2+1,l=fn(this.hitDetectionTransform_,s+.5,s+.5,1/n,-1/n,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Ee(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Ze(),so(h,t),Xh(h,n*(this.renderBuffer_+s),h));const f=ZI(s);let d;function g(S,T){const b=u.getImageData(0,0,a,a).data;for(let R=0,U=f.length;R<U;R++)if(b[f[R]]>0){if(!o||d!=="Image"&&d!=="Text"||o.includes(S)){const A=(f[R]-3)/4,D=s-A%a,F=s-(A/a|0),$=r(S,T,D*D+F*F);if($)return $}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(Ii);let p,y,x,E,v;for(p=m.length-1;p>=0;--p){const S=m[p].toString();for(x=this.executorsByZIndex_[S],y=Zc.length-1;y>=0;--y)if(d=Zc[y],E=x[d],E!==void 0&&(v=E.executeHitDetection(u,l,i,g,h),v))return v}}getClipCoords(t){const n=this.maxExtent_;if(!n)return null;const i=n[0],s=n[1],r=n[2],o=n[3],a=[i,s,i,o,r,o,r,s];return ls(a,0,8,2,t,a),a}isEmpty(){return sr(this.executorsByZIndex_)}execute(t,n,i,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Ii),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||Zc;let c,u,h,f,d,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(d=this.executorsByZIndex_[m],h=0,f=o.length;h<f;++h){const p=o[h];g=d[p],g!==void 0&&g.execute(t,n,i,s,r,a)}}this.maxExtent_&&t.restore()}}const jc={};function ZI(e){if(jc[e]!==void 0)return jc[e];const t=e*2+1,n=e*e,i=new Array(n+1);for(let r=0;r<=e;++r)for(let o=0;o<=e;++o){const a=r*r+o*o;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((e+r)*t+(e+o))*4+3),r>0&&l.push(((e-r)*t+(e+o))*4+3),o>0&&(l.push(((e+r)*t+(e-o))*4+3),r>0&&l.push(((e-r)*t+(e-o))*4+3))}const s=[];for(let r=0,o=i.length;r<o;++r)i[r]&&s.push(...i[r]);return jc[e]=s,s}const Jg=XI;class jI extends Yy{constructor(t,n,i,s,r,o,a){super(),this.context_=t,this.pixelRatio_=n,this.extent_=i,this.transform_=s,this.transformRotation_=s?Jl(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=un()}drawImages_(t,n,i,s){if(!this.image_)return;const r=ls(t,n,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=r.length;u<h;u+=2){const f=r[u]-this.imageAnchorX_,d=r[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=f+this.imageAnchorX_,m=d+this.imageAnchorY_;fn(a,g,m,1,1,c,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,n,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=ls(t,n,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=s){const l=r[n]+this.textOffsetX_,c=r[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(t,n,i,s,r){const o=this.context_,a=ls(t,n,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return r&&o.closePath(),i}drawRings_(t,n,i,s){for(let r=0,o=i.length;r<o;++r)n=this.moveToLineTo_(t,n,i[r],s,!0);return n}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ve(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=rT(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],s=n[3]-n[1],r=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(n[0],n[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,n){const i=n.getGeometryFunction()(t);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(t){const n=t.getGeometriesArray();for(let i=0,s=n.length;i<s;++i)this.drawGeometry(n[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ve(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getExtent();if(ve(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=t.getFlatCoordinates();let r=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ve(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ve(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const r=t.getEndss(),o=t.getStride();n.beginPath();for(let a=0,l=r.length;a<l;++a){const c=r[a];s=this.drawRings_(i,s,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(t){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),Ai(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset,n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const n=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:wo;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=s&&(i.textAlign=s,n.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=s,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,n){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:En(i||Re)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),s=n.getLineCap(),r=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=r||Hn;this.strokeState_={lineCap:s!==void 0?s:ar,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||Bn)*this.pixelRatio_,lineJoin:a!==void 0?a:lr,lineWidth:(l!==void 0?l:Eo)*this.pixelRatio_,miterLimit:c!==void 0?c:xo,strokeStyle:En(i||vo)}}}setImageStyle(t){let n;if(!t||!(n=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(t){if(!t)this.text_="";else{const n=t.getFill();if(!n)this.textFillState_=null;else{const d=n.getColor();this.textFillState_={fillStyle:En(d||Re)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const d=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),p=i.getLineDashOffset(),y=i.getLineJoin(),x=i.getWidth(),E=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:ar,lineDash:m||Hn,lineDashOffset:p||Bn,lineJoin:y!==void 0?y:lr,lineWidth:x!==void 0?x:Eo,miterLimit:E!==void 0?E:xo,strokeStyle:En(d||vo)}}const s=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),u=t.getText(),h=t.getTextAlign(),f=t.getTextBaseline();this.textState_={font:s!==void 0?s:gy,textAlign:h!==void 0?h:wo,textBaseline:f!==void 0?f:el},this.text_=u!==void 0?Array.isArray(u)?u.reduce((d,g,m)=>d+=m%2?" ":g,""):u:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const KI=jI,vn=.5;function qI(e,t,n,i,s,r,o){const a=e[0]*vn,l=e[1]*vn,c=Ee(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,h=new KI(c,vn,s,null,o),f=n.length,d=Math.floor((256*256*256-1)/f),g={};for(let p=1;p<=f;++p){const y=n[p-1],x=y.getStyleFunction()||i;if(!x)continue;let E=x(y,r);if(!E)continue;Array.isArray(E)||(E=[E]);const S=(p*d).toString(16).padStart(7,"#00000");for(let T=0,b=E.length;T<b;++T){const R=E[T],U=R.getGeometryFunction()(y);if(!U||!ve(s,U.getExtent()))continue;const A=R.clone(),D=A.getFill();D&&D.setColor(S);const F=A.getStroke();F&&(F.setColor(S),F.setLineDash(null)),A.setText(void 0);const $=R.getImage();if($){const N=$.getImageSize();if(!N)continue;const j=Ee(N[0],N[1],void 0,{alpha:!1}),rt=j.canvas;j.fillStyle=S,j.fillRect(0,0,rt.width,rt.height),A.setImage(new cl({img:rt,anchor:$.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:$.getOrigin(),opacity:1,size:$.getSize(),scale:$.getScale(),rotation:$.getRotation(),rotateWithView:$.getRotateWithView()}))}const it=A.getZIndex()||0;let X=g[it];X||(X={},g[it]=X,X.Polygon=[],X.Circle=[],X.LineString=[],X.Point=[]);const H=U.getType();if(H==="GeometryCollection"){const N=U.getGeometriesArrayRecursive();for(let j=0,rt=N.length;j<rt;++j){const dt=N[j];X[dt.getType().replace("Multi","")].push(dt,A)}}else X[H.replace("Multi","")].push(U,A)}}const m=Object.keys(g).map(Number).sort(Ii);for(let p=0,y=m.length;p<y;++p){const x=g[m[p]];for(const E in x){const v=x[E];for(let S=0,T=v.length;S<T;S+=2){h.setStyle(v[S+1]);for(let b=0,R=t.length;b<R;++b)h.setTransform(t[b]),h.drawGeometry(v[S])}}}return c.getImageData(0,0,u.width,u.height)}function JI(e,t,n){const i=[];if(n){const s=Math.floor(Math.round(e[0])*vn),r=Math.floor(Math.round(e[1])*vn),o=(te(s,0,n.width-1)+te(r,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/t.length);u&&u%h===0&&i.push(t[u/h-1])}return i}const QI=.5,Hy={Point:lb,LineString:rb,Polygon:ub,MultiPoint:cb,MultiLineString:ob,MultiPolygon:ab,GeometryCollection:sb,Circle:nb};function tb(e,t){return parseInt(Lt(e),10)-parseInt(Lt(t),10)}function eb(e,t){const n=Qu(e,t);return n*n}function Qu(e,t){return QI*e/t}function nb(e,t,n,i,s){const r=n.getFill(),o=n.getStroke();if(r||o){const l=e.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(t,i)}const a=n.getText();if(a&&a.getText()){const l=(s||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function Qg(e,t,n,i,s,r,o){let a=!1;const l=n.getImage();if(l){const c=l.getImageState();c==_t.LOADED||c==_t.ERROR?l.unlistenImageChange(s):(c==_t.IDLE&&l.load(),l.listenImageChange(s),a=!0)}return ib(e,t,n,i,r,o),a}function ib(e,t,n,i,s,r){const o=n.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(i,s);if(n.getRenderer())By(e,a,n,t);else{const c=Hy[a.getType()];c(e,a,n,t,r)}}function By(e,t,n,i){if(t.getType()=="GeometryCollection"){const r=t.getGeometries();for(let o=0,a=r.length;o<a;++o)By(e,r[o],n,i);return}e.getBuilder(n.getZIndex(),"Default").drawCustom(t,i,n.getRenderer(),n.getHitDetectionRenderer())}function sb(e,t,n,i,s){const r=t.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const l=Hy[r[o].getType()];l(e,r[o],n,i,s)}}function rb(e,t,n,i,s){const r=n.getStroke();if(r){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(s||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function ob(e,t,n,i,s){const r=n.getStroke();if(r){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(s||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function ab(e,t,n,i,s){const r=n.getFill(),o=n.getStroke();if(o||r){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(s||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function lb(e,t,n,i,s){const r=n.getImage(),o=n.getText();let a;if(r){if(r.getImageState()!=_t.LOADED)return;let l=e;if(s){const u=r.getDeclutterMode();if(u!=="none")if(l=s,u==="obstacle"){const h=e.getBuilder(n.getZIndex(),"Image");h.setImageStyle(r,a),h.drawPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(r,a),c.drawPoint(t,i)}if(o&&o.getText()){let l=e;s&&(l=s);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function cb(e,t,n,i,s){const r=n.getImage(),o=n.getText();let a;if(r){if(r.getImageState()!=_t.LOADED)return;let l=e;if(s){const u=r.getDeclutterMode();if(u!=="none")if(l=s,u==="obstacle"){const h=e.getBuilder(n.getZIndex(),"Image");h.setImageStyle(r,a),h.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(r,a),c.drawMultiPoint(t,i)}if(o&&o.getText()){let l=e;s&&(l=s);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function ub(e,t,n,i,s){const r=n.getFill(),o=n.getStroke();if(r||o){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(s||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}class hb extends If{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ze(),this.wrappedRenderedExtent_=Ze(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,n,i){const s=n.extent,r=n.viewState,o=r.center,a=r.resolution,l=r.projection,c=r.rotation,u=l.getExtent(),h=this.getLayer().getSource(),f=n.pixelRatio,d=n.viewHints,g=!(d[Qt.ANIMATING]||d[Qt.INTERACTING]),m=this.compositionContext_,p=Math.round(n.size[0]*f),y=Math.round(n.size[1]*f),x=h.getWrapX()&&l.canWrapX(),E=x?Nt(u):null,v=x?Math.ceil((s[2]-u[2])/E)+1:1;let S=x?Math.floor((s[0]-u[0])/E):0;do{const T=this.getRenderTransform(o,a,c,f,p,y,S*E);t.execute(m,1,T,c,g,void 0,i)}while(++S<v)}setupCompositionContext_(){if(this.opacity_!==1){const t=Ee(this.context.canvas.width,this.context.canvas.height,Gg);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,nc(this.compositionContext_),Gg.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,n){const i=t.pixelRatio,s=t.layerStatesArray[t.layerIndex];aC(this.pixelTransform,1/i,1/i),Zl(this.inversePixelTransform,this.pixelTransform);const r=Bh(this.pixelTransform);this.useContainer(n,r,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let u=l&&!l.isEmpty()||c&&!c.isEmpty();if(!u&&!(this.getLayer().hasListener(Cn.PRERENDER)||this.getLayer().hasListener(Cn.POSTRENDER)))return null;const h=Math.round(t.size[0]*i),f=Math.round(t.size[1]*i);a.width!=h||a.height!=f?(a.width=h,a.height=f,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,h,f),this.preRender(o,t);const d=t.viewState;d.projection,this.opacity_=s.opacity,this.setupCompositionContext_();let g=!1;if(u&&s.extent&&this.clipping){const m=zn(s.extent);u=ve(m,t.extent),g=u&&!xi(m,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,m)}return u&&this.renderWorlds(l,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(n=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Kt(this.pixelTransform,i);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=i[0]*vn,f=i[1]*vn;u.push(this.getRenderTransform(s,r,o,vn,h,f,0).slice());const d=c.getSource(),g=a.getExtent();if(d.getWrapX()&&a.canWrapX()&&!xi(g,l)){let m=l[0];const p=Nt(g);let y=0,x;for(;m<g[0];)--y,x=p*y,u.push(this.getRenderTransform(s,r,o,vn,h,f,x).slice()),m+=p;for(y=0,m=l[2];m>g[2];)++y,x=p*y,u.push(this.getRenderTransform(s,r,o,vn,h,f,x).slice()),m-=p}this.hitDetectionImageData_=qI(i,u,this.renderedFeatures_,c.getStyleFunction(),l,r,o)}n(JI(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,n,i,s,r){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(d,g,m){const p=Lt(d),y=c[p];if(y){if(y!==!0&&m<y.distanceSq){if(m===0)return c[p]=!0,r.splice(r.lastIndexOf(y),1),s(d,l,g);y.geometry=g,y.distanceSq=m}}else{if(m===0)return c[p]=!0,s(d,l,g);r.push(c[p]={feature:d,layer:l,geometry:g,distanceSq:m,callback:s})}};let h;const f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some(d=>h=d.forEachFeatureAtCoordinate(t,o,a,i,u,d===this.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(g=>g.value):null)),h}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const s=t.viewHints[Qt.ANIMATING],r=t.viewHints[Qt.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,u=c.projection,h=c.resolution,f=t.pixelRatio,d=n.getRevision(),g=n.getRenderBuffer();let m=n.getRenderOrder();m===void 0&&(m=tb);const p=c.center.slice(),y=Xh(l,g*h),x=y.slice(),E=[y.slice()],v=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!xi(v,t.extent)){const X=Nt(v),H=Math.max(Nt(y)/2,X);y[0]=v[0]-H,y[2]=v[2]+H,Zp(p,u);const N=$p(E[0],u);N[0]<v[0]&&N[2]<v[2]?E.push([N[0]+X,N[1],N[2]+X,N[3]]):N[0]>v[0]&&N[2]>v[2]&&E.push([N[0]-X,N[1],N[2]-X,N[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==d&&this.renderedRenderOrder_==m&&xi(this.wrappedRenderedExtent_,y))return Ai(this.renderedExtent_,x)||(this.hitDetectionImageData_=null,this.renderedExtent_=x),this.renderedCenter_=p,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const S=new jg(Qu(h,f),y,h,f);let T;this.getLayer().getDeclutter()&&(T=new jg(Qu(h,f),y,h,f));let b;for(let X=0,H=E.length;X<H;++X)i.loadFeatures(E[X],h,u);const R=eb(h,f);let U=!0;const A=X=>{let H;const N=X.getStyleFunction()||n.getStyleFunction();if(N&&(H=N(X,h)),H){const j=this.renderFeature(X,R,H,S,b,T);U=U&&!j}},D=Jp(y),F=i.getFeaturesInExtent(D);m&&F.sort(m);for(let X=0,H=F.length;X<H;++X)A(F[X]);this.renderedFeatures_=F,this.ready=U;const $=S.finish(),it=new Jg(y,h,f,i.getOverlaps(),$,n.getRenderBuffer());return T&&(this.declutterExecutorGroup=new Jg(y,h,f,i.getOverlaps(),T.finish(),n.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=d,this.renderedRenderOrder_=m,this.renderedExtent_=x,this.wrappedRenderedExtent_=y,this.renderedCenter_=p,this.renderedProjection_=u,this.replayGroup_=it,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,n,i,s,r,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=Qg(s,t,i[l],n,this.boundHandleStyleImageChange_,r,o)||a;else a=Qg(s,t,i,n,this.boundHandleStyleImageChange_,r,o);return a}}const fb=hb;class db extends yR{constructor(t,n,i,s,r){const o=r!==void 0?_t.IDLE:_t.LOADED;super(t,n,i,o),this.loader_=r!==void 0?r:null,this.canvas_=s,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=_t.ERROR):this.state=_t.LOADED,this.changed()}load(){this.state==_t.IDLE&&(this.state=_t.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const gb=db;function mb(e){return Array.isArray(e)?Math.min(...e):e}class _b extends AI{constructor(t){super(t),this.vectorRenderer_=new fb(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=un(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const n=Kt(this.coordinateToVectorPixelTransform_,Kt(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const n=t.pixelRatio,i=t.viewState,s=i.resolution,r=t.viewHints,o=this.vectorRenderer_;let a=t.extent;this.layerImageRatio_!==1&&(a=a.slice(0),dC(a,this.layerImageRatio_));const l=Nt(a)/s,c=Ne(a)/s;if(!r[Qt.ANIMATING]&&!r[Qt.INTERACTING]&&!vr(a)){o.useContainer(null,null);const u=o.context,h=t.layerStatesArray[t.layerIndex],f=Object.assign({},h,{opacity:1}),d=Object.assign({},t,{declutterTree:new bf(9),extent:a,size:[l,c],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[f],layerIndex:0});let g=!0;const m=new gb(a,s,n,u.canvas,function(p){o.prepareFrame(d)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(d,null)&&(o.renderDeclutter(d),g=!1),p())});m.addEventListener(ct.CHANGE,()=>{if(m.getState()!==_t.LOADED)return;this.image_=g?null:m;const p=m.getPixelRatio(),y=mb(m.getResolution())*n/p;this.renderedResolution=y,this.coordinateToVectorPixelTransform_=fn(this.coordinateToVectorPixelTransform_,l/2,c/2,1/y,-1/y,0,-i.center[0],-i.center[1])}),m.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,n,i,s,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,n,i,s,r):super.forEachFeatureAtCoordinate(t,n,i,s,r)}}const pb=_b;class yb extends bI{constructor(t){t=t||{};const n=Object.assign({},t);delete n.imageRatio,super(n),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new pb(this)}}const xb=yb;class vb{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let n=this.oldest_;for(;n;)t(n.value_,n.key_,this),n=n.newer}get(t,n){const i=this.entries_[t];return Tt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const n=this.entries_[t];return Tt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.key_;return t}getValues(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,n){this.get(t),this.entries_[t].value_=n}set(t,n){Tt(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const wb=vb;function tm(e,t,n,i){return i!==void 0?(i[0]=e,i[1]=t,i[2]=n,i):[e,t,n]}function ac(e,t,n){return e+"/"+t+"/"+n}function Xy(e){return ac(e[0],e[1],e[2])}function Eb(e){return e.split("/").map(Number)}function Cb(e){return(e[1]<<e[0])+e[2]}function Tb(e,t){const n=e[0],i=e[1],s=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;const r=t.getFullTileRange(n);return r?r.containsXY(i,s):!0}class Sb extends wb{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),i=Eb(t)[0];this.forEach(s=>{s.tileCoord[0]!==i&&(this.remove(Xy(s.tileCoord)),s.release())})}}const Zy=Sb,Kc={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Rb extends gn{constructor(t){super(),this.projection=se(t.projection),this.attributions_=em(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,s){n.viewResolver=i,n.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=em(t),this.changed()}setState(t){this.state_=t,this.changed()}}function em(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}const jy=Rb,Os=[0,0,0],li=5;class Ib{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Tt(ZE(this.resolutions_,function(s,r){return r-s},!0),"`resolutions` must be sorted in descending order");let n;if(!t.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!n)n=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Tt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ps(i)),Tt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Tt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:jh,Tt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(s,r){const o=new Fy(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,n,i){const s=this.getTileRangeForExtentAndZ(t,n);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)i([n,r,a])}forEachTileCoordParentTileRange(t,n,i,s){let r,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,s);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),r=bs(o,o,a,a,i)):r=this.getTileRangeForExtentAndZ(l,c,i),n(c,r))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,n,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const r=t[1]*2,o=t[2]*2;return bs(r,r+1,o,o+1,n)}const s=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,n)}return null}getTileRangeForTileCoordAndZ(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const s=t[0],r=t[1],o=t[2];if(n===s)return bs(r,o,r,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-s),c=Math.floor(r*l),u=Math.floor(o*l);if(n<s)return bs(c,c,u,u,i);const h=Math.floor(l*(r+1))-1,f=Math.floor(l*(o+1))-1;return bs(c,h,u,f,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(t,n,i){this.getTileCoordForXYAndZ_(t[0],t[3],n,!1,Os);const s=Os[1],r=Os[2];this.getTileCoordForXYAndZ_(t[2],t[1],n,!0,Os);const o=Os[1],a=Os[2];return bs(s,o,r,a,i)}getTileCoordCenter(t){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),s=De(this.getTileSize(t[0]),this.tmpSize_);return[n[0]+(t[1]+.5)*s[0]*i,n[1]-(t[2]+.5)*s[1]*i]}getTileCoordExtent(t,n){const i=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=De(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*s,a=i[1]-(t[2]+1)*r[1]*s,l=o+r[0]*s,c=a+r[1]*s;return Mi(o,a,l,c,n)}getTileCoordForCoordAndResolution(t,n,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],n,!1,i)}getTileCoordForXYAndResolution_(t,n,i,s,r){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=De(this.getTileSize(o),this.tmpSize_);let u=a*(t-l[0])/i/c[0],h=a*(l[1]-n)/i/c[1];return s?(u=oa(u,li)-1,h=oa(h,li)-1):(u=ra(u,li),h=ra(h,li)),tm(o,u,h,r)}getTileCoordForXYAndZ_(t,n,i,s,r){const o=this.getOrigin(i),a=this.getResolution(i),l=De(this.getTileSize(i),this.tmpSize_);let c=(t-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return s?(c=oa(c,li)-1,u=oa(u,li)-1):(c=ra(c,li),u=ra(u,li)),tm(i,c,u,r)}getTileCoordForCoordAndZ(t,n,i){return this.getTileCoordForXYAndZ_(t[0],t[1],n,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,n){const i=Yh(this.resolutions_,t,n||0);return te(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,n){return ay(n,0,n.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const n=this.resolutions_.length,i=new Array(n);for(let s=this.minZoom;s<n;++s)i[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=i}}const Ky=Ib;function qy(e){let t=e.getDefaultTileGrid();return t||(t=Ob(e),e.setDefaultTileGrid(t)),t}function bb(e,t,n){const i=t[0],s=e.getTileCoordCenter(t),r=Of(n);if(!Lo(r,s)){const o=Nt(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,e.getTileCoordForCoordAndZ(s,i)}return t}function Mb(e,t,n,i){i=i!==void 0?i:"top-left";const s=Jy(e,t,n);return new Ky({extent:e,origin:hC(e,i),resolutions:s,tileSize:n})}function Ab(e){const t=e||{},n=t.extent||se("EPSG:3857").getExtent(),i={extent:n,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:Jy(n,t.maxZoom,t.tileSize,t.maxResolution)};return new Ky(i)}function Jy(e,t,n,i){t=t!==void 0?t:SC,n=De(n!==void 0?n:jh);const s=Ne(e),r=Nt(e);i=i>0?i:Math.max(r/n[0],s/n[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function Ob(e,t,n,i){const s=Of(e);return Mb(s,t,n,i)}function Of(e){e=se(e);let t=e.getExtent();if(!t){const n=180*rr.degrees/e.getMetersPerUnit();t=Mi(-n,-n,n,n)}return t}class Lb extends jy{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const n=[256,256];this.tileGrid&&De(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new Zy(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,n){const i=this.getTileCacheForProjection(t);i&&i.expireCache(n)}forEachLoadedTile(t,n,i,s){const r=this.getTileCacheForProjection(t);if(!r)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let h=i.minY;h<=i.maxY;++h)l=ac(n,u,h),c=!1,r.containsKey(l)&&(a=r.get(l),c=a.getState()===st.LOADED,c&&(c=s(a)!==!1)),c||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const n=t?this.getTileGridForProjection(t):this.tileGrid;return n?n.getResolutions():null}getTile(t,n,i,s,r){return at()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:qy(t)}getTileCacheForProjection(t){const n=this.getProjection();return Tt(n===null||Zi(n,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,n,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(n),o=De(s.getTileSize(t),this.tmpSize);return r==1?o:zS(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=bb(i,t,n)),Tb(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,n){const i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,n,i,s){}}class Fb extends ei{constructor(t,n){super(t),this.tile=n}}const Pb=Lb;function Db(e,t){const n=/\{z\}/g,i=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(o)return e.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const c=o[0],u=t.getFullTileRange(c);return Tt(u,"The {-y} placeholder requires a tile grid with extent"),(u.getHeight()-o[2]-1).toString()})}}function kb(e,t){const n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Db(e[s],t);return Nb(i)}function Nb(e){return e.length===1?e[0]:function(t,n,i){if(!t)return;const s=Cb(t),r=as(s,e.length);return e[r](t,n,i)}}function Gb(e){const t=[];let n=/\{([a-z])-([a-z])\}/.exec(e);if(n){const i=n[1].charCodeAt(0),s=n[2].charCodeAt(0);let r;for(r=i;r<=s;++r)t.push(e.replace(n[0],String.fromCharCode(r)));return t}if(n=/\{(\d+)-(\d+)\}/.exec(e),n){const i=parseInt(n[2],10);for(let s=parseInt(n[1],10);s<=i;s++)t.push(e.replace(n[0],s.toString()));return t}return t.push(e),t}class Lf extends Pb{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Lf.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const n=t.target,i=Lt(n),s=n.getState();let r;s==st.LOADING?(this.tileLoadingKeys_[i]=!0,r=Kc.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=s==st.ERROR?Kc.TILELOADERROR:s==st.LOADED?Kc.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new Fb(r,n))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(t){const n=Gb(t);this.urls=n,this.setUrls(n)}setUrls(t){this.urls=t;const n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(kb(t,this.tileGrid),n):this.setKey(n)}tileUrlFunction(t,n,i){}useTile(t,n,i){const s=ac(t,n,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const zb=Lf;class Wb extends zb{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Ub,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Oy,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,n){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==i?n:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Zi(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Zi(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||Zi(n,t)))return this.tileGrid;const i=Lt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=qy(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const n=this.getProjection();if(!n||Zi(n,t))return this.tileCache;const i=Lt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Zy(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,n,i,s,r,o){const a=[t,n,i],l=this.getTileCoordForTileUrlFunction(a,r),c=l?this.tileUrlFunction(l,s,r):void 0,u=new this.tileClass(a,c!==void 0?st.IDLE:st.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(ct.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,n,i,s,r){const o=this.getProjection();if(!o||!r||Zi(o,r))return this.getTileInternal(t,n,i,s,o||r);const a=this.getTileCacheForProjection(r),l=[t,n,i];let c;const u=Xy(l);a.containsKey(u)&&(c=a.get(u));const h=this.getKey();if(c&&c.key==h)return c;const f=this.getTileGridForProjection(o),d=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(l,r),m=new qu(o,f,r,d,l,g,this.getTilePixelRatio(s),this.getGutter(),(p,y,x,E)=>this.getTileInternal(p,y,x,E,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=h,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(t,n,i,s,r){let o=null;const a=ac(t,n,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,n,i,s,r,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(t,n,i,s,r,l),c.getState()==st.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(t,n){const i=se(t);if(i){const s=Lt(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=n)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function Ub(e,t){e.getImage().src=t}const $b=Wb;class Vb extends $b{constructor(t){t=t||{};const n=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:Ab({extent:Of(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Yb=Vb,Hb='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Bb extends Yb{constructor(t){t=t||{};let n;t.attributions!==void 0?n=t.attributions:n=[Hb];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",s=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})}}const Xb=Bb;class Zb{constructor(t){this.rbush_=new bf(t),this.items_={}}insert(t,n){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.rbush_.insert(i),this.items_[Lt(n)]=i}load(t,n){const i=new Array(n.length);for(let s=0,r=n.length;s<r;s++){const o=t[s],a=n[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=l,this.items_[Lt(a)]=l}this.rbush_.load(i)}remove(t){const n=Lt(t),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(t,n){const i=this.items_[Lt(n)],s=[i.minX,i.minY,i.maxX,i.maxY];_o(s,t)||(this.remove(n),this.insert(t,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(t){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(n).map(function(s){return s.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,n){return this.forEach_(this.getInExtent(t),n)}forEach_(t,n){let i;for(let s=0,r=t.length;s<r;s++)if(i=n(t[s]),i)return i;return i}isEmpty(){return sr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const n=this.rbush_.toJSON();return Mi(n.minX,n.minY,n.maxX,n.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const n in t.items_)this.items_[n]=t.items_[n]}}const nm=Zb,qe={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function jb(e,t){return[[-1/0,-1/0,1/0,1/0]]}let Kb=!1;function qb(e,t,n,i,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof e=="function"?e(n,i,s):e,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Kb,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?r(t.readFeatures(u,{extent:n,featureProjection:s}),t.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function im(e,t){return function(n,i,s,r,o){const a=this;qb(e,t,n,i,s,function(l,c){a.addFeatures(l),r!==void 0&&r(l)},o||ir)}}class ci extends ei{constructor(t,n,i){super(t),this.feature=n,this.features=i}}class Jb extends jy{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=ir,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Tt(this.format_,"`format` must be set when `url` is set"),this.loader_=im(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:jb;const n=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=n?new nm:null,this.loadedExtentsRtree_=new nm,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(t.features)?s=t.features:t.features&&(i=t.features,s=i.getArray()),!n&&i===void 0&&(i=new wn(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const n=Lt(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);const i=t.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new ci(qe.ADDFEATURE,t))}setupChangeEvents_(t,n){this.featureChangeKeys_[t]=[vt(n,ct.CHANGE,this.handleFeatureChange_,this),vt(n,nr.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,n){let i=!0;const s=n.getId();return s!==void 0&&(s.toString()in this.idIndex_?i=!1:this.idIndex_[s.toString()]=n),i&&(Tt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=n),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const n=[],i=[],s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=Lt(a);this.addToIndex_(l,a)&&i.push(a)}for(let r=0,o=i.length;r<o;r++){const a=i[r],l=Lt(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,s),this.hasListener(qe.ADDFEATURE))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new ci(qe.ADDFEATURE,i[r]))}bindFeaturesCollection_(t){let n=!1;this.addEventListener(qe.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(qe.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(Se.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),t.addEventListener(Se.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ut);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(i);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new ci(qe.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,n){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(s){if(s.getGeometry().intersectsCoordinate(t))return n(s)})}forEachFeatureInExtent(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(t,n){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const r=n(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),sr(this.nullGeometryFeatures_)||Yn(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n}getFeaturesInExtent(t,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const s=mC(t,n);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,n){const i=t[0],s=t[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||mo,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),h=a;if(a=u.closestPointXY(i,s,o,a),a<h){r=c;const f=Math.sqrt(a);l[0]=i-f,l[1]=s-f,l[2]=i+f,l[3]=s+f}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const n=this.idIndex_[t.toString()];return n!==void 0?n:null}getFeatureByUid(t){const n=this.uidIndex_[t];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const n=t.target,i=Lt(n),s=n.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const r=n.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new ci(qe.CHANGEFEATURE,n))}hasFeature(t){const n=t.getId();return n!==void 0?n in this.idIndex_:Lt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&sr(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,n,i){const s=this.loadedExtentsRtree_,r=this.strategy_(t,n,i);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(u){return xi(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ci(qe.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new ci(qe.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ci(qe.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const n=this.loadedExtentsRtree_;let i;n.forEachInExtent(t,function(s){if(_o(s.extent,t))return i=s,!0}),i&&n.remove(i)}removeFeature(t){if(!t)return;const n=Lt(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const n=Lt(t),i=this.featureChangeKeys_[n];if(!i)return;i.forEach(Ut),delete this.featureChangeKeys_[n];const s=t.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[n],this.dispatchEvent(new ci(qe.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let n=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],n=!0;break}return n}setLoader(t){this.loader_=t}setUrl(t){Tt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(im(t,this.format_))}}const Qb=Jb,sm=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],rm={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class tM extends Er{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=t.keys!==void 0?t.keys:!1,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=t.className!==void 0?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=t.activeClassName!==void 0?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=t.inactiveClassName!==void 0?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const n=t.label!==void 0?t.label:"⤢";this.labelNode_=typeof n=="string"?document.createTextNode(n):n;const i=t.labelActive!==void 0?t.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const s=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=s,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(ct.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${xs} ${Do}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const n=t.getOwnerDocument();if(om(n))if(am(n))nM(n);else{let i;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?eM(i):Qy(i)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const n=this.isInFullscreen_;this.isInFullscreen_=am(t.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Qa(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(rm.ENTERFULLSCREEN)):(Qa(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(rm.LEAVEFULLSCREEN)),t.updateSize())}setClassName_(t,n){n?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const n=this.getMap();n&&n.removeChangeListener(ae.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener(ae.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let i=0,s=t.length;i<s;++i)Ut(t[i]);t.length=0;const n=this.getMap();if(n){const i=n.getOwnerDocument();om(i)?this.element.classList.remove(Mg):this.element.classList.add(Mg);for(let s=0,r=sm.length;s<r;++s)t.push(vt(i,sm[s],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function om(e){const t=e.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&e.fullscreenEnabled)}function am(e){return!!(e.webkitIsFullScreen||e.fullscreenElement)}function Qy(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function eM(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():Qy(e)}function nM(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}const iM=tM,ge={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class sM extends gn{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+OT,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(ge.ELEMENT,this.handleElementChanged),this.addChangeListener(ge.MAP,this.handleMapChanged),this.addChangeListener(ge.OFFSET,this.handleOffsetChanged),this.addChangeListener(ge.POSITION,this.handlePositionChanged),this.addChangeListener(ge.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(ge.ELEMENT)}getId(){return this.id}getMap(){return this.get(ge.MAP)||null}getOffset(){return this.get(ge.OFFSET)}getPosition(){return this.get(ge.POSITION)}getPositioning(){return this.get(ge.POSITIONING)}handleElementChanged(){dy(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(tl(this.element),Ut(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=vt(t,Nn.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(ge.ELEMENT,t)}setMap(t){this.set(ge.MAP,t)}setOffset(t){this.set(ge.OFFSET,t)}setPosition(t){this.set(ge.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(ge.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),s=this.getElement(),r=this.getRect(s,[FT(s),PT(s)]);t=t||{};const o=t.margin===void 0?20:t.margin;if(!xi(i,r)){const a=r[0]-i[0],l=i[2]-r[2],c=r[1]-i[1],u=i[3]-r[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),c<0?h[1]=c-o:u<0&&(h[1]=Math.abs(u)+o),h[0]!==0||h[1]!==0){const f=n.getView().getCenterInternal(),d=n.getPixelFromCoordinateInternal(f);if(!d)return;const g=[d[0]+h[0],d[1]+h[1]],m=t.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(g),duration:m.duration,easing:m.easing})}}}getRect(t,n){const i=t.getBoundingClientRect(),s=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[s,r,s+n[0],r+n[1]]}setPositioning(t){this.set(ge.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),n=this.getPosition();if(!t||!t.isRendered()||!n){this.setVisible(!1);return}const i=t.getPixelFromCoordinate(n),s=t.getSize();this.updateRenderedPosition(i,s)}updateRenderedPosition(t,n){const i=this.element.style,s=this.getOffset(),r=this.getPositioning();this.setVisible(!0);const o=Math.round(t[0]+s[0])+"px",a=Math.round(t[1]+s[1])+"px";let l="0%",c="0%";r=="bottom-right"||r=="center-right"||r=="top-right"?l="-100%":(r=="bottom-center"||r=="center-center"||r=="top-center")&&(l="-50%"),r=="bottom-left"||r=="bottom-center"||r=="bottom-right"?c="-100%":(r=="center-left"||r=="center-center"||r=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}}const lm=sM,qc="units",rM=[1,2,5],kr=25.4/.28;class oM extends Er{constructor(t){t=t||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:t.render,target:t.target}),this.on,this.once,this.un;const i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+xs,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(qc,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(qc)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(qc,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=t.center,i=t.projection,s=this.getUnits(),r=s=="degrees"?"degrees":"m";let o=ja(i,t.resolution,n,r);const a=this.minWidth_*(this.dpi_||kr)/kr,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||kr)/kr:void 0;let c=a*o,u="";if(s=="degrees"){const E=rr.degrees;c*=E,c<E/60?(u="″",o*=3600):c<E?(u="′",o*=60):u="°"}else if(s=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(s=="nautical")o/=1852,u="NM";else if(s=="metric")c<.001?(u="μm",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(s=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),f,d,g,m,p,y;for(;;){g=Math.floor(h/3);const E=Math.pow(10,g);if(f=rM[(h%3+3)%3]*E,d=Math.round(f/o),isNaN(d)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&d>=l){f=m,d=p,g=y;break}else if(d>=a)break;m=f,p=d,y=g,++h}const x=this.scaleBar_?this.createScaleBar(d,f,u):f.toFixed(g<0?-g:0)+" "+u;this.renderedHTML_!=x&&(this.innerElement_.innerHTML=x,this.renderedHTML_=x),this.renderedWidth_!=d&&(this.innerElement_.style.width=d+"px",this.renderedWidth_=d),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,n,i){const s=this.getScaleForResolution(),r=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),o=this.scaleBarSteps_,a=t/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const h=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,t,!1,n,i):"")+"</div>")}return l.push(this.createStepText(o,t,!0,n,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+r+"</div>":"")+l.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,n,i,s,r){const a=(t===0?0:Math.round(s/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+r),l=t===0?-3:n/this.scaleBarSteps_*-1,c=t===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${t===0?"left":"center"};min-width: ${c}px;left: ${i?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const t=ja(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||kr,i=1e3/25.4;return t*i*n}render(t){const n=t.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const aM=oM;class lM extends Er{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const n=t.className!==void 0?t.className:"ol-zoom-extent",i=t.label!==void 0?t.label:"E",s=t.tipLabel!==void 0?t.tipLabel:"Fit to extent",r=document.createElement("button");r.setAttribute("type","button"),r.title=s,r.appendChild(typeof i=="string"?document.createTextNode(i):i),r.addEventListener(ct.CLICK,this.handleClick_.bind(this),!1);const o=n+" "+xs+" "+Do,a=this.element;a.className=o,a.appendChild(r)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const n=this.getMap().getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal($u(i))}}const Jc=lM;class t0{constructor(t){gt(this,"fileId",null);gt(this,"activity",null);gt(this,"sessions",null);gt(this,"records",null);const n=t;this.fileId=n==null?void 0:n.fileId,this.activity=n==null?void 0:n.activity,this.sessions=n==null?void 0:n.sessions,this.records=n==null?void 0:n.records}}class th{constructor(t){gt(this,"timestamp",null);gt(this,"positionLat",null);gt(this,"positionLong",null);gt(this,"distance",null);gt(this,"speed",null);gt(this,"altitude",null);gt(this,"cadence",null);gt(this,"heartRate",null);gt(this,"power",null);gt(this,"grade",0);const n=t;this.positionLat=n==null?void 0:n.positionLat,this.positionLong=n==null?void 0:n.positionLong,this.altitude=n==null?void 0:n.altitude,this.cadence=n==null?void 0:n.cadence,this.distance=n==null?void 0:n.distance,this.heartRate=n==null?void 0:n.heartRate,this.speed=n==null?void 0:n.speed,this.timestamp=n==null?void 0:n.timestamp,this.power=n==null?void 0:n.power,this.grade=n==null?void 0:n.grade}}class vs extends Error{}class cM extends vs{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class uM extends vs{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class hM extends vs{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Xr extends vs{}class e0 extends vs{constructor(t){super(`Invalid unit ${t}`)}}class Ye extends vs{}class ui extends vs{constructor(){super("Zone is an abstract class")}}const q="numeric",dn="short",ke="long",dl={year:q,month:q,day:q},n0={year:q,month:dn,day:q},fM={year:q,month:dn,day:q,weekday:dn},i0={year:q,month:ke,day:q},s0={year:q,month:ke,day:q,weekday:ke},r0={hour:q,minute:q},o0={hour:q,minute:q,second:q},a0={hour:q,minute:q,second:q,timeZoneName:dn},l0={hour:q,minute:q,second:q,timeZoneName:ke},c0={hour:q,minute:q,hourCycle:"h23"},u0={hour:q,minute:q,second:q,hourCycle:"h23"},h0={hour:q,minute:q,second:q,hourCycle:"h23",timeZoneName:dn},f0={hour:q,minute:q,second:q,hourCycle:"h23",timeZoneName:ke},d0={year:q,month:q,day:q,hour:q,minute:q},g0={year:q,month:q,day:q,hour:q,minute:q,second:q},m0={year:q,month:dn,day:q,hour:q,minute:q},_0={year:q,month:dn,day:q,hour:q,minute:q,second:q},dM={year:q,month:dn,day:q,weekday:dn,hour:q,minute:q},p0={year:q,month:ke,day:q,hour:q,minute:q,timeZoneName:dn},y0={year:q,month:ke,day:q,hour:q,minute:q,second:q,timeZoneName:dn},x0={year:q,month:ke,day:q,weekday:ke,hour:q,minute:q,timeZoneName:ke},v0={year:q,month:ke,day:q,weekday:ke,hour:q,minute:q,second:q,timeZoneName:ke};class $o{get type(){throw new ui}get name(){throw new ui}get ianaName(){return this.name}get isUniversal(){throw new ui}offsetName(t,n){throw new ui}formatOffset(t,n){throw new ui}offset(t){throw new ui}equals(t){throw new ui}get isValid(){throw new ui}}let Qc=null;class lc extends $o{static get instance(){return Qc===null&&(Qc=new lc),Qc}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return E0(t,n,i)}formatOffset(t,n){return oo(this.offset(t),n)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let La={};function gM(e){return La[e]||(La[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),La[e]}const mM={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function _M(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,s,r,o,a,l,c,u]=i;return[o,s,r,a,l,c,u]}function pM(e,t){const n=e.formatToParts(t),i=[];for(let s=0;s<n.length;s++){const{type:r,value:o}=n[s],a=mM[r];r==="era"?i[a]=o:xt(a)||(i[a]=parseInt(o,10))}return i}let _a={};class Zn extends $o{static create(t){return _a[t]||(_a[t]=new Zn(t)),_a[t]}static resetCache(){_a={},La={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Zn.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return E0(t,n,i,this.name)}formatOffset(t,n){return oo(this.offset(t),n)}offset(t){const n=new Date(t);if(isNaN(n))return NaN;const i=gM(this.name);let[s,r,o,a,l,c,u]=i.formatToParts?pM(i,n):_M(i,n);a==="BC"&&(s=-Math.abs(s)+1);const f=uc({year:s,month:r,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let d=+n;const g=d%1e3;return d-=g>=0?g:1e3+g,(f-d)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let cm={};function yM(e,t={}){const n=JSON.stringify([e,t]);let i=cm[n];return i||(i=new Intl.ListFormat(e,t),cm[n]=i),i}let eh={};function nh(e,t={}){const n=JSON.stringify([e,t]);let i=eh[n];return i||(i=new Intl.DateTimeFormat(e,t),eh[n]=i),i}let ih={};function xM(e,t={}){const n=JSON.stringify([e,t]);let i=ih[n];return i||(i=new Intl.NumberFormat(e,t),ih[n]=i),i}let sh={};function vM(e,t={}){const{base:n,...i}=t,s=JSON.stringify([e,i]);let r=sh[s];return r||(r=new Intl.RelativeTimeFormat(e,t),sh[s]=r),r}let Zr=null;function wM(){return Zr||(Zr=new Intl.DateTimeFormat().resolvedOptions().locale,Zr)}function EM(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(n===-1)return[e];{let i,s;try{i=nh(e).resolvedOptions(),s=e}catch{const l=e.substring(0,n);i=nh(l).resolvedOptions(),s=l}const{numberingSystem:r,calendar:o}=i;return[s,r,o]}}function CM(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}function TM(e){const t=[];for(let n=1;n<=12;n++){const i=ht.utc(2009,n,1);t.push(e(i))}return t}function SM(e){const t=[];for(let n=1;n<=7;n++){const i=ht.utc(2016,11,13+n);t.push(e(i))}return t}function pa(e,t,n,i){const s=e.listingMode();return s==="error"?null:s==="en"?n(t):i(t)}function RM(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class IM{constructor(t,n,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:r,...o}=i;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=xM(t,a)}}format(t){if(this.inf){const n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{const n=this.floor?Math.floor(t):Pf(t,3);return Jt(n,this.padTo)}}}class bM{constructor(t,n,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Zn.create(a).valid?(s=a,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const r={...this.opts};r.timeZone=r.timeZone||s,this.dtf=nh(n,r)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(n=>{if(n.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:i}}else return n}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class MM{constructor(t,n,i){this.opts={style:"long",...i},!n&&w0()&&(this.rtf=vM(t,i))}format(t,n){return this.rtf?this.rtf.format(t,n):BM(n,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,n){return this.rtf?this.rtf.formatToParts(t,n):[]}}class $t{static fromOpts(t){return $t.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,n,i,s=!1){const r=t||qt.defaultLocale,o=r||(s?"en-US":wM()),a=n||qt.defaultNumberingSystem,l=i||qt.defaultOutputCalendar;return new $t(o,a,l,r)}static resetCache(){Zr=null,eh={},ih={},sh={}}static fromObject({locale:t,numberingSystem:n,outputCalendar:i}={}){return $t.create(t,n,i)}constructor(t,n,i,s){const[r,o,a]=EM(t);this.locale=r,this.numberingSystem=n||o||null,this.outputCalendar=i||a||null,this.intl=CM(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=RM(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:$t.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,n=!1){return pa(this,t,S0,()=>{const i=n?{month:t,day:"numeric"}:{month:t},s=n?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=TM(r=>this.extract(r,i,"month"))),this.monthsCache[s][t]})}weekdays(t,n=!1){return pa(this,t,b0,()=>{const i=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=n?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=SM(r=>this.extract(r,i,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return pa(this,void 0,()=>M0,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ht.utc(2016,11,13,9),ht.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(t){return pa(this,t,A0,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[ht.utc(-40,1,1),ht.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[t]})}extract(t,n,i){const s=this.dtFormatter(t,n),r=s.formatToParts(),o=r.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new IM(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,n={}){return new bM(t,this.intl,n)}relFormatter(t={}){return new MM(this.intl,this.isEnglish(),t)}listFormatter(t={}){return yM(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let tu=null;class we extends $o{static get utcInstance(){return tu===null&&(tu=new we(0)),tu}static instance(t){return t===0?we.utcInstance:new we(t)}static parseSpecifier(t){if(t){const n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new we(hc(n[1],n[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${oo(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${oo(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,n){return oo(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class AM extends $o{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function yi(e,t){if(xt(e)||e===null)return t;if(e instanceof $o)return e;if(OM(e)){const n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?lc.instance:n==="utc"||n==="gmt"?we.utcInstance:we.parseSpecifier(n)||Zn.create(e)}else return us(e)?we.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new AM(e)}let um=()=>Date.now(),hm="system",fm=null,dm=null,gm=null,mm=60,_m;class qt{static get now(){return um}static set now(t){um=t}static set defaultZone(t){hm=t}static get defaultZone(){return yi(hm,lc.instance)}static get defaultLocale(){return fm}static set defaultLocale(t){fm=t}static get defaultNumberingSystem(){return dm}static set defaultNumberingSystem(t){dm=t}static get defaultOutputCalendar(){return gm}static set defaultOutputCalendar(t){gm=t}static get twoDigitCutoffYear(){return mm}static set twoDigitCutoffYear(t){mm=t%100}static get throwOnInvalid(){return _m}static set throwOnInvalid(t){_m=t}static resetCaches(){$t.resetCache(),Zn.resetCache()}}function xt(e){return typeof e>"u"}function us(e){return typeof e=="number"}function cc(e){return typeof e=="number"&&e%1===0}function OM(e){return typeof e=="string"}function LM(e){return Object.prototype.toString.call(e)==="[object Date]"}function w0(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function FM(e){return Array.isArray(e)?e:[e]}function pm(e,t,n){if(e.length!==0)return e.reduce((i,s)=>{const r=[t(s),s];return i&&n(i[0],r[0])===i[0]?i:r},null)[1]}function PM(e,t){return t.reduce((n,i)=>(n[i]=e[i],n),{})}function ur(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wn(e,t,n){return cc(e)&&e>=t&&e<=n}function DM(e,t){return e-t*Math.floor(e/t)}function Jt(e,t=2){const n=e<0;let i;return n?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function pi(e){if(!(xt(e)||e===null||e===""))return parseInt(e,10)}function zi(e){if(!(xt(e)||e===null||e===""))return parseFloat(e)}function Ff(e){if(!(xt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function Pf(e,t,n=!1){const i=10**t;return(n?Math.trunc:Math.round)(e*i)/i}function Vo(e){return e%4===0&&(e%100!==0||e%400===0)}function ro(e){return Vo(e)?366:365}function gl(e,t){const n=DM(t-1,12)+1,i=e+(t-n)/12;return n===2?Vo(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function uc(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function ml(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,n=e-1,i=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return t===4||i===3?53:52}function rh(e){return e>99?e:e>qt.twoDigitCutoffYear?1900+e:2e3+e}function E0(e,t,n,i=null){const s=new Date(e),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(r.timeZone=i);const o={timeZoneName:t,...r},a=new Intl.DateTimeFormat(n,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function hc(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0,s=n<0||Object.is(n,-0)?-i:i;return n*60+s}function C0(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Ye(`Invalid unit value ${e}`);return t}function _l(e,t){const n={};for(const i in e)if(ur(e,i)){const s=e[i];if(s==null)continue;n[t(i)]=C0(s)}return n}function oo(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${Jt(n,2)}:${Jt(i,2)}`;case"narrow":return`${s}${n}${i>0?`:${i}`:""}`;case"techie":return`${s}${Jt(n,2)}${Jt(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function fc(e){return PM(e,["hour","minute","second","millisecond"])}const kM=["January","February","March","April","May","June","July","August","September","October","November","December"],T0=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],NM=["J","F","M","A","M","J","J","A","S","O","N","D"];function S0(e){switch(e){case"narrow":return[...NM];case"short":return[...T0];case"long":return[...kM];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const R0=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],I0=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],GM=["M","T","W","T","F","S","S"];function b0(e){switch(e){case"narrow":return[...GM];case"short":return[...I0];case"long":return[...R0];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const M0=["AM","PM"],zM=["Before Christ","Anno Domini"],WM=["BC","AD"],UM=["B","A"];function A0(e){switch(e){case"narrow":return[...UM];case"short":return[...WM];case"long":return[...zM];default:return null}}function $M(e){return M0[e.hour<12?0:1]}function VM(e,t){return b0(t)[e.weekday-1]}function YM(e,t){return S0(t)[e.month-1]}function HM(e,t){return A0(t)[e.year<0?0:1]}function BM(e,t,n="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&r){const h=e==="days";switch(t){case 1:return h?"tomorrow":`next ${s[e][0]}`;case-1:return h?"yesterday":`last ${s[e][0]}`;case 0:return h?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=s[e],u=i?l?c[1]:c[2]||c[1]:l?s[e][0]:e;return o?`${a} ${u} ago`:`in ${a} ${u}`}function ym(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const XM={D:dl,DD:n0,DDD:i0,DDDD:s0,t:r0,tt:o0,ttt:a0,tttt:l0,T:c0,TT:u0,TTT:h0,TTTT:f0,f:d0,ff:m0,fff:p0,ffff:x0,F:g0,FF:_0,FFF:y0,FFFF:v0};class pe{static create(t,n={}){return new pe(t,n)}static parseFormat(t){let n=null,i="",s=!1;const r=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&r.push({literal:s||/^\s+$/.test(i),val:i}),n=null,i="",s=!s):s||a===n?i+=a:(i.length>0&&r.push({literal:/^\s+$/.test(i),val:i}),i=a,n=a)}return i.length>0&&r.push({literal:s||/^\s+$/.test(i),val:i}),r}static macroTokenToFormatOpts(t){return XM[t]}constructor(t,n){this.opts=n,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...n}).format()}dtFormatter(t,n={}){return this.loc.dtFormatter(t,{...this.opts,...n})}formatDateTime(t,n){return this.dtFormatter(t,n).format()}formatDateTimeParts(t,n){return this.dtFormatter(t,n).formatToParts()}formatInterval(t,n){return this.dtFormatter(t.start,n).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,n){return this.dtFormatter(t,n).resolvedOptions()}num(t,n=0){if(this.opts.forceSimple)return Jt(t,n);const i={...this.opts};return n>0&&(i.padTo=n),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,n){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(d,g)=>this.loc.extract(t,d,g),o=d=>t.isOffsetFixed&&t.offset===0&&d.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,d.format):"",a=()=>i?$M(t):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(d,g)=>i?YM(t,d):r(g?{month:d}:{month:d,day:"numeric"},"month"),c=(d,g)=>i?VM(t,d):r(g?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),u=d=>{const g=pe.macroTokenToFormatOpts(d);return g?this.formatWithSystemDefault(t,g):d},h=d=>i?HM(t,d):r({era:d},"era"),f=d=>{switch(d){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return s?r({day:"numeric"},"day"):this.num(t.day);case"dd":return s?r({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return s?r({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?r({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?r({month:"numeric"},"month"):this.num(t.month);case"MM":return s?r({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?r({year:"numeric"},"year"):this.num(t.year);case"yy":return s?r({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?r({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?r({year:"numeric"},"year"):this.num(t.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(d)}};return ym(pe.parseFormat(n),f)}formatDurationFromString(t,n){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>c=>{const u=i(c);return u?this.num(l.get(u),c.length):c},r=pe.parseFormat(n),o=r.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return ym(r,s(a))}}class an{constructor(t,n){this.reason=t,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const O0=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Tr(...e){const t=e.reduce((n,i)=>n+i.source,"");return RegExp(`^${t}$`)}function Sr(...e){return t=>e.reduce(([n,i,s],r)=>{const[o,a,l]=r(t,s);return[{...n,...o},a||i,l]},[{},null,1]).slice(0,2)}function Rr(e,...t){if(e==null)return[null,null];for(const[n,i]of t){const s=n.exec(e);if(s)return i(s)}return[null,null]}function L0(...e){return(t,n)=>{const i={};let s;for(s=0;s<e.length;s++)i[e[s]]=pi(t[n+s]);return[i,null,n+s]}}const F0=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,ZM=`(?:${F0.source}?(?:\\[(${O0.source})\\])?)?`,Df=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,P0=RegExp(`${Df.source}${ZM}`),kf=RegExp(`(?:T${P0.source})?`),jM=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,KM=/(\d{4})-?W(\d\d)(?:-?(\d))?/,qM=/(\d{4})-?(\d{3})/,JM=L0("weekYear","weekNumber","weekDay"),QM=L0("year","ordinal"),tA=/(\d{4})-(\d\d)-(\d\d)/,D0=RegExp(`${Df.source} ?(?:${F0.source}|(${O0.source}))?`),eA=RegExp(`(?: ${D0.source})?`);function Ks(e,t,n){const i=e[t];return xt(i)?n:pi(i)}function nA(e,t){return[{year:Ks(e,t),month:Ks(e,t+1,1),day:Ks(e,t+2,1)},null,t+3]}function Ir(e,t){return[{hours:Ks(e,t,0),minutes:Ks(e,t+1,0),seconds:Ks(e,t+2,0),milliseconds:Ff(e[t+3])},null,t+4]}function Yo(e,t){const n=!e[t]&&!e[t+1],i=hc(e[t+1],e[t+2]),s=n?null:we.instance(i);return[{},s,t+3]}function Ho(e,t){const n=e[t]?Zn.create(e[t]):null;return[{},n,t+1]}const iA=RegExp(`^T?${Df.source}$`),sA=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function rA(e){const[t,n,i,s,r,o,a,l,c]=e,u=t[0]==="-",h=l&&l[0]==="-",f=(d,g=!1)=>d!==void 0&&(g||d&&u)?-d:d;return[{years:f(zi(n)),months:f(zi(i)),weeks:f(zi(s)),days:f(zi(r)),hours:f(zi(o)),minutes:f(zi(a)),seconds:f(zi(l),l==="-0"),milliseconds:f(Ff(c),h)}]}const oA={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Nf(e,t,n,i,s,r,o){const a={year:t.length===2?rh(pi(t)):pi(t),month:T0.indexOf(n)+1,day:pi(i),hour:pi(s),minute:pi(r)};return o&&(a.second=pi(o)),e&&(a.weekday=e.length>3?R0.indexOf(e)+1:I0.indexOf(e)+1),a}const aA=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function lA(e){const[,t,n,i,s,r,o,a,l,c,u,h]=e,f=Nf(t,s,i,n,r,o,a);let d;return l?d=oA[l]:c?d=0:d=hc(u,h),[f,new we(d)]}function cA(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const uA=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,hA=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,fA=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function xm(e){const[,t,n,i,s,r,o,a]=e;return[Nf(t,s,i,n,r,o,a),we.utcInstance]}function dA(e){const[,t,n,i,s,r,o,a]=e;return[Nf(t,a,n,i,s,r,o),we.utcInstance]}const gA=Tr(jM,kf),mA=Tr(KM,kf),_A=Tr(qM,kf),pA=Tr(P0),k0=Sr(nA,Ir,Yo,Ho),yA=Sr(JM,Ir,Yo,Ho),xA=Sr(QM,Ir,Yo,Ho),vA=Sr(Ir,Yo,Ho);function wA(e){return Rr(e,[gA,k0],[mA,yA],[_A,xA],[pA,vA])}function EA(e){return Rr(cA(e),[aA,lA])}function CA(e){return Rr(e,[uA,xm],[hA,xm],[fA,dA])}function TA(e){return Rr(e,[sA,rA])}const SA=Sr(Ir);function RA(e){return Rr(e,[iA,SA])}const IA=Tr(tA,eA),bA=Tr(D0),MA=Sr(Ir,Yo,Ho);function AA(e){return Rr(e,[IA,k0],[bA,MA])}const vm="Invalid Duration",N0={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},OA={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...N0},$e=146097/400,Ls=146097/4800,LA={years:{quarters:4,months:12,weeks:$e/7,days:$e,hours:$e*24,minutes:$e*24*60,seconds:$e*24*60*60,milliseconds:$e*24*60*60*1e3},quarters:{months:3,weeks:$e/28,days:$e/4,hours:$e*24/4,minutes:$e*24*60/4,seconds:$e*24*60*60/4,milliseconds:$e*24*60*60*1e3/4},months:{weeks:Ls/7,days:Ls,hours:Ls*24,minutes:Ls*24*60,seconds:Ls*24*60*60,milliseconds:Ls*24*60*60*1e3},...N0},ts=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],FA=ts.slice(0).reverse();function hi(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new St(i)}function G0(e,t){let n=t.milliseconds??0;for(const i of FA.slice(1))t[i]&&(n+=t[i]*e[i].milliseconds);return n}function wm(e,t){const n=G0(e,t)<0?-1:1;ts.reduceRight((i,s)=>{if(xt(t[s]))return i;if(i){const r=t[i]*n,o=e[s][i],a=Math.floor(r/o);t[s]+=a*n,t[i]-=a*o*n}return s},null),ts.reduce((i,s)=>{if(xt(t[s]))return i;if(i){const r=t[i]%1;t[i]-=r,t[s]+=r*e[i][s]}return s},null)}function PA(e){const t={};for(const[n,i]of Object.entries(e))i!==0&&(t[n]=i);return t}class St{constructor(t){const n=t.conversionAccuracy==="longterm"||!1;let i=n?LA:OA;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||$t.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,n){return St.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(t==null||typeof t!="object")throw new Ye(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new St({values:_l(t,St.normalizeUnit),loc:$t.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(us(t))return St.fromMillis(t);if(St.isDuration(t))return t;if(typeof t=="object")return St.fromObject(t);throw new Ye(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){const[i]=TA(t);return i?St.fromObject(i,n):St.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){const[i]=RA(t);return i?St.fromObject(i,n):St.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new Ye("need to specify a reason the Duration is invalid");const i=t instanceof an?t:new an(t,n);if(qt.throwOnInvalid)throw new hM(i);return new St({invalid:i})}static normalizeUnit(t){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!n)throw new e0(t);return n}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,n={}){const i={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?pe.create(this.loc,i).formatDurationFromString(this,t):vm}toHuman(t={}){if(!this.isValid)return vm;const n=ts.map(i=>{const s=this.values[i];return xt(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=Pf(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},ht.fromMillis(n,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?G0(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const n=St.fromDurationLike(t),i={};for(const s of ts)(ur(n.values,s)||ur(this.values,s))&&(i[s]=n.get(s)+this.get(s));return hi(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const n=St.fromDurationLike(t);return this.plus(n.negate())}mapUnits(t){if(!this.isValid)return this;const n={};for(const i of Object.keys(this.values))n[i]=C0(t(this.values[i],i));return hi(this,{values:n},!0)}get(t){return this[St.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const n={...this.values,..._l(t,St.normalizeUnit)};return hi(this,{values:n})}reconfigure({locale:t,numberingSystem:n,conversionAccuracy:i,matrix:s}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:n}),matrix:s,conversionAccuracy:i};return hi(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return wm(this.matrix,t),hi(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=PA(this.normalize().shiftToAll().toObject());return hi(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>St.normalizeUnit(o));const n={},i={},s=this.toObject();let r;for(const o of ts)if(t.indexOf(o)>=0){r=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;us(s[o])&&(a+=s[o]);const l=Math.trunc(a);n[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else us(s[o])&&(i[o]=s[o]);for(const o in i)i[o]!==0&&(n[r]+=o===r?i[o]:i[o]/this.matrix[r][o]);return wm(this.matrix,n),hi(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=this.values[n]===0?0:-this.values[n];return hi(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function n(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of ts)if(!n(this.values[i],t.values[i]))return!1;return!0}}const Fs="Invalid Interval";function DA(e,t){return!e||!e.isValid?Zt.invalid("missing or invalid start"):!t||!t.isValid?Zt.invalid("missing or invalid end"):t<e?Zt.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Zt{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new Ye("need to specify a reason the Interval is invalid");const i=t instanceof an?t:new an(t,n);if(qt.throwOnInvalid)throw new uM(i);return new Zt({invalid:i})}static fromDateTimes(t,n){const i=Gr(t),s=Gr(n),r=DA(i,s);return r??new Zt({start:i,end:s})}static after(t,n){const i=St.fromDurationLike(n),s=Gr(t);return Zt.fromDateTimes(s,s.plus(i))}static before(t,n){const i=St.fromDurationLike(n),s=Gr(t);return Zt.fromDateTimes(s.minus(i),s)}static fromISO(t,n){const[i,s]=(t||"").split("/",2);if(i&&s){let r,o;try{r=ht.fromISO(i,n),o=r.isValid}catch{o=!1}let a,l;try{a=ht.fromISO(s,n),l=a.isValid}catch{l=!1}if(o&&l)return Zt.fromDateTimes(r,a);if(o){const c=St.fromISO(s,n);if(c.isValid)return Zt.after(r,c)}else if(l){const c=St.fromISO(i,n);if(c.isValid)return Zt.before(a,c)}}return Zt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const n=this.start.startOf(t),i=this.end.startOf(t);return Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:n}={}){return this.isValid?Zt.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];const n=t.map(Gr).filter(o=>this.contains(o)).sort(),i=[];let{s}=this,r=0;for(;s<this.e;){const o=n[r]||this.e,a=+o>+this.e?this.e:o;i.push(Zt.fromDateTimes(s,a)),s=a,r+=1}return i}splitBy(t){const n=St.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:i}=this,s=1,r;const o=[];for(;i<this.e;){const a=this.start.plus(n.mapUnits(l=>l*s));r=+a>+this.e?this.e:a,o.push(Zt.fromDateTimes(i,r)),i=r,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const n=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return n>=i?null:Zt.fromDateTimes(n,i)}union(t){if(!this.isValid)return this;const n=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return Zt.fromDateTimes(n,i)}static merge(t){const[n,i]=t.sort((s,r)=>s.s-r.s).reduce(([s,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[s,r.union(o)]:[s.concat([r]),o]:[s,o],[[],null]);return i&&n.push(i),n}static xor(t){let n=null,i=0;const s=[],r=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...r),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?n=l.time:(n&&+n!=+l.time&&s.push(Zt.fromDateTimes(n,l.time)),n=null);return Zt.merge(s)}difference(...t){return Zt.xor([this].concat(t)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Fs}toLocaleString(t=dl,n={}){return this.isValid?pe.create(this.s.loc.clone(n),t).formatInterval(this):Fs}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Fs}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Fs}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Fs}toFormat(t,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${n}${this.e.toFormat(t)}`:Fs}toDuration(t,n){return this.isValid?this.e.diff(this.s,t,n):St.invalid(this.invalidReason)}mapEndpoints(t){return Zt.fromDateTimes(t(this.s),t(this.e))}}class ya{static hasDST(t=qt.defaultZone){const n=ht.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(t){return Zn.isValidZone(t)}static normalizeZone(t){return yi(t,qt.defaultZone)}static months(t="long",{locale:n=null,numberingSystem:i=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||$t.create(n,i,r)).months(t)}static monthsFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||$t.create(n,i,r)).months(t,!0)}static weekdays(t="long",{locale:n=null,numberingSystem:i=null,locObj:s=null}={}){return(s||$t.create(n,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:s=null}={}){return(s||$t.create(n,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return $t.create(t).meridiems()}static eras(t="short",{locale:n=null}={}){return $t.create(n,null,"gregory").eras(t)}static features(){return{relative:w0()}}}function Em(e,t){const n=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor(St.fromMillis(i).as("days"))}function kA(e,t,n){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=Em(l,c);return(u-u%7)/7}],["days",Em]],s={},r=e;let o,a;for(const[l,c]of i)n.indexOf(l)>=0&&(o=l,s[l]=c(e,t),a=r.plus(s),a>t?(s[l]--,e=r.plus(s),e>t&&(a=e,s[l]--,e=r.plus(s))):e=a);return[e,s,a,o]}function NA(e,t,n,i){let[s,r,o,a]=kA(e,t,n);const l=t-s,c=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<t&&(o=s.plus({[a]:1})),o!==s&&(r[a]=(r[a]||0)+l/(o-s)));const u=St.fromObject(r,i);return c.length>0?St.fromMillis(l,i).shiftTo(...c).plus(u):u}const Gf={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Cm={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},GA=Gf.hanidec.replace(/[\[|\]]/g,"").split("");function zA(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(e[n].search(Gf.hanidec)!==-1)t+=GA.indexOf(e[n]);else for(const s in Cm){const[r,o]=Cm[s];i>=r&&i<=o&&(t+=i-r)}}return parseInt(t,10)}else return t}function Je({numberingSystem:e},t=""){return new RegExp(`${Gf[e||"latn"]}${t}`)}const WA="missing Intl.DateTimeFormat.formatToParts support";function At(e,t=n=>n){return{regex:e,deser:([n])=>t(zA(n))}}const UA=String.fromCharCode(160),z0=`[ ${UA}]`,W0=new RegExp(z0,"g");function $A(e){return e.replace(/\./g,"\\.?").replace(W0,z0)}function Tm(e){return e.replace(/\./g,"").replace(W0," ").toLowerCase()}function Qe(e,t){return e===null?null:{regex:RegExp(e.map($A).join("|")),deser:([n])=>e.findIndex(i=>Tm(n)===Tm(i))+t}}function Sm(e,t){return{regex:e,deser:([,n,i])=>hc(n,i),groups:t}}function xa(e){return{regex:e,deser:([t])=>t}}function VA(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function YA(e,t){const n=Je(t),i=Je(t,"{2}"),s=Je(t,"{3}"),r=Je(t,"{4}"),o=Je(t,"{6}"),a=Je(t,"{1,2}"),l=Je(t,"{1,3}"),c=Je(t,"{1,6}"),u=Je(t,"{1,9}"),h=Je(t,"{2,4}"),f=Je(t,"{4,6}"),d=p=>({regex:RegExp(VA(p.val)),deser:([y])=>y,literal:!0}),m=(p=>{if(e.literal)return d(p);switch(p.val){case"G":return Qe(t.eras("short"),0);case"GG":return Qe(t.eras("long"),0);case"y":return At(c);case"yy":return At(h,rh);case"yyyy":return At(r);case"yyyyy":return At(f);case"yyyyyy":return At(o);case"M":return At(a);case"MM":return At(i);case"MMM":return Qe(t.months("short",!0),1);case"MMMM":return Qe(t.months("long",!0),1);case"L":return At(a);case"LL":return At(i);case"LLL":return Qe(t.months("short",!1),1);case"LLLL":return Qe(t.months("long",!1),1);case"d":return At(a);case"dd":return At(i);case"o":return At(l);case"ooo":return At(s);case"HH":return At(i);case"H":return At(a);case"hh":return At(i);case"h":return At(a);case"mm":return At(i);case"m":return At(a);case"q":return At(a);case"qq":return At(i);case"s":return At(a);case"ss":return At(i);case"S":return At(l);case"SSS":return At(s);case"u":return xa(u);case"uu":return xa(a);case"uuu":return At(n);case"a":return Qe(t.meridiems(),0);case"kkkk":return At(r);case"kk":return At(h,rh);case"W":return At(a);case"WW":return At(i);case"E":case"c":return At(n);case"EEE":return Qe(t.weekdays("short",!1),1);case"EEEE":return Qe(t.weekdays("long",!1),1);case"ccc":return Qe(t.weekdays("short",!0),1);case"cccc":return Qe(t.weekdays("long",!0),1);case"Z":case"ZZ":return Sm(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return Sm(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return xa(/[a-z_+-/]{1,256}?/i);case" ":return xa(/[^\S\n\r]/);default:return d(p)}})(e)||{invalidReason:WA};return m.token=e,m}const HA={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function BA(e,t,n){const{type:i,value:s}=e;if(i==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const r=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=HA[o];if(typeof a=="object"&&(a=a[r]),a)return{literal:!1,val:a}}function XA(e){return[`^${e.map(n=>n.regex).reduce((n,i)=>`${n}(${i.source})`,"")}$`,e]}function ZA(e,t,n){const i=e.match(t);if(i){const s={};let r=1;for(const o in n)if(ur(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(i.slice(r,r+l))),r+=l}return[i,s]}else return[i,{}]}function jA(e){const t=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,i;return xt(e.z)||(n=Zn.create(e.z)),xt(e.Z)||(n||(n=new we(e.Z)),i=e.Z),xt(e.q)||(e.M=(e.q-1)*3+1),xt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),xt(e.u)||(e.S=Ff(e.u)),[Object.keys(e).reduce((r,o)=>{const a=t(o);return a&&(r[a]=e[o]),r},{}),n,i]}let eu=null;function KA(){return eu||(eu=ht.fromMillis(1555555555555)),eu}function qA(e,t){if(e.literal)return e;const n=pe.macroTokenToFormatOpts(e.val),i=V0(n,t);return i==null||i.includes(void 0)?e:i}function U0(e,t){return Array.prototype.concat(...e.map(n=>qA(n,t)))}function $0(e,t,n){const i=U0(pe.parseFormat(n),e),s=i.map(o=>YA(o,e)),r=s.find(o=>o.invalidReason);if(r)return{input:t,tokens:i,invalidReason:r.invalidReason};{const[o,a]=XA(s),l=RegExp(o,"i"),[c,u]=ZA(t,l,a),[h,f,d]=u?jA(u):[null,null,void 0];if(ur(u,"a")&&ur(u,"H"))throw new Xr("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:c,matches:u,result:h,zone:f,specificOffset:d}}}function JA(e,t,n){const{result:i,zone:s,specificOffset:r,invalidReason:o}=$0(e,t,n);return[i,s,r,o]}function V0(e,t){if(!e)return null;const i=pe.create(t,e).dtFormatter(KA()),s=i.formatToParts(),r=i.resolvedOptions();return s.map(o=>BA(o,e,r))}const Y0=[0,31,59,90,120,151,181,212,243,273,304,334],H0=[0,31,60,91,121,152,182,213,244,274,305,335];function He(e,t){return new an("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function B0(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function X0(e,t,n){return n+(Vo(e)?H0:Y0)[t-1]}function Z0(e,t){const n=Vo(e)?H0:Y0,i=n.findIndex(r=>r<t),s=t-n[i];return{month:i+1,day:s}}function oh(e){const{year:t,month:n,day:i}=e,s=X0(t,n,i),r=B0(t,n,i);let o=Math.floor((s-r+10)/7),a;return o<1?(a=t-1,o=ml(a)):o>ml(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:r,...fc(e)}}function Rm(e){const{weekYear:t,weekNumber:n,weekday:i}=e,s=B0(t,1,4),r=ro(t);let o=n*7+i-s-3,a;o<1?(a=t-1,o+=ro(a)):o>r?(a=t+1,o-=ro(t)):a=t;const{month:l,day:c}=Z0(a,o);return{year:a,month:l,day:c,...fc(e)}}function nu(e){const{year:t,month:n,day:i}=e,s=X0(t,n,i);return{year:t,ordinal:s,...fc(e)}}function Im(e){const{year:t,ordinal:n}=e,{month:i,day:s}=Z0(t,n);return{year:t,month:i,day:s,...fc(e)}}function QA(e){const t=cc(e.weekYear),n=Wn(e.weekNumber,1,ml(e.weekYear)),i=Wn(e.weekday,1,7);return t?n?i?!1:He("weekday",e.weekday):He("week",e.week):He("weekYear",e.weekYear)}function tO(e){const t=cc(e.year),n=Wn(e.ordinal,1,ro(e.year));return t?n?!1:He("ordinal",e.ordinal):He("year",e.year)}function j0(e){const t=cc(e.year),n=Wn(e.month,1,12),i=Wn(e.day,1,gl(e.year,e.month));return t?n?i?!1:He("day",e.day):He("month",e.month):He("year",e.year)}function K0(e){const{hour:t,minute:n,second:i,millisecond:s}=e,r=Wn(t,0,23)||t===24&&n===0&&i===0&&s===0,o=Wn(n,0,59),a=Wn(i,0,59),l=Wn(s,0,999);return r?o?a?l?!1:He("millisecond",s):He("second",i):He("minute",n):He("hour",t)}const iu="Invalid DateTime",bm=864e13;function va(e){return new an("unsupported zone",`the zone "${e.name}" is not supported`)}function su(e){return e.weekData===null&&(e.weekData=oh(e.c)),e.weekData}function Wi(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new ht({...n,...t,old:n})}function q0(e,t,n){let i=e-t*60*1e3;const s=n.offset(i);if(t===s)return[i,t];i-=(s-t)*60*1e3;const r=n.offset(i);return s===r?[i,s]:[e-Math.min(s,r)*60*1e3,Math.max(s,r)]}function wa(e,t){e+=t*60*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Fa(e,t,n){return q0(uc(e),t,n)}function Mm(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,r={...e.c,year:i,month:s,day:Math.min(e.c.day,gl(i,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=St.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=uc(r);let[l,c]=q0(a,n,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function Nr(e,t,n,i,s,r){const{setZone:o,zone:a}=n;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=ht.fromObject(e,{...n,zone:l,specificOffset:r});return o?c:c.setZone(a)}else return ht.invalid(new an("unparsable",`the input "${s}" can't be parsed as ${i}`))}function Ea(e,t,n=!0){return e.isValid?pe.create($t.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function ru(e,t){const n=e.c.year>9999||e.c.year<0;let i="";return n&&e.c.year>=0&&(i+="+"),i+=Jt(e.c.year,n?6:4),t?(i+="-",i+=Jt(e.c.month),i+="-",i+=Jt(e.c.day)):(i+=Jt(e.c.month),i+=Jt(e.c.day)),i}function Am(e,t,n,i,s,r){let o=Jt(e.c.hour);return t?(o+=":",o+=Jt(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=":")):o+=Jt(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=Jt(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=Jt(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!r?o+="Z":e.o<0?(o+="-",o+=Jt(Math.trunc(-e.o/60)),o+=":",o+=Jt(Math.trunc(-e.o%60))):(o+="+",o+=Jt(Math.trunc(e.o/60)),o+=":",o+=Jt(Math.trunc(e.o%60)))),r&&(o+="["+e.zone.ianaName+"]"),o}const J0={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},eO={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},nO={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Q0=["year","month","day","hour","minute","second","millisecond"],iO=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],sO=["year","ordinal","hour","minute","second","millisecond"];function Om(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new e0(e);return t}function Lm(e,t){const n=yi(t.zone,qt.defaultZone),i=$t.fromObject(t),s=qt.now();let r,o;if(xt(e.year))r=s;else{for(const c of Q0)xt(e[c])&&(e[c]=J0[c]);const a=j0(e)||K0(e);if(a)return ht.invalid(a);const l=n.offset(s);[r,o]=Fa(e,l,n)}return new ht({ts:r,zone:n,loc:i,o})}function Fm(e,t,n){const i=xt(n.round)?!0:n.round,s=(o,a)=>(o=Pf(o,i||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(o,a)),r=o=>n.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(n.unit)return s(r(n.unit),n.unit);for(const o of n.units){const a=r(o);if(Math.abs(a)>=1)return s(a,o)}return s(e>t?-0:0,n.units[n.units.length-1])}function Pm(e){let t={},n;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}class ht{constructor(t){const n=t.zone||qt.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new an("invalid input"):null)||(n.isValid?null:va(n));this.ts=xt(t.ts)?qt.now():t.ts;let s=null,r=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(n))[s,r]=[t.old.c,t.old.o];else{const a=n.offset(this.ts);s=wa(this.ts,a),i=Number.isNaN(s.year)?new an("invalid input"):null,s=i?null:s,r=i?null:a}this._zone=n,this.loc=t.loc||$t.create(),this.invalid=i,this.weekData=null,this.c=s,this.o=r,this.isLuxonDateTime=!0}static now(){return new ht({})}static local(){const[t,n]=Pm(arguments),[i,s,r,o,a,l,c]=n;return Lm({year:i,month:s,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,n]=Pm(arguments),[i,s,r,o,a,l,c]=n;return t.zone=we.utcInstance,Lm({year:i,month:s,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,n={}){const i=LM(t)?t.valueOf():NaN;if(Number.isNaN(i))return ht.invalid("invalid input");const s=yi(n.zone,qt.defaultZone);return s.isValid?new ht({ts:i,zone:s,loc:$t.fromObject(n)}):ht.invalid(va(s))}static fromMillis(t,n={}){if(us(t))return t<-bm||t>bm?ht.invalid("Timestamp out of range"):new ht({ts:t,zone:yi(n.zone,qt.defaultZone),loc:$t.fromObject(n)});throw new Ye(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(us(t))return new ht({ts:t*1e3,zone:yi(n.zone,qt.defaultZone),loc:$t.fromObject(n)});throw new Ye("fromSeconds requires a numerical input")}static fromObject(t,n={}){t=t||{};const i=yi(n.zone,qt.defaultZone);if(!i.isValid)return ht.invalid(va(i));const s=qt.now(),r=xt(n.specificOffset)?i.offset(s):n.specificOffset,o=_l(t,Om),a=!xt(o.ordinal),l=!xt(o.year),c=!xt(o.month)||!xt(o.day),u=l||c,h=o.weekYear||o.weekNumber,f=$t.fromObject(n);if((u||a)&&h)throw new Xr("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new Xr("Can't mix ordinal dates with month/day");const d=h||o.weekday&&!u;let g,m,p=wa(s,r);d?(g=iO,m=eO,p=oh(p)):a?(g=sO,m=nO,p=nu(p)):(g=Q0,m=J0);let y=!1;for(const R of g){const U=o[R];xt(U)?y?o[R]=m[R]:o[R]=p[R]:y=!0}const x=d?QA(o):a?tO(o):j0(o),E=x||K0(o);if(E)return ht.invalid(E);const v=d?Rm(o):a?Im(o):o,[S,T]=Fa(v,r,i),b=new ht({ts:S,zone:i,o:T,loc:f});return o.weekday&&u&&t.weekday!==b.weekday?ht.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${b.toISO()}`):b}static fromISO(t,n={}){const[i,s]=wA(t);return Nr(i,s,n,"ISO 8601",t)}static fromRFC2822(t,n={}){const[i,s]=EA(t);return Nr(i,s,n,"RFC 2822",t)}static fromHTTP(t,n={}){const[i,s]=CA(t);return Nr(i,s,n,"HTTP",n)}static fromFormat(t,n,i={}){if(xt(t)||xt(n))throw new Ye("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:r=null}=i,o=$t.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0}),[a,l,c,u]=JA(o,t,n);return u?ht.invalid(u):Nr(a,l,i,`format ${n}`,t,c)}static fromString(t,n,i={}){return ht.fromFormat(t,n,i)}static fromSQL(t,n={}){const[i,s]=AA(t);return Nr(i,s,n,"SQL",t)}static invalid(t,n=null){if(!t)throw new Ye("need to specify a reason the DateTime is invalid");const i=t instanceof an?t:new an(t,n);if(qt.throwOnInvalid)throw new cM(i);return new ht({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,n={}){const i=V0(t,$t.fromObject(n));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(t,n={}){return U0(pe.parseFormat(t),$t.fromObject(n)).map(s=>s.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?su(this).weekYear:NaN}get weekNumber(){return this.isValid?su(this).weekNumber:NaN}get weekday(){return this.isValid?su(this).weekday:NaN}get ordinal(){return this.isValid?nu(this.c).ordinal:NaN}get monthShort(){return this.isValid?ya.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ya.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ya.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ya.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,n=6e4,i=uc(this.c),s=this.zone.offset(i-t),r=this.zone.offset(i+t),o=this.zone.offset(i-s*n),a=this.zone.offset(i-r*n);if(o===a)return[this];const l=i-o*n,c=i-a*n,u=wa(l,o),h=wa(c,a);return u.hour===h.hour&&u.minute===h.minute&&u.second===h.second&&u.millisecond===h.millisecond?[Wi(this,{ts:l}),Wi(this,{ts:c})]:[this]}get isInLeapYear(){return Vo(this.year)}get daysInMonth(){return gl(this.year,this.month)}get daysInYear(){return this.isValid?ro(this.year):NaN}get weeksInWeekYear(){return this.isValid?ml(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:n,numberingSystem:i,calendar:s}=pe.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:n,numberingSystem:i,outputCalendar:s}}toUTC(t=0,n={}){return this.setZone(we.instance(t),n)}toLocal(){return this.setZone(qt.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:i=!1}={}){if(t=yi(t,qt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(n||i){const r=t.offset(this.ts),o=this.toObject();[s]=Fa(o,r,t)}return Wi(this,{ts:s,zone:t})}else return ht.invalid(va(t))}reconfigure({locale:t,numberingSystem:n,outputCalendar:i}={}){const s=this.loc.clone({locale:t,numberingSystem:n,outputCalendar:i});return Wi(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const n=_l(t,Om),i=!xt(n.weekYear)||!xt(n.weekNumber)||!xt(n.weekday),s=!xt(n.ordinal),r=!xt(n.year),o=!xt(n.month)||!xt(n.day),a=r||o,l=n.weekYear||n.weekNumber;if((a||s)&&l)throw new Xr("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&s)throw new Xr("Can't mix ordinal dates with month/day");let c;i?c=Rm({...oh(this.c),...n}):xt(n.ordinal)?(c={...this.toObject(),...n},xt(n.day)&&(c.day=Math.min(gl(c.year,c.month),c.day))):c=Im({...nu(this.c),...n});const[u,h]=Fa(c,this.o,this.zone);return Wi(this,{ts:u,o:h})}plus(t){if(!this.isValid)return this;const n=St.fromDurationLike(t);return Wi(this,Mm(this,n))}minus(t){if(!this.isValid)return this;const n=St.fromDurationLike(t).negate();return Wi(this,Mm(this,n))}startOf(t){if(!this.isValid)return this;const n={},i=St.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks"&&(n.weekday=1),i==="quarters"){const s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,n={}){return this.isValid?pe.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):iu}toLocaleString(t=dl,n={}){return this.isValid?pe.create(this.loc.clone(n),t).formatDateTime(this):iu}toLocaleParts(t={}){return this.isValid?pe.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:n=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=ru(this,o);return a+="T",a+=Am(this,o,n,i,s,r),a}toISODate({format:t="extended"}={}){return this.isValid?ru(this,t==="extended"):null}toISOWeekDate(){return Ea(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:n=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:r=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+Am(this,o==="extended",n,t,i,r):null}toRFC2822(){return Ea(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ea(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?ru(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:n=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(n||t)&&(i&&(s+=" "),n?s+="z":t&&(s+="ZZ")),Ea(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():iu}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const n={...this.c};return t.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,n="milliseconds",i={}){if(!this.isValid||!t.isValid)return St.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},r=FM(n).map(St.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=NA(a,l,r,s);return o?c.negate():c}diffNow(t="milliseconds",n={}){return this.diff(ht.now(),t,n)}until(t){return this.isValid?Zt.fromDateTimes(this,t):this}hasSame(t,n){if(!this.isValid)return!1;const i=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(n)<=i&&i<=s.endOf(n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const n=t.base||ht.fromObject({},{zone:this.zone}),i=t.padding?this<n?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],r=t.unit;return Array.isArray(t.unit)&&(s=t.unit,r=void 0),Fm(n,this.plus(i),{...t,numeric:"always",units:s,unit:r})}toRelativeCalendar(t={}){return this.isValid?Fm(t.base||ht.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(ht.isDateTime))throw new Ye("min requires all arguments be DateTimes");return pm(t,n=>n.valueOf(),Math.min)}static max(...t){if(!t.every(ht.isDateTime))throw new Ye("max requires all arguments be DateTimes");return pm(t,n=>n.valueOf(),Math.max)}static fromFormatExplain(t,n,i={}){const{locale:s=null,numberingSystem:r=null}=i,o=$t.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0});return $0(o,t,n)}static fromStringExplain(t,n,i={}){return ht.fromFormatExplain(t,n,i)}static get DATE_SHORT(){return dl}static get DATE_MED(){return n0}static get DATE_MED_WITH_WEEKDAY(){return fM}static get DATE_FULL(){return i0}static get DATE_HUGE(){return s0}static get TIME_SIMPLE(){return r0}static get TIME_WITH_SECONDS(){return o0}static get TIME_WITH_SHORT_OFFSET(){return a0}static get TIME_WITH_LONG_OFFSET(){return l0}static get TIME_24_SIMPLE(){return c0}static get TIME_24_WITH_SECONDS(){return u0}static get TIME_24_WITH_SHORT_OFFSET(){return h0}static get TIME_24_WITH_LONG_OFFSET(){return f0}static get DATETIME_SHORT(){return d0}static get DATETIME_SHORT_WITH_SECONDS(){return g0}static get DATETIME_MED(){return m0}static get DATETIME_MED_WITH_SECONDS(){return _0}static get DATETIME_MED_WITH_WEEKDAY(){return dM}static get DATETIME_FULL(){return p0}static get DATETIME_FULL_WITH_SECONDS(){return y0}static get DATETIME_HUGE(){return x0}static get DATETIME_HUGE_WITH_SECONDS(){return v0}}function Gr(e){if(ht.isDateTime(e))return e;if(e&&e.valueOf&&us(e.valueOf()))return ht.fromJSDate(e);if(e&&typeof e=="object")return ht.fromObject(e);throw new Ye(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function zf(e,t){if(!e)return"";let n=ht.fromISO(e);return t&&(n=n.setZone(`UTC+${t}`)),n.toLocaleString({weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})}function rO(e){if(!e)return"UTC";let t="GMT";return e>0&&(t+="+"),t+e.toString()}function oO(e){const t=Math.floor(e/86400);e-=t*(60*60*24);const n=Math.floor(e/(60*60));e-=n*(60*60);const i=Math.floor(e/60);return e-=i*60,t>0?`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`:`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`}const tx=document.createElement("i"),ex=document.createElement("i");tx.setAttribute("class","fa-solid fa-expand");ex.setAttribute("class","fa-solid fa-compress");const aO={props:{geojsons:Array,activityFiles:Array,timezoneOffsetHoursList:Array},data(){return{popupFreeze:new Boolean,popupRecord:new th,popupTimezoneOffsetHours:new Number(0),popupOverlay:new lm({}),vec:new xb({source:new Qb({features:[]}),visible:!0,style:new cs({stroke:new Cf({color:[60,99,130,1],width:3})})}),map:new $S({controls:_y(),layers:[new HR({source:new Xb})],view:new xn({enableRotation:!1,projection:"EPSG:4326"})}),zoomToExtent:new Jc}},watch:{geojsons:{handler(e){this.updateMapSource(e)}},zoomToExtent:{handler(e,t){this.map.removeControl(t),this.map.addControl(e)}}},methods:{toStringHDMS:Xp,toTimezoneDateString:zf,updateMapSource(e){var o,a;this.popupOverlay.setPosition(void 0);const t=this.map.getView(),n=this.vec.getSource(),i=new Array;for(let l=0;l<e.length;l++){const c=new dR().readFeature(e[l]);c.setId("lineString-"+l),i.push(c)}n.clear(),n.addFeatures(i),t.fit(n.getExtent(),{padding:[50,50,50,50]});const s=new Array,r=new Array;for(let l=0;l<i.length;l++){const c=new Xu(new or(((o=i[l])==null?void 0:o.getGeometry()).getFirstCoordinate()));c.setStyle(new cs({image:new cl({crossOrigin:"anonymous",src:VE,scale:.8})})),c.setId("startingPoint-"+l),s.push(c);const u=new Xu(new or(((a=i[l])==null?void 0:a.getGeometry()).getLastCoordinate()));u.setStyle(new cs({image:new cl({crossOrigin:"anonymous",src:$E,scale:.8})})),u.setId("destinationPoint-"+l),r.push(u)}n.addFeatures(s),n.addFeatures(r),this.zoomToExtent=new Jc({extent:t.getViewStateAndExtent().extent})},findNearestRecord(e,t){var r;const n=Number(e.split("-")[1]);let i=new th,s=Number.MAX_VALUE;return this.popupTimezoneOffsetHours=this.timezoneOffsetHoursList[n],(r=this.activityFiles[n].records)==null||r.forEach(o=>{if(!o.positionLong||!o.positionLat)return;const a=Math.abs(Math.sqrt(Math.pow(o.positionLong-t[0],2)+Math.pow(o.positionLat-t[1],2)));a<s&&(s=a,i=o)}),i},lineStringFeatureListener(e,t){e=="singleclick"&&(this.popupFreeze=!this.popupFreeze&&this.popupOverlay.getPosition()!=null),this.popupFreeze||this.popupOverlay.setPosition(void 0),!(this.popupFreeze==!0&&this.popupOverlay.getPosition()!=null)&&this.map.forEachFeatureAtPixel(t.pixel,n=>{n.getGeometry()instanceof rl&&(this.popupRecord=this.findNearestRecord(n.getId(),t.coordinate),this.popupOverlay.setPosition([this.popupRecord.positionLong,this.popupRecord.positionLat]),this.popupFreeze=e=="singleclick")},{hitTolerance:10})},updateExtent(){this.map.getView().fit(this.vec.getSource().getExtent(),{padding:[50,50,50,50]}),this.zoomToExtent=new Jc({extent:this.map.getView().getViewStateAndExtent().extent})}},mounted(){this.popupOverlay=new lm({element:document.getElementById("popup")}),this.map.addOverlay(this.popupOverlay),this.map.addLayer(this.vec),this.map.setTarget("map"),this.map.addControl(new iM({label:tx,labelActive:ex})),this.map.addControl(new aM),this.map.once("precompose",()=>this.updateExtent()),this.map.on("change:size",()=>this.updateExtent()),this.map.on("pointermove",e=>this.lineStringFeatureListener(e.type,e)),this.map.on("singleclick",e=>this.lineStringFeatureListener(e.type,e))}};const dc=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n},lO=L("div",{id:"map",style:{width:"100%",height:"100%"}},null,-1),cO={id:"popup",class:"ol-popup"},uO={class:"popup-content"},hO=L("span",null,"Time:",-1),fO=L("span",null,"Distance:",-1),dO=L("span",null," km",-1),gO=L("span",null,"Speed:",-1),mO=L("span",null," km/h",-1),_O=L("span",null,"Cadence:",-1),pO=L("span",null," rpm",-1),yO=L("span",null,"Heart Rate:",-1),xO=L("span",null," bpm",-1),vO=L("span",null,"Power:",-1),wO=L("span",null," watts",-1),EO=L("span",null,"Altitude:",-1),CO=L("span",null," masl",-1),TO=L("span",null,"Location:",-1);function SO(e,t,n,i,s,r){var o;return Ot(),Pt(Ve,null,[lO,L("div",cO,[L("div",uO,[L("div",null,[hO,L("span",null,Ct(s.popupRecord.timestamp?r.toTimezoneDateString(s.popupRecord.timestamp,s.popupTimezoneOffsetHours):"-"),1)]),L("div",null,[fO,L("span",null,Ct(s.popupRecord.distance?(s.popupRecord.distance/1e3).toFixed(2):"-"),1),dO]),L("div",null,[gO,L("span",null,Ct(s.popupRecord.speed?(s.popupRecord.speed*3600/1e3).toFixed(2):"-"),1),mO]),L("div",null,[_O,L("span",null,Ct(s.popupRecord.cadence?s.popupRecord.cadence:"-"),1),pO]),L("div",null,[yO,L("span",null,Ct(s.popupRecord.heartRate?s.popupRecord.heartRate:"-"),1),xO]),L("div",null,[vO,L("span",null,Ct(s.popupRecord.power?s.popupRecord.power:"-"),1),wO]),L("div",null,[EO,L("span",null,Ct(s.popupRecord.altitude?(o=s.popupRecord.altitude)==null?void 0:o.toFixed(2):"-"),1),CO]),L("div",null,[TO,L("span",null,Ct(s.popupRecord.positionLong&&s.popupRecord.positionLat?r.toStringHDMS([s.popupRecord.positionLong,s.popupRecord.positionLat]):"-"),1)])])])],64)}const RO=dc(aO,[["render",SO]]);function Pa(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function IO(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gc(e){let t,n,i;e.length!==2?(t=Pa,n=(a,l)=>Pa(e(a),l),i=(a,l)=>e(a)-l):(t=e===Pa||e===IO?e:bO,n=e,i=e);function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function r(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=s(a,l,c,u-1);return h>c&&i(a[h-1],l)>-i(a[h],l)?h-1:h}return{left:s,center:o,right:r}}function bO(){return 0}function MO(e){return e===null?NaN:+e}function*CG(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const AO=gc(Pa),OO=AO.right;gc(MO).center;const LO=OO;function FO(e,t){let n,i;if(t===void 0)for(const s of e)s!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)));else{let s=-1;for(let r of e)(r=t(r,++s,e))!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)))}return[n,i]}const PO=Math.sqrt(50),DO=Math.sqrt(10),kO=Math.sqrt(2);function pl(e,t,n){const i=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(i)),r=i/Math.pow(10,s),o=r>=PO?10:r>=DO?5:r>=kO?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?pl(e,t,n*2):[a,l,c]}function NO(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[s,r,o]=i?pl(t,e,n):pl(e,t,n);if(!(r>=s))return[];const a=r-s+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(r-c)/-o;else for(let c=0;c<a;++c)l[c]=(r-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function ah(e,t,n){return t=+t,e=+e,n=+n,pl(e,t,n)[2]}function lh(e,t,n){t=+t,e=+e,n=+n;const i=t<e,s=i?ah(t,e,n):ah(e,t,n);return(i?-1:1)*(s<0?1/-s:s)}function GO(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function Dm(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function zO(e,t){let n=0,i=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(++n,i+=s);else{let s=-1;for(let r of e)(r=t(r,++s,e))!=null&&(r=+r)>=r&&(++n,i+=r)}if(n)return i/n}function WO(e){return e}var ou=1,au=2,ch=3,jr=4,km=1e-6;function UO(e){return"translate("+e+",0)"}function $O(e){return"translate(0,"+e+")"}function VO(e){return t=>+e(t)}function YO(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function HO(){return!this.__axis}function nx(e,t){var n=[],i=null,s=null,r=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===ou||e===jr?-1:1,u=e===jr||e===au?"x":"y",h=e===ou||e===ch?UO:$O;function f(d){var g=i??(t.ticks?t.ticks.apply(t,n):t.domain()),m=s??(t.tickFormat?t.tickFormat.apply(t,n):WO),p=Math.max(r,0)+a,y=t.range(),x=+y[0]+l,E=+y[y.length-1]+l,v=(t.bandwidth?YO:VO)(t.copy(),l),S=d.selection?d.selection():d,T=S.selectAll(".domain").data([null]),b=S.selectAll(".tick").data(g,t).order(),R=b.exit(),U=b.enter().append("g").attr("class","tick"),A=b.select("line"),D=b.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(U),A=A.merge(U.append("line").attr("stroke","currentColor").attr(u+"2",c*r)),D=D.merge(U.append("text").attr("fill","currentColor").attr(u,c*p).attr("dy",e===ou?"0em":e===ch?"0.71em":"0.32em")),d!==S&&(T=T.transition(d),b=b.transition(d),A=A.transition(d),D=D.transition(d),R=R.transition(d).attr("opacity",km).attr("transform",function(F){return isFinite(F=v(F))?h(F+l):this.getAttribute("transform")}),U.attr("opacity",km).attr("transform",function(F){var $=this.parentNode.__axis;return h(($&&isFinite($=$(F))?$:v(F))+l)})),R.remove(),T.attr("d",e===jr||e===au?o?"M"+c*o+","+x+"H"+l+"V"+E+"H"+c*o:"M"+l+","+x+"V"+E:o?"M"+x+","+c*o+"V"+l+"H"+E+"V"+c*o:"M"+x+","+l+"H"+E),b.attr("opacity",1).attr("transform",function(F){return h(v(F)+l)}),A.attr(u+"2",c*r),D.attr(u,c*p).text(m),S.filter(HO).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===au?"start":e===jr?"end":"middle"),S.each(function(){this.__axis=v})}return f.scale=function(d){return arguments.length?(t=d,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),f):i&&i.slice()},f.tickFormat=function(d){return arguments.length?(s=d,f):s},f.tickSize=function(d){return arguments.length?(r=o=+d,f):r},f.tickSizeInner=function(d){return arguments.length?(r=+d,f):r},f.tickSizeOuter=function(d){return arguments.length?(o=+d,f):o},f.tickPadding=function(d){return arguments.length?(a=+d,f):a},f.offset=function(d){return arguments.length?(l=+d,f):l},f}function BO(e){return nx(ch,e)}function XO(e){return nx(jr,e)}var ZO={value:()=>{}};function ix(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Da(n)}function Da(e){this._=e}function jO(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Da.prototype=ix.prototype={constructor:Da,on:function(e,t){var n=this._,i=jO(e+"",n),s,r=-1,o=i.length;if(arguments.length<2){for(;++r<o;)if((s=(e=i[r]).type)&&(s=KO(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<o;)if(s=(e=i[r]).type)n[s]=Nm(n[s],e.name,t);else if(t==null)for(s in n)n[s]=Nm(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Da(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),i=0,s,r;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],s=0,r=i.length;s<r;++s)i[s].value.apply(t,n)}};function KO(e,t){for(var n=0,i=e.length,s;n<i;++n)if((s=e[n]).name===t)return s.value}function Nm(e,t,n){for(var i=0,s=e.length;i<s;++i)if(e[i].name===t){e[i]=ZO,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var uh="http://www.w3.org/1999/xhtml";const Gm={svg:"http://www.w3.org/2000/svg",xhtml:uh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Gm.hasOwnProperty(t)?{space:Gm[t],local:e}:e}function qO(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===uh&&t.documentElement.namespaceURI===uh?t.createElement(e):t.createElementNS(n,e)}}function JO(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function sx(e){var t=mc(e);return(t.local?JO:qO)(t)}function QO(){}function Wf(e){return e==null?QO:function(){return this.querySelector(e)}}function tL(e){typeof e!="function"&&(e=Wf(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var r=t[s],o=r.length,a=i[s]=new Array(o),l,c,u=0;u<o;++u)(l=r[u])&&(c=e.call(l,l.__data__,u,r))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Ge(i,this._parents)}function eL(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function nL(){return[]}function rx(e){return e==null?nL:function(){return this.querySelectorAll(e)}}function iL(e){return function(){return eL(e.apply(this,arguments))}}function sL(e){typeof e=="function"?e=iL(e):e=rx(e);for(var t=this._groups,n=t.length,i=[],s=[],r=0;r<n;++r)for(var o=t[r],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(e.call(l,l.__data__,c,o)),s.push(l));return new Ge(i,s)}function ox(e){return function(){return this.matches(e)}}function ax(e){return function(t){return t.matches(e)}}var rL=Array.prototype.find;function oL(e){return function(){return rL.call(this.children,e)}}function aL(){return this.firstElementChild}function lL(e){return this.select(e==null?aL:oL(typeof e=="function"?e:ax(e)))}var cL=Array.prototype.filter;function uL(){return Array.from(this.children)}function hL(e){return function(){return cL.call(this.children,e)}}function fL(e){return this.selectAll(e==null?uL:hL(typeof e=="function"?e:ax(e)))}function dL(e){typeof e!="function"&&(e=ox(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var r=t[s],o=r.length,a=i[s]=[],l,c=0;c<o;++c)(l=r[c])&&e.call(l,l.__data__,c,r)&&a.push(l);return new Ge(i,this._parents)}function lx(e){return new Array(e.length)}function gL(){return new Ge(this._enter||this._groups.map(lx),this._parents)}function yl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yl.prototype={constructor:yl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function mL(e){return function(){return e}}function _L(e,t,n,i,s,r){for(var o=0,a,l=t.length,c=r.length;o<c;++o)(a=t[o])?(a.__data__=r[o],i[o]=a):n[o]=new yl(e,r[o]);for(;o<l;++o)(a=t[o])&&(s[o]=a)}function pL(e,t,n,i,s,r,o){var a,l,c=new Map,u=t.length,h=r.length,f=new Array(u),d;for(a=0;a<u;++a)(l=t[a])&&(f[a]=d=o.call(l,l.__data__,a,t)+"",c.has(d)?s[a]=l:c.set(d,l));for(a=0;a<h;++a)d=o.call(e,r[a],a,r)+"",(l=c.get(d))?(i[a]=l,l.__data__=r[a],c.delete(d)):n[a]=new yl(e,r[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(f[a])===l&&(s[a]=l)}function yL(e){return e.__data__}function xL(e,t){if(!arguments.length)return Array.from(this,yL);var n=t?pL:_L,i=this._parents,s=this._groups;typeof e!="function"&&(e=mL(e));for(var r=s.length,o=new Array(r),a=new Array(r),l=new Array(r),c=0;c<r;++c){var u=i[c],h=s[c],f=h.length,d=vL(e.call(u,u&&u.__data__,c,i)),g=d.length,m=a[c]=new Array(g),p=o[c]=new Array(g),y=l[c]=new Array(f);n(u,h,m,p,y,d,t);for(var x=0,E=0,v,S;x<g;++x)if(v=m[x]){for(x>=E&&(E=x+1);!(S=p[E])&&++E<g;);v._next=S||null}}return o=new Ge(o,i),o._enter=a,o._exit=l,o}function vL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wL(){return new Ge(this._exit||this._groups.map(lx),this._parents)}function EL(e,t,n){var i=this.enter(),s=this,r=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?r.remove():n(r),i&&s?i.merge(s).order():s}function CL(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,s=n.length,r=i.length,o=Math.min(s,r),a=new Array(s),l=0;l<o;++l)for(var c=n[l],u=i[l],h=c.length,f=a[l]=new Array(h),d,g=0;g<h;++g)(d=c[g]||u[g])&&(f[g]=d);for(;l<s;++l)a[l]=n[l];return new Ge(a,this._parents)}function TL(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],s=i.length-1,r=i[s],o;--s>=0;)(o=i[s])&&(r&&o.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(o,r),r=o);return this}function SL(e){e||(e=RL);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,i=n.length,s=new Array(i),r=0;r<i;++r){for(var o=n[r],a=o.length,l=s[r]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Ge(s,this._parents).order()}function RL(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function IL(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function bL(){return Array.from(this)}function ML(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],s=0,r=i.length;s<r;++s){var o=i[s];if(o)return o}return null}function AL(){let e=0;for(const t of this)++e;return e}function OL(){return!this.node()}function LL(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var s=t[n],r=0,o=s.length,a;r<o;++r)(a=s[r])&&e.call(a,a.__data__,r,s);return this}function FL(e){return function(){this.removeAttribute(e)}}function PL(e){return function(){this.removeAttributeNS(e.space,e.local)}}function DL(e,t){return function(){this.setAttribute(e,t)}}function kL(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function NL(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function GL(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function zL(e,t){var n=mc(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?PL:FL:typeof t=="function"?n.local?GL:NL:n.local?kL:DL)(n,t))}function cx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function WL(e){return function(){this.style.removeProperty(e)}}function UL(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $L(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function VL(e,t,n){return arguments.length>1?this.each((t==null?WL:typeof t=="function"?$L:UL)(e,t,n??"")):hr(this.node(),e)}function hr(e,t){return e.style.getPropertyValue(t)||cx(e).getComputedStyle(e,null).getPropertyValue(t)}function YL(e){return function(){delete this[e]}}function HL(e,t){return function(){this[e]=t}}function BL(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function XL(e,t){return arguments.length>1?this.each((t==null?YL:typeof t=="function"?BL:HL)(e,t)):this.node()[e]}function ux(e){return e.trim().split(/^|\s+/)}function Uf(e){return e.classList||new hx(e)}function hx(e){this._node=e,this._names=ux(e.getAttribute("class")||"")}hx.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function fx(e,t){for(var n=Uf(e),i=-1,s=t.length;++i<s;)n.add(t[i])}function dx(e,t){for(var n=Uf(e),i=-1,s=t.length;++i<s;)n.remove(t[i])}function ZL(e){return function(){fx(this,e)}}function jL(e){return function(){dx(this,e)}}function KL(e,t){return function(){(t.apply(this,arguments)?fx:dx)(this,e)}}function qL(e,t){var n=ux(e+"");if(arguments.length<2){for(var i=Uf(this.node()),s=-1,r=n.length;++s<r;)if(!i.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?KL:t?ZL:jL)(n,t))}function JL(){this.textContent=""}function QL(e){return function(){this.textContent=e}}function tF(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function eF(e){return arguments.length?this.each(e==null?JL:(typeof e=="function"?tF:QL)(e)):this.node().textContent}function nF(){this.innerHTML=""}function iF(e){return function(){this.innerHTML=e}}function sF(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function rF(e){return arguments.length?this.each(e==null?nF:(typeof e=="function"?sF:iF)(e)):this.node().innerHTML}function oF(){this.nextSibling&&this.parentNode.appendChild(this)}function aF(){return this.each(oF)}function lF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cF(){return this.each(lF)}function uF(e){var t=typeof e=="function"?e:sx(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function hF(){return null}function fF(e,t){var n=typeof e=="function"?e:sx(e),i=t==null?hF:typeof t=="function"?t:Wf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function dF(){var e=this.parentNode;e&&e.removeChild(this)}function gF(){return this.each(dF)}function mF(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _F(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pF(e){return this.select(e?_F:mF)}function yF(e){return arguments.length?this.property("__data__",e):this.node().__data__}function xF(e){return function(t){e.call(this,t,this.__data__)}}function vF(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function wF(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,s=t.length,r;n<s;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++i]=r;++i?t.length=i:delete this.__on}}}function EF(e,t,n){return function(){var i=this.__on,s,r=xF(t);if(i){for(var o=0,a=i.length;o<a;++o)if((s=i[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=r,s.options=n),s.value=t;return}}this.addEventListener(e.type,r,n),s={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(s):this.__on=[s]}}function CF(e,t,n){var i=vF(e+""),s,r=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(s=0,u=a[l];s<r;++s)if((o=i[s]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?EF:wF,s=0;s<r;++s)this.each(a(i[s],t,n));return this}function gx(e,t,n){var i=cx(e),s=i.CustomEvent;typeof s=="function"?s=new s(t,n):(s=i.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function TF(e,t){return function(){return gx(this,e,t)}}function SF(e,t){return function(){return gx(this,e,t.apply(this,arguments))}}function RF(e,t){return this.each((typeof t=="function"?SF:TF)(e,t))}function*IF(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],s=0,r=i.length,o;s<r;++s)(o=i[s])&&(yield o)}var mx=[null];function Ge(e,t){this._groups=e,this._parents=t}function Bo(){return new Ge([[document.documentElement]],mx)}function bF(){return this}Ge.prototype=Bo.prototype={constructor:Ge,select:tL,selectAll:sL,selectChild:lL,selectChildren:fL,filter:dL,data:xL,enter:gL,exit:wL,join:EL,merge:CL,selection:bF,order:TL,sort:SL,call:IL,nodes:bL,node:ML,size:AL,empty:OL,each:LL,attr:zL,style:VL,property:XL,classed:qL,text:eF,html:rF,raise:aF,lower:cF,append:uF,insert:fF,remove:gF,clone:pF,datum:yF,on:CF,dispatch:RF,[Symbol.iterator]:IF};function zm(e){return typeof e=="string"?new Ge([[document.querySelector(e)]],[document.documentElement]):new Ge([[e]],mx)}function MF(e){let t;for(;t=e.sourceEvent;)e=t;return e}function AF(e,t){if(e=MF(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}function $f(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _x(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Xo(){}var Ro=.7,xl=1/Ro,qs="\\s*([+-]?\\d+)\\s*",Io="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",OF=/^#([0-9a-f]{3,8})$/,LF=new RegExp(`^rgb\\(${qs},${qs},${qs}\\)$`),FF=new RegExp(`^rgb\\(${Tn},${Tn},${Tn}\\)$`),PF=new RegExp(`^rgba\\(${qs},${qs},${qs},${Io}\\)$`),DF=new RegExp(`^rgba\\(${Tn},${Tn},${Tn},${Io}\\)$`),kF=new RegExp(`^hsl\\(${Io},${Tn},${Tn}\\)$`),NF=new RegExp(`^hsla\\(${Io},${Tn},${Tn},${Io}\\)$`),Wm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$f(Xo,gs,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Um,formatHex:Um,formatHex8:GF,formatHsl:zF,formatRgb:$m,toString:$m});function Um(){return this.rgb().formatHex()}function GF(){return this.rgb().formatHex8()}function zF(){return px(this).formatHsl()}function $m(){return this.rgb().formatRgb()}function gs(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=OF.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Vm(t):n===3?new be(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ca(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ca(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=LF.exec(e))?new be(t[1],t[2],t[3],1):(t=FF.exec(e))?new be(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=PF.exec(e))?Ca(t[1],t[2],t[3],t[4]):(t=DF.exec(e))?Ca(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kF.exec(e))?Bm(t[1],t[2]/100,t[3]/100,1):(t=NF.exec(e))?Bm(t[1],t[2]/100,t[3]/100,t[4]):Wm.hasOwnProperty(e)?Vm(Wm[e]):e==="transparent"?new be(NaN,NaN,NaN,0):null}function Vm(e){return new be(e>>16&255,e>>8&255,e&255,1)}function Ca(e,t,n,i){return i<=0&&(e=t=n=NaN),new be(e,t,n,i)}function WF(e){return e instanceof Xo||(e=gs(e)),e?(e=e.rgb(),new be(e.r,e.g,e.b,e.opacity)):new be}function vl(e,t,n,i){return arguments.length===1?WF(e):new be(e,t,n,i??1)}function be(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}$f(be,vl,_x(Xo,{brighter(e){return e=e==null?xl:Math.pow(xl,e),new be(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ro:Math.pow(Ro,e),new be(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new be(hs(this.r),hs(this.g),hs(this.b),wl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ym,formatHex:Ym,formatHex8:UF,formatRgb:Hm,toString:Hm}));function Ym(){return`#${es(this.r)}${es(this.g)}${es(this.b)}`}function UF(){return`#${es(this.r)}${es(this.g)}${es(this.b)}${es((isNaN(this.opacity)?1:this.opacity)*255)}`}function Hm(){const e=wl(this.opacity);return`${e===1?"rgb(":"rgba("}${hs(this.r)}, ${hs(this.g)}, ${hs(this.b)}${e===1?")":`, ${e})`}`}function wl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function es(e){return e=hs(e),(e<16?"0":"")+e.toString(16)}function Bm(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rn(e,t,n,i)}function px(e){if(e instanceof rn)return new rn(e.h,e.s,e.l,e.opacity);if(e instanceof Xo||(e=gs(e)),!e)return new rn;if(e instanceof rn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,s=Math.min(t,n,i),r=Math.max(t,n,i),o=NaN,a=r-s,l=(r+s)/2;return a?(t===r?o=(n-i)/a+(n<i)*6:n===r?o=(i-t)/a+2:o=(t-n)/a+4,a/=l<.5?r+s:2-r-s,o*=60):a=l>0&&l<1?0:o,new rn(o,a,l,e.opacity)}function $F(e,t,n,i){return arguments.length===1?px(e):new rn(e,t,n,i??1)}function rn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}$f(rn,$F,_x(Xo,{brighter(e){return e=e==null?xl:Math.pow(xl,e),new rn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ro:Math.pow(Ro,e),new rn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,s=2*n-i;return new be(lu(e>=240?e-240:e+120,s,i),lu(e,s,i),lu(e<120?e+240:e-120,s,i),this.opacity)},clamp(){return new rn(Xm(this.h),Ta(this.s),Ta(this.l),wl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wl(this.opacity);return`${e===1?"hsl(":"hsla("}${Xm(this.h)}, ${Ta(this.s)*100}%, ${Ta(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xm(e){return e=(e||0)%360,e<0?e+360:e}function Ta(e){return Math.max(0,Math.min(1,e||0))}function lu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function VF(e,t,n,i,s){var r=e*e,o=r*e;return((1-3*e+3*r-o)*t+(4-6*r+3*o)*n+(1+3*e+3*r-3*o)*i+o*s)/6}function YF(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),s=e[i],r=e[i+1],o=i>0?e[i-1]:2*s-r,a=i<t-1?e[i+2]:2*r-s;return VF((n-i/t)*t,o,s,r,a)}}const _c=e=>()=>e;function yx(e,t){return function(n){return e+n*t}}function HF(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function TG(e,t){var n=t-e;return n?yx(e,n>180||n<-180?n-360*Math.round(n/360):n):_c(isNaN(e)?t:e)}function BF(e){return(e=+e)==1?xx:function(t,n){return n-t?HF(t,n,e):_c(isNaN(t)?n:t)}}function xx(e,t){var n=t-e;return n?yx(e,n):_c(isNaN(e)?t:e)}const fr=function e(t){var n=BF(t);function i(s,r){var o=n((s=vl(s)).r,(r=vl(r)).r),a=n(s.g,r.g),l=n(s.b,r.b),c=xx(s.opacity,r.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return i.gamma=e,i}(1);function XF(e){return function(t){var n=t.length,i=new Array(n),s=new Array(n),r=new Array(n),o,a;for(o=0;o<n;++o)a=vl(t[o]),i[o]=a.r||0,s[o]=a.g||0,r[o]=a.b||0;return i=e(i),s=e(s),r=e(r),a.opacity=1,function(l){return a.r=i(l),a.g=s(l),a.b=r(l),a+""}}}var ZF=XF(YF);function jF(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),s;return function(r){for(s=0;s<n;++s)i[s]=e[s]*(1-r)+t[s]*r;return i}}function KF(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qF(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,s=new Array(i),r=new Array(n),o;for(o=0;o<i;++o)s[o]=Vf(e[o],t[o]);for(;o<n;++o)r[o]=t[o];return function(a){for(o=0;o<i;++o)r[o]=s[o](a);return r}}function JF(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function en(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function QF(e,t){var n={},i={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Vf(e[s],t[s]):i[s]=t[s];return function(r){for(s in n)i[s]=n[s](r);return i}}var hh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cu=new RegExp(hh.source,"g");function tP(e){return function(){return e}}function eP(e){return function(t){return e(t)+""}}function vx(e,t){var n=hh.lastIndex=cu.lastIndex=0,i,s,r,o=-1,a=[],l=[];for(e=e+"",t=t+"";(i=hh.exec(e))&&(s=cu.exec(t));)(r=s.index)>n&&(r=t.slice(n,r),a[o]?a[o]+=r:a[++o]=r),(i=i[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:en(i,s)})),n=cu.lastIndex;return n<t.length&&(r=t.slice(n),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?eP(l[0].x):tP(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function Vf(e,t){var n=typeof t,i;return t==null||n==="boolean"?_c(t):(n==="number"?en:n==="string"?(i=gs(t))?(t=i,fr):vx:t instanceof gs?fr:t instanceof Date?JF:KF(t)?jF:Array.isArray(t)?qF:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?QF:en)(e,t)}function nP(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Zm=180/Math.PI,fh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wx(e,t,n,i,s,r){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:s,translateY:r,rotate:Math.atan2(t,e)*Zm,skewX:Math.atan(l)*Zm,scaleX:o,scaleY:a}}var Sa;function iP(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fh:wx(t.a,t.b,t.c,t.d,t.e,t.f)}function sP(e){return e==null||(Sa||(Sa=document.createElementNS("http://www.w3.org/2000/svg","g")),Sa.setAttribute("transform",e),!(e=Sa.transform.baseVal.consolidate()))?fh:(e=e.matrix,wx(e.a,e.b,e.c,e.d,e.e,e.f))}function Ex(e,t,n,i){function s(c){return c.length?c.pop()+" ":""}function r(c,u,h,f,d,g){if(c!==h||u!==f){var m=d.push("translate(",null,t,null,n);g.push({i:m-4,x:en(c,h)},{i:m-2,x:en(u,f)})}else(h||f)&&d.push("translate("+h+t+f+n)}function o(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(s(h)+"rotate(",null,i)-2,x:en(c,u)})):u&&h.push(s(h)+"rotate("+u+i)}function a(c,u,h,f){c!==u?f.push({i:h.push(s(h)+"skewX(",null,i)-2,x:en(c,u)}):u&&h.push(s(h)+"skewX("+u+i)}function l(c,u,h,f,d,g){if(c!==h||u!==f){var m=d.push(s(d)+"scale(",null,",",null,")");g.push({i:m-4,x:en(c,h)},{i:m-2,x:en(u,f)})}else(h!==1||f!==1)&&d.push(s(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=e(c),u=e(u),r(c.translateX,c.translateY,u.translateX,u.translateY,h,f),o(c.rotate,u.rotate,h,f),a(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var g=-1,m=f.length,p;++g<m;)h[(p=f[g]).i]=p.x(d);return h.join("")}}}var rP=Ex(iP,"px, ","px)","deg)"),oP=Ex(sP,", ",")",")"),dr=0,Kr=0,zr=0,Cx=1e3,El,qr,Cl=0,ms=0,pc=0,bo=typeof performance=="object"&&performance.now?performance:Date,Tx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Yf(){return ms||(Tx(aP),ms=bo.now()+pc)}function aP(){ms=0}function Tl(){this._call=this._time=this._next=null}Tl.prototype=Sx.prototype={constructor:Tl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Yf():+n)+(t==null?0:+t),!this._next&&qr!==this&&(qr?qr._next=this:El=this,qr=this),this._call=e,this._time=n,dh()},stop:function(){this._call&&(this._call=null,this._time=1/0,dh())}};function Sx(e,t,n){var i=new Tl;return i.restart(e,t,n),i}function lP(){Yf(),++dr;for(var e=El,t;e;)(t=ms-e._time)>=0&&e._call.call(void 0,t),e=e._next;--dr}function jm(){ms=(Cl=bo.now())+pc,dr=Kr=0;try{lP()}finally{dr=0,uP(),ms=0}}function cP(){var e=bo.now(),t=e-Cl;t>Cx&&(pc-=t,Cl=e)}function uP(){for(var e,t=El,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:El=n);qr=e,dh(i)}function dh(e){if(!dr){Kr&&(Kr=clearTimeout(Kr));var t=e-ms;t>24?(e<1/0&&(Kr=setTimeout(jm,e-bo.now()-pc)),zr&&(zr=clearInterval(zr))):(zr||(Cl=bo.now(),zr=setInterval(cP,Cx)),dr=1,Tx(jm))}}function Km(e,t,n){var i=new Tl;return t=t==null?0:+t,i.restart(s=>{i.stop(),e(s+t)},t,n),i}var hP=ix("start","end","cancel","interrupt"),fP=[],Rx=0,qm=1,gh=2,ka=3,Jm=4,mh=5,Na=6;function yc(e,t,n,i,s,r){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;dP(e,n,{name:t,index:i,group:s,on:hP,tween:fP,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Rx})}function Hf(e,t){var n=mn(e,t);if(n.state>Rx)throw new Error("too late; already scheduled");return n}function Rn(e,t){var n=mn(e,t);if(n.state>ka)throw new Error("too late; already running");return n}function mn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function dP(e,t,n){var i=e.__transition,s;i[t]=n,n.timer=Sx(r,0,n.time);function r(c){n.state=qm,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,h,f,d;if(n.state!==qm)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===ka)return Km(o);d.state===Jm?(d.state=Na,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=Na,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if(Km(function(){n.state===ka&&(n.state=Jm,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=gh,n.on.call("start",e,e.__data__,n.index,n.group),n.state===gh){for(n.state=ka,s=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++h]=d);s.length=h+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=mh,1),h=-1,f=s.length;++h<f;)s[h].call(e,u);n.state===mh&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Na,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function gP(e,t){var n=e.__transition,i,s,r=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){r=!1;continue}s=i.state>gh&&i.state<mh,i.state=Na,i.timer.stop(),i.on.call(s?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}r&&delete e.__transition}}function mP(e){return this.each(function(){gP(this,e)})}function _P(e,t){var n,i;return function(){var s=Rn(this,e),r=s.tween;if(r!==n){i=n=r;for(var o=0,a=i.length;o<a;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}s.tween=i}}function pP(e,t,n){var i,s;if(typeof n!="function")throw new Error;return function(){var r=Rn(this,e),o=r.tween;if(o!==i){s=(i=o).slice();for(var a={name:t,value:n},l=0,c=s.length;l<c;++l)if(s[l].name===t){s[l]=a;break}l===c&&s.push(a)}r.tween=s}}function yP(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=mn(this.node(),n).tween,s=0,r=i.length,o;s<r;++s)if((o=i[s]).name===e)return o.value;return null}return this.each((t==null?_P:pP)(n,e,t))}function Bf(e,t,n){var i=e._id;return e.each(function(){var s=Rn(this,i);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return mn(s,i).value[t]}}function Ix(e,t){var n;return(typeof t=="number"?en:t instanceof gs?fr:(n=gs(t))?(t=n,fr):vx)(e,t)}function xP(e){return function(){this.removeAttribute(e)}}function vP(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wP(e,t,n){var i,s=n+"",r;return function(){var o=this.getAttribute(e);return o===s?null:o===i?r:r=t(i=o,n)}}function EP(e,t,n){var i,s=n+"",r;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===i?r:r=t(i=o,n)}}function CP(e,t,n){var i,s,r;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===i&&l===s?r:(s=l,r=t(i=o,a)))}}function TP(e,t,n){var i,s,r;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===i&&l===s?r:(s=l,r=t(i=o,a)))}}function SP(e,t){var n=mc(e),i=n==="transform"?oP:Ix;return this.attrTween(e,typeof t=="function"?(n.local?TP:CP)(n,i,Bf(this,"attr."+e,t)):t==null?(n.local?vP:xP)(n):(n.local?EP:wP)(n,i,t))}function RP(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function IP(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function bP(e,t){var n,i;function s(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&IP(e,r)),n}return s._value=t,s}function MP(e,t){var n,i;function s(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&RP(e,r)),n}return s._value=t,s}function AP(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=mc(e);return this.tween(n,(i.local?bP:MP)(i,t))}function OP(e,t){return function(){Hf(this,e).delay=+t.apply(this,arguments)}}function LP(e,t){return t=+t,function(){Hf(this,e).delay=t}}function FP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?OP:LP)(t,e)):mn(this.node(),t).delay}function PP(e,t){return function(){Rn(this,e).duration=+t.apply(this,arguments)}}function DP(e,t){return t=+t,function(){Rn(this,e).duration=t}}function kP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?PP:DP)(t,e)):mn(this.node(),t).duration}function NP(e,t){if(typeof t!="function")throw new Error;return function(){Rn(this,e).ease=t}}function GP(e){var t=this._id;return arguments.length?this.each(NP(t,e)):mn(this.node(),t).ease}function zP(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Rn(this,e).ease=n}}function WP(e){if(typeof e!="function")throw new Error;return this.each(zP(this._id,e))}function UP(e){typeof e!="function"&&(e=ox(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var r=t[s],o=r.length,a=i[s]=[],l,c=0;c<o;++c)(l=r[c])&&e.call(l,l.__data__,c,r)&&a.push(l);return new jn(i,this._parents,this._name,this._id)}function $P(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,s=n.length,r=Math.min(i,s),o=new Array(i),a=0;a<r;++a)for(var l=t[a],c=n[a],u=l.length,h=o[a]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;a<i;++a)o[a]=t[a];return new jn(o,this._parents,this._name,this._id)}function VP(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function YP(e,t,n){var i,s,r=VP(t)?Hf:Rn;return function(){var o=r(this,e),a=o.on;a!==i&&(s=(i=a).copy()).on(t,n),o.on=s}}function HP(e,t){var n=this._id;return arguments.length<2?mn(this.node(),n).on.on(e):this.each(YP(n,e,t))}function BP(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function XP(){return this.on("end.remove",BP(this._id))}function ZP(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wf(e));for(var i=this._groups,s=i.length,r=new Array(s),o=0;o<s;++o)for(var a=i[o],l=a.length,c=r[o]=new Array(l),u,h,f=0;f<l;++f)(u=a[f])&&(h=e.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,yc(c[f],t,n,f,c,mn(u,n)));return new jn(r,this._parents,t,n)}function jP(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rx(e));for(var i=this._groups,s=i.length,r=[],o=[],a=0;a<s;++a)for(var l=i[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=e.call(u,u.__data__,h,l),d,g=mn(u,n),m=0,p=f.length;m<p;++m)(d=f[m])&&yc(d,t,n,m,f,g);r.push(f),o.push(u)}return new jn(r,o,t,n)}var KP=Bo.prototype.constructor;function qP(){return new KP(this._groups,this._parents)}function JP(e,t){var n,i,s;return function(){var r=hr(this,e),o=(this.style.removeProperty(e),hr(this,e));return r===o?null:r===n&&o===i?s:s=t(n=r,i=o)}}function bx(e){return function(){this.style.removeProperty(e)}}function QP(e,t,n){var i,s=n+"",r;return function(){var o=hr(this,e);return o===s?null:o===i?r:r=t(i=o,n)}}function tD(e,t,n){var i,s,r;return function(){var o=hr(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),hr(this,e))),o===l?null:o===i&&l===s?r:(s=l,r=t(i=o,a))}}function eD(e,t){var n,i,s,r="style."+t,o="end."+r,a;return function(){var l=Rn(this,e),c=l.on,u=l.value[r]==null?a||(a=bx(t)):void 0;(c!==n||s!==u)&&(i=(n=c).copy()).on(o,s=u),l.on=i}}function nD(e,t,n){var i=(e+="")=="transform"?rP:Ix;return t==null?this.styleTween(e,JP(e,i)).on("end.style."+e,bx(e)):typeof t=="function"?this.styleTween(e,tD(e,i,Bf(this,"style."+e,t))).each(eD(this._id,e)):this.styleTween(e,QP(e,i,t),n).on("end.style."+e,null)}function iD(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function sD(e,t,n){var i,s;function r(){var o=t.apply(this,arguments);return o!==s&&(i=(s=o)&&iD(e,o,n)),i}return r._value=t,r}function rD(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,sD(e,t,n??""))}function oD(e){return function(){this.textContent=e}}function aD(e){return function(){var t=e(this);this.textContent=t??""}}function lD(e){return this.tween("text",typeof e=="function"?aD(Bf(this,"text",e)):oD(e==null?"":e+""))}function cD(e){return function(t){this.textContent=e.call(this,t)}}function uD(e){var t,n;function i(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&cD(s)),t}return i._value=e,i}function hD(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,uD(e))}function fD(){for(var e=this._name,t=this._id,n=Mx(),i=this._groups,s=i.length,r=0;r<s;++r)for(var o=i[r],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=mn(l,t);yc(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new jn(i,this._parents,e,n)}function dD(){var e,t,n=this,i=n._id,s=n.size();return new Promise(function(r,o){var a={value:o},l={value:function(){--s===0&&r()}};n.each(function(){var c=Rn(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),s===0&&r()})}var gD=0;function jn(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Mx(){return++gD}var Ln=Bo.prototype;jn.prototype={constructor:jn,select:ZP,selectAll:jP,selectChild:Ln.selectChild,selectChildren:Ln.selectChildren,filter:UP,merge:$P,selection:qP,transition:fD,call:Ln.call,nodes:Ln.nodes,node:Ln.node,size:Ln.size,empty:Ln.empty,each:Ln.each,on:HP,attr:SP,attrTween:AP,style:nD,styleTween:rD,text:lD,textTween:hD,remove:XP,tween:yP,delay:FP,duration:kP,ease:GP,easeVarying:WP,end:dD,[Symbol.iterator]:Ln[Symbol.iterator]};function mD(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _D={time:null,delay:0,duration:250,ease:mD};function pD(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function yD(e){var t,n;e instanceof jn?(t=e._id,e=e._name):(t=Mx(),(n=_D).time=Yf(),e=e==null?null:e+"");for(var i=this._groups,s=i.length,r=0;r<s;++r)for(var o=i[r],a=o.length,l,c=0;c<a;++c)(l=o[c])&&yc(l,e,t,c,o,n||pD(l,t));return new jn(i,this._parents,e,t)}Bo.prototype.interrupt=mP;Bo.prototype.transition=yD;const _h=Math.PI,ph=2*_h,Yi=1e-6,xD=ph-Yi;function Ax(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function vD(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ax;const n=10**t;return function(i){this._+=i[0];for(let s=1,r=i.length;s<r;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}class Ox{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ax:vD(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,s){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,n,i,s,r,o){this._append`C${+t},${+n},${+i},${+s},${this._x1=+r},${this._y1=+o}`}arcTo(t,n,i,s,r){if(t=+t,n=+n,i=+i,s=+s,r=+r,r<0)throw new Error(`negative radius: ${r}`);let o=this._x1,a=this._y1,l=i-t,c=s-n,u=o-t,h=a-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Yi)if(!(Math.abs(h*l-c*u)>Yi)||!r)this._append`L${this._x1=t},${this._y1=n}`;else{let d=i-o,g=s-a,m=l*l+c*c,p=d*d+g*g,y=Math.sqrt(m),x=Math.sqrt(f),E=r*Math.tan((_h-Math.acos((m+f-p)/(2*y*x)))/2),v=E/x,S=E/y;Math.abs(v-1)>Yi&&this._append`L${t+v*u},${n+v*h}`,this._append`A${r},${r},0,0,${+(h*d>u*g)},${this._x1=t+S*l},${this._y1=n+S*c}`}}arc(t,n,i,s,r,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(s),l=i*Math.sin(s),c=t+a,u=n+l,h=1^o,f=o?s-r:r-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Yi||Math.abs(this._y1-u)>Yi)&&this._append`L${c},${u}`,i&&(f<0&&(f=f%ph+ph),f>xD?this._append`A${i},${i},0,1,${h},${t-a},${n-l}A${i},${i},0,1,${h},${this._x1=c},${this._y1=u}`:f>Yi&&this._append`A${i},${i},0,${+(f>=_h)},${h},${this._x1=t+i*Math.cos(r)},${this._y1=n+i*Math.sin(r)}`)}rect(t,n,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function SG(e=3){return new Ox(+e)}function wD(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Sl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function gr(e){return e=Sl(Math.abs(e)),e?e[1]:NaN}function ED(e,t){return function(n,i){for(var s=n.length,r=[],o=0,a=e[0],l=0;s>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),r.push(n.substring(s-=a,s+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return r.reverse().join(t)}}function CD(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var TD=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rl(e){if(!(t=TD.exec(e)))throw new Error("invalid format: "+e);var t;return new Xf({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Rl.prototype=Xf.prototype;function Xf(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function SD(e){t:for(var t=e.length,n=1,i=-1,s;n<t;++n)switch(e[n]){case".":i=s=n;break;case"0":i===0&&(i=n),s=n;break;default:if(!+e[n])break t;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(s+1):e}var Lx;function RD(e,t){var n=Sl(e,t);if(!n)return e+"";var i=n[0],s=n[1],r=s-(Lx=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=i.length;return r===o?i:r>o?i+new Array(r-o+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+Sl(e,Math.max(0,t+r-1))[0]}function Qm(e,t){var n=Sl(e,t);if(!n)return e+"";var i=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const t_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:wD,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Qm(e*100,t),r:Qm,s:RD,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function e_(e){return e}var n_=Array.prototype.map,i_=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ID(e){var t=e.grouping===void 0||e.thousands===void 0?e_:ED(n_.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?e_:CD(n_.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(h){h=Rl(h);var f=h.fill,d=h.align,g=h.sign,m=h.symbol,p=h.zero,y=h.width,x=h.comma,E=h.precision,v=h.trim,S=h.type;S==="n"?(x=!0,S="g"):t_[S]||(E===void 0&&(E=12),v=!0,S="g"),(p||f==="0"&&d==="=")&&(p=!0,f="0",d="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",b=m==="$"?i:/[%p]/.test(S)?o:"",R=t_[S],U=/[defgprs%]/.test(S);E=E===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function A(D){var F=T,$=b,it,X,H;if(S==="c")$=R(D)+$,D="";else{D=+D;var N=D<0||1/D<0;if(D=isNaN(D)?l:R(Math.abs(D),E),v&&(D=SD(D)),N&&+D==0&&g!=="+"&&(N=!1),F=(N?g==="("?g:a:g==="-"||g==="("?"":g)+F,$=(S==="s"?i_[8+Lx/3]:"")+$+(N&&g==="("?")":""),U){for(it=-1,X=D.length;++it<X;)if(H=D.charCodeAt(it),48>H||H>57){$=(H===46?s+D.slice(it+1):D.slice(it))+$,D=D.slice(0,it);break}}}x&&!p&&(D=t(D,1/0));var j=F.length+D.length+$.length,rt=j<y?new Array(y-j+1).join(f):"";switch(x&&p&&(D=t(rt+D,rt.length?y-$.length:1/0),rt=""),d){case"<":D=F+D+$+rt;break;case"=":D=F+rt+D+$;break;case"^":D=rt.slice(0,j=rt.length>>1)+F+D+$+rt.slice(j);break;default:D=rt+F+D+$;break}return r(D)}return A.toString=function(){return h+""},A}function u(h,f){var d=c((h=Rl(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(gr(f)/3)))*3,m=Math.pow(10,-g),p=i_[8+g/3];return function(y){return d(m*y)+p}}return{format:c,formatPrefix:u}}var Ra,Fx,Px;bD({thousands:",",grouping:[3],currency:["$",""]});function bD(e){return Ra=ID(e),Fx=Ra.format,Px=Ra.formatPrefix,Ra}function MD(e){return Math.max(0,-gr(Math.abs(e)))}function AD(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gr(t)/3)))*3-gr(Math.abs(e)))}function OD(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gr(t)-gr(e))+1}function Zf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function RG(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}function LD(e){return function(){return e}}function FD(e){return+e}var s_=[0,1];function $s(e){return e}function yh(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:LD(isNaN(t)?NaN:.5)}function PD(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function DD(e,t,n){var i=e[0],s=e[1],r=t[0],o=t[1];return s<i?(i=yh(s,i),r=n(o,r)):(i=yh(i,s),r=n(r,o)),function(a){return r(i(a))}}function kD(e,t,n){var i=Math.min(e.length,t.length)-1,s=new Array(i),r=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)s[o]=yh(e[o],e[o+1]),r[o]=n(t[o],t[o+1]);return function(a){var l=LO(e,a,1,i)-1;return r[l](s[l](a))}}function Dx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ND(){var e=s_,t=s_,n=Vf,i,s,r,o=$s,a,l,c;function u(){var f=Math.min(e.length,t.length);return o!==$s&&(o=PD(e[0],e[f-1])),a=f>2?kD:DD,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?r:(l||(l=a(e.map(i),t,n)))(i(o(f)))}return h.invert=function(f){return o(s((c||(c=a(t,e.map(i),en)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,FD),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=nP,u()},h.clamp=function(f){return arguments.length?(o=f?!0:$s,u()):o!==$s},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(r=f,h):r},function(f,d){return i=f,s=d,u()}}function kx(){return ND()($s,$s)}function GD(e,t,n,i){var s=lh(e,t,n),r;switch(i=Rl(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(r=AD(s,o))&&(i.precision=r),Px(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(r=OD(s,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=r-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(r=MD(s))&&(i.precision=r-(i.type==="%")*2);break}}return Fx(i)}function zD(e){var t=e.domain;return e.ticks=function(n){var i=t();return NO(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var s=t();return GD(s[0],s[s.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),s=0,r=i.length-1,o=i[s],a=i[r],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=r,r=c);u-- >0;){if(c=ah(o,a,n),c===l)return i[s]=o,i[r]=a,t(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function Nx(){var e=kx();return e.copy=function(){return Dx(e,Nx())},Zf.apply(e,arguments),zD(e)}function WD(e,t){e=e.slice();var n=0,i=e.length-1,s=e[n],r=e[i],o;return r<s&&(o=n,n=i,i=o,o=s,s=r,r=o),e[n]=t.floor(s),e[i]=t.ceil(r),e}const uu=new Date,hu=new Date;function oe(e,t,n,i){function s(r){return e(r=arguments.length===0?new Date:new Date(+r)),r}return s.floor=r=>(e(r=new Date(+r)),r),s.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),s.round=r=>{const o=s(r),a=s.ceil(r);return r-o<a-r?o:a},s.offset=(r,o)=>(t(r=new Date(+r),o==null?1:Math.floor(o)),r),s.range=(r,o,a)=>{const l=[];if(r=s.ceil(r),a=a==null?1:Math.floor(a),!(r<o)||!(a>0))return l;let c;do l.push(c=new Date(+r)),t(r,a),e(r);while(c<r&&r<o);return l},s.filter=r=>oe(o=>{if(o>=o)for(;e(o),!r(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!r(o););else for(;--a>=0;)for(;t(o,1),!r(o););}),n&&(s.count=(r,o)=>(uu.setTime(+r),hu.setTime(+o),e(uu),e(hu),Math.floor(n(uu,hu))),s.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?s.filter(i?o=>i(o)%r===0:o=>s.count(0,o)%r===0):s)),s}const Il=oe(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Il.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?oe(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Il);Il.range;const Un=1e3,Be=Un*60,$n=Be*60,Kn=$n*24,jf=Kn*7,r_=Kn*30,fu=Kn*365,ns=oe(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Un)},(e,t)=>(t-e)/Un,e=>e.getUTCSeconds());ns.range;const Kf=oe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Un)},(e,t)=>{e.setTime(+e+t*Be)},(e,t)=>(t-e)/Be,e=>e.getMinutes());Kf.range;const qf=oe(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Be)},(e,t)=>(t-e)/Be,e=>e.getUTCMinutes());qf.range;const Jf=oe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Un-e.getMinutes()*Be)},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getHours());Jf.range;const Qf=oe(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getUTCHours());Qf.range;const Zo=oe(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Be)/Kn,e=>e.getDate()-1);Zo.range;const xc=oe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Kn,e=>e.getUTCDate()-1);xc.range;const Gx=oe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Kn,e=>Math.floor(e/Kn));Gx.range;function ws(e){return oe(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Be)/jf)}const vc=ws(0),bl=ws(1),UD=ws(2),$D=ws(3),mr=ws(4),VD=ws(5),YD=ws(6);vc.range;bl.range;UD.range;$D.range;mr.range;VD.range;YD.range;function Es(e){return oe(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/jf)}const wc=Es(0),Ml=Es(1),HD=Es(2),BD=Es(3),_r=Es(4),XD=Es(5),ZD=Es(6);wc.range;Ml.range;HD.range;BD.range;_r.range;XD.range;ZD.range;const td=oe(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());td.range;const ed=oe(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ed.range;const qn=oe(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:oe(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});qn.range;const Jn=oe(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Jn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:oe(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Jn.range;function zx(e,t,n,i,s,r){const o=[[ns,1,Un],[ns,5,5*Un],[ns,15,15*Un],[ns,30,30*Un],[r,1,Be],[r,5,5*Be],[r,15,15*Be],[r,30,30*Be],[s,1,$n],[s,3,3*$n],[s,6,6*$n],[s,12,12*$n],[i,1,Kn],[i,2,2*Kn],[n,1,jf],[t,1,r_],[t,3,3*r_],[e,1,fu]];function a(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const d=h&&typeof h.range=="function"?h:l(c,u,h),g=d?d.range(c,+u+1):[];return f?g.reverse():g}function l(c,u,h){const f=Math.abs(u-c)/h,d=gc(([,,p])=>p).right(o,f);if(d===o.length)return e.every(lh(c/fu,u/fu,h));if(d===0)return Il.every(Math.max(lh(c,u,h),1));const[g,m]=o[f/o[d-1][2]<o[d][2]/f?d-1:d];return g.every(m)}return[a,l]}const[jD,KD]=zx(Jn,ed,wc,Gx,Qf,qf),[qD,JD]=zx(qn,td,vc,Zo,Jf,Kf);function du(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function gu(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Wr(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function QD(e){var t=e.dateTime,n=e.date,i=e.time,s=e.periods,r=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Ur(s),u=$r(s),h=Ur(r),f=$r(r),d=Ur(o),g=$r(o),m=Ur(a),p=$r(a),y=Ur(l),x=$r(l),E={a:N,A:j,b:rt,B:dt,c:null,d:h_,e:h_,f:E2,g:L2,G:P2,H:x2,I:v2,j:w2,L:Wx,m:C2,M:T2,p:Mt,q:G,Q:g_,s:m_,S:S2,u:R2,U:I2,V:b2,w:M2,W:A2,x:null,X:null,y:O2,Y:F2,Z:D2,"%":d_},v={a:Bt,A:mt,b:wt,B:Gt,c:null,d:f_,e:f_,f:z2,g:j2,G:q2,H:k2,I:N2,j:G2,L:$x,m:W2,M:U2,p:P,q:B,Q:g_,s:m_,S:$2,u:V2,U:Y2,V:H2,w:B2,W:X2,x:null,X:null,y:Z2,Y:K2,Z:J2,"%":d_},S={a:A,A:D,b:F,B:$,c:it,d:c_,e:c_,f:m2,g:l_,G:a_,H:u_,I:u_,j:h2,L:g2,m:u2,M:f2,p:U,q:c2,Q:p2,s:y2,S:d2,u:s2,U:r2,V:o2,w:i2,W:a2,x:X,X:H,y:l_,Y:a_,Z:l2,"%":_2};E.x=T(n,E),E.X=T(i,E),E.c=T(t,E),v.x=T(n,v),v.X=T(i,v),v.c=T(t,v);function T(I,z){return function(Q){var _=[],w=-1,C=0,M=I.length,O,k,K;for(Q instanceof Date||(Q=new Date(+Q));++w<M;)I.charCodeAt(w)===37&&(_.push(I.slice(C,w)),(k=o_[O=I.charAt(++w)])!=null?O=I.charAt(++w):k=O==="e"?" ":"0",(K=z[O])&&(O=K(Q,k)),_.push(O),C=w+1);return _.push(I.slice(C,w)),_.join("")}}function b(I,z){return function(Q){var _=Wr(1900,void 0,1),w=R(_,I,Q+="",0),C,M;if(w!=Q.length)return null;if("Q"in _)return new Date(_.Q);if("s"in _)return new Date(_.s*1e3+("L"in _?_.L:0));if(z&&!("Z"in _)&&(_.Z=0),"p"in _&&(_.H=_.H%12+_.p*12),_.m===void 0&&(_.m="q"in _?_.q:0),"V"in _){if(_.V<1||_.V>53)return null;"w"in _||(_.w=1),"Z"in _?(C=gu(Wr(_.y,0,1)),M=C.getUTCDay(),C=M>4||M===0?Ml.ceil(C):Ml(C),C=xc.offset(C,(_.V-1)*7),_.y=C.getUTCFullYear(),_.m=C.getUTCMonth(),_.d=C.getUTCDate()+(_.w+6)%7):(C=du(Wr(_.y,0,1)),M=C.getDay(),C=M>4||M===0?bl.ceil(C):bl(C),C=Zo.offset(C,(_.V-1)*7),_.y=C.getFullYear(),_.m=C.getMonth(),_.d=C.getDate()+(_.w+6)%7)}else("W"in _||"U"in _)&&("w"in _||(_.w="u"in _?_.u%7:"W"in _?1:0),M="Z"in _?gu(Wr(_.y,0,1)).getUTCDay():du(Wr(_.y,0,1)).getDay(),_.m=0,_.d="W"in _?(_.w+6)%7+_.W*7-(M+5)%7:_.w+_.U*7-(M+6)%7);return"Z"in _?(_.H+=_.Z/100|0,_.M+=_.Z%100,gu(_)):du(_)}}function R(I,z,Q,_){for(var w=0,C=z.length,M=Q.length,O,k;w<C;){if(_>=M)return-1;if(O=z.charCodeAt(w++),O===37){if(O=z.charAt(w++),k=S[O in o_?z.charAt(w++):O],!k||(_=k(I,Q,_))<0)return-1}else if(O!=Q.charCodeAt(_++))return-1}return _}function U(I,z,Q){var _=c.exec(z.slice(Q));return _?(I.p=u.get(_[0].toLowerCase()),Q+_[0].length):-1}function A(I,z,Q){var _=d.exec(z.slice(Q));return _?(I.w=g.get(_[0].toLowerCase()),Q+_[0].length):-1}function D(I,z,Q){var _=h.exec(z.slice(Q));return _?(I.w=f.get(_[0].toLowerCase()),Q+_[0].length):-1}function F(I,z,Q){var _=y.exec(z.slice(Q));return _?(I.m=x.get(_[0].toLowerCase()),Q+_[0].length):-1}function $(I,z,Q){var _=m.exec(z.slice(Q));return _?(I.m=p.get(_[0].toLowerCase()),Q+_[0].length):-1}function it(I,z,Q){return R(I,t,z,Q)}function X(I,z,Q){return R(I,n,z,Q)}function H(I,z,Q){return R(I,i,z,Q)}function N(I){return o[I.getDay()]}function j(I){return r[I.getDay()]}function rt(I){return l[I.getMonth()]}function dt(I){return a[I.getMonth()]}function Mt(I){return s[+(I.getHours()>=12)]}function G(I){return 1+~~(I.getMonth()/3)}function Bt(I){return o[I.getUTCDay()]}function mt(I){return r[I.getUTCDay()]}function wt(I){return l[I.getUTCMonth()]}function Gt(I){return a[I.getUTCMonth()]}function P(I){return s[+(I.getUTCHours()>=12)]}function B(I){return 1+~~(I.getUTCMonth()/3)}return{format:function(I){var z=T(I+="",E);return z.toString=function(){return I},z},parse:function(I){var z=b(I+="",!1);return z.toString=function(){return I},z},utcFormat:function(I){var z=T(I+="",v);return z.toString=function(){return I},z},utcParse:function(I){var z=b(I+="",!0);return z.toString=function(){return I},z}}}var o_={"-":"",_:" ",0:"0"},he=/^\s*\d+/,t2=/^%/,e2=/[\\^$*+?|[\]().{}]/g;function bt(e,t,n){var i=e<0?"-":"",s=(i?-e:e)+"",r=s.length;return i+(r<n?new Array(n-r+1).join(t)+s:s)}function n2(e){return e.replace(e2,"\\$&")}function Ur(e){return new RegExp("^(?:"+e.map(n2).join("|")+")","i")}function $r(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function i2(e,t,n){var i=he.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function s2(e,t,n){var i=he.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function r2(e,t,n){var i=he.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function o2(e,t,n){var i=he.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function a2(e,t,n){var i=he.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function a_(e,t,n){var i=he.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function l_(e,t,n){var i=he.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function l2(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function c2(e,t,n){var i=he.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function u2(e,t,n){var i=he.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function c_(e,t,n){var i=he.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function h2(e,t,n){var i=he.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function u_(e,t,n){var i=he.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function f2(e,t,n){var i=he.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function d2(e,t,n){var i=he.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function g2(e,t,n){var i=he.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function m2(e,t,n){var i=he.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function _2(e,t,n){var i=t2.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function p2(e,t,n){var i=he.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function y2(e,t,n){var i=he.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function h_(e,t){return bt(e.getDate(),t,2)}function x2(e,t){return bt(e.getHours(),t,2)}function v2(e,t){return bt(e.getHours()%12||12,t,2)}function w2(e,t){return bt(1+Zo.count(qn(e),e),t,3)}function Wx(e,t){return bt(e.getMilliseconds(),t,3)}function E2(e,t){return Wx(e,t)+"000"}function C2(e,t){return bt(e.getMonth()+1,t,2)}function T2(e,t){return bt(e.getMinutes(),t,2)}function S2(e,t){return bt(e.getSeconds(),t,2)}function R2(e){var t=e.getDay();return t===0?7:t}function I2(e,t){return bt(vc.count(qn(e)-1,e),t,2)}function Ux(e){var t=e.getDay();return t>=4||t===0?mr(e):mr.ceil(e)}function b2(e,t){return e=Ux(e),bt(mr.count(qn(e),e)+(qn(e).getDay()===4),t,2)}function M2(e){return e.getDay()}function A2(e,t){return bt(bl.count(qn(e)-1,e),t,2)}function O2(e,t){return bt(e.getFullYear()%100,t,2)}function L2(e,t){return e=Ux(e),bt(e.getFullYear()%100,t,2)}function F2(e,t){return bt(e.getFullYear()%1e4,t,4)}function P2(e,t){var n=e.getDay();return e=n>=4||n===0?mr(e):mr.ceil(e),bt(e.getFullYear()%1e4,t,4)}function D2(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+bt(t/60|0,"0",2)+bt(t%60,"0",2)}function f_(e,t){return bt(e.getUTCDate(),t,2)}function k2(e,t){return bt(e.getUTCHours(),t,2)}function N2(e,t){return bt(e.getUTCHours()%12||12,t,2)}function G2(e,t){return bt(1+xc.count(Jn(e),e),t,3)}function $x(e,t){return bt(e.getUTCMilliseconds(),t,3)}function z2(e,t){return $x(e,t)+"000"}function W2(e,t){return bt(e.getUTCMonth()+1,t,2)}function U2(e,t){return bt(e.getUTCMinutes(),t,2)}function $2(e,t){return bt(e.getUTCSeconds(),t,2)}function V2(e){var t=e.getUTCDay();return t===0?7:t}function Y2(e,t){return bt(wc.count(Jn(e)-1,e),t,2)}function Vx(e){var t=e.getUTCDay();return t>=4||t===0?_r(e):_r.ceil(e)}function H2(e,t){return e=Vx(e),bt(_r.count(Jn(e),e)+(Jn(e).getUTCDay()===4),t,2)}function B2(e){return e.getUTCDay()}function X2(e,t){return bt(Ml.count(Jn(e)-1,e),t,2)}function Z2(e,t){return bt(e.getUTCFullYear()%100,t,2)}function j2(e,t){return e=Vx(e),bt(e.getUTCFullYear()%100,t,2)}function K2(e,t){return bt(e.getUTCFullYear()%1e4,t,4)}function q2(e,t){var n=e.getUTCDay();return e=n>=4||n===0?_r(e):_r.ceil(e),bt(e.getUTCFullYear()%1e4,t,4)}function J2(){return"+0000"}function d_(){return"%"}function g_(e){return+e}function m_(e){return Math.floor(+e/1e3)}var Ps,Yx,Hx;Q2({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Q2(e){return Ps=QD(e),Yx=Ps.format,Ps.parse,Hx=Ps.utcFormat,Ps.utcParse,Ps}function tk(e){return new Date(e)}function ek(e){return e instanceof Date?+e:+new Date(+e)}function nd(e,t,n,i,s,r,o,a,l,c){var u=kx(),h=u.invert,f=u.domain,d=c(".%L"),g=c(":%S"),m=c("%I:%M"),p=c("%I %p"),y=c("%a %d"),x=c("%b %d"),E=c("%B"),v=c("%Y");function S(T){return(l(T)<T?d:a(T)<T?g:o(T)<T?m:r(T)<T?p:i(T)<T?s(T)<T?y:x:n(T)<T?E:v)(T)}return u.invert=function(T){return new Date(h(T))},u.domain=function(T){return arguments.length?f(Array.from(T,ek)):f().map(tk)},u.ticks=function(T){var b=f();return e(b[0],b[b.length-1],T??10)},u.tickFormat=function(T,b){return b==null?S:c(b)},u.nice=function(T){var b=f();return(!T||typeof T.range!="function")&&(T=t(b[0],b[b.length-1],T??10)),T?f(WD(b,T)):u},u.copy=function(){return Dx(u,nd(e,t,n,i,s,r,o,a,l,c))},u}function IG(){return Zf.apply(nd(qD,JD,qn,td,vc,Zo,Jf,Kf,ns,Yx).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nk(){return Zf.apply(nd(jD,KD,Jn,ed,wc,xc,Qf,qf,ns,Hx).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function le(e){return function(){return e}}function Bx(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new Ox(t)}function Xx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Zx(e){this._context=e}Zx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function jx(e){return new Zx(e)}function Kx(e){return e[0]}function qx(e){return e[1]}function ik(e,t){var n=le(!0),i=null,s=jx,r=null,o=Bx(a);e=typeof e=="function"?e:e===void 0?Kx:le(e),t=typeof t=="function"?t:t===void 0?qx:le(t);function a(l){var c,u=(l=Xx(l)).length,h,f=!1,d;for(i==null&&(r=s(d=o())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===f&&((f=!f)?r.lineStart():r.lineEnd()),f&&r.point(+e(h,c,l),+t(h,c,l));if(d)return r=null,d+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:le(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:le(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:le(!!l),a):n},a.curve=function(l){return arguments.length?(s=l,i!=null&&(r=s(i)),a):s},a.context=function(l){return arguments.length?(l==null?i=r=null:r=s(i=l),a):i},a}function __(e,t,n){var i=null,s=le(!0),r=null,o=jx,a=null,l=Bx(c);e=typeof e=="function"?e:e===void 0?Kx:le(+e),t=typeof t=="function"?t:le(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?qx:le(+n);function c(h){var f,d,g,m=(h=Xx(h)).length,p,y=!1,x,E=new Array(m),v=new Array(m);for(r==null&&(a=o(x=l())),f=0;f<=m;++f){if(!(f<m&&s(p=h[f],f,h))===y)if(y=!y)d=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=f-1;g>=d;--g)a.point(E[g],v[g]);a.lineEnd(),a.areaEnd()}y&&(E[f]=+e(p,f,h),v[f]=+t(p,f,h),a.point(i?+i(p,f,h):E[f],n?+n(p,f,h):v[f]))}if(x)return a=null,x+""||null}function u(){return ik().defined(s).curve(o).context(r)}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:le(+h),i=null,c):e},c.x0=function(h){return arguments.length?(e=typeof h=="function"?h:le(+h),c):e},c.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:le(+h),c):i},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:le(+h),n=null,c):t},c.y0=function(h){return arguments.length?(t=typeof h=="function"?h:le(+h),c):t},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:le(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(i).y(t)},c.defined=function(h){return arguments.length?(s=typeof h=="function"?h:le(!!h),c):s},c.curve=function(h){return arguments.length?(o=h,r!=null&&(a=o(r)),c):o},c.context=function(h){return arguments.length?(h==null?r=a=null:a=o(r=h),c):r},c}function p_(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Jx(e){this._context=e}Jx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:p_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:p_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y_(e){return new Jx(e)}function Jr(e,t,n){this.k=e,this.x=t,this.y=n}Jr.prototype={constructor:Jr,scale:function(e){return e===1?this:new Jr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Jr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Jr.prototype;const sk={props:{activityFile:t0,timezoneOffsetHours:Number},data(){return{popupRecord:new th}},watch:{activityFile:function(){var t;const e=((t=this.activityFile)==null?void 0:t.records)||[];this.renderChart(e)}},methods:{toStringHDMS:Xp,toTimezoneDateString:zf,renderChart(e){const a=A=>new Date(A.timestamp),l=A=>A.altitude,c=GO(e,A=>A.altitude)||0,u=Dm(e,A=>A.altitude)||0,h=Dm([u-u*2,0])||0,f=c+c*2,d=nk().domain(FO(e,a)).rangeRound([40,928-20]),g=Nx().domain([h,f]).nice().rangeRound([500-30,20]),m=__().curve(y_).x(A=>d(new Date(A.timestamp))).y(A=>g(A.altitude)),p=__().curve(y_).x(A=>d(new Date(A.timestamp))).y0(g(h)).y1(A=>g(A.altitude)),y=zm(this.$el).select("svg").attr("width",928).attr("height",500).attr("viewBox",[0,0,928,500]).attr("style","max-width: 100%; height: auto;");y.append("g").attr("transform",`translate(0,${500-30})`).call(BO(d).ticks(928/80).tickSizeOuter(0)).call(A=>A.select(".domain").remove()),y.append("g").attr("transform","translate(40,0)").call(XO(g)).call(A=>A.select(".domain").remove()).call(A=>A.select(".tick:last-of-type textchart").append("tspan").text(e.y)),y.append("g").attr("stroke","currentColor").attr("stroke-opacity",.1).call(A=>A.append("g").selectAll("line").data(d.ticks()).join("line").attr("x1",D=>.5+d(D)).attr("x2",D=>.5+d(D)).attr("y1",20).attr("y2",500-30)).call(A=>A.append("g").selectAll("line").data(g.ticks()).join("line").attr("y1",D=>.5+g(D)).attr("y2",D=>.5+g(D)).attr("x1",40).attr("x2",928-20));const x=c-u,E=5,v=(A,D,F)=>{if(F>=E){const $=e.slice(F-E,F).map((H,N)=>H.altitude-e[F-N-1].altitude),X=(zO($,H=>H.altitude)||1)/(x||1)*100;return D.altitude>e[F-1].altitude?fr.gamma(2.2)(A,"red")(X*5/100):D.altitude<e[F-1].altitude?fr.gamma(2.2)(A,"lawngreen")(X*5/100):ZF([A,"yellow"])(X*1/100)}return"yellow"};let S="yellow";for(let A=1;A<e.length;A++){const D=v(S,e[A],A);S=D,y.append("path").datum([e[A-1],e[A]]).attr("fill","none").attr("stroke",F=>D).attr("stroke-width",8).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("d",m).attr("stroke-opacity",.8)}y.append("path").datum(e).attr("fill","#2A303F").attr("d",p);const T=zm("#tooltip"),b=y.append("circle").attr("r",5).attr("fill","none").attr("stroke","#970000").attr("stroke-width",2).style("opacity",0).style("pointer-events","none");var R=y.append("g").attr("class","hover-line"),U=R.append("line").attr("x1",10).attr("x2",10).attr("y1",g(h)).attr("y2",g(f));return U.style("opacity",1e-6),y.append("rect").attr("width",928).attr("height",500).style("opacity",0).on("touchmouse mousemove",A=>{const D=AF(A,this),F=d.invert(D[0]),$=gc(a).left,it=$(e,F),X=e[Math.max(0,it-1)];X&&(this.popupRecord=X,b.style("opacity",1).attr("cx",d(a(X))).attr("cy",g(l(X))).raise(),T.style("display","block").style("left",`${A.pageX}px`).style("top",`${A.pageY}px`),U.attr("x1",d(a(X))).attr("x2",d(a(X))).style("opacity",1))}).on("mouseleave",function(){b.style("opacity",0),T.style("display","none"),U.style("opacity",1e-6)}),Object.assign(y.node())}},mounted(){var e;this.renderChart(((e=this.activityFile)==null?void 0:e.records)||[])}};const rk={id:"chart"},ok=L("div",{class:"elevation"},"Elevation",-1),ak=L("svg",null,null,-1),lk={id:"tooltip"},ck={id:"popupElev",class:"ol-popup"},uk={class:"popup-content"},hk=L("span",null,"Time:",-1),fk=L("span",null,"Altitude:",-1),dk=L("span",null," masl",-1);function gk(e,t,n,i,s,r){var o;return Ot(),Pt("div",rk,[ok,ak,L("div",lk,[L("div",ck,[L("div",uk,[L("div",null,[hk,L("span",null,Ct(s.popupRecord.timestamp?r.toTimezoneDateString(s.popupRecord.timestamp,n.timezoneOffsetHours):"-"),1)]),L("div",null,[fk,L("span",null,Ct(s.popupRecord.altitude?(o=s.popupRecord.altitude)==null?void 0:o.toFixed(2):"-"),1),dk])])])])])}const mk=dc(sk,[["render",gk]]);class _k{constructor(){gt(this,"sport",null);gt(this,"subSport",null);gt(this,"totalMovingTime",null);gt(this,"totalElapsedTime",null);gt(this,"totalTimerTime",null);gt(this,"totalDistance",null);gt(this,"totalAscent",null);gt(this,"totalDescent",null);gt(this,"totalCycles",null);gt(this,"totalCalories",null);gt(this,"avgSpeed",null);gt(this,"maxSpeed",null);gt(this,"avgHeartRate",null);gt(this,"maxHeartRate",null);gt(this,"avgCadence",null);gt(this,"maxCadence",null);gt(this,"avgPower",null);gt(this,"maxPower",null);gt(this,"avgTemperature",null);gt(this,"maxTemperature",null);gt(this,"avgAltitude",null);gt(this,"maxAltitude",null)}}function Ui(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const s=e[i];s&&(n+=s,t++)}return t==0?null:n/t}function $i(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const s=e[i];s&&(s>t&&(t=s),n++)}return n==0?null:t}function Fn(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const s=e[i];s&&(t+=s,n++)}return n==0?null:t}const pk={props:{activityFiles:Array,timezoneOffsetHours:Number,isWebAssemblySupported:Boolean},computed:{summary(){const e=new _k;for(let t=0;t<this.activityFiles.length;t++)for(let n=0;n<this.activityFiles[t].sessions.length;n++){const i=this.activityFiles[t].sessions[n];e.sport=i.sport,e.subSport=i.subSport,e.totalMovingTime=Fn(e.totalMovingTime,i.totalMovingTime),e.totalElapsedTime=Fn(e.totalElapsedTime,i.totalElapsedTime),e.totalTimerTime=Fn(e.totalTimerTime,i.totalTimerTime),e.totalDistance=Fn(e.totalDistance,i.totalDistance),e.totalAscent=Fn(e.totalAscent,i.totalAscent),e.totalDescent=Fn(e.totalDescent,i.totalDescent),e.totalCycles=Fn(e.totalCycles,i.totalCycles),e.totalCalories=Fn(e.totalCalories,i.totalCalories),e.avgSpeed=Ui(e.avgSpeed,i.avgSpeed),e.maxSpeed=$i(e.maxSpeed,i.maxSpeed),e.avgHeartRate=Ui(e.avgHeartRate,i.avgHeartRate),e.maxHeartRate=$i(e.maxHeartRate,i.maxHeartRate),e.avgCadence=Ui(e.avgCadence,i.avgCadence),e.maxCadence=$i(e.maxCadence,i.maxCadence),e.avgPower=Ui(e.avgPower,i.avgPower),e.maxPower=$i(e.maxPower,i.maxPower),e.avgTemperature=Ui(e.avgTemperature,i.avgTemperature),e.maxTemperature=$i(e.maxTemperature,i.maxTemperature),e.avgAltitude=Ui(e.avgAltitude,i.avgAltitude),e.maxAltitude=$i(e.maxAltitude,i.maxAltitude)}return e}},methods:{toTimezoneDateString:zf,GMTString:rO,secondsToDHMS:oO,avg:Ui,max:$i,sum:Fn}};const yk={style:{"text-align":"center"}},xk=["disabled"],vk={key:0,class:"time-created"},wk={key:1,class:"manufacturer"},Ek={class:"analysis"},Ck={class:"summary"},Tk={key:0,class:"section-title"},Sk={class:"summary-grid"},Rk={key:0,class:"summary-item"},Ik=L("div",{class:"summary-title"},"Sport",-1),bk={class:"summary-value"},Mk={key:1,class:"summary-item"},Ak=L("div",{class:"summary-title"},"Sub Sport",-1),Ok={class:"summary-value"},Lk={class:"summary-grid"},Fk={key:0,class:"summary-item"},Pk=L("div",{class:"summary-title"},"Total Moving Time",-1),Dk={class:"summary-value"},kk=L("i",{class:"fa-solid fa-hourglass-half"},null,-1),Nk={key:1,class:"summary-item"},Gk=L("div",{class:"summary-title"},"Total Elapsed Time",-1),zk={class:"summary-value"},Wk=L("i",{class:"fa-solid fa-hourglass-end"},null,-1),Uk={class:"summary-grid"},$k={key:0,class:"summary-item"},Vk=L("div",{class:"summary-title"},"Total Distance",-1),Yk={class:"summary-value"},Hk=L("i",{class:"fa-solid fa-road"},null,-1),Bk={key:1,class:"summary-item"},Xk=L("div",{class:"summary-title"},"Total Calories",-1),Zk={class:"summary-value"},jk=L("i",{class:"fa-solid fa-droplet"},null,-1),Kk={class:"summary-grid"},qk={key:0,class:"summary-item"},Jk=L("div",{class:"summary-title"},"Avg Speed",-1),Qk={class:"summary-value"},tN=L("i",{class:"fa-solid fa-gauge"},null,-1),eN={key:1,class:"summary-item"},nN=L("div",{class:"summary-title"},"Max Speed",-1),iN={class:"summary-value"},sN=L("i",{class:"fa-solid fa-gauge-high"},null,-1),rN={class:"summary-grid"},oN={key:0,class:"summary-item"},aN=L("div",{class:"summary-title"},"Avg Heart Rate",-1),lN={class:"summary-value"},cN=L("i",{class:"fa-solid fa-heart-pulse"},null,-1),uN={key:1,class:"summary-item"},hN=L("div",{class:"summary-title"},"Max Heart Rate",-1),fN={class:"summary-value"},dN=L("i",{class:"fa-solid fa-heart-pulse"},null,-1),gN={class:"summary-grid"},mN={key:0,class:"summary-item"},_N=L("div",{class:"summary-title"},"Avg Cadence",-1),pN={class:"summary-value"},yN=L("i",{class:"fa-solid fa-rotate"},null,-1),xN={key:1,class:"summary-item"},vN=L("div",{class:"summary-title"},"Max Cadence",-1),wN={class:"summary-value"},EN=L("i",{class:"fa-solid fa-rotate"},null,-1),CN={class:"summary-grid"},TN={key:0,class:"summary-item"},SN=L("div",{class:"summary-title"},"Avg Power",-1),RN={class:"summary-value"},IN=L("i",{class:"fa-solid fa-bolt-lightning"},null,-1),bN={key:1,class:"summary-item"},MN=L("div",{class:"summary-title"},"Max Power",-1),AN={class:"summary-value"},ON=L("i",{class:"fa-solid fa-bolt-lightning"},null,-1),LN={class:"summary-grid"},FN={key:0,class:"summary-item"},PN=L("div",{class:"summary-title"},"Avg Temperature",-1),DN={class:"summary-value"},kN=L("i",{class:"fa-solid fa-temperature-low"},null,-1),NN={key:1,class:"summary-item"},GN=L("div",{class:"summary-title"},"Max Temperature",-1),zN={class:"summary-value"},WN=L("i",{class:"fa-solid fa-temperature-high"},null,-1),UN={class:"summary-grid"},$N={key:0,class:"summary-item"},VN=L("div",{class:"summary-title"},"Total Ascent",-1),YN={class:"summary-value"},HN=L("i",{class:"fa-solid fa-arrow-trend-up"},null,-1),BN={key:1,class:"summary-item"},XN=L("div",{class:"summary-title"},"Total Descent",-1),ZN={class:"summary-value"},jN=L("i",{class:"fa-solid fa-arrow-trend-down"},null,-1),KN={class:"summary-grid"},qN={key:0,class:"summary-item"},JN=L("div",{class:"summary-title"},"Avg Altitude",-1),QN={class:"summary-value"},tG=L("i",{class:"fa-solid fa-mountain"},null,-1),eG={key:1,class:"summary-item"},nG=L("div",{class:"summary-title"},"Max Altitude",-1),iG={class:"summary-value"},sG=L("i",{class:"fa-solid fa-mountain"},null,-1);function rG(e,t,n,i,s,r){var o,a,l,c,u,h,f;return Ot(),Pt(Ve,null,[L("div",yk,[L("input",{class:"input",type:"file",id:"fileInput",accept:".fit",multiple:"",disabled:!n.isWebAssemblySupported},null,8,xk)]),n.activityFiles&&n.activityFiles.length!=0?(Ot(),Pt("div",vk," Created on: "+Ct(r.toTimezoneDateString((a=(o=n.activityFiles[0])==null?void 0:o.fileId)==null?void 0:a.timeCreated,n.timezoneOffsetHours))+" "+Ct(r.GMTString(n.timezoneOffsetHours)),1)):Ht("",!0),n.activityFiles&&n.activityFiles.length!=0?(Ot(),Pt("div",wk," Device: "+Ct((c=(l=n.activityFiles[0])==null?void 0:l.fileId)==null?void 0:c.manufacturer)+" ("+Ct((h=(u=n.activityFiles[0])==null?void 0:u.fileId)==null?void 0:h.product)+") ",1)):Ht("",!0),L("div",Ek,[L("div",Ck,[((f=n.activityFiles)==null?void 0:f.length)!=0?(Ot(),Pt("h4",Tk,"Summary")):Ht("",!0),L("div",null,[L("div",Sk,[r.summary.sport?(Ot(),Pt("div",Rk,[Ik,L("div",bk,Ct(r.summary.sport),1)])):Ht("",!0),r.summary.subSport?(Ot(),Pt("div",Mk,[Ak,L("div",Ok,Ct(r.summary.subSport),1)])):Ht("",!0)]),L("div",Lk,[r.summary.totalMovingTime?(Ot(),Pt("div",Fk,[Pk,L("div",Dk,[kk,ne(" "+Ct(r.secondsToDHMS(r.summary.totalMovingTime)),1)])])):Ht("",!0),r.summary.totalElapsedTime?(Ot(),Pt("div",Nk,[Gk,L("div",zk,[Wk,ne(" "+Ct(r.secondsToDHMS(r.summary.totalElapsedTime)),1)])])):Ht("",!0)]),L("div",Uk,[r.summary.totalDistance?(Ot(),Pt("div",$k,[Vk,L("div",Yk,[Hk,ne(" "+Ct((r.summary.totalDistance/1e3).toFixed(2))+" km ",1)])])):Ht("",!0),r.summary.totalCalories?(Ot(),Pt("div",Bk,[Xk,L("div",Zk,[jk,ne(" "+Ct(r.summary.totalCalories.toLocaleString())+" Cal ",1)])])):Ht("",!0)]),L("div",Kk,[r.summary.avgSpeed?(Ot(),Pt("div",qk,[Jk,L("div",Qk,[tN,ne(" "+Ct((r.summary.avgSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):Ht("",!0),r.summary.maxSpeed?(Ot(),Pt("div",eN,[nN,L("div",iN,[sN,ne(" "+Ct((r.summary.maxSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):Ht("",!0)]),L("div",rN,[r.summary.avgHeartRate?(Ot(),Pt("div",oN,[aN,L("div",lN,[cN,ne(" "+Ct(Math.round(r.summary.avgHeartRate))+" bpm ",1)])])):Ht("",!0),r.summary.maxHeartRate?(Ot(),Pt("div",uN,[hN,L("div",fN,[dN,ne(" "+Ct(r.summary.maxHeartRate)+" bpm ",1)])])):Ht("",!0)]),L("div",gN,[r.summary.avgCadence?(Ot(),Pt("div",mN,[_N,L("div",pN,[yN,ne(" "+Ct(Math.round(r.summary.avgCadence))+" rpm ",1)])])):Ht("",!0),r.summary.maxCadence?(Ot(),Pt("div",xN,[vN,L("div",wN,[EN,ne(" "+Ct(r.summary.maxCadence)+" rpm ",1)])])):Ht("",!0)]),L("div",CN,[r.summary.avgPower?(Ot(),Pt("div",TN,[SN,L("div",RN,[IN,ne(" "+Ct(Math.round(r.summary.avgPower)),1)])])):Ht("",!0),r.summary.maxPower?(Ot(),Pt("div",bN,[MN,L("div",AN,[ON,ne(" "+Ct(r.summary.maxPower),1)])])):Ht("",!0)]),L("div",LN,[r.summary.avgTemperature?(Ot(),Pt("div",FN,[PN,L("div",DN,[kN,ne(" "+Ct(Math.round(r.summary.avgTemperature))+" °C ",1)])])):Ht("",!0),r.summary.maxTemperature?(Ot(),Pt("div",NN,[GN,L("div",zN,[WN,ne(" "+Ct(r.summary.maxTemperature)+" °C ",1)])])):Ht("",!0)]),L("div",UN,[r.summary.totalAscent?(Ot(),Pt("div",$N,[VN,L("div",YN,[HN,ne(" "+Ct(r.summary.totalAscent)+" m ",1)])])):Ht("",!0),r.summary.totalDescent?(Ot(),Pt("div",BN,[XN,L("div",ZN,[jN,ne(" "+Ct(r.summary.totalDescent)+" m ",1)])])):Ht("",!0)]),L("div",KN,[r.summary.avgAltitude?(Ot(),Pt("div",qN,[JN,L("div",QN,[tG,ne(" "+Ct(r.summary.avgAltitude.toFixed(2))+" m ",1)])])):Ht("",!0),r.summary.maxAltitude?(Ot(),Pt("div",eG,[nG,L("div",iG,[sG,ne(" "+Ct(r.summary.maxAltitude.toFixed(2))+" m ",1)])])):Ht("",!0)])])])])],64)}const oG=dc(pk,[["render",rG]]),aG={props:{size:{default:"70px"},color:{default:"#41b883"}},computed:{diamondStyle(){let e=parseInt(this.size);return{width:e/4+"px",height:e/4+"px","--bg-color":this.color}},styles(){let e=parseInt(this.size);return{width:this.size,height:e/4+"px"}}}};const lG={class:"spinner-container"};function cG(e,t,n,i,s,r){return Ot(),Pt("div",lG,[L("span",{style:ji(r.styles),class:"spinner spinner--rotate-diamond"},[L("div",{style:ji(r.diamondStyle),class:"diamond"},null,4),L("div",{style:ji(r.diamondStyle),class:"diamond"},null,4),L("div",{style:ji(r.diamondStyle),class:"diamond"},null,4)],4)])}const uG=dc(aG,[["render",cG],["__scopeId","data-v-ad6abded"]]),hG={class:"container"},fG=L("div",{class:"header"},[L("h2",{class:"title"},"Open Activity")],-1),dG={class:"map"},Qx=new Worker(new URL("/openactivity/assets/worker-ea4563ef.js",self.location),{type:"module"}),tv=Qn(new Array),Gn=Qn(new Array),gG=Qn(0),ev=Qn(new Array),Al=Qn(!1),nv=Qn(0);Qr(Gn,async e=>{var n,i;const t=new Array;for(let s=0;s<e.length;s++){if(!((n=e[s].activity)!=null&&n.timestamp)||!((i=e[s].activity)!=null&&i.localDateTime))return;const r=new Date(e[s].activity.localDateTime),o=new Date(e[s].activity.timestamp),a=r.getTime()-o.getTime(),l=Math.floor(a/1e3/3600);t.push(l)}ev.value=t,console.log("timezone offsets:",t)});class mG{constructor(t){gt(this,"feature");gt(this,"activityFile");gt(this,"err");const n=t;this.feature=n==null?void 0:n.feature,this.activityFile=new t0(n==null?void 0:n.activityFile),this.err=n==null?void 0:n.err}}Qx.onmessage=e=>{const t=e.data;if(t.err!=""){console.error(`decode return with err: ${t.err}`),alert(`decode return with err: ${t.err}`),Al.value=!1;return}const n=new Array;for(let o=0;o<t.decodeResults.length;o++)n[o]=new mG(t.decodeResults[o]);const i=new Date().getTime()-nv.value;console.group("Elapsed"),console.log("Decode took:		",t.took,"ms"),console.log("Interop wasm to js:	",i-t.took,"ms"),console.log("Total elapsed:		",i,"ms"),console.groupEnd();const s=new Array;for(let o=0;o<n.length;o++)s.push(n[o].feature);tv.value=s;const r=new Array;for(let o=0;o<n.length;o++)r.push(n[o].activityFile);Gn.value=r,Al.value=!1};const _G=Mo({__name:"TheActivity",setup(e){const t=Qn(!1);return Ph(()=>{var n;if(t.value=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function",t.value==!1){alert("Sorry, it appears that your browser does not support WebAssembly :(");return}(n=document.getElementById("fileInput"))==null||n.addEventListener("change",i=>{var o;const s=i.target;if(!s.files)return;let r=new Array;for(let a=0;a<((o=s.files)==null?void 0:o.length);a++)r.push(new Promise((l,c)=>{const u=s.files[a];if(!u)return;const h=new FileReader;h.onload=f=>{const d=f.target.result;l(new Uint8Array(d))},h.onerror=c,h.readAsArrayBuffer(u)}));Promise.all(r).then(a=>{nv.value=new Date().getTime(),Al.value=!0,Qx.postMessage(a)})})}),(n,i)=>(Ot(),Pt("div",hG,[ie(Wh,null,{default:K_(()=>[Rc(ie(uG,null,null,512),[[Fc,Al.value]])]),_:1}),L("div",{class:Dl([Gn.value.length>0?"navigator-left":"navigator-center","navigator"])},[fG,ie(oG,{activityFiles:Gn.value,timezoneOffsetHours:gG.value,isWebAssemblySupported:t.value},null,8,["activityFiles","timezoneOffsetHours","isWebAssemblySupported"]),Rc(ie(mk,{activityFile:Gn.value[0]},null,8,["activityFile"]),[[Fc,Gn.value.length>0]])],2),Rc(L("div",dG,[ie(RO,{geojsons:tv.value,"activity-files":Gn.value,timezoneOffsetHoursList:ev.value},null,8,["geojsons","activity-files","timezoneOffsetHoursList"])],512),[[Fc,Gn.value&&Gn.value.length>0]])]))}});const pG=Mo({__name:"ActivityView",setup(e){return(t,n)=>(Ot(),Pt("main",null,[ie(_G)]))}}),yG=NE({history:tE("/openactivity/"),routes:[{path:"/",name:"home",component:pG},{path:"/activity",name:"activity",component:()=>ag(()=>import("./ActivityView-ebfa8fdf.js"),[])},{path:"/altitudegraph",name:"altitudegraph",component:()=>ag(()=>import("./AltitudeGraph-a712a45a.js"),["assets/AltitudeGraph-a712a45a.js","assets/AltitudeGraph-e3d2d9bd.css"])}]}),id=Lw(zE);id.use(kw());id.use(yG);id.mount("#app");export{Ml as $,LO as A,RG as B,Xo as C,nP as D,ZF as E,vl as F,p_ as G,Jx as H,IO as I,ns as J,Kf as K,Jf as L,Zo as M,bl as N,UD as O,$D as P,mr as Q,be as R,VD as S,YD as T,vc as U,td as V,qn as W,qf as X,Qf as Y,Gx as Z,pG as _,Pa as a,HD as a0,BD as a1,_r as a2,XD as a3,ZD as a4,wc as a5,ed as a6,Jn as a7,gc as a8,Yx as a9,Ve as aA,L as aB,Mo as aC,Hx as aa,zO as ab,Gm as ac,zm as ad,sx as ae,Nx as af,en as ag,fr as ah,IG as ai,nk as aj,AF as ak,BO as al,SG as am,jx as an,y_ as ao,KD as ap,__ as aq,ik as ar,Rc as as,zh as at,t0 as au,dc as av,vG as aw,Ot as ax,Pt as ay,ie as az,GO as b,MO as c,$f as d,_x as e,xl as f,Ro as g,$F as h,xx as i,TG as j,Vf as k,FO as l,Dm as m,CG as n,NO as o,Zf as p,FD as q,WF as r,zD as s,ah as t,ND as u,Dx as v,Rl as w,Fx as x,WD as y,$s as z};
