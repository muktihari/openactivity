var Nk=Object.defineProperty;var Dk=(e,t,n)=>t in e?Nk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var gt=(e,t,n)=>(Dk(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function J_(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const ae={},Ja=[],Ti=()=>{},$k=()=>!1,zk=/^on[^a-z]/,zg=e=>zk.test(e),Q_=e=>e.startsWith("onUpdate:"),Le=Object.assign,t1=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Wk=Object.prototype.hasOwnProperty,zt=(e,t)=>Wk.call(e,t),bt=Array.isArray,Qa=e=>Wg(e)==="[object Map]",CC=e=>Wg(e)==="[object Set]",St=e=>typeof e=="function",ke=e=>typeof e=="string",e1=e=>typeof e=="symbol",fe=e=>e!==null&&typeof e=="object",SC=e=>fe(e)&&St(e.then)&&St(e.catch),MC=Object.prototype.toString,Wg=e=>MC.call(e),Gk=e=>Wg(e).slice(8,-1),RC=e=>Wg(e)==="[object Object]",n1=e=>ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Gh=J_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gg=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Yk=/-(\w)/g,er=Gg(e=>e.replace(Yk,(t,n)=>n?n.toUpperCase():"")),Bk=/\B([A-Z])/g,Yl=Gg(e=>e.replace(Bk,"-$1").toLowerCase()),Yg=Gg(e=>e.charAt(0).toUpperCase()+e.slice(1)),b0=Gg(e=>e?`on${Yg(e)}`:""),cu=(e,t)=>!Object.is(e,t),x0=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ed=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Uk=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Vk=e=>{const t=ke(e)?Number(e):NaN;return isNaN(t)?e:t};let pb;const Zp=()=>pb||(pb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ke(e){if(bt(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=ke(i)?Zk(i):Ke(i);if(r)for(const s in r)t[s]=r[s]}return t}else{if(ke(e))return e;if(fe(e))return e}}const Xk=/;(?![^(]*\))/g,Hk=/:([^]+)/,jk=/\/\*[^]*?\*\//g;function Zk(e){const t={};return e.replace(jk,"").split(Xk).forEach(n=>{if(n){const i=n.split(Hk);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function nr(e){let t="";if(ke(e))t=e;else if(bt(e))for(let n=0;n<e.length;n++){const i=nr(e[n]);i&&(t+=i+" ")}else if(fe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const qk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Kk=J_(qk);function IC(e){return!!e||e===""}const It=e=>ke(e)?e:e==null?"":bt(e)||fe(e)&&(e.toString===MC||!St(e.toString))?JSON.stringify(e,AC,2):String(e),AC=(e,t)=>t&&t.__v_isRef?AC(e,t.value):Qa(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:CC(t)?{[`Set(${t.size})`]:[...t.values()]}:fe(t)&&!bt(t)&&!RC(t)?String(t):t;let mi;class LC{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=mi,!t&&mi&&(this.index=(mi.scopes||(mi.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=mi;try{return mi=this,t()}finally{mi=n}}}on(){mi=this}off(){mi=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Jk(e){return new LC(e)}function Qk(e,t=mi){t&&t.active&&t.effects.push(e)}function t4(){return mi}const i1=e=>{const t=new Set(e);return t.w=0,t.n=0,t},OC=e=>(e.w&$s)>0,kC=e=>(e.n&$s)>0,e4=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=$s},n4=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];OC(r)&&!kC(r)?r.delete(e):t[n++]=r,r.w&=~$s,r.n&=~$s}t.length=n}},qp=new WeakMap;let Pc=0,$s=1;const Kp=30;let yi;const No=Symbol(""),Jp=Symbol("");class r1{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Qk(this,i)}run(){if(!this.active)return this.fn();let t=yi,n=Fs;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=yi,yi=this,Fs=!0,$s=1<<++Pc,Pc<=Kp?e4(this):yb(this),this.fn()}finally{Pc<=Kp&&n4(this),$s=1<<--Pc,yi=this.parent,Fs=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){yi===this?this.deferStop=!0:this.active&&(yb(this),this.onStop&&this.onStop(),this.active=!1)}}function yb(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Fs=!0;const PC=[];function Bl(){PC.push(Fs),Fs=!1}function Ul(){const e=PC.pop();Fs=e===void 0?!0:e}function Cn(e,t,n){if(Fs&&yi){let i=qp.get(e);i||qp.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=i1()),FC(r)}}function FC(e,t){let n=!1;Pc<=Kp?kC(e)||(e.n|=$s,n=!OC(e)):n=!e.has(yi),n&&(e.add(yi),yi.deps.push(e))}function Br(e,t,n,i,r,s){const o=qp.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&bt(e)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":bt(e)?n1(n)&&a.push(o.get("length")):(a.push(o.get(No)),Qa(e)&&a.push(o.get(Jp)));break;case"delete":bt(e)||(a.push(o.get(No)),Qa(e)&&a.push(o.get(Jp)));break;case"set":Qa(e)&&a.push(o.get(No));break}if(a.length===1)a[0]&&Qp(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Qp(i1(l))}}function Qp(e,t){const n=bt(e)?e:[...e];for(const i of n)i.computed&&_b(i);for(const i of n)i.computed||_b(i)}function _b(e,t){(e!==yi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const i4=J_("__proto__,__v_isRef,__isVue"),NC=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(e1)),r4=s1(),s4=s1(!1,!0),o4=s1(!0),wb=a4();function a4(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=Yt(this);for(let s=0,o=this.length;s<o;s++)Cn(i,"get",s+"");const r=i[t](...n);return r===-1||r===!1?i[t](...n.map(Yt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Bl();const i=Yt(this)[t].apply(this,n);return Ul(),i}}),e}function l4(e){const t=Yt(this);return Cn(t,"has",e),t.hasOwnProperty(e)}function s1(e=!1,t=!1){return function(i,r,s){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&s===(e?t?T4:GC:t?WC:zC).get(i))return i;const o=bt(i);if(!e){if(o&&zt(wb,r))return Reflect.get(wb,r,s);if(r==="hasOwnProperty")return l4}const a=Reflect.get(i,r,s);return(e1(r)?NC.has(r):i4(r))||(e||Cn(i,"get",r),t)?a:nn(a)?o&&n1(r)?a:a.value:fe(a)?e?BC(a):Ug(a):a}}const c4=DC(),u4=DC(!0);function DC(e=!1){return function(n,i,r,s){let o=n[i];if(hl(o)&&nn(o)&&!nn(r))return!1;if(!e&&(!nd(r)&&!hl(r)&&(o=Yt(o),r=Yt(r)),!bt(n)&&nn(o)&&!nn(r)))return o.value=r,!0;const a=bt(n)&&n1(i)?Number(i)<n.length:zt(n,i),l=Reflect.set(n,i,r,s);return n===Yt(s)&&(a?cu(r,o)&&Br(n,"set",i,r):Br(n,"add",i,r)),l}}function f4(e,t){const n=zt(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Br(e,"delete",t,void 0),i}function h4(e,t){const n=Reflect.has(e,t);return(!e1(t)||!NC.has(t))&&Cn(e,"has",t),n}function d4(e){return Cn(e,"iterate",bt(e)?"length":No),Reflect.ownKeys(e)}const $C={get:r4,set:c4,deleteProperty:f4,has:h4,ownKeys:d4},g4={get:o4,set(e,t){return!0},deleteProperty(e,t){return!0}},m4=Le({},$C,{get:s4,set:u4}),o1=e=>e,Bg=e=>Reflect.getPrototypeOf(e);function Uf(e,t,n=!1,i=!1){e=e.__v_raw;const r=Yt(e),s=Yt(t);n||(t!==s&&Cn(r,"get",t),Cn(r,"get",s));const{has:o}=Bg(r),a=i?o1:n?u1:uu;if(o.call(r,t))return a(e.get(t));if(o.call(r,s))return a(e.get(s));e!==r&&e.get(t)}function Vf(e,t=!1){const n=this.__v_raw,i=Yt(n),r=Yt(e);return t||(e!==r&&Cn(i,"has",e),Cn(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function Xf(e,t=!1){return e=e.__v_raw,!t&&Cn(Yt(e),"iterate",No),Reflect.get(e,"size",e)}function vb(e){e=Yt(e);const t=Yt(this);return Bg(t).has.call(t,e)||(t.add(e),Br(t,"add",e,e)),this}function bb(e,t){t=Yt(t);const n=Yt(this),{has:i,get:r}=Bg(n);let s=i.call(n,e);s||(e=Yt(e),s=i.call(n,e));const o=r.call(n,e);return n.set(e,t),s?cu(t,o)&&Br(n,"set",e,t):Br(n,"add",e,t),this}function xb(e){const t=Yt(this),{has:n,get:i}=Bg(t);let r=n.call(t,e);r||(e=Yt(e),r=n.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return r&&Br(t,"delete",e,void 0),s}function Eb(){const e=Yt(this),t=e.size!==0,n=e.clear();return t&&Br(e,"clear",void 0,void 0),n}function Hf(e,t){return function(i,r){const s=this,o=s.__v_raw,a=Yt(o),l=t?o1:e?u1:uu;return!e&&Cn(a,"iterate",No),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function jf(e,t,n){return function(...i){const r=this.__v_raw,s=Yt(r),o=Qa(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=r[e](...i),u=n?o1:t?u1:uu;return!t&&Cn(s,"iterate",l?Jp:No),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function ss(e){return function(...t){return e==="delete"?!1:this}}function p4(){const e={get(s){return Uf(this,s)},get size(){return Xf(this)},has:Vf,add:vb,set:bb,delete:xb,clear:Eb,forEach:Hf(!1,!1)},t={get(s){return Uf(this,s,!1,!0)},get size(){return Xf(this)},has:Vf,add:vb,set:bb,delete:xb,clear:Eb,forEach:Hf(!1,!0)},n={get(s){return Uf(this,s,!0)},get size(){return Xf(this,!0)},has(s){return Vf.call(this,s,!0)},add:ss("add"),set:ss("set"),delete:ss("delete"),clear:ss("clear"),forEach:Hf(!0,!1)},i={get(s){return Uf(this,s,!0,!0)},get size(){return Xf(this,!0)},has(s){return Vf.call(this,s,!0)},add:ss("add"),set:ss("set"),delete:ss("delete"),clear:ss("clear"),forEach:Hf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=jf(s,!1,!1),n[s]=jf(s,!0,!1),t[s]=jf(s,!1,!0),i[s]=jf(s,!0,!0)}),[e,n,t,i]}const[y4,_4,w4,v4]=p4();function a1(e,t){const n=t?e?v4:w4:e?_4:y4;return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(zt(n,r)&&r in i?n:i,r,s)}const b4={get:a1(!1,!1)},x4={get:a1(!1,!0)},E4={get:a1(!0,!1)},zC=new WeakMap,WC=new WeakMap,GC=new WeakMap,T4=new WeakMap;function C4(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function S4(e){return e.__v_skip||!Object.isExtensible(e)?0:C4(Gk(e))}function Ug(e){return hl(e)?e:l1(e,!1,$C,b4,zC)}function YC(e){return l1(e,!1,m4,x4,WC)}function BC(e){return l1(e,!0,g4,E4,GC)}function l1(e,t,n,i,r){if(!fe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const o=S4(e);if(o===0)return e;const a=new Proxy(e,o===2?i:n);return r.set(e,a),a}function tl(e){return hl(e)?tl(e.__v_raw):!!(e&&e.__v_isReactive)}function hl(e){return!!(e&&e.__v_isReadonly)}function nd(e){return!!(e&&e.__v_isShallow)}function UC(e){return tl(e)||hl(e)}function Yt(e){const t=e&&e.__v_raw;return t?Yt(t):e}function c1(e){return ed(e,"__v_skip",!0),e}const uu=e=>fe(e)?Ug(e):e,u1=e=>fe(e)?BC(e):e;function VC(e){Fs&&yi&&(e=Yt(e),FC(e.dep||(e.dep=i1())))}function XC(e,t){e=Yt(e);const n=e.dep;n&&Qp(n)}function nn(e){return!!(e&&e.__v_isRef===!0)}function HC(e){return jC(e,!1)}function M4(e){return jC(e,!0)}function jC(e,t){return nn(e)?e:new R4(e,t)}class R4{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Yt(t),this._value=n?t:uu(t)}get value(){return VC(this),this._value}set value(t){const n=this.__v_isShallow||nd(t)||hl(t);t=n?t:Yt(t),cu(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:uu(t),XC(this))}}function Pr(e){return nn(e)?e.value:e}const I4={get:(e,t,n)=>Pr(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return nn(r)&&!nn(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function ZC(e){return tl(e)?e:new Proxy(e,I4)}class A4{constructor(t,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new r1(t,()=>{this._dirty||(this._dirty=!0,XC(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=Yt(this);return VC(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function L4(e,t,n=!1){let i,r;const s=St(e);return s?(i=e,r=Ti):(i=e.get,r=e.set),new A4(i,r,s||!r,n)}function Ns(e,t,n,i){let r;try{r=i?e(...i):e()}catch(s){Vg(s,t,n)}return r}function si(e,t,n,i){if(St(e)){const s=Ns(e,t,n,i);return s&&SC(s)&&s.catch(o=>{Vg(o,t,n)}),s}const r=[];for(let s=0;s<e.length;s++)r.push(si(e[s],t,n,i));return r}function Vg(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=n;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Ns(l,null,10,[e,o,a]);return}}O4(e,n,r,i)}function O4(e,t,n,i=!0){console.error(e)}let fu=!1,ty=!1;const Qe=[];let Yi=0;const el=[];let Tr=null,wo=0;const qC=Promise.resolve();let f1=null;function KC(e){const t=f1||qC;return e?t.then(this?e.bind(this):e):t}function k4(e){let t=Yi+1,n=Qe.length;for(;t<n;){const i=t+n>>>1;hu(Qe[i])<e?t=i+1:n=i}return t}function h1(e){(!Qe.length||!Qe.includes(e,fu&&e.allowRecurse?Yi+1:Yi))&&(e.id==null?Qe.push(e):Qe.splice(k4(e.id),0,e),JC())}function JC(){!fu&&!ty&&(ty=!0,f1=qC.then(tS))}function P4(e){const t=Qe.indexOf(e);t>Yi&&Qe.splice(t,1)}function F4(e){bt(e)?el.push(...e):(!Tr||!Tr.includes(e,e.allowRecurse?wo+1:wo))&&el.push(e),JC()}function Tb(e,t=fu?Yi+1:0){for(;t<Qe.length;t++){const n=Qe[t];n&&n.pre&&(Qe.splice(t,1),t--,n())}}function QC(e){if(el.length){const t=[...new Set(el)];if(el.length=0,Tr){Tr.push(...t);return}for(Tr=t,Tr.sort((n,i)=>hu(n)-hu(i)),wo=0;wo<Tr.length;wo++)Tr[wo]();Tr=null,wo=0}}const hu=e=>e.id==null?1/0:e.id,N4=(e,t)=>{const n=hu(e)-hu(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function tS(e){ty=!1,fu=!0,Qe.sort(N4);const t=Ti;try{for(Yi=0;Yi<Qe.length;Yi++){const n=Qe[Yi];n&&n.active!==!1&&Ns(n,null,14)}}finally{Yi=0,Qe.length=0,QC(),fu=!1,f1=null,(Qe.length||el.length)&&tS()}}function D4(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||ae;let r=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:h}=i[u]||ae;h&&(r=n.map(d=>ke(d)?d.trim():d)),f&&(r=n.map(Uk))}let a,l=i[a=b0(t)]||i[a=b0(er(t))];!l&&s&&(l=i[a=b0(Yl(t))]),l&&si(l,e,6,r);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,si(c,e,6,r)}}function eS(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!St(e)){const l=c=>{const u=eS(c,t,!0);u&&(a=!0,Le(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(fe(e)&&i.set(e,null),null):(bt(s)?s.forEach(l=>o[l]=null):Le(o,s),fe(e)&&i.set(e,o),o)}function Xg(e,t){return!e||!zg(t)?!1:(t=t.slice(2).replace(/Once$/,""),zt(e,t[0].toLowerCase()+t.slice(1))||zt(e,Yl(t))||zt(e,t))}let Fn=null,Hg=null;function id(e){const t=Fn;return Fn=e,Hg=e&&e.type.__scopeId||null,t}function nS(e){Hg=e}function iS(){Hg=null}function rS(e,t=Fn,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Nb(-1);const s=id(t);let o;try{o=e(...r)}finally{id(s),i._d&&Nb(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function E0(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:h,setupState:d,ctx:g,inheritAttrs:m}=e;let _,p;const y=id(e);try{if(n.shapeFlag&4){const w=r||i;_=Wi(u.call(w,w,f,s,d,h,g)),p=l}else{const w=t;_=Wi(w.length>1?w(s,{attrs:l,slots:a,emit:c}):w(s,null)),p=t.props?l:$4(l)}}catch(w){qc.length=0,Vg(w,e,1),_=ge(Ci)}let v=_;if(p&&m!==!1){const w=Object.keys(p),{shapeFlag:x}=v;w.length&&x&7&&(o&&w.some(Q_)&&(p=z4(p,o)),v=zs(v,p))}return n.dirs&&(v=zs(v),v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&(v.transition=n.transition),_=v,id(y),_}const $4=e=>{let t;for(const n in e)(n==="class"||n==="style"||zg(n))&&((t||(t={}))[n]=e[n]);return t},z4=(e,t)=>{const n={};for(const i in e)(!Q_(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function W4(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?Cb(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==i[h]&&!Xg(c,h))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Cb(i,o,c):!0:!!o;return!1}function Cb(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!Xg(n,s))return!0}return!1}function G4({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const Y4=e=>e.__isSuspense;function B4(e,t){t&&t.pendingBranch?bt(e)?t.effects.push(...e):t.effects.push(e):F4(e)}const Zf={};function Yh(e,t,n){return sS(e,t,n)}function sS(e,t,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=ae){var a;const l=t4()===((a=Ge)==null?void 0:a.scope)?Ge:null;let c,u=!1,f=!1;if(nn(e)?(c=()=>e.value,u=nd(e)):tl(e)?(c=()=>e,i=!0):bt(e)?(f=!0,u=e.some(w=>tl(w)||nd(w)),c=()=>e.map(w=>{if(nn(w))return w.value;if(tl(w))return To(w);if(St(w))return Ns(w,l,2)})):St(e)?t?c=()=>Ns(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return h&&h(),si(e,l,3,[d])}:c=Ti,t&&i){const w=c;c=()=>To(w())}let h,d=w=>{h=y.onStop=()=>{Ns(w,l,4)}},g;if(gu)if(d=Ti,t?n&&si(t,l,3,[c(),f?[]:void 0,d]):c(),r==="sync"){const w=zP();g=w.__watcherHandles||(w.__watcherHandles=[])}else return Ti;let m=f?new Array(e.length).fill(Zf):Zf;const _=()=>{if(y.active)if(t){const w=y.run();(i||u||(f?w.some((x,b)=>cu(x,m[b])):cu(w,m)))&&(h&&h(),si(t,l,3,[w,m===Zf?void 0:f&&m[0]===Zf?[]:m,d]),m=w)}else y.run()};_.allowRecurse=!!t;let p;r==="sync"?p=_:r==="post"?p=()=>wn(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),p=()=>h1(_));const y=new r1(c,p);t?n?_():m=y.run():r==="post"?wn(y.run.bind(y),l&&l.suspense):y.run();const v=()=>{y.stop(),l&&l.scope&&t1(l.scope.effects,y)};return g&&g.push(v),v}function U4(e,t,n){const i=this.proxy,r=ke(e)?e.includes(".")?oS(i,e):()=>i[e]:e.bind(i,i);let s;St(t)?s=t:(s=t.handler,n=t);const o=Ge;dl(this);const a=sS(r,s.bind(i),n);return o?dl(o):Do(),a}function oS(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function To(e,t){if(!fe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),nn(e))To(e.value,t);else if(bt(e))for(let n=0;n<e.length;n++)To(e[n],t);else if(CC(e)||Qa(e))e.forEach(n=>{To(n,t)});else if(RC(e))for(const n in e)To(e[n],t);return e}function Is(e,t){const n=Fn;if(n===null)return e;const i=Jg(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,a,l,c=ae]=t[s];o&&(St(o)&&(o={mounted:o,updated:o}),o.deep&&To(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function ro(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Bl(),si(l,n,8,[e.el,a,e,t]),Ul())}}function V4(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fS(()=>{e.isMounted=!0}),hS(()=>{e.isUnmounting=!0}),e}const jn=[Function,Array],aS={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jn,onEnter:jn,onAfterEnter:jn,onEnterCancelled:jn,onBeforeLeave:jn,onLeave:jn,onAfterLeave:jn,onLeaveCancelled:jn,onBeforeAppear:jn,onAppear:jn,onAfterAppear:jn,onAppearCancelled:jn},X4={name:"BaseTransition",props:aS,setup(e,{slots:t}){const n=LP(),i=V4();let r;return()=>{const s=t.default&&cS(t.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==Ci){o=m;break}}const a=Yt(e),{mode:l}=a;if(i.isLeaving)return T0(o);const c=Sb(o);if(!c)return T0(o);const u=ey(c,a,i,n);ny(c,u);const f=n.subTree,h=f&&Sb(f);let d=!1;const{getTransitionKey:g}=c.type;if(g){const m=g();r===void 0?r=m:m!==r&&(r=m,d=!0)}if(h&&h.type!==Ci&&(!vo(c,h)||d)){const m=ey(h,a,i,n);if(ny(h,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},T0(o);l==="in-out"&&c.type!==Ci&&(m.delayLeave=(_,p,y)=>{const v=lS(i,h);v[String(h.key)]=h,_._leaveCb=()=>{p(),_._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=y})}return o}}},H4=X4;function lS(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function ey(e,t,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:m,onAppear:_,onAfterAppear:p,onAppearCancelled:y}=t,v=String(e.key),w=lS(n,e),x=(C,I)=>{C&&si(C,i,9,I)},b=(C,I)=>{const S=I[1];x(C,I),bt(C)?C.every(R=>R.length<=1)&&S():C.length<=1&&S()},E={mode:s,persisted:o,beforeEnter(C){let I=a;if(!n.isMounted)if(r)I=m||a;else return;C._leaveCb&&C._leaveCb(!0);const S=w[v];S&&vo(e,S)&&S.el._leaveCb&&S.el._leaveCb(),x(I,[C])},enter(C){let I=l,S=c,R=u;if(!n.isMounted)if(r)I=_||l,S=p||c,R=y||u;else return;let M=!1;const k=C._enterCb=O=>{M||(M=!0,O?x(R,[C]):x(S,[C]),E.delayedLeave&&E.delayedLeave(),C._enterCb=void 0)};I?b(I,[C,k]):k()},leave(C,I){const S=String(e.key);if(C._enterCb&&C._enterCb(!0),n.isUnmounting)return I();x(f,[C]);let R=!1;const M=C._leaveCb=k=>{R||(R=!0,I(),k?x(g,[C]):x(d,[C]),C._leaveCb=void 0,w[S]===e&&delete w[S])};w[S]=e,h?b(h,[C,M]):M()},clone(C){return ey(C,t,n,i)}};return E}function T0(e){if(jg(e))return e=zs(e),e.children=null,e}function Sb(e){return jg(e)?e.children?e.children[0]:void 0:e}function ny(e,t){e.shapeFlag&6&&e.component?ny(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function cS(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===pi?(o.patchFlag&128&&r++,i=i.concat(cS(o.children,t,a))):(t||o.type!==Ci)&&i.push(a!=null?zs(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function Hu(e,t){return St(e)?(()=>Le({name:e.name},t,{setup:e}))():e}const Bh=e=>!!e.type.__asyncLoader,jg=e=>e.type.__isKeepAlive;function j4(e,t){uS(e,"a",t)}function Z4(e,t){uS(e,"da",t)}function uS(e,t,n=Ge){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Zg(t,i,n),n){let r=n.parent;for(;r&&r.parent;)jg(r.parent.vnode)&&q4(i,t,n,r),r=r.parent}}function q4(e,t,n,i){const r=Zg(t,e,i,!0);dS(()=>{t1(i[t],r)},n)}function Zg(e,t,n=Ge,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Bl(),dl(n);const a=si(t,n,e,o);return Do(),Ul(),a});return i?r.unshift(s):r.push(s),s}}const qr=e=>(t,n=Ge)=>(!gu||e==="sp")&&Zg(e,(...i)=>t(...i),n),K4=qr("bm"),fS=qr("m"),J4=qr("bu"),Q4=qr("u"),hS=qr("bum"),dS=qr("um"),tP=qr("sp"),eP=qr("rtg"),nP=qr("rtc");function iP(e,t=Ge){Zg("ec",e,t)}const gS="components";function rP(e,t){return oP(gS,e,!0,t)||e}const sP=Symbol.for("v-ndc");function oP(e,t,n=!0,i=!1){const r=Fn||Ge;if(r){const s=r.type;if(e===gS){const a=NP(s,!1);if(a&&(a===t||a===er(t)||a===Yg(er(t))))return s}const o=Mb(r[e]||s[e],t)||Mb(r.appContext[e],t);return!o&&i?s:o}}function Mb(e,t){return e&&(e[t]||e[er(t)]||e[Yg(er(t))])}const iy=e=>e?SS(e)?Jg(e)||e.proxy:iy(e.parent):null,Zc=Le(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>iy(e.parent),$root:e=>iy(e.root),$emit:e=>e.emit,$options:e=>d1(e),$forceUpdate:e=>e.f||(e.f=()=>h1(e.update)),$nextTick:e=>e.n||(e.n=KC.bind(e.proxy)),$watch:e=>U4.bind(e)}),C0=(e,t)=>e!==ae&&!e.__isScriptSetup&&zt(e,t),aP={get({_:e},t){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(C0(i,t))return o[t]=1,i[t];if(r!==ae&&zt(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&zt(c,t))return o[t]=3,s[t];if(n!==ae&&zt(n,t))return o[t]=4,n[t];ry&&(o[t]=0)}}const u=Zc[t];let f,h;if(u)return t==="$attrs"&&Cn(e,"get",t),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==ae&&zt(n,t))return o[t]=4,n[t];if(h=l.config.globalProperties,zt(h,t))return h[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return C0(r,t)?(r[t]=n,!0):i!==ae&&zt(i,t)?(i[t]=n,!0):zt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!n[o]||e!==ae&&zt(e,o)||C0(t,o)||(a=s[0])&&zt(a,o)||zt(i,o)||zt(Zc,o)||zt(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:zt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Rb(e){return bt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ry=!0;function lP(e){const t=d1(e),n=e.proxy,i=e.ctx;ry=!1,t.beforeCreate&&Ib(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:m,deactivated:_,beforeDestroy:p,beforeUnmount:y,destroyed:v,unmounted:w,render:x,renderTracked:b,renderTriggered:E,errorCaptured:C,serverPrefetch:I,expose:S,inheritAttrs:R,components:M,directives:k,filters:O}=t;if(c&&cP(c,i,null),o)for(const N in o){const W=o[N];St(W)&&(i[N]=W.bind(n))}if(r){const N=r.call(n,n);fe(N)&&(e.data=Ug(N))}if(ry=!0,s)for(const N in s){const W=s[N],j=St(W)?W.bind(n,n):St(W.get)?W.get.bind(n,n):Ti,V=!St(W)&&St(W.set)?W.set.bind(n):Ti,Z=_i({get:j,set:V});Object.defineProperty(i,N,{enumerable:!0,configurable:!0,get:()=>Z.value,set:z=>Z.value=z})}if(a)for(const N in a)mS(a[N],i,n,N);if(l){const N=St(l)?l.call(n):l;Reflect.ownKeys(N).forEach(W=>{Uh(W,N[W])})}u&&Ib(u,e,"c");function P(N,W){bt(W)?W.forEach(j=>N(j.bind(n))):W&&N(W.bind(n))}if(P(K4,f),P(fS,h),P(J4,d),P(Q4,g),P(j4,m),P(Z4,_),P(iP,C),P(nP,b),P(eP,E),P(hS,y),P(dS,w),P(tP,I),bt(S))if(S.length){const N=e.exposed||(e.exposed={});S.forEach(W=>{Object.defineProperty(N,W,{get:()=>n[W],set:j=>n[W]=j})})}else e.exposed||(e.exposed={});x&&e.render===Ti&&(e.render=x),R!=null&&(e.inheritAttrs=R),M&&(e.components=M),k&&(e.directives=k)}function cP(e,t,n=Ti){bt(e)&&(e=sy(e));for(const i in e){const r=e[i];let s;fe(r)?"default"in r?s=Fr(r.from||i,r.default,!0):s=Fr(r.from||i):s=Fr(r),nn(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function Ib(e,t,n){si(bt(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function mS(e,t,n,i){const r=i.includes(".")?oS(n,i):()=>n[i];if(ke(e)){const s=t[e];St(s)&&Yh(r,s)}else if(St(e))Yh(r,e.bind(n));else if(fe(e))if(bt(e))e.forEach(s=>mS(s,t,n,i));else{const s=St(e.handler)?e.handler.bind(n):t[e.handler];St(s)&&Yh(r,s,e)}}function d1(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!n&&!i?l=t:(l={},r.length&&r.forEach(c=>rd(l,c,o,!0)),rd(l,t,o)),fe(t)&&s.set(t,l),l}function rd(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&rd(e,s,n,!0),r&&r.forEach(o=>rd(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=uP[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const uP={data:Ab,props:Lb,emits:Lb,methods:Fc,computed:Fc,beforeCreate:ln,created:ln,beforeMount:ln,mounted:ln,beforeUpdate:ln,updated:ln,beforeDestroy:ln,beforeUnmount:ln,destroyed:ln,unmounted:ln,activated:ln,deactivated:ln,errorCaptured:ln,serverPrefetch:ln,components:Fc,directives:Fc,watch:hP,provide:Ab,inject:fP};function Ab(e,t){return t?e?function(){return Le(St(e)?e.call(this,this):e,St(t)?t.call(this,this):t)}:t:e}function fP(e,t){return Fc(sy(e),sy(t))}function sy(e){if(bt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ln(e,t){return e?[...new Set([].concat(e,t))]:t}function Fc(e,t){return e?Le(Object.create(null),e,t):t}function Lb(e,t){return e?bt(e)&&bt(t)?[...new Set([...e,...t])]:Le(Object.create(null),Rb(e),Rb(t??{})):t}function hP(e,t){if(!e)return t;if(!t)return e;const n=Le(Object.create(null),e);for(const i in t)n[i]=ln(e[i],t[i]);return n}function pS(){return{app:null,config:{isNativeTag:$k,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let dP=0;function gP(e,t){return function(i,r=null){St(i)||(i=Le({},i)),r!=null&&!fe(r)&&(r=null);const s=pS(),o=new Set;let a=!1;const l=s.app={_uid:dP++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:WP,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&St(c.install)?(o.add(c),c.install(l,...u)):St(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,f){if(!a){const h=ge(i,r);return h.appContext=s,u&&t?t(h,c):e(h,c,f),a=!0,l._container=c,c.__vue_app__=l,Jg(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){sd=l;try{return c()}finally{sd=null}}};return l}}let sd=null;function Uh(e,t){if(Ge){let n=Ge.provides;const i=Ge.parent&&Ge.parent.provides;i===n&&(n=Ge.provides=Object.create(i)),n[e]=t}}function Fr(e,t,n=!1){const i=Ge||Fn;if(i||sd){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:sd._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&St(t)?t.call(i&&i.proxy):t}}function mP(e,t,n,i=!1){const r={},s={};ed(s,Kg,1),e.propsDefaults=Object.create(null),yS(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:YC(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function pP(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=Yt(r),[l]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Xg(e.emitsOptions,h))continue;const d=t[h];if(l)if(zt(s,h))d!==s[h]&&(s[h]=d,c=!0);else{const g=er(h);r[g]=oy(l,a,g,d,e,!1)}else d!==s[h]&&(s[h]=d,c=!0)}}}else{yS(e,t,r,s)&&(c=!0);let u;for(const f in a)(!t||!zt(t,f)&&((u=Yl(f))===f||!zt(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=oy(l,a,f,void 0,e,!0)):delete r[f]);if(s!==a)for(const f in s)(!t||!zt(t,f))&&(delete s[f],c=!0)}c&&Br(e,"set","$attrs")}function yS(e,t,n,i){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Gh(l))continue;const c=t[l];let u;r&&zt(r,u=er(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:Xg(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=Yt(n),c=a||ae;for(let u=0;u<s.length;u++){const f=s[u];n[f]=oy(r,l,f,c[f],e,!zt(c,f))}}return o}function oy(e,t,n,i,r,s){const o=e[n];if(o!=null){const a=zt(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&St(l)){const{propsDefaults:c}=r;n in c?i=c[n]:(dl(r),i=c[n]=l.call(null,t),Do())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===Yl(n))&&(i=!0))}return i}function _S(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let l=!1;if(!St(e)){const u=f=>{l=!0;const[h,d]=_S(f,t,!0);Le(o,h),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return fe(e)&&i.set(e,Ja),Ja;if(bt(s))for(let u=0;u<s.length;u++){const f=er(s[u]);Ob(f)&&(o[f]=ae)}else if(s)for(const u in s){const f=er(u);if(Ob(f)){const h=s[u],d=o[f]=bt(h)||St(h)?{type:h}:Le({},h);if(d){const g=Fb(Boolean,d.type),m=Fb(String,d.type);d[0]=g>-1,d[1]=m<0||g<m,(g>-1||zt(d,"default"))&&a.push(f)}}}const c=[o,a];return fe(e)&&i.set(e,c),c}function Ob(e){return e[0]!=="$"}function kb(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Pb(e,t){return kb(e)===kb(t)}function Fb(e,t){return bt(t)?t.findIndex(n=>Pb(n,e)):St(t)&&Pb(t,e)?0:-1}const wS=e=>e[0]==="_"||e==="$stable",g1=e=>bt(e)?e.map(Wi):[Wi(e)],yP=(e,t,n)=>{if(t._n)return t;const i=rS((...r)=>g1(t(...r)),n);return i._c=!1,i},vS=(e,t,n)=>{const i=e._ctx;for(const r in e){if(wS(r))continue;const s=e[r];if(St(s))t[r]=yP(r,s,i);else if(s!=null){const o=g1(s);t[r]=()=>o}}},bS=(e,t)=>{const n=g1(t);e.slots.default=()=>n},_P=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Yt(t),ed(t,"_",n)):vS(t,e.slots={})}else e.slots={},t&&bS(e,t);ed(e.slots,Kg,1)},wP=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=ae;if(i.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:(Le(r,t),!n&&a===1&&delete r._):(s=!t.$stable,vS(t,r)),o=t}else t&&(bS(e,t),o={default:1});if(s)for(const a in r)!wS(a)&&!(a in o)&&delete r[a]};function ay(e,t,n,i,r=!1){if(bt(e)){e.forEach((h,d)=>ay(h,t&&(bt(t)?t[d]:t),n,i,r));return}if(Bh(i)&&!r)return;const s=i.shapeFlag&4?Jg(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=e,c=t&&t.r,u=a.refs===ae?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(ke(c)?(u[c]=null,zt(f,c)&&(f[c]=null)):nn(c)&&(c.value=null)),St(l))Ns(l,a,12,[o,u]);else{const h=ke(l),d=nn(l);if(h||d){const g=()=>{if(e.f){const m=h?zt(f,l)?f[l]:u[l]:l.value;r?bt(m)&&t1(m,s):bt(m)?m.includes(s)||m.push(s):h?(u[l]=[s],zt(f,l)&&(f[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else h?(u[l]=o,zt(f,l)&&(f[l]=o)):d&&(l.value=o,e.k&&(u[e.k]=o))};o?(g.id=-1,wn(g,n)):g()}}}const wn=B4;function vP(e){return bP(e)}function bP(e,t){const n=Zp();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=Ti,insertStaticContent:g}=e,m=(T,L,F,Y=null,B=null,H=null,rt=!1,J=null,tt=!!L.dynamicChildren)=>{if(T===L)return;T&&!vo(T,L)&&(Y=$(T),z(T,B,H,!0),T=null),L.patchFlag===-2&&(tt=!1,L.dynamicChildren=null);const{type:q,ref:ct,shapeFlag:at}=L;switch(q){case qg:_(T,L,F,Y);break;case Ci:p(T,L,F,Y);break;case S0:T==null&&y(L,F,Y,rt);break;case pi:M(T,L,F,Y,B,H,rt,J,tt);break;default:at&1?x(T,L,F,Y,B,H,rt,J,tt):at&6?k(T,L,F,Y,B,H,rt,J,tt):(at&64||at&128)&&q.process(T,L,F,Y,B,H,rt,J,tt,D)}ct!=null&&B&&ay(ct,T&&T.ref,H,L||T,!L)},_=(T,L,F,Y)=>{if(T==null)i(L.el=a(L.children),F,Y);else{const B=L.el=T.el;L.children!==T.children&&c(B,L.children)}},p=(T,L,F,Y)=>{T==null?i(L.el=l(L.children||""),F,Y):L.el=T.el},y=(T,L,F,Y)=>{[T.el,T.anchor]=g(T.children,L,F,Y,T.el,T.anchor)},v=({el:T,anchor:L},F,Y)=>{let B;for(;T&&T!==L;)B=h(T),i(T,F,Y),T=B;i(L,F,Y)},w=({el:T,anchor:L})=>{let F;for(;T&&T!==L;)F=h(T),r(T),T=F;r(L)},x=(T,L,F,Y,B,H,rt,J,tt)=>{rt=rt||L.type==="svg",T==null?b(L,F,Y,B,H,rt,J,tt):I(T,L,B,H,rt,J,tt)},b=(T,L,F,Y,B,H,rt,J)=>{let tt,q;const{type:ct,props:at,shapeFlag:ut,transition:ft,dirs:xt}=T;if(tt=T.el=o(T.type,H,at&&at.is,at),ut&8?u(tt,T.children):ut&16&&C(T.children,tt,null,Y,B,H&&ct!=="foreignObject",rt,J),xt&&ro(T,null,Y,"created"),E(tt,T,T.scopeId,rt,Y),at){for(const Tt in at)Tt!=="value"&&!Gh(Tt)&&s(tt,Tt,null,at[Tt],H,T.children,Y,B,ot);"value"in at&&s(tt,"value",null,at.value),(q=at.onVnodeBeforeMount)&&$i(q,Y,T)}xt&&ro(T,null,Y,"beforeMount");const Ot=(!B||B&&!B.pendingBranch)&&ft&&!ft.persisted;Ot&&ft.beforeEnter(tt),i(tt,L,F),((q=at&&at.onVnodeMounted)||Ot||xt)&&wn(()=>{q&&$i(q,Y,T),Ot&&ft.enter(tt),xt&&ro(T,null,Y,"mounted")},B)},E=(T,L,F,Y,B)=>{if(F&&d(T,F),Y)for(let H=0;H<Y.length;H++)d(T,Y[H]);if(B){let H=B.subTree;if(L===H){const rt=B.vnode;E(T,rt,rt.scopeId,rt.slotScopeIds,B.parent)}}},C=(T,L,F,Y,B,H,rt,J,tt=0)=>{for(let q=tt;q<T.length;q++){const ct=T[q]=J?_s(T[q]):Wi(T[q]);m(null,ct,L,F,Y,B,H,rt,J)}},I=(T,L,F,Y,B,H,rt)=>{const J=L.el=T.el;let{patchFlag:tt,dynamicChildren:q,dirs:ct}=L;tt|=T.patchFlag&16;const at=T.props||ae,ut=L.props||ae;let ft;F&&so(F,!1),(ft=ut.onVnodeBeforeUpdate)&&$i(ft,F,L,T),ct&&ro(L,T,F,"beforeUpdate"),F&&so(F,!0);const xt=B&&L.type!=="foreignObject";if(q?S(T.dynamicChildren,q,J,F,Y,xt,H):rt||W(T,L,J,null,F,Y,xt,H,!1),tt>0){if(tt&16)R(J,L,at,ut,F,Y,B);else if(tt&2&&at.class!==ut.class&&s(J,"class",null,ut.class,B),tt&4&&s(J,"style",at.style,ut.style,B),tt&8){const Ot=L.dynamicProps;for(let Tt=0;Tt<Ot.length;Tt++){const jt=Ot[Tt],ye=at[jt],ce=ut[jt];(ce!==ye||jt==="value")&&s(J,jt,ye,ce,B,T.children,F,Y,ot)}}tt&1&&T.children!==L.children&&u(J,L.children)}else!rt&&q==null&&R(J,L,at,ut,F,Y,B);((ft=ut.onVnodeUpdated)||ct)&&wn(()=>{ft&&$i(ft,F,L,T),ct&&ro(L,T,F,"updated")},Y)},S=(T,L,F,Y,B,H,rt)=>{for(let J=0;J<L.length;J++){const tt=T[J],q=L[J],ct=tt.el&&(tt.type===pi||!vo(tt,q)||tt.shapeFlag&70)?f(tt.el):F;m(tt,q,ct,null,Y,B,H,rt,!0)}},R=(T,L,F,Y,B,H,rt)=>{if(F!==Y){if(F!==ae)for(const J in F)!Gh(J)&&!(J in Y)&&s(T,J,F[J],null,rt,L.children,B,H,ot);for(const J in Y){if(Gh(J))continue;const tt=Y[J],q=F[J];tt!==q&&J!=="value"&&s(T,J,q,tt,rt,L.children,B,H,ot)}"value"in Y&&s(T,"value",F.value,Y.value)}},M=(T,L,F,Y,B,H,rt,J,tt)=>{const q=L.el=T?T.el:a(""),ct=L.anchor=T?T.anchor:a("");let{patchFlag:at,dynamicChildren:ut,slotScopeIds:ft}=L;ft&&(J=J?J.concat(ft):ft),T==null?(i(q,F,Y),i(ct,F,Y),C(L.children,F,ct,B,H,rt,J,tt)):at>0&&at&64&&ut&&T.dynamicChildren?(S(T.dynamicChildren,ut,F,B,H,rt,J),(L.key!=null||B&&L===B.subTree)&&xS(T,L,!0)):W(T,L,F,ct,B,H,rt,J,tt)},k=(T,L,F,Y,B,H,rt,J,tt)=>{L.slotScopeIds=J,T==null?L.shapeFlag&512?B.ctx.activate(L,F,Y,rt,tt):O(L,F,Y,B,H,rt,tt):A(T,L,tt)},O=(T,L,F,Y,B,H,rt)=>{const J=T.component=AP(T,Y,B);if(jg(T)&&(J.ctx.renderer=D),OP(J),J.asyncDep){if(B&&B.registerDep(J,P),!T.el){const tt=J.subTree=ge(Ci);p(null,tt,L,F)}return}P(J,T,L,F,B,H,rt)},A=(T,L,F)=>{const Y=L.component=T.component;if(W4(T,L,F))if(Y.asyncDep&&!Y.asyncResolved){N(Y,L,F);return}else Y.next=L,P4(Y.update),Y.update();else L.el=T.el,Y.vnode=L},P=(T,L,F,Y,B,H,rt)=>{const J=()=>{if(T.isMounted){let{next:ct,bu:at,u:ut,parent:ft,vnode:xt}=T,Ot=ct,Tt;so(T,!1),ct?(ct.el=xt.el,N(T,ct,rt)):ct=xt,at&&x0(at),(Tt=ct.props&&ct.props.onVnodeBeforeUpdate)&&$i(Tt,ft,ct,xt),so(T,!0);const jt=E0(T),ye=T.subTree;T.subTree=jt,m(ye,jt,f(ye.el),$(ye),T,B,H),ct.el=jt.el,Ot===null&&G4(T,jt.el),ut&&wn(ut,B),(Tt=ct.props&&ct.props.onVnodeUpdated)&&wn(()=>$i(Tt,ft,ct,xt),B)}else{let ct;const{el:at,props:ut}=L,{bm:ft,m:xt,parent:Ot}=T,Tt=Bh(L);if(so(T,!1),ft&&x0(ft),!Tt&&(ct=ut&&ut.onVnodeBeforeMount)&&$i(ct,Ot,L),so(T,!0),at&&K){const jt=()=>{T.subTree=E0(T),K(at,T.subTree,T,B,null)};Tt?L.type.__asyncLoader().then(()=>!T.isUnmounted&&jt()):jt()}else{const jt=T.subTree=E0(T);m(null,jt,F,Y,T,B,H),L.el=jt.el}if(xt&&wn(xt,B),!Tt&&(ct=ut&&ut.onVnodeMounted)){const jt=L;wn(()=>$i(ct,Ot,jt),B)}(L.shapeFlag&256||Ot&&Bh(Ot.vnode)&&Ot.vnode.shapeFlag&256)&&T.a&&wn(T.a,B),T.isMounted=!0,L=F=Y=null}},tt=T.effect=new r1(J,()=>h1(q),T.scope),q=T.update=()=>tt.run();q.id=T.uid,so(T,!0),q()},N=(T,L,F)=>{L.component=T;const Y=T.vnode.props;T.vnode=L,T.next=null,pP(T,L.props,Y,F),wP(T,L.children,F),Bl(),Tb(),Ul()},W=(T,L,F,Y,B,H,rt,J,tt=!1)=>{const q=T&&T.children,ct=T?T.shapeFlag:0,at=L.children,{patchFlag:ut,shapeFlag:ft}=L;if(ut>0){if(ut&128){V(q,at,F,Y,B,H,rt,J,tt);return}else if(ut&256){j(q,at,F,Y,B,H,rt,J,tt);return}}ft&8?(ct&16&&ot(q,B,H),at!==q&&u(F,at)):ct&16?ft&16?V(q,at,F,Y,B,H,rt,J,tt):ot(q,B,H,!0):(ct&8&&u(F,""),ft&16&&C(at,F,Y,B,H,rt,J,tt))},j=(T,L,F,Y,B,H,rt,J,tt)=>{T=T||Ja,L=L||Ja;const q=T.length,ct=L.length,at=Math.min(q,ct);let ut;for(ut=0;ut<at;ut++){const ft=L[ut]=tt?_s(L[ut]):Wi(L[ut]);m(T[ut],ft,F,null,B,H,rt,J,tt)}q>ct?ot(T,B,H,!0,!1,at):C(L,F,Y,B,H,rt,J,tt,at)},V=(T,L,F,Y,B,H,rt,J,tt)=>{let q=0;const ct=L.length;let at=T.length-1,ut=ct-1;for(;q<=at&&q<=ut;){const ft=T[q],xt=L[q]=tt?_s(L[q]):Wi(L[q]);if(vo(ft,xt))m(ft,xt,F,null,B,H,rt,J,tt);else break;q++}for(;q<=at&&q<=ut;){const ft=T[at],xt=L[ut]=tt?_s(L[ut]):Wi(L[ut]);if(vo(ft,xt))m(ft,xt,F,null,B,H,rt,J,tt);else break;at--,ut--}if(q>at){if(q<=ut){const ft=ut+1,xt=ft<ct?L[ft].el:Y;for(;q<=ut;)m(null,L[q]=tt?_s(L[q]):Wi(L[q]),F,xt,B,H,rt,J,tt),q++}}else if(q>ut)for(;q<=at;)z(T[q],B,H,!0),q++;else{const ft=q,xt=q,Ot=new Map;for(q=xt;q<=ut;q++){const ue=L[q]=tt?_s(L[q]):Wi(L[q]);ue.key!=null&&Ot.set(ue.key,q)}let Tt,jt=0;const ye=ut-xt+1;let ce=!1,rs=0;const Vn=new Array(ye);for(q=0;q<ye;q++)Vn[q]=0;for(q=ft;q<=at;q++){const ue=T[q];if(jt>=ye){z(ue,B,H,!0);continue}let on;if(ue.key!=null)on=Ot.get(ue.key);else for(Tt=xt;Tt<=ut;Tt++)if(Vn[Tt-xt]===0&&vo(ue,L[Tt])){on=Tt;break}on===void 0?z(ue,B,H,!0):(Vn[on-xt]=q+1,on>=rs?rs=on:ce=!0,m(ue,L[on],F,null,B,H,rt,J,tt),jt++)}const sn=ce?xP(Vn):Ja;for(Tt=sn.length-1,q=ye-1;q>=0;q--){const ue=xt+q,on=L[ue],_a=ue+1<ct?L[ue+1].el:Y;Vn[q]===0?m(null,on,F,_a,B,H,rt,J,tt):ce&&(Tt<0||q!==sn[Tt]?Z(on,F,_a,2):Tt--)}}},Z=(T,L,F,Y,B=null)=>{const{el:H,type:rt,transition:J,children:tt,shapeFlag:q}=T;if(q&6){Z(T.component.subTree,L,F,Y);return}if(q&128){T.suspense.move(L,F,Y);return}if(q&64){rt.move(T,L,F,D);return}if(rt===pi){i(H,L,F);for(let at=0;at<tt.length;at++)Z(tt[at],L,F,Y);i(T.anchor,L,F);return}if(rt===S0){v(T,L,F);return}if(Y!==2&&q&1&&J)if(Y===0)J.beforeEnter(H),i(H,L,F),wn(()=>J.enter(H),B);else{const{leave:at,delayLeave:ut,afterLeave:ft}=J,xt=()=>i(H,L,F),Ot=()=>{at(H,()=>{xt(),ft&&ft()})};ut?ut(H,xt,Ot):Ot()}else i(H,L,F)},z=(T,L,F,Y=!1,B=!1)=>{const{type:H,props:rt,ref:J,children:tt,dynamicChildren:q,shapeFlag:ct,patchFlag:at,dirs:ut}=T;if(J!=null&&ay(J,null,F,T,!0),ct&256){L.ctx.deactivate(T);return}const ft=ct&1&&ut,xt=!Bh(T);let Ot;if(xt&&(Ot=rt&&rt.onVnodeBeforeUnmount)&&$i(Ot,L,T),ct&6)st(T.component,F,Y);else{if(ct&128){T.suspense.unmount(F,Y);return}ft&&ro(T,null,L,"beforeUnmount"),ct&64?T.type.remove(T,L,F,B,D,Y):q&&(H!==pi||at>0&&at&64)?ot(q,L,F,!1,!0):(H===pi&&at&384||!B&&ct&16)&&ot(tt,L,F),Y&&Q(T)}(xt&&(Ot=rt&&rt.onVnodeUnmounted)||ft)&&wn(()=>{Ot&&$i(Ot,L,T),ft&&ro(T,null,L,"unmounted")},F)},Q=T=>{const{type:L,el:F,anchor:Y,transition:B}=T;if(L===pi){nt(F,Y);return}if(L===S0){w(T);return}const H=()=>{r(F),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(T.shapeFlag&1&&B&&!B.persisted){const{leave:rt,delayLeave:J}=B,tt=()=>rt(F,H);J?J(T.el,H,tt):tt()}else H()},nt=(T,L)=>{let F;for(;T!==L;)F=h(T),r(T),T=F;r(L)},st=(T,L,F)=>{const{bum:Y,scope:B,update:H,subTree:rt,um:J}=T;Y&&x0(Y),B.stop(),H&&(H.active=!1,z(rt,T,L,F)),J&&wn(J,L),wn(()=>{T.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},ot=(T,L,F,Y=!1,B=!1,H=0)=>{for(let rt=H;rt<T.length;rt++)z(T[rt],L,F,Y,B)},$=T=>T.shapeFlag&6?$(T.component.subTree):T.shapeFlag&128?T.suspense.next():h(T.anchor||T.el),U=(T,L,F)=>{T==null?L._vnode&&z(L._vnode,null,null,!0):m(L._vnode||null,T,L,null,null,null,F),Tb(),QC(),L._vnode=T},D={p:m,um:z,m:Z,r:Q,mt:O,mc:C,pc:W,pbc:S,n:$,o:e};let X,K;return t&&([X,K]=t(D)),{render:U,hydrate:X,createApp:gP(U,X)}}function so({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function xS(e,t,n=!1){const i=e.children,r=t.children;if(bt(i)&&bt(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=_s(r[s]),a.el=o.el),n||xS(o,a)),a.type===qg&&(a.el=o.el)}}function xP(e){const t=e.slice(),n=[0];let i,r,s,o,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(r=n[n.length-1],e[r]<c){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<c?s=a+1:o=a;c<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const EP=e=>e.__isTeleport,pi=Symbol.for("v-fgt"),qg=Symbol.for("v-txt"),Ci=Symbol.for("v-cmt"),S0=Symbol.for("v-stc"),qc=[];let bi=null;function Wt(e=!1){qc.push(bi=e?null:[])}function TP(){qc.pop(),bi=qc[qc.length-1]||null}let du=1;function Nb(e){du+=e}function ES(e){return e.dynamicChildren=du>0?bi||Ja:null,TP(),du>0&&bi&&bi.push(e),e}function qt(e,t,n,i,r,s){return ES(G(e,t,n,i,r,s,!0))}function TS(e,t,n,i,r){return ES(ge(e,t,n,i,r,!0))}function ly(e){return e?e.__v_isVNode===!0:!1}function vo(e,t){return e.type===t.type&&e.key===t.key}const Kg="__vInternal",CS=({key:e})=>e??null,Vh=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ke(e)||nn(e)||St(e)?{i:Fn,r:e,k:t,f:!!n}:e:null);function G(e,t=null,n=null,i=0,r=null,s=e===pi?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&CS(t),ref:t&&Vh(t),scopeId:Hg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Fn};return a?(m1(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=ke(n)?8:16),du>0&&!o&&bi&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&bi.push(l),l}const ge=CP;function CP(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===sP)&&(e=Ci),ly(e)){const a=zs(e,t,!0);return n&&m1(a,n),du>0&&!s&&bi&&(a.shapeFlag&6?bi[bi.indexOf(e)]=a:bi.push(a)),a.patchFlag|=-2,a}if(DP(e)&&(e=e.__vccOpts),t){t=SP(t);let{class:a,style:l}=t;a&&!ke(a)&&(t.class=nr(a)),fe(l)&&(UC(l)&&!bt(l)&&(l=Le({},l)),t.style=Ke(l))}const o=ke(e)?1:Y4(e)?128:EP(e)?64:fe(e)?4:St(e)?2:0;return G(e,t,n,i,r,o,s,!0)}function SP(e){return e?UC(e)||Kg in e?Le({},e):e:null}function zs(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=e,a=t?MP(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&CS(a),ref:t&&t.ref?n&&r?bt(r)?r.concat(Vh(t)):[r,Vh(t)]:Vh(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==pi?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&zs(e.ssContent),ssFallback:e.ssFallback&&zs(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Se(e=" ",t=0){return ge(qg,null,e,t)}function de(e="",t=!1){return t?(Wt(),TS(Ci,null,e)):ge(Ci,null,e)}function Wi(e){return e==null||typeof e=="boolean"?ge(Ci):bt(e)?ge(pi,null,e.slice()):typeof e=="object"?_s(e):ge(qg,null,String(e))}function _s(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:zs(e)}function m1(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(bt(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),m1(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(Kg in t)?t._ctx=Fn:r===3&&Fn&&(Fn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else St(t)?(t={default:t,_ctx:Fn},n=32):(t=String(t),i&64?(n=16,t=[Se(t)]):n=8);e.children=t,e.shapeFlag|=n}function MP(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=nr([t.class,i.class]));else if(r==="style")t.style=Ke([t.style,i.style]);else if(zg(r)){const s=t[r],o=i[r];o&&s!==o&&!(bt(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function $i(e,t,n,i=null){si(e,t,7,[n,i])}const RP=pS();let IP=0;function AP(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||RP,s={uid:IP++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new LC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_S(i,r),emitsOptions:eS(i,r),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:i.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=D4.bind(null,s),e.ce&&e.ce(s),s}let Ge=null;const LP=()=>Ge||Fn;let p1,va,Db="__VUE_INSTANCE_SETTERS__";(va=Zp()[Db])||(va=Zp()[Db]=[]),va.push(e=>Ge=e),p1=e=>{va.length>1?va.forEach(t=>t(e)):va[0](e)};const dl=e=>{p1(e),e.scope.on()},Do=()=>{Ge&&Ge.scope.off(),p1(null)};function SS(e){return e.vnode.shapeFlag&4}let gu=!1;function OP(e,t=!1){gu=t;const{props:n,children:i}=e.vnode,r=SS(e);mP(e,n,r,t),_P(e,i);const s=r?kP(e,t):void 0;return gu=!1,s}function kP(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=c1(new Proxy(e.ctx,aP));const{setup:i}=n;if(i){const r=e.setupContext=i.length>1?FP(e):null;dl(e),Bl();const s=Ns(i,e,0,[e.props,r]);if(Ul(),Do(),SC(s)){if(s.then(Do,Do),t)return s.then(o=>{$b(e,o,t)}).catch(o=>{Vg(o,e,0)});e.asyncDep=s}else $b(e,s,t)}else MS(e,t)}function $b(e,t,n){St(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:fe(t)&&(e.setupState=ZC(t)),MS(e,n)}let zb;function MS(e,t,n){const i=e.type;if(!e.render){if(!t&&zb&&!i.render){const r=i.template||d1(e).template;if(r){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Le(Le({isCustomElement:s,delimiters:a},o),l);i.render=zb(r,c)}}e.render=i.render||Ti}dl(e),Bl(),lP(e),Ul(),Do()}function PP(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Cn(e,"get","$attrs"),t[n]}}))}function FP(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return PP(e)},slots:e.slots,emit:e.emit,expose:t}}function Jg(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(ZC(c1(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Zc)return Zc[n](e)},has(t,n){return n in t||n in Zc}}))}function NP(e,t=!0){return St(e)?e.displayName||e.name:e.name||t&&e.__name}function DP(e){return St(e)&&"__vccOpts"in e}const _i=(e,t)=>L4(e,t,gu);function Mr(e,t,n){const i=arguments.length;return i===2?fe(t)&&!bt(t)?ly(t)?ge(e,null,[t]):ge(e,t):ge(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&ly(n)&&(n=[n]),ge(e,t,n))}const $P=Symbol.for("v-scx"),zP=()=>Fr($P),WP="3.3.4",GP="http://www.w3.org/2000/svg",bo=typeof document<"u"?document:null,Wb=bo&&bo.createElement("template"),YP={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?bo.createElementNS(GP,e):bo.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>bo.createTextNode(e),createComment:e=>bo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>bo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{Wb.innerHTML=i?`<svg>${e}</svg>`:e;const a=Wb.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function BP(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function UP(e,t,n){const i=e.style,r=ke(n);if(n&&!r){if(t&&!ke(t))for(const s in t)n[s]==null&&cy(i,s,"");for(const s in n)cy(i,s,n[s])}else{const s=i.display;r?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const Gb=/\s*!important$/;function cy(e,t,n){if(bt(n))n.forEach(i=>cy(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=VP(e,t);Gb.test(n)?e.setProperty(Yl(i),n.replace(Gb,""),"important"):e[i]=n}}const Yb=["Webkit","Moz","ms"],M0={};function VP(e,t){const n=M0[t];if(n)return n;let i=er(t);if(i!=="filter"&&i in e)return M0[t]=i;i=Yg(i);for(let r=0;r<Yb.length;r++){const s=Yb[r]+i;if(s in e)return M0[t]=s}return t}const Bb="http://www.w3.org/1999/xlink";function XP(e,t,n,i,r){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Bb,t.slice(6,t.length)):e.setAttributeNS(Bb,t,n);else{const s=Kk(t);n==null||s&&!IC(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function HP(e,t,n,i,r,s,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,r,s),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=IC(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function jP(e,t,n,i){e.addEventListener(t,n,i)}function ZP(e,t,n,i){e.removeEventListener(t,n,i)}function qP(e,t,n,i,r=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[a,l]=KP(t);if(i){const c=s[t]=tF(i,r);jP(e,a,c,l)}else o&&(ZP(e,a,o,l),s[t]=void 0)}}const Ub=/(?:Once|Passive|Capture)$/;function KP(e){let t;if(Ub.test(e)){t={};let i;for(;i=e.match(Ub);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Yl(e.slice(2)),t]}let R0=0;const JP=Promise.resolve(),QP=()=>R0||(JP.then(()=>R0=0),R0=Date.now());function tF(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;si(eF(i,n.value),t,5,[i])};return n.value=e,n.attached=QP(),n}function eF(e,t){if(bt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const Vb=/^on[a-z]/,nF=(e,t,n,i,r=!1,s,o,a,l)=>{t==="class"?BP(e,i,r):t==="style"?UP(e,n,i):zg(t)?Q_(t)||qP(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):iF(e,t,i,r))?HP(e,t,i,s,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),XP(e,t,i,r))};function iF(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&Vb.test(t)&&St(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Vb.test(t)&&ke(n)?!1:t in e}const os="transition",mc="animation",y1=(e,{slots:t})=>Mr(H4,rF(e),t);y1.displayName="Transition";const RS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};y1.props=Le({},aS,RS);const oo=(e,t=[])=>{bt(e)?e.forEach(n=>n(...t)):e&&e(...t)},Xb=e=>e?bt(e)?e.some(t=>t.length>1):e.length>1:!1;function rF(e){const t={};for(const M in e)M in RS||(t[M]=e[M]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,g=sF(r),m=g&&g[0],_=g&&g[1],{onBeforeEnter:p,onEnter:y,onEnterCancelled:v,onLeave:w,onLeaveCancelled:x,onBeforeAppear:b=p,onAppear:E=y,onAppearCancelled:C=v}=t,I=(M,k,O)=>{ao(M,k?u:a),ao(M,k?c:o),O&&O()},S=(M,k)=>{M._isLeaving=!1,ao(M,f),ao(M,d),ao(M,h),k&&k()},R=M=>(k,O)=>{const A=M?E:y,P=()=>I(k,M,O);oo(A,[k,P]),Hb(()=>{ao(k,M?l:s),as(k,M?u:a),Xb(A)||jb(k,i,m,P)})};return Le(t,{onBeforeEnter(M){oo(p,[M]),as(M,s),as(M,o)},onBeforeAppear(M){oo(b,[M]),as(M,l),as(M,c)},onEnter:R(!1),onAppear:R(!0),onLeave(M,k){M._isLeaving=!0;const O=()=>S(M,k);as(M,f),lF(),as(M,h),Hb(()=>{M._isLeaving&&(ao(M,f),as(M,d),Xb(w)||jb(M,i,_,O))}),oo(w,[M,O])},onEnterCancelled(M){I(M,!1),oo(v,[M])},onAppearCancelled(M){I(M,!0),oo(C,[M])},onLeaveCancelled(M){S(M),oo(x,[M])}})}function sF(e){if(e==null)return null;if(fe(e))return[I0(e.enter),I0(e.leave)];{const t=I0(e);return[t,t]}}function I0(e){return Vk(e)}function as(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function ao(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Hb(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let oF=0;function jb(e,t,n,i){const r=e._endId=++oF,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=aF(e,t);if(!o)return i();const c=o+"end";let u=0;const f=()=>{e.removeEventListener(c,h),s()},h=d=>{d.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(c,h)}function aF(e,t){const n=window.getComputedStyle(e),i=g=>(n[g]||"").split(", "),r=i(`${os}Delay`),s=i(`${os}Duration`),o=Zb(r,s),a=i(`${mc}Delay`),l=i(`${mc}Duration`),c=Zb(a,l);let u=null,f=0,h=0;t===os?o>0&&(u=os,f=o,h=s.length):t===mc?c>0&&(u=mc,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?os:mc:null,h=u?u===os?s.length:l.length:0);const d=u===os&&/\b(transform|all)(,|$)/.test(i(`${os}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function Zb(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>qb(n)+qb(e[i])))}function qb(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function lF(){return document.body.offsetHeight}const Ya={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):pc(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),pc(e,!0),i.enter(e)):i.leave(e,()=>{pc(e,!1)}):pc(e,t))},beforeUnmount(e,{value:t}){pc(e,t)}};function pc(e,t){e.style.display=t?e._vod:"none"}const cF=Le({patchProp:nF},YP);let Kb;function uF(){return Kb||(Kb=vP(cF))}const fF=(...e)=>{const t=uF().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=hF(i);if(!r)return;const s=t._component;!St(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function hF(e){return ke(e)?document.querySelector(e):e}var dF=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const gF=Symbol();var Jb;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Jb||(Jb={}));function mF(){const e=Jk(!0),t=e.run(()=>HC({}));let n=[],i=[];const r=c1({install(s){r._a=s,s.provide(gF,r),s.config.globalProperties.$pinia=r,i.forEach(o=>n.push(o)),i=[]},use(s){return!this._a&&!dF?i.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Da=typeof window<"u";function pF(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Jt=Object.assign;function A0(e,t){const n={};for(const i in t){const r=t[i];n[i]=Mi(r)?r.map(e):e(r)}return n}const Kc=()=>{},Mi=Array.isArray,yF=/\/$/,_F=e=>e.replace(yF,"");function L0(e,t,n="/"){let i,r={},s="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),r=e(s)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=xF(i??t,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function wF(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Qb(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function vF(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&gl(t.matched[i],n.matched[r])&&IS(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function gl(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function IS(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!bF(e[n],t[n]))return!1;return!0}function bF(e,t){return Mi(e)?tx(e,t):Mi(t)?tx(t,e):e===t}function tx(e,t){return Mi(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function xF(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var mu;(function(e){e.pop="pop",e.push="push"})(mu||(mu={}));var Jc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Jc||(Jc={}));function EF(e){if(!e)if(Da){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),_F(e)}const TF=/^[^#]+#/;function CF(e,t){return e.replace(TF,"#")+t}function SF(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Qg=()=>({left:window.pageXOffset,top:window.pageYOffset});function MF(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=SF(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function ex(e,t){return(history.state?history.state.position-t:-1)+e}const uy=new Map;function RF(e,t){uy.set(e,t)}function IF(e){const t=uy.get(e);return uy.delete(e),t}let AF=()=>location.protocol+"//"+location.host;function AS(e,t){const{pathname:n,search:i,hash:r}=t,s=e.indexOf("#");if(s>-1){let a=r.includes(e.slice(s))?e.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),Qb(l,"")}return Qb(n,e)+i+r}function LF(e,t,n,i){let r=[],s=[],o=null;const a=({state:h})=>{const d=AS(e,location),g=n.value,m=t.value;let _=0;if(h){if(n.value=d,t.value=h,o&&o===g){o=null;return}_=m?h.position-m.position:0}else i(d);r.forEach(p=>{p(n.value,g,{delta:_,type:mu.pop,direction:_?_>0?Jc.forward:Jc.back:Jc.unknown})})};function l(){o=n.value}function c(h){r.push(h);const d=()=>{const g=r.indexOf(h);g>-1&&r.splice(g,1)};return s.push(d),d}function u(){const{history:h}=window;h.state&&h.replaceState(Jt({},h.state,{scroll:Qg()}),"")}function f(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function nx(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?Qg():null}}function OF(e){const{history:t,location:n}=window,i={value:AS(e,n)},r={value:t.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:AF()+e+l;try{t[u?"replaceState":"pushState"](c,"",h),r.value=c}catch(d){console.error(d),n[u?"replace":"assign"](h)}}function o(l,c){const u=Jt({},t.state,nx(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=Jt({},r.value,t.state,{forward:l,scroll:Qg()});s(u.current,u,!0);const f=Jt({},nx(i.value,l,null),{position:u.position+1},c);s(l,f,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function kF(e){e=EF(e);const t=OF(e),n=LF(e,t.state,t.location,t.replace);function i(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=Jt({location:"",base:e,go:i,createHref:CF.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function PF(e){return typeof e=="string"||e&&typeof e=="object"}function LS(e){return typeof e=="string"||typeof e=="symbol"}const ls={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},OS=Symbol("");var ix;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ix||(ix={}));function ml(e,t){return Jt(new Error,{type:e,[OS]:!0},t)}function hr(e,t){return e instanceof Error&&OS in e&&(t==null||!!(e.type&t))}const rx="[^/]+?",FF={sensitive:!1,strict:!1,start:!0,end:!0},NF=/[.+*?^${}()[\]/\\]/g;function DF(e,t){const n=Jt({},FF,t),i=[];let r=n.start?"^":"";const s=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const h=c[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(r+="/"),r+=h.value.replace(NF,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:m,optional:_,regexp:p}=h;s.push({name:g,repeatable:m,optional:_});const y=p||rx;if(y!==rx){d+=10;try{new RegExp(`(${y})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${y}): `+w.message)}}let v=m?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(v=_&&c.length<2?`(?:/${v})`:"/"+v),_&&(v+="?"),r+=v,d+=20,_&&(d+=-8),m&&(d+=-20),y===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const d=u[h]||"",g=s[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function l(c){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const d of h)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:_}=d,p=g in c?c[g]:"";if(Mi(p)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const y=Mi(p)?p.join("/"):p;if(!y)if(_)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=y}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function $F(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function zF(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const s=$F(i[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-i.length)===1){if(sx(i))return 1;if(sx(r))return-1}return r.length-i.length}function sx(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const WF={type:0,value:""},GF=/[a-zA-Z0-9_]/;function YF(e){if(!e)return[[]];if(e==="/")return[[WF]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function f(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):h();break;case 4:h(),n=i;break;case 1:l==="("?n=2:GF.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}function BF(e,t,n){const i=DF(YF(e.path),n),r=Jt(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function UF(e,t){const n=[],i=new Map;t=lx({strict:!1,end:!0,sensitive:!1},t);function r(u){return i.get(u)}function s(u,f,h){const d=!h,g=VF(u);g.aliasOf=h&&h.record;const m=lx(t,u),_=[g];if("alias"in u){const v=typeof u.alias=="string"?[u.alias]:u.alias;for(const w of v)_.push(Jt({},g,{components:h?h.record.components:g.components,path:w,aliasOf:h?h.record:g}))}let p,y;for(const v of _){const{path:w}=v;if(f&&w[0]!=="/"){const x=f.record.path,b=x[x.length-1]==="/"?"":"/";v.path=f.record.path+(w&&b+w)}if(p=BF(v,f,m),h?h.alias.push(p):(y=y||p,y!==p&&y.alias.push(p),d&&u.name&&!ax(p)&&o(u.name)),g.children){const x=g.children;for(let b=0;b<x.length;b++)s(x[b],p,h&&h.children[b])}h=h||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&l(p)}return y?()=>{o(y)}:Kc}function o(u){if(LS(u)){const f=i.get(u);f&&(i.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let f=0;for(;f<n.length&&zF(u,n[f])>=0&&(u.record.path!==n[f].record.path||!kS(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!ax(u)&&i.set(u.record.name,u)}function c(u,f){let h,d={},g,m;if("name"in u&&u.name){if(h=i.get(u.name),!h)throw ml(1,{location:u});m=h.record.name,d=Jt(ox(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),u.params&&ox(u.params,h.keys.map(y=>y.name))),g=h.stringify(d)}else if("path"in u)g=u.path,h=n.find(y=>y.re.test(g)),h&&(d=h.parse(g),m=h.record.name);else{if(h=f.name?i.get(f.name):n.find(y=>y.re.test(f.path)),!h)throw ml(1,{location:u,currentLocation:f});m=h.record.name,d=Jt({},f.params,u.params),g=h.stringify(d)}const _=[];let p=h;for(;p;)_.unshift(p.record),p=p.parent;return{name:m,path:g,params:d,matched:_,meta:HF(_)}}return e.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function ox(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function VF(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:XF(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function XF(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function ax(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function HF(e){return e.reduce((t,n)=>Jt(t,n.meta),{})}function lx(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function kS(e,t){return t.children.some(n=>n===e||kS(e,n))}const PS=/#/g,jF=/&/g,ZF=/\//g,qF=/=/g,KF=/\?/g,FS=/\+/g,JF=/%5B/g,QF=/%5D/g,NS=/%5E/g,tN=/%60/g,DS=/%7B/g,eN=/%7C/g,$S=/%7D/g,nN=/%20/g;function _1(e){return encodeURI(""+e).replace(eN,"|").replace(JF,"[").replace(QF,"]")}function iN(e){return _1(e).replace(DS,"{").replace($S,"}").replace(NS,"^")}function fy(e){return _1(e).replace(FS,"%2B").replace(nN,"+").replace(PS,"%23").replace(jF,"%26").replace(tN,"`").replace(DS,"{").replace($S,"}").replace(NS,"^")}function rN(e){return fy(e).replace(qF,"%3D")}function sN(e){return _1(e).replace(PS,"%23").replace(KF,"%3F")}function oN(e){return e==null?"":sN(e).replace(ZF,"%2F")}function od(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function aN(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(FS," "),o=s.indexOf("="),a=od(o<0?s:s.slice(0,o)),l=o<0?null:od(s.slice(o+1));if(a in t){let c=t[a];Mi(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function cx(e){let t="";for(let n in e){const i=e[n];if(n=rN(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Mi(i)?i.map(s=>s&&fy(s)):[i&&fy(i)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function lN(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Mi(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const cN=Symbol(""),ux=Symbol(""),w1=Symbol(""),zS=Symbol(""),hy=Symbol("");function yc(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function ws(e,t,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=f=>{f===!1?a(ml(4,{from:n,to:t})):f instanceof Error?a(f):PF(f)?a(ml(2,{from:t,to:f})):(s&&i.enterCallbacks[r]===s&&typeof f=="function"&&s.push(f),o())},c=e.call(i&&i.instances[r],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(f=>a(f))})}function O0(e,t,n,i){const r=[];for(const s of e)for(const o in s.components){let a=s.components[o];if(!(t!=="beforeRouteEnter"&&!s.instances[o]))if(uN(a)){const c=(a.__vccOpts||a)[t];c&&r.push(ws(c,n,i,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=pF(c)?c.default:c;s.components[o]=u;const h=(u.__vccOpts||u)[t];return h&&ws(h,n,i,s,o)()}))}}return r}function uN(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function fx(e){const t=Fr(w1),n=Fr(zS),i=_i(()=>t.resolve(Pr(e.to))),r=_i(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(gl.bind(null,u));if(h>-1)return h;const d=hx(l[c-2]);return c>1&&hx(u)===d&&f[f.length-1].path!==d?f.findIndex(gl.bind(null,l[c-2])):h}),s=_i(()=>r.value>-1&&gN(n.params,i.value.params)),o=_i(()=>r.value>-1&&r.value===n.matched.length-1&&IS(n.params,i.value.params));function a(l={}){return dN(l)?t[Pr(e.replace)?"replace":"push"](Pr(e.to)).catch(Kc):Promise.resolve()}return{route:i,href:_i(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const fN=Hu({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:fx,setup(e,{slots:t}){const n=Ug(fx(e)),{options:i}=Fr(w1),r=_i(()=>({[dx(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[dx(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:Mr("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),hN=fN;function dN(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function gN(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!Mi(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function hx(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const dx=(e,t,n)=>e??t??n,mN=Hu({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=Fr(hy),r=_i(()=>e.route||i.value),s=Fr(ux,0),o=_i(()=>{let c=Pr(s);const{matched:u}=r.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=_i(()=>r.value.matched[o.value]);Uh(ux,_i(()=>o.value+1)),Uh(cN,a),Uh(hy,r);const l=HC();return Yh(()=>[l.value,a.value,e.name],([c,u,f],[h,d,g])=>{u&&(u.instances[f]=c,d&&d!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!gl(u,d)||!h)&&(u.enterCallbacks[f]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=r.value,u=e.name,f=a.value,h=f&&f.components[u];if(!h)return gx(n.default,{Component:h,route:c});const d=f.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,_=Mr(h,Jt({},g,t,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return gx(n.default,{Component:_,route:c})||_}}});function gx(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const WS=mN;function pN(e){const t=UF(e.routes,e),n=e.parseQuery||aN,i=e.stringifyQuery||cx,r=e.history,s=yc(),o=yc(),a=yc(),l=M4(ls);let c=ls;Da&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=A0.bind(null,$=>""+$),f=A0.bind(null,oN),h=A0.bind(null,od);function d($,U){let D,X;return LS($)?(D=t.getRecordMatcher($),X=U):X=$,t.addRoute(X,D)}function g($){const U=t.getRecordMatcher($);U&&t.removeRoute(U)}function m(){return t.getRoutes().map($=>$.record)}function _($){return!!t.getRecordMatcher($)}function p($,U){if(U=Jt({},U||l.value),typeof $=="string"){const F=L0(n,$,U.path),Y=t.resolve({path:F.path},U),B=r.createHref(F.fullPath);return Jt(F,Y,{params:h(Y.params),hash:od(F.hash),redirectedFrom:void 0,href:B})}let D;if("path"in $)D=Jt({},$,{path:L0(n,$.path,U.path).path});else{const F=Jt({},$.params);for(const Y in F)F[Y]==null&&delete F[Y];D=Jt({},$,{params:f(F)}),U.params=f(U.params)}const X=t.resolve(D,U),K=$.hash||"";X.params=u(h(X.params));const T=wF(i,Jt({},$,{hash:iN(K),path:X.path})),L=r.createHref(T);return Jt({fullPath:T,hash:K,query:i===cx?lN($.query):$.query||{}},X,{redirectedFrom:void 0,href:L})}function y($){return typeof $=="string"?L0(n,$,l.value.path):Jt({},$)}function v($,U){if(c!==$)return ml(8,{from:U,to:$})}function w($){return E($)}function x($){return w(Jt(y($),{replace:!0}))}function b($){const U=$.matched[$.matched.length-1];if(U&&U.redirect){const{redirect:D}=U;let X=typeof D=="function"?D($):D;return typeof X=="string"&&(X=X.includes("?")||X.includes("#")?X=y(X):{path:X},X.params={}),Jt({query:$.query,hash:$.hash,params:"path"in X?{}:$.params},X)}}function E($,U){const D=c=p($),X=l.value,K=$.state,T=$.force,L=$.replace===!0,F=b(D);if(F)return E(Jt(y(F),{state:typeof F=="object"?Jt({},K,F.state):K,force:T,replace:L}),U||D);const Y=D;Y.redirectedFrom=U;let B;return!T&&vF(i,X,D)&&(B=ml(16,{to:Y,from:X}),Z(X,X,!0,!1)),(B?Promise.resolve(B):S(Y,X)).catch(H=>hr(H)?hr(H,2)?H:V(H):W(H,Y,X)).then(H=>{if(H){if(hr(H,2))return E(Jt({replace:L},y(H.to),{state:typeof H.to=="object"?Jt({},K,H.to.state):K,force:T}),U||Y)}else H=M(Y,X,!0,L,K);return R(Y,X,H),H})}function C($,U){const D=v($,U);return D?Promise.reject(D):Promise.resolve()}function I($){const U=nt.values().next().value;return U&&typeof U.runWithContext=="function"?U.runWithContext($):$()}function S($,U){let D;const[X,K,T]=yN($,U);D=O0(X.reverse(),"beforeRouteLeave",$,U);for(const F of X)F.leaveGuards.forEach(Y=>{D.push(ws(Y,$,U))});const L=C.bind(null,$,U);return D.push(L),ot(D).then(()=>{D=[];for(const F of s.list())D.push(ws(F,$,U));return D.push(L),ot(D)}).then(()=>{D=O0(K,"beforeRouteUpdate",$,U);for(const F of K)F.updateGuards.forEach(Y=>{D.push(ws(Y,$,U))});return D.push(L),ot(D)}).then(()=>{D=[];for(const F of T)if(F.beforeEnter)if(Mi(F.beforeEnter))for(const Y of F.beforeEnter)D.push(ws(Y,$,U));else D.push(ws(F.beforeEnter,$,U));return D.push(L),ot(D)}).then(()=>($.matched.forEach(F=>F.enterCallbacks={}),D=O0(T,"beforeRouteEnter",$,U),D.push(L),ot(D))).then(()=>{D=[];for(const F of o.list())D.push(ws(F,$,U));return D.push(L),ot(D)}).catch(F=>hr(F,8)?F:Promise.reject(F))}function R($,U,D){a.list().forEach(X=>I(()=>X($,U,D)))}function M($,U,D,X,K){const T=v($,U);if(T)return T;const L=U===ls,F=Da?history.state:{};D&&(X||L?r.replace($.fullPath,Jt({scroll:L&&F&&F.scroll},K)):r.push($.fullPath,K)),l.value=$,Z($,U,D,L),V()}let k;function O(){k||(k=r.listen(($,U,D)=>{if(!st.listening)return;const X=p($),K=b(X);if(K){E(Jt(K,{replace:!0}),X).catch(Kc);return}c=X;const T=l.value;Da&&RF(ex(T.fullPath,D.delta),Qg()),S(X,T).catch(L=>hr(L,12)?L:hr(L,2)?(E(L.to,X).then(F=>{hr(F,20)&&!D.delta&&D.type===mu.pop&&r.go(-1,!1)}).catch(Kc),Promise.reject()):(D.delta&&r.go(-D.delta,!1),W(L,X,T))).then(L=>{L=L||M(X,T,!1),L&&(D.delta&&!hr(L,8)?r.go(-D.delta,!1):D.type===mu.pop&&hr(L,20)&&r.go(-1,!1)),R(X,T,L)}).catch(Kc)}))}let A=yc(),P=yc(),N;function W($,U,D){V($);const X=P.list();return X.length?X.forEach(K=>K($,U,D)):console.error($),Promise.reject($)}function j(){return N&&l.value!==ls?Promise.resolve():new Promise(($,U)=>{A.add([$,U])})}function V($){return N||(N=!$,O(),A.list().forEach(([U,D])=>$?D($):U()),A.reset()),$}function Z($,U,D,X){const{scrollBehavior:K}=e;if(!Da||!K)return Promise.resolve();const T=!D&&IF(ex($.fullPath,0))||(X||!D)&&history.state&&history.state.scroll||null;return KC().then(()=>K($,U,T)).then(L=>L&&MF(L)).catch(L=>W(L,$,U))}const z=$=>r.go($);let Q;const nt=new Set,st={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,hasRoute:_,getRoutes:m,resolve:p,options:e,push:w,replace:x,go:z,back:()=>z(-1),forward:()=>z(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:P.add,isReady:j,install($){const U=this;$.component("RouterLink",hN),$.component("RouterView",WS),$.config.globalProperties.$router=U,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>Pr(l)}),Da&&!Q&&l.value===ls&&(Q=!0,w(r.location).catch(K=>{}));const D={};for(const K in ls)Object.defineProperty(D,K,{get:()=>l.value[K],enumerable:!0});$.provide(w1,U),$.provide(zS,YC(D)),$.provide(hy,l);const X=$.unmount;nt.add($),$.unmount=function(){nt.delete($),nt.size<1&&(c=ls,k&&k(),k=null,l.value=ls,Q=!1,N=!1),X()}}};function ot($){return $.reduce((U,D)=>U.then(()=>I(D)),Promise.resolve())}return st}function yN(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(c=>gl(c,a))?i.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>gl(c,l))||r.push(l))}return[n,i,r]}const _N=Hu({__name:"App",setup(e){return(t,n)=>(Wt(),TS(Pr(WS)))}}),wN="modulepreload",vN=function(e){return"/"+e},mx={},px=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=vN(s),s in mx)return;mx[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const f=r[u];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":wN,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};const bN="/assets/destination-point-63b16bda.svg",xN="/assets/starting-point-c9a465c9.svg";class EN{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Kr=EN,pl={PROPERTYCHANGE:"propertychange"};class TN{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const v1=TN;function CN(e,t,n){let i,r;n=n||Ws;let s=0,o=e.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+n(e[i],t),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function Ws(e,t){return e>t?1:e<t?-1:0}function b1(e,t,n){if(e[0]<=t)return 0;const i=e.length;if(t<=e[i-1])return i-1;if(typeof n=="function"){for(let r=1;r<i;++r){const s=e[r];if(s===t)return r;if(s<t)return n(t,e[r-1],s)>0?r-1:r}return i-1}if(n>0){for(let r=1;r<i;++r)if(e[r]<t)return r-1;return i-1}if(n<0){for(let r=1;r<i;++r)if(e[r]<=t)return r;return i-1}for(let r=1;r<i;++r){if(e[r]==t)return r;if(e[r]<t)return e[r-1]-t<t-e[r]?r-1:r}return i-1}function SN(e,t,n){for(;t<n;){const i=e[t];e[t]=e[n],e[n]=i,++t,--n}}function Nr(e,t){const n=Array.isArray(t)?t:[t],i=n.length;for(let r=0;r<i;r++)e[e.length]=n[r]}function Zs(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function MN(e,t,n){const i=t||Ws;return e.every(function(r,s){if(s===0)return!0;const o=i(e[s-1],r);return!(o>0||n&&o===0)})}function pu(){return!0}function tm(){return!1}function yl(){}function RN(e){let t=!1,n,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==r||!Zs(s,i))&&(t=!0,r=this,i=s,n=e.apply(this,arguments)),n}}function IN(e){function t(){let n;try{n=e()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return t()}function ju(e){for(const t in e)delete e[t]}function _l(e){let t;for(t in e)return!1;return!t}class AN extends v1{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const i=this.listeners_||(this.listeners_={}),r=i[t]||(i[t]=[]);r.includes(n)||r.push(n)}dispatchEvent(t){const n=typeof t=="string",i=n?t:t.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=n?new Kr(t):t;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,yl);delete o[i]}return l}disposeInternal(){this.listeners_&&ju(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){const i=this.listeners_&&this.listeners_[t];if(i){const r=i.indexOf(n);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[r]=yl,++this.pendingRemovals_[t]):(i.splice(r,1),i.length===0&&delete this.listeners_[t]))}}}const Zu=AN,Et={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ft(e,t,n,i,r){if(i&&i!==e&&(n=n.bind(i)),r){const o=n;n=function(){e.removeEventListener(t,n),o.apply(this,arguments)}}const s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function ad(e,t,n,i){return Ft(e,t,n,i,!0)}function ee(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),ju(e))}class em extends Zu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Et.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const i=t.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ft(this,t[s],n);return r}return Ft(this,t,n)}onceInternal(t,n){let i;if(Array.isArray(t)){const r=t.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=ad(this,t[s],n)}else i=ad(this,t,n);return n.ol_key=i,i}unInternal(t,n){const i=n.ol_key;if(i)LN(i);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)}}em.prototype.on;em.prototype.once;em.prototype.un;function LN(e){if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)ee(e[t]);else ee(e)}const GS=em;function vt(){throw new Error("Unimplemented abstract method.")}let ON=0;function Vt(e){return e.ol_uid||(e.ol_uid=String(++ON))}class yx extends Kr{constructor(t,n,i){super(t),this.key=n,this.oldValue=i}}class kN extends GS{constructor(t){super(),this.on,this.once,this.un,Vt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new yx(i,t,n)),i=pl.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new yx(i,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,i){const r=this.values_||(this.values_={});if(i)r[t]=n;else{const s=r[t];r[t]=n,s!==n&&this.notify(t,s)}}setProperties(t,n){for(const i in t)this.set(i,t[i],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],_l(this.values_)&&(this.values_=null),n||this.notify(t,i)}}}const Fi=kN,bn={ADD:"add",REMOVE:"remove"},_x={LENGTH:"length"};class qf extends Kr{constructor(t,n,i){super(t),this.element=n,this.index=i}}class PN extends Fi{constructor(t,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let n=0,i=t.length;n<i;++n)this.push(t[n]);return this}forEach(t){const n=this.array_;for(let i=0,r=n.length;i<r;++i)t(n[i],i,n)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(_x.LENGTH)}insertAt(t,n){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new qf(bn.ADD,n,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const n=this.getLength();return this.insertAt(n,t),this.getLength()}remove(t){const n=this.array_;for(let i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new qf(bn.REMOVE,n,t)),n}setAt(t,n){const i=this.getLength();if(t>=i){this.insertAt(t,n);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n,t);const r=this.array_[t];this.array_[t]=n,this.dispatchEvent(new qf(bn.REMOVE,r,t)),this.dispatchEvent(new qf(bn.ADD,n,t))}updateLength_(){this.set(_x.LENGTH,this.array_.length)}assertUnique_(t,n){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==n)throw new Error("Duplicate item added to a unique collection")}}const Hi=PN,Gs=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FN=Gs.includes("firefox"),NN=Gs.includes("safari")&&!Gs.includes("chrom");NN&&(Gs.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Gs));const DN=Gs.includes("webkit")&&!Gs.includes("edge"),YS=Gs.includes("macintosh"),BS=typeof devicePixelRatio<"u"?devicePixelRatio:1,x1=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,US=typeof Image<"u"&&Image.prototype.decode,VS=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}();function $t(e,t){if(!e)throw new Error(t)}new Array(6);function Si(){return[1,0,0,1,0,0]}function $N(e,t,n,i,r,s,o){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=s,e[5]=o,e}function zN(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Te(e,t){const n=t[0],i=t[1];return t[0]=e[0]*n+e[2]*i+e[4],t[1]=e[1]*n+e[3]*i+e[5],t}function WN(e,t,n){return $N(e,t,0,0,n,0,0)}function Ri(e,t,n,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return e[0]=i*c,e[1]=r*l,e[2]=-i*l,e[3]=r*c,e[4]=o*i*c-a*i*l+t,e[5]=o*r*l+a*r*c+n,e}function nm(e,t){const n=GN(t);$t(n!==0,"Transformation matrix cannot be inverted");const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return e[0]=o/n,e[1]=-r/n,e[2]=-s/n,e[3]=i/n,e[4]=(s*l-o*a)/n,e[5]=-(i*l-r*a)/n,e}function GN(e){return e[0]*e[3]-e[1]*e[2]}let wx;function E1(e){const t="matrix("+e.join(", ")+")";if(x1)return t;const n=wx||(wx=document.createElement("div"));return n.style.transform=t,n.style.transform}const We={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function vx(e){const t=oi();for(let n=0,i=e.length;n<i;++n)Qc(t,e[n]);return t}function T1(e,t,n){return n?(n[0]=e[0]-t,n[1]=e[1]-t,n[2]=e[2]+t,n[3]=e[3]+t,n):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function XS(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function ca(e,t,n){let i,r;return t<e[0]?i=e[0]-t:e[2]<t?i=t-e[2]:i=0,n<e[1]?r=e[1]-n:e[3]<n?r=n-e[3]:r=0,i*i+r*r}function qu(e,t){return C1(e,t[0],t[1])}function As(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function C1(e,t,n){return e[0]<=t&&t<=e[2]&&e[1]<=n&&n<=e[3]}function dy(e,t){const n=e[0],i=e[1],r=e[2],s=e[3],o=t[0],a=t[1];let l=We.UNKNOWN;return o<n?l=l|We.LEFT:o>r&&(l=l|We.RIGHT),a<i?l=l|We.BELOW:a>s&&(l=l|We.ABOVE),l===We.UNKNOWN&&(l=We.INTERSECTING),l}function oi(){return[1/0,1/0,-1/0,-1/0]}function Ys(e,t,n,i,r){return r?(r[0]=e,r[1]=t,r[2]=n,r[3]=i,r):[e,t,n,i]}function Ku(e){return Ys(1/0,1/0,-1/0,-1/0,e)}function YN(e,t){const n=e[0],i=e[1];return Ys(n,i,n,i,t)}function HS(e,t,n,i,r){const s=Ku(r);return ZS(s,e,t,n,i)}function yu(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function jS(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function Qc(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function ZS(e,t,n,i,r){for(;n<i;n+=r)BN(e,t[n],t[n+1]);return e}function BN(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)}function qS(e,t){let n;return n=t(im(e)),n||(n=t(rm(e)),n)||(n=t(sm(e)),n)||(n=t(ua(e)),n)?n:!1}function gy(e){let t=0;return Vl(e)||(t=Qt(e)*Wn(e)),t}function im(e){return[e[0],e[1]]}function rm(e){return[e[2],e[1]]}function Zo(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function UN(e,t){let n;if(t==="bottom-left")n=im(e);else if(t==="bottom-right")n=rm(e);else if(t==="top-left")n=ua(e);else if(t==="top-right")n=sm(e);else throw new Error("Invalid corner");return n}function my(e,t,n,i,r){const[s,o,a,l,c,u,f,h]=py(e,t,n,i);return Ys(Math.min(s,a,c,f),Math.min(o,l,u,h),Math.max(s,a,c,f),Math.max(o,l,u,h),r)}function py(e,t,n,i){const r=t*i[0]/2,s=t*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,c=r*a,u=s*o,f=s*a,h=e[0],d=e[1];return[h-l+f,d-c-u,h-l-f,d-c+u,h+l-f,d+c+u,h+l+f,d+c-u,h-l+f,d-c-u]}function Wn(e){return e[3]-e[1]}function nl(e,t,n){const i=n||oi();return hn(e,t)?(e[0]>t[0]?i[0]=e[0]:i[0]=t[0],e[1]>t[1]?i[1]=e[1]:i[1]=t[1],e[2]<t[2]?i[2]=e[2]:i[2]=t[2],e[3]<t[3]?i[3]=e[3]:i[3]=t[3]):Ku(i),i}function ua(e){return[e[0],e[3]]}function sm(e){return[e[2],e[3]]}function Qt(e){return e[2]-e[0]}function hn(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Vl(e){return e[2]<e[0]||e[3]<e[1]}function VN(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function XN(e,t){const n=(e[2]-e[0])/2*(t-1),i=(e[3]-e[1])/2*(t-1);e[0]-=n,e[2]+=n,e[1]-=i,e[3]+=i}function HN(e,t,n){let i=!1;const r=dy(e,t),s=dy(e,n);if(r===We.INTERSECTING||s===We.INTERSECTING)i=!0;else{const o=e[0],a=e[1],l=e[2],c=e[3],u=t[0],f=t[1],h=n[0],d=n[1],g=(d-f)/(h-u);let m,_;s&We.ABOVE&&!(r&We.ABOVE)&&(m=h-(d-c)/g,i=m>=o&&m<=l),!i&&s&We.RIGHT&&!(r&We.RIGHT)&&(_=d-(h-l)*g,i=_>=a&&_<=c),!i&&s&We.BELOW&&!(r&We.BELOW)&&(m=h-(d-a)/g,i=m>=o&&m<=l),!i&&s&We.LEFT&&!(r&We.LEFT)&&(_=d-(h-o)*g,i=_>=a&&_<=c)}return i}function KS(e,t){const n=t.getExtent(),i=Zo(e);if(t.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const r=Qt(n),o=Math.floor((i[0]-n[0])/r)*r;e[0]-=o,e[2]-=o}return e}function jN(e,t){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];KS(e,t);const i=Qt(n);if(Qt(e)>i)return[[n[0],e[1],n[2],e[3]]];if(e[0]<n[0])return[[e[0]+i,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-i,e[3]]]}return[e]}function Ae(e,t,n){return Math.min(Math.max(e,t),n)}function ZN(e,t,n,i,r,s){const o=r-n,a=s-i;if(o!==0||a!==0){const l=((e-n)*o+(t-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return $o(e,t,n,i)}function $o(e,t,n,i){const r=n-e,s=i-t;return r*r+s*s}function qN(e){const t=e.length;for(let i=0;i<t;i++){let r=i,s=Math.abs(e[i][i]);for(let a=i+1;a<t;a++){const l=Math.abs(e[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=e[r];e[r]=e[i],e[i]=o;for(let a=i+1;a<t;a++){const l=-e[a][i]/e[i][i];for(let c=i;c<t+1;c++)i==c?e[a][c]=0:e[a][c]+=l*e[i][c]}}const n=new Array(t);for(let i=t-1;i>=0;i--){n[i]=e[i][t]/e[i][i];for(let r=i-1;r>=0;r--)e[r][t]-=e[r][i]*n[i]}return n}function Xh(e){return e*Math.PI/180}function zo(e,t){const n=e%t;return n*t<0?n+t:n}function Pn(e,t,n){return e+n*(t-e)}function om(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function Kf(e,t){return Math.floor(om(e,t))}function Jf(e,t){return Math.ceil(om(e,t))}const KN=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,JN=/^([a-z]*)$|^hsla?\(.*\)$/i;function JS(e){return typeof e=="string"?e:QS(e)}function QN(e){const t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);const n=getComputedStyle(t).color;return document.body.removeChild(t),n}return""}const tD=function(){const t={};let n=0;return function(i){let r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){let s=0;for(const o in t)s++&3||(delete t[o],--n)}r=eD(i),t[i]=r,++n}return r}}();function ld(e){return Array.isArray(e)?e:tD(e)}function eD(e){let t,n,i,r,s;if(JN.exec(e)&&(e=QN(e)),KN.exec(e)){const o=e.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(e.substr(1+0*a,a),16),n=parseInt(e.substr(1+1*a,a),16),i=parseInt(e.substr(1+2*a,a),16),l?r=parseInt(e.substr(1+3*a,a),16):r=255,a==1&&(t=(t<<4)+t,n=(n<<4)+n,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[t,n,i,r/255]}else if(e.startsWith("rgba("))s=e.slice(5,-1).split(",").map(Number),bx(s);else if(e.startsWith("rgb("))s=e.slice(4,-1).split(",").map(Number),s.push(1),bx(s);else throw new Error("Invalid color");return s}function bx(e){return e[0]=Ae(e[0]+.5|0,0,255),e[1]=Ae(e[1]+.5|0,0,255),e[2]=Ae(e[2]+.5|0,0,255),e[3]=Ae(e[3],0,1),e}function QS(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let n=e[1];n!=(n|0)&&(n=n+.5|0);let i=e[2];i!=(i|0)&&(i=i+.5|0);const r=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+n+","+i+","+r+")"}class nD{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const n in this.cache_){const i=this.cache_[n];!(t++&3)&&!i.hasListener()&&(delete this.cache_[n],--this.cacheSize_)}}}get(t,n,i){const r=xx(t,n,i);return r in this.cache_?this.cache_[r]:null}set(t,n,i,r){const s=xx(t,n,i);this.cache_[s]=r,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function xx(e,t,n){const i=n?JS(n):"null";return t+":"+e+":"+i}const cd=new nD,Kt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class iD extends Fi{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const n=Object.assign({},t);typeof t.properties=="object"&&(delete n.properties,Object.assign(n,t.properties)),n[Kt.OPACITY]=t.opacity!==void 0?t.opacity:1,$t(typeof n[Kt.OPACITY]=="number","Layer opacity must be a number"),n[Kt.VISIBLE]=t.visible!==void 0?t.visible:!0,n[Kt.Z_INDEX]=t.zIndex,n[Kt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[Kt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[Kt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[Kt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=Ae(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(t){return vt()}getLayerStatesArray(t){return vt()}getExtent(){return this.get(Kt.EXTENT)}getMaxResolution(){return this.get(Kt.MAX_RESOLUTION)}getMinResolution(){return this.get(Kt.MIN_RESOLUTION)}getMinZoom(){return this.get(Kt.MIN_ZOOM)}getMaxZoom(){return this.get(Kt.MAX_ZOOM)}getOpacity(){return this.get(Kt.OPACITY)}getSourceState(){return vt()}getVisible(){return this.get(Kt.VISIBLE)}getZIndex(){return this.get(Kt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Kt.EXTENT,t)}setMaxResolution(t){this.set(Kt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Kt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Kt.MAX_ZOOM,t)}setMinZoom(t){this.set(Kt.MIN_ZOOM,t)}setOpacity(t){$t(typeof t=="number","Layer opacity must be a number"),this.set(Kt.OPACITY,t)}setVisible(t){this.set(Kt.VISIBLE,t)}setZIndex(t){this.set(Kt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const tM=iD,Ki={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ie={ANIMATING:0,INTERACTING:1},ci={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},rD=42,S1=256,wl={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class sD{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||wl[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const eM=sD,Ju=6378137,Ba=Math.PI*Ju,oD=[-Ba,-Ba,Ba,Ba],aD=[-180,-85,180,85],Qf=Ju*Math.log(Math.tan(Math.PI/2));class ba extends eM{constructor(t){super({code:t,units:"m",extent:oD,global:!0,worldExtent:aD,getPointResolution:function(n,i){return n/Math.cosh(i[1]/Ju)}})}}const Ex=[new ba("EPSG:3857"),new ba("EPSG:102100"),new ba("EPSG:102113"),new ba("EPSG:900913"),new ba("http://www.opengis.net/def/crs/EPSG/0/3857"),new ba("http://www.opengis.net/gml/srs/epsg.xml#3857")];function lD(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let r=0;r<i;r+=n){t[r]=Ba*e[r]/180;let s=Ju*Math.log(Math.tan(Math.PI*(+e[r+1]+90)/360));s>Qf?s=Qf:s<-Qf&&(s=-Qf),t[r+1]=s}return t}function cD(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let r=0;r<i;r+=n)t[r]=180*e[r]/Ba,t[r+1]=360*Math.atan(Math.exp(e[r+1]/Ju))/Math.PI-90;return t}const uD=6378137,Tx=[-180,-90,180,90],fD=Math.PI*uD/180;class lo extends eM{constructor(t,n){super({code:t,units:"degrees",extent:Tx,axisOrientation:n,global:!0,metersPerUnit:fD,worldExtent:Tx})}}const Cx=[new lo("CRS:84"),new lo("EPSG:4326","neu"),new lo("urn:ogc:def:crs:OGC:1.3:CRS84"),new lo("urn:ogc:def:crs:OGC:2:84"),new lo("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new lo("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new lo("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let yy={};function hD(e){return yy[e]||yy[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function dD(e,t){yy[e]=t}let il={};function ud(e,t,n){const i=e.getCode(),r=t.getCode();i in il||(il[i]={}),il[i][r]=n}function gD(e,t){let n;return e in il&&t in il[e]&&(n=il[e][t]),n}function Sx(e,t,n){const i=n!==void 0?e.toFixed(n):""+e;let r=i.indexOf(".");return r=r===-1?i.length:r,r>t?i:new Array(1+t-r).join("0")+i}function mD(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function Mx(e,t,n){const i=zo(t+180,360)-180,r=Math.abs(3600*i),s=n||0;let o=Math.floor(r/3600),a=Math.floor((r-o*3600)/60),l=om(r-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"°";return(a!==0||l!==0)&&(c+=" "+Sx(a,2)+"′"),l!==0&&(c+=" "+Sx(l,2,s)+"″"),i!==0&&(c+=" "+e.charAt(i<0?1:0)),c}function fd(e,t){let n=!0;for(let i=e.length-1;i>=0;--i)if(e[i]!=t[i]){n=!1;break}return n}function M1(e,t){const n=Math.cos(t),i=Math.sin(t),r=e[0]*n-e[1]*i,s=e[1]*n+e[0]*i;return e[0]=r,e[1]=s,e}function pD(e,t){return e[0]*=t,e[1]*=t,e}function yD(e,t){return e?Mx("NS",e[1],t)+" "+Mx("EW",e[0],t):""}function nM(e,t){if(t.canWrapX()){const n=Qt(t.getExtent()),i=_D(e,t,n);i&&(e[0]-=i*n)}return e}function _D(e,t,n){const i=t.getExtent();let r=0;return t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])&&(n=n||Qt(i),r=Math.floor((e[0]-i[0])/n)),r}const wD=63710088e-1;function Rx(e,t,n){n=n||wD;const i=Xh(e[1]),r=Xh(t[1]),s=(r-i)/2,o=Xh(t[0]-e[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const iM={info:1,warn:2,error:3,none:4};let vD=iM.info;function rM(...e){vD>iM.warn||console.warn(...e)}let _y=!0;function bD(e){_y=!(e===void 0?!0:e)}function R1(e,t){if(t!==void 0){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];t=t}else t=e.slice();return t}function sM(e,t){if(t!==void 0&&e!==t){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function xD(e){dD(e.getCode(),e),ud(e,e,R1)}function ED(e){e.forEach(xD)}function Oe(e){return typeof e=="string"?hD(e):e||null}function hd(e,t,n,i){e=Oe(e);let r;const s=e.getPointResolutionFunc();if(s){if(r=s(t,n),i&&i!==e.getUnits()){const o=e.getMetersPerUnit();o&&(r=r*o/wl[i])}}else{const o=e.getUnits();if(o=="degrees"&&!i||i=="degrees")r=t;else{const a=A1(e,Oe("EPSG:4326"));if(a===sM&&o!=="degrees")r=t*e.getMetersPerUnit();else{let c=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];c=a(c,c,2);const u=Rx(c.slice(0,2),c.slice(2,4)),f=Rx(c.slice(4,6),c.slice(6,8));r=(u+f)/2}const l=i?wl[i]:e.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function Ix(e){ED(e),e.forEach(function(t){e.forEach(function(n){t!==n&&ud(t,n,R1)})})}function TD(e,t,n,i){e.forEach(function(r){t.forEach(function(s){ud(r,s,n),ud(s,r,i)})})}function I1(e,t){return e?typeof e=="string"?Oe(e):e:Oe(t)}function xo(e,t){if(e===t)return!0;const n=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||A1(e,t)===R1)&&n}function A1(e,t){const n=e.getCode(),i=t.getCode();let r=gD(n,i);return r||(r=sM),r}function dd(e,t){const n=Oe(e),i=Oe(t);return A1(n,i)}function CD(e,t,n){return dd(t,n)(e,void 0,e.length)}function wy(e,t){return e}function br(e,t){return _y&&!fd(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(_y=!1,rM("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function oM(e,t){return e}function Rr(e,t){return e}function SD(){Ix(Ex),Ix(Cx),TD(Cx,Ex,lD,cD)}SD();function Ax(e,t,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!t)return i;const l=t?0:s[0]*r,c=t?0:s[1]*r,u=a?a[0]:0,f=a?a[1]:0;let h=e[0]+l/2+u,d=e[2]-l/2+u,g=e[1]+c/2+f,m=e[3]-c/2+f;h>d&&(h=(d+h)/2,d=h),g>m&&(g=(m+g)/2,m=g);let _=Ae(i[0],h,d),p=Ae(i[1],g,m);if(o&&n&&r){const y=30*r;_+=-y*Math.log(1+Math.max(0,h-i[0])/y)+y*Math.log(1+Math.max(0,i[0]-d)/y),p+=-y*Math.log(1+Math.max(0,g-i[1])/y)+y*Math.log(1+Math.max(0,i[1]-m)/y)}return[_,p]}}function MD(e){return e}function L1(e,t,n,i){const r=Qt(t)/n[0],s=Wn(t)/n[1];return i?Math.min(e,Math.max(r,s)):Math.min(e,Math.min(r,s))}function O1(e,t,n){let i=Math.min(e,t);const r=50;return i*=Math.log(1+r*Math.max(0,e/t-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/e-1))/r+1),Ae(i,n/2,t*2)}function RD(e,t,n,i){return t=t!==void 0?t:!0,function(r,s,o,a){if(r!==void 0){const l=e[0],c=e[e.length-1],u=n?L1(l,n,o,i):l;if(a)return t?O1(r,u,c):Ae(r,c,u);const f=Math.min(u,r),h=Math.floor(b1(e,f,s));return e[h]>u&&h<e.length-1?e[h+1]:e[h]}}}function ID(e,t,n,i,r,s){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,c){if(o!==void 0){const u=r?L1(t,r,l,s):t;if(c)return i?O1(o,u,n):Ae(o,n,u);const f=1e-9,h=Math.ceil(Math.log(t/u)/Math.log(e)-f),d=-a*(.5-f)+.5,g=Math.min(u,o),m=Math.floor(Math.log(t/g)/Math.log(e)+d),_=Math.max(h,m),p=t/Math.pow(e,_);return Ae(p,n,u)}}}function Lx(e,t,n,i,r){return n=n!==void 0?n:!0,function(s,o,a,l){if(s!==void 0){const c=i?L1(e,i,a,r):e;return!n||!l?Ae(s,t,c):O1(s,c,t)}}}function k1(e){if(e!==void 0)return 0}function Ox(e){if(e!==void 0)return e}function AD(e){const t=2*Math.PI/e;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/t+.5)*t,n}}function LD(e){return e=e||Xh(5),function(t,n){if(n)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}function aM(e){return Math.pow(e,3)}function Xl(e){return 1-aM(1-e)}function OD(e){return 3*e*e-2*e*e*e}function kD(e){return e}function Wo(e,t,n,i,r,s){s=s||[];let o=0;for(let a=t;a<n;a+=i){const l=e[a],c=e[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function lM(e,t,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let f=0;for(let h=t;h<n;h+=i){const d=e[h]-c,g=e[h+1]-u;o[f++]=c+d*a-g*l,o[f++]=u+d*l+g*a;for(let m=h+2;m<h+i;++m)o[f++]=e[m]}return o&&o.length!=f&&(o.length=f),o}function PD(e,t,n,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let f=t;f<n;f+=i){const h=e[f]-l,d=e[f+1]-c;a[u++]=l+r*h,a[u++]=c+s*d;for(let g=f+2;g<f+i;++g)a[u++]=e[g]}return a&&a.length!=u&&(a.length=u),a}function FD(e,t,n,i,r,s,o){o=o||[];let a=0;for(let l=t;l<n;l+=i){o[a++]=e[l]+r,o[a++]=e[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=e[c]}return o&&o.length!=a&&(o.length=a),o}const kx=Si();class ND extends Fi{constructor(){super(),this.extent_=oi(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=RN(function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})}simplifyTransformed(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)}clone(){return vt()}closestPointXY(t,n,i,r){return vt()}containsXY(t,n){const i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n}getClosestPoint(t,n){return n=n||[NaN,NaN],this.closestPointXY(t[0],t[1],n,1/0),n}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return vt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Ku(n),this.extentRevision_=this.getRevision()}return VN(this.extent_,t)}rotate(t,n){vt()}scale(t,n,i){vt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return vt()}getType(){return vt()}applyTransform(t){vt()}intersectsExtent(t){return vt()}translate(t,n){vt()}transform(t,n){const i=Oe(t),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=Wn(c)/Wn(l);return Ri(kx,c[0],c[3],u,-u,0,0,0),Wo(s,0,s.length,a,kx,o),dd(i,n)(s,o,a)}:dd(i,n);return this.applyTransform(r),this}}const cM=ND;class DD extends cM{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return HS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return vt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,n){this.stride=Px(t),this.layout=t,this.flatCoordinates=n}setCoordinates(t,n){vt()}setLayout(t,n,i){let r;if(t)r=Px(t);else{for(let s=0;s<i;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,t=$D(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();lM(i,0,i.length,r,t,n,i),this.changed()}}scale(t,n,i){n===void 0&&(n=t),i||(i=Zo(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();PD(r,0,r.length,s,t,n,i,r),this.changed()}}translate(t,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();FD(i,0,i.length,r,t,n,i),this.changed()}}}function $D(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function Px(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function zD(e,t,n){const i=e.getFlatCoordinates();if(!i)return null;const r=e.getStride();return Wo(i,0,i.length,r,t,n)}const fa=DD;function Fx(e,t,n,i,r,s,o){const a=e[t],l=e[t+1],c=e[n]-a,u=e[n+1]-l;let f;if(c===0&&u===0)f=t;else{const h=((r-a)*c+(s-l)*u)/(c*c+u*u);if(h>1)f=n;else if(h>0){for(let d=0;d<i;++d)o[d]=Pn(e[t+d],e[n+d],h);o.length=i;return}else f=t}for(let h=0;h<i;++h)o[h]=e[f+h];o.length=i}function P1(e,t,n,i,r){let s=e[t],o=e[t+1];for(t+=i;t<n;t+=i){const a=e[t],l=e[t+1],c=$o(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function F1(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=P1(e,t,a,i,r),t=a}return r}function WD(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=F1(e,t,a,i,r),t=a[a.length-1]}return r}function N1(e,t,n,i,r,s,o,a,l,c,u){if(t==n)return c;let f,h;if(r===0){if(h=$o(o,a,e[t],e[t+1]),h<c){for(f=0;f<i;++f)l[f]=e[t+f];return l.length=i,h}return c}u=u||[NaN,NaN];let d=t+i;for(;d<n;)if(Fx(e,d-i,d,i,o,a,u),h=$o(o,a,u[0],u[1]),h<c){for(c=h,f=0;f<i;++f)l[f]=u[f];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(h)-Math.sqrt(c))/r|0,1);if(s&&(Fx(e,n-i,t,i,o,a,u),h=$o(o,a,u[0],u[1]),h<c)){for(c=h,f=0;f<i;++f)l[f]=u[f];l.length=i}return c}function D1(e,t,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let f=0,h=n.length;f<h;++f){const d=n[f];c=N1(e,t,d,i,r,s,o,a,l,c,u),t=d}return c}function GD(e,t,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let f=0,h=n.length;f<h;++f){const d=n[f];c=D1(e,t,d,i,r,s,o,a,l,c,u),t=d[d.length-1]}return c}function YD(e,t,n,i){for(let r=0,s=n.length;r<s;++r)e[t++]=n[r];return t}function am(e,t,n,i){for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0;a<i;++a)e[t++]=o[a]}return t}function $1(e,t,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=am(e,t,n[o],i);r[s++]=l,t=l}return r.length=s,r}function BD(e,t,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=$1(e,t,n[o],i,r[s]);l.length===0&&(l[0]=t),r[s++]=l,t=l[l.length-1]}return r.length=s,r}function z1(e,t,n,i,r,s,o){const a=(n-t)/i;if(a<3){for(;t<n;t+=i)s[o++]=e[t],s[o++]=e[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,n-i];let u=0;for(;c.length>0;){const f=c.pop(),h=c.pop();let d=0;const g=e[h],m=e[h+1],_=e[f],p=e[f+1];for(let y=h+i;y<f;y+=i){const v=e[y],w=e[y+1],x=ZN(v,w,g,m,_,p);x>d&&(u=y,d=x)}d>r&&(l[(u-t)/i]=1,h+i<u&&c.push(h,u),u+i<f&&c.push(u,f))}for(let f=0;f<a;++f)l[f]&&(s[o++]=e[t+f*i],s[o++]=e[t+f*i+1]);return o}function UD(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=z1(e,t,u,i,r,s,o),a.push(o),t=u}return o}function po(e,t){return t*Math.round(e/t)}function VD(e,t,n,i,r,s,o){if(t==n)return o;let a=po(e[t],r),l=po(e[t+1],r);t+=i,s[o++]=a,s[o++]=l;let c,u;do if(c=po(e[t],r),u=po(e[t+1],r),t+=i,t==n)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;t<n;){const f=po(e[t],r),h=po(e[t+1],r);if(t+=i,f==c&&h==u)continue;const d=c-a,g=u-l,m=f-a,_=h-l;if(d*_==g*m&&(d<0&&m<d||d==m||d>0&&m>d)&&(g<0&&_<g||g==_||g>0&&_>g)){c=f,u=h;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=f,u=h}return s[o++]=c,s[o++]=u,o}function uM(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=VD(e,t,u,i,r,s,o),a.push(o),t=u}return o}function XD(e,t,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],f=[];o=uM(e,t,u,i,r,s,o,f),a.push(f),t=u[u.length-1]}return o}function Ls(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=t;o<n;o+=i)r[s++]=e.slice(o,o+i);return r.length=s,r}function _u(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=Ls(e,t,l,i,r[s]),t=l}return r.length=s,r}function vy(e,t,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=l.length===1&&l[0]===t?[]:_u(e,t,l,i,r[s]),t=l[l.length-1]}return r.length=s,r}function fM(e,t,n,i){let r=0,s=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];r+=o*a-s*l,s=a,o=l}return r/2}function hM(e,t,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=fM(e,t,a,i),t=a}return r}function HD(e,t,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=hM(e,t,a,i),t=a[a.length-1]}return r}class gd extends fa{constructor(t,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}clone(){return new gd(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,n,i,r){return r<ca(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(P1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),N1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,r))}getArea(){return fM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ls(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const n=[];return n.length=z1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new gd(n,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=am(this.flatCoordinates,0,t,this.stride),this.changed()}}const Nx=gd;let jD=class dM extends fa{constructor(t,n){super(),this.setCoordinates(t,n)}clone(){const t=new dM(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){const s=this.flatCoordinates,o=$o(t,n,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return YN(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return C1(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=YD(this.flatCoordinates,0,t,this.stride),this.changed()}};const vl=jD;function ZD(e,t,n,i,r){return!qS(r,function(o){return!Co(e,t,n,i,o[0],o[1])})}function Co(e,t,n,i,r,s){let o=0,a=e[n-i],l=e[n-i+1];for(;t<n;t+=i){const c=e[t],u=e[t+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function W1(e,t,n,i,r,s){if(n.length===0||!Co(e,t,n[0],i,r,s))return!1;for(let o=1,a=n.length;o<a;++o)if(Co(e,n[o-1],n[o],i,r,s))return!1;return!0}function qD(e,t,n,i,r,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(W1(e,t,l,i,r,s))return!0;t=l[l.length-1]}return!1}function gM(e,t,n,i,r,s,o){let a,l,c,u,f,h,d;const g=r[s+1],m=[];for(let y=0,v=n.length;y<v;++y){const w=n[y];for(u=e[w-i],h=e[w-i+1],a=t;a<w;a+=i)f=e[a],d=e[a+1],(g<=h&&d<=g||h<=g&&g<=d)&&(c=(g-h)/(d-h)*(f-u)+u,m.push(c)),u=f,h=d}let _=NaN,p=-1/0;for(m.sort(Ws),u=m[0],a=1,l=m.length;a<l;++a){f=m[a];const y=Math.abs(f-u);y>p&&(c=(u+f)/2,W1(e,t,n,i,c,g)&&(_=c,p=y)),u=f}return isNaN(_)&&(_=r[s]),o?(o.push(_,g,p),o):[_,g,p]}function KD(e,t,n,i,r){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=gM(e,t,l,i,r,2*o,s),t=l[l.length-1]}return s}function mM(e,t,n,i,r){let s;for(t+=i;t<n;t+=i)if(s=r(e.slice(t-i,t),e.slice(t,t+i)),s)return s;return!1}function lm(e,t,n,i,r){const s=ZS(oi(),e,t,n,i);return hn(r,s)?As(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:mM(e,t,n,i,function(o,a){return HN(r,o,a)}):!1}function JD(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){if(lm(e,t,n[s],i,r))return!0;t=n[s]}return!1}function pM(e,t,n,i,r){return!!(lm(e,t,n,i,r)||Co(e,t,n,i,r[0],r[1])||Co(e,t,n,i,r[0],r[3])||Co(e,t,n,i,r[2],r[1])||Co(e,t,n,i,r[2],r[3]))}function yM(e,t,n,i,r){if(!pM(e,t,n[0],i,r))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(ZD(e,n[s-1],n[s],i,r)&&!lm(e,n[s-1],n[s],i,r))return!1;return!0}function QD(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(yM(e,t,a,i,r))return!0;t=a[a.length-1]}return!1}function t8(e,t,n,i){for(;t<n-i;){for(let r=0;r<i;++r){const s=e[t+r];e[t+r]=e[n-i+r],e[n-i+r]=s}t+=i,n-=i}}function _M(e,t,n,i){let r=0,s=e[n-i],o=e[n-i+1];for(;t<n;t+=i){const a=e[t],l=e[t+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function wM(e,t,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=_M(e,t,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=a}return!0}function e8(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!wM(e,t,a,i,r))return!1;a.length&&(t=a[a.length-1])}return!0}function by(e,t,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=_M(e,t,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&t8(e,t,a,i),t=a}return t}function Dx(e,t,n,i,r){for(let s=0,o=n.length;s<o;++s)t=by(e,t,n[s],i,r);return t}let vM=class xy extends fa{constructor(t,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,t),this.ends_=i):this.setCoordinates(t,n)}appendLinearRing(t){this.flatCoordinates?Nr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new xy(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<ca(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(F1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),D1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,r))}containsXY(t,n){return W1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)}getArea(){return hM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),by(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,_u(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Zo(this.getExtent());this.flatInteriorPoint_=gM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new vl(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Nx(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,n=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new Nx(n.slice(s,l),t);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;wM(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=by(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=uM(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new xy(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return yM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=$1(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}};const md=vM;function Ey(e){if(Vl(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],n=e[1],i=e[2],r=e[3],s=[t,n,t,r,i,r,i,n,t,n];return new vM(s,"XY",[s.length])}const k0=0;class n8 extends Fi{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=I1(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&bD(),t.center&&(t.center=br(t.center,this.projection_)),t.extent&&(t.extent=Rr(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const n=Object.assign({},t);for(const a in ci)delete n[a];this.setProperties(n,!0);const i=r8(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const r=i8(t),s=i.constraint,o=s8(t);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let n=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const r=t||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),a=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=br(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=br(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)}animateInternal(t){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===n){i&&th(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<n;++r){const u=arguments[r],f={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||OD,callback:i};if(u.center&&(f.sourceCenter=o,f.targetCenter=u.center.slice(),o=f.targetCenter),u.zoom!==void 0?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(u.zoom),a=f.targetResolution):u.resolution&&(f.sourceResolution=a,f.targetResolution=u.resolution,a=f.targetResolution),u.rotation!==void 0){f.sourceRotation=l;const h=zo(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=l+h,l=f.targetRotation}o8(f)?f.complete=!0:s+=f.duration,c.push(f)}this.animations_.push(c),this.setHint(Ie.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Ie.ANIMATING]>0}getInteracting(){return this.hints_[Ie.INTERACTING]>0}cancelAnimations(){this.setHint(Ie.ANIMATING,-this.hints_[Ie.ANIMATING]);let t;for(let n=0,i=this.animations_.length;n<i;++n){const r=this.animations_[n];if(r[0].callback&&th(r[0].callback,!1),!t)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=t-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const f=l.easing(u);if(l.sourceCenter){const h=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const _=h+f*(g-h),p=d+f*(m-d);this.targetCenter_=[_,p]}if(l.sourceResolution&&l.targetResolution){const h=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(h,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const h=f===1?zo(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Ie.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&th(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,n){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-n[0],r[1]-n[1]],M1(i,t-this.getRotation()),mD(i,n)),i}calculateCenterZoom(t,n){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=n[0]-t*(n[0]-r[0])/s,a=n[1]-t*(n[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(t){const n=this.viewportSize_;if(t){const i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&wy(t,this.getProjection())}getCenterInternal(){return this.get(ci.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const n=this.calculateExtentInternal(t);return oM(n,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();$t(n,"The view center is not defined");const i=this.getResolution();$t(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return $t(r!==void 0,"The view rotation is not defined"),my(n,i,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(ci.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,n){return this.getResolutionForExtentInternal(Rr(t,this.getProjection()),n)}getResolutionForExtentInternal(t,n){n=n||this.getViewportSizeMinusPadding_();const i=Qt(t)/n[0],r=Wn(t)/n[1];return Math.max(i,r)}getResolutionForValueFunction(t){t=t||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(t);return function(s){return n/Math.pow(t,s*r)}}getRotation(){return this.get(ci.ROTATION)}getValueForResolutionFunction(t){const n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/n;return function(o){return Math.log(i/o)/n/s}}getViewportSizeMinusPadding_(t){let n=this.getViewportSize_(t);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const t=this.getProjection(),n=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=P0(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t}getZoomForResolution(t){let n=this.minZoom_||0,i,r;if(this.resolutions_){const s=b1(this.resolutions_,t,1);n=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=Ae(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Ae(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,n){let i;if($t(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){$t(!Vl(t),"Cannot fit empty extent provided as `geometry`");const r=Rr(t,this.getProjection());i=Ey(r)}else if(t.getType()==="Circle"){const r=Rr(t.getExtent(),this.getProjection());i=Ey(r),i.rotate(this.getRotation(),Zo(r))}else i=t;this.fitInternal(i,n)}rotatedExtentForGeometry(t){const n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let f=0,h=s.length;f<h;f+=o){const d=s[f]*i-s[f+1]*r,g=s[f]*r+s[f+1]*i;a=Math.min(a,d),l=Math.min(l,g),c=Math.max(c,d),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(t,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const r=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),f=Math.cos(c),h=Zo(a);h[0]+=(r[1]-r[3])/2*l,h[1]+=(r[0]-r[2])/2*l;const d=h[0]*f-h[1]*u,g=h[1]*f+h[0]*u,m=this.getConstrainedCenter([d,g],l),_=n.callback?n.callback:yl;n.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:n.duration,easing:n.easing},_):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),th(_,!0))}centerOn(t,n,i){this.centerOnInternal(br(t,this.getProjection()),n,i)}centerOnInternal(t,n,i){this.setCenterInternal(P0(t,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,n,i,r){let s;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),l=P0(t,r,[a[0]/2+o[3],a[1]/2+o[0]],n,i);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const n=wy(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])}adjustCenterInternal(t){const n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])}adjustResolution(t,n){n=n&&br(n,this.getProjection()),this.adjustResolutionInternal(t,n)}adjustResolutionInternal(t,n){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,i);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)}adjustRotation(t,n){n&&(n=br(n,this.getProjection())),this.adjustRotationInternal(t,n)}adjustRotationInternal(t,n){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&br(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,n){const i=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(ci.ROTATION)!==r&&this.set(ci.ROTATION,r),this.get(ci.RESOLUTION)!==o&&(this.set(ci.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ci.CENTER)||!fd(this.get(ci.CENTER),a))&&this.set(ci.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,n,i){t=t!==void 0?t:200;const r=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!fd(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:t,easing:Xl,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Ie.INTERACTING,1)}endInteraction(t,n,i){i=i&&br(i,this.getProjection()),this.endInteractionInternal(t,n,i)}endInteractionInternal(t,n,i){this.getInteracting()&&(this.setHint(Ie.INTERACTING,-1),this.resolveConstraints(t,n,i))}getConstrainedCenter(t,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)}getConstrainedZoom(t,n){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(t,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)}}function th(e,t){setTimeout(function(){e(t)},0)}function i8(e){if(e.extent!==void 0){const n=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return Ax(e.extent,e.constrainOnlyCenter,n)}const t=I1(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Ax(n,!1,!1)}return MD}function r8(e){let t,n,i,o=e.minZoom!==void 0?e.minZoom:k0,a=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,c=e.multiWorld!==void 0?e.multiWorld:!1,u=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,f=e.showFullExtent!==void 0?e.showFullExtent:!1,h=I1(e.projection,"EPSG:3857"),d=h.getExtent();let g=e.constrainOnlyCenter,m=e.extent;if(!c&&!m&&h.isGlobal()&&(g=!1,m=d),e.resolutions!==void 0){const _=e.resolutions;n=_[o],i=_[a]!==void 0?_[a]:_[_.length-1],e.constrainResolution?t=RD(_,u,!g&&m,f):t=Lx(n,i,u,!g&&m,f)}else{const p=(d?Math.max(Qt(d),Wn(d)):360*wl.degrees/h.getMetersPerUnit())/S1/Math.pow(2,k0),y=p/Math.pow(2,28-k0);n=e.maxResolution,n!==void 0?o=0:n=p/Math.pow(l,o),i=e.minResolution,i===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?i=n/Math.pow(l,a):i=p/Math.pow(l,a):i=y),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),e.constrainResolution?t=ID(l,n,i,u,!g&&m,f):t=Lx(n,i,u,!g&&m,f)}return{constraint:t,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function s8(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const n=e.constrainRotation;return n===void 0||n===!0?LD():n===!1?Ox:typeof n=="number"?AD(n):Ox}return k1}function o8(e){return!(e.sourceCenter&&e.targetCenter&&!fd(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function P0(e,t,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=e[0]*s-e[1]*o,l=e[1]*s+e[0]*o;a+=(t[0]/2-n[0])*i,l+=(n[1]-t[1]/2)*i,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const Bi=n8;class a8 extends tM{constructor(t){const n=Object.assign({},t);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Kt.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Kt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ee(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Ft(t,Et.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let n;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof Bi?n={viewState:t.getState(),extent:t.calculateExtent()}:n=t,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;n.layerStatesArray?r=n.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return G1(r,n.viewState)&&(!s||hn(s,n.extent))}getAttributions(t){if(!this.isVisible(t))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const r=t instanceof Bi?t.getViewStateAndExtent():t;let s=n(r);return Array.isArray(s)||(s=[s]),s}render(t,n){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,n)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(Kt.MAP,t)}getMapInternal(){return this.get(Kt.MAP)}setMap(t){this.mapPrecomposeKey_&&(ee(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(ee(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Ft(t,Ki.PRECOMPOSE,function(n){const r=n.frameState.layerStatesArray,s=this.getLayerState(!1);$t(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=Ft(this,Et.CHANGE,t.render,t),this.changed())}setSource(t){this.set(Kt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function G1(e,t){if(!e.visible)return!1;const n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;const i=t.zoom;return i>e.minZoom&&i<=e.maxZoom}const cm=a8;class l8 extends v1{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,n){vt()}calculateMatrices2D(t){const n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Ri(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),nm(r,i)}forEachFeatureAtCoordinate(t,n,i,r,s,o,a,l){let c;const u=n.viewState;function f(w,x,b,E){return s.call(o,x,w?b:null,E)}const h=u.projection,d=nM(t.slice(),h),g=[[0,0]];if(h.canWrapX()&&r){const w=h.getExtent(),x=Qt(w);g.push([-x,0],[x,0])}const m=n.layerStatesArray,_=m.length,p=[],y=[];for(let w=0;w<g.length;w++)for(let x=_-1;x>=0;--x){const b=m[x],E=b.layer;if(E.hasRenderer()&&G1(b,u)&&a.call(l,E)){const C=E.getRenderer(),I=E.getSource();if(C&&I){const S=I.getWrapX()?d:t,R=f.bind(null,b.managed);y[0]=S[0]+g[w][0],y[1]=S[1]+g[w][1],c=C.forEachFeatureAtCoordinate(y,n,i,R,p)}if(c)return c}}if(p.length===0)return;const v=1/p.length;return p.forEach((w,x)=>w.distanceSq+=x*v),p.sort((w,x)=>w.distanceSq-x.distanceSq),p.some(w=>c=w.callback(w.feature,w.layer,w.geometry)),c}hasFeatureAtCoordinate(t,n,i,r,s,o){return this.forEachFeatureAtCoordinate(t,n,i,r,pu,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(t){vt()}flushDeclutterItems(t){}scheduleExpireIconCache(t){cd.canExpireCache()&&t.postRenderFunctions.push(c8)}}function c8(e,t){cd.expire()}const u8=l8;class f8 extends Kr{constructor(t,n,i,r){super(t),this.inversePixelTransform=n,this.frameState=i,this.context=r}}const bM=f8,eh="ol-hidden",h8="ol-selectable",ha="ol-unselectable",$x="ol-unsupported",Qu="ol-control",zx="ol-collapsed",d8=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Wx=["style","variant","weight","size","lineHeight","family"],xM=function(e){const t=e.match(d8);if(!t)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Wx.length;i<r;++i){const s=t[i+1];s!==void 0&&(n[Wx[i]]=s)}return n.families=n.family.split(/,\s?/),n};function mn(e,t,n,i){let r;return n&&n.length?r=n.shift():x1?r=new OffscreenCanvas(e||300,t||300):r=document.createElement("canvas"),e&&(r.width=e),t&&(r.height=t),r.getContext("2d",i)}function um(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function g8(e){let t=e.offsetWidth;const n=getComputedStyle(e);return t+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),t}function m8(e){let t=e.offsetHeight;const n=getComputedStyle(e);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),t}function pd(e,t){const n=t.parentNode;n&&n.replaceChild(e,t)}function yd(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function EM(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function p8(e,t){const n=e.childNodes;for(let i=0;;++i){const r=n[i],s=t[i];if(!r&&!s)break;if(r!==s){if(!r){e.appendChild(s);continue}if(!s){e.removeChild(r),--i;continue}e.insertBefore(s,r)}}}const TM="10px sans-serif",xn="#000",bl="round",Dr=[],$r=0,xl="round",wu=10,vu="#000",bu="center",_d="middle",So=[0,0,0,0],xu=1,xr=new Fi;let $a=null,Ty;const Cy={},y8=function(){const t="32px ",n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(c,u,f){let h=!0;for(let d=0;d<i;++d){const g=n[d];if(o=wd(c+" "+u+" "+t+g,r),f!=g){const m=wd(c+" "+u+" "+t+f+","+g,r);h=h&&m!=o}}return!!h}function l(){let c=!0;const u=xr.getKeys();for(let f=0,h=u.length;f<h;++f){const d=u[f];xr.get(d)<100&&(a.apply(this,d.split(`
`))?(ju(Cy),$a=null,Ty=void 0,xr.set(d,100)):(xr.set(d,xr.get(d)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const u=xM(c);if(!u)return;const f=u.families;for(let h=0,d=f.length;h<d;++h){const g=f[h],m=u.style+`
`+u.weight+`
`+g;xr.get(m)===void 0&&(xr.set(m,100,!0),a(u.style,u.weight,g)||(xr.set(m,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),_8=function(){let e;return function(t){let n=Cy[t];if(n==null){if(x1){const i=xM(t),r=CM(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),n=e.offsetHeight,document.body.removeChild(e);Cy[t]=n}return n}}();function CM(e,t){return $a||($a=mn(1,1)),e!=Ty&&($a.font=e,Ty=$a.font),$a.measureText(t)}function wd(e,t){return CM(e,t).width}function Gx(e,t,n){if(t in n)return n[t];const i=t.split(`
`).reduce((r,s)=>Math.max(r,wd(e,s)),0);return n[t]=i,i}function w8(e,t){const n=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=t.length;c<=u;c+=2){const f=t[c];if(f===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const h=t[c+1]||e.font,d=wd(h,f);n.push(d),o+=d;const g=_8(h);i.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:n,heights:i,lineWidths:r}}function v8(e,t,n,i,r,s,o,a,l,c,u){e.save(),n!==1&&(e.globalAlpha*=n),t&&e.transform.apply(e,t),i.contextInstructions?(e.translate(l,c),e.scale(u[0],u[1]),b8(i,e)):u[0]<0||u[1]<0?(e.translate(l,c),e.scale(u[0],u[1]),e.drawImage(i,r,s,o,a,0,0,o,a)):e.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),e.restore()}function b8(e,t){const n=e.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?t[n[i]].apply(t,n[i+1]):t[n[i]]=n[i+1]}class x8 extends u8{constructor(t){super(t),this.fontChangeListenerKey_=Ft(xr,pl.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=ha+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,n){const i=this.getMap();if(i.hasListener(t)){const r=new bM(t,void 0,n);i.dispatchEvent(r)}}disposeInternal(){ee(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Ki.PRECOMPOSE,t);const n=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;const r=this.declutterLayers_;r.length=0;let s=null;for(let o=0,a=n.length;o<a;++o){const l=n[o];t.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!G1(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const f=c.render(t,s);f&&(f!==s&&(this.children_.push(f),s=f),"getDeclutter"in c&&r.push(c))}this.flushDeclutterItems(t),p8(this.element_,this.children_),this.dispatchRenderEvent(Ki.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const n=this.declutterLayers_;for(let i=n.length-1;i>=0;--i)n[i].renderDeclutter(t);n.length=0}}const E8=x8;class vs extends Kr{constructor(t,n){super(t),this.layer=n}}const F0={LAYERS:"layers"};class Y1 extends tM{constructor(t){t=t||{};const n=Object.assign({},t);delete n.layers;let i=t.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(F0.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Hi(i.slice(),{unique:!0}):$t(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Hi(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ee),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Ft(t,bn.ADD,this.handleLayersAdd_,this),Ft(t,bn.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(ee);ju(this.listenerKeys_);const n=t.getArray();for(let i=0,r=n.length;i<r;i++){const s=n[i];this.registerLayerListeners_(s),this.dispatchEvent(new vs("addlayer",s))}this.changed()}registerLayerListeners_(t){const n=[Ft(t,pl.PROPERTYCHANGE,this.handleLayerChange_,this),Ft(t,Et.CHANGE,this.handleLayerChange_,this)];t instanceof Y1&&n.push(Ft(t,"addlayer",this.handleLayerGroupAdd_,this),Ft(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Vt(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new vs("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new vs("removelayer",t.layer))}handleLayersAdd_(t){const n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new vs("addlayer",n)),this.changed()}handleLayersRemove_(t){const n=t.element,i=Vt(n);this.listenerKeys_[i].forEach(ee),delete this.listenerKeys_[i],this.dispatchEvent(new vs("removelayer",n)),this.changed()}getLayers(){return this.get(F0.LAYERS)}setLayers(t){const n=this.getLayers();if(n){const i=n.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new vs("removelayer",i[r]))}this.set(F0.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(n){n.getLayersArray(t)}),t}getLayerStatesArray(t){const n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const r=this.getLayerState();let s=r.zIndex;!t&&r.zIndex===void 0&&(s=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=nl(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}}const fm=Y1;class T8 extends Kr{constructor(t,n,i){super(t),this.map=n,this.frameState=i!==void 0?i:null}}const za=T8;class C8 extends za{constructor(t,n,i,r,s,o){super(t,n,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ps=C8,ve={SINGLECLICK:"singleclick",CLICK:Et.CLICK,DBLCLICK:Et.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Sy={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class S8 extends Zu{constructor(t,n){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Ft(i,Sy.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ft(i,Sy.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Et.TOUCHMOVE,this.boundHandleTouchMove_,VS?{passive:!1}:!1)}emulateClick_(t){let n=new ps(ve.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new ps(ve.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new ps(ve.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const n=t,i=n.pointerId;if(n.type==ve.POINTERUP||n.type==ve.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==ve.POINTERDOWN||n.type==ve.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const n=new ps(ve.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ee),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const n=new ps(ve.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ft(i,ve.POINTERMOVE,this.handlePointerMove_,this),Ft(i,ve.POINTERUP,this.handlePointerUp_,this),Ft(this.element_,ve.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Ft(this.element_.getRootNode(),ve.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const n=new ps(ve.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new ps(ve.POINTERMOVE,this.map_,t,n))}handleTouchMove_(t){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ee(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Et.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ee(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ee),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const M8=S8,Cr={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},$e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},vd=1/0;class R8{constructor(t,n){this.priorityFunction_=t,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,ju(this.queuedElements_)}dequeue(){const t=this.elements_,n=this.priorities_,i=t[0];t.length==1?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(t){$t(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(t);return n!=vd?(this.elements_.push(t),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const n=this.elements_,i=this.priorities_,r=n.length,s=n[t],o=i[t],a=t;for(;t<r>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),u=c<r&&i[c]<i[l]?c:l;n[t]=n[u],i[t]=i[u],t=u}n[t]=s,i[t]=o,this.siftDown_(a,t)}siftDown_(t,n){const i=this.elements_,r=this.priorities_,s=i[n],o=r[n];for(;n>t;){const a=this.getParentIndex_(n);if(r[a]>o)i[n]=i[a],r[n]=r[a],n=a;else break}i[n]=s,r[n]=o}reprioritize(){const t=this.priorityFunction_,n=this.elements_,i=this.priorities_;let r=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=t(o),l==vd?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,n[r++]=o);n.length=r,i.length=r,this.heapify_()}}const I8=R8,ht={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class A8 extends I8{constructor(t,n){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const n=super.enqueue(t);return n&&t[0].addEventListener(Et.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const n=t.target,i=n.getState();if(i===ht.LOADED||i===ht.ERROR||i===ht.EMPTY){i!==ht.ERROR&&n.removeEventListener(Et.CHANGE,this.boundHandleTileChange_);const r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,n){let i=0,r,s,o;for(;this.tilesLoading_<t&&i<n&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===ht.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}const L8=A8;function O8(e,t,n,i,r){if(!e||!(n in e.wantedTiles)||!e.wantedTiles[n][t.getKey()])return vd;const s=e.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class k8 extends Fi{constructor(t){super();const n=t.element;n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){yd(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&yd(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)ee(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==yl&&this.listenerKeys.push(Ft(t,Cr.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Hl=k8;class P8 extends Hl{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:n+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"›",o=t.collapseClassName!==void 0?t.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Et.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+ha+" "+Qu+(this.collapsed_&&this.collapsible_?" "+zx:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(t)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Zs(n,this.renderedAttributions_)){EM(this.ulElement_);for(let r=0,s=n.length;r<s;++r){const o=document.createElement("li");o.innerHTML=n[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(zx),this.collapsed_?pd(this.collapseLabel_,this.label_):pd(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const F8=P8;class N8 extends Hl{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const n=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"⇧",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(Et.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+ha+" "+Qu,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(eh)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Xl}):n.setRotation(0))}render(t){const n=t.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(eh);!s&&i===0?this.element.classList.add(eh):s&&i!==0&&this.element.classList.remove(eh)}this.label_.style.transform=r}this.rotation_=i}}const D8=N8;class $8 extends Hl{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const n=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:n+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:n+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(Et.CLICK,this.handleClick_.bind(this,i),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=c,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(Et.CLICK,this.handleClick_.bind(this,-i),!1);const h=n+" "+ha+" "+Qu,d=this.element;d.className=h,d.appendChild(u),d.appendChild(f),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,n){n.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:Xl})):i.setZoom(s)}}}const z8=$8;function SM(e){e=e||{};const t=new Hi;return(e.zoom!==void 0?e.zoom:!0)&&t.push(new z8(e.zoomOptions)),(e.rotate!==void 0?e.rotate:!0)&&t.push(new D8(e.rotateOptions)),(e.attribution!==void 0?e.attribution:!0)&&t.push(new F8(e.attributionOptions)),t}const Yx={ACTIVE:"active"};class W8 extends Fi{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Yx.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Yx.ACTIVE,t)}setMap(t){this.map_=t}}function G8(e,t,n){const i=e.getCenterInternal();if(i){const r=[i[0]+t[0],i[1]+t[1]];e.animateInternal({duration:n!==void 0?n:250,easing:kD,center:e.getConstrainedCenter(r)})}}function B1(e,t,n,i){const r=e.getZoom();if(r===void 0)return;const s=e.getConstrainedZoom(r+t),o=e.getResolutionForZoom(s);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:Xl})}const tf=W8;class Y8 extends tf{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let n=!1;if(t.type==ve.DBLCLICK){const i=t.originalEvent,r=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();B1(a,o,s,this.duration_),i.preventDefault(),n=!0}return!n}}const B8=Y8;class U8 extends tf{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==ve.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==ve.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==ve.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,n=this.stopDown(i)}else t.type==ve.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function U1(e){const t=e.length;let n=0,i=0;for(let r=0;r<t;r++)n+=e[r].clientX,i+=e[r].clientY;return{clientX:n/t,clientY:i/t}}const ef=U8;function My(e){const t=arguments;return function(n){let i=!0;for(let r=0,s=t.length;r<s&&(i=i&&t[r](n),!!i);++r);return i}}const V8=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},X8=function(e){const t=e.map.getTargetElement(),n=e.map.getOwnerDocument().activeElement;return t.contains(n)},MM=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?X8(e):!0},H8=pu,RM=function(e){const t=e.originalEvent;return t.button==0&&!(DN&&YS&&t.ctrlKey)},IM=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},j8=function(e){const t=e.originalEvent;return YS?t.metaKey:t.ctrlKey},Z8=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},AM=function(e){const t=e.originalEvent,n=t.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!t.target.isContentEditable},N0=function(e){const t=e.originalEvent;return $t(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},q8=function(e){const t=e.originalEvent;return $t(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class K8 extends ef{constructor(t){super({stopDown:tm}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=t.condition?t.condition:My(IM,q8);this.condition_=t.onFocusOnly?My(MM,n):n,this.noKinetic_=!1}handleDragEvent(t){const n=t.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,r=n.getEventPixel(U1(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=t.map.getView();pD(s,a.getResolution()),M1(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Xl})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const J8=K8;class Q8 extends ef{constructor(t){t=t||{},super({stopDown:tm}),this.condition_=t.condition?t.condition:V8,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!N0(t))return;const n=t.map,i=n.getView();if(i.getConstraints().rotation===k1)return;const r=n.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return N0(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return N0(t)&&RM(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const t$=Q8;class e$ extends v1{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,n=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,n=this.endPixel_,r=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new md([r])}getGeometry(){return this.geometry_}}const n$=e$,nh={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class D0 extends Kr{constructor(t,n,i){super(t),this.coordinate=n,this.mapBrowserEvent=i}}class i$ extends ef{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new n$(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:RM,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,n,i){const r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new D0(nh.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new D0(n?nh.BOXEND:nh.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new D0(nh.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const r$=i$;class s$ extends r${constructor(t){t=t||{};const n=t.condition?t.condition:Z8;super({condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:Xl})}}const o$=s$,co={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class a$ extends tf{constructor(t){super(),t=t||{},this.defaultCondition_=function(n){return IM(n)&&AM(n)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let n=!1;if(t.type==Et.KEYDOWN){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==co.DOWN||r==co.LEFT||r==co.RIGHT||r==co.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==co.DOWN?c=-a:r==co.LEFT?l=-a:r==co.RIGHT?l=a:c=a;const u=[l,c];M1(u,o.getRotation()),G8(o,u,this.duration_),i.preventDefault(),n=!0}}return!n}}const l$=a$;class c$ extends tf{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(n){return!j8(n)&&AM(n)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let n=!1;if(t.type==Et.KEYDOWN||t.type==Et.KEYPRESS){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==="+"||r==="-")){const s=t.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();B1(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}const u$=c$;class f${constructor(t,n,i){this.decay_=t,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,n){this.points_.push(t,n,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<t)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const r=this.points_[n+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const h$=f$;class d$ extends tf{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const n=t.condition?t.condition:H8;this.condition_=t.onFocusOnly?My(MM,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==Et.WHEEL)return!0;const i=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==Et.WHEEL&&(s=r.deltaY,FN&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=BS),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const n=t.getView();n.getAnimating()&&n.cancelAnimations();let i=-Ae(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),B1(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const g$=d$;class m$ extends ef{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=tm),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let n=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=t.map,a=o.getView();a.getConstraints().rotation!==k1&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(U1(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const p$=m$;class y$ extends ef{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=tm),super(n),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let n=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(U1(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const _$=y$;function w$(e){e=e||{};const t=new Hi,n=new h$(-.005,.05,100);return(e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0)&&t.push(new t$),(e.doubleClickZoom!==void 0?e.doubleClickZoom:!0)&&t.push(new B8({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan!==void 0?e.dragPan:!0)&&t.push(new J8({onFocusOnly:e.onFocusOnly,kinetic:n})),(e.pinchRotate!==void 0?e.pinchRotate:!0)&&t.push(new p$),(e.pinchZoom!==void 0?e.pinchZoom:!0)&&t.push(new _$({duration:e.zoomDuration})),(e.keyboard!==void 0?e.keyboard:!0)&&(t.push(new l$),t.push(new u$({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0)&&t.push(new g$({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom!==void 0?e.shiftDragZoom:!0)&&t.push(new o$({duration:e.zoomDuration})),t}function Bx(e){return e[0]>0&&e[1]>0}function v$(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]*t+.5|0,n[1]=e[1]*t+.5|0,n}function Nn(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}function LM(e){if(e instanceof cm){e.setMapInternal(null);return}e instanceof fm&&e.getLayers().forEach(LM)}function OM(e,t){if(e instanceof cm){e.setMapInternal(t);return}if(e instanceof fm){const n=e.getLayers().getArray();for(let i=0,r=n.length;i<r;++i)OM(n[i],t)}}let b$=class extends Fi{constructor(t){super(),t=t||{},this.on,this.once,this.un;const n=x$(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:BS,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Si(),this.pixelToCoordinateTransform_=Si(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||SM(),this.interactions=n.interactions||w$({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new L8(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener($e.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener($e.VIEW,this.handleViewChanged_),this.addChangeListener($e.SIZE,this.handleSizeChanged_),this.addChangeListener($e.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;t.view&&!(t.view instanceof Bi)&&t.view.then(function(r){i.setView(new Bi(r))}),this.controls.addEventListener(bn.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(bn.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(bn.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(bn.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(bn.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(bn.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){OM(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,n,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:pu,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(t,n){const i=[];return this.forEachFeatureAtPixel(t,function(r){i.push(r)},n),i}getAllLayers(){const t=[];function n(i){i.forEach(function(r){r instanceof fm?n(r.getLayers()):t.push(r)})}return n(this.getLayers()),t}hasFeatureAtPixel(t,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.layerFilter!==void 0?n.layerFilter:pu,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get($e.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return wy(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const n=this.frameState_;return n?Te(n.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get($e.LAYERGROUP)}setLayers(t){const n=this.getLayerGroup();if(t instanceof Hi){n.setLayers(t);return}const i=n.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const r=t[n];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const n=br(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(t){const n=this.frameState_;return n?Te(n.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get($e.SIZE)}getView(){return this.get($e.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,n,i,r){return O8(this.frameState_,t,n,i,r)}handleBrowserEvent(t,n){n=n||t.type;const i=new ps(n,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const n=t.originalEvent,i=n.type;if(i===Sy.POINTERDOWN||i===Et.WHEEL||i===Et.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=n.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,s=r;if(t){const o=t.viewHints;if(o[Ie.ANIMATING]||o[Ie.INTERACTING]){const a=Date.now()-t.time>8;r=a?0:8,s=a?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Ki.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ki.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new za(Cr.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new za(Cr.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)ee(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Et.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Et.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,yd(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),n=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new E8(this)),this.mapBrowserEventHandler_=new M8(this,this.moveTolerance_);for(const s in ve)this.mapBrowserEventHandler_.addEventListener(ve[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Et.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Et.WHEEL,this.boundHandleBrowserEvent_,VS?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[Ft(i,Et.KEYDOWN,this.handleBrowserEvent,this),Ft(i,Et.KEYPRESS,this.handleBrowserEvent,this)];const r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ee(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ee(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Ft(t,pl.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ft(t,Et.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ee),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new vs("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Ft(t,pl.PROPERTYCHANGE,this.render,this),Ft(t,Et.CHANGE,this.render,this),Ft(t,"addlayer",this.handleLayerAdd_,this),Ft(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){LM(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const n=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(n!==void 0&&Bx(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:my(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Vt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=my(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Vl(this.previousExtent_)&&!yu(s.extent,this.previousExtent_))&&(this.dispatchEvent(new za(Cr.MOVESTART,this,r)),this.previousExtent_=Ku(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Ie.ANIMATING]&&!s.viewHints[Ie.INTERACTING]&&!yu(s.extent,this.previousExtent_)&&(this.dispatchEvent(new za(Cr.MOVEEND,this,s)),XS(s.extent,this.previousExtent_))),this.dispatchEvent(new za(Cr.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Cr.LOADSTART)||this.hasListener(Cr.LOADEND)||this.hasListener(Ki.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new vs("removelayer",n)),this.set($e.LAYERGROUP,t)}setSize(t){this.set($e.SIZE,t)}setTarget(t){this.set($e.TARGET,t)}setView(t){if(!t||t instanceof Bi){this.set($e.VIEW,t);return}this.set($e.VIEW,new Bi);const n=this;t.then(function(i){n.setView(new Bi(i))})}updateSize(){const t=this.getTargetElement();let n;if(t){const r=getComputedStyle(t),s=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(n=[s,o],!Bx(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&rM("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!Zs(n,i))&&(this.setSize(n),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let n;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}}};function x$(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const n={},i=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new fm({layers:e.layers});n[$e.LAYERGROUP]=i,n[$e.TARGET]=e.target,n[$e.VIEW]=e.view instanceof Bi?e.view:new Bi;let r;e.controls!==void 0&&(Array.isArray(e.controls)?r=new Hi(e.controls.slice()):($t(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=e.controls));let s;e.interactions!==void 0&&(Array.isArray(e.interactions)?s=new Hi(e.interactions.slice()):($t(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=e.interactions));let o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new Hi(e.overlays.slice()):($t(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=e.overlays):o=new Hi,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:n}}const E$=b$;class V1 extends Fi{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const n=t;this.setGeometry(n)}else{const n=t;this.setProperties(n)}}clone(){const t=new V1(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&t.setGeometry(n.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ee(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Ft(t,Et.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?T$(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function T$(e){if(typeof e=="function")return e;let t;return Array.isArray(e)?t=e:($t(typeof e.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}const Ry=V1;class C${constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,n){if(n){let i=n.dataProjection?Oe(n.dataProjection):this.readProjection(t);n.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Oe(i),i.setWorldExtent(n.extent)),n={dataProjection:i,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return vt()}readFeature(t,n){return vt()}readFeatures(t,n){return vt()}readGeometry(t,n){return vt()}readProjection(t){return vt()}writeFeature(t,n){return vt()}writeFeatures(t,n){return vt()}writeGeometry(t,n){return vt()}}function kM(e,t,n){const i=n?Oe(n.featureProjection):null,r=n?Oe(n.dataProjection):null;let s;if(i&&r&&!xo(i,r)?s=(t?e.clone():e).transform(t?i:r,t?r:i):s=e,t&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===e&&(s=e.clone()),s.applyTransform(a)}return s}class S$ extends C${constructor(){super()}getType(){return"json"}readFeature(t,n){return this.readFeatureFromObject(ih(t),this.getReadOptions(t,n))}readFeatures(t,n){return this.readFeaturesFromObject(ih(t),this.getReadOptions(t,n))}readFeatureFromObject(t,n){return vt()}readFeaturesFromObject(t,n){return vt()}readGeometry(t,n){return this.readGeometryFromObject(ih(t),this.getReadOptions(t,n))}readGeometryFromObject(t,n){return vt()}readProjection(t){return this.readProjectionFromObject(ih(t))}readProjectionFromObject(t){return vt()}writeFeature(t,n){return JSON.stringify(this.writeFeatureObject(t,n))}writeFeatureObject(t,n){return vt()}writeFeatures(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))}writeFeaturesObject(t,n){return vt()}writeGeometry(t,n){return JSON.stringify(this.writeGeometryObject(t,n))}writeGeometryObject(t,n){return vt()}}function ih(e){if(typeof e=="string"){const t=JSON.parse(e);return t||null}return e!==null?e:null}const M$=S$;function PM(e,t,n,i,r,s,o){let a,l;const c=(n-t)/i;if(c===1)a=t;else if(c===2)a=t,l=r;else if(c!==0){let u=e[t],f=e[t+1],h=0;const d=[0];for(let _=t+i;_<n;_+=i){const p=e[_],y=e[_+1];h+=Math.sqrt((p-u)*(p-u)+(y-f)*(y-f)),d.push(h),u=p,f=y}const g=r*h,m=CN(d,g);m<0?(l=(g-d[-m-2])/(d[-m-1]-d[-m-2]),a=t+(-m-2)*i):a=t+m*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?e[a+u]:Pn(e[a+u],e[a+i+u],l);return s}function Iy(e,t,n,i,r,s){if(n==t)return null;let o;if(r<e[t+i-1])return s?(o=e.slice(t,t+i),o[i-1]=r,o):null;if(e[n-1]<r)return s?(o=e.slice(n-i,n),o[i-1]=r,o):null;if(r==e[t+i-1])return e.slice(t,t+i);let a=t/i,l=n/i;for(;a<l;){const h=a+l>>1;r<e[(h+1)*i-1]?l=h:a=h+1}const c=e[a*i-1];if(r==c)return e.slice((a-1)*i,(a-1)*i+i);const u=e[(a+1)*i-1],f=(r-c)/(u-c);o=[];for(let h=0;h<i-1;++h)o.push(Pn(e[(a-1)*i+h],e[a*i+h],f));return o.push(r),o}function R$(e,t,n,i,r,s,o){if(o)return Iy(e,t,n[n.length-1],i,r,s);let a;if(r<e[i-1])return s?(a=e.slice(0,i),a[i-1]=r,a):null;if(e[e.length-1]<r)return s?(a=e.slice(e.length-i),a[i-1]=r,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(t!=u){if(r<e[t+i-1])return null;if(r<=e[u-1])return Iy(e,t,u,i,r,!1);t=u}}return null}function FM(e,t,n,i){let r=e[t],s=e[t+1],o=0;for(let a=t+i;a<n;a+=i){const l=e[a],c=e[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class bd extends fa{constructor(t,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendCoordinate(t){this.flatCoordinates?Nr(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new bd(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<ca(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(P1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),N1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,r))}forEachSegment(t){return mM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,Iy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n))}getCoordinates(){return Ls(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,n){return PM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)}getLength(){return FM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const n=[];return n.length=z1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new bd(n,"XY")}getType(){return"LineString"}intersectsExtent(t){return lm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=am(this.flatCoordinates,0,t,this.stride),this.changed()}}const xd=bd;class Ed extends fa{constructor(t,n,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,n);else if(n!==void 0&&i)this.setFlatCoordinates(n,t),this.ends_=i;else{let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout()),Nr(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?Nr(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ed(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,r){return r<ca(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(F1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),D1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,r))}getCoordinateAtM(t,n,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,i=i!==void 0?i:!1,R$(this.flatCoordinates,0,this.ends_,this.stride,t,n,i))}getCoordinates(){return _u(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new xd(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,n=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new xd(t.slice(s,l),i);r.push(c),s=l}return r}getFlatMidpoints(){const t=[],n=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=PM(n,i,l,s,.5);Nr(t,c),i=l}return t}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=UD(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new Ed(n,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return JD(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=$1(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const I$=Ed;class X1 extends fa{constructor(t,n){super(),n&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}appendPoint(t){this.flatCoordinates?Nr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new X1(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,r){if(r<ca(this.getExtent(),t,n))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=$o(t,n,s[a],s[a+1]);if(c<r){r=c;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return Ls(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new vl(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,n=this.layout,i=this.stride,r=[];for(let s=0,o=t.length;s<o;s+=i){const a=new vl(t.slice(s,s+i),n);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const n=this.flatCoordinates,i=this.stride;for(let r=0,s=n.length;r<s;r+=i){const o=n[r],a=n[r+1];if(C1(t,o,a))return!0}return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=am(this.flatCoordinates,0,t,this.stride),this.changed()}}const NM=X1;function A$(e,t,n,i){const r=[];let s=oi();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=HS(e,t,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return r}class Td extends fa{constructor(t,n,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,c=s.length;l<c;++l){const u=s[l];l===0&&(r=u.getLayout());const f=o.length,h=u.getEnds();for(let d=0,g=h.length;d<g;++d)h[d]+=f;Nr(o,u.getFlatCoordinates()),a.push(h)}n=r,t=o,i=a}n!==void 0&&i?(this.setFlatCoordinates(n,t),this.endss_=i):this.setCoordinates(t,n)}appendPolygon(t){let n;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Nr(this.flatCoordinates,t.getFlatCoordinates()),n=t.getEnds().slice();for(let r=0,s=n.length;r<s;++r)n[r]+=i}this.endss_.push(n),this.changed()}clone(){const t=this.endss_.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=this.endss_[r].slice();const i=new Td(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}closestPointXY(t,n,i,r){return r<ca(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(WD(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),GD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,i,r))}containsXY(t,n){return qD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)}getArea(){return HD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Dx(n,0,this.endss_,this.stride,t)):n=this.flatCoordinates,vy(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=A$(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=KD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new NM(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;e8(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Dx(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=XD(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new Td(n,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let n;if(t===0)n=0;else{const s=this.endss_[t-1];n=s[s.length-1]}const i=this.endss_[t].slice(),r=i[i.length-1];if(n!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=n;return new md(this.flatCoordinates.slice(n,r),this.layout,i)}getPolygons(){const t=this.layout,n=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(s!==0)for(let f=0,h=l.length;f<h;++f)l[f]-=s;const u=new md(n.slice(s,c),t,l);r.push(u),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return QD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=BD(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const L$=Td;class Cd extends cM{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ee),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,n=this.geometries_.length;t<n;++t)this.changeEventsKeys_.push(Ft(this.geometries_[t],Et.CHANGE,this.changed,this))}clone(){const t=new Cd(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,n,i,r){if(r<ca(this.getExtent(),t,n))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(t,n,i,r);return r}containsXY(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(t,n))return!0;return!1}computeExtent(t){Ku(t);const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)jS(t,n[i].getExtent());return t}getGeometries(){return Ux(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(t);n.push(l),l!==a&&(r=!0)}if(r){const s=new Cd(null);return s.setGeometriesArray(n),s}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(t,n);this.changed()}scale(t,n,i){i||(i=Zo(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(t,n,i);this.changed()}setGeometries(t){this.setGeometriesArray(Ux(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()}translate(t,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(t,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Ux(e){const t=[];for(let n=0,i=e.length;n<i;++n)t.push(e[n].clone());return t}const O$=Cd;class k$ extends M${constructor(t){t=t||{},super(),this.dataProjection=Oe(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Oe(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,n){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const r=Ay(i.geometry,n),s=new Ry;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,n){const i=t;let r=null;if(i.type==="FeatureCollection"){const s=t;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a)r.push(this.readFeatureFromObject(o[a],n))}else r=[this.readFeatureFromObject(t,n)];return r}readGeometryFromObject(t,n){return Ay(t,n)}readProjectionFromObject(t){const n=t.crs;let i;if(n)if(n.type=="name")i=Oe(n.properties.name);else if(n.type==="EPSG")i=Oe("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,n){n=this.adaptOptions(n);const i={type:"Feature",geometry:null,properties:null},r=t.getId();if(r!==void 0&&(i.id=r),!t.hasProperties())return i;const s=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=Ly(o,n),delete s[t.getGeometryName()]),_l(s)||(i.properties=s),i}writeFeaturesObject(t,n){n=this.adaptOptions(n);const i=[];for(let r=0,s=t.length;r<s;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,n){return Ly(t,this.adaptOptions(n))}}function Ay(e,t){if(!e)return null;let n;switch(e.type){case"Point":{n=F$(e);break}case"LineString":{n=N$(e);break}case"Polygon":{n=W$(e);break}case"MultiPoint":{n=$$(e);break}case"MultiLineString":{n=D$(e);break}case"MultiPolygon":{n=z$(e);break}case"GeometryCollection":{n=P$(e);break}default:throw new Error("Unsupported GeoJSON type: "+e.type)}return kM(n,!1,t)}function P$(e,t){const n=e.geometries.map(function(i){return Ay(i,t)});return new O$(n)}function F$(e){return new vl(e.coordinates)}function N$(e){return new xd(e.coordinates)}function D$(e){return new I$(e.coordinates)}function $$(e){return new NM(e.coordinates)}function z$(e){return new L$(e.coordinates)}function W$(e){return new md(e.coordinates)}function Ly(e,t){e=kM(e,!0,t);const n=e.getType();let i;switch(n){case"Point":{i=X$(e);break}case"LineString":{i=Y$(e);break}case"Polygon":{i=H$(e,t);break}case"MultiPoint":{i=U$(e);break}case"MultiLineString":{i=B$(e);break}case"MultiPolygon":{i=V$(e,t);break}case"GeometryCollection":{i=G$(e,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return i}function G$(e,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(i){return Ly(i,t)})}}function Y$(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function B$(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function U$(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function V$(e,t){let n;return t&&(n=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(n)}}function X$(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function H$(e,t){let n;return t&&(n=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(n)}}const j$=k$;class H1{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new H1({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const j1=H1,Rt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Z1{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Nn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Z1({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return vt()}getImage(t){return vt()}getHitDetectionImage(){return vt()}getPixelRatio(t){return 1}getImageState(){return vt()}getImageSize(){return vt()}getOrigin(){return vt()}getSize(){return vt()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Nn(t)}listenImageChange(t){vt()}load(){vt()}unlistenImageChange(t){vt()}}const DM=Z1;class Z$ extends Zu{constructor(t,n,i,r){super(),this.extent=t,this.pixelRatio_=i,this.resolution=n,this.state=typeof r=="function"?Rt.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(Et.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Rt.IDLE&&this.loader){this.state=Rt.LOADING,this.changed();const t=this.getResolution(),n=Array.isArray(t)?t[0]:t;IN(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=Rt.LOADED}).catch(i=>{this.state=Rt.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function q$(e,t,n){const i=e;let r=!0,s=!1,o=!1;const a=[ad(i,Et.LOAD,function(){o=!0,s||t()})];return i.src&&US?(s=!0,i.decode().then(function(){r&&t()}).catch(function(l){r&&(o?t():n())})):a.push(ad(i,Et.ERROR,n)),function(){r=!1,a.forEach(ee)}}function K$(e,t){return new Promise((n,i)=>{function r(){o(),n(e)}function s(){o(),i(new Error("Image load error"))}function o(){e.removeEventListener("load",r),e.removeEventListener("error",s)}e.addEventListener("load",r),e.addEventListener("error",s),t&&(e.src=t)})}function J$(e,t){return t&&(e.src=t),US?new Promise((n,i)=>e.decode().then(()=>n(e),i)):K$(e)}const Q$=Z$;let _c=null;class t7 extends Zu{constructor(t,n,i,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?Rt.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=n,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Rt.LOADED){_c||(_c=mn(1,1,void 0,{willReadFrequently:!0})),_c.drawImage(this.image_,0,0);try{_c.getImageData(0,0,1,1),this.tainted_=!1}catch{_c=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Et.CHANGE)}handleImageError_(){this.imageState_=Rt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Rt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],n=this.size_[1],i=mn(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Rt.IDLE){this.image_||this.initializeImage_(),this.imageState_=Rt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&J$(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Rt.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*t),i.height=Math.ceil(n.height*t);const r=i.getContext("2d");r.scale(t,t),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=JS(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[t]=i}}function e7(e,t,n,i,r){let s=t===void 0?void 0:cd.get(t,n,r);return s||(s=new t7(e,e instanceof HTMLImageElement?e.src||void 0:t,n,i,r),cd.set(t,n,r,s)),s}function Vx(e,t,n,i){return n!==void 0&&i!==void 0?[n/e,i/t]:n!==void 0?n/e:i!==void 0?i/t:1}class q1 extends DM{constructor(t){t=t||{};const n=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:n,rotation:i,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;$t(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Vt(o)),$t(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),$t(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=Rt.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?Rt.LOADED:Rt.IDLE:l=Rt.LOADING:l=Rt.LOADED),this.color_=t.color!==void 0?ld(t.color):null,this.iconImage_=e7(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let c,u;if(t.size)[c,u]=t.size;else{const f=this.getImage(1);if(f.width&&f.height)c=f.width,u=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=t;const h=()=>{if(this.unlistenImageChange(h),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(Vx(d[0],d[1],t.width,t.height))};this.listenImageChange(h);return}}c!==void 0&&this.setScale(Vx(c,u,t.width,t.height))}}clone(){let t,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new q1({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]-n[0]/i[0],t[1]+n[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Rt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Rt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(Et.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(Et.CHANGE,t)}}const Sd=q1;class K1{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new K1({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const J1=K1;function ji(e){return Array.isArray(e)?QS(e):e}class Q1 extends DM{constructor(t){const n=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:n,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),n=new Q1({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const t=this.size_;if(!t)return null;const n=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-n[0]/i[0],t[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let n=this.canvas_[t];if(!n){const i=this.renderOptions_,r=mn(i.size*t,i.size*t);this.draw_(i,r,t),n=r.canvas,this.canvas_[t]=n}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Rt.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const b=r;r=s,s=b}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,f=Math.sqrt(l*l+u*u),h=f/l;if(t==="miter"&&h<=i)return h*n;const d=n/2/h,g=n/2*(u/f),_=Math.sqrt((r+d)*(r+d)+g*g)-r;if(this.radius2_===void 0||t==="bevel")return _*2;const p=r*Math.sin(a),y=Math.sqrt(r*r-p*p),v=s-y,x=Math.sqrt(p*p+v*v)/p;if(x<=i){const b=x*n/2-s-r;return 2*Math.max(_,b)}return _*2}createRenderOptions(){let t=bl,n=xl,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=vu),o=ji(o),a=this.stroke_.getWidth(),a===void 0&&(a=xu),r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),n=this.stroke_.getLineJoin(),n===void 0&&(n=xl),t=this.stroke_.getLineCap(),t===void 0&&(t=bl),i=this.stroke_.getMiterLimit(),i===void 0&&(i=wu));const l=this.calculateLineJoinSize_(n,a,i),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:t,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=xn),n.fillStyle=ji(r),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineCap=t.lineCap,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=ld(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){const r=mn(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let n=this.points_;const i=this.radius_;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,c=a%2===0?i:r;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=xn,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}}const $M=Q1;class tw extends $M{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),n=new tw({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(t){this.radius_=t,this.render()}}const zM=tw;let WM=class GM{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Xx,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new GM({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(n){return n.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Xx,this.geometry_=t}setZIndex(t){this.zIndex_=t}};function n7(e){let t;if(typeof e=="function")t=e;else{let n;Array.isArray(e)?n=e:($t(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[e]),t=function(){return n}}return t}let $0=null;function i7(e,t){if(!$0){const n=new j1({color:"rgba(255,255,255,0.4)"}),i=new J1({color:"#3399CC",width:1.25});$0=[new WM({image:new zM({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return $0}function Xx(e){return e.getGeometry()}const Go=WM,r7="#333";let s7=class YM{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Nn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new j1({color:r7}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new YM({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Nn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}};const o7=s7;function a7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const rh={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class l7 extends cm{constructor(t){t=t||{};const n=Object.assign({},t);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(rh.PRELOAD)}setPreload(t){this.set(rh.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(rh.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(rh.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const c7=l7;class u7 extends GS{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return vt()}getData(t){return null}prepareFrame(t){return vt()}renderFrame(t,n){return vt()}loadedTileCallback(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i}createLoadedTileFinder(t,n,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,s,o)}}forEachFeatureAtCoordinate(t,n,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const n=t.target;(n.getState()===Rt.LOADED||n.getState()===Rt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let n=t.getState();return n!=Rt.LOADED&&n!=Rt.ERROR&&t.addEventListener(Et.CHANGE,this.boundHandleImageChange_),n==Rt.IDLE&&(t.load(),n=t.getState()),n==Rt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const f7=u7,Hx=[];let Wa=null;function h7(){Wa=mn(1,1,void 0,{willReadFrequently:!0})}class d7 extends f7{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Si(),this.pixelTransform=Si(),this.inversePixelTransform=Si(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,n,i){Wa||h7(),Wa.clearRect(0,0,1,1);let r;try{Wa.drawImage(t,n,i,1,1,0,0,1,1),r=Wa.getImageData(0,0,1,1).data}catch{return Wa=null,null}return r}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,n,i){const r=this.getLayer().getClassName();let s,o;if(t&&t.className===r&&(!i||t&&t.style.backgroundColor&&Zs(ld(t.style.backgroundColor),ld(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=mn();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,n,i){const r=ua(i),s=sm(i),o=rm(i),a=im(i);Te(n.coordinateToPixelTransform,r),Te(n.coordinateToPixelTransform,s),Te(n.coordinateToPixelTransform,o),Te(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Te(l,r),Te(l,s),Te(l,o),Te(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,n,i){const r=this.getLayer();if(r.hasListener(t)){const s=new bM(t,this.inversePixelTransform,i,n);r.dispatchEvent(s)}}preRender(t,n){this.frameState=n,this.dispatchRenderEvent_(Ki.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(Ki.POSTRENDER,t,n)}getRenderTransform(t,n,i,r,s,o,a){const l=s/2,c=o/2,u=r/n,f=-u,h=-t[0]+a,d=-t[1];return Ri(this.tempTransform,l,c,u,f,-i,h,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const ew=d7;class g7 extends Zu{constructor(t,n,i){super(),i=i||{},this.tileCoord=t,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Et.CHANGE)}release(){this.state===ht.ERROR&&this.setState(ht.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==ht.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,n=this;do{if(t.getState()==ht.LOADED){t.interimTile=null;break}else t.getState()==ht.LOADING?n=t:t.getState()==ht.IDLE?n.interimTile=t.interimTile:n=t;t=n.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==ht.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){vt()}getAlpha(t,n){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;const r=n-i+1e3/60;return r>=this.transition_?1:aM(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const BM=g7;class m7 extends BM{constructor(t,n,i,r,s,o){super(t,n,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=ht.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ht.ERROR,this.unlistenImage_(),this.image_=p7(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=ht.LOADED:this.state=ht.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ht.ERROR&&(this.state=ht.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ht.IDLE&&(this.state=ht.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=q$(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function p7(){const e=mn(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}const UM=m7,y7=.5,_7=10,jx=.25;class w7{constructor(t,n,i,r,s,o){this.sourceProj_=t,this.targetProj_=n;let a={};const l=dd(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){const v=y[0]+"/"+y[1];return a[v]||(a[v]=l(y)),a[v]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Qt(r)>=Qt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Qt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Qt(this.targetProj_.getExtent()):null;const c=ua(i),u=sm(i),f=rm(i),h=im(i),d=this.transformInv_(c),g=this.transformInv_(u),m=this.transformInv_(f),_=this.transformInv_(h),p=_7+(o?Math.max(0,Math.ceil(Math.log2(gy(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,f,h,d,g,m,_,p),this.wrapsXInSource_){let y=1/0;this.triangles_.forEach(function(v,w,x){y=Math.min(y,v.source[0][0],v.source[1][0],v.source[2][0])}),this.triangles_.forEach(v=>{if(Math.max(v.source[0][0],v.source[1][0],v.source[2][0])-y>this.sourceWorldWidth_/2){const w=[[v.source[0][0],v.source[0][1]],[v.source[1][0],v.source[1][1]],[v.source[2][0],v.source[2][1]]];w[0][0]-y>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-y>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-y>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);const x=Math.min(w[0][0],w[1][0],w[2][0]);Math.max(w[0][0],w[1][0],w[2][0])-x<this.sourceWorldWidth_/2&&(v.source=w)}})}a={}}addTriangle_(t,n,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,n,i]})}addQuad_(t,n,i,r,s,o,a,l,c){const u=vx([s,o,a,l]),f=this.sourceWorldWidth_?Qt(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&f>.5&&f<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const _=vx([t,n,i,r]);g=Qt(_)/this.targetWorldWidth_>jx||g}!d&&this.sourceProj_.isGlobal()&&f&&(g=f>jx||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!hn(u,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!g){const _=[(t[0]+i[0])/2,(t[1]+i[1])/2],p=this.transformInv_(_);let y;d?y=(zo(s[0],h)+zo(a[0],h))/2-zo(p[0],h):y=(s[0]+a[0])/2-p[0];const v=(s[1]+a[1])/2-p[1];g=y*y+v*v>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const _=[(n[0]+i[0])/2,(n[1]+i[1])/2],p=this.transformInv_(_),y=[(r[0]+t[0])/2,(r[1]+t[1])/2],v=this.transformInv_(y);this.addQuad_(t,n,_,y,s,o,p,v,c-1),this.addQuad_(y,_,i,r,v,p,a,l,c-1)}else{const _=[(t[0]+n[0])/2,(t[1]+n[1])/2],p=this.transformInv_(_),y=[(i[0]+r[0])/2,(i[1]+r[1])/2],v=this.transformInv_(y);this.addQuad_(t,_,y,r,s,p,v,l,c-1),this.addQuad_(_,n,i,y,p,o,a,v,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(t,i,r,s,a,l),m&14||this.addTriangle_(t,i,n,s,a,o),m&&(m&13||this.addTriangle_(n,r,t,o,l,s),m&7||this.addTriangle_(n,r,i,o,l,a))}calculateSourceExtent(){const t=oi();return this.triangles_.forEach(function(n,i,r){const s=n.source;Qc(t,s[0]),Qc(t,s[1]),Qc(t,s[2])}),t}getTriangles(){return this.triangles_}}const v7=w7;let z0;const rl=[];function Zx(e,t,n,i,r){e.beginPath(),e.moveTo(0,0),e.lineTo(t,n),e.lineTo(i,r),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,i)+1,Math.max(n,r)),e.restore()}function W0(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function b7(){if(z0===void 0){const e=mn(6,6,rl);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Zx(e,4,5,4,0),Zx(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;z0=W0(t,0)||W0(t,4)||W0(t,8),um(e),rl.push(e.canvas)}return z0}function qx(e,t,n,i){const r=CD(n,t,e);let s=hd(t,i,n);const o=t.getMetersPerUnit();o!==void 0&&(s*=o);const a=e.getMetersPerUnit();a!==void 0&&(s/=a);const l=e.getExtent();if(!l||qu(l,r)){const c=hd(e,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function x7(e,t,n,i){const r=Zo(n);let s=qx(e,t,r,i);return(!isFinite(s)||s<=0)&&qS(n,function(o){return s=qx(e,t,o,i),isFinite(s)&&s>0}),s}function E7(e,t,n,i,r,s,o,a,l,c,u,f){const h=mn(Math.round(n*e),Math.round(n*t),rl);if(f||(h.imageSmoothingEnabled=!1),l.length===0)return h.canvas;h.scale(n,n);function d(w){return Math.round(w*n)/n}h.globalCompositeOperation="lighter";const g=oi();l.forEach(function(w,x,b){jS(g,w.extent)});const m=Qt(g),_=Wn(g),p=mn(Math.round(n*m/i),Math.round(n*_/i),rl);f||(p.imageSmoothingEnabled=!1);const y=n/i;l.forEach(function(w,x,b){const E=w.extent[0]-g[0],C=-(w.extent[3]-g[3]),I=Qt(w.extent),S=Wn(w.extent);w.image.width>0&&w.image.height>0&&p.drawImage(w.image,c,c,w.image.width-2*c,w.image.height-2*c,E*y,C*y,I*y,S*y)});const v=ua(o);return a.getTriangles().forEach(function(w,x,b){const E=w.source,C=w.target;let I=E[0][0],S=E[0][1],R=E[1][0],M=E[1][1],k=E[2][0],O=E[2][1];const A=d((C[0][0]-v[0])/s),P=d(-(C[0][1]-v[1])/s),N=d((C[1][0]-v[0])/s),W=d(-(C[1][1]-v[1])/s),j=d((C[2][0]-v[0])/s),V=d(-(C[2][1]-v[1])/s),Z=I,z=S;I=0,S=0,R-=Z,M-=z,k-=Z,O-=z;const Q=[[R,M,0,0,N-A],[k,O,0,0,j-A],[0,0,R,M,W-P],[0,0,k,O,V-P]],nt=qN(Q);if(nt){if(h.save(),h.beginPath(),b7()||!f){h.moveTo(N,W);const st=4,ot=A-N,$=P-W;for(let U=0;U<st;U++)h.lineTo(N+d((U+1)*ot/st),W+d(U*$/(st-1))),U!=st-1&&h.lineTo(N+d((U+1)*ot/st),W+d((U+1)*$/(st-1)));h.lineTo(j,V)}else h.moveTo(N,W),h.lineTo(A,P),h.lineTo(j,V);h.clip(),h.transform(nt[0],nt[2],nt[1],nt[3],A,P),h.translate(g[0]-Z,g[3]-z),h.scale(i/n,-i/n),h.drawImage(p.canvas,0,0),h.restore()}}),um(p),rl.push(p.canvas),u&&(h.save(),h.globalCompositeOperation="source-over",h.strokeStyle="black",h.lineWidth=1,a.getTriangles().forEach(function(w,x,b){const E=w.target,C=(E[0][0]-v[0])/s,I=-(E[0][1]-v[1])/s,S=(E[1][0]-v[0])/s,R=-(E[1][1]-v[1])/s,M=(E[2][0]-v[0])/s,k=-(E[2][1]-v[1])/s;h.beginPath(),h.moveTo(S,R),h.lineTo(C,I),h.lineTo(M,k),h.closePath(),h.stroke()}),h.restore()),h.canvas}class T7 extends BM{constructor(t,n,i,r,s,o,a,l,c,u,f,h){super(s,ht.IDLE,{interpolate:!!h}),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const _=g?nl(d,g):d;if(gy(_)===0){this.state=ht.EMPTY;return}const p=t.getExtent();p&&(m?m=nl(m,p):m=p);const y=r.getResolution(this.wrappedTileCoord_[0]),v=x7(t,i,_,y);if(!isFinite(v)||v<=0){this.state=ht.EMPTY;return}const w=u!==void 0?u:y7;if(this.triangulation_=new v7(t,i,_,m,v*w,y),this.triangulation_.getTriangles().length===0){this.state=ht.EMPTY;return}this.sourceZ_=n.getZForResolution(v);let x=this.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(x[1]=Ae(x[1],m[1],m[3]),x[3]=Ae(x[3],m[1],m[3])):x=nl(x,m)),!gy(x))this.state=ht.EMPTY;else{const b=n.getTileRangeForExtentAndZ(x,this.sourceZ_);for(let E=b.minX;E<=b.maxX;E++)for(let C=b.minY;C<=b.maxY;C++){const I=c(this.sourceZ_,E,C,a);I&&this.sourceTiles_.push(I)}this.sourceTiles_.length===0&&(this.state=ht.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==ht.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=ht.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=E7(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=ht.LOADED}this.changed()}load(){if(this.state==ht.IDLE){this.state=ht.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const i=n.getState();if(i==ht.IDLE||i==ht.LOADING){t++;const r=Ft(n,Et.CHANGE,function(s){const o=n.getState();(o==ht.LOADED||o==ht.ERROR||o==ht.EMPTY)&&(ee(r),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,r){n.getState()==ht.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ee),this.sourcesListenerKeys_=null}release(){this.canvas_&&(um(this.canvas_.getContext("2d")),rl.push(this.canvas_),this.canvas_=null),super.release()}}const Oy=T7;class VM{constructor(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function xa(e,t,n,i,r){return r!==void 0?(r.minX=e,r.maxX=t,r.minY=n,r.maxY=i,r):new VM(e,t,n,i)}const XM=VM;class C7 extends ew{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=oi(),this.tmpTileRange_=new XM(0,0,0,0)}isDrawableTile(t){const n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==ht.LOADED||i==ht.EMPTY||i==ht.ERROR&&!r}getTile(t,n,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(t,n,i,s,o);return c.getState()==ht.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Te(n.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!qu(s,r))return null;const o=n.pixelRatio,a=n.viewState.projection,l=n.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),f=c.getTilePixelRatio(n.pixelRatio);for(let h=u.getZForResolution(l.resolution);h>=u.getMinZoom();--h){const d=u.getTileCoordForCoordAndZ(r,h),g=c.getTile(h,d[1],d[2],o,a);if(!(g instanceof UM||g instanceof Oy)||g instanceof Oy&&g.getState()===ht.EMPTY)return null;if(g.getState()!==ht.LOADED)continue;const m=u.getOrigin(h),_=Nn(u.getTileSize(h)),p=u.getResolution(h),y=Math.floor(f*((r[0]-m[0])/p-d[1]*_[0])),v=Math.floor(f*((m[1]-r[1])/p-d[2]*_[1])),w=Math.round(f*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),y+w,v+w)}return null}loadedTileCallback(t,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,n,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,n){const i=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=t.pixelRatio,u=this.getLayer(),f=u.getSource(),h=f.getRevision(),d=f.getTileGridForProjection(s),g=d.getZForResolution(o,f.zDirection),m=d.getResolution(g);let _=t.extent;const p=t.viewState.resolution,y=f.getTilePixelRatio(c),v=Math.round(Qt(_)/p*c),w=Math.round(Wn(_)/p*c),x=i.extent&&Rr(i.extent);x&&(_=nl(_,Rr(i.extent)));const b=m*v/2/y,E=m*w/2/y,C=[a[0]-b,a[1]-E,a[0]+b,a[1]+E],I=d.getTileRangeForExtentAndZ(_,g),S={};S[g]={};const R=this.createLoadedTileFinder(f,s,S),M=this.tmpExtent,k=this.tmpTileRange_;this.newTiles_=!1;const O=l?py(r.center,p,l,t.size):void 0;for(let Q=I.minX;Q<=I.maxX;++Q)for(let nt=I.minY;nt<=I.maxY;++nt){if(l&&!d.tileCoordIntersectsViewport([g,Q,nt],O))continue;const st=this.getTile(g,Q,nt,t);if(this.isDrawableTile(st)){const U=Vt(this);if(st.getState()==ht.LOADED){S[g][st.tileCoord.toString()]=st;let D=st.inTransition(U);D&&i.opacity!==1&&(st.endTransition(U),D=!1),!this.newTiles_&&(D||!this.renderedTiles.includes(st))&&(this.newTiles_=!0)}if(st.getAlpha(U,t.time)===1)continue}const ot=d.getTileCoordChildTileRange(st.tileCoord,k,M);let $=!1;ot&&($=R(g+1,ot)),$||d.forEachTileCoordParentTileRange(st.tileCoord,R,k,M)}const A=m/o*c/y;Ri(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,l,-v/2,-w/2);const P=E1(this.pixelTransform);this.useContainer(n,P,this.getBackground(t));const N=this.context,W=N.canvas;nm(this.inversePixelTransform,this.pixelTransform),Ri(this.tempTransform,v/2,w/2,A,A,0,-v/2,-w/2),W.width!=v||W.height!=w?(W.width=v,W.height=w):this.containerReused||N.clearRect(0,0,v,w),x&&this.clipUnrotated(N,t,x),f.getInterpolate()||(N.imageSmoothingEnabled=!1),this.preRender(N,t),this.renderedTiles.length=0;let j=Object.keys(S).map(Number);j.sort(Ws);let V,Z,z;i.opacity===1&&(!this.containerReused||f.getOpaque(t.viewState.projection))?j=j.reverse():(V=[],Z=[]);for(let Q=j.length-1;Q>=0;--Q){const nt=j[Q],st=f.getTilePixelSize(nt,c,s),$=d.getResolution(nt)/m,U=st[0]*$*A,D=st[1]*$*A,X=d.getTileCoordForCoordAndZ(ua(C),nt),K=d.getTileCoordExtent(X),T=Te(this.tempTransform,[y*(K[0]-C[0])/m,y*(C[3]-K[3])/m]),L=y*f.getGutterForProjection(s),F=S[nt];for(const Y in F){const B=F[Y],H=B.tileCoord,rt=X[1]-H[1],J=Math.round(T[0]-(rt-1)*U),tt=X[2]-H[2],q=Math.round(T[1]-(tt-1)*D),ct=Math.round(T[0]-rt*U),at=Math.round(T[1]-tt*D),ut=J-ct,ft=q-at,xt=g===nt,Ot=xt&&B.getAlpha(Vt(this),t.time)!==1;let Tt=!1;if(!Ot)if(V){z=[ct,at,ct+ut,at,ct+ut,at+ft,ct,at+ft];for(let jt=0,ye=V.length;jt<ye;++jt)if(g!==nt&&nt<Z[jt]){const ce=V[jt];hn([ct,at,ct+ut,at+ft],[ce[0],ce[3],ce[4],ce[7]])&&(Tt||(N.save(),Tt=!0),N.beginPath(),N.moveTo(z[0],z[1]),N.lineTo(z[2],z[3]),N.lineTo(z[4],z[5]),N.lineTo(z[6],z[7]),N.moveTo(ce[6],ce[7]),N.lineTo(ce[4],ce[5]),N.lineTo(ce[2],ce[3]),N.lineTo(ce[0],ce[1]),N.clip())}V.push(z),Z.push(nt)}else N.clearRect(ct,at,ut,ft);this.drawTileImage(B,t,ct,at,ut,ft,L,xt),V&&!Ot?(Tt&&N.restore(),this.renderedTiles.unshift(B)):this.renderedTiles.push(B),this.updateUsedTiles(t.usedTiles,f,B)}}return this.renderedRevision=h,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!yu(this.renderedExtent_,C),this.renderedExtent_=C,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(t,f,d,c,s,_,g,u.getPreload()),this.scheduleExpireCache(t,f),this.postRender(N,t),i.extent&&N.restore(),N.imageSmoothingEnabled=!0,P!==W.style.transform&&(W.style.transform=P),this.container}drawTileImage(t,n,i,r,s,o,a,l){const c=this.getTileImage(t);if(!c)return;const u=Vt(this),f=n.layerStatesArray[n.layerIndex],h=f.opacity*(l?t.getAlpha(u,n.time):1),d=h!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),d&&this.context.restore(),h!==f.opacity?n.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,n){if(n.canExpireCache()){const i=(function(r,s,o){const a=Vt(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,n);t.postRenderFunctions.push(i)}}updateUsedTiles(t,n,i){const r=Vt(n);r in t||(t[r]={}),t[r][i.getKey()]=!0}manageTilePyramid(t,n,i,r,s,o,a,l,c){const u=Vt(n);u in t.wantedTiles||(t.wantedTiles[u]={});const f=t.wantedTiles[u],h=t.tileQueue,d=i.getMinZoom(),g=t.viewState.rotation,m=g?py(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let _=0,p,y,v,w,x,b;for(b=d;b<=a;++b)for(y=i.getTileRangeForExtentAndZ(o,b,y),v=i.getResolution(b),w=y.minX;w<=y.maxX;++w)for(x=y.minY;x<=y.maxY;++x)g&&!i.tileCoordIntersectsViewport([b,w,x],m)||(a-b<=l?(++_,p=n.getTile(b,w,x,r,s),p.getState()==ht.IDLE&&(f[p.getKey()]=!0,h.isKeyQueued(p.getKey())||h.enqueue([p,u,i.getTileCoordCenter(p.tileCoord),v])),c!==void 0&&c(p)):n.useTile(b,w,x,s));n.updateCacheSize(_,s)}}const S7=C7;class M7 extends c7{constructor(t){super(t)}createRenderer(){return new S7(this)}}const R7=M7;function I7(e,t,n,i,r){HM(e,t,n||0,i||e.length-1,r||A7)}function HM(e,t,n,i,r){for(;i>n;){if(i-n>600){var s=i-n+1,o=t-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),u=Math.max(n,Math.floor(t-o*l/s+c)),f=Math.min(i,Math.floor(t+(s-o)*l/s+c));HM(e,t,u,f,r)}var h=e[t],d=n,g=i;for(wc(e,n,t),r(e[i],h)>0&&wc(e,n,i);d<g;){for(wc(e,d,g),d++,g--;r(e[d],h)<0;)d++;for(;r(e[g],h)>0;)g--}r(e[n],h)===0?wc(e,n,g):(g++,wc(e,g,i)),g<=t&&(n=g+1),t<=g&&(i=g-1)}}function wc(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function A7(e,t){return e<t?-1:e>t?1:0}let nw=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const i=[];if(!oh(t,n))return i;const r=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?r(a):a;oh(t,l)&&(n.leaf?i.push(a):Y0(t,l)?this._all(a,i):s.push(a))}n=s.pop()}return i}collides(t){let n=this.data;if(!oh(t,n))return!1;const i=[];for(;n;){for(let r=0;r<n.children.length;r++){const s=n.children[r],o=n.leaf?this.toBBox(s):s;if(oh(t,o)){if(n.leaf||Y0(t,o))return!0;i.push(s)}}n=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Ga([]),this}remove(t,n){if(!t)return this;let i=this.data;const r=this.toBBox(t),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const u=L7(t,i.children,n);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&Y0(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const i=[];for(;t;)t.leaf?n.push(...t.children):i.push(...t.children),t=i.pop();return n}_build(t,n,i,r){const s=i-n+1;let o=this._maxEntries,a;if(s<=o)return a=Ga(t.slice(n,i+1)),Ea(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Ga([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));Kx(t,n,i,c,this.compareMinX);for(let u=n;u<=i;u+=c){const f=Math.min(u+c-1,i);Kx(t,u,f,l,this.compareMinY);for(let h=u;h<=f;h+=l){const d=Math.min(h+l-1,f);a.children.push(this._build(t,h,d,r-1))}}return Ea(a,this.toBBox),a}_chooseSubtree(t,n,i,r){for(;r.push(n),!(n.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=G0(c),f=P7(t,c)-u;f<o?(o=f,s=u<s?u:s,a=c):f===o&&u<s&&(s=u,a=c)}n=a||n.children[0]}return n}_insert(t,n,i){const r=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(t),Dc(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)}_split(t,n){const i=t[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=Ga(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Ea(i,this.toBBox),Ea(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,n){this.data=Ga([t,n]),this.data.height=t.height+1,this.data.leaf=!1,Ea(this.data,this.toBBox)}_chooseSplitIndex(t,n,i){let r,s=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=Nc(t,0,a,this.toBBox),c=Nc(t,a,i,this.toBBox),u=F7(l,c),f=G0(l)+G0(c);u<s?(s=u,r=a,o=f<o?f:o):u===s&&f<o&&(o=f,r=a)}return r||i-n}_chooseSplitAxis(t,n,i){const r=t.leaf?this.compareMinX:O7,s=t.leaf?this.compareMinY:k7,o=this._allDistMargin(t,n,i,r),a=this._allDistMargin(t,n,i,s);o<a&&t.children.sort(r)}_allDistMargin(t,n,i,r){t.children.sort(r);const s=this.toBBox,o=Nc(t,0,n,s),a=Nc(t,i-n,i,s);let l=sh(o)+sh(a);for(let c=n;c<i-n;c++){const u=t.children[c];Dc(o,t.leaf?s(u):u),l+=sh(o)}for(let c=i-n-1;c>=n;c--){const u=t.children[c];Dc(a,t.leaf?s(u):u),l+=sh(a)}return l}_adjustParentBBoxes(t,n,i){for(let r=i;r>=0;r--)Dc(n[r],t)}_condense(t){for(let n=t.length-1,i;n>=0;n--)t[n].children.length===0?n>0?(i=t[n-1].children,i.splice(i.indexOf(t[n]),1)):this.clear():Ea(t[n],this.toBBox)}};function L7(e,t,n){if(!n)return t.indexOf(e);for(let i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function Ea(e,t){Nc(e,0,e.children.length,t,e)}function Nc(e,t,n,i,r){r||(r=Ga(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=t;s<n;s++){const o=e.children[s];Dc(r,e.leaf?i(o):o)}return r}function Dc(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function O7(e,t){return e.minX-t.minX}function k7(e,t){return e.minY-t.minY}function G0(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function sh(e){return e.maxX-e.minX+(e.maxY-e.minY)}function P7(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function F7(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function Y0(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function oh(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Ga(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Kx(e,t,n,i,r){const s=[t,n];for(;s.length;){if(n=s.pop(),t=s.pop(),n-t<=i)continue;const o=t+Math.ceil((n-t)/i/2)*i;I7(e,o,t,n,r),s.push(t,o,o,n)}}let jl=0;const qe=1<<jl++,Lt=1<<jl++,El=1<<jl++,iw=1<<jl++,nf=1<<jl++,ui=Math.pow(2,jl)-1,jM={[qe]:"boolean",[Lt]:"number",[El]:"string",[iw]:"color",[nf]:"number[]"},N7=Object.keys(jM).map(Number).sort(Ws);function Md(e){const t=[];for(const n of N7)D7(e,n)&&t.push(jM[n]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function D7(e,t){return(e&t)===t}function ZM(e,t){return!!(e&t)}class Os{constructor(t,n){this.type=t,this.value=n}}class $7{constructor(t,n,...i){this.type=t,this.operator=n,this.args=i}}function qM(){return{variables:new Set,properties:new Set}}function hm(e,t){switch(typeof e){case"boolean":return new Os(qe,e);case"number":return new Os(Lt,e);case"string":return new Os(El,e)}if(!Array.isArray(e))throw new Error("Expression must be an array or a primitive value");if(e.length===0)throw new Error("Empty expression");if(typeof e[0]=="string")return B7(e,t);for(const i of e)if(typeof i!="number")throw new Error("Expected an array of numbers");let n=nf;return(e.length===3||e.length===4)&&(n|=iw),new Os(n,e)}const et={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},z7={[et.Number]:Zt(te(1,1/0,ui),Lt),[et.String]:Zt(te(1,1/0,ui),El),[et.Get]:Zt(W7,ui),[et.Var]:Zt(G7,ui),[et.Resolution]:Zt(Y7,Lt),[et.Any]:Zt(te(2,1/0,qe),qe),[et.All]:Zt(te(2,1/0,qe),qe),[et.Not]:Zt(te(1,1,qe),qe),[et.Equal]:Zt(te(2,2,ui),qe),[et.NotEqual]:Zt(te(2,2,ui),qe),[et.GreaterThan]:Zt(te(2,2,ui),qe),[et.GreaterThanOrEqualTo]:Zt(te(2,2,ui),qe),[et.LessThan]:Zt(te(2,2,ui),qe),[et.LessThanOrEqualTo]:Zt(te(2,2,ui),qe),[et.Multiply]:Zt(te(2,1/0,Lt),Lt),[et.Divide]:Zt(te(2,2,Lt),Lt),[et.Add]:Zt(te(2,1/0,Lt),Lt),[et.Subtract]:Zt(te(2,2,Lt),Lt),[et.Clamp]:Zt(te(3,3,Lt),Lt),[et.Mod]:Zt(te(2,2,Lt),Lt),[et.Pow]:Zt(te(2,2,Lt),Lt),[et.Abs]:Zt(te(1,1,Lt),Lt),[et.Floor]:Zt(te(1,1,Lt),Lt),[et.Ceil]:Zt(te(1,1,Lt),Lt),[et.Round]:Zt(te(1,1,Lt),Lt),[et.Sin]:Zt(te(1,1,Lt),Lt),[et.Cos]:Zt(te(1,1,Lt),Lt),[et.Atan]:Zt(te(1,2,Lt),Lt),[et.Sqrt]:Zt(te(1,1,Lt),Lt),[et.Match]:Zt(te(4,1/0,El|Lt),ui)};function W7(e,t){if(e.length!==2)throw new Error("Expected 1 argument for get operation");const n=hm(e[1],t);if(!(n instanceof Os))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.properties.add(n.value),[n]}function G7(e,t){if(e.length!==2)throw new Error("Expected 1 argument for var operation");const n=hm(e[1],t);if(!(n instanceof Os))throw new Error("Expected a literal argument for var operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");return t.variables.add(n.value),[n]}function Y7(e,t){const n=e[0];if(e.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function te(e,t,n){return function(i,r){const s=i[0],o=i.length-1;if(e===t){if(o!==e){const l=e===1?"":"s";throw new Error(`Expected ${e} argument${l} for operation ${s}, got ${o}`)}}else if(o<e||o>t)throw new Error(`Expected ${e} to ${t} arguments for operation ${s}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const c=hm(i[l+1],r);if(!ZM(n,c.type)){const u=Md(n),f=Md(c.type);throw new Error(`Unexpected type for argument ${l} of ${s} operation : got ${u} but expected ${f}`)}a[l]=c}return a}}function Zt(e,t){return function(n,i){const r=n[0],s=e(n,i);return new $7(t,r,...s)}}function B7(e,t){const n=e[0],i=z7[n];if(!i)throw new Error(`Unknown operator: ${n}`);return i(e,t)}function KM(){return{variables:{},properties:{},resolution:NaN}}function qs(e,t,n){const i=hm(e,n);if(!ZM(t,i.type)){const r=Md(t),s=Md(i.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return qo(i)}function qo(e,t){if(e instanceof Os)return function(){return e.value};const n=e.operator;switch(n){case et.Number:case et.String:return U7(e);case et.Get:case et.Var:return V7(e);case et.Resolution:return i=>i.resolution;case et.Any:case et.All:case et.Not:return H7(e);case et.Equal:case et.NotEqual:case et.LessThan:case et.LessThanOrEqualTo:case et.GreaterThan:case et.GreaterThanOrEqualTo:return X7(e);case et.Multiply:case et.Divide:case et.Add:case et.Subtract:case et.Clamp:case et.Mod:case et.Pow:case et.Abs:case et.Floor:case et.Ceil:case et.Round:case et.Sin:case et.Cos:case et.Atan:case et.Sqrt:return j7(e);case et.Match:return Z7(e);default:throw new Error(`Unsupported operator ${n}`)}}function U7(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=qo(e.args[s]);switch(n){case et.Number:case et.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function V7(e,t){const n=e.args[0];if(!(n instanceof Os))throw new Error("Expected literal name");const i=n.value;if(typeof i!="string")throw new Error("Expected string name");switch(e.operator){case et.Get:return r=>r.properties[i];case et.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function X7(e,t){const n=e.operator,i=qo(e.args[0]),r=qo(e.args[1]);switch(n){case et.Equal:return s=>i(s)===r(s);case et.NotEqual:return s=>i(s)!==r(s);case et.LessThan:return s=>i(s)<r(s);case et.LessThanOrEqualTo:return s=>i(s)<=r(s);case et.GreaterThan:return s=>i(s)>r(s);case et.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function H7(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=qo(e.args[s]);switch(n){case et.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case et.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case et.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function j7(e,t){const n=e.operator,i=e.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=qo(e.args[s]);switch(n){case et.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case et.Divide:return s=>r[0](s)/r[1](s);case et.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case et.Subtract:return s=>r[0](s)-r[1](s);case et.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case et.Mod:return s=>r[0](s)%r[1](s);case et.Pow:return s=>Math.pow(r[0](s),r[1](s));case et.Abs:return s=>Math.abs(r[0](s));case et.Floor:return s=>Math.floor(r[0](s));case et.Ceil:return s=>Math.ceil(r[0](s));case et.Round:return s=>Math.round(r[0](s));case et.Sin:return s=>Math.sin(r[0](s));case et.Cos:return s=>Math.cos(r[0](s));case et.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case et.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function Z7(e,t){const n=e.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=qo(e.args[r]);return r=>{const s=i[0](r);for(let o=1;o<n;o+=2)if(s===i[o](r))return i[o+1](r);return i[n-1](r)}}function q7(e){return!0}function K7(e){const t=qM(),n=J7(e,t),i=KM();return function(r,s){return i.properties=r.getPropertiesInternal(),i.resolution=s,n(i)}}function Jx(e){const t=qM(),n=e.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=ky(e[o],t);const r=KM(),s=new Array(n);return function(o,a){r.properties=o.getPropertiesInternal(),r.resolution=a;for(let l=0;l<n;++l)s[l]=i[l](r);return s}}function J7(e,t){const n=e.length,i=new Array(n);for(let r=0;r<n;++r){const s=e[r],o="filter"in s?qs(s.filter,qe,t):q7;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=ky(s.style[c],t)}else a=[ky(s.style,t)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(r)&&!(e[a].else&&o)){o=!0;for(const c of i[a].styles){const u=c(r);u&&s.push(u)}}}return s}}function ky(e,t){const n=Eu(e,"",t),i=Tu(e,"",t),r=Q7(e,t),s=t9(e,t),o=En(e,"z-index",t),a=new Go;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(i){const u=i(l);u&&(c=!1),a.setStroke(u)}if(r){const u=r(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function Eu(e,t,n){const i=JM(e,t+"fill-color",n);if(!i)return null;const r=new j1;return function(s){const o=i(s);return o==="none"?null:(r.setColor(o),r)}}function Tu(e,t,n){const i=En(e,t+"stroke-width",n),r=JM(e,t+"stroke-color",n);if(!i&&!r)return null;const s=bs(e,t+"stroke-line-cap",n),o=bs(e,t+"stroke-line-join",n),a=QM(e,t+"stroke-line-dash",n),l=En(e,t+"stroke-line-dash-offset",n),c=En(e,t+"stroke-miter-limit",n),u=new J1;return function(f){if(r){const h=r(f);if(h==="none")return null;u.setColor(h)}if(i&&u.setWidth(i(f)),s){const h=s(f);if(h!=="butt"&&h!=="round"&&h!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(h)}if(o){const h=o(f);if(h!=="bevel"&&h!=="round"&&h!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(h)}return a&&u.setLineDash(a(f)),l&&u.setLineDashOffset(l(f)),c&&u.setMiterLimit(c(f)),u}}function Q7(e,t){const n="text-",i=bs(e,n+"value",t);if(!i)return null;const r=Eu(e,n,t),s=Eu(e,n+"background-",t),o=Tu(e,n,t),a=Tu(e,n+"background-",t),l=bs(e,n+"font",t),c=En(e,n+"max-angle",t),u=En(e,n+"offset-x",t),f=En(e,n+"offset-y",t),h=Cu(e,n+"overflow",t),d=bs(e,n+"placement",t),g=En(e,n+"repeat",t),m=dm(e,n+"scale",t),_=Cu(e,n+"rotate-with-view",t),p=En(e,n+"rotation",t),y=bs(e,n+"align",t),v=bs(e,n+"justify",t),w=bs(e,n+"baseline",t),x=QM(e,n+"padding",t),b=new o7({});return function(E){if(b.setText(i(E)),r&&b.setFill(r(E)),s&&b.setBackgroundFill(s(E)),o&&b.setStroke(o(E)),a&&b.setBackgroundStroke(a(E)),l&&b.setFont(l(E)),c&&b.setMaxAngle(c(E)),u&&b.setOffsetX(u(E)),f&&b.setOffsetY(f(E)),h&&b.setOverflow(h(E)),d){const C=d(E);if(C!=="point"&&C!=="line")throw new Error("Expected point or line for text-placement");b.setPlacement(C)}if(g&&b.setRepeat(g(E)),m&&b.setScale(m(E)),_&&b.setRotateWithView(_(E)),p&&b.setRotation(p(E)),y){const C=y(E);if(C!=="left"&&C!=="center"&&C!=="right"&&C!=="end"&&C!=="start")throw new Error("Expected left, right, center, start, or end for text-align");b.setTextAlign(C)}if(v){const C=v(E);if(C!=="left"&&C!=="right"&&C!=="center")throw new Error("Expected left, right, or center for text-justify");b.setJustify(C)}if(w){const C=w(E);if(C!=="bottom"&&C!=="top"&&C!=="middle"&&C!=="alphabetic"&&C!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");b.setTextBaseline(C)}return x&&b.setPadding(x(E)),b}}function t9(e,t){return"icon-src"in e?e9(e,t):"shape-points"in e?n9(e,t):"circle-radius"in e?i9(e,t):null}function e9(e,t){const n="icon-",i=n+"src",r=tR(e[i],i),s=Rd(e,n+"anchor",t),o=dm(e,n+"scale",t),a=En(e,n+"opacity",t),l=Rd(e,n+"displacement",t),c=En(e,n+"rotation",t),u=Cu(e,n+"rotate-with-view",t),f=Qx(e,n+"anchor-origin"),h=t2(e,n+"anchor-x-units"),d=t2(e,n+"anchor-y-units"),g=a9(e,n+"color"),m=s9(e,n+"cross-origin"),_=o9(e,n+"offset"),p=Qx(e,n+"offset-origin"),y=Ua(e,n+"width"),v=Ua(e,n+"height"),w=r9(e,n+"size"),x=rw(e,n+"declutter"),b=new Sd({src:r,anchorOrigin:f,anchorXUnits:h,anchorYUnits:d,color:g,crossOrigin:m,offset:_,offsetOrigin:p,height:v,width:y,size:w,declutterMode:x});return function(E){return a&&b.setOpacity(a(E)),l&&b.setDisplacement(l(E)),c&&b.setRotation(c(E)),u&&b.setRotateWithView(u(E)),o&&b.setScale(o(E)),s&&b.setAnchor(s(E)),b}}function n9(e,t){const n="shape-",i=n+"points",r=eR(e[i],i),s=Eu(e,n,t),o=Tu(e,n,t),a=dm(e,n+"scale",t),l=Rd(e,n+"displacement",t),c=En(e,n+"rotation",t),u=Cu(e,n+"rotate-with-view",t),f=Ua(e,n+"radius"),h=Ua(e,n+"radius1"),d=Ua(e,n+"radius2"),g=Ua(e,n+"angle"),m=rw(e,n+"declutter-mode"),_=new $M({points:r,radius:f,radius1:h,radius2:d,angle:g,declutterMode:m});return function(p){return s&&_.setFill(s(p)),o&&_.setStroke(o(p)),l&&_.setDisplacement(l(p)),c&&_.setRotation(c(p)),u&&_.setRotateWithView(u(p)),a&&_.setScale(a(p)),_}}function i9(e,t){const n="circle-",i=Eu(e,n,t),r=Tu(e,n,t),s=En(e,n+"radius",t),o=dm(e,n+"scale",t),a=Rd(e,n+"displacement",t),l=En(e,n+"rotation",t),c=Cu(e,n+"rotate-with-view",t),u=rw(e,n+"declutter-mode"),f=new zM({radius:5,declutterMode:u});return function(h){return s&&f.setRadius(s(h)),i&&f.setFill(i(h)),r&&f.setStroke(r(h)),a&&f.setDisplacement(a(h)),l&&f.setRotation(l(h)),c&&f.setRotateWithView(c(h)),o&&f.setScale(o(h)),f}}function En(e,t,n){if(!(t in e))return;const i=qs(e[t],Lt,n);return function(r){return eR(i(r),t)}}function bs(e,t,n){if(!(t in e))return null;const i=qs(e[t],El,n);return function(r){return tR(i(r),t)}}function Cu(e,t,n){if(!(t in e))return null;const i=qs(e[t],qe,n);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function JM(e,t,n){if(!(t in e))return null;const i=qs(e[t],iw|El,n);return function(r){return nR(i(r),t)}}function QM(e,t,n){if(!(t in e))return null;const i=qs(e[t],nf,n);return function(r){return rf(i(r),t)}}function Rd(e,t,n){if(!(t in e))return null;const i=qs(e[t],nf,n);return function(r){const s=rf(i(r),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function dm(e,t,n){if(!(t in e))return null;const i=qs(e[t],nf|Lt,n);return function(r){return l9(i(r),t)}}function Ua(e,t){const n=e[t];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}}function r9(e,t){const n=e[t];if(n!==void 0){if(typeof n=="number")return Nn(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${t}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return n}}function s9(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}}function Qx(e,t){const n=e[t];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function t2(e,t){const n=e[t];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return n}}function o9(e,t){const n=e[t];if(n!==void 0)return rf(n,t)}function rw(e,t){const n=e[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function a9(e,t){const n=e[t];if(n!==void 0)return nR(n,t)}function rf(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const n=e.length;for(let i=0;i<n;++i)if(typeof e[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function tR(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function eR(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function nR(e,t){if(typeof e=="string")return e;const n=rf(e,t),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return n}function l9(e,t){if(typeof e=="number")return e;const n=rf(e,t);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return n}const e2={RENDER_ORDER:"renderOrder"};class c9 extends cm{constructor(t){t=t||{};const n=Object.assign({},t);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(e2.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new nw(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(e2.RENDER_ORDER,t)}setStyle(t){this.style_=u9(t),this.styleFunction_=t===null?void 0:n7(this.style_),this.changed()}}function u9(e){if(e===void 0)return i7;if(!e)return null;if(typeof e=="function"||e instanceof Go)return e;if(!Array.isArray(e))return Jx([e]);if(e.length===0)return[];const t=e.length,n=e[0];if(n instanceof Go){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!(o instanceof Go))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in n){const r=new Array(t);for(let s=0;s<t;++s){const o=e[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return K7(r)}return Jx(e)}const f9=c9;class h9 extends ew{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,s=r.resolution,o=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(n.extent!==void 0&&(l=nl(l,Rr(n.extent,r.projection))),!a[Ie.ANIMATING]&&!a[Ie.INTERACTING]&&!Vl(l))if(o){const c=r.projection,u=o.getImage(l,s,i,c);u&&(this.loadImage(u)?this.image_=u:u.getState()===Rt.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Te(n.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!qu(s,r))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=Qt(o),c=Math.floor(a.width*((r[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=Wn(o),f=Math.floor(a.height*((o[3]-r[1])/u));return f<0||f>=a.height?null:this.getImageData(a,c,f)}renderFrame(t,n){const i=this.image_,r=i.getExtent(),s=i.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=i.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],u=t.pixelRatio,f=t.viewState,h=f.center,d=f.resolution,g=u*o/(d*l),m=u*a/(d*l),_=t.extent,p=f.resolution,y=f.rotation,v=Math.round(Qt(_)/p*u),w=Math.round(Wn(_)/p*u);Ri(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,y,-v/2,-w/2),nm(this.inversePixelTransform,this.pixelTransform);const x=E1(this.pixelTransform);this.useContainer(n,x,this.getBackground(t));const b=this.context,E=b.canvas;E.width!=v||E.height!=w?(E.width=v,E.height=w):this.containerReused||b.clearRect(0,0,v,w);let C=!1,I=!0;if(c.extent){const O=Rr(c.extent,f.projection);I=hn(O,t.extent),C=I&&!As(O,t.extent),C&&this.clipUnrotated(b,t,O)}const S=i.getImage(),R=Ri(this.tempTransform,v/2,w/2,g,m,0,l*(r[0]-h[0])/o,l*(h[1]-r[3])/a);this.renderedResolution=a*u/l;const M=S.width*R[0],k=S.height*R[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,t),I&&M>=.5&&k>=.5){const O=R[4],A=R[5],P=c.opacity;let N;P!==1&&(N=b.globalAlpha,b.globalAlpha=P),b.drawImage(S,0,0,+S.width,+S.height,O,A,M,k),P!==1&&(b.globalAlpha=N)}return this.postRender(b,t),C&&b.restore(),b.imageSmoothingEnabled=!0,x!==E.style.transform&&(E.style.transform=x),this.container}}const d9=h9,sf={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ah=[sf.FILL],ks=[sf.STROKE],Mo=[sf.BEGIN_PATH],n2=[sf.CLOSE_PATH],yt=sf;class g9{drawCustom(t,n,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,n){}drawFeature(t,n){}drawGeometryCollection(t,n){}drawLineString(t,n){}drawMultiLineString(t,n){}drawMultiPoint(t,n){}drawMultiPolygon(t,n){}drawPoint(t,n){}drawPolygon(t,n){}drawText(t,n){}setFillStrokeStyle(t,n){}setImageStyle(t,n){}setTextStyle(t,n){}}const iR=g9;class m9 extends iR{constructor(t,n,i,r){super(),this.tolerance=t,this.maxExtent=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})}appendFlatPointCoordinates(t,n){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=t.length;a<l;a+=n)r[0]=t[a],r[1]=t[a+1],qu(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(t,n,i,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=r);let u=t[n],f=t[n+1];const h=this.tmpCoordinate_;let d=!0,g,m,_;for(g=n+r;g<i;g+=r)h[0]=t[g],h[1]=t[g+1],_=dy(c,h),_!==m?(d&&(a[l++]=u,a[l++]=f,d=!1),a[l++]=h[0],a[l++]=h[1]):_===We.INTERSECTING?(a[l++]=h[0],a[l++]=h[1],d=!1):d=!0,u=h[0],f=h[1],m=_;return(s&&d||g===n+r)&&(a[l++]=u,a[l++]=f),l}drawCustomCoordinates_(t,n,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(t,n,l,r,!1,!1);s.push(c),n=l}return n}drawCustom(t,n,i,r){this.beginGeometry(t,n);const s=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,c,u,f,h;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),f=[];const d=t.getEndss();h=0;for(let g=0,m=d.length;g<m;++g){const _=[];h=this.drawCustomCoordinates_(l,h,d[g],o,_),f.push(_)}this.instructions.push([yt.CUSTOM,a,f,t,i,vy]),this.hitDetectionInstructions.push([yt.CUSTOM,a,f,t,r||i,vy]);break;case"Polygon":case"MultiLineString":u=[],l=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(l,0,t.getEnds(),o,u),this.instructions.push([yt.CUSTOM,a,u,t,i,_u]),this.hitDetectionInstructions.push([yt.CUSTOM,a,u,t,r||i,_u]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([yt.CUSTOM,a,c,t,i,Ls]),this.hitDetectionInstructions.push([yt.CUSTOM,a,c,t,r||i,Ls]);break;case"MultiPoint":l=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([yt.CUSTOM,a,c,t,i,Ls]),this.hitDetectionInstructions.push([yt.CUSTOM,a,c,t,r||i,Ls]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([yt.CUSTOM,a,c,t,i]),this.hitDetectionInstructions.push([yt.CUSTOM,a,c,t,r||i]);break}this.endGeometry(n)}beginGeometry(t,n){this.beginGeometryInstruction1_=[yt.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[yt.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let n;const i=t.length;let r,s,o=-1;for(n=0;n<i;++n)r=t[n],s=r[0],s==yt.END_GEOMETRY?o=n:s==yt.BEGIN_GEOMETRY&&(r[2]=n,SN(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(t,n){const i=this.state;if(t){const r=t.getColor();i.fillStyle=ji(r||xn)}else i.fillStyle=void 0;if(n){const r=n.getColor();i.strokeStyle=ji(r||vu);const s=n.getLineCap();i.lineCap=s!==void 0?s:bl;const o=n.getLineDash();i.lineDash=o?o.slice():Dr;const a=n.getLineDashOffset();i.lineDashOffset=a||$r;const l=n.getLineJoin();i.lineJoin=l!==void 0?l:xl;const c=n.getWidth();i.lineWidth=c!==void 0?c:xu;const u=n.getMiterLimit();i.miterLimit=u!==void 0?u:wu,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const n=t.fillStyle,i=[yt.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[yt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,n){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,n){const i=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||s!=t.currentLineDash&&!Zs(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[yt.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=XS(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;T1(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const of=m9;class p9 extends of{constructor(t,n,i,r){super(t,n,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([yt.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([yt.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([yt.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([yt.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,n){const i=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}}const y9=p9;class _9 extends of{constructor(t,n,i,r){super(t,n,i,r)}drawFlatCoordinates_(t,n,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),a=[yt.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dr,$r],Mo);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(ks),this.endGeometry(n)}drawMultiLineString(t,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dr,$r],Mo);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,f=o.length;u<f;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(ks),this.endGeometry(n)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ks),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(ks),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Mo)}}const w9=_9;class v9 extends of{constructor(t,n,i,r){super(t,n,i,r)}drawFlatCoordinatess_(t,n,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(Mo),this.hitDetectionInstructions.push(Mo);for(let c=0;c<l;++c){const u=i[c],f=this.coordinates.length,h=this.appendFlatLineCoordinates(t,n,u,r,!0,!a),d=[yt.MOVE_TO_LINE_TO,f,h];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(n2),this.hitDetectionInstructions.push(n2)),n=u}return o&&(this.instructions.push(ah),this.hitDetectionInstructions.push(ah)),a&&(this.instructions.push(ks),this.hitDetectionInstructions.push(ks)),n}drawCircle(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_FILL_STYLE,xn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dr,$r]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[yt.CIRCLE,l];this.instructions.push(Mo,c),this.hitDetectionInstructions.push(Mo,c),i.fillStyle!==void 0&&(this.instructions.push(ah),this.hitDetectionInstructions.push(ah)),i.strokeStyle!==void 0&&(this.instructions.push(ks),this.hitDetectionInstructions.push(ks)),this.endGeometry(n)}drawPolygon(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_FILL_STYLE,xn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dr,$r]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(n)}drawMultiPolygon(t,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_FILL_STYLE,xn]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Dr,$r]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,f=o.length;u<f;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const n=this.coordinates;for(let i=0,r=n.length;i<r;++i)n[i]=po(n[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const i2=v9;function b9(e,t,n,i,r){const s=[];let o=n,a=0,l=t.slice(n,2);for(;a<e&&o+r<i;){const[c,u]=l.slice(-2),f=t[o+r],h=t[o+r+1],d=Math.sqrt((f-c)*(f-c)+(h-u)*(h-u));if(a+=d,a>=e){const g=(e-a+d)/d,m=Pn(c,f,g),_=Pn(u,h,g);l.push(m,_),s.push(l),l=[m,_],a==e&&(o+=r),a=0}else if(a<e)l.push(t[o+r],t[o+r+1]),o+=r;else{const g=d-a,m=Pn(c,f,g/d),_=Pn(u,h,g/d);l.push(m,_),s.push(l),l=[m,_],a=0,o+=r}}return a>0&&s.push(l),s}function x9(e,t,n,i,r){let s=n,o=n,a=0,l=0,c=n,u,f,h,d,g,m,_,p,y,v;for(f=n;f<i;f+=r){const w=t[f],x=t[f+1];g!==void 0&&(y=w-g,v=x-m,d=Math.sqrt(y*y+v*v),_!==void 0&&(l+=h,u=Math.acos((_*y+p*v)/(h*d)),u>e&&(l>a&&(a=l,s=c,o=f),l=0,c=f-r)),h=d,_=y,p=v),g=w,m=x}return l+=d,l>a?[c,f]:[s,o]}const Id={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class E9 extends of{constructor(t,n,i,r){super(t,n,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[xn]={fillStyle:xn},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,n){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=t.getType();let c=null,u=t.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!hn(this.getBufferedMaxExtent(),t.getExtent()))return;let f;if(c=t.getFlatCoordinates(),l=="LineString")f=[c.length];else if(l=="MultiLineString")f=t.getEnds();else if(l=="Polygon")f=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=t.getEndss();f=[];for(let _=0,p=m.length;_<p;++_)f.push(m[_][0])}this.beginGeometry(t,n);const h=s.repeat,d=h?void 0:s.textAlign;let g=0;for(let m=0,_=f.length;m<_;++m){let p;h?p=b9(h*this.resolution,c,g,f[m],u):p=[c.slice(g,f[m])];for(let y=0,v=p.length;y<v;++y){const w=p[y];let x=0,b=w.length;if(d==null){const C=x9(s.maxAngle,w,0,w.length,2);x=C[0],b=C[1]}for(let C=x;C<b;C+=u)o.push(w[C],w[C+1]);const E=o.length;g=f[m],this.drawChars_(a,E),a=E}}this.endGeometry(n)}else{let f=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),u=2;break;case"Polygon":c=t.getFlatInteriorPoint(),s.overflow||f.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const p=t.getFlatInteriorPoints();c=[];for(let y=0,v=p.length;y<v;y+=3)s.overflow||f.push(p[y+2]/this.resolution),c.push(p[y],p[y+1]);if(c.length===0)return;u=2;break}const h=this.appendFlatPointCoordinates(c,u);if(h===a)return;if(f&&(h-a)/2!==c.length/u){let p=a/2;f=f.filter((y,v)=>{const w=o[(p+v)*2]===c[v*u]&&o[(p+v)*2+1]===c[v*u+1];return w||--p,w})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);let d=s.padding;if(d!=So&&(s.scale[0]<0||s.scale[1]<0)){let p=s.padding[0],y=s.padding[1],v=s.padding[2],w=s.padding[3];s.scale[0]<0&&(y=-y,w=-w),s.scale[1]<0&&(p=-p,v=-v),d=[p,y,v,w]}const g=this.pixelRatio;this.instructions.push([yt.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,d==So?So:d.map(function(p){return p*g}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const m=1/g,_=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=xn,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([yt.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,d,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?xn:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),s.backgroundFill&&(this.state.fillStyle=_,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||bu,justify:n.justify,textBaseline:n.textBaseline||_d,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,n){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Id[r.textBaseline],u=this.textOffsetY_*l,f=this.text_,h=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([yt.DRAW_CHARS,t,n,c,r.overflow,a,r.maxAngle,l,u,s,h*l,f,o,1]),this.hitDetectionInstructions.push([yt.DRAW_CHARS,t,n,c,r.overflow,a&&xn,r.maxAngle,l,u,s,h*l,f,o,1/l])}setTextStyle(t,n){let i,r,s;if(!t)this.text_="";else{const o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=ji(o.getColor()||xn)):(r=null,this.textFillState_=r);const a=t.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=a.getLineDash(),m=a.getLineDashOffset(),_=a.getWidth(),p=a.getMiterLimit();s.lineCap=a.getLineCap()||bl,s.lineDash=g?g.slice():Dr,s.lineDashOffset=m===void 0?$r:m,s.lineJoin=a.getLineJoin()||xl,s.lineWidth=_===void 0?xu:_,s.miterLimit=p===void 0?wu:p,s.strokeStyle=ji(a.getColor()||vu)}i=this.textState_;const l=t.getFont()||TM;y8(l);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||_d,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||So,i.scale=c===void 0?[1,1]:c;const u=t.getOffsetX(),f=t.getOffsetY(),h=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=h===void 0?!1:h,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Vt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+Vt(r.fillStyle):""}this.declutterImageWithText_=n}}const T9={Circle:i2,Default:of,Image:y9,LineString:w9,Polygon:i2,Text:E9};class C9{constructor(t,n,i,r){this.tolerance_=t,this.maxExtent_=n,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const n in this.buildersByZIndex_){t[n]=t[n]||{};const i=this.buildersByZIndex_[n];for(const r in i){const s=i[r].finish();t[n][r]=s}}return t}getBuilder(t,n){const i=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[n];if(s===void 0){const o=T9[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[n]=s}return s}}const r2=C9;function S9(e,t,n,i,r,s,o,a,l,c,u,f){let h=e[t],d=e[t+1],g=0,m=0,_=0,p=0;function y(){g=h,m=d,t+=i,h=e[t],d=e[t+1],p+=_,_=Math.sqrt((h-g)*(h-g)+(d-m)*(d-m))}do y();while(t<n-i&&p+_<s);let v=_===0?0:(s-p)/_;const w=Pn(g,h,v),x=Pn(m,d,v),b=t-i,E=p,C=s+a*l(c,r,u);for(;t<n-i&&p+_<C;)y();v=_===0?0:(C-p)/_;const I=Pn(g,h,v),S=Pn(m,d,v);let R;if(f){const P=[w,x,I,S];lM(P,0,4,2,f,P,P),R=P[0]>P[2]}else R=w>I;const M=Math.PI,k=[],O=b+i===t;t=b,_=0,p=E,h=e[t],d=e[t+1];let A;if(O){y(),A=Math.atan2(d-m,h-g),R&&(A+=A>0?-M:M);const P=(I+w)/2,N=(S+x)/2;return k[0]=[P,N,(C-s)/2,A,r],k}r=r.replace(/\n/g," ");for(let P=0,N=r.length;P<N;){y();let W=Math.atan2(d-m,h-g);if(R&&(W+=W>0?-M:M),A!==void 0){let nt=W-A;if(nt+=nt>M?-2*M:nt<-M?2*M:0,Math.abs(nt)>o)return null}A=W;const j=P;let V=0;for(;P<N;++P){const nt=R?N-P-1:P,st=a*l(c,r[nt],u);if(t+i<n&&p+_<s+V+st/2)break;V+=st}if(P===j)continue;const Z=R?r.substring(N-j,N-P):r.substring(j,P);v=_===0?0:(s+V/2-p)/_;const z=Pn(g,h,v),Q=Pn(m,d,v);k.push([z,Q,V/2,W,Z]),s+=V}return k}const Ta=oi(),cs=[],dr=[],gr=[],us=[];function s2(e){return e[3].declutterBox}const o2=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function B0(e,t){return t==="start"?t=o2.test(e)?"right":"left":t==="end"&&(t=o2.test(e)?"left":"right"),Id[t]}function M9(e,t,n){return n>0&&e.push(`
`,""),e.push(t,""),e}class R9{constructor(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Si(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(t,n,i,r){const s=t+n+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],f=Array.isArray(t),h=l.justify?Id[l.justify]:B0(Array.isArray(t)?t[0]:t,l.textAlign||bu),d=r&&o.lineWidth?o.lineWidth:0,g=f?t:t.split(`
`).reduce(M9,[]),{width:m,height:_,widths:p,heights:y,lineWidths:v}=w8(l,g),w=m+d,x=[],b=(w+2)*u[0],E=(_+d)*u[1],C={width:b<0?Math.floor(b):Math.ceil(b),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:x};(u[0]!=1||u[1]!=1)&&x.push("scale",u),r&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",d),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)),i&&x.push("fillStyle",a.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const I=.5-h;let S=h*w+I*d;const R=[],M=[];let k=0,O=0,A=0,P=0,N;for(let W=0,j=g.length;W<j;W+=2){const V=g[W];if(V===`
`){O+=k,k=0,S=h*w+I*d,++P;continue}const Z=g[W+1]||l.font;Z!==N&&(r&&R.push("font",Z),i&&M.push("font",Z),N=Z),k=Math.max(k,y[A]);const z=[V,S+I*p[A]+h*(p[A]-v[P]),.5*(d+k)+O];S+=p[A],r&&R.push("strokeText",z),i&&M.push("fillText",z),++A}return Array.prototype.push.apply(x,R),Array.prototype.push.apply(x,M),this.labels_[s]=C,C}replayTextBackground_(t,n,i,r,s,o,a){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,n),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,n,i,r,s,o,a,l,c,u,f,h,d,g,m,_){a*=h[0],l*=h[1];let p=i-a,y=r-l;const v=s+c>t?t-c:s,w=o+u>n?n-u:o,x=g[3]+v*h[0]+g[1],b=g[0]+w*h[1]+g[2],E=p-g[3],C=y-g[0];(m||f!==0)&&(cs[0]=E,us[0]=E,cs[1]=C,dr[1]=C,dr[0]=E+x,gr[0]=dr[0],gr[1]=C+b,us[1]=gr[1]);let I;return f!==0?(I=Ri(Si(),i,r,1,1,f,-i,-r),Te(I,cs),Te(I,dr),Te(I,gr),Te(I,us),Ys(Math.min(cs[0],dr[0],gr[0],us[0]),Math.min(cs[1],dr[1],gr[1],us[1]),Math.max(cs[0],dr[0],gr[0],us[0]),Math.max(cs[1],dr[1],gr[1],us[1]),Ta)):Ys(Math.min(E,E+x),Math.min(C,C+b),Math.max(E,E+x),Math.max(C,C+b),Ta),d&&(p=Math.round(p),y=Math.round(y)),{drawImageX:p,drawImageY:y,drawImageW:v,drawImageH:w,originX:c,originY:u,declutterBox:{minX:Ta[0],minY:Ta[1],maxX:Ta[2],maxY:Ta[3],value:_},canvasTransform:I,scale:h}}replayImageOrLabel_(t,n,i,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=t.canvas,f=a?a[2]*r.scale[0]/2:0;return c.minX-f<=u.width/n&&c.maxX+f>=0&&c.minY-f<=u.height/n&&c.maxY+f>=0&&(l&&this.replayTextBackground_(t,cs,dr,gr,us,o,a),v8(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){const n=Te(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.lineDashOffset=n[7],t.setLineDash(n[6])}drawLabelWithPointPlacement_(t,n,i,r){const s=this.textStates[n],o=this.createLabel(t,n,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=B0(Array.isArray(t)?t[0]:t,s.textAlign||bu),u=Id[s.textBaseline||_d],f=a&&a.lineWidth?a.lineWidth:0,h=o.width/l-2*s.scale[0],d=c*h+2*(.5-c)*f,g=u*o.height/l+2*(.5-u)*f;return{label:o,anchorX:d,anchorY:g}}execute_(t,n,i,r,s,o,a,l){let c;this.pixelCoordinates_&&Zs(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Wo(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),zN(this.renderedTransform_,i));let u=0;const f=r.length;let h=0,d,g,m,_,p,y,v,w,x,b,E,C,I=0,S=0,R=null,M=null;const k=this.coordinateCache_,O=this.viewRotation_,A=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,P={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:O},N=this.instructions!=r||this.overlaps?0:200;let W,j,V,Z;for(;u<f;){const z=r[u];switch(z[0]){case yt.BEGIN_GEOMETRY:W=z[1],Z=z[3],W.getGeometry()?a!==void 0&&!hn(a,Z.getExtent())?u=z[2]+1:++u:u=z[2];break;case yt.BEGIN_PATH:I>N&&(this.fill_(t),I=0),S>N&&(t.stroke(),S=0),!I&&!S&&(t.beginPath(),_=NaN,p=NaN),++u;break;case yt.CIRCLE:h=z[1];const nt=c[h],st=c[h+1],ot=c[h+2],$=c[h+3],U=ot-nt,D=$-st,X=Math.sqrt(U*U+D*D);t.moveTo(nt+X,st),t.arc(nt,st,X,0,2*Math.PI,!0),++u;break;case yt.CLOSE_PATH:t.closePath(),++u;break;case yt.CUSTOM:h=z[1],d=z[2];const K=z[3],T=z[4],L=z.length==6?z[5]:void 0;P.geometry=K,P.feature=W,u in k||(k[u]=[]);const F=k[u];L?L(c,h,d,2,F):(F[0]=c[h],F[1]=c[h+1],F.length=2),T(F,P),++u;break;case yt.DRAW_IMAGE:h=z[1],d=z[2],w=z[3],g=z[4],m=z[5];let Y=z[6];const B=z[7],H=z[8],rt=z[9],J=z[10];let tt=z[11];const q=z[12];let ct=z[13];const at=z[14],ut=z[15];if(!w&&z.length>=20){x=z[19],b=z[20],E=z[21],C=z[22];const On=this.drawLabelWithPointPlacement_(x,b,E,C);w=On.label,z[3]=w;const wa=z[23];g=(On.anchorX-wa)*this.pixelRatio,z[4]=g;const Xn=z[24];m=(On.anchorY-Xn)*this.pixelRatio,z[5]=m,Y=w.height,z[6]=Y,ct=w.width,z[13]=ct}let ft;z.length>25&&(ft=z[25]);let xt,Ot,Tt;z.length>17?(xt=z[16],Ot=z[17],Tt=z[18]):(xt=So,Ot=!1,Tt=!1),J&&A?tt+=O:!J&&!A&&(tt-=O);let jt=0;for(;h<d;h+=2){if(ft&&ft[jt++]<ct/this.pixelRatio)continue;const On=this.calculateImageOrLabelDimensions_(w.width,w.height,c[h],c[h+1],ct,Y,g,m,H,rt,tt,q,s,xt,Ot||Tt,W),wa=[t,n,w,On,B,Ot?R:null,Tt?M:null];if(l){if(at==="none")continue;if(at==="obstacle"){l.insert(On.declutterBox);continue}else{let Xn,ur;if(ut){const kn=d-h;if(!ut[kn]){ut[kn]=wa;continue}if(Xn=ut[kn],delete ut[kn],ur=s2(Xn),l.collides(ur))continue}if(l.collides(On.declutterBox))continue;Xn&&(l.insert(ur),this.replayImageOrLabel_.apply(this,Xn)),l.insert(On.declutterBox)}}this.replayImageOrLabel_.apply(this,wa)}++u;break;case yt.DRAW_CHARS:const ye=z[1],ce=z[2],rs=z[3],Vn=z[4];C=z[5];const sn=z[6],ue=z[7],on=z[8];E=z[9];const _a=z[10];x=z[11],b=z[12];const db=[z[13],z[13]],v0=this.textStates[b],hc=v0.font,dc=[v0.scale[0]*ue,v0.scale[1]*ue];let gc;hc in this.widths_?gc=this.widths_[hc]:(gc={},this.widths_[hc]=gc);const gb=FM(c,ye,ce,2),mb=Math.abs(dc[0])*Gx(hc,x,gc);if(Vn||mb<=gb){const On=this.textStates[b].textAlign,wa=(gb-mb)*B0(x,On),Xn=S9(c,ye,ce,2,x,wa,sn,Math.abs(dc[0]),Gx,hc,gc,A?0:this.viewRotation_);t:if(Xn){const ur=[];let kn,Yf,Bf,_n,Hn;if(E)for(kn=0,Yf=Xn.length;kn<Yf;++kn){Hn=Xn[kn],Bf=Hn[4],_n=this.createLabel(Bf,b,"",E),g=Hn[2]+(dc[0]<0?-_a:_a),m=rs*_n.height+(.5-rs)*2*_a*dc[1]/dc[0]-on;const fr=this.calculateImageOrLabelDimensions_(_n.width,_n.height,Hn[0],Hn[1],_n.width,_n.height,g,m,0,0,Hn[3],db,!1,So,!1,W);if(l&&l.collides(fr.declutterBox))break t;ur.push([t,n,_n,fr,1,null,null])}if(C)for(kn=0,Yf=Xn.length;kn<Yf;++kn){Hn=Xn[kn],Bf=Hn[4],_n=this.createLabel(Bf,b,C,""),g=Hn[2],m=rs*_n.height-on;const fr=this.calculateImageOrLabelDimensions_(_n.width,_n.height,Hn[0],Hn[1],_n.width,_n.height,g,m,0,0,Hn[3],db,!1,So,!1,W);if(l&&l.collides(fr.declutterBox))break t;ur.push([t,n,_n,fr,1,null,null])}l&&l.load(ur.map(s2));for(let fr=0,Fk=ur.length;fr<Fk;++fr)this.replayImageOrLabel_.apply(this,ur[fr])}}++u;break;case yt.END_GEOMETRY:if(o!==void 0){W=z[1];const On=o(W,Z);if(On)return On}++u;break;case yt.FILL:N?I++:this.fill_(t),++u;break;case yt.MOVE_TO_LINE_TO:for(h=z[1],d=z[2],j=c[h],V=c[h+1],y=j+.5|0,v=V+.5|0,(y!==_||v!==p)&&(t.moveTo(j,V),_=y,p=v),h+=2;h<d;h+=2)j=c[h],V=c[h+1],y=j+.5|0,v=V+.5|0,(h==d-2||y!==_||v!==p)&&(t.lineTo(j,V),_=y,p=v);++u;break;case yt.SET_FILL_STYLE:R=z,this.alignFill_=z[2],I&&(this.fill_(t),I=0,S&&(t.stroke(),S=0)),t.fillStyle=z[1],++u;break;case yt.SET_STROKE_STYLE:M=z,S&&(t.stroke(),S=0),this.setStrokeStyle_(t,z),++u;break;case yt.STROKE:N?S++:t.stroke(),++u;break;default:++u;break}}I&&this.fill_(t),S&&t.stroke()}execute(t,n,i,r,s,o){this.viewRotation_=r,this.execute_(t,n,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,n,i,r,s){return this.viewRotation_=i,this.execute_(t,1,n,this.hitDetectionInstructions,!0,r,s)}}const I9=R9,U0=["Polygon","Circle","LineString","Image","Text","Default"];class A9{constructor(t,n,i,r,s,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Si(),this.createExecutors_(s)}clip(t,n){const i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const n in t){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const r=t[n];for(const s in r){const o=r[s];i[s]=new I9(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let r=0,s=t.length;r<s;++r)if(t[r]in i)return!0}return!1}forEachFeatureAtCoordinate(t,n,i,r,s,o){r=Math.round(r);const a=r*2+1,l=Ri(this.hitDetectionTransform_,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=mn(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let f;this.renderBuffer_!==void 0&&(f=oi(),Qc(f,t),T1(f,n*(this.renderBuffer_+r),f));const h=L9(r);let d;function g(x,b){const E=u.getImageData(0,0,a,a).data;for(let C=0,I=h.length;C<I;C++)if(E[h[C]]>0){if(!o||d!=="Image"&&d!=="Text"||o.includes(x)){const S=(h[C]-3)/4,R=r-S%a,M=r-(S/a|0),k=s(x,b,R*R+M*M);if(k)return k}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(Ws);let _,p,y,v,w;for(_=m.length-1;_>=0;--_){const x=m[_].toString();for(y=this.executorsByZIndex_[x],p=U0.length-1;p>=0;--p)if(d=U0[p],v=y[d],v!==void 0&&(w=v.executeHitDetection(u,l,i,g,f),w))return w}}getClipCoords(t){const n=this.maxExtent_;if(!n)return null;const i=n[0],r=n[1],s=n[2],o=n[3],a=[i,r,i,o,s,o,s,r];return Wo(a,0,8,2,t,a),a}isEmpty(){return _l(this.executorsByZIndex_)}execute(t,n,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Ws),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||U0;let c,u,f,h,d,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(d=this.executorsByZIndex_[m],f=0,h=o.length;f<h;++f){const _=o[f];g=d[_],g!==void 0&&g.execute(t,n,i,r,s,a)}}this.maxExtent_&&t.restore()}}const V0={};function L9(e){if(V0[e]!==void 0)return V0[e];const t=e*2+1,n=e*e,i=new Array(n+1);for(let s=0;s<=e;++s)for(let o=0;o<=e;++o){const a=s*s+o*o;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((e+s)*t+(e+o))*4+3),s>0&&l.push(((e-s)*t+(e+o))*4+3),o>0&&(l.push(((e+s)*t+(e-o))*4+3),s>0&&l.push(((e-s)*t+(e-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return V0[e]=r,r}const a2=A9;class O9 extends iR{constructor(t,n,i,r,s,o,a){super(),this.context_=t,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.transformRotation_=r?om(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Si()}drawImages_(t,n,i,r){if(!this.image_)return;const s=Wo(t,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,f=s.length;u<f;u+=2){const h=s[u]-this.imageAnchorX_,d=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=h+this.imageAnchorX_,m=d+this.imageAnchorY_;Ri(a,g,m,1,1,c,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,n,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Wo(t,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=r){const l=s[n]+this.textOffsetX_,c=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(t,n,i,r,s){const o=this.context_,a=Wo(t,n,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(t,n,i,r){for(let s=0,o=i.length;s<o;++s)n=this.moveToLineTo_(t,n,i[s],r,!0);return n}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!hn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=zD(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,n){const i=n.getGeometryFunction()(t);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(t){const n=t.getGeometriesArray();for(let i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!hn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=t.getExtent();if(hn(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=t.getFlatCoordinates();let s=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!hn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!hn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=t.getOrientedFlatCoordinates();let r=0;const s=t.getEndss(),o=t.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(i,r,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=t.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(t){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),Zs(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset,n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const n=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:bu;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,n){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:ji(i||xn)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=s||Dr;this.strokeState_={lineCap:r!==void 0?r:bl,lineDash:this.pixelRatio_===1?u:u.map(f=>f*this.pixelRatio_),lineDashOffset:(o||$r)*this.pixelRatio_,lineJoin:a!==void 0?a:xl,lineWidth:(l!==void 0?l:xu)*this.pixelRatio_,miterLimit:c!==void 0?c:wu,strokeStyle:ji(i||vu)}}}setImageStyle(t){let n;if(!t||!(n=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(t){if(!t)this.text_="";else{const n=t.getFill();if(!n)this.textFillState_=null;else{const d=n.getColor();this.textFillState_={fillStyle:ji(d||xn)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const d=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),_=i.getLineDashOffset(),p=i.getLineJoin(),y=i.getWidth(),v=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:bl,lineDash:m||Dr,lineDashOffset:_||$r,lineJoin:p!==void 0?p:xl,lineWidth:y!==void 0?y:xu,miterLimit:v!==void 0?v:wu,strokeStyle:ji(d||vu)}}const r=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),u=t.getText(),f=t.getTextAlign(),h=t.getTextBaseline();this.textState_={font:r!==void 0?r:TM,textAlign:f!==void 0?f:bu,textBaseline:h!==void 0?h:_d},this.text_=u!==void 0?Array.isArray(u)?u.reduce((d,g,m)=>d+=m%2?" ":g,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const k9=O9,Ui=.5;function P9(e,t,n,i,r,s,o){const a=e[0]*Ui,l=e[1]*Ui,c=mn(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,f=new k9(c,Ui,r,null,o),h=n.length,d=Math.floor((256*256*256-1)/h),g={};for(let _=1;_<=h;++_){const p=n[_-1],y=p.getStyleFunction()||i;if(!y)continue;let v=y(p,s);if(!v)continue;Array.isArray(v)||(v=[v]);const x=(_*d).toString(16).padStart(7,"#00000");for(let b=0,E=v.length;b<E;++b){const C=v[b],I=C.getGeometryFunction()(p);if(!I||!hn(r,I.getExtent()))continue;const S=C.clone(),R=S.getFill();R&&R.setColor(x);const M=S.getStroke();M&&(M.setColor(x),M.setLineDash(null)),S.setText(void 0);const k=C.getImage();if(k){const N=k.getImageSize();if(!N)continue;const W=mn(N[0],N[1],void 0,{alpha:!1}),j=W.canvas;W.fillStyle=x,W.fillRect(0,0,j.width,j.height),S.setImage(new Sd({img:j,anchor:k.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:k.getOrigin(),opacity:1,size:k.getSize(),scale:k.getScale(),rotation:k.getRotation(),rotateWithView:k.getRotateWithView()}))}const O=S.getZIndex()||0;let A=g[O];A||(A={},g[O]=A,A.Polygon=[],A.Circle=[],A.LineString=[],A.Point=[]);const P=I.getType();if(P==="GeometryCollection"){const N=I.getGeometriesArrayRecursive();for(let W=0,j=N.length;W<j;++W){const V=N[W];A[V.getType().replace("Multi","")].push(V,S)}}else A[P.replace("Multi","")].push(I,S)}}const m=Object.keys(g).map(Number).sort(Ws);for(let _=0,p=m.length;_<p;++_){const y=g[m[_]];for(const v in y){const w=y[v];for(let x=0,b=w.length;x<b;x+=2){f.setStyle(w[x+1]);for(let E=0,C=t.length;E<C;++E)f.setTransform(t[E]),f.drawGeometry(w[x])}}}return c.getImageData(0,0,u.width,u.height)}function F9(e,t,n){const i=[];if(n){const r=Math.floor(Math.round(e[0])*Ui),s=Math.floor(Math.round(e[1])*Ui),o=(Ae(r,0,n.width-1)+Ae(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),f=Math.floor((256*256*256-1)/t.length);u&&u%f===0&&i.push(t[u/f-1])}return i}const N9=.5,rR={Point:V9,LineString:Y9,Polygon:H9,MultiPoint:X9,MultiLineString:B9,MultiPolygon:U9,GeometryCollection:G9,Circle:z9};function D9(e,t){return parseInt(Vt(e),10)-parseInt(Vt(t),10)}function $9(e,t){const n=Py(e,t);return n*n}function Py(e,t){return N9*e/t}function z9(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=e.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function l2(e,t,n,i,r,s,o){let a=!1;const l=n.getImage();if(l){const c=l.getImageState();c==Rt.LOADED||c==Rt.ERROR?l.unlistenImageChange(r):(c==Rt.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return W9(e,t,n,i,s,o),a}function W9(e,t,n,i,r,s){const o=n.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(i,r);if(n.getRenderer())sR(e,a,n,t);else{const c=rR[a.getType()];c(e,a,n,t,s)}}function sR(e,t,n,i){if(t.getType()=="GeometryCollection"){const s=t.getGeometries();for(let o=0,a=s.length;o<a;++o)sR(e,s[o],n,i);return}e.getBuilder(n.getZIndex(),"Default").drawCustom(t,i,n.getRenderer(),n.getHitDetectionRenderer())}function G9(e,t,n,i,r){const s=t.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=rR[s[o].getType()];l(e,s[o],n,i,r)}}function Y9(e,t,n,i,r){const s=n.getStroke();if(s){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(r||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function B9(e,t,n,i,r){const s=n.getStroke();if(s){const a=e.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,i)}const o=n.getText();if(o&&o.getText()){const a=(r||e).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function U9(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function V9(e,t,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=Rt.LOADED)return;let l=e;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const f=e.getBuilder(n.getZIndex(),"Image");f.setImageStyle(s,a),f.drawPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(t,i)}if(o&&o.getText()){let l=e;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function X9(e,t,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=Rt.LOADED)return;let l=e;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const f=e.getBuilder(n.getZIndex(),"Image");f.setImageStyle(s,a),f.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(t,i)}if(o&&o.getText()){let l=e;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function H9(e,t,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=e.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(t,i)}const a=n.getText();if(a&&a.getText()){const l=(r||e).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}class j9 extends ew{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=oi(),this.wrappedRenderedExtent_=oi(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,n,i){const r=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),f=this.getLayer().getSource(),h=n.pixelRatio,d=n.viewHints,g=!(d[Ie.ANIMATING]||d[Ie.INTERACTING]),m=this.compositionContext_,_=Math.round(n.size[0]*h),p=Math.round(n.size[1]*h),y=f.getWrapX()&&l.canWrapX(),v=y?Qt(u):null,w=y?Math.ceil((r[2]-u[2])/v)+1:1;let x=y?Math.floor((r[0]-u[0])/v):0;do{const b=this.getRenderTransform(o,a,c,h,_,p,x*v);t.execute(m,1,b,c,g,void 0,i)}while(++x<w)}setupCompositionContext_(){if(this.opacity_!==1){const t=mn(this.context.canvas.width,this.context.canvas.height,Hx);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,um(this.compositionContext_),Hx.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,n){const i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];WN(this.pixelTransform,1/i,1/i),nm(this.inversePixelTransform,this.pixelTransform);const s=E1(this.pixelTransform);this.useContainer(n,s,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let u=l&&!l.isEmpty()||c&&!c.isEmpty();if(!u&&!(this.getLayer().hasListener(Ki.PRERENDER)||this.getLayer().hasListener(Ki.POSTRENDER)))return null;const f=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);a.width!=f||a.height!=h?(a.width=f,a.height=h,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,f,h),this.preRender(o,t);const d=t.viewState;d.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let g=!1;if(u&&r.extent&&this.clipping){const m=Rr(r.extent);u=hn(m,t.extent),g=u&&!As(m,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,m)}return u&&this.renderWorlds(l,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(n=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Te(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],f=i[0]*Ui,h=i[1]*Ui;u.push(this.getRenderTransform(r,s,o,Ui,f,h,0).slice());const d=c.getSource(),g=a.getExtent();if(d.getWrapX()&&a.canWrapX()&&!As(g,l)){let m=l[0];const _=Qt(g);let p=0,y;for(;m<g[0];)--p,y=_*p,u.push(this.getRenderTransform(r,s,o,Ui,f,h,y).slice()),m+=_;for(p=0,m=l[2];m>g[2];)++p,y=_*p,u.push(this.getRenderTransform(r,s,o,Ui,f,h,y).slice()),m-=_}this.hitDetectionImageData_=P9(i,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}n(F9(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,n,i,r,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(d,g,m){const _=Vt(d),p=c[_];if(p){if(p!==!0&&m<p.distanceSq){if(m===0)return c[_]=!0,s.splice(s.lastIndexOf(p),1),r(d,l,g);p.geometry=g,p.distanceSq=m}}else{if(m===0)return c[_]=!0,r(d,l,g);s.push(c[_]={feature:d,layer:l,geometry:g,distanceSq:m,callback:r})}};let f;const h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some(d=>f=d.forEachFeatureAtCoordinate(t,o,a,i,u,d===this.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(g=>g.value):null)),f}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const r=t.viewHints[Ie.ANIMATING],s=t.viewHints[Ie.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,u=c.projection,f=c.resolution,h=t.pixelRatio,d=n.getRevision(),g=n.getRenderBuffer();let m=n.getRenderOrder();m===void 0&&(m=D9);const _=c.center.slice(),p=T1(l,g*f),y=p.slice(),v=[p.slice()],w=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!As(w,t.extent)){const A=Qt(w),P=Math.max(Qt(p)/2,A);p[0]=w[0]-P,p[2]=w[2]+P,nM(_,u);const N=KS(v[0],u);N[0]<w[0]&&N[2]<w[2]?v.push([N[0]+A,N[1],N[2]+A,N[3]]):N[0]>w[0]&&N[2]>w[2]&&v.push([N[0]-A,N[1],N[2]-A,N[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==d&&this.renderedRenderOrder_==m&&As(this.wrappedRenderedExtent_,p))return Zs(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new r2(Py(f,h),p,f,h);let b;this.getLayer().getDeclutter()&&(b=new r2(Py(f,h),p,f,h));let E;for(let A=0,P=v.length;A<P;++A)i.loadFeatures(v[A],f,u);const C=$9(f,h);let I=!0;const S=A=>{let P;const N=A.getStyleFunction()||n.getStyleFunction();if(N&&(P=N(A,f)),P){const W=this.renderFeature(A,C,P,x,E,b);I=I&&!W}},R=oM(p),M=i.getFeaturesInExtent(R);m&&M.sort(m);for(let A=0,P=M.length;A<P;++A)S(M[A]);this.renderedFeatures_=M,this.ready=I;const k=x.finish(),O=new a2(p,f,h,i.getOverlaps(),k,n.getRenderBuffer());return b&&(this.declutterExecutorGroup=new a2(p,f,h,i.getOverlaps(),b.finish(),n.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=d,this.renderedRenderOrder_=m,this.renderedExtent_=y,this.wrappedRenderedExtent_=p,this.renderedCenter_=_,this.renderedProjection_=u,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,n,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=l2(r,t,i[l],n,this.boundHandleStyleImageChange_,s,o)||a;else a=l2(r,t,i,n,this.boundHandleStyleImageChange_,s,o);return a}}const Z9=j9;class q9 extends Q${constructor(t,n,i,r,s){const o=s!==void 0?Rt.IDLE:Rt.LOADED;super(t,n,i,o),this.loader_=s!==void 0?s:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=Rt.ERROR):this.state=Rt.LOADED,this.changed()}load(){this.state==Rt.IDLE&&(this.state=Rt.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const K9=q9;function J9(e){return Array.isArray(e)?Math.min(...e):e}class Q9 extends d9{constructor(t){super(t),this.vectorRenderer_=new Z9(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=Si(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const n=Te(this.coordinateToVectorPixelTransform_,Te(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const n=t.pixelRatio,i=t.viewState,r=i.resolution,s=t.viewHints,o=this.vectorRenderer_;let a=t.extent;this.layerImageRatio_!==1&&(a=a.slice(0),XN(a,this.layerImageRatio_));const l=Qt(a)/r,c=Wn(a)/r;if(!s[Ie.ANIMATING]&&!s[Ie.INTERACTING]&&!Vl(a)){o.useContainer(null,null);const u=o.context,f=t.layerStatesArray[t.layerIndex],h=Object.assign({},f,{opacity:1}),d=Object.assign({},t,{declutterTree:new nw(9),extent:a,size:[l,c],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[h],layerIndex:0});let g=!0;const m=new K9(a,r,n,u.canvas,function(_){o.prepareFrame(d)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(d,null)&&(o.renderDeclutter(d),g=!1),_())});m.addEventListener(Et.CHANGE,()=>{if(m.getState()!==Rt.LOADED)return;this.image_=g?null:m;const _=m.getPixelRatio(),p=J9(m.getResolution())*n/_;this.renderedResolution=p,this.coordinateToVectorPixelTransform_=Ri(this.coordinateToVectorPixelTransform_,l/2,c/2,1/p,-1/p,0,-i.center[0],-i.center[1])}),m.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,n,i,r,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,n,i,r,s):super.forEachFeatureAtCoordinate(t,n,i,r,s)}}const tz=Q9;class ez extends f9{constructor(t){t=t||{};const n=Object.assign({},t);delete n.imageRatio,super(n),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new tz(this)}}const nz=ez;class iz{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let n=this.oldest_;for(;n;)t(n.value_,n.key_,this),n=n.newer}get(t,n){const i=this.entries_[t];return $t(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const n=this.entries_[t];return $t(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.key_;return t}getValues(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,n){this.get(t),this.entries_[t].value_=n}set(t,n){$t(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const rz=iz;function c2(e,t,n,i){return i!==void 0?(i[0]=e,i[1]=t,i[2]=n,i):[e,t,n]}function gm(e,t,n){return e+"/"+t+"/"+n}function oR(e){return gm(e[0],e[1],e[2])}function sz(e){return e.split("/").map(Number)}function oz(e){return(e[1]<<e[0])+e[2]}function az(e,t){const n=e[0],i=e[1],r=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;const s=t.getFullTileRange(n);return s?s.containsXY(i,r):!0}class lz extends rz{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),i=sz(t)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(oR(r.tileCoord)),r.release())})}}const aR=lz,X0={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class cz extends Fi{constructor(t){super(),this.projection=Oe(t.projection),this.attributions_=u2(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,r){n.viewResolver=i,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=u2(t),this.changed()}setState(t){this.state_=t,this.changed()}}function u2(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}const lR=cz,Ca=[0,0,0],fs=5;class uz{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,$t(MN(this.resolutions_,function(r,s){return s-r},!0),"`resolutions` must be sorted in descending order");let n;if(!t.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!n)n=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,$t(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ua(i)),$t(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,$t(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:S1,$t(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(r,s){const o=new XM(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,n,i){const r=this.getTileRangeForExtentAndZ(t,n);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([n,s,a])}forEachTileCoordParentTileRange(t,n,i,r){let s,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=xa(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),n(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,n,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,o=t[2]*2;return xa(s,s+1,o,o+1,n)}const r=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,n)}return null}getTileRangeForTileCoordAndZ(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const r=t[0],s=t[1],o=t[2];if(n===r)return xa(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-r),c=Math.floor(s*l),u=Math.floor(o*l);if(n<r)return xa(c,c,u,u,i);const f=Math.floor(l*(s+1))-1,h=Math.floor(l*(o+1))-1;return xa(c,f,u,h,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(t,n,i){this.getTileCoordForXYAndZ_(t[0],t[3],n,!1,Ca);const r=Ca[1],s=Ca[2];this.getTileCoordForXYAndZ_(t[2],t[1],n,!0,Ca);const o=Ca[1],a=Ca[2];return xa(r,o,s,a,i)}getTileCoordCenter(t){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Nn(this.getTileSize(t[0]),this.tmpSize_);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,n){const i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Nn(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*r,a=i[1]-(t[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return Ys(o,a,l,c,n)}getTileCoordForCoordAndResolution(t,n,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],n,!1,i)}getTileCoordForXYAndResolution_(t,n,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=Nn(this.getTileSize(o),this.tmpSize_);let u=a*(t-l[0])/i/c[0],f=a*(l[1]-n)/i/c[1];return r?(u=Jf(u,fs)-1,f=Jf(f,fs)-1):(u=Kf(u,fs),f=Kf(f,fs)),c2(o,u,f,s)}getTileCoordForXYAndZ_(t,n,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=Nn(this.getTileSize(i),this.tmpSize_);let c=(t-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return r?(c=Jf(c,fs)-1,u=Jf(u,fs)-1):(c=Kf(c,fs),u=Kf(u,fs)),c2(i,c,u,s)}getTileCoordForCoordAndZ(t,n,i){return this.getTileCoordForXYAndZ_(t[0],t[1],n,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,n){const i=b1(this.resolutions_,t,n||0);return Ae(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,n){return pM(n,0,n.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const n=this.resolutions_.length,i=new Array(n);for(let r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}}const cR=uz;function uR(e){let t=e.getDefaultTileGrid();return t||(t=gz(e),e.setDefaultTileGrid(t)),t}function fz(e,t,n){const i=t[0],r=e.getTileCoordCenter(t),s=sw(n);if(!qu(s,r)){const o=Qt(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,e.getTileCoordForCoordAndZ(r,i)}return t}function hz(e,t,n,i){i=i!==void 0?i:"top-left";const r=fR(e,t,n);return new cR({extent:e,origin:UN(e,i),resolutions:r,tileSize:n})}function dz(e){const t=e||{},n=t.extent||Oe("EPSG:3857").getExtent(),i={extent:n,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:fR(n,t.maxZoom,t.tileSize,t.maxResolution)};return new cR(i)}function fR(e,t,n,i){t=t!==void 0?t:rD,n=Nn(n!==void 0?n:S1);const r=Wn(e),s=Qt(e);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function gz(e,t,n,i){const r=sw(e);return hz(r,t,n,i)}function sw(e){e=Oe(e);let t=e.getExtent();if(!t){const n=180*wl.degrees/e.getMetersPerUnit();t=Ys(-n,-n,n,n)}return t}class mz extends lR{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const n=[256,256];this.tileGrid&&Nn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new aR(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,n){const i=this.getTileCacheForProjection(t);i&&i.expireCache(n)}forEachLoadedTile(t,n,i,r){const s=this.getTileCacheForProjection(t);if(!s)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let f=i.minY;f<=i.maxY;++f)l=gm(n,u,f),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===ht.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const n=t?this.getTileGridForProjection(t):this.tileGrid;return n?n.getResolutions():null}getTile(t,n,i,r,s){return vt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:uR(t)}getTileCacheForProjection(t){const n=this.getProjection();return $t(n===null||xo(n,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,n,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=Nn(r.getTileSize(t),this.tmpSize);return s==1?o:v$(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=fz(i,t,n)),az(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,n){const i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,n,i,r){}}class pz extends Kr{constructor(t,n){super(t),this.tile=n}}const yz=mz;function _z(e,t){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return e.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],u=t.getFullTileRange(c);return $t(u,"The {-y} placeholder requires a tile grid with extent"),(u.getHeight()-o[2]-1).toString()})}}function wz(e,t){const n=e.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=_z(e[r],t);return vz(i)}function vz(e){return e.length===1?e[0]:function(t,n,i){if(!t)return;const r=oz(t),s=zo(r,e.length);return e[s](t,n,i)}}function bz(e){const t=[];let n=/\{([a-z])-([a-z])\}/.exec(e);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)t.push(e.replace(n[0],String.fromCharCode(s)));return t}if(n=/\{(\d+)-(\d+)\}/.exec(e),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)t.push(e.replace(n[0],r.toString()));return t}return t.push(e),t}class ow extends yz{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ow.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const n=t.target,i=Vt(n),r=n.getState();let s;r==ht.LOADING?(this.tileLoadingKeys_[i]=!0,s=X0.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==ht.ERROR?X0.TILELOADERROR:r==ht.LOADED?X0.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new pz(s,n))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(t){const n=bz(t);this.urls=n,this.setUrls(n)}setUrls(t){this.urls=t;const n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(wz(t,this.tileGrid),n):this.setKey(n)}tileUrlFunction(t,n,i){}useTile(t,n,i){const r=gm(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const xz=ow;class Ez extends xz{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Tz,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:UM,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,n){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?n:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!xo(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!xo(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||xo(n,t)))return this.tileGrid;const i=Vt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=uR(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const n=this.getProjection();if(!n||xo(n,t))return this.tileCache;const i=Vt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new aR(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,n,i,r,s,o){const a=[t,n,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?ht.IDLE:ht.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(Et.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,n,i,r,s){const o=this.getProjection();if(!o||!s||xo(o,s))return this.getTileInternal(t,n,i,r,o||s);const a=this.getTileCacheForProjection(s),l=[t,n,i];let c;const u=oR(l);a.containsKey(u)&&(c=a.get(u));const f=this.getKey();if(c&&c.key==f)return c;const h=this.getTileGridForProjection(o),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),m=new Oy(o,h,s,d,l,g,this.getTilePixelRatio(r),this.getGutter(),(_,p,y,v)=>this.getTileInternal(_,p,y,v,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=f,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(t,n,i,r,s){let o=null;const a=gm(t,n,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,n,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(t,n,i,r,s,l),c.getState()==ht.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(t,n){const i=Oe(t);if(i){const r=Vt(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function Tz(e,t){e.getImage().src=t}const Cz=Ez;class Sz extends Cz{constructor(t){t=t||{};const n=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:dz({extent:sw(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Mz=Sz,Rz='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Iz extends Mz{constructor(t){t=t||{};let n;t.attributions!==void 0?n=t.attributions:n=[Rz];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",r=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}}const Az=Iz;class Lz{constructor(t){this.rbush_=new nw(t),this.items_={}}insert(t,n){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.rbush_.insert(i),this.items_[Vt(n)]=i}load(t,n){const i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const o=t[r],a=n[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[Vt(a)]=l}this.rbush_.load(i)}remove(t){const n=Vt(t),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(t,n){const i=this.items_[Vt(n)],r=[i.minX,i.minY,i.maxX,i.maxY];yu(r,t)||(this.remove(n),this.insert(t,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(t){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(n).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,n){return this.forEach_(this.getInExtent(t),n)}forEach_(t,n){let i;for(let r=0,s=t.length;r<s;r++)if(i=n(t[r]),i)return i;return i}isEmpty(){return _l(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const n=this.rbush_.toJSON();return Ys(n.minX,n.minY,n.maxX,n.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const n in t.items_)this.items_[n]=t.items_[n]}}const f2=Lz,fi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Oz(e,t){return[[-1/0,-1/0,1/0,1/0]]}let kz=!1;function Pz(e,t,n,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof e=="function"?e(n,i,r):e,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=kz,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?s(t.readFeatures(u,{extent:n,featureProjection:r}),t.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function h2(e,t){return function(n,i,r,s,o){const a=this;Pz(e,t,n,i,r,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||yl)}}class hs extends Kr{constructor(t,n,i){super(t),this.feature=n,this.features=i}}class Fz extends lR{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=yl,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&($t(this.format_,"`format` must be set when `url` is set"),this.loader_=h2(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Oz;const n=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=n?new f2:null,this.loadedExtentsRtree_=new f2,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),!n&&i===void 0&&(i=new Hi(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const n=Vt(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);const i=t.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new hs(fi.ADDFEATURE,t))}setupChangeEvents_(t,n){this.featureChangeKeys_[t]=[Ft(n,Et.CHANGE,this.handleFeatureChange_,this),Ft(n,pl.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,n){let i=!0;const r=n.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=n),i&&($t(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=n),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const n=[],i=[],r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=Vt(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=Vt(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,r),this.hasListener(fi.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new hs(fi.ADDFEATURE,i[s]))}bindFeaturesCollection_(t){let n=!1;this.addEventListener(fi.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(fi.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(bn.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),t.addEventListener(bn.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(ee);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new hs(fi.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,n){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(t))return n(r)})}forEachFeatureInExtent(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(t,n){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const s=n(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),_l(this.nullGeometryFeatures_)||Nr(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n}getFeaturesInExtent(t,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=jN(t,n);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,n){const i=t[0],r=t[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||pu,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),f=a;if(a=u.closestPointXY(i,r,o,a),a<f){s=c;const h=Math.sqrt(a);l[0]=i-h,l[1]=r-h,l[2]=i+h,l[3]=r+h}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const n=this.idIndex_[t.toString()];return n!==void 0?n:null}getFeatureByUid(t){const n=this.uidIndex_[t];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const n=t.target,i=Vt(n),r=n.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new hs(fi.CHANGEFEATURE,n))}hasFeature(t){const n=t.getId();return n!==void 0?n in this.idIndex_:Vt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&_l(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,n,i){const r=this.loadedExtentsRtree_,s=this.strategy_(t,n,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return As(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new hs(fi.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new hs(fi.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new hs(fi.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const n=this.loadedExtentsRtree_;let i;n.forEachInExtent(t,function(r){if(yu(r.extent,t))return i=r,!0}),i&&n.remove(i)}removeFeature(t){if(!t)return;const n=Vt(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const n=Vt(t),i=this.featureChangeKeys_[n];if(!i)return;i.forEach(ee),delete this.featureChangeKeys_[n];const r=t.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[n],this.dispatchEvent(new hs(fi.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let n=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],n=!0;break}return n}setLoader(t){this.loader_=t}setUrl(t){$t(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(h2(t,this.format_))}}const Nz=Fz,d2=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],g2={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class Dz extends Hl{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=t.keys!==void 0?t.keys:!1,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=t.className!==void 0?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=t.activeClassName!==void 0?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=t.inactiveClassName!==void 0?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const n=t.label!==void 0?t.label:"⤢";this.labelNode_=typeof n=="string"?document.createTextNode(n):n;const i=t.labelActive!==void 0?t.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const r=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(Et.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${ha} ${Qu}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const n=t.getOwnerDocument();if(m2(n))if(p2(n))zz(n);else{let i;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?$z(i):hR(i)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const n=this.isInFullscreen_;this.isInFullscreen_=p2(t.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(pd(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(g2.ENTERFULLSCREEN)):(pd(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(g2.LEAVEFULLSCREEN)),t.updateSize())}setClassName_(t,n){n?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const n=this.getMap();n&&n.removeChangeListener($e.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener($e.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let i=0,r=t.length;i<r;++i)ee(t[i]);t.length=0;const n=this.getMap();if(n){const i=n.getOwnerDocument();m2(i)?this.element.classList.remove($x):this.element.classList.add($x);for(let r=0,s=d2.length;r<s;++r)t.push(Ft(i,d2[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function m2(e){const t=e.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&e.fullscreenEnabled)}function p2(e){return!!(e.webkitIsFullScreen||e.fullscreenElement)}function hR(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function $z(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():hR(e)}function zz(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}const Wz=Dz,je={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Gz extends Fi{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+h8,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(je.ELEMENT,this.handleElementChanged),this.addChangeListener(je.MAP,this.handleMapChanged),this.addChangeListener(je.OFFSET,this.handleOffsetChanged),this.addChangeListener(je.POSITION,this.handlePositionChanged),this.addChangeListener(je.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(je.ELEMENT)}getId(){return this.id}getMap(){return this.get(je.MAP)||null}getOffset(){return this.get(je.OFFSET)}getPosition(){return this.get(je.POSITION)}getPositioning(){return this.get(je.POSITIONING)}handleElementChanged(){EM(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(yd(this.element),ee(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Ft(t,Cr.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(je.ELEMENT,t)}setMap(t){this.set(je.MAP,t)}setOffset(t){this.set(je.OFFSET,t)}setPosition(t){this.set(je.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(je.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),s=this.getRect(r,[g8(r),m8(r)]);t=t||{};const o=t.margin===void 0?20:t.margin;if(!As(i,s)){const a=s[0]-i[0],l=i[2]-s[2],c=s[1]-i[1],u=i[3]-s[3],f=[0,0];if(a<0?f[0]=a-o:l<0&&(f[0]=Math.abs(l)+o),c<0?f[1]=c-o:u<0&&(f[1]=Math.abs(u)+o),f[0]!==0||f[1]!==0){const h=n.getView().getCenterInternal(),d=n.getPixelFromCoordinateInternal(h);if(!d)return;const g=[d[0]+f[0],d[1]+f[1]],m=t.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(g),duration:m.duration,easing:m.easing})}}}getRect(t,n){const i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+n[0],s+n[1]]}setPositioning(t){this.set(je.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),n=this.getPosition();if(!t||!t.isRendered()||!n){this.setVisible(!1);return}const i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(t,n){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(t[0]+r[0])+"px",a=Math.round(t[1]+r[1])+"px";let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}}const y2=Gz,H0="units",Yz=[1,2,5],vc=25.4/.28;class Bz extends Hl{constructor(t){t=t||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:t.render,target:t.target}),this.on,this.once,this.un;const i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+ha,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(H0,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(H0)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(H0,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=t.center,i=t.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=hd(i,t.resolution,n,s);const a=this.minWidth_*(this.dpi_||vc)/vc,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||vc)/vc:void 0;let c=a*o,u="";if(r=="degrees"){const v=wl.degrees;c*=v,c<v/60?(u="″",o*=3600):c<v?(u="′",o*=60):u="°"}else if(r=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(r=="nautical")o/=1852,u="NM";else if(r=="metric")c<.001?(u="μm",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(r=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let f=3*Math.floor(Math.log(a*o)/Math.log(10)),h,d,g,m,_,p;for(;;){g=Math.floor(f/3);const v=Math.pow(10,g);if(h=Yz[(f%3+3)%3]*v,d=Math.round(h/o),isNaN(d)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&d>=l){h=m,d=_,g=p;break}else if(d>=a)break;m=h,_=d,p=g,++f}const y=this.scaleBar_?this.createScaleBar(d,h,u):h.toFixed(g<0?-g:0)+" "+u;this.renderedHTML_!=y&&(this.innerElement_.innerHTML=y,this.renderedHTML_=y),this.renderedWidth_!=d&&(this.innerElement_.style.width=d+"px",this.renderedWidth_=d),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,n,i){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=t/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const f=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${f}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,t,!1,n,i):"")+"</div>")}return l.push(this.createStepText(o,t,!0,n,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+s+"</div>":"")+l.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,n,i,r,s){const a=(t===0?0:Math.round(r/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+s),l=t===0?-3:n/this.scaleBarSteps_*-1,c=t===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${t===0?"left":"center"};min-width: ${c}px;left: ${i?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const t=hd(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||vc,i=1e3/25.4;return t*i*n}render(t){const n=t.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const Uz=Bz;class Vz extends Hl{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const n=t.className!==void 0?t.className:"ol-zoom-extent",i=t.label!==void 0?t.label:"E",r=t.tipLabel!==void 0?t.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=r,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener(Et.CLICK,this.handleClick_.bind(this),!1);const o=n+" "+ha+" "+Qu,a=this.element;a.className=o,a.appendChild(s)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const n=this.getMap().getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(Ey(i))}}const j0=Vz;class Xz{constructor(t){gt(this,"fileId",new Hz);gt(this,"activity",new jz);gt(this,"sessions",new Array);gt(this,"records",new Array);const n=t;this.fileId=n==null?void 0:n.fileId,this.activity=n==null?void 0:n.activity,this.sessions=n==null?void 0:n.sessions,this.records=n==null?void 0:n.records}}class Hz{constructor(){gt(this,"manufacturer",null);gt(this,"product",null);gt(this,"timeCreated",null)}}class jz{constructor(){gt(this,"timestamp",null);gt(this,"localDateTime",null)}}class Ad{constructor(t){gt(this,"timestamp",null);gt(this,"positionLat",null);gt(this,"positionLong",null);gt(this,"distance",null);gt(this,"speed",null);gt(this,"altitude",null);gt(this,"cadence",null);gt(this,"heartRate",null);gt(this,"power",null);gt(this,"temperature",null);gt(this,"grade",0);const n=t;this.positionLat=n==null?void 0:n.positionLat,this.positionLong=n==null?void 0:n.positionLong,this.altitude=n==null?void 0:n.altitude,this.cadence=n==null?void 0:n.cadence,this.distance=n==null?void 0:n.distance,this.heartRate=n==null?void 0:n.heartRate,this.speed=n==null?void 0:n.speed,this.timestamp=n==null?void 0:n.timestamp,this.power=n==null?void 0:n.power,this.temperature=n==null?void 0:n.temperature,this.grade=n==null?void 0:n.grade}}class da extends Error{}class Zz extends da{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class qz extends da{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Kz extends da{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class $c extends da{}class dR extends da{constructor(t){super(`Invalid unit ${t}`)}}class Jn extends da{}class ds extends da{constructor(){super("Zone is an abstract class")}}const lt="numeric",Ii="short",zn="long",Ld={year:lt,month:lt,day:lt},gR={year:lt,month:Ii,day:lt},Jz={year:lt,month:Ii,day:lt,weekday:Ii},mR={year:lt,month:zn,day:lt},pR={year:lt,month:zn,day:lt,weekday:zn},yR={hour:lt,minute:lt},_R={hour:lt,minute:lt,second:lt},wR={hour:lt,minute:lt,second:lt,timeZoneName:Ii},vR={hour:lt,minute:lt,second:lt,timeZoneName:zn},bR={hour:lt,minute:lt,hourCycle:"h23"},xR={hour:lt,minute:lt,second:lt,hourCycle:"h23"},ER={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:Ii},TR={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:zn},CR={year:lt,month:lt,day:lt,hour:lt,minute:lt},SR={year:lt,month:lt,day:lt,hour:lt,minute:lt,second:lt},MR={year:lt,month:Ii,day:lt,hour:lt,minute:lt},RR={year:lt,month:Ii,day:lt,hour:lt,minute:lt,second:lt},Qz={year:lt,month:Ii,day:lt,weekday:Ii,hour:lt,minute:lt},IR={year:lt,month:zn,day:lt,hour:lt,minute:lt,timeZoneName:Ii},AR={year:lt,month:zn,day:lt,hour:lt,minute:lt,second:lt,timeZoneName:Ii},LR={year:lt,month:zn,day:lt,weekday:zn,hour:lt,minute:lt,timeZoneName:zn},OR={year:lt,month:zn,day:lt,weekday:zn,hour:lt,minute:lt,second:lt,timeZoneName:zn};class af{get type(){throw new ds}get name(){throw new ds}get ianaName(){return this.name}get isUniversal(){throw new ds}offsetName(t,n){throw new ds}formatOffset(t,n){throw new ds}offset(t){throw new ds}equals(t){throw new ds}get isValid(){throw new ds}}let Z0=null;class mm extends af{static get instance(){return Z0===null&&(Z0=new mm),Z0}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return PR(t,n,i)}formatOffset(t,n){return eu(this.offset(t),n)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Hh={};function tW(e){return Hh[e]||(Hh[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Hh[e]}const eW={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function nW(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,r,s,o,a,l,c,u]=i;return[o,r,s,a,l,c,u]}function iW(e,t){const n=e.formatToParts(t),i=[];for(let r=0;r<n.length;r++){const{type:s,value:o}=n[r],a=eW[s];s==="era"?i[a]=o:Pt(a)||(i[a]=parseInt(o,10))}return i}let lh={};class Ur extends af{static create(t){return lh[t]||(lh[t]=new Ur(t)),lh[t]}static resetCache(){lh={},Hh={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Ur.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:n,locale:i}){return PR(t,n,i,this.name)}formatOffset(t,n){return eu(this.offset(t),n)}offset(t){const n=new Date(t);if(isNaN(n))return NaN;const i=tW(this.name);let[r,s,o,a,l,c,u]=i.formatToParts?iW(i,n):nW(i,n);a==="BC"&&(r=-Math.abs(r)+1);const h=ym({year:r,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let d=+n;const g=d%1e3;return d-=g>=0?g:1e3+g,(h-d)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let _2={};function rW(e,t={}){const n=JSON.stringify([e,t]);let i=_2[n];return i||(i=new Intl.ListFormat(e,t),_2[n]=i),i}let Fy={};function Ny(e,t={}){const n=JSON.stringify([e,t]);let i=Fy[n];return i||(i=new Intl.DateTimeFormat(e,t),Fy[n]=i),i}let Dy={};function sW(e,t={}){const n=JSON.stringify([e,t]);let i=Dy[n];return i||(i=new Intl.NumberFormat(e,t),Dy[n]=i),i}let $y={};function oW(e,t={}){const{base:n,...i}=t,r=JSON.stringify([e,i]);let s=$y[r];return s||(s=new Intl.RelativeTimeFormat(e,t),$y[r]=s),s}let zc=null;function aW(){return zc||(zc=new Intl.DateTimeFormat().resolvedOptions().locale,zc)}function lW(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(n===-1)return[e];{let i,r;try{i=Ny(e).resolvedOptions(),r=e}catch{const l=e.substring(0,n);i=Ny(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:o}=i;return[r,s,o]}}function cW(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}function uW(e){const t=[];for(let n=1;n<=12;n++){const i=Ct.utc(2009,n,1);t.push(e(i))}return t}function fW(e){const t=[];for(let n=1;n<=7;n++){const i=Ct.utc(2016,11,13+n);t.push(e(i))}return t}function ch(e,t,n,i){const r=e.listingMode();return r==="error"?null:r==="en"?n(t):i(t)}function hW(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class dW{constructor(t,n,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:r,floor:s,...o}=i;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=sW(t,a)}}format(t){if(this.inf){const n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{const n=this.floor?Math.floor(t):lw(t,3);return Re(n,this.padTo)}}}class gW{constructor(t,n,i){this.opts=i,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Ur.create(a).valid?(r=a,this.dt=t):(r="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,r=t.zone.name):(r="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=Ny(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(n=>{if(n.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:i}}else return n}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class mW{constructor(t,n,i){this.opts={style:"long",...i},!n&&kR()&&(this.rtf=oW(t,i))}format(t,n){return this.rtf?this.rtf.format(t,n):OW(n,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,n){return this.rtf?this.rtf.formatToParts(t,n):[]}}class oe{static fromOpts(t){return oe.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,n,i,r=!1){const s=t||Me.defaultLocale,o=s||(r?"en-US":aW()),a=n||Me.defaultNumberingSystem,l=i||Me.defaultOutputCalendar;return new oe(o,a,l,s)}static resetCache(){zc=null,Fy={},Dy={},$y={}}static fromObject({locale:t,numberingSystem:n,outputCalendar:i}={}){return oe.create(t,n,i)}constructor(t,n,i,r){const[s,o,a]=lW(t);this.locale=s,this.numberingSystem=n||o||null,this.outputCalendar=i||a||null,this.intl=cW(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=hW(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:oe.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,n=!1){return ch(this,t,DR,()=>{const i=n?{month:t,day:"numeric"}:{month:t},r=n?"format":"standalone";return this.monthsCache[r][t]||(this.monthsCache[r][t]=uW(s=>this.extract(s,i,"month"))),this.monthsCache[r][t]})}weekdays(t,n=!1){return ch(this,t,WR,()=>{const i=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},r=n?"format":"standalone";return this.weekdaysCache[r][t]||(this.weekdaysCache[r][t]=fW(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[r][t]})}meridiems(){return ch(this,void 0,()=>GR,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ct.utc(2016,11,13,9),Ct.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(t){return ch(this,t,YR,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ct.utc(-40,1,1),Ct.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[t]})}extract(t,n,i){const r=this.dtFormatter(t,n),s=r.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new dW(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,n={}){return new gW(t,this.intl,n)}relFormatter(t={}){return new mW(this.intl,this.isEnglish(),t)}listFormatter(t={}){return rW(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let q0=null;class dn extends af{static get utcInstance(){return q0===null&&(q0=new dn(0)),q0}static instance(t){return t===0?dn.utcInstance:new dn(t)}static parseSpecifier(t){if(t){const n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new dn(_m(n[1],n[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${eu(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${eu(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,n){return eu(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class pW extends af{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ts(e,t){if(Pt(e)||e===null)return t;if(e instanceof af)return e;if(yW(e)){const n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?mm.instance:n==="utc"||n==="gmt"?dn.utcInstance:dn.parseSpecifier(n)||Ur.create(e)}else return Yo(e)?dn.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new pW(e)}let w2=()=>Date.now(),v2="system",b2=null,x2=null,E2=null,T2=60,C2;class Me{static get now(){return w2}static set now(t){w2=t}static set defaultZone(t){v2=t}static get defaultZone(){return Ts(v2,mm.instance)}static get defaultLocale(){return b2}static set defaultLocale(t){b2=t}static get defaultNumberingSystem(){return x2}static set defaultNumberingSystem(t){x2=t}static get defaultOutputCalendar(){return E2}static set defaultOutputCalendar(t){E2=t}static get twoDigitCutoffYear(){return T2}static set twoDigitCutoffYear(t){T2=t%100}static get throwOnInvalid(){return C2}static set throwOnInvalid(t){C2=t}static resetCaches(){oe.resetCache(),Ur.resetCache()}}function Pt(e){return typeof e>"u"}function Yo(e){return typeof e=="number"}function pm(e){return typeof e=="number"&&e%1===0}function yW(e){return typeof e=="string"}function _W(e){return Object.prototype.toString.call(e)==="[object Date]"}function kR(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function wW(e){return Array.isArray(e)?e:[e]}function S2(e,t,n){if(e.length!==0)return e.reduce((i,r)=>{const s=[t(r),r];return i&&n(i[0],s[0])===i[0]?i:s},null)[1]}function vW(e,t){return t.reduce((n,i)=>(n[i]=e[i],n),{})}function Tl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ir(e,t,n){return pm(e)&&e>=t&&e<=n}function bW(e,t){return e-t*Math.floor(e/t)}function Re(e,t=2){const n=e<0;let i;return n?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function xs(e){if(!(Pt(e)||e===null||e===""))return parseInt(e,10)}function uo(e){if(!(Pt(e)||e===null||e===""))return parseFloat(e)}function aw(e){if(!(Pt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function lw(e,t,n=!1){const i=10**t;return(n?Math.trunc:Math.round)(e*i)/i}function lf(e){return e%4===0&&(e%100!==0||e%400===0)}function tu(e){return lf(e)?366:365}function Od(e,t){const n=bW(t-1,12)+1,i=e+(t-n)/12;return n===2?lf(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function ym(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function kd(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,n=e-1,i=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return t===4||i===3?53:52}function zy(e){return e>99?e:e>Me.twoDigitCutoffYear?1900+e:2e3+e}function PR(e,t,n,i=null){const r=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function _m(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0,r=n<0||Object.is(n,-0)?-i:i;return n*60+r}function FR(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Jn(`Invalid unit value ${e}`);return t}function Pd(e,t){const n={};for(const i in e)if(Tl(e,i)){const r=e[i];if(r==null)continue;n[t(i)]=FR(r)}return n}function eu(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),r=e>=0?"+":"-";switch(t){case"short":return`${r}${Re(n,2)}:${Re(i,2)}`;case"narrow":return`${r}${n}${i>0?`:${i}`:""}`;case"techie":return`${r}${Re(n,2)}${Re(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function wm(e){return vW(e,["hour","minute","second","millisecond"])}const xW=["January","February","March","April","May","June","July","August","September","October","November","December"],NR=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],EW=["J","F","M","A","M","J","J","A","S","O","N","D"];function DR(e){switch(e){case"narrow":return[...EW];case"short":return[...NR];case"long":return[...xW];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const $R=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],zR=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],TW=["M","T","W","T","F","S","S"];function WR(e){switch(e){case"narrow":return[...TW];case"short":return[...zR];case"long":return[...$R];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const GR=["AM","PM"],CW=["Before Christ","Anno Domini"],SW=["BC","AD"],MW=["B","A"];function YR(e){switch(e){case"narrow":return[...MW];case"short":return[...SW];case"long":return[...CW];default:return null}}function RW(e){return GR[e.hour<12?0:1]}function IW(e,t){return WR(t)[e.weekday-1]}function AW(e,t){return DR(t)[e.month-1]}function LW(e,t){return YR(t)[e.year<0?0:1]}function OW(e,t,n="always",i=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&s){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${r[e][0]}`;case-1:return f?"yesterday":`last ${r[e][0]}`;case 0:return f?"today":`this ${r[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=r[e],u=i?l?c[1]:c[2]||c[1]:l?r[e][0]:e;return o?`${a} ${u} ago`:`in ${a} ${u}`}function M2(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const kW={D:Ld,DD:gR,DDD:mR,DDDD:pR,t:yR,tt:_R,ttt:wR,tttt:vR,T:bR,TT:xR,TTT:ER,TTTT:TR,f:CR,ff:MR,fff:IR,ffff:LR,F:SR,FF:RR,FFF:AR,FFFF:OR};class tn{static create(t,n={}){return new tn(t,n)}static parseFormat(t){let n=null,i="",r=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),n=null,i="",r=!r):r||a===n?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,n=a)}return i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return kW[t]}constructor(t,n){this.opts=n,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...n}).format()}dtFormatter(t,n={}){return this.loc.dtFormatter(t,{...this.opts,...n})}formatDateTime(t,n){return this.dtFormatter(t,n).format()}formatDateTimeParts(t,n){return this.dtFormatter(t,n).formatToParts()}formatInterval(t,n){return this.dtFormatter(t.start,n).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,n){return this.dtFormatter(t,n).resolvedOptions()}num(t,n=0){if(this.opts.forceSimple)return Re(t,n);const i={...this.opts};return n>0&&(i.padTo=n),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,n){const i=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(d,g)=>this.loc.extract(t,d,g),o=d=>t.isOffsetFixed&&t.offset===0&&d.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,d.format):"",a=()=>i?RW(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(d,g)=>i?AW(t,d):s(g?{month:d}:{month:d,day:"numeric"},"month"),c=(d,g)=>i?IW(t,d):s(g?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),u=d=>{const g=tn.macroTokenToFormatOpts(d);return g?this.formatWithSystemDefault(t,g):d},f=d=>i?LW(t,d):s({era:d},"era"),h=d=>{switch(d){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(t.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(t.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(t.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(d)}};return M2(tn.parseFormat(n),h)}formatDurationFromString(t,n){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>c=>{const u=i(c);return u?this.num(l.get(u),c.length):c},s=tn.parseFormat(n),o=s.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return M2(s,r(a))}}class xi{constructor(t,n){this.reason=t,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const BR=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Zl(...e){const t=e.reduce((n,i)=>n+i.source,"");return RegExp(`^${t}$`)}function ql(...e){return t=>e.reduce(([n,i,r],s)=>{const[o,a,l]=s(t,r);return[{...n,...o},a||i,l]},[{},null,1]).slice(0,2)}function Kl(e,...t){if(e==null)return[null,null];for(const[n,i]of t){const r=n.exec(e);if(r)return i(r)}return[null,null]}function UR(...e){return(t,n)=>{const i={};let r;for(r=0;r<e.length;r++)i[e[r]]=xs(t[n+r]);return[i,null,n+r]}}const VR=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,PW=`(?:${VR.source}?(?:\\[(${BR.source})\\])?)?`,cw=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,XR=RegExp(`${cw.source}${PW}`),uw=RegExp(`(?:T${XR.source})?`),FW=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,NW=/(\d{4})-?W(\d\d)(?:-?(\d))?/,DW=/(\d{4})-?(\d{3})/,$W=UR("weekYear","weekNumber","weekDay"),zW=UR("year","ordinal"),WW=/(\d{4})-(\d\d)-(\d\d)/,HR=RegExp(`${cw.source} ?(?:${VR.source}|(${BR.source}))?`),GW=RegExp(`(?: ${HR.source})?`);function sl(e,t,n){const i=e[t];return Pt(i)?n:xs(i)}function YW(e,t){return[{year:sl(e,t),month:sl(e,t+1,1),day:sl(e,t+2,1)},null,t+3]}function Jl(e,t){return[{hours:sl(e,t,0),minutes:sl(e,t+1,0),seconds:sl(e,t+2,0),milliseconds:aw(e[t+3])},null,t+4]}function cf(e,t){const n=!e[t]&&!e[t+1],i=_m(e[t+1],e[t+2]),r=n?null:dn.instance(i);return[{},r,t+3]}function uf(e,t){const n=e[t]?Ur.create(e[t]):null;return[{},n,t+1]}const BW=RegExp(`^T?${cw.source}$`),UW=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function VW(e){const[t,n,i,r,s,o,a,l,c]=e,u=t[0]==="-",f=l&&l[0]==="-",h=(d,g=!1)=>d!==void 0&&(g||d&&u)?-d:d;return[{years:h(uo(n)),months:h(uo(i)),weeks:h(uo(r)),days:h(uo(s)),hours:h(uo(o)),minutes:h(uo(a)),seconds:h(uo(l),l==="-0"),milliseconds:h(aw(c),f)}]}const XW={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fw(e,t,n,i,r,s,o){const a={year:t.length===2?zy(xs(t)):xs(t),month:NR.indexOf(n)+1,day:xs(i),hour:xs(r),minute:xs(s)};return o&&(a.second=xs(o)),e&&(a.weekday=e.length>3?$R.indexOf(e)+1:zR.indexOf(e)+1),a}const HW=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function jW(e){const[,t,n,i,r,s,o,a,l,c,u,f]=e,h=fw(t,r,i,n,s,o,a);let d;return l?d=XW[l]:c?d=0:d=_m(u,f),[h,new dn(d)]}function ZW(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const qW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,KW=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,JW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function R2(e){const[,t,n,i,r,s,o,a]=e;return[fw(t,r,i,n,s,o,a),dn.utcInstance]}function QW(e){const[,t,n,i,r,s,o,a]=e;return[fw(t,a,n,i,r,s,o),dn.utcInstance]}const tG=Zl(FW,uw),eG=Zl(NW,uw),nG=Zl(DW,uw),iG=Zl(XR),jR=ql(YW,Jl,cf,uf),rG=ql($W,Jl,cf,uf),sG=ql(zW,Jl,cf,uf),oG=ql(Jl,cf,uf);function aG(e){return Kl(e,[tG,jR],[eG,rG],[nG,sG],[iG,oG])}function lG(e){return Kl(ZW(e),[HW,jW])}function cG(e){return Kl(e,[qW,R2],[KW,R2],[JW,QW])}function uG(e){return Kl(e,[UW,VW])}const fG=ql(Jl);function hG(e){return Kl(e,[BW,fG])}const dG=Zl(WW,GW),gG=Zl(HR),mG=ql(Jl,cf,uf);function pG(e){return Kl(e,[dG,jR],[gG,mG])}const I2="Invalid Duration",ZR={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},yG={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...ZR},Zn=146097/400,Sa=146097/4800,_G={years:{quarters:4,months:12,weeks:Zn/7,days:Zn,hours:Zn*24,minutes:Zn*24*60,seconds:Zn*24*60*60,milliseconds:Zn*24*60*60*1e3},quarters:{months:3,weeks:Zn/28,days:Zn/4,hours:Zn*24/4,minutes:Zn*24*60/4,seconds:Zn*24*60*60/4,milliseconds:Zn*24*60*60*1e3/4},months:{weeks:Sa/7,days:Sa,hours:Sa*24,minutes:Sa*24*60,seconds:Sa*24*60*60,milliseconds:Sa*24*60*60*1e3},...ZR},Ro=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],wG=Ro.slice(0).reverse();function gs(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Dt(i)}function qR(e,t){let n=t.milliseconds??0;for(const i of wG.slice(1))t[i]&&(n+=t[i]*e[i].milliseconds);return n}function A2(e,t){const n=qR(e,t)<0?-1:1;Ro.reduceRight((i,r)=>{if(Pt(t[r]))return i;if(i){const s=t[i]*n,o=e[r][i],a=Math.floor(s/o);t[r]+=a*n,t[i]-=a*o*n}return r},null),Ro.reduce((i,r)=>{if(Pt(t[r]))return i;if(i){const s=t[i]%1;t[i]-=s,t[r]+=s*e[i][r]}return r},null)}function vG(e){const t={};for(const[n,i]of Object.entries(e))i!==0&&(t[n]=i);return t}class Dt{constructor(t){const n=t.conversionAccuracy==="longterm"||!1;let i=n?_G:yG;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||oe.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,n){return Dt.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(t==null||typeof t!="object")throw new Jn(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Dt({values:Pd(t,Dt.normalizeUnit),loc:oe.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(Yo(t))return Dt.fromMillis(t);if(Dt.isDuration(t))return t;if(typeof t=="object")return Dt.fromObject(t);throw new Jn(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){const[i]=uG(t);return i?Dt.fromObject(i,n):Dt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){const[i]=hG(t);return i?Dt.fromObject(i,n):Dt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new Jn("need to specify a reason the Duration is invalid");const i=t instanceof xi?t:new xi(t,n);if(Me.throwOnInvalid)throw new Kz(i);return new Dt({invalid:i})}static normalizeUnit(t){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!n)throw new dR(t);return n}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,n={}){const i={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?tn.create(this.loc,i).formatDurationFromString(this,t):I2}toHuman(t={}){if(!this.isValid)return I2;const n=Ro.map(i=>{const r=this.values[i];return Pt(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(r)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=lw(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Ct.fromMillis(n,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?qR(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t),i={};for(const r of Ro)(Tl(n.values,r)||Tl(this.values,r))&&(i[r]=n.get(r)+this.get(r));return gs(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t);return this.plus(n.negate())}mapUnits(t){if(!this.isValid)return this;const n={};for(const i of Object.keys(this.values))n[i]=FR(t(this.values[i],i));return gs(this,{values:n},!0)}get(t){return this[Dt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const n={...this.values,...Pd(t,Dt.normalizeUnit)};return gs(this,{values:n})}reconfigure({locale:t,numberingSystem:n,conversionAccuracy:i,matrix:r}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:n}),matrix:r,conversionAccuracy:i};return gs(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return A2(this.matrix,t),gs(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=vG(this.normalize().shiftToAll().toObject());return gs(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Dt.normalizeUnit(o));const n={},i={},r=this.toObject();let s;for(const o of Ro)if(t.indexOf(o)>=0){s=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;Yo(r[o])&&(a+=r[o]);const l=Math.trunc(a);n[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else Yo(r[o])&&(i[o]=r[o]);for(const o in i)i[o]!==0&&(n[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return A2(this.matrix,n),gs(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=this.values[n]===0?0:-this.values[n];return gs(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function n(i,r){return i===void 0||i===0?r===void 0||r===0:i===r}for(const i of Ro)if(!n(this.values[i],t.values[i]))return!1;return!0}}const Ma="Invalid Interval";function bG(e,t){return!e||!e.isValid?we.invalid("missing or invalid start"):!t||!t.isValid?we.invalid("missing or invalid end"):t<e?we.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class we{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new Jn("need to specify a reason the Interval is invalid");const i=t instanceof xi?t:new xi(t,n);if(Me.throwOnInvalid)throw new qz(i);return new we({invalid:i})}static fromDateTimes(t,n){const i=xc(t),r=xc(n),s=bG(i,r);return s??new we({start:i,end:r})}static after(t,n){const i=Dt.fromDurationLike(n),r=xc(t);return we.fromDateTimes(r,r.plus(i))}static before(t,n){const i=Dt.fromDurationLike(n),r=xc(t);return we.fromDateTimes(r.minus(i),r)}static fromISO(t,n){const[i,r]=(t||"").split("/",2);if(i&&r){let s,o;try{s=Ct.fromISO(i,n),o=s.isValid}catch{o=!1}let a,l;try{a=Ct.fromISO(r,n),l=a.isValid}catch{l=!1}if(o&&l)return we.fromDateTimes(s,a);if(o){const c=Dt.fromISO(r,n);if(c.isValid)return we.after(s,c)}else if(l){const c=Dt.fromISO(i,n);if(c.isValid)return we.before(a,c)}}return we.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const n=this.start.startOf(t),i=this.end.startOf(t);return Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:n}={}){return this.isValid?we.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];const n=t.map(xc).filter(o=>this.contains(o)).sort(),i=[];let{s:r}=this,s=0;for(;r<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;i.push(we.fromDateTimes(r,a)),r=a,s+=1}return i}splitBy(t){const n=Dt.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:i}=this,r=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(n.mapUnits(l=>l*r));s=+a>+this.e?this.e:a,o.push(we.fromDateTimes(i,s)),i=s,r+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const n=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return n>=i?null:we.fromDateTimes(n,i)}union(t){if(!this.isValid)return this;const n=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return we.fromDateTimes(n,i)}static merge(t){const[n,i]=t.sort((r,s)=>r.s-s.s).reduce(([r,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[r,s.union(o)]:[r.concat([s]),o]:[r,o],[[],null]);return i&&n.push(i),n}static xor(t){let n=null,i=0;const r=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?n=l.time:(n&&+n!=+l.time&&r.push(we.fromDateTimes(n,l.time)),n=null);return we.merge(r)}difference(...t){return we.xor([this].concat(t)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Ma}toLocaleString(t=Ld,n={}){return this.isValid?tn.create(this.s.loc.clone(n),t).formatInterval(this):Ma}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Ma}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ma}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Ma}toFormat(t,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${n}${this.e.toFormat(t)}`:Ma}toDuration(t,n){return this.isValid?this.e.diff(this.s,t,n):Dt.invalid(this.invalidReason)}mapEndpoints(t){return we.fromDateTimes(t(this.s),t(this.e))}}class uh{static hasDST(t=Me.defaultZone){const n=Ct.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(t){return Ur.isValidZone(t)}static normalizeZone(t){return Ts(t,Me.defaultZone)}static months(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||oe.create(n,i,s)).months(t)}static monthsFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||oe.create(n,i,s)).months(t,!0)}static weekdays(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||oe.create(n,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||oe.create(n,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return oe.create(t).meridiems()}static eras(t="short",{locale:n=null}={}){return oe.create(n,null,"gregory").eras(t)}static features(){return{relative:kR()}}}function L2(e,t){const n=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor(Dt.fromMillis(i).as("days"))}function xG(e,t,n){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=L2(l,c);return(u-u%7)/7}],["days",L2]],r={},s=e;let o,a;for(const[l,c]of i)n.indexOf(l)>=0&&(o=l,r[l]=c(e,t),a=s.plus(r),a>t?(r[l]--,e=s.plus(r),e>t&&(a=e,r[l]--,e=s.plus(r))):e=a);return[e,r,a,o]}function EG(e,t,n,i){let[r,s,o,a]=xG(e,t,n);const l=t-r,c=n.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<t&&(o=r.plus({[a]:1})),o!==r&&(s[a]=(s[a]||0)+l/(o-r)));const u=Dt.fromObject(s,i);return c.length>0?Dt.fromMillis(l,i).shiftTo(...c).plus(u):u}const hw={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},O2={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},TG=hw.hanidec.replace(/[\[|\]]/g,"").split("");function CG(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(e[n].search(hw.hanidec)!==-1)t+=TG.indexOf(e[n]);else for(const r in O2){const[s,o]=O2[r];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}function hi({numberingSystem:e},t=""){return new RegExp(`${hw[e||"latn"]}${t}`)}const SG="missing Intl.DateTimeFormat.formatToParts support";function Ut(e,t=n=>n){return{regex:e,deser:([n])=>t(CG(n))}}const MG=String.fromCharCode(160),KR=`[ ${MG}]`,JR=new RegExp(KR,"g");function RG(e){return e.replace(/\./g,"\\.?").replace(JR,KR)}function k2(e){return e.replace(/\./g,"").replace(JR," ").toLowerCase()}function di(e,t){return e===null?null:{regex:RegExp(e.map(RG).join("|")),deser:([n])=>e.findIndex(i=>k2(n)===k2(i))+t}}function P2(e,t){return{regex:e,deser:([,n,i])=>_m(n,i),groups:t}}function fh(e){return{regex:e,deser:([t])=>t}}function IG(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function AG(e,t){const n=hi(t),i=hi(t,"{2}"),r=hi(t,"{3}"),s=hi(t,"{4}"),o=hi(t,"{6}"),a=hi(t,"{1,2}"),l=hi(t,"{1,3}"),c=hi(t,"{1,6}"),u=hi(t,"{1,9}"),f=hi(t,"{2,4}"),h=hi(t,"{4,6}"),d=_=>({regex:RegExp(IG(_.val)),deser:([p])=>p,literal:!0}),m=(_=>{if(e.literal)return d(_);switch(_.val){case"G":return di(t.eras("short"),0);case"GG":return di(t.eras("long"),0);case"y":return Ut(c);case"yy":return Ut(f,zy);case"yyyy":return Ut(s);case"yyyyy":return Ut(h);case"yyyyyy":return Ut(o);case"M":return Ut(a);case"MM":return Ut(i);case"MMM":return di(t.months("short",!0),1);case"MMMM":return di(t.months("long",!0),1);case"L":return Ut(a);case"LL":return Ut(i);case"LLL":return di(t.months("short",!1),1);case"LLLL":return di(t.months("long",!1),1);case"d":return Ut(a);case"dd":return Ut(i);case"o":return Ut(l);case"ooo":return Ut(r);case"HH":return Ut(i);case"H":return Ut(a);case"hh":return Ut(i);case"h":return Ut(a);case"mm":return Ut(i);case"m":return Ut(a);case"q":return Ut(a);case"qq":return Ut(i);case"s":return Ut(a);case"ss":return Ut(i);case"S":return Ut(l);case"SSS":return Ut(r);case"u":return fh(u);case"uu":return fh(a);case"uuu":return Ut(n);case"a":return di(t.meridiems(),0);case"kkkk":return Ut(s);case"kk":return Ut(f,zy);case"W":return Ut(a);case"WW":return Ut(i);case"E":case"c":return Ut(n);case"EEE":return di(t.weekdays("short",!1),1);case"EEEE":return di(t.weekdays("long",!1),1);case"ccc":return di(t.weekdays("short",!0),1);case"cccc":return di(t.weekdays("long",!0),1);case"Z":case"ZZ":return P2(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return P2(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return fh(/[a-z_+-/]{1,256}?/i);case" ":return fh(/[^\S\n\r]/);default:return d(_)}})(e)||{invalidReason:SG};return m.token=e,m}const LG={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function OG(e,t,n){const{type:i,value:r}=e;if(i==="literal"){const l=/^\s+$/.test(r);return{literal:!l,val:l?" ":r}}const s=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=LG[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function kG(e){return[`^${e.map(n=>n.regex).reduce((n,i)=>`${n}(${i.source})`,"")}$`,e]}function PG(e,t,n){const i=e.match(t);if(i){const r={};let s=1;for(const o in n)if(Tl(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(r[a.token.val[0]]=a.deser(i.slice(s,s+l))),s+=l}return[i,r]}else return[i,{}]}function FG(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,i;return Pt(e.z)||(n=Ur.create(e.z)),Pt(e.Z)||(n||(n=new dn(e.Z)),i=e.Z),Pt(e.q)||(e.M=(e.q-1)*3+1),Pt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Pt(e.u)||(e.S=aw(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),n,i]}let K0=null;function NG(){return K0||(K0=Ct.fromMillis(1555555555555)),K0}function DG(e,t){if(e.literal)return e;const n=tn.macroTokenToFormatOpts(e.val),i=eI(n,t);return i==null||i.includes(void 0)?e:i}function QR(e,t){return Array.prototype.concat(...e.map(n=>DG(n,t)))}function tI(e,t,n){const i=QR(tn.parseFormat(n),e),r=i.map(o=>AG(o,e)),s=r.find(o=>o.invalidReason);if(s)return{input:t,tokens:i,invalidReason:s.invalidReason};{const[o,a]=kG(r),l=RegExp(o,"i"),[c,u]=PG(t,l,a),[f,h,d]=u?FG(u):[null,null,void 0];if(Tl(u,"a")&&Tl(u,"H"))throw new $c("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:c,matches:u,result:f,zone:h,specificOffset:d}}}function $G(e,t,n){const{result:i,zone:r,specificOffset:s,invalidReason:o}=tI(e,t,n);return[i,r,s,o]}function eI(e,t){if(!e)return null;const i=tn.create(t,e).dtFormatter(NG()),r=i.formatToParts(),s=i.resolvedOptions();return r.map(o=>OG(o,e,s))}const nI=[0,31,59,90,120,151,181,212,243,273,304,334],iI=[0,31,60,91,121,152,182,213,244,274,305,335];function Qn(e,t){return new xi("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function rI(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const r=i.getUTCDay();return r===0?7:r}function sI(e,t,n){return n+(lf(e)?iI:nI)[t-1]}function oI(e,t){const n=lf(e)?iI:nI,i=n.findIndex(s=>s<t),r=t-n[i];return{month:i+1,day:r}}function Wy(e){const{year:t,month:n,day:i}=e,r=sI(t,n,i),s=rI(t,n,i);let o=Math.floor((r-s+10)/7),a;return o<1?(a=t-1,o=kd(a)):o>kd(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:s,...wm(e)}}function F2(e){const{weekYear:t,weekNumber:n,weekday:i}=e,r=rI(t,1,4),s=tu(t);let o=n*7+i-r-3,a;o<1?(a=t-1,o+=tu(a)):o>s?(a=t+1,o-=tu(t)):a=t;const{month:l,day:c}=oI(a,o);return{year:a,month:l,day:c,...wm(e)}}function J0(e){const{year:t,month:n,day:i}=e,r=sI(t,n,i);return{year:t,ordinal:r,...wm(e)}}function N2(e){const{year:t,ordinal:n}=e,{month:i,day:r}=oI(t,n);return{year:t,month:i,day:r,...wm(e)}}function zG(e){const t=pm(e.weekYear),n=Ir(e.weekNumber,1,kd(e.weekYear)),i=Ir(e.weekday,1,7);return t?n?i?!1:Qn("weekday",e.weekday):Qn("week",e.week):Qn("weekYear",e.weekYear)}function WG(e){const t=pm(e.year),n=Ir(e.ordinal,1,tu(e.year));return t?n?!1:Qn("ordinal",e.ordinal):Qn("year",e.year)}function aI(e){const t=pm(e.year),n=Ir(e.month,1,12),i=Ir(e.day,1,Od(e.year,e.month));return t?n?i?!1:Qn("day",e.day):Qn("month",e.month):Qn("year",e.year)}function lI(e){const{hour:t,minute:n,second:i,millisecond:r}=e,s=Ir(t,0,23)||t===24&&n===0&&i===0&&r===0,o=Ir(n,0,59),a=Ir(i,0,59),l=Ir(r,0,999);return s?o?a?l?!1:Qn("millisecond",r):Qn("second",i):Qn("minute",n):Qn("hour",t)}const Q0="Invalid DateTime",D2=864e13;function hh(e){return new xi("unsupported zone",`the zone "${e.name}" is not supported`)}function tp(e){return e.weekData===null&&(e.weekData=Wy(e.c)),e.weekData}function fo(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Ct({...n,...t,old:n})}function cI(e,t,n){let i=e-t*60*1e3;const r=n.offset(i);if(t===r)return[i,t];i-=(r-t)*60*1e3;const s=n.offset(i);return r===s?[i,r]:[e-Math.min(r,s)*60*1e3,Math.max(r,s)]}function dh(e,t){e+=t*60*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function jh(e,t,n){return cI(ym(e),t,n)}function $2(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),r=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:r,day:Math.min(e.c.day,Od(i,r))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Dt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=ym(s);let[l,c]=cI(a,n,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function bc(e,t,n,i,r,s){const{setZone:o,zone:a}=n;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=Ct.fromObject(e,{...n,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return Ct.invalid(new xi("unparsable",`the input "${r}" can't be parsed as ${i}`))}function gh(e,t,n=!0){return e.isValid?tn.create(oe.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function ep(e,t){const n=e.c.year>9999||e.c.year<0;let i="";return n&&e.c.year>=0&&(i+="+"),i+=Re(e.c.year,n?6:4),t?(i+="-",i+=Re(e.c.month),i+="-",i+=Re(e.c.day)):(i+=Re(e.c.month),i+=Re(e.c.day)),i}function z2(e,t,n,i,r,s){let o=Re(e.c.hour);return t?(o+=":",o+=Re(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=":")):o+=Re(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=Re(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=Re(e.c.millisecond,3))),r&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=Re(Math.trunc(-e.o/60)),o+=":",o+=Re(Math.trunc(-e.o%60))):(o+="+",o+=Re(Math.trunc(e.o/60)),o+=":",o+=Re(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const uI={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},GG={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},YG={ordinal:1,hour:0,minute:0,second:0,millisecond:0},fI=["year","month","day","hour","minute","second","millisecond"],BG=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],UG=["year","ordinal","hour","minute","second","millisecond"];function W2(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new dR(e);return t}function G2(e,t){const n=Ts(t.zone,Me.defaultZone),i=oe.fromObject(t),r=Me.now();let s,o;if(Pt(e.year))s=r;else{for(const c of fI)Pt(e[c])&&(e[c]=uI[c]);const a=aI(e)||lI(e);if(a)return Ct.invalid(a);const l=n.offset(r);[s,o]=jh(e,l,n)}return new Ct({ts:s,zone:n,loc:i,o})}function Y2(e,t,n){const i=Pt(n.round)?!0:n.round,r=(o,a)=>(o=lw(o,i||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(o,a)),s=o=>n.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(n.unit)return r(s(n.unit),n.unit);for(const o of n.units){const a=s(o);if(Math.abs(a)>=1)return r(a,o)}return r(e>t?-0:0,n.units[n.units.length-1])}function B2(e){let t={},n;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}class Ct{constructor(t){const n=t.zone||Me.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new xi("invalid input"):null)||(n.isValid?null:hh(n));this.ts=Pt(t.ts)?Me.now():t.ts;let r=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(n))[r,s]=[t.old.c,t.old.o];else{const a=n.offset(this.ts);r=dh(this.ts,a),i=Number.isNaN(r.year)?new xi("invalid input"):null,r=i?null:r,s=i?null:a}this._zone=n,this.loc=t.loc||oe.create(),this.invalid=i,this.weekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new Ct({})}static local(){const[t,n]=B2(arguments),[i,r,s,o,a,l,c]=n;return G2({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,n]=B2(arguments),[i,r,s,o,a,l,c]=n;return t.zone=dn.utcInstance,G2({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,n={}){const i=_W(t)?t.valueOf():NaN;if(Number.isNaN(i))return Ct.invalid("invalid input");const r=Ts(n.zone,Me.defaultZone);return r.isValid?new Ct({ts:i,zone:r,loc:oe.fromObject(n)}):Ct.invalid(hh(r))}static fromMillis(t,n={}){if(Yo(t))return t<-D2||t>D2?Ct.invalid("Timestamp out of range"):new Ct({ts:t,zone:Ts(n.zone,Me.defaultZone),loc:oe.fromObject(n)});throw new Jn(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(Yo(t))return new Ct({ts:t*1e3,zone:Ts(n.zone,Me.defaultZone),loc:oe.fromObject(n)});throw new Jn("fromSeconds requires a numerical input")}static fromObject(t,n={}){t=t||{};const i=Ts(n.zone,Me.defaultZone);if(!i.isValid)return Ct.invalid(hh(i));const r=Me.now(),s=Pt(n.specificOffset)?i.offset(r):n.specificOffset,o=Pd(t,W2),a=!Pt(o.ordinal),l=!Pt(o.year),c=!Pt(o.month)||!Pt(o.day),u=l||c,f=o.weekYear||o.weekNumber,h=oe.fromObject(n);if((u||a)&&f)throw new $c("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new $c("Can't mix ordinal dates with month/day");const d=f||o.weekday&&!u;let g,m,_=dh(r,s);d?(g=BG,m=GG,_=Wy(_)):a?(g=UG,m=YG,_=J0(_)):(g=fI,m=uI);let p=!1;for(const C of g){const I=o[C];Pt(I)?p?o[C]=m[C]:o[C]=_[C]:p=!0}const y=d?zG(o):a?WG(o):aI(o),v=y||lI(o);if(v)return Ct.invalid(v);const w=d?F2(o):a?N2(o):o,[x,b]=jh(w,s,i),E=new Ct({ts:x,zone:i,o:b,loc:h});return o.weekday&&u&&t.weekday!==E.weekday?Ct.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${E.toISO()}`):E}static fromISO(t,n={}){const[i,r]=aG(t);return bc(i,r,n,"ISO 8601",t)}static fromRFC2822(t,n={}){const[i,r]=lG(t);return bc(i,r,n,"RFC 2822",t)}static fromHTTP(t,n={}){const[i,r]=cG(t);return bc(i,r,n,"HTTP",n)}static fromFormat(t,n,i={}){if(Pt(t)||Pt(n))throw new Jn("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=i,o=oe.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=$G(o,t,n);return u?Ct.invalid(u):bc(a,l,i,`format ${n}`,t,c)}static fromString(t,n,i={}){return Ct.fromFormat(t,n,i)}static fromSQL(t,n={}){const[i,r]=pG(t);return bc(i,r,n,"SQL",t)}static invalid(t,n=null){if(!t)throw new Jn("need to specify a reason the DateTime is invalid");const i=t instanceof xi?t:new xi(t,n);if(Me.throwOnInvalid)throw new Zz(i);return new Ct({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,n={}){const i=eI(t,oe.fromObject(n));return i?i.map(r=>r?r.val:null).join(""):null}static expandFormat(t,n={}){return QR(tn.parseFormat(t),oe.fromObject(n)).map(r=>r.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?tp(this).weekYear:NaN}get weekNumber(){return this.isValid?tp(this).weekNumber:NaN}get weekday(){return this.isValid?tp(this).weekday:NaN}get ordinal(){return this.isValid?J0(this.c).ordinal:NaN}get monthShort(){return this.isValid?uh.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?uh.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?uh.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?uh.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,n=6e4,i=ym(this.c),r=this.zone.offset(i-t),s=this.zone.offset(i+t),o=this.zone.offset(i-r*n),a=this.zone.offset(i-s*n);if(o===a)return[this];const l=i-o*n,c=i-a*n,u=dh(l,o),f=dh(c,a);return u.hour===f.hour&&u.minute===f.minute&&u.second===f.second&&u.millisecond===f.millisecond?[fo(this,{ts:l}),fo(this,{ts:c})]:[this]}get isInLeapYear(){return lf(this.year)}get daysInMonth(){return Od(this.year,this.month)}get daysInYear(){return this.isValid?tu(this.year):NaN}get weeksInWeekYear(){return this.isValid?kd(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:n,numberingSystem:i,calendar:r}=tn.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:n,numberingSystem:i,outputCalendar:r}}toUTC(t=0,n={}){return this.setZone(dn.instance(t),n)}toLocal(){return this.setZone(Me.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:i=!1}={}){if(t=Ts(t,Me.defaultZone),t.equals(this.zone))return this;if(t.isValid){let r=this.ts;if(n||i){const s=t.offset(this.ts),o=this.toObject();[r]=jh(o,s,t)}return fo(this,{ts:r,zone:t})}else return Ct.invalid(hh(t))}reconfigure({locale:t,numberingSystem:n,outputCalendar:i}={}){const r=this.loc.clone({locale:t,numberingSystem:n,outputCalendar:i});return fo(this,{loc:r})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const n=Pd(t,W2),i=!Pt(n.weekYear)||!Pt(n.weekNumber)||!Pt(n.weekday),r=!Pt(n.ordinal),s=!Pt(n.year),o=!Pt(n.month)||!Pt(n.day),a=s||o,l=n.weekYear||n.weekNumber;if((a||r)&&l)throw new $c("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&r)throw new $c("Can't mix ordinal dates with month/day");let c;i?c=F2({...Wy(this.c),...n}):Pt(n.ordinal)?(c={...this.toObject(),...n},Pt(n.day)&&(c.day=Math.min(Od(c.year,c.month),c.day))):c=N2({...J0(this.c),...n});const[u,f]=jh(c,this.o,this.zone);return fo(this,{ts:u,o:f})}plus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t);return fo(this,$2(this,n))}minus(t){if(!this.isValid)return this;const n=Dt.fromDurationLike(t).negate();return fo(this,$2(this,n))}startOf(t){if(!this.isValid)return this;const n={},i=Dt.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks"&&(n.weekday=1),i==="quarters"){const r=Math.ceil(this.month/3);n.month=(r-1)*3+1}return this.set(n)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,n={}){return this.isValid?tn.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):Q0}toLocaleString(t=Ld,n={}){return this.isValid?tn.create(this.loc.clone(n),t).formatDateTime(this):Q0}toLocaleParts(t={}){return this.isValid?tn.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:n=!1,suppressMilliseconds:i=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=ep(this,o);return a+="T",a+=z2(this,o,n,i,r,s),a}toISODate({format:t="extended"}={}){return this.isValid?ep(this,t==="extended"):null}toISOWeekDate(){return gh(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:n=!1,includeOffset:i=!0,includePrefix:r=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+z2(this,o==="extended",n,t,i,s):null}toRFC2822(){return gh(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return gh(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?ep(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:n=!1,includeOffsetSpace:i=!0}={}){let r="HH:mm:ss.SSS";return(n||t)&&(i&&(r+=" "),n?r+="z":t&&(r+="ZZ")),gh(this,r,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Q0}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const n={...this.c};return t.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,n="milliseconds",i={}){if(!this.isValid||!t.isValid)return Dt.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=wW(n).map(Dt.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=EG(a,l,s,r);return o?c.negate():c}diffNow(t="milliseconds",n={}){return this.diff(Ct.now(),t,n)}until(t){return this.isValid?we.fromDateTimes(this,t):this}hasSame(t,n){if(!this.isValid)return!1;const i=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(n)<=i&&i<=r.endOf(n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const n=t.base||Ct.fromObject({},{zone:this.zone}),i=t.padding?this<n?-t.padding:t.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(r=t.unit,s=void 0),Y2(n,this.plus(i),{...t,numeric:"always",units:r,unit:s})}toRelativeCalendar(t={}){return this.isValid?Y2(t.base||Ct.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ct.isDateTime))throw new Jn("min requires all arguments be DateTimes");return S2(t,n=>n.valueOf(),Math.min)}static max(...t){if(!t.every(Ct.isDateTime))throw new Jn("max requires all arguments be DateTimes");return S2(t,n=>n.valueOf(),Math.max)}static fromFormatExplain(t,n,i={}){const{locale:r=null,numberingSystem:s=null}=i,o=oe.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return tI(o,t,n)}static fromStringExplain(t,n,i={}){return Ct.fromFormatExplain(t,n,i)}static get DATE_SHORT(){return Ld}static get DATE_MED(){return gR}static get DATE_MED_WITH_WEEKDAY(){return Jz}static get DATE_FULL(){return mR}static get DATE_HUGE(){return pR}static get TIME_SIMPLE(){return yR}static get TIME_WITH_SECONDS(){return _R}static get TIME_WITH_SHORT_OFFSET(){return wR}static get TIME_WITH_LONG_OFFSET(){return vR}static get TIME_24_SIMPLE(){return bR}static get TIME_24_WITH_SECONDS(){return xR}static get TIME_24_WITH_SHORT_OFFSET(){return ER}static get TIME_24_WITH_LONG_OFFSET(){return TR}static get DATETIME_SHORT(){return CR}static get DATETIME_SHORT_WITH_SECONDS(){return SR}static get DATETIME_MED(){return MR}static get DATETIME_MED_WITH_SECONDS(){return RR}static get DATETIME_MED_WITH_WEEKDAY(){return Qz}static get DATETIME_FULL(){return IR}static get DATETIME_FULL_WITH_SECONDS(){return AR}static get DATETIME_HUGE(){return LR}static get DATETIME_HUGE_WITH_SECONDS(){return OR}}function xc(e){if(Ct.isDateTime(e))return e;if(e&&e.valueOf&&Yo(e.valueOf()))return Ct.fromJSDate(e);if(e&&typeof e=="object")return Ct.fromObject(e);throw new Jn(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function hI(e,t){if(!e)return"";let n=Ct.fromISO(e);return t&&(n=n.setZone(`UTC+${t}`)),n.toLocaleString({weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})}function VG(e){if(!e)return"UTC";let t="GMT";return e>0&&(t+="+"),t+e.toString()}function XG(e){const t=Math.floor(e/86400);e-=t*(60*60*24);const n=Math.floor(e/(60*60));e-=n*(60*60);const i=Math.floor(e/60);return e-=i*60,t>0?`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`:`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`}function U2(e,t="seconds",n){const i=["years","months","days","hours","minutes","seconds","milliseconds"],r=i.indexOf(t),s=Object.entries(e.shiftTo(...i).normalize().toObject()).filter(([a,l],c)=>l>0&&c<=r);return Dt.fromObject(s.length===0?{[t]:0}:Object.fromEntries(s)).toHuman(n)}const dI=document.createElement("i"),gI=document.createElement("i");dI.setAttribute("class","fa-solid fa-expand");gI.setAttribute("class","fa-solid fa-compress");const HG={props:{geojsons:Array,activityFiles:Array,timezoneOffsetHoursList:Array},data(){return{popupFreeze:new Boolean,popupRecord:new Ad,popupActivityIndex:0,popupTimezoneOffsetHours:new Number(0),popupOverlay:new y2({}),vec:new nz({source:new Nz({features:[]}),visible:!0,style:new Go({stroke:new J1({color:[60,99,130,1],width:3})})}),map:new E$({controls:SM(),layers:[new R7({source:new Az})],view:new Bi({enableRotation:!1,projection:"EPSG:4326"})}),zoomToExtent:new j0}},watch:{geojsons:{handler(e){this.updateMapSource(e)}},zoomToExtent:{handler(e,t){this.map.removeControl(t),this.map.addControl(e)}}},expose:["showPopUpRecord"],methods:{toStringHDMS:yD,toTimezoneDateString:hI,updateMapSource(e){var o,a;this.popupOverlay.setPosition(void 0);const t=this.map.getView(),n=this.vec.getSource(),i=new Array;for(let l=0;l<e.length;l++){const c=new j$().readFeature(e[l]);c.setId("lineString-"+l),i.push(c)}n.clear(),n.addFeatures(i),t.fit(n.getExtent(),{padding:[50,50,50,50]});const r=new Array,s=new Array;for(let l=0;l<i.length;l++){const c=new Ry(new vl(((o=i[l])==null?void 0:o.getGeometry()).getFirstCoordinate()));c.setStyle(new Go({image:new Sd({crossOrigin:"anonymous",src:xN,scale:.8})})),c.setId("startingPoint-"+l),r.push(c);const u=new Ry(new vl(((a=i[l])==null?void 0:a.getGeometry()).getLastCoordinate()));u.setStyle(new Go({image:new Sd({crossOrigin:"anonymous",src:bN,scale:.8})})),u.setId("destinationPoint-"+l),s.push(u)}n.addFeatures(r),n.addFeatures(s),this.zoomToExtent=new j0({extent:t.getViewStateAndExtent().extent})},findNearestRecord(e,t){var s;const n=Number(e.split("-")[1]);this.popupActivityIndex=n;let i=new Ad,r=Number.MAX_VALUE;return this.popupTimezoneOffsetHours=this.timezoneOffsetHoursList[n],(s=this.activityFiles[n].records)==null||s.forEach(o=>{if(!o.positionLong||!o.positionLat)return;const a=Math.abs(Math.sqrt(Math.pow(o.positionLong-t[0],2)+Math.pow(o.positionLat-t[1],2)));a<r&&(r=a,i=o)}),i},lineStringFeatureListener(e,t){e=="singleclick"&&(this.popupFreeze=!this.popupFreeze&&this.popupOverlay.getPosition()!=null),this.popupFreeze||this.popupOverlay.setPosition(void 0),!(this.popupFreeze==!0&&this.popupOverlay.getPosition()!=null)&&this.map.forEachFeatureAtPixel(t.pixel,n=>{n.getGeometry()instanceof xd&&(this.popupRecord=this.findNearestRecord(n.getId(),t.coordinate),this.popupOverlay.setPosition([this.popupRecord.positionLong,this.popupRecord.positionLat]),this.popupFreeze=e=="singleclick")},{hitTolerance:10})},showPopUpRecord(e){this.popupOverlay.setPosition(void 0),e&&(this.popupRecord=e,this.popupOverlay.setPosition([this.popupRecord.positionLong,this.popupRecord.positionLat]),this.popupFreeze=!0)},updateExtent(){this.map.getView().fit(this.vec.getSource().getExtent(),{padding:[50,50,50,50]}),this.zoomToExtent=new j0({extent:this.map.getView().getViewStateAndExtent().extent})}},computed:{titleWidth(){this.popupRecord;let e=0;return document.querySelectorAll('.popup-content > div:not([style*="display: none"]) > span:nth-child(1)').forEach(n=>{const i=n.innerHTML.length*6;e=Math.max(e,i)}),e},hasHeartRate(){var t;if(((t=this.activityFiles)==null?void 0:t.length)==0)return!1;const e=this.activityFiles[this.popupActivityIndex].records;for(let n=0;n<e.length;n++)if(e[n].heartRate)return!0;return!1},hasCadence(){var t;if(((t=this.activityFiles)==null?void 0:t.length)==0)return!1;const e=this.activityFiles[this.popupActivityIndex].records;for(let n=0;n<e.length;n++)if(e[n].cadence)return!0;return!1},hasPower(){var t;if(((t=this.activityFiles)==null?void 0:t.length)==0)return!1;const e=this.activityFiles[this.popupActivityIndex].records;for(let n=0;n<e.length;n++)if(e[n].power)return!0;return!1},hasTemperature(){var t;if(((t=this.activityFiles)==null?void 0:t.length)==0)return!1;const e=this.activityFiles[this.popupActivityIndex].records;for(let n=0;n<e.length;n++)if(e[n].temperature)return!0;return!1}},mounted(){this.popupOverlay=new y2({element:document.getElementById("popup")}),this.map.addOverlay(this.popupOverlay),this.map.addLayer(this.vec),this.map.setTarget("map"),this.map.addControl(new Wz({label:dI,labelActive:gI})),this.map.addControl(new Uz),this.map.once("precompose",()=>this.updateExtent()),this.map.on("change:size",()=>this.updateExtent()),this.map.on("pointermove",e=>this.lineStringFeatureListener(e.type,e)),this.map.on("singleclick",e=>this.lineStringFeatureListener(e.type,e))}};const Ql=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},jG=G("div",{id:"map",style:{width:"100%",height:"100%"}},null,-1),ZG={id:"popup",class:"ol-popup"},qG={class:"popup-content"},KG=G("span",null," km",-1),JG=G("span",null," km/h",-1),QG=G("span",null," rpm",-1),tY=G("span",null," bpm",-1),eY=G("span",null," watts",-1),nY=G("span",null," °C",-1),iY={style:{display:"grid"}},rY={style:{"grid-column":"1"}},sY=G("span",null," masl",-1),oY={style:{"grid-column":"2"}},aY=G("span",null,"(Grade: ",-1),lY=G("span",null," %)",-1);function cY(e,t,n,i,r,s){var o;return Wt(),qt(pi,null,[jG,G("div",ZG,[G("div",qG,[G("div",null,[G("span",{style:Ke({width:s.titleWidth+"px"})},"Time:",4),G("span",null,It(r.popupRecord.timestamp?s.toTimezoneDateString(r.popupRecord.timestamp,r.popupTimezoneOffsetHours):"-"),1)]),G("div",null,[G("span",{style:Ke({width:s.titleWidth+"px"})},"Distance:",4),G("span",null,It(r.popupRecord.distance?(r.popupRecord.distance/1e3).toFixed(2):"-"),1),KG]),G("div",null,[G("span",{style:Ke({width:s.titleWidth+"px"})},"Speed:",4),G("span",null,It(r.popupRecord.speed?(r.popupRecord.speed*3600/1e3).toFixed(2):"-"),1),JG]),Is(G("div",null,[G("span",{style:Ke({width:s.titleWidth+"px"})},"Cadence:",4),G("span",null,It(r.popupRecord.cadence?r.popupRecord.cadence:"-"),1),QG],512),[[Ya,s.hasCadence]]),Is(G("div",null,[G("span",{style:Ke({width:s.titleWidth+"px"})},"Heart Rate:",4),G("span",null,It(r.popupRecord.heartRate?r.popupRecord.heartRate:"-"),1),tY],512),[[Ya,s.hasHeartRate]]),Is(G("div",null,[G("span",{style:Ke({width:s.titleWidth+"px"})},"Power:",4),G("span",null,It(r.popupRecord.power?r.popupRecord.power:"-"),1),eY],512),[[Ya,s.hasPower]]),Is(G("div",null,[G("span",{style:Ke({width:s.titleWidth+"px"})},"Temperature:",4),G("span",null,It(r.popupRecord.temperature?r.popupRecord.temperature:"-"),1),nY],512),[[Ya,s.hasTemperature]]),G("div",iY,[G("div",rY,[G("span",{style:Ke({width:s.titleWidth+"px"})},"Altitude:",4),G("span",null,It(r.popupRecord.altitude?(o=r.popupRecord.altitude)==null?void 0:o.toFixed(2):"-"),1),sY]),G("div",oY,[aY,G("span",null,It(r.popupRecord.grade?Math.round(r.popupRecord.grade):"0"),1),lY])]),G("div",null,[G("span",{style:Ke({width:s.titleWidth+"px"})},"Location:",4),G("span",null,It(r.popupRecord.positionLong&&r.popupRecord.positionLat?s.toStringHDMS([r.popupRecord.positionLong,r.popupRecord.positionLat]):"-"),1)])])])],64)}const uY=Ql(HG,[["render",cY]]);function pe(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ko(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vm(e){let t,n,i;e.length!==2?(t=pe,n=(a,l)=>pe(e(a),l),i=(a,l)=>e(a)-l):(t=e===pe||e===Ko?e:fY,n=e,i=e);function r(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=r(a,l,c,u-1);return f>c&&i(a[f-1],l)>-i(a[f],l)?f-1:f}return{left:r,center:o,right:s}}function fY(){return 0}function mI(e){return e===null?NaN:+e}function*hY(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const dY=vm(pe),gY=dY.right;vm(mI).center;const bm=gY,pI=yI(_I),mY=yI(pY);function yI(e){return function(t,n,i=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((i=+i)>=0))throw new RangeError("invalid ry");let{data:r,width:s,height:o}=t;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:r.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!i)return t;const a=n&&e(n),l=i&&e(i),c=r.slice();return a&&l?(Ra(a,c,r,s,o),Ra(a,r,c,s,o),Ra(a,c,r,s,o),Ia(l,r,c,s,o),Ia(l,c,r,s,o),Ia(l,r,c,s,o)):a?(Ra(a,r,c,s,o),Ra(a,c,r,s,o),Ra(a,r,c,s,o)):l&&(Ia(l,r,c,s,o),Ia(l,c,r,s,o),Ia(l,r,c,s,o)),t}}function Ra(e,t,n,i,r){for(let s=0,o=i*r;s<o;)e(t,n,s,s+=i,1)}function Ia(e,t,n,i,r){for(let s=0,o=i*r;s<i;++s)e(t,n,s,s+o,i)}function pY(e){const t=_I(e);return(n,i,r,s,o)=>{r<<=2,s<<=2,o<<=2,t(n,i,r+0,s+0,o),t(n,i,r+1,s+1,o),t(n,i,r+2,s+2,o),t(n,i,r+3,s+3,o)}}function _I(e){const t=Math.floor(e);if(t===e)return yY(e);const n=e-t,i=2*e+1;return(r,s,o,a,l)=>{if(!((a-=l)>=o))return;let c=t*s[o];const u=l*t,f=u+l;for(let h=o,d=o+u;h<d;h+=l)c+=s[Math.min(a,h)];for(let h=o,d=a;h<=d;h+=l)c+=s[Math.min(a,h+u)],r[h]=(c+n*(s[Math.max(o,h-f)]+s[Math.min(a,h+f)]))/i,c-=s[Math.max(o,h-u)]}}function yY(e){const t=2*e+1;return(n,i,r,s,o)=>{if(!((s-=o)>=r))return;let a=e*i[r];const l=o*e;for(let c=r,u=r+l;c<u;c+=o)a+=i[Math.min(s,c)];for(let c=r,u=s;c<=u;c+=o)a+=i[Math.min(s,c+l)],n[c]=a/t,a-=i[Math.max(r,c-l)]}}function xm(e,t){let n=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(r=+r)>=r&&++n}return n}function _Y(e){return e.length|0}function wY(e){return!(e>0)}function vY(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function bY(e){return t=>e(...t)}function xY(...e){const t=typeof e[e.length-1]=="function"&&bY(e.pop());e=e.map(vY);const n=e.map(_Y),i=e.length-1,r=new Array(i+1).fill(0),s=[];if(i<0||n.some(wY))return s;for(;;){s.push(r.map((a,l)=>e[l][a]));let o=i;for(;++r[o]===n[o];){if(o===0)return t?s.map(t):s;r[o--]=0}}}function EY(e,t){var n=0,i=0;return Float64Array.from(e,t===void 0?r=>n+=+r||0:r=>n+=+t(r,i++,e)||0)}function dw(e,t){let n=0,i,r=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r))}if(n>1)return s/(n-1)}function ff(e,t){const n=dw(e,t);return n&&Math.sqrt(n)}function Ye(e,t){let n,i;if(t===void 0)for(const r of e)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class Ji{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[i++]=a),t=o}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=t[--n];n>0&&(i=o,r=t[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}class Jo extends Map{constructor(t,n=bI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(Gy(this,t))}has(t){return super.has(Gy(this,t))}set(t,n){return super.set(wI(this,t),n)}delete(t){return super.delete(vI(this,t))}}class hf extends Set{constructor(t,n=bI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(Gy(this,t))}add(t){return super.add(wI(this,t))}delete(t){return super.delete(vI(this,t))}}function Gy({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function wI({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function vI({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function bI(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Yy(e){return e}function Jr(e,...t){return gw(e,Yy,Yy,t)}function ol(e,t,...n){return gw(e,Yy,t,n)}function TY(e,t,...n){return gw(e,Array.from,t,n)}function gw(e,t,n,i){return function r(s,o){if(o>=i.length)return n(s);const a=new Jo,l=i[o++];let c=-1;for(const u of s){const f=l(u,++c,s),h=a.get(f);h?h.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,r(f,o));return t(a)}(e,0)}function CY(e,t){return Array.from(t,n=>e[n])}function Su(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const i=Uint32Array.from(e,(r,s)=>s);return t.length>1?(t=t.map(r=>e.map(r)),i.sort((r,s)=>{for(const o of t){const a=Mu(o[r],o[s]);if(a)return a}})):(n=e.map(n),i.sort((r,s)=>Mu(n[r],n[s]))),CY(e,i)}return e.sort(mw(n))}function mw(e=pe){if(e===pe)return Mu;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function Mu(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function pw(e,t,n){return(t.length!==2?Su(ol(e,t,n),([i,r],[s,o])=>pe(r,o)||pe(i,s)):Su(Jr(e,n),([i,r],[s,o])=>t(r,o)||pe(i,s))).map(([i])=>i)}const SY=Math.sqrt(50),MY=Math.sqrt(10),RY=Math.sqrt(2);function Fd(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=SY?10:s>=MY?5:s>=RY?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Fd(e,t,n*2):[a,l,c]}function Bs(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,s,o]=i?Fd(t,e,n):Fd(e,t,n);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function Ru(e,t,n){return t=+t,e=+e,n=+n,Fd(e,t,n)[2]}function By(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?Ru(t,e,n):Ru(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function xI(e,t,n){let i;for(;;){const r=Ru(e,t,n);if(r===i||r===0||!isFinite(r))return[e,t];r>0?(e=Math.floor(e/r)*r,t=Math.ceil(t/r)*r):r<0&&(e=Math.ceil(e*r)/r,t=Math.floor(t*r)/r),i=r}}function yw(e){return Math.max(1,Math.ceil(Math.log(xm(e))/Math.LN2)+1)}function Ue(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function IY(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);return i}function Sn(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function AY(e,t){let n,i=-1,r=-1;if(t===void 0)for(const s of e)++r,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of e)(s=t(s,++r,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);return i}function EI(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?Mu:mw(r);i>n;){if(i-n>600){const l=i-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(t-c*f/l+h)),g=Math.min(i,Math.floor(t+(l-c)*f/l+h));EI(e,t,d,g,r)}const s=e[t];let o=n,a=i;for(Ec(e,n,t),r(e[i],s)>0&&Ec(e,n,i);o<a;){for(Ec(e,o,a),++o,--a;r(e[o],s)<0;)++o;for(;r(e[a],s)>0;)--a}r(e[n],s)===0?Ec(e,n,a):(++a,Ec(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function Ec(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function _w(e,t=pe){let n,i=!1;if(t.length===1){let r;for(const s of e){const o=t(s);(i?pe(o,r)>0:pe(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of e)(i?t(r,n)>0:t(r,r)===0)&&(n=r,i=!0);return n}function Us(e,t,n){if(e=Float64Array.from(hY(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Sn(e);if(t>=1)return Ue(e);var i,r=(i-1)*t,s=Math.floor(r),o=Ue(EI(e,s).subarray(0,s+1)),a=Sn(e.subarray(s+1));return o+(a-o)*(r-s)}}function LY(e,t,n=mI){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(r-s)}}function OY(e,t,n){const i=xm(e),r=Us(e,.75)-Us(e,.25);return i&&r?Math.ceil((n-t)/(2*r*Math.pow(i,-1/3))):1}function TI(e,t,n){const i=xm(e),r=ff(e);return i&&r?Math.ceil((n-t)*Math.cbrt(i)/(3.49*r)):1}function Em(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function Iu(e,t){return Us(e,.5,t)}function*kY(e){for(const t of e)yield*t}function CI(e){return Array.from(kY(e))}function SI(e,t){const n=new Jo;if(t===void 0)for(let s of e)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let i,r=0;for(const[s,o]of n)o>r&&(r=o,i=s);return i}function PY(e,t=FY){const n=[];let i,r=!1;for(const s of e)r&&n.push(t(i,s)),i=s,r=!0;return n}function FY(e,t){return[e,t]}function ti(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(r);++i<r;)s[i]=e+i*n;return s}function MI(e,t=pe){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const i=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=pe);const r=(a,l)=>t(n[a],n[l]);let s,o;return e=Uint32Array.from(n,(a,l)=>l),e.sort(t===pe?(a,l)=>Mu(n[a],n[l]):mw(r)),e.forEach((a,l)=>{const c=r(a,s===void 0?a:s);c>=0?((s===void 0||c>0)&&(s=a,o=l),i[a]=o):i[a]=NaN}),i}function NY(e,t=pe){let n,i=!1;if(t.length===1){let r;for(const s of e){const o=t(s);(i?pe(o,r)<0:pe(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of e)(i?t(r,n)<0:t(r,r)===0)&&(n=r,i=!0);return n}function ir(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function Nd(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function DY(e){return e}var np=1,ip=2,Uy=3,mh=4,V2=1e-6;function $Y(e){return"translate("+e+",0)"}function zY(e){return"translate(0,"+e+")"}function WY(e){return t=>+e(t)}function GY(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function YY(){return!this.__axis}function BY(e,t){var n=[],i=null,r=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===np||e===mh?-1:1,u=e===mh||e===ip?"x":"y",f=e===np||e===Uy?$Y:zY;function h(d){var g=i??(t.ticks?t.ticks.apply(t,n):t.domain()),m=r??(t.tickFormat?t.tickFormat.apply(t,n):DY),_=Math.max(s,0)+a,p=t.range(),y=+p[0]+l,v=+p[p.length-1]+l,w=(t.bandwidth?GY:WY)(t.copy(),l),x=d.selection?d.selection():d,b=x.selectAll(".domain").data([null]),E=x.selectAll(".tick").data(g,t).order(),C=E.exit(),I=E.enter().append("g").attr("class","tick"),S=E.select("line"),R=E.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(I),S=S.merge(I.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),R=R.merge(I.append("text").attr("fill","currentColor").attr(u,c*_).attr("dy",e===np?"0em":e===Uy?"0.71em":"0.32em")),d!==x&&(b=b.transition(d),E=E.transition(d),S=S.transition(d),R=R.transition(d),C=C.transition(d).attr("opacity",V2).attr("transform",function(M){return isFinite(M=w(M))?f(M+l):this.getAttribute("transform")}),I.attr("opacity",V2).attr("transform",function(M){var k=this.parentNode.__axis;return f((k&&isFinite(k=k(M))?k:w(M))+l)})),C.remove(),b.attr("d",e===mh||e===ip?o?"M"+c*o+","+y+"H"+l+"V"+v+"H"+c*o:"M"+l+","+y+"V"+v:o?"M"+y+","+c*o+"V"+l+"H"+v+"V"+c*o:"M"+y+","+l+"H"+v),E.attr("opacity",1).attr("transform",function(M){return f(w(M)+l)}),S.attr(u+"2",c*s),R.attr(u,c*_).text(m),x.filter(YY).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===ip?"start":e===mh?"end":"middle"),x.each(function(){this.__axis=w})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),h):i&&i.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(s=o=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(a=+d,h):a},h.offset=function(d){return arguments.length?(l=+d,h):l},h}function UY(e){return BY(Uy,e)}var VY={value:()=>{}};function RI(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Zh(n)}function Zh(e){this._=e}function XY(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Zh.prototype=RI.prototype={constructor:Zh,on:function(e,t){var n=this._,i=XY(e+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(e=i[s]).type)&&(r=HY(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=i[s]).type)n[r]=X2(n[r],e.name,t);else if(t==null)for(r in n)n[r]=X2(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zh(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function HY(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function X2(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=VY,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Vy="http://www.w3.org/1999/xhtml";const Qo={svg:"http://www.w3.org/2000/svg",xhtml:Vy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tm(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Qo.hasOwnProperty(t)?{space:Qo[t],local:e}:e}function jY(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Vy&&t.documentElement.namespaceURI===Vy?t.createElement(e):t.createElementNS(n,e)}}function ZY(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Cm(e){var t=Tm(e);return(t.local?ZY:jY)(t)}function qY(){}function ww(e){return e==null?qY:function(){return this.querySelector(e)}}function KY(e){typeof e!="function"&&(e=ww(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Gn(i,this._parents)}function JY(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function QY(){return[]}function II(e){return e==null?QY:function(){return this.querySelectorAll(e)}}function tB(e){return function(){return JY(e.apply(this,arguments))}}function eB(e){typeof e=="function"?e=tB(e):e=II(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(e.call(l,l.__data__,c,o)),r.push(l));return new Gn(i,r)}function AI(e){return function(){return this.matches(e)}}function LI(e){return function(t){return t.matches(e)}}var nB=Array.prototype.find;function iB(e){return function(){return nB.call(this.children,e)}}function rB(){return this.firstElementChild}function sB(e){return this.select(e==null?rB:iB(typeof e=="function"?e:LI(e)))}var oB=Array.prototype.filter;function aB(){return Array.from(this.children)}function lB(e){return function(){return oB.call(this.children,e)}}function cB(e){return this.selectAll(e==null?aB:lB(typeof e=="function"?e:LI(e)))}function uB(e){typeof e!="function"&&(e=AI(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Gn(i,this._parents)}function OI(e){return new Array(e.length)}function fB(){return new Gn(this._enter||this._groups.map(OI),this._parents)}function Dd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Dd.prototype={constructor:Dd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hB(e){return function(){return e}}function dB(e,t,n,i,r,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],i[o]=a):n[o]=new Dd(e,s[o]);for(;o<l;++o)(a=t[o])&&(r[o]=a)}function gB(e,t,n,i,r,s,o){var a,l,c=new Map,u=t.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(l=t[a])&&(h[a]=d=o.call(l,l.__data__,a,t)+"",c.has(d)?r[a]=l:c.set(d,l));for(a=0;a<f;++a)d=o.call(e,s[a],a,s)+"",(l=c.get(d))?(i[a]=l,l.__data__=s[a],c.delete(d)):n[a]=new Dd(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(h[a])===l&&(r[a]=l)}function mB(e){return e.__data__}function pB(e,t){if(!arguments.length)return Array.from(this,mB);var n=t?gB:dB,i=this._parents,r=this._groups;typeof e!="function"&&(e=hB(e));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],f=r[c],h=f.length,d=yB(e.call(u,u&&u.__data__,c,i)),g=d.length,m=a[c]=new Array(g),_=o[c]=new Array(g),p=l[c]=new Array(h);n(u,f,m,_,p,d,t);for(var y=0,v=0,w,x;y<g;++y)if(w=m[y]){for(y>=v&&(v=y+1);!(x=_[v])&&++v<g;);w._next=x||null}}return o=new Gn(o,i),o._enter=a,o._exit=l,o}function yB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _B(){return new Gn(this._exit||this._groups.map(OI),this._parents)}function wB(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function vB(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=i[l],f=c.length,h=a[l]=new Array(f),d,g=0;g<f;++g)(d=c[g]||u[g])&&(h[g]=d);for(;l<r;++l)a[l]=n[l];return new Gn(a,this._parents)}function bB(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function xB(e){e||(e=EB);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],a=o.length,l=r[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Gn(r,this._parents).order()}function EB(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function TB(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function CB(){return Array.from(this)}function SB(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function MB(){let e=0;for(const t of this)++e;return e}function RB(){return!this.node()}function IB(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,o=r.length,a;s<o;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function AB(e){return function(){this.removeAttribute(e)}}function LB(e){return function(){this.removeAttributeNS(e.space,e.local)}}function OB(e,t){return function(){this.setAttribute(e,t)}}function kB(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function PB(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function FB(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function NB(e,t){var n=Tm(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?LB:AB:typeof t=="function"?n.local?FB:PB:n.local?kB:OB)(n,t))}function kI(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function DB(e){return function(){this.style.removeProperty(e)}}function $B(e,t,n){return function(){this.style.setProperty(e,t,n)}}function zB(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function WB(e,t,n){return arguments.length>1?this.each((t==null?DB:typeof t=="function"?zB:$B)(e,t,n??"")):Cl(this.node(),e)}function Cl(e,t){return e.style.getPropertyValue(t)||kI(e).getComputedStyle(e,null).getPropertyValue(t)}function GB(e){return function(){delete this[e]}}function YB(e,t){return function(){this[e]=t}}function BB(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function UB(e,t){return arguments.length>1?this.each((t==null?GB:typeof t=="function"?BB:YB)(e,t)):this.node()[e]}function PI(e){return e.trim().split(/^|\s+/)}function vw(e){return e.classList||new FI(e)}function FI(e){this._node=e,this._names=PI(e.getAttribute("class")||"")}FI.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function NI(e,t){for(var n=vw(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function DI(e,t){for(var n=vw(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function VB(e){return function(){NI(this,e)}}function XB(e){return function(){DI(this,e)}}function HB(e,t){return function(){(t.apply(this,arguments)?NI:DI)(this,e)}}function jB(e,t){var n=PI(e+"");if(arguments.length<2){for(var i=vw(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?HB:t?VB:XB)(n,t))}function ZB(){this.textContent=""}function qB(e){return function(){this.textContent=e}}function KB(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function JB(e){return arguments.length?this.each(e==null?ZB:(typeof e=="function"?KB:qB)(e)):this.node().textContent}function QB(){this.innerHTML=""}function tU(e){return function(){this.innerHTML=e}}function eU(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function nU(e){return arguments.length?this.each(e==null?QB:(typeof e=="function"?eU:tU)(e)):this.node().innerHTML}function iU(){this.nextSibling&&this.parentNode.appendChild(this)}function rU(){return this.each(iU)}function sU(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oU(){return this.each(sU)}function aU(e){var t=typeof e=="function"?e:Cm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function lU(){return null}function cU(e,t){var n=typeof e=="function"?e:Cm(e),i=t==null?lU:typeof t=="function"?t:ww(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function uU(){var e=this.parentNode;e&&e.removeChild(this)}function fU(){return this.each(uU)}function hU(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dU(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gU(e){return this.select(e?dU:hU)}function mU(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pU(e){return function(t){e.call(this,t,this.__data__)}}function yU(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function _U(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function wU(e,t,n){return function(){var i=this.__on,r,s=pU(t);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function vU(e,t,n){var i=yU(e+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?wU:_U,r=0;r<s;++r)this.each(a(i[r],t,n));return this}function $I(e,t,n){var i=kI(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function bU(e,t){return function(){return $I(this,e,t)}}function xU(e,t){return function(){return $I(this,e,t.apply(this,arguments))}}function EU(e,t){return this.each((typeof t=="function"?xU:bU)(e,t))}function*TU(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var zI=[null];function Gn(e,t){this._groups=e,this._parents=t}function df(){return new Gn([[document.documentElement]],zI)}function CU(){return this}Gn.prototype=df.prototype={constructor:Gn,select:KY,selectAll:eB,selectChild:sB,selectChildren:cB,filter:uB,data:pB,enter:fB,exit:_B,join:wB,merge:vB,selection:CU,order:bB,sort:xB,call:TB,nodes:CB,node:SB,size:MB,empty:RB,each:IB,attr:NB,style:WB,property:UB,classed:jB,text:JB,html:nU,raise:rU,lower:oU,append:aU,insert:cU,remove:fU,clone:gU,datum:mU,on:vU,dispatch:EU,[Symbol.iterator]:TU};function Ds(e){return typeof e=="string"?new Gn([[document.querySelector(e)]],[document.documentElement]):new Gn([[e]],zI)}function SU(e){let t;for(;t=e.sourceEvent;)e=t;return e}function MU(e,t){if(e=SU(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}function tc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gf(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Ks(){}var ta=.7,Sl=1/ta,al="\\s*([+-]?\\d+)\\s*",Au="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RU=/^#([0-9a-f]{3,8})$/,IU=new RegExp(`^rgb\\(${al},${al},${al}\\)$`),AU=new RegExp(`^rgb\\(${Qi},${Qi},${Qi}\\)$`),LU=new RegExp(`^rgba\\(${al},${al},${al},${Au}\\)$`),OU=new RegExp(`^rgba\\(${Qi},${Qi},${Qi},${Au}\\)$`),kU=new RegExp(`^hsl\\(${Au},${Qi},${Qi}\\)$`),PU=new RegExp(`^hsla\\(${Au},${Qi},${Qi},${Au}\\)$`),H2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tc(Ks,ea,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:j2,formatHex:j2,formatHex8:FU,formatHsl:NU,formatRgb:Z2,toString:Z2});function j2(){return this.rgb().formatHex()}function FU(){return this.rgb().formatHex8()}function NU(){return WI(this).formatHsl()}function Z2(){return this.rgb().formatRgb()}function ea(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=RU.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?q2(t):n===3?new Be(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ph(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ph(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=IU.exec(e))?new Be(t[1],t[2],t[3],1):(t=AU.exec(e))?new Be(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=LU.exec(e))?ph(t[1],t[2],t[3],t[4]):(t=OU.exec(e))?ph(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kU.exec(e))?Q2(t[1],t[2]/100,t[3]/100,1):(t=PU.exec(e))?Q2(t[1],t[2]/100,t[3]/100,t[4]):H2.hasOwnProperty(e)?q2(H2[e]):e==="transparent"?new Be(NaN,NaN,NaN,0):null}function q2(e){return new Be(e>>16&255,e>>8&255,e&255,1)}function ph(e,t,n,i){return i<=0&&(e=t=n=NaN),new Be(e,t,n,i)}function bw(e){return e instanceof Ks||(e=ea(e)),e?(e=e.rgb(),new Be(e.r,e.g,e.b,e.opacity)):new Be}function rr(e,t,n,i){return arguments.length===1?bw(e):new Be(e,t,n,i??1)}function Be(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}tc(Be,rr,gf(Ks,{brighter(e){return e=e==null?Sl:Math.pow(Sl,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ta:Math.pow(ta,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Be(Bo(this.r),Bo(this.g),Bo(this.b),$d(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K2,formatHex:K2,formatHex8:DU,formatRgb:J2,toString:J2}));function K2(){return`#${Io(this.r)}${Io(this.g)}${Io(this.b)}`}function DU(){return`#${Io(this.r)}${Io(this.g)}${Io(this.b)}${Io((isNaN(this.opacity)?1:this.opacity)*255)}`}function J2(){const e=$d(this.opacity);return`${e===1?"rgb(":"rgba("}${Bo(this.r)}, ${Bo(this.g)}, ${Bo(this.b)}${e===1?")":`, ${e})`}`}function $d(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Bo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Io(e){return e=Bo(e),(e<16?"0":"")+e.toString(16)}function Q2(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new wi(e,t,n,i)}function WI(e){if(e instanceof wi)return new wi(e.h,e.s,e.l,e.opacity);if(e instanceof Ks||(e=ea(e)),!e)return new wi;if(e instanceof wi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(t===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new wi(o,a,l,e.opacity)}function Xy(e,t,n,i){return arguments.length===1?WI(e):new wi(e,t,n,i??1)}function wi(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}tc(wi,Xy,gf(Ks,{brighter(e){return e=e==null?Sl:Math.pow(Sl,e),new wi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ta:Math.pow(ta,e),new wi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Be(rp(e>=240?e-240:e+120,r,i),rp(e,r,i),rp(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new wi(tE(this.h),yh(this.s),yh(this.l),$d(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$d(this.opacity);return`${e===1?"hsl(":"hsla("}${tE(this.h)}, ${yh(this.s)*100}%, ${yh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tE(e){return e=(e||0)%360,e<0?e+360:e}function yh(e){return Math.max(0,Math.min(1,e||0))}function rp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const GI=Math.PI/180,YI=180/Math.PI,zd=18,BI=.96422,UI=1,VI=.82521,XI=4/29,ll=6/29,HI=3*ll*ll,$U=ll*ll*ll;function jI(e){if(e instanceof tr)return new tr(e.l,e.a,e.b,e.opacity);if(e instanceof Ar)return ZI(e);e instanceof Be||(e=bw(e));var t=lp(e.r),n=lp(e.g),i=lp(e.b),r=sp((.2225045*t+.7168786*n+.0606169*i)/UI),s,o;return t===n&&n===i?s=o=r:(s=sp((.4360747*t+.3850649*n+.1430804*i)/BI),o=sp((.0139322*t+.0971045*n+.7141733*i)/VI)),new tr(116*r-16,500*(s-r),200*(r-o),e.opacity)}function Hy(e,t,n,i){return arguments.length===1?jI(e):new tr(e,t,n,i??1)}function tr(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}tc(tr,Hy,gf(Ks,{brighter(e){return new tr(this.l+zd*(e??1),this.a,this.b,this.opacity)},darker(e){return new tr(this.l-zd*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=BI*op(t),e=UI*op(e),n=VI*op(n),new Be(ap(3.1338561*t-1.6168667*e-.4906146*n),ap(-.9787684*t+1.9161415*e+.033454*n),ap(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function sp(e){return e>$U?Math.pow(e,1/3):e/HI+XI}function op(e){return e>ll?e*e*e:HI*(e-XI)}function ap(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function lp(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function zU(e){if(e instanceof Ar)return new Ar(e.h,e.c,e.l,e.opacity);if(e instanceof tr||(e=jI(e)),e.a===0&&e.b===0)return new Ar(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*YI;return new Ar(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function jy(e,t,n,i){return arguments.length===1?zU(e):new Ar(e,t,n,i??1)}function Ar(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function ZI(e){if(isNaN(e.h))return new tr(e.l,0,0,e.opacity);var t=e.h*GI;return new tr(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}tc(Ar,jy,gf(Ks,{brighter(e){return new Ar(this.h,this.c,this.l+zd*(e??1),this.opacity)},darker(e){return new Ar(this.h,this.c,this.l-zd*(e??1),this.opacity)},rgb(){return ZI(this).rgb()}}));var qI=-.14861,xw=1.78277,Ew=-.29227,Sm=-.90649,Lu=1.97294,eE=Lu*Sm,nE=Lu*xw,iE=xw*Ew-Sm*qI;function WU(e){if(e instanceof Uo)return new Uo(e.h,e.s,e.l,e.opacity);e instanceof Be||(e=bw(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(iE*i+eE*t-nE*n)/(iE+eE-nE),s=i-r,o=(Lu*(n-r)-Ew*s)/Sm,a=Math.sqrt(o*o+s*s)/(Lu*r*(1-r)),l=a?Math.atan2(o,s)*YI-120:NaN;return new Uo(l<0?l+360:l,a,r,e.opacity)}function sr(e,t,n,i){return arguments.length===1?WU(e):new Uo(e,t,n,i??1)}function Uo(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}tc(Uo,sr,gf(Ks,{brighter(e){return e=e==null?Sl:Math.pow(Sl,e),new Uo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ta:Math.pow(ta,e),new Uo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*GI,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Be(255*(t+n*(qI*i+xw*r)),255*(t+n*(Ew*i+Sm*r)),255*(t+n*(Lu*i)),this.opacity)}}));function GU(e,t,n,i,r){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*i+o*r)/6}function YU(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],o=i>0?e[i-1]:2*r-s,a=i<t-1?e[i+2]:2*s-r;return GU((n-i/t)*t,o,r,s,a)}}const Mm=e=>()=>e;function KI(e,t){return function(n){return e+n*t}}function BU(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Tw(e,t){var n=t-e;return n?KI(e,n>180||n<-180?n-360*Math.round(n/360):n):Mm(isNaN(e)?t:e)}function UU(e){return(e=+e)==1?rn:function(t,n){return n-t?BU(t,n,e):Mm(isNaN(t)?n:t)}}function rn(e,t){var n=t-e;return n?KI(e,n):Mm(isNaN(e)?t:e)}const na=function e(t){var n=UU(t);function i(r,s){var o=n((r=rr(r)).r,(s=rr(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),c=rn(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function VU(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=rr(t[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=e(i),r=e(r),s=e(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var XU=VU(YU);function HU(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function jU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ZU(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=mf(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function qU(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Je(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function KU(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=mf(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Zy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cp=new RegExp(Zy.source,"g");function JU(e){return function(){return e}}function QU(e){return function(t){return e(t)+""}}function JI(e,t){var n=Zy.lastIndex=cp.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(i=Zy.exec(e))&&(r=cp.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Je(i,r)})),n=cp.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?QU(l[0].x):JU(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function mf(e,t){var n=typeof t,i;return t==null||n==="boolean"?Mm(t):(n==="number"?Je:n==="string"?(i=ea(t))?(t=i,na):JI:t instanceof ea?na:t instanceof Date?qU:jU(t)?HU:Array.isArray(t)?ZU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?KU:Je)(e,t)}function Cw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var rE=180/Math.PI,qy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function QI(e,t,n,i,r,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*rE,skewX:Math.atan(l)*rE,scaleX:o,scaleY:a}}var _h;function tV(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qy:QI(t.a,t.b,t.c,t.d,t.e,t.f)}function eV(e){return e==null||(_h||(_h=document.createElementNS("http://www.w3.org/2000/svg","g")),_h.setAttribute("transform",e),!(e=_h.transform.baseVal.consolidate()))?qy:(e=e.matrix,QI(e.a,e.b,e.c,e.d,e.e,e.f))}function tA(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,g){if(c!==f||u!==h){var m=d.push("translate(",null,t,null,n);g.push({i:m-4,x:Je(c,f)},{i:m-2,x:Je(u,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:Je(c,u)})):u&&f.push(r(f)+"rotate("+u+i)}function a(c,u,f,h){c!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:Je(c,u)}):u&&f.push(r(f)+"skewX("+u+i)}function l(c,u,f,h,d,g){if(c!==f||u!==h){var m=d.push(r(d)+"scale(",null,",",null,")");g.push({i:m-4,x:Je(c,f)},{i:m-2,x:Je(u,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),o(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var g=-1,m=h.length,_;++g<m;)f[(_=h[g]).i]=_.x(d);return f.join("")}}}var nV=tA(tV,"px, ","px)","deg)"),iV=tA(eV,", ",")",")");function rV(e){return function(t,n){var i=e((t=Xy(t)).h,(n=Xy(n)).h),r=rn(t.s,n.s),s=rn(t.l,n.l),o=rn(t.opacity,n.opacity);return function(a){return t.h=i(a),t.s=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const sV=rV(Tw);function oV(e,t){var n=rn((e=Hy(e)).l,(t=Hy(t)).l),i=rn(e.a,t.a),r=rn(e.b,t.b),s=rn(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=r(o),e.opacity=s(o),e+""}}function aV(e){return function(t,n){var i=e((t=jy(t)).h,(n=jy(n)).h),r=rn(t.c,n.c),s=rn(t.l,n.l),o=rn(t.opacity,n.opacity);return function(a){return t.h=i(a),t.c=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const lV=aV(Tw);function eA(e){return function t(n){n=+n;function i(r,s){var o=e((r=sr(r)).h,(s=sr(s)).h),a=rn(r.s,s.s),l=rn(r.l,s.l),c=rn(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,n)),r.opacity=c(u),r+""}}return i.gamma=t,i}(1)}eA(Tw);var Sw=eA(rn);function Rm(e,t){t===void 0&&(t=e,e=mf);for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[a](o-a)}}function Ai(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}var Ml=0,Wc=0,Tc=0,nA=1e3,Wd,Gc,Gd=0,ia=0,Im=0,Ou=typeof performance=="object"&&performance.now?performance:Date,iA=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mw(){return ia||(iA(cV),ia=Ou.now()+Im)}function cV(){ia=0}function Yd(){this._call=this._time=this._next=null}Yd.prototype=rA.prototype={constructor:Yd,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Mw():+n)+(t==null?0:+t),!this._next&&Gc!==this&&(Gc?Gc._next=this:Wd=this,Gc=this),this._call=e,this._time=n,Ky()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ky())}};function rA(e,t,n){var i=new Yd;return i.restart(e,t,n),i}function uV(){Mw(),++Ml;for(var e=Wd,t;e;)(t=ia-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ml}function sE(){ia=(Gd=Ou.now())+Im,Ml=Wc=0;try{uV()}finally{Ml=0,hV(),ia=0}}function fV(){var e=Ou.now(),t=e-Gd;t>nA&&(Im-=t,Gd=e)}function hV(){for(var e,t=Wd,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Wd=n);Gc=e,Ky(i)}function Ky(e){if(!Ml){Wc&&(Wc=clearTimeout(Wc));var t=e-ia;t>24?(e<1/0&&(Wc=setTimeout(sE,e-Ou.now()-Im)),Tc&&(Tc=clearInterval(Tc))):(Tc||(Gd=Ou.now(),Tc=setInterval(fV,nA)),Ml=1,iA(sE))}}function oE(e,t,n){var i=new Yd;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var dV=RI("start","end","cancel","interrupt"),gV=[],sA=0,aE=1,Jy=2,qh=3,lE=4,Qy=5,Kh=6;function Am(e,t,n,i,r,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;mV(e,n,{name:t,index:i,group:r,on:dV,tween:gV,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:sA})}function Rw(e,t){var n=Ni(e,t);if(n.state>sA)throw new Error("too late; already scheduled");return n}function or(e,t){var n=Ni(e,t);if(n.state>qh)throw new Error("too late; already running");return n}function Ni(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function mV(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=rA(s,0,n.time);function s(c){n.state=aE,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,h,d;if(n.state!==aE)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===qh)return oE(o);d.state===lE?(d.state=Kh,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=Kh,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if(oE(function(){n.state===qh&&(n.state=lE,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Jy,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Jy){for(n.state=qh,r=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=d);r.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Qy,1),f=-1,h=r.length;++f<h;)r[f].call(e,u);n.state===Qy&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Kh,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function pV(e,t){var n=e.__transition,i,r,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){s=!1;continue}r=i.state>Jy&&i.state<Qy,i.state=Kh,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}s&&delete e.__transition}}function yV(e){return this.each(function(){pV(this,e)})}function _V(e,t){var n,i;return function(){var r=or(this,e),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function wV(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=or(this,e),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function vV(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Ni(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?_V:wV)(n,e,t))}function Iw(e,t,n){var i=e._id;return e.each(function(){var r=or(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ni(r,i).value[t]}}function oA(e,t){var n;return(typeof t=="number"?Je:t instanceof ea?na:(n=ea(t))?(t=n,na):JI)(e,t)}function bV(e){return function(){this.removeAttribute(e)}}function xV(e){return function(){this.removeAttributeNS(e.space,e.local)}}function EV(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttribute(e);return o===r?null:o===i?s:s=t(i=o,n)}}function TV(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?s:s=t(i=o,n)}}function CV(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function SV(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function MV(e,t){var n=Tm(e),i=n==="transform"?iV:oA;return this.attrTween(e,typeof t=="function"?(n.local?SV:CV)(n,i,Iw(this,"attr."+e,t)):t==null?(n.local?xV:bV)(n):(n.local?TV:EV)(n,i,t))}function RV(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function IV(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function AV(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&IV(e,s)),n}return r._value=t,r}function LV(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&RV(e,s)),n}return r._value=t,r}function OV(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Tm(e);return this.tween(n,(i.local?AV:LV)(i,t))}function kV(e,t){return function(){Rw(this,e).delay=+t.apply(this,arguments)}}function PV(e,t){return t=+t,function(){Rw(this,e).delay=t}}function FV(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kV:PV)(t,e)):Ni(this.node(),t).delay}function NV(e,t){return function(){or(this,e).duration=+t.apply(this,arguments)}}function DV(e,t){return t=+t,function(){or(this,e).duration=t}}function $V(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?NV:DV)(t,e)):Ni(this.node(),t).duration}function zV(e,t){if(typeof t!="function")throw new Error;return function(){or(this,e).ease=t}}function WV(e){var t=this._id;return arguments.length?this.each(zV(t,e)):Ni(this.node(),t).ease}function GV(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;or(this,e).ease=n}}function YV(e){if(typeof e!="function")throw new Error;return this.each(GV(this._id,e))}function BV(e){typeof e!="function"&&(e=AI(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Vr(i,this._parents,this._name,this._id)}function UV(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=t[a],c=n[a],u=l.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;a<i;++a)o[a]=t[a];return new Vr(o,this._parents,this._name,this._id)}function VV(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function XV(e,t,n){var i,r,s=VV(t)?Rw:or;return function(){var o=s(this,e),a=o.on;a!==i&&(r=(i=a).copy()).on(t,n),o.on=r}}function HV(e,t){var n=this._id;return arguments.length<2?Ni(this.node(),n).on.on(e):this.each(XV(n,e,t))}function jV(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ZV(){return this.on("end.remove",jV(this._id))}function qV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ww(e));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,Am(c[h],t,n,h,c,Ni(u,n)));return new Vr(s,this._parents,t,n)}function KV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=II(e));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),d,g=Ni(u,n),m=0,_=h.length;m<_;++m)(d=h[m])&&Am(d,t,n,m,h,g);s.push(h),o.push(u)}return new Vr(s,o,t,n)}var JV=df.prototype.constructor;function QV(){return new JV(this._groups,this._parents)}function tX(e,t){var n,i,r;return function(){var s=Cl(this,e),o=(this.style.removeProperty(e),Cl(this,e));return s===o?null:s===n&&o===i?r:r=t(n=s,i=o)}}function aA(e){return function(){this.style.removeProperty(e)}}function eX(e,t,n){var i,r=n+"",s;return function(){var o=Cl(this,e);return o===r?null:o===i?s:s=t(i=o,n)}}function nX(e,t,n){var i,r,s;return function(){var o=Cl(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Cl(this,e))),o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a))}}function iX(e,t){var n,i,r,s="style."+t,o="end."+s,a;return function(){var l=or(this,e),c=l.on,u=l.value[s]==null?a||(a=aA(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(o,r=u),l.on=i}}function rX(e,t,n){var i=(e+="")=="transform"?nV:oA;return t==null?this.styleTween(e,tX(e,i)).on("end.style."+e,aA(e)):typeof t=="function"?this.styleTween(e,nX(e,i,Iw(this,"style."+e,t))).each(iX(this._id,e)):this.styleTween(e,eX(e,i,t),n).on("end.style."+e,null)}function sX(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function oX(e,t,n){var i,r;function s(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&sX(e,o,n)),i}return s._value=t,s}function aX(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,oX(e,t,n??""))}function lX(e){return function(){this.textContent=e}}function cX(e){return function(){var t=e(this);this.textContent=t??""}}function uX(e){return this.tween("text",typeof e=="function"?cX(Iw(this,"text",e)):lX(e==null?"":e+""))}function fX(e){return function(t){this.textContent=e.call(this,t)}}function hX(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&fX(r)),t}return i._value=e,i}function dX(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,hX(e))}function gX(){for(var e=this._name,t=this._id,n=lA(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Ni(l,t);Am(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Vr(i,this._parents,e,n)}function mX(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};n.each(function(){var c=or(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&s()})}var pX=0;function Vr(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function lA(){return++pX}var mr=df.prototype;Vr.prototype={constructor:Vr,select:qV,selectAll:KV,selectChild:mr.selectChild,selectChildren:mr.selectChildren,filter:BV,merge:UV,selection:QV,transition:gX,call:mr.call,nodes:mr.nodes,node:mr.node,size:mr.size,empty:mr.empty,each:mr.each,on:HV,attr:MV,attrTween:OV,style:rX,styleTween:aX,text:uX,textTween:dX,remove:ZV,tween:vV,delay:FV,duration:$V,ease:WV,easeVarying:YV,end:mX,[Symbol.iterator]:mr[Symbol.iterator]};function yX(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _X={time:null,delay:0,duration:250,ease:yX};function wX(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function vX(e){var t,n;e instanceof Vr?(t=e._id,e=e._name):(t=lA(),(n=_X).time=Mw(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Am(l,e,t,c,o,n||wX(l,t));return new Vr(i,this._parents,e,t)}df.prototype.interrupt=yV;df.prototype.transition=vX;const t_=Math.PI,e_=2*t_,yo=1e-6,bX=e_-yo;function cA(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function xX(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cA;const n=10**t;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let uA=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cA:xX(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,s,o){this._append`C${+t},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,i,r,s){if(t=+t,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-t,c=r-n,u=o-t,f=a-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>yo)if(!(Math.abs(f*l-c*u)>yo)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let d=i-o,g=r-a,m=l*l+c*c,_=d*d+g*g,p=Math.sqrt(m),y=Math.sqrt(h),v=s*Math.tan((t_-Math.acos((m+h-_)/(2*p*y)))/2),w=v/y,x=v/p;Math.abs(w-1)>yo&&this._append`L${t+w*u},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*d>u*g)},${this._x1=t+x*l},${this._y1=n+x*c}`}}arc(t,n,i,r,s,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=t+a,u=n+l,f=1^o,h=o?r-s:s-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>yo||Math.abs(this._y1-u)>yo)&&this._append`L${c},${u}`,i&&(h<0&&(h=h%e_+e_),h>bX?this._append`A${i},${i},0,1,${f},${t-a},${n-l}A${i},${i},0,1,${f},${this._x1=c},${this._y1=u}`:h>yo&&this._append`A${i},${i},0,${+(h>=t_)},${f},${this._x1=t+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Lr(e=3){return new uA(+e)}var EX=Array.prototype,fA=EX.slice;function TX(e,t){return e-t}function CX(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}const Es=e=>()=>e;function SX(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=MX(e,t[n]))return r;return 0}function MX(e,t){for(var n=t[0],i=t[1],r=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],c=l[0],u=l[1],f=e[a],h=f[0],d=f[1];if(RX(l,f,t))return 0;u>i!=d>i&&n<(h-c)*(i-u)/(d-u)+c&&(r=-r)}return r}function RX(e,t,n){var i;return IX(e,t,n)&&AX(e[i=+(e[0]===t[0])],n[i],t[i])}function IX(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function AX(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function LX(){}var pr=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function n_(){var e=1,t=1,n=yw,i=l;function r(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(TX);else{const f=Ye(c,OX);for(u=Bs(...xI(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>s(c,f))}function s(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var h=[],d=[];return o(c,f,function(g){i(g,c,f),CX(g)>0?h.push([g]):d.push(g)}),d.forEach(function(g){for(var m=0,_=h.length,p;m<_;++m)if(SX((p=h[m])[0],g)!==-1){p.push(g);return}}),{type:"MultiPolygon",value:u,coordinates:h}}function o(c,u,f){var h=new Array,d=new Array,g,m,_,p,y,v;for(g=m=-1,p=ho(c[0],u),pr[p<<1].forEach(w);++g<e-1;)_=p,p=ho(c[g+1],u),pr[_|p<<1].forEach(w);for(pr[p<<0].forEach(w);++m<t-1;){for(g=-1,p=ho(c[m*e+e],u),y=ho(c[m*e],u),pr[p<<1|y<<2].forEach(w);++g<e-1;)_=p,p=ho(c[m*e+e+g+1],u),v=y,y=ho(c[m*e+g+1],u),pr[_|p<<1|y<<2|v<<3].forEach(w);pr[p|y<<3].forEach(w)}for(g=-1,y=c[m*e]>=u,pr[y<<2].forEach(w);++g<e-1;)v=y,y=ho(c[m*e+g+1],u),pr[y<<2|v<<3].forEach(w);pr[y<<3].forEach(w);function w(x){var b=[x[0][0]+g,x[0][1]+m],E=[x[1][0]+g,x[1][1]+m],C=a(b),I=a(E),S,R;(S=d[C])?(R=h[I])?(delete d[S.end],delete h[R.start],S===R?(S.ring.push(E),f(S.ring)):h[S.start]=d[R.end]={start:S.start,end:R.end,ring:S.ring.concat(R.ring)}):(delete d[S.end],S.ring.push(E),d[S.end=I]=S):(S=h[I])?(R=d[C])?(delete h[S.start],delete d[R.end],S===R?(S.ring.push(E),f(S.ring)):h[R.start]=d[S.end]={start:R.start,end:S.end,ring:R.ring.concat(S.ring)}):(delete h[S.start],S.ring.unshift(b),h[S.start=C]=S):h[C]=d[I]={start:C,end:I,ring:[b,E]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function l(c,u,f){c.forEach(function(h){var d=h[0],g=h[1],m=d|0,_=g|0,p=up(u[_*e+m]);d>0&&d<e&&m===d&&(h[0]=cE(d,up(u[_*e+m-1]),p,f)),g>0&&g<t&&_===g&&(h[1]=cE(g,up(u[(_-1)*e+m]),p,f))})}return r.contour=s,r.size=function(c){if(!arguments.length)return[e,t];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,r},r.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?Es(fA.call(c)):Es(c),r):n},r.smooth=function(c){return arguments.length?(i=c?l:LX,r):i===l},r}function OX(e){return isFinite(e)?e:NaN}function ho(e,t){return e==null?!1:+e>=t}function up(e){return e==null||isNaN(e=+e)?-1/0:e}function cE(e,t,n,i){const r=i-t,s=n-t,o=isFinite(r)||isFinite(s)?r/s:Math.sign(r)/Math.sign(s);return isNaN(o)?e:e+o-.5}function kX(e){return e[0]}function PX(e){return e[1]}function FX(){return 1}function NX(){var e=kX,t=PX,n=FX,i=960,r=500,s=20,o=2,a=s*3,l=i+a*2>>o,c=r+a*2>>o,u=Es(20);function f(y){var v=new Float32Array(l*c),w=Math.pow(2,-o),x=-1;for(const k of y){var b=(e(k,++x,y)+a)*w,E=(t(k,x,y)+a)*w,C=+n(k,x,y);if(C&&b>=0&&b<l&&E>=0&&E<c){var I=Math.floor(b),S=Math.floor(E),R=b-I-.5,M=E-S-.5;v[I+S*l]+=(1-R)*(1-M)*C,v[I+1+S*l]+=R*(1-M)*C,v[I+1+(S+1)*l]+=R*M*C,v[I+(S+1)*l]+=(1-R)*M*C}}return pI({data:v,width:l,height:c},s*w),v}function h(y){var v=f(y),w=u(v),x=Math.pow(2,2*o);return Array.isArray(w)||(w=Bs(Number.MIN_VALUE,Ue(v)/x,w)),n_().size([l,c]).thresholds(w.map(b=>b*x))(v).map((b,E)=>(b.value=+w[E],d(b)))}h.contours=function(y){var v=f(y),w=n_().size([l,c]),x=Math.pow(2,2*o),b=E=>{E=+E;var C=d(w.contour(v,E*x));return C.value=E,C};return Object.defineProperty(b,"max",{get:()=>Ue(v)/x}),b};function d(y){return y.coordinates.forEach(g),y}function g(y){y.forEach(m)}function m(y){y.forEach(_)}function _(y){y[0]=y[0]*Math.pow(2,o)-a,y[1]=y[1]*Math.pow(2,o)-a}function p(){return a=s*3,l=i+a*2>>o,c=r+a*2>>o,h}return h.x=function(y){return arguments.length?(e=typeof y=="function"?y:Es(+y),h):e},h.y=function(y){return arguments.length?(t=typeof y=="function"?y:Es(+y),h):t},h.weight=function(y){return arguments.length?(n=typeof y=="function"?y:Es(+y),h):n},h.size=function(y){if(!arguments.length)return[i,r];var v=+y[0],w=+y[1];if(!(v>=0&&w>=0))throw new Error("invalid size");return i=v,r=w,p()},h.cellSize=function(y){if(!arguments.length)return 1<<o;if(!((y=+y)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(y)/Math.LN2),p()},h.thresholds=function(y){return arguments.length?(u=typeof y=="function"?y:Array.isArray(y)?Es(fA.call(y)):Es(y),h):u},h.bandwidth=function(y){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((y=+y)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*y*y+1)-1)/2,p()},h}const zr=11102230246251565e-32,Ze=134217729,DX=(3+8*zr)*zr;function fp(e,t,n,i,r){let s,o,a,l,c=t[0],u=i[0],f=0,h=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=i[++h]);let d=0;if(f<e&&h<n)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=t[++f]):(o=u+s,a=s-(o-u),u=i[++h]),s=o,a!==0&&(r[d++]=a);f<e&&h<n;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++h]),s=o,a!==0&&(r[d++]=a);for(;f<e;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++f],s=o,a!==0&&(r[d++]=a);for(;h<n;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++h],s=o,a!==0&&(r[d++]=a);return(s!==0||d===0)&&(r[d++]=s),d}function $X(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function pf(e){return new Float64Array(e)}const zX=(3+16*zr)*zr,WX=(2+12*zr)*zr,GX=(9+64*zr)*zr*zr,Aa=pf(4),uE=pf(8),fE=pf(12),hE=pf(16),an=pf(4);function YX(e,t,n,i,r,s,o){let a,l,c,u,f,h,d,g,m,_,p,y,v,w,x,b,E,C;const I=e-r,S=n-r,R=t-s,M=i-s;w=I*M,h=Ze*I,d=h-(h-I),g=I-d,h=Ze*M,m=h-(h-M),_=M-m,x=g*_-(w-d*m-g*m-d*_),b=R*S,h=Ze*R,d=h-(h-R),g=R-d,h=Ze*S,m=h-(h-S),_=S-m,E=g*_-(b-d*m-g*m-d*_),p=x-E,f=x-p,Aa[0]=x-(p+f)+(f-E),y=w+p,f=y-w,v=w-(y-f)+(p-f),p=v-b,f=v-p,Aa[1]=v-(p+f)+(f-b),C=y+p,f=C-y,Aa[2]=y-(C-f)+(p-f),Aa[3]=C;let k=$X(4,Aa),O=WX*o;if(k>=O||-k>=O||(f=e-I,a=e-(I+f)+(f-r),f=n-S,c=n-(S+f)+(f-r),f=t-R,l=t-(R+f)+(f-s),f=i-M,u=i-(M+f)+(f-s),a===0&&l===0&&c===0&&u===0)||(O=GX*o+DX*Math.abs(k),k+=I*u+M*a-(R*c+S*l),k>=O||-k>=O))return k;w=a*M,h=Ze*a,d=h-(h-a),g=a-d,h=Ze*M,m=h-(h-M),_=M-m,x=g*_-(w-d*m-g*m-d*_),b=l*S,h=Ze*l,d=h-(h-l),g=l-d,h=Ze*S,m=h-(h-S),_=S-m,E=g*_-(b-d*m-g*m-d*_),p=x-E,f=x-p,an[0]=x-(p+f)+(f-E),y=w+p,f=y-w,v=w-(y-f)+(p-f),p=v-b,f=v-p,an[1]=v-(p+f)+(f-b),C=y+p,f=C-y,an[2]=y-(C-f)+(p-f),an[3]=C;const A=fp(4,Aa,4,an,uE);w=I*u,h=Ze*I,d=h-(h-I),g=I-d,h=Ze*u,m=h-(h-u),_=u-m,x=g*_-(w-d*m-g*m-d*_),b=R*c,h=Ze*R,d=h-(h-R),g=R-d,h=Ze*c,m=h-(h-c),_=c-m,E=g*_-(b-d*m-g*m-d*_),p=x-E,f=x-p,an[0]=x-(p+f)+(f-E),y=w+p,f=y-w,v=w-(y-f)+(p-f),p=v-b,f=v-p,an[1]=v-(p+f)+(f-b),C=y+p,f=C-y,an[2]=y-(C-f)+(p-f),an[3]=C;const P=fp(A,uE,4,an,fE);w=a*u,h=Ze*a,d=h-(h-a),g=a-d,h=Ze*u,m=h-(h-u),_=u-m,x=g*_-(w-d*m-g*m-d*_),b=l*c,h=Ze*l,d=h-(h-l),g=l-d,h=Ze*c,m=h-(h-c),_=c-m,E=g*_-(b-d*m-g*m-d*_),p=x-E,f=x-p,an[0]=x-(p+f)+(f-E),y=w+p,f=y-w,v=w-(y-f)+(p-f),p=v-b,f=v-p,an[1]=v-(p+f)+(f-b),C=y+p,f=C-y,an[2]=y-(C-f)+(p-f),an[3]=C;const N=fp(P,fE,4,an,hE);return hE[N-1]}function wh(e,t,n,i,r,s){const o=(t-s)*(n-r),a=(e-r)*(i-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=zX*c?l:-YX(e,t,n,i,r,s,c)}const dE=Math.pow(2,-52),vh=new Uint32Array(512);class Bd{static from(t,n=HX,i=jX){const r=t.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=i(a)}return new Bd(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let S=0;S<o;S++){const R=t[2*S],M=t[2*S+1];R<a&&(a=R),M<l&&(l=M),R>c&&(c=R),M>u&&(u=M),this._ids[S]=S}const f=(a+c)/2,h=(l+u)/2;let d=1/0,g,m,_;for(let S=0;S<o;S++){const R=hp(f,h,t[2*S],t[2*S+1]);R<d&&(g=S,d=R)}const p=t[2*g],y=t[2*g+1];d=1/0;for(let S=0;S<o;S++){if(S===g)continue;const R=hp(p,y,t[2*S],t[2*S+1]);R<d&&R>0&&(m=S,d=R)}let v=t[2*m],w=t[2*m+1],x=1/0;for(let S=0;S<o;S++){if(S===g||S===m)continue;const R=VX(p,y,v,w,t[2*S],t[2*S+1]);R<x&&(_=S,x=R)}let b=t[2*_],E=t[2*_+1];if(x===1/0){for(let M=0;M<o;M++)this._dists[M]=t[2*M]-t[0]||t[2*M+1]-t[1];Va(this._ids,this._dists,0,o-1);const S=new Uint32Array(o);let R=0;for(let M=0,k=-1/0;M<o;M++){const O=this._ids[M];this._dists[O]>k&&(S[R++]=O,k=this._dists[O])}this.hull=S.subarray(0,R),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(wh(p,y,v,w,b,E)<0){const S=m,R=v,M=w;m=_,v=b,w=E,_=S,b=R,E=M}const C=XX(p,y,v,w,b,E);this._cx=C.x,this._cy=C.y;for(let S=0;S<o;S++)this._dists[S]=hp(t[2*S],t[2*S+1],C.x,C.y);Va(this._ids,this._dists,0,o-1),this._hullStart=g;let I=3;i[g]=n[_]=m,i[m]=n[g]=_,i[_]=n[m]=g,r[g]=0,r[m]=1,r[_]=2,s.fill(-1),s[this._hashKey(p,y)]=g,s[this._hashKey(v,w)]=m,s[this._hashKey(b,E)]=_,this.trianglesLen=0,this._addTriangle(g,m,_,-1,-1,-1);for(let S=0,R,M;S<this._ids.length;S++){const k=this._ids[S],O=t[2*k],A=t[2*k+1];if(S>0&&Math.abs(O-R)<=dE&&Math.abs(A-M)<=dE||(R=O,M=A,k===g||k===m||k===_))continue;let P=0;for(let Z=0,z=this._hashKey(O,A);Z<this._hashSize&&(P=s[(z+Z)%this._hashSize],!(P!==-1&&P!==i[P]));Z++);P=n[P];let N=P,W;for(;W=i[N],wh(O,A,t[2*N],t[2*N+1],t[2*W],t[2*W+1])>=0;)if(N=W,N===P){N=-1;break}if(N===-1)continue;let j=this._addTriangle(N,k,i[N],-1,-1,r[N]);r[k]=this._legalize(j+2),r[N]=j,I++;let V=i[N];for(;W=i[V],wh(O,A,t[2*V],t[2*V+1],t[2*W],t[2*W+1])<0;)j=this._addTriangle(V,k,W,r[k],-1,r[V]),r[k]=this._legalize(j+2),i[V]=V,I--,V=W;if(N===P)for(;W=n[N],wh(O,A,t[2*W],t[2*W+1],t[2*N],t[2*N+1])<0;)j=this._addTriangle(W,k,N,-1,r[N],r[W]),this._legalize(j+2),r[W]=j,i[N]=N,I--,N=W;this._hullStart=n[k]=N,i[N]=n[V]=k,i[k]=V,s[this._hashKey(O,A)]=k,s[this._hashKey(t[2*N],t[2*N+1])]=N}this.hull=new Uint32Array(I);for(let S=0,R=this._hullStart;S<I;S++)this.hull[S]=R,R=i[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(BX(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let s=0,o=0;for(;;){const a=i[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=vh[--s];continue}const c=a-a%3,u=l+(t+1)%3,f=c+(a+2)%3,h=n[o],d=n[t],g=n[u],m=n[f];if(UX(r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*g],r[2*g+1],r[2*m],r[2*m+1])){n[t]=m,n[a]=h;const p=i[f];if(p===-1){let v=this._hullStart;do{if(this._hullTri[v]===f){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,p),this._link(a,i[o]),this._link(o,f);const y=c+(a+1)%3;s<vh.length&&(vh[s++]=y)}else{if(s===0)break;t=vh[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function BX(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function hp(e,t,n,i){const r=e-n,s=t-i;return r*r+s*s}function UX(e,t,n,i,r,s,o,a){const l=e-o,c=t-a,u=n-o,f=i-a,h=r-o,d=s-a,g=l*l+c*c,m=u*u+f*f,_=h*h+d*d;return l*(f*_-m*d)-c*(u*_-m*h)+g*(u*d-f*h)<0}function VX(e,t,n,i,r,s){const o=n-e,a=i-t,l=r-e,c=s-t,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),d=(c*u-a*f)*h,g=(o*f-l*u)*h;return d*d+g*g}function XX(e,t,n,i,r,s){const o=n-e,a=i-t,l=r-e,c=s-t,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),d=e+(c*u-a*f)*h,g=t+(o*f-l*u)*h;return{x:d,y:g}}function Va(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const s=e[r],o=t[s];let a=r-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const r=n+i>>1;let s=n+1,o=i;Cc(e,r,s),t[e[n]]>t[e[i]]&&Cc(e,n,i),t[e[s]]>t[e[i]]&&Cc(e,s,i),t[e[n]]>t[e[s]]&&Cc(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;Cc(e,s,o)}e[n+1]=e[o],e[o]=a,i-s+1>=o-n?(Va(e,t,s,i),Va(e,t,n,o-1)):(Va(e,t,n,o-1),Va(e,t,s,i))}}function Cc(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function HX(e){return e[0]}function jX(e){return e[1]}const gE=1e-6;class Ao{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,s=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>gE||Math.abs(this._y1-s)>gE)&&(this._+="L"+r+","+s),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class i_{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let ZX=class{constructor(t,[n,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let m=0,_=0,p=i.length,y,v;m<p;m+=3,_+=2){const w=i[m]*2,x=i[m+1]*2,b=i[m+2]*2,E=t[w],C=t[w+1],I=t[x],S=t[x+1],R=t[b],M=t[b+1],k=I-E,O=S-C,A=R-E,P=M-C,N=(k*P-O*A)*2;if(Math.abs(N)<1e-9){if(s===void 0){s=o=0;for(const j of n)s+=t[j*2],o+=t[j*2+1];s/=n.length,o/=n.length}const W=1e9*Math.sign((s-E)*P-(o-C)*A);y=(E+R)/2-W*P,v=(C+M)/2+W*A}else{const W=1/N,j=k*k+O*O,V=A*A+P*P;y=E+(P*j-O*V)*W,v=C+(k*V-A*j)*W}a[_]=y,a[_+1]=v}let l=n[n.length-1],c,u=l*4,f,h=t[2*l],d,g=t[2*l+1];r.fill(0);for(let m=0;m<n.length;++m)l=n[m],c=u,f=h,d=g,u=l*4,h=t[2*l],g=t[2*l+1],r[c+2]=r[u]=d-g,r[c+3]=r[u+1]=h-f}render(t){const n=t==null?t=new Ao:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=i.length;u<f;++u){const h=i[u];if(h<u)continue;const d=Math.floor(u/3)*2,g=Math.floor(h/3)*2,m=o[d],_=o[d+1],p=o[g],y=o[g+1];this._renderSegment(m,_,p,y,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(r[c]/3)*2,h=o[f],d=o[f+1],g=l*4,m=this._project(h,d,a[g+2],a[g+3]);m&&this._renderSegment(h,d,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Ao:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Ao:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new i_;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,s){let o;const a=this._regioncode(t,n),l=this._regioncode(i,r);a===0&&l===0?(s.moveTo(t,n),s.lineTo(i,r)):(o=this._clipSegment(t,n,i,r,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[s]===r[a]&&n[s+1]===r[a+1]&&n[(s+2)%o]===r[(a+l-2)%l]&&n[(s+3)%o]===r[(a+l-1)%l]){yield i;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,o=i[t];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=r[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,s,o,a=n[i-2],l=n[i-1],c,u=this._regioncode(a,l),f,h=0;for(let d=0;d<i;d+=2)if(s=a,o=l,a=n[d],l=n[d+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=h,h=0,r?r.push(a,l):r=[a,l];else{let g,m,_,p,y;if(c===0){if((g=this._clipSegment(s,o,a,l,c,u))===null)continue;[m,_,p,y]=g}else{if((g=this._clipSegment(a,l,s,o,u,c))===null)continue;[p,y,m,_]=g,f=h,h=this._edgecode(m,_),f&&h&&this._edge(t,f,h,r,r.length),r?r.push(m,_):r=[m,_]}f=h,h=this._edgecode(p,y),f&&h&&this._edge(t,f,h,r,r.length),r?r.push(p,y):r=[p,y]}if(r)f=h,h=this._edgecode(r[0],r[1]),f&&h&&this._edge(t,f,h,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,s,o){const a=s<o;for(a&&([t,n,i,r,s,o]=[i,r,t,n,o,s]);;){if(s===0&&o===0)return a?[i,r,t,n]:[t,n,i,r];if(s&o)return null;let l,c,u=s||o;u&8?(l=t+(i-t)*(this.ymax-n)/(r-n),c=this.ymax):u&4?(l=t+(i-t)*(this.ymin-n)/(r-n),c=this.ymin):u&2?(c=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(c=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(i=l,r=c,o=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,u=a.length,f,h=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=h,h=this._edgecode(a[c],a[c+1]),f&&h&&(c=this._edge(t,f,h,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,i,r,s){for(;n!==i;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(t,o,a)&&(r.splice(s,0,o,a),s+=2)}return s}_project(t,n,i,r){let s=1/0,o,a,l;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<s&&(l=this.ymin,a=t+(s=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<s&&(l=this.ymax,a=t+(s=o)*i)}if(i>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/i)<s&&(a=this.xmax,l=n+(s=o)*r)}else if(i<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/i)<s&&(a=this.xmin,l=n+(s=o)*r)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const qX=2*Math.PI,La=Math.pow;function KX(e){return e[0]}function JX(e){return e[1]}function QX(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],s=2*t[i+1],o=2*t[i+2];if((n[o]-n[r])*(n[s+1]-n[r+1])-(n[s]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function tH(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Js{static from(t,n=KX,i=JX,r){return new Js("length"in t?eH(t,n,i,r):Float64Array.from(nH(t,n,i,r)))}constructor(t){this._delaunator=new Bd(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&QX(t)){this.collinear=Int32Array.from({length:n.length/2},(h,d)=>d).sort((h,d)=>n[2*h]-n[2*d]||n[2*h+1]-n[2*d+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let h=0,d=n.length/2;h<d;++h){const g=tH(n[2*h],n[2*h+1],f);n[2*h]=g[0],n[2*h+1]=g[1]}this._delaunator=new Bd(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=i.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(i[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=r.length;l<c;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new ZX(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==t)return;if(c=s[c],c===-1){const f=i[(r[t]+1)%i.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let s;for(;(s=this._step(i,t,n))>=0&&s!==i&&s!==r;)i=s;return s}_step(t,n,i){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(r[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=La(n-c[t*2],2)+La(i-c[t*2+1],2);const h=r[t];let d=h;do{let g=l[d];const m=La(n-c[g*2],2)+La(i-c[g*2+1],2);if(m<f&&(f=m,u=g),d=d%3===2?d-2:d+1,l[d]!==t)break;if(d=a[d],d===-1){if(d=s[(o[t]+1)%s.length],d!==g&&La(n-c[d*2],2)+La(i-c[d*2+1],2)<f)return d;break}}while(d!==h);return u}render(t){const n=t==null?t=new Ao:void 0,{points:i,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;t.moveTo(i[c],i[c+1]),t.lineTo(i[u],i[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Ao:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],l=r[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,qX)}return i&&i.value()}renderHull(t){const n=t==null?t=new Ao:void 0,{hull:i,points:r}=this,s=i[0]*2,o=i.length;t.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const l=2*i[a];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new i_;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Ao:void 0,{points:r,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new i_;return this.renderTriangle(t,n),n.value()}}function eH(e,t,n,i){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=e[o];s[o*2]=t.call(i,a,o,e),s[o*2+1]=n.call(i,a,o,e)}return s}function*nH(e,t,n,i){let r=0;for(const s of e)yield t.call(i,s,r,e),yield n.call(i,s,r,e),++r}function iH(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ud(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Rl(e){return e=Ud(Math.abs(e)),e?e[1]:NaN}function rH(e,t){return function(n,i){for(var r=n.length,s=[],o=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function sH(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var oH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ku(e){if(!(t=oH.exec(e)))throw new Error("invalid format: "+e);var t;return new Aw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ku.prototype=Aw.prototype;function Aw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Aw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function aH(e){t:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break t;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var hA;function lH(e,t){var n=Ud(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(hA=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Ud(e,Math.max(0,t+s-1))[0]}function mE(e,t){var n=Ud(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const pE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:iH,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>mE(e*100,t),r:mE,s:lH,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yE(e){return e}var _E=Array.prototype.map,wE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function cH(e){var t=e.grouping===void 0||e.thousands===void 0?yE:rH(_E.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?yE:sH(_E.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=ku(f);var h=f.fill,d=f.align,g=f.sign,m=f.symbol,_=f.zero,p=f.width,y=f.comma,v=f.precision,w=f.trim,x=f.type;x==="n"?(y=!0,x="g"):pE[x]||(v===void 0&&(v=12),w=!0,x="g"),(_||h==="0"&&d==="=")&&(_=!0,h="0",d="=");var b=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",E=m==="$"?i:/[%p]/.test(x)?o:"",C=pE[x],I=/[defgprs%]/.test(x);v=v===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S(R){var M=b,k=E,O,A,P;if(x==="c")k=C(R)+k,R="";else{R=+R;var N=R<0||1/R<0;if(R=isNaN(R)?l:C(Math.abs(R),v),w&&(R=aH(R)),N&&+R==0&&g!=="+"&&(N=!1),M=(N?g==="("?g:a:g==="-"||g==="("?"":g)+M,k=(x==="s"?wE[8+hA/3]:"")+k+(N&&g==="("?")":""),I){for(O=-1,A=R.length;++O<A;)if(P=R.charCodeAt(O),48>P||P>57){k=(P===46?r+R.slice(O+1):R.slice(O))+k,R=R.slice(0,O);break}}}y&&!_&&(R=t(R,1/0));var W=M.length+R.length+k.length,j=W<p?new Array(p-W+1).join(h):"";switch(y&&_&&(R=t(j+R,j.length?p-k.length:1/0),j=""),d){case"<":R=M+R+k+j;break;case"=":R=M+j+R+k;break;case"^":R=j.slice(0,W=j.length>>1)+M+R+k+j.slice(W);break;default:R=j+M+R+k;break}return s(R)}return S.toString=function(){return f+""},S}function u(f,h){var d=c((f=ku(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Rl(h)/3)))*3,m=Math.pow(10,-g),_=wE[8+g/3];return function(p){return d(m*p)+_}}return{format:c,formatPrefix:u}}var bh,ec,dA;uH({thousands:",",grouping:[3],currency:["$",""]});function uH(e){return bh=cH(e),ec=bh.format,dA=bh.formatPrefix,bh}function fH(e){return Math.max(0,-Rl(Math.abs(e)))}function hH(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rl(t)/3)))*3-Rl(Math.abs(e)))}function dH(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Rl(t)-Rl(e))+1}var pt=1e-6,Vd=1e-12,At=Math.PI,xe=At/2,vE=At/4,Yn=At*2,Xe=180/At,Gt=At/180,Xt=Math.abs,nc=Math.atan,Li=Math.atan2,_t=Math.cos,xh=Math.ceil,gA=Math.exp,r_=Math.hypot,Xd=Math.log,dp=Math.pow,dt=Math.sin,ei=Math.sign||function(e){return e>0?1:e<0?-1:0},pn=Math.sqrt,Lw=Math.tan;function mA(e){return e>1?0:e<-1?At:Math.acos(e)}function Mn(e){return e>1?xe:e<-1?-xe:Math.asin(e)}function Dn(){}function Hd(e,t){e&&xE.hasOwnProperty(e.type)&&xE[e.type](e,t)}var bE={Feature:function(e,t){Hd(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Hd(n[i].geometry,t)}},xE={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){s_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)s_(n[i],t,0)},Polygon:function(e,t){EE(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)EE(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Hd(n[i],t)}};function s_(e,t,n){var i=-1,r=e.length-n,s;for(t.lineStart();++i<r;)s=e[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function EE(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)s_(e[n],t,1);t.polygonEnd()}function Cs(e,t){e&&bE.hasOwnProperty(e.type)?bE[e.type](e,t):Hd(e,t)}function o_(e){return[Li(e[1],e[0]),Mn(e[2])]}function Il(e){var t=e[0],n=e[1],i=_t(n);return[i*_t(t),i*dt(t),dt(n)]}function Eh(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function jd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function gp(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Th(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function a_(e){var t=pn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Yc,Zd,qd,Kd,Jd,Qd,tg,eg,l_,c_,u_,pA,yA,cn,un,fn,Ei={sphere:Dn,point:Ow,lineStart:TE,lineEnd:CE,polygonStart:function(){Ei.lineStart=pH,Ei.lineEnd=yH},polygonEnd:function(){Ei.lineStart=TE,Ei.lineEnd=CE}};function Ow(e,t){e*=Gt,t*=Gt;var n=_t(t);yf(n*_t(e),n*dt(e),dt(t))}function yf(e,t,n){++Yc,qd+=(e-qd)/Yc,Kd+=(t-Kd)/Yc,Jd+=(n-Jd)/Yc}function TE(){Ei.point=gH}function gH(e,t){e*=Gt,t*=Gt;var n=_t(t);cn=n*_t(e),un=n*dt(e),fn=dt(t),Ei.point=mH,yf(cn,un,fn)}function mH(e,t){e*=Gt,t*=Gt;var n=_t(t),i=n*_t(e),r=n*dt(e),s=dt(t),o=Li(pn((o=un*s-fn*r)*o+(o=fn*i-cn*s)*o+(o=cn*r-un*i)*o),cn*i+un*r+fn*s);Zd+=o,Qd+=o*(cn+(cn=i)),tg+=o*(un+(un=r)),eg+=o*(fn+(fn=s)),yf(cn,un,fn)}function CE(){Ei.point=Ow}function pH(){Ei.point=_H}function yH(){_A(pA,yA),Ei.point=Ow}function _H(e,t){pA=e,yA=t,e*=Gt,t*=Gt,Ei.point=_A;var n=_t(t);cn=n*_t(e),un=n*dt(e),fn=dt(t),yf(cn,un,fn)}function _A(e,t){e*=Gt,t*=Gt;var n=_t(t),i=n*_t(e),r=n*dt(e),s=dt(t),o=un*s-fn*r,a=fn*i-cn*s,l=cn*r-un*i,c=r_(o,a,l),u=Mn(c),f=c&&-u/c;l_.add(f*o),c_.add(f*a),u_.add(f*l),Zd+=u,Qd+=u*(cn+(cn=i)),tg+=u*(un+(un=r)),eg+=u*(fn+(fn=s)),yf(cn,un,fn)}function wH(e){Yc=Zd=qd=Kd=Jd=Qd=tg=eg=0,l_=new Ji,c_=new Ji,u_=new Ji,Cs(e,Ei);var t=+l_,n=+c_,i=+u_,r=r_(t,n,i);return r<Vd&&(t=Qd,n=tg,i=eg,Zd<pt&&(t=qd,n=Kd,i=Jd),r=r_(t,n,i),r<Vd)?[NaN,NaN]:[Li(n,t)*Xe,Mn(i/r)*Xe]}function f_(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function h_(e,t){return Xt(e)>At&&(e-=Math.round(e/Yn)*Yn),[e,t]}h_.invert=h_;function wA(e,t,n){return(e%=Yn)?t||n?f_(ME(e),RE(t,n)):ME(e):t||n?RE(t,n):h_}function SE(e){return function(t,n){return t+=e,Xt(t)>At&&(t-=Math.round(t/Yn)*Yn),[t,n]}}function ME(e){var t=SE(e);return t.invert=SE(-e),t}function RE(e,t){var n=_t(e),i=dt(e),r=_t(t),s=dt(t);function o(a,l){var c=_t(l),u=_t(a)*c,f=dt(a)*c,h=dt(l),d=h*n+u*i;return[Li(f*r-d*s,u*n-h*i),Mn(d*r+f*s)]}return o.invert=function(a,l){var c=_t(l),u=_t(a)*c,f=dt(a)*c,h=dt(l),d=h*r-f*s;return[Li(f*r+h*s,u*n+d*i),Mn(d*n-u*i)]},o}function vH(e){e=wA(e[0]*Gt,e[1]*Gt,e.length>2?e[2]*Gt:0);function t(n){return n=e(n[0]*Gt,n[1]*Gt),n[0]*=Xe,n[1]*=Xe,n}return t.invert=function(n){return n=e.invert(n[0]*Gt,n[1]*Gt),n[0]*=Xe,n[1]*=Xe,n},t}function bH(e,t,n,i,r,s){if(n){var o=_t(t),a=dt(t),l=i*n;r==null?(r=t+i*Yn,s=t-l/2):(r=IE(o,r),s=IE(o,s),(i>0?r<s:r>s)&&(r+=i*Yn));for(var c,u=r;i>0?u>s:u<s;u-=l)c=o_([o,-a*_t(u),-a*dt(u)]),e.point(c[0],c[1])}}function IE(e,t){t=Il(t),t[0]-=e,a_(t);var n=mA(-t[1]);return((-t[2]<0?-n:n)+Yn-pt)%Yn}function vA(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Dn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Jh(e,t){return Xt(e[0]-t[0])<pt&&Xt(e[1]-t[1])<pt}function Ch(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function bA(e,t,n,i,r){var s=[],o=[],a,l;if(e.forEach(function(g){if(!((m=g.length-1)<=0)){var m,_=g[0],p=g[m],y;if(Jh(_,p)){if(!_[2]&&!p[2]){for(r.lineStart(),a=0;a<m;++a)r.point((_=g[a])[0],_[1]);r.lineEnd();return}p[0]+=2*pt}s.push(y=new Ch(_,g,null,!0)),o.push(y.o=new Ch(_,null,y,!1)),s.push(y=new Ch(p,g,null,!1)),o.push(y.o=new Ch(p,null,y,!0))}}),!!s.length){for(o.sort(t),AE(s),AE(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,l=u.length;a<l;++a)r.point((f=u[a])[0],f[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(d)for(u=h.p.z,a=u.length-1;a>=0;--a)r.point((f=u[a])[0],f[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);r.lineEnd()}}}function AE(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function mp(e){return Xt(e[0])<=At?e[0]:ei(e[0])*((Xt(e[0])+At)%Yn-At)}function xH(e,t){var n=mp(t),i=t[1],r=dt(i),s=[dt(n),-_t(n),0],o=0,a=0,l=new Ji;r===1?i=xe+pt:r===-1&&(i=-xe-pt);for(var c=0,u=e.length;c<u;++c)if(h=(f=e[c]).length)for(var f,h,d=f[h-1],g=mp(d),m=d[1]/2+vE,_=dt(m),p=_t(m),y=0;y<h;++y,g=w,_=b,p=E,d=v){var v=f[y],w=mp(v),x=v[1]/2+vE,b=dt(x),E=_t(x),C=w-g,I=C>=0?1:-1,S=I*C,R=S>At,M=_*b;if(l.add(Li(M*I*dt(S),p*E+M*_t(S))),o+=R?C+I*Yn:C,R^g>=n^w>=n){var k=jd(Il(d),Il(v));a_(k);var O=jd(s,k);a_(O);var A=(R^C>=0?-1:1)*Mn(O[2]);(i>A||i===A&&(k[0]||k[1]))&&(a+=R^C>=0?1:-1)}}return(o<-pt||o<pt&&l<-Vd)^a&1}function xA(e,t,n,i){return function(r){var s=t(r),o=vA(),a=t(o),l=!1,c,u,f,h={point:d,lineStart:m,lineEnd:_,polygonStart:function(){h.point=p,h.lineStart=y,h.lineEnd=v,u=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=_,u=CI(u);var w=xH(c,i);u.length?(l||(r.polygonStart(),l=!0),bA(u,TH,w,n,r)):w&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(w,x){e(w,x)&&r.point(w,x)}function g(w,x){s.point(w,x)}function m(){h.point=g,s.lineStart()}function _(){h.point=d,s.lineEnd()}function p(w,x){f.push([w,x]),a.point(w,x)}function y(){a.lineStart(),f=[]}function v(){p(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),x=o.result(),b,E=x.length,C,I,S;if(f.pop(),c.push(f),f=null,!!E){if(w&1){if(I=x[0],(C=I.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),b=0;b<C;++b)r.point((S=I[b])[0],S[1]);r.lineEnd()}return}E>1&&w&2&&x.push(x.pop().concat(x.shift())),u.push(x.filter(EH))}}return h}}function EH(e){return e.length>1}function TH(e,t){return((e=e.x)[0]<0?e[1]-xe-pt:xe-e[1])-((t=t.x)[0]<0?t[1]-xe-pt:xe-t[1])}const LE=xA(function(){return!0},CH,MH,[-At,-xe]);function CH(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(s,o){var a=s>0?At:-At,l=Xt(s-t);Xt(l-At)<pt?(e.point(t,n=(n+o)/2>0?xe:-xe),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),r=0):i!==a&&l>=At&&(Xt(t-i)<pt&&(t-=i*pt),Xt(s-a)<pt&&(s-=a*pt),n=SH(t,n,s,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),r=0),e.point(t=s,n=o),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function SH(e,t,n,i){var r,s,o=dt(e-n);return Xt(o)>pt?nc((dt(t)*(s=_t(i))*dt(n)-dt(i)*(r=_t(t))*dt(e))/(r*s*o)):(t+i)/2}function MH(e,t,n,i){var r;if(e==null)r=n*xe,i.point(-At,r),i.point(0,r),i.point(At,r),i.point(At,0),i.point(At,-r),i.point(0,-r),i.point(-At,-r),i.point(-At,0),i.point(-At,r);else if(Xt(e[0]-t[0])>pt){var s=e[0]<t[0]?At:-At;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function RH(e){var t=_t(e),n=6*Gt,i=t>0,r=Xt(t)>pt;function s(u,f,h,d){bH(d,e,n,h,u,f)}function o(u,f){return _t(u)*_t(f)>t}function a(u){var f,h,d,g,m;return{lineStart:function(){g=d=!1,m=1},point:function(_,p){var y=[_,p],v,w=o(_,p),x=i?w?0:c(_,p):w?c(_+(_<0?At:-At),p):0;if(!f&&(g=d=w)&&u.lineStart(),w!==d&&(v=l(f,y),(!v||Jh(f,v)||Jh(y,v))&&(y[2]=1)),w!==d)m=0,w?(u.lineStart(),v=l(y,f),u.point(v[0],v[1])):(v=l(f,y),u.point(v[0],v[1],2),u.lineEnd()),f=v;else if(r&&f&&i^w){var b;!(x&h)&&(b=l(y,f,!0))&&(m=0,i?(u.lineStart(),u.point(b[0][0],b[0][1]),u.point(b[1][0],b[1][1]),u.lineEnd()):(u.point(b[1][0],b[1][1]),u.lineEnd(),u.lineStart(),u.point(b[0][0],b[0][1],3)))}w&&(!f||!Jh(f,y))&&u.point(y[0],y[1]),f=y,d=w,h=x},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return m|(g&&d)<<1}}}function l(u,f,h){var d=Il(u),g=Il(f),m=[1,0,0],_=jd(d,g),p=Eh(_,_),y=_[0],v=p-y*y;if(!v)return!h&&u;var w=t*p/v,x=-t*y/v,b=jd(m,_),E=Th(m,w),C=Th(_,x);gp(E,C);var I=b,S=Eh(E,I),R=Eh(I,I),M=S*S-R*(Eh(E,E)-1);if(!(M<0)){var k=pn(M),O=Th(I,(-S-k)/R);if(gp(O,E),O=o_(O),!h)return O;var A=u[0],P=f[0],N=u[1],W=f[1],j;P<A&&(j=A,A=P,P=j);var V=P-A,Z=Xt(V-At)<pt,z=Z||V<pt;if(!Z&&W<N&&(j=N,N=W,W=j),z?Z?N+W>0^O[1]<(Xt(O[0]-A)<pt?N:W):N<=O[1]&&O[1]<=W:V>At^(A<=O[0]&&O[0]<=P)){var Q=Th(I,(-S+k)/R);return gp(Q,E),[O,o_(Q)]}}}function c(u,f){var h=i?e:At-e,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return xA(o,a,s,i?[0,-e]:[-At,e-At])}function IH(e,t,n,i,r,s){var o=e[0],a=e[1],l=t[0],c=t[1],u=0,f=1,h=l-o,d=c-a,g;if(g=n-o,!(!h&&g>0)){if(g/=h,h<0){if(g<u)return;g<f&&(f=g)}else if(h>0){if(g>f)return;g>u&&(u=g)}if(g=r-o,!(!h&&g<0)){if(g/=h,h<0){if(g>f)return;g>u&&(u=g)}else if(h>0){if(g<u)return;g<f&&(f=g)}if(g=i-a,!(!d&&g>0)){if(g/=d,d<0){if(g<u)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>u&&(u=g)}if(g=s-a,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>u&&(u=g)}else if(d>0){if(g<u)return;g<f&&(f=g)}return u>0&&(e[0]=o+u*h,e[1]=a+u*d),f<1&&(t[0]=o+f*h,t[1]=a+f*d),!0}}}}}var Bc=1e9,Sh=-Bc;function EA(e,t,n,i){function r(c,u){return e<=c&&c<=n&&t<=u&&u<=i}function s(c,u,f,h){var d=0,g=0;if(c==null||(d=o(c,f))!==(g=o(u,f))||l(c,u)<0^f>0)do h.point(d===0||d===3?e:n,d>1?i:t);while((d=(d+f+4)%4)!==g);else h.point(u[0],u[1])}function o(c,u){return Xt(c[0]-e)<pt?u>0?0:3:Xt(c[0]-n)<pt?u>0?2:1:Xt(c[1]-t)<pt?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),h=o(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=vA(),h,d,g,m,_,p,y,v,w,x,b,E={point:C,lineStart:M,lineEnd:k,polygonStart:S,polygonEnd:R};function C(A,P){r(A,P)&&u.point(A,P)}function I(){for(var A=0,P=0,N=d.length;P<N;++P)for(var W=d[P],j=1,V=W.length,Z=W[0],z,Q,nt=Z[0],st=Z[1];j<V;++j)z=nt,Q=st,Z=W[j],nt=Z[0],st=Z[1],Q<=i?st>i&&(nt-z)*(i-Q)>(st-Q)*(e-z)&&++A:st<=i&&(nt-z)*(i-Q)<(st-Q)*(e-z)&&--A;return A}function S(){u=f,h=[],d=[],b=!0}function R(){var A=I(),P=b&&A,N=(h=CI(h)).length;(P||N)&&(c.polygonStart(),P&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),N&&bA(h,a,A,s,c),c.polygonEnd()),u=c,h=d=g=null}function M(){E.point=O,d&&d.push(g=[]),x=!0,w=!1,y=v=NaN}function k(){h&&(O(m,_),p&&w&&f.rejoin(),h.push(f.result())),E.point=C,w&&u.lineEnd()}function O(A,P){var N=r(A,P);if(d&&g.push([A,P]),x)m=A,_=P,p=N,x=!1,N&&(u.lineStart(),u.point(A,P));else if(N&&w)u.point(A,P);else{var W=[y=Math.max(Sh,Math.min(Bc,y)),v=Math.max(Sh,Math.min(Bc,v))],j=[A=Math.max(Sh,Math.min(Bc,A)),P=Math.max(Sh,Math.min(Bc,P))];IH(W,j,e,t,n,i)?(w||(u.lineStart(),u.point(W[0],W[1])),u.point(j[0],j[1]),N||u.lineEnd(),b=!1):N&&(u.lineStart(),u.point(A,P),b=!1)}y=A,v=P,w=N}return E}}function OE(e,t,n){var i=ti(e,t-pt,n).concat(t);return function(r){return i.map(function(s){return[r,s]})}}function kE(e,t,n){var i=ti(e,t-pt,n).concat(t);return function(r){return i.map(function(s){return[s,r]})}}function AH(){var e,t,n,i,r,s,o,a,l=10,c=l,u=90,f=360,h,d,g,m,_=2.5;function p(){return{type:"MultiLineString",coordinates:y()}}function y(){return ti(xh(i/u)*u,n,u).map(g).concat(ti(xh(a/f)*f,o,f).map(m)).concat(ti(xh(t/l)*l,e,l).filter(function(v){return Xt(v%u)>pt}).map(h)).concat(ti(xh(s/c)*c,r,c).filter(function(v){return Xt(v%f)>pt}).map(d))}return p.lines=function(){return y().map(function(v){return{type:"LineString",coordinates:v}})},p.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(m(o).slice(1),g(n).reverse().slice(1),m(a).reverse().slice(1))]}},p.extent=function(v){return arguments.length?p.extentMajor(v).extentMinor(v):p.extentMinor()},p.extentMajor=function(v){return arguments.length?(i=+v[0][0],n=+v[1][0],a=+v[0][1],o=+v[1][1],i>n&&(v=i,i=n,n=v),a>o&&(v=a,a=o,o=v),p.precision(_)):[[i,a],[n,o]]},p.extentMinor=function(v){return arguments.length?(t=+v[0][0],e=+v[1][0],s=+v[0][1],r=+v[1][1],t>e&&(v=t,t=e,e=v),s>r&&(v=s,s=r,r=v),p.precision(_)):[[t,s],[e,r]]},p.step=function(v){return arguments.length?p.stepMajor(v).stepMinor(v):p.stepMinor()},p.stepMajor=function(v){return arguments.length?(u=+v[0],f=+v[1],p):[u,f]},p.stepMinor=function(v){return arguments.length?(l=+v[0],c=+v[1],p):[l,c]},p.precision=function(v){return arguments.length?(_=+v,h=OE(s,r,90),d=kE(t,e,_),g=OE(a,o,90),m=kE(i,n,_),p):_},p.extentMajor([[-180,-90+pt],[180,90-pt]]).extentMinor([[-180,-80-pt],[180,80+pt]])}function LH(){return AH()()}const d_=e=>e;var pp=new Ji,g_=new Ji,TA,CA,m_,p_,Ss={point:Dn,lineStart:Dn,lineEnd:Dn,polygonStart:function(){Ss.lineStart=OH,Ss.lineEnd=PH},polygonEnd:function(){Ss.lineStart=Ss.lineEnd=Ss.point=Dn,pp.add(Xt(g_)),g_=new Ji},result:function(){var e=pp/2;return pp=new Ji,e}};function OH(){Ss.point=kH}function kH(e,t){Ss.point=SA,TA=m_=e,CA=p_=t}function SA(e,t){g_.add(p_*e-m_*t),m_=e,p_=t}function PH(){SA(TA,CA)}const PE=Ss;var Al=1/0,ng=Al,Pu=-Al,ig=Pu,FH={point:NH,lineStart:Dn,lineEnd:Dn,polygonStart:Dn,polygonEnd:Dn,result:function(){var e=[[Al,ng],[Pu,ig]];return Pu=ig=-(ng=Al=1/0),e}};function NH(e,t){e<Al&&(Al=e),e>Pu&&(Pu=e),t<ng&&(ng=t),t>ig&&(ig=t)}const rg=FH;var y_=0,__=0,Uc=0,sg=0,og=0,Xa=0,w_=0,v_=0,Vc=0,MA,RA,Vi,Xi,vi={point:ra,lineStart:FE,lineEnd:NE,polygonStart:function(){vi.lineStart=zH,vi.lineEnd=WH},polygonEnd:function(){vi.point=ra,vi.lineStart=FE,vi.lineEnd=NE},result:function(){var e=Vc?[w_/Vc,v_/Vc]:Xa?[sg/Xa,og/Xa]:Uc?[y_/Uc,__/Uc]:[NaN,NaN];return y_=__=Uc=sg=og=Xa=w_=v_=Vc=0,e}};function ra(e,t){y_+=e,__+=t,++Uc}function FE(){vi.point=DH}function DH(e,t){vi.point=$H,ra(Vi=e,Xi=t)}function $H(e,t){var n=e-Vi,i=t-Xi,r=pn(n*n+i*i);sg+=r*(Vi+e)/2,og+=r*(Xi+t)/2,Xa+=r,ra(Vi=e,Xi=t)}function NE(){vi.point=ra}function zH(){vi.point=GH}function WH(){IA(MA,RA)}function GH(e,t){vi.point=IA,ra(MA=Vi=e,RA=Xi=t)}function IA(e,t){var n=e-Vi,i=t-Xi,r=pn(n*n+i*i);sg+=r*(Vi+e)/2,og+=r*(Xi+t)/2,Xa+=r,r=Xi*e-Vi*t,w_+=r*(Vi+e),v_+=r*(Xi+t),Vc+=r*3,ra(Vi=e,Xi=t)}const DE=vi;function AA(e){this._context=e}AA.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Yn);break}}},result:Dn};var b_=new Ji,yp,LA,OA,Xc,Hc,ag={point:Dn,lineStart:function(){ag.point=YH},lineEnd:function(){yp&&kA(LA,OA),ag.point=Dn},polygonStart:function(){yp=!0},polygonEnd:function(){yp=null},result:function(){var e=+b_;return b_=new Ji,e}};function YH(e,t){ag.point=kA,LA=Xc=e,OA=Hc=t}function kA(e,t){Xc-=e,Hc-=t,b_.add(pn(Xc*Xc+Hc*Hc)),Xc=e,Hc=t}const $E=ag;let zE,lg,WE,GE;class YE{constructor(t){this._append=t==null?PA:BH(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==WE||this._append!==lg){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,WE=i,lg=this._append,GE=this._,this._=r}this._+=GE;break}}}result(){const t=this._;return this._="",t.length?t:null}}function PA(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function BH(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return PA;if(t!==zE){const n=10**t;zE=t,lg=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return lg}function Qs(e,t){let n=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),Cs(a,r(s))),s.result()}return o.area=function(a){return Cs(a,r(PE)),PE.result()},o.measure=function(a){return Cs(a,r($E)),$E.result()},o.bounds=function(a){return Cs(a,r(rg)),rg.result()},o.centroid=function(a){return Cs(a,r(DE)),DE.result()},o.projection=function(a){return arguments.length?(r=a==null?(e=null,d_):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new YE(n)):new AA(t=a),typeof i!="function"&&s.pointRadius(i),o):t},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new YE(n)),o},o.projection(e).digits(n).context(t)}function cg(e){return{stream:Lm(e)}}function Lm(e){return function(t){var n=new x_;for(var i in e)n[i]=e[i];return n.stream=t,n}}function x_(){}x_.prototype={constructor:x_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function kw(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Cs(n,e.stream(rg)),t(rg.result()),i!=null&&e.clipExtent(i),e}function Pw(e,t,n){return kw(e,function(i){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(s-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function FA(e,t,n){return Pw(e,[[0,0],t],n)}function NA(e,t,n){return kw(e,function(i){var r=+t,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];e.scale(150*s).translate([o,a])},n)}function DA(e,t,n){return kw(e,function(i){var r=+t,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var BE=16,UH=_t(30*Gt);function UE(e,t){return+t?XH(e,t):VH(e)}function VH(e){return Lm({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function XH(e,t){function n(i,r,s,o,a,l,c,u,f,h,d,g,m,_){var p=c-i,y=u-r,v=p*p+y*y;if(v>4*t&&m--){var w=o+h,x=a+d,b=l+g,E=pn(w*w+x*x+b*b),C=Mn(b/=E),I=Xt(Xt(b)-1)<pt||Xt(s-f)<pt?(s+f)/2:Li(x,w),S=e(I,C),R=S[0],M=S[1],k=R-i,O=M-r,A=y*k-p*O;(A*A/v>t||Xt((p*k+y*O)/v-.5)>.3||o*h+a*d+l*g<UH)&&(n(i,r,s,o,a,l,R,M,I,w/=E,x/=E,b,m,_),_.point(R,M),n(R,M,I,w,x,b,c,u,f,h,d,g,m,_))}}return function(i){var r,s,o,a,l,c,u,f,h,d,g,m,_={point:p,lineStart:y,lineEnd:w,polygonStart:function(){i.polygonStart(),_.lineStart=x},polygonEnd:function(){i.polygonEnd(),_.lineStart=y}};function p(C,I){C=e(C,I),i.point(C[0],C[1])}function y(){f=NaN,_.point=v,i.lineStart()}function v(C,I){var S=Il([C,I]),R=e(C,I);n(f,h,u,d,g,m,f=R[0],h=R[1],u=C,d=S[0],g=S[1],m=S[2],BE,i),i.point(f,h)}function w(){_.point=p,i.lineEnd()}function x(){y(),_.point=b,_.lineEnd=E}function b(C,I){v(r=C,I),s=f,o=h,a=d,l=g,c=m,_.point=v}function E(){n(f,h,u,d,g,m,s,o,r,a,l,c,BE,i),_.lineEnd=w,w()}return _}}var HH=Lm({point:function(e,t){this.stream.point(e*Gt,t*Gt)}});function jH(e){return Lm({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function ZH(e,t,n,i,r){function s(o,a){return o*=i,a*=r,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*i,(n-a)/e*r]},s}function VE(e,t,n,i,r,s){if(!s)return ZH(e,t,n,i,r);var o=_t(s),a=dt(s),l=o*e,c=a*e,u=o/e,f=a/e,h=(a*n-o*t)/e,d=(a*t+o*n)/e;function g(m,_){return m*=i,_*=r,[l*m-c*_+t,n-c*m-l*_]}return g.invert=function(m,_){return[i*(u*m-f*_+h),r*(d-f*m-u*_)]},g}function to(e){return $A(function(){return e})()}function $A(e){var t,n=150,i=480,r=250,s=0,o=0,a=0,l=0,c=0,u,f=0,h=1,d=1,g=null,m=LE,_=null,p,y,v,w=d_,x=.5,b,E,C,I,S;function R(A){return C(A[0]*Gt,A[1]*Gt)}function M(A){return A=C.invert(A[0],A[1]),A&&[A[0]*Xe,A[1]*Xe]}R.stream=function(A){return I&&S===A?I:I=HH(jH(u)(m(b(w(S=A)))))},R.preclip=function(A){return arguments.length?(m=A,g=void 0,O()):m},R.postclip=function(A){return arguments.length?(w=A,_=p=y=v=null,O()):w},R.clipAngle=function(A){return arguments.length?(m=+A?RH(g=A*Gt):(g=null,LE),O()):g*Xe},R.clipExtent=function(A){return arguments.length?(w=A==null?(_=p=y=v=null,d_):EA(_=+A[0][0],p=+A[0][1],y=+A[1][0],v=+A[1][1]),O()):_==null?null:[[_,p],[y,v]]},R.scale=function(A){return arguments.length?(n=+A,k()):n},R.translate=function(A){return arguments.length?(i=+A[0],r=+A[1],k()):[i,r]},R.center=function(A){return arguments.length?(s=A[0]%360*Gt,o=A[1]%360*Gt,k()):[s*Xe,o*Xe]},R.rotate=function(A){return arguments.length?(a=A[0]%360*Gt,l=A[1]%360*Gt,c=A.length>2?A[2]%360*Gt:0,k()):[a*Xe,l*Xe,c*Xe]},R.angle=function(A){return arguments.length?(f=A%360*Gt,k()):f*Xe},R.reflectX=function(A){return arguments.length?(h=A?-1:1,k()):h<0},R.reflectY=function(A){return arguments.length?(d=A?-1:1,k()):d<0},R.precision=function(A){return arguments.length?(b=UE(E,x=A*A),O()):pn(x)},R.fitExtent=function(A,P){return Pw(R,A,P)},R.fitSize=function(A,P){return FA(R,A,P)},R.fitWidth=function(A,P){return NA(R,A,P)},R.fitHeight=function(A,P){return DA(R,A,P)};function k(){var A=VE(n,0,0,h,d,f).apply(null,t(s,o)),P=VE(n,i-A[0],r-A[1],h,d,f);return u=wA(a,l,c),E=f_(t,P),C=f_(u,E),b=UE(E,x),O()}function O(){return I=S=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&M,k()}}function Fw(e){var t=0,n=At/3,i=$A(e),r=i(t,n);return r.parallels=function(s){return arguments.length?i(t=s[0]*Gt,n=s[1]*Gt):[t*Xe,n*Xe]},r}function qH(e){var t=_t(e);function n(i,r){return[i*t,dt(r)/t]}return n.invert=function(i,r){return[i/t,Mn(r*t)]},n}function KH(e,t){var n=dt(e),i=(n+dt(t))/2;if(Xt(i)<pt)return qH(e);var r=1+n*(2*i-n),s=pn(r)/i;function o(a,l){var c=pn(r-2*i*dt(l))/i;return[c*dt(a*=i),s-c*_t(a)]}return o.invert=function(a,l){var c=s-l,u=Li(a,Xt(c))*ei(c);return c*i<0&&(u-=At*ei(a)*ei(c)),[u/i,Mn((r-(a*a+c*c)*i*i)/(2*i))]},o}function ug(){return Fw(KH).scale(155.424).center([0,33.6442])}function zA(){return ug().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function JH(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function QH(){var e,t,n=zA(),i,r=ug().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=ug().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(h,d){l=[h,d]}};function u(h){var d=h[0],g=h[1];return l=null,i.point(d,g),l||(s.point(d,g),l)||(a.point(d,g),l)}u.invert=function(h){var d=n.scale(),g=n.translate(),m=(h[0]-g[0])/d,_=(h[1]-g[1])/d;return(_>=.12&&_<.234&&m>=-.425&&m<-.214?r:_>=.166&&_<.234&&m>=-.214&&m<-.115?o:n).invert(h)},u.stream=function(h){return e&&t===h?e:e=JH([n.stream(t=h),r.stream(h),o.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),o.precision(h),f()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),o.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),g=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[g-.455*d,m-.238*d],[g+.455*d,m+.238*d]]).stream(c),s=r.translate([g-.307*d,m+.201*d]).clipExtent([[g-.425*d+pt,m+.12*d+pt],[g-.214*d-pt,m+.234*d-pt]]).stream(c),a=o.translate([g-.205*d,m+.212*d]).clipExtent([[g-.214*d+pt,m+.166*d+pt],[g-.115*d-pt,m+.234*d-pt]]).stream(c),f()},u.fitExtent=function(h,d){return Pw(u,h,d)},u.fitSize=function(h,d){return FA(u,h,d)},u.fitWidth=function(h,d){return NA(u,h,d)},u.fitHeight=function(h,d){return DA(u,h,d)};function f(){return e=t=null,u}return u.scale(1070)}function WA(e){return function(t,n){var i=_t(t),r=_t(n),s=e(i*r);return s===1/0?[2,0]:[s*r*dt(t),s*dt(n)]}}function _f(e){return function(t,n){var i=pn(t*t+n*n),r=e(i),s=dt(r),o=_t(r);return[Li(t*s,i*o),Mn(i&&n*s/i)]}}var GA=WA(function(e){return pn(2/(1+e))});GA.invert=_f(function(e){return 2*Mn(e/2)});function tj(){return to(GA).scale(124.75).clipAngle(180-.001)}var YA=WA(function(e){return(e=mA(e))&&e/dt(e)});YA.invert=_f(function(e){return e});function ej(){return to(YA).scale(79.4188).clipAngle(180-.001)}function Om(e,t){return[e,Xd(Lw((xe+t)/2))]}Om.invert=function(e,t){return[e,2*nc(gA(t))-xe]};function nj(){return BA(Om).scale(961/Yn)}function BA(e){var t=to(e),n=t.center,i=t.scale,r=t.translate,s=t.clipExtent,o=null,a,l,c;t.scale=function(f){return arguments.length?(i(f),u()):i()},t.translate=function(f){return arguments.length?(r(f),u()):r()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=l=c=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var f=At*i(),h=t(vH(t.rotate()).invert([0,0]));return s(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===Om?[[Math.max(h[0]-f,o),a],[Math.min(h[0]+f,l),c]]:[[o,Math.max(h[1]-f,a)],[l,Math.min(h[1]+f,c)]])}return u()}function Mh(e){return Lw((xe+e)/2)}function ij(e,t){var n=_t(e),i=e===t?dt(e):Xd(n/_t(t))/Xd(Mh(t)/Mh(e)),r=n*dp(Mh(e),i)/i;if(!i)return Om;function s(o,a){r>0?a<-xe+pt&&(a=-xe+pt):a>xe-pt&&(a=xe-pt);var l=r/dp(Mh(a),i);return[l*dt(i*o),r-l*_t(i*o)]}return s.invert=function(o,a){var l=r-a,c=ei(i)*pn(o*o+l*l),u=Li(o,Xt(l))*ei(l);return l*i<0&&(u-=At*ei(o)*ei(l)),[u/i,2*nc(dp(r/c,1/i))-xe]},s}function rj(){return Fw(ij).scale(109.5).parallels([30,30])}function fg(e,t){return[e,t]}fg.invert=fg;function sj(){return to(fg).scale(152.63)}function oj(e,t){var n=_t(e),i=e===t?dt(e):(n-_t(t))/(t-e),r=n/i+e;if(Xt(i)<pt)return fg;function s(o,a){var l=r-a,c=i*o;return[l*dt(c),r-l*_t(c)]}return s.invert=function(o,a){var l=r-a,c=Li(o,Xt(l))*ei(l);return l*i<0&&(c-=At*ei(o)*ei(l)),[c/i,r-ei(i)*pn(o*o+l*l)]},s}function aj(){return Fw(oj).scale(131.154).center([0,13.9389])}var nu=1.340264,iu=-.081106,ru=893e-6,su=.003796,hg=pn(3)/2,lj=12;function UA(e,t){var n=Mn(hg*dt(t)),i=n*n,r=i*i*i;return[e*_t(n)/(hg*(nu+3*iu*i+r*(7*ru+9*su*i))),n*(nu+iu*i+r*(ru+su*i))]}UA.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,s=0,o,a,l;s<lj&&(a=n*(nu+iu*i+r*(ru+su*i))-t,l=nu+3*iu*i+r*(7*ru+9*su*i),n-=o=a/l,i=n*n,r=i*i*i,!(Xt(o)<Vd));++s);return[hg*e*(nu+3*iu*i+r*(7*ru+9*su*i))/_t(n),Mn(dt(n)/hg)]};function cj(){return to(UA).scale(177.158)}function VA(e,t){var n=_t(t),i=_t(e)*n;return[n*dt(e)/i,dt(t)/i]}VA.invert=_f(nc);function uj(){return to(VA).scale(144.049).clipAngle(60)}function XA(e,t){return[_t(t)*dt(e),dt(t)]}XA.invert=_f(Mn);function fj(){return to(XA).scale(249.5).clipAngle(90+pt)}function HA(e,t){var n=_t(t),i=1+_t(e)*n;return[n*dt(e)/i,dt(t)/i]}HA.invert=_f(function(e){return 2*nc(e)});function hj(){return to(HA).scale(250).clipAngle(142)}function jA(e,t){return[Xd(Lw((xe+t)/2)),-e]}jA.invert=function(e,t){return[-t,2*nc(gA(e))-xe]};function dj(){var e=BA(jA),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function gj(e,t){return e.parent===t.parent?1:2}function mj(e){return e.reduce(pj,0)/e.length}function pj(e,t){return e+t.x}function yj(e){return 1+e.reduce(_j,0)}function _j(e,t){return Math.max(e,t.y)}function wj(e){for(var t;t=e.children;)e=t[0];return e}function vj(e){for(var t;t=e.children;)e=t[t.length-1];return e}function ZA(){var e=gj,t=1,n=1,i=!1;function r(s){var o,a=0;s.eachAfter(function(h){var d=h.children;d?(h.x=mj(d),h.y=yj(d)):(h.x=o?a+=e(h,o):0,h.y=0,o=h)});var l=wj(s),c=vj(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(i?function(h){h.x=(h.x-s.x)*t,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*t,h.y=(1-(s.y?h.y/s.y:1))*n})}return r.separation=function(s){return arguments.length?(e=s,r):e},r.size=function(s){return arguments.length?(i=!1,t=+s[0],n=+s[1],r):i?null:[t,n]},r.nodeSize=function(s){return arguments.length?(i=!0,t=+s[0],n=+s[1],r):i?[t,n]:null},r}function bj(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function xj(){return this.eachAfter(bj)}function Ej(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Tj(e,t){for(var n=this,i=[n],r,s,o=-1;n=i.pop();)if(e.call(t,n,++o,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function Cj(e,t){for(var n=this,i=[n],r=[],s,o,a,l=-1;n=i.pop();)if(r.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function Sj(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Mj(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Rj(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Ij(e){for(var t=this,n=Aj(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Aj(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Lj(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Oj(){return Array.from(this)}function kj(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Pj(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Fj(){var e=this,t,n=[e],i,r,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function qA(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=$j)):t===void 0&&(t=Dj);for(var n=new Ll(e),i,r=[n],s,o,a,l;i=r.pop();)if((o=t(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,a=l-1;a>=0;--a)r.push(s=o[a]=new Ll(o[a])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(KA)}function Nj(){return qA(this).eachBefore(zj)}function Dj(e){return e.children}function $j(e){return Array.isArray(e)?e[1]:null}function zj(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function KA(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ll(e){this.data=e,this.depth=this.height=0,this.parent=null}Ll.prototype=qA.prototype={constructor:Ll,count:xj,each:Ej,eachAfter:Cj,eachBefore:Tj,find:Sj,sum:Mj,sort:Rj,path:Ij,ancestors:Lj,descendants:Oj,leaves:kj,links:Pj,copy:Nj,[Symbol.iterator]:Fj};function _p(e){return e==null?null:Wj(e)}function Wj(e){if(typeof e!="function")throw new Error;return e}var Gj={depth:-1},XE={},wp={};function Yj(e){return e.id}function Bj(e){return e.parentId}function JA(){var e=Yj,t=Bj,n;function i(r){var s=Array.from(r),o=e,a=t,l,c,u,f,h,d,g,m,_=new Map;if(n!=null){const p=s.map((w,x)=>Uj(n(w,x,r))),y=p.map(HE),v=new Set(p).add("");for(const w of y)v.has(w)||(v.add(w),p.push(w),y.push(HE(w)),s.push(wp));o=(w,x)=>p[x],a=(w,x)=>y[x]}for(u=0,l=s.length;u<l;++u)c=s[u],d=s[u]=new Ll(c),(g=o(c,u,r))!=null&&(g+="")&&(m=d.id=g,_.set(m,_.has(m)?XE:d)),(g=a(c,u,r))!=null&&(g+="")&&(d.parent=g);for(u=0;u<l;++u)if(d=s[u],g=d.parent){if(h=_.get(g),!h)throw new Error("missing: "+g);if(h===XE)throw new Error("ambiguous: "+g);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(n!=null){for(;f.data===wp&&f.children.length===1;)f=f.children[0],--l;for(let p=s.length-1;p>=0&&(d=s[p],d.data===wp);--p)d.data=null}if(f.parent=Gj,f.eachBefore(function(p){p.depth=p.parent.depth+1,--l}).eachBefore(KA),f.parent=null,l>0)throw new Error("cycle");return f}return i.id=function(r){return arguments.length?(e=_p(r),i):e},i.parentId=function(r){return arguments.length?(t=_p(r),i):t},i.path=function(r){return arguments.length?(n=_p(r),i):n},i}function Uj(e){e=`${e}`;let t=e.length;return E_(e,t-1)&&!E_(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function HE(e){let t=e.length;if(t<2)return"";for(;--t>1&&!E_(e,t););return e.slice(0,t)}function E_(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Vj(e,t){return e.parent===t.parent?1:2}function vp(e){var t=e.children;return t?t[0]:e.t}function bp(e){var t=e.children;return t?t[t.length-1]:e.t}function Xj(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Hj(e){for(var t=0,n=0,i=e.children,r=i.length,s;--r>=0;)s=i[r],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function jj(e,t,n){return e.a.parent===t.parent?e.a:n}function Qh(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Qh.prototype=Object.create(Ll.prototype);function Zj(e){for(var t=new Qh(e,0),n,i=[t],r,s,o,a;n=i.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=n.children[o]=new Qh(s[o],o)),r.parent=n;return(t.parent=new Qh(null,0)).children=[t],t}function dg(){var e=Vj,t=1,n=1,i=null;function r(c){var u=Zj(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),i)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(y){y.x<f.x&&(f=y),y.x>h.x&&(h=y),y.depth>d.depth&&(d=y)});var g=f===h?1:e(f,h)/2,m=g-f.x,_=t/(h.x+g+m),p=n/(d.depth||1);c.eachBefore(function(y){y.x=(y.x+m)*_,y.y=y.depth*p})}return c}function s(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){Hj(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+e(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+e(c._,h._));c.parent.A=a(c,h,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var h=c,d=c,g=u,m=h.parent.children[0],_=h.m,p=d.m,y=g.m,v=m.m,w;g=bp(g),h=vp(h),g&&h;)m=vp(m),d=bp(d),d.a=c,w=g.z+y-h.z-_+e(g._,h._),w>0&&(Xj(jj(g,c,f),c,w),_+=w,p+=w),y+=g.m,_+=h.m,v+=m.m,p+=d.m;g&&!bp(d)&&(d.t=g,d.m+=y-p),h&&!vp(m)&&(m.t=h,m.m+=_-v,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return r.separation=function(c){return arguments.length?(e=c,r):e},r.size=function(c){return arguments.length?(i=!1,t=+c[0],n=+c[1],r):i?null:[t,n]},r.nodeSize=function(c){return arguments.length?(i=!0,t=+c[0],n=+c[1],r):i?[t,n]:null},r}const qj=1664525,Kj=1013904223,jE=1/4294967296;function Nw(e=Math.random()){let t=(0<=e&&e<1?e/jE:Math.abs(e))|0;return()=>(t=qj*t+Kj|0,jE*(t>>>0))}function ar(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function km(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const T_=Symbol("implicit");function Dw(){var e=new Jo,t=[],n=[],i=T_;function r(s){let o=e.get(s);if(o===void 0){if(i!==T_)return i;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Jo;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return Dw(t,n).unknown(i)},ar.apply(r,arguments),r}function Pm(){var e=Dw().unknown(void 0),t=e.domain,n=e.range,i=0,r=1,s,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var h=t().length,d=r<i,g=d?r:i,m=d?i:r;s=(m-g)/Math.max(1,h-l+c*2),a&&(s=Math.floor(s)),g+=(m-g-s*(h-l))*u,o=s*(1-l),a&&(g=Math.round(g),o=Math.round(o));var _=ti(h).map(function(p){return g+s*p});return n(d?_.reverse():_)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,f()):[i,r]},e.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(a=!!h,f()):a},e.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return Pm(t(),[i,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},ar.apply(f(),arguments)}function QA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return QA(t())},e}function Jj(){return QA(Pm.apply(null,arguments).paddingInner(1))}function Qj(e){return function(){return e}}function C_(e){return+e}var ZE=[0,1];function ni(e){return e}function S_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Qj(isNaN(t)?NaN:.5)}function tZ(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function eZ(e,t,n){var i=e[0],r=e[1],s=t[0],o=t[1];return r<i?(i=S_(r,i),s=n(o,s)):(i=S_(i,r),s=n(s,o)),function(a){return s(i(a))}}function nZ(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=S_(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=bm(e,a,1,i)-1;return s[l](r[l](a))}}function wf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Fm(){var e=ZE,t=ZE,n=mf,i,r,s,o=ni,a,l,c;function u(){var h=Math.min(e.length,t.length);return o!==ni&&(o=tZ(e[0],e[h-1])),a=h>2?nZ:eZ,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(e.map(i),t,n)))(i(o(h)))}return f.invert=function(h){return o(r((c||(c=a(t,e.map(i),Je)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,C_),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=Cw,u()},f.clamp=function(h){return arguments.length?(o=h?!0:ni,u()):o!==ni},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return i=h,r=d,u()}}function t3(){return Fm()(ni,ni)}function iZ(e,t,n,i){var r=By(e,t,n),s;switch(i=ku(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=hH(r,o))&&(i.precision=s),dA(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=dH(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=fH(r))&&(i.precision=s-(i.type==="%")*2);break}}return ec(i)}function vf(e){var t=e.domain;return e.ticks=function(n){var i=t();return Bs(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return iZ(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,o=i[r],a=i[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);u-- >0;){if(c=Ru(o,a,n),c===l)return i[r]=o,i[s]=a,t(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function $w(){var e=t3();return e.copy=function(){return wf(e,$w())},ar.apply(e,arguments),vf(e)}function e3(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,C_),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return e3(e).unknown(t)},e=arguments.length?Array.from(e,C_):[0,1],vf(n)}function n3(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],s=e[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),e[n]=t.floor(r),e[i]=t.ceil(s),e}function qE(e){return Math.log(e)}function KE(e){return Math.exp(e)}function rZ(e){return-Math.log(-e)}function sZ(e){return-Math.exp(-e)}function oZ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function aZ(e){return e===10?oZ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lZ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function JE(e){return(t,n)=>-e(-t,n)}function i3(e){const t=e(qE,KE),n=t.domain;let i=10,r,s;function o(){return r=lZ(i),s=aZ(i),n()[0]<0?(r=JE(r),s=JE(s),e(rZ,sZ)):e(qE,KE),t}return t.base=function(a){return arguments.length?(i=+a,o()):i},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=r(c),d=r(u),g,m;const _=a==null?10:+a;let p=[];if(!(i%1)&&d-h<_){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(g=1;g<i;++g)if(m=h<0?g/s(-h):g*s(h),!(m<c)){if(m>u)break;p.push(m)}}else for(;h<=d;++h)for(g=i-1;g>=1;--g)if(m=h>0?g/s(-h):g*s(h),!(m<c)){if(m>u)break;p.push(m)}p.length*2<_&&(p=Bs(c,u,_))}else p=Bs(h,d,Math.min(d-h,_)).map(s);return f?p.reverse():p},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=ku(l)).precision==null&&(l.trim=!0),l=ec(l)),a===1/0)return l;const c=Math.max(1,i*a/t.ticks().length);return u=>{let f=u/s(Math.round(r(u)));return f*i<i-.5&&(f*=i),f<=c?l(u):""}},t.nice=()=>n(n3(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),t}function r3(){const e=i3(Fm()).domain([1,10]);return e.copy=()=>wf(e,r3()).base(e.base()),ar.apply(e,arguments),e}function QE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function tT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function s3(e){var t=1,n=e(QE(t),tT(t));return n.constant=function(i){return arguments.length?e(QE(t=+i),tT(t)):t},vf(n)}function o3(){var e=s3(Fm());return e.copy=function(){return wf(e,o3()).constant(e.constant())},ar.apply(e,arguments)}function eT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function cZ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function uZ(e){return e<0?-e*e:e*e}function a3(e){var t=e(ni,ni),n=1;function i(){return n===1?e(ni,ni):n===.5?e(cZ,uZ):e(eT(n),eT(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},vf(t)}function l3(){var e=a3(Fm());return e.copy=function(){return wf(e,l3()).exponent(e.exponent())},ar.apply(e,arguments),e}function c3(){var e=[],t=[],n=[],i;function r(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=LY(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?i:t[bm(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(pe),r()},s.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return c3().domain(e).range(t).unknown(i)},ar.apply(s,arguments)}function u3(){var e=[.5],t=[0,1],n,i=1;function r(s){return s!=null&&s<=s?t[bm(e,s,0,i)]:n}return r.domain=function(s){return arguments.length?(e=Array.from(s),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(s){return arguments.length?(t=Array.from(s),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return u3().domain(e).range(t).unknown(n)},ar.apply(r,arguments)}const xp=new Date,Ep=new Date;function Pe(e,t,n,i){function r(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(e(s=new Date(+s)),s),r.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),e(s);while(c<s&&s<o);return l},r.filter=s=>Pe(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(r.count=(s,o)=>(xp.setTime(+s),Ep.setTime(+o),e(xp),e(Ep),Math.floor(n(xp,Ep))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const gg=Pe(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Pe(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gg);gg.range;const Or=1e3,ii=Or*60,kr=ii*60,Xr=kr*24,zw=Xr*7,nT=Xr*30,Tp=Xr*365,Zi=Pe(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Or)},(e,t)=>(t-e)/Or,e=>e.getUTCSeconds());Zi.range;const Nm=Pe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Or)},(e,t)=>{e.setTime(+e+t*ii)},(e,t)=>(t-e)/ii,e=>e.getMinutes());Nm.range;const bf=Pe(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ii)},(e,t)=>(t-e)/ii,e=>e.getUTCMinutes());bf.range;const Dm=Pe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Or-e.getMinutes()*ii)},(e,t)=>{e.setTime(+e+t*kr)},(e,t)=>(t-e)/kr,e=>e.getHours());Dm.range;const xf=Pe(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*kr)},(e,t)=>(t-e)/kr,e=>e.getUTCHours());xf.range;const ga=Pe(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ii)/Xr,e=>e.getDate()-1);ga.range;const $m=Pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xr,e=>e.getUTCDate()-1);$m.range;const zm=Pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xr,e=>Math.floor(e/Xr));zm.range;function ma(e){return Pe(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ii)/zw)}const Ol=ma(0),Fu=ma(1),f3=ma(2),h3=ma(3),sa=ma(4),d3=ma(5),g3=ma(6);Ol.range;Fu.range;f3.range;h3.range;sa.range;d3.range;g3.range;function pa(e){return Pe(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/zw)}const kl=pa(0),Nu=pa(1),m3=pa(2),p3=pa(3),oa=pa(4),y3=pa(5),_3=pa(6);kl.range;Nu.range;m3.range;p3.range;oa.range;y3.range;_3.range;const Ef=Pe(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ef.range;const Tf=Pe(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Tf.range;const Oi=Pe(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Oi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pe(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Oi.range;const ki=Pe(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ki.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pe(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ki.range;function w3(e,t,n,i,r,s){const o=[[Zi,1,Or],[Zi,5,5*Or],[Zi,15,15*Or],[Zi,30,30*Or],[s,1,ii],[s,5,5*ii],[s,15,15*ii],[s,30,30*ii],[r,1,kr],[r,3,3*kr],[r,6,6*kr],[r,12,12*kr],[i,1,Xr],[i,2,2*Xr],[n,1,zw],[t,1,nT],[t,3,3*nT],[e,1,Tp]];function a(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),g=d?d.range(c,+u+1):[];return h?g.reverse():g}function l(c,u,f){const h=Math.abs(u-c)/f,d=vm(([,,_])=>_).right(o,h);if(d===o.length)return e.every(By(c/Tp,u/Tp,f));if(d===0)return gg.every(Math.max(By(c,u,f),1));const[g,m]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return g.every(m)}return[a,l]}const[fZ,v3]=w3(ki,Tf,kl,zm,xf,bf),[hZ,dZ]=w3(Oi,Ef,Ol,ga,Dm,Nm);function Cp(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Sp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function gZ(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Mc(r),u=Rc(r),f=Mc(s),h=Rc(s),d=Mc(o),g=Rc(o),m=Mc(a),_=Rc(a),p=Mc(l),y=Rc(l),v={a:N,A:W,b:j,B:V,c:null,d:lT,e:lT,f:DZ,g:HZ,G:ZZ,H:PZ,I:FZ,j:NZ,L:b3,m:$Z,M:zZ,p:Z,q:z,Q:fT,s:hT,S:WZ,u:GZ,U:YZ,V:BZ,w:UZ,W:VZ,x:null,X:null,y:XZ,Y:jZ,Z:qZ,"%":uT},w={a:Q,A:nt,b:st,B:ot,c:null,d:cT,e:cT,f:tq,g:uq,G:hq,H:KZ,I:JZ,j:QZ,L:E3,m:eq,M:nq,p:$,q:U,Q:fT,s:hT,S:iq,u:rq,U:sq,V:oq,w:aq,W:lq,x:null,X:null,y:cq,Y:fq,Z:dq,"%":uT},x={a:S,A:R,b:M,B:k,c:O,d:oT,e:oT,f:AZ,g:sT,G:rT,H:aT,I:aT,j:SZ,L:IZ,m:CZ,M:MZ,p:I,q:TZ,Q:OZ,s:kZ,S:RZ,u:wZ,U:vZ,V:bZ,w:_Z,W:xZ,x:A,X:P,y:sT,Y:rT,Z:EZ,"%":LZ};v.x=b(n,v),v.X=b(i,v),v.c=b(t,v),w.x=b(n,w),w.X=b(i,w),w.c=b(t,w);function b(D,X){return function(K){var T=[],L=-1,F=0,Y=D.length,B,H,rt;for(K instanceof Date||(K=new Date(+K));++L<Y;)D.charCodeAt(L)===37&&(T.push(D.slice(F,L)),(H=iT[B=D.charAt(++L)])!=null?B=D.charAt(++L):H=B==="e"?" ":"0",(rt=X[B])&&(B=rt(K,H)),T.push(B),F=L+1);return T.push(D.slice(F,L)),T.join("")}}function E(D,X){return function(K){var T=Sc(1900,void 0,1),L=C(T,D,K+="",0),F,Y;if(L!=K.length)return null;if("Q"in T)return new Date(T.Q);if("s"in T)return new Date(T.s*1e3+("L"in T?T.L:0));if(X&&!("Z"in T)&&(T.Z=0),"p"in T&&(T.H=T.H%12+T.p*12),T.m===void 0&&(T.m="q"in T?T.q:0),"V"in T){if(T.V<1||T.V>53)return null;"w"in T||(T.w=1),"Z"in T?(F=Sp(Sc(T.y,0,1)),Y=F.getUTCDay(),F=Y>4||Y===0?Nu.ceil(F):Nu(F),F=$m.offset(F,(T.V-1)*7),T.y=F.getUTCFullYear(),T.m=F.getUTCMonth(),T.d=F.getUTCDate()+(T.w+6)%7):(F=Cp(Sc(T.y,0,1)),Y=F.getDay(),F=Y>4||Y===0?Fu.ceil(F):Fu(F),F=ga.offset(F,(T.V-1)*7),T.y=F.getFullYear(),T.m=F.getMonth(),T.d=F.getDate()+(T.w+6)%7)}else("W"in T||"U"in T)&&("w"in T||(T.w="u"in T?T.u%7:"W"in T?1:0),Y="Z"in T?Sp(Sc(T.y,0,1)).getUTCDay():Cp(Sc(T.y,0,1)).getDay(),T.m=0,T.d="W"in T?(T.w+6)%7+T.W*7-(Y+5)%7:T.w+T.U*7-(Y+6)%7);return"Z"in T?(T.H+=T.Z/100|0,T.M+=T.Z%100,Sp(T)):Cp(T)}}function C(D,X,K,T){for(var L=0,F=X.length,Y=K.length,B,H;L<F;){if(T>=Y)return-1;if(B=X.charCodeAt(L++),B===37){if(B=X.charAt(L++),H=x[B in iT?X.charAt(L++):B],!H||(T=H(D,K,T))<0)return-1}else if(B!=K.charCodeAt(T++))return-1}return T}function I(D,X,K){var T=c.exec(X.slice(K));return T?(D.p=u.get(T[0].toLowerCase()),K+T[0].length):-1}function S(D,X,K){var T=d.exec(X.slice(K));return T?(D.w=g.get(T[0].toLowerCase()),K+T[0].length):-1}function R(D,X,K){var T=f.exec(X.slice(K));return T?(D.w=h.get(T[0].toLowerCase()),K+T[0].length):-1}function M(D,X,K){var T=p.exec(X.slice(K));return T?(D.m=y.get(T[0].toLowerCase()),K+T[0].length):-1}function k(D,X,K){var T=m.exec(X.slice(K));return T?(D.m=_.get(T[0].toLowerCase()),K+T[0].length):-1}function O(D,X,K){return C(D,t,X,K)}function A(D,X,K){return C(D,n,X,K)}function P(D,X,K){return C(D,i,X,K)}function N(D){return o[D.getDay()]}function W(D){return s[D.getDay()]}function j(D){return l[D.getMonth()]}function V(D){return a[D.getMonth()]}function Z(D){return r[+(D.getHours()>=12)]}function z(D){return 1+~~(D.getMonth()/3)}function Q(D){return o[D.getUTCDay()]}function nt(D){return s[D.getUTCDay()]}function st(D){return l[D.getUTCMonth()]}function ot(D){return a[D.getUTCMonth()]}function $(D){return r[+(D.getUTCHours()>=12)]}function U(D){return 1+~~(D.getUTCMonth()/3)}return{format:function(D){var X=b(D+="",v);return X.toString=function(){return D},X},parse:function(D){var X=E(D+="",!1);return X.toString=function(){return D},X},utcFormat:function(D){var X=b(D+="",w);return X.toString=function(){return D},X},utcParse:function(D){var X=E(D+="",!0);return X.toString=function(){return D},X}}}var iT={"-":"",_:" ",0:"0"},Ve=/^\s*\d+/,mZ=/^%/,pZ=/[\\^$*+?|[\]().{}]/g;function Bt(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function yZ(e){return e.replace(pZ,"\\$&")}function Mc(e){return new RegExp("^(?:"+e.map(yZ).join("|")+")","i")}function Rc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function _Z(e,t,n){var i=Ve.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function wZ(e,t,n){var i=Ve.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function vZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function bZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function xZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function rT(e,t,n){var i=Ve.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function sT(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function EZ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function TZ(e,t,n){var i=Ve.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function CZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function oT(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function SZ(e,t,n){var i=Ve.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function aT(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function MZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function RZ(e,t,n){var i=Ve.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function IZ(e,t,n){var i=Ve.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function AZ(e,t,n){var i=Ve.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function LZ(e,t,n){var i=mZ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function OZ(e,t,n){var i=Ve.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function kZ(e,t,n){var i=Ve.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function lT(e,t){return Bt(e.getDate(),t,2)}function PZ(e,t){return Bt(e.getHours(),t,2)}function FZ(e,t){return Bt(e.getHours()%12||12,t,2)}function NZ(e,t){return Bt(1+ga.count(Oi(e),e),t,3)}function b3(e,t){return Bt(e.getMilliseconds(),t,3)}function DZ(e,t){return b3(e,t)+"000"}function $Z(e,t){return Bt(e.getMonth()+1,t,2)}function zZ(e,t){return Bt(e.getMinutes(),t,2)}function WZ(e,t){return Bt(e.getSeconds(),t,2)}function GZ(e){var t=e.getDay();return t===0?7:t}function YZ(e,t){return Bt(Ol.count(Oi(e)-1,e),t,2)}function x3(e){var t=e.getDay();return t>=4||t===0?sa(e):sa.ceil(e)}function BZ(e,t){return e=x3(e),Bt(sa.count(Oi(e),e)+(Oi(e).getDay()===4),t,2)}function UZ(e){return e.getDay()}function VZ(e,t){return Bt(Fu.count(Oi(e)-1,e),t,2)}function XZ(e,t){return Bt(e.getFullYear()%100,t,2)}function HZ(e,t){return e=x3(e),Bt(e.getFullYear()%100,t,2)}function jZ(e,t){return Bt(e.getFullYear()%1e4,t,4)}function ZZ(e,t){var n=e.getDay();return e=n>=4||n===0?sa(e):sa.ceil(e),Bt(e.getFullYear()%1e4,t,4)}function qZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Bt(t/60|0,"0",2)+Bt(t%60,"0",2)}function cT(e,t){return Bt(e.getUTCDate(),t,2)}function KZ(e,t){return Bt(e.getUTCHours(),t,2)}function JZ(e,t){return Bt(e.getUTCHours()%12||12,t,2)}function QZ(e,t){return Bt(1+$m.count(ki(e),e),t,3)}function E3(e,t){return Bt(e.getUTCMilliseconds(),t,3)}function tq(e,t){return E3(e,t)+"000"}function eq(e,t){return Bt(e.getUTCMonth()+1,t,2)}function nq(e,t){return Bt(e.getUTCMinutes(),t,2)}function iq(e,t){return Bt(e.getUTCSeconds(),t,2)}function rq(e){var t=e.getUTCDay();return t===0?7:t}function sq(e,t){return Bt(kl.count(ki(e)-1,e),t,2)}function T3(e){var t=e.getUTCDay();return t>=4||t===0?oa(e):oa.ceil(e)}function oq(e,t){return e=T3(e),Bt(oa.count(ki(e),e)+(ki(e).getUTCDay()===4),t,2)}function aq(e){return e.getUTCDay()}function lq(e,t){return Bt(Nu.count(ki(e)-1,e),t,2)}function cq(e,t){return Bt(e.getUTCFullYear()%100,t,2)}function uq(e,t){return e=T3(e),Bt(e.getUTCFullYear()%100,t,2)}function fq(e,t){return Bt(e.getUTCFullYear()%1e4,t,4)}function hq(e,t){var n=e.getUTCDay();return e=n>=4||n===0?oa(e):oa.ceil(e),Bt(e.getUTCFullYear()%1e4,t,4)}function dq(){return"+0000"}function uT(){return"%"}function fT(e){return+e}function hT(e){return Math.floor(+e/1e3)}var Oa,Ww,Cf;gq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gq(e){return Oa=gZ(e),Ww=Oa.format,Oa.parse,Cf=Oa.utcFormat,Oa.utcParse,Oa}function mq(e){return new Date(e)}function pq(e){return e instanceof Date?+e:+new Date(+e)}function Gw(e,t,n,i,r,s,o,a,l,c){var u=t3(),f=u.invert,h=u.domain,d=c(".%L"),g=c(":%S"),m=c("%I:%M"),_=c("%I %p"),p=c("%a %d"),y=c("%b %d"),v=c("%B"),w=c("%Y");function x(b){return(l(b)<b?d:a(b)<b?g:o(b)<b?m:s(b)<b?_:i(b)<b?r(b)<b?p:y:n(b)<b?v:w)(b)}return u.invert=function(b){return new Date(f(b))},u.domain=function(b){return arguments.length?h(Array.from(b,pq)):h().map(mq)},u.ticks=function(b){var E=h();return e(E[0],E[E.length-1],b??10)},u.tickFormat=function(b,E){return E==null?x:c(E)},u.nice=function(b){var E=h();return(!b||typeof b.range!="function")&&(b=t(E[0],E[E.length-1],b??10)),b?h(n3(E,b)):u},u.copy=function(){return wf(u,Gw(e,t,n,i,r,s,o,a,l,c))},u}function yq(){return ar.apply(Gw(hZ,dZ,Oi,Ef,Ol,ga,Dm,Nm,Zi,Ww).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _q(){return ar.apply(Gw(fZ,v3,ki,Tf,kl,$m,xf,bf,Zi,Cf).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Wm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Gm(){var e=0,t=.5,n=1,i=1,r,s,o,a,l,c=ni,u,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-s)*(i*m<i*s?a:l),c(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t,n]=m,r=u(e=+e),s=u(t=+t),o=u(n=+n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d):[e,t,n]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(c=m,d):c};function g(m){return function(_){var p,y,v;return arguments.length?([p,y,v]=_,c=Rm(m,[p,y,v]),d):[c(0),c(.5),c(1)]}}return d.range=g(mf),d.rangeRound=g(Cw),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return u=m,r=m(e),s=m(t),o=m(n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d}}function C3(){var e=vf(Gm()(ni));return e.copy=function(){return Wm(e,C3())},km.apply(e,arguments)}function S3(){var e=i3(Gm()).domain([.1,1,10]);return e.copy=function(){return Wm(e,S3()).base(e.base())},km.apply(e,arguments)}function M3(){var e=s3(Gm());return e.copy=function(){return Wm(e,M3()).constant(e.constant())},km.apply(e,arguments)}function R3(){var e=a3(Gm());return e.copy=function(){return Wm(e,R3()).exponent(e.exponent())},km.apply(e,arguments)}function Mt(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const wq=Mt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),vq=Mt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),bq=Mt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),xq=Mt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Eq=Mt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Tq=Mt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Cq=Mt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Sq=Mt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Mq=Mt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Rq=Mt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ne=e=>XU(e[e.length-1]);var I3=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Mt);const A3=ne(I3);var L3=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Mt);const O3=ne(L3);var k3=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Mt);const P3=ne(k3);var F3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Mt);const N3=ne(F3);var M_=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Mt);const mg=ne(M_);var D3=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Mt);const $3=ne(D3);var R_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Mt);const pg=ne(R_);var z3=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Mt);const W3=ne(z3);var G3=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Mt);const Y3=ne(G3);var B3=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Mt);const U3=ne(B3);var V3=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Mt);const X3=ne(V3);var H3=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Mt);const j3=ne(H3);var Z3=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Mt);const q3=ne(Z3);var K3=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Mt);const J3=ne(K3);var Q3=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Mt);const t6=ne(Q3);var e6=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Mt);const n6=ne(e6);var i6=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Mt);const r6=ne(i6);var s6=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Mt);const o6=ne(s6);var a6=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Mt);const l6=ne(a6);var c6=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Mt);const u6=ne(c6);var f6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Mt);const h6=ne(f6);var d6=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Mt);const g6=ne(d6);var m6=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Mt);const p6=ne(m6);var y6=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Mt);const _6=ne(y6);var w6=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Mt);const v6=ne(w6);var b6=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Mt);const x6=ne(b6);var E6=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Mt);const T6=ne(E6);function C6(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const S6=Sw(sr(300,.5,0),sr(-240,.5,1));var M6=Sw(sr(-100,.75,.35),sr(80,1.5,.8)),R6=Sw(sr(260,.75,.35),sr(80,1.5,.8)),Rh=sr();function I6(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Rh.h=360*e-100,Rh.s=1.5-1.5*t,Rh.l=.8-.9*t,Rh+""}var Ih=rr(),Iq=Math.PI/3,Aq=Math.PI*2/3;function A6(e){var t;return e=(.5-e)*Math.PI,Ih.r=255*(t=Math.sin(e))*t,Ih.g=255*(t=Math.sin(e+Iq))*t,Ih.b=255*(t=Math.sin(e+Aq))*t,Ih+""}function L6(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Ym(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const O6=Ym(Mt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var k6=Ym(Mt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),P6=Ym(Mt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),F6=Ym(Mt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ze(e){return function(){return e}}const N6=Math.cos,Yw=Math.min,yg=Math.sin,Fe=Math.sqrt,dT=1e-12,_g=Math.PI,Bm=2*_g;function D6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new uA(t)}function $6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function z6(e){this._context=e}z6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Sf(e){return new z6(e)}function W6(e){return e[0]}function G6(e){return e[1]}function Y6(e,t){var n=ze(!0),i=null,r=Sf,s=null,o=D6(a);e=typeof e=="function"?e:e===void 0?W6:ze(e),t=typeof t=="function"?t:t===void 0?G6:ze(t);function a(l){var c,u=(l=$6(l)).length,f,h=!1,d;for(i==null&&(s=r(d=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,c,l),+t(f,c,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:ze(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:ze(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ze(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),a):i},a}function Bw(e,t,n){var i=null,r=ze(!0),s=null,o=Sf,a=null,l=D6(c);e=typeof e=="function"?e:e===void 0?W6:ze(+e),t=typeof t=="function"?t:ze(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?G6:ze(+n);function c(f){var h,d,g,m=(f=$6(f)).length,_,p=!1,y,v=new Array(m),w=new Array(m);for(s==null&&(a=o(y=l())),h=0;h<=m;++h){if(!(h<m&&r(_=f[h],h,f))===p)if(p=!p)d=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=h-1;g>=d;--g)a.point(v[g],w[g]);a.lineEnd(),a.areaEnd()}p&&(v[h]=+e(_,h,f),w[h]=+t(_,h,f),a.point(i?+i(_,h,f):v[h],n?+n(_,h,f):w[h]))}if(y)return a=null,y+""||null}function u(){return Y6().defined(r).curve(o).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:ze(+f),i=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ze(+f),c):e},c.x1=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:ze(+f),c):i},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:ze(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ze(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ze(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(i).y(t)},c.defined=function(f){return arguments.length?(r=typeof f=="function"?f:ze(!!f),c):r},c.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),c):o},c.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),c):s},c}class B6{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Lq(e){return new B6(e,!0)}function Oq(e){return new B6(e,!1)}const kq=Fe(3),U6={draw(e,t){const n=Fe(t+Yw(t/28,.75))*.59436,i=n/2,r=i*kq;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-r,-i),e.lineTo(r,i),e.moveTo(-r,i),e.lineTo(r,-i)}},Du={draw(e,t){const n=Fe(t/_g);e.moveTo(n,0),e.arc(0,0,n,0,Bm)}},V6={draw(e,t){const n=Fe(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},X6=Fe(1/3),Pq=X6*2,H6={draw(e,t){const n=Fe(t/Pq),i=n*X6;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},j6={draw(e,t){const n=Fe(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Z6={draw(e,t){const n=Fe(t-Yw(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},q6={draw(e,t){const n=Fe(t),i=-n/2;e.rect(i,i,n,n)}},K6={draw(e,t){const n=Fe(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},Fq=.8908130915292852,J6=yg(_g/10)/yg(7*_g/10),Nq=yg(Bm/10)*J6,Dq=-N6(Bm/10)*J6,Q6={draw(e,t){const n=Fe(t*Fq),i=Nq*n,r=Dq*n;e.moveTo(0,-n),e.lineTo(i,r);for(let s=1;s<5;++s){const o=Bm*s/5,a=N6(o),l=yg(o);e.lineTo(l*n,-a*n),e.lineTo(a*i-l*r,l*i+a*r)}e.closePath()}},Mp=Fe(3),tL={draw(e,t){const n=-Fe(t/(Mp*3));e.moveTo(0,n*2),e.lineTo(-Mp*n,-n),e.lineTo(Mp*n,-n),e.closePath()}},$q=Fe(3),eL={draw(e,t){const n=Fe(t)*.6824,i=n/2,r=n*$q/2;e.moveTo(0,-n),e.lineTo(r,i),e.lineTo(-r,i),e.closePath()}},qn=-.5,Kn=Fe(3)/2,I_=1/Fe(12),zq=(I_/2+1)*3,nL={draw(e,t){const n=Fe(t/zq),i=n/2,r=n*I_,s=i,o=n*I_+n,a=-s,l=o;e.moveTo(i,r),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(qn*i-Kn*r,Kn*i+qn*r),e.lineTo(qn*s-Kn*o,Kn*s+qn*o),e.lineTo(qn*a-Kn*l,Kn*a+qn*l),e.lineTo(qn*i+Kn*r,qn*r-Kn*i),e.lineTo(qn*s+Kn*o,qn*o-Kn*s),e.lineTo(qn*a+Kn*l,qn*l-Kn*a),e.closePath()}},iL={draw(e,t){const n=Fe(t-Yw(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},Wq=[Du,V6,H6,q6,Q6,tL,nL],Gq=[Du,Z6,iL,eL,U6,K6,j6];function Vs(){}function wg(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Um(e){this._context=e}Um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Yq(e){return new Um(e)}function rL(e){this._context=e}rL.prototype={areaStart:Vs,areaEnd:Vs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:wg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bq(e){return new rL(e)}function sL(e){this._context=e}sL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:wg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Uq(e){return new sL(e)}function oL(e,t){this._basis=new Um(e),this._beta=t}oL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],s=e[n]-i,o=t[n]-r,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(i+l*s),this._beta*t[a]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Vq=function e(t){function n(i){return t===1?new Um(i):new oL(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function vg(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Uw(e,t){this._context=e,this._k=(1-t)/6}Uw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vg(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:vg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xq=function e(t){function n(i){return new Uw(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Vw(e,t){this._context=e,this._k=(1-t)/6}Vw.prototype={areaStart:Vs,areaEnd:Vs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:vg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hq=function e(t){function n(i){return new Vw(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Xw(e,t){this._context=e,this._k=(1-t)/6}Xw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jq=function e(t){function n(i){return new Xw(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Hw(e,t,n){var i=e._x1,r=e._y1,s=e._x2,o=e._y2;if(e._l01_a>dT){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>dT){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(i,r,s,o,e._x2,e._y2)}function aL(e,t){this._context=e,this._alpha=t}aL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Hw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zq=function e(t){function n(i){return t?new aL(i,t):new Uw(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function lL(e,t){this._context=e,this._alpha=t}lL.prototype={areaStart:Vs,areaEnd:Vs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Hw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qq=function e(t){function n(i){return t?new lL(i,t):new Vw(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function cL(e,t){this._context=e,this._alpha=t}cL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Hw(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Kq=function e(t){function n(i){return t?new cL(i,t):new Xw(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function uL(e){this._context=e}uL.prototype={areaStart:Vs,areaEnd:Vs,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Jq(e){return new uL(e)}function gT(e){return e<0?-1:1}function mT(e,t,n){var i=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(i||r<0&&-0),o=(n-e._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(gT(s)+gT(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function pT(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Rp(e,t,n){var i=e._x0,r=e._y0,s=e._x1,o=e._y1,a=(s-i)/3;e._context.bezierCurveTo(i+a,r+a*t,s-a,o-a*n,s,o)}function bg(e){this._context=e}bg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rp(this,this._t0,pT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Rp(this,pT(this,n=mT(this,e,t)),n);break;default:Rp(this,this._t0,n=mT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function fL(e){this._context=new hL(e)}(fL.prototype=Object.create(bg.prototype)).point=function(e,t){bg.prototype.point.call(this,t,e)};function hL(e){this._context=e}hL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,s){this._context.bezierCurveTo(t,e,i,n,s,r)}};function Qq(e){return new bg(e)}function tK(e){return new fL(e)}function dL(e){this._context=e}dL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=yT(e),r=yT(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yT(e){var t,n=e.length-1,i,r=new Array(n),s=new Array(n),o=new Array(n);for(r[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/s[t-1],s[t]-=i,o[t]-=i*o[t-1];for(r[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)r[t]=(o[t]-r[t+1])/s[t];for(s[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function eK(e){return new dL(e)}function Vm(e,t){this._context=e,this._t=t}Vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function nK(e){return new Vm(e,.5)}function iK(e){return new Vm(e,0)}function rK(e){return new Vm(e,1)}function jc(e,t,n){this.k=e,this.x=t,this.y=n}jc.prototype={constructor:jc,scale:function(e){return e===1?this:new jc(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new jc(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};jc.prototype;function gn(e){return e!=null&&!Number.isNaN(e)}function ai(e,t){return+gn(t)-+gn(e)||pe(e,t)}function xg(e,t){return+gn(t)-+gn(e)||Ko(e,t)}function jw(e){return e!=null&&`${e}`!=""}function Eg(e){return isFinite(e)?e:NaN}function Wr(e){return e>0&&isFinite(e)?e:NaN}function Xm(e){return e<0&&isFinite(e)?e:NaN}function sK(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${oK(e.getUTCFullYear())}-${Sr(e.getUTCMonth()+1,2)}-${Sr(e.getUTCDate(),2)}${n||i||r||s?`T${Sr(n,2)}:${Sr(i,2)}${r||s?`:${Sr(r,2)}${s?`.${Sr(s,3)}`:""}`:""}Z`:""}`}function oK(e){return e<0?`-${Sr(-e,6)}`:e>9999?`+${Sr(e,6)}`:Sr(e,4)}function Sr(e,t){return`${e}`.padStart(t,"0")}const aK=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function gL(e,t){return aK.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Ha=1e3,Lo=Ha*60,Oo=Lo*60,Hr=Oo*24,zi=Hr*7,Vo=Hr*30,ys=Hr*365,Ip=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ha],["5 seconds",5*Ha],["15 seconds",15*Ha],["30 seconds",30*Ha],["minute",Lo],["5 minutes",5*Lo],["15 minutes",15*Lo],["30 minutes",30*Lo],["hour",Oo],["3 hours",3*Oo],["6 hours",6*Oo],["12 hours",12*Oo],["day",Hr],["2 days",2*Hr],["week",zi],["2 weeks",2*zi],["month",Vo],["3 months",3*Vo],["6 months",6*Vo],["year",ys],["2 years",2*ys],["5 years",5*ys],["10 years",10*ys],["20 years",20*ys],["50 years",50*ys],["100 years",100*ys]],Zw=new Map([["second",Ha],["minute",Lo],["hour",Oo],["day",Hr],["monday",zi],["tuesday",zi],["wednesday",zi],["thursday",zi],["friday",zi],["saturday",zi],["sunday",zi],["week",zi],["month",Vo],["year",ys]]),mL=new Map([["second",Zi],["minute",Nm],["hour",Dm],["day",ga],["monday",Fu],["tuesday",f3],["wednesday",h3],["thursday",sa],["friday",d3],["saturday",g3],["sunday",Ol],["week",Ol],["month",Ef],["year",Oi]]),pL=new Map([["second",Zi],["minute",bf],["hour",xf],["day",zm],["monday",Nu],["tuesday",m3],["wednesday",p3],["thursday",oa],["friday",y3],["saturday",_3],["sunday",kl],["week",kl],["month",Tf],["year",ki]]),Mf=Symbol("intervalDuration"),Hm=Symbol("intervalType");for(const[e,t]of mL)t[Mf]=Zw.get(e),t[Hm]="time";for(const[e,t]of pL)t[Mf]=Zw.get(e),t[Hm]="utc";const lK=[["year",ki,"utc"],["year",Oi,"time"],["month",Tf,"utc"],["month",Ef,"time"],["day",zm,"utc",6*Vo],["day",ga,"time",6*Vo],["hour",xf,"utc",3*Hr],["minute",bf,"utc",6*Oo],["second",Zi,"utc",30*Lo]];function yL(e,t,n){let i=`${e}`.toLowerCase();i.endsWith("s")&&(i=i.slice(0,-1));let r=1;const s=/^(?:(\d+)\s+)/.exec(i);switch(s&&(i=i.slice(s[0].length),r=+s[1]),i){case"quarter":i="month",r*=3;break;case"half":i="month",r*=6;break}let o=t.get(i);if(!o)throw new Error(`unknown interval: ${e}`);if(r>1){if(!o.every)throw new Error(`non-periodic interval: ${i}`);o=o.every(r),o[Mf]=Zw.get(i)*r,o[Hm]=n}return o}function _L(e){return yL(e,mL,"time")}function qw(e){return yL(e,pL,"utc")}function _T(e,t){if(!(t>1))return;const n=e[Mf];if(!Ip.some(([,r])=>r===n)||n%Hr===0&&Hr<n&&n<Vo)return;const[i]=Ip[vm(([,r])=>Math.log(r)).center(Ip,Math.log(n*t))];return(e[Hm]==="time"?_L:qw)(i)}function wT(e,t,n){const i=t==="time"?Ww:Cf;if(n==null)return i(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=cK(n);switch(e){case"millisecond":return ka(i(".%L"),i(":%M:%S"),r);case"second":return ka(i(":%S"),i("%-I:%M"),r);case"minute":return ka(i("%-I:%M"),i("%p"),r);case"hour":return ka(i("%-I %p"),i("%b %-d"),r);case"day":return ka(i("%-d"),i("%b"),r);case"month":return ka(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function cK(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function uK(e,t){const n=Ue(PY(e,(i,r)=>Math.abs(r-i)));if(n<1e3)return wT("millisecond","utc",t);for(const[i,r,s,o]of lK){if(n>o||i==="hour"&&!n)break;if(e.every(a=>r.floor(a)>=a))return wT(i,s,t)}}function ka(e,t,n){return(i,r,s)=>{const o=e(i,r),a=t(i,r),l=r-Nl(s);return r!==l&&s[l]!==void 0&&a===t(s[l],l)?o:n(o,a)}}const Pl=Object.getPrototypeOf(Uint8Array),fK=Object.prototype.toString,wL=Symbol("reindex");function kt(e,t,n){const i=typeof t;return i==="string"?vT(e,vL(t),n):i==="function"?vT(e,t,n):i==="number"||t instanceof Date||i==="boolean"?se(e,Bn(t),n):typeof(t==null?void 0:t.transform)=="function"?bT(t.transform(e),n):hK(bT(t,n),e==null?void 0:e[wL])}function hK(e,t){return t?Zm(e,t):e}function vT(e,t,n){return se(e,(n==null?void 0:n.prototype)instanceof Pl?dK(t):t,n)}function bT(e,t){return t===void 0?In(e):e instanceof t?e:t.prototype instanceof Pl&&!(e instanceof Pl)?t.from(e,Qw):t.from(e)}function dK(e){return(t,n)=>Qw(e(t,n))}const ou=[null],vL=e=>t=>t[e],Ln={transform:Qr},wt={transform:e=>e},Kw=()=>1,gK=()=>!0,en=e=>e==null?e:`${e}`,Nt=e=>e==null?e:+e,Rf=e=>e?e[0]:void 0,$u=e=>e?e[1]:void 0,mK=e=>e?e[2]:void 0,Bn=e=>()=>e;function Jw(e){const t=+`${e}`.slice(1)/100;return(n,i)=>Us(n,t,i)}function Tn(e){return e instanceof Pl?e:se(e,Qw,Float64Array)}function Qw(e){return e==null?NaN:Number(e)}function pK(e){return se(e,bL)}function bL(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?gL(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Rn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:Af(e)?[void 0,e]:[e,void 0]}function Ce(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function xL(e,t,n){if(e!=null)return Un(e,t,n)}function Un(e,t,n){const i=`${e}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${t}: ${e}`);return i}function In(e){return e==null||e instanceof Array||e instanceof Pl?e:Array.from(e)}function se(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function zu(e,t=Array){return e instanceof t?e.slice():t.from(e)}function EL({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function TL({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function jm(e){return EL(e)||TL(e)||e.interval!==void 0}function li(e){return(e==null?void 0:e.toString)===fK}function Xo(e){return li(e)&&(e.type!==void 0||e.domain!==void 0)}function Gi(e){return li(e)&&typeof e.transform!="function"}function Xs(e){return Gi(e)&&e.value===void 0&&e.channel===void 0}function CL(e,t,n,i=wt){return t===void 0&&n===void 0?(t=0,n=e===void 0?i:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Di(e,t){return e===void 0&&t===void 0?[Rf,$u]:[e,t]}function eo({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Rn(t)),e===void 0&&([e]=Rn(n)),e}function Qr(e){const t=e.length,n=new Uint32Array(t);for(let i=0;i<t;++i)n[i]=i;return n}function Zm(e,t){return se(t,n=>e[n],e.constructor)}function tv(e){return e.length===1?(t,n)=>e(Zm(n,t)):e}function Ho(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function ko(e){return e!==null&&typeof e=="object"?e.valueOf():e}function SL(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function $n(e){let t;return[{transform:()=>t,label:ts(e)},n=>t=n]}function vn(e){return e==null?[e]:$n(e)}function ts(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function Tg(e,t){return{transform(n){const i=e.transform(n),r=t.transform(n);return yn(i)||yn(r)?se(i,(s,o)=>new Date((+i[o]+ +r[o])/2)):se(i,(s,o)=>(+i[o]+ +r[o])/2,Float64Array)},label:e.label}}function Cg(e,t){const n=ML(t==null?void 0:t.interval,t==null?void 0:t.type);return n?se(e,n):e}function ML(e,t){const n=ev(e,t);return n&&(i=>gn(i)?n.floor(i):i)}function ev(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>ti(Math.ceil(i*n),r*n).map(s=>s/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>ti(Math.ceil(i/n),r/n).map(s=>s*n)}}if(typeof e=="string")return(t==="time"?_L:qw)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function ic(e,t){if(e=ev(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function yK(e,t){if(e=ic(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function _K(e){return ja(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function ja(e){return typeof(e==null?void 0:e.range)=="function"}function If(e){return e===void 0||Gi(e)?e:{value:e}}function wK(e){return e==null?null:{transform:t=>kt(t,e,Float64Array),label:ts(e)}}function vK(e){if(!es(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function es(e){return e&&typeof e[Symbol.iterator]=="function"}function RL(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function _e(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function yn(e){for(const t of e)if(t!=null)return t instanceof Date}function bK(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&gL(t)}function xK(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function Za(e){for(const t of e)if(t!=null)return typeof t=="number"}function Ap(e,t){let n;for(const i of e)if(i!=null){if(!t(i))return!1;n=!0}return n}const EK=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Af(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||EK.has(e))}function TK(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Ee(e){return e==null||Fl(e)}function Fl(e){return/^\s*none\s*$/i.test(e)}function CK(e){return/^\s*round\s*$/i.test(e)}function IL(e,t){return xL(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Lf(e="middle"){return IL(e,"frameAnchor")}function Nl(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Ko(t,n)}function SK(e={},...t){let n=e;for(const i of t)for(const r in i)if(n[r]===void 0){const s=i[r];n===e?n={...n,[r]:s}:n[r]=s}return n}function MK(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(t.has(r))throw new Error(`duplicate name: ${r}`);return t.add(r),[i,n]}))}function nv(e){return es(e)?MK(e):e}const qi=Symbol("position"),ns=Symbol("color"),Of=Symbol("radius"),kf=Symbol("length"),Pf=Symbol("opacity"),qm=Symbol("symbol"),AL=Symbol("projection"),me=new Map([["x",qi],["y",qi],["fx",qi],["fy",qi],["r",Of],["color",ns],["opacity",Pf],["symbol",qm],["length",kf],["projection",AL]]);function RK(e){return e===qi||e===AL}function IK(e){return e===qi||e===Of||e===kf||e===Pf}const LL=Math.sqrt(3),OL=2/LL,AK={draw(e,t){const n=Math.sqrt(t/Math.PI),i=n*OL,r=i/2;e.moveTo(0,i),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(0,-i),e.lineTo(-n,-r),e.lineTo(-n,r),e.closePath()}},iv=new Map([["asterisk",U6],["circle",Du],["cross",V6],["diamond",H6],["diamond2",j6],["hexagon",AK],["plus",Z6],["square",q6],["square2",K6],["star",Q6],["times",iL],["triangle",tL],["triangle2",eL],["wye",nL]]);function rv(e){return e&&typeof e.draw=="function"}function LK(e){return rv(e)?!0:typeof e!="string"?!1:iv.has(e.toLowerCase())}function sv(e){if(e==null||rv(e))return e;const t=iv.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function OK(e){if(e==null||rv(e))return[void 0,e];if(typeof e=="string"){const t=iv.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function lr({filter:e,sort:t,reverse:n,transform:i,initializer:r,...s}={},o){if(i===void 0&&(e!=null&&(i=ov(e)),t!=null&&!Xs(t)&&(i=Lp(i,lv(t))),n&&(i=Lp(i,av))),o!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||Xs(t))&&{sort:t},transform:Lp(i,o)}}function An({filter:e,sort:t,reverse:n,initializer:i,...r}={},s){return i===void 0&&(e!=null&&(i=ov(e)),t!=null&&!Xs(t)&&(i=Op(i,lv(t))),n&&(i=Op(i,av))),{...r,...(t===null||Xs(t))&&{sort:t},initializer:Op(i,s)}}function Lp(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r){return{data:n,facets:i}=e.call(this,n,i,r),t.call(this,In(n),i,r)}}function Op(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,i,r,...s){let o,a,l,c,u,f;return{data:a=n,facets:l=i,channels:o}=e.call(this,n,i,r,...s),{data:u=a,facets:f=l,channels:c}=t.call(this,a,l,{...r,...o},...s),{data:u,facets:f,channels:{...o,...c}}}}function Km(e,t){return(e.initializer!=null?An:lr)(e,t)}function kK(e,t){return Km(t,ov(e))}function ov(e){return(t,n)=>{const i=kt(t,e);return{data:t,facets:n.map(r=>r.filter(s=>i[s]))}}}function PK({sort:e,...t}={}){return{...Km(t,av),sort:Xs(e)?e:null}}function av(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function FK({seed:e,sort:t,...n}={}){return{...Km(n,PL(e==null?Math.random:Nw(e))),sort:Xs(t)?t:null}}function kL(e,{sort:t,...n}={}){return{...(Gi(e)&&e.channel!==void 0?An:Km)(n,lv(e)),sort:Xs(t)?t:null}}function lv(e){return(typeof e=="function"&&e.length!==1?NK:PL)(e)}function NK(e){return(t,n)=>{const i=(r,s)=>e(t[r],t[s]);return{data:t,facets:n.map(r=>r.slice().sort(i))}}}function PL(e){let t,n;({channel:t,value:e,order:n}={...If(e)});const i=t==null?void 0:t.startsWith("-");if(i&&(t=t.slice(1)),n===void 0&&(n=i?xg:ai),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=ai;break;case"descending":n=xg;break;default:throw new Error(`invalid order: ${n}`)}return(r,s,o)=>{let a;if(t===void 0)a=kt(r,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:r,facets:s.map(c=>c.slice().sort(l))}}}function cv(e,t){return Jm(null,null,e,t)}function Wu(e={y:"count"},t={}){const{x:n=wt}=t;if(n==null)throw new Error("missing channel: x");return Jm(n,null,e,t)}function Gu(e={x:"count"},t={}){const{y:n=wt}=t;if(n==null)throw new Error("missing channel: y");return Jm(null,n,e,t)}function uv(e={fill:"count"},t={}){let{x:n,y:i}=t;if([n,i]=Di(n,i),n==null)throw new Error("missing channel: x");if(i==null)throw new Error("missing channel: y");return Jm(n,i,e,t)}function Jm(e,t,{data:n=mv,filter:i,sort:r,reverse:s,...o}={},a={}){o=fv(o,a),n=Qm(n,wt),r=r==null?void 0:hv("sort",r,a),i=i==null?void 0:dv("filter",i,a);const[l,c]=vn(e),[u,f]=vn(t),{z:h,fill:d,stroke:g,x1:m,x2:_,y1:p,y2:y,...v}=a,[w,x]=vn(h),[b]=Rn(d),[E]=Rn(g),[C,I]=vn(b),[S,R]=vn(E);return{..."z"in a&&{z:w||h},..."fill"in a&&{fill:C||d},..."stroke"in a&&{stroke:S||g},...lr(v,(M,k,O)=>{const A=Cg(kt(M,e),O==null?void 0:O.x),P=Cg(kt(M,t),O==null?void 0:O.y),N=kt(M,h),W=kt(M,b),j=kt(M,E),V=gv(o,{z:N,fill:W,stroke:j}),Z=[],z=[],Q=A&&c([]),nt=P&&f([]),st=N&&x([]),ot=W&&I([]),$=j&&R([]);let U=0;for(const D of o)D.initialize(M);r&&r.initialize(M),i&&i.initialize(M);for(const D of k){const X=[];for(const K of o)K.scope("facet",D);r&&r.scope("facet",D),i&&i.scope("facet",D);for(const[K,T]of cl(D,V))for(const[L,F]of cl(T,P))for(const[Y,B]of cl(F,A))if(!(i&&!i.reduce(B))){X.push(U++),z.push(n.reduceIndex(B,M)),A&&Q.push(Y),P&&nt.push(L),N&&st.push(V===N?K:N[B[0]]),W&&ot.push(V===W?K:W[B[0]]),j&&$.push(V===j?K:j[B[0]]);for(const H of o)H.reduce(B);r&&r.reduce(B)}Z.push(X)}return FL(Z,r,s),{data:z,facets:Z}}),...!Ps(o,"x")&&(l?{x:l}:{x1:m,x2:_}),...!Ps(o,"y")&&(u?{y:u}:{y1:p,y2:y}),...Object.fromEntries(o.map(({name:M,output:k})=>[M,k]))}}function Ps(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function fv(e,t,n=hv){const i=Object.entries(e);return t.title!=null&&e.title===void 0&&i.push(["title",GK]),t.href!=null&&e.href===void 0&&i.push(["href",pv]),i.filter(([,r])=>r!==void 0).map(([r,s])=>s===null?DK(r):n(r,s,t))}function hv(e,t,n,i=dv){let r;li(t)&&"reduce"in t&&(r=t.scale,t=t.reduce);const s=i(e,t,n),[o,a]=$n(s.label);let l;return{name:e,output:r===void 0?o:{value:o,scale:r},initialize(c){s.initialize(c),l=a([])},scope(c,u){s.scope(c,u)},reduce(c,u){l.push(s.reduce(c,u))}}}function DK(e){return{name:e,initialize(){},scope(){},reduce(){}}}function dv(e,t,n,i=Qm){const r=SL(e,n),s=i(t,r);let o,a;return{label:ts(s===Sg?null:r,s.label),initialize(l){o=r===void 0?l:kt(l,r),s.scope==="data"&&(a=s.reduceIndex(Qr(l),o))},scope(l,c){s.scope===l&&(a=s.reduceIndex(c,o))},reduce(l,c){return s.scope==null?s.reduceIndex(l,o,c):s.reduceIndex(l,o,a,c)}}}function cl(e,t){return t?Su(Jr(e,n=>t[n]),Rf):[[,e]]}function Qm(e,t,n=$K){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&li(e))return zK(e);if(typeof e=="function")return WK(e);if(/^p\d{2}$/i.test(e))return Er(Jw(e));switch(`${e}`.toLowerCase()){case"first":return pv;case"last":return YK;case"identity":return mv;case"count":return Sg;case"distinct":return BK;case"sum":return t==null?Sg:UK;case"proportion":return ET(t,"data");case"proportion-facet":return ET(t,"facet");case"deviation":return Er(ff);case"min":return Er(Sn);case"min-index":return Er(AY);case"max":return Er(Ue);case"max-index":return Er(IY);case"mean":return xT(Em);case"median":return xT(Iu);case"variance":return Er(dw);case"mode":return Er(SI)}return n(e)}function $K(e){throw new Error(`invalid reduce: ${e}`)}function gv(e,t){for(const n in t){const i=t[n];if(i!==void 0&&!e.some(r=>r.name===n))return i}}function FL(e,t,n){if(t){const i=t.output.transform(),r=(s,o)=>ai(i[s],i[o]);e.forEach(s=>s.sort(r))}n&&e.forEach(i=>i.reverse())}function zK(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function WK(e){return{reduceIndex(t,n,i){return e(Zm(n,t),i)}}}function Er(e){return{reduceIndex(t,n){return e(t,i=>n[i])}}}function xT(e){return{reduceIndex(t,n){const i=e(t,r=>n[r]);return yn(n)?new Date(i):i}}}const mv={reduceIndex(e,t){return Zm(t,e)}},pv={reduceIndex(e,t){return t[e[0]]}},GK={reduceIndex(e,t){const i=Su(ol(e,s=>s.length,s=>t[s]),$u),r=i.slice(-5).reverse();if(r.length<i.length){const s=i.slice(0,-4);r[5-1]=[`… ${s.length.toLocaleString("en-US")} more`,ir(s,$u)]}return r.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},YK={reduceIndex(e,t){return t[e[e.length-1]]}},Sg={label:"Frequency",reduceIndex(e){return e.length}},BK={label:"Distinct",reduceIndex(e,t){const n=new hf;for(const i of e)n.add(t[i]);return n.size}},UK=Er(ir);function ET(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:t,reduceIndex:(n,i,r=1)=>ir(n,s=>i[s])/r}}function Yu(e,{scale:t,type:n,value:i,filter:r,hint:s,label:o=ts(i)},a){return s===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(s=i.hint),DL(a,{scale:t,type:n,value:kt(e,i),label:o,filter:r,hint:s})}function NL(e,t){return Object.fromEntries(Object.entries(e).map(([n,i])=>[n,Yu(t,i,n)]))}function yv(e,t){const n=Object.fromEntries(Object.entries(e).map(([i,{scale:r,value:s}])=>{const o=r==null?null:t[r];return[i,o==null?s:se(s,o)]}));return n.channels=e,n}function DL(e,t){const{scale:n,value:i}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Ap(i,Af)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Ap(i,TK)?null:"opacity";break;case"symbol":n!==!0&&Ap(i,LK)?(t.scale=null,t.value=se(i,sv)):t.scale="symbol";break;default:t.scale=me.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!me.has(n))throw new Error(`unknown scale: ${n}`);return t}function VK(e,t,n,i,r){const{order:s,reverse:o,reduce:a=!0,limit:l}=r;for(const c in r){if(!me.has(c))continue;let{value:u,order:f=s,reverse:h=o,reduce:d=a,limit:g=l}=If(r[c]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),f=f===void 0?m!==(u==="width"||u==="height")?zL:$L:jK(f),d==null||d===!1)continue;const _=c==="fx"||c==="fy"?HK(t,i[c]):XK(n,c);if(!_)throw new Error(`missing channel for scale: ${c}`);const p=_.value,[y=0,v=1/0]=es(g)?g:g<0?[g]:[0,g];if(u==null)_.domain=()=>{let w=Array.from(new hf(p));return h&&(w=w.reverse()),(y!==0||v!==1/0)&&(w=w.slice(y,v)),w};else{const w=u==="data"?e:u==="height"?TT(n,"y1","y2"):u==="width"?TT(n,"x1","x2"):A_(n,u,u==="y"?"y2":u==="x"?"x2":void 0),x=Qm(d===!0?"max":d,w);_.domain=()=>{let b=TY(Qr(p),E=>x.reduceIndex(E,w),E=>p[E]);return f&&b.sort(f),h&&b.reverse(),(y!==0||v!==1/0)&&(b=b.slice(y,v)),b.map(Rf)}}}}function XK(e,t){for(const n in e){const i=e[n];if(i.scale===t)return i}}function HK(e,t){const n=e.original;if(n===e)return t;const i=t.value,r=t.value=[];for(let s=0;s<n.length;++s){const o=i[n[s][0]];for(const a of e[s])r[a]=o}return t}function TT(e,t,n){const i=A_(e,t),r=A_(e,n);return se(r,(s,o)=>Math.abs(s-i[o]),Float64Array)}function A_(e,t,n){let i=e[t];if(!i&&n!==void 0&&(i=e[n]),i)return i.value;throw new Error(`missing channel: ${t}`)}function jK(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return $L;case"descending":return zL}throw new Error(`invalid order: ${e}`)}function $L([e,t],[n,i]){return ai(t,i)||ai(e,n)}function zL([e,t],[n,i]){return xg(t,i)||ai(e,n)}function L_(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function _v(e){let t,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,s)=>r!==i[s]))&&(n=i,t=e(...i)),t)}const ZK=_v(e=>new Intl.NumberFormat(e)),qK=_v((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),KK=_v((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function JK(e="en-US"){const t=ZK(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function QK(e="en-US",t="short"){const n=qK(e,t);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2e3,+i)))?n.format(i):void 0}function tJ(e="en-US",t="short"){const n=KK(e,t);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2001,0,+i)))?n.format(i):void 0}function WL(e){return sK(e,"Invalid Date")}function eJ(e="en-US"){const t=JK(e);return n=>(n instanceof Date?WL:typeof n=="number"?t:en)(n)}const aa=eJ();let O_=0,k_;function nJ(){const e=O_;return O_=0,k_=void 0,e}function Gr(e){e!==k_&&(k_=e,console.warn(e),++O_)}const He=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let iJ=0;function CT(){return`plot-clip-${++iJ}`}function GL(e,{title:t,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:g,strokeDasharray:m,strokeDashoffset:_,opacity:p,mixBlendMode:y,imageFilter:v,paintOrder:w,pointerEvents:x,shapeRendering:b,channels:E},{ariaLabel:C,fill:I="currentColor",fillOpacity:S,stroke:R="none",strokeOpacity:M,strokeWidth:k,strokeLinecap:O,strokeLinejoin:A,strokeMiterlimit:P,paintOrder:N}){I===null&&(a=null,l=null),R===null&&(c=null,f=null),Ee(I)?!Ee(R)&&(!Ee(a)||E!=null&&E.fill)&&(R="none"):Ee(R)&&(!Ee(c)||E!=null&&E.stroke)&&(I="none");const[W,j]=Rn(a,I),[V,Z]=Ce(l,S),[z,Q]=Rn(c,R),[nt,st]=Ce(f,M),[ot,$]=Ce(p);Fl(Q)||(u===void 0&&(u=k),d===void 0&&(d=O),h===void 0&&(h=A),g===void 0&&!CK(h)&&(g=P),!Fl(j)&&w===void 0&&(w=N));const[U,D]=Ce(u);return I!==null&&(e.fill=be(j,"currentColor"),e.fillOpacity=Ic(Z,1)),R!==null&&(e.stroke=be(Q,"none"),e.strokeWidth=Ic(D,1),e.strokeOpacity=Ic(st,1),e.strokeLinejoin=be(h,"miter"),e.strokeLinecap=be(d,"butt"),e.strokeMiterlimit=Ic(g,4),e.strokeDasharray=be(m,"none"),e.strokeDashoffset=be(_,"0")),e.target=en(o),e.ariaLabel=en(C),e.ariaDescription=en(r),e.ariaHidden=en(s),e.opacity=Ic($,1),e.mixBlendMode=be(y,"normal"),e.imageFilter=be(v,"none"),e.paintOrder=be(w,"normal"),e.pointerEvents=be(x,"auto"),e.shapeRendering=be(b,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:W,scale:"auto",optional:!0},fillOpacity:{value:V,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:nt,scale:"auto",optional:!0},strokeWidth:{value:U,optional:!0},opacity:{value:ot,scale:"auto",optional:!0}}}function rJ(e,t){t&&e.filter(n=>jw(t[n])).append("title").call(oJ,t)}function sJ(e,t){t&&e.filter(([n])=>jw(t[n])).append("title").call(aJ,t)}function oJ(e,t){t&&e.text(n=>aa(t[n]))}function aJ(e,t){t&&e.text(([n])=>aa(t[n]))}function Ne(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){i&&mt(e,"aria-label",h=>i[h]),s&&mt(e,"fill",h=>s[h]),o&&mt(e,"fill-opacity",h=>o[h]),a&&mt(e,"stroke",h=>a[h]),l&&mt(e,"stroke-opacity",h=>l[h]),c&&mt(e,"stroke-width",h=>c[h]),u&&mt(e,"opacity",h=>u[h]),f&&UL(e,h=>f[h],t),n||rJ(e,r)}function Mg(e,{target:t,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){i&&mt(e,"aria-label",([h])=>i[h]),s&&mt(e,"fill",([h])=>s[h]),o&&mt(e,"fill-opacity",([h])=>o[h]),a&&mt(e,"stroke",([h])=>a[h]),l&&mt(e,"stroke-opacity",([h])=>l[h]),c&&mt(e,"stroke-width",([h])=>c[h]),u&&mt(e,"opacity",([h])=>u[h]),f&&UL(e,([h])=>f[h],t),n||sJ(e,r)}function lJ({ariaLabel:e,title:t,fill:n,fillOpacity:i,stroke:r,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,i,r,s,o,a,l].filter(u=>u!==void 0)}function wv(e,t,n){const i=Jr(e,r=>t[r]);return n===void 0&&i.size>1+e.length>>1&&Gr("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*YL(e,t,n,i){const{z:r}=n,{z:s}=i,o=lJ(i,n),a=[...t,...o];for(const l of s?wv(e,s,r):[e]){let c,u;t:for(const f of l){for(const h of a)if(!gn(h[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=o.map(h=>ko(h[f])),u=[f];continue}u.push(f);for(let h=0;h<o.length;++h)if(ko(o[h][f])!==c[h]){yield u,c=o.map(g=>ko(g[f])),u=[f];continue t}}u&&(yield u)}}function BL(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Un(e,"clip",["frame","sphere"])),e}function cJ(e,t,n,i){let r;const{clip:s=i.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:c,marginTop:u,marginBottom:f}=n,h=CT();r=`url(#${h})`,e=Ht("svg:g",i).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",a-u-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=i;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=CT();r=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",Qs(o)({type:"Sphere"}));break}}mt(e,"aria-label",t.ariaLabel),mt(e,"aria-description",t.ariaDescription),mt(e,"aria-hidden",t.ariaHidden),mt(e,"clip-path",r)}function he(e,t,n,i){cJ(e,t,n,i),mt(e,"fill",t.fill),mt(e,"fill-opacity",t.fillOpacity),mt(e,"stroke",t.stroke),mt(e,"stroke-width",t.strokeWidth),mt(e,"stroke-opacity",t.strokeOpacity),mt(e,"stroke-linejoin",t.strokeLinejoin),mt(e,"stroke-linecap",t.strokeLinecap),mt(e,"stroke-miterlimit",t.strokeMiterlimit),mt(e,"stroke-dasharray",t.strokeDasharray),mt(e,"stroke-dashoffset",t.strokeDashoffset),mt(e,"shape-rendering",t.shapeRendering),mt(e,"filter",t.imageFilter),mt(e,"paint-order",t.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=t;mt(e,"pointer-events",r)}function le(e,t){uJ(e,"mix-blend-mode",t.mixBlendMode),mt(e,"opacity",t.opacity)}function UL(e,t,n){e.each(function(i){const r=t(i);if(r!=null){const s=this.ownerDocument.createElementNS(Qo.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(Qo.xlink,"href",r),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function mt(e,t,n){n!=null&&e.attr(t,n)}function uJ(e,t,n){n!=null&&e.style(t,n)}function ie(e,t,{x:n,y:i},r=He,s=He){r+=t.dx,s+=t.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(s+=i.bandwidth()/2),(r||s)&&e.attr("transform",`translate(${r},${s})`)}function be(e,t){if((e=en(e))!==t)return e}function Ic(e,t){if((e=Nt(e))!==t)return e}const fJ=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function vv(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!fJ.test(e))throw new Error(`invalid class name: ${e}`);return e}function bv(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function cr({frameAnchor:e},{width:t,height:n,marginTop:i,marginRight:r,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-r:(o+t-r)/2,/^top/.test(e)?i:/^bottom/.test(e)?n-s:(i+n-s)/2]}function t0(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:BL(n)}}function Ht(e,{document:t}){return Ds(Cm(e).call(t.documentElement))}const VL=Math.PI,yr=2*VL,ST=.618;function hJ({projection:e,inset:t=0,insetTop:n=t,insetRight:i=t,insetBottom:r=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,c="frame";if(li(e)){let x;if({type:e,domain:l,inset:x,insetTop:n=x!==void 0?x:n,insetRight:i=x!==void 0?x:i,insetBottom:r=x!==void 0?x:r,insetLeft:s=x!==void 0?x:s,clip:c=c,...a}=e,e==null)return}typeof e!="function"&&({type:e}=XL(e));const{width:u,height:f,marginLeft:h,marginRight:d,marginTop:g,marginBottom:m}=o,_=u-h-d-s-i,p=f-g-m-n-r;if(e=e==null?void 0:e({width:_,height:p,clip:c,...a}),e==null)return;c=dJ(c,h,g,u-d,f-m);let y=h+s,v=g+n,w;if(l!=null){const[[x,b],[E,C]]=Qs(e).bounds(l),I=Math.min(_/(E-x),p/(C-b));I>0?(y-=(I*(x+E)-_)/2,v-=(I*(b+C)-p)/2,w=cg({point(S,R){this.stream.point(S*I+y,R*I+v)}})):Gr("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=y===0&&v===0?HL():cg({point(x,b){this.stream.point(x+y,b+v)}})),{stream:x=>e.stream(w.stream(c(x)))}}function XL(e){switch(`${e}`.toLowerCase()){case"albers-usa":return gi(QH,.7463,.4673);case"albers":return Ah(zA,.7463,.4673);case"azimuthal-equal-area":return gi(tj,4,4);case"azimuthal-equidistant":return gi(ej,yr,yr);case"conic-conformal":return Ah(rj,yr,yr);case"conic-equal-area":return Ah(ug,6.1702,2.9781);case"conic-equidistant":return Ah(aj,7.312,3.6282);case"equal-earth":return gi(cj,5.4133,2.6347);case"equirectangular":return gi(sj,yr,VL);case"gnomonic":return gi(uj,3.4641,3.4641);case"identity":return{type:HL};case"reflect-y":return{type:gJ};case"mercator":return gi(nj,yr,yr);case"orthographic":return gi(fj,2,2);case"stereographic":return gi(hj,2,2);case"transverse-mercator":return gi(dj,yr,yr);default:throw new Error(`unknown projection type: ${e}`)}}function dJ(e,t,n,i,r){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return EA(t,n,i,r);default:throw new Error(`unknown projection clip type: ${e}`)}}function gi(e,t,n){return{type:({width:i,height:r,rotate:s,precision:o=.15,clip:a})=>{var c,u,f;const l=e();return o!=null&&((c=l.precision)==null||c.call(l,o)),s!=null&&((u=l.rotate)==null||u.call(l,s)),typeof a=="number"&&((f=l.clipAngle)==null||f.call(l,a)),l.scale(Math.min(i/t,r/n)),l.translate([i/2,r/2]),l},aspectRatio:n/t}}function Ah(e,t,n){const{type:i,aspectRatio:r}=gi(e,t,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:c}=s,u=i(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:r}}const HL=Bn({stream:e=>e}),gJ=Bn(cg({point(e,t){this.stream.point(e,-t)}}));function jL(e,t,n,i){const r=n[e],s=n[t],o=r.length,a=n[e]=new Float64Array(o).fill(NaN),l=n[t]=new Float64Array(o).fill(NaN);let c;const u=i.stream({point(f,h){a[c]=f,l[c]=h}});for(c=0;c<o;++c)u.point(r[c],s[c])}function mJ({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(li(e)&&(e=e.type),e!=null)}function pJ(e){if(typeof(e==null?void 0:e.stream)=="function")return ST;if(li(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=XL(e);if(t)return t}return ST}}function e0(e,t,{projection:n}){const{x:i,y:r}=e;let s={};return i&&(s.x=i),r&&(s.y=r),s=yv(s,t),n&&(i==null?void 0:i.scale)==="x"&&(r==null?void 0:r.scale)==="y"&&jL("x","y",s,n),i&&(s.x=Tn(s.x)),r&&(s.y=Tn(s.y)),s}function yJ(e){const t=[],n=[],i={scale:"x",value:t},r={scale:"y",value:n},s={point(o,a){t.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)Cs(o,s);return[i,r]}const ZL=new Map([["accent",vq],["category10",wq],["dark2",bq],["paired",xq],["pastel1",Eq],["pastel2",Tq],["set1",Cq],["set2",Sq],["set3",Mq],["tableau10",Rq]]);function _J(e){return e!=null&&ZL.has(`${e}`.toLowerCase())}const MT=new Map([...ZL,["brbg",_r(I3,A3)],["prgn",_r(L3,O3)],["piyg",_r(k3,P3)],["puor",_r(F3,N3)],["rdbu",_r(M_,mg)],["rdgy",_r(D3,$3)],["rdylbu",_r(R_,pg)],["rdylgn",_r(z3,W3)],["spectral",_r(G3,Y3)],["burd",RT(M_,mg)],["buylrd",RT(R_,pg)],["blues",De(d6,g6)],["greens",De(m6,p6)],["greys",De(y6,_6)],["oranges",De(E6,T6)],["purples",De(w6,v6)],["reds",De(b6,x6)],["turbo",wr(L6)],["viridis",wr(O6)],["magma",wr(k6)],["inferno",wr(P6)],["plasma",wr(F6)],["cividis",wr(C6)],["cubehelix",wr(S6)],["warm",wr(M6)],["cool",wr(R6)],["bugn",De(B3,U3)],["bupu",De(V3,X3)],["gnbu",De(H3,j3)],["orrd",De(Z3,q3)],["pubu",De(Q3,t6)],["pubugn",De(K3,J3)],["purd",De(e6,n6)],["rdpu",De(i6,r6)],["ylgn",De(a6,l6)],["ylgnbu",De(s6,o6)],["ylorbr",De(c6,u6)],["ylorrd",De(f6,h6)],["rainbow",IT(I6)],["sinebow",IT(A6)]]);function De(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ai(t,n):e[n])}function _r(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ai(t,n):e[n])}function RT(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ai(i=>t(1-i),n):e[n].slice().reverse())}function wr(e){return({length:t})=>Ai(e,Math.max(2,Math.floor(t)))}function IT(e){return({length:t})=>Ai(e,Math.floor(t)+1).slice(0,-1)}function qL(e){const t=`${e}`.toLowerCase();if(!MT.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return MT.get(t)}function n0(e,t){const n=qL(e),i=typeof n=="function"?n({length:t}):n;return i.length!==t?i.slice(0,t):i}function wJ(e,t="greys"){const n=new Set,[i,r]=n0(t,2);for(const s of e)if(s!=null)if(s===!0)n.add(r);else if(s===!1)n.add(i);else return;return[...n]}const AT=new Map([["brbg",A3],["prgn",O3],["piyg",P3],["puor",N3],["rdbu",mg],["rdgy",$3],["rdylbu",pg],["rdylgn",W3],["spectral",Y3],["burd",e=>mg(1-e)],["buylrd",e=>pg(1-e)],["blues",g6],["greens",p6],["greys",_6],["purples",v6],["reds",x6],["oranges",T6],["turbo",L6],["viridis",O6],["magma",k6],["inferno",P6],["plasma",F6],["cividis",C6],["cubehelix",S6],["warm",M6],["cool",R6],["bugn",U3],["bupu",X3],["gnbu",j3],["orrd",q3],["pubugn",J3],["pubu",t6],["purd",n6],["rdpu",r6],["ylgnbu",o6],["ylgn",l6],["ylorbr",u6],["ylorrd",h6],["rainbow",I6],["sinebow",A6]]);function xv(e){const t=`${e}`.toLowerCase();if(!AT.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return AT.get(t)}const vJ=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function bJ(e){return e!=null&&vJ.has(`${e}`.toLowerCase())}const KL=e=>t=>e(1-t),kp=[0,1],LT=new Map([["number",Je],["rgb",na],["hsl",sV],["hcl",lV],["lab",oV]]);function JL(e){const t=`${e}`.toLowerCase();if(!LT.has(t))throw new Error(`unknown interpolator: ${t}`);return LT.get(t)}function Ff(e,t,n,{type:i,nice:r,clamp:s,zero:o,domain:a=tO(e,n),unknown:l,round:c,scheme:u,interval:f,range:h=me.get(e)===Of?OJ(n,a):me.get(e)===kf?kJ(n,a):me.get(e)===Pf?kp:void 0,interpolate:d=me.get(e)===ns?u==null&&h!==void 0?na:xv(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):c?Cw:Je,reverse:g}){if(f=ic(f,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof d!="function"&&(d=JL(d)),g=!!g,h!==void 0){const m=(a=In(a)).length,_=(h=In(h)).length;if(m!==_){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Rm(d,h),h=void 0}}if(d.length===1?(g&&(d=KL(d),g=!1),h===void 0&&(h=Float64Array.from(a,(m,_)=>_/(a.length-1)),h.length===2&&(h=kp)),t.interpolate((h===kp?Bn:Tv)(d))):t.interpolate(d),o){const[m,_]=Ye(a);(m>0||_<0)&&(a=zu(a),Nl(a)!==Math.sign(m)?a[a.length-1]=0:a[0]=0)}return g&&(a=Nd(a)),t.domain(a).unknown(l),r&&(t.nice(xJ(r,i)),a=t.domain()),h!==void 0&&t.range(h),s&&t.clamp(s),{type:i,domain:a,range:h,scale:t,interpolate:d,interval:f}}function xJ(e,t){return e===!0?void 0:typeof e=="number"?e:yK(e,t)}function EJ(e,t,n){return Ff(e,$w(),t,n)}function TJ(e,t,n){return QL(e,t,{...n,exponent:.5})}function QL(e,t,{exponent:n=1,...i}){return Ff(e,l3().exponent(n),t,{...i,type:"pow"})}function CJ(e,t,{base:n=10,domain:i=PJ(t),...r}){return Ff(e,r3().base(n),t,{...r,domain:i})}function SJ(e,t,{constant:n=1,...i}){return Ff(e,o3().constant(n),t,i)}function MJ(e,t,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:s="rdylbu",domain:o=FJ(t),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?Ai(l,r):me.get(e)===ns?n0(s,r):void 0),o.length>0&&(o=c3(o,n===void 0?{length:r}:n).quantiles()),Ev(e,t,{domain:o,range:n,reverse:c,unknown:a})}function RJ(e,t,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:s=tO(e,t),unknown:o,interpolate:a,reverse:l}){const[c,u]=Ye(s);let f;return n===void 0?(f=Bs(c,u,i),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),i=f.length+1,n=a!==void 0?Ai(a,i):me.get(e)===ns?n0(r,i):void 0):(f=Ai(Je(c,u),i+1).slice(1,-1),c instanceof Date&&(f=f.map(h=>new Date(h)))),Nl(In(s))<0&&f.reverse(),Ev(e,t,{domain:f,range:n,reverse:l,unknown:o})}function Ev(e,t,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:s,range:o=s!==void 0?Ai(s,n.length+1):me.get(e)===ns?n0(r,n.length+1):void 0,reverse:a}){n=In(n);const l=Nl(n);if(!isNaN(l)&&!IJ(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=Nd(o)),{type:"threshold",scale:u3(l<0?Nd(n):n,o===void 0?[]:o).unknown(i),domain:n,range:o}}function IJ(e,t){for(let n=1,i=e.length,r=e[0];n<i;++n){const s=Ko(r,r=e[n]);if(s!==0&&s!==t)return!1}return!0}function AJ(e){return{type:"identity",scale:IK(me.get(e))?e3():t=>t}}function Bu(e,t=Eg){return e.length?[Sn(e,({value:n})=>n===void 0?n:Sn(n,t)),Ue(e,({value:n})=>n===void 0?n:Ue(n,t))]:[0,1]}function tO(e,t){const n=me.get(e);return(n===Of||n===Pf||n===kf?LJ:Bu)(t)}function LJ(e){return[0,e.length?Ue(e,({value:t})=>t===void 0?t:Ue(t,Eg)):1]}function OJ(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const i=Us(e,.5,({value:o})=>o===void 0?NaN:Us(o,.25,Wr)),r=t.map(o=>3*Math.sqrt(o/i)),s=30/Ue(r);return s<1?r.map(o=>o*s):r}function kJ(e,t){const n=Iu(e,({value:s})=>s===void 0?NaN:Iu(s,Math.abs)),i=t.map(s=>12*s/n),r=60/Ue(i);return r<1?i.map(s=>s*r):i}function PJ(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return Bu(e,Wr);if(n<0)return Bu(e,Xm)}return[1,10]}function FJ(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const i of n)t.push(i);return t}function Tv(e){return(t,n)=>i=>e(t+i*(n-t))}function i0(e,t,n,i,{type:r,nice:s,clamp:o,domain:a=Bu(i),unknown:l,pivot:c=0,scheme:u,range:f,symmetric:h=!0,interpolate:d=me.get(e)===ns?u==null&&f!==void 0?na:xv(u!==void 0?u:"rdbu"):Je,reverse:g}){c=+c,a=In(a);let[m,_]=a;if(a.length>2&&Gr(`Warning: the diverging ${e} scale domain contains extra elements.`),Ko(m,_)<0&&([m,_]=[_,m],g=!g),m=Math.min(m,c),_=Math.max(_,c),typeof d!="function"&&(d=JL(d)),f!==void 0&&(d=d.length===1?Tv(d)(...f):Rm(d,f)),g&&(d=KL(d)),h){const p=n.apply(c),y=p-n.apply(m),v=n.apply(_)-p;y<v?m=n.invert(p-v):y>v&&(_=n.invert(p+y))}return t.domain([m,c,_]).unknown(l).interpolator(d),o&&t.clamp(o),s&&t.nice(s),{type:r,domain:[m,_],pivot:c,interpolate:d,scale:t}}function NJ(e,t,n){return i0(e,C3(),WJ,t,n)}function DJ(e,t,n){return eO(e,t,{...n,exponent:.5})}function eO(e,t,{exponent:n=1,...i}){return i0(e,R3().exponent(n=+n),BJ(n),t,{...i,type:"diverging-pow"})}function $J(e,t,{base:n=10,pivot:i=1,domain:r=Bu(t,i<0?Xm:Wr),...s}){return i0(e,S3().base(n=+n),GJ,t,{domain:r,pivot:i,...s})}function zJ(e,t,{constant:n=1,...i}){return i0(e,M3().constant(n=+n),UJ(n),t,i)}const WJ={apply(e){return e},invert(e){return e}},GJ={apply:Math.log,invert:Math.exp},YJ={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function BJ(e){return e===.5?YJ:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function UJ(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function nO(e,t,n,i){return Ff(e,t,n,i)}function VJ(e,t,n){return nO(e,yq(),t,n)}function XJ(e,t,n){return nO(e,_q(),t,n)}const Nf=Symbol("ordinal");function iO(e,t,n,{type:i,interval:r,domain:s,range:o,reverse:a,hint:l}){return r=ic(r,i),s===void 0&&(s=sO(n,r,e)),(i==="categorical"||i===Nf)&&(i="ordinal"),a&&(s=Nd(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:i,domain:s,range:o,scale:t,hint:l,interval:r}}function HJ(e,t,{type:n,interval:i,domain:r,range:s,scheme:o,unknown:a,...l}){i=ic(i,n),r===void 0&&(r=sO(t,i,e));let c;if(me.get(e)===qm)c=qJ(t),s=s===void 0?KJ(c):se(s,sv);else if(me.get(e)===ns&&(s===void 0&&(n==="ordinal"||n===Nf)&&(s=wJ(r,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=xv(o),f=s[0],h=s[1]-s[0];s=({length:d})=>Ai(g=>u(f+h*g),d)}else s=qL(o);if(a===T_)throw new Error(`implicit unknown on ${e} scale is not supported`);return iO(e,Dw().unknown(a),t,{...l,type:n,domain:r,range:s,hint:c})}function jJ(e,t,{align:n=.5,padding:i=.5,...r}){return rO(Jj().align(n).padding(i),t,r,e)}function ZJ(e,t,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:s=e==="fx"||e==="fy"?0:i,...o}){return rO(Pm().align(n).paddingInner(r).paddingOuter(s),t,o,e)}function rO(e,t,n,i){let{round:r}=n;return r!==void 0&&e.round(r=!!r),e=iO(i,e,t,n),e.round=r,e}function sO(e,t,n){const i=new hf;for(const{value:r,domain:s}of e){if(s!==void 0)return s();if(r!==void 0)for(const o of r)i.add(o)}if(t!==void 0){const[r,s]=Ye(i).map(t.floor,t);return t.range(r,t.offset(s))}if(i.size>1e4&&me.get(n)===qi)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Su(i,ai)}function OT(e,t){let n;for(const{hint:i}of e){const r=i==null?void 0:i[t];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function qJ(e){return{fill:OT(e,"fill"),stroke:OT(e,"stroke")}}function KJ(e){return Ee(e.fill)?Gq:Wq}function P_(e,{label:t,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:c,zero:u,align:f,padding:h,projection:d,facet:{label:g=t}={},...m}={}){const _={};for(const[p,y]of e){const v=m[p],w=cO(p,y,{round:me.get(p)===qi?a:void 0,nice:l,clamp:c,zero:u,align:f,padding:h,projection:d,...v});if(w){let{label:x=p==="fx"||p==="fy"?g:t,percent:b,transform:E,inset:C,insetTop:I=C!==void 0?C:p==="y"?i:0,insetRight:S=C!==void 0?C:p==="x"?r:0,insetBottom:R=C!==void 0?C:p==="y"?s:0,insetLeft:M=C!==void 0?C:p==="x"?o:0}=v||{};if(E==null)E=void 0;else if(typeof E!="function")throw new Error("invalid scale transform; not a function");w.percent=!!b,w.label=x===void 0?QJ(y,w):x,w.transform=E,p==="x"||p==="fx"?(w.insetLeft=+M,w.insetRight=+S):(p==="y"||p==="fy")&&(w.insetTop=+I,w.insetBottom=+R),_[p]=w}}return _}function kT(e){const t={},n={scales:t};for(const[i,r]of Object.entries(e)){const{scale:s,type:o,interval:a,label:l}=r;t[i]=fO(r),n[i]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function JJ(e,t){const{x:n,y:i,fx:r,fy:s}=e,o=r||s?Cv(t):t;r&&PT(r,o),s&&FT(s,o);const a=r||s?oO(e,t):t;n&&PT(n,a),i&&FT(i,a)}function QJ(e=[],t){let n;for(const{label:i}of e)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!ya(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Cv(e){const{marginTop:t,marginRight:n,marginBottom:i,marginLeft:r,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(i,c),marginLeft:Math.max(r,u),width:s,height:o}}function oO({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=Cv(n);return{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+r:a,height:t?t.scale.bandwidth()+i+s:l,facet:{width:a,height:l}}}function PT(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:i}=e,{width:r,marginLeft:s=0,marginRight:o=0}=t,a=s+n,l=r-o-i;e.range=[a,Math.max(a,l)],ya(e)||(e.range=lO(e)),e.scale.range(e.range)}aO(e)}function FT(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:i}=e,{height:r,marginTop:s=0,marginBottom:o=0}=t,a=s+n,l=r-o-i;e.range=[Math.max(a,l),a],ya(e)?e.range.reverse():e.range=lO(e),e.scale.range(e.range)}aO(e)}function aO(e){e.round===void 0&&nQ(e)&&tQ(e)<=30&&e.scale.round(!0)}function tQ({scale:e}){const t=e.domain().length,[n,i]=e.range(),r=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-r,a=Math.abs(i-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function lO(e){const t=e.scale.domain().length+uO(e);if(!(t>2))return e.range;const[n,i]=e.range;return Array.from({length:t},(r,s)=>n+s/(t-1)*(i-n))}function F_(e,t,n){return cO(e,n===void 0?void 0:[{hint:n}],{...t})}function cO(e,t=[],n={}){const i=eQ(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&ya({type:i})){const r=t.map(({value:s})=>s).filter(s=>s!==void 0);r.some(yn)?Gr(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Pa(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Pa(i)}".`):r.some(bK)?Gr(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Pa(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Pa(i)}".`):r.some(xK)&&Gr(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Pa(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Pa(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Lh(t,n,Tn);break;case"identity":switch(me.get(e)){case qi:n=Lh(t,n,Tn);break;case qm:n=Lh(t,n,iQ);break}break;case"utc":case"time":n=Lh(t,n,pK);break}switch(i){case"diverging":return NJ(e,t,n);case"diverging-sqrt":return DJ(e,t,n);case"diverging-pow":return eO(e,t,n);case"diverging-log":return $J(e,t,n);case"diverging-symlog":return zJ(e,t,n);case"categorical":case"ordinal":case Nf:return HJ(e,t,n);case"cyclical":case"sequential":case"linear":return EJ(e,t,n);case"sqrt":return TJ(e,t,n);case"threshold":return Ev(e,t,n);case"quantile":return MJ(e,t,n);case"quantize":return RJ(e,t,n);case"pow":return QL(e,t,n);case"log":return CJ(e,t,n);case"symlog":return SJ(e,t,n);case"utc":return XJ(e,t,n);case"time":return VJ(e,t,n);case"point":return jJ(e,t,n);case"band":return ZJ(e,t,n);case"identity":return AJ(e);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Pa(e){return typeof e=="symbol"?e.description:e}const NT={toString:()=>"projection"};function eQ(e,t,{type:n,domain:i,range:r,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=NT);for(const{type:c}of t)if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}if(n===NT)return;if(n!==void 0)return n;if(i===void 0&&!t.some(({value:c})=>c!==void 0))return;const l=me.get(e);if(l===Of)return"sqrt";if(l===Pf||l===kf)return"linear";if(l===qm)return"ordinal";if((i||r||[]).length>2)return Pp(l);if(i!==void 0){if(_e(i))return Pp(l);if(yn(i))return"utc"}else{const c=t.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(_e))return Pp(l);if(c.some(yn))return"utc"}if(l===ns){if(o!=null||bJ(s))return"diverging";if(_J(s))return"categorical"}return"linear"}function Pp(e){switch(e){case qi:return"point";case ns:return Nf;default:return"ordinal"}}function ya({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Nf}function uO({type:e}){return e==="threshold"}function nQ({type:e}){return e==="point"||e==="band"}function ri(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let i=1,r=t.length;i<r;++i)if(e(t[i])-n)return!1;return!0}function Lh(e,{domain:t,...n},i){for(const r of e)r.value!==void 0&&(r.value=i(r.value));return{domain:t===void 0?t:i(t),...n}}function iQ(e){return se(e,sv)}function rQ(e={}){let t;for(const n in e)if(me.has(n)&&Xo(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=fO(F_(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function sQ(e){return t=>{if(!me.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function fO({scale:e,type:t,domain:n,range:i,interpolate:r,interval:s,transform:o,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:zu(n),...i!==void 0&&{range:zu(i)},...o!==void 0&&{transform:o},...a&&{percent:a},...c!==void 0&&{unknown:c},...s!==void 0&&{interval:s},...r!==void 0&&{interpolate:r},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function oQ(e,t,n={}){let i=.5-He,r=.5+He,s=.5+He,o=.5-He;for(const{marginTop:m,marginRight:_,marginBottom:p,marginLeft:y}of t)m>i&&(i=m),_>r&&(r=_),p>s&&(s=p),y>o&&(o=y);let{margin:a,marginTop:l=a!==void 0?a:i,marginRight:c=a!==void 0?a:r,marginBottom:u=a!==void 0?a:s,marginLeft:f=a!==void 0?a:o}=n;l=+l,c=+c,u=+u,f=+f;let{width:h=640,height:d=aQ(e,n,{width:h,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-i+u-s)}=n;h=+h,d=+d;const g={width:h,height:d,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:m,marginTop:_=m!==void 0?m:l,marginRight:p=m!==void 0?m:c,marginBottom:y=m!==void 0?m:u,marginLeft:v=m!==void 0?m:f}=n.facet??{};_=+_,p=+p,y=+y,v=+v,g.facet={marginTop:_,marginRight:p,marginBottom:y,marginLeft:v}}return g}function aQ({x:e,y:t,fy:n,fx:i},{projection:r,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const f=n?n.scale.domain().length:1,h=pJ(r);if(h){const g=i?i.scale.domain().length:1,m=(1.1*f-.1)/(1.1*g-.1)*h,_=Math.max(.1,Math.min(10,m));return Math.round((o-u-l)*_+a+c)}const d=t?ya(t)?t.scale.domain().length:Math.max(7,17/f):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const g=DT("y",t)/(DT("x",e)*s),m=i?i.scale.bandwidth():1,_=n?n.scale.bandwidth():1,p=m*(o-u-l)-e.insetLeft-e.insetRight;return(g*p+t.insetTop+t.insetBottom)/_+a+c}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!i*30+60}function DT(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:i}=t;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const a=t.scale.exponent();r=l=>Math.pow(l,a);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[s,o]=Ye(i);return Math.abs(r(o)-r(s))}function lQ(e,t){const{fx:n,fy:i}=P_(e,t),r=n==null?void 0:n.scale.domain(),s=i==null?void 0:i.scale.domain();return r&&s?xY(r,s).map(([o,a],l)=>({x:o,y:a,i:l})):r?r.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function cQ(e,{x:t,y:n}){return t&&(t=N_(t)),n&&(n=N_(n)),e.filter(t&&n?i=>t.has(i.x)&&n.has(i.y):t?i=>t.has(i.x):i=>n.has(i.y)).sort(t&&n?(i,r)=>t.get(i.x)-t.get(r.x)||n.get(i.y)-n.get(r.y):t?(i,r)=>t.get(i.x)-t.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Sv(e,{fx:t,fy:n}){const i=Qr(e),r=t==null?void 0:t.value,s=n==null?void 0:n.value;return t&&n?ol(i,o=>(o.fx=r[o[0]],o.fy=s[o[0]],o),o=>r[o],o=>s[o]):t?ol(i,o=>(o.fx=r[o[0]],o),o=>r[o]):ol(i,o=>(o.fy=s[o[0]],o),o=>s[o])}function uQ(e,t,{marginTop:n,marginLeft:i}){return e&&t?({x:r,y:s})=>`translate(${e(r)-i},${t(s)-n})`:e?({x:r})=>`translate(${e(r)-i},0)`:({y:r})=>`translate(0,${t(r)-n})`}function fQ(e){const t=[],n=new Uint32Array(ir(e,i=>i.length));for(const i of e){let r=0;for(const s of e)i!==s&&(n.set(s,r),r+=s.length);t.push(n.slice(0,r))}return t}const hQ=new Map([["top",Fp],["right",$p],["bottom",Np],["left",Dp],["top-left",Oh(Fp,Dp)],["top-right",Oh(Fp,$p)],["bottom-left",Oh(Np,Dp)],["bottom-right",Oh(Np,$p)],["top-empty",mQ],["right-empty",_Q],["bottom-empty",pQ],["left-empty",yQ],["empty",wQ]]);function dQ(e){if(e==null)return null;const t=hQ.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const $T=new WeakMap;function N_(e){let t=$T.get(e);return t||$T.set(e,t=new Jo(se(e,(n,i)=>[n,i]))),t}function no(e,t){return N_(e).get(t)}function gQ(e,t,n){return t=ko(t),n=ko(n),e.find(i=>Object.is(ko(i.x),t)&&Object.is(ko(i.y),n))}function r0(e,t,n){var i;return(i=gQ(e,t,n))==null?void 0:i.empty}function Fp(e,{y:t},{y:n}){return t?no(t,n)===0:!0}function Np(e,{y:t},{y:n}){return t?no(t,n)===t.length-1:!0}function Dp(e,{x:t},{x:n}){return t?no(t,n)===0:!0}function $p(e,{x:t},{x:n}){return t?no(t,n)===t.length-1:!0}function mQ(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=no(t,i);if(s>0)return r0(e,n,t[s-1])}function pQ(e,{y:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=no(t,i);if(s<t.length-1)return r0(e,n,t[s+1])}function yQ(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=no(t,n);if(s>0)return r0(e,t[s-1],i)}function _Q(e,{x:t},{x:n,y:i,empty:r}){if(r)return!1;if(!t)return;const s=no(t,n);if(s<t.length-1)return r0(e,t[s+1],i)}function wQ(e,t,{empty:n}){return n}function Oh(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function zp(e,{channels:{fx:t,fy:n},groups:i}){return t&&n?e.map(({x:r,y:s})=>{var o;return((o=i.get(r))==null?void 0:o.get(s))??[]}):t?e.map(({x:r})=>i.get(r)??[]):e.map(({y:r})=>i.get(r)??[])}class re{constructor(t,n={},i={},r){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:c,dx:u=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:g=h,marginBottom:m=h,marginLeft:_=h,clip:p=r==null?void 0:r.clip,channels:y,tip:v,render:w}=i;if(this.data=t,this.sort=Xs(c)?c:null,this.initializer=An(i).initializer,this.transform=this.initializer?i.transform:lr(i).transform,s===null||s===!1?this.facet=null:(this.facet=Un(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===ou&&typeof a=="string"?[a]:a,this.fy=t===ou&&typeof l=="string"?[l]:l),this.facetAnchor=dQ(o),n=nv(n),y!==void 0&&(n={...vQ(y),...n}),r!==void 0&&(n={...GL(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([x,b])=>{if(Gi(b.value)){const{value:E,label:C=b.label,scale:I=b.scale}=b.value;b={...b,label:C,scale:I,value:E}}if(t===ou&&typeof b.value=="string"){const{value:E}=b;b={...b,value:[E]}}return[x,b]}).filter(([x,{value:b,optional:E}])=>{if(b!=null)return!0;if(E)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+u,this.dy=+f,this.marginTop=+d,this.marginRight=+g,this.marginBottom=+m,this.marginLeft=+_,this.clip=BL(p),this.tip=bQ(v),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:b}=n[x];if(!(b!=="x"&&b!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=hO(w,this.render))}initialize(t,n,i){let r=In(this.data);t===void 0&&r!=null&&(t=[Qr(r)]);const s=t;this.transform!=null&&({facets:t,data:r}=this.transform(r,t,i),r=In(r)),t!==void 0&&(t.original=s);const o=NL(this.channels,r);return this.sort!=null&&VK(r,t,o,n,this.sort),{data:r,facets:t,channels:o}}filter(t,n,i){for(const r in n){const{filter:s=gn}=n[r];if(s!==null){const o=i[r];t=t.filter(a=>s(o[a]))}}return t}project(t,n,i){for(const r in t)if(t[r].scale==="x"&&/^x|x$/.test(r)){const s=r.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&jL(r,s,n,i.projection)}}scale(t,n,i){const r=yv(t,n);return i.projection&&this.project(t,r,i),r}}function Pi(...e){return e.plot=re.prototype.plot,e}function hO(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,i,r,s,o,a){return e.call(this,n,i,r,s,o,(l,c,u,f,h)=>t.call(this,l,c,u,f,h,a))}}function vQ(e){return Object.fromEntries(Object.entries(nv(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:If(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function bQ(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Un(e,"tip",["x","y","xy"]):e}function rc(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:li(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const zT=new WeakMap;function Mv(e,t,{x:n,y:i,px:r,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o=+o,r!=null&&(n??(n=null),a={...a,px:{value:r,scale:"x"}}),s!=null&&(i??(i=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:i,channels:a,...c,render:hO(function(u,f,h,d,g,m){g={...g,pointerSticky:!1};const _=g.ownerSVGElement,{data:p}=g.getMarkState(this);let y=zT.get(_);y||zT.set(_,y={sticky:!1,roots:[],renders:[]});let v=y.renders.push(Q)-1;const{x:w,y:x,fx:b,fy:E}=f;let C=b?b(u.fx)-d.marginLeft:0,I=E?E(u.fy)-d.marginTop:0;w!=null&&w.bandwidth&&(C+=w.bandwidth()/2),x!=null&&x.bandwidth&&(I+=x.bandwidth()/2);const S=u.fi!=null;let R;if(S){let $=y.facetStates;$||(y.facetStates=$=new Map),R=$.get(this),R||$.set(this,R=new Map)}const[M,k]=cr(this,d),{px:O,py:A}=h,P=O?$=>O[$]:dO(h,M),N=A?$=>A[$]:gO(h,k);let W,j,V,Z;function z($,U){if(S)if(Z&&(Z=cancelAnimationFrame(Z)),$==null)R.delete(u.fi);else{R.set(u.fi,U),Z=requestAnimationFrame(()=>{Z=null;for(const[D,X]of R)if(X<U||X===U&&D<u.fi){$=null;break}Q($)});return}Q($)}function Q($){if(W===$&&V===y.sticky)return;W=$,V=g.pointerSticky=y.sticky;const U=W==null?[]:[W];S&&(U.fx=u.fx,U.fy=u.fy,U.fi=u.fi);const D=m(U,f,h,d,g);if(j){if(S){const X=j.parentNode,K=j.getAttribute("transform"),T=D.getAttribute("transform");K?D.setAttribute("transform",K):D.removeAttribute("transform"),T?X.setAttribute("transform",T):X.removeAttribute("transform"),D.removeAttribute("aria-label"),D.removeAttribute("aria-description"),D.removeAttribute("aria-hidden")}j.replaceWith(D)}return y.roots[v]=j=D,W==null&&(R==null?void 0:R.size)>1||g.dispatchValue(W==null?null:p[W]),D}function nt($){if(y.sticky||$.pointerType==="mouse"&&$.buttons===1)return;let[U,D]=MU($);U-=C,D-=I;const X=U<d.marginLeft||U>d.width-d.marginRight?1:e,K=D<d.marginTop||D>d.height-d.marginBottom?1:t;let T=null,L=o*o;for(const F of u){const Y=X*(P(F)-U),B=K*(N(F)-D),H=Y*Y+B*B;H<=L&&(T=F,L=H)}if(T!=null&&(e!==1||t!==1)){const F=P(T)-U,Y=N(T)-D;L=F*F+Y*Y}z(T,L)}function st($){$.pointerType==="mouse"&&W!=null&&(y.sticky&&y.roots.some(U=>U==null?void 0:U.contains($.target))||(y.sticky?(y.sticky=!1,y.renders.forEach(U=>U(null))):(y.sticky=!0,Q(W)),$.stopImmediatePropagation()))}function ot($){$.pointerType==="mouse"&&(y.sticky||z(null))}return _.addEventListener("pointerenter",nt),_.addEventListener("pointermove",nt),_.addEventListener("pointerdown",st),_.addEventListener("pointerleave",ot),Q(null)},l)}}function Rv(e){return Mv(1,1,e)}function Uu(e){return Mv(1,.01,e)}function Iv(e){return Mv(.01,1,e)}function dO({x1:e,x2:t,x:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function gO({y1:e,y2:t,y:n=e},i){return e&&t?r=>(e[r]+t[r])/2:n?r=>n[r]:()=>i}function mO(e){return ya(e)&&e.interval===void 0?void 0:"tabular-nums"}function xQ(e,t){let{label:n=e.label,tickSize:i=6,width:r=240,height:s=44+i,marginTop:o=18,marginRight:a=0,marginBottom:l=16+i,marginLeft:c=0,style:u,ticks:f=(r-c-a)/64,tickFormat:h,fontVariant:d=mO(e),round:g=!0,opacity:m,className:_}=t;const p=t0(t);_=vv(_),m=Ce(m)[1],h===null&&(h=()=>null);const y=Ht("svg",p).attr("class",`${_}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",s).attr("viewBox",`0 0 ${r} ${s}`).call(M=>M.append("style").text(`.${_}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${_}-ramp text {
  white-space: pre;
}`)).call(bv,u);let v=M=>M.selectAll(".tick line").attr("y1",o+l-s),w;const x=g?(M,k)=>M.rangeRound(k):(M,k)=>M.range(k),{type:b,domain:E,range:C,interpolate:I,scale:S,pivot:R}=e;if(I){const M=C===void 0?I:Rm(I.length===1?Tv(I):I,C);w=x(S.copy(),Ai(Je(c,r-a),Math.min(E.length+(R!==void 0),C===void 0?1/0:C.length)));const k=256,O=p.document.createElement("canvas");O.width=k,O.height=1;const A=O.getContext("2d");for(let P=0,N=k-1;P<k;++P)A.fillStyle=M(P/N),A.fillRect(P,0,1,1);y.append("image").attr("opacity",m).attr("x",c).attr("y",o).attr("width",r-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",O.toDataURL())}else if(b==="threshold"){const M=E,k=h===void 0?O=>O:typeof h=="string"?ec(h):h;w=x($w().domain([-1,C.length-1]),[c,r-a]),y.append("g").attr("fill-opacity",m).selectAll().data(C).enter().append("rect").attr("x",(O,A)=>w(A-1)).attr("y",o).attr("width",(O,A)=>w(A)-w(A-1)).attr("height",s-o-l).attr("fill",O=>O),f=se(M,(O,A)=>A),h=O=>k(M[O],O)}else w=x(Pm().domain(E),[c,r-a]),y.append("g").attr("fill-opacity",m).selectAll().data(E).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",s-o-l).attr("fill",S),v=()=>{};return y.append("g").attr("transform",`translate(0,${s-l})`).call(UY(w).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(i).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",be(d,"normal")).call(v).call(M=>M.select(".domain").remove()),n!==void 0&&y.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),y.node()}const Rg=Math.PI/180;function sc(e,{marker:t,markerStart:n=t,markerMid:i=t,markerEnd:r=t}={}){e.markerStart=Wp(n),e.markerMid=Wp(i),e.markerEnd=Wp(r)}function Wp(e){if(e==null||e===!1)return null;if(e===!0)return GT;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return WT("auto");case"arrow-reverse":return WT("auto-start-reverse");case"dot":return EQ;case"circle":case"circle-fill":return GT;case"circle-stroke":return TQ}throw new Error(`invalid marker: ${e}`)}function WT(e){return(t,n)=>Ht("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function EQ(e,t){return Ht("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function GT(e,t){return Ht("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function TQ(e,t){return Ht("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let CQ=0;function Df(e,t,{stroke:n},i){return pO(e,t,n&&(r=>n[r]),i)}function SQ(e,t,{stroke:n},i){return pO(e,t,n&&(([r])=>n[r]),i)}function pO(e,{markerStart:t,markerMid:n,markerEnd:i,stroke:r},s=()=>r,o){const a=new Map;function l(c){return function(u){const f=s(u);let h=a.get(c);h||a.set(c,h=new Map);let d=h.get(f);if(!d){const g=this.parentNode.insertBefore(c(f,o),this),m=`plot-marker-${++CQ}`;g.setAttribute("id",m),h.set(f,d=`url(#${m})`)}return d}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),i&&e.attr("marker-end",l(i))}function $f({inset:e,insetLeft:t,insetRight:n,...i}={}){return[t,n]=yO(e,t,n),{inset:e,insetLeft:t,insetRight:n,...i}}function zf({inset:e,insetTop:t,insetBottom:n,...i}={}){return[t,n]=yO(e,t,n),{inset:e,insetTop:t,insetBottom:n,...i}}function yO(e,t,n){return e===void 0&&t===void 0&&n===void 0?He?[1,0]:[.5,.5]:[t,n]}function _O(e,{interval:t}){return e={...If(e)},e.interval=ev(e.interval===void 0?t:e.interval),e}function s0(e,t,n,i){const{[e]:r,[`${e}1`]:s,[`${e}2`]:o}=n,{value:a,interval:l}=_O(r,n);if(a==null||l==null&&!i)return n;const c=ts(r);if(l==null){let d;const g={transform:m=>d||(d=kt(m,a)),label:c};return{...n,[e]:void 0,[`${e}1`]:s===void 0?g:s,[`${e}2`]:o===void 0?g:o}}let u,f;function h(d){return f!==void 0&&d===u?f:f=se(kt(u=d,a),g=>l.floor(g))}return t({...n,[e]:void 0,[`${e}1`]:s===void 0?{transform:h,label:c}:s,[`${e}2`]:o===void 0?{transform:d=>h(d).map(g=>l.offset(g)),label:c}:o})}function wO(e,t,n){const{[e]:i}=n,{value:r,interval:s}=_O(i,n);return r==null||s==null?n:t({...n,[e]:{label:ts(i),transform:o=>{const a=se(kt(o,r),c=>s.floor(c)),l=a.map(c=>s.offset(c));return a.map(yn(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function vO(e={}){return s0("x",$f,e,!0)}function bO(e={}){return s0("y",zf,e,!0)}function xO(e={}){return s0("x",$f,e)}function EO(e={}){return s0("y",zf,e)}function TO(e={}){return wO("x",$f,e)}function CO(e={}){return wO("y",zf,e)}const SO={ariaLabel:"rule",fill:null,stroke:"currentColor"};class MO extends re{constructor(t,n={}){const{x:i,y1:r,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(t,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},rc(n,"x"),SO),this.insetTop=Nt(a),this.insetBottom=Nt(l),sc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y1:c,y2:u}=i,{width:f,height:h,marginTop:d,marginRight:g,marginLeft:m,marginBottom:_}=r,{insetTop:p,insetBottom:y}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o},He,0).call(v=>v.selectAll().data(t).enter().append("line").call(le,this).attr("x1",l?w=>l[w]:(m+f-g)/2).attr("x2",l?w=>l[w]:(m+f-g)/2).attr("y1",c&&!ri(a)?w=>c[w]+p:d+p).attr("y2",u&&!ri(a)?a.bandwidth?w=>u[w]+a.bandwidth()-y:w=>u[w]-y:h-_-y).call(Ne,this,i).call(Df,this,i,s)).node()}}class RO extends re{constructor(t,n={}){const{x1:i,x2:r,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},rc(n,"y"),SO),this.insetRight=Nt(a),this.insetLeft=Nt(l),sc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{y:l,x1:c,x2:u}=i,{width:f,height:h,marginTop:d,marginRight:g,marginLeft:m,marginBottom:_}=r,{insetLeft:p,insetRight:y}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{y:l&&a},0,He).call(v=>v.selectAll().data(t).enter().append("line").call(le,this).attr("x1",c&&!ri(o)?w=>c[w]+p:m+p).attr("x2",u&&!ri(o)?o.bandwidth?w=>u[w]+o.bandwidth()-y:w=>u[w]-y:f-g-y).attr("y1",l?w=>l[w]:(d+h-_)/2).attr("y2",l?w=>l[w]:(d+h-_)/2).call(Ne,this,i).call(Df,this,i,s)).node()}}function jr(e,t){let{x:n=wt,y:i,y1:r,y2:s,...o}=EO(t);return[r,s]=IO(i,r,s),new MO(e,{...o,x:n,y1:r,y2:s})}function Hs(e,t){let{y:n=wt,x:i,x1:r,x2:s,...o}=xO(t);return[r,s]=IO(i,r,s),new RO(e,{...o,y:n,x1:r,x2:s})}function IO(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function o0(e,...t){let n=t.length;for(let i=0,r=!0;i<n;++i)typeof t[i]!="function"&&(r&&(e=e.slice(),r=!1),e.splice(i,2,e[i]+t[i]+e[i+1]),t.splice(i,1),--i,--n);return i=>{let r=e[0];for(let s=0;s<n;++s)r+=t[s](i)+e[s+1];return r}}const MQ={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},AO="­";class a0 extends re{constructor(t,n={}){const{x:i,y:r,text:s=es(t)&&RL(t)?wt:Ln,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:m,fontVariant:_,fontWeight:p,rotate:y}=n,[v,w]=Ce(y,0),[x,b]=LQ(g);if(super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:wK(v),optional:!0},text:{value:s,filter:jw,optional:!0}},n,MQ),this.rotate=w,this.textAnchor=be(a,"middle"),this.lineAnchor=Un(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=LO(f),this.monospace=!!h,this.fontFamily=en(d),this.fontSize=b,this.fontStyle=en(m),this.fontVariant=en(_),this.fontWeight=en(p),this.frameAnchor=Lf(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=FO(this),this.clipLine=NO(this)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,rotate:u,text:f,title:h,fontSize:d}=i,{rotate:g}=this,[m,_]=cr(this,r);return Ht("svg:g",s).call(he,this,r,s).call(PO,this,f,r).call(ie,this,{x:l&&o,y:c&&a}).call(p=>p.selectAll().data(t).enter().append("text").call(le,this).call(RQ,this,f,h).attr("transform",o0`translate(${l?y=>l[y]:m},${c?y=>c[y]:_})${u?y=>` rotate(${u[y]})`:g?` rotate(${g})`:""}`).call(mt,"font-size",d&&(y=>d[y])).call(Ne,this,i)).node()}}function LO(e){return e==null?null:Un(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function RQ(e,t,n,i){if(!n)return;const{lineAnchor:r,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(c){const u=a(aa(n[c])??"").map(l),f=u.length,h=r==="top"?.71:r==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let g=0;g<f;++g){if(++d,!u[g])continue;const m=this.ownerDocument.createElementNS(Qo.svg,"tspan");m.setAttribute("x",0),g===d-1?m.setAttribute("y",`${(h+g)*s}em`):m.setAttribute("dy",`${d*s}em`),m.textContent=u[g],this.appendChild(m),d=0}}else h&&this.setAttribute("y",`${h*s}em`),this.textContent=u[0];if(o&&!i&&u[0]!==n[c]){const d=this.ownerDocument.createElementNS(Qo.svg,"title");d.textContent=n[c],this.appendChild(d)}})}function Dl(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Di(t,n)),new a0(e,{...i,x:t,y:n})}function OO(e,{x:t=wt,...n}={}){return new a0(e,CO({...n,x:t}))}function kO(e,{y:t=wt,...n}={}){return new a0(e,TO({...n,y:t}))}function PO(e,t,n){mt(e,"text-anchor",t.textAnchor),mt(e,"font-family",t.fontFamily),mt(e,"font-size",t.fontSize),mt(e,"font-style",t.fontStyle),mt(e,"font-variant",t.fontVariant===void 0?IQ(n):t.fontVariant),mt(e,"font-weight",t.fontWeight)}function IQ(e){return e&&(Za(e)||yn(e))?"tabular-nums":void 0}const AQ=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function LQ(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),AQ.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function OQ(e,t,n){const i=[];let r,s=0;for(const[o,a,l]of kQ(e)){if(r===void 0&&(r=o),s>r&&n(e,r,a)>t&&(i.push(e.slice(r,s)+(e[s-1]===AO?"-":"")),r=o),l){i.push(e.slice(r,a)),r=void 0;continue}s=a}return i}function*kQ(e){let t=0,n=0;const i=e.length;for(;n<i;){let r=1;switch(e[n]){case AO:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++r;case`
`:yield[t,n,!0],n+=r,t=n;break;default:++n;break}}yield[t,n,!0]}const YT={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Av(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=oc(e,r))i+=YT[e[r]]??($O(e,r)?120:YT.e);return i}function Lv(e,t=0,n=e.length){let i=0;for(let r=t;r<n;r=oc(e,r))i+=$O(e,r)?200:100;return i}function FO({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const i=e?Lv:Av,r=t*100;return s=>OQ(s,r,i)}function NO({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return s=>s;const i=e?Lv:Av,r=t*100;switch(n){case"clip-start":return s=>UT(s,r,i,"");case"clip-end":return s=>BT(s,r,i,"");case"ellipsis-start":return s=>UT(s,r,i,ul);case"ellipsis-middle":return s=>PQ(s,r,i,ul);case"ellipsis-end":return s=>BT(s,r,i,ul)}}const ul="…";function $l(e,t,n,i){const r=[];let s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=oc(e,o);const c=n(e,o,a);if(s+c>t){for(s+=i;s>t&&o>0;)a=o,o=r.pop(),s-=n(e,o,a);return[o,t-s]}s+=c,r.push(o)}return[-1,0]}function BT(e,t,n,i){e=e.trim();const r=n(i),[s]=$l(e,t,n,r);return s<0?e:e.slice(0,s).trimEnd()+i}function PQ(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i)/2,[o,a]=$l(e,t/2,n,s),[l]=$l(e,r-t/2-a+s,n,-s);return l<0?i:e.slice(0,o).trimEnd()+i+e.slice(oc(e,l)).trimStart()}function UT(e,t,n,i){e=e.trim();const r=n(e);if(r<=t)return e;const s=n(i),[o]=$l(e,r-t+s,n,-s);return o<0?i:i+e.slice(oc(e,o)).trimStart()}const D_=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,VT=/\p{Extended_Pictographic}/uy;function oc(e,t){return t+=FQ(e,t)?2:1,DQ(e,t)&&(t=D_.lastIndex),NQ(e,t)?oc(e,t+1):t}function DO(e,t){return e.charCodeAt(t)<128}function FQ(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const i=e.charCodeAt(t+1);return i>=56320&&i<57344}return!1}function NQ(e,t){return e.charCodeAt(t)===8205}function DQ(e,t){return DO(e,t)?!1:(D_.lastIndex=t,D_.test(e))}function $O(e,t){return DO(e,t)?!1:(VT.lastIndex=t,VT.test(e))}const zO={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},WO=3.5,$Q=WO*5,GO={draw(e,t,n){const i=t*n/$Q;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-i,i-t),e.lineTo(0,-t),e.lineTo(i,i-t)}},YO={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},zQ=new Map([["arrow",GO],["spike",YO]]);function WQ(e){return e&&typeof e.draw=="function"}function GQ(e){if(WQ(e))return e;const t=zQ.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class l0 extends re{constructor(t,n={}){const{x:i,y:r,r:s=WO,length:o,rotate:a,shape:l=GO,anchor:c="middle",frameAnchor:u}=n,[f,h]=Ce(o,12),[d,g]=Ce(a,0);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,zO),this.r=+s,this.length=h,this.rotate=g,this.shape=GQ(l),this.anchor=Un(c,"anchor",["start","middle","end"]),this.frameAnchor=Lf(u)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,length:u,rotate:f}=i,{length:h,rotate:d,anchor:g,shape:m,r:_}=this,[p,y]=cr(this,r);return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(v=>v.selectAll().data(t).enter().append("path").call(le,this).attr("transform",o0`translate(${l?w=>l[w]:p},${c?w=>c[w]:y})${f?w=>` rotate(${f[w]})`:d?` rotate(${d})`:""}${g==="start"?"":g==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${h})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${h/2})`}`).attr("d",u?w=>{const x=Lr();return m.draw(x,u[w],_),x}:(()=>{const w=Lr();return m.draw(w,h,_),w})()).call(Ne,this,i)).node()}}function BO(e,t={}){let{x:n,y:i,...r}=t;return t.frameAnchor===void 0&&([n,i]=Di(n,i)),new l0(e,{...r,x:n,y:i})}function UO(e,t={}){const{x:n=wt,...i}=t;return new l0(e,{...i,x:n})}function VO(e,t={}){const{y:n=wt,...i}=t;return new l0(e,{...i,y:n})}function YQ(e,t={}){const{shape:n=YO,stroke:i=zO.stroke,strokeWidth:r=1,fill:s=i,fillOpacity:o=.3,anchor:a="start",...l}=t;return BO(e,{...l,shape:n,stroke:i,strokeWidth:r,fill:s,fillOpacity:o,anchor:a})}function io(e,t){return arguments.length<2&&!es(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function c0({anchor:e}={},t){return e===void 0?t[0]:Un(e,"anchor",t)}function XO(e){return c0(e,["left","right"])}function HO(e){return c0(e,["right","left"])}function jO(e){return c0(e,["bottom","top"])}function ZO(e){return c0(e,["top","bottom"])}function Ov(){const[e,t]=io(...arguments);return JO("y",XO(t),e,t)}function qO(){const[e,t]=io(...arguments);return JO("fy",HO(t),e,t)}function kv(){const[e,t]=io(...arguments);return QO("x",jO(t),e,t)}function KO(){const[e,t]=io(...arguments);return QO("fx",ZO(t),e,t)}function JO(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:g=e==="y"?6:0,tickPadding:m,tickRotate:_,x:p,margin:y,marginTop:v=y===void 0?20:y,marginRight:w=y===void 0?t==="right"?40:0:y,marginBottom:x=y===void 0?20:y,marginLeft:b=y===void 0?t==="left"?40:0:y,label:E,labelAnchor:C,labelArrow:I,labelOffset:S,...R}){return g=Nt(g),m=Nt(m),_=Nt(_),C!==void 0&&(C=Un(C,"labelAnchor",["center","top","bottom"])),I=f5(I),Pi(g&&!Ee(s)?BQ(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:_,x:p,...R}):null,Ee(l)?null:VQ(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:_,x:p,marginTop:v,marginRight:w,marginBottom:x,marginLeft:b,...R}),!Ee(l)&&E!==null?Dl([],a5({fill:l,fillOpacity:c,...R},function(M,k,O,A,P){const N=A[e],{marginTop:W,marginRight:j,marginBottom:V,marginLeft:Z}=e==="y"&&P.inset||P,z=C??(N.bandwidth?"center":"top"),Q=S??(t==="right"?j:Z)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-W:z==="bottom"?V-3:0,this.dx=t==="right"?Q:-Q,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[u5(e,N,{anchor:t,label:E,labelAnchor:z,labelArrow:I})]}}}})):null)}function QO(e,t,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:g=e==="x"?6:0,tickPadding:m,tickRotate:_,y:p,margin:y,marginTop:v=y===void 0?t==="top"?30:0:y,marginRight:w=y===void 0?20:y,marginBottom:x=y===void 0?t==="bottom"?30:0:y,marginLeft:b=y===void 0?20:y,label:E,labelAnchor:C,labelArrow:I,labelOffset:S,...R}){return g=Nt(g),m=Nt(m),_=Nt(_),C!==void 0&&(C=Un(C,"labelAnchor",["center","left","right"])),I=f5(I),Pi(g&&!Ee(s)?UQ(e,t,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:_,y:p,...R}):null,Ee(l)?null:XQ(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:_,y:p,marginTop:v,marginRight:w,marginBottom:x,marginLeft:b,...R}),!Ee(l)&&E!==null?Dl([],a5({fill:l,fillOpacity:c,...R},function(M,k,O,A,P){const N=A[e],{marginTop:W,marginRight:j,marginBottom:V,marginLeft:Z}=e==="x"&&P.inset||P,z=C??(N.bandwidth?"center":"right"),Q=S??(t==="top"?W:V)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-Q:Q,this.dx=z==="right"?j-3:z==="left"?3-Z:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[u5(e,N,{anchor:t,label:E,labelAnchor:z,labelArrow:I})]}}}})):null)}function BQ(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:h=0,y:d=e==="y"?void 0:null,...g}){return ac(VO,e,t,`${e}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:d,...g,dx:t==="left"?+h-He+ +u:+h+He-f,anchor:"start",length:l,shape:t==="left"?qQ:KQ})}function UQ(e,t,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:h=0,x:d=e==="x"?void 0:null,...g}){return ac(UO,e,t,`${e}-axis tick`,n,{strokeWidth:i,strokeLinejoin:s,strokeLinecap:r,facetAnchor:o,frameAnchor:a,x:d,...g,dy:t==="bottom"?+h-He-f:+h+He+ +u,anchor:"start",length:l,shape:t==="bottom"?jQ:ZQ})}function VQ(e,t,n,{facetAnchor:i=t+(e==="y"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*Rg):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:g=h,dx:m=0,y:_=e==="y"?void 0:null,...p}){return ac(kO,e,t,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,y:_,...p,dx:t==="left"?+m-s-a+ +d:+m+ +s+ +a-g},function(y,v,w,x,b){f===void 0&&(this.fontVariant=c5(y)),l===void 0&&(b.text=l5(y,v,w,x,t))})}function XQ(e,t,n,{facetAnchor:i=t+(e==="x"?"-empty":""),frameAnchor:r=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*Rg):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:g=h,dy:m=0,x:_=e==="x"?void 0:null,...p}){return ac(OO,e,t,`${e}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:o,x:_,...p,dy:t==="bottom"?+m+ +s+ +a-g:+m-s-a+ +d},function(y,v,w,x,b){f===void 0&&(this.fontVariant=c5(y)),l===void 0&&(b.text=l5(y,v,w,x,t))})}function t5(){const[e,t]=io(...arguments);return r5("y",XO(t),e,t)}function e5(){const[e,t]=io(...arguments);return r5("fy",HO(t),e,t)}function n5(){const[e,t]=io(...arguments);return s5("x",jO(t),e,t)}function i5(){const[e,t]=io(...arguments);return s5("fx",ZO(t),e,t)}function r5(e,t,n,{y:i=e==="y"?void 0:null,x:r=null,x1:s=t==="left"?r:null,x2:o=t==="right"?r:null,...a}){return ac(Hs,e,t,`${e}-grid`,n,{y:i,x1:s,x2:o,...o5(a)})}function s5(e,t,n,{x:i=e==="x"?void 0:null,y:r=null,y1:s=t==="top"?r:null,y2:o=t==="bottom"?r:null,...a}){return ac(jr,e,t,`${e}-grid`,n,{x:i,y1:s,y2:o,...o5(a)})}function o5({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:i=t,strokeWidth:r=1,...s}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...s}}function a5({fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},f){return[,e]=Rn(e),[,t]=Ce(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:f}}function ac(e,t,n,i,r,s,o){let a;function l(f,h,d,g,m,_){const p=f==null&&(t==="fx"||t==="fy"),{[t]:y}=g;if(!y)throw new Error(`missing scale: ${t}`);const v=y.domain();let{interval:w,ticks:x,tickFormat:b,tickSpacing:E=t==="x"?80:35}=s;if(typeof x=="string"&&h5(y)&&(w=x,x=void 0),x===void 0&&(x=ic(w,y.type)??HQ(y,E)),f==null){if(es(x))f=In(x);else if(ja(x))f=Gp(x,...Ye(v));else if(y.interval){let I=y.interval;if(y.ticks){const[S,R]=Ye(v),M=(R-S)/I[Mf];I=_T(I,M/x)??I,f=Gp(I,S,R)}else{f=v;const S=f.length;I=_T(I,S/x)??I,I!==y.interval&&(f=Gp(I,...Ye(f)))}if(I===y.interval){const S=Math.round(f.length/x);S>1&&(f=f.filter((R,M)=>M%S===0))}}else y.ticks?f=y.ticks(x):f=v;if(!y.ticks&&f.length&&f!==v){const I=new hf(v);f=f.filter(S=>I.has(S)),f.length||Gr(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[Qr(f)]:a[t]={scale:t,value:wt}}o==null||o.call(this,y,f,x,b,a);const C=Object.fromEntries(Object.entries(a).map(([I,S])=>[I,{...S,value:kt(f,S.value)}]));return p&&(h=_.filterFacets(f,C)),{data:f,facets:h,channels:C}}const c=An(s).initializer,u=e(r,An({...s,initializer:l},c));return r==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function HQ(e,t){const[n,i]=Ye(e.range());return(i-n)/t}function l5(e,t,n,i,r){return{value:Pv(e,t,n,i,r)}}function Pv(e,t,n,i,r){return typeof i=="function"?i:i===void 0&&t&&yn(t)?uK(t,r)??aa:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,i):i===void 0?aa:typeof i=="string"?(yn(e.domain())?Cf:ec)(i):Bn(i)}function Gp(e,t,n){return e.range(t,e.offset(e.floor(n)))}const jQ={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},ZQ={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},qQ={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},KQ={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function c5(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function JQ(e){return Math.sign(Nl(e.domain()))*Math.sign(Nl(e.range()))}function u5(e,t,{anchor:n,label:i=t.label,labelAnchor:r,labelArrow:s}={}){if(!(i==null||i.inferred&&h5(t)&&/^(date|time|year)$/i.test(i))){if(i=String(i),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(i)),!s)return i;if(s===!0){const o=JQ(t);o&&(s=/x$/.test(e)||r==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function f5(e="auto"){return Ee(e)?!1:typeof e=="boolean"?e:Un(e,"labelArrow",["auto","up","right","down","left"])}function h5(e){return yn(e.domain())}function XT(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function QQ(e,{opacity:t,...n}={}){if(!ya(e)&&!uO(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return d5(e,n,(i,r,s,o)=>i.append("svg").attr("width",s).attr("height",o).attr("fill",r.scale).attr("fill-opacity",Ce(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function ttt(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:Ee(t)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[f,h]=Rn(t),[d,g]=Rn(i),m=XT(l,f),_=XT(l,d),p=o*o*Math.PI;return n=Ce(n)[1],r=Ce(r)[1],s=Ce(s)[1],d5(e,a,(y,v,w,x)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",x).attr("fill",f==="color"?b=>m.scale(b):h).attr("fill-opacity",n).attr("stroke",d==="color"?b=>_.scale(b):g).attr("stroke-opacity",r).attr("stroke-width",s).append("path").attr("d",b=>{const E=Lr();return e.scale(b).draw(E,p),E}))}function d5(e,t={},n){let{columns:i,tickFormat:r,fontVariant:s=mO(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:f,width:h}=t;const d=t0(t);u=vv(u),r=Pv(e.scale,e.domain,void 0,r);const g=Ht("div",d).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,g.style("columns",i).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,l).call(_=>_.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,g.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,l).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),g.call(_=>_.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",c?`${+c}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",be(s,"normal")).call(bv,f).node()}const Ig=new Map([["symbol",ttt],["color",g5],["opacity",itt]]);function ett(e={}){for(const[t,n]of Ig){const i=e[t];if(Xo(i)){const r=t0(e);let s;if(t==="symbol"){const{fill:o,stroke:a=o===void 0&&Xo(e.color)?"color":void 0}=e;s={fill:o,stroke:a}}return n(F_(t,i,s),Fv(r,i,e),o=>Xo(e[o])?F_(o,e[o]):null)}}throw new Error("unknown legend type; no scale found")}function ntt(e,t,n={}){return(i,r)=>{if(!Ig.has(i))throw new Error(`unknown legend type: ${i}`);if(i in e)return Ig.get(i)(e[i],Fv(t,n[i],r),s=>e[s])}}function Fv({className:e,...t},{label:n,ticks:i,tickFormat:r}={},s){return SK(s,{className:e,...t},{label:n,ticks:i,tickFormat:r})}function g5(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return QQ(e,n);case"ramp":return xQ(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function itt({type:e,interpolate:t,...n},{legend:i=!0,color:r=rr(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return g5({type:e,...n,interpolate:rtt(r)},{legend:i,...s})}function rtt(e){const{r:t,g:n,b:i}=rr(e)||rr(0,0,0);return r=>`rgba(${t},${n},${i},${r})`}function stt(e,t,n){const i=[];for(const[r,s]of Ig){const o=n[r];if(o!=null&&o.legend&&r in e){const a=s(e[r],Fv(t,e[r],o),l=>e[l]);a!=null&&i.push(a)}}return i}const ott={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},att={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class m5 extends re{constructor(t={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:s=i,insetBottom:o=i,insetLeft:a=i,rx:l,ry:c}=t;super(ou,void 0,t,n==null?ott:att),this.anchor=xL(n,"anchor",["top","right","bottom","left"]),this.insetTop=Nt(r),this.insetRight=Nt(s),this.insetBottom=Nt(o),this.insetLeft=Nt(a),this.rx=Nt(l),this.ry=Nt(c)}render(t,n,i,r,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:f}=r,{anchor:h,insetTop:d,insetRight:g,insetBottom:m,insetLeft:_,rx:p,ry:y}=this,v=c+_,w=u-a-g,x=o+d,b=f-l-m;return Ht(h?"svg:line":"svg:rect",s).datum(0).call(he,this,r,s).call(le,this).call(Ne,this,i).call(ie,this,{}).call(h==="left"?E=>E.attr("x1",v).attr("x2",v).attr("y1",x).attr("y2",b):h==="right"?E=>E.attr("x1",w).attr("x2",w).attr("y1",x).attr("y2",b):h==="top"?E=>E.attr("x1",v).attr("x2",w).attr("y1",x).attr("y2",x):h==="bottom"?E=>E.attr("x1",v).attr("x2",w).attr("y1",b).attr("y2",b):E=>E.attr("x",v).attr("y",x).attr("width",w-v).attr("height",b-x).attr("rx",p).attr("ry",y)).node()}}function Nv(e){return new m5(e)}const Yp={ariaLabel:"tip",fill:"white",stroke:"currentColor"},ltt=new Set(["geometry","href","src","ariaLabel","scales"]);class p5 extends re{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&es(t)&&RL(t)&&(n={...n,title:wt});const{x:i,y:r,x1:s,x2:o,y1:a,y2:l,anchor:c,monospace:u,fontFamily:f=u?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:d,fontVariant:g,fontWeight:m,lineHeight:_=1,lineWidth:p=20,frameAnchor:y,format:v,textAnchor:w="start",textOverflow:x,textPadding:b=8,title:E,pointerSize:C=12,pathFilter:I="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:s!=null&&o!=null?null:i,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:r,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:E,optional:!0}},n,Yp),this.anchor=IL(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=Lf(y),this.textAnchor=be(w,"middle"),this.textPadding=+b,this.pointerSize=+C,this.pathFilter=en(I),this.lineHeight=+_,this.lineWidth=+p,this.textOverflow=LO(x),this.monospace=!!u,this.fontFamily=en(f),this.fontSize=Nt(h),this.fontStyle=en(d),this.fontVariant=en(g),this.fontWeight=en(m);for(const S in Yp)S in this.channels&&(this[S]=Yp[S]);this.splitLines=FO(this),this.clipLine=NO(this),this.format={...v}}render(t,n,i,r,s){const o=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:f,document:h}=s,{anchor:d,monospace:g,lineHeight:m,lineWidth:_}=this,{textPadding:p,pointerSize:y,pathFilter:v}=this,{marginTop:w,marginLeft:x}=r,{x1:b,y1:E,x2:C,y2:I,x:S=b??C,y:R=E??I}=i,M=c?c(t.fx)-x:0,k=u?u(t.fy)-w:0,[O,A]=cr(this,r),P=dO(i,O),N=gO(i,A),W=g?Lv:Av,j=W(ul);let V,Z;"title"in i?(V=i.channels,Z=dtt):(V=htt.call(this,i,n),Z=gtt);const z=Ht("svg:g",s).call(he,this,r,s).call(PO,this).call(ie,this,{x:S&&a,y:R&&l}).call(st=>st.selectAll().data(t).enter().append("g").attr("transform",ot=>`translate(${Math.round(P(ot))},${Math.round(N(ot))})`).call(le,this).call(ot=>ot.append("path").attr("filter",v)).call(ot=>ot.append("text").each(function($){const U=Ds(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const D=Z.call(o,$,t,V,n,i);if(typeof D=="string")for(const X of o.splitLines(D))Q(U,{value:o.clipLine(X)});else{const X=new Set;for(const K of D){const{label:T=""}=K;T&&X.has(T)||(X.add(T),Q(U,K))}}})));function Q(st,{label:ot,value:$,color:U,opacity:D}){ot??(ot=""),$??($="");const X=U!=null||D!=null;let K,T=_*100;const[L]=$l(ot,T,W,j);if(L>=0)ot=ot.slice(0,L).trimEnd()+ul,K=$.trim(),$="";else{(ot||!$&&!X)&&($=" "+$);const[Y]=$l($,T-W(ot),W,j);Y>=0&&($=$.slice(0,Y).trimEnd()+ul,K=$.trim())}const F=st.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");ot&&F.append("tspan").attr("font-weight","bold").text(ot),$&&F.append(()=>h.createTextNode($)),X&&F.append("tspan").text(" ■").attr("fill",U).attr("fill-opacity",D).style("user-select","none"),K&&F.append("title").text(K)}function nt(){const{width:st,height:ot}=r.facet??r;z.selectChildren().each(function($){let{x:U,width:D,height:X}=this.getBBox();D=Math.round(D),X=Math.round(X);let K=d;if(K===void 0){K=o.previousAnchor;const F=P($)+M,Y=N($)+k,B=F+D+p*2<st,H=F-D-p*2>0,rt=Y+X+y+p*2+7<ot,J=Y-X-y-p*2>0,tt=(/-left$/.test(K)?B||!H:B&&!H)?"left":"right",q=(/^top-/.test(K)?rt||!J:rt&&!J)?"top":"bottom";K=o.previousAnchor=`${q}-${tt}`}const T=this.firstChild,L=this.lastChild;if(T.setAttribute("d",ftt(K,y,p,D,X)),U)for(const F of L.childNodes)F.setAttribute("x",-U);L.setAttribute("y",`${+ctt(K,L.childNodes.length,m).toFixed(6)}em`),L.setAttribute("transform",`translate(${utt(K,y,p,D,X)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(nt):typeof requestAnimationFrame<"u"&&requestAnimationFrame(nt)),z.node()}}function y5(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Di(t,n)),new p5(e,{...i,x:t,y:n})}function ctt(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function utt(e,t,n,i,r){switch(e){case"middle":return[-i/2,r/2];case"top-left":return[n,t+n];case"top":return[-i/2,t/2+n];case"top-right":return[-i-n,t+n];case"right":return[-t/2-i-n,r/2];case"bottom-left":return[n,-t-n];case"bottom":return[-i/2,-t/2-n];case"bottom-right":return[-i-n,-t-n];case"left":return[n+t/2,r/2]}}function ftt(e,t,n,i,r){const s=i+n*2,o=r+n*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function htt({channels:e},t){var r,s;const n={};let i=this.format;i=HT(i,e,"x"),i=HT(i,e,"y"),this.format=i;for(const o in i){const a=i[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=L_(e,o);l&&(n[o]=l)}}for(const o in e){if(o in n||o in i||ltt.has(o))continue;const a=L_(e,o);a&&(n[o]=a)}this.facet&&(t.fx&&!("fx"in i)&&(n.fx=!0),t.fy&&!("fy"in i)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const l=((r=n[o])==null?void 0:r.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(yn(l)?Cf:ec)(a)}else if(a===void 0||a===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?Pv(l,l.domain()):aa}}return n}function HT(e,t,n){if(!(n in e))return e;const i=`${n}1`,r=`${n}2`;if((i in e||!(i in t))&&(r in e||!(r in t)))return e;const s=Object.entries(e),o=e[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[i,o],[r,o]),Object.fromEntries(s)}function dtt(e,t,{title:n}){return aa(n.value[e],e)}function*gtt(e,t,n,i,r){for(const s in n){if(s==="fx"||s==="fy"){yield{label:Ag(i,n,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:ZT(i,n,"x"),value:jT(this.format.x2,n.x1,o,e)};else if(s==="y2"&&"y1"in n)yield{label:ZT(i,n,"y"),value:jT(this.format.y2,n.y1,o,e)};else{const a=o.value[e],l=o.scale;if(!gn(a)&&l==null)continue;yield{label:Ag(i,n,s),value:this.format[s](a,e),color:l==="color"?r[s][e]:null,opacity:l==="opacity"?r[s][e]:null}}}}function jT(e,t,n,i){var r;return(r=n.hint)!=null&&r.length?`${e(n.value[i]-t.value[i],i)}`:`${e(t.value[i],i)}–${e(n.value[i],i)}`}function ZT(e,t,n){const i=Ag(e,t,`${n}1`,n),r=Ag(e,t,`${n}2`,n);return i===r?i:`${i}–${r}`}function Ag(e,t,n,i=n){const r=t[n],s=e[(r==null?void 0:r.scale)??n];return String((s==null?void 0:s.label)??(r==null?void 0:r.label)??i)}function _5(e={}){var j;const{facet:t,style:n,title:i,subtitle:r,caption:s,ariaLabel:o,ariaDescription:a}=e,l=vv(e.className),c=e.marks===void 0?[]:KT(e.marks);c.push(...xtt(c));const u=vtt(t,e),f=new Map;for(const V of c){const Z=JT(V,u,e);Z&&f.set(V,Z)}const h=new Map;u&&Ac(h,[u],e),Ac(h,f,e);const d=KT(Ett(c,h,e));for(const V of d){const Z=JT(V,u,e);Z&&f.set(V,Z)}c.unshift(...d);let g=lQ(h,e);if(g!==void 0){const V=u?zp(g,u):void 0;for(const z of c){if(z.facet===null||z.facet==="super")continue;const Q=f.get(z);Q!==void 0&&(Q.facetsIndex=z.fx!=null||z.fy!=null?zp(g,Q):V)}const Z=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((Q,nt)=>{(Q==null?void 0:Q.length)>0&&Z.add(nt)});g.forEach(0<Z.size&&Z.size<g.length?(z,Q)=>z.empty=!Z.has(Q):z=>z.empty=!1);for(const z of c)if(z.facet==="exclude"){const Q=f.get(z);Q!==void 0&&(Q.facetsIndex=fQ(Q.facetsIndex))}}for(const V of me.keys())Xo(e[V])&&V!=="fx"&&V!=="fy"&&h.set(V,[]);const m=new Map;for(const V of c){if(m.has(V))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:Z,channels:z}=f.get(V)??{},{data:Q,facets:nt,channels:st}=V.initialize(Z,z,e);Dv(st,e),m.set(V,{data:Q,facets:nt,channels:st})}const _=P_(Ac(h,m,e),e),p=oQ(_,c,e);JJ(_,p);const y=kT(_),{fx:v,fy:w}=y,x=v||w?oO(_,p):p,b=v||w?Att(y,p):p,E=t0(e),C=E.document,I=Cm("svg").call(C.documentElement);let S=I;E.ownerSVGElement=I,E.className=l,E.projection=hJ(e,x),E.filterFacets=(V,Z)=>zp(g,{channels:Z,groups:Sv(V,Z)}),E.getMarkState=V=>{const Z=m.get(V),z=f.get(V);return{...Z,channels:{...Z.channels,...z==null?void 0:z.channels}}},E.dispatchValue=V=>{S.value!==V&&(S.value=V,S.dispatchEvent(new Event("input",{bubbles:!0})))};const R=new Set;for(const[V,Z]of m)if(V.initializer!=null){const z=V.facet==="super"?b:x,Q=V.initializer(Z.data,Z.facets,Z.channels,y,z,E);if(Q.data!==void 0&&(Z.data=Q.data),Q.facets!==void 0&&(Z.facets=Q.facets),Q.channels!==void 0){const{fx:nt,fy:st,...ot}=Q.channels;wtt(ot),Object.assign(Z.channels,ot);for(const $ of Object.values(ot)){const{scale:U}=$;U!=null&&!RK(me.get(U))&&(w5($,e),R.add(U))}(nt!=null||st!=null)&&f.set(V,!0)}}if(R.size){const V=new Map;Ac(V,m,e,nt=>R.has(nt)),Ac(h,m,e,nt=>R.has(nt));const Z=Itt(P_(V,e),_),{scales:z,...Q}=kT(Z);Object.assign(_,Z),Object.assign(y,Q),Object.assign(y.scales,z)}let M,k;g!==void 0&&(M={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},g=cQ(g,M),k=uQ(v,w,p));for(const[V,Z]of m)Z.values=V.scale(Z.channels,y,E);const{width:O,height:A}=p;Ds(I).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",O).attr("height",A).attr("viewBox",`0 0 ${O} ${A}`).attr("aria-label",o).attr("aria-description",a).call(V=>V.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(bv,n);for(const V of c){const{channels:Z,values:z,facets:Q}=m.get(V);if(g===void 0||V.facet==="super"){let nt=null;if(Q&&(nt=Q[0],nt=V.filter(nt,Z,z),nt.length===0))continue;const st=V.render(nt,y,z,b,E);if(st==null)continue;I.appendChild(st)}else{let nt;for(const st of g){if(!(((j=V.facetAnchor)==null?void 0:j.call(V,g,M,st))??!st.empty))continue;let ot=null;if(Q){const U=f.has(V);if(ot=Q[U?st.i:0],ot=V.filter(ot,Z,z),ot.length===0)continue;!U&&ot===Q[0]&&(ot=Ho(ot)),ot.fx=st.x,ot.fy=st.y,ot.fi=st.i}const $=V.render(ot,y,z,x,E);if($!=null){(nt??(nt=Ds(I).append("g"))).append(()=>$).datum(st);for(const U of["aria-label","aria-description","aria-hidden","transform"])$.hasAttribute(U)&&(nt.attr(U,$.getAttribute(U)),$.removeAttribute(U))}}nt==null||nt.selectChildren().attr("transform",k)}}const P=stt(_,E,e),{figure:N=i!=null||r!=null||s!=null||P.length>0}=e;N&&(S=C.createElement("figure"),S.className=`${l}-figure`,S.style.maxWidth="initial",i!=null&&S.append(qT(C,i,"h2")),r!=null&&S.append(qT(C,r,"h3")),S.append(...P,I),s!=null&&S.append(mtt(C,s))),S.scale=sQ(y.scales),S.legend=ntt(_,E,e);const W=nJ();return W>0&&Ds(I).append("text").attr("x",O).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${W.toLocaleString("en-US")} warning${W===1?"":"s"}. Please check the console.`),S}function qT(e,t,n){if(t.ownerDocument)return t;const i=e.createElement(n);return i.append(t),i}function mtt(e,t){const n=e.createElement("figcaption");return n.append(t),n}function ptt({marks:e=[],...t}={}){return _5({...t,marks:[...e,this]})}re.prototype.plot=ptt;function KT(e){return e.flat(1/0).filter(t=>t!=null).map(ytt)}function ytt(e){return typeof e.render=="function"?e:new _tt(e)}class _tt extends re{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Dv(e,t){for(const n in e)w5(e[n],t);return e}function w5(e,t){const{scale:n,transform:i=!0}=e;if(n==null||!i)return;const{type:r,percent:s,interval:o,transform:a=s?l=>l*100:ML(o,r)}=t[n]??{};a!=null&&(e.value=se(e.value,a),e.transform=!1)}function wtt(e){for(const t in e)DL(t,e[t])}function Ac(e,t,n,i=gK){var r,s;for(const{channels:o}of t.values())for(const a in o){const l=o[a],{scale:c}=l;if(c!=null&&i(c))if(c==="projection"){if(!mJ(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,f=((s=n.y)==null?void 0:s.domain)===void 0;if(u||f){const[h,d]=yJ(l);u&&Bp(e,"x",h),f&&Bp(e,"y",d)}}}else Bp(e,c,l)}return e}function Bp(e,t,n){const i=e.get(t);i!==void 0?i.push(n):e.set(t,[n])}function vtt(e,t){if(e==null)return;const{x:n,y:i}=e;if(n==null&&i==null)return;const r=In(e.data);if(r==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=Yu(r,{value:n,scale:"fx"})),i!=null&&(s.fy=Yu(r,{value:i,scale:"fy"})),Dv(s,t);const o=Sv(r,s);return{channels:s,groups:o,data:e.data}}function JT(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:i,fy:r}=e;if(i!=null||r!=null){const c=In(e.data??i??r);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const u={};return i!=null&&(u.fx=Yu(c,{value:i,scale:"fx"})),r!=null&&(u.fy=Yu(c,{value:r,scale:"fy"})),Dv(u,n),{channels:u,groups:Sv(c,u)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=In(e.data))==null?void 0:l.length)===a.length&&Gr(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function btt(e,t={}){return An({...t,x:null,y:null},(n,i,r,s,o,a)=>a.getMarkState(e))}function xtt(e){const t=[];for(const n of e){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r}=i;r=/^x$/i.test(r)?Uu:/^y$/i.test(r)?Iv:Rv,i=r(btt(n,i)),i.title=null;const s=y5(n.data,i);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function Ett(e,t,n){let{projection:i,x:r={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:f=l,grid:h}=u,x:{axis:d=l,grid:g=d===null?null:c}=r,y:{axis:m=l,grid:_=m===null?null:c}=s,fx:{axis:p=f,grid:y=p===null?null:h}=o,fy:{axis:v=f,grid:w=v===null?null:h}=a}=n;(i||!Xo(r)&&!QT("x",e))&&(d=g=null),(i||!Xo(s)&&!QT("y",e))&&(m=_=null),t.has("fx")||(p=y=null),t.has("fy")||(v=w=null),d===void 0&&(d=!Fh(e,"x")),m===void 0&&(m=!Fh(e,"y")),p===void 0&&(p=!Fh(e,"fx")),v===void 0&&(v=!Fh(e,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),p===!0&&(p=d==="top"||d===null?"bottom":"top"),v===!0&&(v=m==="right"||m===null?"left":"right");const x=[];return Ph(x,w,e5,a),kh(x,v,qO,"right","left",u,a),Ph(x,y,i5,o),kh(x,p,KO,"top","bottom",u,o),Ph(x,_,t5,s),kh(x,m,Ov,"left","right",n,s),Ph(x,g,n5,r),kh(x,d,kv,"bottom","top",n,r),x}function kh(e,t,n,i,r,s,o){if(!t)return;const a=Ttt(t);o=Ctt(a?i:t,s,o);const{line:l}=o;(n===Ov||n===kv)&&l&&!Fl(l)&&e.push(Nv(Stt(o))),e.push(n(o)),a&&e.push(n({...o,anchor:r,label:null}))}function Ph(e,t,n,i){!t||Fl(t)||e.push(n(Mtt(t,i)))}function Ttt(e){return/^\s*both\s*$/i.test(e)}function Ctt(e,t,{line:n=t.line,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:g=t.labelArrow,labelOffset:m}){return{anchor:e,line:n,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h,labelAnchor:d,labelArrow:g,labelOffset:m}}function Stt(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function Mtt(e,{stroke:t=Af(e)?e:void 0,ticks:n=Rtt(e)?e:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:s}){return{stroke:t,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:s}}function Rtt(e){switch(typeof e){case"number":return!0;case"string":return!Af(e)}return es(e)||typeof(e==null?void 0:e.range)=="function"}function Fh(e,t){const n=`${t}-axis `;return e.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function QT(e,t){for(const n of t)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===e||r==="projection")return!0}return!1}function Itt(e,t){for(const n in e){const i=e[n],r=t[n];i.label===void 0&&r&&(i.label=r.label)}return e}function Att({fx:e,fy:t},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=Cv(n),c=e&&tC(e),u=t&&tC(t);return{marginTop:t?u[0]:i,marginRight:e?a-c[1]:r,marginBottom:t?l-u[1]:s,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function tC(e){const t=e.domain();let n=e(t[0]),i=e(t[t.length-1]);return i<n&&([n,i]=[i,n]),[n,i+e.bandwidth()]}const Ltt=new Map([["basis",Yq],["basis-closed",Bq],["basis-open",Uq],["bundle",Vq],["bump-x",Lq],["bump-y",Oq],["cardinal",Xq],["cardinal-closed",Hq],["cardinal-open",jq],["catmull-rom",Zq],["catmull-rom-closed",qq],["catmull-rom-open",Kq],["linear",Sf],["linear-closed",Jq],["monotone-x",Qq],["monotone-y",tK],["natural",eK],["step",nK],["step-after",rK],["step-before",iK]]);function $v(e=Sf,t){if(typeof e=="function")return e;const n=Ltt.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function v5(e=zl,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?zl:$v(e,t)}function zl(e){return Sf(e)}function Ms(e={y:"count"},t={}){[e,t]=Yv(e,t);const{x:n,y:i}=t;return Gv(Lg(n,t,wt),null,null,i,e,$f(t))}function Rs(e={x:"count"},t={}){[e,t]=Yv(e,t);const{x:n,y:i}=t;return Gv(null,Lg(i,t,wt),n,null,e,zf(t))}function Eo(e={fill:"count"},t={}){[e,t]=Yv(e,t);const{x:n,y:i}=Ott(t);return Gv(n,i,null,null,e,$f(zf(t)))}function b5(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=pv}=n,r={filter:null};return n[t]!=null&&(r[t]=i),n[`${t}1`]!=null&&(r[`${t}1`]=i),n[`${t}2`]!=null&&(r[`${t}2`]=i),e(r,n)}function zv(e={}){return b5(Ms,"y",rc(e,"x"))}function Wv(e={}){return b5(Rs,"x",rc(e,"y"))}function Gv(e,t,n,i,{data:r=mv,filter:s=Sg,sort:o,reverse:a,...l}={},c={}){e=eC(e),t=eC(t),l=ktt(l,c),r=C5(r,wt),o=o==null?void 0:E5("sort",o,c),s=s==null?void 0:T5("filter",s,c),n!=null&&Ps(l,"x","x1","x2")&&(n=null),i!=null&&Ps(l,"y","y1","y2")&&(i=null);const[u,f]=vn(e),[h,d]=vn(e),[g,m]=vn(t),[_,p]=vn(t),[y,v]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[w,x]=vn(y),{x:b,y:E,z:C,fill:I,stroke:S,x1:R,x2:M,y1:k,y2:O,domain:A,cumulative:P,thresholds:N,interval:W,...j}=c,[V,Z]=vn(C),[z]=Rn(I),[Q]=Rn(S),[nt,st]=vn(z),[ot,$]=vn(Q);return{..."z"in c&&{z:V||C},..."fill"in c&&{fill:nt||I},..."stroke"in c&&{stroke:ot||S},...lr(j,(U,D,X)=>{const K=Cg(kt(U,y),X==null?void 0:X[v]),T=kt(U,C),L=kt(U,z),F=kt(U,Q),Y=gv(l,{z:T,fill:L,stroke:F}),B=[],H=[],rt=K&&x([]),J=T&&Z([]),tt=L&&st([]),q=F&&$([]),ct=e&&f([]),at=e&&d([]),ut=t&&m([]),ft=t&&p([]),xt=Ntt(e==null?void 0:e(U),t==null?void 0:t(U));let Ot=0;for(const Tt of l)Tt.initialize(U);o&&o.initialize(U),s&&s.initialize(U);for(const Tt of D){const jt=[];for(const ye of l)ye.scope("facet",Tt);o&&o.scope("facet",Tt),s&&s.scope("facet",Tt);for(const[ye,ce]of cl(Tt,Y))for(const[rs,Vn]of cl(ce,K))for(const[sn,ue]of xt(Vn))if(!(s&&!s.reduce(sn,ue))){jt.push(Ot++),H.push(r.reduceIndex(sn,U,ue)),K&&rt.push(rs),T&&J.push(Y===T?ye:T[(sn.length>0?sn:Vn)[0]]),L&&tt.push(Y===L?ye:L[(sn.length>0?sn:Vn)[0]]),F&&q.push(Y===F?ye:F[(sn.length>0?sn:Vn)[0]]),ct&&(ct.push(ue.x1),at.push(ue.x2)),ut&&(ut.push(ue.y1),ft.push(ue.y2));for(const on of l)on.reduce(sn,ue);o&&o.reduce(sn)}B.push(jt)}return FL(B,o,a),{data:H,facets:B}}),...!Ps(l,"x")&&(u?{x1:u,x2:h,x:Tg(u,h)}:{x:b,x1:R,x2:M}),...!Ps(l,"y")&&(g?{y1:g,y2:_,y:Tg(g,_)}:{y:E,y1:k,y2:O}),...w&&{[v]:w},...Object.fromEntries(l.map(({name:U,output:D})=>[U,D]))}}function Yv({cumulative:e,domain:t,thresholds:n,interval:i,...r},s){return[r,{cumulative:e,domain:t,thresholds:n,interval:i,...s}]}function Lg(e,{cumulative:t,domain:n,thresholds:i,interval:r},s){return e={...If(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=i),e.interval===void 0&&(e.interval=r),e.value===void 0&&(e.value=s),e.thresholds=x5(e.thresholds,e.interval),e}function Ott(e){let{x:t,y:n}=e;return t=Lg(t,e),n=Lg(n,e),[t.value,n.value]=Di(t.value,n.value),{x:t,y:n}}function eC(e){if(e==null)return;const{value:t,cumulative:n,domain:i=Ye,thresholds:r}=e,s=o=>{let a=kt(o,t),l;if(yn(a)||Ftt(r)){a=se(a,bL,Float64Array);let[u,f]=typeof i=="function"?i(a):i,h=typeof r=="function"&&!ja(r)?r(a,u,f):r;typeof h=="number"&&(h=v3(u,f,h)),ja(h)&&(i===Ye&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f))),l=h}else{a=Tn(a);let[u,f]=typeof i=="function"?i(a):i,h=typeof r=="function"&&!ja(r)?r(a,u,f):r;if(typeof h=="number")if(i===Ye){let d=Ru(u,f,h);if(isFinite(d))if(d>0){let g=Math.round(u/d),m=Math.round(f/d);g*d<=u||--g,m*d>f||++m;let _=m-g+1;h=new Float64Array(_);for(let p=0;p<_;++p)h[p]=(g+p)*d}else if(d<0){d=-d;let g=Math.round(u*d),m=Math.round(f*d);g/d<=u||--g,m/d>f||++m;let _=m-g+1;h=new Float64Array(_);for(let p=0;p<_;++p)h[p]=(g+p)/d}else h=[u];else h=[u]}else h=Bs(u,f,h);else ja(h)&&(i===Ye&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f)));l=h}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?$tt:n>0?Dtt:Bv)(c,l,a),c};return s.label=ts(t),s}function x5(e,t,n=nC){if(e===void 0)return t===void 0?n:ic(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return OY;case"scott":return TI;case"sturges":return yw;case"auto":return nC}return qw(e)}return e}function ktt(e,t){return fv(e,t,E5)}function E5(e,t,n){return hv(e,t,n,T5)}function T5(e,t,n){return dv(e,t,n,C5)}function C5(e,t){return Qm(e,t,Ptt)}function Ptt(e){switch(`${e}`.toLowerCase()){case"x":return ztt;case"x1":return Gtt;case"x2":return Ytt;case"y":return Wtt;case"y1":return Btt;case"y2":return Utt}throw new Error(`invalid bin reduce: ${e}`)}function nC(e,t,n){return Math.min(200,TI(e,t,n))}function Ftt(e){return _K(e)||es(e)&&yn(e)}function Ntt(e,t){return e&&t?function*(n){const i=e.bin(n);for(const[r,[s,o]]of e.entries()){const a=t.bin(i[r]);for(const[l,[c,u]]of t.entries())yield[a[l],{x1:s,y1:c,x2:o,y2:u}]}}:e?function*(n){const i=e.bin(n);for(const[r,[s,o]]of e.entries())yield[i[r],{x1:s,x2:o}]}:function*(n){const i=t.bin(n);for(const[r,[s,o]]of t.entries())yield[i[r],{y1:s,y2:o}]}}function Bv(e,t,n){return t=Tn(t),i=>{var s;const r=e.map(()=>[]);for(const o of i)(s=r[bm(t,n[o])-1])==null||s.push(o);return r}}function Dtt(e,t,n){const i=Bv(e,t,n);return r=>{const s=i(r);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],c=s[o];for(const u of l)c.push(u)}return s}}function $tt(e,t,n){const i=Bv(e,t,n);return r=>{const s=i(r);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const c of a)l.push(c)}return s}}function S5(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const ztt={reduceIndex(e,t,{x1:n,x2:i}){return S5(n,i)}},Wtt={reduceIndex(e,t,{y1:n,y2:i}){return S5(n,i)}},Gtt={reduceIndex(e,t,{x1:n}){return n}},Ytt={reduceIndex(e,t,{x2:n}){return n}},Btt={reduceIndex(e,t,{y1:n}){return n}},Utt={reduceIndex(e,t,{y2:n}){return n}};function Uv(e={}){return EL(e)?e:{...e,x:wt}}function Vv(e={}){return TL(e)?e:{...e,y:wt}}function Vtt(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,i=new Uint8Array(n);let r=0;for(const a of t)for(const l of a)i[l]&&++r,i[l]=1;if(r===0)return{data:e,facets:t};e=zu(e);const s=e[wL]=new Uint32Array(n+r);t=t.map(a=>zu(a,Uint32Array));let o=n;i.fill(0);for(const a of t)for(let l=0,c=a.length;l<c;++l){const u=a[l];i[u]?(a[l]=o,e[o]=e[u],s[o]=u,++o):s[u]=u,i[u]=1}return{data:e,facets:t}}function M5(e={},t={}){arguments.length===1&&([e,t]=lc(e));const{y1:n,y:i=n,x:r,...s}=t,[o,a,l,c]=cc(i,r,"y","x",e,s);return{...o,y1:n,y:a,x1:l,x2:c,x:Tg(l,c)}}function Xtt(e={},t={}){arguments.length===1&&([e,t]=lc(e));const{y1:n,y:i=n,x:r}=t,[s,o,a]=cc(i,r,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function Htt(e={},t={}){arguments.length===1&&([e,t]=lc(e));const{y1:n,y:i=n,x:r}=t,[s,o,,a]=cc(i,r,"y","x",e,t);return{...s,y1:n,y:o,x:a}}function R5(e={},t={}){arguments.length===1&&([e,t]=lc(e));const{x1:n,x:i=n,y:r,...s}=t,[o,a,l,c]=cc(i,r,"x","y",e,s);return{...o,x1:n,x:a,y1:l,y2:c,y:Tg(l,c)}}function jtt(e={},t={}){arguments.length===1&&([e,t]=lc(e));const{x1:n,x:i=n,y:r}=t,[s,o,a]=cc(i,r,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function Ztt(e={},t={}){arguments.length===1&&([e,t]=lc(e));const{x1:n,x:i=n,y:r}=t,[s,o,,a]=cc(i,r,"x","y",e,t);return{...s,x1:n,x:o,y:a}}function Xv({x:e,x1:t,x2:n,...i}={}){return i=rc(i,"y"),t===void 0&&n===void 0?M5({x:e,...i}):([t,n]=CL(e,t,n),{...i,x1:t,x2:n})}function Hv({y:e,y1:t,y2:n,...i}={}){return i=rc(i,"x"),t===void 0&&n===void 0?R5({y:e,...i}):([t,n]=CL(e,t,n),{...i,y1:t,y2:n})}function lc(e){const{offset:t,order:n,reverse:i,...r}=e;return[{offset:t,order:n,reverse:i},r]}const qtt={length:!0};function cc(e,t=Kw,n,i,{offset:r,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${i}`);const l=eo(a),[c,u]=vn(e),[f,h]=$n(t),[d,g]=$n(t);return f.hint=d.hint=qtt,r=Ktt(r),s=tet(s,r,i),[lr(a,(m,_,p)=>{({data:m,facets:_}=Vtt(m,_));const y=e==null?void 0:u(Cg(kt(m,e),p==null?void 0:p[n])),v=kt(m,t,Float64Array),w=kt(m,l),x=s&&s(m,y,v,w),b=m.length,E=h(new Float64Array(b)),C=g(new Float64Array(b)),I=[];for(const S of _){const R=y?Array.from(Jr(S,M=>y[M]).values()):[S];if(x)for(const M of R)M.sort(x);for(const M of R){let k=0,O=0;o&&M.reverse();for(const A of M){const P=v[A];P<0?k=C[A]=(E[A]=k)+P:P>0?O=C[A]=(E[A]=O)+P:C[A]=E[A]=O}}I.push(R)}return r&&r(I,E,C,w),{data:m,facets:_}}),c,f,d]}function Ktt(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Jtt;case"center":case"silhouette":return Qtt;case"wiggle":return A5}throw new Error(`unknown offset: ${e}`)}}function I5(e,t){let n=0,i=0;for(const r of e){const s=t[r];s<n&&(n=s),s>i&&(i=s)}return[n,i]}function Jtt(e,t,n){for(const i of e)for(const r of i){const[s,o]=I5(r,n);for(const a of r){const l=1/(o-s||1);t[a]=l*(t[a]-s),n[a]=l*(n[a]-s)}}}function Qtt(e,t,n){for(const i of e){for(const r of i){const[s,o]=I5(r,n);for(const a of r){const l=(o+s)/2;t[a]-=l,n[a]-=l}}L5(i,t,n)}O5(e,t,n)}function A5(e,t,n,i){for(const r of e){const s=new Jo;let o=0;for(const a of r){let l=-1;const c=a.map(d=>Math.abs(n[d]-t[d])),u=a.map(d=>{l=i?i[d]:++l;const g=n[d]-t[d],m=s.has(l)?g-s.get(l):0;return s.set(l,g),m}),f=[0,...EY(u)];for(const d of a)t[d]+=o,n[d]+=o;const h=ir(c);h&&(o-=ir(c,(d,g)=>(u[g]/2+f[g])*d)/h)}L5(r,t,n)}O5(e,t,n)}function L5(e,t,n){const i=Sn(e,r=>Sn(r,s=>t[s]));for(const r of e)for(const s of r)t[s]-=i,n[s]-=i}function O5(e,t,n){const i=e.length;if(i===1)return;const r=e.map(a=>a.flat()),s=r.map(a=>(Sn(a,l=>t[l])+Ue(a,l=>n[l]))/2),o=Sn(s);for(let a=0;a<i;a++){const l=o-s[a];for(const c of r[a])t[c]+=l,n[c]+=l}}function tet(e,t,n){if(e===void 0&&t===A5)return iC(ai);if(e!=null){if(typeof e=="string"){const i=e.startsWith("-"),r=i?xg:ai;switch((i?e.slice(1):e).toLowerCase()){case"value":case n:return eet(r);case"z":return net(r);case"sum":return iet(r);case"appearance":return ret(r);case"inside-out":return iC(r)}return rC(vL(e))}if(typeof e=="function")return(e.length===1?rC:set)(e);if(Array.isArray(e))return oet(e);throw new Error(`invalid order: ${e}`)}}function eet(e){return(t,n,i)=>(r,s)=>e(i[r],i[s])}function net(e){return(t,n,i,r)=>(s,o)=>e(r[s],r[o])}function iet(e){return u0(e,(t,n,i,r)=>pw(Qr(t),s=>ir(s,o=>i[o]),s=>r[s]))}function ret(e){return u0(e,(t,n,i,r)=>pw(Qr(t),s=>n[_w(s,o=>i[o])],s=>r[s]))}function iC(e){return u0(e,(t,n,i,r)=>{const s=Qr(t),o=pw(s,f=>n[_w(f,h=>i[h])],f=>r[f]),a=ol(s,f=>ir(f,h=>i[h]),f=>r[f]),l=[],c=[];let u=0;for(const f of o)u<0?(u+=a.get(f),l.push(f)):(u-=a.get(f),c.push(f));return c.reverse().concat(l)})}function rC(e){return t=>{const n=kt(t,e);return(i,r)=>ai(n[i],n[r])}}function set(e){return t=>(n,i)=>e(t[n],t[i])}function oet(e){return u0(ai,()=>e)}function u0(e,t){return(n,i,r,s)=>{if(!s)throw new Error("missing channel: z");const o=new Jo(t(n,i,r,s).map((a,l)=>[a,l]));return(a,l)=>e(o.get(s[a]),o.get(s[l]))}}const aet={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class f0 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,z:a,curve:l,tension:c}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:eo(n),optional:!0}},n,aet),this.z=a,this.curve=$v(l,c)}filter(t){return t}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n,0,0).call(u=>u.selectAll().data(YL(t,[o,a,l,c],this,i)).enter().append("path").call(le,this).call(Mg,this,i).attr("d",Bw().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>c[f]))).node()}}function cet(e,t){return t===void 0?la(e,{x:Rf,y:$u}):new f0(e,t)}function Vu(e,t){const{y:n=Ln,...i}=Wv(t);return new f0(e,Xv(Uv({...i,y1:n,y2:void 0})))}function la(e,t){const{x:n=Ln,...i}=zv(t);return new f0(e,Hv(Vv({...i,x1:n,x2:void 0})))}const uet={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class k5 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,curve:a,tension:l}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,uet),this.curve=v5(a,l),sc(this,n)}project(t,n,i){this.curve!==zl&&super.project(t,n,i)}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i,{curve:u}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(le,this).attr("d",u===zl&&s.projection?fet(s.projection,o,a,l,c):h=>{const d=Lr(),g=u(d);return g.lineStart(),g.point(o[h],a[h]),g.point(l[h],c[h]),g.lineEnd(),d}).call(Ne,this,i).call(Df,this,i,s)).node()}}function fet(e,t,n,i,r){const s=Qs(e);return t=Tn(t),n=Tn(n),i=Tn(i),r=Tn(r),o=>s({type:"LineString",coordinates:[[t[o],n[o]],[i[o],r[o]]]})}function P5(e,{x:t,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=Og(t,n,i),[s,o]=Og(r,s,o),new k5(e,{...a,x1:n,x2:i,y1:s,y2:o})}function Og(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const het={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class F5 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:h=u,sweep:d}=n;super(t,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,het),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+f,this.insetEnd=+h,this.sweep=det(d)}render(t,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a,SW:u}=i,{strokeWidth:f,bend:h,headAngle:d,headLength:g,insetStart:m,insetEnd:_}=this,p=u?w=>u[w]:Bn(f===void 0?1:f),y=d*Rg/2,v=g/1.5;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(w=>w.selectAll().data(t).enter().append("path").call(le,this).attr("d",x=>{let b=o[x],E=a[x],C=l[x],I=c[x];const S=Math.hypot(C-b,I-E);if(S<=m+_)return null;let R=Math.atan2(I-E,C-b);const M=Math.min(v*p(x),S/3),k=this.sweep(b,E,C,I)*h*Rg,O=Math.hypot(S/Math.tan(k),S)/2;if(m||_)if(O<1e5){const nt=Math.sign(k),[st,ot]=get([b,E],[C,I],O,nt);if(m&&([b,E]=sC([st,ot,O],[b,E,m],-nt*Math.sign(m))),_){const[$,U]=sC([st,ot,O],[C,I,_],nt*Math.sign(_));R+=Math.atan2(U-ot,$-st)-Math.atan2(I-ot,C-st),C=$,I=U}}else{const nt=C-b,st=I-E,ot=Math.hypot(nt,st);m&&(b+=nt/ot*m,E+=st/ot*m),_&&(C-=nt/ot*_,I-=st/ot*_)}const A=R+k,P=A+y,N=A-y,W=C-M*Math.cos(P),j=I-M*Math.sin(P),V=C-M*Math.cos(N),Z=I-M*Math.sin(N),z=O<1e5?`A${O},${O} 0,0,${k>0?1:0} `:"L",Q=M?`M${W},${j}L${C},${I}L${V},${Z}`:"";return`M${b},${E}${z}${C},${I}${Q}`}).call(Ne,this,i)).node()}}function det(e=1){if(typeof e=="number")return Bn(Math.sign(e));if(typeof e=="function")return(t,n,i,r)=>Math.sign(e(t,n,i,r));switch(Un(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,i)=>pe(t,i);case"-x":return(t,n,i)=>Ko(t,i);case"+y":return(t,n,i,r)=>pe(n,r);case"-y":return(t,n,i,r)=>Ko(n,r)}}function get([e,t],[n,i],r,s){const o=n-e,a=i-t,l=Math.hypot(o,a),c=s*Math.sqrt(r*r-l*l/4)/l;return[(e+n)/2-a*c,(t+i)/2+o*c]}function sC([e,t,n],[i,r,s],o){const a=i-e,l=r-t,c=Math.hypot(a,l),u=(a*a+l*l-s*s+n*n)/(2*c),f=o*Math.sqrt(n*n-u*u);return[e+(a*u+l*f)/c,t+(l*u-a*f)/c]}function met(e,{x:t,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=Og(t,n,i),[s,o]=Og(r,s,o),new F5(e,{...a,x1:n,x2:i,y1:s,y2:o})}class jv extends re{constructor(t,n,i={},r){super(t,n,i,r);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:c=s,rx:u,ry:f}=i;this.insetTop=Nt(o),this.insetRight=Nt(a),this.insetBottom=Nt(l),this.insetLeft=Nt(c),this.rx=be(u,"auto"),this.ry=be(f,"auto")}render(t,n,i,r,s){const{rx:o,ry:a}=this;return Ht("svg:g",s).call(he,this,r,s).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call(le,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(mt,"rx",o).call(mt,"ry",a).call(Ne,this,i)).node()}_x(t,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?s=>n[s]+r:i+r}_y(t,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?s=>n[s]+r:i+r}_width({x:t},{x:n},{marginRight:i,marginLeft:r,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&t?t.bandwidth():s-i-r;return Math.max(0,l-o-a)}_height({y:t},{y:n},{marginTop:i,marginBottom:r,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&t?t.bandwidth():s-i-r;return Math.max(0,l-o-a)}}const N5={ariaLabel:"bar"};class D5 extends jv{constructor(t,n={}){const{x1:i,x2:r,y:s}=n;super(t,{x1:{value:i,scale:"x"},x2:{value:r,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,N5)}_transform(t,n,{x:i}){t.call(ie,n,{x:i},0,0)}_x({x:t},{x1:n,x2:i},{marginLeft:r}){const{insetLeft:s}=this;return ri(t)?r+s:o=>Math.min(n[o],i[o])+s}_width({x:t},{x1:n,x2:i},{marginRight:r,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return ri(t)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}class $5 extends jv{constructor(t,n={}){const{x:i,y1:r,y2:s}=n;super(t,{y1:{value:r,scale:"y"},y2:{value:s,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,N5)}_transform(t,n,{y:i}){t.call(ie,n,{y:i},0,0)}_y({y:t},{y1:n,y2:i},{marginTop:r}){const{insetTop:s}=this;return ri(t)?r+s:o=>Math.min(n[o],i[o])+s}_height({y:t},{y1:n,y2:i},{marginTop:r,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return ri(t)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}function Po(e,t={}){return jm(t)||(t={...t,y:Ln,x2:wt}),new D5(e,Xv(xO(Uv(t))))}function Fo(e,t={}){return jm(t)||(t={...t,x:Ln,y2:wt}),new $5(e,Hv(EO(Vv(t))))}const pet={ariaLabel:"cell"};class h0 extends jv{constructor(t,{x:n,y:i,...r}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,pet)}_transform(t,n){t.call(ie,n,{},0,0)}}function qa(e,{x:t,y:n,...i}={}){return[t,n]=Di(t,n),new h0(e,{...i,x:t,y:n})}function yet(e,{x:t=Ln,fill:n,stroke:i,...r}={}){return n===void 0&&Rn(i)[0]===void 0&&(n=wt),new h0(e,{...r,x:t,fill:n,stroke:i})}function _et(e,{y:t=Ln,fill:n,stroke:i,...r}={}){return n===void 0&&Rn(i)[0]===void 0&&(n=wt),new h0(e,{...r,y:t,fill:n,stroke:i})}const wet={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function Zv(e){return e.sort===void 0&&e.reverse===void 0?kL({channel:"-r"},e):e}class d0 extends re{constructor(t,n={}){const{x:i,y:r,r:s,rotate:o,symbol:a=Du,frameAnchor:l}=n,[c,u]=Ce(o,0),[f,h]=OK(a),[d,g]=Ce(s,f==null?3:4.5);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:d,scale:"r",filter:Wr,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},Zv(n),wet),this.r=g,this.rotate=u,this.symbol=h,this.frameAnchor=Lf(l);const{channels:m}=this,{symbol:_}=m;if(_){const{fill:p,stroke:y}=m;_.hint={fill:p?p.value===_.value?"color":"currentColor":this.fill??"currentColor",stroke:y?y.value===_.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,r:u,rotate:f,symbol:h}=i,{r:d,rotate:g,symbol:m}=this,[_,p]=cr(this,r),y=m===Du,v=u?void 0:d*d*Math.PI;return Xm(d)&&(t=[]),Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(w=>w.selectAll().data(t).enter().append(y?"circle":"path").call(le,this).call(y?x=>{x.attr("cx",l?b=>l[b]:_).attr("cy",c?b=>c[b]:p).attr("r",u?b=>u[b]:d)}:x=>{x.attr("transform",o0`translate(${l?b=>l[b]:_},${c?b=>c[b]:p})${f?b=>` rotate(${f[b]})`:g?` rotate(${g})`:""}`).attr("d",u&&h?b=>{const E=Lr();return h[b].draw(E,u[b]*u[b]*Math.PI),E}:u?b=>{const E=Lr();return m.draw(E,u[b]*u[b]*Math.PI),E}:h?b=>{const E=Lr();return h[b].draw(E,v),E}:(()=>{const b=Lr();return m.draw(b,v),b})())}).call(Ne,this,i)).node()}}function is(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Di(t,n)),new d0(e,{...i,x:t,y:n})}function vet(e,{x:t=wt,...n}={}){return new d0(e,CO({...n,x:t}))}function bet(e,{y:t=wt,...n}={}){return new d0(e,TO({...n,y:t}))}function xet(e,t){return is(e,{...t,symbol:"circle"})}function Eet(e,t){return is(e,{...t,symbol:"hexagon"})}const Tet={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class g0 extends re{constructor(t,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:eo(n),optional:!0}},n,Tet),this.z=s,this.curve=v5(o,a),sc(this,n)}filter(t){return t}project(t,n,i){this.curve!==zl&&super.project(t,n,i)}render(t,n,i,r,s){const{x:o,y:a}=i,{curve:l}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(c=>c.selectAll().data(YL(t,[o,a],this,i)).enter().append("path").call(le,this).call(Mg,this,i).call(SQ,this,i,s).attr("d",l===zl&&s.projection?Cet(s.projection,o,a):Y6().curve(l).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function Cet(e,t,n){const i=Qs(e);return t=Tn(t),n=Tn(n),r=>{let s=[];const o=[s];for(const a of r)a===-1?(s=[],o.push(s)):s.push([t[a],n[a]]);return i({type:"MultiLineString",coordinates:o})}}function qv(e,{x:t,y:n,...i}={}){return[t,n]=Di(t,n),new g0(e,{...i,x:t,y:n})}function Xu(e,{x:t=wt,y:n=Ln,...i}={}){return new g0(e,Wv({...i,x:t,y:n}))}function Wl(e,{x:t=Ln,y:n=wt,...i}={}){return new g0(e,zv({...i,x:t,y:n}))}const Met={ariaLabel:"rect"};class m0 extends re{constructor(t,n={}){const{x1:i,y1:r,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:c=a,insetBottom:u=a,insetLeft:f=a,rx:h,ry:d}=n;super(t,{x1:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Met),this.insetTop=Nt(l),this.insetRight=Nt(c),this.insetBottom=Nt(u),this.insetLeft=Nt(f),this.rx=be(h,"auto"),this.ry=be(d,"auto")}render(t,n,i,r,s){const{x:o,y:a}=n,{x1:l,y1:c,x2:u,y2:f}=i,{marginTop:h,marginRight:d,marginBottom:g,marginLeft:m,width:_,height:p}=r,{projection:y}=s,{insetTop:v,insetRight:w,insetBottom:x,insetLeft:b,rx:E,ry:C}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&u&&o,y:c&&f&&a},0,0).call(I=>I.selectAll().data(t).enter().append("rect").call(le,this).attr("x",l&&u&&(y||!ri(o))?S=>Math.min(l[S],u[S])+b:m+b).attr("y",c&&f&&(y||!ri(a))?S=>Math.min(c[S],f[S])+v:h+v).attr("width",l&&u&&(y||!ri(o))?S=>Math.max(0,Math.abs(u[S]-l[S])-b-w):_-d-m-w-b).attr("height",c&&f&&(y||!ri(a))?S=>Math.max(0,Math.abs(c[S]-f[S])-v-x):p-h-g-v-x).call(mt,"rx",E).call(mt,"ry",C).call(Ne,this,i)).node()}}function Kv(e,t){return new m0(e,vO(bO(t)))}function kg(e,t={}){return jm(t)||(t={...t,y:Ln,x2:wt,interval:1}),new m0(e,Xv(bO(Uv(t))))}function Pg(e,t={}){return jm(t)||(t={...t,x:Ln,y2:wt,interval:1}),new m0(e,Hv(vO(Vv(t))))}function z5(e,t){t=Iet(t);const{x:n,y:i,color:r,size:s}=t,o=Nh(e,n),a=Nh(e,i),l=Nh(e,r),c=Nh(e,s);let{fx:u,fy:f,x:{value:h,reduce:d,zero:g,...m},y:{value:_,reduce:p,zero:y,...v},color:{value:w,color:x,reduce:b},size:{value:E,reduce:C},mark:I}=t;if(d===void 0&&(d=p==null&&h==null&&E==null&&_!=null?"count":null),p===void 0&&(p=d==null&&_==null&&E==null&&h!=null?"count":null),C===void 0&&E==null&&b==null&&d==null&&p==null&&(h==null||_e(o))&&(_==null||_e(a))&&(C="count"),g===void 0&&(g=Dh(d)?!0:void 0),y===void 0&&(y=Dh(p)?!0:void 0),h==null&&_==null)throw new Error("must specify x or y");if(d!=null&&_==null)throw new Error("reducing x requires y");if(p!=null&&h==null)throw new Error("reducing y requires x");I===void 0&&(I=E!=null||C!=null?"dot":Dh(d)||Dh(p)||b!=null?"bar":h!=null&&_!=null?_e(o)||_e(a)||d==null&&p==null&&!Lc(o)&&!Lc(a)?"dot":"line":h!=null||_!=null?"rule":null);let S,R,M;switch(I){case"dot":M=is,R="stroke";break;case"line":M=o&&a||d!=null||p!=null?y||p!=null||o&&Lc(o)?Wl:g||d!=null||a&&Lc(a)?Xu:qv:o?Xu:Wl,R="stroke",aC(l)&&(S=null);break;case"area":M=!(y||p!=null)&&(g||d!=null||a&&Lc(a))?Vu:la,R="fill",aC(l)&&(S=null);break;case"rule":M=o?jr:Hs,R="stroke";break;case"bar":M=d!=null?_e(a)?oC(d)&&o&&_e(o)?qa:Po:kg:p!=null?_e(o)?oC(p)&&a&&_e(a)?qa:Fo:Pg:b!=null||C!=null?o&&_e(o)&&a&&_e(a)?qa:o&&_e(o)?Fo:a&&_e(a)?Po:Kv:o&&Za(o)&&!(a&&Za(a))?Po:a&&Za(a)&&!(o&&Za(o))?Fo:qa,R="fill";break;default:throw new Error(`invalid mark: ${I}`)}let k={fx:u,fy:f,x:o??void 0,y:a??void 0,[R]:l??x,z:S,r:c??void 0,tip:!0},O,A={[R]:b??void 0,r:C??void 0};if(d!=null&&p!=null)throw new Error("cannot reduce both x and y");return p!=null?(A.y=p,O=_e(o)?Wu:Ms):d!=null?(A.x=d,O=_e(a)?Gu:Rs):(b!=null||C!=null)&&(o&&a?O=_e(o)&&_e(a)?uv:_e(o)?Rs:_e(a)?Ms:Eo:o?O=_e(o)?Wu:Ms:a&&(O=_e(a)?Gu:Rs)),(O===Eo||O===Ms)&&(k.x={value:o,...m}),(O===Eo||O===Rs)&&(k.y={value:a,...v}),g===void 0&&(g=o&&!(O===Eo||O===Ms)&&(M===Po||M===Vu||M===kg||M===Hs)),y===void 0&&(y=a&&!(O===Eo||O===Rs)&&(M===Fo||M===la||M===Pg||M===jr)),{fx:u??null,fy:f??null,x:{value:h??null,reduce:d??null,zero:!!g,...m},y:{value:_??null,reduce:p??null,zero:!!y,...v},color:{value:w??null,reduce:b??null,...x!==void 0&&{color:x}},size:{value:E??null,reduce:C??null},mark:I,markImpl:lC[M],markOptions:k,transformImpl:lC[O],transformOptions:A,colorMode:R}}function Ret(e,t){const n=z5(e,t),{fx:i,fy:r,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:c}=n,u=$_[n.markImpl],f=$_[n.transformImpl],h=i!=null||r!=null?Nv({strokeOpacity:.1}):null,d=[s?jr([0]):null,o?Hs([0]):null],g=u(e,f?f(l,a):a);return c==="stroke"?Pi(h,d,g):Pi(h,g,d)}function Lc(e){let t,n;for(const i of e){if(i==null)continue;if(t===void 0){t=i;continue}const r=Math.sign(pe(t,i));if(r){if(n!==void 0&&r!==n)return!1;t=i,n=r}}return!0}function Iet({x:e,y:t,color:n,size:i,fx:r,fy:s,mark:o}={}){return Gi(e)||(e=Fa(e)),Gi(t)||(t=Fa(t)),Gi(n)||(n=Af(n)?{color:n}:Fa(n)),Gi(i)||(i=Fa(i)),Gi(r)&&({value:r}=Fa(r)),Gi(s)&&({value:s}=Fa(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:e,y:t,color:n,size:i,fx:r,fy:s,mark:o}}function Nh(e,t){const n=kt(e,t.value);return n&&(n.label=ts(t.value)),n}function Fa(e){return Aet(e)?{reduce:e}:{value:e}}function Dh(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function oC(e){return/^(?:first|last|mode)$/i.test(e)}function Aet(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&li(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function aC(e){return e?new hf(e).size>e.length>>1:!1}const $_={dot:is,line:qv,lineX:Xu,lineY:Wl,areaX:Vu,areaY:la,ruleX:jr,ruleY:Hs,barX:Po,barY:Fo,rect:Kv,rectX:kg,rectY:Pg,cell:qa,bin:Eo,binX:Ms,binY:Rs,group:uv,groupX:Wu,groupY:Gu},lC=Object.fromEntries(Object.entries($_).map(([e,t])=>[t,e]));function Jv(e,t={}){let{x:n,x1:i,x2:r}=t;n===void 0&&i===void 0&&r===void 0&&(t={...t,x:n=wt});const s={};return n!=null&&(s.x=e),i!=null&&(s.x1=e),r!=null&&(s.x2=e),Zr(s,t)}function Qv(e,t={}){let{y:n,y1:i,y2:r}=t;n===void 0&&i===void 0&&r===void 0&&(t={...t,y:n=wt});const s={};return n!=null&&(s.y=e),i!=null&&(s.y1=e),r!=null&&(s.y2=e),Zr(s,t)}function Zr(e={},t={}){const n=eo(t),i=Object.entries(e).map(([r,s])=>{const o=SL(r,t);if(o==null)throw new Error(`missing channel: ${r}`);const[a,l]=$n(o);return{key:r,input:o,output:a,setOutput:l,map:Let(s)}});return{...lr(t,(r,s)=>{const o=kt(r,n),a=i.map(({input:c})=>kt(r,c)),l=i.map(({setOutput:c})=>c(new Array(r.length)));for(const c of s)for(const u of o?Jr(c,f=>o[f]).values():[c])i.forEach(({map:f},h)=>f.mapIndex(u,a[h],l[h]));return{data:r,facets:s}}),...Object.fromEntries(i.map(({key:r,output:s})=>[r,s]))}}function Let(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&li(e))return Oet(e);if(typeof e=="function")return Up(tv(e));switch(`${e}`.toLowerCase()){case"cumsum":return Pet;case"rank":return Up((t,n)=>MI(t,i=>n[i]));case"quantile":return Up((t,n)=>ket(t,i=>n[i]))}throw new Error(`invalid map: ${e}`)}function Oet(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function ket(e,t){const n=xm(e,t)-1;return MI(e,t).map(i=>i/n)}function Up(e){return{mapIndex(t,n,i){const r=e(t,n);if(r.length!==t.length)throw new Error("map function returned a mismatched length");for(let s=0,o=t.length;s<o;++s)i[t[s]]=r[s]}}}const Pet={mapIndex(e,t,n){let i=0;for(const r of e)n[r]=i+=t[r]}};function Fet(e={},t){return arguments.length===1&&(t=e),Jv(p0(e),t)}function z_(e={},t){return arguments.length===1&&(t=e),Qv(p0(e),t)}function p0(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:i,anchor:r,strict:s}=e;if(r===void 0&&i!==void 0&&(r=Det(i),Gr(`Warning: the shift option is deprecated; please use anchor "${r}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return $et(n)(t,Net(r,t),s)}function Net(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function Det(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function $et(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return $h(Jw(e));switch(e.toLowerCase()){case"deviation":return $h(ff);case"max":return zh((t,n)=>Ue(t,i=>n[i]));case"mean":return zet;case"median":return $h(Iu);case"min":return zh((t,n)=>Sn(t,i=>n[i]));case"mode":return zh((t,n)=>SI(t,i=>n[i]));case"sum":return W5;case"variance":return $h(dw);case"difference":return Yet;case"ratio":return Bet;case"first":return Uet;case"last":return Vet}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return zh(tv(e))}function $h(e){return(t,n,i)=>i?{mapIndex(r,s,o){const a=c=>s[c]==null?NaN:+s[c];let l=0;for(let c=0;c<t-1;++c)isNaN(a(c))&&++l;for(let c=0,u=r.length-t+1;c<u;++c)isNaN(a(c+t-1))&&++l,o[r[c+n]]=l===0?e(Ho(r,c,c+t),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(r,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[r[l+n]]=e(Ho(r,0,l+t),a);for(let l=0,c=r.length-n;l<c;++l)o[r[l+n]]=e(Ho(r,l,l+t),a)}}}function zh(e){return(t,n,i)=>i?{mapIndex(r,s,o){let a=0;for(let l=0;l<t-1;++l)a+=gn(s[r[l]]);for(let l=0,c=r.length-t+1;l<c;++l)a+=gn(s[r[l+t-1]]),a===t&&(o[r[l+n]]=e(Ho(r,l,l+t),s)),a-=gn(s[r[l]])}}:{mapIndex(r,s,o){for(let a=-n;a<0;++a)o[r[a+n]]=e(Ho(r,0,a+t),s);for(let a=0,l=r.length-n;a<l;++a)o[r[a+n]]=e(Ho(r,a,a+t),s)}}}function W5(e,t,n){return n?{mapIndex(i,r,s){let o=0,a=0;for(let l=0;l<e-1;++l){const c=r[i[l]];c===null||isNaN(c)?++o:a+=+c}for(let l=0,c=i.length-e+1;l<c;++l){const u=r[i[l]],f=r[i[l+e-1]];f===null||isNaN(f)?++o:a+=+f,s[i[l+t]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(i,r,s){let o=0;const a=i.length;for(let l=0,c=Math.min(a,e-t-1);l<c;++l)o+=+r[i[l]]||0;for(let l=-t,c=a-t;l<c;++l)o+=+r[i[l+e-1]]||0,s[i[l+t]]=o,o-=+r[i[l]]||0}}}function zet(e,t,n){if(n){const i=W5(e,t,n);return{mapIndex(r,s,o){i.mapIndex(r,s,o);for(let a=0,l=r.length-e+1;a<l;++a)o[r[a+t]]/=e}}}else return{mapIndex(i,r,s){let o=0,a=0;const l=i.length;for(let c=0,u=Math.min(l,e-t-1);c<u;++c){let f=r[i[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a)}for(let c=-t,u=l-t;c<u;++c){let f=r[i[c+e-1]],h=r[i[c]];f!==null&&!isNaN(f=+f)&&(o+=f,++a),s[i[c+t]]=o/a,h!==null&&!isNaN(h=+h)&&(o-=h,--a)}}}}function Wet(e,t,n,i){for(let r=n+i;n<r;++n){const s=e[t[n]];if(gn(s))return s}}function Get(e,t,n,i){for(let r=n+i-1;r>=n;--r){const s=e[t[r]];if(gn(s))return s}}function G5(e,t,n,i){for(let r=n+i;n<r;++n){let s=e[t[n]];if(s!==null&&!isNaN(s=+s))return s}}function Y5(e,t,n,i){for(let r=n+i-1;r>=n;--r){let s=e[t[r]];if(s!==null&&!isNaN(s=+s))return s}}function Yet(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o){const l=r[i[o]],c=r[i[o+e-1]];s[i[o+t]]=l===null||c===null?NaN:c-l}}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=Y5(r,i,o,e)-G5(r,i,o,e)}}}function Bet(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o){const l=r[i[o]],c=r[i[o+e-1]];s[i[o+t]]=l===null||c===null?NaN:c/l}}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=Y5(r,i,o,e)/G5(r,i,o,e)}}}function Uet(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o)s[i[o+t]]=r[i[o]]}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=Wet(r,i,o,e)}}}function Vet(e,t,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-e;o<a;++o)s[i[o+t]]=r[i[o+e-1]]}}:{mapIndex(i,r,s){for(let o=-t,a=i.length-e+t+1;o<a;++o)s[i[o+t]]=Get(r,i,o,e)}}}const Yr={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function Xet(e,{x:t=wt,y:n,k:i=Yr.k,color:r=Yr.color,opacity:s=Yr.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...f}={}){return Pi(Ee(o)?null:Vu(e,Zr({x1:jo({k:-i,...f}),x2:jo({k:i,...f})},{x1:t,x2:t,y:n,fill:o,fillOpacity:a,...f})),Ee(l)?null:Xu(e,Zr({x:jo(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function Het(e,{x:t,y:n=wt,k:i=Yr.k,color:r=Yr.color,opacity:s=Yr.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...f}={}){return Pi(Ee(o)?null:la(e,Zr({y1:jo({k:-i,...f}),y2:jo({k:i,...f})},{x:t,y1:n,y2:n,fill:o,fillOpacity:a,...f})),Ee(l)?null:Wl(e,Zr({y:jo(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function jo({n:e=Yr.n,k:t=0,strict:n=Yr.strict,anchor:i=Yr.anchor}={}){return p0({k:e,reduce:r=>Em(r)+t*(ff(r)||0),strict:n,anchor:i})}const jet={ariaLabel:"tick",fill:null,stroke:"currentColor"};class B5 extends re{constructor(t,n,i){super(t,n,i,jet),sc(this,i)}render(t,n,i,r,s){return Ht("svg:g",s).call(he,this,r,s).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(le,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(Ne,this,i).call(Df,this,i,s)).node()}}class U5 extends B5{constructor(t,n={}){const{x:i,y:r,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=Nt(o),this.insetBottom=Nt(a)}_transform(t,n,{x:i}){t.call(ie,n,{x:i},He,0)}_x1(t,{x:n}){return i=>n[i]}_x2(t,{x:n}){return i=>n[i]}_y1({y:t},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&t?s=>n[s]+r:i+r}_y2({y:t},{y:n},{height:i,marginBottom:r}){const{insetBottom:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:i-r-s}}class V5 extends B5{constructor(t,n={}){const{x:i,y:r,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(t,{y:{value:r,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n),this.insetRight=Nt(o),this.insetLeft=Nt(a)}_transform(t,n,{y:i}){t.call(ie,n,{y:i},0,He)}_x1({x:t},{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n&&t?s=>n[s]+r:i+r}_x2({x:t},{x:n},{width:i,marginRight:r}){const{insetRight:s}=this;return n&&t?o=>n[o]+t.bandwidth()-s:i-r-s}_y1(t,{y:n}){return i=>n[i]}_y2(t,{y:n}){return i=>n[i]}}function X5(e,{x:t=wt,...n}={}){return new U5(e,{...n,x:t})}function H5(e,{y:t=wt,...n}={}){return new V5(e,{...n,y:t})}function Zet(e,{x:t=wt,y:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Gu:cv;return Pi(Hs(e,u({x1:tb,x2:eb},{x:t,y:n,stroke:s,strokeOpacity:o,...c})),Po(e,u({x1:"p25",x2:"p75"},{x:t,y:n,fill:i,fillOpacity:r,...c})),X5(e,u({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),is(e,Zr({x:j5},{x:t,y:n,z:n,stroke:s,strokeOpacity:o,...c})))}function qet(e,{y:t=wt,x:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?Wu:cv;return Pi(jr(e,u({y1:tb,y2:eb},{x:n,y:t,stroke:s,strokeOpacity:o,...c})),Fo(e,u({y1:"p25",y2:"p75"},{x:n,y:t,fill:i,fillOpacity:r,...c})),H5(e,u({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),is(e,Zr({y:j5},{x:n,y:t,z:n,stroke:s,strokeOpacity:o,...c})))}function j5(e){const t=tb(e),n=eb(e);return e.map(i=>i<t||i>n?i:NaN)}function tb(e){const t=Z5(e)*2.5-q5(e)*1.5;return Sn(e,n=>n>=t?n:NaN)}function eb(e){const t=q5(e)*2.5-Z5(e)*1.5;return Ue(e,n=>n<=t?n:NaN)}function Z5(e){return Us(e,.25)}function q5(e){return Us(e,.75)}const Ket={ariaLabel:"raster",stroke:null,pixelSize:1};function Na(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function cC(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class K5 extends re{constructor(t,n,i={},r){let{width:s,height:o,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:f=a==null?s:void 0,y2:h=l==null?o:void 0,pixelSize:d=r.pixelSize,blur:g=0,interpolate:m}=i;if(s!=null&&(s=cC(s,"width")),o!=null&&(o=cC(o,"height")),c!=null&&(c=Na(c,"x1")),u!=null&&(u=Na(u,"y1")),f!=null&&(f=Na(f,"x2")),h!=null&&(h=Na(h,"y2")),a==null&&(c==null||f==null))throw new Error("missing x");if(l==null&&(u==null||h==null))throw new Error("missing y");t!=null&&s!=null&&o!=null&&(a===void 0&&c!=null&&f!=null&&(a=ont(c,f,s)),l===void 0&&u!=null&&h!=null&&(l=ant(u,h,s,o))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:h==null?null:[h],scale:"y",optional:!0,filter:null},...n},i,r),this.width=s,this.height=o,this.pixelSize=Na(d,"pixelSize"),this.blur=Na(g,"blur"),this.interpolate=a==null||l==null?null:Qet(m)}}class J5 extends K5{constructor(t,n={}){const{imageRendering:i}=n;if(t==null){const{fill:r,fillOpacity:s}=n;Ce(s)[0]!==void 0&&(n=W_("fillOpacity",n)),Rn(r)[0]!==void 0&&(n=W_("fill",n))}super(t,void 0,n,Ket),this.imageRendering=be(i,"auto")}scale(t,{color:n,...i},r){return super.scale(t,i,r)}render(t,n,i,r,s){var A;const o=n[(A=i.channels.fill)==null?void 0:A.scale]??(P=>P),{x:a,y:l}=i,{document:c}=s,[u,f,h,d]=tk(i,r,s),g=h-u,m=d-f,{pixelSize:_,width:p=Math.round(Math.abs(g)/_),height:y=Math.round(Math.abs(m)/_)}=this,v=p*y;let{fill:w,fillOpacity:x}=i,b=0;if(this.interpolate){const P=p/g,N=y/m,W=se(a,V=>(V-u)*P,Float64Array),j=se(l,V=>(V-f)*N,Float64Array);w&&(w=this.interpolate(t,p,y,W,j,w)),x&&(x=this.interpolate(t,p,y,W,j,x))}else this.data==null&&t&&(b=t.fi*v);const E=c.createElement("canvas");E.width=p,E.height=y;const C=E.getContext("2d"),I=C.createImageData(p,y),S=I.data;let{r:R,g:M,b:k}=rr(this.fill)??{r:0,g:0,b:0},O=(this.fillOpacity??1)*255;for(let P=0;P<v;++P){const N=P<<2;if(w){const W=o(w[P+b]);if(W==null){S[N+3]=0;continue}({r:R,g:M,b:k}=rr(W))}x&&(O=x[P+b]*255),S[N+0]=R,S[N+1]=M,S[N+2]=k,S[N+3]=O}return this.blur>0&&mY(I,this.blur),C.putImageData(I,0,0),Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(P=>P.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(h-u)},${Math.sign(d-f)})`).attr("width",Math.abs(g)).attr("height",Math.abs(m)).attr("preserveAspectRatio","none").call(mt,"image-rendering",this.imageRendering).call(le,this).attr("xlink:href",E.toDataURL())).node()}}function Q5(e,t,n){arguments.length<3&&(n=t,t=null);let{x:i,y:r,[e]:s,...o}=n;return i===void 0&&r===void 0&&vK(t)&&(i=Rf,r=$u,s===void 0&&(s=mK)),[t,{...o,x:i,y:r,[e]:s}]}function Jet(){const[e,t]=Q5("fill",...arguments);return new J5(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:wt})}function tk({x1:e,y1:t,x2:n,y2:i},r,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f}=r;return[e&&s==null?e[0]:f,t&&s==null?t[0]:l,n&&s==null?n[0]:o-c,i&&s==null?i[0]:a-u]}function ek({x1:e,y1:t,x2:n,y2:i},r,s,o){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),i&&(a.y2=i),tk(yv(a,r),s,o)}function W_(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return An({...t,[e]:void 0},function(i,r,s,o,a,l){const{x:c,y:u}=o;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,h,d,g]=ek(s,o,a,l),m=d-f,_=g-h,{pixelSize:p}=this,{width:y=Math.round(Math.abs(m)/p),height:v=Math.round(Math.abs(_)/p)}=t,w=new Array(y*v*(r?r.length:1)),x=m/y,b=_/v;let E=0;for(const C of r??[void 0])for(let I=.5;I<v;++I)for(let S=.5;S<y;++S,++E)w[E]=n(c.invert(f+S*x),u.invert(h+I*b),C);return{data:w,facets:r,channels:{[e]:{value:w,scale:"auto"}}}})}function Qet(e){if(typeof e=="function")return e;if(e==null)return G_;switch(`${e}`.toLowerCase()){case"none":return G_;case"nearest":return ik;case"barycentric":return nk();case"random-walk":return rk()}throw new Error(`invalid interpolate: ${e}`)}function G_(e,t,n,i,r,s){const o=new Array(t*n);for(const a of e)i[a]<0||i[a]>=t||r[a]<0||r[a]>=n||(o[Math.floor(r[a])*t+Math.floor(i[a])]=s[a]);return o}function nk({random:e=Nw(42)}={}){return(t,n,i,r,s,o)=>{const{points:a,triangles:l,hull:c}=Js.from(t,d=>r[d],d=>s[d]),u=new o.constructor(n*i).fill(NaN),f=new Uint8Array(n*i),h=snt(o,e);for(let d=0;d<l.length;d+=3){const g=l[d],m=l[d+1],_=l[d+2],p=a[2*g],y=a[2*m],v=a[2*_],w=a[2*g+1],x=a[2*m+1],b=a[2*_+1],E=Math.min(p,y,v),C=Math.max(p,y,v),I=Math.min(w,x,b),S=Math.max(w,x,b),R=(x-b)*(p-v)+(w-b)*(v-y);if(!R)continue;const M=o[t[g]],k=o[t[m]],O=o[t[_]];for(let A=Math.floor(E);A<C;++A)for(let P=Math.floor(I);P<S;++P){if(A<0||A>=n||P<0||P>=i)continue;const N=A+.5,W=P+.5,j=((x-b)*(N-v)+(W-b)*(v-y))/R;if(j<0)continue;const V=((b-w)*(N-v)+(W-b)*(p-v))/R;if(V<0)continue;const Z=1-j-V;if(Z<0)continue;const z=A+n*P;u[z]=h(M,j,k,V,O,Z,A,P),f[z]=1}}return tnt(u,f,r,s,o,n,i,c,t,h),u}}function tnt(e,t,n,i,r,s,o,a,l,c){n=Float64Array.from(a,d=>n[l[d]]),i=Float64Array.from(a,d=>i[l[d]]),r=Array.from(a,d=>r[l[d]]);const u=n.length,f=Array.from({length:u},(d,g)=>nnt(g,n,i));let h=0;for(let d=0;d<o;++d){const g=d+.5;for(let m=0;m<s;++m){const _=m+s*d;if(!t[_]){const p=m+.5;for(let y=0;y<u;++y){const v=(u+h+(y%2?(y+1)/2:-y/2))%u;if(f[v](p,g)){const w=ent(n.at(v-1),i.at(v-1),n[v],i[v],p,g);e[_]=c(r.at(v-1),w,r[v],1-w,r[v],0,m,d),h=v;break}}}}}}function ent(e,t,n,i,r,s){const o=n-e,a=i-t,l=o*(n-r)+a*(i-s),c=o*(r-e)+a*(s-t);return l>0&&c>0?l/(l+c):+(l>c)}function Oc(e,t,n,i){return e*i-n*t}function nnt(e,t,n){const i=t.length,r=t.at(e-2),s=n.at(e-2),o=t.at(e-1),a=n.at(e-1),l=t[e],c=n[e],u=t.at(e+1-i),f=n.at(e+1-i),h=o-l,d=a-c,g=r-o,m=s-a,_=l-u,p=c-f,y=Math.hypot(h,d),v=Math.hypot(g,m),w=Math.hypot(_,p);return(x,b)=>{const E=x-o,C=b-a,I=x-l,S=b-c;return Oc(E,C,I,S)>-1e-6&&Oc(E,C,h,d)*v-Oc(E,C,g,m)*y>-1e-6&&Oc(I,S,_,p)*y-Oc(I,S,h,d)*w<=0}}function ik(e,t,n,i,r,s){const o=new s.constructor(t*n),a=Js.from(e,u=>i[u],u=>r[u]);let l,c;for(let u=.5,f=0;u<n;++u){c=l;for(let h=.5;h<t;++h,++f)c=a.find(h,u,c),h===.5&&(l=c),o[f]=s[e[c]]}return o}function rk({random:e=Nw(42),minDistance:t=.5,maxSteps:n=2}={}){return(i,r,s,o,a,l)=>{const c=new l.constructor(r*s),u=Js.from(i,g=>o[g],g=>a[g]);let f,h,d;for(let g=.5,m=0;g<s;++g){h=f;for(let _=.5;_<r;++_,++m){let p=_,y=g;d=h=u.find(p,y,h),_===.5&&(f=h);let v,w=0;for(;(v=Math.hypot(o[i[d]]-p,a[i[d]]-y))>t&&w<n;){const x=e(_,g,w)*2*Math.PI;p+=Math.cos(x)*v,y+=Math.sin(x)*v,d=u.find(p,y,d),++w}c[m]=l[i[d]]}}return c}}function int(e,t,n,i,r,s){return t*e+i*n+s*r}function rnt(e){return(t,n,i,r,s,o,a,l)=>{const c=e(a,l);return c<n?t:c<n+r?i:s}}function snt(e,t){return Za(e)||yn(e)?int:rnt(t)}function ont(e,t,n){return{transform(i){const r=i.length,s=new Float64Array(r),o=(t-e)/n,a=e+o/2;for(let l=0;l<r;++l)s[l]=l%n*o+a;return s}}}function ant(e,t,n,i){return{transform(r){const s=r.length,o=new Float64Array(s),a=(t-e)/i,l=e+a/2;for(let c=0;c<s;++c)o[c]=Math.floor(c/n)%i*a+l;return o}}}const uC={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class sk extends K5{constructor(t,{smooth:n=!0,value:i,...r}={}){const s=GL({},r,uC);if(i===void 0){for(const a in s)if(s[a].value!=null){if(i!==void 0)throw new Error("ambiguous contour value");i=r[a],r[a]="value"}}if(i!=null){const a={transform:l=>l.map(c=>c.value),label:ts(i)};for(const l in s)r[l]==="value"&&(r[l]=a)}if(t==null){if(i==null)throw new Error("missing contour value");r=W_("value",{value:i,...r}),i=null}else{let{interpolate:a}=r;i===void 0&&(i=wt),a===void 0&&(r.interpolate="nearest")}super(t,{value:{value:i,optional:!0}},lnt(r),uC);const o={geometry:{value:wt}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(t,{x:n,y:i,value:r,...s},o){return super.filter(t,s,o)}render(t,n,i,r,s){const{geometry:o}=i,a=Qs();return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(l=>{l.selectAll().data(t).enter().append("path").call(le,this).attr("d",c=>a(o[c])).call(Ne,this,i)}).node()}}function lnt({thresholds:e,interval:t,...n}){return e=x5(e,t,yw),An(n,function(i,r,s,o,a,l){const[c,u,f,h]=ek(s,o,a,l),d=f-c,g=h-u,{pixelSize:m,width:_=Math.round(Math.abs(d)/m),height:p=Math.round(Math.abs(g)/m)}=this,y=_/d,v=p/g,w=s.value.value,x=[];if(this.interpolate){const{x:S,y:R}=e0(s,o,l),M=se(S,P=>(P-c)*y,Float64Array),k=se(R,P=>(P-u)*v,Float64Array),O=[s.x,s.y,s.value],A=[M,k,w];for(const P of r){const N=this.filter(P,O,A);x.push(this.interpolate(N,_,p,M,k,w))}}else if(r){const S=_*p,R=r.length;for(let M=0;M<R;++M)x.push(w.slice(M*S,M*S+S))}else x.push(w);if(this.blur>0)for(const S of x)pI({data:S,width:_,height:p},this.blur);const b=cnt(e,w,...fnt(x));if(b===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:E}=n_().size([_,p]).smooth(this.smooth),C=[],I=[];for(const S of x)I.push(ti(C.length,C.push(...se(b,R=>E(S,R)))));for(const{coordinates:S}of C)for(const R of S)for(const M of R)for(const k of M)k[0]=k[0]/y+c,k[1]=k[1]/v+u;return{data:C,facets:I,channels:NL(this.contourChannels,C)}})}function cnt(e,t,n,i){if(typeof(e==null?void 0:e.range)=="function")return e.range(e.floor(n),i);if(typeof e=="function"&&(e=e(t,n,i)),typeof e!="number")return In(e);const r=Bs(...xI(n,i,e),e);for(;r[r.length-1]>=i;)r.pop();for(;r[1]<n;)r.shift();return r}function unt(){return new sk(...Q5("value",...arguments))}function fnt(e){return[Sn(e,t=>Sn(t,fC)),Ue(e,t=>Ue(t,fC))]}function fC(e){return isFinite(e)?e:NaN}function hnt(e,t){return nb(Rv,e,t)}function dnt(e,t={}){return nb(Uu,e,t)}function gnt(e,t={}){return nb(Iv,e,t)}function nb(e,t,n={}){const{x:i,y:r,maxRadius:s}=n,o=e({px:i,py:r,maxRadius:s}),a=[];i!=null&&a.push(jr(t,hC("x",{...o,inset:-6},n))),r!=null&&a.push(Hs(t,hC("y",{...o,inset:-6},n))),i!=null&&a.push(Dl(t,dC("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),r!=null&&a.push(Dl(t,dC("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return Pi(...a)}function ok(e,{channels:t,...n},{facet:i,facetAnchor:r,fx:s,fy:o,[e]:a,channels:l,transform:c,initializer:u}){return{...n,facet:i,facetAnchor:r,fx:s,fy:o,[e]:a,channels:{...t,...l},transform:c,initializer:mnt(e,u)}}function mnt(e,t){return t==null?t:function(n,i,{x:r,y:s,px:o,py:a,...l},...c){const{channels:{x:u,y:f,...h}={},...d}=t.call(this,n,i,{...l,x:o,y:a},...c);return{channels:{...h,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...d}}}function hC(e,t,n){const{color:i="currentColor",opacity:r=.2,ruleStroke:s=i,ruleStrokeOpacity:o=r,ruleStrokeWidth:a}=n;return{...ok(e,t,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function dC(e,t,n){const{color:i="currentColor",textFill:r=i,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...ok(e,t,pnt(e,n)),fill:r,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function pnt(e,t){return An(t,(n,i,r)=>{var s;return{channels:{text:{value:(s=L_(r,e))==null?void 0:s.value}}}})}const ynt={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},_nt={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},wnt={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},vnt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},bnt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class xnt extends re{constructor(t,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,ynt),this.curve=$v(o,a),sc(this,n)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,{curve:f}=this,[h,d]=cr(this,r),g=l?y=>l[y]:Bn(h),m=c?y=>c[y]:Bn(d),_=this;function p(y){let v=-1;const w=[],x={};for(const O in i)x[O]=[];const b=[],E=[],C=[],I=[];function S(O,A){O=y[O],A=y[A],w.push(++v),b[v]=g(O),C[v]=m(O),E[v]=g(A),I[v]=m(A);for(const P in i)x[P].push(i[P][A])}const{halfedges:R,hull:M,triangles:k}=Js.from(y,g,m);for(let O=0;O<R.length;++O){const A=R[O];A>O&&S(k[O],k[A])}for(let O=0;O<M.length;++O)S(M[O],M[(O+1)%M.length]);Ds(this).selectAll().data(w).enter().append("path").call(le,_).attr("d",O=>{const A=Lr(),P=f(A);return P.lineStart(),P.point(b[O],C[O]),P.point(E[O],I[O]),P.lineEnd(),A}).call(Ne,_,x).call(Df,_,x,s)}return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(Jr(t,v=>u[v]).values()).enter().append("g").each(p):y=>y.datum(t).each(p)).node()}}class ib extends re{constructor(t,n={},i,r=({z:s})=>s){const{x:s,y:o}=n;super(t,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:r(n),optional:!0}},n,i)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[f,h]=cr(this,r),d=l?p=>l[p]:Bn(f),g=c?p=>c[p]:Bn(h),m=this;function _(p){const y=Js.from(p,d,g);Ds(this).append("path").datum(p[0]).call(le,m).attr("d",m._render(y,r)).call(Ne,m,i)}return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(u?p=>p.selectAll().data(Jr(t,y=>u[y]).values()).enter().append("g").each(_):p=>p.datum(t).each(_)).node()}}class Ent extends ib{constructor(t,n={}){super(t,n,_nt),this.fill="none"}_render(t){return t.render()}}class Tnt extends ib{constructor(t,n={}){super(t,n,wnt,eo)}_render(t){return t.renderHull()}}class Cnt extends re{constructor(t,n={}){const{x:i,y:r,z:s}=n;super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,vnt)}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[f,h]=cr(this,r),d=l?p=>l[p]:Bn(f),g=c?p=>c[p]:Bn(h),m=this;function _(p){const y=Js.from(p,d,g),v=ak(y,r);Ds(this).selectAll().data(p).enter().append("path").call(le,m).attr("d",(w,x)=>v.renderCell(x)).call(Ne,m,i)}return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(u?p=>p.selectAll().data(Jr(t,y=>u[y]).values()).enter().append("g").each(_):p=>p.datum(t).each(_)).node()}}class Snt extends ib{constructor(t,n){super(t,n,bnt),this.fill="none"}_render(t,n){return ak(t,n).render()}}function ak(e,t){const{width:n,height:i,marginTop:r,marginRight:s,marginBottom:o,marginLeft:a}=t;return e.voronoi([a,r,n-s,i-o])}function Wf(e,t,{x:n,y:i,...r}={}){return[n,i]=Di(n,i),new e(t,{...r,x:n,y:i})}function Mnt(e,t){return Wf(xnt,e,t)}function Rnt(e,t){return Wf(Ent,e,t)}function Int(e,t){return Wf(Tnt,e,t)}function Ant(e,t){return Wf(Cnt,e,t)}function Lnt(e,t){return Wf(Snt,e,t)}const Ont={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class lk extends re{constructor(t,{x:n,y:i,z:r,weight:s,fill:o,stroke:a,...l}={}){const c=gC(o)&&(o="currentColor",!0),u=gC(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:eo({z:r,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},Fnt({...l,fill:o,stroke:a},c,u),Ont),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=r}filter(t){return t}render(t,n,i,r,s){const{contours:o}=i,a=Qs();return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{}).call(l=>l.selectAll().data(t).enter().append("path").call(le,this).call(Ne,this,i).attr("d",c=>a(o[c]))).node()}}function knt(e,{x:t,y:n,...i}={}){return[t,n]=Di(t,n),new lk(e,{...i,x:t,y:n})}const Pnt=new Set(["x","y","z","weight"]);function Fnt(e,t,n){let{bandwidth:r,thresholds:s}=e;return r=r===void 0?20:+r,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?Tn(s):+s,An(e,function(o,a,l,c,u,f){var k;const h=l.weight?Tn(l.weight.value):null,d=(k=l.z)==null?void 0:k.value,{z:g}=this,[m,_]=cr(this,u),{width:p,height:y}=u,{x:v,y:w}=e0(l,c,f),x=Object.fromEntries(Object.entries(l).filter(([O])=>!Pnt.has(O)).map(([O,A])=>[O,{...A,value:[]}])),b=t&&[],E=n&&[],C=NX().x(v?O=>v[O]:m).y(w?O=>w[O]:_).weight(h?O=>h[O]:1).size([p,y]).bandwidth(r),I=[];for(const O of a){const A=[];I.push(A);for(const P of d?wv(O,d,g):[O]){const N=C.contours(P);A.push([P,N])}}let S=s;if(!(S instanceof Pl)){let O=0;for(const A of I)for(const[,P]of A){const N=P.max;N>O&&(O=N)}S=Float64Array.from({length:s-1},(A,P)=>O*100*(P+1)/s)}const R=[],M=[];for(const O of I){const A=[];R.push(A);for(const[P,N]of O)for(const W of S){A.push(M.length),M.push(N(W/100)),b&&b.push(W),E&&E.push(W);for(const j in x)x[j].value.push(l[j].value[P[0]])}}return b&&b.push(0),E&&E.push(0),{data:o,facets:R,channels:{...x,...b&&{fill:{value:b,scale:"color"}},...E&&{stroke:{value:E,scale:"color"}},contours:{value:M}}}})}function gC(e){return/^density$/i.test(e)}const Nnt={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ck extends re{constructor(t,n={}){const[i,r]=Ce(n.r,3);super(t,{geometry:{value:n.geometry,scale:"projection"},r:{value:i,scale:"r",filter:Wr,optional:!0}},Zv(n),Nnt),this.r=r}render(t,n,i,r,s){const{geometry:o,r:a}=i,l=Qs(s.projection??Dnt(n)),{r:c}=this;return Xm(c)?t=[]:c!==void 0&&l.pointRadius(c),Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(le,this).attr("d",a?f=>l.pointRadius(a[f])(o[f]):f=>l(o[f])).call(Ne,this,i)}).node()}}function Dnt({x:e,y:t}){if(e||t)return e??(e=n=>n),t??(t=n=>n),cg({point(n,i){this.stream.point(e(n),t(i))}})}function rb(e,{geometry:t=wt,...n}={}){switch(e==null?void 0:e.type){case"FeatureCollection":e=e.features;break;case"GeometryCollection":e=e.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":e=[e];break}return new ck(e,{geometry:t,...n})}function $nt({strokeWidth:e=1.5,...t}={}){return rb({type:"Sphere"},{strokeWidth:e,...t})}function znt({strokeOpacity:e=.1,...t}={}){return rb(LH(),{strokeOpacity:e,...t})}const au=.5,lu=0;function Wnt(e={fill:"count"},{binWidth:t,...n}={}){const{z:i}=n;return t=t===void 0?20:Nt(t),e=fv(e,n),Ps(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!Ps(e,"r")&&(n.r=t/2),An(n,(r,s,o,a,l,c)=>{let{x:u,y:f,z:h,fill:d,stroke:g,symbol:m}=o;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=e0(o,a,c)),h=h?h.value:kt(r,i),d=d==null?void 0:d.value,g=g==null?void 0:g.value,m=m==null?void 0:m.value;const _=gv(e,{z:h,fill:d,stroke:g,symbol:m}),p=h&&[],y=d&&[],v=g&&[],w=m&&[],x=[],b=[],E=[];let C=-1;for(const M of e)M.initialize(r);for(const M of s){const k=[];for(const O of e)O.scope("facet",M);for(const[O,A]of cl(M,_))for(const P of Gnt(A,u,f,t)){k.push(++C),b.push(P.x),E.push(P.y),h&&p.push(_===h?O:h[P[0]]),d&&y.push(_===d?O:d[P[0]]),g&&v.push(_===g?O:g[P[0]]),m&&w.push(_===m?O:m[P[0]]);for(const N of e)N.reduce(P)}x.push(k)}const I=o.x.scale,S=o.y.scale,R={x:{value:b,source:a[I]?{value:se(b,a[I].invert),scale:I}:null},y:{value:E,source:a[S]?{value:se(E,a[S].invert),scale:S}:null},...h&&{z:{value:p}},...d&&{fill:{value:y,scale:"auto"}},...g&&{stroke:{value:v,scale:"auto"}},...m&&{symbol:{value:w,scale:"auto"}},...Object.fromEntries(e.map(({name:M,output:k})=>[M,{scale:"auto",label:k.label,radius:M==="r"?t/2:void 0,value:k.transform()}]))};return{data:r,facets:x,channels:R}})}function Gnt(e,t,n,i){const r=i*(1.5/LL),s=new Map;for(const o of e){let a=t[o],l=n[o];if(isNaN(a)||isNaN(l))continue;let c=Math.round(l=(l-lu)/r),u=Math.round(a=(a-au)/i-(c&1)/2),f=l-c;if(Math.abs(f)*3>1){let g=a-u,m=u+(a<u?-1:1)/2,_=c+(l<c?-1:1),p=a-m,y=l-_;g*g+f*f>p*p+y*y&&(u=m+(c&1?1:-1)/2,c=_)}const h=`${u},${c}`;let d=s.get(h);d===void 0&&(s.set(h,d=[]),d.x=(u+(c&1)/2)*i+au,d.y=c*r+lu),d.push(o)}return s.values()}const Ynt={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function Bnt(e){return new uk(e)}class uk extends re{constructor({binWidth:t=20,clip:n=!0,...i}={}){super(ou,void 0,{clip:n,...i},Ynt),this.binWidth=Nt(t)}render(t,n,i,r,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:f,height:h}=r,d=u-au,g=f-l-au,m=a-lu,_=h-c-lu,p=o/2,y=p*OL,v=y/2,w=p*2,x=y*1.5,b=Math.floor(d/w),E=Math.ceil(g/w),C=Math.floor((m+v)/x),I=Math.ceil((_-v)/x)+1,S=`m0,${ms(-y)}l${ms(p)},${ms(v)}v${ms(y)}l${ms(-p)},${ms(v)}`;let R=S;for(let M=C;M<I;++M)for(let k=b;k<E;++k)R+=`M${ms(k*w+(M&1)*p)},${ms(M*x)}${S}`;return Ht("svg:g",s).datum(0).call(he,this,r,s).call(ie,this,{},He+au,He+lu).call(M=>M.append("path").call(le,this).call(Ne,this,i).attr("d",R)).node()}}function ms(e){return Math.round(e*1e3)/1e3}const Unt={ariaLabel:"image",fill:null,stroke:null};function Vnt(e){return/^\.*\//.test(e)}function Xnt(e){return/^(blob|data|file|http|https):/i.test(e)}function Hnt(e){return typeof e=="string"&&(Vnt(e)||Xnt(e))?[void 0,e]:[e,void 0]}let fk=class extends re{constructor(t,n={}){let{x:i,y:r,r:s,width:o,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:h,imageRendering:d}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[g,m]=Hnt(c),[_,p]=Ce(s),[y,v]=Ce(o,p!==void 0?p*2:void 0),[w,x]=Ce(a,p!==void 0?p*2:void 0),[b,E]=Ce(l,0);super(t,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:_,scale:"r",filter:Wr,optional:!0},width:{value:y,filter:Wr,optional:!0},height:{value:w,filter:Wr,optional:!0},rotate:{value:b,optional:!0},src:{value:g,optional:!0}},Zv(n),Unt),this.src=m,this.width=v,this.rotate=E,this.height=x,this.r=p,this.preserveAspectRatio=be(u,"xMidYMid"),this.crossOrigin=en(f),this.frameAnchor=Lf(h),this.imageRendering=be(d,"auto")}render(t,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,width:u,height:f,r:h,rotate:d,src:g}=i,{r:m,width:_,height:p,rotate:y}=this,[v,w]=cr(this,r);return Ht("svg:g",s).call(he,this,r,s).call(ie,this,{x:l&&o,y:c&&a}).call(x=>x.selectAll().data(t).enter().append("image").call(le,this).attr("x",mC(l,u,h,v,_,m)).attr("y",mC(c,f,h,w,p,m)).attr("width",u?b=>u[b]:_!==void 0?_:h?b=>h[b]*2:m*2).attr("height",f?b=>f[b]:p!==void 0?p:h?b=>h[b]*2:m*2).attr("transform",d?b=>`rotate(${d[b]})`:y?`rotate(${y})`:null).attr("transform-origin",d||y?o0`${l?b=>l[b]:v}px ${c?b=>c[b]:w}px`:null).call(mt,"href",g?b=>g[b]:this.src).call(mt,"preserveAspectRatio",this.preserveAspectRatio).call(mt,"crossorigin",this.crossOrigin).call(mt,"image-rendering",this.imageRendering).call(mt,"clip-path",h?b=>`circle(${h[b]}px)`:m!==void 0?`circle(${m}px)`:null).call(Ne,this,i)).node()}};function mC(e,t,n,i,r,s){return t&&e?o=>e[o]-t[o]/2:t?o=>i-t[o]/2:e&&r!==void 0?o=>e[o]-r/2:r!==void 0?i-r/2:n&&e?o=>e[o]-n[o]:n?o=>i-n[o]:e?o=>e[o]-s:i-s}function jnt(e,{x:t,y:n,...i}={}){return i.frameAnchor===void 0&&([t,n]=Di(t,n)),new fk(e,{...i,x:t,y:n})}function Znt(e,t,n){var i=1e-8,r=t-1,s=n-1,o=0,a,l,c,u,f,h,d,g,m,_,p;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&n>=1?(c=e<.5?e:1-e,u=Math.sqrt(-2*Math.log(c)),d=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,e<.5&&(d=-d),g=(d*d-3)/6,m=2/(1/(2*t-1)+1/(2*n-1)),_=d*Math.sqrt(g+m)/m-(1/(2*n-1)-1/(2*t-1))*(g+5/6-2/(3*m)),d=t/(t+n*Math.exp(2*_))):(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),u=Math.exp(t*a)/t,f=Math.exp(n*l)/n,_=u+f,e<u/_?d=Math.pow(t*_*e,1/t):d=1-Math.pow(n*_*(1-e),1/n)),p=-fl(t)-fl(n)+fl(t+n);o<10;o++){if(d===0||d===1)return d;if(h=qnt(d,t,n)-e,u=Math.exp(r*Math.log(d)+s*Math.log(1-d)+p),f=h/u,d-=u=f/(1-.5*Math.min(1,f*(r/d-s/(1-d)))),d<=0&&(d=.5*(d+u)),d>=1&&(d=.5*(d+u+1)),Math.abs(u)<i*d&&o>0)break}return d}function qnt(e,t,n){var i=e===0||e===1?0:Math.exp(fl(t+n)-fl(t)-fl(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?i*pC(e,t,n)/t:1-i*pC(1-e,n,t)/n}function pC(e,t,n){var i=1e-30,r=1,s=t+n,o=t+1,a=t-1,l=1,c=1-s*e/o,u,f,h,d;for(Math.abs(c)<i&&(c=i),c=1/c,d=c;r<=100&&(u=2*r,f=r*(n-r)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<i&&(c=i),l=1+f/l,Math.abs(l)<i&&(l=i),c=1/c,d*=c*l,f=-(t+r)*(s+r)*e/((t+u)*(o+u)),c=1+f*c,Math.abs(c)<i&&(c=i),l=1+f/l,Math.abs(l)<i&&(l=i),c=1/c,h=c*l,d*=h,!(Math.abs(h-1)<3e-7));r++);return d}function fl(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],i=1.000000000190015,r,s,o;for(o=(s=r=e)+5.5,o-=(r+.5)*Math.log(o);t<6;t++)i+=n[t]/++s;return Math.log(2.506628274631*i/r)-o}function Knt(e,t){var n=Znt(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const Jnt={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class hk extends re{constructor(t,n={}){const{x:i,y:r,z:s,ci:o=.95,precision:a=4}=n;if(super(t,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:eo(n),optional:!0}},n,Jnt),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,i,r,s){const{x:o,y:a,z:l}=i,{ci:c}=this;return Ht("svg:g",s).call(he,this,r,s).call(ie,this,n).call(u=>u.selectAll().data(l?wv(t,l,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(le,this).call(Mg,this,{...i,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,o,a)).call(c&&!Fl(this.fill)?h=>h.select(Qnt).attr("stroke","none").call(le,this).call(Mg,this,{...i,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,o,a)):()=>{}))).node()}}function Qnt(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Qo.svg,"path"),this)}class tit extends hk{constructor(t,n){super(t,n)}_renderBand(t,n,i){const{ci:r,precision:s}=this,[o,a]=Ye(t,u=>i[u]),l=Fg(t,i,n),c=dk(t,i,n,(1-r)/2,l);return Bw().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(ti(o,a-s/2,s).concat(a))}_renderLine(t,n,i){const[r,s]=Ye(t,a=>i[a]),o=Fg(t,i,n);return`M${o(r)},${r}L${o(s)},${s}`}}class eit extends hk{constructor(t,n){super(t,n)}_renderBand(t,n,i){const{ci:r,precision:s}=this,[o,a]=Ye(t,u=>n[u]),l=Fg(t,n,i),c=dk(t,n,i,(1-r)/2,l);return Bw().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(ti(o,a-s/2,s).concat(a))}_renderLine(t,n,i){const[r,s]=Ye(t,a=>n[a]),o=Fg(t,n,i);return`M${r},${o(r)}L${s},${o(s)}`}}function nit(e,{y:t=Ln,x:n=wt,stroke:i,fill:r=Ee(i)?"currentColor":i,...s}={}){return new tit(e,Wv({...s,x:n,y:t,fill:r,stroke:i}))}function iit(e,{x:t=Ln,y:n=wt,stroke:i,fill:r=Ee(i)?"currentColor":i,...s}={}){return new eit(e,zv({...s,x:t,y:n,fill:r,stroke:i}))}function Fg(e,t,n){let i=0,r=0,s=0,o=0;for(const u of e){const f=t[u],h=n[u];i+=f,r+=h,s+=f*h,o+=f*f}const a=e.length,l=(a*s-i*r)/(a*o-i*i),c=(r-l*i)/a;return u=>l*u+c}function dk(e,t,n,i,r){const s=ir(e,u=>t[u])/e.length;let o=0,a=0;for(const u of e)o+=(t[u]-s)**2,a+=(n[u]-r(t[u]))**2;const l=Math.sqrt(a/(e.length-2)),c=Knt(i,e.length-2);return(u,f)=>{const h=r(u),d=l*Math.sqrt(1/e.length+(u-s)**2/o);return h+f*c*d}}function Y_({path:e=wt,delimiter:t,frameAnchor:n,treeLayout:i=dg,treeSort:r,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=sb(o),r=mk(r),a!=null&&(a=U_(a)),n===void 0&&(n=o.frameAnchor);const c=pk(t),u=Ek(l,U_),[f,h]=$n(),[d,g]=$n();return{x:f,y:d,frameAnchor:n,...lr(l,(m,_)=>{const p=c(kt(m,e)),y=h([]),v=g([]);let w=-1;const x=[],b=[],E=JA().path(I=>p[I]),C=i();C.nodeSize&&C.nodeSize([1,1]),C.separation&&s!==void 0&&C.separation(s??Kw);for(const I of u)I[Ng]=I[bk]([]);for(const I of _){const S=[],R=E(I.filter(M=>p[M]!=null)).each(M=>M.data=m[M.data]);r!=null&&R.sort(r),C(R);for(const M of R.descendants())if(!(a!=null&&!a(M))){S.push(++w),x[w]=M.data,o.position(M,w,y,v);for(const k of u)k[Ng][w]=k[xk](M)}b.push(S)}return{data:x,facets:b}}),...Object.fromEntries(u)}}function gk({path:e=wt,delimiter:t,curve:n="bump-x",stroke:i="#555",strokeWidth:r=1.5,strokeOpacity:s=.5,treeLayout:o=dg,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...f}={}){c=sb(c),a=mk(a),u!=null&&(u=_C(u)),f={curve:n,stroke:i,strokeWidth:r,strokeOpacity:s,...f};const h=pk(t),d=Ek(f,_C),[g,m]=$n(),[_,p]=$n(),[y,v]=$n(),[w,x]=$n();return{x1:g,x2:_,y1:y,y2:w,...lr(f,(b,E)=>{const C=h(kt(b,e)),I=m([]),S=p([]),R=v([]),M=x([]);let k=-1;const O=[],A=[],P=JA().path(W=>C[W]),N=o();N.nodeSize&&N.nodeSize([1,1]),N.separation&&l!==void 0&&N.separation(l??Kw);for(const W of d)W[Ng]=W[bk]([]);for(const W of E){const j=[],V=P(W.filter(Z=>C[Z]!=null)).each(Z=>Z.data=b[Z.data]);a!=null&&V.sort(a),N(V);for(const{source:Z,target:z}of V.links())if(!(u!=null&&!u(z,Z))){j.push(++k),O[k]=z.data,c.position(Z,k,I,R),c.position(z,k,S,M);for(const Q of d)Q[Ng][k]=Q[xk](z,Z)}A.push(j)}return{data:O,facets:A}}),...Object.fromEntries(d)}}function sb(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return rit;case"right":return sit}throw new Error(`invalid tree anchor: ${e}`)}const rit={frameAnchor:"left",dx:6,position({x:e,y:t},n,i,r){i[n]=t,r[n]=-e}},sit={frameAnchor:"right",dx:-6,position({x:e,y:t},n,i,r){i[n]=-t,r[n]=-e}};function mk(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?yC(U_(e)):yC(oit(e))}function yC(e){return(t,n)=>ai(e(t),e(n))}function oit(e){return t=>{var n;return(n=t.data)==null?void 0:n[e]}}function pk(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(i=>ait(i,t))}const B_=92,yk=47;function ait(e,t){if(t===B_)throw new Error("delimiter cannot be backslash");let n=!1;for(let i=0,r=e.length;i<r;++i){switch(e.charCodeAt(i)){case B_:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,i-1)+e.slice(i),--i,--r):e=e.slice(0,i)+"/"+e.slice(i+1);break;case yk:n?(e=e.slice(0,i)+"\\\\"+e.slice(i),i+=2,r+=2):(e=e.slice(0,i)+"\\"+e.slice(i),++i,++r);break}n=!1}return e}function lit(e){let t=!1;for(let n=0,i=e.length;n<i;++n){switch(e.charCodeAt(n)){case B_:if(!t){t=!0;continue}case yk:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--i);break}t=!1}return e}function _k(e){return li(e)&&typeof e.node=="function"}function cit(e){return li(e)&&typeof e.link=="function"}function U_(e){if(_k(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return X_;case"node:path":return V_;case"node:internal":return wk;case"node:external":return vk;case"node:depth":return H_;case"node:height":return j_}throw new Error(`invalid node value: ${e}`)}}function _C(e){if(_k(e))return e.node;if(cit(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return Wh(X_);case"parent:path":return Wh(V_);case"parent:depth":return Wh(H_);case"parent:height":return Wh(j_);case"node:name":return X_;case"node:path":return V_;case"node:internal":return wk;case"node:external":return vk;case"node:depth":return H_;case"node:height":return j_}throw new Error(`invalid link value: ${e}`)}}function V_(e){return e.id}function X_(e){return uit(e.id)}function H_(e){return e.depth}function j_(e){return e.height}function wk(e){return!!e.children}function vk(e){return!e.children}function Wh(e){return(t,n)=>n==null?void 0:e(n)}function uit(e){let t=e.length;for(;--t>0&&!fit(e,t););return lit(e.slice(t+1))}function fit(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}const bk=2,xk=3,Ng=4;function Ek(e,t){const n=[];for(const i in e){const r=e[i],s=t(r);s!==void 0&&n.push([i,...$n(r),s])}return n}function Tk(e,{fill:t,stroke:n,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:h=u,dot:d=Ee(f)&&Ee(h),text:g="node:name",textStroke:m="white",title:_="node:path",dx:p,dy:y,textAnchor:v,treeLayout:w=dg,textLayout:x=w===dg||w===ZA?"mirrored":"normal",tip:b,...E}={}){if(p===void 0&&(p=sb(E.treeAnchor).dx),v!==void 0)throw new Error("textAnchor is not a configurable tree option");x=Un(x,"textLayout",["mirrored","normal"]);function C(I){return Dl(e,Y_({treeLayout:w,text:g,fill:t===void 0?"currentColor":t,stroke:m,dx:p,dy:y,title:_,...I,...E}))}return Pi(P5(e,gk({treeLayout:w,markerStart:f,markerEnd:h,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...E})),d?is(e,Y_({treeLayout:w,fill:t===void 0?"node:internal":t,title:_,tip:b,...E})):null,g!=null?x==="mirrored"?[C({textAnchor:"start",treeFilter:"node:external"}),C({textAnchor:"end",treeFilter:"node:internal",dx:-p})]:C():null)}function hit(e,t){return Tk(e,{...t,treeLayout:ZA})}function dit({geometry:e=wt,...t}={}){return An({...t,x:null,y:null},(n,i,r,s,o,{projection:a})=>{const l=kt(n,e),c=l.length,u=new Float64Array(c),f=new Float64Array(c),h=Qs(a);for(let d=0;d<c;++d)[u[d],f[d]]=h.centroid(l[d]);return{data:n,facets:i,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:f,scale:a==null?"y":null,source:null}}}})}function git({geometry:e=wt,...t}={}){let n;return{...t,x:{transform:i=>Float64Array.from(n=kt(kt(i,e),wH),([r])=>r)},y:{transform:()=>Float64Array.from(n,([,i])=>i)}}}function mit(e,t,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>=0?(s=o,r=o-1):i=o+1}return s}function pit(e,t,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l>0?(s=o,r=o-1):i=o+1}return s}function yit(e,t,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<0?(s=o,i=o+1):r=o-1}return s}function _it(e,t,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=e[o],l=n!==void 0?n(a,t):a-t;l<=0?(s=o,i=o+1):r=o-1}return s}function wit(e,t,n,i,r){for(;i<=r;){var s=i+r>>>1,o=e[s],a=n!==void 0?n(o,t):o-t;if(a===0)return s;a<=0?i=s+1:r=s-1}return-1}function kc(e,t,n,i,r,s){return typeof n=="function"?s(e,t,n,i===void 0?0:i|0,r===void 0?e.length-1:r|0):s(e,t,void 0,n===void 0?0:n|0,i===void 0?e.length-1:i|0)}var vit={ge:function(e,t,n,i,r){return kc(e,t,n,i,r,mit)},gt:function(e,t,n,i,r){return kc(e,t,n,i,r,pit)},lt:function(e,t,n,i,r){return kc(e,t,n,i,r,yit)},le:function(e,t,n,i,r){return kc(e,t,n,i,r,_it)},eq:function(e,t,n,i,r){return kc(e,t,n,i,r,wit)}},Dg=vit,Ka=0,_o=1,td=2,bit=Eit;function ob(e,t,n,i,r){this.mid=e,this.left=t,this.right=n,this.leftPoints=i,this.rightPoints=r,this.count=(t?t.count:0)+(n?n.count:0)+i.length}var Gf=ob.prototype;function Vp(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function Ck(e,t){var n=Gl(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function wC(e,t){var n=e.intervals([]);n.push(t),Ck(e,n)}function vC(e,t){var n=e.intervals([]),i=n.indexOf(t);return i<0?Ka:(n.splice(i,1),Ck(e,n),_o)}Gf.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e};Gf.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?wC(this,e):this.left.insert(e):this.left=Gl([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?wC(this,e):this.right.insert(e):this.right=Gl([e]);else{var n=Dg.ge(this.leftPoints,e,ab),i=Dg.ge(this.rightPoints,e,lb);this.leftPoints.splice(n,0,e),this.rightPoints.splice(i,0,e)}};Gf.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return Ka;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return vC(this,e);var i=this.left.remove(e);return i===td?(this.left=null,this.count-=1,_o):(i===_o&&(this.count-=1),i)}else if(e[0]>this.mid){if(!this.right)return Ka;var r=this.left?this.left.count:0;if(4*r>3*(t-1))return vC(this,e);var i=this.right.remove(e);return i===td?(this.right=null,this.count-=1,_o):(i===_o&&(this.count-=1),i)}else{if(this.count===1)return this.leftPoints[0]===e?td:Ka;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,i=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=i}Vp(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?Vp(this,this.left):Vp(this,this.right);return _o}for(var a=Dg.ge(this.leftPoints,e,ab);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var i=Dg.ge(this.rightPoints,e,lb);i<this.rightPoints.length&&this.rightPoints[i][1]===e[1];++i)if(this.rightPoints[i]===e)return this.rightPoints.splice(i,1),_o}return Ka}};function Sk(e,t,n){for(var i=0;i<e.length&&e[i][0]<=t;++i){var r=n(e[i]);if(r)return r}}function Mk(e,t,n){for(var i=e.length-1;i>=0&&e[i][1]>=t;--i){var r=n(e[i]);if(r)return r}}function Rk(e,t){for(var n=0;n<e.length;++n){var i=t(e[n]);if(i)return i}}Gf.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return Sk(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return Mk(this.rightPoints,e,t)}else return Rk(this.leftPoints,t)};Gf.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var i=this.left.queryInterval(e,t,n);if(i)return i}if(t>this.mid&&this.right){var i=this.right.queryInterval(e,t,n);if(i)return i}return t<this.mid?Sk(this.leftPoints,t,n):e>this.mid?Mk(this.rightPoints,e,n):Rk(this.leftPoints,n)};function xit(e,t){return e-t}function ab(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function lb(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function Gl(e){if(e.length===0)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(xit);for(var i=t[t.length>>1],r=[],s=[],o=[],n=0;n<e.length;++n){var a=e[n];a[1]<i?r.push(a):i<a[0]?s.push(a):o.push(a)}var l=o,c=o.slice();return l.sort(ab),c.sort(lb),new ob(i,Gl(r),Gl(s),l,c)}function Z_(e){this.root=e}var uc=Z_.prototype;uc.insert=function(e){this.root?this.root.insert(e):this.root=new ob(e[0],null,null,[e],[e])};uc.remove=function(e){if(this.root){var t=this.root.remove(e);return t===td&&(this.root=null),t!==Ka}return!1};uc.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)};uc.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)};Object.defineProperty(uc,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(uc,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function Eit(e){return!e||e.length===0?new Z_(null):new Z_(Gl(e))}const Tit=a7(bit),Cit=({marginLeft:e})=>[1,e],Sit=({width:e,marginRight:t})=>[-1,e-t],Mit=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],Rit=({marginTop:e})=>[1,e],Iit=({height:e,marginBottom:t})=>[-1,e-t],Ait=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function Ik(e){return typeof e=="string"?{anchor:e}:e}function Lit(e={},t={}){arguments.length===1&&([e,t]=Ak(e));let{anchor:n="left",padding:i=1,r=t.r}=Ik(e);switch(`${n}`.toLowerCase()){case"left":n=Cit;break;case"right":n=Sit;break;case"middle":n=Mit;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return Lk("x","y",n,Nt(i),r,t)}function Oit(e={},t={}){arguments.length===1&&([e,t]=Ak(e));let{anchor:n="bottom",padding:i=1,r=t.r}=Ik(e);switch(`${n}`.toLowerCase()){case"top":n=Rit;break;case"bottom":n=Iit;break;case"middle":n=Ait;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return Lk("y","x",n,Nt(i),r,t)}function Ak(e){const{anchor:t,padding:n,...i}=e,{r}=i;return[{anchor:t,padding:n,r},i]}function Lk(e,t,n,i,r,s){if(r!=null&&typeof r!="number"){let{channels:o,sort:a,reverse:l}=s;o=nv(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:r,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return An(s,function(o,a,l,c,u,f){let{[t]:h,r:d}=l;if(!l[t])throw new Error(`missing channel: ${t}`);({[t]:h}=e0(l,c,f));const g=d?void 0:r!==void 0?Nt(r):this.r!==void 0?this.r:3;d&&(d=kt(d.value,c[d.scale]||wt,Float64Array));let[m,_]=n(u);const p=m?Pit:kit,y=new Float64Array(h.length),v=d?w=>d[w]:()=>g;for(let w of a){const x=Tit();w=w.filter(d?E=>Eg(h[E])&&Wr(d[E]):E=>Eg(h[E]));const b=new Float64Array(2*w.length+2);for(const E of w){const C=v(E),I=m?C+i:0,S=h[E]-C,R=h[E]+C;let M=2;x.queryInterval(S-i,R+i,([,,O])=>{const A=y[O]-I,P=h[E]-h[O],N=i+(d?d[E]+d[O]:2*g),W=Math.sqrt(N*N-P*P);b[M++]=A-W,b[M++]=A+W});let k=b.slice(0,M);m&&(k=k.filter(O=>O>=0));t:for(const O of k.sort(p)){for(let A=0;A<M;A+=2)if(b[A]+1e-6<O&&O<b[A+1]-1e-6)continue t;y[E]=O+I;break}x.insert([S,R,E])}}m||(m=1);for(const w of a)for(const x of w)y[x]=y[x]*m+_;return{data:o,facets:a,channels:{[e]:{value:y,source:null},[t]:{value:h,source:l[t]},...d&&{r:{value:d,source:l.r}}}}})}function kit(e,t){return Math.abs(e)-Math.abs(t)}function Pit(e,t){return e-t}function Fit(e,t){return arguments.length===1&&({basis:e,...t}=e),Jv(cb(e),t)}function Nit(e,t){return arguments.length===1&&({basis:e,...t}=e),Qv(cb(e),t)}function cb(e){if(e===void 0)return bC;if(typeof e=="function")return y0(tv(e));if(/^p\d{2}$/i.test(e))return fc(Jw(e));switch(`${e}`.toLowerCase()){case"deviation":return zit;case"first":return bC;case"last":return $it;case"max":return Wit;case"mean":return Git;case"median":return Yit;case"min":return Bit;case"sum":return Uit;case"extent":return Dit}throw new Error(`invalid basis: ${e}`)}function y0(e){return{mapIndex(t,n,i){const r=+e(t,n);for(const s of t)i[s]=n[s]===null?NaN:n[s]/r}}}function fc(e){return y0((t,n)=>e(t,i=>n[i]))}const Dit={mapIndex(e,t,n){const[i,r]=Ye(e,o=>t[o]),s=r-i;for(const o of e)n[o]=t[o]===null?NaN:(t[o]-i)/s}},bC=y0((e,t)=>{for(let n=0;n<e.length;++n){const i=t[e[n]];if(gn(i))return i}}),$it=y0((e,t)=>{for(let n=e.length-1;n>=0;--n){const i=t[e[n]];if(gn(i))return i}}),zit={mapIndex(e,t,n){const i=Em(e,s=>t[s]),r=ff(e,s=>t[s]);for(const s of e)n[s]=t[s]===null?NaN:r?(t[s]-i)/r:0}},Wit=fc(Ue),Git=fc(Em),Yit=fc(Iu),Bit=fc(Sn),Uit=fc(ir);function Vit(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return Ok(t);case"last":return kk(t)}if(typeof e=="function")return js(null,e,t);let n,i;for(n in e){if(i!==void 0)throw new Error("ambiguous selector; multiple inputs");i=Xit(e[n])}if(i===void 0)throw new Error(`invalid selector: ${e}`);return js(n,i,t)}function Xit(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return ub;case"max":return fb}throw new Error(`unknown selector: ${e}`)}function Ok(e){return js(null,Kit,e)}function kk(e){return js(null,Jit,e)}function Hit(e){return js("x",ub,e)}function jit(e){return js("y",ub,e)}function Zit(e){return js("x",fb,e)}function qit(e){return js("y",fb,e)}function*Kit(e){yield e[0]}function*Jit(e){yield e[e.length-1]}function*ub(e,t){yield NY(e,n=>t[n])}function*fb(e,t){yield _w(e,n=>t[n])}function js(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const i=eo(n);return lr(n,(r,s)=>{const o=kt(r,i),a=kt(r,e),l=[];for(const c of s){const u=[];for(const f of o?Jr(c,h=>o[h]).values():[c])for(const h of t(f,a))u.push(h);l.push(u)}return{data:r,facets:l}})}const Xp=Object.freeze(Object.defineProperty({__proto__:null,Area:f0,Arrow:F5,BarX:D5,BarY:$5,Cell:h0,Contour:sk,Density:lk,Dot:d0,Frame:m5,Geo:ck,Hexgrid:uk,Image:fk,Line:g0,Link:k5,Mark:re,Raster:J5,Rect:m0,RuleX:MO,RuleY:RO,Text:a0,TickX:U5,TickY:V5,Tip:p5,Vector:l0,area:cet,areaX:Vu,areaY:la,arrow:met,auto:Ret,autoSpec:z5,axisFx:KO,axisFy:qO,axisX:kv,axisY:Ov,barX:Po,barY:Fo,bin:Eo,binX:Ms,binY:Rs,bollinger:jo,bollingerX:Xet,bollingerY:Het,boxX:Zet,boxY:qet,cell:qa,cellX:yet,cellY:_et,centroid:dit,circle:xet,cluster:hit,column:$n,contour:unt,crosshair:hnt,crosshairX:dnt,crosshairY:gnt,delaunayLink:Mnt,delaunayMesh:Rnt,density:knt,dodgeX:Lit,dodgeY:Oit,dot:is,dotX:vet,dotY:bet,filter:kK,formatIsoDate:WL,formatMonth:QK,formatWeekday:tJ,frame:Nv,geo:rb,geoCentroid:git,graticule:znt,gridFx:i5,gridFy:e5,gridX:n5,gridY:t5,group:uv,groupX:Wu,groupY:Gu,groupZ:cv,hexagon:Eet,hexbin:Wnt,hexgrid:Bnt,hull:Int,identity:wt,image:jnt,indexOf:Ln,initializer:An,interpolateNearest:ik,interpolateNone:G_,interpolatorBarycentric:nk,interpolatorRandomWalk:rk,legend:ett,line:qv,lineX:Xu,lineY:Wl,linearRegressionX:nit,linearRegressionY:iit,link:P5,map:Zr,mapX:Jv,mapY:Qv,marks:Pi,normalize:cb,normalizeX:Fit,normalizeY:Nit,plot:_5,pointer:Rv,pointerX:Uu,pointerY:Iv,raster:Jet,rect:Kv,rectX:kg,rectY:Pg,reverse:PK,ruleX:jr,ruleY:Hs,scale:rQ,select:Vit,selectFirst:Ok,selectLast:kk,selectMaxX:Zit,selectMaxY:qit,selectMinX:Hit,selectMinY:jit,shuffle:FK,sort:kL,sphere:$nt,spike:YQ,stackX:M5,stackX1:Xtt,stackX2:Htt,stackY:R5,stackY1:jtt,stackY2:Ztt,text:Dl,textX:OO,textY:kO,tickX:X5,tickY:H5,tip:y5,transform:lr,tree:Tk,treeLink:gk,treeNode:Y_,valueof:kt,vector:BO,vectorX:UO,vectorY:VO,voronoi:Ant,voronoiMesh:Lnt,window:p0,windowX:Fet,windowY:z_},Symbol.toStringTag,{value:"Module"}));class Qit{constructor(){this.documentElement=new Hp(this,"html")}createElementNS(t,n){return new Hp(this,n)}createElement(t){return new Hp(this,t)}createTextNode(t){return new trt(this,t)}querySelector(){return null}querySelectorAll(){return[]}}const $g=class $g{setProperty(){}removeProperty(){}};gt($g,"empty",new $g);let q_=$g,Hp=class{constructor(t,n){this.ownerDocument=t,this.tagName=n,this.attributes={},this.children=[],this.parentNode=null}setAttribute(t,n){this.attributes[t]=String(n)}setAttributeNS(t,n,i){this.setAttribute(n,i)}getAttribute(t){return this.attributes[t]}getAttributeNS(t){return this.getAttribute(t)}hasAttribute(t){return t in this.attributes}hasAttributeNS(t){return this.hasAttribute(t)}removeAttribute(t){delete this.attributes[t]}removeAttributeNS(t,n){this.removeAttribute(n)}addEventListener(){}removeEventListener(){}dispatchEvent(){}append(...t){for(const n of t)this.appendChild(n!=null&&n.ownerDocument?n:this.ownerDocument.createTextNode(n))}appendChild(t){return this.children.push(t),t.parentNode=this,t}insertBefore(t,n){if(n==null)this.children.push(t);else{const i=this.children.indexOf(n);if(i<0)throw new Error("insertBefore reference node not found");this.children.splice(i,0,t)}return t.parentNode=this,t}querySelector(){return null}querySelectorAll(){return[]}set textContent(t){this.children=[this.ownerDocument.createTextNode(t)]}set style(t){this.attributes.style=t}get style(){return q_.empty}toHyperScript(){return Mr(this.tagName,this.attributes,this.children.map(t=>t.toHyperScript()))}};class trt{constructor(t,n){this.ownerDocument=t,this.nodeValue=String(n)}toHyperScript(){return this.nodeValue}}function Pk(e){if(e.nodeType===3)return e.nodeValue;const t={};for(const i of e.getAttributeNames())t[i]=e.getAttribute(i);const n=[];for(let i=e.firstChild;i;i=i.nextSibling)n.push(Pk(i));return Mr(e.tagName,t,n)}const ert={props:{options:Object,mark:Object,defer:Boolean,method:{type:String,default:"plot"},onRender:Function},render(){const{method:e}=this,t={...e==="plot"&&{marks:this.mark==null?[]:[this.mark]},...this.options,className:"plot"};if(this.defer){const i=o=>{s();const a=()=>{r(o);const c=Xp[e](t);o.append(c),this.onRender(c)},l=o.getBoundingClientRect();l.bottom>0&&l.top<window.innerHeight?a():(this._observer=new IntersectionObserver(([c])=>{c.isIntersecting&&a()},{rootMargin:"100px"}),this._observer.observe(o),typeof requestIdleCallback=="function"&&(this._idling=requestIdleCallback(a)))},r=o=>{for(;o.lastChild;)o.lastChild.remove();s()},s=()=>{this._observer!==void 0&&(this._observer.disconnect(),this._observer=void 0),this._idling!==void 0&&(cancelIdleCallback(this._idling),this._idling=void 0)};return this.options,Is(Mr("span",e==="plot"?[Mr("div",{style:{maxWidth:"100%"}})]:[]),[[{mounted:i,updated:i,unmounted:r}]])}if(typeof document<"u"){const i=Xp[e](t),r=s=>{for(;s.lastChild;)s.lastChild.remove();s.append(i),this.onRender(i)};return Is(Mr("span",[Pk(i)]),[[{mounted:r,updated:r}]])}const n=Xp[e]({...t,document:new Qit});return this.onRender(n),Mr("span",[n.toHyperScript()])}};function xC(e,t){if(!e)return"0 m";t=t??0;const n=(t??0)<=0?1:10*t;return e<1e3?`${(Math.round(e*n)/n).toLocaleString()} m`:`${(Math.round(e/1e3*n)/n).toLocaleString()} km`}const nrt={components:{PlotFigure:ert},props:{activityFiles:Array,activityTimezoneOffset:Array},data(){return{x:e=>e.totalDistance,y:e=>e.altitude,firstData:Ad,hovered:Ad,cumulativeData:[],yMin:Number.MAX_VALUE,yMax:0,plotSizeWidth:0,plotSizeHeight:0}},watch:{activityFiles:{handler(e){let t=[],n=0;e==null||e.forEach((i,r)=>{i.records.length>0&&(i.records.map((s,o)=>{s.totalDistance=n+s.distance,typeof s.altitude=="number"&&s.altitude>this.yMax&&(this.yMax=s.altitude),typeof s.altitude=="number"&&s.altitude<this.yMin&&(this.yMin=s.altitude),s.activityIndex=r,s.recordIndex=o}),n=i.records[i.records.length-1].totalDistance,t=t.concat(i.records))}),this.firstData=t[0],this.cumulativeData=t}}},computed:{hoveredResult:function(){if(!this.hovered||!this.firstData)return null;const e=Ct.fromISO(this.hovered.timestamp??"").diff(Ct.fromISO(this.firstData.timestamp??""));return{distance:xC(this.hovered.totalDistance??0,2),duration:U2(e,"seconds",{unitDisplay:"short"}),altitude:(this.hovered.altitude??0).toFixed(2),grade:Math.round(this.hovered.grade??0)}},options:function(){const e=(this.cumulativeData.length<50?50:this.cumulativeData.length)/50;return{width:this.plotSizeWidth<=0?void 0:this.plotSizeWidth,height:this.plotSizeHeight<=0?void 0:this.plotSizeHeight,x:{grid:!0,label:"Distance (km)",transform:t=>t/1e3},y:{grid:!0,label:"Altitude (m)",nice:!0},color:{type:"diverging",scheme:"RdYlGn",reverse:!0,pivot:0,symmetric:!0},marks:[la(this.cumulativeData,z_(e,{x:this.x,y:this.y,z:null,fill:"#2A303F",curve:"basis",y1:this.yMin})),Wl(this.cumulativeData,z_(e,{x:this.x,y:this.y,z:null,stroke:"grade",curve:"basis",strokeWidth:4,strokeOpacity:.5})),jr(this.cumulativeData,Uu({x:this.x,py:this.y,stroke:"#f15a22"})),is(this.cumulativeData,Uu({x:this.x,y:this.y,r:10,stroke:"#f15a22"}))]}}},methods:{distanceToHuman:xC,toHuman:U2,getOptions(){},plotRendered(e){this.onResize(),e.addEventListener("input",()=>{this.hovered=e.value,this.$emit("record",e.value)})},onResize(){if(!this.$el)return;let e=this.$el.offsetWidth,t=this.$el.offsetHeight-this.$el.querySelector(".graph-detail").offsetHeight-1;this.plotSizeWidth!=e&&(this.plotSizeWidth=e),this.plotSizeHeight!=t&&(this.plotSizeHeight=t),console.log(this.plotSizeWidth,this.plotSizeHeight)}},updated(){},mounted(){this.$nextTick(()=>{window.addEventListener("resize",this.onResize),this.onResize()})},unmounted(){window.removeEventListener("resize",this.onResize)}};const _0=e=>(nS("data-v-05838bb9"),e=e(),iS(),e),irt={style:{display:"flex","flex-direction":"column",height:"100%"}},rrt={class:"graph-detail"},srt={class:"detail"},ort=_0(()=>G("span",null,[G("i",{class:"fa-solid fa-road"})],-1)),art={class:"detail-value"},lrt={class:"detail"},crt=_0(()=>G("span",null,[G("i",{class:"fa-solid fa-hourglass-half"})],-1)),urt={class:"detail-value"},frt={class:"detail"},hrt=_0(()=>G("span",null,[G("i",{class:"fa-solid fa-mountain"})],-1)),drt={class:"detail-value"},grt={class:"detail"},mrt=_0(()=>G("span",null,[G("i",{class:"fa-solid fa-angle-left"})],-1)),prt={class:"detail-value"},yrt={class:"graph",style:{"flex-grow":"1"}};function _rt(e,t,n,i,r,s){const o=rP("PlotFigure");return Wt(),qt("div",irt,[G("div",rrt,[G("div",srt,[ort,G("span",art,It(s.hoveredResult?s.hoveredResult.distance??"-":"-"),1)]),G("div",lrt,[crt,G("span",urt,It(s.hoveredResult?s.hoveredResult.duration??"-":"-"),1)]),G("div",frt,[hrt,G("span",drt,It(s.hoveredResult?s.hoveredResult.altitude??"-":"-")+" masl",1)]),G("div",grt,[mrt,G("span",prt,It(s.hoveredResult?s.hoveredResult.grade??"-":"-")+"%",1)])]),G("div",yrt,[ge(o,{options:s.options,defer:"",onRender:s.plotRendered},null,8,["options","onRender"])])])}const wrt=Ql(nrt,[["render",_rt],["__scopeId","data-v-05838bb9"]]),vrt={props:{id:String,isWebAssemblySupported:Boolean}};const brt={class:"navigator"},xrt={class:"navigator-input",style:{"text-align":"center"}},Ert=["id","disabled"];function Trt(e,t,n,i,r,s){return Wt(),qt("div",brt,[G("div",xrt,[G("input",{class:"input",type:"file",id:n.id??"fileInput",accept:".fit",multiple:"",disabled:!n.isWebAssemblySupported},null,8,Ert)])])}const EC=Ql(vrt,[["render",Trt]]);class Crt{constructor(){gt(this,"sport",null);gt(this,"subSport",null);gt(this,"totalMovingTime",null);gt(this,"totalElapsedTime",null);gt(this,"totalTimerTime",null);gt(this,"totalDistance",null);gt(this,"totalAscent",null);gt(this,"totalDescent",null);gt(this,"totalCycles",null);gt(this,"totalCalories",null);gt(this,"avgSpeed",null);gt(this,"maxSpeed",null);gt(this,"avgHeartRate",null);gt(this,"maxHeartRate",null);gt(this,"avgCadence",null);gt(this,"maxCadence",null);gt(this,"avgPower",null);gt(this,"maxPower",null);gt(this,"avgTemperature",null);gt(this,"maxTemperature",null);gt(this,"avgAltitude",null);gt(this,"maxAltitude",null)}}function go(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(n+=r,t++)}return t==0?null:n/t}function mo(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(r>t&&(t=r),n++)}return n==0?null:t}function vr(...e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i];r&&(t+=r,n++)}return n==0?null:t}const Srt={props:{activityFiles:Array,timezoneOffsetHour:Number},computed:{summary(){const e=new Crt;for(let t=0;t<this.activityFiles.length;t++)for(let n=0;n<this.activityFiles[t].sessions.length;n++){const i=this.activityFiles[t].sessions[n];e.sport=i.sport,e.subSport=i.subSport,e.totalMovingTime=vr(e.totalMovingTime,i.totalMovingTime),e.totalElapsedTime=vr(e.totalElapsedTime,i.totalElapsedTime),e.totalTimerTime=vr(e.totalTimerTime,i.totalTimerTime),e.totalDistance=vr(e.totalDistance,i.totalDistance),e.totalAscent=vr(e.totalAscent,i.totalAscent),e.totalDescent=vr(e.totalDescent,i.totalDescent),e.totalCycles=vr(e.totalCycles,i.totalCycles),e.totalCalories=vr(e.totalCalories,i.totalCalories),e.avgSpeed=go(e.avgSpeed,i.avgSpeed),e.maxSpeed=mo(e.maxSpeed,i.maxSpeed),e.avgHeartRate=go(e.avgHeartRate,i.avgHeartRate),e.maxHeartRate=mo(e.maxHeartRate,i.maxHeartRate),e.avgCadence=go(e.avgCadence,i.avgCadence),e.maxCadence=mo(e.maxCadence,i.maxCadence),e.avgPower=go(e.avgPower,i.avgPower),e.maxPower=mo(e.maxPower,i.maxPower),e.avgTemperature=go(e.avgTemperature,i.avgTemperature),e.maxTemperature=mo(e.maxTemperature,i.maxTemperature),e.avgAltitude=go(e.avgAltitude,i.avgAltitude),e.maxAltitude=mo(e.maxAltitude,i.maxAltitude)}return e}},methods:{toTimezoneDateString:hI,GMTString:VG,secondsToDHMS:XG,avg:go,max:mo,sum:vr}};const Mrt={class:"navigator"},Rrt={class:"navigator-info"},Irt={key:0,class:"time-created"},Art={key:1,class:"manufacturer"},Lrt={class:"navigator-summary analysis"},Ort={class:"summary"},krt={key:0,class:"section-title"},Prt={class:"summary-grid"},Frt={key:0,class:"summary-item"},Nrt=G("div",{class:"summary-title"},"Sport",-1),Drt={class:"summary-value"},$rt={key:1,class:"summary-item"},zrt=G("div",{class:"summary-title"},"Sub Sport",-1),Wrt={class:"summary-value"},Grt={class:"summary-grid"},Yrt={key:0,class:"summary-item"},Brt=G("div",{class:"summary-title"},"Total Moving Time",-1),Urt={class:"summary-value"},Vrt=G("i",{class:"fa-solid fa-hourglass-half"},null,-1),Xrt={key:1,class:"summary-item"},Hrt=G("div",{class:"summary-title"},"Total Elapsed Time",-1),jrt={class:"summary-value"},Zrt=G("i",{class:"fa-solid fa-hourglass-end"},null,-1),qrt={class:"summary-grid"},Krt={key:0,class:"summary-item"},Jrt=G("div",{class:"summary-title"},"Total Distance",-1),Qrt={class:"summary-value"},tst=G("i",{class:"fa-solid fa-road"},null,-1),est={key:1,class:"summary-item"},nst=G("div",{class:"summary-title"},"Total Calories",-1),ist={class:"summary-value"},rst=G("i",{class:"fa-solid fa-droplet"},null,-1),sst={class:"summary-grid"},ost={key:0,class:"summary-item"},ast=G("div",{class:"summary-title"},"Avg Speed",-1),lst={class:"summary-value"},cst=G("i",{class:"fa-solid fa-gauge"},null,-1),ust={key:1,class:"summary-item"},fst=G("div",{class:"summary-title"},"Max Speed",-1),hst={class:"summary-value"},dst=G("i",{class:"fa-solid fa-gauge-high"},null,-1),gst={class:"summary-grid"},mst={key:0,class:"summary-item"},pst=G("div",{class:"summary-title"},"Avg Heart Rate",-1),yst={class:"summary-value"},_st=G("i",{class:"fa-solid fa-heart-pulse"},null,-1),wst={key:1,class:"summary-item"},vst=G("div",{class:"summary-title"},"Max Heart Rate",-1),bst={class:"summary-value"},xst=G("i",{class:"fa-solid fa-heart-pulse"},null,-1),Est={class:"summary-grid"},Tst={key:0,class:"summary-item"},Cst=G("div",{class:"summary-title"},"Avg Cadence",-1),Sst={class:"summary-value"},Mst=G("i",{class:"fa-solid fa-rotate"},null,-1),Rst={key:1,class:"summary-item"},Ist=G("div",{class:"summary-title"},"Max Cadence",-1),Ast={class:"summary-value"},Lst=G("i",{class:"fa-solid fa-rotate"},null,-1),Ost={class:"summary-grid"},kst={key:0,class:"summary-item"},Pst=G("div",{class:"summary-title"},"Avg Power",-1),Fst={class:"summary-value"},Nst=G("i",{class:"fa-solid fa-bolt-lightning"},null,-1),Dst={key:1,class:"summary-item"},$st=G("div",{class:"summary-title"},"Max Power",-1),zst={class:"summary-value"},Wst=G("i",{class:"fa-solid fa-bolt-lightning"},null,-1),Gst={class:"summary-grid"},Yst={key:0,class:"summary-item"},Bst=G("div",{class:"summary-title"},"Avg Temperature",-1),Ust={class:"summary-value"},Vst=G("i",{class:"fa-solid fa-temperature-low"},null,-1),Xst={key:1,class:"summary-item"},Hst=G("div",{class:"summary-title"},"Max Temperature",-1),jst={class:"summary-value"},Zst=G("i",{class:"fa-solid fa-temperature-high"},null,-1),qst={class:"summary-grid"},Kst={key:0,class:"summary-item"},Jst=G("div",{class:"summary-title"},"Total Ascent",-1),Qst={class:"summary-value"},tot=G("i",{class:"fa-solid fa-arrow-trend-up"},null,-1),eot={key:1,class:"summary-item"},not=G("div",{class:"summary-title"},"Total Descent",-1),iot={class:"summary-value"},rot=G("i",{class:"fa-solid fa-arrow-trend-down"},null,-1),sot={class:"summary-grid"},oot={key:0,class:"summary-item"},aot=G("div",{class:"summary-title"},"Avg Altitude",-1),lot={class:"summary-value"},cot=G("i",{class:"fa-solid fa-mountain"},null,-1),uot={key:1,class:"summary-item"},fot=G("div",{class:"summary-title"},"Max Altitude",-1),hot={class:"summary-value"},dot=G("i",{class:"fa-solid fa-mountain"},null,-1);function got(e,t,n,i,r,s){var o,a,l,c,u,f,h;return Wt(),qt("div",Mrt,[G("div",Rrt,[n.activityFiles&&n.activityFiles.length!=0?(Wt(),qt("div",Irt," Created on: "+It(s.toTimezoneDateString((a=(o=n.activityFiles[0])==null?void 0:o.fileId)==null?void 0:a.timeCreated,n.timezoneOffsetHour))+" "+It(s.GMTString(n.timezoneOffsetHour)),1)):de("",!0),n.activityFiles&&n.activityFiles.length!=0?(Wt(),qt("div",Art," Device: "+It((c=(l=n.activityFiles[0])==null?void 0:l.fileId)==null?void 0:c.manufacturer)+" ("+It((f=(u=n.activityFiles[0])==null?void 0:u.fileId)==null?void 0:f.product)+") ",1)):de("",!0)]),G("div",Lrt,[G("div",Ort,[((h=n.activityFiles)==null?void 0:h.length)!=0?(Wt(),qt("h4",krt,"Summary")):de("",!0),G("div",null,[G("div",Prt,[s.summary.sport?(Wt(),qt("div",Frt,[Nrt,G("div",Drt,It(s.summary.sport),1)])):de("",!0),s.summary.subSport?(Wt(),qt("div",$rt,[zrt,G("div",Wrt,It(s.summary.subSport),1)])):de("",!0)]),G("div",Grt,[s.summary.totalMovingTime?(Wt(),qt("div",Yrt,[Brt,G("div",Urt,[Vrt,Se(" "+It(s.secondsToDHMS(s.summary.totalMovingTime)),1)])])):de("",!0),s.summary.totalElapsedTime?(Wt(),qt("div",Xrt,[Hrt,G("div",jrt,[Zrt,Se(" "+It(s.secondsToDHMS(s.summary.totalElapsedTime)),1)])])):de("",!0)]),G("div",qrt,[s.summary.totalDistance?(Wt(),qt("div",Krt,[Jrt,G("div",Qrt,[tst,Se(" "+It((s.summary.totalDistance/1e3).toFixed(2))+" km ",1)])])):de("",!0),s.summary.totalCalories?(Wt(),qt("div",est,[nst,G("div",ist,[rst,Se(" "+It(s.summary.totalCalories.toLocaleString())+" Cal ",1)])])):de("",!0)]),G("div",sst,[s.summary.avgSpeed?(Wt(),qt("div",ost,[ast,G("div",lst,[cst,Se(" "+It((s.summary.avgSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):de("",!0),s.summary.maxSpeed?(Wt(),qt("div",ust,[fst,G("div",hst,[dst,Se(" "+It((s.summary.maxSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):de("",!0)]),G("div",gst,[s.summary.avgHeartRate?(Wt(),qt("div",mst,[pst,G("div",yst,[_st,Se(" "+It(Math.round(s.summary.avgHeartRate))+" bpm ",1)])])):de("",!0),s.summary.maxHeartRate?(Wt(),qt("div",wst,[vst,G("div",bst,[xst,Se(" "+It(s.summary.maxHeartRate)+" bpm ",1)])])):de("",!0)]),G("div",Est,[s.summary.avgCadence?(Wt(),qt("div",Tst,[Cst,G("div",Sst,[Mst,Se(" "+It(Math.round(s.summary.avgCadence))+" rpm ",1)])])):de("",!0),s.summary.maxCadence?(Wt(),qt("div",Rst,[Ist,G("div",Ast,[Lst,Se(" "+It(s.summary.maxCadence)+" rpm ",1)])])):de("",!0)]),G("div",Ost,[s.summary.avgPower?(Wt(),qt("div",kst,[Pst,G("div",Fst,[Nst,Se(" "+It(Math.round(s.summary.avgPower)),1)])])):de("",!0),s.summary.maxPower?(Wt(),qt("div",Dst,[$st,G("div",zst,[Wst,Se(" "+It(s.summary.maxPower),1)])])):de("",!0)]),G("div",Gst,[s.summary.avgTemperature?(Wt(),qt("div",Yst,[Bst,G("div",Ust,[Vst,Se(" "+It(Math.round(s.summary.avgTemperature))+" °C ",1)])])):de("",!0),s.summary.maxTemperature?(Wt(),qt("div",Xst,[Hst,G("div",jst,[Zst,Se(" "+It(s.summary.maxTemperature)+" °C ",1)])])):de("",!0)]),G("div",qst,[s.summary.totalAscent?(Wt(),qt("div",Kst,[Jst,G("div",Qst,[tot,Se(" "+It(s.summary.totalAscent)+" m ",1)])])):de("",!0),s.summary.totalDescent?(Wt(),qt("div",eot,[not,G("div",iot,[rot,Se(" "+It(s.summary.totalDescent)+" m ",1)])])):de("",!0)]),G("div",sot,[s.summary.avgAltitude?(Wt(),qt("div",oot,[aot,G("div",lot,[cot,Se(" "+It(s.summary.avgAltitude.toFixed(2))+" m ",1)])])):de("",!0),s.summary.maxAltitude?(Wt(),qt("div",uot,[fot,G("div",hot,[dot,Se(" "+It(s.summary.maxAltitude.toFixed(2))+" m ",1)])])):de("",!0)])])])])])}const TC=Ql(Srt,[["render",got]]),mot={props:{size:{default:"70px"},color:{default:"#41b883"}},computed:{diamondStyle(){let e=parseInt(this.size);return{width:e/4+"px",height:e/4+"px","--bg-color":this.color}},styles(){let e=parseInt(this.size);return{width:this.size,height:e/4+"px"}}}};const pot={class:"spinner-container"};function yot(e,t,n,i,r,s){return Wt(),qt("div",pot,[G("span",{style:Ke(s.styles),class:"spinner spinner--rotate-diamond"},[G("div",{style:Ke(s.diamondStyle),class:"diamond"},null,4),G("div",{style:Ke(s.diamondStyle),class:"diamond"},null,4),G("div",{style:Ke(s.diamondStyle),class:"diamond"},null,4)],4)])}const _ot=Ql(mot,[["render",yot],["__scopeId","data-v-660b1dce"]]);class jp{constructor(t,n){gt(this,"X",0);gt(this,"Y",0);this.X=t,this.Y=n}}class wot{constructor(){gt(this,"a",0);gt(this,"b",0)}train(t){let n=0,i=0,r=0,s=0;t.forEach(a=>{n+=a.X,i+=a.Y,r+=a.X*a.Y,s+=a.X*a.X});const o=t.length;this.b=(o*r-n*i)/(o*s-n*n),this.a=(i-this.b*n)/o}predictY(t){return this.a+t*this.b}}const w0=e=>(nS("data-v-ae02f6a5"),e=e(),iS(),e),vot={class:"offcanvas offcanvas-start",tabindex:"-1",id:"offcanvasSummary","aria-labelledby":"offcanvasSummaryLabel"},bot=w0(()=>G("div",{class:"offcanvas-header"},[G("h5",{class:"offcanvas-title title",id:"offcanvasSummaryLabel"},"Open Activity"),G("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),xot={class:"offcanvas-body"},Eot={class:"activity container-fluid text-center"},Tot=w0(()=>G("div",{class:"header pt-3 pb-1"},[G("h2",{class:"title"},"Open Activity")],-1)),Cot={class:"col-12 col-md-7 col-xl-9 map-container"},Sot={class:"row"},Mot={class:nr(["col-12","map"])},Rot=w0(()=>G("div",{class:nr(["col-12","bottom-info-button"])},[G("nav",{class:"position-relative bottom-info-nav"},[G("div",{class:"nav nav-tabs",role:"tablist"},[G("button",{class:"nav-link d-md-none",type:"button",role:"tab","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasSummary","aria-controls":"offcanvasSummary","aria-label":"Toggle Summary"},[G("i",{class:"fa-solid fa-bar"}),Se(" Summary ")]),G("button",{class:"nav-link active",id:"nav-elevation-tab","data-bs-toggle":"tab","data-bs-target":"#nav-graph",type:"button",role:"tab","aria-controls":"nav-graph","aria-selected":"true"}," Elevation ")])])],-1)),Iot={class:nr(["col-12","bottom-info"])},Aot={class:"tab-content h-100"},Lot={class:nr(["tab-pane fade show active h-100","graph"]),id:"nav-graph",role:"tabpanel","aria-labelledby":"nav-elevation-tab",tabindex:"0"},Oot=w0(()=>G("div",{class:nr(["tab-pane fade h-100","graph"]),id:"nav-hr",role:"tabpanel","aria-labelledby":"nav-hr-tab",tabindex:"0"},null,-1)),K_=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function";K_==!1&&alert("Sorry, it appears that your browser does not support WebAssembly :(");class kot{constructor(t){gt(this,"feature");gt(this,"activityFile");gt(this,"err");const n=t;this.feature=n==null?void 0:n.feature,this.activityFile=new Xz(n==null?void 0:n.activityFile),this.err=n==null?void 0:n.err}}const Pot={data(){return{decodeWorker:new Worker(new URL("/assets/fitsvc-decode-0a8043f3.js",self.location),{type:"module"}),geojsons:new Array,activityFiles:new Array,timezoneOffsetHour:0,timezoneOffsetHoursList:new Array,loading:!1,begin:0}},computed:{isActivityFileReady:function(){return this.activityFiles&&this.activityFiles.length>0}},watch:{activityFiles:{async handler(e){var n,i;const t=new Array;for(let r=0;r<e.length;r++){if(!((n=e[r].activity)!=null&&n.timestamp)||!((i=e[r].activity)!=null&&i.localDateTime))return;const s=new Date(e[r].activity.localDateTime),o=new Date(e[r].activity.timestamp),a=s.getTime()-o.getTime(),l=Math.floor(a/1e3/3600);t.push(l)}this.timezoneOffsetHoursList=t,this.timezoneOffsetHour=t[0],console.log("timezone offsets:",t)}}},methods:{fileInputEventListener(e){var i;const t=e.target;if(!t.files)return;let n=new Array;for(let r=0;r<((i=t.files)==null?void 0:i.length);r++)n.push(new Promise((s,o)=>{const a=t.files[r];if(!a)return;const l=new FileReader;l.onload=c=>{const u=c.target.result;s(new Uint8Array(u))},l.onerror=o,l.readAsArrayBuffer(a)}));Promise.all(n).then(r=>{this.begin=new Date().getTime(),this.loading=!0,this.decodeWorker.postMessage(r)})},decodeWorkerOnMessage(e){const t=e.data;if(t.err!=""){console.error(`decode return with err: ${t.err}`),alert(`decode return with err: ${t.err}`),this.loading=!1;return}const n=new Array;for(let a=0;a<t.decodeResults.length;a++)n[a]=new kot(t.decodeResults[a]);const i=new Date().getTime()-this.begin;console.group("Elapsed"),console.log("Decode took:		",t.took,"ms"),console.log("Interop wasm to js:	",i-t.took,"ms"),console.log("Total elapsed:		",i,"ms"),console.groupEnd();const r=new Array;for(let a=0;a<n.length;a++)r.push(n[a].feature);this.geojsons=r;const s=new Array,o=100;for(let a=0;a<n.length;a++)this.calculateGradePercentage(n[a].activityFile,o),s.push(n[a].activityFile);this.activityFiles=s,this.loading=!1},calculateGradePercentage(e,t){const n=e.records.length;for(let i=0;i<n;i++){const r=new Array;let s=0,o=i;for(r.push(new jp(e.records[i].distance,e.records[i].altitude));s<t&&o>0;)s+=e.records[o].distance-e.records[o-1].distance,r.push(new jp(e.records[o].distance,e.records[o].altitude)),o--;r.length==1&&i-1>0&&r.push(new jp(e.records[i-1].distance,e.records[i-1].altitude));const a=e.records[i].altitude,l=new wot;l.train(r);const c=l.predictY(r[r.length-1].X),u=a-c,f=Math.sqrt(Math.pow(s,2)-Math.pow(u,2)),h=u/f*100;e.records[i].grade=h}},elevationOnRecord(e){this.$refs.theMap.showPopUpRecord(e)}},mounted(){var e,t;(e=document.getElementById("fileInput"))==null||e.addEventListener("change",this.fileInputEventListener),(t=document.getElementById("fileInputMobile"))==null||t.addEventListener("change",this.fileInputEventListener),this.decodeWorker.onmessage=this.decodeWorkerOnMessage}},Fot=Hu({...Pot,__name:"TheActivity",setup(e){return(t,n)=>(Wt(),qt("div",null,[ge(y1,null,{default:rS(()=>[Is(ge(_ot,null,null,512),[[Ya,t.loading]])]),_:1}),G("div",vot,[bot,G("div",xot,[ge(EC,{isWebAssemblySupported:Pr(K_),id:"fileInputMobile"},null,8,["isWebAssemblySupported"]),ge(TC,{activityFiles:t.activityFiles,timezoneOffsetHour:t.timezoneOffsetHour},null,8,["activityFiles","timezoneOffsetHour"])])]),G("div",Eot,[G("div",{class:nr(["row h-100",t.isActivityFileReady?"":"align-items-center"])},[G("div",{class:nr(["navigator","col-12",t.isActivityFileReady?"col-xl-3 col-md-5 d-none d-md-block":"col-md-12"])},[Tot,ge(EC,{isWebAssemblySupported:Pr(K_)},null,8,["isWebAssemblySupported"]),ge(TC,{activityFiles:t.activityFiles,timezoneOffsetHour:t.timezoneOffsetHour},null,8,["activityFiles","timezoneOffsetHour"])],2),Is(G("div",Cot,[G("div",Sot,[G("div",Mot,[ge(uY,{geojsons:t.geojsons,"activity-files":t.activityFiles,timezoneOffsetHoursList:t.timezoneOffsetHoursList,ref:"theMap"},null,8,["geojsons","activity-files","timezoneOffsetHoursList"])]),Rot,G("div",Iot,[G("div",Aot,[G("div",Lot,[ge(wrt,{activityFiles:t.activityFiles,activityTimezoneOffset:t.timezoneOffsetHoursList,onRecord:t.elevationOnRecord},null,8,["activityFiles","activityTimezoneOffset","onRecord"])]),Oot])])])],512),[[Ya,t.isActivityFileReady]])],2)])]))}});const Not=Ql(Fot,[["__scopeId","data-v-ae02f6a5"]]),Dot=Hu({__name:"ActivityView",setup(e){return(t,n)=>(Wt(),qt("main",null,[ge(Not)]))}}),$ot=pN({history:kF("/"),routes:[{path:"/",name:"home",component:Dot},{path:"/activity",name:"activity",component:()=>px(()=>import("./ActivityView-704966ca.js"),[])},{path:"/elevationgraph",name:"elevationgraph",component:()=>px(()=>import("./ElevationGraph-97e2f50a.js"),[])}]}),hb=fF(_N);hb.use(mF());hb.use($ot);hb.mount("#app");export{wrt as E,Dot as _,ge as a,qt as c,Hu as d,Wt as o};
